/*
*
* @ezuikit/theme-simple v0.1.1-beta.1
* Copyright (c) 2024-3-26 Ezviz-OpenBiz
* Released under MIT the License.
*
*/
"use strict";var e=require("@ezuikit/utils-logger"),t=require("@ezuikit/utils-i18n"),r=require("dayjs"),a=require("lodash-es"),n=require("@ezuikit/utils-dom"),s=require("@ezuikit/icons");function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var r,a,n,s,o=[],x=!0,f=!1;try{if(n=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;x=!1}else for(;!(x=(r=n.call(i)).done)&&(o.push(r.value),o.length!==t);x=!0);}catch(e){f=!0,a=e}finally{try{if(!x&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(f)throw a}}return o}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return l(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function h(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=f(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,o=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return s=e.done,e},e:function(e){o=!0,n=e},f:function(){try{s||null==i.return||i.return()}finally{if(o)throw n}}}}
/*
*
* @ezuikit/utils-tools v1.0.1
* Copyright (c) 2024-3-23 Ezviz-OpenBiz
* Released under MIT the License.
*
*/var c=function(e){var t=e.split("?")[1],i={};if(t)for(var r=t.split("&"),a=0;a<r.length;a++){var n=r[a].split("=");i[n[0]]=decodeURIComponent(n[1])}return i};function _(e){var t={};if(/^ezopen:\/\//.test(e)){if(e.includes("@")){var i=e.indexOf("@"),r=e.indexOf("//");t.validateCode=e.substring(r+2,i),e=e.replace(t.validateCode+"@","")}t.protocol=e.split("//")[0],t.search=e.split("?")[1]?"?"+e.split("?")[1]:"",t.hostname=e.split("/")[2],t.origin=t.protocol+"//"+t.hostname,t.pathname=e.split("?")[0].replace(t.origin,""),t.href=e;var a=t.pathname.split("/"),n=a[2].split(".");return t.deviceSerial=a[1],t.channelNo=n[0],t.type=n[n.length-1],"live"===t.type&&(t.definition=n.length>2?n[1]:"sd"),"rec"===t.type&&(t.recType=n.length>2?n[1]:""),t.searchParams=c(e),t}return{}}function u(e){var t,i;return!!((null!=e?e:null==(i=window)||null==(t=i.navigator)?void 0:t.userAgent)||"").match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}function d(e,t){return Object.entries(e).reduce((function(e,i){var r=i[0],a=i[1];return t.includes(r)&&(e[r]=a),e}),{})}var p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var P={exports:{}};!function(e,t){function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":o(e)}!function(r,a){var n="function",s="undefined",o="object",x="string",f="major",l="model",h="name",c="type",_="vendor",u="version",d="architecture",p="console",m="mobile",P="tablet",y="smarttv",S="wearable",b="embedded",g="Amazon",v="Apple",R="ASUS",C="BlackBerry",E="Browser",F="Chrome",T="Firefox",D="Google",I="Huawei",M="LG",A="Microsoft",w="Motorola",L="Opera",B="Samsung",k="Sharp",O="Sony",H="Xiaomi",V="Zebra",N="Facebook",Y="Chromium OS",X="Mac OS",U=function(e){for(var t={},i=0;i<e.length;i++)t[e[i].toUpperCase()]=e[i];return t},W=function(e,t){return(void 0===e?"undefined":i(e))===x&&-1!==G(t).indexOf(G(e))},G=function(e){return e.toLowerCase()},J=function(e,t){if((void 0===e?"undefined":i(e))===x)return e=e.replace(/^\s\s*/,""),(void 0===t?"undefined":i(t))===s?e:e.substring(0,500)},Z=function(e,t){for(var r,s,x,f,l,h,c=0;c<t.length&&!l;){var _=t[c],u=t[c+1];for(r=s=0;r<_.length&&!l&&_[r];)if(l=_[r++].exec(e))for(x=0;x<u.length;x++)h=l[++s],(void 0===(f=u[x])?"undefined":i(f))===o&&f.length>0?2===f.length?i(f[1])==n?this[f[0]]=f[1].call(this,h):this[f[0]]=f[1]:3===f.length?i(f[1])!==n||f[1].exec&&f[1].test?this[f[0]]=h?h.replace(f[1],f[2]):a:this[f[0]]=h?f[1].call(this,h,f[2]):a:4===f.length&&(this[f[0]]=h?f[3].call(this,h.replace(f[1],f[2])):a):this[f]=h||a;c+=2}},j=function(e,t){for(var r in t)if(i(t[r])===o&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(W(t[r][n],e))return"?"===r?a:r}else if(W(t[r],e))return"?"===r?a:r;return e},z={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[u,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[u,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,u],[/opios[\/ ]+([\w\.]+)/i],[u,[h,L+" Mini"]],[/\bopr\/([\w\.]+)/i],[u,[h,L]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[u,[h,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,u],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[u,[h,"UC"+E]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[u,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[u,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[u,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[u,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[u,[h,"Smart Lenovo "+E]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+E],u],[/\bfocus\/([\w\.]+)/i],[u,[h,T+" Focus"]],[/\bopt\/([\w\.]+)/i],[u,[h,L+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[u,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[u,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[u,[h,L+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[u,[h,"MIUI "+E]],[/fxios\/([-\w\.]+)/i],[u,[h,T]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+E]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+E],u],[/samsungbrowser\/([\w\.]+)/i],[u,[h,B+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],u],[/metasr[\/ ]?([\d\.]+)/i],[u,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],u],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[h,u],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,N],u],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,u],[/\bgsa\/([\w\.]+) .*safari\//i],[u,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[u,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[u,[h,F+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,F+" WebView"],u],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[u,[h,"Android "+E]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,u],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[u,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[u,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[u,j,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,u],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],u],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[u,[h,T+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[h,u],[/(cobalt)\/([\w\.]+)/i],[h,[u,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[d,"amd64"]],[/(ia32(?=;))/i],[[d,G]],[/((?:i[346]|x)86)[;\)]/i],[[d,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[d,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[d,"armhf"]],[/windows (ce|mobile); ppc;/i],[[d,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[d,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[d,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[d,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[_,B],[c,P]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[_,B],[c,m]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[l,[_,v],[c,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[_,v],[c,P]],[/(macintosh);/i],[l,[_,v]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[_,k],[c,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[_,I],[c,P]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[_,I],[c,m]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[_,H],[c,m]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[_,H],[c,P]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[_,"OPPO"],[c,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[_,"Vivo"],[c,m]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[l,[_,"Realme"],[c,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[_,w],[c,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[_,w],[c,P]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[_,M],[c,P]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[_,M],[c,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[_,"Lenovo"],[c,P]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[_,"Nokia"],[c,m]],[/(pixel c)\b/i],[l,[_,D],[c,P]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[_,D],[c,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[_,O],[c,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[_,O],[c,P]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[_,"OnePlus"],[c,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[_,g],[c,P]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[_,g],[c,m]],[/(playbook);[-\w\),; ]+(rim)/i],[l,_,[c,P]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[_,C],[c,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[_,R],[c,P]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[_,R],[c,m]],[/(nexus 9)/i],[l,[_,"HTC"],[c,P]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[_,[l,/_/g," "],[c,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[_,"Acer"],[c,P]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[_,"Meizu"],[c,m]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[l,[_,"Ulefone"],[c,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[_,l,[c,m]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[_,l,[c,P]],[/(surface duo)/i],[l,[_,A],[c,P]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[_,"Fairphone"],[c,m]],[/(u304aa)/i],[l,[_,"AT&T"],[c,m]],[/\bsie-(\w*)/i],[l,[_,"Siemens"],[c,m]],[/\b(rct\w+) b/i],[l,[_,"RCA"],[c,P]],[/\b(venue[\d ]{2,7}) b/i],[l,[_,"Dell"],[c,P]],[/\b(q(?:mv|ta)\w+) b/i],[l,[_,"Verizon"],[c,P]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[_,"Barnes & Noble"],[c,P]],[/\b(tm\d{3}\w+) b/i],[l,[_,"NuVision"],[c,P]],[/\b(k88) b/i],[l,[_,"ZTE"],[c,P]],[/\b(nx\d{3}j) b/i],[l,[_,"ZTE"],[c,m]],[/\b(gen\d{3}) b.+49h/i],[l,[_,"Swiss"],[c,m]],[/\b(zur\d{3}) b/i],[l,[_,"Swiss"],[c,P]],[/\b((zeki)?tb.*\b) b/i],[l,[_,"Zeki"],[c,P]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[_,"Dragon Touch"],l,[c,P]],[/\b(ns-?\w{0,9}) b/i],[l,[_,"Insignia"],[c,P]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[_,"NextBook"],[c,P]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[_,"Voice"],l,[c,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[_,"LvTel"],l,[c,m]],[/\b(ph-1) /i],[l,[_,"Essential"],[c,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[_,"Envizen"],[c,P]],[/\b(trio[-\w\. ]+) b/i],[l,[_,"MachSpeed"],[c,P]],[/\btu_(1491) b/i],[l,[_,"Rotor"],[c,P]],[/(shield[\w ]+) b/i],[l,[_,"Nvidia"],[c,P]],[/(sprint) (\w+)/i],[_,l,[c,m]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[_,A],[c,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[_,V],[c,P]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[_,V],[c,m]],[/smart-tv.+(samsung)/i],[_,[c,y]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[_,B],[c,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[_,M],[c,y]],[/(apple) ?tv/i],[_,[l,v+" TV"],[c,y]],[/crkey/i],[[l,F+"cast"],[_,D],[c,y]],[/droid.+aft(\w+)( bui|\))/i],[l,[_,g],[c,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[_,k],[c,y]],[/(bravia[\w ]+)( bui|\))/i],[l,[_,O],[c,y]],[/(mitv-\w{5}) bui/i],[l,[_,H],[c,y]],[/Hbbtv.*(technisat) (.*);/i],[_,l,[c,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[_,J],[l,J],[c,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[c,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[_,l,[c,p]],[/droid.+; (shield) bui/i],[l,[_,"Nvidia"],[c,p]],[/(playstation [345portablevi]+)/i],[l,[_,O],[c,p]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[_,A],[c,p]],[/((pebble))app/i],[_,l,[c,S]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[_,v],[c,S]],[/droid.+; (glass) \d/i],[l,[_,D],[c,S]],[/droid.+; (wt63?0{2,3})\)/i],[l,[_,V],[c,S]],[/(quest( 2| pro)?)/i],[l,[_,N],[c,S]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[_,[c,b]],[/(aeobc)\b/i],[l,[_,g],[c,b]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[l,[c,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[c,P]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[c,P]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[c,m]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[_,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[u,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[u,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,u],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[u,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,u],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[u,j,z]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[u,j,z],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[u,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,X],[u,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[u,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,u],[/\(bb(10);/i],[u,[h,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[u,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[u,[h,T+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[u,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[u,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[u,[h,F+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,Y],u],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,u],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],u],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,u]]},K=function(e,t){if((void 0===e?"undefined":i(e))===o&&(t=e,e=a),p=this,!(null!=(y=K)&&"undefined"!=typeof Symbol&&y[Symbol.hasInstance]?y[Symbol.hasInstance](p):p instanceof y))return new K(e,t).getResult();var p,y,S=(void 0===r?"undefined":i(r))!==s&&r.navigator?r.navigator:a,b=e||(S&&S.userAgent?S.userAgent:""),g=S&&S.userAgentData?S.userAgentData:a,v=t?function(e,t){var i={};for(var r in e)t[r]&&t[r].length%2==0?i[r]=t[r].concat(e[r]):i[r]=e[r];return i}(q,t):q,R=S&&S.userAgent==b;return this.getBrowser=function(){var e,t={};return t[h]=a,t[u]=a,Z.call(t,b,v.browser),t[f]=(void 0===(e=t[u])?"undefined":i(e))===x?e.replace(/[^\d\.]/g,"").split(".")[0]:a,R&&S&&S.brave&&i(S.brave.isBrave)==n&&(t[h]="Brave"),t},this.getCPU=function(){var e={};return e[d]=a,Z.call(e,b,v.cpu),e},this.getDevice=function(){var e={};return e[_]=a,e[l]=a,e[c]=a,Z.call(e,b,v.device),R&&!e[c]&&g&&g.mobile&&(e[c]=m),R&&"Macintosh"==e[l]&&S&&i(S.standalone)!==s&&S.maxTouchPoints&&S.maxTouchPoints>2&&(e[l]="iPad",e[c]=P),e},this.getEngine=function(){var e={};return e[h]=a,e[u]=a,Z.call(e,b,v.engine),e},this.getOS=function(){var e={};return e[h]=a,e[u]=a,Z.call(e,b,v.os),R&&!e[h]&&g&&"Unknown"!=g.platform&&(e[h]=g.platform.replace(/chrome os/i,Y).replace(/macos/i,X)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return b},this.setUA=function(e){return b=(void 0===e?"undefined":i(e))===x&&e.length>500?J(e,500):e,this},this.setUA(b),this};K.VERSION="1.0.37",K.BROWSER=U([h,u,f]),K.CPU=U([d]),K.DEVICE=U([l,_,c,p,m,y,P,S,b]),K.ENGINE=K.OS=U([h,u]),i(t)!==s?(i(e)!==s&&e.exports&&(t=e.exports=K),t.UAParser=K):(void 0===r?"undefined":i(r))!==s&&(r.UAParser=K);var $=(void 0===r?"undefined":i(r))!==s&&(r.jQuery||r.Zepto);if($&&!$.ua){var Q=new K;$.ua=Q.getResult(),$.ua.get=function(){return Q.getUA()},$.ua.set=function(e){Q.setUA(e);var t=Q.getResult();for(var i in t)$.ua[i]=t[i]}}}("object"===("undefined"==typeof window?"undefined":o(window))?window:p)}(P,P.exports);var y=m(P.exports),S=["attribute vec4 vertexPos;","attribute vec2 texturePos;","varying vec2 textureCoord;","void main()","{","gl_Position = vertexPos;","textureCoord = texturePos;","}"].join("\n"),b=["precision highp float;","varying highp vec2 textureCoord;","uniform sampler2D ySampler;","uniform sampler2D uSampler;","uniform sampler2D vSampler;","const mat4 YUV2RGB = mat4","(","1.1643828125, 0, 1.59602734375, -.87078515625,","1.1643828125, -.39176171875, -.81296875, .52959375,","1.1643828125, 2.017234375, 0, -1.081390625,","0, 0, 0, 1",");","void main(void) {","highp float y = texture2D(ySampler,  textureCoord).r;","highp float u = texture2D(uSampler,  textureCoord).r;","highp float v = texture2D(vSampler,  textureCoord).r;","gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;","}"].join("\n");window.SuperRender=function(){function e(e){this.canvasElement=document.getElementById(e),this.initContextGL(),this.contextGL&&(this.YUVProgram=this.initProgram(S,b),this.initBuffers(),this.initTextures())}return e.prototype.initContextGL=function(){var e=this.canvasElement,t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){t=null}t&&"function"==typeof t.getParameter||(t=null),this.contextGL=t},e.prototype.initProgram=function(e,t){var i=this.contextGL,r=i.createShader(i.VERTEX_SHADER);i.shaderSource(r,e),i.compileShader(r),i.getShaderParameter(r,i.COMPILE_STATUS);var a=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(a,t),i.compileShader(a),i.getShaderParameter(a,i.COMPILE_STATUS);var n=i.createProgram();return i.attachShader(n,r),i.attachShader(n,a),i.linkProgram(n),i.getProgramParameter(n,i.LINK_STATUS),i.deleteShader(r),i.deleteShader(a),n},e.prototype.initBuffers=function(){var e=this.contextGL,t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null);var i=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,i),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this.vertexPosBuffer=t,this.texturePosBuffer=i},e.prototype.initTexture=function(){var e=this.contextGL,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),t},e.prototype.initTextures=function(){var e=this.contextGL,t=this.YUVProgram;e.useProgram(t);var i=this.initTexture(),r=e.getUniformLocation(t,"ySampler");e.uniform1i(r,0),this.yTextureRef=i;var a=this.initTexture(),n=e.getUniformLocation(t,"uSampler");e.uniform1i(n,1),this.uTextureRef=a;var s=this.initTexture(),o=e.getUniformLocation(t,"vSampler");e.uniform1i(o,2),this.vTextureRef=s,e.useProgram(null)},e.prototype.SR_DisplayFrameData=function(e,t,i,r,a){if(!(e<=0||t<=0)){var n=this.contextGL;if(null==i)return n.clearColor(0,0,0,0),void n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT);var s=this.canvasElement;this.nWindowWidth=s.width,this.nWindowHeight=s.height;var o=this.nWindowWidth,x=this.nWindowHeight;n.clearColor(.8,.8,1,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.viewport(0,0,o,x),this.updateFrameData(e,t,i,r,a);var f=this.YUVProgram;n.useProgram(f);var l=this.vertexPosBuffer;n.bindBuffer(n.ARRAY_BUFFER,l);var h=n.getAttribLocation(f,"vertexPos");n.enableVertexAttribArray(h),n.vertexAttribPointer(h,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,null);var c=this.texturePosBuffer;n.bindBuffer(n.ARRAY_BUFFER,c);var _=n.getAttribLocation(f,"texturePos");n.enableVertexAttribArray(_),n.vertexAttribPointer(_,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,null),n.drawArrays(n.TRIANGLE_STRIP,0,4),n.disableVertexAttribArray(h),n.disableVertexAttribArray(_),n.useProgram(null)}},e.prototype.updateFrameData=function(e,t,i,r,a){var n=this.contextGL,s=this.yTextureRef,o=this.uTextureRef,x=this.vTextureRef,f=i;if(e==r&&t==a){var l=e*t,h=f.subarray(0,l);n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,s),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,e,t,0,n.LUMINANCE,n.UNSIGNED_BYTE,h);var c=e/2*t/2,_=f.subarray(e*t,e*t+c);n.activeTexture(n.TEXTURE2),n.bindTexture(n.TEXTURE_2D,x),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,e/2,t/2,0,n.LUMINANCE,n.UNSIGNED_BYTE,_);var u=c,d=f.subarray(e*t+e*t/4,e*t+e*t/4+u);n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,e/2,t/2,0,n.LUMINANCE,n.UNSIGNED_BYTE,d)}else{l=r*a,h=new Uint8Array(l);for(var p=0;p<a;p++)for(var m=f.subarray(p*e,p*e+r),P=0;P<r;P++)h[p*r+P]=m[P];for(n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,s),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,r,a,0,n.LUMINANCE,n.UNSIGNED_BYTE,h),h=null,m=null,c=r/2*a/2,_=new Uint8Array(c),p=0;p<a/2;p++){var y=f.subarray(e*t+p*e/2,e*t+p*e/2+r/2);for(P=0;P<r/2;P++)_[p*r/2+P]=y[P]}for(n.activeTexture(n.TEXTURE2),n.bindTexture(n.TEXTURE_2D,x),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,r/2,a/2,0,n.LUMINANCE,n.UNSIGNED_BYTE,_),_=null,y=null,u=c,d=new Uint8Array(u),p=0;p<a/2;p++){var S=f.subarray(e*t*5/4+p*e/2,e*t*5/4+p*e/2+r/2);for(P=0;P<r/2;P++)d[p*r/2+P]=S[P]}n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,r/2,a/2,0,n.LUMINANCE,n.UNSIGNED_BYTE,d),d=null,S=null}},e.prototype.SR_SetDisplayRect=function(e){var t=this.contextGL,i=this.nWindowWidth,r=this.nWindowHeight,a=null;if(e&&i>0&&r>0){var n=e.left/i,s=e.top/r,o=e.right/i,x=e.bottom/r;a=new Float32Array([o,s,n,s,o,x,n,x])}else a=new Float32Array([1,0,0,0,1,1,0,1]);var f=this.texturePosBuffer;t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferSubData(t.ARRAY_BUFFER,0,a),t.bindBuffer(t.ARRAY_BUFFER,null)},e.prototype.SR_Destroy=function(){var e=this.contextGL,t=this.YUVProgram;e.deleteProgram(t);var i=this.vertexPosBuffer,r=this.texturePosBuffer;e.deleteBuffer(i),e.deleteBuffer(r);var a=this.yTextureRef,n=this.uTextureRef,s=this.vTextureRef;e.deleteTexture(a),e.deleteTexture(n),e.deleteTexture(s)},e}(),function(){var e=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}();var t,i=(t=void 0,function(e){return e&&(t=e),t});function r(){if(function(e,t){if(i=e,!(null!=(r=t)&&"undefined"!=typeof Symbol&&r[Symbol.hasInstance]?r[Symbol.hasInstance](i):i instanceof r))throw new TypeError("Cannot call a class as a function");var i,r}(this,r),i())return i();if(void 0!==r.unique)return r.unique;r.unique=this,this.oAudioContext=null,this.currentVolume=80,this.bSetVolume=!1,this.gainNode=null,this.iWndNum=-1,this.mVolumes=new Map;var e=window.AudioContext||window.webkitAudioContext;this.oAudioContext=new e,this.writeString=function(e,t,i){for(var r=0;r<i.length;r++)e.setUint8(t+r,i.charCodeAt(r))},this.setBufferToDataview=function(e,t,i){for(var r=0;r<i.length;r++,t++)e.setUint8(t,i[r])},i(this)}e(r,[{key:"Play",value:function(e,t,i){var r=new ArrayBuffer(44+t),a=new DataView(r),n=i.samplesPerSec,s=i.channels,o=i.bitsPerSample;this.writeString(a,0,"RIFF"),a.setUint32(4,32+2*t,!0),this.writeString(a,8,"WAVE"),this.writeString(a,12,"fmt "),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,s,!0),a.setUint32(24,n,!0),a.setUint32(28,2*n,!0),a.setUint16(32,s*o/8,!0),a.setUint16(34,o,!0),this.writeString(a,36,"data"),a.setUint32(40,t,!0),this.setBufferToDataview(a,44,e);var x=this;return this.oAudioContext.decodeAudioData(a.buffer,(function(e){var t=x.oAudioContext.createBufferSource();if(null==t)return-1;t.buffer=e,t.start(0),(null==x.gainNode||x.bSetVolume)&&(x.gainNode=x.oAudioContext.createGain(),x.bSetVolume=!1),x.gainNode.gain.value=x.currentVolume/100,x.gainNode.connect(x.oAudioContext.destination),t.connect(x.gainNode)}),(function(e){return-1})),0}},{key:"Stop",value:function(){return null!=this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),!0}},{key:"SetVolume",value:function(e){return this.bSetVolume=!0,this.currentVolume=e,this.mVolumes.set(this.iWndNum,this.currentVolume),!0}},{key:"SetWndNum",value:function(e){this.iWndNum=e;var t=this.mVolumes.get(e);return null==t&&(t=80),this.currentVolume=t,!0}},{key:"GetVolume",value:function(){var e=this.mVolumes.get(this.iWndNum);return null==e&&(e=80),e}}]),window.AudioRenderer=r}();var g="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function R(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var C={exports:{}};!function(e){!function(t,i){e.exports=t.document?i(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return i(e)}}("undefined"!=typeof window?window:g,(function(e,t){var i=[],r=Object.getPrototypeOf,a=i.slice,n=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},s=i.push,x=i.indexOf,f={},l=f.toString,h=f.hasOwnProperty,c=h.toString,_=c.call(Object),u={},d=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},p=function(e){return null!=e&&e===e.window},m=e.document,P={type:!0,src:!0,nonce:!0,noModule:!0};function y(e,t,i){var r,a,n=(i=i||m).createElement("script");if(n.text=e,t)for(r in P)(a=t[r]||t.getAttribute&&t.getAttribute(r))&&n.setAttribute(r,a);i.head.appendChild(n).parentNode.removeChild(n)}function S(e){return null==e?e+"":"object"==o(e)||"function"==typeof e?f[l.call(e)]||"object":o(e)}var b="3.7.1",g=/HTML$/i,v=function e(t,i){return new e.fn.init(t,i)};function R(e){var t=!!e&&"length"in e&&e.length,i=S(e);return!d(e)&&!p(e)&&("array"===i||0===t||"number"==typeof t&&t>0&&t-1 in e)}function C(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}v.fn=v.prototype={jquery:b,constructor:v,length:0,toArray:function(){return a.call(this)},get:function(e){return null==e?a.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=v.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return v.each(this,e)},map:function(e){return this.pushStack(v.map(this,(function(t,i){return e.call(t,i,t)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(v.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(v.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,i=+e+(e<0?t:0);return this.pushStack(i>=0&&i<t?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:i.sort,splice:i.splice},v.extend=v.fn.extend=function(){var e,t,i,r,a,n,s=arguments[0]||{},x=1,f=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[x]||{},x++),"object"==o(s)||d(s)||(s={}),x===f&&(s=this,x--);x<f;x++)if(null!=(e=arguments[x]))for(t in e)r=e[t],"__proto__"!==t&&s!==r&&(l&&r&&(v.isPlainObject(r)||(a=Array.isArray(r)))?(i=s[t],n=a&&!Array.isArray(i)?[]:a||v.isPlainObject(i)?i:{},a=!1,s[t]=v.extend(l,n,r)):void 0!==r&&(s[t]=r));return s},v.extend({expando:"jQuery"+(b+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,i;return!(!e||"[object Object]"!==l.call(e)||(t=r(e))&&("function"!=typeof(i=h.call(t,"constructor")&&t.constructor)||c.call(i)!==_))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,i){y(e,{nonce:t&&t.nonce},i)},each:function(e,t){var i,r=0;if(R(e))for(i=e.length;r<i&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},text:function(e){var t,i="",r=0,a=e.nodeType;if(!a)for(;t=e[r++];)i+=v.text(t);return 1===a||11===a?e.textContent:9===a?e.documentElement.textContent:3===a||4===a?e.nodeValue:i},makeArray:function(e,t){var i=t||[];return null!=e&&(R(Object(e))?v.merge(i,"string"==typeof e?[e]:e):s.call(i,e)),i},inArray:function(e,t,i){return null==t?-1:x.call(t,e,i)},isXMLDoc:function(e){var t=e&&e.namespaceURI,i=e&&(e.ownerDocument||e).documentElement;return!g.test(t||i&&i.nodeName||"HTML")},merge:function(e,t){for(var i=+t.length,r=0,a=e.length;r<i;r++)e[a++]=t[r];return e.length=a,e},grep:function(e,t,i){for(var r=[],a=0,n=e.length,s=!i;a<n;a++)!t(e[a],a)!==s&&r.push(e[a]);return r},map:function(e,t,i){var r,a,s=0,o=[];if(R(e))for(r=e.length;s<r;s++)null!=(a=t(e[s],s,i))&&o.push(a);else for(s in e)null!=(a=t(e[s],s,i))&&o.push(a);return n(o)},guid:1,support:u}),"function"==typeof Symbol&&(v.fn[Symbol.iterator]=i[Symbol.iterator]),v.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){f["[object "+t+"]"]=t.toLowerCase()}));var E=i.pop,F=i.sort,T=i.splice,D="[\\x20\\t\\r\\n\\f]",I=new RegExp("^"+D+"+|((?:^|[^\\\\])(?:\\\\.)*)"+D+"+$","g");v.contains=function(e,t){var i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(e.contains?e.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))};var M=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function A(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}v.escapeSelector=function(e){return(e+"").replace(M,A)};var w=m,L=s;!function(){var t,r,n,s,o,f,l,c,_,d,p=L,m=v.expando,P=0,y=0,S=ee(),b=ee(),g=ee(),R=ee(),M=function(e,t){return e===t&&(o=!0),0},A="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="(?:\\\\[\\da-fA-F]{1,6}"+D+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",k="\\["+D+"*("+B+")(?:"+D+"*([*^$|!~]?=)"+D+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+B+"))|)"+D+"*\\]",O=":("+B+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+k+")*)|.*)\\)|)",H=new RegExp(D+"+","g"),V=new RegExp("^"+D+"*,"+D+"*"),N=new RegExp("^"+D+"*([>+~]|"+D+")"+D+"*"),Y=new RegExp(D+"|>"),X=new RegExp(O),U=new RegExp("^"+B+"$"),W={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),TAG:new RegExp("^("+B+"|[*])"),ATTR:new RegExp("^"+k),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+D+"*(even|odd|(([+-]|)(\\d*)n|)"+D+"*(?:([+-]|)"+D+"*(\\d+)|))"+D+"*\\)|)","i"),bool:new RegExp("^(?:"+A+")$","i"),needsContext:new RegExp("^"+D+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+D+"*((?:-\\d)?\\d*)"+D+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,j=/[+~]/,z=new RegExp("\\\\[\\da-fA-F]{1,6}"+D+"?|\\\\([^\\r\\n\\f])","g"),q=function(e,t){var i="0x"+e.slice(1)-65536;return t||(i<0?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320))},K=function(){xe()},$=ce((function(e){return!0===e.disabled&&C(e,"fieldset")}),{dir:"parentNode",next:"legend"});try{p.apply(i=a.call(w.childNodes),w.childNodes),i[w.childNodes.length].nodeType}catch(e){p={apply:function(e,t){L.apply(e,a.call(t))},call:function(e){L.apply(e,a.call(arguments,1))}}}function Q(e,t,i,r){var a,n,s,o,x,l,h,d=t&&t.ownerDocument,P=t?t.nodeType:9;if(i=i||[],"string"!=typeof e||!e||1!==P&&9!==P&&11!==P)return i;if(!r&&(xe(t),t=t||f,c)){if(11!==P&&(x=Z.exec(e)))if(a=x[1]){if(9===P){if(!(s=t.getElementById(a)))return i;if(s.id===a)return p.call(i,s),i}else if(d&&(s=d.getElementById(a))&&Q.contains(t,s)&&s.id===a)return p.call(i,s),i}else{if(x[2])return p.apply(i,t.getElementsByTagName(e)),i;if((a=x[3])&&t.getElementsByClassName)return p.apply(i,t.getElementsByClassName(a)),i}if(!(R[e+" "]||_&&_.test(e))){if(h=e,d=t,1===P&&(Y.test(e)||N.test(e))){for((d=j.test(e)&&oe(t.parentNode)||t)==t&&u.scope||((o=t.getAttribute("id"))?o=v.escapeSelector(o):t.setAttribute("id",o=m)),n=(l=le(e)).length;n--;)l[n]=(o?"#"+o:":scope")+" "+he(l[n]);h=l.join(",")}try{return p.apply(i,d.querySelectorAll(h)),i}catch(t){R(e,!0)}finally{o===m&&t.removeAttribute("id")}}}return Pe(e.replace(I,"$1"),t,i,r)}function ee(){var e=[];return function t(i,a){return e.push(i+" ")>r.cacheLength&&delete t[e.shift()],t[i+" "]=a}}function te(e){return e[m]=!0,e}function ie(e){var t=f.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function re(e){return function(t){return C(t,"input")&&t.type===e}}function ae(e){return function(t){return(C(t,"input")||C(t,"button"))&&t.type===e}}function ne(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&$(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function se(e){return te((function(t){return t=+t,te((function(i,r){for(var a,n=e([],i.length,t),s=n.length;s--;)i[a=n[s]]&&(i[a]=!(r[a]=i[a]))}))}))}function oe(e){return e&&void 0!==e.getElementsByTagName&&e}function xe(e){var t,i=e?e.ownerDocument||e:w;return i!=f&&9===i.nodeType&&i.documentElement?(l=(f=i).documentElement,c=!v.isXMLDoc(f),d=l.matches||l.webkitMatchesSelector||l.msMatchesSelector,l.msMatchesSelector&&w!=f&&(t=f.defaultView)&&t.top!==t&&t.addEventListener("unload",K),u.getById=ie((function(e){return l.appendChild(e).id=v.expando,!f.getElementsByName||!f.getElementsByName(v.expando).length})),u.disconnectedMatch=ie((function(e){return d.call(e,"*")})),u.scope=ie((function(){return f.querySelectorAll(":scope")})),u.cssHas=ie((function(){try{return f.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}})),u.getById?(r.filter.ID=function(e){var t=e.replace(z,q);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&c){var i=t.getElementById(e);return i?[i]:[]}}):(r.filter.ID=function(e){var t=e.replace(z,q);return function(e){var i=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return i&&i.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&c){var i,r,a,n=t.getElementById(e);if(n){if((i=n.getAttributeNode("id"))&&i.value===e)return[n];for(a=t.getElementsByName(e),r=0;n=a[r++];)if((i=n.getAttributeNode("id"))&&i.value===e)return[n]}return[]}}),r.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},r.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&c)return t.getElementsByClassName(e)},_=[],ie((function(e){var t;l.appendChild(e).innerHTML="<a id='"+m+"' href='' disabled='disabled'></a><select id='"+m+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||_.push("\\["+D+"*(?:value|"+A+")"),e.querySelectorAll("[id~="+m+"-]").length||_.push("~="),e.querySelectorAll("a#"+m+"+*").length||_.push(".#.+[+~]"),e.querySelectorAll(":checked").length||_.push(":checked"),(t=f.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),l.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&_.push(":enabled",":disabled"),(t=f.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||_.push("\\["+D+"*name"+D+"*="+D+"*(?:''|\"\")")})),u.cssHas||_.push(":has"),_=_.length&&new RegExp(_.join("|")),M=function(e,t){if(e===t)return o=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i||(1&(i=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!u.sortDetached&&t.compareDocumentPosition(e)===i?e===f||e.ownerDocument==w&&Q.contains(w,e)?-1:t===f||t.ownerDocument==w&&Q.contains(w,t)?1:s?x.call(s,e)-x.call(s,t):0:4&i?-1:1)},f):f}for(t in Q.matches=function(e,t){return Q(e,null,null,t)},Q.matchesSelector=function(e,t){if(xe(e),c&&!R[t+" "]&&(!_||!_.test(t)))try{var i=d.call(e,t);if(i||u.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){R(t,!0)}return Q(t,f,null,[e]).length>0},Q.contains=function(e,t){return(e.ownerDocument||e)!=f&&xe(e),v.contains(e,t)},Q.attr=function(e,t){(e.ownerDocument||e)!=f&&xe(e);var i=r.attrHandle[t.toLowerCase()],a=i&&h.call(r.attrHandle,t.toLowerCase())?i(e,t,!c):void 0;return void 0!==a?a:e.getAttribute(t)},Q.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},v.uniqueSort=function(e){var t,i=[],r=0,n=0;if(o=!u.sortStable,s=!u.sortStable&&a.call(e,0),F.call(e,M),o){for(;t=e[n++];)t===e[n]&&(r=i.push(n));for(;r--;)T.call(e,i[r],1)}return s=null,e},v.fn.uniqueSort=function(){return this.pushStack(v.uniqueSort(a.apply(this)))},r=v.expr={cacheLength:50,createPseudo:te,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(z,q),e[3]=(e[3]||e[4]||e[5]||"").replace(z,q),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Q.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Q.error(e[0]),e},PSEUDO:function(e){var t,i=!e[6]&&e[2];return W.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":i&&X.test(i)&&(t=le(i,!0))&&(t=i.indexOf(")",i.length-t)-i.length)&&(e[0]=e[0].slice(0,t),e[2]=i.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(z,q).toLowerCase();return"*"===e?function(){return!0}:function(e){return C(e,t)}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+D+")"+e+"("+D+"|$)"))&&S(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,i){return function(r){var a=Q.attr(r,e);return null==a?"!="===t:!t||(a+="","="===t?a===i:"!="===t?a!==i:"^="===t?i&&0===a.indexOf(i):"*="===t?i&&a.indexOf(i)>-1:"$="===t?i&&a.slice(-i.length)===i:"~="===t?(" "+a.replace(H," ")+" ").indexOf(i)>-1:"|="===t&&(a===i||a.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,i,r,a){var n="nth"!==e.slice(0,3),s="last"!==e.slice(-4),o="of-type"===t;return 1===r&&0===a?function(e){return!!e.parentNode}:function(t,i,x){var f,l,h,c,_,u=n!==s?"nextSibling":"previousSibling",d=t.parentNode,p=o&&t.nodeName.toLowerCase(),y=!x&&!o,S=!1;if(d){if(n){for(;u;){for(h=t;h=h[u];)if(o?C(h,p):1===h.nodeType)return!1;_=u="only"===e&&!_&&"nextSibling"}return!0}if(_=[s?d.firstChild:d.lastChild],s&&y){for(S=(c=(f=(l=d[m]||(d[m]={}))[e]||[])[0]===P&&f[1])&&f[2],h=c&&d.childNodes[c];h=++c&&h&&h[u]||(S=c=0)||_.pop();)if(1===h.nodeType&&++S&&h===t){l[e]=[P,c,S];break}}else if(y&&(S=c=(f=(l=t[m]||(t[m]={}))[e]||[])[0]===P&&f[1]),!1===S)for(;(h=++c&&h&&h[u]||(S=c=0)||_.pop())&&(!(o?C(h,p):1===h.nodeType)||!++S||(y&&((l=h[m]||(h[m]={}))[e]=[P,S]),h!==t)););return(S-=a)===r||S%r==0&&S/r>=0}}},PSEUDO:function(e,t){var i,a=r.pseudos[e]||r.setFilters[e.toLowerCase()]||Q.error("unsupported pseudo: "+e);return a[m]?a(t):a.length>1?(i=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?te((function(e,i){for(var r,n=a(e,t),s=n.length;s--;)e[r=x.call(e,n[s])]=!(i[r]=n[s])})):function(e){return a(e,0,i)}):a}},pseudos:{not:te((function(e){var t=[],i=[],r=me(e.replace(I,"$1"));return r[m]?te((function(e,t,i,a){for(var n,s=r(e,null,a,[]),o=e.length;o--;)(n=s[o])&&(e[o]=!(t[o]=n))})):function(e,a,n){return t[0]=e,r(t,null,n,i),t[0]=null,!i.pop()}})),has:te((function(e){return function(t){return Q(e,t).length>0}})),contains:te((function(e){return e=e.replace(z,q),function(t){return(t.textContent||v.text(t)).indexOf(e)>-1}})),lang:te((function(e){return U.test(e||"")||Q.error("unsupported lang: "+e),e=e.replace(z,q).toLowerCase(),function(t){var i;do{if(i=c?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(i=i.toLowerCase())===e||0===i.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var i=e.location&&e.location.hash;return i&&i.slice(1)===t.id},root:function(e){return e===l},focus:function(e){return e===function(){try{return f.activeElement}catch(e){}}()&&f.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:ne(!1),disabled:ne(!0),checked:function(e){return C(e,"input")&&!!e.checked||C(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){return C(e,"input")&&"button"===e.type||C(e,"button")},text:function(e){var t;return C(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:se((function(){return[0]})),last:se((function(e,t){return[t-1]})),eq:se((function(e,t,i){return[i<0?i+t:i]})),even:se((function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e})),odd:se((function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e})),lt:se((function(e,t,i){var r;for(r=i<0?i+t:i>t?t:i;--r>=0;)e.push(r);return e})),gt:se((function(e,t,i){for(var r=i<0?i+t:i;++r<t;)e.push(r);return e}))}},r.pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=re(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=ae(t);function fe(){}function le(e,t){var i,a,n,s,o,x,f,l=b[e+" "];if(l)return t?0:l.slice(0);for(o=e,x=[],f=r.preFilter;o;){for(s in i&&!(a=V.exec(o))||(a&&(o=o.slice(a[0].length)||o),x.push(n=[])),i=!1,(a=N.exec(o))&&(i=a.shift(),n.push({value:i,type:a[0].replace(I," ")}),o=o.slice(i.length)),r.filter)!(a=W[s].exec(o))||f[s]&&!(a=f[s](a))||(i=a.shift(),n.push({value:i,type:s,matches:a}),o=o.slice(i.length));if(!i)break}return t?o.length:o?Q.error(e):b(e,x).slice(0)}function he(e){for(var t=0,i=e.length,r="";t<i;t++)r+=e[t].value;return r}function ce(e,t,i){var r=t.dir,a=t.next,n=a||r,s=i&&"parentNode"===n,o=y++;return t.first?function(t,i,a){for(;t=t[r];)if(1===t.nodeType||s)return e(t,i,a);return!1}:function(t,i,x){var f,l,h=[P,o];if(x){for(;t=t[r];)if((1===t.nodeType||s)&&e(t,i,x))return!0}else for(;t=t[r];)if(1===t.nodeType||s)if(l=t[m]||(t[m]={}),a&&C(t,a))t=t[r]||t;else{if((f=l[n])&&f[0]===P&&f[1]===o)return h[2]=f[2];if(l[n]=h,h[2]=e(t,i,x))return!0}return!1}}function _e(e){return e.length>1?function(t,i,r){for(var a=e.length;a--;)if(!e[a](t,i,r))return!1;return!0}:e[0]}function ue(e,t,i,r,a){for(var n,s=[],o=0,x=e.length,f=null!=t;o<x;o++)(n=e[o])&&(i&&!i(n,r,a)||(s.push(n),f&&t.push(o)));return s}function de(e,t,i,r,a,n){return r&&!r[m]&&(r=de(r)),a&&!a[m]&&(a=de(a,n)),te((function(n,s,o,f){var l,h,c,_,u=[],d=[],m=s.length,P=n||function(e,t,i){for(var r=0,a=t.length;r<a;r++)Q(e,t[r],i);return i}(t||"*",o.nodeType?[o]:o,[]),y=!e||!n&&t?P:ue(P,u,e,o,f);if(i?i(y,_=a||(n?e:m||r)?[]:s,o,f):_=y,r)for(l=ue(_,d),r(l,[],o,f),h=l.length;h--;)(c=l[h])&&(_[d[h]]=!(y[d[h]]=c));if(n){if(a||e){if(a){for(l=[],h=_.length;h--;)(c=_[h])&&l.push(y[h]=c);a(null,_=[],l,f)}for(h=_.length;h--;)(c=_[h])&&(l=a?x.call(n,c):u[h])>-1&&(n[l]=!(s[l]=c))}}else _=ue(_===s?_.splice(m,_.length):_),a?a(null,s,_,f):p.apply(s,_)}))}function pe(e){for(var t,i,a,s=e.length,o=r.relative[e[0].type],f=o||r.relative[" "],l=o?1:0,h=ce((function(e){return e===t}),f,!0),c=ce((function(e){return x.call(t,e)>-1}),f,!0),_=[function(e,i,r){var a=!o&&(r||i!=n)||((t=i).nodeType?h(e,i,r):c(e,i,r));return t=null,a}];l<s;l++)if(i=r.relative[e[l].type])_=[ce(_e(_),i)];else{if((i=r.filter[e[l].type].apply(null,e[l].matches))[m]){for(a=++l;a<s&&!r.relative[e[a].type];a++);return de(l>1&&_e(_),l>1&&he(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(I,"$1"),i,l<a&&pe(e.slice(l,a)),a<s&&pe(e=e.slice(a)),a<s&&he(e))}_.push(i)}return _e(_)}function me(e,t){var i,a=[],s=[],o=g[e+" "];if(!o){for(t||(t=le(e)),i=t.length;i--;)(o=pe(t[i]))[m]?a.push(o):s.push(o);o=g(e,function(e,t){var i=t.length>0,a=e.length>0,s=function(s,o,x,l,h){var _,u,d,m=0,y="0",S=s&&[],b=[],g=n,R=s||a&&r.find.TAG("*",h),C=P+=null==g?1:Math.random()||.1,F=R.length;for(h&&(n=o==f||o||h);y!==F&&null!=(_=R[y]);y++){if(a&&_){for(u=0,o||_.ownerDocument==f||(xe(_),x=!c);d=e[u++];)if(d(_,o||f,x)){p.call(l,_);break}h&&(P=C)}i&&((_=!d&&_)&&m--,s&&S.push(_))}if(m+=y,i&&y!==m){for(u=0;d=t[u++];)d(S,b,o,x);if(s){if(m>0)for(;y--;)S[y]||b[y]||(b[y]=E.call(l));b=ue(b)}p.apply(l,b),h&&!s&&b.length>0&&m+t.length>1&&v.uniqueSort(l)}return h&&(P=C,n=g),S};return i?te(s):s}(s,a)),o.selector=e}return o}function Pe(e,t,i,a){var n,s,o,x,f,l="function"==typeof e&&e,h=!a&&le(e=l.selector||e);if(i=i||[],1===h.length){if((s=h[0]=h[0].slice(0)).length>2&&"ID"===(o=s[0]).type&&9===t.nodeType&&c&&r.relative[s[1].type]){if(!(t=(r.find.ID(o.matches[0].replace(z,q),t)||[])[0]))return i;l&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(n=W.needsContext.test(e)?0:s.length;n--&&(o=s[n],!r.relative[x=o.type]);)if((f=r.find[x])&&(a=f(o.matches[0].replace(z,q),j.test(s[0].type)&&oe(t.parentNode)||t))){if(s.splice(n,1),!(e=a.length&&he(s)))return p.apply(i,a),i;break}}return(l||me(e,h))(a,t,!c,i,!t||j.test(e)&&oe(t.parentNode)||t),i}fe.prototype=r.filters=r.pseudos,r.setFilters=new fe,u.sortStable=m.split("").sort(M).join("")===m,xe(),u.sortDetached=ie((function(e){return 1&e.compareDocumentPosition(f.createElement("fieldset"))})),v.find=Q,v.expr[":"]=v.expr.pseudos,v.unique=v.uniqueSort,Q.compile=me,Q.select=Pe,Q.setDocument=xe,Q.tokenize=le,Q.escape=v.escapeSelector,Q.getText=v.text,Q.isXML=v.isXMLDoc,Q.selectors=v.expr,Q.support=v.support,Q.uniqueSort=v.uniqueSort}();var B=function(e,t,i){for(var r=[],a=void 0!==i;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&v(e).is(i))break;r.push(e)}return r},k=function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i},O=v.expr.match.needsContext,H=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function V(e,t,i){return d(t)?v.grep(e,(function(e,r){return!!t.call(e,r,e)!==i})):t.nodeType?v.grep(e,(function(e){return e===t!==i})):"string"!=typeof t?v.grep(e,(function(e){return x.call(t,e)>-1!==i})):v.filter(t,e,i)}v.filter=function(e,t,i){var r=t[0];return i&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?v.find.matchesSelector(r,e)?[r]:[]:v.find.matches(e,v.grep(t,(function(e){return 1===e.nodeType})))},v.fn.extend({find:function(e){var t,i,r=this.length,a=this;if("string"!=typeof e)return this.pushStack(v(e).filter((function(){for(t=0;t<r;t++)if(v.contains(a[t],this))return!0})));for(i=this.pushStack([]),t=0;t<r;t++)v.find(e,a[t],i);return r>1?v.uniqueSort(i):i},filter:function(e){return this.pushStack(V(this,e||[],!1))},not:function(e){return this.pushStack(V(this,e||[],!0))},is:function(e){return!!V(this,"string"==typeof e&&O.test(e)?v(e):e||[],!1).length}});var N,Y=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,X=v.fn.init=function(e,t,i){var r,a;if(!e)return this;if(i=i||N,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Y.exec(e))||!r[1]&&t)return!t||t.jquery?(t||i).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof v?t[0]:t,v.merge(this,v.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:m,!0)),H.test(r[1])&&v.isPlainObject(t))for(r in t)d(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(a=m.getElementById(r[2]))&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):d(e)?void 0!==i.ready?i.ready(e):e(v):v.makeArray(e,this)};X.prototype=v.fn,N=v(m);var U=/^(?:parents|prev(?:Until|All))/,W={children:!0,contents:!0,next:!0,prev:!0};function G(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}v.fn.extend({has:function(e){var t=v(e,this),i=t.length;return this.filter((function(){for(var e=0;e<i;e++)if(v.contains(this,t[e]))return!0}))},closest:function(e,t){var i,r=0,a=this.length,n=[],s="string"!=typeof e&&v(e);if(!O.test(e))for(;r<a;r++)for(i=this[r];i&&i!==t;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&v.find.matchesSelector(i,e))){n.push(i);break}return this.pushStack(n.length>1?v.uniqueSort(n):n)},index:function(e){return e?"string"==typeof e?x.call(v(e),this[0]):x.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(v.uniqueSort(v.merge(this.get(),v(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),v.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return B(e,"parentNode")},parentsUntil:function(e,t,i){return B(e,"parentNode",i)},next:function(e){return G(e,"nextSibling")},prev:function(e){return G(e,"previousSibling")},nextAll:function(e){return B(e,"nextSibling")},prevAll:function(e){return B(e,"previousSibling")},nextUntil:function(e,t,i){return B(e,"nextSibling",i)},prevUntil:function(e,t,i){return B(e,"previousSibling",i)},siblings:function(e){return k((e.parentNode||{}).firstChild,e)},children:function(e){return k(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(C(e,"template")&&(e=e.content||e),v.merge([],e.childNodes))}},(function(e,t){v.fn[e]=function(i,r){var a=v.map(this,t,i);return"Until"!==e.slice(-5)&&(r=i),r&&"string"==typeof r&&(a=v.filter(r,a)),this.length>1&&(W[e]||v.uniqueSort(a),U.test(e)&&a.reverse()),this.pushStack(a)}}));var J=/[^\x20\t\r\n\f]+/g;function Z(e){return e}function j(e){throw e}function z(e,t,i,r){var a;try{e&&d(a=e.promise)?a.call(e).done(t).fail(i):e&&d(a=e.then)?a.call(e,t,i):t.apply(void 0,[e].slice(r))}catch(e){i.apply(void 0,[e])}}v.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return v.each(e.match(J)||[],(function(e,i){t[i]=!0})),t}(e):v.extend({},e);var t,i,r,a,n=[],s=[],o=-1,x=function(){for(a=a||e.once,r=t=!0;s.length;o=-1)for(i=s.shift();++o<n.length;)!1===n[o].apply(i[0],i[1])&&e.stopOnFalse&&(o=n.length,i=!1);e.memory||(i=!1),t=!1,a&&(n=i?[]:"")},f={add:function(){return n&&(i&&!t&&(o=n.length-1,s.push(i)),function t(i){v.each(i,(function(i,r){d(r)?e.unique&&f.has(r)||n.push(r):r&&r.length&&"string"!==S(r)&&t(r)}))}(arguments),i&&!t&&x()),this},remove:function(){return v.each(arguments,(function(e,t){for(var i;(i=v.inArray(t,n,i))>-1;)n.splice(i,1),i<=o&&o--})),this},has:function(e){return e?v.inArray(e,n)>-1:n.length>0},empty:function(){return n&&(n=[]),this},disable:function(){return a=s=[],n=i="",this},disabled:function(){return!n},lock:function(){return a=s=[],i||t||(n=i=""),this},locked:function(){return!!a},fireWith:function(e,i){return a||(i=[e,(i=i||[]).slice?i.slice():i],s.push(i),t||x()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!r}};return f},v.extend({Deferred:function(t){var i=[["notify","progress",v.Callbacks("memory"),v.Callbacks("memory"),2],["resolve","done",v.Callbacks("once memory"),v.Callbacks("once memory"),0,"resolved"],["reject","fail",v.Callbacks("once memory"),v.Callbacks("once memory"),1,"rejected"]],r="pending",a={state:function(){return r},always:function(){return n.done(arguments).fail(arguments),this},catch:function(e){return a.then(null,e)},pipe:function(){var e=arguments;return v.Deferred((function(t){v.each(i,(function(i,r){var a=d(e[r[4]])&&e[r[4]];n[r[1]]((function(){var e=a&&a.apply(this,arguments);e&&d(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[r[0]+"With"](this,a?[e]:arguments)}))})),e=null})).promise()},then:function(t,r,a){var n=0;function s(t,i,r,a){return function(){var x=this,f=arguments,l=function(){var e,l;if(!(t<n)){if((e=r.apply(x,f))===i.promise())throw new TypeError("Thenable self-resolution");l=e&&("object"==o(e)||"function"==typeof e)&&e.then,d(l)?a?l.call(e,s(n,i,Z,a),s(n,i,j,a)):(n++,l.call(e,s(n,i,Z,a),s(n,i,j,a),s(n,i,Z,i.notifyWith))):(r!==Z&&(x=void 0,f=[e]),(a||i.resolveWith)(x,f))}},h=a?l:function(){try{l()}catch(e){v.Deferred.exceptionHook&&v.Deferred.exceptionHook(e,h.error),t+1>=n&&(r!==j&&(x=void 0,f=[e]),i.rejectWith(x,f))}};t?h():(v.Deferred.getErrorHook?h.error=v.Deferred.getErrorHook():v.Deferred.getStackHook&&(h.error=v.Deferred.getStackHook()),e.setTimeout(h))}}return v.Deferred((function(e){i[0][3].add(s(0,e,d(a)?a:Z,e.notifyWith)),i[1][3].add(s(0,e,d(t)?t:Z)),i[2][3].add(s(0,e,d(r)?r:j))})).promise()},promise:function(e){return null!=e?v.extend(e,a):a}},n={};return v.each(i,(function(e,t){var s=t[2],o=t[5];a[t[1]]=s.add,o&&s.add((function(){r=o}),i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock),s.add(t[3].fire),n[t[0]]=function(){return n[t[0]+"With"](this===n?void 0:this,arguments),this},n[t[0]+"With"]=s.fireWith})),a.promise(n),t&&t.call(n,n),n},when:function(e){var t=arguments.length,i=t,r=Array(i),n=a.call(arguments),s=v.Deferred(),o=function(e){return function(i){r[e]=this,n[e]=arguments.length>1?a.call(arguments):i,--t||s.resolveWith(r,n)}};if(t<=1&&(z(e,s.done(o(i)).resolve,s.reject,!t),"pending"===s.state()||d(n[i]&&n[i].then)))return s.then();for(;i--;)z(n[i],o(i),s.reject);return s.promise()}});var q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;v.Deferred.exceptionHook=function(t,i){e.console&&e.console.warn&&t&&q.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,i)},v.readyException=function(t){e.setTimeout((function(){throw t}))};var K=v.Deferred();function $(){m.removeEventListener("DOMContentLoaded",$),e.removeEventListener("load",$),v.ready()}v.fn.ready=function(e){return K.then(e).catch((function(e){v.readyException(e)})),this},v.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--v.readyWait:v.isReady)||(v.isReady=!0,!0!==e&&--v.readyWait>0||K.resolveWith(m,[v]))}}),v.ready.then=K.then,"complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll?e.setTimeout(v.ready):(m.addEventListener("DOMContentLoaded",$),e.addEventListener("load",$));var Q=function e(t,i,r,a,n,s,o){var x=0,f=t.length,l=null==r;if("object"===S(r))for(x in n=!0,r)e(t,i,x,r[x],!0,s,o);else if(void 0!==a&&(n=!0,d(a)||(o=!0),l&&(o?(i.call(t,a),i=null):(l=i,i=function(e,t,i){return l.call(v(e),i)})),i))for(;x<f;x++)i(t[x],r,o?a:a.call(t[x],x,i(t[x],r)));return n?t:l?i.call(t):f?i(t[0],r):s},ee=/^-ms-/,te=/-([a-z])/g;function ie(e,t){return t.toUpperCase()}function re(e){return e.replace(ee,"ms-").replace(te,ie)}var ae=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function ne(){this.expando=v.expando+ne.uid++}ne.uid=1,ne.prototype={cache:function(e){var t=e[this.expando];return t||(t={},ae(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,i){var r,a=this.cache(e);if("string"==typeof t)a[re(t)]=i;else for(r in t)a[re(r)]=t[r];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][re(t)]},access:function(e,t,i){return void 0===t||t&&"string"==typeof t&&void 0===i?this.get(e,t):(this.set(e,t,i),void 0!==i?i:t)},remove:function(e,t){var i,r=e[this.expando];if(void 0!==r){if(void 0!==t){i=(t=Array.isArray(t)?t.map(re):(t=re(t))in r?[t]:t.match(J)||[]).length;for(;i--;)delete r[t[i]]}(void 0===t||v.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!v.isEmptyObject(t)}};var se=new ne,oe=new ne,xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,fe=/[A-Z]/g;function le(e,t,i){var r;if(void 0===i&&1===e.nodeType)if(r="data-"+t.replace(fe,"-$&").toLowerCase(),"string"==typeof(i=e.getAttribute(r))){try{i=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:xe.test(e)?JSON.parse(e):e)}(i)}catch(e){}oe.set(e,t,i)}else i=void 0;return i}v.extend({hasData:function(e){return oe.hasData(e)||se.hasData(e)},data:function(e,t,i){return oe.access(e,t,i)},removeData:function(e,t){oe.remove(e,t)},_data:function(e,t,i){return se.access(e,t,i)},_removeData:function(e,t){se.remove(e,t)}}),v.fn.extend({data:function(e,t){var i,r,a,n=this[0],s=n&&n.attributes;if(void 0===e){if(this.length&&(a=oe.get(n),1===n.nodeType&&!se.get(n,"hasDataAttrs"))){for(i=s.length;i--;)s[i]&&0===(r=s[i].name).indexOf("data-")&&(r=re(r.slice(5)),le(n,r,a[r]));se.set(n,"hasDataAttrs",!0)}return a}return"object"==o(e)?this.each((function(){oe.set(this,e)})):Q(this,(function(t){var i;if(n&&void 0===t)return void 0!==(i=oe.get(n,e))||void 0!==(i=le(n,e))?i:void 0;this.each((function(){oe.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){oe.remove(this,e)}))}}),v.extend({queue:function(e,t,i){var r;if(e)return t=(t||"fx")+"queue",r=se.get(e,t),i&&(!r||Array.isArray(i)?r=se.access(e,t,v.makeArray(i)):r.push(i)),r||[]},dequeue:function(e,t){t=t||"fx";var i=v.queue(e,t),r=i.length,a=i.shift(),n=v._queueHooks(e,t);"inprogress"===a&&(a=i.shift(),r--),a&&("fx"===t&&i.unshift("inprogress"),delete n.stop,a.call(e,(function(){v.dequeue(e,t)}),n)),!r&&n&&n.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return se.get(e,i)||se.access(e,i,{empty:v.Callbacks("once memory").add((function(){se.remove(e,[t+"queue",i])}))})}}),v.fn.extend({queue:function(e,t){var i=2;return"string"!=typeof e&&(t=e,e="fx",i--),arguments.length<i?v.queue(this[0],e):void 0===t?this:this.each((function(){var i=v.queue(this,e,t);v._queueHooks(this,e),"fx"===e&&"inprogress"!==i[0]&&v.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){v.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var i,r=1,a=v.Deferred(),n=this,s=this.length,o=function(){--r||a.resolveWith(n,[n])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(i=se.get(n[s],e+"queueHooks"))&&i.empty&&(r++,i.empty.add(o));return o(),a.promise(t)}});var he=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ce=new RegExp("^(?:([+-])=|)("+he+")([a-z%]*)$","i"),_e=["Top","Right","Bottom","Left"],ue=m.documentElement,de=function(e){return v.contains(e.ownerDocument,e)},pe={composed:!0};ue.getRootNode&&(de=function(e){return v.contains(e.ownerDocument,e)||e.getRootNode(pe)===e.ownerDocument});var me=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&de(e)&&"none"===v.css(e,"display")};function Pe(e,t,i,r){var a,n,s=20,o=r?function(){return r.cur()}:function(){return v.css(e,t,"")},x=o(),f=i&&i[3]||(v.cssNumber[t]?"":"px"),l=e.nodeType&&(v.cssNumber[t]||"px"!==f&&+x)&&ce.exec(v.css(e,t));if(l&&l[3]!==f){for(x/=2,f=f||l[3],l=+x||1;s--;)v.style(e,t,l+f),(1-n)*(1-(n=o()/x||.5))<=0&&(s=0),l/=n;l*=2,v.style(e,t,l+f),i=i||[]}return i&&(l=+l||+x||0,a=i[1]?l+(i[1]+1)*i[2]:+i[2],r&&(r.unit=f,r.start=l,r.end=a)),a}var ye={};function Se(e){var t,i=e.ownerDocument,r=e.nodeName,a=ye[r];return a||(t=i.body.appendChild(i.createElement(r)),a=v.css(t,"display"),t.parentNode.removeChild(t),"none"===a&&(a="block"),ye[r]=a,a)}function be(e,t){for(var i,r,a=[],n=0,s=e.length;n<s;n++)(r=e[n]).style&&(i=r.style.display,t?("none"===i&&(a[n]=se.get(r,"display")||null,a[n]||(r.style.display="")),""===r.style.display&&me(r)&&(a[n]=Se(r))):"none"!==i&&(a[n]="none",se.set(r,"display",i)));for(n=0;n<s;n++)null!=a[n]&&(e[n].style.display=a[n]);return e}v.fn.extend({show:function(){return be(this,!0)},hide:function(){return be(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){me(this)?v(this).show():v(this).hide()}))}});var ge,ve,Re=/^(?:checkbox|radio)$/i,Ce=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ee=/^$|^module$|\/(?:java|ecma)script/i;ge=m.createDocumentFragment().appendChild(m.createElement("div")),(ve=m.createElement("input")).setAttribute("type","radio"),ve.setAttribute("checked","checked"),ve.setAttribute("name","t"),ge.appendChild(ve),u.checkClone=ge.cloneNode(!0).cloneNode(!0).lastChild.checked,ge.innerHTML="<textarea>x</textarea>",u.noCloneChecked=!!ge.cloneNode(!0).lastChild.defaultValue,ge.innerHTML="<option></option>",u.option=!!ge.lastChild;var Fe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Te(e,t){var i;return i=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&C(e,t)?v.merge([e],i):i}function De(e,t){for(var i=0,r=e.length;i<r;i++)se.set(e[i],"globalEval",!t||se.get(t[i],"globalEval"))}Fe.tbody=Fe.tfoot=Fe.colgroup=Fe.caption=Fe.thead,Fe.th=Fe.td,u.option||(Fe.optgroup=Fe.option=[1,"<select multiple='multiple'>","</select>"]);var Ie=/<|&#?\w+;/;function Me(e,t,i,r,a){for(var n,s,o,x,f,l,h=t.createDocumentFragment(),c=[],_=0,u=e.length;_<u;_++)if((n=e[_])||0===n)if("object"===S(n))v.merge(c,n.nodeType?[n]:n);else if(Ie.test(n)){for(s=s||h.appendChild(t.createElement("div")),o=(Ce.exec(n)||["",""])[1].toLowerCase(),x=Fe[o]||Fe._default,s.innerHTML=x[1]+v.htmlPrefilter(n)+x[2],l=x[0];l--;)s=s.lastChild;v.merge(c,s.childNodes),(s=h.firstChild).textContent=""}else c.push(t.createTextNode(n));for(h.textContent="",_=0;n=c[_++];)if(r&&v.inArray(n,r)>-1)a&&a.push(n);else if(f=de(n),s=Te(h.appendChild(n),"script"),f&&De(s),i)for(l=0;n=s[l++];)Ee.test(n.type||"")&&i.push(n);return h}var Ae=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Le(){return!1}function Be(e,t,i,r,a,n){var s,x;if("object"==o(t)){for(x in"string"!=typeof i&&(r=r||i,i=void 0),t)Be(e,x,i,r,t[x],n);return e}if(null==r&&null==a?(a=i,r=i=void 0):null==a&&("string"==typeof i?(a=r,r=void 0):(a=r,r=i,i=void 0)),!1===a)a=Le;else if(!a)return e;return 1===n&&(s=a,a=function(e){return v().off(e),s.apply(this,arguments)},a.guid=s.guid||(s.guid=v.guid++)),e.each((function(){v.event.add(this,t,a,r,i)}))}function ke(e,t,i){i?(se.set(e,t,!1),v.event.add(e,t,{namespace:!1,handler:function(e){var i,r=se.get(this,t);if(1&e.isTrigger&&this[t]){if(r)(v.event.special[t]||{}).delegateType&&e.stopPropagation();else if(r=a.call(arguments),se.set(this,t,r),this[t](),i=se.get(this,t),se.set(this,t,!1),r!==i)return e.stopImmediatePropagation(),e.preventDefault(),i}else r&&(se.set(this,t,v.event.trigger(r[0],r.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=we)}})):void 0===se.get(e,t)&&v.event.add(e,t,we)}v.event={global:{},add:function(e,t,i,r,a){var n,s,o,x,f,l,h,c,_,u,d,p=se.get(e);if(ae(e))for(i.handler&&(i=(n=i).handler,a=n.selector),a&&v.find.matchesSelector(ue,a),i.guid||(i.guid=v.guid++),(x=p.events)||(x=p.events=Object.create(null)),(s=p.handle)||(s=p.handle=function(t){return void 0!==v&&v.event.triggered!==t.type?v.event.dispatch.apply(e,arguments):void 0}),f=(t=(t||"").match(J)||[""]).length;f--;)_=d=(o=Ae.exec(t[f])||[])[1],u=(o[2]||"").split(".").sort(),_&&(h=v.event.special[_]||{},_=(a?h.delegateType:h.bindType)||_,h=v.event.special[_]||{},l=v.extend({type:_,origType:d,data:r,handler:i,guid:i.guid,selector:a,needsContext:a&&v.expr.match.needsContext.test(a),namespace:u.join(".")},n),(c=x[_])||((c=x[_]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,r,u,s)||e.addEventListener&&e.addEventListener(_,s)),h.add&&(h.add.call(e,l),l.handler.guid||(l.handler.guid=i.guid)),a?c.splice(c.delegateCount++,0,l):c.push(l),v.event.global[_]=!0)},remove:function(e,t,i,r,a){var n,s,o,x,f,l,h,c,_,u,d,p=se.hasData(e)&&se.get(e);if(p&&(x=p.events)){for(f=(t=(t||"").match(J)||[""]).length;f--;)if(_=d=(o=Ae.exec(t[f])||[])[1],u=(o[2]||"").split(".").sort(),_){for(h=v.event.special[_]||{},c=x[_=(r?h.delegateType:h.bindType)||_]||[],o=o[2]&&new RegExp("(^|\\.)"+u.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=n=c.length;n--;)l=c[n],!a&&d!==l.origType||i&&i.guid!==l.guid||o&&!o.test(l.namespace)||r&&r!==l.selector&&("**"!==r||!l.selector)||(c.splice(n,1),l.selector&&c.delegateCount--,h.remove&&h.remove.call(e,l));s&&!c.length&&(h.teardown&&!1!==h.teardown.call(e,u,p.handle)||v.removeEvent(e,_,p.handle),delete x[_])}else for(_ in x)v.event.remove(e,_+t[f],i,r,!0);v.isEmptyObject(x)&&se.remove(e,"handle events")}},dispatch:function(e){var t,i,r,a,n,s,o=new Array(arguments.length),x=v.event.fix(e),f=(se.get(this,"events")||Object.create(null))[x.type]||[],l=v.event.special[x.type]||{};for(o[0]=x,t=1;t<arguments.length;t++)o[t]=arguments[t];if(x.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,x)){for(s=v.event.handlers.call(this,x,f),t=0;(a=s[t++])&&!x.isPropagationStopped();)for(x.currentTarget=a.elem,i=0;(n=a.handlers[i++])&&!x.isImmediatePropagationStopped();)x.rnamespace&&!1!==n.namespace&&!x.rnamespace.test(n.namespace)||(x.handleObj=n,x.data=n.data,void 0!==(r=((v.event.special[n.origType]||{}).handle||n.handler).apply(a.elem,o))&&!1===(x.result=r)&&(x.preventDefault(),x.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,x),x.result}},handlers:function(e,t){var i,r,a,n,s,o=[],x=t.delegateCount,f=e.target;if(x&&f.nodeType&&!("click"===e.type&&e.button>=1))for(;f!==this;f=f.parentNode||this)if(1===f.nodeType&&("click"!==e.type||!0!==f.disabled)){for(n=[],s={},i=0;i<x;i++)void 0===s[a=(r=t[i]).selector+" "]&&(s[a]=r.needsContext?v(a,this).index(f)>-1:v.find(a,this,null,[f]).length),s[a]&&n.push(r);n.length&&o.push({elem:f,handlers:n})}return f=this,x<t.length&&o.push({elem:f,handlers:t.slice(x)}),o},addProp:function(e,t){Object.defineProperty(v.Event.prototype,e,{enumerable:!0,configurable:!0,get:d(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[v.expando]?e:new v.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Re.test(t.type)&&t.click&&C(t,"input")&&ke(t,"click",!0),!1},trigger:function(e){var t=this||e;return Re.test(t.type)&&t.click&&C(t,"input")&&ke(t,"click"),!0},_default:function(e){var t=e.target;return Re.test(t.type)&&t.click&&C(t,"input")&&se.get(t,"click")||C(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},v.removeEvent=function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i)},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Le,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[v.expando]=!0},v.Event.prototype={constructor:v.Event,isDefaultPrevented:Le,isPropagationStopped:Le,isImmediatePropagationStopped:Le,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},v.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},v.event.addProp),v.each({focus:"focusin",blur:"focusout"},(function(e,t){function i(e){if(m.documentMode){var i=se.get(this,"handle"),r=v.event.fix(e);r.type="focusin"===e.type?"focus":"blur",r.isSimulated=!0,i(e),r.target===r.currentTarget&&i(r)}else v.event.simulate(t,e.target,v.event.fix(e))}v.event.special[e]={setup:function(){var r;if(ke(this,e,!0),!m.documentMode)return!1;(r=se.get(this,t))||this.addEventListener(t,i),se.set(this,t,(r||0)+1)},trigger:function(){return ke(this,e),!0},teardown:function(){var e;if(!m.documentMode)return!1;(e=se.get(this,t)-1)?se.set(this,t,e):(this.removeEventListener(t,i),se.remove(this,t))},_default:function(t){return se.get(t.target,e)},delegateType:t},v.event.special[t]={setup:function(){var r=this.ownerDocument||this.document||this,a=m.documentMode?this:r,n=se.get(a,t);n||(m.documentMode?this.addEventListener(t,i):r.addEventListener(e,i,!0)),se.set(a,t,(n||0)+1)},teardown:function(){var r=this.ownerDocument||this.document||this,a=m.documentMode?this:r,n=se.get(a,t)-1;n?se.set(a,t,n):(m.documentMode?this.removeEventListener(t,i):r.removeEventListener(e,i,!0),se.remove(a,t))}}})),v.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,r=e.relatedTarget,a=e.handleObj;return r&&(r===this||v.contains(this,r))||(e.type=a.origType,i=a.handler.apply(this,arguments),e.type=t),i}}})),v.fn.extend({on:function(e,t,i,r){return Be(this,e,t,i,r)},one:function(e,t,i,r){return Be(this,e,t,i,r,1)},off:function(e,t,i){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,v(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==o(e)){for(a in e)this.off(a,t,e[a]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=Le),this.each((function(){v.event.remove(this,e,i,t)}))}});var Oe=/<script|<style|<link/i,He=/checked\s*(?:[^=]|=\s*.checked.)/i,Ve=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ne(e,t){return C(e,"table")&&C(11!==t.nodeType?t:t.firstChild,"tr")&&v(e).children("tbody")[0]||e}function Ye(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Xe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ue(e,t){var i,r,a,n,s,o;if(1===t.nodeType){if(se.hasData(e)&&(o=se.get(e).events))for(a in se.remove(t,"handle events"),o)for(i=0,r=o[a].length;i<r;i++)v.event.add(t,a,o[a][i]);oe.hasData(e)&&(n=oe.access(e),s=v.extend({},n),oe.set(t,s))}}function We(e,t){var i=t.nodeName.toLowerCase();"input"===i&&Re.test(e.type)?t.checked=e.checked:"input"!==i&&"textarea"!==i||(t.defaultValue=e.defaultValue)}function Ge(e,t,i,r){t=n(t);var a,s,o,x,f,l,h=0,c=e.length,_=c-1,p=t[0],m=d(p);if(m||c>1&&"string"==typeof p&&!u.checkClone&&He.test(p))return e.each((function(a){var n=e.eq(a);m&&(t[0]=p.call(this,a,n.html())),Ge(n,t,i,r)}));if(c&&(s=(a=Me(t,e[0].ownerDocument,!1,e,r)).firstChild,1===a.childNodes.length&&(a=s),s||r)){for(x=(o=v.map(Te(a,"script"),Ye)).length;h<c;h++)f=a,h!==_&&(f=v.clone(f,!0,!0),x&&v.merge(o,Te(f,"script"))),i.call(e[h],f,h);if(x)for(l=o[o.length-1].ownerDocument,v.map(o,Xe),h=0;h<x;h++)f=o[h],Ee.test(f.type||"")&&!se.access(f,"globalEval")&&v.contains(l,f)&&(f.src&&"module"!==(f.type||"").toLowerCase()?v._evalUrl&&!f.noModule&&v._evalUrl(f.src,{nonce:f.nonce||f.getAttribute("nonce")},l):y(f.textContent.replace(Ve,""),f,l))}return e}function Je(e,t,i){for(var r,a=t?v.filter(t,e):e,n=0;null!=(r=a[n]);n++)i||1!==r.nodeType||v.cleanData(Te(r)),r.parentNode&&(i&&de(r)&&De(Te(r,"script")),r.parentNode.removeChild(r));return e}v.extend({htmlPrefilter:function(e){return e},clone:function(e,t,i){var r,a,n,s,o=e.cloneNode(!0),x=de(e);if(!(u.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||v.isXMLDoc(e)))for(s=Te(o),r=0,a=(n=Te(e)).length;r<a;r++)We(n[r],s[r]);if(t)if(i)for(n=n||Te(e),s=s||Te(o),r=0,a=n.length;r<a;r++)Ue(n[r],s[r]);else Ue(e,o);return(s=Te(o,"script")).length>0&&De(s,!x&&Te(e,"script")),o},cleanData:function(e){for(var t,i,r,a=v.event.special,n=0;void 0!==(i=e[n]);n++)if(ae(i)){if(t=i[se.expando]){if(t.events)for(r in t.events)a[r]?v.event.remove(i,r):v.removeEvent(i,r,t.handle);i[se.expando]=void 0}i[oe.expando]&&(i[oe.expando]=void 0)}}}),v.fn.extend({detach:function(e){return Je(this,e,!0)},remove:function(e){return Je(this,e)},text:function(e){return Q(this,(function(e){return void 0===e?v.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ge(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)}))},prepend:function(){return Ge(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ge(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ge(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(v.cleanData(Te(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return v.clone(this,e,t)}))},html:function(e){return Q(this,(function(e){var t=this[0]||{},i=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!Fe[(Ce.exec(e)||["",""])[1].toLowerCase()]){e=v.htmlPrefilter(e);try{for(;i<r;i++)1===(t=this[i]||{}).nodeType&&(v.cleanData(Te(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ge(this,arguments,(function(t){var i=this.parentNode;v.inArray(this,e)<0&&(v.cleanData(Te(this)),i&&i.replaceChild(t,this))}),e)}}),v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){v.fn[e]=function(e){for(var i,r=[],a=v(e),n=a.length-1,o=0;o<=n;o++)i=o===n?this:this.clone(!0),v(a[o])[t](i),s.apply(r,i.get());return this.pushStack(r)}}));var Ze=new RegExp("^("+he+")(?!px)[a-z%]+$","i"),je=/^--/,ze=function(t){var i=t.ownerDocument.defaultView;return i&&i.opener||(i=e),i.getComputedStyle(t)},qe=function(e,t,i){var r,a,n={};for(a in t)n[a]=e.style[a],e.style[a]=t[a];for(a in r=i.call(e),t)e.style[a]=n[a];return r},Ke=new RegExp(_e.join("|"),"i");function $e(e,t,i){var r,a,n,s,o=je.test(t),x=e.style;return(i=i||ze(e))&&(s=i.getPropertyValue(t)||i[t],o&&s&&(s=s.replace(I,"$1")||void 0),""!==s||de(e)||(s=v.style(e,t)),!u.pixelBoxStyles()&&Ze.test(s)&&Ke.test(t)&&(r=x.width,a=x.minWidth,n=x.maxWidth,x.minWidth=x.maxWidth=x.width=s,s=i.width,x.width=r,x.minWidth=a,x.maxWidth=n)),void 0!==s?s+"":s}function Qe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){f.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ue.appendChild(f).appendChild(l);var t=e.getComputedStyle(l);r="1%"!==t.top,x=12===i(t.marginLeft),l.style.right="60%",s=36===i(t.right),a=36===i(t.width),l.style.position="absolute",n=12===i(l.offsetWidth/3),ue.removeChild(f),l=null}}function i(e){return Math.round(parseFloat(e))}var r,a,n,s,o,x,f=m.createElement("div"),l=m.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",u.clearCloneStyle="content-box"===l.style.backgroundClip,v.extend(u,{boxSizingReliable:function(){return t(),a},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),r},reliableMarginLeft:function(){return t(),x},scrollboxSize:function(){return t(),n},reliableTrDimensions:function(){var t,i,r,a;return null==o&&(t=m.createElement("table"),i=m.createElement("tr"),r=m.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",i.style.cssText="box-sizing:content-box;border:1px solid",i.style.height="1px",r.style.height="9px",r.style.display="block",ue.appendChild(t).appendChild(i).appendChild(r),a=e.getComputedStyle(i),o=parseInt(a.height,10)+parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10)===i.offsetHeight,ue.removeChild(t)),o}}))}();var et=["Webkit","Moz","ms"],tt=m.createElement("div").style,it={};function rt(e){return v.cssProps[e]||it[e]||(e in tt?e:it[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),i=et.length;i--;)if((e=et[i]+t)in tt)return e}(e)||e)}var at=/^(none|table(?!-c[ea]).+)/,nt={position:"absolute",visibility:"hidden",display:"block"},st={letterSpacing:"0",fontWeight:"400"};function ot(e,t,i){var r=ce.exec(t);return r?Math.max(0,r[2]-(i||0))+(r[3]||"px"):t}function xt(e,t,i,r,a,n){var s="width"===t?1:0,o=0,x=0,f=0;if(i===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===i&&(f+=v.css(e,i+_e[s],!0,a)),r?("content"===i&&(x-=v.css(e,"padding"+_e[s],!0,a)),"margin"!==i&&(x-=v.css(e,"border"+_e[s]+"Width",!0,a))):(x+=v.css(e,"padding"+_e[s],!0,a),"padding"!==i?x+=v.css(e,"border"+_e[s]+"Width",!0,a):o+=v.css(e,"border"+_e[s]+"Width",!0,a));return!r&&n>=0&&(x+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-n-x-o-.5))||0),x+f}function ft(e,t,i){var r=ze(e),a=(!u.boxSizingReliable()||i)&&"border-box"===v.css(e,"boxSizing",!1,r),n=a,s=$e(e,t,r),o="offset"+t[0].toUpperCase()+t.slice(1);if(Ze.test(s)){if(!i)return s;s="auto"}return(!u.boxSizingReliable()&&a||!u.reliableTrDimensions()&&C(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===v.css(e,"display",!1,r))&&e.getClientRects().length&&(a="border-box"===v.css(e,"boxSizing",!1,r),(n=o in e)&&(s=e[o])),(s=parseFloat(s)||0)+xt(e,t,i||(a?"border":"content"),n,r,s)+"px"}function lt(e,t,i,r,a){return new lt.prototype.init(e,t,i,r,a)}v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=$e(e,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,i,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,n,s,x=re(t),f=je.test(t),l=e.style;if(f||(t=rt(x)),s=v.cssHooks[t]||v.cssHooks[x],void 0===i)return s&&"get"in s&&void 0!==(a=s.get(e,!1,r))?a:l[t];"string"===(n=o(i))&&(a=ce.exec(i))&&a[1]&&(i=Pe(e,t,a),n="number"),null!=i&&i==i&&("number"!==n||f||(i+=a&&a[3]||(v.cssNumber[x]?"":"px")),u.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),s&&"set"in s&&void 0===(i=s.set(e,i,r))||(f?l.setProperty(t,i):l[t]=i))}},css:function(e,t,i,r){var a,n,s,o=re(t);return je.test(t)||(t=rt(o)),(s=v.cssHooks[t]||v.cssHooks[o])&&"get"in s&&(a=s.get(e,!0,i)),void 0===a&&(a=$e(e,t,r)),"normal"===a&&t in st&&(a=st[t]),""===i||i?(n=parseFloat(a),!0===i||isFinite(n)?n||0:a):a}}),v.each(["height","width"],(function(e,t){v.cssHooks[t]={get:function(e,i,r){if(i)return!at.test(v.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ft(e,t,r):qe(e,nt,(function(){return ft(e,t,r)}))},set:function(e,i,r){var a,n=ze(e),s=!u.scrollboxSize()&&"absolute"===n.position,o=(s||r)&&"border-box"===v.css(e,"boxSizing",!1,n),x=r?xt(e,t,r,o,n):0;return o&&s&&(x-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(n[t])-xt(e,t,"border",!1,n)-.5)),x&&(a=ce.exec(i))&&"px"!==(a[3]||"px")&&(e.style[t]=i,i=v.css(e,t)),ot(0,i,x)}}})),v.cssHooks.marginLeft=Qe(u.reliableMarginLeft,(function(e,t){if(t)return(parseFloat($e(e,"marginLeft"))||e.getBoundingClientRect().left-qe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),v.each({margin:"",padding:"",border:"Width"},(function(e,t){v.cssHooks[e+t]={expand:function(i){for(var r=0,a={},n="string"==typeof i?i.split(" "):[i];r<4;r++)a[e+_e[r]+t]=n[r]||n[r-2]||n[0];return a}},"margin"!==e&&(v.cssHooks[e+t].set=ot)})),v.fn.extend({css:function(e,t){return Q(this,(function(e,t,i){var r,a,n={},s=0;if(Array.isArray(t)){for(r=ze(e),a=t.length;s<a;s++)n[t[s]]=v.css(e,t[s],!1,r);return n}return void 0!==i?v.style(e,t,i):v.css(e,t)}),e,t,arguments.length>1)}}),v.Tween=lt,lt.prototype={constructor:lt,init:function(e,t,i,r,a,n){this.elem=e,this.prop=i,this.easing=a||v.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=n||(v.cssNumber[i]?"":"px")},cur:function(){var e=lt.propHooks[this.prop];return e&&e.get?e.get(this):lt.propHooks._default.get(this)},run:function(e){var t,i=lt.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):lt.propHooks._default.set(this),this}},lt.prototype.init.prototype=lt.prototype,lt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=v.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):1!==e.elem.nodeType||!v.cssHooks[e.prop]&&null==e.elem.style[rt(e.prop)]?e.elem[e.prop]=e.now:v.style(e.elem,e.prop,e.now+e.unit)}}},lt.propHooks.scrollTop=lt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},v.fx=lt.prototype.init,v.fx.step={};var ht,ct,_t=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;function dt(){ct&&(!1===m.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(dt):e.setTimeout(dt,v.fx.interval),v.fx.tick())}function pt(){return e.setTimeout((function(){ht=void 0})),ht=Date.now()}function mt(e,t){var i,r=0,a={height:e};for(t=t?1:0;r<4;r+=2-t)a["margin"+(i=_e[r])]=a["padding"+i]=e;return t&&(a.opacity=a.width=e),a}function Pt(e,t,i){for(var r,a=(yt.tweeners[t]||[]).concat(yt.tweeners["*"]),n=0,s=a.length;n<s;n++)if(r=a[n].call(i,t,e))return r}function yt(e,t,i){var r,a,n=0,s=yt.prefilters.length,o=v.Deferred().always((function(){delete x.elem})),x=function(){if(a)return!1;for(var t=ht||pt(),i=Math.max(0,f.startTime+f.duration-t),r=1-(i/f.duration||0),n=0,s=f.tweens.length;n<s;n++)f.tweens[n].run(r);return o.notifyWith(e,[f,r,i]),r<1&&s?i:(s||o.notifyWith(e,[f,1,0]),o.resolveWith(e,[f]),!1)},f=o.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{},easing:v.easing._default},i),originalProperties:t,originalOptions:i,startTime:ht||pt(),duration:i.duration,tweens:[],createTween:function(t,i){var r=v.Tween(e,f.opts,t,i,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var i=0,r=t?f.tweens.length:0;if(a)return this;for(a=!0;i<r;i++)f.tweens[i].run(1);return t?(o.notifyWith(e,[f,1,0]),o.resolveWith(e,[f,t])):o.rejectWith(e,[f,t]),this}}),l=f.props;for(function(e,t){var i,r,a,n,s;for(i in e)if(a=t[r=re(i)],n=e[i],Array.isArray(n)&&(a=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),(s=v.cssHooks[r])&&"expand"in s)for(i in n=s.expand(n),delete e[r],n)i in e||(e[i]=n[i],t[i]=a);else t[r]=a}(l,f.opts.specialEasing);n<s;n++)if(r=yt.prefilters[n].call(f,e,l,f.opts))return d(r.stop)&&(v._queueHooks(f.elem,f.opts.queue).stop=r.stop.bind(r)),r;return v.map(l,Pt,f),d(f.opts.start)&&f.opts.start.call(e,f),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always),v.fx.timer(v.extend(x,{elem:e,anim:f,queue:f.opts.queue})),f}v.Animation=v.extend(yt,{tweeners:{"*":[function(e,t){var i=this.createTween(e,t);return Pe(i.elem,e,ce.exec(t),i),i}]},tweener:function(e,t){d(e)?(t=e,e=["*"]):e=e.match(J);for(var i,r=0,a=e.length;r<a;r++)i=e[r],yt.tweeners[i]=yt.tweeners[i]||[],yt.tweeners[i].unshift(t)},prefilters:[function(e,t,i){var r,a,n,s,o,x,f,l,h="width"in t||"height"in t,c=this,_={},u=e.style,d=e.nodeType&&me(e),p=se.get(e,"fxshow");for(r in i.queue||(null==(s=v._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,o=s.empty.fire,s.empty.fire=function(){s.unqueued||o()}),s.unqueued++,c.always((function(){c.always((function(){s.unqueued--,v.queue(e,"fx").length||s.empty.fire()}))}))),t)if(a=t[r],_t.test(a)){if(delete t[r],n=n||"toggle"===a,a===(d?"hide":"show")){if("show"!==a||!p||void 0===p[r])continue;d=!0}_[r]=p&&p[r]||v.style(e,r)}if((x=!v.isEmptyObject(t))||!v.isEmptyObject(_))for(r in h&&1===e.nodeType&&(i.overflow=[u.overflow,u.overflowX,u.overflowY],null==(f=p&&p.display)&&(f=se.get(e,"display")),"none"===(l=v.css(e,"display"))&&(f?l=f:(be([e],!0),f=e.style.display||f,l=v.css(e,"display"),be([e]))),("inline"===l||"inline-block"===l&&null!=f)&&"none"===v.css(e,"float")&&(x||(c.done((function(){u.display=f})),null==f&&(l=u.display,f="none"===l?"":l)),u.display="inline-block")),i.overflow&&(u.overflow="hidden",c.always((function(){u.overflow=i.overflow[0],u.overflowX=i.overflow[1],u.overflowY=i.overflow[2]}))),x=!1,_)x||(p?"hidden"in p&&(d=p.hidden):p=se.access(e,"fxshow",{display:f}),n&&(p.hidden=!d),d&&be([e],!0),c.done((function(){for(r in d||be([e]),se.remove(e,"fxshow"),_)v.style(e,r,_[r])}))),x=Pt(d?p[r]:0,r,c),r in p||(p[r]=x.start,d&&(x.end=x.start,x.start=0))}],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),v.speed=function(e,t,i){var r=e&&"object"==o(e)?v.extend({},e):{complete:i||!i&&t||d(e)&&e,duration:e,easing:i&&t||t&&!d(t)&&t};return v.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in v.fx.speeds?r.duration=v.fx.speeds[r.duration]:r.duration=v.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){d(r.old)&&r.old.call(this),r.queue&&v.dequeue(this,r.queue)},r},v.fn.extend({fadeTo:function(e,t,i,r){return this.filter(me).css("opacity",0).show().end().animate({opacity:t},e,i,r)},animate:function(e,t,i,r){var a=v.isEmptyObject(e),n=v.speed(t,i,r),s=function(){var t=yt(this,v.extend({},e),n);(a||se.get(this,"finish"))&&t.stop(!0)};return s.finish=s,a||!1===n.queue?this.each(s):this.queue(n.queue,s)},stop:function(e,t,i){var r=function(e){var t=e.stop;delete e.stop,t(i)};return"string"!=typeof e&&(i=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,a=null!=e&&e+"queueHooks",n=v.timers,s=se.get(this);if(a)s[a]&&s[a].stop&&r(s[a]);else for(a in s)s[a]&&s[a].stop&&ut.test(a)&&r(s[a]);for(a=n.length;a--;)n[a].elem!==this||null!=e&&n[a].queue!==e||(n[a].anim.stop(i),t=!1,n.splice(a,1));!t&&i||v.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,i=se.get(this),r=i[e+"queue"],a=i[e+"queueHooks"],n=v.timers,s=r?r.length:0;for(i.finish=!0,v.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=n.length;t--;)n[t].elem===this&&n[t].queue===e&&(n[t].anim.stop(!0),n.splice(t,1));for(t=0;t<s;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete i.finish}))}}),v.each(["toggle","show","hide"],(function(e,t){var i=v.fn[t];v.fn[t]=function(e,r,a){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(mt(t,!0),e,r,a)}})),v.each({slideDown:mt("show"),slideUp:mt("hide"),slideToggle:mt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){v.fn[e]=function(e,i,r){return this.animate(t,e,i,r)}})),v.timers=[],v.fx.tick=function(){var e,t=0,i=v.timers;for(ht=Date.now();t<i.length;t++)(e=i[t])()||i[t]!==e||i.splice(t--,1);i.length||v.fx.stop(),ht=void 0},v.fx.timer=function(e){v.timers.push(e),v.fx.start()},v.fx.interval=13,v.fx.start=function(){ct||(ct=!0,dt())},v.fx.stop=function(){ct=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fn.delay=function(t,i){return t=v.fx&&v.fx.speeds[t]||t,i=i||"fx",this.queue(i,(function(i,r){var a=e.setTimeout(i,t);r.stop=function(){e.clearTimeout(a)}}))},function(){var e=m.createElement("input"),t=m.createElement("select").appendChild(m.createElement("option"));e.type="checkbox",u.checkOn=""!==e.value,u.optSelected=t.selected,(e=m.createElement("input")).value="t",e.type="radio",u.radioValue="t"===e.value}();var St,bt=v.expr.attrHandle;v.fn.extend({attr:function(e,t){return Q(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){v.removeAttr(this,e)}))}}),v.extend({attr:function(e,t,i){var r,a,n=e.nodeType;if(3!==n&&8!==n&&2!==n)return void 0===e.getAttribute?v.prop(e,t,i):(1===n&&v.isXMLDoc(e)||(a=v.attrHooks[t.toLowerCase()]||(v.expr.match.bool.test(t)?St:void 0)),void 0!==i?null===i?void v.removeAttr(e,t):a&&"set"in a&&void 0!==(r=a.set(e,i,t))?r:(e.setAttribute(t,i+""),i):a&&"get"in a&&null!==(r=a.get(e,t))?r:null==(r=v.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!u.radioValue&&"radio"===t&&C(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}}},removeAttr:function(e,t){var i,r=0,a=t&&t.match(J);if(a&&1===e.nodeType)for(;i=a[r++];)e.removeAttribute(i)}}),St={set:function(e,t,i){return!1===t?v.removeAttr(e,i):e.setAttribute(i,i),i}},v.each(v.expr.match.bool.source.match(/\w+/g),(function(e,t){var i=bt[t]||v.find.attr;bt[t]=function(e,t,r){var a,n,s=t.toLowerCase();return r||(n=bt[s],bt[s]=a,a=null!=i(e,t,r)?s:null,bt[s]=n),a}}));var gt=/^(?:input|select|textarea|button)$/i,vt=/^(?:a|area)$/i;function Rt(e){return(e.match(J)||[]).join(" ")}function Ct(e){return e.getAttribute&&e.getAttribute("class")||""}function Et(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(J)||[]}v.fn.extend({prop:function(e,t){return Q(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[v.propFix[e]||e]}))}}),v.extend({prop:function(e,t,i){var r,a,n=e.nodeType;if(3!==n&&8!==n&&2!==n)return 1===n&&v.isXMLDoc(e)||(t=v.propFix[t]||t,a=v.propHooks[t]),void 0!==i?a&&"set"in a&&void 0!==(r=a.set(e,i,t))?r:e[t]=i:a&&"get"in a&&null!==(r=a.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=v.find.attr(e,"tabindex");return t?parseInt(t,10):gt.test(e.nodeName)||vt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),u.optSelected||(v.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),v.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){v.propFix[this.toLowerCase()]=this})),v.fn.extend({addClass:function(e){var t,i,r,a,n,s;return d(e)?this.each((function(t){v(this).addClass(e.call(this,t,Ct(this)))})):(t=Et(e)).length?this.each((function(){if(r=Ct(this),i=1===this.nodeType&&" "+Rt(r)+" "){for(n=0;n<t.length;n++)a=t[n],i.indexOf(" "+a+" ")<0&&(i+=a+" ");s=Rt(i),r!==s&&this.setAttribute("class",s)}})):this},removeClass:function(e){var t,i,r,a,n,s;return d(e)?this.each((function(t){v(this).removeClass(e.call(this,t,Ct(this)))})):arguments.length?(t=Et(e)).length?this.each((function(){if(r=Ct(this),i=1===this.nodeType&&" "+Rt(r)+" "){for(n=0;n<t.length;n++)for(a=t[n];i.indexOf(" "+a+" ")>-1;)i=i.replace(" "+a+" "," ");s=Rt(i),r!==s&&this.setAttribute("class",s)}})):this:this.attr("class","")},toggleClass:function(e,t){var i,r,a,n,s=o(e),x="string"===s||Array.isArray(e);return d(e)?this.each((function(i){v(this).toggleClass(e.call(this,i,Ct(this),t),t)})):"boolean"==typeof t&&x?t?this.addClass(e):this.removeClass(e):(i=Et(e),this.each((function(){if(x)for(n=v(this),a=0;a<i.length;a++)r=i[a],n.hasClass(r)?n.removeClass(r):n.addClass(r);else void 0!==e&&"boolean"!==s||((r=Ct(this))&&se.set(this,"__className__",r),this.setAttribute&&this.setAttribute("class",r||!1===e?"":se.get(this,"__className__")||""))})))},hasClass:function(e){var t,i,r=0;for(t=" "+e+" ";i=this[r++];)if(1===i.nodeType&&(" "+Rt(Ct(i))+" ").indexOf(t)>-1)return!0;return!1}});var Ft=/\r/g;v.fn.extend({val:function(e){var t,i,r,a=this[0];return arguments.length?(r=d(e),this.each((function(i){var a;1===this.nodeType&&(null==(a=r?e.call(this,i,v(this).val()):e)?a="":"number"==typeof a?a+="":Array.isArray(a)&&(a=v.map(a,(function(e){return null==e?"":e+""}))),(t=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))}))):a?(t=v.valHooks[a.type]||v.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(i=t.get(a,"value"))?i:"string"==typeof(i=a.value)?i.replace(Ft,""):null==i?"":i:void 0}}),v.extend({valHooks:{option:{get:function(e){var t=v.find.attr(e,"value");return null!=t?t:Rt(v.text(e))}},select:{get:function(e){var t,i,r,a=e.options,n=e.selectedIndex,s="select-one"===e.type,o=s?null:[],x=s?n+1:a.length;for(r=n<0?x:s?n:0;r<x;r++)if(((i=a[r]).selected||r===n)&&!i.disabled&&(!i.parentNode.disabled||!C(i.parentNode,"optgroup"))){if(t=v(i).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var i,r,a=e.options,n=v.makeArray(t),s=a.length;s--;)((r=a[s]).selected=v.inArray(v.valHooks.option.get(r),n)>-1)&&(i=!0);return i||(e.selectedIndex=-1),n}}}}),v.each(["radio","checkbox"],(function(){v.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=v.inArray(v(e).val(),t)>-1}},u.checkOn||(v.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var Tt=e.location,Dt={guid:Date.now()},It=/\?/;v.parseXML=function(t){var i,r;if(!t||"string"!=typeof t)return null;try{i=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){}return r=i&&i.getElementsByTagName("parsererror")[0],i&&!r||v.error("Invalid XML: "+(r?v.map(r.childNodes,(function(e){return e.textContent})).join("\n"):t)),i};var Mt=/^(?:focusinfocus|focusoutblur)$/,At=function(e){e.stopPropagation()};v.extend(v.event,{trigger:function(t,i,r,a){var n,s,x,f,l,c,_,u,P=[r||m],y=h.call(t,"type")?t.type:t,S=h.call(t,"namespace")?t.namespace.split("."):[];if(s=u=x=r=r||m,3!==r.nodeType&&8!==r.nodeType&&!Mt.test(y+v.event.triggered)&&(y.indexOf(".")>-1&&(S=y.split("."),y=S.shift(),S.sort()),l=y.indexOf(":")<0&&"on"+y,(t=t[v.expando]?t:new v.Event(y,"object"==o(t)&&t)).isTrigger=a?2:3,t.namespace=S.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+S.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),i=null==i?[t]:v.makeArray(i,[t]),_=v.event.special[y]||{},a||!_.trigger||!1!==_.trigger.apply(r,i))){if(!a&&!_.noBubble&&!p(r)){for(f=_.delegateType||y,Mt.test(f+y)||(s=s.parentNode);s;s=s.parentNode)P.push(s),x=s;x===(r.ownerDocument||m)&&P.push(x.defaultView||x.parentWindow||e)}for(n=0;(s=P[n++])&&!t.isPropagationStopped();)u=s,t.type=n>1?f:_.bindType||y,(c=(se.get(s,"events")||Object.create(null))[t.type]&&se.get(s,"handle"))&&c.apply(s,i),(c=l&&s[l])&&c.apply&&ae(s)&&(t.result=c.apply(s,i),!1===t.result&&t.preventDefault());return t.type=y,a||t.isDefaultPrevented()||_._default&&!1!==_._default.apply(P.pop(),i)||!ae(r)||l&&d(r[y])&&!p(r)&&((x=r[l])&&(r[l]=null),v.event.triggered=y,t.isPropagationStopped()&&u.addEventListener(y,At),r[y](),t.isPropagationStopped()&&u.removeEventListener(y,At),v.event.triggered=void 0,x&&(r[l]=x)),t.result}},simulate:function(e,t,i){var r=v.extend(new v.Event,i,{type:e,isSimulated:!0});v.event.trigger(r,null,t)}}),v.fn.extend({trigger:function(e,t){return this.each((function(){v.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var i=this[0];if(i)return v.event.trigger(e,t,i,!0)}});var wt=/\[\]$/,Lt=/\r?\n/g,Bt=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function Ot(e,t,i,r){var a;if(Array.isArray(t))v.each(t,(function(t,a){i||wt.test(e)?r(e,a):Ot(e+"["+("object"==o(a)&&null!=a?t:"")+"]",a,i,r)}));else if(i||"object"!==S(t))r(e,t);else for(a in t)Ot(e+"["+a+"]",t[a],i,r)}v.param=function(e,t){var i,r=[],a=function(e,t){var i=d(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==i?"":i)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,(function(){a(this.name,this.value)}));else for(i in e)Ot(i,e[i],t,a);return r.join("&")},v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=v.prop(this,"elements");return e?v.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!v(this).is(":disabled")&&kt.test(this.nodeName)&&!Bt.test(e)&&(this.checked||!Re.test(e))})).map((function(e,t){var i=v(this).val();return null==i?null:Array.isArray(i)?v.map(i,(function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}})):{name:t.name,value:i.replace(Lt,"\r\n")}})).get()}});var Ht=/%20/g,Vt=/#.*$/,Nt=/([?&])_=[^&]*/,Yt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Xt=/^(?:GET|HEAD)$/,Ut=/^\/\//,Wt={},Gt={},Jt="*/".concat("*"),Zt=m.createElement("a");function jt(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var r,a=0,n=t.toLowerCase().match(J)||[];if(d(i))for(;r=n[a++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(i)):(e[r]=e[r]||[]).push(i)}}function zt(e,t,i,r){var a={},n=e===Gt;function s(o){var x;return a[o]=!0,v.each(e[o]||[],(function(e,o){var f=o(t,i,r);return"string"!=typeof f||n||a[f]?n?!(x=f):void 0:(t.dataTypes.unshift(f),s(f),!1)})),x}return s(t.dataTypes[0])||!a["*"]&&s("*")}function qt(e,t){var i,r,a=v.ajaxSettings.flatOptions||{};for(i in t)void 0!==t[i]&&((a[i]?e:r||(r={}))[i]=t[i]);return r&&v.extend(!0,e,r),e}Zt.href=Tt.href,v.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":v.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?qt(qt(e,v.ajaxSettings),t):qt(v.ajaxSettings,e)},ajaxPrefilter:jt(Wt),ajaxTransport:jt(Gt),ajax:function(t,i){"object"==o(t)&&(i=t,t=void 0),i=i||{};var r,a,n,s,x,f,l,h,c,_,u=v.ajaxSetup({},i),d=u.context||u,p=u.context&&(d.nodeType||d.jquery)?v(d):v.event,P=v.Deferred(),y=v.Callbacks("once memory"),S=u.statusCode||{},b={},g={},R="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(l){if(!s)for(s={};t=Yt.exec(n);)s[t[1].toLowerCase()+" "]=(s[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=s[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?n:null},setRequestHeader:function(e,t){return null==l&&(e=g[e.toLowerCase()]=g[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==l&&(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)C.always(e[C.status]);else for(t in e)S[t]=[S[t],e[t]];return this},abort:function(e){var t=e||R;return r&&r.abort(t),E(0,t),this}};if(P.promise(C),u.url=((t||u.url||Tt.href)+"").replace(Ut,Tt.protocol+"//"),u.type=i.method||i.type||u.method||u.type,u.dataTypes=(u.dataType||"*").toLowerCase().match(J)||[""],null==u.crossDomain){f=m.createElement("a");try{f.href=u.url,f.href=f.href,u.crossDomain=Zt.protocol+"//"+Zt.host!=f.protocol+"//"+f.host}catch(e){u.crossDomain=!0}}if(u.data&&u.processData&&"string"!=typeof u.data&&(u.data=v.param(u.data,u.traditional)),zt(Wt,u,i,C),l)return C;for(c in(h=v.event&&u.global)&&0==v.active++&&v.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!Xt.test(u.type),a=u.url.replace(Vt,""),u.hasContent?u.data&&u.processData&&0===(u.contentType||"").indexOf("application/x-www-form-urlencoded")&&(u.data=u.data.replace(Ht,"+")):(_=u.url.slice(a.length),u.data&&(u.processData||"string"==typeof u.data)&&(a+=(It.test(a)?"&":"?")+u.data,delete u.data),!1===u.cache&&(a=a.replace(Nt,"$1"),_=(It.test(a)?"&":"?")+"_="+Dt.guid+++_),u.url=a+_),u.ifModified&&(v.lastModified[a]&&C.setRequestHeader("If-Modified-Since",v.lastModified[a]),v.etag[a]&&C.setRequestHeader("If-None-Match",v.etag[a])),(u.data&&u.hasContent&&!1!==u.contentType||i.contentType)&&C.setRequestHeader("Content-Type",u.contentType),C.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+Jt+"; q=0.01":""):u.accepts["*"]),u.headers)C.setRequestHeader(c,u.headers[c]);if(u.beforeSend&&(!1===u.beforeSend.call(d,C,u)||l))return C.abort();if(R="abort",y.add(u.complete),C.done(u.success),C.fail(u.error),r=zt(Gt,u,i,C)){if(C.readyState=1,h&&p.trigger("ajaxSend",[C,u]),l)return C;u.async&&u.timeout>0&&(x=e.setTimeout((function(){C.abort("timeout")}),u.timeout));try{l=!1,r.send(b,E)}catch(e){if(l)throw e;E(-1,e)}}else E(-1,"No Transport");function E(t,i,s,o){var f,c,_,m,b,g=i;l||(l=!0,x&&e.clearTimeout(x),r=void 0,n=o||"",C.readyState=t>0?4:0,f=t>=200&&t<300||304===t,s&&(m=function(e,t,i){for(var r,a,n,s,o=e.contents,x=e.dataTypes;"*"===x[0];)x.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(a in o)if(o[a]&&o[a].test(r)){x.unshift(a);break}if(x[0]in i)n=x[0];else{for(a in i){if(!x[0]||e.converters[a+" "+x[0]]){n=a;break}s||(s=a)}n=n||s}if(n)return n!==x[0]&&x.unshift(n),i[n]}(u,C,s)),!f&&v.inArray("script",u.dataTypes)>-1&&v.inArray("json",u.dataTypes)<0&&(u.converters["text script"]=function(){}),m=function(e,t,i,r){var a,n,s,o,x,f={},l=e.dataTypes.slice();if(l[1])for(s in e.converters)f[s.toLowerCase()]=e.converters[s];for(n=l.shift();n;)if(e.responseFields[n]&&(i[e.responseFields[n]]=t),!x&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),x=n,n=l.shift())if("*"===n)n=x;else if("*"!==x&&x!==n){if(!(s=f[x+" "+n]||f["* "+n]))for(a in f)if((o=a.split(" "))[1]===n&&(s=f[x+" "+o[0]]||f["* "+o[0]])){!0===s?s=f[a]:!0!==f[a]&&(n=o[0],l.unshift(o[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+x+" to "+n}}}return{state:"success",data:t}}(u,m,C,f),f?(u.ifModified&&((b=C.getResponseHeader("Last-Modified"))&&(v.lastModified[a]=b),(b=C.getResponseHeader("etag"))&&(v.etag[a]=b)),204===t||"HEAD"===u.type?g="nocontent":304===t?g="notmodified":(g=m.state,c=m.data,f=!(_=m.error))):(_=g,!t&&g||(g="error",t<0&&(t=0))),C.status=t,C.statusText=(i||g)+"",f?P.resolveWith(d,[c,g,C]):P.rejectWith(d,[C,g,_]),C.statusCode(S),S=void 0,h&&p.trigger(f?"ajaxSuccess":"ajaxError",[C,u,f?c:_]),y.fireWith(d,[C,g]),h&&(p.trigger("ajaxComplete",[C,u]),--v.active||v.event.trigger("ajaxStop")))}return C},getJSON:function(e,t,i){return v.get(e,t,i,"json")},getScript:function(e,t){return v.get(e,void 0,t,"script")}}),v.each(["get","post"],(function(e,t){v[t]=function(e,i,r,a){return d(i)&&(a=a||r,r=i,i=void 0),v.ajax(v.extend({url:e,type:t,dataType:a,data:i,success:r},v.isPlainObject(e)&&e))}})),v.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),v._evalUrl=function(e,t,i){return v.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){v.globalEval(e,t,i)}})},v.fn.extend({wrapAll:function(e){var t;return this[0]&&(d(e)&&(e=e.call(this[0])),t=v(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return d(e)?this.each((function(t){v(this).wrapInner(e.call(this,t))})):this.each((function(){var t=v(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)}))},wrap:function(e){var t=d(e);return this.each((function(i){v(this).wrapAll(t?e.call(this,i):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){v(this).replaceWith(this.childNodes)})),this}}),v.expr.pseudos.hidden=function(e){return!v.expr.pseudos.visible(e)},v.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},v.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var Kt={0:200,1223:204},$t=v.ajaxSettings.xhr();u.cors=!!$t&&"withCredentials"in $t,u.ajax=$t=!!$t,v.ajaxTransport((function(t){var i,r;if(u.cors||$t&&!t.crossDomain)return{send:function(a,n){var s,o=t.xhr();if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];for(s in t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)o.setRequestHeader(s,a[s]);i=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return function(){i&&(i=r=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===e?o.abort():"error"===e?"number"!=typeof o.status?n(0,"error"):n(o.status,o.statusText):n(Kt[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}})),o.onload=i(),r=o.onerror=o.ontimeout=i("error"),void 0!==o.onabort?o.onabort=r:o.onreadystatechange=function(){4===o.readyState&&e.setTimeout((function(){i&&r()}))},i=i("abort");try{o.send(t.hasContent&&t.data||null)}catch(e){if(i)throw e}},abort:function(){i&&i()}}})),v.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),v.ajaxTransport("script",(function(e){var t,i;if(e.crossDomain||e.scriptAttrs)return{send:function(r,a){t=v("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",i=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){t.remove(),i=null,e&&a("error"===e.type?404:200,e.type)}))),m.head.appendChild(t[0])},abort:function(){i&&i()}}}));var Qt,ei=[],ti=/(=)\?(?=&|$)|\?\?/;v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=ei.pop()||v.expando+"_"+Dt.guid++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",(function(t,i,r){var a,n,s,o=!1!==t.jsonp&&(ti.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ti.test(t.data)&&"data");if(o||"jsonp"===t.dataTypes[0])return a=t.jsonpCallback=d(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(ti,"$1"+a):!1!==t.jsonp&&(t.url+=(It.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return s||v.error(a+" was not called"),s[0]},t.dataTypes[0]="json",n=e[a],e[a]=function(){s=arguments},r.always((function(){void 0===n?v(e).removeProp(a):e[a]=n,t[a]&&(t.jsonpCallback=i.jsonpCallback,ei.push(a)),s&&d(n)&&n(s[0]),s=n=void 0})),"script"})),u.createHTMLDocument=((Qt=m.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Qt.childNodes.length),v.parseHTML=function(e,t,i){return"string"!=typeof e?[]:("boolean"==typeof t&&(i=t,t=!1),t||(u.createHTMLDocument?((r=(t=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,t.head.appendChild(r)):t=m),n=!i&&[],(a=H.exec(e))?[t.createElement(a[1])]:(a=Me([e],t,n),n&&n.length&&v(n).remove(),v.merge([],a.childNodes)));var r,a,n},v.fn.load=function(e,t,i){var r,a,n,s=this,x=e.indexOf(" ");return x>-1&&(r=Rt(e.slice(x)),e=e.slice(0,x)),d(t)?(i=t,t=void 0):t&&"object"==o(t)&&(a="POST"),s.length>0&&v.ajax({url:e,type:a||"GET",dataType:"html",data:t}).done((function(e){n=arguments,s.html(r?v("<div>").append(v.parseHTML(e)).find(r):e)})).always(i&&function(e,t){s.each((function(){i.apply(this,n||[e.responseText,t,e])}))}),this},v.expr.pseudos.animated=function(e){return v.grep(v.timers,(function(t){return e===t.elem})).length},v.offset={setOffset:function(e,t,i){var r,a,n,s,o,x,f=v.css(e,"position"),l=v(e),h={};"static"===f&&(e.style.position="relative"),o=l.offset(),n=v.css(e,"top"),x=v.css(e,"left"),("absolute"===f||"fixed"===f)&&(n+x).indexOf("auto")>-1?(s=(r=l.position()).top,a=r.left):(s=parseFloat(n)||0,a=parseFloat(x)||0),d(t)&&(t=t.call(e,i,v.extend({},o))),null!=t.top&&(h.top=t.top-o.top+s),null!=t.left&&(h.left=t.left-o.left+a),"using"in t?t.using.call(e,h):l.css(h)}},v.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){v.offset.setOffset(this,e,t)}));var t,i,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),i=r.ownerDocument.defaultView,{top:t.top+i.pageYOffset,left:t.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,i,r=this[0],a={top:0,left:0};if("fixed"===v.css(r,"position"))t=r.getBoundingClientRect();else{for(t=this.offset(),i=r.ownerDocument,e=r.offsetParent||i.documentElement;e&&(e===i.body||e===i.documentElement)&&"static"===v.css(e,"position");)e=e.parentNode;e&&e!==r&&1===e.nodeType&&((a=v(e).offset()).top+=v.css(e,"borderTopWidth",!0),a.left+=v.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-v.css(r,"marginTop",!0),left:t.left-a.left-v.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===v.css(e,"position");)e=e.offsetParent;return e||ue}))}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var i="pageYOffset"===t;v.fn[e]=function(r){return Q(this,(function(e,r,a){var n;if(p(e)?n=e:9===e.nodeType&&(n=e.defaultView),void 0===a)return n?n[t]:e[r];n?n.scrollTo(i?n.pageXOffset:a,i?a:n.pageYOffset):e[r]=a}),e,r,arguments.length)}})),v.each(["top","left"],(function(e,t){v.cssHooks[t]=Qe(u.pixelPosition,(function(e,i){if(i)return i=$e(e,t),Ze.test(i)?v(e).position()[t]+"px":i}))})),v.each({Height:"height",Width:"width"},(function(e,t){v.each({padding:"inner"+e,content:t,"":"outer"+e},(function(i,r){v.fn[r]=function(a,n){var s=arguments.length&&(i||"boolean"!=typeof a),o=i||(!0===a||!0===n?"margin":"border");return Q(this,(function(t,i,a){var n;return p(t)?0===r.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+e],n["scroll"+e],t.body["offset"+e],n["offset"+e],n["client"+e])):void 0===a?v.css(t,i,o):v.style(t,i,a,o)}),t,s?a:void 0,s)}}))})),v.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){v.fn[t]=function(e){return this.on(t,e)}})),v.fn.extend({bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,i,r){return this.on(t,e,i,r)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),v.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){v.fn[t]=function(e,i){return arguments.length>0?this.on(t,null,e,i):this.trigger(t)}}));var ii=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;v.proxy=function(e,t){var i,r,n;if("string"==typeof t&&(i=e[t],t=e,e=i),d(e))return r=a.call(arguments,2),n=function(){return e.apply(t||this,r.concat(a.call(arguments)))},n.guid=e.guid=e.guid||v.guid++,n},v.holdReady=function(e){e?v.readyWait++:v.ready(!0)},v.isArray=Array.isArray,v.parseJSON=JSON.parse,v.nodeName=C,v.isFunction=d,v.isWindow=p,v.camelCase=re,v.type=S,v.now=Date.now,v.isNumeric=function(e){var t=v.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},v.trim=function(e){return null==e?"":(e+"").replace(ii,"$1")};var ri=e.jQuery,ai=e.$;return v.noConflict=function(t){return e.$===v&&(e.$=ai),t&&e.jQuery===v&&(e.jQuery=ri),v},void 0===t&&(e.jQuery=e.$=v),v}))}(C);var E=R(C.exports);function F(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}function T(e,t){return T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},T(e,t)}var D=null,I=Symbol("CANVAS"),M=Symbol("CONTEXT"),A=Symbol("SHAPES"),w=Symbol("DRAWSTATUS"),L=Symbol("SHAPETYPE"),B=Symbol("MAXSHAPENUMSUPPORT"),k=Symbol("SHAPESTYLE"),O=Symbol("POLYGONDRAWING"),H=Symbol("CURRENTSHAPEINFO"),V=Symbol("DRAWSHAPEMULTIONETIME"),N=Symbol("EVENTCALLBACK");function Y(){D[M].clearRect(0,0,D.m_iCanvasWidth,D.m_iCanvasHeight);for(var e=0,t=D[A].length;e<t;e++)D[A][e].draw()}function X(e){D[A].length<D[B]&&D[A].push(e)}function U(){var e=!1,t={},i=0,r=0,a=0,n=0,s=0,o=0,x="draw",f=null;function l(){for(var e=-1,t=0,i=D[A].length;t<i;t++)if(D[A][t].m_bChoosed){e=t;break}return e}D[I][0].oncontextmenu=function(){return!1},D[I][0].onselectstart=function(){return!1},D[I].unbind(),D[I].bind("mousedown",(function(t){if(2===t.button)D[O]&&f&&f.m_aPoint.length>=f.m_iMinClosed&&(f.m_bClosed=!0,D[O]=!1,f.setPointInfo(f.m_aPoint),X(f),Y(),e=!1,D[V]||(D[w]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,f.m_szType,"onDrawEnd",f.m_szId));else if(0===t.button){if(e){if(Math.abs(t.offsetX-i)>2&&Math.abs(t.offsetY-r)>2&&(X(f),D[V]||(D[w]=!1)),D[N]){var a,n={startPos:[],endPos:[]};n.startPos=[i,r],n.endPos=[t.offsetX,t.offsetY],null==(a=D[N])||a.call(D,n),D.clearAllShape()}return f=null,void(e=!1)}if(i=t.offsetX,r=t.offsetY,x="draw",!D[O]){var s=l();if(-1!==s&&D[A][s].inArc(t.offsetX,t.offsetY,5)&&(x="stretch"),"stretch"!==x)for(var o=0,h=D[A].length;o<h;o++)D[A][o].inShape(t.offsetX,t.offsetY)&&2!==D[A][o].m_iEditType?(D[A][o].m_bChoosed=!0,D[A][o].getMouseDownPoints(t.offsetX,t.offsetY),x="drag",null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,D[A][o].m_szType,"onChoose",D[A][o].m_szId)):D[A][o].m_bChoosed=!1;D[I][0].style.cursor="drag"===x?"move":"default","draw"===x&&1===D[A].length&&1===D[A][0].m_iRedrawMode&&(D.deleteRepeatPolyonById(D[A][0].m_szId),D[w]=!0),D[w]&&!D[V]&&(x="draw")}if("draw"===x&&D[w]){if(D[B]<=D[A].length&&"Grid"!==D[L]&&"Point"!==D[L])return;"Rect"===D[L]?(f=new G).m_szTips=D[H].szTips||"":"Grid"===D[L]?0===D[A].length&&X(f=new Z):"Polygon"===D[L]?(D[O]||(D[O]=!0,(f=new z).m_szId=D[H].szId||"",f.m_szTips=D[H].szTips||"",f.m_iMinClosed=D[H].iMinClosed||3,f.m_iMaxPointNum=D[H].iMaxPointNum||11,f.m_iPolygonType=D[H].iPolygonType,f.m_szDrawColor=D[H].szDrawColor,f.m_szFillColor=D[H].szFillColor,f.m_iTranslucent=D[H].iTranslucent,f.m_iRedrawMode=D[H].iRedrawMode),1===f.m_iPolygonType&&(f.addPoint(i,r),f.m_aPoint.length===f.m_iMaxPointNum&&(f.m_bClosed=!0,D[O]=!1,X(f),Y(),e=!1,D[V]||(D[w]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,f.m_szType,"onDrawEnd",f.m_szId)))):"Point"===D[L]&&(D.clearShapeByType("Point"),(f=new q).m_szId=D[H].szId||"",f.m_szDrawColor=D[H].szDrawColor,f.setPointInfo([[i,r]]),X(f),Y())}e=!0}})),D[I].bind("mouseenter",(function(a){t={isIn:!0,offsetX:a.offsetX,offsetY:a.offsetY},D[w]&&e&&("Rect"===D[L]?f.move([[i,r],[a.offsetX,a.offsetY]]):"Grid"===D[L]&&D[A][0].move(i,r,a.offsetX,a.offsetY))})),D[I].bind("mouseleave",(function(e){t={isIn:!1,offsetX:e.offsetX,offsetY:e.offsetY}})),D[I].bind("mousemove",(function(a){if(D[O])D[w]&&e&&("Polygon"===D[L]&&0===f.m_iPolygonType&&(f.m_bClosed=!0),Y(),f.move(a.offsetX,a.offsetY,i,r));else{var n=l();n>-1?e&&("drag"===x?(D[A][n].drag(a.offsetX,a.offsetY),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,D[A][n].m_szType,"onDrag",D[A][n].m_szId)):"stretch"===x&&(D[A][n].stretch(a.offsetX,a.offsetY),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,D[A][n].m_szType,"onStretch",D[A][n].m_szId))):D[w]&&e&&t.isIn&&("Rect"===D[L]?f.move([[i,r],[a.offsetX,a.offsetY]]):"Grid"===D[L]&&D[A][0].move(i,r,a.offsetX,a.offsetY))}})),D[I].bind("mouseup",(function(t){if(D[I][0].style.cursor="default",null!=f&&"draw"===x)if("Rect"===D[L]){if(Math.abs(t.offsetX-i)>2&&Math.abs(t.offsetY-r)>2&&(X(f),D[V]||(D[w]=!1)),D[N]){var a,n={startPos:[],endPos:[]};n.startPos=[i,r],n.endPos=[t.offsetX,t.offsetY],null==(a=D[N])||a.call(D,n),D.clearAllShape()}f=null}else"Polygon"===D[L]&&0===f.m_iPolygonType&&D[O]&&Math.abs(t.offsetX-i)>2&&Math.abs(t.offsetY-r)>2&&(X(f),D[O]=!1,D[V]||(D[w]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,f.m_szType,"onDrawEnd",f.m_szId));e=!!D[O],D[O]||Y()})),D[I].bind("dblclick",(function(){D[w]&&"Grid"===D[L]&&(D[A][0].m_szGridMap="fffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffc",Y())})),D[I].bind("touchstart",(function(t){var i,r=t.target.getBoundingClientRect();if(null==(i=t.touches)?void 0:i[0]){if(a=parseInt(t.touches[0].clientX-r.x)>0?parseInt(t.touches[0].clientX-r.x):0,n=parseInt(t.touches[0].clientY-r.y)>0?parseInt(t.touches[0].clientY-r.y):0,x="draw",D[w]){if(D[B]<=D[A].length&&"Grid"!==D[L]&&"Point"!==D[L])return;"Rect"===D[L]?(f=new G).m_szTips=D[H].szTips||"":"Grid"===D[L]?0===D[A].length&&X(f=new Z):"Polygon"===D[L]?(D[O]||(D[O]=!0,(f=new z).m_szId=D[H].szId||"",f.m_szTips=D[H].szTips||"",f.m_iMinClosed=D[H].iMinClosed||3,f.m_iMaxPointNum=D[H].iMaxPointNum||11,f.m_iPolygonType=D[H].iPolygonType,f.m_szDrawColor=D[H].szDrawColor,f.m_szFillColor=D[H].szFillColor,f.m_iTranslucent=D[H].iTranslucent,f.m_iRedrawMode=D[H].iRedrawMode),1===f.m_iPolygonType&&(f.addPoint(a,n),f.m_aPoint.length===f.m_iMaxPointNum&&(f.m_bClosed=!0,D[O]=!1,X(f),Y(),e=!1,D[V]||(D[w]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,f.m_szType,"onDrawEnd",f.m_szId)))):"Point"===D[L]&&(D.clearShapeByType("Point"),(f=new q).m_szId=D[H].szId||"",f.m_szDrawColor=D[H].szDrawColor,f.setPointInfo([[a,n]]),X(f),Y())}e=!0}})),D[I].bind("touchmove",(function(t){var i,r=t.target.getBoundingClientRect();if(null==(i=t.touches)?void 0:i[0])if(s=parseInt(t.touches[0].clientX-r.x)>0?parseInt(t.touches[0].clientX-r.x):0,o=parseInt(t.touches[0].clientY-r.y)>0?parseInt(t.touches[0].clientY-r.y):0,D[O])D[w]&&e&&("Polygon"===D[L]&&0===f.m_iPolygonType&&(f.m_bClosed=!0),Y(),f.move(t.touches[0].offsetX,t.touches[0].offsetY,a,n));else{var h=l();h>-1?e&&("drag"===x?(D[A][h].drag(s,o),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,D[A][h].m_szType,"onDrag",D[A][h].m_szId)):"stretch"===x&&(D[A][h].stretch(s,o),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,D[A][h].m_szType,"onStretch",D[A][h].m_szId))):D[w]&&e&&("Rect"===D[L]?f.move([[2*a,2*n],[2*s,2*o]]):"Grid"===D[L]&&D[A][0].move(a,n,s,o))}})),D[I].bind("touchend",(function(t){if(a!=s||n!=o){if(D[I][0].style.cursor="default",null!=f&&"draw"===x)if("Rect"===D[L]){if(Math.abs(s-a)>2&&Math.abs(o-n)>2&&(X(f),D[V]||(D[w]=!1)),D[N]&&Math.abs(s-a)>15&&Math.abs(o-n)>15){var i,r={startPos:[],endPos:[]};r.startPos=[a,n],r.endPos=[s,o],null==(i=D[N])||i.call(D,r)}D.clearAllShape(),f=null}else"Polygon"===D[L]&&0===f.m_iPolygonType&&D[O]&&Math.abs(s-a)>2&&Math.abs(o-n)>2&&(X(f),D[O]=!1,D[V]||(D[w]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,f.m_szType,"onDrawEnd",f.m_szId));e=!!D[O],D[O]||Y()}}))}var W=function(){function e(){this.m_szId="",this.m_aPoint=[],this.m_bChoosed=!1,this.m_szDrawColor=D[k].szDrawColor,this.m_szFillColor=D[k].szFillColor,this.m_iTranslucent=D[k].iTranslucent,this.m_iIndexChoosePoint=-1,this.m_iDriftStartX=0,this.m_iDriftStartY=0,this.m_oEdgePoints={top:{x:0,y:0},left:{x:0,y:0},right:{x:0,y:0},bottom:{x:0,y:0}},this.m_szTips="",this.m_iEditType=0,this.m_iMinClosed=3,this.m_iMaxPointNum=11,this.m_bClosed=!1,this.m_iRedrawMode=0}var t=e.prototype;return t.draw=function(){},t.drag=function(e,t){if(2!==this.m_iEditType){var i=this.m_aPoint.length,r=0;for(r=0;r<i;r++)if(this.m_aPoint[r][0]+e-this.m_iDriftStartX>D.m_iCanvasWidth||this.m_aPoint[r][1]+t-this.m_iDriftStartY>D.m_iCanvasHeight||this.m_aPoint[r][0]+e-this.m_iDriftStartX<0||this.m_aPoint[r][1]+t-this.m_iDriftStartY<0)return this.m_iDriftStartX=e,void(this.m_iDriftStartY=t);for(r=0;r<i;r++)this.m_aPoint[r][0]=this.m_aPoint[r][0]+e-this.m_iDriftStartX,this.m_aPoint[r][1]=this.m_aPoint[r][1]+t-this.m_iDriftStartY;this.m_iDriftStartX=e,this.m_iDriftStartY=t,this.setPointInfo(this.m_aPoint),Y()}},t.stretch=function(e,t){0===this.m_iEditType&&(-1!==this.m_iIndexChoosePoint&&(this.m_aPoint[this.m_iIndexChoosePoint][0]=e,this.m_aPoint[this.m_iIndexChoosePoint][1]=t),this.setPointInfo(this.m_aPoint),Y())},t.inShape=function(e,t){for(var i=!1,r=this.m_aPoint.length,a=0,n=r-1;a<r;n=a++)this.m_aPoint[a][1]>t!=this.m_aPoint[n][1]>t&&e<(this.m_aPoint[n][0]-this.m_aPoint[a][0])*(t-this.m_aPoint[a][1])/(this.m_aPoint[n][1]-this.m_aPoint[a][1])+this.m_aPoint[a][0]&&(i=!i);return i},t.inArc=function(e,t,i){for(var r=!1,a=0,n=this.m_aPoint.length;a<n;a++)if(Math.sqrt((e-this.m_aPoint[a][0])*(e-this.m_aPoint[a][0])+(t-this.m_aPoint[a][1])*(t-this.m_aPoint[a][1]))<i){r=!0,this.m_iIndexChoosePoint=a;break}return r},t.getMouseDownPoints=function(e,t){this.m_iDriftStartX=e,this.m_iDriftStartY=t},t.getPointInfo=function(){return this.m_aPoint},t.setPointInfo=function(e){null!=e&&e.length>0&&(this.m_aPoint=e,this.setEdgePoints(e))},t.addPoint=function(e,t){this.m_aPoint.length<this.m_iMaxPointNum&&this.m_aPoint.push([e,t]),this.m_aPoint.length===this.m_iMaxPointNum&&this.setPointInfo(this.m_aPoint)},t.setEdgePoints=function(e){for(var t=0,i=e.length;t<i;t++)0===t?(this.m_oEdgePoints.top.x=e[t][0],this.m_oEdgePoints.top.y=e[t][1],this.m_oEdgePoints.left.x=e[t][0],this.m_oEdgePoints.left.y=e[t][1],this.m_oEdgePoints.right.x=e[t][0],this.m_oEdgePoints.right.y=e[t][1],this.m_oEdgePoints.bottom.x=e[t][0],this.m_oEdgePoints.bottom.y=e[t][1]):(e[t][1]<this.m_oEdgePoints.top.y&&(this.m_oEdgePoints.top.x=e[t][0],this.m_oEdgePoints.top.y=e[t][1]),e[t][0]>this.m_oEdgePoints.right.x&&(this.m_oEdgePoints.right.x=e[t][0],this.m_oEdgePoints.right.y=e[t][1]),e[t][1]>this.m_oEdgePoints.bottom.y&&(this.m_oEdgePoints.bottom.x=e[t][0],this.m_oEdgePoints.bottom.y=e[t][1]),e[t][0]<this.m_oEdgePoints.left.x&&(this.m_oEdgePoints.left.x=e[t][0],this.m_oEdgePoints.left.y=e[t][1]))},e}(),G=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Rect",t}F(t,e);var i=t.prototype;return i.setPointInfo=function(e){if(null!=e){for(var t=e[0][0],i=e[0][1],r=e[0][0],a=e[0][1],n=0,s=e.length;n<s;n++)t>e[n][0]&&(t=e[n][0]),i>e[n][1]&&(i=e[n][1]),r<e[n][0]&&(r=e[n][0]),a<e[n][1]&&(a=e[n][1]);this.m_aPoint=[[t,i],[r,i],[r,a],[t,a]]}},i.draw=function(){D[M].fillStyle=this.m_szFillColor,D[M].strokeStyle=this.m_szDrawColor;var e=this.m_aPoint[0][0],t=this.m_aPoint[0][1],i=this.m_aPoint[2][0]-e,r=this.m_aPoint[2][1]-t;if(D[M].globalAlpha=this.m_iTranslucent,D[M].fillRect(e,t,i,r),D[M].globalAlpha=1,D[M].fillText(this.m_szTips,(e+this.m_aPoint[2][0])/2,(t+this.m_aPoint[2][1])/2),this.m_bChoosed){var a=Math.round(i/2),n=Math.round(r/2);if(0===this.m_iEditType)for(var s=[e,e+a,e+i,e,e+i,e,e+a,e+i],o=[t,t,t,t+n,t+n,t+r,t+r,t+r],x=0;x<8;x++)D[M].beginPath(),D[M].arc(s[x],o[x],3,0,360,!1),D[M].fillStyle=this.m_szDrawColor,D[M].closePath(),D[M].fill()}D[M].strokeRect(e,t,i,r)},i.stretch=function(e,t){0===this.m_iEditType&&(0===this.m_iIndexChoosePoint?e<this.m_aPoint[2][0]&&t<this.m_aPoint[2][1]&&(this.m_aPoint[0][0]=e,this.m_aPoint[0][1]=t,this.m_aPoint[3][0]=e,this.m_aPoint[1][1]=t):1===this.m_iIndexChoosePoint?t<this.m_aPoint[2][1]&&(this.m_aPoint[0][1]=t,this.m_aPoint[1][1]=t):2===this.m_iIndexChoosePoint?e>this.m_aPoint[3][0]&&t<this.m_aPoint[3][1]&&(this.m_aPoint[1][0]=e,this.m_aPoint[1][1]=t,this.m_aPoint[2][0]=e,this.m_aPoint[0][1]=t):3===this.m_iIndexChoosePoint?e<this.m_aPoint[2][0]&&(this.m_aPoint[0][0]=e,this.m_aPoint[3][0]=e):4===this.m_iIndexChoosePoint?e>this.m_aPoint[0][0]&&(this.m_aPoint[1][0]=e,this.m_aPoint[2][0]=e):5===this.m_iIndexChoosePoint?e<this.m_aPoint[1][0]&&t>this.m_aPoint[1][1]&&(this.m_aPoint[3][0]=e,this.m_aPoint[3][1]=t,this.m_aPoint[0][0]=e,this.m_aPoint[2][1]=t):6===this.m_iIndexChoosePoint?t>this.m_aPoint[1][1]&&(this.m_aPoint[2][1]=t,this.m_aPoint[3][1]=t):7===this.m_iIndexChoosePoint&&e>this.m_aPoint[0][0]&&t>this.m_aPoint[0][1]&&(this.m_aPoint[2][0]=e,this.m_aPoint[2][1]=t,this.m_aPoint[1][0]=e,this.m_aPoint[3][1]=t),Y())},i.move=function(e){Y(),this.m_bChoosed=!0;var t=e[0][0],i=e[0][1],r=e[1][0],a=e[1][1];this.setPointInfo([[t,i],[r,i],[r,a],[t,a]]),this.draw()},i.inArc=function(e,t,i){for(var r=this.m_aPoint[0][0],a=this.m_aPoint[0][1],n=this.m_aPoint[2][0]-r,s=this.m_aPoint[2][1]-a,o=Math.round(n/2),x=Math.round(s/2),f=[r,r+o,r+n,r,r+n,r,r+o,r+n],l=[a,a,a,a+x,a+x,a+s,a+s,a+s],h=0;h<8;h++)if(Math.sqrt((e-f[h])*(e-f[h])+(t-l[h])*(t-l[h]))<i)return this.m_iIndexChoosePoint=h,!0;return!1},t}(W),J=function(e){function t(t,i){var r;return(r=e.call(this)||this).m_szType="RectOSD",r.m_szOSDType="overlay-date",r.m_szText=t||"",r.m_szEnabled=i||"",r.m_szDateStyle="",r.m_szClockType="",r.m_szDisplayWeek="",r.m_szId="",r.m_szAlignment="0",r}F(t,e);var i=t.prototype;return i.draw=function(){if("true"===this.m_szEnabled){var e=this.m_aPoint[0][0],t=this.m_aPoint[0][1],i=this.m_aPoint[2][0]-e,r=this.m_aPoint[2][1]-t;D[M].beginPath(),D[M].strokeStyle=this.m_szDrawColor,D[M].globalAlpha=1,D[M].rect(e,t,i,r),D[M].font="15px serif",D[M].strokeText(this.m_szText,e,t+15),D[M].stroke()}},i.drag=function(e,t){var i=this.m_aPoint.length,r=0;if("0"===this.m_szAlignment){for(r=0;r<i;r++)if(this.m_aPoint[r][1]+t-this.m_iDriftStartY>D.m_iCanvasHeight||this.m_aPoint[r][0]+e-this.m_iDriftStartX<0||this.m_aPoint[r][1]+t-this.m_iDriftStartY<0)return this.m_iDriftStartX=e,void(this.m_iDriftStartY=t);for(r=0;r<i;r++)this.m_aPoint[r][0]=this.m_aPoint[r][0]+e-this.m_iDriftStartX,this.m_aPoint[r][1]=this.m_aPoint[r][1]+t-this.m_iDriftStartY}else if("1"===this.m_szAlignment||"2"===this.m_szAlignment){for(r=0;r<i;r++)if(this.m_aPoint[r][1]+t-this.m_iDriftStartY>D.m_iCanvasHeight||this.m_aPoint[r][1]+t-this.m_iDriftStartY<0)return this.m_iDriftStartX=e,void(this.m_iDriftStartY=t);for(r=0;r<i;r++)this.m_aPoint[r][1]=this.m_aPoint[r][1]+t-this.m_iDriftStartY}this.m_iDriftStartX=e,this.m_iDriftStartY=t,this.setEdgePoints(this.m_aPoint),Y()},i.stretch=function(){},t}(W),Z=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Grid",t.m_iGridColNum=22,t.m_iGridRowNum=18,t.m_szGridMap="",t.m_aAddGridMap=[],t}F(t,e);var i=t.prototype;return i.draw=function(){for(var e=D.m_iCanvasWidth/this.m_iGridColNum,t=D.m_iCanvasHeight/this.m_iGridRowNum,i="",r=0;r<this.m_iGridRowNum;r++){for(var a=this.m_szGridMap.substring(6*r,6*r+6),n=parseInt("f"+a,16).toString(2).split("").slice(4),s="",o=0;o<this.m_iGridColNum;o++){var x="";"1"===n[o]?(D[M].strokeStyle=this.m_szDrawColor,D[M].globalAlpha=1,D[M].strokeRect(e*o,t*r,e,t),x="1"):x="0",this.m_aAddGridMap.length&&1===this.m_aAddGridMap[r][o]&&(D[M].strokeStyle=this.m_szDrawColor,D[M].strokeRect(e*o,t*r,e,t),x="1"),s+=x}i+=parseInt("1111"+s+"00",2).toString(16).substring(1)}this.m_szGridMap=i},i.move=function(e,t,i,r){var a,n,s=D.m_iCanvasWidth/this.m_iGridColNum,o=D.m_iCanvasHeight/this.m_iGridRowNum,x=Math.floor(e/s),f=Math.floor(t/o),l=Math.floor(Math.abs(i-e)/s),h=Math.floor(Math.abs(r-t)/o);a=i-e>0?1:-1,n=r-t>0?1:-1;for(var c=[],_=0;_<this.m_iGridRowNum;_++){c[_]=[];for(var u=0;u<this.m_iGridColNum;u++)c[_][u]=1===a?1===n?_>=f&&_<=f+h&&u>=x&&u<=x+l?1:0:_<=f&&_>=f-h&&u>=x&&u<=x+l?1:0:1===n?_>=f&&_<=f+h&&u<=x&&u>=x-l?1:0:_<=f&&_>=f-h&&u<=x&&u>=x-l?1:0}this.m_aAddGridMap=c,this.draw()},t}(W),j=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Line",t.m_iLineType=0,t.m_iDirection=0,t.m_iArrowType=0,t.m_aCrossArrowPoint=[],t}F(t,e);var i=t.prototype;return i.draw=function(){0===this.m_iLineType?this.drawNormalLine():1===this.m_iLineType?this.drawArrowLine():3===this.m_iLineType?this.drawCrossLine():4===this.m_iLineType&&this.drawLineCount()},i.drawNormalLine=function(){if(D[M].globalAlpha=1,this.m_aPoint.length>0){D[M].beginPath(),D[M].strokeStyle=this.m_szDrawColor,D[M].lineWidth=2,D[M].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]);for(var e=1,t=this.m_aPoint.length;e<t;e++)D[M].lineTo(this.m_aPoint[e][0],this.m_aPoint[e][1]);if(D[M].stroke(),this.m_bChoosed)for(var i=0,r=this.m_aPoint.length;i<r;i++)D[M].beginPath(),D[M].fillStyle=this.m_szDrawColor,D[M].arc(this.m_aPoint[i][0],this.m_aPoint[i][1],3,0,2*Math.PI,!0),D[M].closePath(),D[M].fill();""!==this.m_szTips&&(D[M].strokeStyle=this.m_szDrawColor,D[M].fillText(this.m_szTips,this.m_aPoint[0][0]+10,this.m_aPoint[0][1]+4))}},i.drawArrowLine=function(e,t,i,r,a,n,s,o){n=void 0!==n?n:30,s=void 0!==s?s:10,o=void 0!==o?o:1;var x=180*Math.atan2(i-a,t-r)/Math.PI,f=(x+n)*Math.PI/180,l=(x-n)*Math.PI/180,h=s*Math.cos(f),c=s*Math.sin(f),_=s*Math.cos(l),u=s*Math.sin(l);D[M].save(),D[M].beginPath();var d=t-h,p=i-c;D[M].moveTo(d,p),D[M].lineTo(t,i),d=t-_,p=i-u,D[M].lineTo(d,p),D[M].moveTo(t,i),D[M].lineTo(r,a),1===e&&(d=r+h,p=a+c,D[M].moveTo(d,p),D[M].lineTo(r,a),d=r+_,p=a+u,D[M].lineTo(d,p)),D[M].strokeStyle=this.m_szDrawColor,D[M].lineWidth=o,D[M].stroke(),D[M].restore()},i.drawCrossLine=function(){this.drawNormalLine();var e=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2,t=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2,i=180*Math.atan2(t-this.m_aPoint[0][1],e-this.m_aPoint[0][0])/Math.PI,r=(i+90)*Math.PI/180,a=(i-90)*Math.PI/180,n=25*Math.cos(r),s=25*Math.sin(r),o=25*Math.cos(a),x=25*Math.sin(a),f=0,l=0;f=e-n,l=t-s;var h=0,c=0;0===this.m_iDirection?(h=-10,c=-15):1===this.m_iDirection?(h=10,c=10):(h=10,c=-15),0!==this.m_iDirection&&this.drawArrowLine(0,f,l,e,t),D[M].strokeStyle=this.m_szDrawColor,D[M].font="8px",D[M].strokeText("A",f+h,l+4),f=e-o,l=t-x,1!==this.m_iDirection&&this.drawArrowLine(0,f,l,e,t),D[M].strokeStyle=this.m_szDrawColor,D[M].font="8px",D[M].strokeText("B",f+c,l+4)},i.drawLineCount=function(){this.drawNormalLine();var e=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2,t=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2,i=180*Math.atan2(t-this.m_aPoint[0][1],e-this.m_aPoint[0][0])/Math.PI,r=(i+90)*Math.PI/180,a=(i-90)*Math.PI/180,n=25*Math.cos(r),s=25*Math.sin(r),o=25*Math.cos(a),x=25*Math.sin(a),f=0,l=0;f=e-n,l=t-s,1===this.m_iArrowType?(f=e-o,l=t-x,this.drawArrowLine(0,f,l,e,t)):0===this.m_iArrowType&&this.drawArrowLine(0,f,l,e,t),this.m_aCrossArrowPoint=[[e,t],[f,l]]},i.inShape=function(e,t){for(var i=!1,r=0,a=this.m_aPoint.length-1;r<a;r++){var n=Math.sqrt((this.m_aPoint[r+1][0]-this.m_aPoint[r][0])*(this.m_aPoint[r+1][0]-this.m_aPoint[r][0])+(this.m_aPoint[r+1][1]-this.m_aPoint[r][1])*(this.m_aPoint[r+1][1]-this.m_aPoint[r][1]));Math.sqrt((e-this.m_aPoint[r][0])*(e-this.m_aPoint[r][0])+(t-this.m_aPoint[r][1])*(t-this.m_aPoint[r][1]))+Math.sqrt((e-this.m_aPoint[r+1][0])*(e-this.m_aPoint[r+1][0])+(t-this.m_aPoint[r+1][1])*(t-this.m_aPoint[r+1][1]))-n<1&&(i=!0)}return i},t}(W),z=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Polygon",t.m_iPolygonType=1,t}F(t,e);var i=t.prototype;return i.setPointInfo=function(e){if(null!=e){if(0===this.m_iPolygonType){for(var t=e[0][0],i=e[0][1],r=e[0][0],a=e[0][1],n=0,s=e.length;n<s;n++)t>e[n][0]&&(t=e[n][0]),i>e[n][1]&&(i=e[n][1]),r<e[n][0]&&(r=e[n][0]),a<e[n][1]&&(a=e[n][1]);this.m_aPoint=[[t,i],[r,i],[r,a],[t,a]]}else this.m_iPolygonType,this.m_aPoint=e;this.setEdgePoints(e)}},i.draw=function(){if(this.m_aPoint.length>0){D[M].fillStyle=this.m_szFillColor,D[M].strokeStyle=this.m_szDrawColor,D[M].globalAlpha=1;var e=0,t=0;if(this.m_bChoosed)for(e=0,t=this.m_aPoint.length;e<t;e++)D[M].beginPath(),D[M].arc(this.m_aPoint[e][0],this.m_aPoint[e][1],3,0,360,!1),D[M].fillStyle=this.m_szDrawColor,D[M].closePath(),D[M].fill();for(D[M].beginPath(),D[M].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]),e=0,t=this.m_aPoint.length;e<t;e++)0!==e&&D[M].lineTo(this.m_aPoint[e][0],this.m_aPoint[e][1]);D[M].stroke(),this.m_bClosed&&(D[M].fillText(this.m_szTips,(this.m_oEdgePoints.left.x+this.m_oEdgePoints.right.x)/2,(this.m_oEdgePoints.top.y+this.m_oEdgePoints.bottom.y)/2),D[M].closePath(),D[M].stroke(),D[M].globalAlpha=this.m_iTranslucent,D[M].fill())}},i.move=function(e,t,i,r){if(1===this.m_iPolygonType){if(this.m_aPoint.length<this.m_iMaxPointNum&&this.m_aPoint.length>0){D[M].fillStyle=this.m_szFillColor,D[M].strokeStyle=this.m_szDrawColor,D[M].globalAlpha=1;var a=0,n=0;for(a=0,n=this.m_aPoint.length;a<n;a++)D[M].beginPath(),D[M].arc(this.m_aPoint[a][0],this.m_aPoint[a][1],3,0,360,!1),D[M].fillStyle=this.m_szDrawColor,D[M].closePath(),D[M].fill();for(D[M].beginPath(),D[M].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]),a=0,n=this.m_aPoint.length;a<n;a++)0!==a&&D[M].lineTo(this.m_aPoint[a][0],this.m_aPoint[a][1]);D[M].lineTo(e,t),D[M].closePath(),D[M].stroke()}}else if(0===this.m_iPolygonType){this.m_bChoosed=!0;var s=i,o=r,x=e,f=t;this.setPointInfo([[s,o],[x,o],[x,f],[s,f]]),this.draw()}},i.stretch=function(e,t){0===this.m_iEditType&&(1===this.m_iPolygonType?-1!==this.m_iIndexChoosePoint&&(this.m_aPoint[this.m_iIndexChoosePoint][0]=e,this.m_aPoint[this.m_iIndexChoosePoint][1]=t):0===this.m_iIndexChoosePoint?e<this.m_aPoint[2][0]&&t<this.m_aPoint[2][1]&&(this.m_aPoint[0][0]=e,this.m_aPoint[0][1]=t,this.m_aPoint[3][0]=e,this.m_aPoint[1][1]=t):1===this.m_iIndexChoosePoint?e>this.m_aPoint[3][0]&&t<this.m_aPoint[3][1]&&(this.m_aPoint[1][0]=e,this.m_aPoint[1][1]=t,this.m_aPoint[2][0]=e,this.m_aPoint[0][1]=t):2===this.m_iIndexChoosePoint?e>this.m_aPoint[0][0]&&t>this.m_aPoint[0][1]&&(this.m_aPoint[2][0]=e,this.m_aPoint[2][1]=t,this.m_aPoint[1][0]=e,this.m_aPoint[3][1]=t):3===this.m_iIndexChoosePoint&&e<this.m_aPoint[1][0]&&t>this.m_aPoint[1][1]&&(this.m_aPoint[3][0]=e,this.m_aPoint[3][1]=t,this.m_aPoint[0][0]=e,this.m_aPoint[2][1]=t),this.setPointInfo(this.m_aPoint),Y())},t}(W),q=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Point",t.m_szId="",t}F(t,e);var i=t.prototype;return i.draw=function(){D[M].beginPath(),D[M].fillStyle=this.m_szDrawColor,D[M].globalAlpha=1,D[M].arc(this.m_aPoint[0][0],this.m_aPoint[0][1],10,0,2*Math.PI,!0),D[M].closePath(),D[M].fill()},i.drag=function(){},i.stretch=function(){},t}(W),K=function(){function e(e){D=this,this[I]=E("#"+e),this[M]=this[I][0].getContext("2d"),this[A]=[],this[w]=!1,this[L]="Rect",this[B]=10,this[V]=!0,this[H]={},this[N]=null,this[k]={szDrawColor:"#ff0000",szFillColor:"#343434",iTranslucent:.7},this[O]=!1,this.m_iCanvasWidth=this[I].width(),this.m_iCanvasHeight=this[I].height(),this.m_iHorizontalResolution=0,this.m_iVerticalResolution=0,this.m_szDisplayMode="",this.m_szVideoFormat="",U(),this[A].length=0}var t=e.prototype;return t.setDrawMutiShapeOneTime=function(e){this[V]=e},t.setMaxShapeSupport=function(e){this[B]=e},t.getMaxShapeSupport=function(){return this[B]},t.setDrawStatus=function(e,t){this[w]=e,t&&e&&(this[N]=t),e||(this[N]=null)},t.setShapeType=function(e){this[L]=e,Y()},t.setCurrentShapeInfo=function(e){this[H]=e||{szId:"",szTips:"",iMinClosed:3,iMaxPointNum:11,iPolygonType:1,iRedrawMode:0}},t.getShapeType=function(){return this[L]},t.getAllShapesInfo=function(){for(var e=[],t=0,i=this[A].length;t<i;t++)"Grid"===this[A][t].m_szType?e.push({szType:this[A][t].m_szType,szGridMap:this[A][t].m_szGridMap,iGridColNum:this[A][t].m_iGridColNum,iGridRowNum:this[A][t].m_iGridRowNum}):"RectOSD"===this[A][t].m_szType?e.push({szType:this[A][t].m_szType,szText:this[A][t].m_szText,szEnabled:this[A][t].m_szEnabled,szOSDType:this[A][t].m_szOSDType,iPositionX:this[A][t].m_aPoint[0][0],iPositionY:this[A][t].m_aPoint[0][1],szDateStyle:this[A][t].m_szDateStyle,szClockType:this[A][t].m_szClockType,szDisplayWeek:this[A][t].m_szDisplayWeek,szId:this[A][t].m_szId,szAlignment:this[A][t].m_szAlignment}):e.push({szType:this[A][t].m_szType,aPoint:this[A][t].m_aPoint,szId:this[A][t].m_szId,bChoosed:this[A][t].m_bChoosed});return e},t.deleteRepeatPolyonById=function(e){var t=this.getAllShapesInfo(),i=t.length;if(i>0)for(var r=0;r<i;r++)"Polygon"===t[r].szType&&t[r].szId===e&&this.deleteShape(r)},t.getShapesInfoByType=function(e){for(var t=[],i=0,r=this[A].length;i<r;i++)this[A][i].m_szType===e&&("Grid"===this[A][i].m_szType?t.push({szType:this[A][i].m_szType,szGridMap:this[A][i].m_szGridMap,iGridColNum:this[A][i].m_iGridColNum,iGridRowNum:this[A][i].m_iGridRowNum}):"RectOSD"===this[A][i].m_szType?t.push({szType:this[A][i].m_szType,szText:this[A][i].m_szText,szEnabled:this[A][i].m_szEnabled,szOSDType:this[A][i].m_szOSDType,iPositionX:this[A][i].m_aPoint[0][0],iPositionY:this[A][i].m_aPoint[0][1],szDateStyle:this[A][i].m_szDateStyle,szClockType:this[A][i].m_szClockType,szDisplayWeek:this[A][i].m_szDisplayWeek,szId:this[A][i].m_szId,szAlignment:this[A][i].m_szAlignment}):"Polygon"===e?t.push({szType:this[A][i].m_szType,szId:this[A][i].m_szId,iPolygonType:this[A][i].m_iPolygonType,iMinClosed:this[A][i].m_iMinClosed,iMaxPointNum:this[A][i].m_iMaxPointNum,iEditType:this[A][i].m_iEditType,aPoint:this[A][i].m_aPoint,bClosed:this[A][i].m_bClosed,szTips:this[A][i].m_szTips,szDrawColor:this[A][i].m_szDrawColor,szFillColor:this[A][i].m_szFillColor,iTranslucent:this[A][i].m_iTranslucent}):"Line"===e?t.push({szType:this[A][i].m_szType,szId:this[A][i].m_szId,aPoint:this[A][i].m_aPoint,szTips:this[A][i].m_szTips,iLineType:this[A][i].m_iLineType,iDirection:this[A][i].m_iDirection,iArrowType:this[A][i].m_iArrowType,szDrawColor:this[A][i].m_szDrawColor,aCrossArrowPoint:this[A][i].m_aCrossArrowPoint}):"Rect"===e?t.push({szType:this[A][i].m_szType,iEditType:this[A][i].m_iEditType,aPoint:this[A][i].m_aPoint,szTips:this[A][i].m_szTips,szDrawColor:this[A][i].m_szDrawColor,szFillColor:this[A][i].m_szFillColor,iTranslucent:this[A][i].m_iTranslucent}):t.push({szType:this[A][i].m_szType,aPoint:this[A][i].m_aPoint}));return t},t.setShapesInfoByType=function(e,t){t||(t=[]);var i=null;if("Rect"===e||"Polygon"===e||"Line"===e||"Point"===e)for(var r=0,a=t.length;r<a;r++)"Rect"===e?((i=new G).m_iEditType=t[r].iEditType,i.m_szTips=t[r].szTips||"",i.m_szDrawColor=t[r].szDrawColor,i.m_szFillColor=t[r].szFillColor,i.m_iTranslucent=t[r].iTranslucent,i.m_iRedrawMode=t[r].iRedrawMode):"Polygon"===e?(i=new z,0===t[r].iPolygonType?i.m_bClosed=!0:i.m_bClosed=t[r].bClosed,i.m_szTips=t[r].szTips||"",i.m_szId=t[r].szId||"",i.m_iPolygonType=t[r].iPolygonType,i.m_iMinClosed=t[r].iMinClosed||3,i.m_iMaxPointNum=t[r].iMaxPointNum||11,i.m_iEditType=t[r].iEditType,i.m_szDrawColor=t[r].szDrawColor,i.m_szFillColor=t[r].szFillColor,i.m_iTranslucent=t[r].iTranslucent,i.m_iRedrawMode=t[r].iRedrawMode):"Line"===e?((i=new j).m_iLineType=t[r].iLineType,i.m_szTips=t[r].szTips||"",i.m_szId=t[r].szId,i.m_iDirection=t[r].iDirection,i.m_iArrowType=t[r].iArrowType,i.m_szDrawColor=t[r].szDrawColor,i.setPointInfo(t[r].aPoint)):"Point"===e&&((i=new q).m_szId=t[r].szId,i.m_szDrawColor=t[r].szDrawColor,i.setPointInfo(t[r].aPoint)),i.setPointInfo(t[r].aPoint),0===r&&(i.m_bChoosed=!0),X(i);else"Grid"===e&&((i=new Z).m_szGridMap=t[0].szGridMap||"",i.m_iGridColNum=t[0].iGridColNum||22,i.m_iGridRowNum=t[0].iGridRowNum||18,X(i));Y()},t.addOSDShape=function(e,t,i,r,a){i||r||(i=0,r=0),a||(a={});var n=new J(e,t),s=10*e.replace(/[^x00-xff]/g,"rr").length;n.m_szOSDType=a.szOSDType||"",n.m_szDateStyle=a.szDateStyle||"",n.m_szClockType=a.szClockType||"",n.m_szDisplayWeek=a.szDisplayWeek||"",n.m_szId=a.szId||"",n.m_szAlignment=""+a.szAlignment||"0","0"===n.m_szAlignment?n.m_aPoint=[[i,r],[s+i,r],[s+i,r+20],[i,r+20]]:"1"===n.m_szAlignment?n.m_aPoint=[[0,r],[s,r],[s,r+20],[0,r+20]]:"2"===n.m_szAlignment?n.m_aPoint=[[this.m_iCanvasWidth-s,r],[this.m_iCanvasWidth,r],[this.m_iCanvasWidth,r+20],[this.m_iCanvasWidth-s,r+20]]:n.m_aPoint=[[i,r],[s+i,r],[s+i,r+20],[i,r+20]],X(n),Y()},t.selectShapeById=function(e,t){for(var i=0,r=D[A].length;i<r;i++)e===D[A][i].m_szType&&(t===D[A][i].m_szId?D[A][i].m_bChoosed=!0:D[A][i].m_bChoosed=!1);Y()},t.setCanvasSize=function(e,t){e>0&&t>0&&(this.m_iCanvasWidth=e,this.m_iCanvasHeight=t,Y())},t.setDrawStyle=function(e,t,i){this[k]={szDrawColor:e,szFillColor:t,iTranslucent:i}},t.clearAllShape=function(){this[A].length=0,D[O]=!1,Y()},t.clearShapeByType=function(e){for(var t=this[A].length;t>0;t--)this[A][t-1].m_szType===e&&("Grid"===e?(this[A][t-1].m_szGridMap="",this[A][t-1].m_aAddGridMap=[]):this[A].splice(t-1,1));"Polygon"===e&&(D[O]=!1),Y()},t.deleteShape=function(e){this[A].length>e&&this[A].splice(e,1),Y()},t.updateCanvas=function(e){this[I]=E("#"+e),this[M]=this[I][0].getContext("2d"),this.m_iCanvasWidth=this[I].width(),this.m_iCanvasHeight=this[I].height(),U()},t.resizeCanvas=function(){this.m_iCanvasWidth=this[I].width(),this.m_iCanvasHeight=this[I].height()},t.canvasRedraw=function(){Y()},e}(),$="object"==("undefined"==typeof global?"undefined":o(global))&&global&&global.Object===Object&&global,Q="object"==("undefined"==typeof self?"undefined":o(self))&&self&&self.Object===Object&&self,ee=$||Q||Function("return this")(),te=ee.Symbol,ie=Object.prototype,re=ie.hasOwnProperty,ae=ie.toString,ne=te?te.toStringTag:void 0,se=Object.prototype.toString,oe="[object Null]",xe="[object Undefined]",fe=te?te.toStringTag:void 0;function le(e){return null==e?void 0===e?xe:oe:fe&&fe in Object(e)?function(e){var t=re.call(e,ne),i=e[ne];try{e[ne]=void 0;var r=!0}catch(e){}var a=ae.call(e);return r&&(t?e[ne]=i:delete e[ne]),a}(e):function(e){return se.call(e)}(e)}function he(e){return null!=e&&"object"==o(e)}var ce=Array.isArray;function _e(e){var t=o(e);return null!=e&&("object"==t||"function"==t)}function ue(e){return e}var de="[object AsyncFunction]",pe="[object Function]",me="[object GeneratorFunction]",Pe="[object Proxy]";function ye(e){if(!_e(e))return!1;var t=le(e);return t==pe||t==me||t==de||t==Pe}var Se,be=ee["__core-js_shared__"],ge=(Se=/[^.]+$/.exec(be&&be.keys&&be.keys.IE_PROTO||""))?"Symbol(src)_1."+Se:"",ve=Function.prototype.toString,Re=/^\[object .+?Constructor\]$/,Ce=Function.prototype,Ee=Object.prototype,Fe=Ce.toString,Te=Ee.hasOwnProperty,De=RegExp("^"+Fe.call(Te).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ie(e,t){var i=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!_e(e)||(t=e,ge&&ge in t))&&(ye(e)?De:Re).test(function(e){if(null!=e){try{return ve.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}(i)?i:void 0}var Me,Ae,we,Le=Object.create,Be=function(){function e(){}return function(t){if(!_e(t))return{};if(Le)return Le(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}(),ke=Date.now,Oe=function(){try{var e=Ie(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),He=Oe?function(e,t){return Oe(e,"toString",{configurable:!0,enumerable:!1,value:(i=t,function(){return i}),writable:!0});var i}:ue,Ve=(Me=He,Ae=0,we=0,function(){var e=ke(),t=16-(e-we);if(we=e,t>0){if(++Ae>=800)return arguments[0]}else Ae=0;return Me.apply(void 0,arguments)}),Ne=9007199254740991,Ye=/^(?:0|[1-9]\d*)$/;function Xe(e,t){var i=o(e);return!!(t=null==t?Ne:t)&&("number"==i||"symbol"!=i&&Ye.test(e))&&e>-1&&e%1==0&&e<t}function Ue(e,t,i){"__proto__"==t&&Oe?Oe(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function We(e,t){return e===t||e!=e&&t!=t}var Ge=Object.prototype.hasOwnProperty;function Je(e,t,i){var r=e[t];Ge.call(e,t)&&We(r,i)&&(void 0!==i||t in e)||Ue(e,t,i)}var Ze=Math.max;var je=9007199254740991;function ze(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=je}function qe(e){return null!=e&&ze(e.length)&&!ye(e)}var Ke=Object.prototype;function $e(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Ke)}function Qe(e){return he(e)&&"[object Arguments]"==le(e)}var et=Object.prototype,tt=et.hasOwnProperty,it=et.propertyIsEnumerable,rt=Qe(function(){return arguments}())?Qe:function(e){return he(e)&&tt.call(e,"callee")&&!it.call(e,"callee")},at="object"==("undefined"==typeof exports?"undefined":o(exports))&&exports&&!exports.nodeType&&exports,nt=at&&"object"==("undefined"==typeof module?"undefined":o(module))&&module&&!module.nodeType&&module,st=nt&&nt.exports===at?ee.Buffer:void 0,ot=(st?st.isBuffer:void 0)||function(){return!1},xt={};xt["[object Float32Array]"]=xt["[object Float64Array]"]=xt["[object Int8Array]"]=xt["[object Int16Array]"]=xt["[object Int32Array]"]=xt["[object Uint8Array]"]=xt["[object Uint8ClampedArray]"]=xt["[object Uint16Array]"]=xt["[object Uint32Array]"]=!0,xt["[object Arguments]"]=xt["[object Array]"]=xt["[object ArrayBuffer]"]=xt["[object Boolean]"]=xt["[object DataView]"]=xt["[object Date]"]=xt["[object Error]"]=xt["[object Function]"]=xt["[object Map]"]=xt["[object Number]"]=xt["[object Object]"]=xt["[object RegExp]"]=xt["[object Set]"]=xt["[object String]"]=xt["[object WeakMap]"]=!1;var ft="object"==("undefined"==typeof exports?"undefined":o(exports))&&exports&&!exports.nodeType&&exports,lt=ft&&"object"==("undefined"==typeof module?"undefined":o(module))&&module&&!module.nodeType&&module,ht=lt&&lt.exports===ft&&$.process,ct=function(){try{return lt&&lt.require&&lt.require("util").types||ht&&ht.binding&&ht.binding("util")}catch(e){}}(),_t=ct&&ct.isTypedArray,ut=_t?function(e){return function(t){return e(t)}}(_t):function(e){return he(e)&&ze(e.length)&&!!xt[le(e)]},dt=Object.prototype.hasOwnProperty;var pt=Object.prototype.hasOwnProperty;function mt(e){return qe(e)?function(e,t){var i=ce(e),r=!i&&rt(e),a=!i&&!r&&ot(e),n=!i&&!r&&!a&&ut(e),s=i||r||a||n,o=s?function(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}(e.length,String):[],x=o.length;for(var f in e)!t&&!dt.call(e,f)||s&&("length"==f||a&&("offset"==f||"parent"==f)||n&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||Xe(f,x))||o.push(f);return o}(e,!0):function(e){if(!_e(e))return function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}(e);var t=$e(e),i=[];for(var r in e)("constructor"!=r||!t&&pt.call(e,r))&&i.push(r);return i}(e)}var Pt=Ie(Object,"create"),yt=Object.prototype.hasOwnProperty,St=Object.prototype.hasOwnProperty;function bt(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function gt(e,t){for(var i=e.length;i--;)if(We(e[i][0],t))return i;return-1}bt.prototype.clear=function(){this.__data__=Pt?Pt(null):{},this.size=0},bt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},bt.prototype.get=function(e){var t=this.__data__;if(Pt){var i=t[e];return"__lodash_hash_undefined__"===i?void 0:i}return yt.call(t,e)?t[e]:void 0},bt.prototype.has=function(e){var t=this.__data__;return Pt?void 0!==t[e]:St.call(t,e)},bt.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Pt&&void 0===t?"__lodash_hash_undefined__":t,this};var vt=Array.prototype.splice;function Rt(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Rt.prototype.clear=function(){this.__data__=[],this.size=0},Rt.prototype.delete=function(e){var t=this.__data__,i=gt(t,e);return!(i<0||(i==t.length-1?t.pop():vt.call(t,i,1),--this.size,0))},Rt.prototype.get=function(e){var t=this.__data__,i=gt(t,e);return i<0?void 0:t[i][1]},Rt.prototype.has=function(e){return gt(this.__data__,e)>-1},Rt.prototype.set=function(e,t){var i=this.__data__,r=gt(i,e);return r<0?(++this.size,i.push([e,t])):i[r][1]=t,this};var Ct=Ie(ee,"Map");function Et(e,t){var i,r,a=e.__data__;return("string"==(r=o(i=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==i:null===i)?a["string"==typeof t?"string":"hash"]:a.map}function Ft(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}Ft.prototype.clear=function(){this.size=0,this.__data__={hash:new bt,map:new(Ct||Rt),string:new bt}},Ft.prototype.delete=function(e){var t=Et(this,e).delete(e);return this.size-=t?1:0,t},Ft.prototype.get=function(e){return Et(this,e).get(e)},Ft.prototype.has=function(e){return Et(this,e).has(e)},Ft.prototype.set=function(e,t){var i=Et(this,e),r=i.size;return i.set(e,t),this.size+=i.size==r?0:1,this};var Tt=function(e,t){return function(i){return e(t(i))}}(Object.getPrototypeOf,Object),Dt="[object Object]",It=Function.prototype,Mt=Object.prototype,At=It.toString,wt=Mt.hasOwnProperty,Lt=At.call(Object);function Bt(e){var t=this.__data__=new Rt(e);this.size=t.size}Bt.prototype.clear=function(){this.__data__=new Rt,this.size=0},Bt.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},Bt.prototype.get=function(e){return this.__data__.get(e)},Bt.prototype.has=function(e){return this.__data__.has(e)},Bt.prototype.set=function(e,t){var i=this.__data__;if(i instanceof Rt){var r=i.__data__;if(!Ct||r.length<199)return r.push([e,t]),this.size=++i.size,this;i=this.__data__=new Ft(r)}return i.set(e,t),this.size=i.size,this};var kt="object"==("undefined"==typeof exports?"undefined":o(exports))&&exports&&!exports.nodeType&&exports,Ot=kt&&"object"==("undefined"==typeof module?"undefined":o(module))&&module&&!module.nodeType&&module,Ht=Ot&&Ot.exports===kt?ee.Buffer:void 0,Vt=(Ht&&Ht.allocUnsafe,ee.Uint8Array);function Nt(e,t,i){(void 0!==i&&!We(e[t],i)||void 0===i&&!(t in e))&&Ue(e,t,i)}function Yt(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function Xt(e,t,i,r,a,n,s){var o=Yt(e,i),x=Yt(t,i),f=s.get(x);if(f)Nt(e,i,f);else{var l,h=n?n(o,x,i+"",e,t,s):void 0,c=void 0===h;if(c){var _=ce(x),u=!_&&ot(x),d=!_&&!u&&ut(x);h=x,_||u||d?ce(o)?h=o:he(l=o)&&qe(l)?h=function(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}(o):u?(c=!1,h=function(e,t){return e.slice()}(x)):d?(c=!1,h=function(e,t){var i,r,a=t?(r=new(i=e.buffer).constructor(i.byteLength),new Vt(r).set(new Vt(i)),r):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}(x,!0)):h=[]:function(e){if(!he(e)||le(e)!=Dt)return!1;var t=Tt(e);if(null===t)return!0;var i=wt.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&At.call(i)==Lt}(x)||rt(x)?(h=o,rt(o)?h=function(e){return function(e,t,i,r){var a=!i;i||(i={});for(var n=-1,s=t.length;++n<s;){var o=t[n],x=void 0;void 0===x&&(x=e[o]),a?Ue(i,o,x):Je(i,o,x)}return i}(e,mt(e))}(o):_e(o)&&!ye(o)||(h=function(e){return"function"!=typeof e.constructor||$e(e)?{}:Be(Tt(e))}(x))):c=!1}c&&(s.set(x,h),a(h,x,r,n,s),s.delete(x)),Nt(e,i,h)}}function Ut(e,t,i,r,a){e!==t&&function(e,t,i){for(var r=-1,a=Object(e),n=i(e),s=n.length;s--;){var o=n[++r];if(!1===t(a[o],o,a))break}}(t,(function(n,s){if(a||(a=new Bt),_e(n))Xt(e,t,s,i,Ut,r,a);else{var o=r?r(Yt(e,s),n,s+"",e,t,a):void 0;void 0===o&&(o=n),Nt(e,s,o)}}),mt)}var Wt,Gt=(Wt=function(e,t,i){Ut(e,t,i)},function(e,t){return Ve(function(e,t,i){return t=Ze(void 0===t?e.length-1:t,0),function(){for(var r=arguments,a=-1,n=Ze(r.length-t,0),s=Array(n);++a<n;)s[a]=r[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=r[a];return o[t]=i(s),function(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}(e,this,o)}}(e,t,ue),e+"")}((function(e,t){var i=-1,r=t.length,a=r>1?t[r-1]:void 0,n=r>2?t[2]:void 0;for(a=Wt.length>3&&"function"==typeof a?(r--,a):void 0,n&&function(e,t,i){if(!_e(i))return!1;var r=o(t);return!!("number"==r?qe(i)&&Xe(t,i.length):"string"==r&&t in i)&&We(i[t],e)}(t[0],t[1],n)&&(a=r<3?void 0:a,r=1),e=Object(e);++i<r;){var s=t[i];s&&Wt(e,s,i)}return e}))),Jt="https://open.ys7.com";
/*
*
* @ezuikit/utils-service v1.0.1
* Copyright (c) 2024-3-23 Ezviz-OpenBiz
* Released under MIT the License.
*
*/function Zt(e,t){return new Promise((function(i,r){fetch(e,t).then((function(e){return e.json()})).then((function(e){var t,a;if(200==+e.code||0==+(null==(t=e.meta)?void 0:t.code)||200==+(null==(a=e.meta)?void 0:a.code))i(e);else{if(e.meta)return e.meta.msg=e.meta.message,void r(e.meta);r(e)}})).catch((function(e){if(e.meta)return e.meta.msg=e.meta.message,void r(e.meta);r(e)}))}))}function jt(e,t,i,r,a,n,s){try{var o=e[n](s),x=o.value}catch(e){return void i(e)}o.done?t(x):Promise.resolve(x).then(r,a)}function zt(e){var t=e.slice(0,4),i=e.slice(4,6),r=e.slice(6,8),a=e.slice(8,10),n=e.slice(10,12),s=e.slice(12,14);return new Date(t+"/"+i+"/"+r+" "+a+":"+n+":"+s)}var qt=function(){function e(e){if(!e)throw new Error("options is required");var t;this._options=e,/^http[s]?:\/\//.test(null!=(t=null==e?void 0:e.domain)?t:"")||(this._options.domain=Jt)}var t=e.prototype;return t.getDeviceCapacity=function(){return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var i=new FormData;Object.entries(e).forEach((function(e){var t=e[0],r=e[1];i.append(t,r)})),e=i}return Zt((null!=t?t:Jt)+"/api/lapp/device/capacity",{method:"POST",body:e})}(d(this._options,["accessToken","deviceSerial"]),this._options.domain)},t.getDeviceInfo=function(){return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var i=new FormData;Object.entries(e).forEach((function(e){var t=e[0],r=e[1];i.append(t,r)})),e=i}return Zt((null!=t?t:Jt)+"/api/lapp/device/info",{method:"POST",body:e})}(d(this._options,["accessToken","deviceSerial"]),this._options.domain)},t.getRealPlayUrl=function(e){var t,i,r=this,a=null==(i=this._options)||null==(t=i.extraParams)?void 0:t.ezopenParams;return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var i,r,a=new FormData;a.append("isFlv","false"),a.append("userAgent",null==(r=window)||null==(i=r.navigator)?void 0:i.userAgent),a.append("isHttp","false"),Object.entries(e).forEach((function(e){var t=e[0],i=e[1];a.append(t,i)})),e=a}return Zt((null!=t?t:Jt)+"/api/lapp/live/url/ezopen",{method:"POST",body:e})}(e=Object.assign({},d(this._options,["accessToken"]),e,"object"==o(a)?a:{}),this._options.domain).then((function(e){var t,i,a,n,s,x,f,l,h,c,_="",u="",d="";if((null==e||null==(t=e.ext)?void 0:t.token)?(u+=e.data,d=e.ext.token,_=e.data):(null==(i=e.data)?void 0:i.token)&&(u+=e.data.url,d=e.data.token,_=e.data.url),u=u.includes("live")?u+"&ssn="+d+"&auth=1&biz=4&cln=100":u+"&ssn="+d+"&auth=1&cln=100",null==(n=r._options)||null==(a=n.extraParams)?void 0:a.wsParams)if("string"==typeof(null==(x=r._options)||null==(s=x.extraParams)?void 0:s.wsParams))u+="&"+(null==(c=r._options)||null==(h=c.extraParams)?void 0:h.wsParams);else if("object"==o(null==(l=r._options)||null==(f=l.extraParams)?void 0:f.wsParams)){var p,m;for(var P in null==(m=r._options)||null==(p=m.extraParams)?void 0:p.wsParams){var y,S;u+="&"+P+"="+(null==(S=r._options)||null==(y=S.extraParams)?void 0:y.wsParams[P])}}return{playUrl:_,stream:d,realUrl:u}}))},t.getVideoByTime=function(e){return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var i,r=new FormData;Object.entries(e).forEach((function(e){var t=e[0],i=e[1];r.append(t,i)})),r.append("version",null!=(i=e.version)?i:"2.0"),e=r}return new Promise((function(i,r){var a=function(){return s.apply(this,arguments)},n=[];function s(){var o;return o=function(){var s,o,x,f;return function(e,t){var i,r,a,n,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function o(n){return function(o){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&n[0]?r.return:n[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],r=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,o])}}}(this,(function(l){switch(l.label){case 0:return[4,Zt((null!=t?t:Jt)+"/api/lapp/video/by/time",{method:"POST",body:e})];case 1:return(o=l.sent()).data&&Array.isArray(o.data)?(n=n.concat(o.data),i({code:200,data:n,msg:""}),[2]):(!Array.isArray(o.data)&&(null==(s=o.data)?void 0:s.files)&&(n=n.concat(o.data.files),(null==(x=o.data)?void 0:x.isAll)?i({code:200,data:n,msg:""}):(null==(f=o.data)?void 0:f.nextFileTime)&&(e.append("startTime",o.data.nextFileTime),a().catch(r))),i({code:200,data:[],msg:""}),[2])}}))},s=function(){var e=this,t=arguments;return new Promise((function(i,r){var a=o.apply(e,t);function n(e){jt(a,i,r,n,s,"next",e)}function s(e){jt(a,i,r,n,s,"throw",e)}n(void 0)}))},s.apply(this,arguments)}a().catch(r)}))}(e=Object.assign({},d(this._options,["accessToken","deviceSerial"]),e),this._options.domain)},t.getRecordCloudVideoByTime=function(e){return function(e,t){var i,a,n={startTime:e.startTime?null==(i=r(e.startTime))?void 0:i.format("YYYY-MM-DD HH:mm:ss"):void 0,endTime:e.startTime?null==(a=r(e.endTime))?void 0:a.format("YYYY-MM-DD HH:mm:ss"):void 0,spaceId:e.spaceId},s=Object.keys(n).reduce((function(e,t){return null==n[t]?e:e+="&"+t+"="+encodeURIComponent(n[t])}),"").replace("&","");return Zt((null!=t?t:Jt)+"/api/service/cloudrecord/video/info/list?"+s,{method:"GET",headers:{accessToken:e.accessToken,deviceSerial:e.deviceSerial,localIndex:e.channelNo}}).then((function(e){return e.data=(e.data||[]).map((function(e){return e.endTime=zt(e.stopTime).getTime(),e.startTime=zt(e.startTime).getTime(),e.iStorageVersion=e.istorageVersion,e.busType=7,delete e.istorageVersion,e})),e}))}(e=Object.assign({},d(this._options,["accessToken","deviceSerial"]),e),this._options.domain)},t.getThemeDetailById=function(e){return t={accessToken:this._options.accessToken,id:e},Zt((null!=(i=this._options.domain)?i:Jt)+"/api/service/media/template/getDetail?accessToken="+t.accessToken+"&id="+t.id,{method:"GET"});var t,i},t.setMirrorFlip=function(e){return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var i=new FormData;Object.entries(e).forEach((function(e){var t=e[0],r=e[1];i.append(t,r)})),e=i}return Zt((null!=t?t:Jt)+"/api/lapp/device/ptz/mirror",{method:"POST",body:e})}(e=Object.assign({},d(this._options,["accessToken","deviceSerial"]),e),this._options.domain)},t.getVideoByID=function(e){return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var i=new FormData;Object.entries(e).forEach((function(e){var t=e[0],r=e[1];i.append(t,r)})),e=i}return Zt((null!=t?t:Jt)+"/api/lapp/video/by/id",{method:"POST",body:e})}(e,this._options.domain)},t.getVersion=function(){return this.version},e}(),Kt={title:"title",name:"name {{name}}"},$t={title:"标题",name:"姓名 {{name}}"};function Qt(e){return/^ezopen:\/\//.test(e)}var ei={autoPlay:!0,width:600,height:400,decoderType:"auto",audio:!0,logger:{level:"INFO",name:"EZOPEN",showTime:!0}};function ti(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function ii(e,t,i,r,a,n,s){try{var o=e[n](s),x=o.value}catch(e){return void i(e)}o.done?t(x):Promise.resolve(x).then(r,a)}function ri(e){return function(){var t=this,i=arguments;return new Promise((function(r,a){var n=e.apply(t,i);function s(e){ii(n,r,a,s,o,"next",e)}function o(e){ii(n,r,a,s,o,"throw",e)}s(void 0)}))}}function ai(e,t){var i,r,a,n,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function o(n){return function(o){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&n[0]?r.return:n[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],r=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,o])}}}var ni=function(){function e(e){this.plugins=new Map,this.context=e}var t=e.prototype;return t.usePlugins=function(e){var t=this;return ri((function(){var i,r,a;return ai(this,(function(n){switch(n.label){case 0:i=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return ti(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?ti(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e),n.label=1;case 1:return(r=i()).done?[3,4]:(a=r.value,[4,t.use(a)]);case 2:n.sent(),n.label=3;case 3:return[3,1];case 4:return[2]}}))}))()},t.use=function(e){var t=this;return ri((function(){var i;return ai(this,(function(r){switch(r.label){case 0:return e.name?("function"==typeof(null==e?void 0:e.init)&&(null==e||e.init()),i=!0,(null==e?void 0:e.beforeExec)?[4,e.beforeExec(t.context)]:[3,2]):[3,3];case 1:i=r.sent(),r.label=2;case 2:return i&&e.exec(t.context),"function"==typeof(null==e?void 0:e.afterExec)&&(null==e||e.afterExec(t.context)),t.plugins.set(e.name.toLowerCase(),e),[3,4];case 3:r.label=4;case 4:return[2]}}))}))()},t.destroyByName=function(e){var t=this.plugins.get(e.toLowerCase());t&&"function"==typeof(null==t?void 0:t.destroy)&&t.destroy(),this.plugins.delete(e)},t.destroy=function(){var e=this;(this.plugins||[]).forEach((function(t,i){e.destroyByName(i)})),this.plugins=null},e}();function si(e,t,i){return{code:null!=t?t:0,data:e,msg:i}}function oi(e,t,i,r){return{data:e,msg:t,source:i,target:r}}var xi="playError",fi="EVENT_CALLBACK",li={pluginErrorHandler:"pluginErrorHandler",getStreamHeaderCallback:"getStreamHeaderCallback",getVideoStreamCallback:"getVideoStreamCallback",appearFirstFrameCallback:"appearFirstFrameCallback",averageStreamSuccessCallback:"averageStreamSuccessCallback",setRunTimeInfoCallBack:"setRunTimeInfoCallBack",openStreamCallback:"openStreamCallback"},hi={initializing:"initializing",loadstart:"loadstart",abort:"abort",waiting:"waiting",canplay:"canplay",rateChange:"ratechange",volumeChange:"volumechange",debug:"debug",error:"error",videoInfo:"videoInfo",decoder:"decoder",urlChange:"urlChange",API:{play:"play",pause:"pause",rateChange:"ratechange",volumeChange:"volumechange",destroy:"destroy",snapshot:"snapshot",fullScreen:"fullScreen",exitScreen:"exitScreen",resize:"resize",seek:"seek",resume:"resume"},NETWORK:{deviceCapacity:"network.deviceCapacity",deviceInfo:"network.deviceInfo",videoFragmentFiles:"network.videoFragmentFiles",error:{error:"network.error",deviceCapacity:"network.error.deviceCapacity",deviceInfo:"network.error.deviceInfo",realPlayUrl:"network.error.realPlayUrl",videoFragmentFiles:"network.error.videoFragmentFiles"}},SOCKET:{autoClose:"StreamClient.autoClose",openStream:"StreamClient.openStream",startPlay:"StreamClient.startPlay",stopAll:"StreamClient.stopAll",setPlayRate:"StreamClient.setPlayRate",seek:"StreamClient.seek",close:"StreamClient.close"},CALLBACK:li,FECCorrect:{setFEC2DParam:"setFEC2DParam"}},ci="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),_i=new Uint8Array(16);function ui(){if(!ci)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ci(_i)}for(var di=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,pi=[],mi=0;mi<256;++mi)pi.push((mi+256).toString(16).substr(1));function Pi(e,t,i){var r=(e=e||{}).random||(e.rng||ui)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){i=i||0;for(var a=0;a<16;++a)t[i+a]=r[a];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(pi[e[t+0]]+pi[e[t+1]]+pi[e[t+2]]+pi[e[t+3]]+"-"+pi[e[t+4]]+pi[e[t+5]]+"-"+pi[e[t+6]]+pi[e[t+7]]+"-"+pi[e[t+8]]+pi[e[t+9]]+"-"+pi[e[t+10]]+pi[e[t+11]]+pi[e[t+12]]+pi[e[t+13]]+pi[e[t+14]]+pi[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&di.test(e)}(i))throw TypeError("Stringified UUID is invalid");return i}(r)}var yi=function(){function e(){}var t=e.prototype;return t.createClientObject=function(e,t,i,r){return{socket:e,id:t,iCurChannel:i,iCurStream:r,resolve:null,reject:null}},t.zeroPlayCmd=function(e,t){return new Uint8Array([0,0,0,44,0,0,0,0,0,0,0,0,0,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e+1,0,0,0,t,0,0,4,0])},t.playCmd=function(e,t){return new Uint8Array([0,0,0,44,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e,0,0,0,t,0,0,4,0])},t.playbackCmd=function(e,t,i,r){var a=e.split("T")[0],n=e.split("T")[1],s="0"+parseInt(a.substring(0,4),10).toString(16),o=parseInt(a.substring(4,6),10),x=parseInt(a.substring(6),10),f=parseInt(n.substring(0,2),10),l=parseInt(n.substring(2,4),10),h=parseInt(n.substring(4,6),10),c=t.split("T")[0],_=t.split("T")[1],u="0"+parseInt(c.substring(0,4),10).toString(16),d=parseInt(c.substring(4,6),10),p=parseInt(_.substring(0,2),10),m=parseInt(_.substring(2,4),10),P=parseInt(_.substring(4,6),10),y=[0,0,0,96,0,0,0,0,0,0,0,0,0,3,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i,0,0,parseInt(s.substring(0,2),16),parseInt(s.substring(2,4),16),0,0,0,o,0,0,0,x,0,0,0,f,0,0,0,l,0,0,0,h,0,0,parseInt(u.substring(0,2),16),parseInt(u.substring(2,4),16),0,0,0,d,0,0,0,x,0,0,0,p,0,0,0,m,0,0,0,P,0,0,0,0,0,0,0,0,r,0,0,0];return new Uint8Array(y)},t.playRateCmd=function(e){for(var t=(parseInt(e,10)>>>0).toString(16).toLocaleUpperCase().toString(16),i=t.length;i<8;i++)t="0"+t;for(var r=[0,0,0,0],a=0,n=t.length;a<n;a+=2)r[Math.floor(a/2)]=parseInt(t.substring(a,a+2),16);var s=[0,0,0,36,0,0,0,0,0,0,0,0,0,3,1,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,r[0],r[1],r[2],r[3]];return new Uint8Array(s)},t.pauseCmd=function(){return new Uint8Array([0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])},t.resumeCmd=function(){return new Uint8Array([0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])},e}(),Si=function(){function e(){}var t=e.prototype;return t.createClientObject=function(e,t,i){return{socket:e,id:t,playURL:i,resolve:null,reject:null}},t.getMediaFromSdp=function(e){for(var t=e.indexOf("MEDIAINFO=")+10,i=e.slice(t,t+80),r=[],a=0,n=i.length/2;a<n;a++)r[a]=parseInt(i.slice(2*a,2*a+2),16);return new Uint8Array(r)},t.playCmd=function(e){var t={sequence:0,cmd:"realplay",url:e};return JSON.stringify(t)},t.playbackCmd=function(e,t,i){var r={sequence:0,cmd:"playback",url:i,startTime:e,endTime:t};return JSON.stringify(r)},t.playRateCmd=function(e){var t={sequence:0,cmd:"changespeed",speed:e};return JSON.stringify(t)},t.pauseCmd=function(){return JSON.stringify({sequence:0,cmd:"pause"})},t.resumeCmd=function(){return JSON.stringify({sequence:0,cmd:"resume"})},t.getError=function(e){var t=3001;return e&&(6===parseInt(e.statusCode,10)&&"streamLimit"===e.subStatusCode?t=3002:4===parseInt(e.statusCode,10)&&"badAuthorization"===e.subStatusCode&&(t=3003)),{iErrorNum:t,oError:e}},e}();function bi(e,t,i){null!=e&&("number"==typeof e?this.fromNumber(e,t,i):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function gi(){return new bi(null)}bi.prototype.am=function(e,t,i,r,a,n){var s=16383&t;for(t>>=14;--n>=0;){var o=16383&this[e],x=this[e++]>>14,f=t*o+x*s;a=((o=s*o+((16383&f)<<14)+i[r]+a)>>28)+(f>>14)+t*x,i[r++]=268435455&o}return a},bi.prototype.DB=28,bi.prototype.DM=268435455,bi.prototype.DV=1<<28,bi.prototype.FV=Math.pow(2,52),bi.prototype.F1=24,bi.prototype.F2=4;var vi,Ri,Ci=[];for(vi="0".charCodeAt(0),Ri=0;Ri<=9;++Ri)Ci[vi++]=Ri;for(vi="a".charCodeAt(0),Ri=10;Ri<36;++Ri)Ci[vi++]=Ri;for(vi="A".charCodeAt(0),Ri=10;Ri<36;++Ri)Ci[vi++]=Ri;function Ei(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function Fi(e,t){var i=Ci[e.charCodeAt(t)];return null==i?-1:i}function Ti(e){var t=gi();return t.fromInt(e),t}function Di(e){var t,i=1;return 0!=(t=e>>>16)&&(e=t,i+=16),0!=(t=e>>8)&&(e=t,i+=8),0!=(t=e>>4)&&(e=t,i+=4),0!=(t=e>>2)&&(e=t,i+=2),!!(e>>1)&&(i+=1),i}function Ii(e){this.m=e}function Mi(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Ai(e,t){return e&t}function wi(e,t){return e|t}function Li(e,t){return e^t}function Bi(e,t){return e&~t}function ki(e){if(0==e)return-1;var t=0;return!(65535&e)&&(e>>=16,t+=16),!(255&e)&&(e>>=8,t+=8),!(15&e)&&(e>>=4,t+=4),!(3&e)&&(e>>=2,t+=2),!(1&e)&&++t,t}function Oi(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function Hi(){}function Vi(e){return e}function Ni(e){this.r2=gi(),this.q3=gi(),bi.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}Ii.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},Ii.prototype.revert=function(e){return e},Ii.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},Ii.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},Ii.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},Mi.prototype.convert=function(e){var t=gi();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(bi.ZERO)>0&&this.m.subTo(t,t),t},Mi.prototype.revert=function(e){var t=gi();return e.copyTo(t),this.reduce(t),t},Mi.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var i,r=(i=32767&e[t])*this.mpl+((i*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[i=t+this.m.t]+=this.m.am(0,r,e,t,0,this.m.t);e[i]>=e.DV;)e[i]-=e.DV,e[++i]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},Mi.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},Mi.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},bi.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},bi.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0},bi.prototype.fromString=function(e,t){var i;if(16==t)i=4;else if(8==t)i=3;else if(256==t)i=8;else if(2==t)i=1;else if(32==t)i=5;else{if(4!=t)return void this.fromRadix(e,t);i=2}this.s=this.t=0;for(var r=e.length,a=!1,n=0;--r>=0;){var s=8==i?255&e[r]:Fi(e,r);s<0?"-"==e.charAt(r)&&(a=!0):(a=!1,0==n?this[this.t++]=s:n+i>this.DB?(this[this.t-1]|=(s&(1<<this.DB-n)-1)<<n,this[this.t++]=s>>this.DB-n):this[this.t-1]|=s<<n,(n+=i)>=this.DB&&(n-=this.DB))}8==i&&!!(128&e[0])&&(this.s=-1,n>0&&(this[this.t-1]|=(1<<this.DB-n)-1<<n)),this.clamp(),a&&bi.ZERO.subTo(this,this)},bi.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},bi.prototype.dlShiftTo=function(e,t){var i;for(i=this.t-1;i>=0;--i)t[i+e]=this[i];for(i=e-1;i>=0;--i)t[i]=0;t.t=this.t+e,t.s=this.s},bi.prototype.drShiftTo=function(e,t){for(var i=e;i<this.t;++i)t[i-e]=this[i];t.t=Math.max(this.t-e,0),t.s=this.s},bi.prototype.lShiftTo=function(e,t){var i,r=e%this.DB,a=this.DB-r,n=(1<<a)-1,s=Math.floor(e/this.DB),o=this.s<<r&this.DM;for(i=this.t-1;i>=0;--i)t[i+s+1]=this[i]>>a|o,o=(this[i]&n)<<r;for(i=s-1;i>=0;--i)t[i]=0;t[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()},bi.prototype.rShiftTo=function(e,t){t.s=this.s;var i=Math.floor(e/this.DB);if(i>=this.t)t.t=0;else{var r=e%this.DB,a=this.DB-r,n=(1<<r)-1;t[0]=this[i]>>r;for(var s=i+1;s<this.t;++s)t[s-i-1]|=(this[s]&n)<<a,t[s-i]=this[s]>>r;r>0&&(t[this.t-i-1]|=(this.s&n)<<a),t.t=this.t-i,t.clamp()}},bi.prototype.subTo=function(e,t){for(var i=0,r=0,a=Math.min(e.t,this.t);i<a;)r+=this[i]-e[i],t[i++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r-=e.s;i<this.t;)r+=this[i],t[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<e.t;)r-=e[i],t[i++]=r&this.DM,r>>=this.DB;r-=e.s}t.s=r<0?-1:0,r<-1?t[i++]=this.DV+r:r>0&&(t[i++]=r),t.t=i,t.clamp()},bi.prototype.multiplyTo=function(e,t){var i=this.abs(),r=e.abs(),a=i.t;for(t.t=a+r.t;--a>=0;)t[a]=0;for(a=0;a<r.t;++a)t[a+i.t]=i.am(0,r[a],t,a,0,i.t);t.s=0,t.clamp(),this.s!=e.s&&bi.ZERO.subTo(t,t)},bi.prototype.squareTo=function(e){for(var t=this.abs(),i=e.t=2*t.t;--i>=0;)e[i]=0;for(i=0;i<t.t-1;++i){var r=t.am(i,t[i],e,2*i,0,1);(e[i+t.t]+=t.am(i+1,2*t[i],e,2*i+1,r,t.t-i-1))>=t.DV&&(e[i+t.t]-=t.DV,e[i+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(i,t[i],e,2*i,0,1)),e.s=0,e.clamp()},bi.prototype.divRemTo=function(e,t,i){var r=e.abs();if(!(r.t<=0)){var a=this.abs();if(a.t<r.t)null!=t&&t.fromInt(0),null!=i&&this.copyTo(i);else{null==i&&(i=gi());var n=gi(),s=this.s,o=(e=e.s,this.DB-Di(r[r.t-1]));if(o>0?(r.lShiftTo(o,n),a.lShiftTo(o,i)):(r.copyTo(n),a.copyTo(i)),0!=(a=n[(r=n.t)-1])){var x=a*(1<<this.F1)+(r>1?n[r-2]>>this.F2:0),f=this.FV/x,l=(x=(1<<this.F1)/x,1<<this.F2),h=i.t,c=h-r,_=null==t?gi():t;for(n.dlShiftTo(c,_),i.compareTo(_)>=0&&(i[i.t++]=1,i.subTo(_,i)),bi.ONE.dlShiftTo(r,_),_.subTo(n,n);n.t<r;)n[n.t++]=0;for(;--c>=0;){var u=i[--h]==a?this.DM:Math.floor(i[h]*f+(i[h-1]+l)*x);if((i[h]+=n.am(0,u,i,c,0,r))<u)for(n.dlShiftTo(c,_),i.subTo(_,i);i[h]<--u;)i.subTo(_,i)}null!=t&&(i.drShiftTo(r,t),s!=e&&bi.ZERO.subTo(t,t)),i.t=r,i.clamp(),o>0&&i.rShiftTo(o,i),s<0&&bi.ZERO.subTo(i,i)}}}},bi.prototype.invDigit=function(){if(this.t<1)return 0;var e,t=this[0];return 1&t?(e=(e=(e=(e=(e=3&t)*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e:0},bi.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},bi.prototype.exp=function(e,t){if(e>4294967295||e<1)return bi.ONE;var i=gi(),r=gi(),a=t.convert(this),n=Di(e)-1;for(a.copyTo(i);--n>=0;)if(t.sqrTo(i,r),(e&1<<n)>0)t.mulTo(r,a,i);else{var s=i;i=r,r=s}return t.revert(i)},bi.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);if(16==e)e=4;else if(8==e)e=3;else if(2==e)e=1;else if(32==e)e=5;else if(64==e)e=6;else{if(4!=e)return this.toRadix(e);e=2}var t,i=(1<<e)-1,r=!1,a="",n=this.t,s=this.DB-n*this.DB%e;if(n-- >0)for(s<this.DB&&(t=this[n]>>s)>0&&(r=!0,a=Ei(t));n>=0;)s<e?(t=(this[n]&(1<<s)-1)<<e-s,t|=this[--n]>>(s+=this.DB-e)):(t=this[n]>>(s-=e)&i,s<=0&&(s+=this.DB,--n)),t>0&&(r=!0),r&&(a+=Ei(t));return r?a:"0"},bi.prototype.negate=function(){var e=gi();return bi.ZERO.subTo(this,e),e},bi.prototype.abs=function(){return this.s<0?this.negate():this},bi.prototype.compareTo=function(e){if(0!=(t=this.s-e.s))return t;var t,i=this.t;if(0!=(t=i-e.t))return t;for(;--i>=0;)if(0!=(t=this[i]-e[i]))return t;return 0},bi.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Di(this[this.t-1]^this.s&this.DM)},bi.prototype.mod=function(e){var t=gi();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(bi.ZERO)>0&&e.subTo(t,t),t},bi.prototype.modPowInt=function(e,t){var i;return i=e<256||t.isEven()?new Ii(t):new Mi(t),this.exp(e,i)},bi.ZERO=Ti(0),bi.ONE=Ti(1),Hi.prototype.convert=Vi,Hi.prototype.revert=Vi,Hi.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i)},Hi.prototype.sqrTo=function(e,t){e.squareTo(t)},Ni.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=gi();return e.copyTo(t),this.reduce(t),t},Ni.prototype.revert=function(e){return e},Ni.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},Ni.prototype.mulTo=function(e,t,i){e.multiplyTo(t,i),this.reduce(i)},Ni.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var Yi=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],Xi=67108864/Yi[Yi.length-1];function Ui(){}function Wi(){this.j=this.i=0,this.S=[]}bi.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},bi.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),i=Ti(t=Math.pow(e,t)),r=gi(),a=gi(),n="";for(this.divRemTo(i,r,a);r.signum()>0;)n=(t+a.intValue()).toString(e).substr(1)+n,r.divRemTo(i,r,a);return a.intValue().toString(e)+n},bi.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var i=this.chunkSize(t),r=Math.pow(t,i),a=!1,n=0,s=0,o=0;o<e.length;++o){var x=Fi(e,o);x<0?"-"==e.charAt(o)&&0==this.signum()&&(a=!0):(s=t*s+x,++n>=i&&(this.dMultiply(r),this.dAddOffset(s,0),s=n=0))}n>0&&(this.dMultiply(Math.pow(t,n)),this.dAddOffset(s,0)),a&&bi.ZERO.subTo(this,this)},bi.prototype.fromNumber=function(e,t,i){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,i),this.testBit(e-1)||this.bitwiseTo(bi.ONE.shiftLeft(e-1),wi,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(bi.ONE.shiftLeft(e-1),this);else{var r=7&e;(i=[]).length=1+(e>>3),t.nextBytes(i),r>0?i[0]&=(1<<r)-1:i[0]=0,this.fromString(i,256)}},bi.prototype.bitwiseTo=function(e,t,i){var r,a,n=Math.min(e.t,this.t);for(r=0;r<n;++r)i[r]=t(this[r],e[r]);if(e.t<this.t){for(a=e.s&this.DM,r=n;r<this.t;++r)i[r]=t(this[r],a);i.t=this.t}else{for(a=this.s&this.DM,r=n;r<e.t;++r)i[r]=t(a,e[r]);i.t=e.t}i.s=t(this.s,e.s),i.clamp()},bi.prototype.changeBit=function(e,t){var i=bi.ONE.shiftLeft(e);return this.bitwiseTo(i,t,i),i},bi.prototype.addTo=function(e,t){for(var i=0,r=0,a=Math.min(e.t,this.t);i<a;)r+=this[i]+e[i],t[i++]=r&this.DM,r>>=this.DB;if(e.t<this.t){for(r+=e.s;i<this.t;)r+=this[i],t[i++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;i<e.t;)r+=e[i],t[i++]=r&this.DM,r>>=this.DB;r+=e.s}t.s=r<0?-1:0,r>0?t[i++]=r:r<-1&&(t[i++]=this.DV+r),t.t=i,t.clamp()},bi.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},bi.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},bi.prototype.multiplyLowerTo=function(e,t,i){var r,a=Math.min(this.t+e.t,t);for(i.s=0,i.t=a;a>0;)i[--a]=0;for(r=i.t-this.t;a<r;++a)i[a+this.t]=this.am(0,e[a],i,a,0,this.t);for(r=Math.min(e.t,t);a<r;++a)this.am(0,e[a],i,a,0,t-a);i.clamp()},bi.prototype.multiplyUpperTo=function(e,t,i){--t;var r=i.t=this.t+e.t-t;for(i.s=0;--r>=0;)i[r]=0;for(r=Math.max(t-this.t,0);r<e.t;++r)i[this.t+r-t]=this.am(t-r,e[r],i,0,0,this.t+r-t);i.clamp(),i.drShiftTo(1,i)},bi.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,i=this.s<0?e-1:0;if(this.t>0)if(0==t)i=this[0]%e;else for(var r=this.t-1;r>=0;--r)i=(t*i+this[r])%e;return i},bi.prototype.millerRabin=function(e){var t=this.subtract(bi.ONE),i=t.getLowestSetBit();if(i<=0)return!1;var r=t.shiftRight(i);(e=e+1>>1)>Yi.length&&(e=Yi.length);for(var a=gi(),n=0;n<e;++n){a.fromInt(Yi[Math.floor(Math.random()*Yi.length)]);var s=a.modPow(r,this);if(0!=s.compareTo(bi.ONE)&&0!=s.compareTo(t)){for(var o=1;o++<i&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(bi.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},bi.prototype.clone=function(){var e=gi();return this.copyTo(e),e},bi.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},bi.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},bi.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},bi.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},bi.prototype.toByteArray=function(){var e=this.t,t=[];t[0]=this.s;var i,r=this.DB-e*this.DB%8,a=0;if(e-- >0)for(r<this.DB&&(i=this[e]>>r)!=(this.s&this.DM)>>r&&(t[a++]=i|this.s<<this.DB-r);e>=0;)r<8?(i=(this[e]&(1<<r)-1)<<8-r,i|=this[--e]>>(r+=this.DB-8)):(i=this[e]>>(r-=8)&255,r<=0&&(r+=this.DB,--e)),!!(128&i)&&(i|=-256),0==a&&(128&this.s)!=(128&i)&&++a,(a>0||i!=this.s)&&(t[a++]=i);return t},bi.prototype.equals=function(e){return 0==this.compareTo(e)},bi.prototype.min=function(e){return this.compareTo(e)<0?this:e},bi.prototype.max=function(e){return this.compareTo(e)>0?this:e},bi.prototype.and=function(e){var t=gi();return this.bitwiseTo(e,Ai,t),t},bi.prototype.or=function(e){var t=gi();return this.bitwiseTo(e,wi,t),t},bi.prototype.xor=function(e){var t=gi();return this.bitwiseTo(e,Li,t),t},bi.prototype.andNot=function(e){var t=gi();return this.bitwiseTo(e,Bi,t),t},bi.prototype.not=function(){for(var e=gi(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},bi.prototype.shiftLeft=function(e){var t=gi();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},bi.prototype.shiftRight=function(e){var t=gi();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},bi.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+ki(this[e]);return this.s<0?this.t*this.DB:-1},bi.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,i=0;i<this.t;++i)e+=Oi(this[i]^t);return e},bi.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:!!(this[t]&1<<e%this.DB)},bi.prototype.setBit=function(e){return this.changeBit(e,wi)},bi.prototype.clearBit=function(e){return this.changeBit(e,Bi)},bi.prototype.flipBit=function(e){return this.changeBit(e,Li)},bi.prototype.add=function(e){var t=gi();return this.addTo(e,t),t},bi.prototype.subtract=function(e){var t=gi();return this.subTo(e,t),t},bi.prototype.multiply=function(e){var t=gi();return this.multiplyTo(e,t),t},bi.prototype.divide=function(e){var t=gi();return this.divRemTo(e,t,null),t},bi.prototype.remainder=function(e){var t=gi();return this.divRemTo(e,null,t),t},bi.prototype.divideAndRemainder=function(e){var t=gi(),i=gi();return this.divRemTo(e,t,i),[t,i]},bi.prototype.modPow=function(e,t){var i,r,a=e.bitLength(),n=Ti(1);if(a<=0)return n;i=a<18?1:a<48?3:a<144?4:a<768?5:6,r=a<8?new Ii(t):t.isEven()?new Ni(t):new Mi(t);var s=[],o=3,x=i-1,f=(1<<i)-1;if(s[1]=r.convert(this),i>1)for(a=gi(),r.sqrTo(s[1],a);o<=f;)s[o]=gi(),r.mulTo(a,s[o-2],s[o]),o+=2;var l,h=e.t-1,c=!0,_=gi();for(a=Di(e[h])-1;h>=0;){for(a>=x?l=e[h]>>a-x&f:(l=(e[h]&(1<<a+1)-1)<<x-a,h>0&&(l|=e[h-1]>>this.DB+a-x)),o=i;!(1&l);)l>>=1,--o;if((a-=o)<0&&(a+=this.DB,--h),c)s[l].copyTo(n),c=!1;else{for(;o>1;)r.sqrTo(n,_),r.sqrTo(_,n),o-=2;o>0?r.sqrTo(n,_):(o=n,n=_,_=o),r.mulTo(_,s[l],n)}for(;h>=0&&!(e[h]&1<<a);)r.sqrTo(n,_),o=n,n=_,_=o,--a<0&&(a=this.DB-1,--h)}return r.revert(n)},bi.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return bi.ZERO;for(var i=e.clone(),r=this.clone(),a=Ti(1),n=Ti(0),s=Ti(0),o=Ti(1);0!=i.signum();){for(;i.isEven();)i.rShiftTo(1,i),t?(a.isEven()&&n.isEven()||(a.addTo(this,a),n.subTo(e,n)),a.rShiftTo(1,a)):n.isEven()||n.subTo(e,n),n.rShiftTo(1,n);for(;r.isEven();)r.rShiftTo(1,r),t?(s.isEven()&&o.isEven()||(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);i.compareTo(r)>=0?(i.subTo(r,i),t&&a.subTo(s,a),n.subTo(o,n)):(r.subTo(i,r),t&&s.subTo(a,s),o.subTo(n,o))}return 0!=r.compareTo(bi.ONE)?bi.ZERO:o.compareTo(e)>=0?o.subtract(e):o.signum()<0?(o.addTo(e,o),o.signum()<0?o.add(e):o):o},bi.prototype.pow=function(e){return this.exp(e,new Hi)},bi.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone();if(e=e.s<0?e.negate():e.clone(),t.compareTo(e)<0){var i=t;t=e,e=i}i=t.getLowestSetBit();var r=e.getLowestSetBit();if(r<0)return t;for(i<r&&(r=i),r>0&&(t.rShiftTo(r,t),e.rShiftTo(r,e));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),t.compareTo(e)>=0?(t.subTo(e,t),t.rShiftTo(1,t)):(e.subTo(t,e),e.rShiftTo(1,e));return r>0&&e.lShiftTo(r,e),e},bi.prototype.isProbablePrime=function(e){var t,i=this.abs();if(1==i.t&&i[0]<=Yi[Yi.length-1]){for(t=0;t<Yi.length;++t)if(i[0]==Yi[t])return!0;return!1}if(i.isEven())return!1;for(t=1;t<Yi.length;){for(var r=Yi[t],a=t+1;a<Yi.length&&r<Xi;)r*=Yi[a++];for(r=i.modInt(r);t<a;)if(r%Yi[t++]==0)return!1}return i.millerRabin(e)},bi.prototype.square=function(){var e=gi();return this.squareTo(e),e},function(e,t,i,r,a,n,s){function x(e){var t,r,a=this,n=e.length,s=0,o=a.i=a.j=a.m=0;for(a.S=[],a.c=[],n||(e=[n++]);s<i;)a.S[s]=s++;for(s=0;s<i;s++)o=o+(t=a.S[s])+e[s%n]&255,r=a.S[o],a.S[s]=r,a.S[o]=t;a.g=function(e){var t=a.S,r=a.i+1&255,n=t[r],s=a.j+n&255,o=t[s];t[r]=o,t[s]=n;for(var x=t[n+o&255];--e;)o=t[s=s+(n=t[r=r+1&255])&255],t[r]=o,t[s]=n,x=x*i+t[n+o&255];return a.i=r,a.j=s,x},a.g(i)}function f(e,t,i,r,a){var n;if(i=[],a=void 0===e?"undefined":(n=e)&&"undefined"!=typeof Symbol&&n.constructor===Symbol?"symbol":o(n),t&&"object"==a)for(r in e)if(r.indexOf("S")<5)try{i.push(f(e[r],t-1))}catch(e){}return i.length?i:e+("string"!=a?"\0":"")}function l(e,t,i,r){for(e+="",r=i=0;r<e.length;r++){var a=t,n=255&r,s=(i^=19*t[255&r])+e.charCodeAt(r);a[n]=255&s}for(r in e="",t)e+=String.fromCharCode(t[r]);return e}t.seedrandom=function(r,o){var h,c=[];return r=l(f(o?[r,e]:arguments.length?r:[(new Date).getTime(),e,window],3),c),l((h=new x(c)).S,e),t.random=function(){for(var e=h.g(6),t=s,r=0;e<a;)e=(e+r)*i,t*=i,r=h.g(1);for(;e>=n;)e/=2,t/=2,r>>>=1;return(e+r)/t},r},s=t.pow(i,6),a=t.pow(2,a),n=2*a,l(t.random(),e)}([],Math,256,0,52),Ui.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random())},Wi.prototype.init=function(e){var t,i,r;for(t=0;t<256;++t)this.S[t]=t;for(t=i=0;t<256;++t)i=i+this.S[t]+e[t%e.length]&255,r=this.S[t],this.S[t]=this.S[i],this.S[i]=r;this.j=this.i=0},Wi.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var Gi,Ji,Zi,ji=256;function zi(){!function(e){Ji[Zi++]^=255&e,Ji[Zi++]^=e>>8&255,Ji[Zi++]^=e>>16&255,Ji[Zi++]^=e>>24&255,Zi>=ji&&(Zi-=ji)}((new Date).getTime())}if(null==Ji){var qi;for(Ji=[],Zi=0;Zi<ji;)qi=Math.floor(65536*Math.random()),Ji[Zi++]=qi>>>8,Ji[Zi++]=255&qi;Zi=0,zi()}function Ki(){if(null==Gi){for(zi(),(Gi=new Wi).init(Ji),Zi=0;Zi<Ji.length;++Zi)Ji[Zi]=0;Zi=0}return Gi.next()}function $i(){}$i.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=Ki()};var Qi=function(e){return function(e){function t(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function i(e,t){return e>>>t|e<<32-t}return e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var r=e.charCodeAt(i);r<128?t+=String.fromCharCode(r):(r>127&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t}(e),function(e){for(var t="",i=0;i<4*e.length;i++)t+="0123456789abcdef".charAt(e[i>>2]>>8*(3-i%4)+4&15)+"0123456789abcdef".charAt(e[i>>2]>>8*(3-i%4)&15);return t}(function(e,r){var a,n,s,o,x,f,l,h,c,_,u,d,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],m=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],P=Array(64);for(e[r>>5]|=128<<24-r%32,e[15+(r+64>>9<<4)]=r,c=0;c<e.length;c+=16){for(a=m[0],n=m[1],s=m[2],o=m[3],x=m[4],f=m[5],l=m[6],h=m[7],_=0;_<64;_++)P[_]=_<16?e[_+c]:t(t(t(i(P[_-2],17)^i(P[_-2],19)^P[_-2]>>>10,P[_-7]),i(P[_-15],7)^i(P[_-15],18)^P[_-15]>>>3),P[_-16]),u=t(t(t(t(h,i(x,6)^i(x,11)^i(x,25)),x&f^~x&l),p[_]),P[_]),d=t(i(a,2)^i(a,13)^i(a,22),a&n^a&s^n&s),h=l,l=f,f=x,x=t(o,u),o=s,s=n,n=a,a=t(u,d);m[0]=t(a,m[0]),m[1]=t(n,m[1]),m[2]=t(s,m[2]),m[3]=t(o,m[3]),m[4]=t(x,m[4]),m[5]=t(f,m[5]),m[6]=t(l,m[6]),m[7]=t(h,m[7])}return m}(function(e){for(var t=[],i=0;i<8*e.length;i+=8)t[i>>5]|=(255&e.charCodeAt(i/8))<<24-i%32;return t}(e),8*e.length))}(e)};function er(e,t){return new bi(e,t)}function tr(){this.n=null,this.e=0,this.coeff=this.dmq1=this.dmp1=this.q=this.p=this.d=null}tr.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},tr.prototype.setPublic=function(e,t){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=er(e,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")},tr.prototype.encrypt=function(e){return null==(e=function(e,t){if(t<e.length+11)throw"Message too long for RSA (n="+t+", l="+e.length+")";for(var i=[],r=e.length-1;r>=0&&t>0;){var a=e.charCodeAt(r--);a<128?i[--t]=a:a>127&&a<2048?(i[--t]=63&a|128,i[--t]=a>>6|192):(i[--t]=63&a|128,i[--t]=a>>6&63|128,i[--t]=a>>12|224)}for(i[--t]=0,r=new $i,a=[];t>2;){for(a[0]=0;0==a[0];)r.nextBytes(a);i[--t]=a[0]}return i[--t]=2,i[--t]=0,new bi(i)}(e,this.n.bitLength()+7>>3))||null==(e=this.doPublic(e))?null:1&(e=e.toString(16)).length?"0"+e:e},tr.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);var t=e.mod(this.p).modPow(this.dmp1,this.p);for(e=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(e)<0;)t=t.add(this.p);return t.subtract(e).multiply(this.coeff).mod(this.p).multiply(this.q).add(e)},tr.prototype.setPrivate=function(e,t,i){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=er(e,16),this.e=parseInt(t,16),this.d=er(i,16)):alert("Invalid RSA private key")},tr.prototype.setPrivateEx=function(e,t,i,r,a,n,s,o){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=er(e,16),this.e=parseInt(t,16),this.d=er(i,16),this.p=er(r,16),this.q=er(a,16),this.dmp1=er(n,16),this.dmq1=er(s,16),this.coeff=er(o,16)):alert("Invalid RSA private key")},tr.prototype.generate=function(e,t){var i=new Ui,r=e>>1;this.e=parseInt(t,16);for(var a=new bi(t,16);;){for(;this.p=new bi(e-r,1,i),0!=this.p.subtract(bi.ONE).gcd(a).compareTo(bi.ONE)||!this.p.isProbablePrime(10););for(;this.q=new bi(r,1,i),0!=this.q.subtract(bi.ONE).gcd(a).compareTo(bi.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var n=this.p;this.p=this.q,this.q=n}n=this.p.subtract(bi.ONE);var s=this.q.subtract(bi.ONE),o=n.multiply(s);if(0==o.gcd(a).compareTo(bi.ONE)){this.n=this.p.multiply(this.q),this.d=a.modInverse(o),this.dmp1=this.d.mod(n),this.dmq1=this.d.mod(s),this.coeff=this.q.modInverse(this.p);break}}},tr.prototype.decrypt=function(e){return null==(e=this.doPrivate(er(e,16)))?null:function(e,t){for(var i=e.toByteArray(),r=0;r<i.length&&0==i[r];)++r;if(i.length-r!=t-1||2!=i[r])return null;for(++r;0!=i[r];)if(++r>=i.length)return null;for(var a="";++r<i.length;){var n=255&i[r];n<128?a+=String.fromCharCode(n):n>191&&n<224?(a+=String.fromCharCode((31&n)<<6|63&i[r+1]),++r):(a+=String.fromCharCode((15&n)<<12|(63&i[r+1])<<6|63&i[r+2]),r+=2)}return a}(e,this.n.bitLength()+7>>3)};var ir=[];ir.sha1="3021300906052b0e03021a05000414",ir.sha256="3031300d060960864801650304020105000420";var rr=[];function ar(e,t,i){t/=4,e=(0,rr[i])(e),i="00"+ir[i]+e,e="",t=t-4-i.length;for(var r=0;r<t;r+=2)e+="ff";return sPaddedMessageHex="0001"+e+i}function nr(e){for(var t in ir){var i=ir[t],r=i.length;if(e.substring(0,r)==i)return[t,e.substring(r)]}return[]}rr.sha1=function(e){return function(e){function t(e,t){return e<<t|e>>>32-t}function i(e){var t,i="";for(t=7;t>=0;t--)i+=(e>>>4*t&15).toString(16);return i}var r,a,n,s,o,x,f,l=Array(80),h=1732584193,c=4023233417,_=2562383102,u=271733878,d=3285377520;e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var r=e.charCodeAt(i);r<128?t+=String.fromCharCode(r):(r>127&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t}(e),n=e.length;var p=[];for(r=0;r<n-3;r+=4)a=e.charCodeAt(r)<<24|e.charCodeAt(r+1)<<16|e.charCodeAt(r+2)<<8|e.charCodeAt(r+3),p.push(a);switch(n%4){case 0:r=2147483648;break;case 1:r=e.charCodeAt(n-1)<<24|8388608;break;case 2:r=e.charCodeAt(n-2)<<24|e.charCodeAt(n-1)<<16|32768;break;case 3:r=e.charCodeAt(n-3)<<24|e.charCodeAt(n-2)<<16|e.charCodeAt(n-1)<<8|128}for(p.push(r);p.length%16!=14;)p.push(0);for(p.push(n>>>29),p.push(n<<3&4294967295),e=0;e<p.length;e+=16){for(r=0;r<16;r++)l[r]=p[e+r];for(r=16;r<=79;r++)l[r]=t(l[r-3]^l[r-8]^l[r-14]^l[r-16],1);for(a=h,n=c,s=_,o=u,x=d,r=0;r<=19;r++)f=t(a,5)+(n&s|~n&o)+x+l[r]+1518500249&4294967295,x=o,o=s,s=t(n,30),n=a,a=f;for(r=20;r<=39;r++)f=t(a,5)+(n^s^o)+x+l[r]+1859775393&4294967295,x=o,o=s,s=t(n,30),n=a,a=f;for(r=40;r<=59;r++)f=t(a,5)+(n&s|n&o|s&o)+x+l[r]+2400959708&4294967295,x=o,o=s,s=t(n,30),n=a,a=f;for(r=60;r<=79;r++)f=t(a,5)+(n^s^o)+x+l[r]+3395469782&4294967295,x=o,o=s,s=t(n,30),n=a,a=f;h=h+a&4294967295,c=c+n&4294967295,_=_+s&4294967295,u=u+o&4294967295,d=d+x&4294967295}return(f=i(h)+i(c)+i(_)+i(u)+i(d)).toLowerCase()}(e)},rr.sha256=Qi,tr.prototype.signString=function(e,t){var i=ar(e,this.n.bitLength(),t);return this.doPrivate(er(i,16)).toString(16)},tr.prototype.signStringWithSHA1=function(e){return e=ar(e,this.n.bitLength(),"sha1"),this.doPrivate(er(e,16)).toString(16)},tr.prototype.signStringWithSHA256=function(e){return e=ar(e,this.n.bitLength(),"sha256"),this.doPrivate(er(e,16)).toString(16)},tr.prototype.verifyString=function(e,t){t=t.replace(/[ \n]+/g,"");var i=this.doPublic(er(t,16)).toString(16).replace(/^1f+00/,""),r=nr(i);return 0!=r.length&&(i=r[1])==(0,rr[r[0]])(e)},tr.prototype.verifyHexSignatureForMessage=function(e,t){return function(e,t,i,r){return 0!=(i=nr(t=function(e,t,i){return function(e,t,i){var r=new tr;return r.setPublic(t,i),r.doPublic(e)}(e,t,i).toString(16).replace(/^1f+00/,"")}(t,i,r))).length&&(t=i[1])==(0,rr[i[0]])(e)}(t,er(e,16),this.n.toString(16),this.e.toString(16))};var sr,or,xr=function(){var e={Sbox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ShiftRowTab:[0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11],Init:function(){e.Sbox_Inv=Array(256);for(var t=0;t<256;t++)e.Sbox_Inv[e.Sbox[t]]=t;for(e.ShiftRowTab_Inv=Array(16),t=0;t<16;t++)e.ShiftRowTab_Inv[e.ShiftRowTab[t]]=t;for(e.xtime=Array(256),t=0;t<128;t++)e.xtime[t]=t<<1,e.xtime[128+t]=t<<1^27},Done:function(){delete e.Sbox_Inv,delete e.ShiftRowTab_Inv,delete e.xtime},ExpandKey:function(t){var i,r=t.length,a=1;switch(r){case 16:i=176;break;case 24:i=208;break;case 32:i=240;break;default:alert("my.ExpandKey: Only key lengths of 16, 24 or 32 bytes allowed!")}for(var n=r;n<i;n+=4){var s=t.slice(n-4,n);n%r==0?(s=[e.Sbox[s[1]]^a,e.Sbox[s[2]],e.Sbox[s[3]],e.Sbox[s[0]]],(a<<=1)>=256&&(a^=283)):r>24&&n%r==16&&(s=[e.Sbox[s[0]],e.Sbox[s[1]],e.Sbox[s[2]],e.Sbox[s[3]]]);for(var o=0;o<4;o++)t[n+o]=t[n+o-r]^s[o]}},Encrypt:function(t,i){var r=i.length;e.AddRoundKey(t,i.slice(0,16));for(var a=16;a<r-16;a+=16)e.SubBytes(t,e.Sbox),e.ShiftRows(t,e.ShiftRowTab),e.MixColumns(t),e.AddRoundKey(t,i.slice(a,a+16));e.SubBytes(t,e.Sbox),e.ShiftRows(t,e.ShiftRowTab),e.AddRoundKey(t,i.slice(a,r))},Decrypt:function(t,i){var r=i.length;for(e.AddRoundKey(t,i.slice(r-16,r)),e.ShiftRows(t,e.ShiftRowTab_Inv),e.SubBytes(t,e.Sbox_Inv),r-=32;r>=16;r-=16)e.AddRoundKey(t,i.slice(r,r+16)),e.MixColumns_Inv(t),e.ShiftRows(t,e.ShiftRowTab_Inv),e.SubBytes(t,e.Sbox_Inv);e.AddRoundKey(t,i.slice(0,16))},SubBytes:function(e,t){for(var i=0;i<16;i++)e[i]=t[e[i]]},AddRoundKey:function(e,t){for(var i=0;i<16;i++)e[i]^=t[i]},ShiftRows:function(e,t){for(var i=[].concat(e),r=0;r<16;r++)e[r]=i[t[r]]},MixColumns:function(t){for(var i=0;i<16;i+=4){var r=t[i+0],a=t[i+1],n=t[i+2],s=t[i+3],o=r^a^n^s;t[i+0]^=o^e.xtime[r^a],t[i+1]^=o^e.xtime[a^n],t[i+2]^=o^e.xtime[n^s],t[i+3]^=o^e.xtime[s^r]}},MixColumns_Inv:function(t){for(var i=0;i<16;i+=4){var r=t[i+0],a=t[i+1],n=t[i+2],s=t[i+3],o=r^a^n^s,x=e.xtime[o],f=e.xtime[e.xtime[x^r^n]]^o;o^=e.xtime[e.xtime[x^a^s]],t[i+0]^=f^e.xtime[r^a],t[i+1]^=o^e.xtime[a^n],t[i+2]^=f^e.xtime[n^s],t[i+3]^=o^e.xtime[s^r]}}};return e}(),fr=function(){var e={};return xr.Init(),e.b256to64=function(e){var t,i,r,a="",n=0,s=e.length;for(r=0;r<s;r++)i=e.charCodeAt(r),0==n?(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>2&63),t=(3&i)<<4):1==n?(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t|i>>4&15),t=(15&i)<<2):2==n&&(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t|i>>6&3),a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&i)),3==(n+=1)&&(n=0);return n>0&&(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t),a+="="),1==n&&(a+="="),a},e.b64to256=function(e){var t,i,r="",a=0,n=0,s=e.length;for(i=0;i<s;i++)(t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(i)))>=0&&(a&&(r+=String.fromCharCode(n|t>>6-a&255)),n=t<<(a=a+2&7)&255);return r},e.b16to64=function(e){var t,i,r="";for(e.length%2==1&&(e="0"+e),t=0;t+3<=e.length;t+=3)i=parseInt(e.substring(t,t+3),16),r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>6)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&i);for(t+1==e.length?(i=parseInt(e.substring(t,t+1),16),r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i<<2)):t+2==e.length&&(i=parseInt(e.substring(t,t+2),16),r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(i>>2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((3&i)<<4));(3&r.length)>0;)r+="=";return r},e.b64to16=function(e){var t,i,r="",a=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t)v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(t)),v<0||(0==a?(r+=Ei(v>>2),i=3&v,a=1):1==a?(r+=Ei(i<<2|v>>4),i=15&v,a=2):2==a?(r+=Ei(i),r+=Ei(v>>2),i=3&v,a=3):(r+=Ei(i<<2|v>>4),r+=Ei(15&v),a=0));return 1==a&&(r+=Ei(i<<2)),r},e.string2bytes=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e.charCodeAt(i));return t},e.bytes2string=function(e){for(var t="",i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t},e.blockXOR=function(e,t){for(var i=Array(16),r=0;r<16;r++)i[r]=e[r]^t[r];return i},e.blockIV=function(){var e=new $i,t=Array(16);return e.nextBytes(t),t},e.pad16=function(e){var t=e.slice(0),r=(16-e.length%16)%16;for(i=e.length;i<e.length+r;i++)t.push(0);return t},e.depad=function(e){for(e=e.slice(0);0==e[e.length-1];)e=e.slice(0,e.length-1);return e},e.encryptAESCBC=function(t,i){var r=i.slice(0);xr.ExpandKey(r);for(var a=e.string2bytes(t),n=(a=e.pad16(a),e.blockIV()),s=0;s<a.length/16;s++){var o=a.slice(16*s,16*s+16),x=n.slice(16*s,16*s+16);o=e.blockXOR(x,o),xr.Encrypt(o,r),n=n.concat(o)}return r=e.bytes2string(n),e.b256to64(r)},e.decryptAESCBC=function(t,i){var r=i.slice(0);xr.ExpandKey(r),t=e.b64to256(t);for(var a=e.string2bytes(t),n=[],s=1;s<a.length/16;s++){var o=a.slice(16*s,16*s+16),x=a.slice(16*(s-1),16*(s-1)+16);xr.Decrypt(o,r),o=e.blockXOR(x,o),n=n.concat(o)}return n=e.depad(n),e.bytes2string(n)},e.wrap60=function(e){for(var t="",i=0;i<e.length;i++)i%60==0&&0!=i&&(t+="\n"),t+=e[i];return t},e.generateAESKey=function(){var e=Array(16);return(new $i).nextBytes(e),e},e.generateRSAKey=function(e,t){Math.seedrandom(Qi(e));var i=new tr;return i.generate(t,"10001"),i},e.publicKeyString=function(e){return pubkey=e.n.toString(16)},e.publicKeyID=function(e){return function(e){function t(e,t){var i,r,a,n,s;return a=2147483648&e,n=2147483648&t,s=(1073741823&e)+(1073741823&t),(i=1073741824&e)&(r=1073741824&t)?2147483648^s^a^n:i|r?1073741824&s?3221225472^s^a^n:1073741824^s^a^n:s^a^n}function i(e,i,r,a,n,s,o){return e=t(e,t(t(i&r|~i&a,n),o)),t(e<<s|e>>>32-s,i)}function r(e,i,r,a,n,s,o){return e=t(e,t(t(i&a|r&~a,n),o)),t(e<<s|e>>>32-s,i)}function a(e,i,r,a,n,s,o){return e=t(e,t(t(i^r^a,n),o)),t(e<<s|e>>>32-s,i)}function n(e,i,r,a,n,s,o){return e=t(e,t(t(r^(i|~a),n),o)),t(e<<s|e>>>32-s,i)}function s(e){var t,i="",r="";for(t=0;t<=3;t++)i+=(r="0"+(r=e>>>8*t&255).toString(16)).substr(r.length-2,2);return i}var o,x,f,l,h,c,_,u,d=function(e){for(var t,i=e.length,r=16*(((t=i+8)-t%64)/64+1),a=Array(r-1),n=0,s=0;s<i;)n=s%4*8,a[t=(s-s%4)/4]|=e.charCodeAt(s)<<n,s++;return a[(s-s%4)/4]|=128<<s%4*8,a[r-2]=i<<3,a[r-1]=i>>>29,a}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0;i<e.length;i++){var r=e.charCodeAt(i);r<128?t+=String.fromCharCode(r):(r>127&&r<2048?t+=String.fromCharCode(r>>6|192):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128)),t+=String.fromCharCode(63&r|128))}return t}(e));for(h=1732584193,c=4023233417,_=2562383102,u=271733878,e=0;e<d.length;e+=16)o=h,x=c,f=_,l=u,h=i(h,c,_,u,d[e+0],7,3614090360),u=i(u,h,c,_,d[e+1],12,3905402710),_=i(_,u,h,c,d[e+2],17,606105819),c=i(c,_,u,h,d[e+3],22,3250441966),h=i(h,c,_,u,d[e+4],7,4118548399),u=i(u,h,c,_,d[e+5],12,1200080426),_=i(_,u,h,c,d[e+6],17,2821735955),c=i(c,_,u,h,d[e+7],22,4249261313),h=i(h,c,_,u,d[e+8],7,1770035416),u=i(u,h,c,_,d[e+9],12,2336552879),_=i(_,u,h,c,d[e+10],17,4294925233),c=i(c,_,u,h,d[e+11],22,2304563134),h=i(h,c,_,u,d[e+12],7,1804603682),u=i(u,h,c,_,d[e+13],12,4254626195),_=i(_,u,h,c,d[e+14],17,2792965006),h=r(h,c=i(c,_,u,h,d[e+15],22,1236535329),_,u,d[e+1],5,4129170786),u=r(u,h,c,_,d[e+6],9,3225465664),_=r(_,u,h,c,d[e+11],14,643717713),c=r(c,_,u,h,d[e+0],20,3921069994),h=r(h,c,_,u,d[e+5],5,3593408605),u=r(u,h,c,_,d[e+10],9,38016083),_=r(_,u,h,c,d[e+15],14,3634488961),c=r(c,_,u,h,d[e+4],20,3889429448),h=r(h,c,_,u,d[e+9],5,568446438),u=r(u,h,c,_,d[e+14],9,3275163606),_=r(_,u,h,c,d[e+3],14,4107603335),c=r(c,_,u,h,d[e+8],20,1163531501),h=r(h,c,_,u,d[e+13],5,2850285829),u=r(u,h,c,_,d[e+2],9,4243563512),_=r(_,u,h,c,d[e+7],14,1735328473),h=a(h,c=r(c,_,u,h,d[e+12],20,2368359562),_,u,d[e+5],4,4294588738),u=a(u,h,c,_,d[e+8],11,2272392833),_=a(_,u,h,c,d[e+11],16,1839030562),c=a(c,_,u,h,d[e+14],23,4259657740),h=a(h,c,_,u,d[e+1],4,2763975236),u=a(u,h,c,_,d[e+4],11,1272893353),_=a(_,u,h,c,d[e+7],16,4139469664),c=a(c,_,u,h,d[e+10],23,3200236656),h=a(h,c,_,u,d[e+13],4,681279174),u=a(u,h,c,_,d[e+0],11,3936430074),_=a(_,u,h,c,d[e+3],16,3572445317),c=a(c,_,u,h,d[e+6],23,76029189),h=a(h,c,_,u,d[e+9],4,3654602809),u=a(u,h,c,_,d[e+12],11,3873151461),_=a(_,u,h,c,d[e+15],16,530742520),h=n(h,c=a(c,_,u,h,d[e+2],23,3299628645),_,u,d[e+0],6,4096336452),u=n(u,h,c,_,d[e+7],10,1126891415),_=n(_,u,h,c,d[e+14],15,2878612391),c=n(c,_,u,h,d[e+5],21,4237533241),h=n(h,c,_,u,d[e+12],6,1700485571),u=n(u,h,c,_,d[e+3],10,2399980690),_=n(_,u,h,c,d[e+10],15,4293915773),c=n(c,_,u,h,d[e+1],21,2240044497),h=n(h,c,_,u,d[e+8],6,1873313359),u=n(u,h,c,_,d[e+15],10,4264355552),_=n(_,u,h,c,d[e+6],15,2734768916),c=n(c,_,u,h,d[e+13],21,1309151649),h=n(h,c,_,u,d[e+4],6,4149444226),u=n(u,h,c,_,d[e+11],10,3174756917),_=n(_,u,h,c,d[e+2],15,718787259),c=n(c,_,u,h,d[e+9],21,3951481745),h=t(h,o),c=t(c,x),_=t(_,f),u=t(u,l);return(s(h)+s(c)+s(_)+s(u)).toLowerCase()}(e)},e.publicKeyFromString=function(e){e=e.split("|")[0];var t=new tr;return t.setPublic(e,"10001"),t},e.encrypt=function(t,i,r){var a="";try{a+=e.publicKeyFromString(i).encrypt(t)+"?"}catch(e){return{status:"Invalid public key"}}return{status:"success",cipher:a}},e.decrypt=function(e,t){var i=e.split("?");return{status:"success",plaintext:t.decrypt(i[0]),signature:"unsigned"}},e}(),lr=lr||function(e,t){var i={},r=i.lib={},a=function(){},n=r.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=r.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||x).stringify(this)},concat:function(e){var t=this.words,i=e.words,r=this.sigBytes;if(e=e.sigBytes,this.clamp(),r%4)for(var a=0;a<e;a++)t[r+a>>>2]|=(i[a>>>2]>>>24-a%4*8&255)<<24-(r+a)%4*8;else if(65535<i.length)for(a=0;a<e;a+=4)t[r+a>>>2]=i[a>>>2];else t.push.apply(t,i);return this.sigBytes+=e,this},clamp:function(){var t=this.words,i=this.sigBytes;t[i>>>2]&=4294967295<<32-i%4*8,t.length=e.ceil(i/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var i=[],r=0;r<t;r+=4)i.push(4294967296*e.random()|0);return new s.init(i,t)}}),o=i.enc={},x=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],r=0;r<e;r++){var a=t[r>>>2]>>>24-r%4*8&255;i.push((a>>>4).toString(16)),i.push((15&a).toString(16))}return i.join("")},parse:function(e){for(var t=e.length,i=[],r=0;r<t;r+=2)i[r>>>3]|=parseInt(e.substr(r,2),16)<<24-r%8*4;return new s.init(i,t/2)}},f=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var i=[],r=0;r<e;r++)i.push(String.fromCharCode(t[r>>>2]>>>24-r%4*8&255));return i.join("")},parse:function(e){for(var t=e.length,i=[],r=0;r<t;r++)i[r>>>2]|=(255&e.charCodeAt(r))<<24-r%4*8;return new s.init(i,t)}},l=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},h=r.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var i=this._data,r=i.words,a=i.sigBytes,n=this.blockSize,o=a/(4*n);if(t=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*n,a=e.min(4*t,a),t){for(var x=0;x<t;x+=n)this._doProcessBlock(r,x);x=r.splice(0,t),i.sigBytes-=a}return new s.init(x,a)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});r.Hasher=h.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,i){return new e.init(i).finalize(t)}},_createHmacHelper:function(e){return function(t,i){return new c.HMAC.init(e,i).finalize(t)}}});var c=i.algo={};return i}(Math);or=(sr=lr).lib.WordArray,sr.enc.Base64={stringify:function(e){var t=e.words,i=e.sigBytes,r=this._map;e.clamp(),e=[];for(var a=0;a<i;a+=3)for(var n=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;4>s&&a+.75*s<i;s++)e.push(r.charAt(n>>>6*(3-s)&63));if(t=r.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,i=this._map;(r=i.charAt(64))&&-1!=(r=e.indexOf(r))&&(t=r);for(var r=[],a=0,n=0;n<t;n++)if(n%4){var s=i.indexOf(e.charAt(n-1))<<n%4*2,o=i.indexOf(e.charAt(n))>>>6-n%4*2;r[a>>>2]|=(s|o)<<24-a%4*8,a++}return or.create(r,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){function t(e,t,i,r,a,n,s){return((e=e+(t&i|~t&r)+a+s)<<n|e>>>32-n)+t}function i(e,t,i,r,a,n,s){return((e=e+(t&r|i&~r)+a+s)<<n|e>>>32-n)+t}function r(e,t,i,r,a,n,s){return((e=e+(t^i^r)+a+s)<<n|e>>>32-n)+t}function a(e,t,i,r,a,n,s){return((e=e+(i^(t|~r))+a+s)<<n|e>>>32-n)+t}for(var n=lr,s=(x=n.lib).WordArray,o=x.Hasher,x=n.algo,f=[],l=0;64>l;l++)f[l]=4294967296*e.abs(e.sin(l+1))|0;x=x.MD5=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,n){for(var s=0;16>s;s++){var o=e[x=n+s];e[x]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}s=this._hash.words;var x=e[n+0],l=(o=e[n+1],e[n+2]),h=e[n+3],c=e[n+4],_=e[n+5],u=e[n+6],d=e[n+7],p=e[n+8],m=e[n+9],P=e[n+10],y=e[n+11],S=e[n+12],b=e[n+13],g=e[n+14],v=e[n+15],R=t(R=s[0],F=s[1],E=s[2],C=s[3],x,7,f[0]),C=t(C,R,F,E,o,12,f[1]),E=t(E,C,R,F,l,17,f[2]),F=t(F,E,C,R,h,22,f[3]);R=t(R,F,E,C,c,7,f[4]),C=t(C,R,F,E,_,12,f[5]),E=t(E,C,R,F,u,17,f[6]),F=t(F,E,C,R,d,22,f[7]),R=t(R,F,E,C,p,7,f[8]),C=t(C,R,F,E,m,12,f[9]),E=t(E,C,R,F,P,17,f[10]),F=t(F,E,C,R,y,22,f[11]),R=t(R,F,E,C,S,7,f[12]),C=t(C,R,F,E,b,12,f[13]),E=t(E,C,R,F,g,17,f[14]),R=i(R,F=t(F,E,C,R,v,22,f[15]),E,C,o,5,f[16]),C=i(C,R,F,E,u,9,f[17]),E=i(E,C,R,F,y,14,f[18]),F=i(F,E,C,R,x,20,f[19]),R=i(R,F,E,C,_,5,f[20]),C=i(C,R,F,E,P,9,f[21]),E=i(E,C,R,F,v,14,f[22]),F=i(F,E,C,R,c,20,f[23]),R=i(R,F,E,C,m,5,f[24]),C=i(C,R,F,E,g,9,f[25]),E=i(E,C,R,F,h,14,f[26]),F=i(F,E,C,R,p,20,f[27]),R=i(R,F,E,C,b,5,f[28]),C=i(C,R,F,E,l,9,f[29]),E=i(E,C,R,F,d,14,f[30]),R=r(R,F=i(F,E,C,R,S,20,f[31]),E,C,_,4,f[32]),C=r(C,R,F,E,p,11,f[33]),E=r(E,C,R,F,y,16,f[34]),F=r(F,E,C,R,g,23,f[35]),R=r(R,F,E,C,o,4,f[36]),C=r(C,R,F,E,c,11,f[37]),E=r(E,C,R,F,d,16,f[38]),F=r(F,E,C,R,P,23,f[39]),R=r(R,F,E,C,b,4,f[40]),C=r(C,R,F,E,x,11,f[41]),E=r(E,C,R,F,h,16,f[42]),F=r(F,E,C,R,u,23,f[43]),R=r(R,F,E,C,m,4,f[44]),C=r(C,R,F,E,S,11,f[45]),E=r(E,C,R,F,v,16,f[46]),R=a(R,F=r(F,E,C,R,l,23,f[47]),E,C,x,6,f[48]),C=a(C,R,F,E,d,10,f[49]),E=a(E,C,R,F,g,15,f[50]),F=a(F,E,C,R,_,21,f[51]),R=a(R,F,E,C,S,6,f[52]),C=a(C,R,F,E,h,10,f[53]),E=a(E,C,R,F,P,15,f[54]),F=a(F,E,C,R,o,21,f[55]),R=a(R,F,E,C,p,6,f[56]),C=a(C,R,F,E,v,10,f[57]),E=a(E,C,R,F,u,15,f[58]),F=a(F,E,C,R,b,21,f[59]),R=a(R,F,E,C,c,6,f[60]),C=a(C,R,F,E,y,10,f[61]),E=a(E,C,R,F,l,15,f[62]),F=a(F,E,C,R,m,21,f[63]),s[0]=s[0]+R|0,s[1]=s[1]+F|0,s[2]=s[2]+E|0,s[3]=s[3]+C|0},_doFinalize:function(){var t=this._data,i=t.words,r=8*this._nDataBytes,a=8*t.sigBytes;i[a>>>5]|=128<<24-a%32;var n=e.floor(r/4294967296);for(i[15+(a+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),i[14+(a+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(i.length+1),this._process(),i=(t=this._hash).words,r=0;4>r;r++)a=i[r],i[r]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);return t},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),n.MD5=o._createHelper(x),n.HmacMD5=o._createHmacHelper(x)}(Math),function(){var e,t=lr,i=(e=t.lib).Base,r=e.WordArray,a=(e=t.algo).EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var i=(o=this.cfg).hasher.create(),a=r.create(),n=a.words,s=o.keySize,o=o.iterations;n.length<s;){x&&i.update(x);var x=i.update(e).finalize(t);i.reset();for(var f=1;f<o;f++)x=i.finalize(x),i.reset();a.concat(x)}return a.sigBytes=4*s,a}});t.EvpKDF=function(e,t,i){return a.create(i).compute(e,t)}}(),lr.lib.Cipher||function(e){var t=(_=lr).lib,i=t.Base,r=t.WordArray,a=t.BufferedBlockAlgorithm,n=_.enc.Base64,s=_.algo.EvpKDF,o=t.Cipher=a.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,i){this.cfg=this.cfg.extend(i),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,i,r){return("string"==typeof i?u:c).encrypt(e,t,i,r)},decrypt:function(t,i,r){return("string"==typeof i?u:c).decrypt(e,t,i,r)}}}});t.StreamCipher=o.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var x=_.mode={},f=function(e,t,i){var r=this._iv;r?this._iv=void 0:r=this._prevBlock;for(var a=0;a<i;a++)e[t+a]^=r[a]},l=(t.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();l.Encryptor=l.extend({processBlock:function(e,t){var i=this._cipher,r=i.blockSize;f.call(this,e,t,r),i.encryptBlock(e,t),this._prevBlock=e.slice(t,t+r)}}),l.Decryptor=l.extend({processBlock:function(e,t){var i=this._cipher,r=i.blockSize,a=e.slice(t,t+r);i.decryptBlock(e,t),f.call(this,e,t,r),this._prevBlock=a}}),x=x.CBC=l,l=(_.pad={}).Pkcs7={pad:function(e,t){for(var i,a=(i=(i=4*t)-e.sigBytes%i)<<24|i<<16|i<<8|i,n=[],s=0;s<i;s+=4)n.push(a);i=r.create(n,i),e.concat(i)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=o.extend({cfg:o.cfg.extend({mode:x,padding:l}),reset:function(){o.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=t.createEncryptor;else i=t.createDecryptor,this._minBufferSize=1;this._mode=i.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var h=t.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),c=(x=(_.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?r.create([1398893684,1701076831]).concat(e).concat(t):t).toString(n)},parse:function(e){var t=(e=n.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var i=r.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return h.create({ciphertext:e,salt:i})}},t.SerializableCipher=i.extend({cfg:i.extend({format:x}),encrypt:function(e,t,i,r){r=this.cfg.extend(r);var a=e.createEncryptor(i,r);return t=a.finalize(t),a=a.cfg,h.create({ciphertext:t,key:i,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:r.format})},decrypt:function(e,t,i,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),e.createDecryptor(i,r).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),_=(_.kdf={}).OpenSSL={execute:function(e,t,i,a){return a||(a=r.random(8)),e=s.create({keySize:t+i}).compute(e,a),i=r.create(e.words.slice(t),4*i),e.sigBytes=4*t,h.create({key:e,iv:i,salt:a})}},u=t.PasswordBasedCipher=c.extend({cfg:c.cfg.extend({kdf:_}),encrypt:function(e,t,i,r){return i=(r=this.cfg.extend(r)).kdf.execute(i,e.keySize,e.ivSize),r.iv=i.iv,(e=c.encrypt.call(this,e,t,i.key,r)).mixIn(i),e},decrypt:function(e,t,i,r){return r=this.cfg.extend(r),t=this._parse(t,r.format),i=r.kdf.execute(i,e.keySize,e.ivSize,t.salt),r.iv=i.iv,c.decrypt.call(this,e,t,i.key,r)}})}(),function(){for(var e=lr,t=e.lib.BlockCipher,i=e.algo,r=[],a=[],n=[],s=[],o=[],x=[],f=[],l=[],h=[],c=[],_=[],u=0;256>u;u++)_[u]=128>u?u<<1:u<<1^283;var d=0,p=0;for(u=0;256>u;u++){var m=(m=p^p<<1^p<<2^p<<3^p<<4)>>>8^255&m^99;r[d]=m,a[m]=d;var P=_[d],y=_[P],S=_[y],b=257*_[m]^16843008*m;n[d]=b<<24|b>>>8,s[d]=b<<16|b>>>16,o[d]=b<<8|b>>>24,x[d]=b,b=16843009*S^65537*y^257*P^16843008*d,f[m]=b<<24|b>>>8,l[m]=b<<16|b>>>16,h[m]=b<<8|b>>>24,c[m]=b,d?(d=P^_[_[_[S^P]]],p^=_[_[p]]):d=p=1}var g=[0,1,2,4,8,16,32,64,128,27,54];i=i.AES=t.extend({_doReset:function(){for(var e=(i=this._key).words,t=i.sigBytes/4,i=4*((this._nRounds=t+6)+1),a=this._keySchedule=[],n=0;n<i;n++)if(n<t)a[n]=e[n];else{var s=a[n-1];n%t?6<t&&4==n%t&&(s=r[s>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s]):(s=r[(s=s<<8|s>>>24)>>>24]<<24|r[s>>>16&255]<<16|r[s>>>8&255]<<8|r[255&s],s^=g[n/t|0]<<24),a[n]=a[n-t]^s}for(e=this._invKeySchedule=[],t=0;t<i;t++)n=i-t,s=t%4?a[n]:a[n-4],e[t]=4>t||4>=n?s:f[r[s>>>24]]^l[r[s>>>16&255]]^h[r[s>>>8&255]]^c[r[255&s]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,n,s,o,x,r)},decryptBlock:function(e,t){var i=e[t+1];e[t+1]=e[t+3],e[t+3]=i,this._doCryptBlock(e,t,this._invKeySchedule,f,l,h,c,a),i=e[t+1],e[t+1]=e[t+3],e[t+3]=i},_doCryptBlock:function(e,t,i,r,a,n,s,o){for(var x=this._nRounds,f=e[t]^i[0],l=e[t+1]^i[1],h=e[t+2]^i[2],c=e[t+3]^i[3],_=4,u=1;u<x;u++){var d=r[f>>>24]^a[l>>>16&255]^n[h>>>8&255]^s[255&c]^i[_++],p=r[l>>>24]^a[h>>>16&255]^n[c>>>8&255]^s[255&f]^i[_++],m=r[h>>>24]^a[c>>>16&255]^n[f>>>8&255]^s[255&l]^i[_++];c=r[c>>>24]^a[f>>>16&255]^n[l>>>8&255]^s[255&h]^i[_++],f=d,l=p,h=m}d=(o[f>>>24]<<24|o[l>>>16&255]<<16|o[h>>>8&255]<<8|o[255&c])^i[_++],p=(o[l>>>24]<<24|o[h>>>16&255]<<16|o[c>>>8&255]<<8|o[255&f])^i[_++],m=(o[h>>>24]<<24|o[c>>>16&255]<<16|o[f>>>8&255]<<8|o[255&l])^i[_++],c=(o[c>>>24]<<24|o[f>>>16&255]<<16|o[l>>>8&255]<<8|o[255&h])^i[_++],e[t]=d,e[t+1]=p,e[t+2]=m,e[t+3]=c},keySize:8}),e.AES=t._createHelper(i)}();var hr=function(){function e(){}var t=e.prototype;return t.createClientObject=function(e,t,i,r,a){var n=lr.AES.encrypt((new Date).getTime().toString(),lr.enc.Hex.parse("1234567891234567123456789123456712345678912345671234567891234567"),{mode:lr.mode.CBC,iv:lr.enc.Hex.parse("12345678912345671234567891234567"),padding:lr.pad.Pkcs7}).ciphertext.toString();n.length<64&&(n+=n);var s=lr.AES.encrypt((new Date).getTime().toString(),lr.enc.Hex.parse("12345678912345671234567891234567"),{mode:lr.mode.CBC,iv:lr.enc.Hex.parse("12345678912345671234567891234567"),padding:lr.pad.Pkcs7}).ciphertext.toString();return{socket:e,id:t,PKD:i,rand:r,playURL:a.playURL||"",auth:a.auth||"",token:a.token||"",key:n,iv:s,resolve:null,reject:null}},t.playCmd=function(e){var t={sequence:0,cmd:"realplay",url:e.playURL,key:fr.encrypt(e.iv+":"+e.key,e.PKD).cipher.split("?")[0],authorization:lr.AES.encrypt(e.rand+":"+e.auth,lr.enc.Hex.parse(e.key),{mode:lr.mode.CBC,iv:lr.enc.Hex.parse(e.iv),padding:lr.pad.Pkcs7}).ciphertext.toString(),token:lr.AES.encrypt(e.token,lr.enc.Hex.parse(e.key),{mode:lr.mode.CBC,iv:lr.enc.Hex.parse(e.iv),padding:lr.pad.Pkcs7}).ciphertext.toString()};return JSON.stringify(t)},t.playbackCmd=function(e,t,i){var r={sequence:0,cmd:"playback",url:e.playURL,key:fr.encrypt(e.iv+":"+e.key,e.PKD).cipher.split("?")[0],authorization:lr.AES.encrypt(e.rand+":"+e.auth,lr.enc.Hex.parse(e.key),{mode:lr.mode.CBC,iv:lr.enc.Hex.parse(e.iv),padding:lr.pad.Pkcs7}).ciphertext.toString(),token:lr.AES.encrypt(e.token,lr.enc.Hex.parse(e.key),{mode:lr.mode.CBC,iv:lr.enc.Hex.parse(e.iv),padding:lr.pad.Pkcs7}).ciphertext.toString(),startTime:t,endTime:i};return JSON.stringify(r)},t.seekCmd=function(e,t){var i={sequence:0,cmd:"seek",startTime:e,endTime:t};return JSON.stringify(i)},e}(),cr=function(){function e(){}var t=e.prototype;return t.createClientObject=function(e,t,i,r){return{socket:e,id:t,playURL:i,deviceSerial:r.deviceSerial||"",verificationCode:r.verificationCode||"",resolve:null,reject:null}},t.playCmd=function(e){var t={sequence:0,cmd:"realplay",deviceSerial:e.deviceSerial,verificationCode:e.verificationCode,url:e.playURL};return JSON.stringify(t)},t.playbackCmd=function(e,t,i){var r={sequence:0,cmd:"playback",deviceSerial:e.deviceSerial,verificationCode:e.verificationCode,url:e.playURL,startTime:t,endTime:i};return JSON.stringify(r)},e}(),_r=Symbol("WEBSOCKET"),ur=Symbol("GETINDEX"),dr=Symbol("PROTOCOLVERSION"),pr=Symbol("CIPHERSUITES"),mr=new yi,Pr=new Si,yr=new hr,Sr=new cr,br=function(){function e(){this[dr]="0.1",this[pr]=0,this[_r]=[],this.ERRORS={},this[ur]=function(e){for(var t=-1,i=0,r=this[_r].length;i<r;i++)if(this[_r][i].id===e){t=i;break}return t}}var t=e.prototype;return t.openStream=function(e,t,i,r){var a=!1;e.indexOf("[")>-1&&(a=!0);var n=this,s=e.split("://"),o=s[0],x="",f=7681,l=1,h=0,c=!1;if(a)x=s[1].split("]:")[0]+"]",f=Math.floor(s[1].split("]:")[1].split("/")[0]),l=Math.floor(s[1].split("]:")[1].split("/")[1]/100),h=Math.floor(s[1].split("]:")[1].split("/")[1]%100)-1;else{x=s[1].split(":")[0],f=Math.floor(s[1].split(":")[1].split("/")[0]),l=Math.floor(s[1].split(":")[1].split("/")[1]/100),h=Math.floor(s[1].split(":")[1].split("/")[1]%100)-1;var _=s[1].split(":")[1].split("/")[2];""!==_&&"webSocketVideoCtrlProxy"===_&&(c=!0)}0===l&&(h=0);var u="&sessionID=";(t=t||{}).token&&!t.playURL&&(u="&token=");var d=t.sessionID||t.session||(t.playURL?"":t.token)||"",p=new window.WebSocket(o+"://"+x+":"+f+(t.mode?"/"+t.mode:"")+(c?"/webSocketVideoCtrlProxy":"")+"?version="+n[dr]+"&cipherSuites="+n[pr]+u+d+(t.proxy?"&proxy="+t.proxy:""));p.binaryType="arraybuffer";var m=Pi(),P=-1;return new Promise((function(e,a){p.onopen=function(){t.playURL||t.sessionID||t.deviceSerial||t.token||(n[_r].push(mr.createClientObject(p,m,l,h)),e(m))},p.onmessage=function(r){if("string"==typeof r.data){var s=JSON.parse(r.data),o=n[ur](m);if(s&&s.version&&s.cipherSuite){if(n[dr]=s.version,n[pr]=parseInt(s.cipherSuite,10),s&&s.PKD&&s.rand)n[_r].push(yr.createClientObject(p,m,s.PKD,s.rand,t));else{var c="live://"+x+":"+f+"/"+l+"/"+h;-1===n[pr]?n[_r].push(Sr.createClientObject(p,m,c,t)):n[_r].push(Pr.createClientObject(p,m,c))}return void e(m)}if(s&&s.sdp){var _=Pr.getMediaFromSdp(s.sdp);i({bHead:!0,buf:_})}if(s&&s.cmd&&"end"===s.cmd&&i({type:"exception",cmd:s.cmd}),s&&s.statusString&&("ok"===s.statusString.toLowerCase()&&n[_r][o].resolve&&n[_r][o].resolve(s),"ok"!==s.statusString.toLowerCase())){var u=Pr.getError(s);o>-1?n[_r][o].reject&&n[_r][o].reject(u):a(u)}s&&s.errorCode&&i(s)}else{var d={},y=new Uint8Array(r.data);if(P++,64===y.byteLength||40===y.byteLength){for(var S=-1,b=y.byteLength,g=0;g<b;g++)if(73===y[g]&&77===y[g+1]&&75===y[g+2]&&72===y[g+3]){S=g;break}d=-1!==S?{bHead:!0,buf:y.slice(S,S+40)}:{bHead:!1,buf:y},i(d)}else P>0&&i(d={bHead:!1,buf:y});y=null,d=null,r=null}},p.onclose=function(){for(var e=0,t=n[_r].length;e<t;e++)if(n[_r][e].id===m){n[_r][e].resolve(),n[_r].splice(e,1),setTimeout((function(){r(m)}),200);break}a()}}))},t.startPlay=function(e,t,i){var r=this,a=this[ur](e);return t&&i&&"0.1"===r[dr]&&(t=t.replace(/-/g,"").replace(/:/g,""),i=i.replace(/-/g,"").replace(/:/g,"")),new Promise((function(e,n){if(a>-1){r[_r][a].resolve=e,r[_r][a].reject=n;var s=null;t&&i?"0.1"!==r[dr]?0===r[pr]?s=yr.playbackCmd(r[_r][a],t,i):1===r[pr]?s=Pr.playbackCmd(t,i,r[_r][a].playURL):-1===r[pr]&&(s=Sr.playbackCmd(r[_r][a],t,i)):s=mr.playbackCmd(t,i,r[_r][a].iCurChannel,r[_r][a].iCurStream):0===r[_r][a].iCurChannel&&"0.1"===r[dr]?s=mr.zeroPlayCmd(r[_r][a].iCurChannel,r[_r][a].iCurStream):"0.1"!==r[dr]?0===r[pr]?s=yr.playCmd(r[_r][a]):1===r[pr]?s=Pr.playCmd(r[_r][a].playURL):-1===r[pr]&&(s=Sr.playCmd(r[_r][a])):s=mr.playCmd(r[_r][a].iCurChannel,r[_r][a].iCurStream),r[_r][a].socket.send(s),"0.1"===r[dr]&&e()}else"0.1"===r[dr]&&n()}))},t.singleFrame=function(){},t.setPlayRate=function(e,t){var i=this;return new Promise((function(r,a){for(var n=0,s=i[_r].length;n<s;n++)if(i[_r][n].id===e){if("0.1"===i[dr]){var o=mr.playRateCmd(t);i[_r][n].socket.send(o),r();break}i[_r][n].resolve=r,i[_r][n].reject=a;var x=Pr.playRateCmd(t);i[_r][n].socket.send(x)}}))},t.seek=function(e,t,i){var r=this;return new Promise((function(a,n){for(var s=0,o=r[_r].length;s<o;s++)if(r[_r][s].id===e){r[_r][s].resolve=a,r[_r][s].reject=n;var x=yr.seekCmd(t,i);r[_r][s].socket.send(x)}}))},t.pause=function(e){var t=this;return new Promise((function(i,r){for(var a=0,n=t[_r].length;a<n;a++)if(t[_r][a].id===e){if("0.1"===t[dr]){var s=mr.pauseCmd();t[_r][a].socket.send(s),i();break}t[_r][a].resolve=i,t[_r][a].reject=r;var o=Pr.pauseCmd();t[_r][a].socket.send(o)}}))},t.transmission=function(e,t){var i=this;return new Promise((function(r,a){for(var n=0,s=i[_r].length;n<s;n++)i[_r][n].id===e&&(i[_r][n].resolve=r,i[_r][n].reject=a,i[_r][n].socket.send(t))}))},t.resume=function(e){var t=this;return new Promise((function(i,r){for(var a=0,n=t[_r].length;a<n;a++)if(t[_r][a].id===e){if("0.1"===t[dr]){var s=mr.resumeCmd();t[_r][a].socket.send(s),i();break}t[_r][a].resolve=i,t[_r][a].reject=r;var o=Pr.resumeCmd();t[_r][a].socket.send(o)}}))},t.stop=function(e){var t=this;return new Promise((function(i,r){if(e){for(var a=-1,n=0,s=t[_r].length;n<s;n++)if(t[_r][n].id===e){a=n,t[_r][n].resolve=i,t[_r][n].socket.close(1e3,"CLOSE");break}-1===a&&r()}else r()}))},t.stopAll=function(){var e=this;return new Promise((function(t,i){for(var r=0,a=e[_r].length;r<a;r++)e[_r][r].socket.close(1e3,"CLOSE");t()}))},e}(),gr=function(){function e(e){this._streamUUID=null,this._player=e,this._streamClient=new br}var t=e.prototype;return t.openStream=function(e,t,i,r){var a=this;return this._streamClient.openStream(e,t,i,r).then((function(i){return a._streamUUID=i,a._player.logger.log("["+hi.SOCKET.openStream+"] url: ",e,"oParams: ",t),a._player.event.emit(""+hi.SOCKET.openStream,oi(i)),i}))},t.startPlay=function(e){var t=this;return e=null!=e?e:this._streamUUID,this._streamClient.startPlay(e).then((function(){t._player.logger.log("["+hi.SOCKET.startPlay+"] StreamUUID: ",e),t._player.event.emit(""+hi.SOCKET.startPlay,oi(e))}))},t.setPlayRate=function(e,t){var i=this;return t=null!=t?t:this._streamUUID,this._streamClient.setPlayRate(t,e).then((function(){i._player.logger.log("["+hi.SOCKET.setPlayRate+"] StreamUUID: ",t," rate: ",e),i._player.event.emit(""+hi.SOCKET.startPlay,oi({id:t,rate:e}))}))},t.seek=function(e,t,i){var r=this;return i=null!=i?i:this._streamUUID,this._streamClient.seek(i,e,t).then((function(){r._player.logger.log("["+hi.SOCKET.seek+"] StreamUUID: ",i," startTime: ",e," stopTime:",t),r._player.event.emit(""+hi.SOCKET.seek,oi({id:i,startTime:e,stopTime:t}))}))},t.stopAll=function(){var e=this;return this._streamClient.stopAll().then((function(){e._player.logger.log("["+hi.SOCKET.stopAll+"]"),e._player.event.emit(hi.SOCKET.stopAll,oi(void 0)),e._streamUUID=null}))},t.destroy=function(){var e=this;this.stopAll().then((function(){e._streamUUID=null,e._streamClient=null}))},e}();function vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function Rr(){return Rr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Rr.apply(this,arguments)}var Cr=768,Er={port:0,start:{x:0,y:0},total:{x:0,y:0},diff:{x:0,y:0},startPTZPosition:{x:0,y:0},lastCorrdsY:0,param2d:{upDateType:4,fValue:0,fPTZParam:{fPTZPositionX:0,fPTZPositionY:0},fPTZZoom:0}},Fr=function(){function e(e){this._canvasFECSubPort=new Map,this._correctType=null,this._player=e,this.init()}var t=e.prototype;return t._supportFEC=function(){return this._player._decoderStatus.bSupHardOrSoft},t.init=function(){var e=this;this._player.logger.log("FECSplitIds.init"),this._player.event.on("JSPlayM4_Play_Before",(function(){e._player.logger.log("JSPlayM4_Play_Before event: _FECSplitIds =  ",e._FECSplitIds),e._FECSplitIds&&e._supportFEC()&&e._player.wasmplayer.JSPlayM4_FEC_SetCanvasID(e._FECSplitIds)})),this._player.event.on("JSPlayM4_Play_After",(function(){e._player.logger.log("JSPlayM4_Play_After event: _FECSplitIds =  ",e._FECSplitIds),e._FECSplitIds&&e._supportFEC()&&e._canvasFECSubPort.set(e._player._playerWindow.canvasId,Rr({},Er))})),this._player.event.on("PlayM4_openStream",(function(){e._FECSplitIds&&e._supportFEC()&&e._player.wasmplayer.JSPlayM4_SetDecodeEngine(0)})),this._player.event.on("JSPlayM4_Stop",(function(){e._closeFECAllSubWnd()})),this._player.event.on(hi.API.destroy,(function(){e._closeFECAllSubWnd()})),this._player.logger.log("FECCorrect init")},t.setFECCorrectType=function(e,t){var i=this;return this._supportFEC()?(this._FECSplitIds=t,this._correctType=e,new Promise((function(r,a){var n=i._createSplitCanvas(e,t),s=n.find((function(e){return-1===e.code}));i._player.event.emit("FECCorrect.setFECCorrectType",oi({type:e,ids:t})),s||0===n.length?a(n):r(n)}))):Promise.reject()},t.setFEC2DParam=function(e,t){if(this._supportFEC())return this._player.event.emit("FECCorrect.setFEC2DParam",oi({port:e,param2d:t})),this._player.wasmplayer.JSPlayM4_FEC_SetParam(e,t)},t.setFEC3DViewParam=function(e){if(!this._supportFEC())return Promise.reject(!1);var t=this._player.wasmplayer;if(this._FECSplitIds&&this._canvasFECSubPort&&this._correctType){var i=t.JSPlayM4_FEC_SetViewParam(e.port,e.upDateType,e.fValue);return this._player.event.emit("FECCorrect.setFEC3DViewParam",oi({param:e})),1===i?Promise.resolve(!0):Promise.reject(!1)}return Promise.reject(void 0)},t.get3DViewParam=function(e){var t=this;if(!this._supportFEC())return Promise.reject(!1);var i=this._player.wasmplayer;return new Promise((function(r,a){return t._FECSplitIds&&t._canvasFECSubPort&&t._correctType&&1!==i.JSPlayM4_FEC_GetViewParam(e.port,e.upDateType,(function(i){t._player.event.emit("FECCorrect.get3DViewParam",oi({param:e})),r(i)}))?a(!1):a(void 0)}))},t.getFECSubPortMap=function(){var e=this._canvasFECSubPort;return this._player.event.emit("FECCorrect.getFECSubPortMap",oi(e)),e},t._createSplitCanvas=function(e,t){var i=this._player._playerWindow.canvasId,r=(t=i+t?","+this._FECSplitIds:"")?t.split(","):[],a=this._player.wasmplayer,n=[],s=this;if(e.correctList&&e.correctList.length>0){for(var o=0;o<e.correctList.length;o++)if(0!==o||!e.correctList[o].hidden)if(0!==o){var x=document.getElementById(r[o]);if(!r[o]||!x||"CANVAS"!==x.nodeName)return this._player.logger.error("Canvas element is null"),[];var f=a.JSPlayM4_FEC_GetPort(e.place,e.correctList[o].correctType),l=a.JSPlayM4_FEC_Enable(f),h=a.JSPlayM4_FEC_SetWnd(f,r[o]),c={upDateType:this._matchUpDateType(e.correctList[o].correctType),fValue:0,fPTZParam:{fPTZPositionX:e.correctList[o].x||0,fPTZPositionY:e.correctList[o].y||0},fPTZZoom:1e-5};this.setFEC2DParam(f,c),0===l||0===h?n.push({code:-1,msg:"失败",port:f,id:r[o]}):(n.push({code:0,msg:"成功",port:f,id:r[o]}),this._canvasFECSubPort.set(r[o],Rr({},Er,{port:f,param2d:c,startPTZPosition:{x:c.fPTZParam.fPTZPositionX,y:c.fPTZParam.fPTZPositionY}})),x.setAttribute("data-port",f),this._spliceCanvasMouseEvents(r[o],e.correctList[o]))}else _(e.correctList[0])}else _(e);function _(t){var r={upDateType:s._matchUpDateType(t.correctType),fValue:0,fPTZParam:{fPTZPositionX:t.x||0,fPTZPositionY:t.y||0},fPTZZoom:1e-5},o=s._canvasFECSubPort.get(i).port;if(void 0===o)return n;1===a.JSPlayM4_FEC_ResetCorrectType(o,e.place,t.correctType)?(n.push({code:0,msg:"成功",port:o,id:i}),t.correctType<=Cr?s.setFEC2DParam(o,r):t.viewParam&&setTimeout((function(){"number"==typeof t.viewParam.x&&"number"==typeof t.viewParam.y&&(a.JSPlayM4_FEC_SetViewParam(o,2,t.viewParam.x),a.JSPlayM4_FEC_SetViewParam(o,1,t.viewParam.y)),"number"==typeof t.viewParam.zoom&&a.JSPlayM4_FEC_SetViewParam(o,3,t.viewParam.zoom)}),200),s._canvasFECSubPort.set(i,Rr({},Er,{port:o,param2d:r,startPTZPosition:{x:r.fPTZParam.fPTZPositionX,y:r.fPTZParam.fPTZPositionY}})),s._spliceCanvasMouseEvents(i,t)):n.push({code:-1,msg:"失败",port:o,id:i})}return n},t._matchUpDateType=function(e){switch(e){case Cr:return 4;case 256:return 8}return 2},t._spliceCanvasMouseEvents=function(e,t){if(void 0!==e){var i=document.getElementById(e);if(null!==i){var r=this._player.wasmplayer,a=i.getAttribute("id"),n=this._canvasFECSubPort.get(a);if(void 0!==n.port){var s=i.width,o=i.height,x=function(e){};i.addEventListener("mousedown",(function(e){n.start.x=e.pageX,n.start.y=e.pageY,n.lastCorrdsY=e.pageY,x=function(e){!function(e){var i=[e.clientX,e.clientY];n.diff.y=i[1]-n.start.y;var a=(n.total.y+n.diff.y)/o*2*Math.PI,x=(i[1]-n.lastCorrdsY)/(2*o),f=Math.atan2(n.startPTZPosition.y-.5,n.startPTZPosition.x-.5),l=n.startPTZPosition.x+x*Math.cos(f),h=n.startPTZPosition.y+x*Math.sin(f);n.diff.x=i[0]-n.start.x;var c=(n.total.x+n.diff.x)/s*2*Math.PI,_=Math.sqrt(Math.pow(l-.5,2)+Math.pow(h-.5,2)),u=-c,d=.5+_*Math.cos(u),p=.5+_*Math.sin(u);if(t.correctType<=Cr){switch(t.correctType){case Cr:case 512:n.param2d.upDateType=4;break;case 256:if(n.param2d.upDateType=8,Math.sqrt(Math.pow(d-.5,2)+Math.pow(p-.5,2))>.4)return}n.param2d.fValue=c,n.param2d.fPTZParam.fPTZPositionX=d,n.param2d.fPTZParam.fPTZPositionY=p,r.JSPlayM4_FEC_SetParam(n.port,n.param2d)}else 1536===t.correctType&&(r.JSPlayM4_FEC_SetViewParam(n.port,2,c),r.JSPlayM4_FEC_SetViewParam(n.port,1,a))}(e)},i.addEventListener("mousemove",x)}));var f=function(){null!==x&&(i.removeEventListener("mousemove",x),x=null,n.total.x+=n.diff.x,n.total.y+=n.diff.y)};i.addEventListener("mouseup",f),i.addEventListener("mouseleave",f),i.addEventListener("mouseout",f)}}}},t._closeFECAllSubWnd=function(){if(this._FECSplitIds&&this._canvasFECSubPort&&this._supportFEC())for(var e,t=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return vr(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?vr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this._FECSplitIds.split(","));!(e=t()).done;){var i=e.value;if(i){var r=this._canvasFECSubPort.get(i);if(void 0===r||void 0===r.port)continue;this._canvasFECSubPort.delete(i);var a=this._player.wasmplayer;a.JSPlayM4_FEC_Disable(r.port,!0),a.JSPlayM4_FEC_DelPort(r.port)}}},e}();function Tr(e,t){return new Promise((function(i,r){e.service.getVideoByTime(t).then((function(r){e.event.emit(hi.NETWORK.videoFragmentFiles,oi(r.data||[],"根据时间获取存储文件信息",t.recType+"")),i(r)})).catch((function(t){e.event.emit(hi.NETWORK.error.error,oi(t)),e.event.emit(hi.NETWORK.error.videoFragmentFiles,oi(t)),r(t)}))}))}var Dr=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],Ir=function(){if("undefined"==typeof document)return!1;for(var e=Dr[0],t={},i=0,r=Dr;i<r.length;i++){var a=r[i];if((null==a?void 0:a[1])in document){var n,s=h(a.entries());try{for(s.s();!(n=s.n()).done;){var o=x(n.value,2),f=o[0],l=o[1];t[e[f]]=l}}catch(e){s.e(e)}finally{s.f()}return t}}return!1}(),Mr={change:Ir.fullscreenchange,error:Ir.fullscreenerror},Ar={request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement,t=arguments.length>1?arguments[1]:void 0;return new Promise((function(i,r){var a=function e(){Ar.off("change",e),i()};Ar.on("change",a);var n=e[Ir.requestFullscreen](t);n instanceof Promise&&n.then(a).catch(r)}))},exit:function(){return new Promise((function(e,t){if(Ar.isFullscreen){var i=function t(){Ar.off("change",t),e()};Ar.on("change",i);var r=document[Ir.exitFullscreen]();r instanceof Promise&&r.then(i).catch(t)}else e()}))},toggle:function(e,t){return Ar.isFullscreen?Ar.exit():Ar.request(e,t)},onchange:function(e){Ar.on("change",e)},onerror:function(e){Ar.on("error",e)},on:function(e,t){var i=Mr[e];i&&document.addEventListener(i,t,!1)},off:function(e,t){var i=Mr[e];i&&document.removeEventListener(i,t,!1)},raw:Ir};Object.defineProperties(Ar,{isFullscreen:{get:function(){return Boolean(document[Ir.fullscreenElement])}},element:{enumerable:!0,get:function(){var e;return null!==(e=document[Ir.fullscreenElement])&&void 0!==e?e:void 0}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[Ir.fullscreenEnabled])}}}),Ir||(Ar={isEnabled:!1});var wr=Ar;function Lr(){return!!(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen)}var Br=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange"],kr=function(){function e(e,t){this._fullscreenchangeEvent=null,this.player=e,this.target=null!=t?t:e.$container,this._fullscreenChange(),this._registerEvent()}var t=e.prototype;return t.fullScreen=function(e,t){var i=this;return this.target?wr.request(this.target).then((function(){e&&t&&i.player.resize(e,t)})):Promise.reject()},t.exitScreen=function(){return Lr()?wr.exit():Promise.resolve()},t.destroy=function(){var e=this;Br.forEach((function(t){e.target&&e._fullscreenchangeEvent&&e.target.removeEventListener(t,e._fullscreenchangeEvent)}))},t._registerEvent=function(){var e=this;this.player.event.on("exitScreen",(function(){e.player.resize()}))},t._fullscreenChange=function(){var e=this,t=this;this._fullscreenchangeEvent=function(){Lr()?t.player.event.emit("fullScreen"):t.player.event.emit("exitScreen")},Br.forEach((function(t){e.target&&e.target.addEventListener(t,e._fullscreenchangeEvent)})),this.player&&this.player.event.on(hi.API.destroy,(function(){e.destroy()}))},e}();function Or(i,r){if(i.pluginManager||(i.pluginManager=new ni(i)),(null==r?void 0:r.staticPath)?/^http[s]?:\/\//.test(r.staticPath)||(r.staticPath=location.origin+r.staticPath):r.staticPath=location.origin,i._options=Gt({},ei,i._options,r),!i._options.id)throw new Error("id is required");var a=Lr();if("string"!=typeof i._options.id)throw new Error("id is required and only support string");i.$container=document.getElementById(i._options.id),i._options.fullScreenEle||(i._options.fullScreenEle=i.$container);var n=a?window.screen.width:i._options.width,s=a?window.screen.height:i._options.height;if(i.$container.style.cssText+="display:inline-block;width:"+n+"px;height:"+s+"px;background:#000000;background-size:100% 100%;vertical-align:top;position: relative;",i._oStreamClient||(i._oStreamClient=new gr(i)),i.logger||(i.logger=e(i._options.logger)),i.i18n||(i.i18n=new t({en:Kt,zh:$t})),i.fECCorrect||(i.fECCorrect=new Fr(i)),i._options.accessToken&&Qt(i._options.url)){var o,x,f,l=null==(o=i.urlInfo)?void 0:o.deviceSerial;if(i.urlInfo=_(i._options.url),!i.urlInfo.deviceSerial||!i._options.accessToken)throw new Error("deviceSerial is required!");i.service=new qt({deviceSerial:i.urlInfo.deviceSerial,accessToken:i._options.accessToken,domain:null==(f=i._options)||null==(x=f.env)?void 0:x.domain,extraParams:i._options.extraParams}),l!==i.urlInfo.deviceSerial&&(function(e){e.service.getDeviceCapacity().then((function(t){200==+t.code?(e.deviceCapacity=t.data,e.event.emit(hi.NETWORK.deviceCapacity,oi(t.data))):e.logger.error("getDeviceCapacity error: ",t)})).catch((function(t){e.event.emit(hi.NETWORK.error.error,oi(t)),e.event.emit(hi.NETWORK.error.deviceCapacity,oi(t)),e.logger.error("getDeviceCapacity error: ",t)}))}(i),function(e){e.event.emit(hi.NETWORK.deviceInfo,oi({})),e.service.getDeviceInfo().then((function(t){200==+t.code?(e.deviceInfo=t.data,e.event.emit(hi.NETWORK.deviceInfo,oi(t.data))):e.logger.error("deviceInfo error: ",t)})).catch((function(t){e.event.emit(hi.NETWORK.error.error,oi(t)),e.event.emit(hi.NETWORK.error.deviceInfo,oi(t)),e.logger.error("deviceInfo error: ",t)}))}(i)),i.event&&l&&(i.logger.log("play url change "+i._options.url),i.event.emit(hi.urlChange,oi(i._options.url)))}}var Hr="ezui-player";function Vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var Nr={borderSelect:"#FFCC00",border:"none",background:"#000000"},Yr=function(){function e(e,t,i,r){void 0===r&&(r={}),this.id=e,this.canvasId=e+"-player",this.width=t,this.height=i,this.style=Object.assign({},Nr,r),this.$playerWnd=document.createElement("div")}var t=e.prototype;return t.render=function(){var e;this.$playerWnd&&(this.$playerWnd.innerHTML="");var t=""+Hr,i=this.width,r=this.height,a=this.width-i,n=this.height-r;this.$playerWnd.classList.add(this.id+"parent-wnd",t+"-wrapper"),this.$playerWnd.style.overflow="hidden",this.$playerWnd.style.width="100%",this.$playerWnd.style.height="100%",this.$playerWnd.style.position="relative";for(var s="",o=0;o<1;o++){var x=a+(o%1==0?i:0),f=n+(o+1>=Math.pow(1,2)?r:0);s+='<div id="'+this.id+"-container-"+o+'" class="'+t+"-container "+t+"-container-"+o+'" style="width:'+x+"px; height: "+f+'px;">\n                  <canvas id="'+this.id+"canvas_draw"+o+'" class="'+this.id+"draw-window "+t+'-canvas-draw" style="position:absolute; top:0; left:0;" wid="'+o+'" width="'+this.width+"\" height='"+this.height+"'></canvas>\n                  <canvas id=\""+this.canvasId+'" class="'+this.id+"play-window "+t+'-canvas" wid="'+o+'" width="'+x+'" height="'+f+'"></canvas>\n                </div>'}this.$playerWnd.innerHTML=s,null==(e=document.getElementById(this.id))||e.appendChild(this.$playerWnd)},t.hide=function(){var e=document.getElementById(this.canvasId);e&&(e.style.display="none")},t.destroy=function(){var e=document.getElementById(this.id);e&&e.removeChild(this.$playerWnd),this.$playerWnd=null,this.width=0,this.height=0},t.resize=function(e,t){if(this.$playerWnd){this.width=e,this.height=t;for(var i,r=document.getElementById(this.id+"-container-0"),a=document.getElementById(this.id+"canvas_draw0"),n=document.getElementById(this.canvasId),s=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return Vr(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Vr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}([this.$playerWnd,r,n,a]);!(i=s()).done;){var o=i.value;o&&(o.style.width=e+"px",o.style.height=t+"px")}}},t.reRenderCanvas=function(e){var t,i=document.getElementById(this.canvasId),r=null==(t=this.$playerWnd)?void 0:t.children[0];if(i){if(!e)return;null==r||r.removeChild(i)}var a=document.createElement("canvas");a.id=this.canvasId,r&&r.appendChild(a),a.width=this.width,a.height=this.height},e}(),Xr={exports:{}};!function(e,t){function r(e,t,i,r,a,n,s){try{var o=e[n](s),x=o.value}catch(e){return void i(e)}o.done?t(x):Promise.resolve(x).then(r,a)}function a(e){return function(){var t=this,i=arguments;return new Promise((function(a,n){var s=e.apply(t,i);function o(e){r(s,a,n,o,x,"next",e)}function x(e){r(s,a,n,o,x,"throw",e)}o(void 0)}))}}function n(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function s(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":o(e)}Xr.exports=function(){var e={477:function(e){e.exports=function(e,t,i,r){var a=self||window;try{try{var n;try{n=new a.Blob([e])}catch(t){(n=new(a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder)).append(e),n=n.getBlob()}var s=a.URL||a.webkitURL,o=s.createObjectURL(n),x=new a[t](o,i);return s.revokeObjectURL(o),x}catch(r){return new a[t]("data:application/javascript,".concat(encodeURIComponent(e)),i)}}catch(e){if(!r)throw Error("Inline worker is not supported");return new a[t](r,i)}}},61:function(e,t,i){var r=i(698).default;function a(){e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},i=Object.prototype,s=i.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},x=o.iterator||"@@iterator",f=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function h(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,i){return e[t]=i}}function c(e,t,i,r){var a,s,o,x,f=t&&n(t.prototype,d)?t:d,l=Object.create(f.prototype),h=new F(r||[]);return l._invoke=(a=e,s=i,o=h,x="suspendedStart",function(e,t){if("executing"===x)throw new Error("Generator is already running");if("completed"===x){if("throw"===e)throw t;return{value:void 0,done:!0}}for(o.method=e,o.arg=t;;){var i=o.delegate;if(i){var r=R(i,o);if(r){if(r===u)continue;return r}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===x)throw x="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);x="executing";var n=_(a,s,o);if("normal"===n.type){if(x=o.done?"completed":"suspendedYield",n.arg===u)continue;return{value:n.arg,done:o.done}}"throw"===n.type&&(x="completed",o.method="throw",o.arg=n.arg)}}),l}function _(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var u={};function d(){}function p(){}function m(){}var P={};h(P,x,(function(){return this}));var y=Object.getPrototypeOf,S=y&&y(y(T([])));S&&S!==i&&s.call(S,x)&&(P=S);var b=m.prototype=d.prototype=Object.create(P);function g(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function v(e,t){function i(a,n,o,x){var f=_(e[a],e,n);if("throw"!==f.type){var l=f.arg,h=l.value;return h&&"object"==r(h)&&s.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,x)}),(function(e){i("throw",e,o,x)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return i("throw",e,o,x)}))}x(f.arg)}var a;this._invoke=function(e,r){function n(){return new t((function(t,a){i(e,r,t,a)}))}return a=a?a.then(n,n):n()}}function R(e,t){var i=e.iterator[t.method];if(void 0===i){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,R(e,t),"throw"===t.method))return u;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=_(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,u;var a=r.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,u):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,u)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function T(e){if(e){var t=e[x];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(s.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:D}}function D(){return{value:void 0,done:!0}}return p.prototype=m,h(b,"constructor",m),h(m,"constructor",p),p.displayName=h(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,h(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},g(v.prototype),h(v.prototype,f,(function(){return this})),t.AsyncIterator=v,t.async=function(e,i,r,a,n){void 0===n&&(n=Promise);var s=new v(c(e,i,r,a),n);return t.isGeneratorFunction(i)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},g(b),h(b,l,"Generator"),h(b,x,(function(){return this})),h(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var i in e)t.push(i);return t.reverse(),function i(){for(;t.length;){var r=t.pop();if(r in e)return i.value=r,i.done=!1,i}return i.done=!0,i}},t.values=T,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&s.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,r){return n.type="throw",n.arg=e,t.next=i,r&&(t.method="next",t.arg=void 0),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],n=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var o=s.call(a,"catchLoc"),x=s.call(a,"finallyLoc");if(o&&x){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!x)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&s.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var a=r;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var n=a?a.completion:{};return n.type=e,n.arg=t,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(n)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),u},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.finallyLoc===e)return this.complete(i.completion,i.afterLoc),E(i),u}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var i=this.tryEntries[t];if(i.tryLoc===e){var r=i.completion;if("throw"===r.type){var a=r.arg;E(i)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:T(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=void 0),u}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},698:function(e){function t(i){return e.exports=t="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(e){return void 0===e?"undefined":s(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":s(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(i)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},687:function(e,t,i){var r=i(61)();e.exports=r;try{regeneratorRuntime=r}catch(e){"object"==("undefined"==typeof globalThis?"undefined":o(globalThis))?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}},t={};function r(i){var a=t[i];if(void 0!==a)return a.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,r),n.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var x={};return function(){var e=function(e,t){if(!n(e,t))throw new TypeError("Cannot call a class as a function")},t=function(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}},s=function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e},o=function(e,t,i,r,a,n,s){try{var o=e[n](s),x=o.value}catch(e){return void i(e)}o.done?t(x):Promise.resolve(x).then(r,a)},f=function(){return H()("((()=>{'use strict';function _0x54580d(_0x2b6bad,_0x2d533c){if(!(_0x2b6bad instanceof _0x2d533c))throw new TypeError('Cannot\\x20call\\x20a\\x20class\\x20as\\x20a\\x20function');}function _0xae16d8(_0x51512e,_0x306019){for(var _0x585d8=0x0;_0x585d8<_0x306019['length'];_0x585d8++){var _0x34aa33=_0x306019[_0x585d8];_0x34aa33['enumerable']=_0x34aa33['enumerable']||!0x1,_0x34aa33['configurable']=!0x0,'value'in _0x34aa33&&(_0x34aa33['writable']=!0x0),Object['defineProperty'](_0x51512e,_0x34aa33['key'],_0x34aa33);}}function _0x4fd085(_0xfb685a,_0x3f4464,_0xc28cb1){return _0x3f4464&&_0xae16d8(_0xfb685a['prototype'],_0x3f4464),_0xc28cb1&&_0xae16d8(_0xfb685a,_0xc28cb1),Object['defineProperty'](_0xfb685a,'prototype',{'writable':!0x1}),_0xfb685a;}var _0x599b74=0x501,_0x4b57a2=0x502,_0xa88cb3=0x505,_0x1ee0b0=0x507,_0x31d5c8=0x508,_0x13beae=0x509,_0x41c932=0x512,_0x633153=0x516,_0x2aea6b=0x1,_0x240c92=0x2,_0x1e68ea=0x3,_0x4fbb93=0x0,_0x54a990=0x100,_0x2cb8a2=0x200,_0x4e5968=0x300,_0x30e952=0x400,_0x1837a3=0x500,_0x20b7ae=0x600,_0x443c47=0x700,_0x30ecd9=0x800,_0x39b0d3=0x900,_0x2a01ec=0xa00,_0x16ee77=0x1,_0x3ff4c5=0x2,_0x353221=0x4,_0x2b1528=0x8,_0x1f2582=0x10,_0x160732=0x20,_0x285caf=(function(){function _0x3a5d6f(_0x464baf,_0x1e0a98,_0x5183ee){_0x54580d(this,_0x3a5d6f),this['width']=0x0,this['height']=0x0,this['decoderObj']=null,this['FirstFrame']=!0x0,this['ready_frames']=[],this['underflow']=!0x0,this['sab']=_0x464baf,this['frameRate']=0x1e,this['needSetPreSoft']=!0x1,this['decoderCurStatus']=0x2,this['decoderOutSuccess']=!0x1,this['decoderObjNeedReset']=!0x1,this['oVideoRenderHandle']=_0x1e0a98,this['output']=this['output']['bind'](this),this['reportError']=this['reportError']['bind'](this),this['player']=null,null!=_0x5183ee&&(this['player']=_0x5183ee),this['curFrame']=null;}return _0x4fd085(_0x3a5d6f,[{'key':'initDecoder','value':function(){if(null==this['decoderObj']){var _0x2d79fc={'output':this['output'],'error':this['reportError']};this['decoderObj']=new VideoDecoder(_0x2d79fc);}this['underflow']&&(this['underflow']=!0x1,setTimeout(this['oVideoRenderHandle']['RenderFrame'](),0x0),this['oVideoRenderHandle']['displayRunning']=!0x0),this['decoderCurStatus']=0x2,this['FirstFrame']=!0x0;}},{'key':'inputData','value':function(_0x14a132,_0x2702c6){null!=this['decoderObj']&&('configured'==this['decoderObj']['state']||this['FirstFrame'])&&this['decodeProcess'](_0x14a132,_0x2702c6),_0x2702c6['nStreamEnd']&&this['SetStreamEnd']();}},{'key':'concatenate','value':function(_0x5e99ee){for(var _0x1d99af=0x0,_0x224806=arguments['length'],_0x2c0fc3=new Array(_0x224806>0x1?_0x224806-0x1:0x0),_0xe5bc19=0x1;_0xe5bc19<_0x224806;_0xe5bc19++)_0x2c0fc3[_0xe5bc19-0x1]=arguments[_0xe5bc19];for(var _0x2e36e3=0x0,_0x4839aa=_0x2c0fc3;_0x2e36e3<_0x4839aa['length'];_0x2e36e3++){var _0x5b5797=_0x4839aa[_0x2e36e3];_0x1d99af+=_0x5b5797['length'];}for(var _0xd7b863=new _0x5e99ee(_0x1d99af),_0x34342b=0x0,_0x467991=0x0,_0x454adf=_0x2c0fc3;_0x467991<_0x454adf['length'];_0x467991++){var _0x1d9c81=_0x454adf[_0x467991];_0xd7b863['set'](_0x1d9c81,_0x34342b),_0x34342b+=_0x1d9c81['length'];}return _0xd7b863;}},{'key':'processData','value':function(_0x3e77b2){for(var _0x24d282=null,_0x199354=null,_0x7aab92=null,_0x3c4951=!0x1,_0x2f2bac=!0x1,_0x4e9e0c=0x0,_0x7feff9=0x0;_0x7feff9<_0x3e77b2['length']-0x4;_0x7feff9++){if(0x0!=_0x3e77b2[_0x7feff9]||0x0!=_0x3e77b2[_0x7feff9+0x1]||0x0!=_0x3e77b2[_0x7feff9+0x2]||0x1!=_0x3e77b2[_0x7feff9+0x3]||0x67!=_0x3e77b2[_0x7feff9+0x4]&&0x27!=_0x3e77b2[_0x7feff9+0x4]||(0x0!=_0x7feff9?(_0x2f2bac=!0x0,_0x24d282=_0x3e77b2['slice'](_0x7feff9),_0x4e9e0c=_0x7feff9):_0x24d282=_0x3e77b2),0x0==_0x3e77b2[_0x7feff9]&&0x0==_0x3e77b2[_0x7feff9+0x1]&&0x0==_0x3e77b2[_0x7feff9+0x2]&&0x1==_0x3e77b2[_0x7feff9+0x3]&&(0x9==_0x3e77b2[_0x7feff9+0x4]||0x6==_0x3e77b2[_0x7feff9+0x4])){if(null==_0x24d282)continue;null==_0x199354&&(_0x199354=_0x3e77b2['slice'](_0x4e9e0c,_0x7feff9),_0x3c4951=!0x0);}if(0x0==_0x3e77b2[_0x7feff9]&&0x0==_0x3e77b2[_0x7feff9+0x1]&&0x0==_0x3e77b2[_0x7feff9+0x2]&&0x1==_0x3e77b2[_0x7feff9+0x3]&&(0x65==_0x3e77b2[_0x7feff9+0x4]||0x25==_0x3e77b2[_0x7feff9+0x4])){_0x3c4951&&(_0x7aab92=_0x3e77b2['slice'](_0x7feff9));break;}}return _0x3c4951?this['concatenate'](Uint8Array,_0x199354,_0x7aab92):_0x2f2bac?_0x24d282:_0x3e77b2;}},{'key':'processData1','value':function(_0x16bcc1){return 0x0!=_0x16bcc1[0x0]||0x0!=_0x16bcc1[0x1]||0x0!=_0x16bcc1[0x2]||0x1!=_0x16bcc1[0x3]||0x9!=_0x16bcc1[0x4]&&0x6!=_0x16bcc1[0x4]?_0x16bcc1:_0x16bcc1['slice'](0x5);}},{'key':'formatVideoDecoderConfigure','value':function(_0x54ce8e,_0x196d31,_0x5a1ba3,_0x50f43f){var _0x1ffc78='';if(0x5==_0x196d31)_0x1ffc78='hvc1.1.6.L123.00',console['log']('265\\x20hard\\x20decoder');else{if(0x100==_0x196d31){for(var _0x1ccde6=0x0;_0x1ccde6<_0x54ce8e['length'];_0x1ccde6++)if(0x67===_0x54ce8e[_0x1ccde6]||0x27===_0x54ce8e[_0x1ccde6]){var _0x3cd7eb=_0x54ce8e['subarray'](_0x1ccde6+0x1,_0x1ccde6+0x4);_0x1ffc78='avc1.';for(var _0x34c212=0x0;_0x34c212<0x3;_0x34c212++){var _0x1ce113=_0x3cd7eb[_0x34c212]['toString'](0x10);_0x1ce113['length']<0x2&&(_0x1ce113='0'+_0x1ce113),_0x1ffc78+=_0x1ce113;}break;}console['log']('264\\x20hard\\x20decoder');}else console['log']('Support\\x20Error:\\x20hard\\x20decoder\\x20only\\x20support\\x20264\\x20and\\x20265\\x20!!!');}var _0x34eea1={'codec':_0x1ffc78,'hardwareAcceleration':'prefer-hardware','optimizeForLatency':0x1};return 0x5!=_0x196d31&&this['needSetPreSoft']&&(_0x34eea1['hardwareAcceleration']='prefer-software'),_0x34eea1;}},{'key':'decodeProcess','value':function(_0x39207c,_0x2e1195){var _0x4f64b2=this;this['frameRate']!=_0x2e1195['frameRate']&&(this['frameRate']=_0x2e1195['frameRate']),this['width']!=_0x2e1195['width']&&(this['width']=_0x2e1195['width']),this['height']!=_0x2e1195['height']&&(this['height']=_0x2e1195['height']),_0x2e1195['needSetPreSoft']&&(this['needSetPreSoft']=_0x2e1195['needSetPreSoft']);var _0x1e93e7=_0x39207c;if(0x4!=this['decoderCurStatus']&&null!=this['decoderObj']){if('configured'==this['decoderObj']['state']){var _0x38e22c=new EncodedVideoChunk({'data':_0x1e93e7,'timestamp':_0x2e1195['timeStamp'],'type':_0x2e1195['isKeyFrame']?'key':'delta'});this['decoderObj']['decode'](_0x38e22c),_0x1e93e7=null,_0x39207c=null,_0x38e22c=null,_0x2e1195['frameType'];}else{if(_0x2e1195['isKeyFrame']&&'unconfigured'==this['decoderObj']['state']){var _0x158e69=this['formatVideoDecoderConfigure'](_0x39207c,_0x2e1195['codecType'],_0x2e1195['width'],_0x2e1195['height']);if(''==_0x158e69['codec'])return-0x1;VideoDecoder['isConfigSupported'](_0x158e69)['then'](function(_0x5e7fa4){if(_0x5e7fa4['supported']){_0x4f64b2['decoderObj']['configure'](_0x158e69),_0x1e93e7=_0x4f64b2['processData'](_0x39207c),_0x4f64b2['FirstFrame']=!0x1;var _0x3f5221=new EncodedVideoChunk({'data':_0x1e93e7,'timestamp':_0x2e1195['timeStamp'],'type':_0x2e1195['isKeyFrame']?'key':'delta'});_0x4f64b2['decoderObj']['decode'](_0x3f5221),_0x158e69=null,_0x1e93e7=null,_0x39207c=null;}else console['log']('%c4>HardDecoder\\x20ConfigSupported\\x20error,switch\\x20hard\\x20to\\x20soft','color:\\x20red'),_0x4f64b2['oVideoRenderHandle']['HardDecodeError']();})['catch'](function(){console['log']('VideoDecoder.js\\x20isConfigSupported\\x20error\\x20switch\\x20hard\\x20to\\x20soft\\x20'),_0x4f64b2['oVideoRenderHandle']['HardDecodeError']();});}}}}},{'key':'output','value':function(_0x206cf6){if('configured'==this['decoderObj']['state'])_0x206cf6['format'],_0x206cf6['codedWidth'],_0x206cf6['codedHeight'],_0x206cf6['displayWidth'],_0x206cf6['displayHeight'],_0x206cf6['duration'],_0x206cf6['timestamp'],(this['ready_frames']['push'](_0x206cf6),this['decoderOutSuccess']||(this['decoderOutSuccess']=!0x0),this['decoderObj']['decodeQueueSize']<=0x1&&(this['player']?this['player']['JSPlayM4_GetRawData']():postMessage({'function':'GetRawData'})));else _0x206cf6['close']();}},{'key':'output2','value':function(_0x4be35d){var _0x3a3570=this;_0x4be35d['timestamp'],createImageBitmap(_0x4be35d)['then'](function(_0x3adf18){_0x4be35d['close'](),_0x3a3570['ready_frames']['push'](_0x3adf18);});}},{'key':'reportError','value':function(_0x16c406){this['decoderOutSuccess']?this['decoderObjNeedReset']=!0x0:(this['oVideoRenderHandle']['HardDecodeError'](),console['log']('%cswitch\\x20hardVideoDecoder\\x20to\\x20softVideoDecoder','color:\\x20red'));}},{'key':'destroyDecoder','value':function(){var _0x450263=this;return new Promise(function(_0x200299,_0x1c35a9){_0x450263['clearDecoderObjBuffer']()['then'](function(){null!=_0x450263['decoderObj']&&('closed'!=_0x450263['decoderObj']['state']&&_0x450263['decoderObj']['close'](),console['log']('>>>JS\\x2001\\x20destroy\\x20decoderObj'),_0x450263['decoderObj']=null),_0x450263['decoderCurStatus']=0x4,_0x450263['decoderOutSuccess']=!0x1,_0x450263['FirstFrame']=!0x0,_0x450263['underflow']=!0x0,_0x450263['needSetPreSoft']=!0x1,_0x450263['decoderObjNeedReset']=!0x1,_0x200299();},function(){_0x1c35a9();});});}},{'key':'resetDecoder','value':function(){var _0x1c7703=this;return new Promise(function(_0x240094,_0x2effac){_0x1c7703['destroyDecoder']()['then'](function(){_0x1c7703['initDecoder'](),console['log']('%c\\x20reset\\x20hard\\x20decoder','color:red'),_0x240094();},function(){_0x2effac();});});}},{'key':'clearDecoderObjBuffer','value':function(){var _0x27b4db=this;return new Promise(function(_0xdf8f82,_0x28479a){for(var _0x5d26a1=_0x27b4db['ready_frames']['length'],_0x2e9d24=0x0;_0x2e9d24<_0x5d26a1;_0x2e9d24++){_0x27b4db['ready_frames']['shift']()['close']();}_0x27b4db['ready_frames']['splice'](0x0,_0x27b4db['ready_frames']['length']),null!=_0x27b4db['decoderObj']&&'configured'==_0x27b4db['decoderObj']['state']&&_0x27b4db['decoderObj']['reset'](),_0xdf8f82();});}},{'key':'SetStreamEnd','value':function(){return 0x0==this['decoderObj']['decodeQueueSize']&&0x0==this['ready_frames']['length']&&(this['decoderObj']['flush'](),console['log']('flush')),0x1;}},{'key':'GetFrame','value':function(){var _0x5f11c6=this;return new Promise(function(_0x2ac610,_0x3d6f62){if(null!=_0x5f11c6['curFrame']){var _0x4417cc=_0x5f11c6['ready_frames']['shift']();_0x4417cc['close'](),_0x4417cc=null,_0x5f11c6['curFrame']=null;}0x0!=_0x5f11c6['ready_frames']['length']?(_0x5f11c6['curFrame']=_0x5f11c6['ready_frames'][0x0],_0x2ac610(_0x5f11c6['curFrame'])):(_0x5f11c6['curFrame']=null,_0x2ac610(null));});}},{'key':'GetFrameBufferLength','value':function(){return this['ready_frames']['length'];}},{'key':'GetImageYUV','value':function(){var _0x58efa4=this;return new Promise(function(_0x80d209,_0x5c516d){var _0x32f011=null;if(null!=_0x58efa4['curFrame']?_0x32f011=_0x58efa4['curFrame']:0x0!=_0x58efa4['ready_frames']['length']&&(_0x32f011=_0x58efa4['ready_frames'][0x0]),null!=_0x32f011){var _0x586862=_0x32f011['displayWidth'],_0x9b681b=_0x32f011['displayHeight'],_0x3f3636=_0x586862*_0x9b681b*0x3/0x2,_0x331745=new Uint8Array(_0x3f3636),_0x37d16e=_0x32f011['format'];_0x32f011['copyTo'](_0x331745)['then'](function(){console['log']('2\\x20yuvLength:'+_0x3f3636+',displayWidth:'+_0x586862),_0x80d209({'yuvFrameBuffer':_0x331745,'yuvLength':_0x3f3636,'displayWidth':_0x586862,'displayHeight':_0x9b681b,'yuvType':_0x37d16e});});}else _0x80d209({'yuvFrameBuffer':-0x1,'yuvLength':-0x1,'displayWidth':-0x1,'displayHeight':-0x1,'yuvType':-0x1});});}}]),_0x3a5d6f;}()),_0xa87ede=0x1,_0x86aef9=0x80000001,_0x3d12cf=0x80000003,_0x520965=0x80000004,_0x31ddcf=0x80000005,_0x13126c=0x8000000a,_0x4d26c0=0x8000000d,_0x4fea1b=0x8000000e,_0xe9e464=0x1,_0x206403=0x2,_0x186ff9={'SR_DE_NULL':0x0,'SR_DE_FISH_ORIGINAL':0x1,'SR_DE_FISH_PTZ_CEILING':0x2,'SR_DE_FISH_PTZ_FLOOR':0x3,'SR_DE_FISH_PTZ_WALL':0x4,'SR_DE_FISH_PANORAMA_CEILING_360':0x5,'SR_DE_FISH_PANORAMA_CEILING_180':0x6,'SR_DE_FISH_PANORAMA_FLOOR_360':0x7,'SR_DE_FISH_PANORAMA_FLOOR_180':0x8,'SR_DE_FISH_PANORAMA_WALL':0x9,'SR_DE_FISH_SEMISPHERE':0xa,'SR_DE_EAGLEEYE_SEMISPHERE':0xb,'SR_DE_EAGLEEYE_PLANE':0xc,'SR_DE_FISH_CYLINDER_CEILING':0xd,'SR_DE_FISH_CYLINDER_FLOOR':0xe,'SR_DE_FISH_CYLINDER_SPLIT_CEILING':0xf,'SR_DE_FISH_CYLINDER_SPLIT_FLOOR':0x10,'SR_DE_FISH_PLANET':0x11,'SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL':0x12,'SR_DE_FISH_ARCSPHERE_VERTICAL_WALL':0x13,'SR_DE_FISH_ANIMATION_SWITCH_CEILING':0x14,'SR_DE_FISH_ANIMATION_SWITCH_FLOOR':0x15,'SR_DE_PANORAMA_SPHERE':0x16,'SR_DE_PANORAMA_PLANET':0x17},_0x343a24=0x0,_0x58bd8b=0x1,_0x532920=0x2,_0x264b64=0x3,_0x2818bf=0x4,_0x3b8155=0x5,_0x3840be=0x6,_0xa01ff6=0x100,_0x392c27=0x1,_0x5ca12e=0x2,_0x378a81=0x3,_0x3be196=0x4,_0x569e7f=0x0,_0x150ab7=0x1,_0x495db0=0x2,_0x394973=0x1,_0x42f4b3=0x2,_0x339c63=0x3,_0x444649=0x0,_0x4f7368=0x1,_0x11cf81=0x1,_0x57ef5a=0x2,_0x46c7b3=0x1,_0x2d33eb=0x2,_0x199c31=0x3,_0x414976=0x4,_0xe529b7=0x5,_0x1f462c='\\x0aattribute\\x20vec3\\x20xy;\\x0aattribute\\x20vec2\\x20uv;\\x0auniform\\x20int\\x20bCapture;\\x20\\x0a\\x0avarying\\x20highp\\x20vec2\\x20v_uv;\\x0a\\x0avoid\\x20main(void)\\x20{\\x0a\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(xy.x,\\x20-xy.y,\\x20xy.z,\\x201.0);\\x0a\\x20\\x20}\\x0a\\x20\\x20else\\x0a\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(xy,\\x201.0);\\x0a\\x20\\x20}\\x0a\\x20\\x20v_uv\\x20=\\x20uv;\\x0a}\\x0a',_0x48a033='\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec3\\x20position;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20\\x20color;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20\\x20float\\x20\\x20pp;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20\\x20vec4\\x20\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(position.x,\\x20-position.y,\\x200.0,\\x201.0);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(position.x,\\x20position.y,\\x200.0,\\x201.0);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20position.z;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20colorOut\\x20=\\x20color;\\x0a\\x20\\x20\\x20\\x20}\\x0a',_0x283927='\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20mediump\\x20float\\x20pp;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20lowp\\x20vec4\\x20\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20mediump\\x20float\\x20fx\\x20=\\x20abs(pp);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(fx\\x20>\\x200.2)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20=\\x20colorOut.a*(1.25\\x20-\\x201.25*fx);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',_0x2a3c39='\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20position;\\x20\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20\\x20\\x20mat4\\x20\\x20\\x20matRotate;\\x20\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x20\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20position;\\x20//*\\x20matRotate;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20=\\x20\\x20-position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',_0x350ff5='\\x0a\\x20\\x20\\x20\\x20precision\\x20mediump\\x20float;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAlpha;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20pp.st);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20*=\\x20fAlpha;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',_0x379995=0x20,_0x4b88be=0x400,_0x466865=0.05,_0x4a23c6=0.000001,_0x530a52=3.1415926,_0x49aaae=0.02,_0x26dab3=0x3e8,_0x13b181=0.78539815,_0x40743d=0x28,_0x3cf544=-0x1,_0x44d661=_0x530a52/0x12,_0x5affea=_0x530a52/0x3,_0x438d57=_0x530a52/0x6,_0x2506c4=_0x530a52/0x9,_0x2fd873=0.000001,_0x1d1f9f='undefined'!=typeof Float32Array?Float32Array:Array;Math['random'],Math['PI'],Math['hypot']||(Math['hypot']=function(){for(var _0x1528a6=0x0,_0xb5940b=arguments['length'];_0xb5940b--;)_0x1528a6+=arguments[_0xb5940b]*arguments[_0xb5940b];return Math['sqrt'](_0x1528a6);});function _0x5d7ee2(){var _0x2c8471=new _0x1d1f9f(0x10);return _0x1d1f9f!=Float32Array&&(_0x2c8471[0x1]=0x0,_0x2c8471[0x2]=0x0,_0x2c8471[0x3]=0x0,_0x2c8471[0x4]=0x0,_0x2c8471[0x6]=0x0,_0x2c8471[0x7]=0x0,_0x2c8471[0x8]=0x0,_0x2c8471[0x9]=0x0,_0x2c8471[0xb]=0x0,_0x2c8471[0xc]=0x0,_0x2c8471[0xd]=0x0,_0x2c8471[0xe]=0x0),_0x2c8471[0x0]=0x1,_0x2c8471[0x5]=0x1,_0x2c8471[0xa]=0x1,_0x2c8471[0xf]=0x1,_0x2c8471;}function _0x5ec25a(_0x3bc3fc,_0x205ca0,_0x1e9eea){var _0x331936=_0x205ca0[0x0],_0x40c3da=_0x205ca0[0x1],_0x37c4cb=_0x205ca0[0x2],_0xa889b6=_0x205ca0[0x3],_0x4c0dbb=_0x205ca0[0x4],_0x52301a=_0x205ca0[0x5],_0x17f559=_0x205ca0[0x6],_0x2c8144=_0x205ca0[0x7],_0x48eb8a=_0x205ca0[0x8],_0x4d2bbd=_0x205ca0[0x9],_0x5a4141=_0x205ca0[0xa],_0x480471=_0x205ca0[0xb],_0x2d955c=_0x205ca0[0xc],_0x5b4064=_0x205ca0[0xd],_0x2f8b5f=_0x205ca0[0xe],_0x227864=_0x205ca0[0xf],_0x5af42b=_0x1e9eea[0x0],_0x2f83a3=_0x1e9eea[0x1],_0x50ee36=_0x1e9eea[0x2],_0xf7a7ad=_0x1e9eea[0x3];return _0x3bc3fc[0x0]=_0x5af42b*_0x331936+_0x2f83a3*_0x4c0dbb+_0x50ee36*_0x48eb8a+_0xf7a7ad*_0x2d955c,_0x3bc3fc[0x1]=_0x5af42b*_0x40c3da+_0x2f83a3*_0x52301a+_0x50ee36*_0x4d2bbd+_0xf7a7ad*_0x5b4064,_0x3bc3fc[0x2]=_0x5af42b*_0x37c4cb+_0x2f83a3*_0x17f559+_0x50ee36*_0x5a4141+_0xf7a7ad*_0x2f8b5f,_0x3bc3fc[0x3]=_0x5af42b*_0xa889b6+_0x2f83a3*_0x2c8144+_0x50ee36*_0x480471+_0xf7a7ad*_0x227864,_0x5af42b=_0x1e9eea[0x4],_0x2f83a3=_0x1e9eea[0x5],_0x50ee36=_0x1e9eea[0x6],_0xf7a7ad=_0x1e9eea[0x7],_0x3bc3fc[0x4]=_0x5af42b*_0x331936+_0x2f83a3*_0x4c0dbb+_0x50ee36*_0x48eb8a+_0xf7a7ad*_0x2d955c,_0x3bc3fc[0x5]=_0x5af42b*_0x40c3da+_0x2f83a3*_0x52301a+_0x50ee36*_0x4d2bbd+_0xf7a7ad*_0x5b4064,_0x3bc3fc[0x6]=_0x5af42b*_0x37c4cb+_0x2f83a3*_0x17f559+_0x50ee36*_0x5a4141+_0xf7a7ad*_0x2f8b5f,_0x3bc3fc[0x7]=_0x5af42b*_0xa889b6+_0x2f83a3*_0x2c8144+_0x50ee36*_0x480471+_0xf7a7ad*_0x227864,_0x5af42b=_0x1e9eea[0x8],_0x2f83a3=_0x1e9eea[0x9],_0x50ee36=_0x1e9eea[0xa],_0xf7a7ad=_0x1e9eea[0xb],_0x3bc3fc[0x8]=_0x5af42b*_0x331936+_0x2f83a3*_0x4c0dbb+_0x50ee36*_0x48eb8a+_0xf7a7ad*_0x2d955c,_0x3bc3fc[0x9]=_0x5af42b*_0x40c3da+_0x2f83a3*_0x52301a+_0x50ee36*_0x4d2bbd+_0xf7a7ad*_0x5b4064,_0x3bc3fc[0xa]=_0x5af42b*_0x37c4cb+_0x2f83a3*_0x17f559+_0x50ee36*_0x5a4141+_0xf7a7ad*_0x2f8b5f,_0x3bc3fc[0xb]=_0x5af42b*_0xa889b6+_0x2f83a3*_0x2c8144+_0x50ee36*_0x480471+_0xf7a7ad*_0x227864,_0x5af42b=_0x1e9eea[0xc],_0x2f83a3=_0x1e9eea[0xd],_0x50ee36=_0x1e9eea[0xe],_0xf7a7ad=_0x1e9eea[0xf],_0x3bc3fc[0xc]=_0x5af42b*_0x331936+_0x2f83a3*_0x4c0dbb+_0x50ee36*_0x48eb8a+_0xf7a7ad*_0x2d955c,_0x3bc3fc[0xd]=_0x5af42b*_0x40c3da+_0x2f83a3*_0x52301a+_0x50ee36*_0x4d2bbd+_0xf7a7ad*_0x5b4064,_0x3bc3fc[0xe]=_0x5af42b*_0x37c4cb+_0x2f83a3*_0x17f559+_0x50ee36*_0x5a4141+_0xf7a7ad*_0x2f8b5f,_0x3bc3fc[0xf]=_0x5af42b*_0xa889b6+_0x2f83a3*_0x2c8144+_0x50ee36*_0x480471+_0xf7a7ad*_0x227864,_0x3bc3fc;}function _0x3405d1(_0xe0081f,_0x1b674b,_0x4ce0fb,_0x151c92){var _0xa104c9,_0x46ae43,_0x26d557,_0x237e66,_0x40ab05,_0x5fd26e,_0x5ae90f,_0x4f396b,_0x5b9f89,_0x1d5853,_0x5beaee,_0xc07032,_0x391691,_0xb7a629,_0x5861cc,_0x3b1ef3,_0x7394b2,_0x2b731b,_0x41f62d,_0x3cc106,_0x3890ac,_0x29cdd9,_0x496a78,_0x197fb4,_0x12c2f9=_0x151c92[0x0],_0x16ab04=_0x151c92[0x1],_0x1fb873=_0x151c92[0x2],_0x4b6fb0=Math['hypot'](_0x12c2f9,_0x16ab04,_0x1fb873);return _0x4b6fb0<_0x2fd873?null:(_0x12c2f9*=_0x4b6fb0=0x1/_0x4b6fb0,_0x16ab04*=_0x4b6fb0,_0x1fb873*=_0x4b6fb0,_0xa104c9=Math['sin'](_0x4ce0fb),_0x26d557=0x1-(_0x46ae43=Math['cos'](_0x4ce0fb)),_0x237e66=_0x1b674b[0x0],_0x40ab05=_0x1b674b[0x1],_0x5fd26e=_0x1b674b[0x2],_0x5ae90f=_0x1b674b[0x3],_0x4f396b=_0x1b674b[0x4],_0x5b9f89=_0x1b674b[0x5],_0x1d5853=_0x1b674b[0x6],_0x5beaee=_0x1b674b[0x7],_0xc07032=_0x1b674b[0x8],_0x391691=_0x1b674b[0x9],_0xb7a629=_0x1b674b[0xa],_0x5861cc=_0x1b674b[0xb],_0x3b1ef3=_0x12c2f9*_0x12c2f9*_0x26d557+_0x46ae43,_0x7394b2=_0x16ab04*_0x12c2f9*_0x26d557+_0x1fb873*_0xa104c9,_0x2b731b=_0x1fb873*_0x12c2f9*_0x26d557-_0x16ab04*_0xa104c9,_0x41f62d=_0x12c2f9*_0x16ab04*_0x26d557-_0x1fb873*_0xa104c9,_0x3cc106=_0x16ab04*_0x16ab04*_0x26d557+_0x46ae43,_0x3890ac=_0x1fb873*_0x16ab04*_0x26d557+_0x12c2f9*_0xa104c9,_0x29cdd9=_0x12c2f9*_0x1fb873*_0x26d557+_0x16ab04*_0xa104c9,_0x496a78=_0x16ab04*_0x1fb873*_0x26d557-_0x12c2f9*_0xa104c9,_0x197fb4=_0x1fb873*_0x1fb873*_0x26d557+_0x46ae43,_0xe0081f[0x0]=_0x237e66*_0x3b1ef3+_0x4f396b*_0x7394b2+_0xc07032*_0x2b731b,_0xe0081f[0x1]=_0x40ab05*_0x3b1ef3+_0x5b9f89*_0x7394b2+_0x391691*_0x2b731b,_0xe0081f[0x2]=_0x5fd26e*_0x3b1ef3+_0x1d5853*_0x7394b2+_0xb7a629*_0x2b731b,_0xe0081f[0x3]=_0x5ae90f*_0x3b1ef3+_0x5beaee*_0x7394b2+_0x5861cc*_0x2b731b,_0xe0081f[0x4]=_0x237e66*_0x41f62d+_0x4f396b*_0x3cc106+_0xc07032*_0x3890ac,_0xe0081f[0x5]=_0x40ab05*_0x41f62d+_0x5b9f89*_0x3cc106+_0x391691*_0x3890ac,_0xe0081f[0x6]=_0x5fd26e*_0x41f62d+_0x1d5853*_0x3cc106+_0xb7a629*_0x3890ac,_0xe0081f[0x7]=_0x5ae90f*_0x41f62d+_0x5beaee*_0x3cc106+_0x5861cc*_0x3890ac,_0xe0081f[0x8]=_0x237e66*_0x29cdd9+_0x4f396b*_0x496a78+_0xc07032*_0x197fb4,_0xe0081f[0x9]=_0x40ab05*_0x29cdd9+_0x5b9f89*_0x496a78+_0x391691*_0x197fb4,_0xe0081f[0xa]=_0x5fd26e*_0x29cdd9+_0x1d5853*_0x496a78+_0xb7a629*_0x197fb4,_0xe0081f[0xb]=_0x5ae90f*_0x29cdd9+_0x5beaee*_0x496a78+_0x5861cc*_0x197fb4,_0x1b674b!==_0xe0081f&&(_0xe0081f[0xc]=_0x1b674b[0xc],_0xe0081f[0xd]=_0x1b674b[0xd],_0xe0081f[0xe]=_0x1b674b[0xe],_0xe0081f[0xf]=_0x1b674b[0xf]),_0xe0081f);}var _0x4ceff8=function(_0x302553,_0xab7b4e,_0x299e09,_0x38ab7f,_0x237322){var _0x3eec8b=0x1/Math['tan'](_0xab7b4e/0x2);if(_0x302553[0x0]=_0x3eec8b/_0x299e09,_0x302553[0x1]=0x0,_0x302553[0x2]=0x0,_0x302553[0x3]=0x0,_0x302553[0x4]=0x0,_0x302553[0x5]=_0x3eec8b,_0x302553[0x6]=0x0,_0x302553[0x7]=0x0,_0x302553[0x8]=0x0,_0x302553[0x9]=0x0,_0x302553[0xb]=-0x1,_0x302553[0xc]=0x0,_0x302553[0xd]=0x0,_0x302553[0xf]=0x0,null!=_0x237322&&_0x237322!==0x1/0x0){var _0x2642b3=0x1/(_0x38ab7f-_0x237322);_0x302553[0xa]=(_0x237322+_0x38ab7f)*_0x2642b3,_0x302553[0xe]=0x2*_0x237322*_0x38ab7f*_0x2642b3;}else _0x302553[0xa]=-0x1,_0x302553[0xe]=-0x2*_0x38ab7f;return _0x302553;},_0x504680=function(_0x23342e,_0x5bb1cc,_0x473ea1,_0x29c6e7,_0x5528a9,_0x3833eb,_0x35e8e6){var _0x445103=0x1/(_0x5bb1cc-_0x473ea1),_0x1b3a48=0x1/(_0x29c6e7-_0x5528a9),_0x19b6f6=0x1/(_0x3833eb-_0x35e8e6);return _0x23342e[0x0]=-0x2*_0x445103,_0x23342e[0x1]=0x0,_0x23342e[0x2]=0x0,_0x23342e[0x3]=0x0,_0x23342e[0x4]=0x0,_0x23342e[0x5]=-0x2*_0x1b3a48,_0x23342e[0x6]=0x0,_0x23342e[0x7]=0x0,_0x23342e[0x8]=0x0,_0x23342e[0x9]=0x0,_0x23342e[0xa]=0x2*_0x19b6f6,_0x23342e[0xb]=0x0,_0x23342e[0xc]=(_0x5bb1cc+_0x473ea1)*_0x445103,_0x23342e[0xd]=(_0x5528a9+_0x29c6e7)*_0x1b3a48,_0x23342e[0xe]=(_0x35e8e6+_0x3833eb)*_0x19b6f6,_0x23342e[0xf]=0x1,_0x23342e;};function _0x4d7c69(){var _0x295eb7=new _0x1d1f9f(0x3);return _0x1d1f9f!=Float32Array&&(_0x295eb7[0x0]=0x0,_0x295eb7[0x1]=0x0,_0x295eb7[0x2]=0x0),_0x295eb7;}function _0x21a3b9(_0x558408,_0x34df78,_0x527718){var _0x15b0f4=new _0x1d1f9f(0x3);return _0x15b0f4[0x0]=_0x558408,_0x15b0f4[0x1]=_0x34df78,_0x15b0f4[0x2]=_0x527718,_0x15b0f4;}function _0x1a3314(_0x378744,_0xbd9ba4){return _0x378744[0x0]*_0xbd9ba4[0x0]+_0x378744[0x1]*_0xbd9ba4[0x1]+_0x378744[0x2]*_0xbd9ba4[0x2];}function _0x3d4060(_0x17fee6,_0x4a9566,_0x713dfe){var _0x3fee8d=_0x4a9566[0x0],_0x8cebec=_0x4a9566[0x1],_0x28e065=_0x4a9566[0x2],_0x38339=_0x713dfe[0x0],_0x22f745=_0x713dfe[0x1],_0x5a41a6=_0x713dfe[0x2];return _0x17fee6[0x0]=_0x8cebec*_0x5a41a6-_0x28e065*_0x22f745,_0x17fee6[0x1]=_0x28e065*_0x38339-_0x3fee8d*_0x5a41a6,_0x17fee6[0x2]=_0x3fee8d*_0x22f745-_0x8cebec*_0x38339,_0x17fee6;}var _0x3e3a1f,_0x395623=function(_0x388fd0){var _0x5b9529=_0x388fd0[0x0],_0xd338a0=_0x388fd0[0x1],_0x2aad30=_0x388fd0[0x2];return Math['hypot'](_0x5b9529,_0xd338a0,_0x2aad30);};_0x3e3a1f=_0x4d7c69(),!(function(){var _0x582aae,_0x79f026=(_0x582aae=new _0x1d1f9f(0x4),_0x1d1f9f!=Float32Array&&(_0x582aae[0x0]=0x0,_0x582aae[0x1]=0x0,_0x582aae[0x2]=0x0,_0x582aae[0x3]=0x0),_0x582aae);}());function _0x5b294c(){var _0x2c9a14=new _0x1d1f9f(0x4);return _0x1d1f9f!=Float32Array&&(_0x2c9a14[0x0]=0x0,_0x2c9a14[0x1]=0x0,_0x2c9a14[0x2]=0x0),_0x2c9a14[0x3]=0x1,_0x2c9a14;}function _0x600e23(_0x1ab4b1,_0x205eec,_0x3e3ad5,_0x5d3c36){var _0x13db1a,_0x48838a,_0x37104f,_0x20dc1e,_0x32d1b7,_0x11e631=_0x205eec[0x0],_0x41b90d=_0x205eec[0x1],_0x1ba7cf=_0x205eec[0x2],_0x4f337e=_0x205eec[0x3],_0x55bad6=_0x3e3ad5[0x0],_0x5b458b=_0x3e3ad5[0x1],_0x28612f=_0x3e3ad5[0x2],_0x1a2451=_0x3e3ad5[0x3];return(_0x48838a=_0x11e631*_0x55bad6+_0x41b90d*_0x5b458b+_0x1ba7cf*_0x28612f+_0x4f337e*_0x1a2451)<0x0&&(_0x48838a=-_0x48838a,_0x55bad6=-_0x55bad6,_0x5b458b=-_0x5b458b,_0x28612f=-_0x28612f,_0x1a2451=-_0x1a2451),0x1-_0x48838a>_0x2fd873?(_0x13db1a=Math['acos'](_0x48838a),_0x37104f=Math['sin'](_0x13db1a),_0x20dc1e=Math['sin']((0x1-_0x5d3c36)*_0x13db1a)/_0x37104f,_0x32d1b7=Math['sin'](_0x5d3c36*_0x13db1a)/_0x37104f):(_0x20dc1e=0x1-_0x5d3c36,_0x32d1b7=_0x5d3c36),_0x1ab4b1[0x0]=_0x20dc1e*_0x11e631+_0x32d1b7*_0x55bad6,_0x1ab4b1[0x1]=_0x20dc1e*_0x41b90d+_0x32d1b7*_0x5b458b,_0x1ab4b1[0x2]=_0x20dc1e*_0x1ba7cf+_0x32d1b7*_0x28612f,_0x1ab4b1[0x3]=_0x20dc1e*_0x4f337e+_0x32d1b7*_0x1a2451,_0x1ab4b1;}var _0xb87275=function(_0x3b20b1,_0x83271c){var _0x26a808=_0x83271c[0x0],_0x4ed1e4=_0x83271c[0x1],_0x3e9207=_0x83271c[0x2],_0x423be1=_0x83271c[0x3],_0x48404d=_0x26a808*_0x26a808+_0x4ed1e4*_0x4ed1e4+_0x3e9207*_0x3e9207+_0x423be1*_0x423be1;return _0x48404d>0x0&&(_0x48404d=0x1/Math['sqrt'](_0x48404d)),_0x3b20b1[0x0]=_0x26a808*_0x48404d,_0x3b20b1[0x1]=_0x4ed1e4*_0x48404d,_0x3b20b1[0x2]=_0x3e9207*_0x48404d,_0x3b20b1[0x3]=_0x423be1*_0x48404d,_0x3b20b1;},_0x45cf39,_0x4265e3,_0x42ab8a,_0x37c073,_0x27f373,_0x464119,_0x1db24d;_0x45cf39=_0x4d7c69(),_0x4265e3=_0x21a3b9(0x1,0x0,0x0),_0x42ab8a=_0x21a3b9(0x0,0x1,0x0),_0x37c073=_0x5b294c(),_0x27f373=_0x5b294c(),_0x464119=new _0x1d1f9f(0x9),_0x1d1f9f!=Float32Array&&(_0x464119[0x1]=0x0,_0x464119[0x2]=0x0,_0x464119[0x3]=0x0,_0x464119[0x5]=0x0,_0x464119[0x6]=0x0,_0x464119[0x7]=0x0),_0x464119[0x0]=0x1,_0x464119[0x4]=0x1,_0x464119[0x8]=0x1,_0x1db24d=_0x464119,!(function(){var _0x5e96d8=(function(){var _0x1f208b=new _0x1d1f9f(0x2);return _0x1d1f9f!=Float32Array&&(_0x1f208b[0x0]=0x0,_0x1f208b[0x1]=0x0),_0x1f208b;}());}());var _0x2e6310,_0x3b657c=(function(){function _0x5ee987(){_0x54580d(this,_0x5ee987),this['fFov']=0.785,this['fAspect']=0x1,this['fNear']=0.02,this['fFar']=0x3e8,this['fTheta']=0x0,this['fAlpha']=0x0,this['fBeta']=0x0,this['fScale']=0x1,this['bOrtho']=!0x1,this['matView']=_0x5d7ee2(),this['matProj']=_0x5d7ee2(),this['vecEye']=_0x21a3b9(0x0,0x0,0x0),this['vecCenter']=_0x21a3b9(0x0,0x0,0x64),this['vecUp']=_0x21a3b9(0x0,0x1,0x0);}return _0x4fd085(_0x5ee987,[{'key':'SetYaw','value':function(_0x1b1db8){this['fTheta']=_0x1b1db8;}},{'key':'GetYaw','value':function(){return this['fTheta'];}},{'key':'SetPitch','value':function(_0x23bed8){this['fAlpha']=_0x23bed8;}},{'key':'GetPitch','value':function(){return this['fAlpha'];}},{'key':'SetRoll','value':function(_0x483c88){this['fBeta']=_0x483c88;}},{'key':'GetRoll','value':function(){return this['fBeta'];}},{'key':'SetScale','value':function(_0x49b3da){this['fScale']=_0x49b3da;}},{'key':'GetScale','value':function(){return this['fScale'];}},{'key':'SetFov','value':function(_0x51f792){this['fFov']=_0x51f792;}},{'key':'SetAspect','value':function(_0x5abf13){this['fAspect']=_0x5abf13;}},{'key':'SetNear','value':function(_0x54349a){this['fNear']=_0x54349a;}},{'key':'SetFar','value':function(_0x1e3429){this['fFar']=_0x1e3429;}},{'key':'SetOrtho','value':function(_0x5f483d){this['bOrtho']=_0x5f483d;}},{'key':'UpdateCamera','value':function(_0x1bda20,_0x2990c0){if(!(_0x1bda20<=0x0||_0x2990c0<=0x0)){if(0x1==this['bOrtho'])_0x504680(this['matProj'],0x0,_0x1bda20,_0x2990c0,0x0,this['fNear'],this['fFar']);else{var _0x2fa5f4=this['fFov']/_0x530a52*0xb4;_0x4ceff8(this['matProj'],_0x2fa5f4,_0x1bda20/_0x2990c0,this['fNear'],this['fFar']);}this['vecEye']=_0x21a3b9(0x0,0x0,this['fScale']),this['vecCenter']=_0x21a3b9(0x0,0x0,0x0),this['vecUp']=_0x21a3b9(0x0,0x1,0x0);var _0x5b2a20=_0x21a3b9(0x1,0x0,0x0),_0x2cf9bf=_0x21a3b9(0x0,0x1,0x0),_0x4e957e=_0x21a3b9(0x0,0x0,0x1),_0x48156e=_0x5d7ee2();!function(_0x25ec01,_0x40b862,_0x56ef8c,_0x12ba71){var _0x50ab75,_0x19e466,_0x34f9a4,_0x215482,_0x31dc54,_0x21c876,_0x5e5bc4,_0x5c7e59,_0x573ea3,_0x47e710,_0x5bc565=_0x40b862[0x0],_0x398682=_0x40b862[0x1],_0x2390fd=_0x40b862[0x2],_0x2dc34a=_0x12ba71[0x0],_0x3d1e14=_0x12ba71[0x1],_0x21f20c=_0x12ba71[0x2],_0x9b62d=_0x56ef8c[0x0],_0x420fd0=_0x56ef8c[0x1],_0x3cc1aa=_0x56ef8c[0x2];Math['abs'](_0x5bc565-_0x9b62d)<_0x2fd873&&Math['abs'](_0x398682-_0x420fd0)<_0x2fd873&&Math['abs'](_0x2390fd-_0x3cc1aa)<_0x2fd873?function(_0x26b1cc){_0x26b1cc[0x0]=0x1,_0x26b1cc[0x1]=0x0,_0x26b1cc[0x2]=0x0,_0x26b1cc[0x3]=0x0,_0x26b1cc[0x4]=0x0,_0x26b1cc[0x5]=0x1,_0x26b1cc[0x6]=0x0,_0x26b1cc[0x7]=0x0,_0x26b1cc[0x8]=0x0,_0x26b1cc[0x9]=0x0,_0x26b1cc[0xa]=0x1,_0x26b1cc[0xb]=0x0,_0x26b1cc[0xc]=0x0,_0x26b1cc[0xd]=0x0,_0x26b1cc[0xe]=0x0,_0x26b1cc[0xf]=0x1;}(_0x25ec01):(_0x5e5bc4=_0x5bc565-_0x9b62d,_0x5c7e59=_0x398682-_0x420fd0,_0x573ea3=_0x2390fd-_0x3cc1aa,_0x50ab75=_0x3d1e14*(_0x573ea3*=_0x47e710=0x1/Math['hypot'](_0x5e5bc4,_0x5c7e59,_0x573ea3))-_0x21f20c*(_0x5c7e59*=_0x47e710),_0x19e466=_0x21f20c*(_0x5e5bc4*=_0x47e710)-_0x2dc34a*_0x573ea3,_0x34f9a4=_0x2dc34a*_0x5c7e59-_0x3d1e14*_0x5e5bc4,(_0x47e710=Math['hypot'](_0x50ab75,_0x19e466,_0x34f9a4))?(_0x50ab75*=_0x47e710=0x1/_0x47e710,_0x19e466*=_0x47e710,_0x34f9a4*=_0x47e710):(_0x50ab75=0x0,_0x19e466=0x0,_0x34f9a4=0x0),_0x215482=_0x5c7e59*_0x34f9a4-_0x573ea3*_0x19e466,_0x31dc54=_0x573ea3*_0x50ab75-_0x5e5bc4*_0x34f9a4,_0x21c876=_0x5e5bc4*_0x19e466-_0x5c7e59*_0x50ab75,(_0x47e710=Math['hypot'](_0x215482,_0x31dc54,_0x21c876))?(_0x215482*=_0x47e710=0x1/_0x47e710,_0x31dc54*=_0x47e710,_0x21c876*=_0x47e710):(_0x215482=0x0,_0x31dc54=0x0,_0x21c876=0x0),_0x25ec01[0x0]=_0x50ab75,_0x25ec01[0x1]=_0x215482,_0x25ec01[0x2]=_0x5e5bc4,_0x25ec01[0x3]=0x0,_0x25ec01[0x4]=_0x19e466,_0x25ec01[0x5]=_0x31dc54,_0x25ec01[0x6]=_0x5c7e59,_0x25ec01[0x7]=0x0,_0x25ec01[0x8]=_0x34f9a4,_0x25ec01[0x9]=_0x21c876,_0x25ec01[0xa]=_0x573ea3,_0x25ec01[0xb]=0x0,_0x25ec01[0xc]=-(_0x50ab75*_0x5bc565+_0x19e466*_0x398682+_0x34f9a4*_0x2390fd),_0x25ec01[0xd]=-(_0x215482*_0x5bc565+_0x31dc54*_0x398682+_0x21c876*_0x2390fd),_0x25ec01[0xe]=-(_0x5e5bc4*_0x5bc565+_0x5c7e59*_0x398682+_0x573ea3*_0x2390fd),_0x25ec01[0xf]=0x1);}(_0x48156e,this['vecEye'],this['vecCenter'],this['vecUp']);var _0x14046d=_0x5d7ee2(),_0x18395f=_0x5d7ee2(),_0x549d74=_0x5d7ee2(),_0x15744a=_0x5d7ee2();_0x3405d1(_0x18395f,_0x14046d,-this['fAlpha'],_0x5b2a20),_0x3405d1(_0x549d74,_0x18395f,-this['fTheta'],_0x2cf9bf),_0x3405d1(_0x15744a,_0x549d74,-this['fBeta'],_0x4e957e),_0x5ec25a(this['matView'],_0x48156e,_0x15744a);}}},{'key':'GetView','value':function(){return this['matView'];}},{'key':'GetProj','value':function(){return this['matProj'];}}]),_0x5ee987;}()),_0x453e55=(function(){function _0x2425ba(){_0x54580d(this,_0x2425ba),this['canvas']=null,this['ctx']=null,this['videoShaderProgram']=0x0,this['vertexPosBuffer']=0x0,this['texturePosBuffer']=0x0,this['pFrameData']=null,this['frameDisplayWidth']=0x0,this['frameDisplayHeight']=0x0,this['onlySupportedWebGL1']=!0x1,this['bAntialias']=!0x1,this['bRecreateTex']=!0x0,this['nSurfaceTexture']=[],this['nMaxPointNum']=0x0,this['pLinePosVertices']=null,this['pLineClrVertices']=null,this['glLinePosBuffer']=0x0,this['glLineClrBuffer']=0x0,this['nLineTriangleNum']=0x0,this['nLineShaderProgram']=0x0,this['pFillBlockPosVertices']=null,this['pFillBlockClrVertices']=null,this['nMaxFillBlockTriNum']=0x0,this['glBlockPosBuffer']=0x0,this['glBlockClrBuffer']=0x0,this['nBlockShaderProgram']=0x0,this['nDrawFontWidth']=0x0,this['nDrawFontHeight']=0x0,this['nFontColorTexture']=0x0,this['pFontColorBuffer']=0x0,this['nFontShaderProgram']=0x0,this['nFontBGNum']=0x0,this['pstFontBGLines']=[],this['nImageShaderProgram']=0x0,this['pImagePosVertices']=null,this['pImageClrVertices']=null,this['glImagePosBuffer']=0x0,this['glImageClrBuffer']=0x0,this['nImageColorTexture']=null,this['nDrawImageWidth']=0x0,this['nDrawImageHeight']=0x0,this['nImageColorTextures']=[],this['pFishParamManager']=null,this['enDisplayEffect']=_0x186ff9['SR_DE_NULL'],this['nFECPort']=_0x3cf544,this['bIsCapturing']=!0x1,this['pSemiSpherePos']=null,this['pSemiSphereTex']=null,this['nSemiSpherePosNum']=0x0,this['nSemiSpherePosSize']=0x0,this['nSemiSphereTexSize']=0x0,this['pCylinderPos']=null,this['pCylinderTex']=null,this['nCylinderPosNum']=0x0,this['nCylinderPosSize']=0x0,this['nCylinderTexSize']=0x0,this['fCylinderHeight']=0x0,this['fCylinderRadius']=0x0,this['pArcSpherePos']=null,this['pArcSphereTex']=null,this['nArcSpherePosNum']=0x0,this['nArcSpherePosSize']=0x0,this['nArcSphereTexSize']=0x0,this['fImageWidth']=0x1,this['fImageHeight']=0x1,this['fTexCenterX']=0.5,this['fTexCenterY']=0.5,this['fTexRadius']=0.5,this['b3DPort']=!0x1,this['pCamera']=null,this['fRotateX']=0x0,this['fRotateY']=0x0,this['fScale']=0x0,this['fRotateLimitX']=0x0,this['fRotateLimitY']=0x0,this['pfuncCBIn']=null,this['pfuncCBOut']=null,this['pUserIn']=null,this['pUserOut']=null,this['bCullBack']=!0x1,this['fSrcUseLeft']=0x0,this['fSrcUseRight']=0x1,this['fSrcUseTop']=0x0,this['fSrcUseBottom']=0x1,this['fDstUseLeft']=0x0,this['fDstUseRight']=0x1,this['fDstUseTop']=0x0,this['fDstUseBottom']=0x1,this['enPixelFormat']=_0x343a24,this['nTextureNum']=0x0,this['textCanvas']=null,this['textCanvasCtx']=null,this['nCaptureWidth']=0x0,this['nCaptureHeight']=0x0,this['nCaptureRTTex']=0x0,this['nCaptureFBO']=0x0,this['nCaptureFBOWidth']=0x0,this['nCaptureFBOHeight']=0x0,this['nCaptureDepthbuffer']=0x0,this['bCaptureResInit']=!0x1,this['fBrightness']=0x0,this['fHue']=0x0,this['fSaturation']=0x0,this['fContrast']=0x0,this['fSharpness']=0x0,this['nPostProc']=0x0;}return _0x4fd085(_0x2425ba,[{'key':'CompileProgram','value':function(_0x298713,_0xb12ba2){var _0x593a9b=this['ctx'];if(null==_0x593a9b||null==_0x298713||null==_0xb12ba2)return-0x1;var _0x240e10=_0x593a9b['createShader'](_0x593a9b['VERTEX_SHADER']);if(_0x593a9b['shaderSource'](_0x240e10,_0x298713),_0x593a9b['compileShader'](_0x240e10),!_0x593a9b['getShaderParameter'](_0x240e10,_0x593a9b['COMPILE_STATUS']))return console['log']('Vertex\\x20shader\\x20failed\\x20to\\x20compile:\\x20'+_0x593a9b['getShaderInfoLog'](_0x240e10)),-0x1;var _0x4a47df=_0x593a9b['createShader'](_0x593a9b['FRAGMENT_SHADER']);if(_0x593a9b['shaderSource'](_0x4a47df,_0xb12ba2),_0x593a9b['compileShader'](_0x4a47df),!_0x593a9b['getShaderParameter'](_0x4a47df,_0x593a9b['COMPILE_STATUS']))return console['log']('Fragment\\x20shader\\x20failed\\x20to\\x20compile:\\x20'+_0x593a9b['getShaderInfoLog'](_0x4a47df)),-0x1;var _0x213125=_0x593a9b['createProgram']();return _0x593a9b['attachShader'](_0x213125,_0x240e10),_0x593a9b['attachShader'](_0x213125,_0x4a47df),_0x593a9b['linkProgram'](_0x213125),_0x593a9b['getProgramParameter'](_0x213125,_0x593a9b['LINK_STATUS'])?(_0x593a9b['deleteShader'](_0x240e10),_0x593a9b['deleteShader'](_0x4a47df),_0x213125):(console['log']('Program\\x20failed\\x20to\\x20compile:\\x20'+_0x593a9b['getProgramInfoLog'](_0x213125)),-0x1);}},{'key':'SR_Init','value':function(_0x446426,_0x117296){if(null==_0x446426)return _0x31ddcf;if(this['canvas']=_0x446426,this['ctx']=this['canvas']['getContext']('webgl2'),this['ctx']||(this['ctx']=this['canvas']['getContext']('webgl')||this['canvas']['getContext']('experimental-webgl'),this['onlySupportedWebGL1']=!0x0,console['log']('only\\x20support\\x20webgl1')),!this['ctx'])return console['log']('your\\x20browser\\x20does\\x20not\\x20support\\x20WebGL'),_0x4fea1b;if(_0x117296==_0x532920||_0x117296==_0x3840be)return _0x86aef9;switch(_0x117296){case _0x58bd8b:case _0x264b64:this['nTextureNum']=0x3;break;case _0x532920:case _0x3840be:this['nTextureNum']=0x2;break;case _0xa01ff6:this['nTextureNum']=0x1;break;default:return _0x86aef9;}return this['enPixelFormat']=_0x117296,_0xa87ede;}},{'key':'SR_Draw','value':function(_0x1eea6a,_0x54c230,_0x533ad6,_0x39828b,_0x130cba){if(null==this['ctx'])return _0x520965;var _0x196b60=this['nTextureNum'];if(null==_0x1eea6a||_0x54c230<=0x0||_0x533ad6<=0x0)return _0x31ddcf;if(0x0==this['videoShaderProgram']||0x0==this['vertexPosBuffer']||0x0==this['texturePosBuffer'])return _0x520965;var _0x570392=_0xa87ede;if(_0xa01ff6==this['enPixelFormat'])this['frameDisplayWidth']=_0x54c230,this['frameDisplayHeight']=_0x533ad6;else{if(_0x570392=this['_ResizeFrameData'](_0x1eea6a,_0x54c230,_0x533ad6,_0x39828b),_0xa87ede!=_0x570392)return _0x570392;}if(this['ctx']['useProgram'](this['videoShaderProgram']),0x1==this['bRecreateTex']){if(this['enPixelFormat']==_0xa01ff6){if(0x0!=this['nSurfaceTexture'][0x0]){var _0x307c8c=this['nSurfaceTexture'][0x0];this['ctx']['deleteTexture'](_0x307c8c),this['nSurfaceTexture'][0x0]=0x0;}var _0xfa0c54=this['ctx']['createTexture']();if(_0xfa0c54<=0x0)return _0x4d26c0;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],_0xfa0c54),0x1==this['bAntialias']?this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR_MIPMAP_NEAREST']):this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),this['nSurfaceTexture'][0x0]=_0xfa0c54;}else{if(this['enPixelFormat']==_0x58bd8b||this['enPixelFormat']==_0x264b64)for(var _0x3d8d4b=0x0;_0x3d8d4b<_0x196b60;_0x3d8d4b++){if(0x0!=this['nSurfaceTexture'][_0x3d8d4b]){var _0xe89fbf=this['nSurfaceTexture'][_0x3d8d4b];this['ctx']['deleteTexture'](_0xe89fbf),this['nSurfaceTexture'][_0x3d8d4b]=0x0;}var _0x44ac7b=this['ctx']['createTexture']();if(_0x44ac7b<=0x0)return _0x4d26c0;if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],_0x44ac7b),0x1==this['bAntialias']?this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR_MIPMAP_NEAREST']):this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),0x0==_0x3d8d4b){var _0xef5d37=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Ytexture');this['ctx']['uniform1i'](_0xef5d37,0x0);}else{if(0x1==_0x3d8d4b){var _0x5d982f=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Utexture');this['ctx']['uniform1i'](_0x5d982f,0x1);}else{if(0x2==_0x3d8d4b){var _0x3ed5dc=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Vtexture');this['ctx']['uniform1i'](_0x3ed5dc,0x2);}}}this['nSurfaceTexture'][_0x3d8d4b]=_0x44ac7b,this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],null);}}this['bRecreateTex']=!0x1;}this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x1b8d0c=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'xy');if(_0x1b8d0c<0x0)return _0x4d26c0;this['ctx']['vertexAttribPointer'](_0x1b8d0c,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x1b8d0c),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x16bf1a=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'uv');if(_0x16bf1a<0x0)return _0x4d26c0;this['ctx']['vertexAttribPointer'](_0x16bf1a,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x16bf1a),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null);var _0x2a1b79=this['enDisplayEffect'],_0x5377d3=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCapture');if(_0x5377d3<=0x0)return _0x4d26c0;this['ctx']['uniform1i'](_0x5377d3,0x0);var _0x24e3f9=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'nPostProc');switch(this['ctx']['uniform1i'](_0x24e3f9,this['nPostProc']),0x1==this['nPostProc']&&(_0x570392=this['_SetImagePostProcess']()),_0x2a1b79){case _0x186ff9['SR_DE_NULL']:break;case _0x186ff9['SR_DE_FISH_ORIGINAL']:case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:case _0x186ff9['SR_DE_FISH_PTZ_WALL']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:if(null==this['pFishParamManager'])return _0x520965;var _0x2bdc46={};if(_0x570392=this['pFishParamManager']['GetRenderParam'](this['nFECPort'],_0x2bdc46),_0xa87ede!=_0x570392)return _0x570392;if(_0x186ff9['SR_DE_FISH_ORIGINAL']==_0x2a1b79){var _0x5156fb=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bBlack');if(_0x5156fb<=0x0)return _0x4d26c0;this['ctx']['uniform1i'](_0x5156fb,_0x2bdc46['bBlack']);var _0x314d35=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCut');if(_0x314d35<=0x0)return _0x4d26c0;this['ctx']['uniform1i'](_0x314d35,_0x2bdc46['bCut']);}if(_0x186ff9['SR_DE_FISH_PTZ_CEILING']==_0x2a1b79||_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==_0x2a1b79||_0x186ff9['SR_DE_FISH_PTZ_WALL']==_0x2a1b79){var _0x124160=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleCos');if(_0x124160<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x124160,_0x2bdc46['fCosH']);var _0x306b85=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleSin');if(_0x306b85<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x306b85,_0x2bdc46['fSinH']);var _0x1bc35c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleCos');if(_0x1bc35c<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x1bc35c,_0x2bdc46['fCosV']);var _0x4c60dc=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleSin');if(_0x4c60dc<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x4c60dc,_0x2bdc46['fSinV']);var _0x136f7b=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fZoom');if(_0x136f7b<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x136f7b,_0x2bdc46['fZoom']);}if(_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']==_0x2a1b79||_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']==_0x2a1b79||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']==_0x2a1b79||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']==_0x2a1b79){var _0x517882=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fAngle');if(_0x517882<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x517882,_0x2bdc46['fAngle']);}var _0x3d42d7=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX1');if(_0x3d42d7<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x3d42d7,_0x2bdc46['fRXLeft']);var _0x5b37ec=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX2');if(_0x5b37ec<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x5b37ec,_0x2bdc46['fRXRight']);var _0x407ff2=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY1');if(_0x407ff2<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x407ff2,_0x2bdc46['fRYTop']);var _0x1c8e20=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY2');if(_0x1c8e20<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x1c8e20,_0x2bdc46['fRYBottom']);break;case _0x186ff9['SR_DE_FISH_SEMISPHERE']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](3.14-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['canvas']['width'],this['canvas']['height']);var _0x489295=this['pCamera']['GetView'](),_0xac09cc=this['pCamera']['GetProj'](),_0x5a6fea=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x5a6fea<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x5a6fea,!0x1,_0x489295);var _0x37770e=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x37770e<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x37770e,!0x1,_0xac09cc);break;case _0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['canvas']['width'],this['canvas']['height']);var _0x4082e3=this['pCamera']['GetView'](),_0x24ca6f=this['pCamera']['GetProj'](),_0x3b3b00=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x3b3b00<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x3b3b00,!0x1,_0x4082e3);var _0x87ffb2=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x87ffb2<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x87ffb2,!0x1,_0x24ca6f);break;default:return _0x86aef9;}if(this['canvas']['width']<=0x0||this['canvas']['height']<=0x0)return _0x4fea1b;if(null!=_0x130cba&&(_0x570392=this['SR_SetDisplayRect'](_0x130cba['fx'],_0x130cba['fy'],_0x130cba['width'],_0x130cba['height'],_0x206403))!=_0xa87ede)return _0x570392;if(null!=_0x130cba?this['ctx']['viewport'](this['canvas']['width']*this['fDstUseLeft'],this['canvas']['height']*this['fDstUseTop'],this['canvas']['width']*this['fDstUseRight'],this['canvas']['height']*this['fDstUseBottom']):(this['ctx']['viewport'](0x0,0x0,this['canvas']['width'],this['canvas']['height']),this['ctx']['clearColor'](0x0,0x0,0x0,0x1),this['ctx']['clear'](this['ctx']['COLOR_BUFFER_BIT']|this['ctx']['DEPTH_BUFFER_BIT'])),this['b3DPort']&&(this['ctx']['enable'](this['ctx']['DEPTH_TEST']),this['ctx']['depthFunc'](this['ctx']['LESS']),this['ctx']['depthMask'](!0x0),0x1==this['bCullBack']?this['ctx']['enable'](this['ctx']['CULL_FACE']):this['ctx']['disable'](this['ctx']['CULL_FACE'])),this['enPixelFormat']==_0xa01ff6)this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],_0x54c230,_0x533ad6,0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x1eea6a),0x1==this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']);else{if(this['enPixelFormat']==_0x58bd8b){var _0x166fc9=this['pFrameData']['subarray'](0x0,_0x54c230*_0x533ad6);this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x54c230,_0x533ad6,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x166fc9);var _0x3b1a83=this['pFrameData']['subarray'](_0x54c230*_0x533ad6+_0x54c230/0x2*_0x533ad6/0x2,_0x54c230*_0x533ad6+_0x54c230/0x2*_0x533ad6/0x2+_0x54c230/0x2*_0x533ad6/0x2);this['ctx']['activeTexture'](this['ctx']['TEXTURE1']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x1]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x54c230/0x2,_0x533ad6/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x3b1a83);var _0x402c77=this['pFrameData']['subarray'](_0x54c230*_0x533ad6,_0x54c230*_0x533ad6+_0x54c230/0x2*_0x533ad6/0x2);this['ctx']['activeTexture'](this['ctx']['TEXTURE2']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x2]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x54c230/0x2,_0x533ad6/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x402c77),0x1==this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']),_0x166fc9=null,_0x3b1a83=null,_0x402c77=null;}else this['enPixelFormat']==_0x264b64&&(_0x166fc9=this['pFrameData']['subarray'](0x0,_0x54c230*_0x533ad6),(this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x54c230,_0x533ad6,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x166fc9)),_0x3b1a83=this['pFrameData']['subarray'](_0x54c230*_0x533ad6,_0x54c230*_0x533ad6+_0x54c230/0x2*_0x533ad6/0x2),(this['ctx']['activeTexture'](this['ctx']['TEXTURE1']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x1]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x54c230/0x2,_0x533ad6/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x3b1a83)),_0x402c77=this['pFrameData']['subarray'](_0x54c230*_0x533ad6+_0x54c230/0x2*_0x533ad6/0x2,_0x54c230*_0x533ad6+_0x54c230/0x2*_0x533ad6/0x2+_0x54c230/0x2*_0x533ad6/0x2),(this['ctx']['activeTexture'](this['ctx']['TEXTURE2']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x2]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x54c230/0x2,_0x533ad6/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x402c77),0x1==this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']),_0x166fc9=null,_0x3b1a83=null,_0x402c77=null));}if(this['onlySupportedWebGL1']||this['ctx']['clearBufferfi'](this['ctx']['DEPTH_STENCIL'],0x0,0x1,0x0),0x0==this['b3DPort'])this['ctx']['drawArrays'](this['ctx']['TRIANGLE_FAN'],0x0,0x4);else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_SEMISPHERE']){if(this['nSemiSpherePosNum']<=0x0)return _0x520965;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nSemiSpherePosNum']);}else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']){if(this['nCylinderPosNum']<=0x0)return _0x520965;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nCylinderPosNum']);}else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){if(this['nArcSpherePosNum']<=0x0)return _0x520965;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nArcSpherePosNum']);}}}}if(this['ctx']['useProgram'](null),null!=this['pFishParamManager']){var _0x2c1465=this['pFishParamManager']['GetWndPort']();_0x2c1465!=_0x3cf544&&_0x2c1465==this['nFECPort']&&this['DrawPTZLines']();}return null!=this['pfuncCBIn']&&this['pfuncCBIn'](this['pUserIn']),null!=this['pfuncCBOut']&&this['pfuncCBOut'](this['pUserOut']),_0xa87ede;}},{'key':'DrawPTZLines','value':function(){if(null==this['pFishParamManager'])return _0x520965;var _0xfb6bfe=this['pFishParamManager']['GetPTZDisplayMode']();if(_0xfb6bfe==_0x495db0||_0xfb6bfe==_0x150ab7){for(var _0x33b298=0x0,_0x4499b9={'fR':0x0,'fG':0x0,'fB':0x0,'fA':0x0},_0x594c33=_0xa87ede,_0x4b01f7=0x0;_0x4b01f7<_0x379995;++_0x4b01f7)if(0x0!=this['pFishParamManager']['IsPortAllocated'](_0x4b01f7)&&(_0x33b298=0x2,_0x594c33=this['pFishParamManager']['GetPTZColor'](_0x4b01f7,_0x4499b9),_0xa87ede==_0x594c33)){0x1==this['pFishParamManager']['IsPTZSelected'](_0x4b01f7)&&(_0x33b298+=0x1);var _0x23fea9=this['pFishParamManager']['GetWndPort']();if(_0x4b01f7!=_0x23fea9&&_0x495db0==_0xfb6bfe){if(_0x186ff9['SR_DE_FISH_ORIGINAL']==this['pFishParamManager']['GetDisplayEffect'](_0x23fea9)){var _0x327590={};if(_0x594c33=this['pFishParamManager']['GetPTZPoints'](_0x4b01f7,_0x327590,_0x495db0),_0xa87ede!=_0x594c33)continue;if(null!=_0x327590['pstPoints']&&0x0!=_0x327590['nPointNum']&&(_0x594c33=this['SR_DrawLines'](_0x327590['pstPoints'],_0x327590['nPointNum'],!0x0,_0x4499b9,_0x33b298,!0x1),_0xa87ede!=_0x594c33))continue;}else{var _0x19796d;if((_0x19796d=this['pFishParamManager']['GetPTZFragmentNum'](_0x4b01f7))<=0x0)continue;for(var _0x3eeec2=0x0;_0x3eeec2<_0x19796d;_0x3eeec2++){var _0x4ab5d3={};this['pFishParamManager']['GetPTZFragmentPoints'](_0x4b01f7,_0x4ab5d3,_0x3eeec2),null!=_0x4ab5d3['pstPoints']&&0x0!=_0x4ab5d3['nPointNum']&&this['SR_DrawLines'](_0x4ab5d3['pstPoints'],_0x4ab5d3['nPointNum'],!0x1,_0x4499b9,_0x33b298,!0x1);}}}else{if(_0x4b01f7!=_0x23fea9&&_0x150ab7==_0xfb6bfe){var _0x50bab0={};if(_0x594c33=this['pFishParamManager']['GetPTZPoints'](_0x4b01f7,_0x50bab0,_0x150ab7),_0xa87ede!=_0x594c33)continue;if(null!=_0x50bab0['pstPoints']&&0x0!=_0x50bab0['nPointNum']&&(_0x594c33=this['SR_DrawLines'](_0x50bab0['pstPoints'],_0x50bab0['nPointNum'],!0x0,_0x4499b9,_0x33b298,!0x1),_0xa87ede!=_0x594c33))continue;}}}}return _0xa87ede;}},{'key':'DrawFillBlock','value':function(_0x5db47d,_0x17ee38,_0x3a5c7f){if(null==this['ctx'])return _0x520965;if(null==_0x5db47d||_0x17ee38<0x1||_0x3a5c7f<0x2)return _0x31ddcf;for(var _0x3175a2=0x0,_0xb41871=0x0;_0xb41871<_0x17ee38;++_0xb41871){if(null==_0x5db47d[_0xb41871]['pstPoints']||_0x5db47d[_0xb41871]['nPointNum']<0x3||!0x0!==_0x5db47d[_0xb41871]['bLoop']||null==_0x5db47d[_0xb41871]['pstColor'])return _0x31ddcf;_0x3175a2+=_0x5db47d[_0xb41871]['nPointNum'];}if(_0x3175a2!==_0x3a5c7f)return _0x31ddcf;var _0x55a3ec=_0x3a5c7f-0x2*_0x17ee38;if(_0x55a3ec>this['nMaxFillBlockTriNum']&&(this['pFillBlockPosVertices']=null,this['pFillBlockClrVertices']=null,this['nMaxFillBlockTriNum']=_0x55a3ec),0x0==this['glBlockPosBuffer']&&(this['glBlockPosBuffer']=this['ctx']['createBuffer'](),0x0==this['glBlockPosBuffer']))return _0x4d26c0;if(0x0==this['glBlockClrBuffer']&&(this['glBlockClrBuffer']=this['ctx']['createBuffer'](),0x0==this['glBlockClrBuffer']))return _0x4d26c0;if(null==this['pFillBlockPosVertices']){var _0x5a946e=this['nMaxFillBlockTriNum'];if(this['pFillBlockPosVertices']=new Float32Array(0x3*_0x5a946e*0x3),null==this['pFillBlockPosVertices'])return _0x3d12cf;}if(this['pFillBlockPosVertices']['fill'](0x0),null==this['pFillBlockClrVertices']){var _0x11b260=this['nMaxFillBlockTriNum'];if(this['pFillBlockClrVertices']=new Float32Array(0x4*_0x11b260*0x3),null==this['pFillBlockClrVertices'])return _0x3d12cf;}this['pFillBlockClrVertices']['fill'](0x0);for(var _0x5c54b8=0x0,_0x419f68=0x0,_0x513399=0x0,_0xa7cd13=null,_0x2758c4=null,_0x490836={},_0x5f517a={},_0xabaeff={},_0x5b4ff3=0x0;_0x5b4ff3<_0x17ee38;++_0x5b4ff3){_0x513399=_0x5db47d[_0x5b4ff3]['nPointNum'],_0xa7cd13=_0x5db47d[_0x5b4ff3]['pstPoints'],_0x2758c4=_0x5db47d[_0x5b4ff3]['pstColor'],_0x490836['fX']=(_0xa7cd13[0x0]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x490836['fX']=this['fDstUseLeft']+_0x490836['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0x490836['fX']=0x2*_0x490836['fX']-0x1,_0x490836['fY']=(_0xa7cd13[0x0]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x490836['fY']=this['fDstUseTop']+_0x490836['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0x490836['fY']=0x1-0x2*_0x490836['fY'];for(var _0x5c8d08=0x1;_0x5c8d08<_0x513399-0x1;_0x5c8d08++)_0x5f517a['fX']=(_0xa7cd13[_0x5c8d08]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x5f517a['fX']=this['fDstUseLeft']+_0x5f517a['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0x5f517a['fX']=0x2*_0x5f517a['fX']-0x1,_0x5f517a['fY']=(_0xa7cd13[_0x5c8d08]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x5f517a['fY']=this['fDstUseTop']+_0x5f517a['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0x5f517a['fY']=0x1-0x2*_0x5f517a['fY'],_0xabaeff['fX']=(_0xa7cd13[_0x5c8d08+0x1]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0xabaeff['fX']=this['fDstUseLeft']+_0xabaeff['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0xabaeff['fX']=0x2*_0xabaeff['fX']-0x1,_0xabaeff['fY']=(_0xa7cd13[_0x5c8d08+0x1]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0xabaeff['fY']=this['fDstUseTop']+_0xabaeff['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0xabaeff['fY']=0x1-0x2*_0xabaeff['fY'],this['pFillBlockPosVertices'][_0x5c54b8++]=_0x490836['fX'],this['pFillBlockPosVertices'][_0x5c54b8++]=_0x490836['fY'],this['pFillBlockPosVertices'][_0x5c54b8++]=0x0,this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fR'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fG'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fB'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fA'],this['pFillBlockPosVertices'][_0x5c54b8++]=_0x5f517a['fX'],this['pFillBlockPosVertices'][_0x5c54b8++]=_0x5f517a['fY'],this['pFillBlockPosVertices'][_0x5c54b8++]=0x0,this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fR'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fG'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fB'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fA'],this['pFillBlockPosVertices'][_0x5c54b8++]=_0xabaeff['fX'],this['pFillBlockPosVertices'][_0x5c54b8++]=_0xabaeff['fY'],this['pFillBlockPosVertices'][_0x5c54b8++]=0x0,this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fR'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fG'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fB'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fA'];}if(0x0==this['nBlockShaderProgram']&&(this['nBlockShaderProgram']=this['CompileProgram'](_0x48a033,_0x283927),this['nBlockShaderProgram']<=0x0))return _0x4d26c0;this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFunc'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockPosBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pFillBlockPosVertices'],this['ctx']['STATIC_DRAW']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockClrBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pFillBlockClrVertices'],this['ctx']['STATIC_DRAW']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['useProgram'](this['nBlockShaderProgram']);var _0x55229f=this['ctx']['getUniformLocation'](this['nLineShaderProgram'],'bCapture');if(_0x55229f<=0x0)return _0x4d26c0;0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x55229f,0x1):this['ctx']['uniform1i'](_0x55229f,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockPosBuffer']);var _0x5d25b6=this['ctx']['getAttribLocation'](this['nBlockShaderProgram'],'position');this['ctx']['enableVertexAttribArray'](_0x5d25b6),this['ctx']['vertexAttribPointer'](_0x5d25b6,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockClrBuffer']);var _0x59f897=this['ctx']['getAttribLocation'](this['nBlockShaderProgram'],'color');return this['ctx']['enableVertexAttribArray'](_0x59f897),this['ctx']['vertexAttribPointer'](_0x59f897,0x4,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,0x3*_0x55a3ec),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),_0xa87ede;}},{'key':'ComputeLinePoint','value':function(_0x511066,_0x1d3b6f){if(null==_0x511066||_0x1d3b6f<0x1)return _0x31ddcf;if(null==this['pLinePosVertices']||null==this['pLineClrVertices'])return _0x520965;var _0xea88ad=0x0,_0x574a97=0x0;0x1==this['bIsCapturing']?(_0xea88ad=(this['fDstUseRight']-this['fDstUseLeft'])*this['nCaptureWidth'],_0x574a97=(this['fDstUseBottom']-this['fDstUseTop'])*this['nCaptureHeight']):(_0xea88ad=(this['fDstUseRight']-this['fDstUseLeft'])*this['canvas']['width'],_0x574a97=(this['fDstUseBottom']-this['fDstUseTop'])*this['canvas']['height']);for(var _0x347d33=0x0,_0x2b608b=0x0,_0x47870b=0x0,_0x278ab8=0x0,_0x28d930=0x0,_0x4592f5=0x0,_0x3b9b4c=0x0,_0xd4ce8f=0x0,_0xdb8723=0x0,_0xd5d75a=0x0,_0x3cc192=0x0,_0x59d8e0=0x0;_0x59d8e0<_0x1d3b6f;++_0x59d8e0){var _0x3e11c9=[];if(!((_0x3cc192=_0x511066[_0x59d8e0]['nPointNum'])<=0x0)){for(var _0x247d88=0x0;_0x247d88<_0x3cc192;++_0x247d88){var _0x3d4d29={};_0x3d4d29['fX']=(_0x511066[_0x59d8e0]['pstPoints'][_0x247d88]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x3d4d29['fX']=this['fDstUseLeft']+_0x3d4d29['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0x3d4d29['fX']=0x2*_0x3d4d29['fX']-0x1,_0x3d4d29['fY']=(_0x511066[_0x59d8e0]['pstPoints'][_0x247d88]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x3d4d29['fY']=this['fDstUseTop']+_0x3d4d29['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0x3d4d29['fY']=0x1-0x2*_0x3d4d29['fY'],_0x3e11c9['push'](_0x3d4d29);}if(this['canvas']['width']<=0x0||this['canvas']['height']<=0x0)return _0x4fea1b;if(_0x4592f5=3.5*_0x511066[_0x59d8e0]['nLineWidth']/_0xea88ad,_0x3b9b4c=3.5*_0x511066[_0x59d8e0]['nLineWidth']/_0x574a97,_0x4592f5<=0x0||_0x3b9b4c<=0x0)return _0x31ddcf;var _0x419dfa=_0x511066[_0x59d8e0]['pstColor'];if(null==_0x419dfa||null==_0x419dfa)return _0x31ddcf;for(var _0x2ae122=0x0;_0x2ae122<_0x3cc192-0x1;++_0x2ae122)_0x2b608b=_0x3e11c9[_0x2ae122+0x1]['fX']-_0x3e11c9[_0x2ae122]['fX'],_0x47870b=_0x3e11c9[_0x2ae122+0x1]['fY']-_0x3e11c9[_0x2ae122]['fY'],_0x347d33=Math['sqrt'](_0x2b608b*_0x2b608b+_0x47870b*_0x47870b),Math['abs'](_0x347d33-0x0)<0.000001||(_0x278ab8=-_0x4592f5*_0x47870b/_0x347d33/0x2,_0x28d930=_0x3b9b4c*_0x2b608b/_0x347d33/0x2,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122]['fX']+_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122]['fY']+_0x28d930,this['pLinePosVertices'][_0xdb8723++]=-0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122+0x1]['fX']-_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122+0x1]['fY']-_0x28d930,this['pLinePosVertices'][_0xdb8723++]=0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122]['fX']-_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122]['fY']-_0x28d930,this['pLinePosVertices'][_0xdb8723++]=0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122]['fX']+_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122]['fY']+_0x28d930,this['pLinePosVertices'][_0xdb8723++]=-0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122+0x1]['fX']+_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122+0x1]['fY']+_0x28d930,this['pLinePosVertices'][_0xdb8723++]=-0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122+0x1]['fX']-_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122+0x1]['fY']-_0x28d930,this['pLinePosVertices'][_0xdb8723++]=0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],_0xd4ce8f+=0x2);0x1==_0x511066[_0x59d8e0]['bLoop']&&0x2<_0x3cc192&&(_0x2b608b=_0x3e11c9[_0x3cc192-0x1]['fX']-_0x3e11c9[0x0]['fX'],_0x47870b=_0x3e11c9[_0x3cc192-0x1]['fY']-_0x3e11c9[0x0]['fY'],_0x347d33=Math['sqrt'](_0x2b608b*_0x2b608b+_0x47870b*_0x47870b),Math['abs'](_0x347d33-0x0)>0.000001&&(_0x278ab8=-_0x4592f5*_0x47870b/_0x347d33/0x2,_0x28d930=_0x3b9b4c*_0x2b608b/_0x347d33/0x2,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[0x0]['fX']+_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[0x0]['fY']+_0x28d930,this['pLinePosVertices'][_0xdb8723++]=-0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x3cc192-0x1]['fX']-_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x3cc192-0x1]['fY']-_0x28d930,this['pLinePosVertices'][_0xdb8723++]=0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[0x0]['fX']-_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[0x0]['fY']-_0x28d930,this['pLinePosVertices'][_0xdb8723++]=0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[0x0]['fX']+_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[0x0]['fY']+_0x28d930,this['pLinePosVertices'][_0xdb8723++]=-0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x3cc192-0x1]['fX']+_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x3cc192-0x1]['fY']+_0x28d930,this['pLinePosVertices'][_0xdb8723++]=-0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x3cc192-0x1]['fX']-_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x3cc192-0x1]['fY']-_0x28d930,this['pLinePosVertices'][_0xdb8723++]=0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],_0xd4ce8f+=0x2));}}return 0x0==_0xd4ce8f?_0x31ddcf:(this['nLineTriangleNum']=_0xd4ce8f,_0xa87ede);}},{'key':'SR_DrawLines','value':function(_0xc257fa,_0x5e3a45,_0x5782f2,_0x385965,_0x4f81fe,_0x20842c){var _0x34f8e7=[],_0x36c991={};return _0x36c991['pstPoints']=_0xc257fa,_0x36c991['nPointNum']=_0x5e3a45,_0x36c991['bLoop']=_0x5782f2,_0x36c991['pstColor']=_0x385965,_0x36c991['nLineWidth']=_0x4f81fe,_0x34f8e7['push'](_0x36c991),this['SR_DrawLinesEx'](_0x34f8e7,0x1,_0x5e3a45,_0x20842c);}},{'key':'SR_DrawLinesEx','value':function(_0x5a7518,_0x168ef4,_0x387f93,_0x2a560f){if(null==this['ctx'])return _0x520965;if(null==_0x5a7518||_0x168ef4<0x1||_0x387f93<0x2)return _0x31ddcf;if(0x0==this['nLineShaderProgram']){var _0x2c6b24=this['CompileProgram'](_0x48a033,_0x283927);if(_0x2c6b24<=0x0)return _0x4d26c0;this['nLineShaderProgram']=_0x2c6b24;}if(0x1==_0x2a560f)return this['DrawFillBlock'](_0x5a7518,_0x168ef4,_0x387f93);for(var _0x3b9fda=0x0,_0x20df99=0x0;_0x20df99<_0x168ef4;++_0x20df99){if(null==_0x5a7518[_0x20df99]['pstPoints']||_0x5a7518[_0x20df99]['nPointNum']<=0x1||_0x5a7518[_0x20df99]['nPointNum']>=0x400||_0x5a7518[_0x20df99]['nLineWidth']<=0x0||null==_0x5a7518[_0x20df99]['pstColor'])return _0x31ddcf;_0x3b9fda+=_0x5a7518[_0x20df99]['nPointNum'];}if(_0x3b9fda!=_0x387f93)return _0x31ddcf;if((_0x3b9fda+=_0x168ef4)>this['nMaxPointNum']&&(this['nMaxPointNum']=_0x3b9fda,this['pLinePosVertices']=null,this['pLineClrVertices']=null),null==this['pLinePosVertices']&&(this['pLinePosVertices']=new Float32Array(0x6*this['nMaxPointNum']*0x3),null==this['pLinePosVertices']))return _0x3d12cf;if(this['pLinePosVertices']['fill'](0x0),null==this['pLineClrVertices']&&(this['pLineClrVertices']=new Float32Array(0x6*this['nMaxPointNum']*0x4),null==this['pLineClrVertices']))return _0x3d12cf;if(this['pLineClrVertices']['fill'](0x0),0x0==this['glLinePosBuffer']&&(this['glLinePosBuffer']=this['ctx']['createBuffer'](),0x0==this['glLinePosBuffer']))return _0x4d26c0;if(0x0==this['glLineClrBuffer']&&(this['glLineClrBuffer']=this['ctx']['createBuffer'](),0x0==this['glLineClrBuffer']))return _0x4d26c0;var _0x2729ac=this['ComputeLinePoint'](_0x5a7518,_0x168ef4);if(_0xa87ede!=_0x2729ac)return _0x2729ac;this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFunc'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA']);var _0x539ebb=this['nLineShaderProgram'];this['ctx']['useProgram'](_0x539ebb);var _0x45c49a=this['ctx']['getUniformLocation'](this['nLineShaderProgram'],'bCapture');if(_0x45c49a<=0x0)return _0x4d26c0;0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x45c49a,0x1):this['ctx']['uniform1i'](_0x45c49a,0x0);var _0x3da9fb=this['glLinePosBuffer'],_0x53c565=this['glLineClrBuffer'],_0x5a1957=this['nLineTriangleNum'],_0x3ce2a8=this['pLinePosVertices'],_0x20734b=this['pLineClrVertices'];this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0x3da9fb),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x3ce2a8,this['ctx']['STATIC_DRAW']);var _0x5a578b=this['ctx']['getAttribLocation'](_0x539ebb,'position');this['ctx']['enableVertexAttribArray'](_0x5a578b),this['ctx']['vertexAttribPointer'](_0x5a578b,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0x53c565),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x20734b,this['ctx']['STATIC_DRAW']);var _0x3afb19=this['ctx']['getAttribLocation'](_0x539ebb,'color');return this['ctx']['enableVertexAttribArray'](_0x3afb19),this['ctx']['vertexAttribPointer'](_0x3afb19,0x4,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),0x1==this['bIsCapturing']?this['ctx']['viewport'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight']):this['ctx']['viewport'](0x0,0x0,this['canvas']['width'],this['canvas']['height']),this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,0x3*_0x5a1957),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),_0xa87ede;}},{'key':'SR_DrawFont','value':function(_0x6eab1a,_0x4143dd,_0x2bbea7,_0x2279ac,_0x152461,_0x2b681e,_0xbd83ec,_0x33f12d,_0x5f236b,_0xf708b7,_0x233741){if(null==_0x6eab1a||null==_0x4143dd||null==_0x2bbea7||_0x2279ac<=0x1||_0x152461<=0x1)return _0x31ddcf;if(0x1==_0x2b681e&&null==_0xbd83ec)return _0x31ddcf;var _0x3b9af0=[],_0x35b6ae={};return _0x35b6ae['bBackground']=_0x2b681e,_0x35b6ae['nFontWidth']=_0x2279ac,_0x35b6ae['nFontHeight']=_0x152461,_0x35b6ae['pstBGColor']=_0xbd83ec,_0x35b6ae['pstFontColor']=_0x2bbea7,_0x35b6ae['pString']=_0x6eab1a,_0x35b6ae['pstStartPos']=_0x4143dd,_0x35b6ae['fRotateAngle']=_0x33f12d,_0x35b6ae['pFontFamily']=_0x5f236b,_0x35b6ae['textAlign']=_0xf708b7,_0x35b6ae['textBaseline']=_0x233741,_0x3b9af0['push'](_0x35b6ae),this['SR_DrawFontEx'](_0x3b9af0,0x1);}},{'key':'SR_DrawFontEx','value':function(_0x1ac011,_0x304601){if(null==this['ctx'])return _0x520965;if(0x0>_0x304601||null==_0x1ac011)return _0x31ddcf;var _0x1a5d2f,_0x3f4f85,_0x5cc926=0x0,_0x1efaee=0x0;if(0x1==this['bIsCapturing']){if(0x0==this['nCaptureWidth']||0x0==this['nCaptureHeight'])return _0x520965;_0x5cc926=Math['round']((this['fDstUseRight']-this['fDstUseLeft'])*this['nCaptureWidth']),_0x1efaee=Math['round']((this['fDstUseBottom']-this['fDstUseTop'])*this['nCaptureHeight']);}else _0x5cc926=Math['round']((this['fDstUseRight']-this['fDstUseLeft'])*this['canvas']['width']),_0x1efaee=Math['round']((this['fDstUseBottom']-this['fDstUseTop'])*this['canvas']['height']);if(_0x5cc926=_0x5cc926+0x4-_0x5cc926%0x4,_0x1efaee=_0x1efaee+0x4-_0x1efaee%0x4,this['nDrawFontWidth']==_0x5cc926&&this['nDrawFontHeight']==_0x1efaee||(this['pFontColorBuffer']=null,this['nFontColorTexture']=0x0,this['nDrawFontWidth']=_0x5cc926,this['nDrawFontHeight']=_0x1efaee,null!=this['textCanvas']&&(this['textCanvas']['remove'](),this['textCanvas']=null,this['textCanvasCtx']=null)),0x0==this['nFontColorTexture']){if(this['nFontColorTexture']=this['ctx']['createTexture'](),0x0==this['nFontColorTexture'])return _0x4d26c0;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nFontColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}if(null==this['textCanvas']){if(this['textCanvas']=document['createElement']('canvas'),null==this['textCanvas'])return _0x13126c;if(this['textCanvasCtx']=this['textCanvas']['getContext']('2d'),null==this['textCanvasCtx'])return _0x13126c;this['textCanvasCtx']['canvas']['width']=this['nDrawFontWidth'],this['textCanvasCtx']['canvas']['height']=this['nDrawFontHeight'];}this['textCanvasCtx']['clearRect'](0x0,0x0,this['nDrawFontWidth'],this['nDrawFontHeight']);for(var _0x29913c=0x0;_0x29913c<_0x304601;++_0x29913c){var _0x597442=_0x1ac011[_0x29913c]['nFontWidth'],_0x51713c=_0x1ac011[_0x29913c]['nFontHeight'];0x1==this['bIsCapturing']&&(_0x597442=Math['round'](0.7*this['nCaptureWidth']/this['canvas']['width']*_0x597442),_0x51713c=Math['round'](0.7*this['nCaptureHeight']/this['canvas']['height']*_0x51713c));var _0x20deee=_0x597442<_0x51713c?_0x597442:_0x51713c;this['textCanvasCtx']['font']=_0x20deee['toString']()+'px\\x20'+_0x1ac011[_0x29913c]['pFontFamily'],null==_0x1ac011[_0x29913c]['textAlign']||null==_0x1ac011[_0x29913c]['textAlign']?this['textCanvasCtx']['textAlign']='left':this['textCanvasCtx']['textAlign']=_0x1ac011[_0x29913c]['textAlign'],null==_0x1ac011[_0x29913c]['textBaseline']||null==_0x1ac011[_0x29913c]['textBaseline']?this['textCanvasCtx']['textBaseline']='top':this['textCanvasCtx']['textBaseline']=_0x1ac011[_0x29913c]['textBaseline'];var _0x5823b0=parseInt(0xff*_0x1ac011[_0x29913c]['pstFontColor']['fR']),_0x6ef32b=parseInt(0xff*_0x1ac011[_0x29913c]['pstFontColor']['fG']),_0x398c18=parseInt(0xff*_0x1ac011[_0x29913c]['pstFontColor']['fB']),_0x2437c7=_0x5823b0<0x10?'0'+_0x5823b0['toString'](0x10):_0x5823b0['toString'](0x10),_0x5becf5=_0x6ef32b<0x10?'0'+_0x6ef32b['toString'](0x10):_0x6ef32b['toString'](0x10),_0x1ea421=_0x398c18<0x10?'0'+_0x398c18['toString'](0x10):_0x398c18['toString'](0x10);this['textCanvasCtx']['fillStyle']='#'+_0x2437c7+_0x5becf5+_0x1ea421,this['textCanvasCtx']['globalAlpha']=_0x1ac011[_0x29913c]['pstFontColor']['fA'];var _0x4eff32=_0x1ac011[_0x29913c]['pstStartPos']['fX']*this['nDrawFontWidth'],_0x11c46b=_0x1ac011[_0x29913c]['pstStartPos']['fY']*this['nDrawFontHeight'];this['textCanvasCtx']['save'](),this['textCanvasCtx']['translate'](_0x4eff32,_0x11c46b),this['textCanvasCtx']['rotate'](_0x1ac011[_0x29913c]['fRotateAngle']*Math['PI']/0xb4),this['textCanvasCtx']['fillText'](_0x1ac011[_0x29913c]['pString'],0x0,0x0),this['textCanvasCtx']['restore']();}if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nFontColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],this['textCanvasCtx']['canvas']),0x0==this['nFontShaderProgram']&&(this['nFontShaderProgram']=this['CompileProgram']('\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20position;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20texCoord;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.x\\x20\\x20=\\x20position.x;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20\\x20=\\x20position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20=\\x20-position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.z\\x20\\x20=\\x200.1;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.w\\x20\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a','\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20pp.st);\\x0a\\x20\\x20\\x20\\x20}\\x0a'),this['nFontShaderProgram']<=0x0))return _0x4d26c0;0x1==this['bIsCapturing']?(_0x1a5d2f=this['nCaptureWidth']+0x4-this['nCaptureWidth']%0x4,_0x3f4f85=this['nCaptureHeight']+0x4-this['nCaptureHeight']%0x4):(_0x1a5d2f=this['canvas']['width']+0x4-this['canvas']['width']%0x4,_0x3f4f85=this['canvas']['height']+0x4-this['canvas']['height']%0x4),this['ctx']['viewport'](0x0,0x0,_0x1a5d2f,_0x3f4f85),this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFunc'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA']),this['ctx']['useProgram'](this['nFontShaderProgram']);var _0x2103fe=this['ctx']['getUniformLocation'](this['nFontShaderProgram'],'bCapture');if(_0x2103fe<=0x0)return _0x4d26c0;0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x2103fe,0x1):this['ctx']['uniform1i'](_0x2103fe,0x0),this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nFontColorTexture']);var _0x352925=this['ctx']['getUniformLocation'](this['nFontShaderProgram'],'texture');this['ctx']['uniform1i'](_0x352925,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x2cf17b=this['ctx']['getAttribLocation'](this['nFontShaderProgram'],'position');this['ctx']['enableVertexAttribArray'](_0x2cf17b),this['ctx']['vertexAttribPointer'](_0x2cf17b,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x58c4a5=this['ctx']['getAttribLocation'](this['nFontShaderProgram'],'texCoord');return this['ctx']['enableVertexAttribArray'](_0x58c4a5),this['ctx']['vertexAttribPointer'](_0x58c4a5,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['drawArrays'](this['ctx']['TRIANGLE_FAN'],0x0,0x4),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],null),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),_0xa87ede;}},{'key':'SR_DrawImage','value':function(_0x1c393e,_0x3cb83a,_0x19a57a,_0x2b70fe,_0x384884,_0x562e06){if(null==this['ctx'])return _0x520965;if(null==_0x1c393e||_0x3cb83a<=0x0||_0x19a57a<=0x0||null==_0x2b70fe||_0x562e06<0x0||_0x562e06>0x1)return _0x31ddcf;if(this['nDrawImageWidth']=_0x3cb83a,this['nDrawImageHeight']=_0x19a57a,0x0==this['glImagePosBuffer']&&(this['glImagePosBuffer']=this['ctx']['createBuffer'](),0x0==this['glImagePosBuffer']))return _0x4d26c0;if(0x0==this['glImageClrBuffer']&&(this['glImageClrBuffer']=this['ctx']['createBuffer'](),0x0==this['glImageClrBuffer']))return _0x4d26c0;if(null==this['pImageClrVertices']){if(this['pImageClrVertices']=new Float32Array(0xc),null==this['pImageClrVertices'])return _0x3d12cf;this['pImageClrVertices'][0x0]=0x0,this['pImageClrVertices'][0x1]=0x0,this['pImageClrVertices'][0x2]=0x0,this['pImageClrVertices'][0x3]=0x1,this['pImageClrVertices'][0x4]=0x1,this['pImageClrVertices'][0x5]=0x0,this['pImageClrVertices'][0x6]=0x1,this['pImageClrVertices'][0x7]=0x0,this['pImageClrVertices'][0x8]=0x0,this['pImageClrVertices'][0x9]=0x1,this['pImageClrVertices'][0xa]=0x1,this['pImageClrVertices'][0xb]=0x1;}var _0x24a466={},_0x254ae9={};if(_0x24a466['fLeft']=(_0x2b70fe['fLeft']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x24a466['fRight']=(_0x2b70fe['fRight']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x24a466['fTop']=(_0x2b70fe['fTop']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x24a466['fBottom']=(_0x2b70fe['fBottom']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x254ae9['fLeft']=this['fDstUseLeft']+_0x24a466['fLeft']*(this['fDstUseRight']-this['fDstUseLeft']),_0x254ae9['fRight']=this['fDstUseLeft']+_0x24a466['fRight']*(this['fDstUseRight']-this['fDstUseLeft']),_0x254ae9['fTop']=this['fDstUseTop']+_0x24a466['fTop']*(this['fDstUseBottom']-this['fDstUseTop']),_0x254ae9['fBottom']=this['fDstUseTop']+_0x24a466['fBottom']*(this['fDstUseBottom']-this['fDstUseTop']),null==this['pImagePosVertices']&&(this['pImagePosVertices']=new Float32Array(0xc),null==this['pImagePosVertices']))return _0x3d12cf;switch(this['pImagePosVertices']['fill'](0x0),this['pImagePosVertices'][0x0]=0x2*_0x254ae9['fLeft']-0x1,this['pImagePosVertices'][0x1]=0x1-0x2*_0x254ae9['fTop'],this['pImagePosVertices'][0x2]=0x2*_0x254ae9['fLeft']-0x1,this['pImagePosVertices'][0x3]=0x1-0x2*_0x254ae9['fBottom'],this['pImagePosVertices'][0x4]=0x2*_0x254ae9['fRight']-0x1,this['pImagePosVertices'][0x5]=0x1-0x2*_0x254ae9['fTop'],this['pImagePosVertices'][0x6]=0x2*_0x254ae9['fRight']-0x1,this['pImagePosVertices'][0x7]=0x1-0x2*_0x254ae9['fTop'],this['pImagePosVertices'][0x8]=0x2*_0x254ae9['fLeft']-0x1,this['pImagePosVertices'][0x9]=0x1-0x2*_0x254ae9['fBottom'],this['pImagePosVertices'][0xa]=0x2*_0x254ae9['fRight']-0x1,this['pImagePosVertices'][0xb]=0x1-0x2*_0x254ae9['fBottom'],0x1==this['bIsCapturing']?this['ctx']['viewport'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight']):this['ctx']['viewport'](0x0,0x0,this['canvas']['width'],this['canvas']['height']),this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFunc'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA']),_0x384884){case _0x3b8155:if(null==this['nImageColorTexture']){if(this['nImageColorTexture']=this['ctx']['createTexture'](),0x0==this['nImageColorTexture'])return _0x4d26c0;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['nDrawImageWidth'],this['nDrawImageHeight'],0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x1c393e),0x0==this['nImageShaderProgram']){var _0x39f044=this['CompileProgram'](_0x2a3c39,_0x350ff5);if(_0x39f044<=0x0)return _0x4d26c0;this['nImageShaderProgram']=_0x39f044;}break;case _0x2818bf:if(null==this['nImageColorTexture']){if(this['nImageColorTexture']=this['ctx']['createTexture'](),0x0==this['nImageColorTexture'])return _0x4d26c0;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGB'],this['nDrawImageWidth'],this['nDrawImageHeight'],0x0,this['ctx']['RGB'],this['ctx']['UNSIGNED_SHORT_5_6_5'],_0x1c393e),0x0==this['nImageShaderProgram']){var _0x42c057=this['CompileProgram'](_0x2a3c39,'\\x0a\\x20\\x20\\x20\\x20precision\\x20mediump\\x20float;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x20\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAlpha;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20pp.st);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20*=\\x20fAlpha;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a');if(_0x42c057<=0x0)return _0x4d26c0;this['nImageShaderProgram']=_0x42c057;}break;case _0x58bd8b:for(var _0x22b758=0x0;_0x22b758<0x3;_0x22b758++){if(this['nImageColorTextures'][_0x22b758]=this['ctx']['createTexture'](),0x0==this['nImageColorTextures'][_0x22b758])return _0x4d26c0;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTextures'][_0x22b758]),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTextures'][0x0]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],this['nDrawImageWidth'],this['nDrawImageHeight'],0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x1c393e),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTextures'][0x1]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],this['nDrawImageWidth']/0x2,this['nDrawImageHeight']/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x1c393e+this['nDrawImageWidth']*this['nDrawImageHeight']*0x5/0x4),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTextures'][0x2]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],this['nDrawImageWidth']/0x2,this['nDrawImageHeight']/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x1c393e+this['nDrawImageWidth']*this['nDrawImageHeight']),0x0==this['nImageShaderProgram']){var _0x826ac7=this['CompileProgram'](_0x2a3c39,'\\x0a\\x20\\x20\\x20\\x20precision\\x20mediump\\x20float;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Ytexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Utexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Vtexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAlpha;\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,\\x20g,\\x20b,\\x20y,\\x20u,\\x20v;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y\\x20=\\x20texture2D(Ytexture,\\x20pp.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u\\x20=\\x20texture2D(Utexture,\\x20pp.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v\\x20=\\x20texture2D(Vtexture,\\x20pp.st).r;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y\\x20=\\x201.1643\\x20*\\x20(y\\x20-\\x200.0625);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u\\x20=\\x20u\\x20-\\x200.5;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v\\x20=\\x20v\\x20-\\x200.5;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20y\\x20+\\x201.5958\\x20*\\x20v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20y\\x20-\\x200.39173\\x20*\\x20u\\x20-\\x200.81290\\x20*\\x20v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20y\\x20+\\x202.017\\x20*\\x20u;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r,\\x20g,\\x20b,\\x20fAlpha);\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a');if(_0x826ac7<=0x0)return _0x4d26c0;this['nImageShaderProgram']=_0x826ac7;}break;case _0xa01ff6:if(null==this['nImageColorTexture']){if(this['nImageColorTexture']=this['ctx']['createTexture'](),0x0==this['nImageColorTexture'])return _0x4d26c0;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}this['ctx']['useProgram'](this['videoShaderProgram']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x23716d=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'xy');if(_0x23716d<0x0)return _0x4d26c0;this['ctx']['vertexAttribPointer'](_0x23716d,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x23716d),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x47a4a9=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'uv');if(_0x47a4a9<0x0)return _0x4d26c0;if(this['ctx']['vertexAttribPointer'](_0x47a4a9,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x47a4a9),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['useProgram'](null),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['nDrawImageWidth'],this['nDrawImageHeight'],0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x1c393e),0x0==this['nImageShaderProgram']){var _0x1889b9=this['CompileProgram'](_0x2a3c39,_0x350ff5);if(_0x1889b9<=0x0)return _0x4d26c0;this['nImageShaderProgram']=_0x1889b9;}break;default:return _0x86aef9;}var _0x39944f=this['nImageShaderProgram'];this['ctx']['useProgram'](_0x39944f);var _0x35df32=this['ctx']['getUniformLocation'](this['nImageShaderProgram'],'bCapture');if(_0x35df32<=0x0)return _0x4d26c0;0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x35df32,0x1):this['ctx']['uniform1i'](_0x35df32,0x0),this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']);var _0x370d63=this['ctx']['getUniformLocation'](this['nImageShaderProgram'],'texture');this['ctx']['uniform1i'](_0x370d63,0x0),_0x370d63=this['ctx']['getUniformLocation'](this['nImageShaderProgram'],'fAlpha'),this['ctx']['uniform1f'](_0x370d63,_0x562e06),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glImagePosBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pImagePosVertices'],this['ctx']['STATIC_DRAW']);var _0x3daade=this['ctx']['getAttribLocation'](this['nImageShaderProgram'],'position');this['ctx']['enableVertexAttribArray'](_0x3daade),this['ctx']['vertexAttribPointer'](_0x3daade,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glImageClrBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pImageClrVertices'],this['ctx']['STATIC_DRAW']);var _0x44ee1a=this['ctx']['getAttribLocation'](this['nImageShaderProgram'],'texCoord');return this['ctx']['enableVertexAttribArray'](_0x44ee1a),this['ctx']['vertexAttribPointer'](_0x44ee1a,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,0x6),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),_0xa87ede;}},{'key':'SR_AddSubPort','value':function(_0x1c4dff){var _0x29f273,_0x1303a3,_0x30143d=_0x3cf544;if(null==this['ctx'])return _0x30143d;if(null!=this['pFishParamManager']?_0x30143d=this['pFishParamManager']['GetFECPort'](_0x1c4dff):_0x1c4dff==_0x186ff9['SR_DE_NULL']&&(_0x30143d=0x0),_0x30143d==_0x3cf544)return _0x3cf544;switch(this['nFECPort']=_0x30143d,_0x1c4dff){case _0x186ff9['SR_DE_NULL']:_0x29f273=_0x1f462c,this['enPixelFormat']==_0xa01ff6?_0x1303a3='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20highp\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fWndWidth;\\x0auniform\\x20float\\x20fWndHeight;\\x0auniform\\x20float\\x20fBrightness;\\x0auniform\\x20float\\x20fHue;\\x0auniform\\x20float\\x20fSaturation;\\x0auniform\\x20float\\x20fContrast;\\x0auniform\\x20float\\x20fSharpness;\\x0auniform\\x20int\\x20nPostProc;\\x0avec3\\x20rgb2hsv(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20K\\x20=\\x20vec4(0.0,\\x20-1.0\\x20/\\x203.0,\\x202.0\\x20/\\x203.0,\\x20-1.0);\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20p\\x20=\\x20c.g\\x20<\\x20c.b\\x20?\\x20vec4(c.bg,\\x20K.wz)\\x20:\\x20vec4(c.gb,\\x20K.xy);\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20q\\x20=\\x20c.r\\x20<\\x20p.x\\x20?\\x20vec4(p.xyw,\\x20c.r)\\x20:\\x20vec4(c.r,\\x20p.yzx);\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20q.x\\x20-\\x20min(q.w,\\x20q.y);\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20e\\x20=\\x201.0e-10;\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20vec3(abs(q.z\\x20+\\x20(q.w\\x20-\\x20q.y)\\x20/\\x20(6.0\\x20*\\x20d\\x20+\\x20e)),\\x20d\\x20/\\x20(q.x\\x20+\\x20e),\\x20q.x);\\x20\\x0a}\\x20\\x0avec3\\x20hsv2rgb(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20K\\x20=\\x20vec4(1.0,\\x202.0\\x20/\\x203.0,\\x201.0\\x20/\\x203.0,\\x203.0);\\x20\\x0a\\x20\\x20\\x20\\x20vec3\\x20p\\x20=\\x20abs(fract(c.xxx\\x20+\\x20K.xyz)\\x20*\\x206.0\\x20-\\x20K.www);\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20c.z\\x20*\\x20mix(K.xxx,\\x20clamp(p\\x20-\\x20K.xxx,\\x200.0,\\x201.0),\\x20c.y);\\x20\\x0a}\\x20\\x0avec3\\x20sharpen()\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec3\\x20sharpenColor;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20offWidth\\x20=\\x201.0\\x20/\\x20fWndWidth;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20offHeight\\x20=\\x201.0\\x20/\\x20fWndHeight;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20tempSharpness\\x20=\\x20fSharpness\\x20*\\x20100.0;\\x20\\x0a\\x20\\x20\\x20\\x20vec2\\x20uv\\x20\\x20\\x20\\x20\\x20=\\x20v_uv;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20\\x20=\\x20(1.0\\x20+\\x204.0\\x20*\\x20tempSharpness)\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(-offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(0,\\x20offHeight);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(0,\\x20-offHeight);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20return\\x20sharpenColor;\\x20\\x0a}\\x20\\x0avoid\\x20main(void)\\x20\\x0a{\\x0a\\x20\\x20\\x20\\x20if(1\\x20==\\x20nPostProc)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec3\\x20fragRGB\\x20=\\x20sharpen();\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//sharpen\\x20锐度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec3\\x20fragHSV\\x20=\\x20rgb2hsv(fragRGB);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragHSV.x\\x20=\\x20fragHSV.x\\x20+\\x20fHue;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//hue\\x20色度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragHSV.y\\x20=\\x20fragHSV.y\\x20*\\x20(fSaturation\\x20+\\x201.0);\\x20\\x20\\x20\\x20//saturation\\x20饱和度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20hsv2rgb(fragHSV);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(fBrightness\\x20>\\x200.0)\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//brightness\\x20亮度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20fragRGB\\x20+\\x20(1.0\\x20-\\x20fragRGB)\\x20*\\x20fBrightness;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20fragRGB\\x20+\\x20fragRGB\\x20*\\x20fBrightness;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tempContrast\\x20=\\x20fContrast\\x20>\\x200.0\\x20?\\x20fContrast\\x20*\\x2010.0\\x20:\\x20fContrast;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20((fragRGB\\x20-\\x200.5)\\x20*\\x20max(tempContrast\\x20+\\x201.0,\\x200.0))\\x20+\\x200.5;\\x20\\x20\\x20\\x20\\x20\\x20//contrast\\x20对比度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(fragRGB,\\x201.0);\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20v_uv);\\x0a\\x20\\x20\\x20\\x20}\\x0a}\\x0a':this['enPixelFormat']!=_0x58bd8b&&this['enPixelFormat']!=_0x264b64||(_0x1303a3='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20highp\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20Ytexture;\\x0auniform\\x20sampler2D\\x20Utexture;\\x0auniform\\x20sampler2D\\x20Vtexture;\\x0auniform\\x20float\\x20fWndWidth;\\x0auniform\\x20float\\x20fWndHeight;\\x0auniform\\x20float\\x20fBrightness;\\x0auniform\\x20float\\x20fHue;\\x0auniform\\x20float\\x20fSaturation;\\x0auniform\\x20float\\x20fContrast;\\x0auniform\\x20float\\x20fSharpness;\\x0auniform\\x20int\\x20nPostProc;\\x0avec3\\x20rgb;\\x0avec3\\x20yuv2rgb(float\\x20y,\\x20float\\x20u,\\x20float\\x20v)\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x0a\\x20\\x20\\x20\\x20y\\x20=\\x201.1643\\x20*\\x20(y\\x20-\\x200.0625);\\x20\\x0a\\x20\\x20\\x20\\x20u\\x20=\\x20u\\x20-\\x200.5;\\x20\\x0a\\x20\\x20\\x20\\x20v\\x20=\\x20v\\x20-\\x200.5;\\x20\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20y\\x20+\\x201.5958\\x20*\\x20v;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20y\\x20-\\x200.39173\\x20*\\x20u\\x20-\\x200.81290\\x20*\\x20v;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20y\\x20+\\x202.017\\x20*\\x20u;\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20vec3(r,\\x20g,\\x20b);\\x0a}\\x0avec3\\x20rgb2hsv(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20K\\x20=\\x20vec4(0.0,\\x20-1.0\\x20/\\x203.0,\\x202.0\\x20/\\x203.0,\\x20-1.0);\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20p\\x20=\\x20c.g\\x20<\\x20c.b\\x20?\\x20vec4(c.bg,\\x20K.wz)\\x20:\\x20vec4(c.gb,\\x20K.xy);\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20q\\x20=\\x20c.r\\x20<\\x20p.x\\x20?\\x20vec4(p.xyw,\\x20c.r)\\x20:\\x20vec4(c.r,\\x20p.yzx);\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20q.x\\x20-\\x20min(q.w,\\x20q.y);\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20e\\x20=\\x201.0e-10;\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20vec3(abs(q.z\\x20+\\x20(q.w\\x20-\\x20q.y)\\x20/\\x20(6.0\\x20*\\x20d\\x20+\\x20e)),\\x20d\\x20/\\x20(q.x\\x20+\\x20e),\\x20q.x);\\x20\\x0a}\\x20\\x0a\\x0avec3\\x20hsv2rgb(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20K\\x20=\\x20vec4(1.0,\\x202.0\\x20/\\x203.0,\\x201.0\\x20/\\x203.0,\\x203.0);\\x20\\x0a\\x20\\x20\\x20\\x20vec3\\x20p\\x20=\\x20abs(fract(c.xxx\\x20+\\x20K.xyz)\\x20*\\x206.0\\x20-\\x20K.www);\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20c.z\\x20*\\x20mix(K.xxx,\\x20clamp(p\\x20-\\x20K.xxx,\\x200.0,\\x201.0),\\x20c.y);\\x20\\x0a}\\x20\\x0a\\x0avec3\\x20sharpen(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec3\\x20sharpenColor;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20sharpenColorY;\\x0a\\x20\\x20\\x20\\x20float\\x20sharpenColorU;\\x0a\\x20\\x20\\x20\\x20float\\x20sharpenColorV;\\x0a\\x20\\x20\\x20\\x20float\\x20offWidth\\x20\\x20=\\x201.0\\x20/\\x20fWndWidth;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20offHeight\\x20=\\x201.0\\x20/\\x20fWndHeight;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20tempSharpness\\x20=\\x20fSharpness\\x20*\\x20100.0;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20=\\x20(1.0\\x20+\\x204.0\\x20*\\x20tempSharpness)\\x20*\\x20c;\\x0a\\x0a\\x20\\x20\\x20\\x20vec2\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(-offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x0a\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(0,\\x20offHeight);\\x0a\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(0,\\x20-offHeight);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x0a\\x20\\x20\\x20\\x20return\\x20sharpenColor;\\x20\\x0a}\\x20\\x0avoid\\x20main(void)\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20y,\\x20u,\\x20v;\\x0a\\x20\\x20\\x20\\x20y\\x20=\\x20texture2D(Ytexture,\\x20v_uv).r;\\x0a\\x20\\x20\\x20\\x20u\\x20=\\x20texture2D(Utexture,\\x20v_uv).r;\\x0a\\x20\\x20\\x20\\x20v\\x20=\\x20texture2D(Vtexture,\\x20v_uv).r;\\x0a\\x20\\x20\\x20\\x20rgb\\x20=\\x20yuv2rgb(y,\\x20u,\\x20v);\\x0a\\x20\\x20\\x20\\x20if(1\\x20==\\x20nPostProc)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec3\\x20fragRGB\\x20=\\x20sharpen(rgb);\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//sharpen\\x20锐度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec3\\x20fragHSV\\x20=\\x20rgb2hsv(fragRGB);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragHSV.x\\x20=\\x20fragHSV.x\\x20+\\x20fHue;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//hue\\x20色度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragHSV.y\\x20=\\x20fragHSV.y\\x20*\\x20(fSaturation\\x20+\\x201.0);\\x20\\x20\\x20\\x20//saturation\\x20饱和度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20hsv2rgb(fragHSV);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(fBrightness\\x20>\\x200.0)\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//brightness\\x20亮度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20fragRGB\\x20+\\x20(1.0\\x20-\\x20fragRGB)\\x20*\\x20fBrightness;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20fragRGB\\x20+\\x20fragRGB\\x20*\\x20fBrightness;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tempContrast\\x20=\\x20fContrast\\x20>\\x200.0\\x20?\\x20fContrast\\x20*\\x2010.0\\x20:\\x20fContrast;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20((fragRGB\\x20-\\x200.5)\\x20*\\x20max(tempContrast\\x20+\\x201.0,\\x200.0))\\x20+\\x200.5;\\x20\\x20\\x20\\x20\\x20\\x20//contrast\\x20对比度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(fragRGB,\\x201.0);\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(rgb,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a}\\x0a'),this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_ORIGINAL']:_0x29f273=_0x1f462c,_0x1303a3='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fRX1;\\x0auniform\\x20float\\x20fRX2;\\x0auniform\\x20float\\x20fRY1;\\x0auniform\\x20float\\x20fRY2;\\x0auniform\\x20int\\x20bBlack;\\x20\\x0auniform\\x20int\\x20bCut;\\x0a\\x0avoid\\x20main()\\x0a{\\x20\\x0a\\x09float\\x20r,g,b;\\x0a\\x09vec4\\x20origin;\\x0a\\x0a\\x09float\\x20\\x20w;\\x0a\\x09float\\x20\\x20h;\\x0a\\x09float\\x20\\x20fCenterX;\\x0a\\x09float\\x20\\x20fCenterY;\\x0a\\x09float\\x20\\x20fRadius;\\x0a\\x09w\\x20=\\x201.0;\\x0a\\x09h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x09fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x09fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x09fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x09float\\x20\\x20leftCut\\x20=\\x200.0;\\x0a\\x09float\\x20\\x20rightCut\\x20=\\x201.0;\\x0a\\x09float\\x20\\x20topCut\\x20=\\x200.0;\\x0a\\x09float\\x20\\x20bottomCut\\x20=\\x201.0;\\x0a\\x09if(bCut\\x20==\\x201)\\x0a\\x09{\\x0a\\x09\\x09if(fRX1\\x20>\\x200.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09leftCut\\x20=\\x20fRX1;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRX2\\x20<\\x201.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09rightCut\\x20=\\x20fRX2;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRY1\\x20>\\x200.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09topCut\\x20=\\x20fRY1;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRY2\\x20<\\x201.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09bottomCut\\x20=\\x20fRY2;\\x0a\\x09\\x09}\\x0a\\x09}\\x0a\\x09origin.s\\x20=\\x20v_uv.s\\x20*\\x20(rightCut-leftCut)\\x20+\\x20leftCut;\\x0a\\x09origin.t\\x20=\\x20v_uv.t\\x20*\\x20(bottomCut-topCut)\\x20+\\x20topCut;\\x0a\\x0a\\x09r\\x20=\\x20texture2D(texture,\\x20origin.st).r;\\x20\\x0a\\x09g\\x20=\\x20texture2D(texture,\\x20origin.st).g;\\x20\\x0a\\x09b\\x20=\\x20texture2D(texture,\\x20origin.st).b;\\x20\\x0a\\x0a\\x09if(bBlack\\x20==\\x201)\\x0a\\x09{\\x0a\\x09\\x09float\\x20tmpX,\\x20tmpY;\\x0a\\x09\\x09tmpX\\x20=\\x20origin.s\\x20*\\x20w;\\x20\\x0a\\x09\\x09tmpY\\x20=\\x20origin.t\\x20*\\x20h;\\x20\\x0a\\x09\\x09float\\x20d2\\x20=\\x20(tmpX-fCenterX)*(tmpX-fCenterX)\\x20+\\x20(tmpY-fCenterY)*(tmpY-fCenterY);\\x0a\\x09\\x09if(d2\\x20>\\x20fRadius*fRadius)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09r\\x20=\\x200.0;\\x20\\x0a\\x09\\x09\\x09g\\x20=\\x200.0;\\x20\\x0a\\x09\\x09\\x09b\\x20=\\x200.0;\\x20\\x0a\\x09\\x09}\\x0a\\x09}\\x0a\\x0a\\x09gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:_0x29f273=_0x1f462c,_0x1303a3='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fHAngleCos;\\x0auniform\\x20float\\x20fHAngleSin;\\x0auniform\\x20float\\x20fVAngleCos;\\x0auniform\\x20float\\x20fVAngleSin;\\x0auniform\\x20float\\x20fZoom;\\x0a\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20v_uv.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x200.5\\x20-\\x20v_uv.t;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t\\x20+\\x20z2*z2);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20tmp*origin2.s\\x20/\\x20dnew\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20tmp*origin2.t\\x20/\\x20dnew\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20((origin2.s*fHAngleCos\\x20-\\x20origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20(-(origin2.s*fHAngleSin\\x20+\\x20origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:_0x29f273=_0x1f462c,_0x1303a3='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x20\\x20\\x0auniform\\x20float\\x20fHAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fHAngleSin;\\x20\\x0auniform\\x20float\\x20fVAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fZoom;\\x0a\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<Բ��ʵ������\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<�뾶ʵ�ʳ���\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20v_uv.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x20v_uv.t\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t\\x20+\\x20z2*z2);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20tmp*origin2.s\\x20/\\x20dnew\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20tmp*origin2.t\\x20/\\x20dnew\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20((origin2.s*fHAngleCos\\x20-\\x20origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20((origin2.s*fHAngleSin\\x20+\\x20origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PTZ_WALL']:_0x29f273=_0x1f462c,_0x1303a3='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fHAngleCos;\\x0auniform\\x20float\\x20fHAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fZoom;\\x0a\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin3;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z3;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<Բ��ʵ������\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<�뾶ʵ�ʳ���\\x0a\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20v_uv.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x20v_uv.t\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20origin3.s\\x20=\\x20origin2.s*fHAngleCos\\x20+\\x20z2*fHAngleSin\\x20;\\x0a\\x20\\x20\\x20\\x20origin3.t\\x20=\\x20origin2.y;\\x0a\\x20\\x20\\x20\\x20z3\\x20=\\x20z2*fHAngleCos\\x20-\\x20origin2.x*fHAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin3.s*origin3.s\\x20+\\x20origin3.t*origin3.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin3.s*origin3.s\\x20+\\x20origin3.t*origin3.t\\x20+\\x20z3*z3);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20(tmp*origin3.s\\x20/\\x20dnew\\x20*\\x20fRadius\\x20*\\x202.0\\x20+\\x20fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20(tmp*origin3.t\\x20/\\x20dnew\\x20*\\x20fRadius\\x20*\\x202.0\\x20+\\x20fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:_0x29f273=_0x1f462c,_0x1303a3='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x20v_uv.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20v_uv.t\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r,\\x20g,\\x20b,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:_0x29f273=_0x1f462c,_0x1303a3='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20newpp;\\x20\\x20///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(v_uv.t\\x20\\x20<=\\x200.5)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0\\x20+\\x200.5;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20v_uv.t\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20(v_uv.t\\x20-\\x200.5)\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x20newpp.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20newpp.t\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:_0x29f273=_0x1f462c,_0x1303a3='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x201.0\\x20-\\x20v_uv.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20(1.0\\x20-\\x20v_uv.t)\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']:_0x29f273=_0x1f462c,_0x1303a3='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20newpp;\\x20\\x20///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(v_uv.t\\x20\\x20<=\\x200.5)\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20v_uv.t\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0\\x20+\\x200.5;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20(v_uv.t\\x20-\\x200.5)\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x201.0\\x20-\\x20newpp.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20(1.0\\x20-\\x20newpp.t)\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:_0x29f273=_0x1f462c,_0x1303a3='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20defaultTopCut\\x20=\\x200.1;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20defaultBottomCut\\x20=\\x200.9;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20leftCut\\x20=\\x200.0;\\x20\\x20\\x20\\x20///<当图像中圆不完整时需要切掉无图像部分,即使图像完整,为了效果,也要切掉上下固定的一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20rightCut\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20topCut\\x20=\\x20defaultTopCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20bottomCut\\x20=\\x20defaultBottomCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20leftCut\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20rightCut\\x20=\\x201.0\\x20-\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20defaultTopCut)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20topCut\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20topCut\\x20=\\x20defaultTopCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x201.0\\x20-\\x20defaultBottomCut)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20bottomCut\\x20=\\x201.0\\x20-\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20bottomCut\\x20=\\x20defaultBottomCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x20v_uv.s\\x20*\\x20(rightCut-leftCut)\\x20+\\x20leftCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20v_uv.t\\x20*\\x20(bottomCut-topCut)\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmpx\\x20=\\x20origin.s\\x20*\\x202.0\\x20*\\x20fRadius\\x20+\\x20fCenterX\\x20-\\x20fRadius;\\x20///<纹理坐标转化为原图上的实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmpy\\x20=\\x20origin.t\\x20*\\x202.0\\x20*\\x20fRadius\\x20+\\x20fCenterY\\x20-\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20sqrt(fRadius*fRadius\\x20-\\x20(tmpy-fCenterY)*(tmpy-fCenterY));\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20((tmpx-fCenterX)\\x20*\\x20d\\x20/\\x20fRadius\\x20+\\x20fCenterX)\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20tmpy\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_SEMISPHERE']:case _0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:_0x1c4dff==_0x186ff9['SR_DE_FISH_SEMISPHERE']&&(this['bCullBack']=!0x0),_0x29f273='\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20xy;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec2\\x20uv;\\x0a\\x20\\x20\\x20\\x20varying\\x20highp\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x0a\\x0a\\x20\\x20\\x20\\x20uniform\\x20mat4\\x20matProj;\\x0a\\x20\\x20\\x20\\x20uniform\\x20mat4\\x20matView;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20matProj\\x20*\\x20matView\\x20*\\x20xy;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v_uv\\x20=\\x20uv;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v_uv.y\\x20=\\x201.0\\x20-\\x20uv.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20}\\x0a',_0x1303a3='\\x0a\\x20\\x20\\x20\\x20varying\\x20highp\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20v_uv);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x0;break;default:return _0x86aef9;}var _0x4822c4=this['CompileProgram'](_0x29f273,_0x1303a3);if(_0x4822c4<=0x0)return _0x4d26c0;this['videoShaderProgram']=_0x4822c4;var _0x2e497f=null,_0x2f9f99=null,_0x2e0613=_0xa87ede;if(0x0==this['b3DPort'])_0x2e497f=new Float32Array([-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,0x1,0x0,0x1,-0x1,0x0]),_0x2f9f99=new Float32Array([0x0,0x1,0x0,0x0,0x1,0x0,0x1,0x1]);else{var _0x21dd60={},_0x8748d5=!0x1;if(null==this['pFishParamManager'])return _0x520965;for(var _0x3c7177=0x0;_0x3c7177<_0x379995;++_0x3c7177)if(_0x3c7177!=_0x30143d&&_0xa87ede==this['pFishParamManager']['GetRenderParam'](_0x3c7177,_0x21dd60)){_0x8748d5=!0x0;break;}var _0x15cab7=0x0,_0x19ebf4=0x1,_0x2e5f56=0x0,_0x4e7ce6=0x1;if(0x1==_0x8748d5&&(_0x15cab7=_0x21dd60['fRXLeft'],_0x19ebf4=_0x21dd60['fRXRight'],_0x2e5f56=_0x21dd60['fRYTop'],_0x4e7ce6=_0x21dd60['fRYBottom']),_0x1c4dff==_0x186ff9['SR_DE_FISH_SEMISPHERE'])_0x2e0613=this['_CreateSemiSphere'](_0x15cab7,_0x19ebf4,_0x2e5f56,_0x4e7ce6),_0x2e497f=this['pSemiSpherePos'],_0x2f9f99=this['pSemiSphereTex'];else{if(_0x1c4dff==_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']||_0x1c4dff==_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR'])_0x2e0613=this['_CreateCylinder'](_0x1c4dff,_0x15cab7,_0x19ebf4,_0x2e5f56,_0x4e7ce6,0x2,0x2),_0x2e497f=this['pCylinderPos'],_0x2f9f99=this['pCylinderTex'];else{if(_0x1c4dff!=_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']&&_0x1c4dff!=_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])return _0x86aef9;0x0==_0x8748d5?_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0x1c4dff?(_0x15cab7=0.05,_0x19ebf4=0.95,_0x2e5f56=-0.3,_0x4e7ce6=1.3):_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==_0x1c4dff&&(_0x15cab7=-0.16,_0x19ebf4=1.16,_0x2e5f56=0.005,_0x4e7ce6=0.995):_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0x1c4dff?(_0x21dd60['fRYTop']>0x0||_0x21dd60['fRYBottom']<0x1)&&(_0x15cab7=0.05,_0x19ebf4=0.95,_0x2e5f56=-0.3,_0x4e7ce6=1.3):_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==_0x1c4dff&&(_0x21dd60['fRXLeft']>0x0||_0x21dd60['fRXRight']<0x1)&&(_0x15cab7=-0.16,_0x19ebf4=1.16,_0x2e5f56=0.005,_0x4e7ce6=0.995),_0x2e0613=this['_CreateArcSphere'](_0x1c4dff,_0x15cab7,_0x19ebf4,_0x2e5f56,_0x4e7ce6),_0x2e497f=this['pArcSpherePos'],_0x2f9f99=this['pArcSphereTex'];}}if(_0x2e0613!=_0xa87ede)return _0x2e0613;var _0x20506b={};if((_0x2e0613=this['pFishParamManager']['GetFishParam'](this['nFECPort'],_0x20506b))!=_0xa87ede)return _0x2e0613;if(_0x20506b['nFishParamType']=_0x392c27,_0x20506b['fRXLeft']=_0x15cab7,_0x20506b['fRXRight']=_0x19ebf4,_0x20506b['fRYTop']=_0x2e5f56,_0x20506b['fRYBottom']=_0x4e7ce6,this['pFishParamManager']['SetFishParam'](this['nFECPort'],_0x20506b),_0x2e0613!=_0xa87ede)return _0x2e0613;}if(null==_0x2e497f||null==_0x2f9f99)return _0x86aef9;var _0xc42bb=this['ctx']['createBuffer']();this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0xc42bb),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x2e497f,this['ctx']['STATIC_DRAW']),this['vertexPosBuffer']=_0xc42bb;var _0x116e2e=this['ctx']['createBuffer']();return this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0x116e2e),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x2f9f99,this['ctx']['STATIC_DRAW']),this['texturePosBuffer']=_0x116e2e,this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),0x0==this['b3DPort']&&(_0x2e497f=null,_0x2f9f99=null),_0x2e0613=this['InitCamera'](_0x1c4dff),_0xa87ede!=_0x2e0613?_0x2e0613:(this['enDisplayEffect']=_0x1c4dff,this['nFECPort']);}},{'key':'SR_DelSubPort','value':function(_0x431502){return null==this['ctx']?_0x520965:(null!=this['pFishParamManager']&&this['nFECPort']==_0x431502&&this['pFishParamManager']['FreeFECPort'](this['nFECPort']),this['enDisplayEffect']=_0x186ff9['SR_DE_NULL'],0x0!=this['videoShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['videoShaderProgram']),this['videoShaderProgram']=0x0),0x0!=this['vertexPosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['vertexPosBuffer']),this['vertexPosBuffer']=0x0),0x0!=this['texturePosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['texturePosBuffer']),this['texturePosBuffer']=0x0),this['nMaxPointNum']=0x0,this['pLinePosVertices']=null,this['pLineClrVertices']=null,0x0!=this['glLinePosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glLinePosBuffer']),this['glLinePosBuffer']=0x0),0x0!=this['glLineTexBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glLineTexBuffer']),this['glLineTexBuffer']=0x0),this['nLineTriangleNum']=0x0,0x0!=this['nLineShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['nLineShaderProgram']),this['nLineShaderProgram']=0x0),this['pFillBlockPosVertices']=null,this['pFillBlockClrVertices']=null,this['nMaxFillBlockTriNum']=0x0,0x0!=this['glBlockPosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glBlockPosBuffer']),this['glBlockPosBuffer']=0x0),0x0!=this['glBlockClrBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glBlockClrBuffer']),this['glBlockClrBuffer']=0x0),0x0!=this['nBlockShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['nBlockShaderProgram']),this['nBlockShaderProgram']=0x0),this['nDrawFontWidth']=0x0,this['nDrawFontHeight']=0x0,0x0!=this['nFontColorTexture']&&null!=this['ctx']&&(this['ctx']['deleteTexture'](this['nFontColorTexture']),this['nFontColorTexture']=0x0),this['pFontColorBuffer']=0x0,0x0!=this['nFontShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['nFontShaderProgram']),this['nFontShaderProgram']=0x0),0x0!=this['nCaptureRTTex']&&(this['ctx']['deleteTexture'](this['nCaptureRTTex']),this['nCaptureRTTex']=0x0),0x0!=this['nCaptureFBO']&&(this['ctx']['deleteFramebuffer'](this['nCaptureFBO']),this['nCaptureFBO']=0x0),0x0!=this['nCaptureDepthbuffer']&&(this['ctx']['deleteRenderbuffer'](this['nCaptureDepthbuffer']),this['nCaptureDepthbuffer']=0x0),this['bCaptureResInit']=!0x1,this['pSemiSpherePos']=null,this['pSemiSphereTex']=null,this['nSemiSpherePosNum']=0x0,this['nSemiSpherePosSize']=0x0,this['nSemiSphereTexSize']=0x0,this['pCylinderPos']=null,this['pCylinderTex']=null,this['nCylinderPosNum']=0x0,this['nCylinderPosSize']=0x0,this['nCylinderTexSize']=0x0,this['fCylinderHeight']=0x0,this['fCylinderRadius']=0x0,this['pArcSpherePos']=null,this['pArcSphereTex']=null,this['nArcSpherePosNum']=0x0,this['nArcSpherePosSize']=0x0,this['nArcSphereTexSize']=0x0,this['b3DPort']=!0x1,this['pCamera']=null,this['fRotateX']=0x0,this['fRotateY']=0x0,this['fScale']=0x0,this['pfuncCBIn']=null,this['pfuncCBOut']=null,this['pUserIn']=null,this['pUserOut']=null,this['ctx']['disable'](this['ctx']['CULL_FACE']),this['ctx']['disable'](this['ctx']['DEPTH_TEST']),_0xa87ede);}},{'key':'SR_GetFishParam','value':function(_0x5ba2c1){return null==_0x5ba2c1?_0x31ddcf:null==this['pFishParamManager']?_0x520965:this['pFishParamManager']['GetFishParam'](this['nFECPort'],_0x5ba2c1);}},{'key':'SR_SetFishParam','value':function(_0x231728){return null==_0x231728?_0x31ddcf:null==this['pFishParamManager']?_0x520965:this['pFishParamManager']['SetFishParam'](this['nFECPort'],_0x231728);}},{'key':'SR_SetDisplayRect','value':function(_0x55eb5a,_0x1c555c,_0x1e932c,_0x799fda,_0x1b6d8f){if(null==this['ctx'])return _0x520965;var _0x41f710=_0x55eb5a,_0x5590bb=_0x1c555c,_0x536b65=_0x55eb5a+_0x1e932c,_0x1e96da=_0x1c555c+_0x799fda,_0x5d50c7=null,_0x135ea7=null;switch(_0x1b6d8f){case _0xe9e464:if(this['frameDisplayWidth']>0x0&&this['frameDisplayHeight']>0x0){if(this['fSrcUseLeft']=_0x41f710/this['frameDisplayWidth'],this['fSrcUseLeft']<0x0?this['fSrcUseLeft']=0x0:this['fSrcUseLeft']>0x1&&(this['fSrcUseLeft']=0x1),this['fSrcUseTop']=_0x5590bb/this['frameDisplayHeight'],this['fSrcUseTop']<0x0?this['fSrcUseTop']=0x0:this['fSrcUseTop']>0x1&&(this['fSrcUseTop']=0x1),this['fSrcUseRight']=_0x536b65/this['frameDisplayWidth'],this['fSrcUseRight']<0x0?this['fSrcUseRight']=0x0:this['fSrcUseRight']>0x1&&(this['fSrcUseRight']=0x1),this['fSrcUseBottom']=_0x1e96da/this['frameDisplayHeight'],this['fSrcUseBottom']<0x0?this['fSrcUseBottom']=0x0:this['fSrcUseBottom']>0x1&&(this['fSrcUseBottom']=0x1),this['fSrcUseLeft']>=this['fSrcUseRight']||this['fSrcUseTop']>=this['fSrcUseBottom'])return _0x31ddcf;_0x5d50c7=new Float32Array([this['fSrcUseLeft'],this['fSrcUseBottom'],this['fSrcUseLeft'],this['fSrcUseTop'],this['fSrcUseRight'],this['fSrcUseTop'],this['fSrcUseRight'],this['fSrcUseBottom']]);}else _0x5d50c7=new Float32Array([0x0,0x1,0x0,0x0,0x1,0x0,0x1,0x1]);this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']),this['ctx']['bufferSubData'](this['ctx']['ARRAY_BUFFER'],0x0,_0x5d50c7),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),_0x5d50c7=null;break;case _0x206403:if(this['frameDisplayWidth']>0x0&&this['frameDisplayHeight']>0x0){if(this['fDstUseLeft']=_0x41f710/this['frameDisplayWidth'],this['fDstUseLeft']<0x0?this['fDstUseLeft']=0x0:this['fDstUseLeft']>0x1&&(this['fDstUseLeft']=0x1),this['fDstUseTop']=_0x5590bb/this['frameDisplayHeight'],this['fDstUseTop']<0x0?this['fDstUseTop']=0x0:this['fDstUseTop']>0x1&&(this['fDstUseTop']=0x1),this['fDstUseRight']=_0x536b65/this['frameDisplayWidth'],this['fDstUseRight']<0x0?this['fDstUseRight']=0x0:this['fDstUseRight']>0x1&&(this['fDstUseRight']=0x1),this['fDstUseBottom']=_0x1e96da/this['frameDisplayHeight'],this['fDstUseBottom']<0x0?this['fDstUseBottom']=0x0:this['fDstUseBottom']>0x1&&(this['fDstUseBottom']=0x1),this['fDstUseLeft']>=this['fDstUseRight']||this['fDstUseTop']>=this['fDstUseBottom'])return _0x31ddcf;(_0x135ea7=new Float32Array(0xc))[0x0]=0x2*this['fDstUseLeft']-0x1,_0x135ea7[0x1]=0x1-0x2*this['fDstUseBottom'],_0x135ea7[0x2]=0x0,_0x135ea7[0x3]=0x2*this['fDstUseLeft']-0x1,_0x135ea7[0x4]=0x1-0x2*this['fDstUseTop'],_0x135ea7[0x5]=0x0,_0x135ea7[0x6]=0x2*this['fDstUseRight']-0x1,_0x135ea7[0x7]=0x1-0x2*this['fDstUseTop'],_0x135ea7[0x8]=0x0,_0x135ea7[0x9]=0x2*this['fDstUseRight']-0x1,_0x135ea7[0xa]=0x1-0x2*this['fDstUseBottom'],_0x135ea7[0xb]=0x0,this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']),this['ctx']['bufferSubData'](this['ctx']['ARRAY_BUFFER'],0x0,_0x135ea7),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),_0x135ea7=null;}break;default:return _0x86aef9;}return _0xa87ede;}},{'key':'SR_Destroy','value':function(){if(null==this['ctx'])return _0x520965;this['frameDisplayWidth']=0x0,this['frameDisplayHeight']=0x0,this['pFrameData']=null;for(var _0x45dbcd=0x0;_0x45dbcd<this['nTextureNum'];_0x45dbcd++)0x0!=this['nSurfaceTexture'][_0x45dbcd]&&null!=this['ctx']&&(this['ctx']['deleteTexture'](this['nSurfaceTexture'][_0x45dbcd]),this['nSurfaceTexture'][_0x45dbcd]=0x0);return this['SR_DelSubPort'](this['nFECPort']),this['ctx']['getExtension']('WEBGL_lose_context')['loseContext'](),this['ctx']=null,this['onlySupportedWebGL1']=!0x1,this['bAntialias']=!0x1,this['bRecreateTex']=!0x0,this['pFishParamManager']=null,_0xa87ede;}},{'key':'SR_SetCanvasSize','value':function(_0x270c96,_0x520a5b){return this['canvas']['width']=_0x270c96,this['canvas']['height']=_0x520a5b,_0xa87ede;}},{'key':'SR_GetCanvasSize','value':function(){return console['log']('canvas\\x20width:'+this['canvas']['width']+',height:'+this['canvas']['height']),_0xa87ede;}},{'key':'SR_SetAntialias','value':function(_0x3f93ac){return 0x1==this['onlySupportedWebGL1']?_0x86aef9:(this['bAntialias']!=_0x3f93ac&&(this['bRecreateTex']=!0x0,this['bAntialias']=_0x3f93ac),_0xa87ede);}},{'key':'SR_SetPTZDisplayMode','value':function(_0x56d449){return null==this['pFishParamManager']?_0x520965:this['pFishParamManager']['SetPTZDisplayMode'](_0x56d449);}},{'key':'SR_SetFishParamManager','value':function(_0x52f915){return null!=this['pFishParamManager']?_0x86aef9:(this['pFishParamManager']=_0x52f915,_0xa87ede);}},{'key':'_CreateSemiSphere','value':function(_0x13c3d3,_0x3c0eef,_0xfcb7c8,_0x4b4979){if(null!=this['pSemiSpherePos']||null!=this['pSemiSphereTex'])return _0x520965;this['pSemiSpherePos']=new Float32Array(0xa8c0),this['pSemiSphereTex']=new Float32Array(0x7080);for(var _0x306be6=(_0x3c0eef-_0x13c3d3)/(_0x4b4979-_0xfcb7c8),_0x115894=(_0x3c0eef-_0x13c3d3)/0x2*0x1,_0x18964f=6.2831852/0x3c,_0x399e01=0.0392699075,_0x29408f=0x0,_0xa1b95a=0x0,_0x190a15=0x0,_0x2823ad=0x0;_0x2823ad<0x3c;++_0x2823ad)for(var _0x305025=0x0;_0x305025<0x28;++_0x305025){var _0x55b496=_0x2823ad*_0x18964f;0x0==_0x2823ad&&(_0x29408f=_0x55b496);var _0x163c07=0x3b==_0x2823ad?_0x29408f:(_0x2823ad+0x1)*_0x18964f,_0x38fa2b=-_0x305025*_0x399e01,_0x33daa7=-(_0x305025+0x1)*_0x399e01,_0x461f11=void 0x0,_0x4105f8=void 0x0;this['pSemiSpherePos'][_0xa1b95a]=-0x1*Math['cos'](_0x38fa2b)*Math['cos'](_0x55b496),this['pSemiSpherePos'][_0xa1b95a+0x1]=0x1*Math['sin'](_0x38fa2b),this['pSemiSpherePos'][_0xa1b95a+0x2]=-0x1*Math['cos'](_0x38fa2b)*Math['sin'](_0x55b496),_0x4105f8=0.5-0.5*(0x1+_0x38fa2b/1.5707963)*Math['sin'](_0x55b496),_0x461f11=0.5-0.5*(0x1+_0x38fa2b/1.5707963)*Math['cos'](_0x55b496),this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x461f11*_0x115894+0x1*_0x13c3d3)/0x1,this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x4105f8*_0x115894+_0xfcb7c8*_0x306be6)/_0x306be6,_0xa1b95a+=0x3,this['pSemiSpherePos'][_0xa1b95a]=-0x1*Math['cos'](_0x33daa7)*Math['cos'](_0x55b496),this['pSemiSpherePos'][_0xa1b95a+0x1]=0x1*Math['sin'](_0x33daa7),this['pSemiSpherePos'][_0xa1b95a+0x2]=-0x1*Math['cos'](_0x33daa7)*Math['sin'](_0x55b496),_0x4105f8=0.5-0.5*(0x1+_0x33daa7/1.5707963)*Math['sin'](_0x55b496),_0x461f11=0.5-0.5*(0x1+_0x33daa7/1.5707963)*Math['cos'](_0x55b496),this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x461f11*_0x115894+0x1*_0x13c3d3)/0x1,this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x4105f8*_0x115894+_0xfcb7c8*_0x306be6)/_0x306be6,_0xa1b95a+=0x3,this['pSemiSpherePos'][_0xa1b95a]=-0x1*Math['cos'](_0x38fa2b)*Math['cos'](_0x163c07),this['pSemiSpherePos'][_0xa1b95a+0x1]=0x1*Math['sin'](_0x38fa2b),this['pSemiSpherePos'][_0xa1b95a+0x2]=-0x1*Math['cos'](_0x38fa2b)*Math['sin'](_0x163c07),_0x4105f8=0.5-0.5*(0x1+_0x38fa2b/1.5707963)*Math['sin'](_0x163c07),_0x461f11=0.5-0.5*(0x1+_0x38fa2b/1.5707963)*Math['cos'](_0x163c07),this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x461f11*_0x115894+0x1*_0x13c3d3)/0x1,this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x4105f8*_0x115894+_0xfcb7c8*_0x306be6)/_0x306be6,_0xa1b95a+=0x3,this['pSemiSpherePos'][_0xa1b95a]=-0x1*Math['cos'](_0x38fa2b)*Math['cos'](_0x163c07),this['pSemiSpherePos'][_0xa1b95a+0x1]=0x1*Math['sin'](_0x38fa2b),this['pSemiSpherePos'][_0xa1b95a+0x2]=-0x1*Math['cos'](_0x38fa2b)*Math['sin'](_0x163c07),_0x4105f8=0.5-0.5*(0x1+_0x38fa2b/1.5707963)*Math['sin'](_0x163c07),_0x461f11=0.5-0.5*(0x1+_0x38fa2b/1.5707963)*Math['cos'](_0x163c07),this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x461f11*_0x115894+0x1*_0x13c3d3)/0x1,this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x4105f8*_0x115894+_0xfcb7c8*_0x306be6)/_0x306be6,_0xa1b95a+=0x3,this['pSemiSpherePos'][_0xa1b95a]=-0x1*Math['cos'](_0x33daa7)*Math['cos'](_0x55b496),this['pSemiSpherePos'][_0xa1b95a+0x1]=0x1*Math['sin'](_0x33daa7),this['pSemiSpherePos'][_0xa1b95a+0x2]=-0x1*Math['cos'](_0x33daa7)*Math['sin'](_0x55b496),_0x4105f8=0.5-0.5*(0x1+_0x33daa7/1.5707963)*Math['sin'](_0x55b496),_0x461f11=0.5-0.5*(0x1+_0x33daa7/1.5707963)*Math['cos'](_0x55b496),this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x461f11*_0x115894+0x1*_0x13c3d3)/0x1,this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x4105f8*_0x115894+_0xfcb7c8*_0x306be6)/_0x306be6,_0xa1b95a+=0x3,this['pSemiSpherePos'][_0xa1b95a]=-0x1*Math['cos'](_0x33daa7)*Math['cos'](_0x163c07),this['pSemiSpherePos'][_0xa1b95a+0x1]=0x1*Math['sin'](_0x33daa7),this['pSemiSpherePos'][_0xa1b95a+0x2]=-0x1*Math['cos'](_0x33daa7)*Math['sin'](_0x163c07),_0x4105f8=0.5-0.5*(0x1+_0x33daa7/1.5707963)*Math['sin'](_0x163c07),_0x461f11=0.5-0.5*(0x1+_0x33daa7/1.5707963)*Math['cos'](_0x163c07),this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x461f11*_0x115894+0x1*_0x13c3d3)/0x1,this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x4105f8*_0x115894+_0xfcb7c8*_0x306be6)/_0x306be6,_0xa1b95a+=0x3;}return this['nSemiSpherePosNum']=_0xa1b95a/0x3,this['nSemiSpherePosSize']=0x3,this['nSemiSphereTexSize']=0x2,_0xa87ede;}},{'key':'_CreateCylinder','value':function(_0x44cf2d,_0x21ffe7,_0x381786,_0x4528b6,_0x2f5aa3,_0x739606,_0x3b790c){if(null!=this['pCylinderPos']||null!=this['pCylinderTex'])return _0x520965;if(Math['abs'](_0x739606-0x0)<_0x4a23c6)this['fCylinderHeight']=0x2;else{if(_0x739606<0.5||_0x739606>0x6)return _0x31ddcf;this['fCylinderHeight']=_0x739606;}if(Math['abs'](_0x3b790c-0x0)<_0x4a23c6)this['fCylinderRadius']=_0x44cf2d==_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']||_0x44cf2d==_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']?0x2:0x1;else{if(_0x3b790c<0.5||_0x3b790c>0x4)return _0x31ddcf;this['fCylinderRadius']=_0x3b790c;}if(this['pCylinderPos']=new Float32Array(0xa8c0),this['pCylinderTex']=new Float32Array(0x7080),null==this['pCylinderPos']||null==this['pCylinderTex'])return this['pCylinderPos']=null,this['pCylinderTex']=null,_0x3d12cf;for(var _0xcbf3c9=(_0x381786-_0x21ffe7)/(_0x2f5aa3-_0x4528b6),_0x48eb5f=(_0x381786-_0x21ffe7)/0x2*0x1,_0x5485a5=6.2831852/0x3c,_0x26550d=this['fCylinderHeight']/_0x40743d,_0xc19360=0x0,_0xcec4ef=0x0,_0x48d549=0x0;_0x48d549<0x3c;++_0x48d549)for(var _0x481b39=0x0;_0x481b39<_0x40743d;++_0x481b39){var _0x4f2b3f=_0x48d549*_0x5485a5,_0x788b55=(_0x48d549+0x1)*_0x5485a5,_0x23966a=void 0x0,_0xda562b=void 0x0;this['pCylinderPos'][_0xc19360]=-this['fCylinderRadius']*Math['sin'](_0x4f2b3f),this['pCylinderPos'][_0xc19360+0x1]=this['fCylinderHeight']/0x2-_0x481b39*_0x26550d,this['pCylinderPos'][_0xc19360+0x2]=-this['fCylinderRadius']*Math['cos'](_0x4f2b3f),_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==_0x44cf2d||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x44cf2d?(_0x23966a=0.5+(0.1+0.01*_0x481b39)*Math['sin'](_0x4f2b3f),_0xda562b=0.5+(0.1+0.01*_0x481b39)*Math['cos'](_0x4f2b3f)):(_0x23966a=0.5-(0.5-0.01*_0x481b39)*Math['sin'](_0x4f2b3f),_0xda562b=0.5+(0.5-0.01*_0x481b39)*Math['cos'](_0x4f2b3f)),this['pCylinderTex'][_0xcec4ef++]=(0x2*_0x23966a*_0x48eb5f+0x1*_0x21ffe7)/0x1,this['pCylinderTex'][_0xcec4ef++]=(0x2*_0xda562b*_0x48eb5f+_0x4528b6*_0xcbf3c9)/_0xcbf3c9,_0xc19360+=0x3,this['pCylinderPos'][_0xc19360]=-this['fCylinderRadius']*Math['sin'](_0x4f2b3f),this['pCylinderPos'][_0xc19360+0x1]=this['fCylinderHeight']/0x2-(_0x481b39+0x1)*_0x26550d,this['pCylinderPos'][_0xc19360+0x2]=-this['fCylinderRadius']*Math['cos'](_0x4f2b3f),_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==_0x44cf2d||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x44cf2d?(_0x23966a=0.5+(0.1+0.01*(_0x481b39+0x1))*Math['sin'](_0x4f2b3f),_0xda562b=0.5+(0.1+0.01*(_0x481b39+0x1))*Math['cos'](_0x4f2b3f)):(_0x23966a=0.5-(0.5-0.01*(_0x481b39+0x1))*Math['sin'](_0x4f2b3f),_0xda562b=0.5+(0.5-0.01*(_0x481b39+0x1))*Math['cos'](_0x4f2b3f)),this['pCylinderTex'][_0xcec4ef++]=(0x2*_0x23966a*_0x48eb5f+0x1*_0x21ffe7)/0x1,this['pCylinderTex'][_0xcec4ef++]=(0x2*_0xda562b*_0x48eb5f+_0x4528b6*_0xcbf3c9)/_0xcbf3c9,_0xc19360+=0x3,this['pCylinderPos'][_0xc19360]=-this['fCylinderRadius']*Math['sin'](_0x788b55),this['pCylinderPos'][_0xc19360+0x1]=this['fCylinderHeight']/0x2-_0x481b39*_0x26550d,this['pCylinderPos'][_0xc19360+0x2]=-this['fCylinderRadius']*Math['cos'](_0x788b55),_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==_0x44cf2d||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x44cf2d?(_0x23966a=0.5+(0.1+0.01*_0x481b39)*Math['sin'](_0x788b55),_0xda562b=0.5+(0.1+0.01*_0x481b39)*Math['cos'](_0x788b55)):(_0x23966a=0.5-(0.5-0.01*_0x481b39)*Math['sin'](_0x788b55),_0xda562b=0.5+(0.5-0.01*_0x481b39)*Math['cos'](_0x788b55)),this['pCylinderTex'][_0xcec4ef++]=(0x2*_0x23966a*_0x48eb5f+0x1*_0x21ffe7)/0x1,this['pCylinderTex'][_0xcec4ef++]=(0x2*_0xda562b*_0x48eb5f+_0x4528b6*_0xcbf3c9)/_0xcbf3c9,_0xc19360+=0x3,this['pCylinderPos'][_0xc19360]=-this['fCylinderRadius']*Math['sin'](_0x788b55),this['pCylinderPos'][_0xc19360+0x1]=this['fCylinderHeight']/0x2-_0x481b39*_0x26550d,this['pCylinderPos'][_0xc19360+0x2]=-this['fCylinderRadius']*Math['cos'](_0x788b55),_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==_0x44cf2d||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x44cf2d?(_0x23966a=0.5+(0.1+0.01*_0x481b39)*Math['sin'](_0x788b55),_0xda562b=0.5+(0.1+0.01*_0x481b39)*Math['cos'](_0x788b55)):(_0x23966a=0.5-(0.5-0.01*_0x481b39)*Math['sin'](_0x788b55),_0xda562b=0.5+(0.5-0.01*_0x481b39)*Math['cos'](_0x788b55)),this['pCylinderTex'][_0xcec4ef++]=(0x2*_0x23966a*_0x48eb5f+0x1*_0x21ffe7)/0x1,this['pCylinderTex'][_0xcec4ef++]=(0x2*_0xda562b*_0x48eb5f+_0x4528b6*_0xcbf3c9)/_0xcbf3c9,_0xc19360+=0x3,this['pCylinderPos'][_0xc19360]=-this['fCylinderRadius']*Math['sin'](_0x4f2b3f),this['pCylinderPos'][_0xc19360+0x1]=this['fCylinderHeight']/0x2-(_0x481b39+0x1)*_0x26550d,this['pCylinderPos'][_0xc19360+0x2]=-this['fCylinderRadius']*Math['cos'](_0x4f2b3f),_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==_0x44cf2d||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x44cf2d?(_0x23966a=0.5+(0.1+0.01*(_0x481b39+0x1))*Math['sin'](_0x4f2b3f),_0xda562b=0.5+(0.1+0.01*(_0x481b39+0x1))*Math['cos'](_0x4f2b3f)):(_0x23966a=0.5-(0.5-0.01*(_0x481b39+0x1))*Math['sin'](_0x4f2b3f),_0xda562b=0.5+(0.5-0.01*(_0x481b39+0x1))*Math['cos'](_0x4f2b3f)),this['pCylinderTex'][_0xcec4ef++]=(0x2*_0x23966a*_0x48eb5f+0x1*_0x21ffe7)/0x1,this['pCylinderTex'][_0xcec4ef++]=(0x2*_0xda562b*_0x48eb5f+_0x4528b6*_0xcbf3c9)/_0xcbf3c9,_0xc19360+=0x3,this['pCylinderPos'][_0xc19360]=-this['fCylinderRadius']*Math['sin'](_0x788b55),this['pCylinderPos'][_0xc19360+0x1]=this['fCylinderHeight']/0x2-(_0x481b39+0x1)*_0x26550d,this['pCylinderPos'][_0xc19360+0x2]=-this['fCylinderRadius']*Math['cos'](_0x788b55),_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==_0x44cf2d||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x44cf2d?(_0x23966a=0.5+(0.1+0.01*(_0x481b39+0x1))*Math['sin'](_0x788b55),_0xda562b=0.5+(0.1+0.01*(_0x481b39+0x1))*Math['cos'](_0x788b55)):(_0x23966a=0.5-(0.5-0.01*(_0x481b39+0x1))*Math['sin'](_0x788b55),_0xda562b=0.5+(0.5-0.01*(_0x481b39+0x1))*Math['cos'](_0x788b55)),this['pCylinderTex'][_0xcec4ef++]=(0x2*_0x23966a*_0x48eb5f+0x1*_0x21ffe7)/0x1,this['pCylinderTex'][_0xcec4ef++]=(0x2*_0xda562b*_0x48eb5f+_0x4528b6*_0xcbf3c9)/_0xcbf3c9,_0xc19360+=0x3;}return this['nCylinderPosNum']=_0xc19360/0x3,this['nCylinderPosSize']=0x3,this['nCylinderTexSize']=0x2,_0xa87ede;}},{'key':'_CreateArcSphere','value':function(_0x17b8f4,_0x5a4278,_0x5e025d,_0x4a61b7,_0x3a8181){if(null!=this['pArcSpherePos']||null!=this['pArcSphereTex'])return _0x520965;if(_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']){if(_0x4a61b7>0x0||_0x3a8181<0x1)return SR_ERR_PARAM;}else{if(_0x17b8f4!=_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])return _0x86aef9;if(_0x5a4278>0x0||_0x5e025d<0x1)return SR_ERR_PARAM;}this['fImageWidth']=0x1,this['fImageHeight']=(_0x5e025d-_0x5a4278)/(_0x3a8181-_0x4a61b7),this['fTexCenterX']=(_0x5a4278+_0x5e025d)/0x2*this['fImageWidth'],this['fTexCenterY']=(_0x4a61b7+_0x3a8181)/0x2*this['fImageHeight'],this['fTexRadius']=(_0x5e025d-_0x5a4278)/0x2*this['fImageWidth'];var _0x32c935=0x19;if(null==this['pArcSphereTex']&&(this['pArcSphereTex']=new Float32Array(0x3960),null==this['pArcSphereTex']))return _0x3d12cf;if(null==this['pArcSpherePos']&&(this['pArcSpherePos']=new Float32Array(0x5610),null==this['pArcSpherePos']))return _0x3d12cf;var _0x9aa956=new Float32Array(0x40);if(null==_0x9aa956)return _0x3d12cf;var _0x16db8c=_0xa87ede;if(_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?_0x16db8c=this['_ComputeLatitudeHorizontal'](_0x9aa956,_0x32c935,0x28,0x1):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&(_0x16db8c=this['_ComputeLatitudeVertical'](_0x9aa956,_0x32c935,0x28,0x1)),_0xa87ede!=_0x16db8c)return this['pArcSpherePos']=null,this['pArcSphereTex']=null,_0x16db8c;this['fFirstLatitude']=_0x9aa956[0xc],this['fLastLatitude']=_0x9aa956[0x33];var _0x57502c=0x0,_0x5595c4=0x0,_0x5f4e16=new Float32Array(0x5);if(null==_0x5f4e16)return this['pArcSpherePos']=null,this['pArcSphereTex']=null,_0x3d12cf;for(var _0x2de16a=_0x530a52/0x18,_0x4431c2=-0xc;_0x4431c2<0xc;++_0x4431c2)for(var _0x27ba1b=_0x4431c2<0x0?-_0x4431c2:_0x4431c2,_0x2ade6b=_0x4431c2<0x0?_0x27ba1b:_0x27ba1b+0x1,_0x495f79=_0x4431c2<0x0?0x40-0x2*(_0x27ba1b-0x1)-0x2:0x40-0x2*_0x27ba1b-0x2,_0x123bfe=0x0;_0x123bfe<_0x495f79;++_0x123bfe,++_0x2ade6b)_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b],_0x5f4e16),this['pArcSpherePos'][_0x57502c]=_0x5f4e16[0x0],this['pArcSpherePos'][_0x57502c+0x1]=_0x5f4e16[0x1],this['pArcSpherePos'][_0x57502c+0x2]=_0x5f4e16[0x2],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x3],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x4],_0x57502c+=0x3,_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b],_0x5f4e16),this['pArcSpherePos'][_0x57502c]=_0x5f4e16[0x0],this['pArcSpherePos'][_0x57502c+0x1]=_0x5f4e16[0x1],this['pArcSpherePos'][_0x57502c+0x2]=_0x5f4e16[0x2],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x3],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x4],_0x57502c+=0x3,_0x4431c2>=0x0&&0x0==_0x123bfe?_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b-0x1],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b-0x1],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b-0x1],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b-0x1],_0x5f4e16),this['pArcSpherePos'][_0x57502c]=_0x5f4e16[0x0],this['pArcSpherePos'][_0x57502c+0x1]=_0x5f4e16[0x1],this['pArcSpherePos'][_0x57502c+0x2]=_0x5f4e16[0x2],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x3],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x4],_0x57502c+=0x3,_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b],_0x5f4e16),this['pArcSpherePos'][_0x57502c]=_0x5f4e16[0x0],this['pArcSpherePos'][_0x57502c+0x1]=_0x5f4e16[0x1],this['pArcSpherePos'][_0x57502c+0x2]=_0x5f4e16[0x2],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x3],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x4],_0x57502c+=0x3,_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b],_0x5f4e16),this['pArcSpherePos'][_0x57502c]=_0x5f4e16[0x0],this['pArcSpherePos'][_0x57502c+0x1]=_0x5f4e16[0x1],this['pArcSpherePos'][_0x57502c+0x2]=_0x5f4e16[0x2],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x3],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x4],_0x57502c+=0x3,_0x4431c2<0x0&&_0x123bfe==_0x495f79-0x1?_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b+0x1],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b+0x1],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b+0x1],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b+0x1],_0x5f4e16),this['pArcSpherePos'][_0x57502c]=_0x5f4e16[0x0],this['pArcSpherePos'][_0x57502c+0x1]=_0x5f4e16[0x1],this['pArcSpherePos'][_0x57502c+0x2]=_0x5f4e16[0x2],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x3],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x4],_0x57502c+=0x3;return this['nArcSpherePosNum']=_0x57502c/0x3,this['nArcSpherePosSize']=0x3,this['nArcSphereTexSize']=0x2,_0x9aa956=null,_0x5f4e16=null,_0xa87ede;}},{'key':'_ComputeIntersectionOfPlaneAndLongtitude','value':function(_0x45fd53,_0x47d03e,_0x217c54){if(null==_0x45fd53)return _0x31ddcf;var _0x2976b1,_0x4374a3=_0x45fd53[0x1]*_0x217c54,_0x1eff9b=_0x45fd53[0x2]*_0x217c54*Math['sin'](_0x47d03e),_0x68ac01=-_0x45fd53[0x3],_0x257e8f=0x0,_0x4a835b=0x0;if(_0x45fd53[0x1]>0x0){var _0x375aae=_0x4374a3*_0x4374a3*_0x68ac01*_0x68ac01-(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b)*(_0x68ac01*_0x68ac01-_0x1eff9b*_0x1eff9b);_0x257e8f=(-_0x4374a3*_0x68ac01-Math['sqrt'](_0x375aae))/(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b),_0x375aae=_0x1eff9b*_0x1eff9b*_0x68ac01*_0x68ac01-(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b)*(_0x68ac01*_0x68ac01-_0x4374a3*_0x4374a3),_0x4a835b=(-_0x1eff9b*_0x68ac01+Math['sqrt'](_0x375aae))/(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b);}if(_0x45fd53[0x1]<0x0){var _0x4908e2=_0x4374a3*_0x4374a3*_0x68ac01*_0x68ac01-(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b)*(_0x68ac01*_0x68ac01-_0x1eff9b*_0x1eff9b);_0x257e8f=(-_0x4374a3*_0x68ac01+Math['sqrt'](_0x4908e2))/(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b),_0x4908e2=_0x1eff9b*_0x1eff9b*_0x68ac01*_0x68ac01-(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b)*(_0x68ac01*_0x68ac01-_0x4374a3*_0x4374a3),_0x4a835b=(-_0x1eff9b*_0x68ac01+Math['sqrt'](_0x4908e2))/(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b);}return _0x217c54*Math['cos'](_0x47d03e)*_0x4a835b,_0x2976b1=-_0x217c54*_0x257e8f,-_0x217c54*Math['sin'](_0x47d03e)*_0x4a835b,Math['asin'](_0x2976b1/_0x217c54);}},{'key':'_ComputeLatitudeHorizontal','value':function(_0x1d9035,_0x4201d9,_0x55cdcb,_0x17ff34){if(null==_0x1d9035)return _0x31ddcf;var _0x28b004=0x0,_0x96e209=(this['fTexCenterY'],_0x530a52/(_0x4201d9-0x1)),_0x563232=_0x530a52*this['fTexCenterY']/(0x2*this['fTexRadius']),_0x295ce4=Math['asin'](this['fTexCenterY']/this['fTexRadius']),_0x1c880c=Math['atan'](Math['cos'](_0x563232)/(Math['sin'](_0x563232)-Math['sin'](_0x295ce4))),_0x456365=new Float32Array(0x4);_0x456365[0x0]=0x0,_0x456365[0x1]=Math['sin'](_0x1c880c),_0x456365[0x2]=Math['cos'](_0x1c880c),_0x456365[0x3]=-_0x17ff34*Math['sin'](_0x1c880c)*Math['sin'](_0x295ce4),_0x1d9035[_0x28b004++]=_0x563232;for(var _0x27acbc=0x1;_0x27acbc<=(_0x4201d9-0x3)/0x2;++_0x27acbc){var _0x3d819d=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0x456365,1.5707963-_0x96e209*_0x27acbc,_0x17ff34);_0x1d9035[_0x28b004++]=_0x3d819d;}for(var _0x416567=-Math['asin']((this['fImageHeight']-this['fTexCenterY'])/this['fTexRadius']),_0xfbeb74=_0x295ce4,_0x757933=(_0xfbeb74-_0x416567)/(_0x55cdcb-0x1),_0x2194fe=0x0;_0x2194fe<_0x55cdcb;++_0x2194fe)_0x1d9035[_0x28b004++]=_0xfbeb74-_0x2194fe*_0x757933;var _0x9de884=_0x416567,_0x950ea=_0x530a52*(this['fTexCenterY']-this['fImageHeight'])/(0x2*this['fTexRadius']);_0x1c880c=Math['atan'](Math['cos'](_0x950ea)/(Math['sin'](_0x9de884)-Math['sin'](_0x950ea)));var _0x5db530=new Float32Array(0x4);_0x5db530[0x0]=0x0,_0x5db530[0x1]=-Math['sin'](_0x1c880c),_0x5db530[0x2]=Math['cos'](_0x1c880c),_0x5db530[0x3]=_0x17ff34*Math['sin'](_0x1c880c)*Math['sin'](_0x9de884);for(var _0x4faffc=0x1;_0x4faffc<=(_0x4201d9-0x3)/0x2;++_0x4faffc){var _0x4d8954=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0x5db530,_0x96e209*_0x4faffc,_0x17ff34);_0x1d9035[_0x28b004++]=_0x4d8954;}return _0x1d9035[_0x28b004++]=_0x950ea,_0x456365=null,_0x5db530=null,_0xa87ede;}},{'key':'_ComputeVertexAndTexturePosHorizontal','value':function(_0x237ede,_0x4d0778,_0x13a528,_0x4db42c){if(null==_0x4db42c)return _0x31ddcf;_0x4db42c[0x2]=-_0x237ede*Math['cos'](_0x13a528)*Math['sin'](_0x4d0778),_0x4db42c[0x0]=_0x237ede*Math['cos'](_0x13a528)*Math['cos'](_0x4d0778),_0x4db42c[0x1]=_0x237ede*Math['sin'](_0x13a528);var _0x202bd0,_0x2a92e7=-Math['asin'](-_0x4db42c[0x2]/_0x237ede)/_0x530a52;_0x202bd0=_0x13a528>=0x0?Math['acos'](_0x4db42c[0x0]/Math['sqrt'](_0x4db42c[0x0]*_0x4db42c[0x0]+_0x4db42c[0x1]*_0x4db42c[0x1])):6.2831852-Math['acos'](_0x4db42c[0x0]/Math['sqrt'](_0x4db42c[0x0]*_0x4db42c[0x0]+_0x4db42c[0x1]*_0x4db42c[0x1]));var _0x41db05=this['fTexCenterX']-this['fTexRadius'],_0x53c029=this['fTexRadius']-this['fTexCenterY'];return _0x4db42c[0x3]=(Math['cos'](_0x202bd0)*this['fTexRadius']*(0x1+0x2*_0x2a92e7)+this['fTexRadius']+_0x41db05)/this['fImageWidth'],_0x4db42c[0x4]=(Math['sin'](_0x202bd0)*this['fTexRadius']*(-0x1-0x2*_0x2a92e7)+this['fTexRadius']-_0x53c029)/this['fImageHeight'],_0xa87ede;}},{'key':'_ComputeLatitudeVertical','value':function(_0x34484c,_0xb0c36,_0x2a9bf2,_0x46e820){if(null==_0x34484c)return SR_ERR_PARAM;var _0x59bfbe=0x0,_0x328331=_0x530a52/(_0xb0c36-0x1),_0x44937f=_0x530a52*this['fTexCenterX']/(0x2*this['fTexRadius']),_0x5ed7ac=Math['asin'](this['fTexCenterX']/this['fTexRadius']),_0x5524c3=Math['atan'](Math['cos'](_0x44937f)/(Math['sin'](_0x44937f)-Math['sin'](_0x5ed7ac))),_0x1969e8=new Float32Array(0x4);_0x1969e8[0x0]=0x0,_0x1969e8[0x1]=Math['sin'](_0x5524c3),_0x1969e8[0x2]=Math['cos'](_0x5524c3),_0x1969e8[0x3]=-_0x46e820*Math['sin'](_0x5524c3)*Math['sin'](_0x5ed7ac),_0x34484c[_0x59bfbe++]=_0x44937f;for(var _0x20ee3e=0x1;_0x20ee3e<=(_0xb0c36-0x3)/0x2;++_0x20ee3e){var _0x2386b2=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0x1969e8,1.5707963-_0x328331*_0x20ee3e,_0x46e820);_0x34484c[_0x59bfbe++]=_0x2386b2;}for(var _0x2c3055=-Math['asin']((this['fImageWidth']-this['fTexCenterX'])/this['fTexRadius']),_0x40c0b8=_0x5ed7ac,_0x39678a=(_0x40c0b8-_0x2c3055)/(_0x2a9bf2-0x1),_0x44e4ac=0x0;_0x44e4ac<_0x2a9bf2;++_0x44e4ac)_0x34484c[_0x59bfbe++]=_0x40c0b8-_0x44e4ac*_0x39678a;var _0x49fb50=_0x2c3055,_0x654a8=_0x530a52*(this['fTexCenterX']-this['fImageWidth'])/(0x2*this['fTexRadius']);_0x5524c3=Math['atan'](Math['cos'](_0x654a8)/(Math['sin'](_0x49fb50)-Math['sin'](_0x654a8)));var _0xae5f17=new Float32Array(0x4);_0xae5f17[0x0]=0x0,_0xae5f17[0x1]=-Math['sin'](_0x5524c3),_0xae5f17[0x2]=Math['cos'](_0x5524c3),_0xae5f17[0x3]=_0x46e820*Math['sin'](_0x5524c3)*Math['sin'](_0x49fb50);for(var _0x2349b8=0x1;_0x2349b8<=(_0xb0c36-0x3)/0x2;++_0x2349b8){var _0x3b0f29=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0xae5f17,_0x328331*_0x2349b8,_0x46e820);_0x34484c[_0x59bfbe++]=_0x3b0f29;}return _0x34484c[_0x59bfbe++]=_0x654a8,_0x1969e8=null,_0xae5f17=null,_0xa87ede;}},{'key':'_ComputeVertexAndTexturePosVertical','value':function(_0x534f39,_0x159869,_0xc2a7c8,_0x17e0da){if(null==_0x17e0da)return SR_ERR_PARAM;_0x17e0da[0x2]=-_0x534f39*Math['cos'](_0xc2a7c8)*Math['sin'](_0x159869),_0x17e0da[0x1]=_0x534f39*Math['cos'](_0xc2a7c8)*Math['cos'](_0x159869),_0x17e0da[0x0]=-_0x534f39*Math['sin'](_0xc2a7c8);var _0xa5e24d,_0x10e2f0=-Math['asin'](-_0x17e0da[0x2]/_0x534f39)/_0x530a52;_0xa5e24d=_0x159869<=1.5707963?Math['acos'](_0x17e0da[0x0]/Math['sqrt'](_0x17e0da[0x0]*_0x17e0da[0x0]+_0x17e0da[0x1]*_0x17e0da[0x1])):6.2831852-Math['acos'](_0x17e0da[0x0]/Math['sqrt'](_0x17e0da[0x0]*_0x17e0da[0x0]+_0x17e0da[0x1]*_0x17e0da[0x1]));var _0x4f865f=this['fTexCenterX']-this['fTexRadius'],_0x10dbcb=this['fTexRadius']-this['fTexCenterY'];return _0x17e0da[0x3]=(Math['cos'](_0xa5e24d)*this['fTexRadius']*(0x1+0x2*_0x10e2f0)+this['fTexRadius']+_0x4f865f)/this['fImageWidth'],_0x17e0da[0x4]=(Math['sin'](_0xa5e24d)*this['fTexRadius']*(-0x1-0x2*_0x10e2f0)+this['fTexRadius']-_0x10dbcb)/this['fImageHeight'],_0xa87ede;}},{'key':'InitCamera','value':function(_0xcc10d5){if(null!=this['pCamera'])return SR_ERR_CALL_ORDER;switch(_0xcc10d5){case _0x186ff9['SR_DE_NULL']:case _0x186ff9['SR_DE_FISH_ORIGINAL']:case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:case _0x186ff9['SR_DE_FISH_PTZ_WALL']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:return _0xa87ede;case _0x186ff9['SR_DE_FISH_SEMISPHERE']:if(this['pCamera']=new _0x3b657c(),null==this['pCamera'])return _0x3d12cf;this['pCamera']['SetFov'](_0x13b181),this['pCamera']['SetNear'](_0x49aaae),this['pCamera']['SetFar'](_0x26dab3),this['fRotateX']=1.57,this['pCamera']['SetPitch'](3.14-this['fRotateX']),this['fScale']=0x3,this['pCamera']['SetScale'](this['fScale']);break;case _0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:if(this['pCamera']=new _0x3b657c(),null==this['pCamera'])return _0x3d12cf;this['pCamera']['SetFov'](_0x13b181),this['pCamera']['SetNear'](_0x49aaae),this['pCamera']['SetFar'](_0x26dab3),this['fRotateX']=0.785,this['pCamera']['SetPitch'](-this['fRotateX']),this['fScale']=0x6,this['pCamera']['SetScale'](this['fScale']);break;case _0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:if(this['pCamera']=new _0x3b657c(),null==this['pCamera'])return _0x3d12cf;this['pCamera']['SetOrtho'](!0x0),this['pCamera']['SetNear'](_0x49aaae),this['pCamera']['SetFar'](_0x26dab3),this['fScale']=0x3,this['pCamera']['SetScale'](this['fScale']);break;case _0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:if(this['pCamera']=new _0x3b657c(),null==this['pCamera'])return _0x3d12cf;this['pCamera']['SetFov'](_0x13b181),this['pCamera']['SetNear'](_0x49aaae),this['pCamera']['SetFar'](_0x26dab3),this['fScale']=0x2,this['pCamera']['SetScale'](this['fScale']),_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0xcc10d5?(this['fRotateLimitX']=_0x44d661,this['fRotateLimitY']=_0x5affea):(this['fRotateLimitX']=_0x438d57,this['fRotateLimitY']=_0x2506c4);break;default:return _0x86aef9;}return _0xa87ede;}},{'key':'SR_SetViewParam','value':function(_0x46d073,_0x6189a7){if(!this['b3DPort'])return _0x86aef9;switch(_0x46d073){case _0x394973:if((this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])&&(_0x6189a7>this['fRotateLimitX']||_0x6189a7<-this['fRotateLimitX']))return _0x31ddcf;this['fRotateX']=_0x6189a7;break;case _0x42f4b3:if((this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])&&(_0x6189a7>this['fRotateLimitY']||_0x6189a7<-this['fRotateLimitY']))return _0x31ddcf;this['fRotateY']=_0x6189a7;break;case _0x339c63:if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_SEMISPHERE']){if(_0x6189a7<-0.8||_0x6189a7>0x384)return _0x31ddcf;}else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']){if(_0x6189a7<0x0||_0x6189a7>0x384)return _0x31ddcf;}else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){if(_0x6189a7<-0.3||_0x6189a7>0x5)return _0x31ddcf;this['_ComputeRotateLimits']();}}}this['fScale']=_0x6189a7;break;default:return _0x86aef9;}return _0xa87ede;}},{'key':'SR_GetViewParam','value':function(_0x52c4fa,_0x205d9b){if(!this['b3DPort'])return _0x520965;var _0x50830b=0x0;switch(_0x52c4fa){case _0x394973:_0x50830b=this['fRotateX'];break;case _0x42f4b3:_0x50830b=this['fRotateY'];break;case _0x339c63:_0x50830b=this['fScale'];break;default:return _0x86aef9;}return _0x205d9b['fValue']=_0x50830b,_0xa87ede;}},{'key':'SR_SetCallBack','value':function(_0x5da1bd,_0x2bbf0b,_0x3e50e3){switch(_0x3e50e3){case _0x444649:this['pfuncCBIn']=_0x5da1bd,this['pUserIn']=_0x2bbf0b;break;case _0x4f7368:this['pfuncCBOut']=_0x5da1bd,this['pUserOut']=_0x2bbf0b;break;default:return _0x86aef9;}return _0xa87ede;}},{'key':'SR_SetRenderState','value':function(_0x2206d5,_0x3e7889){switch(_0x2206d5){case _0x11cf81:if(this['b3DPort'])return _0x86aef9;break;case _0x57ef5a:if(!this['b3DPort'])return _0x86aef9;Math['abs'](_0x3e7889-0x0)<_0x4a23c6?this['bCullBack']=!0x1:this['bCullBack']=!0x0;break;default:return _0x86aef9;}return _0xa87ede;}},{'key':'SR_SetPTZColor','value':function(_0x22a340,_0x2d7345){return null==this['pFishParamManager']?_0x520965:this['pFishParamManager']['SetPTZColor'](_0x22a340,_0x2d7345);}},{'key':'SR_GetPTZColor','value':function(_0xaeb36f,_0x463679){return null==this['pFishParamManager']?_0x520965:this['pFishParamManager']['GetPTZColor'](_0xaeb36f,_0x463679);}},{'key':'SR_SetPTZPort','value':function(_0x5c99b6){return null==this['pFishParamManager']?_0x520965:this['pFishParamManager']['SetPTZPort'](_0x5c99b6);}},{'key':'SR_GetPTZPort','value':function(_0x1d4d34,_0x29e620,_0x25da3e){return null==this['pFishParamManager']?_0x520965:null==_0x25da3e?_0x31ddcf:this['pFishParamManager']['GetPTZPort'](_0x1d4d34,_0x29e620,_0x25da3e);}},{'key':'SR_GetCaptureSize','value':function(_0x3d6a1f){if(null==_0x3d6a1f)return _0x31ddcf;if(null==this['ctx'])return _0x520965;if(null==_0x3d6a1f['nWidth']||null==_0x3d6a1f['nWidth']||null==_0x3d6a1f['nHeight']||null==_0x3d6a1f['nHeight'])return _0x31ddcf;var _0x3077f0=0x0,_0x2f261a=0x0;if(0x0==_0x3d6a1f['nWidth']&&0x0==_0x3d6a1f['nHeight'])switch(this['enDisplayEffect']){case _0x186ff9['SR_DE_FISH_PTZ_WALL']:case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:_0x3077f0=Math['round'](0x5*this['frameDisplayHeight']/0x8),_0x2f261a=Math['round'](0x3*_0x3077f0/0x4);break;case _0x186ff9['SR_DE_NULL']:_0x3077f0=Math['round']((this['fSrcUseRight']-this['fSrcUseLeft'])*this['frameDisplayWidth']),_0x2f261a=Math['round']((this['fSrcUseBottom']-this['fSrcUseTop'])*this['frameDisplayHeight']);break;case _0x186ff9['SR_DE_FISH_ORIGINAL']:case _0x186ff9['SR_DE_FISH_SEMISPHERE']:case _0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:_0x3077f0=Math['round'](this['frameDisplayWidth']),_0x2f261a=Math['round'](this['frameDisplayHeight']);break;case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:this['frameDisplayHeight']>=0x800?(_0x3077f0=0x1800,_0x2f261a=0x360):this['frameDisplayHeight']>=0x600&&0x800>this['frameDisplayHeight']?(_0x3077f0=0x1000,_0x2f261a=0x240):(_0x3077f0=Math['round'](3.14*this['frameDisplayHeight']/1.6),_0x2f261a=Math['round'](0x9*this['frameDisplayWidth']/0x10),_0x3077f0=Math['round'](0x2*_0x3077f0),_0x2f261a=Math['round'](_0x2f261a/0x2));break;case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:this['frameDisplayHeight']>=0xc00?(_0x3077f0=0x1000,_0x2f261a=0x900):this['frameDisplayHeight']>=0x800&&0xc00>this['frameDisplayHeight']?(_0x3077f0=0xc00,_0x2f261a=0x6c0):this['frameDisplayHeight']>=0x600&&0x800>this['frameDisplayHeight']?(_0x3077f0=0x800,_0x2f261a=0x480):(_0x3077f0=Math['round'](3.14*this['frameDisplayHeight']/1.6),_0x2f261a=Math['round'](0x9*_0x3077f0/0x10));break;case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:_0x3077f0=Math['round'](this['frameDisplayHeight']),_0x2f261a=Math['round'](0x9*_0x3077f0/0x10);break;default:return _0x31ddcf;}else _0x3077f0=Math['round'](_0x3d6a1f['nWidth']),_0x2f261a=Math['round'](_0x3d6a1f['nHeight']);return _0x3077f0<0x10||_0x2f261a<0x10?_0x31ddcf:(this['nCaptureWidth']=0x4*Math['round'](_0x3077f0/0x4),this['nCaptureHeight']=Math['round'](_0x2f261a),_0x3d6a1f['nWidth']=this['nCaptureWidth'],_0x3d6a1f['nHeight']=this['nCaptureHeight'],_0x3d6a1f['nBufferLen']=this['nCaptureWidth']*this['nCaptureHeight']*0x4,_0xa87ede);}},{'key':'SR_CaptureScreen','value':function(_0x182ed1){var _0x2c8855=_0xa87ede;if(_0x2c8855=this['_BeginCapture'](),_0xa87ede!=_0x2c8855)return _0x2c8855;if(0x0==this['videoShaderProgram']||0x0==this['vertexPosBuffer']||0x0==this['texturePosBuffer'])return _0x520965;this['ctx']['useProgram'](this['videoShaderProgram']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x517ee9=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'xy');if(_0x517ee9<0x0)return _0x4d26c0;this['ctx']['vertexAttribPointer'](_0x517ee9,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x517ee9),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x14700d=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'uv');if(_0x14700d<0x0)return _0x4d26c0;this['ctx']['vertexAttribPointer'](_0x14700d,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x14700d),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null);var _0x51a1ec=this['enDisplayEffect'],_0x34fe9c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCapture');if(_0x34fe9c<=0x0)return _0x4d26c0;switch(this['ctx']['uniform1i'](_0x34fe9c,0x1),_0x51a1ec){case _0x186ff9['SR_DE_NULL']:break;case _0x186ff9['SR_DE_FISH_ORIGINAL']:case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:case _0x186ff9['SR_DE_FISH_PTZ_WALL']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:if(null==this['pFishParamManager'])return _0x520965;var _0x1fd457={};if(_0x2c8855=this['pFishParamManager']['GetRenderParam'](this['nFECPort'],_0x1fd457),_0xa87ede!=_0x2c8855)return _0x2c8855;if(_0x186ff9['SR_DE_FISH_ORIGINAL']==_0x51a1ec){var _0x5ed42b=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bBlack');if(_0x5ed42b<=0x0)return _0x4d26c0;this['ctx']['uniform1i'](_0x5ed42b,_0x1fd457['bBlack']);var _0x22c412=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCut');if(_0x22c412<=0x0)return _0x4d26c0;this['ctx']['uniform1i'](_0x22c412,_0x1fd457['bCut']);}if(_0x186ff9['SR_DE_FISH_PTZ_CEILING']==_0x51a1ec||_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==_0x51a1ec||_0x186ff9['SR_DE_FISH_PTZ_WALL']==_0x51a1ec){var _0x1be46e=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleCos');if(_0x1be46e<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x1be46e,_0x1fd457['fCosH']);var _0x4cee7f=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleSin');if(_0x4cee7f<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x4cee7f,_0x1fd457['fSinH']);var _0x34ae1c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleCos');if(_0x34ae1c<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x34ae1c,_0x1fd457['fCosV']);var _0x300454=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleSin');if(_0x300454<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x300454,_0x1fd457['fSinV']);var _0x2862f4=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fZoom');if(_0x2862f4<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x2862f4,_0x1fd457['fZoom']);}if(_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']==_0x51a1ec||_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']==_0x51a1ec||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']==_0x51a1ec||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']==_0x51a1ec){var _0x11460a=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fAngle');if(_0x11460a<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x11460a,_0x1fd457['fAngle']);}var _0x25ff1c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX1');if(_0x25ff1c<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x25ff1c,_0x1fd457['fRXLeft']);var _0x558e2c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX2');if(_0x558e2c<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x558e2c,_0x1fd457['fRXRight']);var _0x1f7592=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY1');if(_0x1f7592<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x1f7592,_0x1fd457['fRYTop']);var _0x4966fe=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY2');if(_0x4966fe<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x4966fe,_0x1fd457['fRYBottom']);break;case _0x186ff9['SR_DE_FISH_SEMISPHERE']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](3.14-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['canvas']['width'],this['canvas']['height']);var _0x5e2a11=this['pCamera']['GetView'](),_0xf45b1a=this['pCamera']['GetProj'](),_0x3aaee2=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x3aaee2<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x3aaee2,!0x1,_0x5e2a11);var _0x51d4ee=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x51d4ee<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x51d4ee,!0x1,_0xf45b1a);break;case _0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['canvas']['width'],this['canvas']['height']);var _0x4ad072=this['pCamera']['GetView'](),_0x3a7e99=this['pCamera']['GetProj'](),_0x8e98a2=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x8e98a2<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x8e98a2,!0x1,_0x4ad072);var _0x5b3983=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x5b3983<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x5b3983,!0x1,_0x3a7e99);break;default:return _0x86aef9;}if(this['nCaptureWidth']<=0x0||this['nCaptureHeight']<=0x0)return _0x4fea1b;if(this['ctx']['viewport'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight']),this['ctx']['clearColor'](0x0,0x0,0x0,0x1),this['ctx']['clear'](this['ctx']['COLOR_BUFFER_BIT']|this['ctx']['DEPTH_BUFFER_BIT']),this['b3DPort']&&(this['ctx']['enable'](this['ctx']['DEPTH_TEST']),this['ctx']['depthFunc'](this['ctx']['LESS']),this['ctx']['depthMask'](!0x0),0x1==this['bCullBack']?this['ctx']['enable'](this['ctx']['CULL_FACE']):this['ctx']['disable'](this['ctx']['CULL_FACE'])),this['enPixelFormat']==_0xa01ff6?this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]):(this['enPixelFormat']==_0x58bd8b||this['enPixelFormat']==_0x264b64)&&(this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),this['ctx']['activeTexture'](this['ctx']['TEXTURE1']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x1]),this['ctx']['activeTexture'](this['ctx']['TEXTURE2']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x2])),this['onlySupportedWebGL1']||this['ctx']['clearBufferfi'](this['ctx']['DEPTH_STENCIL'],0x0,0x1,0x0),0x0==this['b3DPort'])this['ctx']['drawArrays'](this['ctx']['TRIANGLE_FAN'],0x0,0x4);else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_SEMISPHERE']){if(this['nSemiSpherePosNum']<=0x0)return _0x520965;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nSemiSpherePosNum']);}else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']){if(this['nCylinderPosNum']<=0x0)return _0x520965;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nCylinderPosNum']);}else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){if(this['nArcSpherePosNum']<=0x0)return _0x520965;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nArcSpherePosNum']);}}}}return this['ctx']['useProgram'](null),null!=this['pfuncCBIn']&&this['pfuncCBIn'](this['pUserIn']),null!=this['pfuncCBOut']&&this['pfuncCBOut'](this['pUserOut']),_0x2c8855=this['_EndCapture'](_0x182ed1),_0xa87ede!=_0x2c8855?_0x2c8855:_0xa87ede;}},{'key':'SR_SetImagePostProcess','value':function(_0x2048cc,_0x1ac4fe){if(null==this['ctx'])return _0x520965;if(_0xe529b7==_0x2048cc||_0x2d33eb==_0x2048cc){if(0x0-_0x1ac4fe>_0x4a23c6||_0x1ac4fe-0x1>_0x4a23c6)return _0x31ddcf;}else{if((_0x46c7b3==_0x2048cc||_0x199c31==_0x2048cc||_0x414976==_0x2048cc)&&(-0x1-_0x1ac4fe>_0x4a23c6||_0x1ac4fe-0x1>_0x4a23c6))return _0x31ddcf;}switch(_0x2048cc){case _0x46c7b3:this['fBrightness']=_0x1ac4fe;break;case _0x2d33eb:this['fHue']=_0x1ac4fe;break;case _0x199c31:this['fSaturation']=_0x1ac4fe;break;case _0x414976:this['fContrast']=_0x1ac4fe;break;case _0xe529b7:this['fSharpness']=_0x1ac4fe;break;default:return _0x86aef9;}return Math['abs'](this['fBrightness']-0x0)<_0x4a23c6&&Math['abs'](this['fHue']-0x0)<_0x4a23c6&&Math['abs'](this['fSaturation']-0x0)<_0x4a23c6&&Math['abs'](this['fContrast']-0x0)<_0x4a23c6&&Math['abs'](this['fSharpness']-0x0)<_0x4a23c6?this['nPostProc']=0x0:this['nPostProc']=0x1,_0xa87ede;}},{'key':'_BeginCapture','value':function(){var _0x594b67=_0xa87ede;return 0x0==this['bCaptureResInit']&&(_0x594b67=this['_InitRenderTarget'](this['nCaptureWidth'],this['nCaptureHeight'],!0x1,!0x0),_0xa87ede!=_0x594b67)?_0x594b67:(_0x594b67=this['_Resize'](this['nCaptureWidth'],this['nCaptureHeight'],!0x1,!0x0),_0xa87ede!=_0x594b67?_0x594b67:(this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],this['nCaptureFBO']),this['bIsCapturing']=!0x0,_0xa87ede));}},{'key':'_InitRenderTarget','value':function(_0x5a333c,_0x43881f,_0x249770,_0x2948c0){if(0x0!=this['nCaptureRTTex']||0x0!=this['nCaptureFBO'])return _0x520965;if(_0x5a333c<=0x0||_0x43881f<=0x0)return _0x31ddcf;if(this['nCaptureRTTex']=this['ctx']['createTexture'](),this['nCaptureRTTex']<=0x0)return _0x4d26c0;if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nCaptureRTTex']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],_0x5a333c,_0x43881f,0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],null),0x0==this['nCaptureFBO']&&(this['nCaptureFBO']=this['ctx']['createFramebuffer'](),this['nCaptureFBO']<=0x0))return _0x4d26c0;if(this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],this['nCaptureFBO']),this['ctx']['framebufferTexture2D'](this['ctx']['FRAMEBUFFER'],this['ctx']['COLOR_ATTACHMENT0'],this['ctx']['TEXTURE_2D'],this['nCaptureRTTex'],0x0),0x1==_0x2948c0&&0x0==this['nCaptureDepthbuffer']){if(this['nCaptureDepthbuffer']=this['ctx']['createRenderbuffer'](),this['nCaptureDepthbuffer']<=0x0)return _0x4d26c0;this['ctx']['bindRenderbuffer'](this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']),this['ctx']['renderbufferStorage'](this['ctx']['RENDERBUFFER'],this['ctx']['DEPTH_COMPONENT16'],_0x5a333c,_0x43881f),this['ctx']['framebufferRenderbuffer'](this['ctx']['FRAMEBUFFER'],this['ctx']['DEPTH_ATTACHMENT'],this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']);}return this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),this['nCaptureFBOWidth']=_0x5a333c,this['nCaptureFBOHeight']=_0x43881f,this['bCaptureResInit']=!0x0,_0xa87ede;}},{'key':'_Resize','value':function(_0xcfe8c4,_0x52f7d1,_0x42dc08,_0x357e6b){if(this['nCaptureFBOWidth']!=_0xcfe8c4||this['nCaptureFBOHeight']!=_0x52f7d1){if(this['nCaptureFBOWidth']=_0xcfe8c4,this['nCaptureFBOHeight']=_0x52f7d1,0x0!=this['nCaptureRTTex']&&(this['ctx']['deleteTexture'](this['nCaptureRTTex']),this['nCaptureRTTex']=0x0),0x0!=this['nCaptureDepthbuffer']&&(this['ctx']['deleteRenderbuffer'](this['nCaptureDepthbuffer']),this['nCaptureDepthbuffer']=0x0),0x0==this['nCaptureRTTex']&&(this['nCaptureRTTex']=this['ctx']['createTexture'](),this['nCaptureRTTex']<=0x0))return _0x4d26c0;if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nCaptureRTTex']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['nCaptureFBOWidth'],this['nCaptureFBOHeight'],0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],null),this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],this['nCaptureFBO']),this['ctx']['framebufferTexture2D'](this['ctx']['FRAMEBUFFER'],this['ctx']['COLOR_ATTACHMENT0'],this['ctx']['TEXTURE_2D'],this['nCaptureRTTex'],0x0),0x1==_0x357e6b&&0x0==this['nCaptureDepthbuffer']){if(this['nCaptureDepthbuffer']=this['ctx']['createRenderbuffer'](),this['nCaptureDepthbuffer']<=0x0)return _0x4d26c0;this['ctx']['bindRenderbuffer'](this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']),this['ctx']['renderbufferStorage'](this['ctx']['RENDERBUFFER'],this['ctx']['DEPTH_COMPONENT16'],_0xcfe8c4,_0x52f7d1),this['ctx']['framebufferRenderbuffer'](this['ctx']['FRAMEBUFFER'],this['ctx']['DEPTH_ATTACHMENT'],this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']);}this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null);}return _0xa87ede;}},{'key':'_EndCapture','value':function(_0x4c1472){return null==this['ctx']?_0x520965:null==_0x4c1472['pBuffer']||null==_0x4c1472['pBuffer']?_0x31ddcf:(this['ctx']['readPixels'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight'],this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x4c1472['pBuffer']),this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),this['bIsCapturing']=!0x1,_0xa87ede);}},{'key':'_ResizeFrameData','value':function(_0x5bdf2c,_0xb05249,_0x32fafb,_0x14166a){if(0x0==_0xb05249%0x8&&null==_0x14166a)return this['frameDisplayWidth']=Math['round'](_0xb05249),this['frameDisplayHeight']=Math['round'](_0x32fafb),this['pFrameData']=_0x5bdf2c,_0xa87ede;if(null!=_0x14166a&&0x0==_0x14166a['nCropBottom']&&0x0==_0x14166a['nCropLeft']&&0x0==_0x14166a['nCropRight']&&0x0==_0x14166a['nCropTop']&&0x0==_0xb05249%0x8)return this['frameDisplayWidth']=Math['round'](_0xb05249),this['frameDisplayHeight']=Math['round'](_0x32fafb),this['pFrameData']=_0x5bdf2c,_0xa87ede;if((null==this['pFrameData']||this['frameDisplayWidth']!=_0xb05249/0x8*0x8||this['frameDisplayHeight']!=_0x32fafb)&&(this['frameDisplayWidth']=0x8*Math['round'](_0xb05249/0x8),this['frameDisplayHeight']=Math['round'](_0x32fafb),this['pFrameData']=null,this['pFrameData']=new Uint8Array(this['frameDisplayWidth']*this['frameDisplayHeight']*0x3/0x2),null==this['pFrameData']))return _0x3d12cf;var _0x28d502=0x0,_0x14e706=0x0,_0x5dba3f=Math['round'](_0x14166a['nCodeWidth']),_0x529996=Math['round'](_0x14166a['nCodeHeight']),_0x51b8fc=0x0;if(_0x58bd8b==this['enPixelFormat']||_0x264b64==this['enPixelFormat']){var _0x267b16,_0x2b423f,_0x3428fd;null!=_0x14166a?(_0x28d502=Math['round'](_0x14166a['nCropLeft']),_0x14e706=Math['round'](_0x14166a['nCropTop']),_0x267b16=_0x5bdf2c['subarray'](_0x28d502*_0x5dba3f+_0x14e706,_0x5dba3f*_0x529996),_0x2b423f=_0x5bdf2c['subarray'](_0x5dba3f*_0x529996+_0x14e706*_0x5dba3f/0x4+_0x28d502/0x2,_0x5dba3f*_0x529996*0x5/0x4),_0x3428fd=_0x5bdf2c['subarray'](_0x5dba3f*_0x529996*0x5/0x4+_0x14e706*_0x5dba3f/0x4+_0x28d502/0x2,_0x5dba3f*_0x529996*0x3/0x2),_0x51b8fc=_0x5dba3f):(_0x267b16=_0x5bdf2c['subarray'](0x0,_0xb05249*_0x32fafb),_0x2b423f=_0x5bdf2c['subarray'](_0xb05249*_0x32fafb,_0xb05249*_0x32fafb*0x5/0x4),_0x3428fd=_0x5bdf2c['subarray'](_0xb05249*_0x32fafb*0x5/0x4,_0xb05249*_0x32fafb*0x3/0x2),_0x51b8fc=this['frameDisplayWidth']);for(var _0x13336c=null,_0x4b9afa=0x0;_0x4b9afa<this['frameDisplayHeight'];++_0x4b9afa){var _0x3781f7=Math['round'](_0x4b9afa*_0x51b8fc),_0x327116=Math['round'](_0x4b9afa*_0x51b8fc+this['frameDisplayWidth']);_0x13336c=_0x267b16['slice'](_0x3781f7,_0x327116);var _0x141fa6=Math['round'](_0x4b9afa*this['frameDisplayWidth']);this['pFrameData']['set'](_0x13336c,_0x141fa6);}for(var _0x477bdd=0x0;_0x477bdd<this['frameDisplayHeight']/0x2;++_0x477bdd){var _0x50edd6=Math['round'](_0x477bdd*_0x51b8fc/0x2),_0x503319=Math['round'](_0x477bdd*_0x51b8fc/0x2+this['frameDisplayWidth']/0x2);_0x13336c=_0x2b423f['slice'](_0x50edd6,_0x503319);var _0x22f9fb=Math['round'](this['frameDisplayWidth']*this['frameDisplayHeight']+_0x477bdd*this['frameDisplayWidth']/0x2);this['pFrameData']['set'](_0x13336c,_0x22f9fb);}for(var _0xb58ce5=0x0;_0xb58ce5<this['frameDisplayHeight']/0x2;++_0xb58ce5){var _0x47cd2f=Math['round'](_0xb58ce5*_0x51b8fc/0x2),_0x1244ce=Math['round'](_0xb58ce5*_0x51b8fc/0x2+this['frameDisplayWidth']/0x2);_0x13336c=_0x3428fd['slice'](_0x47cd2f,_0x1244ce);var _0x25a663=Math['round'](this['frameDisplayWidth']*this['frameDisplayHeight']*0x5/0x4+_0xb58ce5*this['frameDisplayWidth']/0x2);this['pFrameData']['set'](_0x13336c,_0x25a663);}_0x267b16=null,_0x2b423f=null,_0x3428fd=null,_0x13336c=null;}else{if(_0x532920==this['enPixelFormat']){var _0x372b86,_0x4951e3,_0x174e12;null!=_0x14166a?(_0x28d502=Math['round'](_0x14166a['nCropLeft']),_0x14e706=Math['round'](_0x14166a['nCropTop']),_0x372b86=_0x5bdf2c['subarray'](_0x14e706*_0x5dba3f+_0x28d502,_0x5dba3f*_0x529996),_0x4951e3=_0x5bdf2c['subarray'](_0x5dba3f*_0x529996+_0x14e706*_0x5dba3f/0x4+_0x28d502/0x2,_0x5dba3f*_0x529996*0x3/0x2),_0x51b8fc=Math['round'](_0x14166a['nCodeWidth'])):(_0x372b86=_0x5bdf2c['subarray'](0x0,_0x5dba3f*_0x529996),_0x4951e3=_0x5bdf2c['subarray'](_0x5dba3f*_0x529996,_0x5dba3f*_0x529996*0x3/0x2),_0x51b8fc=this['frameDisplayWidth']);for(var _0x2c9864=0x0;_0x2c9864<this['frameDisplayHeight'];++_0x2c9864){var _0x337f86=Math['round'](_0x2c9864*_0x51b8fc),_0x50a9ce=Math['round'](_0x2c9864*_0x51b8fc+this['frameDisplayWidth']);_0x174e12=_0x372b86['slice'](_0x337f86,_0x50a9ce);var _0x638927=Math['round'](_0x2c9864*this['frameDisplayWidth']);this['pFrameData']['set'](_0x174e12,_0x638927);}for(var _0x29fc18=0x0;_0x29fc18<this['frameDisplayHeight']/0x2;++_0x29fc18){var _0x214b42=Math['round'](_0x29fc18*_0x51b8fc),_0x3b1a87=Math['round'](_0x29fc18*_0x51b8fc+this['frameDisplayWidth']);_0x174e12=_0x4951e3['slice'](_0x214b42,_0x3b1a87);var _0x2c17e5=Math['round'](this['frameDisplayWidth']*this['frameDisplayHeight']+_0x29fc18*this['frameDisplayWidth']);this['pFrameData']['set'](_0x174e12,_0x2c17e5);}_0x372b86=null,_0x4951e3=null,_0x174e12=null;}}return _0xa87ede;}},{'key':'_SetImagePostProcess','value':function(){var _0x30cf7b=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fBrightness');if(_0x30cf7b<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x30cf7b,this['fBrightness']);var _0x5553d2=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHue');if(_0x5553d2<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x5553d2,this['fHue']);var _0x42c592=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fSaturation');if(_0x42c592<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x42c592,this['fSaturation']);var _0x3629e8=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fContrast');if(_0x3629e8<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x3629e8,this['fContrast']);var _0x1c53e9=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fSharpness');if(_0x1c53e9<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x1c53e9,this['fSharpness']);var _0x5733f8=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fWndWidth');if(_0x5733f8<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x5733f8,this['frameDisplayWidth']);var _0x2dad49=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fWndHeight');return _0x2dad49<=0x0?_0x4d26c0:(this['ctx']['uniform1f'](_0x2dad49,this['frameDisplayHeight']),_0xa87ede);}},{'key':'_ComputeRotateLimits','value':function(){if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){var _0x31467d,_0x35837a;if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?(_0x31467d=_0x44d661,_0x35837a=_0x5affea):(_0x31467d=_0x438d57,_0x35837a=_0x2506c4),0x0==this['canvas']['width']||0x0==this['canvas']['height'])this['fRotateLimitX']=_0x31467d,this['fRotateLimitY']=_0x35837a;else{var _0x4a5e79=Math['tan'](2.748893525);if(Math['abs'](_0x4a5e79*this['fScale'])<0x1){var _0x50f721=_0x4a5e79*_0x4a5e79+0x1,_0x185702=-0x2*_0x4a5e79*_0x4a5e79*this['fScale'],_0x571130=_0x4a5e79*_0x4a5e79*this['fScale']*this['fScale']-0x1,_0x3fa40c=(-_0x185702-Math['sqrt'](_0x185702*_0x185702-0x4*_0x50f721*_0x571130))/(0x2*_0x50f721),_0x429003=_0x4a5e79*(_0x3fa40c-this['fScale']);this['fRotateLimitX']=Math['acos'](_0x429003/Math['sqrt'](_0x3fa40c*_0x3fa40c+_0x429003*_0x429003)),this['fRotateLimitX']<_0x31467d&&(this['fRotateLimitX']=_0x31467d);}else this['fRotateLimitX']=_0x31467d;var _0x536723=Math['atan'](this['canvas']['width']/this['canvas']['height']*Math['tan'](_0x13b181/0x2));if(_0x4a5e79=Math['tan'](_0x530a52-_0x536723),Math['abs'](_0x4a5e79*this['fScale'])<0x1){var _0x3a1ac0=_0x4a5e79*_0x4a5e79+0x1,_0x2c4813=-0x2*_0x4a5e79*_0x4a5e79*this['fScale'],_0x2b2259=_0x4a5e79*_0x4a5e79*this['fScale']*this['fScale']-0x1,_0x1484df=(-_0x2c4813-Math['sqrt'](_0x2c4813*_0x2c4813-0x4*_0x3a1ac0*_0x2b2259))/(0x2*_0x3a1ac0),_0x2c89d0=_0x4a5e79*(_0x1484df-this['fScale']);this['fRotateLimitY']=Math['acos'](_0x2c89d0/Math['sqrt'](_0x1484df*_0x1484df+_0x2c89d0*_0x2c89d0)),this['fRotateLimitY']<_0x35837a&&(this['fRotateLimitY']=_0x35837a);}else this['fRotateLimitY']=_0x35837a;}this['fRotateX']>this['fRotateLimitX']&&(this['fRotateX']=this['fRotateLimitX']),this['fRotateX']<-this['fRotateLimitX']&&(this['fRotateX']=-this['fRotateLimitX']),this['fRotateY']>this['fRotateLimitY']&&(this['fRotateY']=this['fRotateLimitX']),this['fRotateY']<-this['fRotateLimitX']&&(this['fRotateY']=-this['fRotateLimitX']);}return _0xa87ede;}}]),_0x2425ba;}()),_0x47e209=(function(){function _0x142b4f(){_0x54580d(this,_0x142b4f),this['canvas']=null,this['ctx']=null,this['regionSx']=0x0,this['regionSy']=0x0,this['regionSw']=0x0,this['regionSh']=0x0,this['needRect']=!0x1,this['bAntialias']=!0x1,this['bRecreateAntia']=!0x1,this['pfuncCBIn']=null,this['pUserIn']=null,this['pfuncCBOut']=null,this['pUserOut']=null;}return _0x4fd085(_0x142b4f,[{'key':'SR_Init','value':function(_0x5ecf9e){this['canvas']=_0x5ecf9e,this['ctx']=this['canvas']['getContext']('2d'),this['ctx']||console['log']('your\\x20browser\\x20does\\x20not\\x20support\\x202d\\x20render');}},{'key':'SR_Draw','value':function(_0x2b71ee){return this['needRect']?this['ctx']['drawImage'](_0x2b71ee,this['regionSx'],this['regionSy'],this['regionSw'],this['regionSh'],0x0,0x0,this['canvas']['width'],this['canvas']['height']):this['ctx']['drawImage'](_0x2b71ee,0x0,0x0,_0x2b71ee['displayWidth'],_0x2b71ee['displayHeight'],0x0,0x0,this['canvas']['width'],this['canvas']['height']),null!=this['pfuncCBIn']&&this['pfuncCBIn'](this['pUserIn']),0x1;}},{'key':'GetCanvasData','value':function(_0x25230b){console['log']('%c\\x20start\\x20time:'+new Date()['getMinutes']()+':'+new Date()['getSeconds']()+'.'+new Date()['getMilliseconds'](),'color:\\x20blue');var _0x574217=this['ctx']['getImageData'](0x0,0x0,this['canvas']['width'],this['canvas']['height']);console['log']('%c\\x202\\x20time:'+new Date()['getMinutes']()+':'+new Date()['getSeconds']()+'.'+new Date()['getMilliseconds'](),'color:\\x20blue');var _0x2d10bb='jpeg',_0x5a684e='image/jpeg',_0x6b5089=document['createElement']('canvas'),_0x5315a3=_0x6b5089['getContext']('2d');_0x6b5089['width']=this['canvas']['width'],_0x6b5089['height']=this['canvas']['height'],_0x5315a3['putImageData'](_0x574217,0x0,0x0);var _0x24024d=_0x6b5089['toDataURL'](),_0x26efe5=document['createElement']('a');_0x26efe5['download']=new Date()['getTime']()+'.'+_0x2d10bb,_0x26efe5['href']=_0x24024d,_0x26efe5['dataset']['downloadurl']=[_0x5a684e,_0x26efe5['download'],_0x26efe5['href']]['join'](':'),document['body']['appendChild'](_0x26efe5),_0x26efe5['click'](),document['body']['removeChild'](_0x26efe5),console['log']('%c\\x20end\\x20time:'+new Date()['getMinutes']()+':'+new Date()['getSeconds']()+'.'+new Date()['getMilliseconds'](),'color:\\x20blue');}},{'key':'SR_DelSubPort','value':function(_0x57fda8){return 0x0;}},{'key':'SR_AddSubPort','value':function(_0x36c54a){return 0x0;}},{'key':'SR_SetDisplayRect','value':function(_0x115279,_0xd4deec,_0x5a44bc,_0x341c14){this['regionSx']=_0x115279,this['regionSy']=_0xd4deec,this['regionSw']=_0x5a44bc,this['regionSh']=_0x341c14,this['needRect']=!0x0;}},{'key':'SR_Destroy','value':function(){this['canvas']=null,this['ctx']=null,this['regionSx']=0x0,this['regionSy']=0x0,this['regionSw']=0x0,this['regionSh']=0x0,this['needRect']=!0x1;}},{'key':'SR_SetCanvasSize','value':function(_0x585c32,_0x3f5351){this['canvas']['width']=_0x585c32,this['canvas']['height']=_0x3f5351;}},{'key':'SR_GetCanvasSize','value':function(){console['log']('canvas\\x20width:'+this['canvas']['width']+',height:'+this['canvas']['height']);}},{'key':'SR_SetAntialias','value':function(_0x41dd55){return _0x41dd55!=this['bAntialias']?(this['bAntialias']=_0x41dd55,this['bRecreateAntia']=!0x0):this['bRecreateAntia']=!0x1,this['bRecreateAntia']&&(this['bAntialias']?(this['canvas']['width']=0x5*this['canvas']['width'],this['canvas']['height']=0x5*this['canvas']['height'],this['canvas']['style']['transform']='scale(0.2)',this['canvas']['style']['transformOrigin']='0\\x200'):(this['canvas']['width']=this['canvas']['width']/0x5,this['canvas']['height']=this['canvas']['height']/0x5,this['canvas']['style']['transform']='scale(1)',this['canvas']['style']['transformOrigin']='0\\x200')),0x1;}},{'key':'SR_SetCallBack','value':function(_0x4d1e6d,_0x1f07ee,_0x3d33ea){switch(_0x3d33ea){case _0x444649:this['pfuncCBIn']=_0x4d1e6d,this['pUserIn']=_0x1f07ee;break;case _0x4f7368:this['pfuncCBOut']=_0x4d1e6d,this['pUserOut']=_0x1f07ee;break;default:return 0x0;}return 0x1;}},{'key':'SR_DrawFont','value':function(_0x2963cc,_0x4b046e,_0x516b83,_0x38303f,_0x31842a,_0x353830,_0x1a9008,_0x36e714,_0x39a389){var _0x27d4e5=[],_0x15ef3d={};return _0x15ef3d['bBackground']=_0x353830,_0x15ef3d['nFontWidth']=_0x38303f,_0x15ef3d['nFontHeight']=_0x31842a,_0x15ef3d['pstBGColor']=_0x1a9008,_0x15ef3d['pstFontColor']=_0x516b83,_0x15ef3d['pString']=_0x2963cc,_0x15ef3d['pstStartPos']=_0x4b046e,_0x15ef3d['fRotateAngle']=_0x36e714,_0x15ef3d['pFontFamily']=_0x39a389,_0x27d4e5['push'](_0x15ef3d),this['SR_DrawFontEx'](_0x27d4e5,0x1),0x1;}},{'key':'SR_DrawFontEx','value':function(_0x57d469,_0x12c5ae){for(var _0x2b5ed6=0x0;_0x2b5ed6<_0x12c5ae;_0x2b5ed6++){this['ctx']['textBaseline']='top';var _0x350f8f=_0x57d469[_0x2b5ed6]['nFontWidth'],_0x46fd6d=_0x57d469[_0x2b5ed6]['nFontHeight'],_0x2d8f2f=(_0x350f8f=Math['round'](_0x350f8f))<(_0x46fd6d=Math['round'](_0x46fd6d))?_0x350f8f:_0x46fd6d;this['ctx']['font']=_0x2d8f2f['toString']()+'px\\x20'+_0x57d469[_0x2b5ed6]['pFontFamily'];var _0x3e589a=parseInt(0xff*_0x57d469[_0x2b5ed6]['pstFontColor']['fR']),_0x4fd711=parseInt(0xff*_0x57d469[_0x2b5ed6]['pstFontColor']['fG']),_0x4755ae=parseInt(0xff*_0x57d469[_0x2b5ed6]['pstFontColor']['fB']),_0x43ec1f=_0x3e589a<0x10?'0'+_0x3e589a['toString'](0x10):_0x3e589a['toString'](0x10),_0x25bbfd=_0x4fd711<0x10?'0'+_0x4fd711['toString'](0x10):_0x4fd711['toString'](0x10),_0x1dead4=_0x4755ae<0x10?'0'+_0x4755ae['toString'](0x10):_0x4755ae['toString'](0x10);this['ctx']['fillStyle']='#'+_0x43ec1f+_0x25bbfd+_0x1dead4,this['ctx']['globalAlpha']=_0x57d469[_0x2b5ed6]['pstFontColor']['fA'],this['ctx']['fillText'](_0x57d469[_0x2b5ed6]['pString'],_0x57d469[_0x2b5ed6]['pstStartPos']['fX']*this['canvas']['width'],_0x57d469[_0x2b5ed6]['pstStartPos']['fY']*this['canvas']['height']);}return 0x1;}},{'key':'SR_DrawImage','value':function(_0x5e1584,_0x4fe178,_0x4811b5,_0xa8f872,_0x15dd02,_0x226fc5){return 0x1;}},{'key':'SR_DrawLinesEx','value':function(_0x564439,_0x1a98fd,_0x33d077,_0xaa2fdd){return 0x1;}}]),_0x142b4f;}()),_0x30cc90=(function(){function _0x132b86(){_0x54580d(this,_0x132b86),this['bPortAllocated']=[],this['pRenderParam']=[],this['pFishParam']=[],this['stPTZColor']=[],this['pPTZSetColor']=null,this['nBasePTZPointNum']=[],this['nOriPTZPointNum']=[],this['nPanoPTZPointNum']=[],this['nPTZFragmentNum']=[],this['pBasePTZPoints']=[],this['pPanoPTZPoints']=[],this['pRectPoints']=[],this['nPTZRectNum']=[],this['nPTZDisplayMode']=_0x569e7f,this['fRX1']=0x0,this['fRX2']=0x1,this['fRY1']=0x0,this['fRY2']=0x1,this['bBlack']=!0x1,this['pOriPTZPoints']=[],this['nWndPort']=_0x3cf544,this['nPlaceType']=0x0,this['nPTZFragmentNode']=[],this['bPTZSelected']=[],this['nPTZDisplayMode']=_0x495db0;for(var _0x26ae66=0x0;_0x26ae66<_0x379995;++_0x26ae66){this['bPortAllocated'][_0x26ae66]=!0x1,this['bPTZSelected'][_0x26ae66]=!0x1,this['pRenderParam'][_0x26ae66]=null,this['pFishParam'][_0x26ae66]=null,this['stPTZColor'][_0x26ae66]={},this['stPTZColor'][_0x26ae66]['fR']=0x0,this['stPTZColor'][_0x26ae66]['fG']=0x0,this['stPTZColor'][_0x26ae66]['fB']=0x0,this['stPTZColor'][_0x26ae66]['fA']=0x0,this['nBasePTZPointNum'][_0x26ae66]=0x0,this['nOriPTZPointNum'][_0x26ae66]=0x0,this['nPanoPTZPointNum'][_0x26ae66]=0x0,this['nPTZRectNum'][_0x26ae66]=0x0,this['pPanoPTZPoints'][_0x26ae66]=[],this['pRectPoints'][_0x26ae66]=[],this['pBasePTZPoints'][_0x26ae66]=[],this['pOriPTZPoints'][_0x26ae66]=[];for(var _0x4e780f=0x0;_0x4e780f<0x4;++_0x4e780f)this['pRectPoints'][_0x26ae66][_0x4e780f]={},this['pRectPoints'][_0x26ae66][_0x4e780f]['fX']=0x0,this['pRectPoints'][_0x26ae66][_0x4e780f]['fY']=0x0;for(var _0x1fa045=0x0;_0x1fa045<_0x4b88be;++_0x1fa045)this['pBasePTZPoints'][_0x26ae66][_0x1fa045]={},this['pBasePTZPoints'][_0x26ae66][_0x1fa045]['fX']=0x0,this['pBasePTZPoints'][_0x26ae66][_0x1fa045]['fY']=0x0,this['pOriPTZPoints'][_0x26ae66][_0x1fa045]={},this['pOriPTZPoints'][_0x26ae66][_0x1fa045]['fX']=0x0,this['pOriPTZPoints'][_0x26ae66][_0x1fa045]['fY']=0x0,this['pPanoPTZPoints'][_0x26ae66][_0x1fa045]={},this['pPanoPTZPoints'][_0x26ae66][_0x1fa045]['fX']=0x0,this['pPanoPTZPoints'][_0x26ae66][_0x1fa045]['fY']=0x0;this['nPTZFragmentNum'][_0x26ae66]=0x0,this['nPTZFragmentNode'][_0x26ae66]=[];for(var _0x5716c7=0x0;_0x5716c7<0x64;++_0x5716c7)this['nPTZFragmentNode'][_0x26ae66][_0x5716c7]=0x0;}this['InitColorList']();}return _0x4fd085(_0x132b86,[{'key':'GetFECPort','value':function(_0x422de9){for(var _0xeda2cb=_0x3cf544,_0x5a74b9=0x0;_0x5a74b9<_0x379995;++_0x5a74b9)if(0x0==this['bPortAllocated'][_0x5a74b9]){_0xeda2cb=_0x5a74b9;break;}if(_0xeda2cb==_0x3cf544)return _0xeda2cb;if(_0x422de9==_0x186ff9['SR_DE_NULL'])return _0xeda2cb;var _0xb974d1=this['JudgeDisplayEffect'](_0x422de9);if(_0xa87ede!=_0xb974d1)return this['FreeFECPort'](_0xeda2cb),_0xeda2cb=_0x3cf544;if(_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']==_0x422de9||_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']==_0x422de9||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']==_0x422de9||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']==_0x422de9||_0x186ff9['SR_DE_FISH_PANORAMA_WALL']==_0x422de9||_0x186ff9['SR_DE_FISH_ORIGINAL']==_0x422de9){if(_0x3cf544!=this['nWndPort'])return this['FreeFECPort'](_0xeda2cb),_0xeda2cb=_0x3cf544;this['nWndPort']=_0xeda2cb;}if(!(_0x186ff9['SR_DE_FISH_PTZ_CEILING']!=_0x422de9&&_0x186ff9['SR_DE_FISH_PTZ_FLOOR']!=_0x422de9&&_0x186ff9['SR_DE_FISH_PTZ_WALL']!=_0x422de9||_0x3cf544==this['nWndPort']||null==this['pRenderParam'][this['nWndPort']]||_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']!=this['pRenderParam'][this['nWndPort']]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']!=this['pRenderParam'][this['nWndPort']]['nDisplayEffect']))return this['FreeFECPort'](_0xeda2cb),_0xeda2cb=_0x3cf544;if(_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']==_0x422de9||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']==_0x422de9){for(var _0x183f86=0x0;_0x183f86<_0x379995;++_0x183f86)if(null!=this['pRenderParam'][_0x183f86]&&(_0x186ff9['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x183f86]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x183f86]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x183f86]['nDisplayEffect']))return this['FreeFECPort'](_0xeda2cb),_0xeda2cb=_0x3cf544;}if(_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0x422de9){for(var _0xde2840=0x0;_0xde2840<_0x379995;++_0xde2840)if(null!=this['pRenderParam'][_0xde2840]&&_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==this['pRenderParam'][_0xde2840]['nDisplayEffect'])return this['FreeFECPort'](_0xeda2cb),_0xeda2cb=_0x3cf544;}if(_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==_0x422de9){for(var _0x2ddcba=0x0;_0x2ddcba<_0x379995;++_0x2ddcba)if(null!=this['pRenderParam'][_0x2ddcba]&&_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==this['pRenderParam'][_0x2ddcba]['nDisplayEffect'])return this['FreeFECPort'](_0xeda2cb),_0xeda2cb=_0x3cf544;}return this['pRenderParam'][_0xeda2cb]={},this['pRenderParam'][_0xeda2cb]['fCosH']=0x1,this['pRenderParam'][_0xeda2cb]['fSinH']=0x0,this['pRenderParam'][_0xeda2cb]['fCosV']=0x1,this['pRenderParam'][_0xeda2cb]['fSinV']=0x0,this['pRenderParam'][_0xeda2cb]['fAngle']=0x0,this['pRenderParam'][_0xeda2cb]['fRX1']=this['fRX1'],this['pRenderParam'][_0xeda2cb]['fRX2']=this['fRX2'],this['pRenderParam'][_0xeda2cb]['fRY1']=this['fRY1'],this['pRenderParam'][_0xeda2cb]['fRY2']=this['fRY2'],this['pRenderParam'][_0xeda2cb]['bBlack']=this['bBlack'],this['pRenderParam'][_0xeda2cb]['fZoom']=0.035+0.8,this['pRenderParam'][_0xeda2cb]['nDisplayEffect']=_0x422de9,this['pRenderParam'][_0xeda2cb]['bBlack']=!0x1,this['pRenderParam'][_0xeda2cb]['bCut']=!0x1,this['pFishParam'][_0xeda2cb]={},this['pFishParam'][_0xeda2cb]['nFishParamType']=0x0,this['pFishParam'][_0xeda2cb]['bCut']=!0x1,this['pFishParam'][_0xeda2cb]['fAngle']=this['pRenderParam'][_0xeda2cb]['fAngle'],this['pFishParam'][_0xeda2cb]['fPTZX']=0.5,this['pFishParam'][_0xeda2cb]['fPTZY']=0.5,this['pFishParam'][_0xeda2cb]['fRXLeft']=this['pRenderParam'][_0xeda2cb]['fRX1'],this['pFishParam'][_0xeda2cb]['fRXRight']=this['pRenderParam'][_0xeda2cb]['fRX2'],this['pFishParam'][_0xeda2cb]['fRYTop']=this['pRenderParam'][_0xeda2cb]['fRY1'],this['pFishParam'][_0xeda2cb]['fRYBottom']=this['pRenderParam'][_0xeda2cb]['fRY2'],this['pFishParam'][_0xeda2cb]['bBlack']=this['pRenderParam'][_0xeda2cb]['bBlack'],this['pFishParam'][_0xeda2cb]['fZoom']=(this['pRenderParam'][_0xeda2cb]['fZoom']-0.8)/0x7,this['bPortAllocated'][_0xeda2cb]=!0x0,_0xeda2cb;}},{'key':'FreeFECPort','value':function(_0x450324){if(_0x450324<0x0||_0x450324>=_0x379995)return _0x31ddcf;this['nWndPort']==_0x450324&&(this['nWndPort']=_0x3cf544),null!=this['pRenderParam'][_0x450324]&&(this['pRenderParam'][_0x450324]['fCosH']=0x1,this['pRenderParam'][_0x450324]['fSinH']=0x0,this['pRenderParam'][_0x450324]['fCosV']=0x1,this['pRenderParam'][_0x450324]['fSinV']=0x0,this['pRenderParam'][_0x450324]['fAngle']=0x0,this['pRenderParam'][_0x450324]['fZoom']=0x0,this['pRenderParam'][_0x450324]['fRX1']=0x0,this['pRenderParam'][_0x450324]['fRX2']=0x1,this['pRenderParam'][_0x450324]['fRY1']=0x0,this['pRenderParam'][_0x450324]['fRY2']=0x1,this['pRenderParam'][_0x450324]['nDisplayEffect']=0x0,this['pRenderParam'][_0x450324]['bBlack']=!0x1,this['pRenderParam'][_0x450324]['bCut']=!0x1),null!=this['pFishParam'][_0x450324]&&(this['pFishParam'][_0x450324]['nFishParamType']=0x0,this['pFishParam'][_0x450324]['fRXLeft']=0x0,this['pFishParam'][_0x450324]['fRXRight']=0x1,this['pFishParam'][_0x450324]['fRYTop']=0x0,this['pFishParam'][_0x450324]['fRYBottom']=0x1,this['pFishParam'][_0x450324]['bBlack']=!0x1,this['pFishParam'][_0x450324]['bCut']=!0x1,this['pFishParam'][_0x450324]['fAngle']=0x0,this['pFishParam'][_0x450324]['fZoom']=0x0,this['pFishParam'][_0x450324]['fPTZX']=0.5,this['pFishParam'][_0x450324]['fPTZY']=0.5),this['nBasePTZPointNum'][_0x450324]=0x0,this['nOriPTZPointNum'][_0x450324]=0x0,this['nPanoPTZPointNum'][_0x450324]=0x0,this['nPTZRectNum'][_0x450324]=0x0;for(var _0x5851aa=0x0;_0x5851aa<0x4;++_0x5851aa)this['pRectPoints'][_0x450324][_0x5851aa]['fX']=0x0,this['pRectPoints'][_0x450324][_0x5851aa]['fY']=0x0;for(var _0x509c4c=0x0;_0x509c4c<_0x4b88be;++_0x509c4c)this['pBasePTZPoints'][_0x450324][_0x509c4c]['fX']=0x0,this['pBasePTZPoints'][_0x450324][_0x509c4c]['fY']=0x0,this['pOriPTZPoints'][_0x450324][_0x509c4c]['fX']=0x0,this['pOriPTZPoints'][_0x450324][_0x509c4c]['fY']=0x0,this['pPanoPTZPoints'][_0x450324][_0x509c4c]['fX']=0x0,this['pPanoPTZPoints'][_0x450324][_0x509c4c]['fY']=0x0;if(null!=this['pPTZSetColor']&&(this['pPTZSetColor'][_0x450324]['fA']=0x0,this['pPTZSetColor'][_0x450324]['fR']=0x0,this['pPTZSetColor'][_0x450324]['fG']=0x0,this['pPTZSetColor'][_0x450324]['fB']=0x0),this['bPTZSelected'][_0x450324]=!0x1,0x0!=this['nPlaceType']){var _0x46235e=!0x1;if(null!=this['pRenderParam'][i]){for(var _0x61e3ec=0x0;_0x61e3ec<_0x379995;++_0x61e3ec)if(null!=this['pRenderParam'][_0x61e3ec]&&(_0x186ff9['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PANORAMA_WALL']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_CEILING']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect'])){_0x46235e=!0x0;break;}}_0x46235e||(this['nPlaceType']=0x0);}for(var _0x308bbb=!0x1,_0x30bc0d=0x0;_0x30bc0d<_0x379995;++_0x30bc0d)if(null!=this['pRenderParam'][_0x30bc0d]){_0x308bbb=!0x0;break;}_0x308bbb||(this['fRX1']=0x0,this['fRX2']=0x1,this['fRY1']=0x0,this['fRY2']=0x1,this['bBlack']=!0x1),this['nPTZFragmentNum'][_0x450324]=0x0;for(var _0x59d008=0x0;_0x59d008<0x64;++_0x59d008)this['nPTZFragmentNode'][_0x450324][_0x59d008]=0x0;return this['bPortAllocated'][_0x450324]=!0x1,_0xa87ede;}},{'key':'DeInit','value':function(){for(var _0x2a6913=0x0;_0x2a6913<_0x379995;++_0x2a6913){for(var _0x5c283e=0x0;_0x5c283e<0x4;++_0x5c283e)this['pRectPoints'][_0x2a6913][_0x5c283e]=null;for(var _0x164210=0x0;_0x164210<_0x4b88be;++_0x164210)this['pBasePTZPoints'][_0x2a6913][_0x164210]=null,this['pOriPTZPoints'][_0x2a6913][_0x164210]=null,this['pPanoPTZPoints'][_0x2a6913][_0x164210]=null;this['nPTZFragmentNum'][_0x2a6913]=0x0,this['nPTZFragmentNode'][_0x2a6913]=null,this['bPortAllocated'][_0x2a6913]=!0x1,this['bPTZSelected'][_0x2a6913]=!0x1,this['pRenderParam'][_0x2a6913]=null,this['pFishParam'][_0x2a6913]=null,this['stPTZColor'][_0x2a6913]=null,this['nBasePTZPointNum'][_0x2a6913]=0x0,this['nOriPTZPointNum'][_0x2a6913]=0x0,this['nPanoPTZPointNum'][_0x2a6913]=0x0,this['nPTZRectNum'][_0x2a6913]=0x0,this['pPanoPTZPoints'][_0x2a6913]=null,this['pRectPoints'][_0x2a6913]=null,this['pBasePTZPoints'][_0x2a6913]=null,this['pOriPTZPoints'][_0x2a6913]=null;}return this['bPortAllocated']=null,this['pRenderParam']=null,this['pFishParam']=null,this['stPTZColor']=null,this['pPTZSetColor']=null,this['nBasePTZPointNum']=null,this['nOriPTZPointNum']=null,this['nPanoPTZPointNum']=null,this['nPTZFragmentNum']=null,this['pBasePTZPoints']=null,this['pPanoPTZPoints']=null,this['pRectPoints']=null,this['nPTZRectNum']=null,this['nPTZDisplayMode']=_0x569e7f,this['fRX1']=0x0,this['fRX2']=0x1,this['fRY1']=0x0,this['fRY2']=0x1,this['bBlack']=!0x1,this['pOriPTZPoints']=null,this['pBasePTZPoints']=null,this['nWndPort']=_0x3cf544,this['nPlaceType']=0x0,this['nPTZFragmentNode']=null,this['bPTZSelected']=null,this['nPTZDisplayMode']=_0x495db0,_0xa87ede;}},{'key':'InitColorList','value':function(){this['stPTZColor'][0x0]['fR']=0.5,this['stPTZColor'][0x0]['fG']=0.5,this['stPTZColor'][0x0]['fB']=0x0,this['stPTZColor'][0x0]['fA']=0x1,this['stPTZColor'][0x1]['fR']=0x1,this['stPTZColor'][0x1]['fG']=0x0,this['stPTZColor'][0x1]['fB']=0x0,this['stPTZColor'][0x1]['fA']=0x1,this['stPTZColor'][0x2]['fR']=0x0,this['stPTZColor'][0x2]['fG']=0x1,this['stPTZColor'][0x2]['fB']=0x0,this['stPTZColor'][0x2]['fA']=0x1,this['stPTZColor'][0x3]['fR']=0x0,this['stPTZColor'][0x3]['fG']=0x0,this['stPTZColor'][0x3]['fB']=0x1,this['stPTZColor'][0x3]['fA']=0x1,this['stPTZColor'][0x4]['fR']=0x1,this['stPTZColor'][0x4]['fG']=0x1,this['stPTZColor'][0x4]['fB']=0x0,this['stPTZColor'][0x4]['fA']=0x1,this['stPTZColor'][0x5]['fR']=0.5,this['stPTZColor'][0x5]['fG']=0x0,this['stPTZColor'][0x5]['fB']=0x1,this['stPTZColor'][0x5]['fA']=0x1,this['stPTZColor'][0x6]['fR']=0x0,this['stPTZColor'][0x6]['fG']=0x1,this['stPTZColor'][0x6]['fB']=0x1,this['stPTZColor'][0x6]['fA']=0x1,this['stPTZColor'][0x7]['fR']=0x1,this['stPTZColor'][0x7]['fG']=0.5,this['stPTZColor'][0x7]['fB']=0x0,this['stPTZColor'][0x7]['fA']=0x1,this['stPTZColor'][0x8]['fR']=0x0,this['stPTZColor'][0x8]['fG']=0.5,this['stPTZColor'][0x8]['fB']=0.5,this['stPTZColor'][0x8]['fA']=0x1;for(var _0x4a606d=0x9;_0x4a606d<_0x379995;_0x4a606d++)this['stPTZColor'][_0x4a606d]['fR']=0x1*_0x4a606d/_0x379995,this['stPTZColor'][_0x4a606d]['fG']=0x1*_0x4a606d/_0x379995,this['stPTZColor'][_0x4a606d]['fB']=0x1*_0x4a606d/_0x379995,this['stPTZColor'][_0x4a606d]['fA']=0x1;return _0xa87ede;}},{'key':'GetRangePoints','value':function(_0x25d84b){if(_0x25d84b<0x0||_0x25d84b>=_0x379995)return _0x31ddcf;if(null==this['pRenderParam'][_0x25d84b])return _0x520965;var _0x547759=0x0,_0x13094f=0x0;switch(this['nOriPTZPointNum'][_0x25d84b]=0x0,this['nBasePTZPointNum'][_0x25d84b]=0x0,this['pRenderParam'][_0x25d84b]['nDisplayEffect']){case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:for(_0x13094f=0x0;_0x13094f<0x1;_0x13094f+=0.01)this['GetFishPTZCeiling'](_0x547759,_0x13094f,_0x25d84b);for(_0x13094f=0.9995,_0x547759=0x0;_0x547759<0x1;_0x547759+=0.02)this['GetFishPTZCeiling'](_0x547759,_0x13094f,_0x25d84b);for(_0x547759=0.999,_0x13094f=0.9995;_0x13094f>=0x0;_0x13094f-=0.01)this['GetFishPTZCeiling'](_0x547759,_0x13094f,_0x25d84b);for(_0x13094f=0x0,_0x547759=0.999;_0x547759>=0x0;_0x547759-=0.02)this['GetFishPTZCeiling'](_0x547759,_0x13094f,_0x25d84b);break;case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:for(_0x13094f=0x0;_0x13094f<0x1;_0x13094f+=0.01)this['GetFishPTZFloor'](_0x547759,_0x13094f,_0x25d84b);for(_0x13094f=0.9995,_0x547759=0x0;_0x547759<0x1;_0x547759+=0.02)this['GetFishPTZFloor'](_0x547759,_0x13094f,_0x25d84b);for(_0x547759=0.999,_0x13094f=0.9995;_0x13094f>=0x0;_0x13094f-=0.01)this['GetFishPTZFloor'](_0x547759,_0x13094f,_0x25d84b);for(_0x13094f=0x0,_0x547759=0.999;_0x547759>=0x0;_0x547759-=0.02)this['GetFishPTZFloor'](_0x547759,_0x13094f,_0x25d84b);break;case _0x186ff9['SR_DE_FISH_PTZ_WALL']:for(_0x13094f=0x0;_0x13094f<0x1;_0x13094f+=0.01)this['GetFishPTZWALL'](_0x547759,_0x13094f,_0x25d84b);for(_0x13094f=0.9995,_0x547759=0x0;_0x547759<0x1;_0x547759+=0.02)this['GetFishPTZWALL'](_0x547759,_0x13094f,_0x25d84b);for(_0x547759=0.999,_0x13094f=0.9995;_0x13094f>=0x0;_0x13094f-=0.01)this['GetFishPTZWALL'](_0x547759,_0x13094f,_0x25d84b);for(_0x13094f=0x0,_0x547759=0.999;_0x547759>=0x0;_0x547759-=0.02)this['GetFishPTZWALL'](_0x547759,_0x13094f,_0x25d84b);break;default:return _0x86aef9;}return _0xa87ede;}},{'key':'TransformPTZRangePoints','value':function(_0x2f3cac){if(_0x3cf544==this['nWndPort'])return _0x520965;if(null==this['pBasePTZPoints'][_0x2f3cac]||null==this['pRenderParam'][this['nWndPort']])return _0x520965;this['nPanoPTZPointNum'][_0x2f3cac]=0x0;var _0x3c706a=_0xa87ede,_0x2be664=this['nWndPort'];switch(this['pRenderParam'][_0x2be664]['nDisplayEffect']){case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:if(_0x3c706a=this['GetPanoPTZWall'](_0x2f3cac),_0xa87ede!=_0x3c706a)return _0x3c706a;break;case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:if(_0x3c706a=this['GetPanoPTZFloor'](_0x2f3cac),_0xa87ede!=_0x3c706a)return _0x3c706a;break;case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:if(_0x3c706a=this['GetPanoPTZCeiling'](_0x2f3cac),_0xa87ede!=_0x3c706a)return _0x3c706a;}return this['CalcPTZFragmentPoints'](_0x2f3cac),_0xa87ede;}},{'key':'GetRectPoints','value':function(_0x5e6c1c){if(_0x5e6c1c<0x0||_0x5e6c1c>=_0x379995)return _0x31ddcf;if(this['nWndPort']==_0x3cf544)return _0x520965;if(null==this['pRenderParam'][this['nWndPort']]||null==this['pFishParam'][_0x5e6c1c])return _0x520965;var _0x1f9178=this['pRenderParam'][this['nWndPort']]['nDisplayEffect'],_0x392ce2=_0xa87ede,_0x399f52={'fX':0x0,'fY':0x0};switch(_0x1f9178){case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:if(_0x392ce2=this['GetPointFish2PanoWall'](_0x399f52,this['pFishParam'][_0x5e6c1c]['fPTZX'],this['pFishParam'][_0x5e6c1c]['fPTZY']),_0xa87ede!=_0x392ce2)return _0x392ce2;break;case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:if(_0x392ce2=this['GetPointFish2PanoFloor'](_0x399f52,this['pFishParam'][_0x5e6c1c]['fPTZX'],this['pFishParam'][_0x5e6c1c]['fPTZY']),_0xa87ede!=_0x392ce2)return _0x86aef9==_0x392ce2&&(this['pRectPoints'][_0x5e6c1c]=null),_0x392ce2;break;case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:if(_0x392ce2=this['GetPointFish2PanoCeiling'](_0x399f52,this['pFishParam'][_0x5e6c1c]['fPTZX'],this['pFishParam'][_0x5e6c1c]['fPTZY']),_0xa87ede!=_0x392ce2)return _0x86aef9==_0x392ce2&&(this['pRectPoints'][_0x5e6c1c]=null),_0x392ce2;break;case _0x186ff9['SR_DE_FISH_ORIGINAL']:_0x399f52['fX']=this['pFishParam'][_0x5e6c1c]['fPTZX'],_0x399f52['fY']=this['pFishParam'][_0x5e6c1c]['fPTZY'];}if(null==this['pRectPoints'][_0x5e6c1c]){this['pRectPoints'][_0x5e6c1c]=[];for(var _0x1698af=0x0;_0x1698af<0x4;++_0x1698af)this['pRectPoints'][_0x5e6c1c][_0x1698af]={},this['pRectPoints'][_0x5e6c1c][_0x1698af]['fX']=0x0,this['pRectPoints'][_0x5e6c1c][_0x1698af]['fY']=0x0;}return this['pRectPoints'][_0x5e6c1c][0x0]['fX']=_0x399f52['fX']-_0x466865,this['pRectPoints'][_0x5e6c1c][0x0]['fY']=_0x399f52['fY']-_0x466865,this['pRectPoints'][_0x5e6c1c][0x1]['fX']=_0x399f52['fX']+_0x466865,this['pRectPoints'][_0x5e6c1c][0x1]['fY']=_0x399f52['fY']-_0x466865,this['pRectPoints'][_0x5e6c1c][0x2]['fX']=_0x399f52['fX']+_0x466865,this['pRectPoints'][_0x5e6c1c][0x2]['fY']=_0x399f52['fY']+_0x466865,this['pRectPoints'][_0x5e6c1c][0x3]['fX']=_0x399f52['fX']-_0x466865,this['pRectPoints'][_0x5e6c1c][0x3]['fY']=_0x399f52['fY']+_0x466865,this['nPTZRectNum'][_0x5e6c1c]=0x4,_0xa87ede;}},{'key':'GetFishPTZCeiling','value':function(_0x517b14,_0x2ce55a,_0x2434b6){var _0xf3955c,_0x3a92e4,_0x1cd7f2,_0x198938,_0x2f97b3,_0x108ac4,_0x49eb1e,_0x36d97d={'fX':0x0,'fY':0x0},_0x22b255={'fX':0x0,'fY':0x0},_0x5daa5e={'fX':0x0,'fY':0x0},_0x4af31d={};_0x198938=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x2f97b3=(this['fRX1']+this['fRX2'])/0x2*0x1,_0x108ac4=(this['fRY1']+this['fRY2'])/0x2*_0x198938,_0x49eb1e=(this['fRX2']-this['fRX1'])/0x2*0x1,_0x36d97d['fX']=_0x2ce55a-0.5,_0x36d97d['fY']=0.5-_0x517b14,_0xf3955c=this['pRenderParam'][_0x2434b6]['fZoom'],_0x22b255['fX']=_0x36d97d['fX'],_0x22b255['fY']=_0x36d97d['fY']*this['pRenderParam'][_0x2434b6]['fCosV']+_0xf3955c*this['pRenderParam'][_0x2434b6]['fSinV'],_0x3a92e4=_0xf3955c*this['pRenderParam'][_0x2434b6]['fCosV']-_0x36d97d['fY']*this['pRenderParam'][_0x2434b6]['fSinV'],_0x1cd7f2=Math['sqrt'](_0x22b255['fX']*_0x22b255['fX']+_0x22b255['fY']*_0x22b255['fY']);var _0x1ce234=Math['sqrt'](_0x22b255['fX']*_0x22b255['fX']+_0x22b255['fY']*_0x22b255['fY']+_0x3a92e4*_0x3a92e4),_0x1e49ba=Math['asin'](_0x1cd7f2/_0x1ce234)/1.5707963*0.5;_0x22b255['fX']=_0x1e49ba*_0x22b255['fX']/_0x1cd7f2,_0x22b255['fY']=_0x1e49ba*_0x22b255['fY']/_0x1cd7f2,_0x5daa5e['fX']=_0x22b255['fX']*this['pRenderParam'][_0x2434b6]['fCosH']-_0x22b255['fY']*this['pRenderParam'][_0x2434b6]['fSinH'],_0x5daa5e['fY']=_0x22b255['fX']*this['pRenderParam'][_0x2434b6]['fSinH']+_0x22b255['fY']*this['pRenderParam'][_0x2434b6]['fCosH'],_0x4af31d['fX']=0x2*_0x5daa5e['fX']*_0x49eb1e+_0x2f97b3,_0x4af31d['fY']=0x2*-_0x5daa5e['fY']*_0x49eb1e+_0x108ac4;var _0x2433b8=this['nBasePTZPointNum'][_0x2434b6];this['pBasePTZPoints'][_0x2434b6][_0x2433b8]['fX']=_0x5daa5e['fX']+0.5,this['pBasePTZPoints'][_0x2434b6][_0x2433b8]['fY']=0.5-_0x5daa5e['fY'],this['nBasePTZPointNum'][_0x2434b6]=this['nBasePTZPointNum'][_0x2434b6]+0x1;var _0x308ac9=this['fRX1']<=0x0?0x0:0x1*this['fRX1'],_0x4efb75=this['fRY1']<=0x0?0x0:this['fRY1']*_0x198938,_0x17a5c7=this['fRX2']>=0x1?0x1-_0x308ac9:0x1*this['fRX2']-_0x308ac9,_0x5f1e62=this['fRY2']>=0x1?_0x198938-_0x4efb75:this['fRY2']*_0x198938-_0x4efb75;if(_0x4af31d['fX']=(_0x4af31d['fX']-_0x308ac9)/_0x17a5c7,_0x4af31d['fY']=(_0x4af31d['fY']-_0x4efb75)/_0x5f1e62,_0x4af31d['fX']<=0x1&&_0x4af31d['fY']<=0x1&&_0x4af31d['fX']>=0x0&&_0x4af31d['fY']>=0x0){var _0x37b5f2=this['nOriPTZPointNum'][_0x2434b6];this['pOriPTZPoints'][_0x2434b6][_0x37b5f2]['fX']=_0x4af31d['fX'],this['pOriPTZPoints'][_0x2434b6][_0x37b5f2]['fY']=_0x4af31d['fY'],this['nOriPTZPointNum'][_0x2434b6]=this['nOriPTZPointNum'][_0x2434b6]+0x1;}return _0xa87ede;}},{'key':'GetFishPTZFloor','value':function(_0x5d64c8,_0x230377,_0x20b682){var _0x2402ff,_0x2bb293,_0x51bf0f,_0x1f4a36,_0x11cb3a,_0x7fb709,_0x1491eb,_0x598378={'fX':0x0,'fY':0x0},_0x737f5e={'fX':0x0,'fY':0x0},_0x185f6e={'fX':0x0,'fY':0x0},_0x243ac0={};_0x1f4a36=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x11cb3a=(this['fRX1']+this['fRX2'])/0x2*0x1,_0x7fb709=(this['fRY1']+this['fRY2'])/0x2*_0x1f4a36,_0x1491eb=(this['fRX2']-this['fRX1'])/0x2*0x1,_0x598378['fX']=_0x5d64c8-0.5,_0x598378['fY']=_0x230377-0.5,_0x2402ff=this['pRenderParam'][_0x20b682]['fZoom'],_0x737f5e['fX']=_0x598378['fX'],_0x737f5e['fY']=_0x598378['fY']*this['pRenderParam'][_0x20b682]['fCosV']+_0x2402ff*this['pRenderParam'][_0x20b682]['fSinV'],_0x2bb293=_0x2402ff*this['pRenderParam'][_0x20b682]['fCosV']-_0x598378['fY']*this['pRenderParam'][_0x20b682]['fSinV'],_0x51bf0f=Math['sqrt'](_0x737f5e['fX']*_0x737f5e['fX']+_0x737f5e['fY']*_0x737f5e['fY']);var _0x441996=Math['sqrt'](_0x737f5e['fX']*_0x737f5e['fX']+_0x737f5e['fY']*_0x737f5e['fY']+_0x2bb293*_0x2bb293),_0x3be58c=Math['asin'](_0x51bf0f/_0x441996)/1.5707963*0.5;_0x737f5e['fX']=_0x3be58c*_0x737f5e['fX']/_0x51bf0f,_0x737f5e['fY']=_0x3be58c*_0x737f5e['fY']/_0x51bf0f,_0x185f6e['fX']=_0x737f5e['fX']*this['pRenderParam'][_0x20b682]['fCosH']-_0x737f5e['fY']*this['pRenderParam'][_0x20b682]['fSinH'],_0x185f6e['fY']=_0x737f5e['fX']*this['pRenderParam'][_0x20b682]['fSinH']+_0x737f5e['fY']*this['pRenderParam'][_0x20b682]['fCosH'],_0x243ac0['fX']=0x2*_0x185f6e['fX']*_0x1491eb+_0x11cb3a,_0x243ac0['fY']=0x2*_0x185f6e['fY']*_0x1491eb+_0x7fb709;var _0x15bcf5=this['nBasePTZPointNum'][_0x20b682];this['pBasePTZPoints'][_0x20b682][_0x15bcf5]['fX']=_0x185f6e['fX']+0.5,this['pBasePTZPoints'][_0x20b682][_0x15bcf5]['fY']=_0x185f6e['fY']+0.5,this['nBasePTZPointNum'][_0x20b682]=this['nBasePTZPointNum'][_0x20b682]+0x1;var _0x1e561a=this['fRX1']<=0x0?0x0:0x1*this['fRX1'],_0x19a04e=this['fRY1']<=0x0?0x0:this['fRY1']*_0x1f4a36,_0x470745=this['fRX2']>=0x1?0x1-_0x1e561a:0x1*this['fRX2']-_0x1e561a,_0x3ffe59=this['fRY2']>=0x1?_0x1f4a36-_0x19a04e:this['fRY2']*_0x1f4a36-_0x19a04e;if(_0x243ac0['fX']=(_0x243ac0['fX']-_0x1e561a)/_0x470745,_0x243ac0['fY']=(_0x243ac0['fY']-_0x19a04e)/_0x3ffe59,_0x243ac0['fX']<=0x1&&_0x243ac0['fY']<=0x1&&_0x243ac0['fX']>=0x0&&_0x243ac0['fY']>=0x0){var _0xf69c5b=this['nOriPTZPointNum'][_0x20b682];this['pOriPTZPoints'][_0x20b682][_0xf69c5b]['fX']=_0x243ac0['fX'],this['pOriPTZPoints'][_0x20b682][_0xf69c5b]['fY']=_0x243ac0['fY'],this['nOriPTZPointNum'][_0x20b682]=this['nOriPTZPointNum'][_0x20b682]+0x1;}return _0xa87ede;}},{'key':'GetFishPTZWALL','value':function(_0x38c74c,_0x5d9e53,_0x98f087){var _0x596ea3,_0x51bf3e,_0x5780c4,_0x3e49f7,_0x30dad9,_0x10ea85,_0x27a63e,_0x51e487,_0x31152b={'fX':0x0,'fY':0x0},_0x4df952={'fX':0x0,'fY':0x0},_0x5e7e33={'fX':0x0,'fY':0x0},_0x44bf25={};_0x30dad9=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x10ea85=(this['fRX1']+this['fRX2'])/0x2*0x1,_0x27a63e=(this['fRY1']+this['fRY2'])/0x2*_0x30dad9,_0x51e487=(this['fRX2']-this['fRX1'])/0x2*0x1,_0x31152b['fX']=_0x5d9e53-0.5,_0x31152b['fY']=_0x38c74c-0.5,_0x596ea3=this['pRenderParam'][_0x98f087]['fZoom'],_0x4df952['fX']=_0x31152b['fX'],_0x4df952['fY']=_0x31152b['fY']*this['pRenderParam'][_0x98f087]['fCosV']+_0x596ea3*this['pRenderParam'][_0x98f087]['fSinV'],_0x51bf3e=_0x596ea3*this['pRenderParam'][_0x98f087]['fCosV']-_0x31152b['fY']*this['pRenderParam'][_0x98f087]['fSinV'],_0x5e7e33['fX']=_0x4df952['fX']*this['pRenderParam'][_0x98f087]['fCosH']+_0x51bf3e*this['pRenderParam'][_0x98f087]['fSinH'],_0x5e7e33['fY']=_0x4df952['fY'],_0x5780c4=_0x51bf3e*this['pRenderParam'][_0x98f087]['fCosH']-_0x4df952['fX']*this['pRenderParam'][_0x98f087]['fSinH'],_0x3e49f7=Math['sqrt'](_0x5e7e33['fX']*_0x5e7e33['fX']+_0x5e7e33['fY']*_0x5e7e33['fY']);var _0x9e123=Math['sqrt'](_0x5e7e33['fX']*_0x5e7e33['fX']+_0x5e7e33['fY']*_0x5e7e33['fY']+_0x5780c4*_0x5780c4),_0x14461f=Math['asin'](_0x3e49f7/_0x9e123)/1.5707963*0.5;_0x44bf25['fX']=_0x14461f*_0x5e7e33['fX']/_0x3e49f7*_0x51e487*0x2+_0x10ea85,_0x44bf25['fY']=_0x14461f*_0x5e7e33['fY']/_0x3e49f7*_0x51e487*0x2+_0x27a63e;var _0x18649b=this['nBasePTZPointNum'][_0x98f087];this['pBasePTZPoints'][_0x98f087][_0x18649b]['fX']=_0x14461f*_0x5e7e33['fX']/_0x3e49f7+0.5,this['pBasePTZPoints'][_0x98f087][_0x18649b]['fY']=_0x14461f*_0x5e7e33['fY']/_0x3e49f7+0.5,this['nBasePTZPointNum'][_0x98f087]=this['nBasePTZPointNum'][_0x98f087]+0x1;var _0x240ce4=this['fRX1']<=0x0?0x0:0x1*this['fRX1'],_0x5017ea=this['fRY1']<=0x0?0x0:this['fRY1']*_0x30dad9,_0x22234a=this['fRX2']>=0x1?0x1-_0x240ce4:0x1*this['fRX2']-_0x240ce4,_0x1a56a0=this['fRY2']>=0x1?_0x30dad9-_0x5017ea:this['fRY2']*_0x30dad9-_0x5017ea;if(_0x44bf25['fX']=(_0x44bf25['fX']-_0x240ce4)/_0x22234a,_0x44bf25['fY']=(_0x44bf25['fY']-_0x5017ea)/_0x1a56a0,_0x44bf25['fX']<=0x1&&_0x44bf25['fY']<=0x1&&_0x44bf25['fX']>=0x0&&_0x44bf25['fY']>=0x0){var _0x19cc2f=this['nOriPTZPointNum'][_0x98f087];this['pOriPTZPoints'][_0x98f087][_0x19cc2f]['fX']=_0x44bf25['fX'],this['pOriPTZPoints'][_0x98f087][_0x19cc2f]['fY']=_0x44bf25['fY'],this['nOriPTZPointNum'][_0x98f087]=this['nOriPTZPointNum'][_0x98f087]+0x1;}return _0xa87ede;}},{'key':'GetPanoPTZCeiling','value':function(_0x263f7b){if(null==this['pRenderParam'][_0x263f7b]||null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==this['pBasePTZPoints'][_0x263f7b])return _0x520965;var _0x22ec24,_0x2ebe10,_0x186506=this['nBasePTZPointNum'][_0x263f7b];_0x22ec24=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x2ebe10=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x22da37,_0x18297c=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRY1']<0x0||this['fRX1']<0x0)&&(this['fRX1']<0x0&&(_0x22da37=0x1*-this['fRX1'])>_0x18297c&&(_0x18297c=_0x22da37),this['fRX2']>0x1&&(_0x22da37=0x1*(this['fRX2']-0x1))>_0x18297c&&(_0x18297c=_0x22da37),this['fRY1']<0x0&&(_0x22da37=-this['fRY1']*_0x22ec24)>_0x18297c&&(_0x18297c=_0x22da37),this['fRY2']>0x1&&(_0x22da37=(this['fRY2']-0x1)*_0x22ec24)>_0x18297c&&(_0x18297c=_0x22da37));for(var _0xf6789b,_0x579bb=_0x18297c/_0x2ebe10,_0x1304b7={'fX':0x0,'fY':0x0},_0x16843f={'fX':0x0,'fY':0x0},_0x581f36=0x0;_0x581f36<_0x186506;++_0x581f36)if(_0x16843f['fX']=this['pBasePTZPoints'][_0x263f7b][_0x581f36]['fX'],_0x16843f['fY']=this['pBasePTZPoints'][_0x263f7b][_0x581f36]['fY'],!(Math['abs'](_0x16843f['fX']-0.5)<_0x4a23c6&&Math['abs'](_0x16843f['fY']-0.5)<_0x4a23c6)){var _0x27e377={'fX':0x0,'fY':0x0},_0x542b58={'fX':0x0,'fY':0x0};_0x27e377['fX']=_0x16843f['fX']-0.5,_0x27e377['fY']=_0x16843f['fY']-0.5,_0x542b58['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x542b58['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0x30de9a=Math['sqrt'](_0x27e377['fX']*_0x27e377['fX']+_0x27e377['fY']*_0x27e377['fY']),_0x3fb02f=Math['sqrt'](_0x542b58['fX']*_0x542b58['fX']+_0x542b58['fY']*_0x542b58['fY']);if(_0xf6789b=Math['acos']((_0x27e377['fX']*_0x542b58['fX']+_0x27e377['fY']*_0x542b58['fY'])/(_0x30de9a*_0x3fb02f)),_0x27e377['fX']*_0x542b58['fY']-_0x27e377['fY']*_0x542b58['fX']>0x0&&(_0xf6789b=6.2831852-_0xf6789b),_0x1304b7['fX']=_0xf6789b/6.2831853,_0x1304b7['fY']=(0x2*(0.5-_0x30de9a)-_0x579bb)/(0.8-_0x579bb),_0x1304b7['fY']>=0x0&&_0x1304b7['fX']>=0x0&&_0x1304b7['fY']<=0x1&&_0x1304b7['fX']<=0x1){var _0x2a305c=this['nPanoPTZPointNum'][_0x263f7b];this['pPanoPTZPoints'][_0x263f7b][_0x2a305c]['fX']=_0x1304b7['fX'],this['pPanoPTZPoints'][_0x263f7b][_0x2a305c]['fY']=_0x1304b7['fY'],this['nPanoPTZPointNum'][_0x263f7b]=this['nPanoPTZPointNum'][_0x263f7b]+0x1;}}return _0xa87ede;}},{'key':'GetPanoPTZFloor','value':function(_0x5d0fc0){if(null==this['pRenderParam'][_0x5d0fc0]||null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==this['pBasePTZPoints'][_0x5d0fc0])return _0x520965;var _0x100b2a,_0x18120b,_0x19ec44=this['nBasePTZPointNum'][_0x5d0fc0];_0x100b2a=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x18120b=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x543faf,_0x261275=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRY1']<0x0||this['fRX1']<0x0)&&(this['fRX1']<0x0&&(_0x543faf=0x1*-this['fRX1'])>_0x261275&&(_0x261275=_0x543faf),this['fRX2']>0x1&&(_0x543faf=0x1*(this['fRX2']-0x1))>_0x261275&&(_0x261275=_0x543faf),this['fRY1']<0x0&&(_0x543faf=-this['fRY1']*_0x100b2a)>_0x261275&&(_0x261275=_0x543faf),this['fRY2']>0x1&&(_0x543faf=(this['fRY2']-0x1)*_0x100b2a)>_0x261275&&(_0x261275=_0x543faf));for(var _0x2f2b37,_0x27bd4a=_0x261275/_0x18120b,_0x2a79e7={'fX':0x0,'fY':0x0},_0x10ed1b={'fX':0x0,'fY':0x0},_0x54ae89=0x0;_0x54ae89<_0x19ec44;++_0x54ae89)if(_0x10ed1b['fX']=this['pBasePTZPoints'][_0x5d0fc0][_0x54ae89]['fX'],_0x10ed1b['fY']=this['pBasePTZPoints'][_0x5d0fc0][_0x54ae89]['fY'],!(Math['abs'](_0x10ed1b['fX']-0.5)<_0x4a23c6&&Math['abs'](_0x10ed1b['fY']-0.5)<_0x4a23c6)){var _0x2ecec4={'fX':0x0,'fY':0x0},_0x2f6c97={'fX':0x0,'fY':0x0};_0x2ecec4['fX']=_0x10ed1b['fX']-0.5,_0x2ecec4['fY']=_0x10ed1b['fY']-0.5,_0x2f6c97['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x2f6c97['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0x4e4dea=Math['sqrt'](_0x2ecec4['fX']*_0x2ecec4['fX']+_0x2ecec4['fY']*_0x2ecec4['fY']),_0x186af7=Math['sqrt'](_0x2f6c97['fX']*_0x2f6c97['fX']+_0x2f6c97['fY']*_0x2f6c97['fY']);if(_0x2f2b37=Math['acos']((_0x2ecec4['fX']*_0x2f6c97['fX']+_0x2ecec4['fY']*_0x2f6c97['fY'])/(_0x4e4dea*_0x186af7)),_0x2ecec4['fX']*_0x2f6c97['fY']-_0x2ecec4['fY']*_0x2f6c97['fX']>0x0&&(_0x2f2b37=6.2831852-_0x2f2b37),_0x2a79e7['fX']=0x1-_0x2f2b37/6.2831853,_0x2a79e7['fY']=0x1-(0x2*(0.5-_0x4e4dea)-_0x27bd4a)/(0.8-_0x27bd4a),_0x2a79e7['fY']>=0x0&&_0x2a79e7['fX']>=0x0&&_0x2a79e7['fY']<=0x1&&_0x2a79e7['fX']<=0x1){var _0x16ff25=this['nPanoPTZPointNum'][_0x5d0fc0];this['pPanoPTZPoints'][_0x5d0fc0][_0x16ff25]['fX']=_0x2a79e7['fX'],this['pPanoPTZPoints'][_0x5d0fc0][_0x16ff25]['fY']=_0x2a79e7['fY'],this['nPanoPTZPointNum'][_0x5d0fc0]=this['nPanoPTZPointNum'][_0x5d0fc0]+0x1;}}return _0xa87ede;}},{'key':'GetPanoPTZWall','value':function(_0x42a7bd){if(null==this['pRenderParam'][_0x42a7bd]||null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==this['pBasePTZPoints'][_0x42a7bd])return _0x520965;var _0x564e3d,_0x3e602d,_0x423c9f=this['nBasePTZPointNum'][_0x42a7bd];_0x564e3d=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x3e602d=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x56aaa5,_0x1f4537,_0x54b6be,_0xb5f14d,_0x49fdb6,_0x2fb7bb=0x0,_0xf39383=0x1,_0x5125ea=0.1,_0x2b07de=0.9;this['fRX1']<0x0&&(_0x56aaa5=0x1*-this['fRX1'],_0x2fb7bb=_0x56aaa5/=0x2*_0x3e602d),this['fRX2']>0x1&&(_0x1f4537=0x1*(this['fRX2']-0x1),_0xf39383=0x1-(_0x1f4537/=0x2*_0x3e602d)),this['fRY1']<0x0&&(_0x54b6be=-this['fRY1']*_0x564e3d,_0x5125ea=(_0x54b6be/=0x2*_0x3e602d)>0.1?_0x54b6be:0.1),this['fRY2']>0x1&&(_0xb5f14d=(this['fRY2']-0x1)*_0x564e3d,_0x2b07de=(_0xb5f14d/=0x2*_0x3e602d)>0x1-0.9?0x1-_0xb5f14d:0.9);for(var _0x51c7d7={'fX':0x0,'fY':0x0},_0x15cbb7={'fX':0x0,'fY':0x0},_0x211521=0x0;_0x211521<_0x423c9f;++_0x211521){_0x15cbb7['fX']=this['pBasePTZPoints'][_0x42a7bd][_0x211521]['fX'],_0x15cbb7['fY']=this['pBasePTZPoints'][_0x42a7bd][_0x211521]['fY'];var _0x8074a7=0x2*_0x15cbb7['fX']*_0x3e602d,_0x445fec=0x2*_0x15cbb7['fY']*_0x3e602d;if(_0x49fdb6=Math['sqrt'](_0x3e602d*_0x3e602d-(_0x445fec-_0x3e602d)*(_0x445fec-_0x3e602d)),!(Math['abs'](_0x49fdb6)<_0x4a23c6)&&(_0x15cbb7['fX']=_0x3e602d*(_0x8074a7-_0x3e602d)/_0x49fdb6+_0x3e602d,_0x15cbb7['fY']=_0x445fec,_0x51c7d7['fX']=(_0x15cbb7['fX']-0x2*_0x2fb7bb*_0x3e602d)/(0x2*(_0xf39383-_0x2fb7bb)*_0x3e602d),_0x51c7d7['fY']=(_0x15cbb7['fY']-0x2*_0x5125ea*_0x3e602d)/(0x2*(_0x2b07de-_0x5125ea)*_0x3e602d),_0x51c7d7['fY']>=0x0&&_0x51c7d7['fX']>=0x0&&_0x51c7d7['fY']<=0x1&&_0x51c7d7['fX']<=0x1)){var _0x4f41e4=this['nPanoPTZPointNum'][_0x42a7bd];this['pPanoPTZPoints'][_0x42a7bd][_0x4f41e4]['fX']=_0x51c7d7['fX'],this['pPanoPTZPoints'][_0x42a7bd][_0x4f41e4]['fY']=_0x51c7d7['fY'],this['nPanoPTZPointNum'][_0x42a7bd]=this['nPanoPTZPointNum'][_0x42a7bd]+0x1;}}return _0xa87ede;}},{'key':'GetPointPano2FishCeiling','value':function(_0x2f3dd8,_0x7b3d9e,_0x3c003f){if(null==_0x2f3dd8||null==this['pRenderParam'][this['nWndPort']])return _0x520965;var _0x1ca50d,_0x4730c9;_0x1ca50d=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x4730c9=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x1f6f27,_0x49d370=0x0,_0x4968e2=0x1,_0x30c450=0x0,_0x4aba84=0x1,_0xfcab6e=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&((_0x1f6f27=0x1*-this['fRX1'])>_0xfcab6e&&(_0xfcab6e=_0x1f6f27),_0x49d370=_0x1f6f27/=0x2*_0x4730c9),this['fRX2']>0x1&&((_0x1f6f27=0x1*(this['fRX2']-0x1))>_0xfcab6e&&(_0xfcab6e=_0x1f6f27),_0x4968e2=0x1-(_0x1f6f27/=0x2*_0x4730c9)),this['fRY1']<0x0&&((_0x1f6f27=-this['fRY1']*_0x1ca50d)>_0xfcab6e&&(_0xfcab6e=_0x1f6f27),_0x30c450=_0x1f6f27/=0x2*_0x4730c9),this['fRY2']>0x1&&((_0x1f6f27=(this['fRY2']-0x1)*_0x1ca50d)>_0xfcab6e&&(_0xfcab6e=_0x1f6f27),_0x4aba84=0x1-(_0x1f6f27/=0x2*_0x4730c9)));var _0x236287,_0x1b3214,_0x39bc45=_0xfcab6e/_0x4730c9,_0x59c55c={},_0x1adaf={};return _0x59c55c['fX']=_0x7b3d9e,_0x59c55c['fY']=(0.8-_0x39bc45)*_0x3c003f+_0x39bc45,_0x236287=6.2831853*_0x59c55c['fX']+this['pRenderParam'][this['nWndPort']]['fAngle'],_0x1b3214=0.5*(0x1-_0x59c55c['fY']),_0x1adaf['fX']=0.5-_0x1b3214*Math['sin'](_0x236287),_0x1adaf['fY']=0.5+_0x1b3214*Math['cos'](_0x236287),_0x1adaf['fX']=(_0x1adaf['fX']-_0x49d370)/(_0x4968e2-_0x49d370),_0x1adaf['fY']=(_0x1adaf['fY']-_0x30c450)/(_0x4aba84-_0x30c450),_0x2f3dd8['fX']=_0x1adaf['fX'],_0x2f3dd8['fY']=_0x1adaf['fY'],_0xa87ede;}},{'key':'GetPointPano2FishFloor','value':function(_0x307474,_0xee954,_0x3a3359){if(null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==_0x307474)return _0x31ddcf;var _0x311c35,_0x29e646;_0x311c35=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x29e646=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x42c110,_0x530bbd=0x0,_0x45eecf=0x1,_0x12cd4a=0x0,_0x405165=0x1,_0x5a35b9=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&((_0x42c110=0x1*-this['fRX1'])>_0x5a35b9&&(_0x5a35b9=_0x42c110),_0x530bbd=_0x42c110/=0x2*_0x29e646),this['fRX2']>0x1&&((_0x42c110=0x1*(this['fRX2']-0x1))>_0x5a35b9&&(_0x5a35b9=_0x42c110),_0x45eecf=0x1-(_0x42c110/=0x2*_0x29e646)),this['fRY1']<0x0&&((_0x42c110=-this['fRY1']*_0x311c35)>_0x5a35b9&&(_0x5a35b9=_0x42c110),_0x12cd4a=_0x42c110/=0x2*_0x29e646),this['fRY2']>0x1&&((_0x42c110=(this['fRY2']-0x1)*_0x311c35)>_0x5a35b9&&(_0x5a35b9=_0x42c110),_0x405165=0x1-(_0x42c110/=0x2*_0x29e646)));var _0x1ce7ff,_0x30ab48,_0x21a80b=_0x5a35b9/_0x29e646,_0x38a985={},_0x3a7f13={};return _0x38a985['fX']=0x1-_0xee954,_0x38a985['fY']=(0.8-_0x21a80b)*(0x1-_0x3a3359)+_0x21a80b,_0x1ce7ff=6.2831853*_0x38a985['fX']+this['pRenderParam'][this['nWndPort']]['fAngle'],_0x30ab48=0.5*(0x1-_0x38a985['fY']),_0x3a7f13['fX']=0.5-_0x30ab48*Math['sin'](_0x1ce7ff),_0x3a7f13['fY']=0.5+_0x30ab48*Math['cos'](_0x1ce7ff),_0x3a7f13['fX']=(_0x3a7f13['fX']-_0x530bbd)/(_0x45eecf-_0x530bbd),_0x3a7f13['fY']=(_0x3a7f13['fY']-_0x12cd4a)/(_0x405165-_0x12cd4a),_0x307474['fX']=_0x3a7f13['fX'],_0x307474['fY']=_0x3a7f13['fY'],_0xa87ede;}},{'key':'GetPointPano2FishWall','value':function(_0x48426c,_0x191ed4,_0x4abadc){if(null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==_0x48426c)return _0x31ddcf;var _0xb24078,_0x4bdf86;_0xb24078=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x4bdf86=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x42a26f,_0x12f390,_0x4672e7,_0x31bf4b,_0x215ccf=0x0,_0x42b094=0x1,_0x6ef8c2=0.1,_0x31cf8e=0.9,_0xb08d5e=0x0,_0x33e210=0x1,_0x34cc54=0x0,_0x490ecc=0x1;this['fRX1']<0x0&&(_0x42a26f=0x1*-this['fRX1'],_0x215ccf=_0x42a26f/=0x2*_0x4bdf86,_0xb08d5e=_0x42a26f),this['fRX2']>0x1&&(_0x12f390=0x1*(this['fRX2']-0x1),_0x42b094=0x1-(_0x12f390/=0x2*_0x4bdf86),_0x33e210=0x1-_0x12f390),this['fRY1']<0x0&&(_0x4672e7=-this['fRY1']*_0xb24078,_0x6ef8c2=(_0x4672e7/=0x2*_0x4bdf86)>0.1?_0x4672e7:0.1,_0x34cc54=_0x4672e7),this['fRY2']>0x1&&(_0x31bf4b=(this['fRY2']-0x1)*_0xb24078,_0x31cf8e=(_0x31bf4b/=0x2*_0x4bdf86)>0x1-0.9?0x1-_0x31bf4b:0.9,_0x490ecc=0x1-_0x31bf4b);var _0x41527b={},_0xcbadff={};_0x41527b['fX']=_0x191ed4*(_0x42b094-_0x215ccf)+_0x215ccf,_0x41527b['fY']=_0x4abadc*(_0x31cf8e-_0x6ef8c2)+_0x6ef8c2;var _0x4dc2a0=Math['sqrt'](0.25-(_0x41527b['fY']-0.5)*(_0x41527b['fY']-0.5));return _0xcbadff['fX']=(_0x41527b['fX']-0.5)*_0x4dc2a0/0.5+0.5,_0xcbadff['fY']=_0x41527b['fY'],_0xcbadff['fX']=(_0xcbadff['fX']-_0xb08d5e)/(_0x33e210-_0xb08d5e),_0xcbadff['fY']=(_0xcbadff['fY']-_0x34cc54)/(_0x490ecc-_0x34cc54),_0x48426c['fX']=_0xcbadff['fX'],_0x48426c['fY']=_0xcbadff['fY'],_0xa87ede;}},{'key':'UpdatePTZPosition','value':function(_0x2da374,_0x47dd34,_0x416e91){if(null==this['pRenderParam'][_0x2da374])return _0x520965;var _0x3368ab={'fHAngleSin':0x0,'fHAngleCos':0x0,'fVAngleSin':0x0,'fVAngleCos':0x0},_0x22c4dc=_0xa87ede;if(_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x2da374]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x2da374]['nDisplayEffect']){if((_0x22c4dc=this['ComputeAngleVertical'](_0x47dd34,_0x416e91,_0x3368ab,this['pRenderParam'][_0x2da374]['nDisplayEffect']))!=_0xa87ede)return _0x22c4dc;}else{if(_0x186ff9['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x2da374]['nDisplayEffect'])return _0x86aef9;if((_0x22c4dc=this['ComputeAngleHorizontal'](_0x47dd34,_0x416e91,_0x3368ab))!=_0xa87ede)return _0x22c4dc;}return 0x0==this['IsInImage'](this['fRX1'],this['fRX2'],this['fRY1'],this['fRY2'],_0x3368ab,this['pRenderParam'][_0x2da374]['fZoom'],this['pRenderParam'][_0x2da374]['nDisplayEffect'])?_0x31ddcf:(this['pRenderParam'][_0x2da374]['fCosH']=_0x3368ab['fHAngleCos'],this['pRenderParam'][_0x2da374]['fSinH']=_0x3368ab['fHAngleSin'],this['pRenderParam'][_0x2da374]['fCosV']=_0x3368ab['fVAngleCos'],this['pRenderParam'][_0x2da374]['fSinV']=_0x3368ab['fVAngleSin'],_0xa87ede);}},{'key':'JudgeDisplayEffect','value':function(_0x1c7058){var _0x4ea6e2=0x0;switch(_0x4ea6e2){case 0x0:return _0x4ea6e2=this['GetPlaceType'](_0x1c7058),0x4==this['nPlaceType']&&(this['nPlaceType']=0x0),_0xa87ede;case 0x3:return(_0x4ea6e2=this['GetPlaceType'](_0x1c7058))==this['nPlaceType']||0x4==this['nPlaceType']?_0xa87ede:_0x86aef9;case 0x2:case 0x1:return(_0x4ea6e2=this['GetPlaceType'](_0x1c7058))==this['nPlaceType']||0x4==_0x4ea6e2?_0xa87ede:_0x86aef9;default:return _0x86aef9;}return _0x86aef9;}},{'key':'GetPlaceType','value':function(_0x28fcf9){switch(_0x28fcf9){case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_CEILING']:return 0x3;case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x186ff9['SR_DE_FISH_PANARAMA_FLOOR_180']:case _0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:case _0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:return 0x2;case _0x186ff9['SR_DE_FISH_PTZ_WALL']:case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:return 0x1;case _0x186ff9['SR_DE_FISH_SEMISPHERE']:case _0x186ff9['SR_DE_FISH_ORIGINAL']:case _0x186ff9['SR_DE_FISH_PLANET']:case _0x186ff9['SR_DE_FISH_SPHERE']:case _0x186ff9['SR_DE_FISH_PLANET']:return 0x4;default:return 0x0;}return 0x0;}},{'key':'SetFishParam','value':function(_0x1f35b5,_0x43d6c5){if(_0x1f35b5<0x0||_0x1f35b5>=_0x379995)return _0x31ddcf;if(null==_0x43d6c5)return _0x31ddcf;if(null==this['pRenderParam'][_0x1f35b5])return _0x520965;var _0x144707=_0xa87ede;switch(_0x43d6c5['nFishParamType']){case _0x392c27:if((_0x144707=this['UpdateCircyeParam'](_0x43d6c5['fRXLeft'],_0x43d6c5['fRXRight'],_0x43d6c5['fRYTop'],_0x43d6c5['fRYBottom']))!=_0xa87ede)return _0x144707;this['pRenderParam'][_0x1f35b5]['bCut']=_0x43d6c5['bCut'],this['bBlack']=_0x43d6c5['bBlack'];break;case _0x5ca12e:if(_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect'])return _0x86aef9;if((_0x144707=this['UpdateWideScanAngle'](_0x1f35b5,_0x43d6c5['fAngle']))!=_0xa87ede)return _0x144707;this['pFishParam'][_0x1f35b5]['fAngle']=_0x43d6c5['fAngle'];break;case _0x378a81:if(_0x186ff9['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PTZ_CEILING']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PTZ_FLOOR']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect'])return _0x86aef9;if((_0x144707=this['UpdateRangeParam'](_0x1f35b5,_0x43d6c5['fZoom']))!=_0xa87ede)return _0x144707;this['pFishParam'][_0x1f35b5]['fZoom']=_0x43d6c5['fZoom'];break;case _0x3be196:if(_0x186ff9['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PTZ_CEILING']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PTZ_FLOOR']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect'])return _0x86aef9;if((_0x144707=this['UpdatePTZPosition'](_0x1f35b5,_0x43d6c5['fPTZX'],_0x43d6c5['fPTZY'],this['pRenderParam'][_0x1f35b5]['fZoom'],!0x0))!=_0xa87ede)return _0x144707;this['pFishParam'][_0x1f35b5]['fPTZX']=_0x43d6c5['fPTZX'],this['pFishParam'][_0x1f35b5]['fPTZY']=_0x43d6c5['fPTZY'];break;default:return _0x86aef9;}return _0x144707=this['ComputePTZPoints']();}},{'key':'GetFishParam','value':function(_0x2cc8ea,_0x26ceb1){return _0x2cc8ea<0x0||_0x2cc8ea>=_0x379995||null==_0x26ceb1||null==this['pFishParam'][_0x2cc8ea]?_0x31ddcf:(_0x26ceb1['fRXLeft']=this['fRX1'],_0x26ceb1['fRXRight']=this['fRX2'],_0x26ceb1['fRYTop']=this['fRY1'],_0x26ceb1['fRYBottom']=this['fRY2'],_0x26ceb1['bBlack']=this['bBlack'],_0x26ceb1['bCut']=this['pRenderParam'][_0x2cc8ea]['bCut'],_0x26ceb1['nFishParamType']=this['pFishParam'][_0x2cc8ea]['nFishParamType'],_0x26ceb1['fAngle']=this['pFishParam'][_0x2cc8ea]['fAngle'],_0x26ceb1['fZoom']=this['pFishParam'][_0x2cc8ea]['fZoom'],_0x26ceb1['fPTZX']=this['pFishParam'][_0x2cc8ea]['fPTZX'],_0x26ceb1['fPTZY']=this['pFishParam'][_0x2cc8ea]['fPTZY'],_0xa87ede);}},{'key':'GetRenderParam','value':function(_0x357f40,_0x215a6a){return _0x357f40<0x0||_0x357f40>=_0x379995||null==_0x215a6a||null==this['pRenderParam'][_0x357f40]?_0x31ddcf:(_0x215a6a['fRXLeft']=this['fRX1'],_0x215a6a['fRXRight']=this['fRX2'],_0x215a6a['fRYTop']=this['fRY1'],_0x215a6a['fRYBottom']=this['fRY2'],_0x215a6a['bBlack']=this['bBlack'],_0x215a6a['fCosH']=this['pRenderParam'][_0x357f40]['fCosH'],_0x215a6a['fSinH']=this['pRenderParam'][_0x357f40]['fSinH'],_0x215a6a['fCosV']=this['pRenderParam'][_0x357f40]['fCosV'],_0x215a6a['fSinV']=this['pRenderParam'][_0x357f40]['fSinV'],_0x215a6a['fAngle']=this['pRenderParam'][_0x357f40]['fAngle'],_0x215a6a['fZoom']=this['pRenderParam'][_0x357f40]['fZoom'],_0x215a6a['nDisplayEffect']=this['pRenderParam'][_0x357f40]['nDisplayEffect'],_0x215a6a['bCut']=this['pRenderParam'][_0x357f40]['bCut'],_0xa87ede);}},{'key':'UpdateCircyeParam','value':function(_0x3c2410,_0x304e26,_0x834a20,_0x344cab){if(_0x3c2410<=-0.5||_0x3c2410>=0.4||_0x304e26<=0.6||_0x304e26>=1.5||_0x834a20<=-0.5||_0x834a20>=0.4||_0x344cab<=0.6||_0x344cab>=1.5||_0x3c2410+_0x304e26<=0.8||_0x3c2410+_0x304e26>=1.2||_0x834a20+_0x344cab<=0.8||_0x834a20+_0x344cab>=1.2)return _0x31ddcf;if(_0x3c2410<0x0||_0x304e26>0x1||_0x834a20<0x0||_0x344cab>0x1){for(var _0x49ed0d=0x0;_0x49ed0d<_0x379995;++_0x49ed0d)if(null!=this['pRenderParam'][_0x49ed0d]&&(_0x186ff9['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x49ed0d]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x49ed0d]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x49ed0d]['nDisplayEffect'])){var _0xd74afc={};if(_0xd74afc['fHAngleCos']=this['pRenderParam'][_0x49ed0d]['fCosH'],_0xd74afc['fHAngleSin']=this['pRenderParam'][_0x49ed0d]['fSinH'],_0xd74afc['fVAngleCos']=this['pRenderParam'][_0x49ed0d]['fCosV'],_0xd74afc['fVAngleSin']=this['pRenderParam'][_0x49ed0d]['fSinV'],0x0==this['IsInImage'](_0x3c2410,_0x304e26,_0x834a20,_0x344cab,_0xd74afc,this['pRenderParam'][_0x49ed0d]['fZoom'],this['pRenderParam'][_0x49ed0d]['nDisplayEffect']))return _0x31ddcf;}}return this['fRX1']=_0x3c2410,this['fRX2']=_0x304e26,this['fRY1']=_0x834a20,this['fRY2']=_0x344cab,_0xa87ede;}},{'key':'UpdateWideScanAngle','value':function(_0x1a368e,_0x3c704b){return null==this['pRenderParam'][_0x1a368e]?_0x520965:(_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']==this['pRenderParam'][_0x1a368e]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']==this['pRenderParam'][_0x1a368e]['nDisplayEffect']?this['pRenderParam'][_0x1a368e]['fAngle']=_0x3c704b:_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']!=this['pRenderParam'][_0x1a368e]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']!=this['pRenderParam'][_0x1a368e]['nDisplayEffect']||(this['pRenderParam'][_0x1a368e]['fAngle']=-_0x3c704b),_0xa87ede);}},{'key':'ComputeAngleVertical','value':function(_0x44631d,_0x3f14f5,_0xa133ad,_0x428ea9){var _0x5db699=_0x44631d,_0x3501fe=_0x3f14f5,_0xd2137a=Math['sqrt']((_0x3501fe-0.5)*(_0x3501fe-0.5)+(_0x5db699-0.5)*(_0x5db699-0.5));if(_0xd2137a>0.5)return _0x31ddcf;if(_0xd2137a<0.001)return _0xa133ad['fVAngleCos']=0x1,_0xa133ad['fVAngleSin']=0x0,_0xa133ad['fHAngleCos']=0x1,_0xa133ad['fHAngleSin']=0x0,_0xa87ede;if(_0x428ea9==_0x186ff9['SR_DE_FISH_PTZ_CEILING']){_0xa133ad['fHAngleCos']=(0.5-_0x3501fe)/_0xd2137a,_0xa133ad['fHAngleSin']=(0.5-_0x5db699)/_0xd2137a;var _0x4cbe61=_0xd2137a*_0x530a52;_0xa133ad['fVAngleCos']=Math['cos'](_0x4cbe61),_0xa133ad['fVAngleSin']=Math['sin'](_0x4cbe61);}else{if(_0x428ea9!=_0x186ff9['SR_DE_FISH_PTZ_FLOOR'])return _0x31ddcf;_0xa133ad['fHAngleCos']=(_0x3501fe-0.5)/_0xd2137a,_0xa133ad['fHAngleSin']=(0.5-_0x5db699)/_0xd2137a;var _0x3a4040=_0xd2137a*_0x530a52;_0xa133ad['fVAngleCos']=Math['cos'](_0x3a4040),_0xa133ad['fVAngleSin']=Math['sin'](_0x3a4040);}return _0xa87ede;}},{'key':'ComputeAngleHorizontal','value':function(_0x29818c,_0x5b806c,_0x317efc){var _0x37f326,_0x10f5ae,_0xf18d33,_0x551c74,_0x45cf44,_0x384585,_0x530308,_0x578f2e=_0x29818c;return(_0x5b806c-(_0x45cf44=0.5))*(_0x5b806c-_0x45cf44)+(_0x578f2e-_0x45cf44)*(_0x578f2e-_0x45cf44)>0.25?_0x31ddcf:(_0x384585=(_0x5b806c-_0x45cf44)/_0x45cf44*_0x530a52/0x2,_0x37f326=Math['cos'](_0x384585),_0x10f5ae=Math['sin'](_0x384585),(_0x578f2e-_0x45cf44)/_0x45cf44/_0x37f326>0x1||(_0x578f2e-_0x45cf44)/_0x45cf44/_0x37f326<-0x1?_0x31ddcf:(_0x530308=(_0x578f2e-_0x45cf44)/_0x45cf44/_0x37f326*_0x530a52/0x2,_0xf18d33=Math['cos'](_0x530308),_0x551c74=Math['sin'](_0x530308),_0x317efc['fVAngleCos']=_0x37f326,_0x317efc['fVAngleSin']=_0x10f5ae,_0x317efc['fHAngleCos']=_0xf18d33,_0x317efc['fHAngleSin']=_0x551c74,_0xa87ede));}},{'key':'IsInImage','value':function(_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e,_0x34b532,_0x5075bd){return 0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0x1,0.5,_0x5075bd)&&(0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0x0,0.5,_0x5075bd)&&(0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0.5,0x1,_0x5075bd)&&(0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0.5,0x0,_0x5075bd)&&(0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0x0,0x0,_0x5075bd)&&(0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0x0,0x1,_0x5075bd)&&(0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0x1,0x1,_0x5075bd)&&0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0x1,0x0,_0x5075bd)))))));}},{'key':'IsOutofImage','value':function(_0x55554,_0x5cba81,_0x39725d,_0x4b39ef,_0x173db4,_0x33d145,_0x4dd928,_0x4b8cf0,_0x571801,_0x55c4c5,_0x2d5629,_0x302c59){var _0x1a12f8,_0x40381b,_0x33acd8,_0x1be963,_0x4569de,_0x87404c,_0x41254e,_0x42ce74,_0x9f0377,_0x186da2,_0x3b320a,_0x37f2f4,_0xff0b8f;if(0x1,_0x3b320a=(_0x55554+_0x5cba81)/0x2*0x1,_0x37f2f4=(_0x39725d+_0x4b39ef)/0x2*(_0x186da2=(_0x5cba81-_0x55554)/(_0x4b39ef-_0x39725d)),_0xff0b8f=(_0x5cba81-_0x55554)/0x2*0x1,_0x302c59==_0x186ff9['SR_DE_FISH_PTZ_CEILING']){if(_0x40381b=_0x55c4c5-0.5,_0x33acd8=(_0x1a12f8=0.5-_0x2d5629)*_0x4dd928+(_0x87404c=_0x571801)*_0x4b8cf0,(_0x41254e=_0x87404c*_0x4dd928-_0x1a12f8*_0x4b8cf0)<=0x0)return!0x0;_0x9f0377=Math['sqrt'](_0x40381b*_0x40381b+_0x33acd8*_0x33acd8);var _0x23e843=Math['sqrt'](_0x40381b*_0x40381b+_0x33acd8*_0x33acd8+_0x41254e*_0x41254e),_0x3db894=Math['asin'](_0x9f0377/_0x23e843)/1.5707963*0.5;if(_0x4569de=(-((_0x40381b=_0x3db894*_0x40381b/_0x9f0377)*_0x33d145+(_0x33acd8=_0x3db894*_0x33acd8/_0x9f0377)*_0x173db4)*_0xff0b8f*0x2+_0x37f2f4)/_0x186da2,(_0x1be963=((_0x40381b*_0x173db4-_0x33acd8*_0x33d145)*_0xff0b8f*0x2+_0x3b320a)/0x1)<0x0||_0x1be963>0x1||_0x4569de<0x0||_0x4569de>0x1)return!0x0;}if(_0x302c59==_0x186ff9['SR_DE_FISH_PTZ_FLOOR']){if(_0x40381b=_0x55c4c5-0.5,_0x33acd8=(_0x1a12f8=_0x2d5629-0.5)*_0x4dd928+(_0x87404c=_0x571801)*_0x4b8cf0,(_0x41254e=_0x87404c*_0x4dd928-_0x1a12f8*_0x4b8cf0)<=0x0)return!0x0;_0x9f0377=Math['sqrt'](_0x40381b*_0x40381b+_0x33acd8*_0x33acd8);var _0x283f42=Math['sqrt'](_0x40381b*_0x40381b+_0x33acd8*_0x33acd8+_0x41254e*_0x41254e),_0xaf09b9=Math['asin'](_0x9f0377/_0x283f42)/1.5707963*0.5;if(_0x4569de=(((_0x40381b=_0xaf09b9*_0x40381b/_0x9f0377)*_0x33d145+(_0x33acd8=_0xaf09b9*_0x33acd8/_0x9f0377)*_0x173db4)*_0xff0b8f*0x2+_0x37f2f4)/_0x186da2,(_0x1be963=((_0x40381b*_0x173db4-_0x33acd8*_0x33d145)*_0xff0b8f*0x2+_0x3b320a)/0x1)<0x0||_0x1be963>0x1||_0x4569de<0x0||_0x4569de>0x1)return!0x0;}if(_0x302c59==_0x186ff9['SR_DE_FISH_PTZ_WALL']){if(_0x1be963=(_0x40381b=_0x55c4c5-0.5)*_0x173db4+(_0x41254e=(_0x87404c=_0x571801)*_0x4dd928-(_0x1a12f8=_0x2d5629-0.5)*_0x4b8cf0)*_0x33d145,_0x4569de=_0x33acd8=_0x1a12f8*_0x4dd928+_0x87404c*_0x4b8cf0,(_0x42ce74=_0x41254e*_0x173db4-_0x40381b*_0x33d145)<=0x0)return!0x0;_0x9f0377=Math['sqrt'](_0x1be963*_0x1be963+_0x4569de*_0x4569de);var _0x19d8a7=Math['sqrt'](_0x1be963*_0x1be963+_0x4569de*_0x4569de+_0x42ce74*_0x42ce74),_0xfca511=Math['asin'](_0x9f0377/_0x19d8a7)/1.5707963*0.5;if(_0x4569de=(_0xfca511*_0x4569de/_0x9f0377*_0xff0b8f*0x2+_0x37f2f4)/_0x186da2,(_0x1be963=(_0xfca511*_0x1be963/_0x9f0377*_0xff0b8f*0x2+_0x3b320a)/0x1)<0x0||_0x1be963>0x1||_0x4569de<0x0||_0x4569de>0x1)return!0x0;}return!0x1;}},{'key':'ComputePTZPoints','value':function(){if(_0x3cf544==this['nWndPort'])return _0x520965;for(var _0x58c912=0x0;_0x58c912<_0x379995;++_0x58c912)if(null!=this['pRenderParam'][_0x58c912]&&(_0x186ff9['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x58c912]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x58c912]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x58c912]['nDisplayEffect'])){var _0x242d80=_0xa87ede;if(this['nPTZDisplayMode']==_0x495db0){if(_0x242d80=this['GetRangePoints'](_0x58c912),_0xa87ede!=_0x242d80)continue;if(_0x242d80=this['TransformPTZRangePoints'](_0x58c912),_0xa87ede!=_0x242d80)continue;}else{if(this['nPTZDisplayMode']==_0x150ab7&&(_0x242d80=this['GetRectPoints'](_0x58c912),_0xa87ede!=_0x242d80))continue;}}return _0xa87ede;}},{'key':'GetWndPort','value':function(){return this['nWndPort'];}},{'key':'GetPTZDisplayMode','value':function(){return this['nPTZDisplayMode'];}},{'key':'GetPTZColor','value':function(_0x50ee0b,_0x3dbb47){return _0x50ee0b<0x0||_0x50ee0b>=_0x379995||null==_0x3dbb47?_0x31ddcf:(_0x3dbb47['fA']=this['stPTZColor'][_0x50ee0b]['fA'],_0x3dbb47['fR']=this['stPTZColor'][_0x50ee0b]['fR'],_0x3dbb47['fG']=this['stPTZColor'][_0x50ee0b]['fG'],_0x3dbb47['fB']=this['stPTZColor'][_0x50ee0b]['fB'],null!=this['pPTZSetColor']&&(Math['abs'](this['pPTZSetColor'][_0x50ee0b]['fA'])<_0x4a23c6||Math['abs'](this['pPTZSetColor'][_0x50ee0b]['fR'])<_0x4a23c6||Math['abs'](this['pPTZSetColor'][_0x50ee0b]['fG'])<_0x4a23c6||Math['abs'](this['pPTZSetColor'][_0x50ee0b]['fB'])<_0x4a23c6)&&(_0x3dbb47['fA']=this['pPTZSetColor'][_0x50ee0b]['fA'],_0x3dbb47['fR']=this['pPTZSetColor'][_0x50ee0b]['fR'],_0x3dbb47['fG']=this['pPTZSetColor'][_0x50ee0b]['fG'],_0x3dbb47['fB']=this['pPTZSetColor'][_0x50ee0b]['fB']),_0xa87ede);}},{'key':'SetPTZColor','value':function(_0x5e498c,_0x1b4ad4){if(_0x5e498c<0x0||_0x5e498c>=_0x379995)return _0x31ddcf;if(null==_0x1b4ad4)return _0x31ddcf;if(null==this['pPTZSetColor']){this['pPTZSetColor']=[];for(var _0x533551=0x0;_0x533551<_0x379995;++_0x533551)this['pPTZSetColor'][_0x533551]={},this['pPTZSetColor'][_0x533551]['fR']=0x0,this['pPTZSetColor'][_0x533551]['fG']=0x0,this['pPTZSetColor'][_0x533551]['fB']=0x0,this['pPTZSetColor'][_0x533551]['fA']=0x1;}return this['pPTZSetColor'][_0x5e498c]['fR']=_0x1b4ad4['fR'],this['pPTZSetColor'][_0x5e498c]['fG']=_0x1b4ad4['fG'],this['pPTZSetColor'][_0x5e498c]['fB']=_0x1b4ad4['fB'],this['pPTZSetColor'][_0x5e498c]['fA']=_0x1b4ad4['fA'],_0xa87ede;}},{'key':'IsPTZSelected','value':function(_0x3173db){return!(_0x3173db<0x0||_0x3173db>=_0x379995)&&this['bPTZSelected'][_0x3173db];}},{'key':'GetPTZPort','value':function(_0x2294b2,_0xb0dbfe,_0xa80085){if(this['nWndPort']==_0x3cf544)return _0x520965;if(null==this['pRenderParam'][this['nWndPort']])return _0x520965;var _0x15d626=_0x379995,_0x16f17c={};_0x16f17c['fX']=_0x2294b2,_0x16f17c['fY']=_0xb0dbfe;for(var _0x2c3539=0x0;_0x2c3539<_0x379995;++_0x2c3539)this['bPTZSelected'][_0x2c3539]=!0x1;if(this['nPTZDisplayMode']==_0x495db0){switch(this['pRenderParam'][this['nWndPort']]['nDisplayEffect']){case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:this['GetPointPano2FishFloor'](_0x16f17c,_0x2294b2,_0xb0dbfe);break;case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:this['GetPointPano2FishCeiling'](_0x16f17c,_0x2294b2,_0xb0dbfe);break;case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:this['GetPointPano2FishWall'](_0x16f17c,_0x2294b2,_0xb0dbfe);}for(var _0x398890=0x0;_0x398890<_0x379995;++_0x398890)if(0x0!=this['nOriPTZPointNum'][_0x398890]){var _0x2c092e={};_0x2c092e['fX']=this['pOriPTZPoints'][_0x398890][0x0]['fX'],_0x2c092e['fY']=this['pOriPTZPoints'][_0x398890][0x0]['fY'];var _0x6358e2={};_0x6358e2['fX']=this['pOriPTZPoints'][_0x398890][0x0]['fX'],_0x6358e2['fY']=this['pOriPTZPoints'][_0x398890][0x0]['fY'];for(var _0x1bdca0=0x1;_0x1bdca0<this['nOriPTZPointNum'][_0x398890];++_0x1bdca0)this['GetPTZRectange'](_0x2c092e,_0x6358e2,this['pOriPTZPoints'][_0x398890][_0x1bdca0]);if(_0x16f17c['fX']<=_0x2c092e['fX']&&_0x16f17c['fX']>=_0x6358e2['fX']&&_0x16f17c['fY']>=_0x6358e2['fY']&&_0x16f17c['fY']<=_0x2c092e['fY']){_0x15d626=_0x398890;break;}}}else{if(this['nPTZDisplayMode']!=_0x150ab7)return _0x86aef9;for(var _0x200f11=0x0;_0x200f11<_0x379995;++_0x200f11)if(_0x16f17c['fX']<=this['pRectPoints'][_0x200f11][0x2]['fX']&&_0x16f17c['fX']>=this['pRectPoints'][_0x200f11][0x0]['fX']&&_0x16f17c['fY']>=this['pRectPoints'][_0x200f11][0x0]['fY']&&_0x16f17c['fY']<=this['pRectPoints'][_0x200f11][0x2]['fY']){_0x15d626=_0x200f11;break;}}return _0x15d626<_0x379995?(this['bPTZSelected'][_0x15d626]=!0x0,_0xa80085['nPTZPort']=_0x15d626,_0xa87ede):_0x86aef9;}},{'key':'SetPTZPort','value':function(_0x54100c){if(_0x54100c<0x0||_0x54100c>=_0x379995)return _0x31ddcf;for(var _0xba5ecb=0x0;_0xba5ecb<_0x379995;++_0xba5ecb)this['bPTZSelected'][_0xba5ecb]=!0x1;if(this['nPTZDisplayMode']==_0x495db0){if(0x0==this['nOriPTZPointNum'][_0x54100c])return _0x31ddcf;this['bPTZSelected'][_0x54100c]=!0x0;}else{if(0x0==this['nPTZRectNum'][_0x54100c])return _0x31ddcf;this['bPTZSelected'][_0x54100c]=!0x0;}return _0xa87ede;}},{'key':'GetPTZRectange','value':function(_0x2a6656,_0x54d29e,_0x1b0a20){return _0x1b0a20['fX']<_0x54d29e['fX']&&(_0x54d29e['fX']=_0x1b0a20['fX']),_0x1b0a20['fY']<_0x54d29e['fY']&&(_0x54d29e['fY']=_0x1b0a20['fY']),_0x1b0a20['fX']>_0x2a6656['fX']&&(_0x2a6656['fX']=_0x1b0a20['fX']),_0x1b0a20['fY']>_0x2a6656['fY']&&(_0x2a6656['fY']=_0x1b0a20['fY']),_0xa87ede;}},{'key':'GetPTZPoints','value':function(_0x4bfd20,_0x581c46,_0x1cb85a){return _0x4bfd20<0x0||_0x4bfd20>=_0x379995?_0x31ddcf:null==this['pRenderParam'][this['nWndPort']]?_0x520965:(_0x495db0==_0x1cb85a?null!=this['pOriPTZPoints'][_0x4bfd20]&&0x0!=this['nOriPTZPointNum'][_0x4bfd20]&&(_0x581c46['pstPoints']=this['pOriPTZPoints'][_0x4bfd20],_0x581c46['nPointNum']=this['nOriPTZPointNum'][_0x4bfd20]):_0x150ab7==_0x1cb85a&&null!=this['pRectPoints'][_0x4bfd20]&&(_0x581c46['pstPoints']=this['pRectPoints'][_0x4bfd20],_0x581c46['nPointNum']=0x4),_0xa87ede);}},{'key':'SetPTZDisplayMode','value':function(_0x236fa7){return this['nPTZDisplayMode']=_0x236fa7,this['ComputePTZPoints']();}},{'key':'GetDisplayEffect','value':function(_0x18e72c){return _0x18e72c<0x0||_0x18e72c>=_0x379995||null==this['pRenderParam']?_0x186ff9['SR_DE_NULL']:this['pRenderParam'][_0x18e72c]['nDisplayEffect'];}},{'key':'GetPTZFragmentPoints','value':function(_0x42473d,_0x24b5a4,_0x3e8a32){if(_0x42473d<0x0||_0x42473d>=_0x379995)return _0x31ddcf;if(null==this['pPanoPTZPoints'][_0x42473d]||0x0==this['nPanoPTZPointNum'][_0x42473d])return _0x31ddcf;var _0x392470=this['nPTZFragmentNode'][_0x42473d][_0x3e8a32];if(_0x24b5a4['nPointNum']=this['nPTZFragmentNode'][_0x42473d][_0x3e8a32+0x1]-this['nPTZFragmentNode'][_0x42473d][_0x3e8a32],_0x24b5a4['nPointNum']<0x0)return _0x520965;_0x24b5a4['pstPoints']=[];for(var _0x3505dd=0x0;_0x3505dd<_0x24b5a4['nPointNum'];++_0x3505dd){var _0x1ae379={};_0x1ae379['fX']=this['pPanoPTZPoints'][_0x42473d][_0x392470+_0x3505dd]['fX'],_0x1ae379['fY']=this['pPanoPTZPoints'][_0x42473d][_0x392470+_0x3505dd]['fY'],_0x24b5a4['pstPoints']['push'](_0x1ae379);}return _0xa87ede;}},{'key':'GetPTZFragmentNum','value':function(_0x4d18ad){return _0x4d18ad<0x0||_0x4d18ad>=_0x379995||0x0==this['nPTZFragmentNum'][_0x4d18ad]?0x0:this['nPTZFragmentNum'][_0x4d18ad];}},{'key':'CalcPTZFragmentPoints','value':function(_0x220257){if(_0x220257<0x0||_0x220257>=_0x379995)return _0x31ddcf;if(null==this['pPanoPTZPoints'][_0x220257]||0x0==this['nPanoPTZPointNum'][_0x220257])return _0x520965;this['nPTZFragmentNode'][_0x220257][0x0]=0x0,this['nPTZFragmentNum'][_0x220257]=0x1;for(var _0x39fb1c=0x0,_0x29453d=0x0;_0x29453d<this['nPanoPTZPointNum'][_0x220257]-0x1;_0x29453d++)Math['abs'](this['pPanoPTZPoints'][_0x220257][_0x29453d+0x1]['fX']-this['pPanoPTZPoints'][_0x220257][_0x29453d]['fX'])>0.5&&(_0x39fb1c=this['nPTZFragmentNum'][_0x220257],this['nPTZFragmentNode'][_0x220257][_0x39fb1c]=_0x29453d+0x1,this['nPTZFragmentNum'][_0x220257]=this['nPTZFragmentNum'][_0x220257]+0x1);var _0x99788e=this['nPanoPTZPointNum'][_0x220257];return Math['abs'](this['pPanoPTZPoints'][_0x220257][0x0]['fX']-this['pPanoPTZPoints'][_0x220257][_0x99788e-0x1]['fX'])<0.5&&(this['pPanoPTZPoints'][_0x220257][_0x99788e]['fX']=this['pPanoPTZPoints'][_0x220257][0x0]['fX'],this['pPanoPTZPoints'][_0x220257][_0x99788e]['fY']=this['pPanoPTZPoints'][_0x220257][0x0]['fY'],this['nPanoPTZPointNum'][_0x220257]=this['nPanoPTZPointNum'][_0x220257]+0x1),_0x39fb1c=this['nPTZFragmentNum'][_0x220257],this['nPTZFragmentNode'][_0x220257][_0x39fb1c]=this['nPanoPTZPointNum'][_0x220257],_0xa87ede;}},{'key':'IsPortAllocated','value':function(_0x57f699){return this['bPortAllocated'][_0x57f699];}},{'key':'GetPointFish2PanoCeiling','value':function(_0x4d4650,_0x33309b,_0x5302ff){if(null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==_0x4d4650)return _0x31ddcf;var _0x50af1a,_0x33bc1d;_0x50af1a=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x33bc1d=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0xd61f47,_0x31cd33=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&(_0xd61f47=0x1*-this['fRX1'])>_0x31cd33&&(_0x31cd33=_0xd61f47),this['fRX2']>0x1&&(_0xd61f47=0x1*(this['fRX2']-0x1))>_0x31cd33&&(_0x31cd33=_0xd61f47),this['fRY1']<0x0&&(_0xd61f47=-this['fRY1']*_0x50af1a)>_0x31cd33&&(_0x31cd33=_0xd61f47),this['fRY2']>0x1&&(_0xd61f47=(this['fRY2']-0x1)*_0x50af1a)>_0x31cd33&&(_0x31cd33=_0xd61f47));var _0x1b5642,_0x157591=_0x31cd33/_0x33bc1d,_0x21e458={};if(_0x21e458['fX']=0x0,_0x21e458['fY']=0x0,Math['abs'](_0x33309b-0.5)<_0x4a23c6&&Math['abs'](_0x5302ff-0.5)<_0x4a23c6)return _0x86aef9;var _0x2e80fa={},_0x54a6d2={};_0x2e80fa['fX']=_0x33309b-0.5,_0x2e80fa['fY']=_0x5302ff-0.5,_0x54a6d2['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x54a6d2['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0x1aead2=Math['sqrt'](_0x2e80fa['fX']*_0x2e80fa['fX']+_0x2e80fa['fY']*_0x2e80fa['fY']),_0x5cec6b=Math['sqrt'](_0x54a6d2['fX']*_0x54a6d2['fX']+_0x54a6d2['fY']*_0x54a6d2['fY']);return _0x1b5642=Math['acos']((_0x2e80fa['fX']*_0x54a6d2['fX']+_0x2e80fa['fY']*_0x54a6d2['fY'])/(_0x1aead2*_0x5cec6b)),_0x2e80fa['fX']*_0x54a6d2['fY']-_0x2e80fa['fY']*_0x54a6d2['fX']>0x0&&(_0x1b5642=6.2831852-_0x1b5642),_0x21e458['fX']=_0x1b5642/6.2831853,_0x21e458['fY']=(0x2*(0.5-_0x1aead2)-_0x157591)/(0.8-_0x157591),_0x21e458['fY']>=0x0&&_0x21e458['fX']>=0x0&&_0x21e458['fY']<=0x1&&_0x21e458['fX']<=0x1?(_0x4d4650['fX']=_0x21e458['fX'],_0x4d4650['fY']=_0x21e458['fY'],_0xa87ede):_0x31ddcf;}},{'key':'GetPointFish2PanoFloor','value':function(_0x3190e8,_0x1ae5c7,_0x3e57c9){if(null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==_0x3190e8)return _0x31ddcf;var _0xb389b3,_0x4f9e7b;_0xb389b3=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x4f9e7b=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x3d1cb8,_0x193c42=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&(_0x3d1cb8=0x1*-this['fRX1'])>_0x193c42&&(_0x193c42=_0x3d1cb8),this['fRX2']>0x1&&(_0x3d1cb8=0x1*(this['fRX2']-0x1))>_0x193c42&&(_0x193c42=_0x3d1cb8),this['fRY1']<0x0&&(_0x3d1cb8=-this['fRY1']*_0xb389b3)>_0x193c42&&(_0x193c42=_0x3d1cb8),this['fRY2']>0x1&&(_0x3d1cb8=(this['fRY2']-0x1)*_0xb389b3)>_0x193c42&&(_0x193c42=_0x3d1cb8));var _0x59f56c,_0x474b44=_0x193c42/_0x4f9e7b,_0x1f06df={'fX':0x0,'fY':0x0};if(Math['abs'](_0x1ae5c7-0.5)<_0x4a23c6&&Math['abs'](_0x3e57c9-0.5)<_0x4a23c6)return _0x86aef9;var _0x4e227e={},_0x47ca01={};_0x4e227e['fX']=_0x1ae5c7-0.5,_0x4e227e['fY']=_0x3e57c9-0.5,_0x47ca01['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x47ca01['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0x2765a4=Math['sqrt'](_0x4e227e['fX']*_0x4e227e['fX']+_0x4e227e['fY']*_0x4e227e['fY']),_0xf458cb=Math['sqrt'](_0x47ca01['fX']*_0x47ca01['fX']+_0x47ca01['fY']*_0x47ca01['fY']);return _0x59f56c=Math['acos']((_0x4e227e['fX']*_0x47ca01['fX']+_0x4e227e['fY']*_0x47ca01['fY'])/(_0x2765a4*_0xf458cb)),_0x4e227e['fX']*_0x47ca01['fY']-_0x4e227e['fY']*_0x47ca01['fX']>0x0&&(_0x59f56c=6.2831852-_0x59f56c),_0x1f06df['fX']=0x1-_0x59f56c/6.2831853,_0x1f06df['fY']=0x1-(0x2*(0.5-_0x2765a4)-_0x474b44)/(0.8-_0x474b44),_0x1f06df['fY']>=0x0&&_0x1f06df['fX']>=0x0&&_0x1f06df['fY']<=0x1&&_0x1f06df['fX']<=0x1?(_0x3190e8['fX']=_0x1f06df['fX'],_0x3190e8['fY']=_0x1f06df['fY'],_0xa87ede):_0x31ddcf;}},{'key':'GetPointFish2PanoWall','value':function(_0x32e9fb,_0x333161,_0x265730){if(null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==_0x32e9fb)return _0x31ddcf;var _0x4ff303,_0x33b439;_0x4ff303=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x33b439=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x224936,_0xc43223,_0x4e65e4,_0x51a192,_0x6331f0,_0x1bbea8=0x0,_0x2283ca=0x1,_0x2966c4=0.1,_0x59ba23=0.9;this['fRX1']<0x0&&(_0x224936=0x1*-this['fRX1'],_0x1bbea8=_0x224936/=0x2*_0x33b439),this['fRX2']>0x1&&(_0xc43223=0x1*(this['fRX2']-0x1),_0x2283ca=0x1-(_0xc43223/=0x2*_0x33b439)),this['fRY1']<0x0&&(_0x4e65e4=-this['fRY1']*_0x4ff303,_0x2966c4=(_0x4e65e4/=0x2*_0x33b439)>0.1?_0x4e65e4:0.1),this['fRY2']>0x1&&(_0x51a192=(this['fRY2']-0x1)*_0x4ff303,_0x59ba23=(_0x51a192/=0x2*_0x33b439)>0x1-0.9?0x1-_0x51a192:0.9);var _0x266343={'fX':0x0,'fY':0x0},_0x219b0f=0x2*_0x333161*_0x33b439,_0xdf73cf=0x2*_0x265730*_0x33b439;return _0x6331f0=Math['sqrt'](_0x33b439*_0x33b439-(_0xdf73cf-_0x33b439)*(_0xdf73cf-_0x33b439)),Math['abs'](_0x6331f0)<_0x4a23c6?SR_ERR_PARAM:(_0x333161=_0x33b439*(_0x219b0f-_0x33b439)/_0x6331f0+_0x33b439,_0x265730=_0xdf73cf,_0x266343['fX']=(_0x333161-0x2*_0x1bbea8*_0x33b439)/(0x2*(_0x2283ca-_0x1bbea8)*_0x33b439),_0x266343['fY']=(_0x265730-0x2*_0x2966c4*_0x33b439)/(0x2*(_0x59ba23-_0x2966c4)*_0x33b439),_0x266343['fY']>=0x0&&_0x266343['fX']>=0x0&&_0x266343['fY']<=0x1&&_0x266343['fX']<=0x1?(_0x32e9fb['fX']=_0x266343['fX'],_0x32e9fb['fY']=_0x266343['fY'],_0xa87ede):_0x31ddcf);}},{'key':'UpdateRangeParam','value':function(_0x6c8fa1,_0x32a255){if(null==this['pRenderParam'][_0x6c8fa1])return _0x520965;if(_0x32a255<0.00001||_0x32a255>0.6)return _0x31ddcf;var _0x3c870d=0x0;return _0x186ff9['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x6c8fa1]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PTZ_CEILING']!=this['pRenderParam'][_0x6c8fa1]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PTZ_FLOOR']!=this['pRenderParam'][_0x6c8fa1]['nDisplayEffect']||(_0x3c870d=0x7*_0x32a255+0.8,this['IsInImage'](this['fRX1'],this['fRX2'],this['fRY1'],this['fRY2'],this['pRenderParam'][_0x6c8fa1]['fCosH'],this['pRenderParam'][_0x6c8fa1]['fSinH'],this['pRenderParam'][_0x6c8fa1]['fCosV'],this['pRenderParam'][_0x6c8fa1]['fSinV'],_0x3c870d,this['pRenderParam'][_0x6c8fa1]['nDisplayEffect']))?(this['pRenderParam'][_0x6c8fa1]['fZoom']=_0x3c870d,_0xa87ede):_0x31ddcf;}}]),_0x132b86;}()),_0x5440d6=0x20,_0x4ae543=(function(){function _0x48881e(){_0x54580d(this,_0x48881e),this['renderEngine']='webgl',this['oVideoHandle']=null,this['mainCanvasID']=null,this['curTimestamp']=0x0,this['mainSubPort']=0x0,this['mainVaildSubPort']=0x0,this['mainFECCorrect']=_0x186ff9['SR_DE_NULL'],this['FECErrorCode']=0x0,this['subPortNum']=0x0,this['FECShowMode']=_0x495db0,this['pFishParamManager']=null,this['InitFECParam'](),this['privateLinesInfo']=[],this['privateFontsInfo']=[],this['privateImageInfo']=[],this['bSRCallBackFlag']=!0x1,this['curLinesInfo']=null,this['curFontsInfo']=null,this['curImagesInfo']=null,this['maxPrivateLineTimeStamp']=0x0,this['hasSetFECParamManager']=!0x1,this['pWaterFontParam']=[],this['pWaterImageParam']=[],this['waterMarkImageIndex']=0x0,this['waterMarkImageMax']=0x1,this['aPOSAdaptBuf']=[];}return _0x4fd085(_0x48881e,[{'key':'InitDisplay','value':function(_0x41b975,_0xaf9fa6,_0xbaa2d7){return this['renderEngine']=_0xaf9fa6,this['mainCanvasID']=_0x41b975,'2d'===this['renderEngine']||'2D'===this['renderEngine']?(this['oVideoHandle']=new _0x47e209(),console['log']('2d\\x20render')):(this['oVideoHandle']=new _0x453e55(),this['mainFECCorrect']!=_0x186ff9['SR_DE_NULL']&&(null==this['pFishParamManager']&&(this['pFishParamManager']=new _0x30cc90()),this['oVideoHandle']['SR_SetFishParamManager'](this['pFishParamManager']),this['hasSetFECParamManager']=!0x0),console['log']('webgl\\x20render')),this['oVideoHandle']['SR_Init'](_0x41b975,_0xbaa2d7),this['mainVaildSubPort']=this['oVideoHandle']['SR_AddSubPort'](this['mainFECCorrect']),-0x1==this['mainVaildSubPort']?(console['info']('%c\\x20InitDisplay\\x20SR_AddSubPort\\x20error\\x20subport:%d','color:\\x20red',this['mainVaildSubPort']),0x0):(null==this['stFishEyeManager'][0x0]['pRender']&&this['mainFECCorrect']!==_0x186ff9['SR_DE_NULL']&&(this['stFishEyeManager'][0x0]['pRender']=this['oVideoHandle'],this['stFishEyeManager'][0x0]['nSubPort']=0x0,this['stFishEyeManager'][0x0]['sCanvasID']=this['mainCanvasID'],this['stFishEyeManager'][0x0]['bUsed']=0x1,this['stFishEyeManager'][0x0]['bInited']=0x1,this['stFishEyeManager'][0x0]['nValidSubPort']=this['mainVaildSubPort']),0x1);}},{'key':'ReleaseDisplay','value':function(){if(null!=this['oVideoHandle']&&(this['oVideoHandle']['SR_DelSubPort'](this['mainVaildSubPort']),this['oVideoHandle']['SR_Destroy'](),this['oVideoHandle']=null),this['subPortNum']>0x0){for(var _0x94556=0x1;_0x94556<_0x5440d6;_0x94556++)0x0!=this['stFishEyeManager'][_0x94556]['nSubPort']&&null!=this['stFishEyeManager'][_0x94556]['sCanvasID']&&0x0!=this['stFishEyeManager'][_0x94556]['bInited']&&(this['FEC_Disable'](_0x94556),this['FEC_DelPort'](_0x94556));}for(var _0x4ea93c=0x0;_0x4ea93c<_0x5440d6;_0x4ea93c++)this['stFishEyeManager'][_0x4ea93c]['pRender']=null;return this['stFishEyeManager']['splice'](0x0,this['stFishEyeManager']['length']),this['stFishParam']['splice'](0x0,this['stFishParam']['length']),null!=this['pFishParamManager']&&(this['pFishParamManager']['DeInit'](),this['pFishParamManager']=null),this['FECShowMode']=_0x495db0,this['DeInitPrivateParam'](),0x1;}},{'key':'DeInitPrivateParam','value':function(){this['privateLinesInfo']['splice'](0x0,this['privateLinesInfo']['length']),this['privateFontsInfo']['splice'](0x0,this['privateFontsInfo']['length']),this['privateImageInfo']['splice'](0x0,this['privateImageInfo']['length']),this['pWaterFontParam']['splice'](0x0,this['pWaterFontParam']['length']),this['pWaterImageParam']['splice'](0x0,this['pWaterImageParam']['length']),this['bSRCallBackFlag']=!0x1,this['curLinesInfo']=null;}},{'key':'DisplayFrame','value':function(_0x241257,_0x381b91,_0x5e3b07,_0x5d210c,_0x2bf64a,_0x244c7e){var _0x396b03=this;return new Promise(function(_0x3130e8){var _0x805485=-0x1;if(null!=_0x241257&&(_0x805485=_0x5d210c),_0x396b03['bSRCallBackFlag']||(null!=_0x396b03['oVideoHandle']&&_0x396b03['oVideoHandle']['SR_SetCallBack'](_0x396b03['WebGLDisplayCallBack'],_0x396b03,_0x444649),_0x396b03['bSRCallBackFlag']=!0x0),null!=_0x241257&&(0x0==_0x396b03['privateLinesInfo']['length']&&0x0==_0x396b03['privateFontsInfo']['length']&&0x0==_0x396b03['privateImageInfo']['length']||(_0x396b03['curTimestamp']=_0x805485,_0x396b03['FindIntelNodefromList'](_0x396b03['curTimestamp'])),null!=_0x396b03['oVideoHandle']&&_0x396b03['oVideoHandle']['SR_Draw'](_0x241257,_0x381b91,_0x5e3b07,_0x2bf64a,_0x244c7e),_0x396b03['subPortNum']>0x0)){for(var _0x14a6d1=0x1;_0x14a6d1<_0x5440d6;_0x14a6d1++)0x0!=_0x396b03['stFishEyeManager'][_0x14a6d1]['nSubPort']&&null!=_0x396b03['stFishEyeManager'][_0x14a6d1]['sCanvasID']&&0x0!=_0x396b03['stFishEyeManager'][_0x14a6d1]['bInited']&&null!=_0x396b03['stFishEyeManager'][_0x14a6d1]['pRender']&&_0x396b03['stFishEyeManager'][_0x14a6d1]['pRender']['SR_Draw'](_0x241257,_0x381b91,_0x5e3b07,null,null);}_0x3130e8(_0x805485);});}},{'key':'SetDisplayRect','value':function(_0x154492,_0x4d7bf2,_0x1a0b43,_0xfa552d){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_SetDisplayRect'](_0x154492,_0x4d7bf2,_0x1a0b43,_0xfa552d,_0xe9e464):0x0;}},{'key':'SetCanvasSize','value':function(_0x3e6288,_0x186bd2){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_SetCanvasSize'](_0x3e6288,_0x186bd2):0x0;}},{'key':'GetCanvasSize','value':function(){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_GetCanvasSize']():0x0;}},{'key':'SetAntialias','value':function(_0x3c0ac9){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_SetAntialias'](_0x3c0ac9):0x0;}},{'key':'SetD3DPostProcess','value':function(_0x2321b2,_0x3465f0){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_SetImagePostProcess'](_0x2321b2,_0x3465f0):0x0;}},{'key':'InitFECParam','value':function(){this['stFishEyeManager']=[];for(var _0x599cf5=0x0;_0x599cf5<_0x5440d6;_0x599cf5++)this['stFishEyeManager'][_0x599cf5]={},this['stFishEyeManager'][_0x599cf5]['pRender']=null,this['stFishEyeManager'][_0x599cf5]['nSubPort']=0x0,this['stFishEyeManager'][_0x599cf5]['sCanvasID']=null,this['stFishEyeManager'][_0x599cf5]['bUsed']=0x0,this['stFishEyeManager'][_0x599cf5]['bInit']=0x0,this['stFishEyeManager'][_0x599cf5]['nValidSubPort']=0x0,this['stFishEyeManager'][_0x599cf5]['emPlaceType']=_0x1e68ea,this['stFishEyeManager'][_0x599cf5]['emCorrectType']=_0x4fbb93,this['stFishEyeManager'][_0x599cf5]['emEffect']=_0x186ff9['SR_DE_FISH_ORIGINAL'];this['stFishParam']=[];for(var _0x5bb5bd=0x0;_0x5bb5bd<_0x5440d6;_0x5bb5bd++)this['stFishParam'][_0x5bb5bd]={},this['stFishParam'][_0x5bb5bd]['nUpDateType']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZParam']={},this['stFishParam'][_0x5bb5bd]['stPTZParam']['fPTZPositionX']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZParam']['fPTZPositionY']=0x0,this['stFishParam'][_0x5bb5bd]['stCycleParam']={},this['stFishParam'][_0x5bb5bd]['stCycleParam']['fRadiusLeft']=0x0,this['stFishParam'][_0x5bb5bd]['stCycleParam']['fRadiusRight']=0x0,this['stFishParam'][_0x5bb5bd]['stCycleParam']['fRadiusTop']=0x0,this['stFishParam'][_0x5bb5bd]['stCycleParam']['fRadiusBottom']=0x0,this['stFishParam'][_0x5bb5bd]['fZoom']=0x0,this['stFishParam'][_0x5bb5bd]['fWideScanOffset']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZColor']={},this['stFishParam'][_0x5bb5bd]['stPTZColor']['nR']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZColor']['nG']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZColor']['nB']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZColor']['nAlpha']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZSelect']={},this['stFishParam'][_0x5bb5bd]['stPTZSelect']['fTop']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZSelect']['fBottom']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZSelect']['fLeft']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZSelect']['fRight']=0x0,this['stFishParam'][_0x5bb5bd]['nCut']=0x0;}},{'key':'FEC_SetCanvasID','value':function(_0x461e15){return this['mainFECCorrect']=_0x186ff9['SR_DE_FISH_ORIGINAL'],0x1;}},{'key':'FEC_ResetCorrectType','value':function(_0x524c38,_0x41579d,_0x34714a){if(!0x1===this['hasSetFECParamManager']&&(null==this['pFishParamManager']&&(this['pFishParamManager']=new _0x30cc90()),this['oVideoHandle']['SR_SetFishParamManager'](this['pFishParamManager']),this['hasSetFECParamManager']=!0x0),_0x34714a!=_0x4fbb93&&_0x34714a!=_0x2cb8a2&&_0x34714a!=_0x4e5968&&_0x34714a!=_0x1837a3&&_0x34714a!=_0x54a990&&_0x34714a!=_0x30e952&&_0x34714a!=_0x20b7ae&&_0x34714a!=_0x39b0d3&&_0x34714a!=_0x2a01ec)return console['log']('%c\\x2020231122\\x20hardDecoder\\x20not\\x20support\\x20correctType:%d','color:red',_0x34714a),this['FECErrorCode']=0x10,0x0;if(0x1!=this['FECParamJudge'](_0x524c38,_0x41579d,_0x34714a))return 0x0;var _0x204106;if(_0x204106=this['_ConvertDisplayEffect'](_0x41579d,_0x34714a),0x0==_0x524c38&&null==this['stFishEyeManager'][_0x524c38]['pRender']&&(this['stFishEyeManager'][_0x524c38]['pRender']=this['oVideoHandle'],this['stFishEyeManager'][_0x524c38]['nSubPort']=_0x524c38,this['stFishEyeManager'][_0x524c38]['sCanvasID']=this['mainCanvasID'],this['stFishEyeManager'][_0x524c38]['bUsed']=0x1,this['stFishEyeManager'][_0x524c38]['bInited']=0x1,this['stFishEyeManager'][_0x524c38]['nValidSubPort']=this['mainVaildSubPort'],this['stFishEyeManager'][_0x524c38]['emPlaceType']=_0x41579d,this['stFishEyeManager'][_0x524c38]['emCorrectType']=_0x34714a,this['stFishEyeManager'][_0x524c38]['emEffect']=_0x204106,this['mainFECCorrect']=_0x204106),null!=this['stFishEyeManager'][_0x524c38]['pRender']){this['stFishEyeManager'][_0x524c38]['pRender']['SR_DelSubPort'](this['stFishEyeManager'][_0x524c38]['nValidSubPort']);var _0x3379b4=this['stFishEyeManager'][_0x524c38]['pRender']['SR_AddSubPort'](_0x204106);if(-0x1==_0x3379b4)return console['info']('%c\\x20FEC_ResetCorrectType\\x20SR_AddSubPort\\x20error\\x20subport:%d','color:\\x20red',_0x3379b4),0x0;if(this['stFishEyeManager'][_0x524c38]['nValidSubPort']=_0x3379b4,this['stFishEyeManager'][_0x524c38]['emPlaceType']=_0x41579d,this['stFishEyeManager'][_0x524c38]['emCorrectType']=_0x34714a,this['stFishEyeManager'][_0x524c38]['emEffect']=_0x204106,_0x1837a3<=this['stFishEyeManager'][_0x524c38]['emCorrectType']){var _0x5ac827=this['stFishEyeManager'][_0x524c38]['pRender']['SR_SetRenderState'](_0x57ef5a,0x0);_0xa87ede!=_0x5ac827&&console['log']('>>>VideoRender.js\\x20SR_SetRenderState\\x20failed\\x20ret：%08x\\x0a',_0x5ac827);}}return this['FECShowMode']>0x0&&null!=this['stFishEyeManager'][_0x524c38]['pRender']&&this['stFishEyeManager'][_0x524c38]['pRender']['SR_SetPTZDisplayMode'](this['FECShowMode']),0x0==_0x524c38&&(this['mainVaildSubPort']=this['stFishEyeManager'][_0x524c38]['nValidSubPort']),0x1;}},{'key':'FEC_GetPort','value':function(_0x4edce7,_0x16fe01){if(_0x16fe01!=_0x4fbb93&&_0x16fe01!=_0x2cb8a2&&_0x16fe01!=_0x4e5968&&_0x16fe01!=_0x1837a3&&_0x16fe01!=_0x54a990&&_0x16fe01!=_0x30e952&&_0x16fe01!=_0x20b7ae&&_0x16fe01!=_0x39b0d3&&_0x16fe01!=_0x2a01ec)return console['log']('%c\\x2020231112\\x20hardDecoder\\x20not\\x20support\\x20emCorrectType:%d','color:red',_0x16fe01),this['FECErrorCode']=0x10,-0x1;var _0x427cfe;if(0x1!=this['FECParamJudge'](-0x1,_0x4edce7,_0x16fe01))return-0x1;var _0x3df02b=0x0;for(_0x427cfe=0x1;_0x427cfe<_0x5440d6;_0x427cfe++)if(0x0==this['stFishEyeManager'][_0x427cfe]['nSubPort']&&0x0==this['stFishEyeManager'][_0x427cfe]['bUsed']){this['stFishEyeManager'][_0x427cfe]['nSubPort']=_0x427cfe,this['stFishEyeManager'][_0x427cfe]['nValidSubPort']=-0x1,this['stFishEyeManager'][_0x427cfe]['bUsed']=0x1,this['stFishEyeManager'][_0x427cfe]['emPlaceType']=_0x4edce7,this['stFishEyeManager'][_0x427cfe]['emCorrectType']=_0x16fe01,_0x3df02b=_0x427cfe;break;}if(_0x5440d6==_0x427cfe)return console['info']('%c\\x20FEC_GetPort-12\\x20fish\\x20subport\\x20max','color:\\x20red'),this['FECErrorCode']=0x504,-0x1;var _0x36ac05;return _0x36ac05=this['_ConvertDisplayEffect'](this['stFishEyeManager'][_0x3df02b]['emPlaceType'],this['stFishEyeManager'][_0x3df02b]['emCorrectType']),_0x186ff9['SR_DE_FISH_ORIGINAL']!=_0x36ac05?(0x0==this['stFishEyeManager'][_0x3df02b]['bInited']&&(this['stFishEyeManager'][_0x3df02b]['emEffect']=_0x36ac05,this['stFishEyeManager'][_0x3df02b]['bInited']=0x0,this['stFishParam'][_0x3df02b]['fZoom']=0.005,this['stFishParam'][_0x3df02b]['stPTZParam']['fPTZPositionX']=0.5,this['stFishParam'][_0x3df02b]['stPTZParam']['fPTZPositionY']=0.5,this['stFishParam'][_0x3df02b]['fWideScanOffset']=0x0),this['FECErrorCode']=0x0,this['subPortNum']++,_0x3df02b):_0x3df02b<_0x5440d6&&0x0==this['stFishEyeManager'][_0x3df02b]['bInited']?(this['stFishEyeManager'][_0x3df02b]['emEffect']=_0x36ac05,this['stFishEyeManager'][_0x3df02b]['bInited']=0x0,this['stFishParam'][_0x3df02b]['fZoom']=0x0,this['stFishParam'][_0x3df02b]['stPTZParam']['fPTZPositionX']=0x0,this['stFishParam'][_0x3df02b]['stPTZParam']['fPTZPositionY']=0x0,this['stFishParam'][_0x3df02b]['fWideScanOffset']=0x0,this['FECErrorCode']=0x0,this['subPortNum']++,_0x3df02b):(this['stFishEyeManager'][_0x427cfe]['pRender']=null,this['stFishEyeManager'][_0x427cfe]['nSubPort']=0x0,this['stFishEyeManager'][_0x427cfe]['sCanvasID']=null,this['stFishEyeManager'][_0x427cfe]['bUsed']=0x0,this['stFishEyeManager'][_0x427cfe]['bInited']=0x0,this['stFishEyeManager'][_0x427cfe]['nValidSubPort']=0x0,this['stFishEyeManager'][_0x427cfe]['emPlaceType']=_0x1e68ea,this['stFishEyeManager'][_0x427cfe]['emCorrectType']=_0x4fbb93,this['stFishEyeManager'][_0x427cfe]['emEffect']=_0x186ff9['SR_DE_FISH_ORIGINAL'],this['FECErrorCode']=_0xa88cb3,-0x1);}},{'key':'FECParamJudge','value':function(_0xd98f83,_0x19e843,_0x440875){if((_0x240c92==_0x19e843||_0x1e68ea==_0x19e843)&&_0x30e952==_0x440875)return console['info']('%c\\x20FEC_GetPort-1\\x20floor\\x20and\\x20ceiling\\x20not\\x20support\\x20lat','color:\\x20red'),this['FECErrorCode']=_0xa88cb3,0x0;if(_0x2aea6b==_0x19e843&&_0x20b7ae==_0x440875)return console['info']('%c\\x20FEC_GetPort-2\\x20wall\\x20not\\x20support\\x20cylinger','color:\\x20red'),this['FECErrorCode']=_0xa88cb3,0x0;if(_0x2aea6b==_0x19e843&&_0x443c47==_0x440875)return console['info']('%c\\x20FEC_GetPort-3\\x20wall\\x20not\\x20support\\x20split\\x20cylinger','color:\\x20red'),this['FECErrorCode']=_0xa88cb3,0x0;if((_0x240c92==_0x19e843||_0x1e68ea==_0x19e843)&&_0x39b0d3==_0x440875)return console['info']('%c\\x20FEC_GetPort-4\\x20floor\\x20and\\x20ceiling\\x20not\\x20support\\x20horizontal','color:\\x20red'),this['FECErrorCode']=_0xa88cb3,0x0;if((_0x240c92==_0x19e843||_0x1e68ea==_0x19e843)&&_0x2a01ec==_0x440875)return console['info']('%c\\x20FEC_GetPort-5\\x20floor\\x20and\\x20ceiling\\x20not\\x20support\\x20vertical','color:\\x20red'),this['FECErrorCode']=_0xa88cb3,0x0;if(_0x2aea6b!=_0x19e843&&_0x240c92!=_0x19e843&&_0x1e68ea!=_0x19e843)return console['info']('%c\\x20FEC_GetPort-6\\x20emPlaceType\\x20only\\x20support\\x20floor,\\x20ceiling\\x20and\\x20wall','color:\\x20red'),this['FECErrorCode']=MP_E_SUPPORT,0x0;if(0x0!=_0x440875&&_0x440875!=_0x54a990&&_0x440875!=_0x2cb8a2&&_0x440875!=_0x4e5968&&_0x440875!=_0x30e952&&_0x440875!=_0x1837a3&&_0x440875!=_0x20b7ae&&_0x440875!=_0x443c47&&_0x440875!=_0x30ecd9&&_0x440875!=_0x39b0d3&&_0x440875!=_0x2a01ec)return console['info']('%c\\x20FEC_GetPort-7\\x20emCorrectType\\x20error','color:\\x20red'),this['FECErrorCode']=MP_E_SUPPORT,0x0;for(var _0x4c6d6b=0x0;_0x4c6d6b<_0x5440d6;_0x4c6d6b++)if(_0x4c6d6b!=_0xd98f83){if(this['stFishEyeManager'][_0x4c6d6b]['bUsed']&&this['stFishEyeManager'][_0x4c6d6b]['emPlaceType']!=_0x19e843)return console['info']('%c\\x20FEC_GetPort-8\\x20emPlaceType\\x20changed','color:\\x20red'),this['FECErrorCode']=0x517,0x0;if(this['stFishEyeManager'][_0x4c6d6b]['bUsed']&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x54a990&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x1837a3&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x20b7ae&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x443c47&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x30ecd9&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x39b0d3&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x2a01ec&&_0x440875!=_0x54a990&&_0x440875!=_0x1837a3&&_0x440875!=_0x20b7ae&&_0x440875!=_0x443c47&&_0x440875!=_0x30ecd9&&_0x440875!=_0x39b0d3&&_0x440875!=_0x2a01ec)return console['info']('%c\\x20FEC_GetPort-9\\x20origin/180/360/lat\\x20only\\x20display\\x20one\\x20port','color:\\x20red'),this['FECErrorCode']=0x518,0x0;if(this['stFishEyeManager'][_0x4c6d6b]['bUsed']&&(this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']==_0x54a990&&_0x440875==_0x2cb8a2||this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']==_0x2cb8a2&&_0x440875==_0x54a990))return console['info']('%c\\x20FEC_GetPort-10\\x20180\\x20cannot\\x20support\\x20ptz','color:\\x20red'),this['FECErrorCode']=0x518,0x0;}return 0x1;}},{'key':'FEC_Enable','value':function(_0x38de61){return _0x38de61<0x1||_0x38de61>0x1f||null==_0x38de61?(console['info']('%c\\x20FEC_Enable-1\\x20nSubPort:%d','color:\\x20red',_0x38de61),this['FECErrorCode']=_0x41c932,0x0):null!==this['stFishEyeManager'][_0x38de61]['pRender']?(console['info']('%c\\x20FEC_Enable-2\\x20nSubPort:%d','color:\\x20red',_0x38de61),this['FECErrorCode']=0x515,0x0):(null==this['stFishEyeManager'][_0x38de61]['pRender']&&(this['stFishEyeManager'][_0x38de61]['pRender']=new _0x453e55(),null==this['pFishParamManager']&&(this['pFishParamManager']=new _0x30cc90()),this['stFishEyeManager'][_0x38de61]['pRender']['SR_SetFishParamManager'](this['pFishParamManager'])),0x1);}},{'key':'FEC_SetWnd','value':function(_0xb663fd,_0x1038c6){if(_0xb663fd<0x1||_0xb663fd>0x1f||null==_0xb663fd)return console['info']('%c\\x20FEC_SetWnd-1\\x20nSubPort:%d','color:\\x20red',_0xb663fd),this['FECErrorCode']=_0x41c932,0x0;if(null==this['stFishEyeManager'][_0xb663fd]['pRender'])return console['info']('%c\\x20FEC_SetWnd-2\\x20nSubPort:%d\\x20pRender\\x20is\\x20null','color:\\x20red',_0xb663fd),this['FECErrorCode']=_0x599b74,0x0;if(0x0==this['stFishEyeManager'][_0xb663fd]['bUsed'])return console['info']('%c\\x20FEC_SetWnd-3\\x20nSubPort:%d\\x20bUsed:%d','color:\\x20red',_0xb663fd,this['stFishEyeManager'][_0xb663fd]['bUsed']),this['FECErrorCode']=_0x4b57a2,0x0;if(null==_0x1038c6)return console['info']('%c\\x20FEC_SetWnd-4\\x20nSubPort:%d\\x20sCanvasID:%s','color:\\x20red',_0xb663fd,_0x1038c6),this['FECErrorCode']=0x519,0x0;if(0x0!=this['stFishEyeManager'][_0xb663fd]['nSubPort']&&0x0!=this['stFishEyeManager'][_0xb663fd]['bUsed']){if(0x0!=this['stFishEyeManager'][_0xb663fd]['bInited']&&null!=this['stFishEyeManager'][_0xb663fd]['sCanvasID'])return _0x1038c6!=this['stFishEyeManager'][_0xb663fd]['sCanvasID']?(console['info']('%c\\x20FEC_SetWnd-5\\x20nSubPort:%d\\x20sCanvasID:%s\\x20already\\x20init','color:\\x20red',_0xb663fd,_0x1038c6),this['FECErrorCode']=0x506,0x0):0x1;var _0x49e36c;_0x49e36c=this['_ConvertDisplayEffect'](this['stFishEyeManager'][_0xb663fd]['emPlaceType'],this['stFishEyeManager'][_0xb663fd]['emCorrectType']);var _0x4577b8=this['stFishEyeManager'][_0xb663fd]['pRender']['SR_Init'](_0x1038c6,_0xa01ff6),_0x552ae2=this['stFishEyeManager'][_0xb663fd]['pRender']['SR_AddSubPort'](_0x49e36c);if(-0x1==_0x552ae2)return console['info']('%c\\x20FEC_SetWnd\\x20SR_AddSubPort\\x20error\\x20subport:%d','color:\\x20red',_0xb663fd),0x0;if(this['stFishEyeManager'][_0xb663fd]['nValidSubPort']=_0x552ae2,_0xa87ede!=_0x4577b8)return this['stFishEyeManager'][_0xb663fd]['bInited']=0x0,this['stFishEyeManager'][_0xb663fd]['sCanvasID']=null,this['FECErrorCode']=_0x4b57a2,0x0;if(this['stFishEyeManager'][_0xb663fd]['bInited']=0x1,this['stFishEyeManager'][_0xb663fd]['sCanvasID']=_0x1038c6,_0x1837a3<=this['stFishEyeManager'][_0xb663fd]['emCorrectType']){var _0x303aaf=this['stFishEyeManager'][_0xb663fd]['pRender']['SR_SetRenderState'](_0x57ef5a,0x0);_0xa87ede!=_0x303aaf&&console['log']('>>>VideoRender.js\\x20SR_SetRenderState\\x20failed\\x20ret：%08x\\x0a',_0x303aaf);}return this['FECShowMode']>0x0&&this['stFishEyeManager'][_0xb663fd]['pRender']['SR_SetPTZDisplayMode'](this['FECShowMode']),0x1;}return this['FECErrorCode']=_0x4b57a2,0x0;}},{'key':'FEC_Disable','value':function(_0x21074f,_0x145f67,_0x183cf1){if(_0x21074f<0x1||_0x21074f>0x1f||null==_0x21074f)return console['info']('%c\\x20FEC_Disable-1\\x20nSubPort:%d','color:\\x20red',_0x21074f),this['FECErrorCode']=_0x41c932,0x0;if(0x1==this['stFishEyeManager'][_0x21074f]['bInited']&&null!=this['stFishEyeManager'][_0x21074f]['pRender']){if(_0xa87ede!=this['stFishEyeManager'][_0x21074f]['pRender']['SR_DelSubPort'](this['stFishEyeManager'][_0x21074f]['nValidSubPort']))return console['info']('%c\\x20FEC_Disable-2\\x20SR_DelSubPort\\x20error\\x20nSubPort:%d','color:\\x20red',_0x21074f),0x0;this['stFishEyeManager'][_0x21074f]['bInited']=0x0,this['stFishEyeManager'][_0x21074f]['nValidSubPort']=-0x1,this['stFishEyeManager'][_0x21074f]['pRender']['SR_Destroy'](),this['stFishEyeManager'][_0x21074f]['pRender']=null;}return 0x1;}},{'key':'FEC_DelPort','value':function(_0x439d0b){return _0x439d0b<0x1||_0x439d0b>0x1f||null==_0x439d0b?(console['info']('%c\\x20FEC_DelPort-1\\x20nSubPort:%d','color:\\x20red',_0x439d0b),this['FECErrorCode']=_0x41c932,0x0):0x0==this['stFishEyeManager'][_0x439d0b]['bUsed']?(console['info']('%c\\x20FEC_DelPort-2\\x20nSubPort:%d\\x20bUsed：%d','color:\\x20red',_0x439d0b,this['stFishEyeManager'][_0x439d0b]['bUsed']),this['FECErrorCode']=_0x4b57a2,0x0):(this['stFishEyeManager'][_0x439d0b]['nSubPort']=0x0,this['stFishEyeManager'][_0x439d0b]['sCanvasID']=null,this['stFishEyeManager'][_0x439d0b]['bUsed']=0x0,this['stFishEyeManager'][_0x439d0b]['bInited']=0x0,this['stFishEyeManager'][_0x439d0b]['nValidSubPort']=0x0,this['stFishEyeManager'][_0x439d0b]['emPlaceType']=_0x1e68ea,this['stFishEyeManager'][_0x439d0b]['emCorrectType']=_0x4fbb93,this['stFishEyeManager'][_0x439d0b]['emEffect']=_0x186ff9['SR_DE_FISH_ORIGINAL'],this['stFishParam'][_0x439d0b]['stCycleParam']['fRadiusLeft']=0x0,this['stFishParam'][_0x439d0b]['stCycleParam']['fRadiusRight']=0x1,this['stFishParam'][_0x439d0b]['stCycleParam']['fRadiusTop']=0x0,this['stFishParam'][_0x439d0b]['stCycleParam']['fRadiusBottom']=0x1,this['subPortNum']>0x0&&this['subPortNum']--,0x1);}},{'key':'FEC_SetParam','value':function(_0x237226,_0x485f7d){if(this['FECErrorCode']=0x0,_0x237226<0x0||_0x237226>0x1f||null==_0x237226)return console['info']('%c\\x20FEC_SetParam-1\\x20nSubPort:%d','color:\\x20red',_0x237226),this['FECErrorCode']=_0x41c932,0x0;if(null==this['stFishEyeManager'][_0x237226]['pRender'])return console['info']('%c\\x20FEC_SetParam-2\\x20nSubPort:%d\\x20pRender:%d','color:\\x20red',_0x237226,this['stFishEyeManager'][_0x237226]['pRender']),this['FECErrorCode']=_0x599b74,0x0;if(0x0==this['stFishEyeManager'][_0x237226]['bUsed'])return console['info']('%c\\x20FEC_SetParam-3\\x20nSubPort:%d\\x20bUsed:%d','color:\\x20red',_0x237226,this['stFishEyeManager'][_0x237226]['bUsed']),this['FECErrorCode']=_0x4b57a2,0x0;if(this['stFishEyeManager'][_0x237226]['emCorrectType']>=_0x1837a3&&this['stFishEyeManager'][_0x237226]['emCorrectType']<=_0x2a01ec&&0x1e&_0x485f7d['upDateType'])return console['info']('%c\\x20FEC_SetParam-4\\x20nSubPort:%d\\x20not\\x203D','color:\\x20red',_0x237226),this['FECErrorCode']=_0x13beae,0x0;if(_0x16ee77&_0x485f7d['upDateType']){if(null==_0x485f7d['stCycleParam'])return this['FECErrorCode']=_0x31d5c8,0x0;for(var _0x43b2cb=0x1;_0x43b2cb<_0x5440d6;_0x43b2cb++){if(this['stFishEyeManager'][_0x43b2cb]['bUsed']&&this['stFishEyeManager'][_0x43b2cb]['nSubPort']&&_0x39b0d3==this['stFishEyeManager'][_0x43b2cb]['emCorrectType']&&(_0x485f7d['stCycleParam']['fRadiusLeft']<=-0.5||_0x485f7d['stCycleParam']['fRadiusLeft']>=0.4||_0x485f7d['stCycleParam']['fRadiusRight']<=0.6||_0x485f7d['stCycleParam']['fRadiusRight']>=1.5||_0x485f7d['stCycleParam']['fRadiusTop']<=-0.5||_0x485f7d['stCycleParam']['fRadiusTop']>0x0||_0x485f7d['stCycleParam']['fRadiusBottom']<0x1||_0x485f7d['stCycleParam']['fRadiusBottom']>=1.5||_0x485f7d['stCycleParam']['fRadiusLeft']+_0x485f7d['stCycleParam']['fRadiusRight']<=0.8||_0x485f7d['stCycleParam']['fRadiusLeft']+_0x485f7d['stCycleParam']['fRadiusRight']>=1.2||_0x485f7d['stCycleParam']['fRadiusTop']+_0x485f7d['stCycleParam']['fRadiusBottom']<=0.8||_0x485f7d['stCycleParam']['fRadiusTop']+_0x485f7d['stCycleParam']['fRadiusBottom']>=1.2))return this['FECErrorCode']=_0x31d5c8,0x0;if(this['stFishEyeManager'][_0x43b2cb]['bUsed']&&this['stFishEyeManager'][_0x43b2cb]['nSubPort']&&_0x2a01ec==this['stFishEyeManager'][_0x43b2cb]['emCorrectType']&&(_0x485f7d['stCycleParam']['fRadiusLeft']<=-0.5||_0x485f7d['stCycleParam']['fRadiusLeft']>0x0||_0x485f7d['stCycleParam']['fRadiusRight']<0x1||_0x485f7d['stCycleParam']['fRadiusRight']>=1.5||_0x485f7d['stCycleParam']['fRadiusTop']<=-0.5||_0x485f7d['stCycleParam']['fRadiusTop']>=0.4||_0x485f7d['stCycleParam']['fRadiusBottom']<=0.6||_0x485f7d['stCycleParam']['fRadiusBottom']>=1.5||_0x485f7d['stCycleParam']['fRadiusLeft']+_0x485f7d['stCycleParam']['fRadiusRight']<=0.8||_0x485f7d['stCycleParam']['fRadiusLeft']+_0x485f7d['stCycleParam']['fRadiusRight']>=1.2||_0x485f7d['stCycleParam']['fRadiusTop']+_0x485f7d['stCycleParam']['fRadiusBottom']<=0.8||_0x485f7d['stCycleParam']['fRadiusTop']+_0x485f7d['stCycleParam']['fRadiusBottom']>=1.2))return this['FECErrorCode']=_0x31d5c8,0x0;}}if(0x0==this['stFishEyeManager'][_0x237226]['bInited']){if(_0x353221&_0x485f7d['upDateType']){if(_0x2cb8a2!=this['stFishEyeManager'][_0x237226]['emCorrectType']&&_0x4e5968!=this['stFishEyeManager'][_0x237226]['emCorrectType']||_0x2aea6b==this['stFishEyeManager'][_0x237226]['emPlaceType'])return this['FECErrorCode']=_0x13beae,0x0;for(var _0x1db10f=0x1;_0x1db10f<_0x5440d6;_0x1db10f++)if(this['stFishEyeManager'][_0x1db10f]['nSubPort']&&this['stFishEyeManager'][_0x1db10f]['bUsed']&&this['stFishEyeManager'][_0x1db10f]['emCorrectType']==_0x54a990)return this['FECErrorCode']=_0x1ee0b0,0x0;this['stFishParam'][_0x237226]['fWideScanOffset']=_0x485f7d['fValue'];}if(_0x1f2582&_0x485f7d['upDateType']){if(null==_0x485f7d['stPTZColor'])return this['FECErrorCode']=_0x31d5c8,0x0;if(_0x485f7d['stPTZColor']['nR']>0xff||_0x485f7d['stPTZColor']['nG']>0xff||_0x485f7d['stPTZColor']['nB']>0xff||_0x485f7d['stPTZColor']['nAlpha']>0xff)return this['FECErrorCode']=_0x13beae,0x0;this['stFishParam'][_0x237226]['stPTZColor']['nR']=_0x485f7d['stPTZColor']['nR'],this['stFishParam'][_0x237226]['stPTZColor']['nG']=_0x485f7d['stPTZColor']['nG'],this['stFishParam'][_0x237226]['stPTZColor']['nB']=_0x485f7d['stPTZColor']['nB'],this['stFishParam'][_0x237226]['stPTZColor']['nAlpha']=_0x485f7d['stPTZColor']['nAlpha'];}if(_0x2b1528&_0x485f7d['upDateType']){if(_0x54a990!=this['stFishEyeManager'][_0x237226]['emCorrectType'])return this['FECErrorCode']=_0x13beae,0x0;this['stFishParam'][_0x237226]['stPTZParam']['fPTZPositionX']=_0x485f7d['fPTZParam']['fPTZPositionX'],this['stFishParam'][_0x237226]['stPTZParam']['fPTZPositionY']=_0x485f7d['fPTZParam']['fPTZPositionY'];}if(_0x3ff4c5&_0x485f7d['upDateType']){if(_0x54a990!=this['stFishEyeManager'][_0x237226]['emCorrectType'])return this['FECErrorCode']=_0x13beae,0x0;this['stFishParam'][_0x237226]['fZoom']=_0x485f7d['fPTZZoom'];}if(_0x160732&_0x485f7d['upDateType']){if(null==this['stFishParam']['stPTZSelect'])return 0x0;if(_0x54a990!=this['stFishEyeManager'][_0x237226]['emCorrectType'])return this['FECErrorCode']=_0x13beae,0x0;this['stFishParam']['stPTZSelect']['fTop']=_0x485f7d['stPTZSelect']['fTop'],this['stFishParam']['stPTZSelect']['fBottom']=_0x485f7d['stPTZSelect']['fBottom'],this['stFishParam']['stPTZSelect']['fLeft']=_0x485f7d['stPTZSelect']['fLeft'],this['stFishParam']['stPTZSelect']['fRight']=_0x485f7d['stPTZSelect']['fRight'];}if(_0x16ee77&_0x485f7d['upDateType']){if(null==_0x485f7d['stCycleParam'])return this['FECErrorCode']=_0x31d5c8,0x0;if(0x0==this['_IsValidRadiusParam'](_0x485f7d['stCycleParam']))return this['FECErrorCode']=_0x31d5c8,0x0;this['stFishParam'][0x0]['stCycleParam']['fRadiusLeft']=_0x485f7d['stCycleParam']['fRadiusLeft'],this['stFishParam'][0x0]['stCycleParam']['fRadiusRight']=_0x485f7d['stCycleParam']['fRadiusRight'],this['stFishParam'][0x0]['stCycleParam']['fRadiusTop']=_0x485f7d['stCycleParam']['fRadiusTop'],this['stFishParam'][0x0]['stCycleParam']['fRadiusBottom']=_0x485f7d['stCycleParam']['fRadiusBottom'];}return 0x1;}if(_0x353221&_0x485f7d['upDateType']){if(_0x2cb8a2!=this['stFishEyeManager'][_0x237226]['emCorrectType']&&_0x4e5968!=this['stFishEyeManager'][_0x237226]['emCorrectType']||_0x2aea6b==this['stFishEyeManager'][_0x237226]['emPlaceType'])return this['FECErrorCode']=_0x13beae,0x0;for(var _0x605b6d=0x1;_0x605b6d<_0x5440d6;_0x605b6d++)if(this['stFishEyeManager'][_0x605b6d]['nSubPort']&&this['stFishEyeManager'][_0x605b6d]['bUsed']&&this['stFishEyeManager'][_0x605b6d]['emCorrectType']==_0x54a990)return this['FECErrorCode']=_0x1ee0b0,0x0;var _0x2745e8={};if(_0x2745e8['nFishParamType']=_0x5ca12e,_0x2745e8['bBlack']=0x0,_0x2745e8['fAngle']=_0x485f7d['fValue'],_0xa87ede!=this['stFishEyeManager'][_0x237226]['pRender']['SR_SetFishParam'](_0x2745e8))return this['FECErrorCode']=_0x1ee0b0,0x0;this['stFishParam'][_0x237226]['fWideScanOffset']=_0x485f7d['fValue'];}if(_0x1f2582&_0x485f7d['upDateType']){if(null==_0x485f7d['stPTZColor'])return this['FECErrorCode']=_0x13beae,0x0;if(_0x485f7d['stPTZColor']['nR']>0xff||_0x485f7d['stPTZColor']['nG']>0xff||_0x485f7d['stPTZColor']['nB']>0xff||_0x485f7d['stPTZColor']['nAlpha']>0xff)return this['FECErrorCode']=_0x13beae,0x0;var _0x226925={};_0x226925['fR']=float(_0x485f7d['stPTZColor']['nR']/0xff),_0x226925['fG']=float(_0x485f7d['stPTZColor']['nG']/0xff),_0x226925['fB']=float(_0x485f7d['stPTZColor']['nB']/0xff),_0x226925['fA']=float(_0x485f7d['stPTZColor']['nAlpha']/0xff),this['stFishParam'][_0x237226]['stPTZColor']['nR']=_0x485f7d['stPTZColor']['nR'],this['stFishParam'][_0x237226]['stPTZColor']['nG']=_0x485f7d['stPTZColor']['nG'],this['stFishParam'][_0x237226]['stPTZColor']['nB']=_0x485f7d['stPTZColor']['nB'],this['stFishParam'][_0x237226]['stPTZColor']['nAlpha']=_0x485f7d['stPTZColor']['nAlpha'];}if(_0x2b1528&_0x485f7d['upDateType']){if(_0x54a990!=this['stFishEyeManager'][_0x237226]['emCorrectType'])return this['FECErrorCode']=_0x13beae,0x0;var _0x179a25={};_0x179a25['nFishParamType']=_0x3be196,_0x179a25['bBlack']=0x0,_0x179a25['fPTZX']=_0x485f7d['fPTZParam']['fPTZPositionX'],_0x179a25['fPTZY']=_0x485f7d['fPTZParam']['fPTZPositionY'];var _0x2080ac=this['stFishEyeManager'][_0x237226]['pRender']['SR_SetFishParam'](_0x179a25);if(_0xa87ede!=_0x2080ac)return this['FECErrorCode']=_0x1ee0b0,0x0;this['stFishParam'][_0x237226]['stPTZParam']['fPTZPositionX']=_0x485f7d['fPTZParam']['fPTZPositionX'],this['stFishParam'][_0x237226]['stPTZParam']['fPTZPositionY']=_0x485f7d['fPTZParam']['fPTZPositionY'];}if(_0x3ff4c5&_0x485f7d['upDateType']){if(_0x54a990!=this['stFishEyeManager'][_0x237226]['emCorrectType'])return this['FECErrorCode']=_0x13beae,0x0;var _0x3a5d9f={};if(_0x3a5d9f['nFishParamType']=_0x378a81,_0x3a5d9f['bBlack']=0x0,_0x3a5d9f['fZoom']=_0x485f7d['fPTZZoom'],_0xa87ede!=this['stFishEyeManager'][_0x237226]['pRender']['SR_SetFishParam'](_0x3a5d9f))return this['FECErrorCode']=_0x1ee0b0,0x0;this['stFishParam'][_0x237226]['fZoom']=_0x485f7d['fPTZZoom'];}if(_0x16ee77&_0x485f7d['upDateType']){if(0x0==this['_IsValidRadiusParam'](_0x485f7d['stCycleParam']))return this['FECErrorCode']=_0x31d5c8,0x0;var _0x5b29fe={};if(_0x5b29fe['nFishParamType']=_0x392c27,_0x5b29fe['bBlack']=0x1,_0x5b29fe['fRXLeft']=_0x485f7d['stCycleParam']['fRadiusLeft'],_0x5b29fe['fRXRight']=_0x485f7d['stCycleParam']['fRadiusRight'],_0x5b29fe['fRYTop']=_0x485f7d['stCycleParam']['fRadiusTop'],_0x5b29fe['fRYBottom']=_0x485f7d['stCycleParam']['fRadiusBottom'],_0xa87ede!=this['stFishEyeManager'][_0x237226]['pRender']['SR_SetFishParam'](this['stFishEyeManager'][_0x237226]['nValidSubPort'],_0x5b29fe))return this['FECErrorCode']=_0x31d5c8,0x0;this['stFishParam'][0x0]['stCycleParam']['fRadiusLeft']=_0x485f7d['stCycleParam']['fRadiusLeft'],this['stFishParam'][0x0]['stCycleParam']['fRadiusRight']=_0x485f7d['stCycleParam']['fRadiusRight'],this['stFishParam'][0x0]['stCycleParam']['fRadiusTop']=_0x485f7d['stCycleParam']['fRadiusTop'],this['stFishParam'][0x0]['stCycleParam']['fRadiusBottom']=_0x485f7d['stCycleParam']['fRadiusBottom'];}return _0x160732&_0x485f7d['upDateType']&&_0x54a990==this['stFishEyeManager'][_0x237226]['emCorrectType']&&_0xa87ede!=this['stFishEyeManager'][_0x237226]['pRender']['SR_SetFishParam'](this['stFishEyeManager'][_0x237226]['stPTZSelect'])?(this['FECErrorCode']=0x513,0x0):0x1;}},{'key':'FEC_GetParam','value':function(_0x23d898,_0x5da795){return _0x23d898<0x0||_0x23d898>0x1f||null==_0x23d898?(console['info']('%c\\x20FEC_GetParam-1\\x20nSubPort:%d','color:\\x20red',_0x23d898),this['FECErrorCode']=_0x41c932,0x0):null==this['stFishEyeManager'][_0x23d898]['pRender']?(console['info']('%c\\x20FEC_GetParam-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0x23d898]['pRender']),this['FECErrorCode']=_0x599b74,0x0):(this['stFishEyeManager'][_0x23d898]['pRender']['SR_GetFishParam'](_0x5da795),_0x5da795['emCorrectType']=this['stFishEyeManager'][_0x23d898]['emCorrectType'],0x1);}},{'key':'_IsValidRadiusParam','value':function(_0x40fd77){return _0x40fd77['fRadiusBottom']<=_0x40fd77['fRadiusTop']||_0x40fd77['fRadiusRight']<=_0x40fd77['fRadiusLeft']?0x0:0x1;}},{'key':'FEC_SetViewParam','value':function(_0x4a0fcd,_0x6d5dc9,_0x40e4db){return _0x4a0fcd<0x0||_0x4a0fcd>0x1f||null==_0x4a0fcd?(console['info']('%c\\x20FEC_SetViewParam-1\\x20nSubPort:%d','color:\\x20red',_0x4a0fcd),this['FECErrorCode']=_0x41c932,0x0):null==this['stFishEyeManager'][_0x4a0fcd]['pRender']?(console['info']('%c\\x20FEC_SetViewParam-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0x4a0fcd]['pRender']),this['FECErrorCode']=_0x599b74,0x0):_0x6d5dc9<_0x394973||_0x6d5dc9>_0x339c63?(this['FECErrorCode']=_0x633153,0x0):(this['FECErrorCode']=0x0,0x0==this['stFishEyeManager'][_0x4a0fcd]['bInited']?(this['FECErrorCode']=_0x4b57a2,0x0):_0x1837a3<=this['stFishEyeManager'][_0x4a0fcd]['emCorrectType']?_0xa87ede!=this['stFishEyeManager'][_0x4a0fcd]['pRender']['SR_SetViewParam'](_0x6d5dc9,_0x40e4db)?(this['FECErrorCode']=_0x633153,0x0):0x1:(this['FECErrorCode']=_0x13beae,0x0));}},{'key':'FEC_GetViewParam','value':function(_0xcd7f54,_0x5891ca,_0x5f1437){if(_0x5f1437['fValue']=-0x1,_0xcd7f54<0x0||_0xcd7f54>0x1f||null==_0xcd7f54)return console['info']('%c\\x20FEC_GetViewParam-1\\x20nSubPort:%d','color:\\x20red',_0xcd7f54),this['FECErrorCode']=_0x41c932,0x0;if(null==this['stFishEyeManager'][_0xcd7f54]['pRender'])return console['info']('%c\\x20FEC_GetViewParam-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0xcd7f54]['pRender']),this['FECErrorCode']=_0x599b74,0x0;if(_0x5891ca<0x1||_0x5891ca>0x3||0x0==this['stFishEyeManager'][_0xcd7f54]['bInited'])return 0x0;if(_0x1837a3<=this['stFishEyeManager'][_0xcd7f54]['emCorrectType'])this['stFishEyeManager'][_0xcd7f54]['pRender']['SR_GetViewParam'](_0x5891ca,_0x5f1437);return 0x1;}},{'key':'FEC_SetDisplayRegion','value':function(_0x3d509f,_0x79e701,_0x3db710,_0x11fb5e,_0x5d386a,_0x384723,_0x377cbb){return _0x3d509f<0x0||_0x3d509f>0x1f||null==_0x3d509f?(console['info']('%c\\x20FEC_SetDisplayRegion-1\\x20nSubPort:%d','color:\\x20red',_0x3d509f),this['FECErrorCode']=_0x41c932,0x0):null==this['stFishEyeManager'][_0x3d509f]['pRender']?(console['info']('%c\\x20FEC_SetDisplayRegion-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0x3d509f]['pRender']),this['FECErrorCode']=_0x599b74,0x0):0x0!=_0x79e701||0x0!=_0x3db710?(this['FECErrorCode']=_0x633153,0x0):this['stFishEyeManager'][_0x3d509f]['emCorrectType']!=_0x4fbb93&&this['stFishEyeManager'][_0x3d509f]['emCorrectType']!=_0x2cb8a2&&this['stFishEyeManager'][_0x3d509f]['emCorrectType']!=_0x4e5968&&this['stFishEyeManager'][_0x3d509f]['emCorrectType']!=_0x30e952?(this['FECErrorCode']=_0xa88cb3,0x0):0x0==this['stFishEyeManager'][_0x3d509f]['bInited']?(this['FECErrorCode']=_0x4b57a2,0x0):_0x11fb5e<0x0||_0x5d386a<0x0||_0x384723<0x0||_0x377cbb<0x0?(this['FECErrorCode']=_0x633153,0x0):_0xa87ede!=this['stFishEyeManager'][_0x3d509f]['pRender']['SR_SetDisplayRect'](_0x11fb5e,_0x5d386a,_0x384723,_0x377cbb,_0xe9e464)?(this['FECErrorCode']=0x511,0x0):0x1;}},{'key':'FEC_SetBackCilling','value':function(_0xbc4cf3,_0x201397){return _0xbc4cf3<0x0||_0xbc4cf3>0x1f||null==_0xbc4cf3?(this['FECErrorCode']=_0x41c932,0x0):null==this['stFishEyeManager'][_0xbc4cf3]['pRender']?(this['FECErrorCode']=_0x599b74,0x0):0x0==this['stFishEyeManager'][_0xbc4cf3]['bInited']?(this['FECErrorCode']=_0x4b57a2,0x0):_0xa87ede!=this['stFishEyeManager'][_0xbc4cf3]['pRender']['SR_SetRenderState'](_0x57ef5a,_0x201397)?(this['FECErrorCode']=0x511,0x0):0x1;}},{'key':'FEC_GetPTZPort','value':function(_0x4fe218,_0x7d79a,_0x4703e2){if(null!=this['stFishEyeManager'][_0x4fe218]['pRender']){var _0x47f9ac={'nPTZPort':-0x1};if(this['stFishEyeManager'][_0x4fe218]['pRender']['SR_GetPTZPort'](_0x7d79a,_0x4703e2,_0x47f9ac)==_0xa87ede)return _0x47f9ac['nPTZPort'];}return-0x1;}},{'key':'FEC_SetPTZDisplayMode','value':function(_0x5168d7){return _0x5168d7>=0x0&&_0x5168d7<=0x2?(null!=this['stFishEyeManager'][0x0]['pRender']&&this['stFishEyeManager'][0x0]['pRender']['SR_SetPTZDisplayMode'](_0x5168d7),this['FECShowMode']=_0x5168d7,0x1):(console['info']('%c\\x20FEC_SetPTZDisplayMode\\x20ptzMode:%d','color:\\x20red',_0x5168d7),0x0);}},{'key':'CheckFrameRGB','value':function(_0x400c17,_0x548d6f,_0x2d4a2b,_0x429d43,_0x85a7c0,_0x75707d){if(null==_0x400c17)return 0x0;for(var _0x1abe54=_0x400c17['width']/(_0x429d43-0x1),_0x597f03=_0x400c17['height']/(_0x2d4a2b-0x1),_0x5de9dd=0x0,_0x42fb15=0x0,_0x5e4ee7=[],_0x370864=0x0;_0x370864<_0x2d4a2b*_0x429d43;_0x370864++)_0x5e4ee7[_0x370864]=0x0,this['aPOSAdaptBuf'][_0x370864]=0x0;if(_0x548d6f){for(var _0x3e2865=0x0,_0x5c702f=0x0;_0x5c702f<_0x400c17['height'];_0x5c702f++)for(var _0x10ae9f=0x0;_0x10ae9f<_0x400c17['width'];_0x10ae9f++){_0x5de9dd=(_0x5de9dd=Math['round'](_0x10ae9f/(_0x1abe54/0x2)/0x2))<_0x429d43?_0x5de9dd:_0x429d43-0x1,_0x42fb15=(_0x42fb15=Math['round'](_0x5c702f/(_0x597f03/0x2)/0x2))<_0x2d4a2b?_0x42fb15:_0x2d4a2b-0x1;var _0x336a7e=_0x400c17['pBuffer'][_0x3e2865],_0x24b367=_0x400c17['pBuffer'][_0x3e2865+0x1],_0x36ee90=_0x400c17['pBuffer'][_0x3e2865+0x2],_0x22e317=Math['round'](0.299*_0x336a7e+0.587*_0x24b367+0.114*_0x36ee90);this['aPOSAdaptBuf'][_0x5de9dd+_0x42fb15*_0x429d43]+=_0x22e317,_0x5e4ee7[_0x5de9dd+_0x42fb15*_0x429d43]++,_0x3e2865+=0x4;}for(var _0x401fa2=0x0,_0x5bb257=0x0;_0x5bb257<_0x2d4a2b*_0x429d43;_0x5bb257++)_0x401fa2=this['aPOSAdaptBuf'][_0x5bb257]/_0x5e4ee7[_0x5bb257],this['aPOSAdaptBuf'][_0x5bb257]=_0x401fa2>0x80?0x0:0x1;}else{for(var _0x3562ea=Math['round'](_0x85a7c0*_0x400c17['width']),_0x1174dc=Math['round'](_0x75707d*_0x400c17['height']),_0x55c743=_0x1174dc-0x2;_0x55c743<_0x1174dc+0x2;_0x55c743++)for(var _0xb2203=_0x3562ea-0x2;_0xb2203<_0x3562ea+0x2;_0xb2203++){var _0x5add96=0x4*Math['floor']((0x4*_0xb2203+_0x55c743*_0x400c17['width']*0x4)/0x4),_0x1f54e5=_0x400c17['pBuffer'][_0x5add96],_0x2a4e1c=_0x400c17['pBuffer'][_0x5add96+0x1],_0x49d1c6=_0x400c17['pBuffer'][_0x5add96+0x2],_0x2aa3f7=Math['round'](0.299*_0x1f54e5+0.587*_0x2a4e1c+0.114*_0x49d1c6);this['aPOSAdaptBuf'][0x0]+=_0x2aa3f7,_0x5e4ee7[0x0]++;}this['aPOSAdaptBuf'][0x0]=this['aPOSAdaptBuf'][0x0]/_0x5e4ee7[0x0]>0x80?0x0:0x1;}return 0x1;}},{'key':'GetWaterFontParam','value':function(_0x2b0736){var _0x4f4c87=_0x2b0736['pFontString']['length'],_0x1ea0c5=_0x2b0736['pstFontRotate']['fRotateAngle']%0x168/0x168*0x2*Math['PI'],_0x4bcf18=Math['min'](_0x2b0736['pstFontSize']['nFontWidth'],_0x2b0736['pstFontSize']['nFontHeight']),_0x353469=_0x4bcf18/this['mainCanvasID']['width'],_0x5c3214=_0x4bcf18/this['mainCanvasID']['height'],_0xf815fd=_0x353469*Math['cos'](Math['PI']/0x2-_0x1ea0c5)*_0x2b0736['pSpace'],_0x55e462=_0x5c3214*Math['sin'](Math['PI']/0x2-_0x1ea0c5)*_0x2b0736['pSpace'],_0x59715c=[],_0x34cae1=[],_0x7da49d=[];if(_0x2b0736['nFontAlign']){for(var _0x1169c4=0x0;_0x1169c4<_0x4f4c87;_0x1169c4++)_0x59715c[_0x1169c4]=_0x2b0736['pFontString'][0x0]['length']*_0x353469/0x6,_0x34cae1[_0x1169c4]=Math['atan2'](_0x59715c[0x0],_0x55e462),_0x7da49d[_0x1169c4]=Math['sqrt'](_0x59715c[0x0]*_0x59715c[0x0],_0x55e462*_0x55e462);}else{for(var _0x2fc8f2=0x0;_0x2fc8f2<_0x4f4c87;_0x2fc8f2++)_0x59715c[_0x2fc8f2]=0x0,_0x34cae1[_0x2fc8f2]=0x0,_0x7da49d[_0x2fc8f2]=0x0;}var _0x2555f3=Math['floor'](_0x2b0736['pstFontNumber']['nRowNumber']),_0x3d982a=Math['floor'](_0x2b0736['pstFontNumber']['nColNumber']),_0x55fbab=_0x2555f3*_0x3d982a;if(_0x2b0736['pstFontRotate']['fFillFullScreen']){for(var _0x2a16f3=[],_0x3d058c=[],_0x14f147=0x1/(_0x2555f3-0x1),_0x54aad3=0x0;_0x54aad3<_0x2555f3;_0x54aad3++)_0x2a16f3[_0x54aad3]=_0x14f147*_0x54aad3-_0x55e462*((_0x4f4c87-0x1)/0x2);for(var _0x207291=0x1/(_0x3d982a-0x1),_0x38e523=0x0;_0x38e523<_0x3d982a;_0x38e523++)_0x3d058c[_0x38e523]=_0x207291*_0x38e523+_0xf815fd*((_0x4f4c87-0x1)/0x2);for(var _0x29c684=0x0;_0x29c684<_0x55fbab;++_0x29c684)for(var _0x3e40a4=0x0;_0x3e40a4<_0x4f4c87;_0x3e40a4++){this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]={},this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pString']=_0x2b0736['pFontString'][_0x3e40a4],this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['nFontWidth']=_0x4bcf18,this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['nFontHeight']=_0x4bcf18,this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstStartPos']={};var _0x268e69=_0x29c684%_0x3d982a,_0x3739c2=Math['floor'](_0x29c684/_0x3d982a),_0x42d794=Math['PI']/0x2-_0x1ea0c5+_0x34cae1[_0x3e40a4];this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstStartPos']['fX']=_0x3d058c[_0x268e69]-_0x3e40a4*_0xf815fd+_0x7da49d[_0x3e40a4]*Math['cos'](_0x42d794),this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstStartPos']['fY']=_0x2a16f3[_0x3739c2]+_0x3e40a4*_0x55e462-_0x7da49d[_0x3e40a4]*Math['sin'](_0x42d794),_0x2b0736['nColorAdapt']?(this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstFontColor']={},this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstFontColor']['fR']=this['aPOSAdaptBuf'][_0x29c684],this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstFontColor']['fG']=this['aPOSAdaptBuf'][_0x29c684],this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstFontColor']['fB']=this['aPOSAdaptBuf'][_0x29c684],this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstFontColor']['fA']=_0x2b0736['pstFontColor']['fA']):this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstFontColor']=_0x2b0736['pstFontColor'],this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['bBackGround']=!0x1,this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstBGColor']=null,this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['fRotateAngle']=_0x2b0736['pstFontRotate']['fRotateAngle'],this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pFontFamily']=_0x2b0736['pFontFamily'],_0x2b0736['nFontAlign']?(this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['textAlign']='left',this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['textBaseline']='top'):(this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['textAlign']='center',this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['textBaseline']='middle');}}else{for(var _0x177df4=0x0;_0x177df4<_0x2b0736['pFontString']['length'];_0x177df4++)this['pWaterFontParam'][_0x177df4]={},this['pWaterFontParam'][_0x177df4]['pString']=_0x2b0736['pFontString'][_0x177df4],this['pWaterFontParam'][_0x177df4]['nFontWidth']=_0x4bcf18,this['pWaterFontParam'][_0x177df4]['nFontHeight']=_0x4bcf18,this['pWaterFontParam'][_0x177df4]['pstStartPos']={},this['pWaterFontParam'][_0x177df4]['pstStartPos']['fX']=_0x2b0736['pstStartPos']['fX']-_0x177df4*_0xf815fd,this['pWaterFontParam'][_0x177df4]['pstStartPos']['fY']=_0x2b0736['pstStartPos']['fY']+_0x177df4*_0x55e462,_0x2b0736['nColorAdapt']?(this['pWaterFontParam'][_0x177df4]['pstFontColor']={},this['pWaterFontParam'][_0x177df4]['pstFontColor']['fR']=this['aPOSAdaptBuf'][0x0],this['pWaterFontParam'][_0x177df4]['pstFontColor']['fG']=this['aPOSAdaptBuf'][0x0],this['pWaterFontParam'][_0x177df4]['pstFontColor']['fB']=this['aPOSAdaptBuf'][0x0],this['pWaterFontParam'][_0x177df4]['pstFontColor']['fA']=_0x2b0736['pstFontColor']['fA']):this['pWaterFontParam'][_0x177df4]['pstFontColor']=_0x2b0736['pstFontColor'],this['pWaterFontParam'][_0x177df4]['bBackGround']=!0x1,this['pWaterFontParam'][_0x177df4]['pstBGColor']=null,this['pWaterFontParam'][_0x177df4]['fRotateAngle']=_0x2b0736['pstFontRotate']['fRotateAngle'],this['pWaterFontParam'][_0x177df4]['pFontFamily']=_0x2b0736['pFontFamily'],_0x2b0736['nFontAlign']?(this['pWaterFontParam'][_0x177df4]['textAlign']='left',this['pWaterFontParam'][_0x177df4]['textBaseline']='top'):(this['pWaterFontParam'][_0x177df4]['textAlign']='center',this['pWaterFontParam'][_0x177df4]['textBaseline']='middle');}return 0x1;}},{'key':'SetWaterMarkFont','value':function(_0x1caf95,_0x5cfbb1){if(this['pWaterFontParam']['splice'](0x0,this['pWaterFontParam']['length']),null===_0x1caf95)return 0x1;if(_0x1caf95['nColorAdapt']){var _0x30b2aa={'nWidth':0x10,'nHeight':0x10,'nBufferLen':0x0},_0x45f96a=this['oVideoHandle']['SR_GetCaptureSize'](_0x30b2aa);if(_0xa87ede==_0x45f96a){var _0x24b57b=new Uint8Array(_0x30b2aa['nBufferLen']),_0x498d3b={};if(_0x498d3b['pBuffer']=_0x24b57b,this['oVideoHandle']['SR_CaptureScreen'](_0x498d3b),_0x498d3b['width']=_0x30b2aa['nWidth'],_0x498d3b['height']=_0x30b2aa['nHeight'],_0x1caf95['pstFontRotate']['fFillFullScreen']){var _0x3dc164=Math['floor'](_0x1caf95['pstFontNumber']['nRowNumber']),_0x5ec18c=Math['floor'](_0x1caf95['pstFontNumber']['nColNumber']);this['CheckFrameRGB'](_0x498d3b,0x1,_0x3dc164,_0x5ec18c,0x0,0x0);}else this['CheckFrameRGB'](_0x498d3b,0x0,0x1,0x1,_0x1caf95['pstStartPos']['fX'],_0x1caf95['pstStartPos']['fY']);_0x24b57b=null;}}return this['GetWaterFontParam'](_0x1caf95),0x1;}},{'key':'ImageDecoder','value':function(_0x5a3da3,_0x1c5c5e,_0xbe633){var _0x5e9ab7=this;_0x5a3da3['decode']({'frameIndex':_0xbe633})['then'](function(_0xfaa340){_0x5e9ab7['pWaterImageParam'][_0xbe633]={},_0x5e9ab7['pWaterImageParam'][_0xbe633]['videoStream']=_0xfaa340['image'],_0x5e9ab7['pWaterImageParam'][_0xbe633]['nImageWidth']=_0xfaa340['image']['displayWidth'],_0x5e9ab7['pWaterImageParam'][_0xbe633]['nImageHeight']=_0xfaa340['image']['displayHeight'],null!=_0x1c5c5e['pstRectPos']?_0x5e9ab7['pWaterImageParam'][_0xbe633]['pstRectPos']=_0x1c5c5e['pstRectPos']:_0x5e9ab7['pWaterImageParam'][_0xbe633]['pstRectPos']={'fLeft':0x0,'fRight':0.1,'fTop':0x0,'fBottom':0.1},null!=_0x1c5c5e['fAlpha']&&_0x1c5c5e['fAlpha']<=0x1&&_0x1c5c5e['fAlpha']>=0x0?_0x5e9ab7['pWaterImageParam'][_0xbe633]['fAlpha']=_0x1c5c5e['fAlpha']:_0x5e9ab7['pWaterImageParam'][_0xbe633]['fAlpha']=0x1,_0x5e9ab7['waterMarkImageMax']=_0x5a3da3['tracks']['selectedTrack']['frameCount'],_0xbe633<_0x5a3da3['tracks']['selectedTrack']['frameCount']-0x1&&_0x5e9ab7['ImageDecoder'](_0x5a3da3,_0x1c5c5e,_0xbe633+0x1);});}},{'key':'SetWaterMarkImage','value':function(_0x4e2929){if(this['pWaterImageParam']['splice'](0x0,this['pWaterImageParam']['length']),null===_0x4e2929)return 0x1;if(null!=_0x4e2929['pImageData']){var _0xb20ecb=new ImageDecoder({'data':_0x4e2929['pImageData'],'type':'image/'+_0x4e2929['pImageType']});_0xb20ecb['tracks']['ready']['then'](function(){}),this['ImageDecoder'](_0xb20ecb,_0x4e2929,0x0);}return this['waterMarkImageIndex']=0x0,0x1;}},{'key':'_ConvertDisplayEffect','value':function(_0x4ea039,_0x46ff13){switch(_0x4ea039){case _0x2aea6b:return _0x54a990==_0x46ff13?_0x186ff9['SR_DE_FISH_PTZ_WALL']:_0x4e5968==_0x46ff13||_0x30e952==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_WALL']:_0x1837a3==_0x46ff13?_0x186ff9['SR_DE_FISH_SEMISPHERE']:_0x30ecd9==_0x46ff13?_0x186ff9['SR_DE_FISH_PLANET']:_0x39b0d3==_0x46ff13?_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:_0x2a01ec==_0x46ff13?_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:_0x186ff9['SR_DE_FISH_ORIGINAL'];case _0x240c92:return _0x54a990==_0x46ff13?_0x186ff9['SR_DE_FISH_PTZ_FLOOR']:_0x4e5968==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:_0x2cb8a2==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']:_0x30e952==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_WALL']:_0x1837a3==_0x46ff13?_0x186ff9['SR_DE_FISH_SEMISPHERE']:_0x20b7ae==_0x46ff13?_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:_0x443c47==_0x46ff13?_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:_0x30ecd9==_0x46ff13?_0x186ff9['SR_DE_FISH_PLANET']:_0x186ff9['SR_DE_FISH_ORIGINAL'];case _0x1e68ea:return _0x54a990==_0x46ff13?_0x186ff9['SR_DE_FISH_PTZ_CEILING']:_0x4e5968==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:_0x2cb8a2==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:_0x30e952==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_WALL']:_0x1837a3==_0x46ff13?_0x186ff9['SR_DE_FISH_SEMISPHERE']:_0x20b7ae==_0x46ff13?_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:_0x443c47==_0x46ff13?_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_CEILING']:_0x30ecd9==_0x46ff13?_0x186ff9['SR_DE_FISH_PLANET']:_0x186ff9['SR_DE_FISH_ORIGINAL'];default:return _0x186ff9['SR_DE_FISH_ORIGINAL'];}return _0x186ff9['SR_DE_FISH_ORIGINAL'];}},{'key':'GetCanvasData','value':function(_0x168b52){var _0x4cbc60={'nWidth':0x0,'nHeight':0x0,'nBufferLen':0x0},_0x2f0ef5=this['oVideoHandle']['SR_GetCaptureSize'](_0x4cbc60);(_0xa87ede!=_0x2f0ef5||_0x4cbc60['nBufferLen']<=0x0)&&_0x168b52(null);var _0x58ab1e=new Uint8Array(_0x4cbc60['nBufferLen']);null==_0x58ab1e&&_0x168b52(null);var _0x40363f={};_0x40363f['pBuffer']=_0x58ab1e,this['oVideoHandle']['SR_CaptureScreen'](_0x40363f),_0x168b52(_0x58ab1e,_0x4cbc60['nWidth'],_0x4cbc60['nHeight']);}},{'key':'FindIntelNodefromList','value':function(_0xff0932){if(0x0!=this['privateLinesInfo']['length']){var _0x11e4ab=this['privateLinesInfo'][0x0]['absTimeStamp'];if(_0x11e4ab<=_0xff0932+0x64&&_0x11e4ab>_0xff0932-0x64)this['curLinesInfo']=this['privateLinesInfo']['shift']();else{if(_0x11e4ab>_0xff0932+0x7d0||_0x11e4ab<_0xff0932-0x7d0)for(this['curLinesInfo']=this['privateLinesInfo']['shift']();this['privateLinesInfo']['length']>0x0;){var _0x2d684a=this['privateLinesInfo'][0x0]['absTimeStamp'];if(!(_0x2d684a>_0xff0932+0x7d0||_0x2d684a<_0xff0932-0x7d0))break;this['curLinesInfo']=this['privateLinesInfo']['shift']();}}}if(0x0!=this['privateFontsInfo']['length']){var _0x588728=this['privateFontsInfo'][0x0]['absTimeStamp'];if(_0x588728<=_0xff0932+0x3e8&&_0x588728>_0xff0932-0x3e8)this['curFontsInfo']=this['privateFontsInfo']['shift']();else{if(_0x588728>_0xff0932+0x7d0||_0x588728<_0xff0932-0x7d0)for(this['curFontsInfo']=this['privateFontsInfo']['shift']();this['privateFontsInfo']['length']>0x0;){var _0xe2c5d7=this['privateFontsInfo'][0x0]['absTimeStamp'];if(!(_0xe2c5d7>_0xff0932+0x7d0||_0xe2c5d7<_0xff0932-0x7d0))break;this['curFontsInfo']=this['privateFontsInfo']['shift']();}}}if(0x0!=this['privateImageInfo']['length']){var _0x258d83=this['privateImageInfo'][0x0]['absTimeStamp'];if(_0x258d83<=_0xff0932+0x3e8&&_0x258d83>_0xff0932-0x3e8)this['curImagesInfo']=this['privateImageInfo']['shift']();else{if(_0x258d83>_0xff0932+0x7d0||_0x258d83<_0xff0932-0x7d0)for(this['curImagesInfo']=this['privateImageInfo']['shift']();this['privateImageInfo']['length']>0x0;){var _0x5a81bc=this['privateImageInfo'][0x0]['absTimeStamp'];if(!(_0x5a81bc>_0xff0932+0x7d0||_0x5a81bc<_0xff0932-0x7d0))break;this['curImagesInfo']=this['privateImageInfo']['shift']();}}}return 0x1;}},{'key':'RenderPrivateData','value':function(_0x1231e6){return 0x0!=this['privateLinesInfo']['length']||_0x1231e6||(this['curLinesInfo']=null),0x1;}},{'key':'InputPrivateInfo','value':function(_0x4714d3,_0x175777,_0x56d599){var _0x1f7229=!0x1,_0x186733=0x0;if(_0x4714d3['linesNum']>0x0){if(_0x4714d3['absTimeStamp']<=this['maxPrivateLineTimeStamp']){var _0x1673f8=0x0;for(_0x1673f8=0x0;_0x1673f8<this['privateLinesInfo']['length'];_0x1673f8++)if(this['privateLinesInfo'][_0x1673f8]['absTimeStamp']==_0x4714d3['absTimeStamp']){_0x1f7229=!0x0,_0x186733=_0x1673f8;break;}}if(_0x1f7229){var _0x2798dd=this['privateLinesInfo'][_0x186733]['linesNum'];this['privateLinesInfo'][_0x186733]['linesNum']=_0x2798dd+_0x4714d3['linesNum'];for(var _0x271036=0x0;_0x271036<_0x4714d3['linesNum'];_0x271036++){this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]={},this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['vertex_num']=_0x4714d3['stDrawLinesArray'][_0x271036]['vertex_num'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['lineWidth']=_0x4714d3['stDrawLinesArray'][_0x271036]['lineWidth'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['bFill']=_0x4714d3['stDrawLinesArray'][_0x271036]['bFill'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['bLoop']=_0x4714d3['stDrawLinesArray'][_0x271036]['bLoop'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['color']={},this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['color']['R']=_0x4714d3['stDrawLinesArray'][_0x271036]['color']['R'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['color']['G']=_0x4714d3['stDrawLinesArray'][_0x271036]['color']['G'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['color']['B']=_0x4714d3['stDrawLinesArray'][_0x271036]['color']['B'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['color']['A']=_0x4714d3['stDrawLinesArray'][_0x271036]['color']['A'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['stPoint']=[];for(var _0x23d852=0x0;_0x23d852<_0x4714d3['stDrawLinesArray'][_0x271036]['vertex_num'];_0x23d852++)this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['stPoint'][_0x23d852]={},this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['stPoint'][_0x23d852]['x']=_0x4714d3['stDrawLinesArray'][_0x271036]['stPoint'][_0x23d852]['x'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['stPoint'][_0x23d852]['y']=_0x4714d3['stDrawLinesArray'][_0x271036]['stPoint'][_0x23d852]['y'];}}else{this['maxPrivateLineTimeStamp']<_0x4714d3['absTimeStamp']&&(this['maxPrivateLineTimeStamp']=_0x4714d3['absTimeStamp']);var _0x134d36={};_0x134d36['linesNum']=_0x4714d3['linesNum'],_0x134d36['absTimeStamp']=_0x4714d3['absTimeStamp'],_0x134d36['stDrawLinesArray']=[];for(var _0x4bcab2=0x0;_0x4bcab2<_0x4714d3['linesNum'];_0x4bcab2++){_0x134d36['stDrawLinesArray'][_0x4bcab2]={},_0x134d36['stDrawLinesArray'][_0x4bcab2]['vertex_num']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['vertex_num'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['lineWidth']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['lineWidth'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['bFill']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['bFill'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['bLoop']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['bLoop'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['color']={},_0x134d36['stDrawLinesArray'][_0x4bcab2]['color']['R']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['color']['R'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['color']['G']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['color']['G'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['color']['B']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['color']['B'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['color']['A']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['color']['A'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['stPoint']=[];for(var _0x19e95f=0x0;_0x19e95f<_0x4714d3['stDrawLinesArray'][_0x4bcab2]['vertex_num'];_0x19e95f++)_0x134d36['stDrawLinesArray'][_0x4bcab2]['stPoint'][_0x19e95f]={},_0x134d36['stDrawLinesArray'][_0x4bcab2]['stPoint'][_0x19e95f]['x']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['stPoint'][_0x19e95f]['x'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['stPoint'][_0x19e95f]['y']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['stPoint'][_0x19e95f]['y'];}this['privateLinesInfo']['push'](_0x134d36);}}if(_0x175777['nFontsNum']>0x0){if(_0x175777['absTimeStamp']<=this['maxPrivateLineTimeStamp']){var _0x5026f8=0x0;for(_0x5026f8=0x0;_0x5026f8<this['privateFontsInfo']['length'];_0x5026f8++)if(this['privateFontsInfo'][_0x5026f8]['absTimeStamp']==_0x175777['absTimeStamp']){_0x1f7229=!0x0,_0x186733=_0x5026f8;break;}}if(_0x1f7229);else{this['maxPrivateLineTimeStamp']<_0x175777['absTimeStamp']&&(this['maxPrivateLineTimeStamp']=_0x175777['absTimeStamp']);var _0x4876a6={};_0x4876a6['nFontsNum']=_0x175777['nFontsNum'],_0x4876a6['absTimeStamp']=_0x175777['absTimeStamp'],_0x4876a6['stDrawFontsArray']=[];for(var _0x52496a=0x0;_0x52496a<_0x175777['nFontsNum'];_0x52496a++)_0x4876a6['stDrawFontsArray'][_0x52496a]={},_0x4876a6['stDrawFontsArray'][_0x52496a]['nFontSizeW']=_0x175777['stDrawFontsArray'][_0x52496a]['nFontSizeW'],_0x4876a6['stDrawFontsArray'][_0x52496a]['nFontSizeH']=_0x175777['stDrawFontsArray'][_0x52496a]['nFontSizeH'],_0x4876a6['stDrawFontsArray'][_0x52496a]['color']={},_0x4876a6['stDrawFontsArray'][_0x52496a]['color']['R']=_0x175777['stDrawFontsArray'][_0x52496a]['color']['R'],_0x4876a6['stDrawFontsArray'][_0x52496a]['color']['G']=_0x175777['stDrawFontsArray'][_0x52496a]['color']['G'],_0x4876a6['stDrawFontsArray'][_0x52496a]['color']['B']=_0x175777['stDrawFontsArray'][_0x52496a]['color']['B'],_0x4876a6['stDrawFontsArray'][_0x52496a]['color']['A']=_0x175777['stDrawFontsArray'][_0x52496a]['color']['A'],_0x4876a6['stDrawFontsArray'][_0x52496a]['stPoint']={},_0x4876a6['stDrawFontsArray'][_0x52496a]['stPoint']['x']=_0x175777['stDrawFontsArray'][_0x52496a]['stPoint']['x'],_0x4876a6['stDrawFontsArray'][_0x52496a]['stPoint']['y']=_0x175777['stDrawFontsArray'][_0x52496a]['stPoint']['y'],_0x4876a6['stDrawFontsArray'][_0x52496a]['fontstring']=_0x175777['stDrawFontsArray'][_0x52496a]['fontString'];this['privateFontsInfo']['push'](_0x4876a6);}}if(_0x56d599['nPixelFormat']>0x0){if(_0x56d599['absTimeStamp']<=this['maxPrivateLineTimeStamp']){var _0x33e36e=0x0;for(_0x33e36e=0x0;_0x33e36e<this['privateImageInfo']['length'];_0x33e36e++)if(this['privateImageInfo'][_0x33e36e]['absTimeStamp']==_0x56d599['absTimeStamp']){_0x1f7229=!0x0,_0x186733=_0x33e36e;break;}}if(_0x1f7229);else{this['maxPrivateLineTimeStamp']<_0x56d599['absTimeStamp']&&(this['maxPrivateLineTimeStamp']=_0x56d599['absTimeStamp']);var _0x271b09={};_0x271b09['absTimeStamp']=_0x56d599['absTimeStamp'],_0x271b09['nWidth']=_0x56d599['nWidth'],_0x271b09['nHeight']=_0x56d599['nHeight'],_0x271b09['pstRect']={},_0x271b09['pstRect']['fTop']=_0x56d599['pstRect']['fTop'],_0x271b09['pstRect']['fBottom']=_0x56d599['pstRect']['fBottom'],_0x271b09['pstRect']['fLeft']=_0x56d599['pstRect']['fLeft'],_0x271b09['pstRect']['fRight']=_0x56d599['pstRect']['fRight'],_0x271b09['nPixelFormat']=_0x56d599['nPixelFormat'],_0x271b09['fAlpha']=_0x56d599['fAlpha'],_0x271b09['picImageData']=_0x56d599['picImageData'],this['privateImageInfo']['push'](_0x271b09);}}return 0x1;}},{'key':'WebGLDisplayCallBack','value':function(_0x273e95){if(0x0!=_0x273e95['privateLinesInfo']['length']||null!=_0x273e95['curLinesInfo']){if(null!=_0x273e95['curLinesInfo']){for(var _0x152c9d=[],_0x3b3ffc=0x0,_0x4ea37c=0x1,_0xae4f9b=0x0;_0xae4f9b<_0x273e95['curLinesInfo']['linesNum'];_0xae4f9b++){_0x152c9d[_0xae4f9b]={},_0x152c9d[_0xae4f9b]['nPointNum']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['vertex_num'],_0x152c9d[_0xae4f9b]['nLineWidth']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['lineWidth'],_0x4ea37c=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['bFill'],_0x152c9d[_0xae4f9b]['bLoop']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['bLoop'],_0x152c9d[_0xae4f9b]['pstColor']={},_0x152c9d[_0xae4f9b]['pstColor']['fR']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['color']['R'],_0x152c9d[_0xae4f9b]['pstColor']['fG']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['color']['G'],_0x152c9d[_0xae4f9b]['pstColor']['fB']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['color']['B'],_0x152c9d[_0xae4f9b]['pstColor']['fA']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['color']['A'],_0x152c9d[_0xae4f9b]['pstPoints']=[];for(var _0x19d608=0x0;_0x19d608<_0x152c9d[_0xae4f9b]['nPointNum'];_0x19d608++)_0x152c9d[_0xae4f9b]['pstPoints'][_0x19d608]={},_0x152c9d[_0xae4f9b]['pstPoints'][_0x19d608]['fX']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['stPoint'][_0x19d608]['x'],_0x152c9d[_0xae4f9b]['pstPoints'][_0x19d608]['fY']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['stPoint'][_0x19d608]['y'];_0x3b3ffc+=_0x152c9d[_0xae4f9b]['nPointNum'];}_0x273e95['oVideoHandle']['SR_DrawLinesEx'](_0x152c9d,_0x273e95['curLinesInfo']['linesNum'],_0x3b3ffc,_0x4ea37c);}_0x273e95['curLinesInfo']=null;}if((0x0!=_0x273e95['privateFontsInfo']['length']||null!=_0x273e95['curFontsInfo'])&&null!=_0x273e95['curFontsInfo']&&0x0!=_0x273e95['curFontsInfo']['nFontsNum']){for(var _0x318203=[],_0x238209=0x0;_0x238209<_0x273e95['curFontsInfo']['nFontsNum'];_0x238209++){var _0x3ac5ed={},_0x431a46=_0x273e95['curFontsInfo']['stDrawFontsArray'][_0x238209]['fontstring'],_0x3a1ba2={};_0x3a1ba2['fX']=_0x273e95['curFontsInfo']['stDrawFontsArray'][_0x238209]['stPoint']['x'],_0x3a1ba2['fY']=_0x273e95['curFontsInfo']['stDrawFontsArray'][_0x238209]['stPoint']['y'];var _0x1f2cce={'fR':0x1,'fG':0x0,'fB':0x0};_0x1f2cce['fA']=_0x273e95['curFontsInfo']['stDrawFontsArray'][_0x238209]['color']['A'];var _0x5074eb=_0x273e95['curFontsInfo']['stDrawFontsArray'][_0x238209]['nFontSizeW'],_0x441f96=_0x273e95['curFontsInfo']['stDrawFontsArray'][_0x238209]['nFontSizeH'];_0x3ac5ed['pString']=_0x431a46,_0x3ac5ed['pstStartPos']=_0x3a1ba2,_0x3ac5ed['nFontWidth']=_0x5074eb,_0x3ac5ed['nFontHeight']=_0x441f96,_0x3ac5ed['pstFontColor']=_0x1f2cce,_0x3ac5ed['bBackGround']=!0x1,_0x3ac5ed['pstBGColor']=null,_0x3ac5ed['fRotateAngle']=0x0,_0x3ac5ed['pFontFamily']='sans-serif',_0x318203['push'](_0x3ac5ed);}_0x273e95['oVideoHandle']['SR_DrawFontEx'](_0x318203,_0x273e95['curFontsInfo']['nFontsNum']);}if(0x0!=_0x273e95['privateImageInfo']['length']||null!=_0x273e95['curImagesInfo']){var _0x2481ef=null;null!=_0x273e95['curImagesInfo']&&null!=_0x273e95['curImagesInfo']&&null!=_0x273e95['curImagesInfo']['picImageData']&&null!=_0x273e95['curImagesInfo']['picImageData']&&(_0x2481ef=new Uint16Array(_0x273e95['curImagesInfo']['picImageData']['buffer'])),null!=_0x273e95['curImagesInfo']&&_0x273e95['curImagesInfo']['nPixelFormat']>0x0&&_0x273e95['oVideoHandle']['SR_DrawImage'](_0x2481ef,_0x273e95['curImagesInfo']['nWidth'],_0x273e95['curImagesInfo']['nHeight'],_0x273e95['curImagesInfo']['pstRect'],_0x273e95['curImagesInfo']['nPixelFormat'],_0x273e95['curImagesInfo']['fAlpha']);}if(0x0!==_0x273e95['pWaterFontParam']['length']&&_0x273e95['oVideoHandle']['SR_DrawFontEx'](_0x273e95['pWaterFontParam'],_0x273e95['pWaterFontParam']['length']),0x0!==_0x273e95['pWaterImageParam']['length']){_0x273e95['waterMarkImageIndex']>=_0x273e95['waterMarkImageMax']&&(_0x273e95['waterMarkImageIndex']=0x0);var _0x1b3126=_0x273e95['waterMarkImageIndex'];_0x273e95['oVideoHandle']['SR_DrawImage'](_0x273e95['pWaterImageParam'][_0x1b3126]['videoStream'],_0x273e95['pWaterImageParam'][_0x1b3126]['nImageWidth'],_0x273e95['pWaterImageParam'][_0x1b3126]['nImageHeight'],_0x273e95['pWaterImageParam'][_0x1b3126]['pstRectPos'],_0xa01ff6,_0x273e95['pWaterImageParam'][_0x1b3126]['fAlpha']),_0x273e95['waterMarkImageIndex']++;}}}]),_0x48881e;}()),_0x5111f0=(function(){function _0x231541(){_0x54580d(this,_0x231541),this['startTime']=0x0,this['curTime']=0x0,this['timeWalk']=0x0,this['lastDate']=0x0,this['preTimerStamp']=0x0;}return _0x4fd085(_0x231541,[{'key':'Init','value':function(){this['startTime']=this['GetCurTime']();}},{'key':'GetCurTime','value':function(){return this['curTime']=0x3c*new Date()['getHours']()*0x3c*0x3e8+0x3c*new Date()['getMinutes']()*0x3e8+0x3e8*new Date()['getSeconds']()+new Date()['getMilliseconds'](),this['lastDate']=new Date()['getDate'](),this['curTime'];}},{'key':'GetTimerWalk','value':function(){var _0x2e0b9c=this['GetCurTime']()-this['startTime'];return this['lastDate']!==new Date()['getDate']()&&(_0x2e0b9c+=0x18*(new Date()['getDate']()-this['lastDate'])*0x3c*0x3c*0x3e8),_0x2e0b9c;}},{'key':'timerReset','value':function(){this['startTime']=0x0,this['curTime']=0x0,this['timeWalk']=0x0,this['lastDate']=0x0,this['preTimerStamp']=0x0;}}]),_0x231541;}()),_0x436cae=(function(){function _0x2bfe2e(){var _0xc5035a=arguments['length']>0x0&&void 0x0!==arguments[0x0]?arguments[0x0]:null;_0x54580d(this,_0x2bfe2e),this['canvas']=null,this['streamOpenMode']=0x0,this['context']=null,this['oVideoDecoder']=null,this['frameBuffers']=[],this['initTimer']=!0x1,this['preTimeStamp']=0x0,this['baseTimeStamp']=0x0,this['resetTimer']=!0x0,this['RenderFrame']=this['RenderFrame']['bind'](this),this['renderCurStatus']=0x2,this['playSpeed']=0x1,this['nplaySpeed']=0x1,this['displayBuf']=0xe,this['needForward']=!0x1,this['firstFrame']=!0x0,this['LatcyTime']=0x0,this['displayFrameInfoCB']=null,this['displayFrameInfo']=[],this['curFrameInfo']={},this['curFrameInfo']['timeStamp']=0x0,this['sx']=0x0,this['sy']=0x0,this['sw']=0x0,this['sh']=0x0,this['displayRunning']=!0x1,this['oRenderTimer']=null,this['waitIFrameTimestamp']=0x0,this['curFrame']=null,this['player']=null,null!=_0xc5035a&&(this['player']=_0xc5035a),this['renderEngine']='webgl',this['oVideoRender']=null,this['FECCanvasID']='',this['oVideoRender']=new _0x4ae543();}return _0x4fd085(_0x2bfe2e,[{'key':'init','value':function(_0x2b4de0,_0x2c8a8e,_0x250db0,_0x3f5d69){this['canvas']=_0x2b4de0,this['streamOpenMode']=_0x2c8a8e,this['renderEngine']=_0x3f5d69,this['SetCurStatus'](0x2),null==this['oVideoDecoder']&&(this['oVideoDecoder']=new _0x285caf(_0x250db0,this,this['player']),null!==this['oVideoDecoder']&&this['oVideoDecoder']['initDecoder']()),this['frameBuffers']=this['oVideoDecoder']['ready_frames'],null!=this['oVideoRender']&&this['oVideoRender']['InitDisplay'](this['canvas'],this['renderEngine'],0x100),null==this['oRenderTimer']&&(this['oRenderTimer']=new _0x5111f0());}},{'key':'HardDecodeError','value':function(){return this['player']['_switchHardToSoft'](),0x1;}},{'key':'inputData','value':function(_0x2ca1dd,_0x429b37){var _0x3a0a86={};_0x3a0a86['port']=_0x429b37['port'],_0x3a0a86['codecType']=_0x429b37['codecType'],_0x3a0a86['frameType']=_0x429b37['frameType'],_0x3a0a86['frameSize']=_0x429b37['frameSize'],_0x3a0a86['width']=_0x429b37['width'],_0x3a0a86['height']=_0x429b37['height'],_0x3a0a86['timeStamp']=_0x429b37['timeStamp'],_0x3a0a86['frameRate']=_0x429b37['frameRate'],_0x3a0a86['frameNum']=_0x429b37['frameNum'],_0x3a0a86['interlace']=_0x429b37['interlace'],_0x3a0a86['streamEnd']=_0x429b37['streamEnd'],_0x3a0a86['cropLeft']=_0x429b37['cropLeft'],_0x3a0a86['cropRight']=_0x429b37['cropRight'],_0x3a0a86['cropTop']=_0x429b37['cropTop'],_0x3a0a86['cropBottom']=_0x429b37['cropBottom'],_0x3a0a86['year']=_0x429b37['year'],_0x3a0a86['month']=_0x429b37['month'],_0x3a0a86['week']=_0x429b37['week'],_0x3a0a86['day']=_0x429b37['day'],_0x3a0a86['hour']=_0x429b37['hour'],_0x3a0a86['minute']=_0x429b37['minute'],_0x3a0a86['second']=_0x429b37['second'],_0x3a0a86['milliseconds']=_0x429b37['milliseconds'],this['displayFrameInfo']['push'](_0x3a0a86),this['oVideoDecoder']['inputData'](_0x2ca1dd,_0x429b37);}},{'key':'_resetDecoder','value':function(){var _0x1b030e=this;return new Promise(function(_0x4d081d,_0x553412){_0x1b030e['oVideoDecoder']['resetDecoder']()['then'](function(){_0x1b030e['displayFrameInfo']['splice'](0x0,_0x1b030e['displayFrameInfo']['length']),_0x1b030e['curFrameInfo']={},_0x1b030e['oVideoRender']['DeInitPrivateParam'](),_0x1b030e['renderCurStatus']=0x2,_0x1b030e['player']?_0x1b030e['player']['JSPlayM4_ResetEnd']():postMessage({'function':'resetEnd'}),_0x4d081d();},function(){_0x553412();});});}},{'key':'_resetRenderTimer','value':function(){this['initTimer']=!0x1,this['preTimeStamp']=0x0,this['baseTimeStamp']=0x0,this['resetTimer']=!0x0,null!=this['oRenderTimer']&&this['oRenderTimer']['timerReset'](),this['RenderFrame']=this['RenderFrame']['bind'](this),this['renderCurStatus']=0x2,this['curTimeStamp']=0x0,this['getImageJPEG']=!0x1,this['getImageBMP']=!0x1,this['getCropImageJPEG']=!0x1,this['getCropImageBMP']=!0x1,this['displayFrameInfoCB']=null,this['displayFrameInfo']['splice'](0x0,this['displayFrameInfo']['length']),this['curFrameInfo']={};}},{'key':'_destroyPlayCtrl','value':function(){var _0x3ce15e=this;this['oVideoDecoder']['destroyDecoder']()['then'](function(){_0x3ce15e['oVideoDecoder']=null,null!=_0x3ce15e['oVideoRender']&&(_0x3ce15e['oVideoRender']['ReleaseDisplay'](),_0x3ce15e['oVideoRender']=null),_0x3ce15e['_resetRenderTimer'](),_0x3ce15e['oRenderTimer']=null,_0x3ce15e['displayRunning']=!0x1,console['log']('>>>JS\\x2002\\x20destroy\\x20oVideoDecoder/oVideoRender');},function(){console['log']('stop\\x20failed\\x20');});}},{'key':'RenderFrame','value':function(){var _0x409278=this;switch(this['renderCurStatus']){case 0x0:this['_resetRenderTimer'](),this['_resetDecoder']()['then'](function(){var _0x24c4ed=setTimeout(function(){_0x409278['RenderFrame'](),clearTimeout(_0x24c4ed);},0x1);},function(){});break;case 0x2:if(this['displayRunning'])this['chooseFrame']()['then'](function(_0x57f524){if(_0x409278['curFrame']=_0x57f524,-0x1==_0x409278['displayBuf']||0x0==_0x409278['streamOpenMode']&&0x0==_0x409278['LatcyTime'])null!=_0x409278['curFrame']&&(_0x409278['curTimeStamp']=_0x409278['curFrame']['timestamp'],_0x409278['paint'](_0x409278['curFrame'])),requestAnimationFrame(_0x409278['RenderFrame']);else{if(null!=_0x409278['curFrame']){_0x409278['initTimer']&&!_0x409278['resetTimer']||(_0x409278['oRenderTimer']['Init'](),_0x409278['initTimer']=!0x0,_0x409278['resetTimer']=!0x1,_0x409278['preTimeStamp']=_0x409278['curFrame']['timestamp'],_0x409278['baseTimeStamp']=_0x409278['curFrame']['timestamp'],0x1==_0x409278['streamOpenMode']&&(_0x409278['LatcyTime']=0x0)),_0x409278['curTimeStamp']=_0x409278['curFrame']['timestamp'];var _0x49eb0b=_0x409278['curTimeStamp']-_0x409278['preTimeStamp'],_0x30b6b7=_0x409278['curTimeStamp']-_0x409278['baseTimeStamp'];(_0x49eb0b>0x1388||_0x49eb0b<0x0||_0x30b6b7<0x0)&&(_0x409278['oRenderTimer']['Init'](),_0x409278['preTimeStamp']=_0x409278['curFrame']['timestamp'],_0x409278['baseTimeStamp']=_0x409278['curTimeStamp']);var _0x4b1144=(_0x409278['curTimeStamp']-_0x409278['baseTimeStamp']+_0x409278['LatcyTime'])/_0x409278['playSpeed']-_0x409278['oRenderTimer']['GetTimerWalk']();if(_0x4b1144<0xf&&_0x4b1144>-0xf)_0x409278['paint'](_0x409278['curFrame']),_0x409278['preTimeStamp']=_0x409278['curTimeStamp'],_0x409278['RenderFrame']();else{if(_0x4b1144<0x0)_0x409278['paint'](_0x409278['curFrame']),_0x409278['preTimeStamp']=_0x409278['curTimeStamp'],_0x409278['RenderFrame']();else var _0x263c52=setTimeout(function(){0x2==_0x409278['renderCurStatus']?(_0x409278['paint'](_0x409278['curFrame']),_0x409278['preTimeStamp']=_0x409278['curTimeStamp'],_0x409278['RenderFrame']()):_0x409278['RenderFrame'](),clearTimeout(_0x263c52);},_0x4b1144-0x5);}}else{_0x409278['playSpeed']>0x2&&0x1;var _0x1fce2d=setTimeout(function(){_0x409278['RenderFrame'](),clearTimeout(_0x1fce2d);},0x0);}}});else var _0x13bfbc=setTimeout(function(){_0x409278['RenderFrame'](),clearTimeout(_0x13bfbc);},0x5);break;case 0x3:var _0x2afd32=setTimeout(function(){_0x409278['_refresh'](),_0x409278['RenderFrame'](),clearTimeout(_0x2afd32);},0x5);break;case 0x5:if(this['needForward'])this['chooseFrame']()['then'](function(_0x4c6555){_0x409278['curFrame']=_0x4c6555;var _0x4e05c4=setTimeout(function(){null!=_0x409278['curFrame']&&(_0x409278['paint'](_0x409278['curFrame']),_0x409278['needForward']=!0x1),_0x409278['RenderFrame'](),clearTimeout(_0x4e05c4);},0x1);});else var _0x570dc5=setTimeout(function(){_0x409278['_refresh'](),_0x409278['RenderFrame'](),clearTimeout(_0x570dc5);},0x5);break;case 0x4:return void this['_destroyPlayCtrl']();default:return;}}},{'key':'paint','value':function(_0x2382b9){var _0x10ce19=this;return new Promise(function(_0x184257,_0x3369ae){if(0x4==_0x10ce19['curstatus']||null==_0x2382b9||null==_0x10ce19['oVideoRender'])_0x184257();else{_0x10ce19['waitIFrameTimestamp']===_0x2382b9['timestamp']&&(_0x10ce19['resetTimer']=!0x0);var _0x43dc93={'nCropLeft':0x0,'nCropRight':0x0,'nCropTop':0x0,'nCropBottom':0x0};_0x43dc93['nCodeWidth']=_0x2382b9['displayWidth'],_0x43dc93['nCodeHeight']=_0x2382b9['displayHeight'];var _0x420bde={'x':0x0,'y':0x0};_0x420bde['width']=_0x2382b9['displayWidth'],_0x420bde['height']=_0x2382b9['displayHeight'],_0x10ce19['oVideoRender']['DisplayFrame'](_0x2382b9,_0x2382b9['displayWidth'],_0x2382b9['displayHeight'],_0x2382b9['timestamp'],_0x43dc93,null)['then'](function(_0x4d63d0){null!==_0x10ce19['displayFrameInfoCB']&&_0x10ce19['respondFrameInfoCB'](_0x4d63d0),_0x10ce19['firstFrame']&&(null!=_0x10ce19['player']?null!=_0x10ce19['player']['FFCallBackFun']&&_0x10ce19['player']['FFCallBackFun']():postMessage({'function':'firstFrameCB','value':!0x0}),_0x10ce19['firstFrame']=!0x1),_0x184257();});}});}},{'key':'respondFrameInfoCB','value':function(_0x2eec20){if(0x0!=this['displayFrameInfo']['length']&&this['curFrameInfo']['timeStamp']!==_0x2eec20){for(var _0x5cda6c={},_0x54c3ca=0x0;_0x54c3ca<this['displayFrameInfo']['length']&&(_0x5cda6c=this['displayFrameInfo']['shift']())['timeStamp']!=_0x2eec20;_0x54c3ca++);this['curFrameInfo']['port']=_0x5cda6c['port'],this['curFrameInfo']['codecType']=_0x5cda6c['codecType'],this['curFrameInfo']['frameType']=_0x5cda6c['frameType'],this['curFrameInfo']['frameSize']=_0x5cda6c['frameSize'],this['curFrameInfo']['width']=_0x5cda6c['width'],this['curFrameInfo']['height']=_0x5cda6c['height'],this['curFrameInfo']['timeStamp']=_0x5cda6c['timeStamp'],this['curFrameInfo']['frameRate']=_0x5cda6c['frameRate'],this['curFrameInfo']['frameNum']=_0x5cda6c['frameNum'],this['curFrameInfo']['interlace']=_0x5cda6c['interlace'],this['curFrameInfo']['streamEnd']=_0x5cda6c['streamEnd'],this['curFrameInfo']['cropLeft']=_0x5cda6c['cropLeft'],this['curFrameInfo']['cropRight']=_0x5cda6c['cropRight'],this['curFrameInfo']['cropTop']=_0x5cda6c['cropTop'],this['curFrameInfo']['cropBottom']=_0x5cda6c['cropBottom'],this['curFrameInfo']['year']=_0x5cda6c['year'],this['curFrameInfo']['month']=_0x5cda6c['month'],this['curFrameInfo']['week']=_0x5cda6c['week'],this['curFrameInfo']['day']=_0x5cda6c['day'],this['curFrameInfo']['hour']=_0x5cda6c['hour'],this['curFrameInfo']['minute']=_0x5cda6c['minute'],this['curFrameInfo']['second']=_0x5cda6c['second'],this['curFrameInfo']['milliseconds']=_0x5cda6c['milliseconds'],this['displayFrameInfoCB'](this['curFrameInfo']);}}},{'key':'postImageData','value':function(_0x23da09,_0x181d56,_0x2ca6fa,_0x54b505,_0x3f5f6c){this['player']?(this['getImageJPEG']&&(this['getImageJPEG']=!0x1,this['player']['_GetImage2'](_0x23da09,_0x181d56,_0x2ca6fa,_0x54b505,'jpeg',_0x3f5f6c,0x0,0x0,0x0,0x0)),this['getImageBMP']&&(this['getImageBMP']=!0x1,this['player']['_GetImage2'](_0x23da09,_0x181d56,_0x2ca6fa,_0x54b505,'bmp',_0x3f5f6c,0x0,0x0,0x0,0x0)),this['getCropImageJPEG']&&(this['getCropImageJPEG']=!0x1,this['player']['_GetImage2'](_0x23da09,_0x181d56,_0x2ca6fa,_0x54b505,'jpeg',_0x3f5f6c,this['sx'],this['sy'],this['sw'],this['sh'])),this['getCropImageBMP']&&(this['getCropImageBMP']=!0x1,this['player']['_GetImage2'](_0x23da09,_0x181d56,_0x2ca6fa,_0x54b505,'bmp',_0x3f5f6c,this['sx'],this['sy'],this['sw'],this['sh']))):(this['getImageJPEG']&&(this['getImageJPEG']=!0x1,postMessage({'function':'imageYUV','value':_0x23da09['buffer'],'size':_0x181d56,'width':_0x2ca6fa,'height':_0x54b505,'type':'jpeg','yuvType':_0x3f5f6c,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x23da09['buffer']])),this['getImageBMP']&&(this['getImageBMP']=!0x1,postMessage({'function':'imageYUV','value':_0x23da09['buffer'],'size':_0x181d56,'width':_0x2ca6fa,'height':_0x54b505,'type':'bmp','yuvType':_0x3f5f6c,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x23da09['buffer']])),this['getCropImageJPEG']&&(this['getCropImageJPEG']=!0x1,postMessage({'function':'imageYUV','value':_0x23da09['buffer'],'size':_0x181d56,'width':_0x2ca6fa,'height':_0x54b505,'type':'jpeg','yuvType':_0x3f5f6c,'sx':this['sx'],'sy':this['sy'],'sw':this['sw'],'sh':this['sh']},[_0x23da09['buffer']])),this['getCropImageBMP']&&(this['getCropImageBMP']=!0x1,postMessage({'function':'imageYUV','value':_0x23da09['buffer'],'size':_0x181d56,'width':_0x2ca6fa,'height':_0x54b505,'type':'bmp','yuvType':_0x3f5f6c,'sx':this['sx'],'sy':this['sy'],'sw':this['sw'],'sh':this['sh']},[_0x23da09['buffer']])));}},{'key':'chooseFrame','value':function(){var _0x45f677=this;return new Promise(function(_0x318d43,_0xf2cda4){if(null==_0x45f677['oVideoRender']||null==_0x45f677['oVideoDecoder'])_0x318d43(null);else{if(_0x45f677['oVideoDecoder']['decoderObjNeedReset'])_0x45f677['oVideoDecoder']['resetDecoder']()['then'](function(){_0x45f677['oVideoDecoder']['decoderObjNeedReset']=!0x1,_0x318d43(null);},function(){_0xf2cda4();});else{var _0x333c9e=_0x45f677['oVideoDecoder']['GetFrameBufferLength']();0x1==_0x45f677['streamOpenMode']&&_0x333c9e<0x3?_0x318d43(null):_0x45f677['oVideoDecoder']['GetFrame']()['then'](function(_0x93c594){_0x318d43(_0x93c594);},function(){});}}});}},{'key':'SetDisplayRegion','value':function(_0x528461,_0x69e80a,_0x1ed1c5,_0x31af05){return null==this['oVideoRender']?0x0:(this['sx']=_0x528461,this['sy']=_0x69e80a,this['sw']=_0x1ed1c5,this['sh']=_0x31af05,this['oVideoRender']['SetDisplayRect'](_0x528461,_0x69e80a,_0x1ed1c5,_0x31af05));}},{'key':'SetCurStatus','value':function(_0x4d3bc4){return this['renderCurStatus']=_0x4d3bc4,0x1;}},{'key':'fast','value':function(){var _0x4114f6=this['_GetFastSpeed'](this['nplaySpeed']);return this['_SetPlaySpeed'](_0x4114f6);}},{'key':'slow','value':function(){var _0x424dc2=this['_GetSlowSpeed'](this['nplaySpeed']);return this['_SetPlaySpeed'](_0x424dc2);}},{'key':'Pause','value':function(_0x26d476){if(_0x26d476)this['SetCurStatus'](0x3);else{if(0x3!==this['renderCurStatus'])return-0x1;this['SetCurStatus'](0x2),this['resetTimer']=!0x0;}return 0x1;}},{'key':'_refresh','value':function(){0x0!=this['frameBuffers']['length']&&this['paint'](this['frameBuffers'][0x0]);}},{'key':'OneByOne','value':function(_0xed1311){if(_0xed1311)this['SetCurStatus'](0x5),this['needForward']=!0x0;else{if(0x5!==this['renderCurStatus'])return-0x1;this['SetCurStatus'](0x2),this['resetTimer']=!0x0,this['needForward']=!0x1,this['_SetPlaySpeed'](0x1);}return 0x1;}},{'key':'SetCanvasSize','value':function(_0x2099f6,_0x5edbf8){return null!=this['oVideoRender']&&this['oVideoRender']['SetCanvasSize'](_0x2099f6,_0x5edbf8);}},{'key':'GetCanvasSize','value':function(){return null!=this['oVideoRender']&&this['oVideoRender']['GetCanvasSize']();}},{'key':'GetPlayedTime','value':function(){return this['curTimeStamp'];}},{'key':'_SetPlaySpeed','value':function(_0x3fe8a4){switch(_0x3fe8a4){case-0x10:case-0x8:case-0x4:case-0x2:case 0x1:case 0x2:case 0x4:case 0x8:case 0x10:case 0x20:case 0x40:break;default:return-0x1;}return _0x3fe8a4===this['nplaySpeed']||(this['nplaySpeed']=_0x3fe8a4,this['playSpeed']=_0x3fe8a4>0x0?_0x3fe8a4:-0x1/_0x3fe8a4,console['log']('playSpeed:'+this['playSpeed']),this['resetTimer']=!0x0,this['needForward']=!0x1,0x2!=this['renderCurStatus']&&this['SetCurStatus'](0x2)),0x1;}},{'key':'_GetFastSpeed','value':function(_0x56131f){var _0x3a8976=0x0;switch(_0x56131f){case-0x10:_0x3a8976=-0x8;break;case-0x8:_0x3a8976=-0x4;break;case-0x4:_0x3a8976=-0x2;break;case-0x2:_0x3a8976=0x1;break;case 0x1:_0x3a8976=0x2;break;case 0x2:_0x3a8976=0x4;break;case 0x4:_0x3a8976=0x8;break;case 0x8:_0x3a8976=0x10;break;case 0x10:_0x3a8976=0x20;break;case 0x20:_0x3a8976=0x40;break;default:_0x3a8976=0x0;}return _0x3a8976;}},{'key':'_GetSlowSpeed','value':function(_0x45b3b7){var _0x3856b0=0x0;switch(_0x45b3b7){case-0x8:_0x3856b0=-0x10;break;case-0x4:_0x3856b0=-0x8;break;case-0x2:_0x3856b0=-0x4;break;case 0x1:_0x3856b0=-0x2;break;case 0x2:_0x3856b0=0x1;break;case 0x4:_0x3856b0=0x2;break;case 0x8:_0x3856b0=0x4;break;case 0x10:_0x3856b0=0x8;break;case 0x20:_0x3856b0=0x10;break;case 0x40:_0x3856b0=0x20;break;default:_0x3856b0=0x0;}return _0x3856b0;}},{'key':'SetDisplayBuf','value':function(_0x106ca3){return this['displayBuf']=_0x106ca3,this['LatcyTime']=0x1==_0x106ca3?0x0:0xf==_0x106ca3?0x2bc:0x2d==_0x106ca3?0x76c:_0x106ca3>0x6&&_0x106ca3<0x2d?0x28*_0x106ca3+0x64:-0x1==_0x106ca3?0x0:0x32,0x1;}},{'key':'GetJPEG','value':function(){var _0x250f6c=this;this['oVideoDecoder']['GetImageYUV']()['then'](function(_0x5c4ac6){var _0x204c0f=_0x5c4ac6['yuvFrameBuffer'],_0x13cae3=_0x5c4ac6['yuvLength'],_0x5692f0=_0x5c4ac6['displayWidth'],_0x138c37=_0x5c4ac6['displayHeight'],_0x2b67ff=_0x5c4ac6['yuvType'];-0x1!=_0x204c0f&&(_0x250f6c['player']?_0x250f6c['player']['_GetImage2'](_0x204c0f,_0x13cae3,_0x5692f0,_0x138c37,'jpeg',_0x2b67ff,0x0,0x0,0x0,0x0):postMessage({'function':'imageYUV','value':_0x204c0f['buffer'],'size':_0x13cae3,'width':_0x5692f0,'height':_0x138c37,'type':'jpeg','yuvType':_0x2b67ff,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x204c0f['buffer']]));},function(){});}},{'key':'GetBMP','value':function(){var _0x40df8b=this;this['oVideoDecoder']['GetImageYUV']()['then'](function(_0x783b6f){var _0x11b41c=_0x783b6f['yuvFrameBuffer'],_0x2648e7=_0x783b6f['yuvLength'],_0x2875d9=_0x783b6f['displayWidth'],_0x1d5f92=_0x783b6f['displayHeight'],_0x1d4ea2=_0x783b6f['yuvType'];-0x1!=_0x11b41c&&(_0x40df8b['player']?_0x40df8b['player']['_GetImage2'](_0x11b41c,_0x2648e7,_0x2875d9,_0x1d5f92,'bmp',_0x1d4ea2,0x0,0x0,0x0,0x0):postMessage({'function':'imageYUV','value':_0x11b41c['buffer'],'size':_0x2648e7,'width':_0x2875d9,'height':_0x1d5f92,'type':'bmp','yuvType':_0x1d4ea2,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x11b41c['buffer']]));},function(){});}},{'key':'GetCropJPEG','value':function(){var _0x19dfc0=this;this['oVideoDecoder']['GetImageYUV']()['then'](function(_0x3af1e4){var _0x2a2139=_0x3af1e4['yuvFrameBuffer'],_0x5be45e=_0x3af1e4['yuvLength'],_0x3fad91=_0x3af1e4['displayWidth'],_0x579157=_0x3af1e4['displayHeight'],_0x43e814=_0x3af1e4['yuvType'];-0x1!=_0x2a2139&&(_0x19dfc0['player']?_0x19dfc0['player']['_GetImage2'](_0x2a2139,_0x5be45e,_0x3fad91,_0x579157,'jpeg',_0x43e814,_0x19dfc0['sx'],_0x19dfc0['sy'],_0x19dfc0['sw'],_0x19dfc0['sh']):postMessage({'function':'imageYUV','value':_0x2a2139['buffer'],'size':_0x5be45e,'width':_0x3fad91,'height':_0x579157,'type':'jpeg','yuvType':_0x43e814,'sx':_0x19dfc0['sx'],'sy':_0x19dfc0['sy'],'sw':_0x19dfc0['sw'],'sh':_0x19dfc0['sh']},[_0x2a2139['buffer']]));},function(){});}},{'key':'GetCropBMP','value':function(){var _0x2e57e5=this;this['oVideoDecoder']['GetImageYUV']()['then'](function(_0x39ea05){var _0x312376=_0x39ea05['yuvFrameBuffer'],_0x1e6e7b=_0x39ea05['yuvLength'],_0x531810=_0x39ea05['displayWidth'],_0x39d2d4=_0x39ea05['displayHeight'],_0x118eb9=_0x39ea05['yuvType'];-0x1!=_0x312376&&(_0x2e57e5['player']?_0x2e57e5['player']['_GetImage2'](_0x312376,_0x1e6e7b,_0x531810,_0x39d2d4,'bmp',_0x118eb9,_0x2e57e5['sx'],_0x2e57e5['sy'],_0x2e57e5['sw'],_0x2e57e5['sh']):postMessage({'function':'imageYUV','value':_0x312376['buffer'],'size':_0x1e6e7b,'width':_0x531810,'height':_0x39d2d4,'type':'bmp','yuvType':_0x118eb9,'sx':_0x2e57e5['sx'],'sy':_0x2e57e5['sy'],'sw':_0x2e57e5['sw'],'sh':_0x2e57e5['sh']},[_0x312376['buffer']]));},function(){});}},{'key':'GetCanvasCapture','value':function(_0x5274f0){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20GetCanvasCapture','color:red'),0x0):(this['oVideoRender']['GetCanvasData'](_0x5274f0),0x1);}},{'key':'SetDecodeFrameType','value':function(_0xafe902){return this['waitIFrameTimestamp']=_0xafe902,0x1;}},{'key':'SetStreamEnd','value':function(){return this['oVideoDecoder']['SetStreamEnd'](),0x1;}},{'key':'SetAntialias','value':function(_0x4cb309){return null!=this['oVideoRender']?this['oVideoRender']['SetAntialias'](_0x4cb309):0x0;}},{'key':'SetFrameInfoCallBack','value':function(_0x193a6f,_0xfa0899){return this['displayFrameInfoCB']=_0xfa0899?_0x193a6f:null,0x1;}},{'key':'FEC_SetCanvasID','value':function(_0x5e972f){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetCanvasID'](_0x5e972f):(this['FECCanvasID']=_0x5e972f,0x0);}},{'key':'FEC_ResetCorrectType','value':function(_0x1c4eb6,_0x3befb7,_0x1bc68a){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_ResetCorrectType'](_0x1c4eb6,_0x3befb7,_0x1bc68a):0x0;}},{'key':'FEC_GetPort','value':function(_0x4bc99e,_0x1d761d){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),-0x1):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetPort'](_0x4bc99e,_0x1d761d):-0x1;}},{'key':'FEC_Enable','value':function(_0x24c814){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_Enable'](_0x24c814):0x0;}},{'key':'FEC_SetParam','value':function(_0x4b47cc,_0x45ac68){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetParam'](_0x4b47cc,_0x45ac68):0x0;}},{'key':'FEC_GetParam','value':function(_0x262555,_0x597461){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetParam'](_0x262555,_0x597461):0x0;}},{'key':'FEC_SetViewParam','value':function(_0x1da199,_0x16b82f,_0x414559){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetViewParam'](_0x1da199,_0x16b82f,_0x414559):0x0;}},{'key':'FEC_GetViewParam','value':function(_0x5a0af3,_0x3a1b00,_0x59130e){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetViewParam'](_0x5a0af3,_0x3a1b00,_0x59130e):0x0;}},{'key':'FEC_SetWnd','value':function(_0xa8e05,_0x2eb965){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetWnd'](_0xa8e05,_0x2eb965):0x0;}},{'key':'FEC_Disable','value':function(_0x3906d4,_0x22cb26,_0x385acc){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_Disable'](_0x3906d4,_0x22cb26,_0x385acc):0x0;}},{'key':'FEC_DelPort','value':function(_0x1eac9f){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_DelPort'](_0x1eac9f):0x0;}},{'key':'FEC_SetDisplayRegion','value':function(_0x56017d,_0x464808,_0x52ea86,_0x5e218a,_0x40d1eb,_0x2e645c,_0x13d4de){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetDisplayRegion'](_0x56017d,_0x464808,_0x52ea86,_0x5e218a,_0x40d1eb,_0x2e645c,_0x13d4de):0x0;}},{'key':'FEC_SetBackCilling','value':function(_0x453651,_0x19c072){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetBackCilling'](_0x453651,_0x19c072):0x0;}},{'key':'FEC_GetPTZPort','value':function(_0x267004,_0x22cae9,_0x35fdab){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),-0x1):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetPTZPort'](_0x267004,_0x22cae9,_0x35fdab):-0x1;}},{'key':'FEC_SetPTZDisplayMode','value':function(_0x44ab29){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetPTZDisplayMode'](_0x44ab29):0x0;}},{'key':'InputPrivateInfo','value':function(_0x59722d,_0x11ebaf,_0xf48ace){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20PrivateInfo','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['InputPrivateInfo'](_0x59722d,_0x11ebaf,_0xf48ace):0x1;}},{'key':'RenderPrivateData','value':function(_0x20408a){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20PrivateInfo','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['RenderPrivateData'](_0x20408a):0x1;}},{'key':'SetWaterMarkFont','value':function(_0x45d8a7){return'2d'===this['renderEngine']||'2D'===this['renderEngine']||null==this['oVideoRender']?(console['log']('%c\\x20param\\x20error\\x20this.renderEngine:%d,this.oVideoRender:%d','color:red',this['renderEngine'],this['oVideoRender']),0x0):(null!=this['oVideoRender']&&this['oVideoRender']['SetWaterMarkFont'](_0x45d8a7,{'yuvFrameBuffer':-0x1,'yuvLength':-0x1,'displayWidth':-0x1,'displayHeight':-0x1,'yuvType':-0x1}),0x1);}},{'key':'SetWaterMarkImage','value':function(_0x48982c){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20SetWaterMarkImage','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['SetWaterMarkImage'](_0x48982c):0x1;}},{'key':'SetD3DPostProcess','value':function(_0x105551,_0x2dcd9b){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20SetD3DPostProcess','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['SetD3DPostProcess'](_0x105551,_0x2dcd9b):0x1;}}]),_0x2bfe2e;}());_0x2e6310=new _0x436cae(),self['onmessage']=function(_0x336e5d){let _0x3b3e97=_0x336e5d['data'];switch(_0x3b3e97['command']){case'init':_0x2e6310['init'](_0x3b3e97['canvas'],_0x3b3e97['streamOpenMode'],_0x3b3e97['sab'],_0x3b3e97['renderEngine']);break;case'inputData':let _0x380e6b=new Uint8Array(_0x3b3e97['rawData']),_0x590bb2=_0x3b3e97['rawDataFrameInfo'];_0x2e6310['inputData'](_0x380e6b,_0x590bb2),_0x380e6b=null;break;case'SetDisplayRegion':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),_0x2e6310['SetDisplayRegion'](_0x3b3e97['sx'],_0x3b3e97['sy'],_0x3b3e97['sw'],_0x3b3e97['sh']);break;case'stop':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),_0x2e6310['SetCurStatus'](0x4);let _0x2622f7=setInterval(()=>{_0x2e6310['displayRunning']||(_0x2e6310=null,self['postMessage']({'function':'stop'}),clearInterval(_0x2622f7),_0x2622f7=null,self['close'](),console['log']('>>>JS\\x2003\\x20destroy\\x20oVideoPlayCtrl\\x20and\\x20worker'));},0x2);break;case'fast':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['fast']()&&self['postMessage']({'function':'paraError'});break;case'slow':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['slow']()&&self['postMessage']({'function':'paraError'});break;case'SetDisplayBuf':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['SetDisplayBuf'](_0x3b3e97['value'])&&self['postMessage']({'function':'paraError'});break;case'Pause':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['Pause'](_0x3b3e97['value'])&&self['postMessage']({'function':'paraError'});break;case'OneByOne':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['OneByOne'](_0x3b3e97['value'])&&self['postMessage']({'function':'paraError'});break;case'SetCanvasSize':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['SetCanvasSize'](_0x3b3e97['width'],_0x3b3e97['height'])&&self['postMessage']({'function':'paraError'});break;case'GetCanvasSize':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['GetCanvasSize']()&&self['postMessage']({'function':'paraError'});break;case'GetPlayedTime':null===_0x2e6310&&self['postMessage']({'function':'OrderError'});let _0x1b5e3d=_0x2e6310['GetPlayedTime']();0x0!==_0x1b5e3d&&self['postMessage']({'function':'GetPlayedTime','value':_0x1b5e3d});break;case'needReset':_0x2e6310['SetCurStatus'](0x0);break;case'GetJPEG':_0x2e6310['GetJPEG']();break;case'GetBMP':_0x2e6310['GetBMP']();break;case'GetCropJPEG':_0x2e6310['GetCropJPEG']();break;case'GetCropBMP':_0x2e6310['GetCropBMP']();break;case'SetDecodeFrameType':_0x2e6310['SetDecodeFrameType'](_0x3b3e97['timestamp']);break;case'streamEnd':_0x2e6310['SetStreamEnd']();break;case'SetAntialias':_0x2e6310['SetAntialias'](_0x3b3e97['value']);break;case'SetFrameInfoCallBack':_0x2e6310['SetFrameInfoCallBack'](_0x26f608=>{self['postMessage']({'function':'SetFrameInfoCallBack','curFrameInfo':_0x26f608});},_0x3b3e97['value']);break;case'FEC_SetCanvasID':_0x2e6310['FEC_SetCanvasID'](_0x3b3e97['canvasID']);break;case'FECResetCorrectType':_0x2e6310['FEC_ResetCorrectType'](_0x3b3e97['fishSubPort'],_0x3b3e97['placeType'],_0x3b3e97['correctType']);break;case'FECGetPort':let _0xc3af92=_0x2e6310['FEC_GetPort'](_0x3b3e97['placeType'],_0x3b3e97['correctType']);(_0xc3af92<0x1||_0xc3af92>0x1f||null==_0xc3af92)&&(_0xc3af92=-0x1),self['postMessage']({'function':'FECGetPort','fishSubPort':_0xc3af92});break;case'FECEnable':_0x2e6310['FEC_Enable'](_0x3b3e97['fishSubPort']);break;case'FECSetParam':_0x2e6310['FEC_SetParam'](_0x3b3e97['fishSubPort'],_0x3b3e97['param2d']);break;case'FECGetParam':let _0x28b110={};_0x2e6310['FEC_GetParam'](_0x3b3e97['fishSubPort'],_0x28b110),self['postMessage']({'function':'FECGetParam','param2d':_0x28b110});break;case'FECSetViewParam':_0x2e6310['FEC_SetViewParam'](_0x3b3e97['fishSubPort'],_0x3b3e97['upDateType'],_0x3b3e97['fValue']);break;case'FECGetViewParam':let _0x3712f4={};_0x2e6310['FEC_GetViewParam'](_0x3b3e97['fishSubPort'],_0x3b3e97['upDateType'],_0x3712f4),self['postMessage']({'function':'FECGetViewParam','Param3D':Param});break;case'FECSetWnd':_0x2e6310['FEC_SetWnd'](_0x3b3e97['fishSubPort'],_0x3b3e97['offscrrenCnv']);break;case'FECDisable':_0x2e6310['FEC_Disable'](_0x3b3e97['fishSubPort'],_0x3b3e97['clearFECCanvas'],_0x3b3e97['clearContext']);break;case'FECDelPort':_0x2e6310['FEC_DelPort'](_0x3b3e97['fishSubPort']);break;case'FECSetDisplayRegion':_0x2e6310['FEC_SetDisplayRegion'](_0x3b3e97['fishSubPort'],_0x3b3e97['type'],_0x3b3e97['regionNum'],_0x3b3e97['sx'],_0x3b3e97['sy'],_0x3b3e97['sw'],_0x3b3e97['sh']);break;case'FECSetBackCilling':_0x2e6310['FEC_SetBackCilling'](_0x3b3e97['fishSubPort'],_0x3b3e97['bValue']);break;case'FECGetPTZPort':let _0x1b036c=_0x2e6310['FEC_GetPTZPort'](_0x3b3e97['fPositionX'],_0x3b3e97['fPositionY']);(_0x1b036c<0x1||_0x1b036c>0x1f||null==_0x1b036c)&&(_0x1b036c=-0x1,console['info']('%c\\x20hardDecoderWorker\\x20FECGetPTZPort\\x20error\\x20','color:\\x20red')),self['postMessage']({'function':'FECGetPTZPort','fishSubPort':_0x1b036c});break;case'FECSetPTZDisplayMode':_0x2e6310['FEC_SetPTZDisplayMode'](_0x3b3e97['ptzMode']);break;case'RenderPrivateData':_0x2e6310['RenderPrivateData'](_0x3b3e97['bTrue']);break;case'InputPrivateInfo':_0x2e6310['InputPrivateInfo'](_0x3b3e97['linesInfo'],_0x3b3e97['fontInfo'],_0x3b3e97['ImageInfo']);break;case'GetCanvasCapture':_0x2e6310['GetCanvasCapture'](_0x3b3e97['cbFun']);break;case'SetWaterMarkFont':_0x2e6310['SetWaterMarkFont'](_0x3b3e97['fontParam']);break;case'SetWaterMarkImage':_0x2e6310['SetWaterMarkImage'](_0x3b3e97['imageParam']);break;case'SetD3DPostProcess':_0x2e6310['SetD3DPostProcess'](_0x3b3e97['ProcessType'],_0x3b3e97['ProcessValue']);}};})());","Worker",void 0,void 0)},l=function(){var e=new ue(16);return ue!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},h=function(e,t,i,r){var a,n,s,o,x,f,l,h,c,_,u,d,p,m,P,y,S,b,g,v,R,C,E,F,T=r[0],D=r[1],I=r[2],M=Math.hypot(T,D,I);return M<_e?null:(T*=M=1/M,D*=M,I*=M,a=Math.sin(i),s=1-(n=Math.cos(i)),o=t[0],x=t[1],f=t[2],l=t[3],h=t[4],c=t[5],_=t[6],u=t[7],d=t[8],p=t[9],m=t[10],P=t[11],y=T*T*s+n,S=D*T*s+I*a,b=I*T*s-D*a,g=T*D*s-I*a,v=D*D*s+n,R=I*D*s+T*a,C=T*I*s+D*a,E=D*I*s-T*a,F=I*I*s+n,e[0]=o*y+h*S+d*b,e[1]=x*y+c*S+p*b,e[2]=f*y+_*S+m*b,e[3]=l*y+u*S+P*b,e[4]=o*g+h*v+d*R,e[5]=x*g+c*v+p*R,e[6]=f*g+_*v+m*R,e[7]=l*g+u*v+P*R,e[8]=o*C+h*E+d*F,e[9]=x*C+c*E+p*F,e[10]=f*C+_*E+m*F,e[11]=l*C+u*E+P*F,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},c=function(){var e=new ue(3);return ue!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e},_=function(e,t,i){var r=new ue(3);return r[0]=e,r[1]=t,r[2]=i,r},u=function(){var e=new ue(4);return ue!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e},d=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return p(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,o=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return s=e.done,e},e:function(e){o=!0,n=e},f:function(){try{s||null==i.return||i.return()}finally{if(o)throw n}}}},p=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r};r.r(x),r.d(x,{JSPlayCtrl:function(){return qe}});var m=1281,P=1282,y=1285,S=1287,b=1288,g=1289,v=1298,R=1302,C=256,E=512,F=768,T=1024,D=1280,I=1536,M=1792,A=2048,w=2304,L=2560,B=r(687),k=r.n(B),O=r(477),H=r.n(O),V=function(){function t(i,r,a){e(this,t),this.width=0,this.height=0,this.decoderObj=null,this.FirstFrame=!0,this.ready_frames=[],this.underflow=!0,this.sab=i,this.frameRate=30,this.needSetPreSoft=!1,this.decoderCurStatus=2,this.decoderOutSuccess=!1,this.decoderObjNeedReset=!1,this.oVideoRenderHandle=r,this.output=this.output.bind(this),this.reportError=this.reportError.bind(this),this.player=null,null!=a&&(this.player=a),this.curFrame=null}return s(t,[{key:"initDecoder",value:function(){if(null==this.decoderObj){var e={output:this.output,error:this.reportError};this.decoderObj=new VideoDecoder(e)}this.underflow&&(this.underflow=!1,setTimeout(this.oVideoRenderHandle.RenderFrame(),0),this.oVideoRenderHandle.displayRunning=!0),this.decoderCurStatus=2,this.FirstFrame=!0}},{key:"inputData",value:function(e,t){null!=this.decoderObj&&("configured"==this.decoderObj.state||this.FirstFrame)&&this.decodeProcess(e,t),t.nStreamEnd&&this.SetStreamEnd()}},{key:"concatenate",value:function(e){for(var t=0,i=arguments.length,r=new Array(i>1?i-1:0),a=1;a<i;a++)r[a-1]=arguments[a];for(var n=0,s=r;n<s.length;n++)t+=s[n].length;for(var o=new e(t),x=0,f=0,l=r;f<l.length;f++){var h=l[f];o.set(h,x),x+=h.length}return o}},{key:"processData",value:function(e){for(var t=null,i=null,r=null,a=!1,n=!1,s=0,o=0;o<e.length-4;o++){if(0!=e[o]||0!=e[o+1]||0!=e[o+2]||1!=e[o+3]||103!=e[o+4]&&39!=e[o+4]||(0!=o?(n=!0,t=e.slice(o),s=o):t=e),0==e[o]&&0==e[o+1]&&0==e[o+2]&&1==e[o+3]&&(9==e[o+4]||6==e[o+4])){if(null==t)continue;null==i&&(i=e.slice(s,o),a=!0)}if(0==e[o]&&0==e[o+1]&&0==e[o+2]&&1==e[o+3]&&(101==e[o+4]||37==e[o+4])){a&&(r=e.slice(o));break}}return a?this.concatenate(Uint8Array,i,r):n?t:e}},{key:"processData1",value:function(e){return 0!=e[0]||0!=e[1]||0!=e[2]||1!=e[3]||9!=e[4]&&6!=e[4]?e:e.slice(5)}},{key:"formatVideoDecoderConfigure",value:function(e,t,i,r){var a="";if(5==t)a="hvc1.1.6.L123.00",console.log("265 hard decoder");else if(256==t){for(var n=0;n<e.length;n++)if(103===e[n]||39===e[n]){var s=e.subarray(n+1,n+4);a="avc1.";for(var o=0;o<3;o++){var x=s[o].toString(16);x.length<2&&(x="0"+x),a+=x}break}console.log("264 hard decoder")}else console.log("Support Error: hard decoder only support 264 and 265 !!!");var f={codec:a,hardwareAcceleration:"prefer-hardware",optimizeForLatency:1};return 5!=t&&this.needSetPreSoft&&(f.hardwareAcceleration="prefer-software"),f}},{key:"decodeProcess",value:function(e,t){var i=this;this.frameRate!=t.frameRate&&(this.frameRate=t.frameRate),this.width!=t.width&&(this.width=t.width),this.height!=t.height&&(this.height=t.height),t.needSetPreSoft&&(this.needSetPreSoft=t.needSetPreSoft);var r=e;if(4!=this.decoderCurStatus&&null!=this.decoderObj)if("configured"==this.decoderObj.state){var a=new EncodedVideoChunk({data:r,timestamp:t.timeStamp,type:t.isKeyFrame?"key":"delta"});this.decoderObj.decode(a),r=null,e=null,a=null,t.frameType}else if(t.isKeyFrame&&"unconfigured"==this.decoderObj.state){var n=this.formatVideoDecoderConfigure(e,t.codecType,t.width,t.height);if(""==n.codec)return-1;VideoDecoder.isConfigSupported(n).then((function(a){if(a.supported){i.decoderObj.configure(n),r=i.processData(e),i.FirstFrame=!1;var s=new EncodedVideoChunk({data:r,timestamp:t.timeStamp,type:t.isKeyFrame?"key":"delta"});i.decoderObj.decode(s),n=null,r=null,e=null}else console.log("%c4>HardDecoder ConfigSupported error,switch hard to soft","color: red"),i.oVideoRenderHandle.HardDecodeError()})).catch((function(){console.log("VideoDecoder.js isConfigSupported error switch hard to soft "),i.oVideoRenderHandle.HardDecodeError()}))}}},{key:"output",value:function(e){"configured"==this.decoderObj.state?(e.format,e.codedWidth,e.codedHeight,e.displayWidth,e.displayHeight,e.duration,e.timestamp,this.ready_frames.push(e),this.decoderOutSuccess||(this.decoderOutSuccess=!0),this.decoderObj.decodeQueueSize<=1&&(this.player?this.player.JSPlayM4_GetRawData():postMessage({function:"GetRawData"}))):e.close()}},{key:"output2",value:function(e){var t=this;e.timestamp,createImageBitmap(e).then((function(i){e.close(),t.ready_frames.push(i)}))}},{key:"reportError",value:function(e){this.decoderOutSuccess?this.decoderObjNeedReset=!0:(this.oVideoRenderHandle.HardDecodeError(),console.log("%cswitch hardVideoDecoder to softVideoDecoder","color: red"))}},{key:"destroyDecoder",value:function(){var e=this;return new Promise((function(t,i){e.clearDecoderObjBuffer().then((function(){null!=e.decoderObj&&("closed"!=e.decoderObj.state&&e.decoderObj.close(),console.log(">>>JS 01 destroy decoderObj"),e.decoderObj=null),e.decoderCurStatus=4,e.decoderOutSuccess=!1,e.FirstFrame=!0,e.underflow=!0,e.needSetPreSoft=!1,e.decoderObjNeedReset=!1,t()}),(function(){i()}))}))}},{key:"resetDecoder",value:function(){var e=this;return new Promise((function(t,i){e.destroyDecoder().then((function(){e.initDecoder(),console.log("%c reset hard decoder","color:red"),t()}),(function(){i()}))}))}},{key:"clearDecoderObjBuffer",value:function(){var e=this;return new Promise((function(t,i){for(var r=e.ready_frames.length,a=0;a<r;a++)e.ready_frames.shift().close();e.ready_frames.splice(0,e.ready_frames.length),null!=e.decoderObj&&"configured"==e.decoderObj.state&&e.decoderObj.reset(),t()}))}},{key:"SetStreamEnd",value:function(){return 0==this.decoderObj.decodeQueueSize&&0==this.ready_frames.length&&(this.decoderObj.flush(),console.log("flush")),1}},{key:"GetFrame",value:function(){var e=this;return new Promise((function(t,i){if(null!=e.curFrame){var r=e.ready_frames.shift();r.close(),r=null,e.curFrame=null}0!=e.ready_frames.length?(e.curFrame=e.ready_frames[0],t(e.curFrame)):(e.curFrame=null,t(null))}))}},{key:"GetFrameBufferLength",value:function(){return this.ready_frames.length}},{key:"GetImageYUV",value:function(){var e=this;return new Promise((function(t,i){var r=null;if(null!=e.curFrame?r=e.curFrame:0!=e.ready_frames.length&&(r=e.ready_frames[0]),null!=r){var a=r.displayWidth,n=r.displayHeight,s=a*n*3/2,o=new Uint8Array(s),x=r.format;r.copyTo(o).then((function(){console.log("2 yuvLength:"+s+",displayWidth:"+a),t({yuvFrameBuffer:o,yuvLength:s,displayWidth:a,displayHeight:n,yuvType:x})}))}else t({yuvFrameBuffer:-1,yuvLength:-1,displayWidth:-1,displayHeight:-1,yuvType:-1})}))}}]),t}(),N=2147483649,Y=2147483651,X=2147483652,U=2147483653,W=2147483658,G=2147483661,J=2147483662,Z={SR_DE_NULL:0,SR_DE_FISH_ORIGINAL:1,SR_DE_FISH_PTZ_CEILING:2,SR_DE_FISH_PTZ_FLOOR:3,SR_DE_FISH_PTZ_WALL:4,SR_DE_FISH_PANORAMA_CEILING_360:5,SR_DE_FISH_PANORAMA_CEILING_180:6,SR_DE_FISH_PANORAMA_FLOOR_360:7,SR_DE_FISH_PANORAMA_FLOOR_180:8,SR_DE_FISH_PANORAMA_WALL:9,SR_DE_FISH_SEMISPHERE:10,SR_DE_EAGLEEYE_SEMISPHERE:11,SR_DE_EAGLEEYE_PLANE:12,SR_DE_FISH_CYLINDER_CEILING:13,SR_DE_FISH_CYLINDER_FLOOR:14,SR_DE_FISH_CYLINDER_SPLIT_CEILING:15,SR_DE_FISH_CYLINDER_SPLIT_FLOOR:16,SR_DE_FISH_PLANET:17,SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:18,SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:19,SR_DE_FISH_ANIMATION_SWITCH_CEILING:20,SR_DE_FISH_ANIMATION_SWITCH_FLOOR:21,SR_DE_PANORAMA_SPHERE:22,SR_DE_PANORAMA_PLANET:23},j=256,z="\nattribute vec3 xy;\nattribute vec2 uv;\nuniform int bCapture; \n\nvarying highp vec2 v_uv;\n\nvoid main(void) {\n  if(bCapture == 1)\n  {\n    gl_Position = vec4(xy.x, -xy.y, xy.z, 1.0);\n  }\n  else\n  {\n    gl_Position = vec4(xy, 1.0);\n  }\n  v_uv = uv;\n}\n",q="\n    attribute vec3 position;\n    attribute vec4   color;\n    varying   float  pp;\n    varying   vec4  colorOut;\n    uniform int bCapture; \n\n    void main()\n    {\n        if(bCapture == 1)\n        {\n            gl_Position = vec4(position.x, -position.y, 0.0, 1.0);\n        }\n        else\n        {\n            gl_Position = vec4(position.x, position.y, 0.0, 1.0);\n        }\n        pp = position.z;\n        colorOut = color;\n    }\n",K="\n    varying  mediump float pp;\n    varying  lowp vec4  colorOut;\n    void main()\n    {\n        gl_FragColor = colorOut;\n        mediump float fx = abs(pp);\n        if (fx > 0.2)\n        { \n            gl_FragColor.a = colorOut.a*(1.25 - 1.25*fx);\n        } \n    } \n",$="\n    attribute vec4 position; \n    attribute vec4 texCoord; \n    uniform   mat4   matRotate; \n    varying vec4 pp; \n    uniform int bCapture;\n\n    void main() \n    { \n        gl_Position = position; //* matRotate; \n        if(bCapture == 1)\n        {\n           gl_Position.y =  -position.y;\n        }\n        pp = texCoord; \n    } \n",Q="\n    precision mediump float; \n    uniform sampler2D texture;\n    varying lowp vec4 pp; \n    uniform float fAlpha;\n    void main(void) \n    { \n        gl_FragColor = texture2D(texture, pp.st); \n        gl_FragColor.a *= fAlpha; \n    } \n",ee=32,te=1024,ie=.05,re=1e-6,ae=3.1415926,ne=.02,se=1e3,oe=.78539815,xe=-1,fe=ae/18,le=ae/3,he=ae/6,ce=ae/9,_e=1e-6,ue="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var de,pe,me;c(),de=new ue(4),ue!=Float32Array&&(de[0]=0,de[1]=0,de[2]=0,de[3]=0),c(),_(1,0,0),_(0,1,0),u(),u(),pe=new ue(9),ue!=Float32Array&&(pe[1]=0,pe[2]=0,pe[3]=0,pe[5]=0,pe[6]=0,pe[7]=0),pe[0]=1,pe[4]=1,pe[8]=1,me=new ue(2),ue!=Float32Array&&(me[0]=0,me[1]=0);var Pe=function(){function t(){e(this,t),this.fFov=.785,this.fAspect=1,this.fNear=.02,this.fFar=1e3,this.fTheta=0,this.fAlpha=0,this.fBeta=0,this.fScale=1,this.bOrtho=!1,this.matView=l(),this.matProj=l(),this.vecEye=_(0,0,0),this.vecCenter=_(0,0,100),this.vecUp=_(0,1,0)}return s(t,[{key:"SetYaw",value:function(e){this.fTheta=e}},{key:"GetYaw",value:function(){return this.fTheta}},{key:"SetPitch",value:function(e){this.fAlpha=e}},{key:"GetPitch",value:function(){return this.fAlpha}},{key:"SetRoll",value:function(e){this.fBeta=e}},{key:"GetRoll",value:function(){return this.fBeta}},{key:"SetScale",value:function(e){this.fScale=e}},{key:"GetScale",value:function(){return this.fScale}},{key:"SetFov",value:function(e){this.fFov=e}},{key:"SetAspect",value:function(e){this.fAspect=e}},{key:"SetNear",value:function(e){this.fNear=e}},{key:"SetFar",value:function(e){this.fFar=e}},{key:"SetOrtho",value:function(e){this.bOrtho=e}},{key:"UpdateCamera",value:function(e,t){if(!(e<=0||t<=0)){if(1==this.bOrtho)!function(e,t,i,r,a,n,s){var o=1/(t-i),x=1/(r-a),f=1/(n-s);e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*x,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(t+i)*o,e[13]=(a+r)*x,e[14]=(s+n)*f,e[15]=1}(this.matProj,0,e,t,0,this.fNear,this.fFar);else{var i=this.fFov/ae*180;!function(e,t,i,r,a){var n=1/Math.tan(t/2);if(e[0]=n/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0){var s=1/(r-a);e[10]=(a+r)*s,e[14]=2*a*r*s}else e[10]=-1,e[14]=-2*r}(this.matProj,i,e/t,this.fNear,this.fFar)}this.vecEye=_(0,0,this.fScale),this.vecCenter=_(0,0,0),this.vecUp=_(0,1,0);var r=_(1,0,0),a=_(0,1,0),n=_(0,0,1),s=l();u=s,d=this.vecEye,p=this.vecCenter,m=this.vecUp,D=d[0],I=d[1],M=d[2],A=m[0],w=m[1],L=m[2],B=p[0],k=p[1],O=p[2],Math.abs(D-B)<_e&&Math.abs(I-k)<_e&&Math.abs(M-O)<_e?((T=u)[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1):(R=D-B,C=I-k,E=M-O,P=w*(E*=F=1/Math.hypot(R,C,E))-L*(C*=F),y=L*(R*=F)-A*E,S=A*C-w*R,(F=Math.hypot(P,y,S))?(P*=F=1/F,y*=F,S*=F):(P=0,y=0,S=0),b=C*S-E*y,g=E*P-R*S,v=R*y-C*P,(F=Math.hypot(b,g,v))?(b*=F=1/F,g*=F,v*=F):(b=0,g=0,v=0),u[0]=P,u[1]=b,u[2]=R,u[3]=0,u[4]=y,u[5]=g,u[6]=C,u[7]=0,u[8]=S,u[9]=v,u[10]=E,u[11]=0,u[12]=-(P*D+y*I+S*M),u[13]=-(b*D+g*I+v*M),u[14]=-(R*D+C*I+E*M),u[15]=1);var o=l(),x=l(),f=l(),c=l();h(x,o,-this.fAlpha,r),h(f,x,-this.fTheta,a),h(c,f,-this.fBeta,n),function(e,t,i){var r=t[0],a=t[1],n=t[2],s=t[3],o=t[4],x=t[5],f=t[6],l=t[7],h=t[8],c=t[9],_=t[10],u=t[11],d=t[12],p=t[13],m=t[14],P=t[15],y=i[0],S=i[1],b=i[2],g=i[3];e[0]=y*r+S*o+b*h+g*d,e[1]=y*a+S*x+b*c+g*p,e[2]=y*n+S*f+b*_+g*m,e[3]=y*s+S*l+b*u+g*P,y=i[4],S=i[5],b=i[6],g=i[7],e[4]=y*r+S*o+b*h+g*d,e[5]=y*a+S*x+b*c+g*p,e[6]=y*n+S*f+b*_+g*m,e[7]=y*s+S*l+b*u+g*P,y=i[8],S=i[9],b=i[10],g=i[11],e[8]=y*r+S*o+b*h+g*d,e[9]=y*a+S*x+b*c+g*p,e[10]=y*n+S*f+b*_+g*m,e[11]=y*s+S*l+b*u+g*P,y=i[12],S=i[13],b=i[14],g=i[15],e[12]=y*r+S*o+b*h+g*d,e[13]=y*a+S*x+b*c+g*p,e[14]=y*n+S*f+b*_+g*m,e[15]=y*s+S*l+b*u+g*P}(this.matView,s,c)}var u,d,p,m,P,y,S,b,g,v,R,C,E,F,T,D,I,M,A,w,L,B,k,O}},{key:"GetView",value:function(){return this.matView}},{key:"GetProj",value:function(){return this.matProj}}]),t}(),ye=function(){function t(){e(this,t),this.canvas=null,this.ctx=null,this.videoShaderProgram=0,this.vertexPosBuffer=0,this.texturePosBuffer=0,this.pFrameData=null,this.frameDisplayWidth=0,this.frameDisplayHeight=0,this.onlySupportedWebGL1=!1,this.bAntialias=!1,this.bRecreateTex=!0,this.nSurfaceTexture=[],this.nMaxPointNum=0,this.pLinePosVertices=null,this.pLineClrVertices=null,this.glLinePosBuffer=0,this.glLineClrBuffer=0,this.nLineTriangleNum=0,this.nLineShaderProgram=0,this.pFillBlockPosVertices=null,this.pFillBlockClrVertices=null,this.nMaxFillBlockTriNum=0,this.glBlockPosBuffer=0,this.glBlockClrBuffer=0,this.nBlockShaderProgram=0,this.nDrawFontWidth=0,this.nDrawFontHeight=0,this.nFontColorTexture=0,this.pFontColorBuffer=0,this.nFontShaderProgram=0,this.nFontBGNum=0,this.pstFontBGLines=[],this.nImageShaderProgram=0,this.pImagePosVertices=null,this.pImageClrVertices=null,this.glImagePosBuffer=0,this.glImageClrBuffer=0,this.nImageColorTexture=null,this.nDrawImageWidth=0,this.nDrawImageHeight=0,this.nImageColorTextures=[],this.pFishParamManager=null,this.enDisplayEffect=Z.SR_DE_NULL,this.nFECPort=xe,this.bIsCapturing=!1,this.pSemiSpherePos=null,this.pSemiSphereTex=null,this.nSemiSpherePosNum=0,this.nSemiSpherePosSize=0,this.nSemiSphereTexSize=0,this.pCylinderPos=null,this.pCylinderTex=null,this.nCylinderPosNum=0,this.nCylinderPosSize=0,this.nCylinderTexSize=0,this.fCylinderHeight=0,this.fCylinderRadius=0,this.pArcSpherePos=null,this.pArcSphereTex=null,this.nArcSpherePosNum=0,this.nArcSpherePosSize=0,this.nArcSphereTexSize=0,this.fImageWidth=1,this.fImageHeight=1,this.fTexCenterX=.5,this.fTexCenterY=.5,this.fTexRadius=.5,this.b3DPort=!1,this.pCamera=null,this.fRotateX=0,this.fRotateY=0,this.fScale=0,this.fRotateLimitX=0,this.fRotateLimitY=0,this.pfuncCBIn=null,this.pfuncCBOut=null,this.pUserIn=null,this.pUserOut=null,this.bCullBack=!1,this.fSrcUseLeft=0,this.fSrcUseRight=1,this.fSrcUseTop=0,this.fSrcUseBottom=1,this.fDstUseLeft=0,this.fDstUseRight=1,this.fDstUseTop=0,this.fDstUseBottom=1,this.enPixelFormat=0,this.nTextureNum=0,this.textCanvas=null,this.textCanvasCtx=null,this.nCaptureWidth=0,this.nCaptureHeight=0,this.nCaptureRTTex=0,this.nCaptureFBO=0,this.nCaptureFBOWidth=0,this.nCaptureFBOHeight=0,this.nCaptureDepthbuffer=0,this.bCaptureResInit=!1,this.fBrightness=0,this.fHue=0,this.fSaturation=0,this.fContrast=0,this.fSharpness=0,this.nPostProc=0}return s(t,[{key:"CompileProgram",value:function(e,t){var i=this.ctx;if(null==i||null==e||null==t)return-1;var r=i.createShader(i.VERTEX_SHADER);if(i.shaderSource(r,e),i.compileShader(r),!i.getShaderParameter(r,i.COMPILE_STATUS))return console.log("Vertex shader failed to compile: "+i.getShaderInfoLog(r)),-1;var a=i.createShader(i.FRAGMENT_SHADER);if(i.shaderSource(a,t),i.compileShader(a),!i.getShaderParameter(a,i.COMPILE_STATUS))return console.log("Fragment shader failed to compile: "+i.getShaderInfoLog(a)),-1;var n=i.createProgram();return i.attachShader(n,r),i.attachShader(n,a),i.linkProgram(n),i.getProgramParameter(n,i.LINK_STATUS)?(i.deleteShader(r),i.deleteShader(a),n):(console.log("Program failed to compile: "+i.getProgramInfoLog(n)),-1)}},{key:"SR_Init",value:function(e,t){if(null==e)return U;if(this.canvas=e,this.ctx=this.canvas.getContext("webgl2"),this.ctx||(this.ctx=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl"),this.onlySupportedWebGL1=!0,console.log("only support webgl1")),!this.ctx)return console.log("your browser does not support WebGL"),J;if(2==t||6==t)return N;switch(t){case 1:case 3:this.nTextureNum=3;break;case 2:case 6:this.nTextureNum=2;break;case j:this.nTextureNum=1;break;default:return N}return this.enPixelFormat=t,1}},{key:"SR_Draw",value:function(e,t,i,r,a){if(null==this.ctx)return X;var n=this.nTextureNum;if(null==e||t<=0||i<=0)return U;if(0==this.videoShaderProgram||0==this.vertexPosBuffer||0==this.texturePosBuffer)return X;var s=1;if(j==this.enPixelFormat)this.frameDisplayWidth=t,this.frameDisplayHeight=i;else if(1!=(s=this._ResizeFrameData(e,t,i,r)))return s;if(this.ctx.useProgram(this.videoShaderProgram),1==this.bRecreateTex){if(this.enPixelFormat==j){if(0!=this.nSurfaceTexture[0]){var o=this.nSurfaceTexture[0];this.ctx.deleteTexture(o),this.nSurfaceTexture[0]=0}var x=this.ctx.createTexture();if(x<=0)return G;this.ctx.bindTexture(this.ctx.TEXTURE_2D,x),1==this.bAntialias?this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR_MIPMAP_NEAREST):this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE),this.nSurfaceTexture[0]=x}else if(1==this.enPixelFormat||3==this.enPixelFormat)for(var f=0;f<n;f++){if(0!=this.nSurfaceTexture[f]){var l=this.nSurfaceTexture[f];this.ctx.deleteTexture(l),this.nSurfaceTexture[f]=0}var h=this.ctx.createTexture();if(h<=0)return G;if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,h),1==this.bAntialias?this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR_MIPMAP_NEAREST):this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE),0==f){var c=this.ctx.getUniformLocation(this.videoShaderProgram,"Ytexture");this.ctx.uniform1i(c,0)}else if(1==f){var _=this.ctx.getUniformLocation(this.videoShaderProgram,"Utexture");this.ctx.uniform1i(_,1)}else if(2==f){var u=this.ctx.getUniformLocation(this.videoShaderProgram,"Vtexture");this.ctx.uniform1i(u,2)}this.nSurfaceTexture[f]=h,this.ctx.bindTexture(this.ctx.TEXTURE_2D,null)}this.bRecreateTex=!1}this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer);var d=this.ctx.getAttribLocation(this.videoShaderProgram,"xy");if(d<0)return G;this.ctx.vertexAttribPointer(d,3,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(d),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer);var p=this.ctx.getAttribLocation(this.videoShaderProgram,"uv");if(p<0)return G;this.ctx.vertexAttribPointer(p,2,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(p),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null);var m=this.enDisplayEffect,P=this.ctx.getUniformLocation(this.videoShaderProgram,"bCapture");if(P<=0)return G;this.ctx.uniform1i(P,0);var y=this.ctx.getUniformLocation(this.videoShaderProgram,"nPostProc");switch(this.ctx.uniform1i(y,this.nPostProc),1==this.nPostProc&&(s=this._SetImagePostProcess()),m){case Z.SR_DE_NULL:break;case Z.SR_DE_FISH_ORIGINAL:case Z.SR_DE_FISH_PTZ_CEILING:case Z.SR_DE_FISH_PTZ_FLOOR:case Z.SR_DE_FISH_PTZ_WALL:case Z.SR_DE_FISH_PANORAMA_CEILING_360:case Z.SR_DE_FISH_PANORAMA_CEILING_180:case Z.SR_DE_FISH_PANORAMA_FLOOR_360:case Z.SR_DE_FISH_PANORAMA_FLOOR_180:case Z.SR_DE_FISH_PANORAMA_WALL:if(null==this.pFishParamManager)return X;var S={};if(1!=(s=this.pFishParamManager.GetRenderParam(this.nFECPort,S)))return s;if(Z.SR_DE_FISH_ORIGINAL==m){var b=this.ctx.getUniformLocation(this.videoShaderProgram,"bBlack");if(b<=0)return G;this.ctx.uniform1i(b,S.bBlack);var g=this.ctx.getUniformLocation(this.videoShaderProgram,"bCut");if(g<=0)return G;this.ctx.uniform1i(g,S.bCut)}if(Z.SR_DE_FISH_PTZ_CEILING==m||Z.SR_DE_FISH_PTZ_FLOOR==m||Z.SR_DE_FISH_PTZ_WALL==m){var v=this.ctx.getUniformLocation(this.videoShaderProgram,"fHAngleCos");if(v<=0)return G;this.ctx.uniform1f(v,S.fCosH);var R=this.ctx.getUniformLocation(this.videoShaderProgram,"fHAngleSin");if(R<=0)return G;this.ctx.uniform1f(R,S.fSinH);var C=this.ctx.getUniformLocation(this.videoShaderProgram,"fVAngleCos");if(C<=0)return G;this.ctx.uniform1f(C,S.fCosV);var E=this.ctx.getUniformLocation(this.videoShaderProgram,"fVAngleSin");if(E<=0)return G;this.ctx.uniform1f(E,S.fSinV);var F=this.ctx.getUniformLocation(this.videoShaderProgram,"fZoom");if(F<=0)return G;this.ctx.uniform1f(F,S.fZoom)}if(Z.SR_DE_FISH_PANORAMA_CEILING_360==m||Z.SR_DE_FISH_PANORAMA_CEILING_180==m||Z.SR_DE_FISH_PANORAMA_FLOOR_360==m||Z.SR_DE_FISH_PANORAMA_FLOOR_180==m){var T=this.ctx.getUniformLocation(this.videoShaderProgram,"fAngle");if(T<=0)return G;this.ctx.uniform1f(T,S.fAngle)}var D=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX1");if(D<=0)return G;this.ctx.uniform1f(D,S.fRXLeft);var I=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX2");if(I<=0)return G;this.ctx.uniform1f(I,S.fRXRight);var M=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY1");if(M<=0)return G;this.ctx.uniform1f(M,S.fRYTop);var A=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY2");if(A<=0)return G;this.ctx.uniform1f(A,S.fRYBottom);break;case Z.SR_DE_FISH_SEMISPHERE:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(3.14-this.fRotateX),this.pCamera.SetYaw(-this.fRotateY),this.pCamera.UpdateCamera(this.canvas.width,this.canvas.height);var w=this.pCamera.GetView(),L=this.pCamera.GetProj(),B=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(B<=0)return G;this.ctx.uniformMatrix4fv(B,!1,w);var k=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(k<=0)return G;this.ctx.uniformMatrix4fv(k,!1,L);break;case Z.SR_DE_FISH_CYLINDER_CEILING:case Z.SR_DE_FISH_CYLINDER_FLOOR:case Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(-this.fRotateX),this.pCamera.SetYaw(-this.fRotateY),this.pCamera.UpdateCamera(this.canvas.width,this.canvas.height);var O=this.pCamera.GetView(),H=this.pCamera.GetProj(),V=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(V<=0)return G;this.ctx.uniformMatrix4fv(V,!1,O);var Y=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(Y<=0)return G;this.ctx.uniformMatrix4fv(Y,!1,H);break;default:return N}if(this.canvas.width<=0||this.canvas.height<=0)return J;if(null!=a&&1!=(s=this.SR_SetDisplayRect(a.fx,a.fy,a.width,a.height,2)))return s;if(null!=a?this.ctx.viewport(this.canvas.width*this.fDstUseLeft,this.canvas.height*this.fDstUseTop,this.canvas.width*this.fDstUseRight,this.canvas.height*this.fDstUseBottom):(this.ctx.viewport(0,0,this.canvas.width,this.canvas.height),this.ctx.clearColor(0,0,0,1),this.ctx.clear(this.ctx.COLOR_BUFFER_BIT|this.ctx.DEPTH_BUFFER_BIT)),this.b3DPort&&(this.ctx.enable(this.ctx.DEPTH_TEST),this.ctx.depthFunc(this.ctx.LESS),this.ctx.depthMask(!0),1==this.bCullBack?this.ctx.enable(this.ctx.CULL_FACE):this.ctx.disable(this.ctx.CULL_FACE)),this.enPixelFormat==j)this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,t,i,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,e),1==this.bAntialias&&this.ctx.generateMipmap(this.ctx.TEXTURE_2D);else if(1==this.enPixelFormat){var W=this.pFrameData.subarray(0,t*i);this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t,i,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,W);var z=this.pFrameData.subarray(t*i+t/2*i/2,t*i+t/2*i/2+t/2*i/2);this.ctx.activeTexture(this.ctx.TEXTURE1),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[1]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t/2,i/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,z);var q=this.pFrameData.subarray(t*i,t*i+t/2*i/2);this.ctx.activeTexture(this.ctx.TEXTURE2),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[2]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t/2,i/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,q),1==this.bAntialias&&this.ctx.generateMipmap(this.ctx.TEXTURE_2D),W=null,z=null,q=null}else 3==this.enPixelFormat&&(W=this.pFrameData.subarray(0,t*i),this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t,i,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,W),z=this.pFrameData.subarray(t*i,t*i+t/2*i/2),this.ctx.activeTexture(this.ctx.TEXTURE1),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[1]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t/2,i/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,z),q=this.pFrameData.subarray(t*i+t/2*i/2,t*i+t/2*i/2+t/2*i/2),this.ctx.activeTexture(this.ctx.TEXTURE2),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[2]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t/2,i/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,q),1==this.bAntialias&&this.ctx.generateMipmap(this.ctx.TEXTURE_2D),W=null,z=null,q=null);if(this.onlySupportedWebGL1||this.ctx.clearBufferfi(this.ctx.DEPTH_STENCIL,0,1,0),0==this.b3DPort)this.ctx.drawArrays(this.ctx.TRIANGLE_FAN,0,4);else if(this.enDisplayEffect==Z.SR_DE_FISH_SEMISPHERE){if(this.nSemiSpherePosNum<=0)return X;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nSemiSpherePosNum)}else if(this.enDisplayEffect==Z.SR_DE_FISH_CYLINDER_CEILING||this.enDisplayEffect==Z.SR_DE_FISH_CYLINDER_FLOOR){if(this.nCylinderPosNum<=0)return X;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nCylinderPosNum)}else if(this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL){if(this.nArcSpherePosNum<=0)return X;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nArcSpherePosNum)}if(this.ctx.useProgram(null),null!=this.pFishParamManager){var K=this.pFishParamManager.GetWndPort();K!=xe&&K==this.nFECPort&&this.DrawPTZLines()}return null!=this.pfuncCBIn&&this.pfuncCBIn(this.pUserIn),null!=this.pfuncCBOut&&this.pfuncCBOut(this.pUserOut),1}},{key:"DrawPTZLines",value:function(){if(null==this.pFishParamManager)return X;var e=this.pFishParamManager.GetPTZDisplayMode();if(2==e||1==e)for(var t=0,i={fR:0,fG:0,fB:0,fA:0},r=0;r<ee;++r)if(0!=this.pFishParamManager.IsPortAllocated(r)&&(t=2,1==this.pFishParamManager.GetPTZColor(r,i))){1==this.pFishParamManager.IsPTZSelected(r)&&(t+=1);var a=this.pFishParamManager.GetWndPort();if(r!=a&&2==e)if(Z.SR_DE_FISH_ORIGINAL==this.pFishParamManager.GetDisplayEffect(a)){var n={};if(1!=this.pFishParamManager.GetPTZPoints(r,n,2))continue;if(null!=n.pstPoints&&0!=n.nPointNum&&1!=this.SR_DrawLines(n.pstPoints,n.nPointNum,!0,i,t,!1))continue}else{var s;if((s=this.pFishParamManager.GetPTZFragmentNum(r))<=0)continue;for(var o=0;o<s;o++){var x={};this.pFishParamManager.GetPTZFragmentPoints(r,x,o),null!=x.pstPoints&&0!=x.nPointNum&&this.SR_DrawLines(x.pstPoints,x.nPointNum,!1,i,t,!1)}}else if(r!=a&&1==e){var f={};if(1!=this.pFishParamManager.GetPTZPoints(r,f,1))continue;if(null!=f.pstPoints&&0!=f.nPointNum&&1!=this.SR_DrawLines(f.pstPoints,f.nPointNum,!0,i,t,!1))continue}}return 1}},{key:"DrawFillBlock",value:function(e,t,i){if(null==this.ctx)return X;if(null==e||t<1||i<2)return U;for(var r=0,a=0;a<t;++a){if(null==e[a].pstPoints||e[a].nPointNum<3||!0!==e[a].bLoop||null==e[a].pstColor)return U;r+=e[a].nPointNum}if(r!==i)return U;var n=i-2*t;if(n>this.nMaxFillBlockTriNum&&(this.pFillBlockPosVertices=null,this.pFillBlockClrVertices=null,this.nMaxFillBlockTriNum=n),0==this.glBlockPosBuffer&&(this.glBlockPosBuffer=this.ctx.createBuffer(),0==this.glBlockPosBuffer))return G;if(0==this.glBlockClrBuffer&&(this.glBlockClrBuffer=this.ctx.createBuffer(),0==this.glBlockClrBuffer))return G;if(null==this.pFillBlockPosVertices){var s=this.nMaxFillBlockTriNum;if(this.pFillBlockPosVertices=new Float32Array(3*s*3),null==this.pFillBlockPosVertices)return Y}if(this.pFillBlockPosVertices.fill(0),null==this.pFillBlockClrVertices){var o=this.nMaxFillBlockTriNum;if(this.pFillBlockClrVertices=new Float32Array(4*o*3),null==this.pFillBlockClrVertices)return Y}this.pFillBlockClrVertices.fill(0);for(var x=0,f=0,l=0,h=null,c=null,_={},u={},d={},p=0;p<t;++p){l=e[p].nPointNum,h=e[p].pstPoints,c=e[p].pstColor,_.fX=(h[0].fX-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),_.fX=this.fDstUseLeft+_.fX*(this.fDstUseRight-this.fDstUseLeft),_.fX=2*_.fX-1,_.fY=(h[0].fY-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),_.fY=this.fDstUseTop+_.fY*(this.fDstUseBottom-this.fDstUseTop),_.fY=1-2*_.fY;for(var m=1;m<l-1;m++)u.fX=(h[m].fX-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),u.fX=this.fDstUseLeft+u.fX*(this.fDstUseRight-this.fDstUseLeft),u.fX=2*u.fX-1,u.fY=(h[m].fY-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),u.fY=this.fDstUseTop+u.fY*(this.fDstUseBottom-this.fDstUseTop),u.fY=1-2*u.fY,d.fX=(h[m+1].fX-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),d.fX=this.fDstUseLeft+d.fX*(this.fDstUseRight-this.fDstUseLeft),d.fX=2*d.fX-1,d.fY=(h[m+1].fY-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),d.fY=this.fDstUseTop+d.fY*(this.fDstUseBottom-this.fDstUseTop),d.fY=1-2*d.fY,this.pFillBlockPosVertices[x++]=_.fX,this.pFillBlockPosVertices[x++]=_.fY,this.pFillBlockPosVertices[x++]=0,this.pFillBlockClrVertices[f++]=c.fR,this.pFillBlockClrVertices[f++]=c.fG,this.pFillBlockClrVertices[f++]=c.fB,this.pFillBlockClrVertices[f++]=c.fA,this.pFillBlockPosVertices[x++]=u.fX,this.pFillBlockPosVertices[x++]=u.fY,this.pFillBlockPosVertices[x++]=0,this.pFillBlockClrVertices[f++]=c.fR,this.pFillBlockClrVertices[f++]=c.fG,this.pFillBlockClrVertices[f++]=c.fB,this.pFillBlockClrVertices[f++]=c.fA,this.pFillBlockPosVertices[x++]=d.fX,this.pFillBlockPosVertices[x++]=d.fY,this.pFillBlockPosVertices[x++]=0,this.pFillBlockClrVertices[f++]=c.fR,this.pFillBlockClrVertices[f++]=c.fG,this.pFillBlockClrVertices[f++]=c.fB,this.pFillBlockClrVertices[f++]=c.fA}if(0==this.nBlockShaderProgram&&(this.nBlockShaderProgram=this.CompileProgram(q,K),this.nBlockShaderProgram<=0))return G;this.ctx.enable(this.ctx.BLEND),this.ctx.blendFunc(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glBlockPosBuffer),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,this.pFillBlockPosVertices,this.ctx.STATIC_DRAW),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glBlockClrBuffer),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,this.pFillBlockClrVertices,this.ctx.STATIC_DRAW),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.useProgram(this.nBlockShaderProgram);var P=this.ctx.getUniformLocation(this.nLineShaderProgram,"bCapture");if(P<=0)return G;1==this.bIsCapturing?this.ctx.uniform1i(P,1):this.ctx.uniform1i(P,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glBlockPosBuffer);var y=this.ctx.getAttribLocation(this.nBlockShaderProgram,"position");this.ctx.enableVertexAttribArray(y),this.ctx.vertexAttribPointer(y,3,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glBlockClrBuffer);var S=this.ctx.getAttribLocation(this.nBlockShaderProgram,"color");return this.ctx.enableVertexAttribArray(S),this.ctx.vertexAttribPointer(S,4,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.drawArrays(this.ctx.TRIANGLES,0,3*n),this.ctx.useProgram(null),this.ctx.disable(this.ctx.BLEND),1}},{key:"ComputeLinePoint",value:function(e,t){if(null==e||t<1)return U;if(null==this.pLinePosVertices||null==this.pLineClrVertices)return X;var i=0,r=0;1==this.bIsCapturing?(i=(this.fDstUseRight-this.fDstUseLeft)*this.nCaptureWidth,r=(this.fDstUseBottom-this.fDstUseTop)*this.nCaptureHeight):(i=(this.fDstUseRight-this.fDstUseLeft)*this.canvas.width,r=(this.fDstUseBottom-this.fDstUseTop)*this.canvas.height);for(var a=0,n=0,s=0,o=0,x=0,f=0,l=0,h=0,c=0,_=0,u=0,d=0;d<t;++d){var p=[];if(!((u=e[d].nPointNum)<=0)){for(var m=0;m<u;++m){var P={};P.fX=(e[d].pstPoints[m].fX-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),P.fX=this.fDstUseLeft+P.fX*(this.fDstUseRight-this.fDstUseLeft),P.fX=2*P.fX-1,P.fY=(e[d].pstPoints[m].fY-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),P.fY=this.fDstUseTop+P.fY*(this.fDstUseBottom-this.fDstUseTop),P.fY=1-2*P.fY,p.push(P)}if(this.canvas.width<=0||this.canvas.height<=0)return J;if(f=3.5*e[d].nLineWidth/i,l=3.5*e[d].nLineWidth/r,f<=0||l<=0)return U;var y=e[d].pstColor;if(null==y||null==y)return U;for(var S=0;S<u-1;++S)n=p[S+1].fX-p[S].fX,s=p[S+1].fY-p[S].fY,a=Math.sqrt(n*n+s*s),Math.abs(a-0)<1e-6||(o=-f*s/a/2,x=l*n/a/2,this.pLinePosVertices[c++]=p[S].fX+o,this.pLinePosVertices[c++]=p[S].fY+x,this.pLinePosVertices[c++]=-1,this.pLineClrVertices[_++]=y.fR,this.pLineClrVertices[_++]=y.fG,this.pLineClrVertices[_++]=y.fB,this.pLineClrVertices[_++]=y.fA,this.pLinePosVertices[c++]=p[S+1].fX-o,this.pLinePosVertices[c++]=p[S+1].fY-x,this.pLinePosVertices[c++]=1,this.pLineClrVertices[_++]=y.fR,this.pLineClrVertices[_++]=y.fG,this.pLineClrVertices[_++]=y.fB,this.pLineClrVertices[_++]=y.fA,this.pLinePosVertices[c++]=p[S].fX-o,this.pLinePosVertices[c++]=p[S].fY-x,this.pLinePosVertices[c++]=1,this.pLineClrVertices[_++]=y.fR,this.pLineClrVertices[_++]=y.fG,this.pLineClrVertices[_++]=y.fB,this.pLineClrVertices[_++]=y.fA,this.pLinePosVertices[c++]=p[S].fX+o,this.pLinePosVertices[c++]=p[S].fY+x,this.pLinePosVertices[c++]=-1,this.pLineClrVertices[_++]=y.fR,this.pLineClrVertices[_++]=y.fG,this.pLineClrVertices[_++]=y.fB,this.pLineClrVertices[_++]=y.fA,this.pLinePosVertices[c++]=p[S+1].fX+o,this.pLinePosVertices[c++]=p[S+1].fY+x,this.pLinePosVertices[c++]=-1,this.pLineClrVertices[_++]=y.fR,this.pLineClrVertices[_++]=y.fG,this.pLineClrVertices[_++]=y.fB,this.pLineClrVertices[_++]=y.fA,this.pLinePosVertices[c++]=p[S+1].fX-o,this.pLinePosVertices[c++]=p[S+1].fY-x,this.pLinePosVertices[c++]=1,this.pLineClrVertices[_++]=y.fR,this.pLineClrVertices[_++]=y.fG,this.pLineClrVertices[_++]=y.fB,this.pLineClrVertices[_++]=y.fA,h+=2);1==e[d].bLoop&&2<u&&(n=p[u-1].fX-p[0].fX,s=p[u-1].fY-p[0].fY,a=Math.sqrt(n*n+s*s),Math.abs(a-0)>1e-6&&(o=-f*s/a/2,x=l*n/a/2,this.pLinePosVertices[c++]=p[0].fX+o,this.pLinePosVertices[c++]=p[0].fY+x,this.pLinePosVertices[c++]=-1,this.pLineClrVertices[_++]=y.fR,this.pLineClrVertices[_++]=y.fG,this.pLineClrVertices[_++]=y.fB,this.pLineClrVertices[_++]=y.fA,this.pLinePosVertices[c++]=p[u-1].fX-o,this.pLinePosVertices[c++]=p[u-1].fY-x,this.pLinePosVertices[c++]=1,this.pLineClrVertices[_++]=y.fR,this.pLineClrVertices[_++]=y.fG,this.pLineClrVertices[_++]=y.fB,this.pLineClrVertices[_++]=y.fA,this.pLinePosVertices[c++]=p[0].fX-o,this.pLinePosVertices[c++]=p[0].fY-x,this.pLinePosVertices[c++]=1,this.pLineClrVertices[_++]=y.fR,this.pLineClrVertices[_++]=y.fG,this.pLineClrVertices[_++]=y.fB,this.pLineClrVertices[_++]=y.fA,this.pLinePosVertices[c++]=p[0].fX+o,this.pLinePosVertices[c++]=p[0].fY+x,this.pLinePosVertices[c++]=-1,this.pLineClrVertices[_++]=y.fR,this.pLineClrVertices[_++]=y.fG,this.pLineClrVertices[_++]=y.fB,this.pLineClrVertices[_++]=y.fA,this.pLinePosVertices[c++]=p[u-1].fX+o,this.pLinePosVertices[c++]=p[u-1].fY+x,this.pLinePosVertices[c++]=-1,this.pLineClrVertices[_++]=y.fR,this.pLineClrVertices[_++]=y.fG,this.pLineClrVertices[_++]=y.fB,this.pLineClrVertices[_++]=y.fA,this.pLinePosVertices[c++]=p[u-1].fX-o,this.pLinePosVertices[c++]=p[u-1].fY-x,this.pLinePosVertices[c++]=1,this.pLineClrVertices[_++]=y.fR,this.pLineClrVertices[_++]=y.fG,this.pLineClrVertices[_++]=y.fB,this.pLineClrVertices[_++]=y.fA,h+=2))}}return 0==h?U:(this.nLineTriangleNum=h,1)}},{key:"SR_DrawLines",value:function(e,t,i,r,a,n){var s=[],o={};return o.pstPoints=e,o.nPointNum=t,o.bLoop=i,o.pstColor=r,o.nLineWidth=a,s.push(o),this.SR_DrawLinesEx(s,1,t,n)}},{key:"SR_DrawLinesEx",value:function(e,t,i,r){if(null==this.ctx)return X;if(null==e||t<1||i<2)return U;if(0==this.nLineShaderProgram){var a=this.CompileProgram(q,K);if(a<=0)return G;this.nLineShaderProgram=a}if(1==r)return this.DrawFillBlock(e,t,i);for(var n=0,s=0;s<t;++s){if(null==e[s].pstPoints||e[s].nPointNum<=1||e[s].nPointNum>=1024||e[s].nLineWidth<=0||null==e[s].pstColor)return U;n+=e[s].nPointNum}if(n!=i)return U;if((n+=t)>this.nMaxPointNum&&(this.nMaxPointNum=n,this.pLinePosVertices=null,this.pLineClrVertices=null),null==this.pLinePosVertices&&(this.pLinePosVertices=new Float32Array(6*this.nMaxPointNum*3),null==this.pLinePosVertices))return Y;if(this.pLinePosVertices.fill(0),null==this.pLineClrVertices&&(this.pLineClrVertices=new Float32Array(6*this.nMaxPointNum*4),null==this.pLineClrVertices))return Y;if(this.pLineClrVertices.fill(0),0==this.glLinePosBuffer&&(this.glLinePosBuffer=this.ctx.createBuffer(),0==this.glLinePosBuffer))return G;if(0==this.glLineClrBuffer&&(this.glLineClrBuffer=this.ctx.createBuffer(),0==this.glLineClrBuffer))return G;var o=this.ComputeLinePoint(e,t);if(1!=o)return o;this.ctx.enable(this.ctx.BLEND),this.ctx.blendFunc(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA);var x=this.nLineShaderProgram;this.ctx.useProgram(x);var f=this.ctx.getUniformLocation(this.nLineShaderProgram,"bCapture");if(f<=0)return G;1==this.bIsCapturing?this.ctx.uniform1i(f,1):this.ctx.uniform1i(f,0);var l=this.glLinePosBuffer,h=this.glLineClrBuffer,c=this.nLineTriangleNum,_=this.pLinePosVertices,u=this.pLineClrVertices;this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,l),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,_,this.ctx.STATIC_DRAW);var d=this.ctx.getAttribLocation(x,"position");this.ctx.enableVertexAttribArray(d),this.ctx.vertexAttribPointer(d,3,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,h),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,u,this.ctx.STATIC_DRAW);var p=this.ctx.getAttribLocation(x,"color");return this.ctx.enableVertexAttribArray(p),this.ctx.vertexAttribPointer(p,4,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),1==this.bIsCapturing?this.ctx.viewport(0,0,this.nCaptureWidth,this.nCaptureHeight):this.ctx.viewport(0,0,this.canvas.width,this.canvas.height),this.ctx.drawArrays(this.ctx.TRIANGLES,0,3*c),this.ctx.useProgram(null),this.ctx.disable(this.ctx.BLEND),1}},{key:"SR_DrawFont",value:function(e,t,i,r,a,n,s,o,x,f,l){if(null==e||null==t||null==i||r<=1||a<=1)return U;if(1==n&&null==s)return U;var h=[],c={};return c.bBackground=n,c.nFontWidth=r,c.nFontHeight=a,c.pstBGColor=s,c.pstFontColor=i,c.pString=e,c.pstStartPos=t,c.fRotateAngle=o,c.pFontFamily=x,c.textAlign=f,c.textBaseline=l,h.push(c),this.SR_DrawFontEx(h,1)}},{key:"SR_DrawFontEx",value:function(e,t){if(null==this.ctx)return X;if(0>t||null==e)return U;var i,r,a=0,n=0;if(1==this.bIsCapturing){if(0==this.nCaptureWidth||0==this.nCaptureHeight)return X;a=Math.round((this.fDstUseRight-this.fDstUseLeft)*this.nCaptureWidth),n=Math.round((this.fDstUseBottom-this.fDstUseTop)*this.nCaptureHeight)}else a=Math.round((this.fDstUseRight-this.fDstUseLeft)*this.canvas.width),n=Math.round((this.fDstUseBottom-this.fDstUseTop)*this.canvas.height);if(a=a+4-a%4,n=n+4-n%4,this.nDrawFontWidth==a&&this.nDrawFontHeight==n||(this.pFontColorBuffer=null,this.nFontColorTexture=0,this.nDrawFontWidth=a,this.nDrawFontHeight=n,null!=this.textCanvas&&(this.textCanvas.remove(),this.textCanvas=null,this.textCanvasCtx=null)),0==this.nFontColorTexture){if(this.nFontColorTexture=this.ctx.createTexture(),0==this.nFontColorTexture)return G;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nFontColorTexture),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE)}if(null==this.textCanvas){if(this.textCanvas=document.createElement("canvas"),null==this.textCanvas)return W;if(this.textCanvasCtx=this.textCanvas.getContext("2d"),null==this.textCanvasCtx)return W;this.textCanvasCtx.canvas.width=this.nDrawFontWidth,this.textCanvasCtx.canvas.height=this.nDrawFontHeight}this.textCanvasCtx.clearRect(0,0,this.nDrawFontWidth,this.nDrawFontHeight);for(var s=0;s<t;++s){var o=e[s].nFontWidth,x=e[s].nFontHeight;1==this.bIsCapturing&&(o=Math.round(.7*this.nCaptureWidth/this.canvas.width*o),x=Math.round(.7*this.nCaptureHeight/this.canvas.height*x));var f=o<x?o:x;this.textCanvasCtx.font=f.toString()+"px "+e[s].pFontFamily,null==e[s].textAlign||null==e[s].textAlign?this.textCanvasCtx.textAlign="left":this.textCanvasCtx.textAlign=e[s].textAlign,null==e[s].textBaseline||null==e[s].textBaseline?this.textCanvasCtx.textBaseline="top":this.textCanvasCtx.textBaseline=e[s].textBaseline;var l=parseInt(255*e[s].pstFontColor.fR),h=parseInt(255*e[s].pstFontColor.fG),c=parseInt(255*e[s].pstFontColor.fB),_=l<16?"0"+l.toString(16):l.toString(16),u=h<16?"0"+h.toString(16):h.toString(16),d=c<16?"0"+c.toString(16):c.toString(16);this.textCanvasCtx.fillStyle="#"+_+u+d,this.textCanvasCtx.globalAlpha=e[s].pstFontColor.fA;var p=e[s].pstStartPos.fX*this.nDrawFontWidth,m=e[s].pstStartPos.fY*this.nDrawFontHeight;this.textCanvasCtx.save(),this.textCanvasCtx.translate(p,m),this.textCanvasCtx.rotate(e[s].fRotateAngle*Math.PI/180),this.textCanvasCtx.fillText(e[s].pString,0,0),this.textCanvasCtx.restore()}if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nFontColorTexture),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,this.textCanvasCtx.canvas),0==this.nFontShaderProgram&&(this.nFontShaderProgram=this.CompileProgram("\n    attribute vec4  position;\n    attribute vec4  texCoord;\n    varying vec4  pp; \n    uniform int bCapture;\n\n    void main()\n    { \n        gl_Position.x  = position.x;\n        gl_Position.y  = position.y;\n        if(bCapture == 1)\n        {\n            gl_Position.y = -position.y;\n        }\n        gl_Position.z  = 0.1;\n        gl_Position.w  = 1.0;\n        pp = texCoord; \n    }\n","\n    varying lowp vec4 pp;\n    uniform sampler2D texture;\n\n    void main(void)\n    {\n        gl_FragColor = texture2D(texture, pp.st);\n    }\n"),this.nFontShaderProgram<=0))return G;1==this.bIsCapturing?(i=this.nCaptureWidth+4-this.nCaptureWidth%4,r=this.nCaptureHeight+4-this.nCaptureHeight%4):(i=this.canvas.width+4-this.canvas.width%4,r=this.canvas.height+4-this.canvas.height%4),this.ctx.viewport(0,0,i,r),this.ctx.enable(this.ctx.BLEND),this.ctx.blendFunc(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA),this.ctx.useProgram(this.nFontShaderProgram);var P=this.ctx.getUniformLocation(this.nFontShaderProgram,"bCapture");if(P<=0)return G;1==this.bIsCapturing?this.ctx.uniform1i(P,1):this.ctx.uniform1i(P,0),this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nFontColorTexture);var y=this.ctx.getUniformLocation(this.nFontShaderProgram,"texture");this.ctx.uniform1i(y,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer);var S=this.ctx.getAttribLocation(this.nFontShaderProgram,"position");this.ctx.enableVertexAttribArray(S),this.ctx.vertexAttribPointer(S,3,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer);var b=this.ctx.getAttribLocation(this.nFontShaderProgram,"texCoord");return this.ctx.enableVertexAttribArray(b),this.ctx.vertexAttribPointer(b,2,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.drawArrays(this.ctx.TRIANGLE_FAN,0,4),this.ctx.bindTexture(this.ctx.TEXTURE_2D,null),this.ctx.useProgram(null),this.ctx.disable(this.ctx.BLEND),1}},{key:"SR_DrawImage",value:function(e,t,i,r,a,n){if(null==this.ctx)return X;if(null==e||t<=0||i<=0||null==r||n<0||n>1)return U;if(this.nDrawImageWidth=t,this.nDrawImageHeight=i,0==this.glImagePosBuffer&&(this.glImagePosBuffer=this.ctx.createBuffer(),0==this.glImagePosBuffer))return G;if(0==this.glImageClrBuffer&&(this.glImageClrBuffer=this.ctx.createBuffer(),0==this.glImageClrBuffer))return G;if(null==this.pImageClrVertices){if(this.pImageClrVertices=new Float32Array(12),null==this.pImageClrVertices)return Y;this.pImageClrVertices[0]=0,this.pImageClrVertices[1]=0,this.pImageClrVertices[2]=0,this.pImageClrVertices[3]=1,this.pImageClrVertices[4]=1,this.pImageClrVertices[5]=0,this.pImageClrVertices[6]=1,this.pImageClrVertices[7]=0,this.pImageClrVertices[8]=0,this.pImageClrVertices[9]=1,this.pImageClrVertices[10]=1,this.pImageClrVertices[11]=1}var s={},o={};if(s.fLeft=(r.fLeft-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),s.fRight=(r.fRight-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),s.fTop=(r.fTop-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),s.fBottom=(r.fBottom-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),o.fLeft=this.fDstUseLeft+s.fLeft*(this.fDstUseRight-this.fDstUseLeft),o.fRight=this.fDstUseLeft+s.fRight*(this.fDstUseRight-this.fDstUseLeft),o.fTop=this.fDstUseTop+s.fTop*(this.fDstUseBottom-this.fDstUseTop),o.fBottom=this.fDstUseTop+s.fBottom*(this.fDstUseBottom-this.fDstUseTop),null==this.pImagePosVertices&&(this.pImagePosVertices=new Float32Array(12),null==this.pImagePosVertices))return Y;switch(this.pImagePosVertices.fill(0),this.pImagePosVertices[0]=2*o.fLeft-1,this.pImagePosVertices[1]=1-2*o.fTop,this.pImagePosVertices[2]=2*o.fLeft-1,this.pImagePosVertices[3]=1-2*o.fBottom,this.pImagePosVertices[4]=2*o.fRight-1,this.pImagePosVertices[5]=1-2*o.fTop,this.pImagePosVertices[6]=2*o.fRight-1,this.pImagePosVertices[7]=1-2*o.fTop,this.pImagePosVertices[8]=2*o.fLeft-1,this.pImagePosVertices[9]=1-2*o.fBottom,this.pImagePosVertices[10]=2*o.fRight-1,this.pImagePosVertices[11]=1-2*o.fBottom,1==this.bIsCapturing?this.ctx.viewport(0,0,this.nCaptureWidth,this.nCaptureHeight):this.ctx.viewport(0,0,this.canvas.width,this.canvas.height),this.ctx.enable(this.ctx.BLEND),this.ctx.blendFunc(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA),a){case 5:if(null==this.nImageColorTexture){if(this.nImageColorTexture=this.ctx.createTexture(),0==this.nImageColorTexture)return G;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE)}if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,this.nDrawImageWidth,this.nDrawImageHeight,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,e),0==this.nImageShaderProgram){var x=this.CompileProgram($,Q);if(x<=0)return G;this.nImageShaderProgram=x}break;case 4:if(null==this.nImageColorTexture){if(this.nImageColorTexture=this.ctx.createTexture(),0==this.nImageColorTexture)return G;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE)}if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGB,this.nDrawImageWidth,this.nDrawImageHeight,0,this.ctx.RGB,this.ctx.UNSIGNED_SHORT_5_6_5,e),0==this.nImageShaderProgram){var f=this.CompileProgram($,"\n    precision mediump float; \n    uniform sampler2D texture; \n    varying lowp vec4 pp;\n    uniform float fAlpha;\n    void main(void) \n    { \n        gl_FragColor = texture2D(texture, pp.st); \n        gl_FragColor.a *= fAlpha; \n    } \n");if(f<=0)return G;this.nImageShaderProgram=f}break;case 1:for(var l=0;l<3;l++){if(this.nImageColorTextures[l]=this.ctx.createTexture(),0==this.nImageColorTextures[l])return G;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTextures[l]),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE)}if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTextures[0]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,this.nDrawImageWidth,this.nDrawImageHeight,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,e),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTextures[1]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,this.nDrawImageWidth/2,this.nDrawImageHeight/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,e+this.nDrawImageWidth*this.nDrawImageHeight*5/4),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTextures[2]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,this.nDrawImageWidth/2,this.nDrawImageHeight/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,e+this.nDrawImageWidth*this.nDrawImageHeight),0==this.nImageShaderProgram){var h=this.CompileProgram($,"\n    precision mediump float;\n    uniform sampler2D Ytexture;\n    uniform sampler2D Utexture;\n    uniform sampler2D Vtexture;\n    uniform float fAlpha;\n    varying lowp vec4 pp;\n\n    void main(void)\n    {\n        float r, g, b, y, u, v; \n\n        y = texture2D(Ytexture, pp.st).r; \n        u = texture2D(Utexture, pp.st).r; \n        v = texture2D(Vtexture, pp.st).r; \n\n        y = 1.1643 * (y - 0.0625); \n        u = u - 0.5; \n        v = v - 0.5; \n\n        r = y + 1.5958 * v; \n        g = y - 0.39173 * u - 0.81290 * v; \n        b = y + 2.017 * u; \n\n        gl_FragColor = vec4(r, g, b, fAlpha); \n    }\n");if(h<=0)return G;this.nImageShaderProgram=h}break;case j:if(null==this.nImageColorTexture){if(this.nImageColorTexture=this.ctx.createTexture(),0==this.nImageColorTexture)return G;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE)}this.ctx.useProgram(this.videoShaderProgram),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer);var c=this.ctx.getAttribLocation(this.videoShaderProgram,"xy");if(c<0)return G;this.ctx.vertexAttribPointer(c,3,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(c),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer);var _=this.ctx.getAttribLocation(this.videoShaderProgram,"uv");if(_<0)return G;if(this.ctx.vertexAttribPointer(_,2,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(_),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.useProgram(null),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,this.nDrawImageWidth,this.nDrawImageHeight,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,e),0==this.nImageShaderProgram){var u=this.CompileProgram($,Q);if(u<=0)return G;this.nImageShaderProgram=u}break;default:return N}var d=this.nImageShaderProgram;this.ctx.useProgram(d);var p=this.ctx.getUniformLocation(this.nImageShaderProgram,"bCapture");if(p<=0)return G;1==this.bIsCapturing?this.ctx.uniform1i(p,1):this.ctx.uniform1i(p,0),this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture);var m=this.ctx.getUniformLocation(this.nImageShaderProgram,"texture");this.ctx.uniform1i(m,0),m=this.ctx.getUniformLocation(this.nImageShaderProgram,"fAlpha"),this.ctx.uniform1f(m,n),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glImagePosBuffer),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,this.pImagePosVertices,this.ctx.STATIC_DRAW);var P=this.ctx.getAttribLocation(this.nImageShaderProgram,"position");this.ctx.enableVertexAttribArray(P),this.ctx.vertexAttribPointer(P,2,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glImageClrBuffer),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,this.pImageClrVertices,this.ctx.STATIC_DRAW);var y=this.ctx.getAttribLocation(this.nImageShaderProgram,"texCoord");return this.ctx.enableVertexAttribArray(y),this.ctx.vertexAttribPointer(y,2,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.drawArrays(this.ctx.TRIANGLES,0,6),this.ctx.useProgram(null),this.ctx.disable(this.ctx.BLEND),1}},{key:"SR_AddSubPort",value:function(e){var t,i,r=xe;if(null==this.ctx)return r;if(null!=this.pFishParamManager?r=this.pFishParamManager.GetFECPort(e):e==Z.SR_DE_NULL&&(r=0),r==xe)return xe;switch(this.nFECPort=r,e){case Z.SR_DE_NULL:t=z,this.enPixelFormat==j?i="\nprecision mediump float;\nvarying highp vec2 v_uv;\nuniform sampler2D texture;\nuniform float fWndWidth;\nuniform float fWndHeight;\nuniform float fBrightness;\nuniform float fHue;\nuniform float fSaturation;\nuniform float fContrast;\nuniform float fSharpness;\nuniform int nPostProc;\nvec3 rgb2hsv(vec3 c) \n{ \n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0); \n    vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy); \n    vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx); \n    float d = q.x - min(q.w, q.y); \n    float e = 1.0e-10; \n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x); \n} \nvec3 hsv2rgb(vec3 c) \n{ \n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0); \n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www); \n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y); \n} \nvec3 sharpen() \n{ \n    vec3 sharpenColor; \n    float offWidth = 1.0 / fWndWidth; \n    float offHeight = 1.0 / fWndHeight; \n    float tempSharpness = fSharpness * 100.0; \n    vec2 uv     = v_uv; \n    sharpenColor  = (1.0 + 4.0 * tempSharpness) * texture2D(texture, uv).rgb; \n\n    uv            = v_uv + vec2(offWidth, 0); \n    sharpenColor -= tempSharpness * texture2D(texture, uv).rgb; \n\n    uv            = v_uv + vec2(-offWidth, 0); \n    sharpenColor -= tempSharpness * texture2D(texture, uv).rgb; \n\n    uv            = v_uv + vec2(0, offHeight); \n    sharpenColor -= tempSharpness * texture2D(texture, uv).rgb; \n\n    uv            = v_uv + vec2(0, -offHeight); \n    sharpenColor -= tempSharpness * texture2D(texture, uv).rgb; \n\n    return sharpenColor; \n} \nvoid main(void) \n{\n    if(1 == nPostProc)\n    {\n        vec3 fragRGB = sharpen();                    //sharpen 锐度\n        vec3 fragHSV = rgb2hsv(fragRGB); \n        fragHSV.x = fragHSV.x + fHue;                   //hue 色度\n        fragHSV.y = fragHSV.y * (fSaturation + 1.0);    //saturation 饱和度\n        fragRGB = hsv2rgb(fragHSV); \n        if (fBrightness > 0.0)                          //brightness 亮度\n        { \n            fragRGB = fragRGB + (1.0 - fragRGB) * fBrightness; \n        } \n        else \n        { \n            fragRGB = fragRGB + fragRGB * fBrightness; \n        } \n        float tempContrast = fContrast > 0.0 ? fContrast * 10.0 : fContrast; \n        fragRGB = ((fragRGB - 0.5) * max(tempContrast + 1.0, 0.0)) + 0.5;      //contrast 对比度\n        gl_FragColor = vec4(fragRGB, 1.0); \n    }\n    else\n    {\n        gl_FragColor = texture2D(texture, v_uv);\n    }\n}\n":1!=this.enPixelFormat&&3!=this.enPixelFormat||(i="\nprecision mediump float;\nvarying highp vec2 v_uv;\nuniform sampler2D Ytexture;\nuniform sampler2D Utexture;\nuniform sampler2D Vtexture;\nuniform float fWndWidth;\nuniform float fWndHeight;\nuniform float fBrightness;\nuniform float fHue;\nuniform float fSaturation;\nuniform float fContrast;\nuniform float fSharpness;\nuniform int nPostProc;\nvec3 rgb;\nvec3 yuv2rgb(float y, float u, float v)\n{\n    float r,g,b; \n    y = 1.1643 * (y - 0.0625); \n    u = u - 0.5; \n    v = v - 0.5; \n    r = y + 1.5958 * v; \n    g = y - 0.39173 * u - 0.81290 * v; \n    b = y + 2.017 * u; \n    return vec3(r, g, b);\n}\nvec3 rgb2hsv(vec3 c) \n{ \n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0); \n    vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy); \n    vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx); \n\n    float d = q.x - min(q.w, q.y); \n    float e = 1.0e-10; \n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x); \n} \n\nvec3 hsv2rgb(vec3 c) \n{ \n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0); \n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www); \n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y); \n} \n\nvec3 sharpen(vec3 c) \n{ \n    vec3 sharpenColor; \n    float sharpenColorY;\n    float sharpenColorU;\n    float sharpenColorV;\n    float offWidth  = 1.0 / fWndWidth; \n    float offHeight = 1.0 / fWndHeight; \n    float tempSharpness = fSharpness * 100.0; \n\n    sharpenColor = (1.0 + 4.0 * tempSharpness) * c;\n\n    vec2 uv       = v_uv + vec2(offWidth, 0); \n    sharpenColorY = texture2D(Ytexture, uv).r; \n    sharpenColorU = texture2D(Utexture, uv).r; \n    sharpenColorV = texture2D(Vtexture, uv).r; \n    sharpenColor -= tempSharpness *  yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n\n    uv            = v_uv + vec2(-offWidth, 0); \n    sharpenColorY = texture2D(Ytexture, uv).r;\n    sharpenColorU = texture2D(Utexture, uv).r; \n    sharpenColorV = texture2D(Vtexture, uv).r; \n    sharpenColor -= tempSharpness *  yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n\n    uv            = v_uv + vec2(0, offHeight);\n    sharpenColorY = texture2D(Ytexture, uv).r; \n    sharpenColorU = texture2D(Utexture, uv).r; \n    sharpenColorV = texture2D(Vtexture, uv).r; \n    sharpenColor -= tempSharpness * yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n\n    uv            = v_uv + vec2(0, -offHeight); \n    sharpenColorY = texture2D(Ytexture, uv).r; \n    sharpenColorU = texture2D(Utexture, uv).r; \n    sharpenColorV = texture2D(Vtexture, uv).r; \n    sharpenColor -= tempSharpness *  yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n\n    return sharpenColor; \n} \nvoid main(void)\n{\n    float y, u, v;\n    y = texture2D(Ytexture, v_uv).r;\n    u = texture2D(Utexture, v_uv).r;\n    v = texture2D(Vtexture, v_uv).r;\n    rgb = yuv2rgb(y, u, v);\n    if(1 == nPostProc)\n    {\n        vec3 fragRGB = sharpen(rgb);                    //sharpen 锐度\n        vec3 fragHSV = rgb2hsv(fragRGB); \n        fragHSV.x = fragHSV.x + fHue;                   //hue 色度\n        fragHSV.y = fragHSV.y * (fSaturation + 1.0);    //saturation 饱和度\n        fragRGB = hsv2rgb(fragHSV); \n        if (fBrightness > 0.0)                        //brightness 亮度\n        { \n            fragRGB = fragRGB + (1.0 - fragRGB) * fBrightness; \n        } \n        else \n        { \n            fragRGB = fragRGB + fragRGB * fBrightness; \n        } \n\n        float tempContrast = fContrast > 0.0 ? fContrast * 10.0 : fContrast; \n        fragRGB = ((fragRGB - 0.5) * max(tempContrast + 1.0, 0.0)) + 0.5;      //contrast 对比度\n        gl_FragColor = vec4(fragRGB, 1.0); \n    }\n    else\n    {\n        gl_FragColor = vec4(rgb, 1.0);\n    }\n}\n"),this.b3DPort=!1;break;case Z.SR_DE_FISH_ORIGINAL:t=z,i="\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;\nuniform float fRX1;\nuniform float fRX2;\nuniform float fRY1;\nuniform float fRY2;\nuniform int bBlack; \nuniform int bCut;\n\nvoid main()\n{ \n\tfloat r,g,b;\n\tvec4 origin;\n\n\tfloat  w;\n\tfloat  h;\n\tfloat  fCenterX;\n\tfloat  fCenterY;\n\tfloat  fRadius;\n\tw = 1.0;\n\th = (fRX2 - fRX1) / (fRY2 - fRY1);\n\tfCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n\tfCenterY = (fRY1 + fRY2) / 2.0 * h;\n\tfRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n\tfloat  leftCut = 0.0;\n\tfloat  rightCut = 1.0;\n\tfloat  topCut = 0.0;\n\tfloat  bottomCut = 1.0;\n\tif(bCut == 1)\n\t{\n\t\tif(fRX1 > 0.0)\n\t\t{\n\t\t\tleftCut = fRX1;\n\t\t}\n\t\tif(fRX2 < 1.0)\n\t\t{\n\t\t\trightCut = fRX2;\n\t\t}\n\t\tif(fRY1 > 0.0)\n\t\t{\n\t\t\ttopCut = fRY1;\n\t\t}\n\t\tif(fRY2 < 1.0)\n\t\t{\n\t\t\tbottomCut = fRY2;\n\t\t}\n\t}\n\torigin.s = v_uv.s * (rightCut-leftCut) + leftCut;\n\torigin.t = v_uv.t * (bottomCut-topCut) + topCut;\n\n\tr = texture2D(texture, origin.st).r; \n\tg = texture2D(texture, origin.st).g; \n\tb = texture2D(texture, origin.st).b; \n\n\tif(bBlack == 1)\n\t{\n\t\tfloat tmpX, tmpY;\n\t\ttmpX = origin.s * w; \n\t\ttmpY = origin.t * h; \n\t\tfloat d2 = (tmpX-fCenterX)*(tmpX-fCenterX) + (tmpY-fCenterY)*(tmpY-fCenterY);\n\t\tif(d2 > fRadius*fRadius)\n\t\t{\n\t\t\tr = 0.0; \n\t\t\tg = 0.0; \n\t\t\tb = 0.0; \n\t\t}\n\t}\n\n\tgl_FragColor = vec4(r ,g ,b , 1.0);\n}\n",this.b3DPort=!1;break;case Z.SR_DE_FISH_PTZ_CEILING:t=z,i="\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;\nuniform float fHAngleCos;\nuniform float fHAngleSin;\nuniform float fVAngleCos;\nuniform float fVAngleSin;\nuniform float fZoom;\n\nuniform float fRX1; \nuniform float fRX2; \nuniform float fRY1; \nuniform float fRY2; \n\nvoid main()\n{\n    float r,g,b;  \n\n    vec4 origin1;\n    vec4 origin2;\n    vec4 result;\n    float  z1;\n    float  z2;\n    float  dnew;\n\n    float  w;\n    float  h;\n    float  fCenterX;\n    float  fCenterY;\n    float  fRadius;\n    w = 1.0;\n    h = (fRX2 - fRX1) / (fRY2 - fRY1);\n    fCenterX = (fRX1 + fRX2) / 2.0 * w;    \n    fCenterY = (fRY1 + fRY2) / 2.0 * h;\n    fRadius = (fRX2 - fRX1) / 2.0 * w; \n\n    origin1.s = v_uv.s - 0.5;\n    origin1.t = 0.5 - v_uv.t;\n    z1 = fZoom ;\n\n    origin2.s = origin1.s ;\n    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);\n    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;\n\n    dnew = sqrt(origin2.s*origin2.s + origin2.t*origin2.t) ;\n    float d = sqrt(origin2.s*origin2.s + origin2.t*origin2.t + z2*z2);\n    float theta = asin(dnew/d);\n    float tmp = theta / 1.5707963 * 0.5;\n    origin2.s = tmp*origin2.s / dnew ;\n    origin2.t = tmp*origin2.t / dnew ;\n\n    result.s = ((origin2.s*fHAngleCos - origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\n    result.t = (-(origin2.s*fHAngleSin + origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\n\n    r = texture2D(texture, result.st).r; \n    g = texture2D(texture, result.st).g; \n    b = texture2D(texture, result.st).b; \n    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n    {\n        r = 0.0; \n        g = 0.0; \n        b = 0.0; \n    }\n    gl_FragColor = vec4(r ,g ,b , 1.0);\n} \n",this.b3DPort=!1;break;case Z.SR_DE_FISH_PTZ_FLOOR:t=z,i="\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;  \nuniform float fHAngleCos;  \nuniform float fHAngleSin; \nuniform float fVAngleCos;  \nuniform float fVAngleSin;  \nuniform float fZoom;\n\nuniform float fRX1; \nuniform float fRX2; \nuniform float fRY1; \nuniform float fRY2; \n\nvoid main()\n{\n    float r,g,b;\n\n    vec4 origin1;\n    vec4 origin2;\n    vec4 result;\n    float  z1;\n    float  z2;\n    float  dnew;\n\n    float  w;\n    float  h;\n    float  fCenterX;\n    float  fCenterY;\n    float  fRadius;\n    w = 1.0;\n    h = (fRX2 - fRX1) / (fRY2 - fRY1);\n    fCenterX = (fRX1 + fRX2) / 2.0 * w;     ///<Բ��ʵ������\n    fCenterY = (fRY1 + fRY2) / 2.0 * h;\n    fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<�뾶ʵ�ʳ���\n    origin1.s = v_uv.s - 0.5;\n    origin1.t = v_uv.t - 0.5;\n    z1 = fZoom ;\n\n    origin2.s = origin1.s ;\n    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);\n    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;\n\n    dnew = sqrt(origin2.s*origin2.s + origin2.t*origin2.t) ;\n    float d = sqrt(origin2.s*origin2.s + origin2.t*origin2.t + z2*z2);\n    float theta = asin(dnew/d);\n    float tmp = theta / 1.5707963 * 0.5;\n    origin2.s = tmp*origin2.s / dnew ;\n    origin2.t = tmp*origin2.t / dnew ;\n\n    result.s = ((origin2.s*fHAngleCos - origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\n    result.t = ((origin2.s*fHAngleSin + origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\n\n    r = texture2D(texture, result.st).r; \n    g = texture2D(texture, result.st).g; \n    b = texture2D(texture, result.st).b; \n    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n    {\n        r = 0.0;\n        g = 0.0; \n        b = 0.0; \n    }\n    gl_FragColor = vec4(r ,g ,b , 1.0);\n} \n",this.b3DPort=!1;break;case Z.SR_DE_FISH_PTZ_WALL:t=z,i="\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;\nuniform float fHAngleCos;\nuniform float fHAngleSin;  \nuniform float fVAngleCos;  \nuniform float fVAngleSin;  \nuniform float fZoom;\n\nuniform float fRX1; \nuniform float fRX2; \nuniform float fRY1; \nuniform float fRY2; \n\nvoid main()\n{\n    float r,g,b;  \n\n    vec4 origin1;\n    vec4 origin2;\n    vec4 origin3;\n    vec4 result;\n    float  z1;\n    float  z2;\n    float  z3;\n    float  dnew;\n\n    float  w;\n    float  h;\n    float  fCenterX;\n    float  fCenterY;\n    float  fRadius;\n    w = 1.0;\n    h = (fRX2 - fRX1) / (fRY2 - fRY1);\n    fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<Բ��ʵ������\n    fCenterY = (fRY1 + fRY2) / 2.0 * h;\n    fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<�뾶ʵ�ʳ���\n\n    origin1.s = v_uv.s - 0.5;\n    origin1.t = v_uv.t - 0.5;\n    z1 = fZoom ;\n\n    origin2.s = origin1.s ;\n    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);\n    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;\n\n    origin3.s = origin2.s*fHAngleCos + z2*fHAngleSin ;\n    origin3.t = origin2.y;\n    z3 = z2*fHAngleCos - origin2.x*fHAngleSin;\n\n    dnew = sqrt(origin3.s*origin3.s + origin3.t*origin3.t) ;\n    float d = sqrt(origin3.s*origin3.s + origin3.t*origin3.t + z3*z3);\n    float theta = asin(dnew/d);\n    float tmp = theta / 1.5707963 * 0.5;\n    result.s = (tmp*origin3.s / dnew * fRadius * 2.0 + fCenterX)/w;\n    result.t = (tmp*origin3.t / dnew * fRadius * 2.0 + fCenterY)/h;\n\n    r = texture2D(texture, result.st).r; \n    g = texture2D(texture, result.st).g; \n    b = texture2D(texture, result.st).b; \n    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n    {\n        r = 0.0; \n        g = 0.0; \n        b = 0.0; \n    }\n    gl_FragColor = vec4(r ,g ,b , 1.0);\n} \n",this.b3DPort=!1;break;case Z.SR_DE_FISH_PANORAMA_CEILING_360:t=z,i="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1;\n    uniform float fRY2;\n    \n    void main()\n    {\n    \n        float r,g,b; \n    \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n            float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;  ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = v_uv.s;\n        origin.t = (bottomCut - topCut) * v_uv.t + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r;\n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0;\n        }\n        gl_FragColor = vec4(r, g, b, 1.0);\n    }\n",this.b3DPort=!1;break;case Z.SR_DE_FISH_PANORAMA_CEILING_180:t=z,i="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1; \n    uniform float fRX2; \n    uniform float fRY1; \n    uniform float fRY2; \n    \n    void main()\n    {\n        float r,g,b;  \n    \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        vec4 newpp;  ///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\n        if (v_uv.t  <= 0.5)\n        {\n            newpp.s =  v_uv.s / 2.0 + 0.5;\n            newpp.t =  v_uv.t * 2.0;\n        }\n        else\n        {\n            newpp.s =  v_uv.s / 2.0;\n            newpp.t =  (v_uv.t - 0.5) * 2.0;\n        }\n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;     ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n            float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = newpp.s;\n        origin.t = (bottomCut - topCut) * newpp.t + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r;\n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0;\n            g = 0.0;\n            b = 0.0;\n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    }\n",this.b3DPort=!1;break;case Z.SR_DE_FISH_PANORAMA_FLOOR_360:t=z,i="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1;\n    uniform float fRY2;\n    \n    void main()\n    {\n        float r,g,b;  \n    \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n            float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                   fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = 1.0 - v_uv.s;\n        origin.t = (bottomCut - topCut) * (1.0 - v_uv.t) + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r;\n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0; \n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    }\n",this.b3DPort=!1;break;case Z.SR_DE_FISH_PANORAMA_FLOOR_180:t=z,i="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1;\n    uniform float fRY2;\n\n    void main()\n    {\n        float r,g,b;  \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        vec4 newpp;  ///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\n        if (v_uv.t  <= 0.5) \n        {\n            newpp.s =  v_uv.s / 2.0;\n            newpp.t =  v_uv.t * 2.0;\n        }\n        else\n        {\n            newpp.s =  v_uv.s / 2.0 + 0.5;\n            newpp.t =  (v_uv.t - 0.5) * 2.0;\n        }\n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n             float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = 1.0 - newpp.s;\n        origin.t = (bottomCut - topCut) * (1.0 - newpp.t) + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r; \n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0; \n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    } \n",this.b3DPort=!1;break;case Z.SR_DE_FISH_PANORAMA_WALL:t=z,i="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1; \n    uniform float fRY2; \n    \n    void main()\n    {\n        float r,g,b;\n    \n        vec4 origin;\n        vec4 result;\n        float  d;\n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;     ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n        float  defaultTopCut = 0.1;\n        float  defaultBottomCut = 0.9;\n        float  leftCut = 0.0;    ///<当图像中圆不完整时需要切掉无图像部分,即使图像完整,为了效果,也要切掉上下固定的一部分\n        float  rightCut = 1.0;\n        float  topCut = defaultTopCut;\n        float  bottomCut = defaultBottomCut;\n        if(fRX1 < 0.0)\n        {\n            float tmp;\n            tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            leftCut = tmp;\n        }\n        if(fRX2 > 1.0)\n        {\n            float tmp;\n            tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            rightCut = 1.0 - tmp;\n        }\n        if(fRY1 < 0.0)\n        {\n            float tmp;\n            tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            if(tmp > defaultTopCut)\n                topCut = tmp;\n            else\n                topCut = defaultTopCut;\n        }\n        if(fRY2 > 1.0)\n        {\n            float tmp;\n            tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            if(tmp > 1.0 - defaultBottomCut)\n                bottomCut = 1.0 - tmp;\n            else\n                bottomCut = defaultBottomCut;\n        }\n        origin.s = v_uv.s * (rightCut-leftCut) + leftCut;\n        origin.t = v_uv.t * (bottomCut-topCut) + topCut;\n        float tmpx = origin.s * 2.0 * fRadius + fCenterX - fRadius; ///<纹理坐标转化为原图上的实际坐标\n        float tmpy = origin.t * 2.0 * fRadius + fCenterY - fRadius;\n        d = sqrt(fRadius*fRadius - (tmpy-fCenterY)*(tmpy-fCenterY));\n        result.s = ((tmpx-fCenterX) * d / fRadius + fCenterX) / w;\n        result.t = tmpy / h;\n    \n        r = texture2D(texture, result.st).r; \n        g = texture2D(texture, result.st).g; \n        b = texture2D(texture, result.st).b; \n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0; \n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    }\n",this.b3DPort=!1;break;case Z.SR_DE_FISH_SEMISPHERE:case Z.SR_DE_FISH_CYLINDER_CEILING:case Z.SR_DE_FISH_CYLINDER_FLOOR:case Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:e==Z.SR_DE_FISH_SEMISPHERE&&(this.bCullBack=!0),t="\n    attribute vec4 xy;\n    attribute vec2 uv;\n    varying highp vec2 v_uv;\n    uniform int bCapture;\n\n    uniform mat4 matProj;\n    uniform mat4 matView;\n    void main(void) {\n        gl_Position = matProj * matView * xy;\n        v_uv = uv;\n        if(bCapture == 1)\n        {\n          v_uv.y = 1.0 - uv.y;\n        }\n    }\n",i="\n    varying highp vec2 v_uv;\n    uniform sampler2D texture;\n    void main(void) {\n        gl_FragColor = texture2D(texture, v_uv);\n    }\n",this.b3DPort=!0;break;default:return N}var a=this.CompileProgram(t,i);if(a<=0)return G;this.videoShaderProgram=a;var n=null,s=null,o=1;if(0==this.b3DPort)n=new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0]),s=new Float32Array([0,1,0,0,1,0,1,1]);else{var x={},f=!1;if(null==this.pFishParamManager)return X;for(var l=0;l<ee;++l)if(l!=r&&1==this.pFishParamManager.GetRenderParam(l,x)){f=!0;break}var h=0,c=1,_=0,u=1;if(1==f&&(h=x.fRXLeft,c=x.fRXRight,_=x.fRYTop,u=x.fRYBottom),e==Z.SR_DE_FISH_SEMISPHERE)o=this._CreateSemiSphere(h,c,_,u),n=this.pSemiSpherePos,s=this.pSemiSphereTex;else if(e==Z.SR_DE_FISH_CYLINDER_CEILING||e==Z.SR_DE_FISH_CYLINDER_FLOOR)o=this._CreateCylinder(e,h,c,_,u,2,2),n=this.pCylinderPos,s=this.pCylinderTex;else{if(e!=Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL&&e!=Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL)return N;0==f?Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==e?(h=.05,c=.95,_=-.3,u=1.3):Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL==e&&(h=-.16,c=1.16,_=.005,u=.995):Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==e?(x.fRYTop>0||x.fRYBottom<1)&&(h=.05,c=.95,_=-.3,u=1.3):Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL==e&&(x.fRXLeft>0||x.fRXRight<1)&&(h=-.16,c=1.16,_=.005,u=.995),o=this._CreateArcSphere(e,h,c,_,u),n=this.pArcSpherePos,s=this.pArcSphereTex}if(1!=o)return o;var d={};if(1!=(o=this.pFishParamManager.GetFishParam(this.nFECPort,d)))return o;if(d.nFishParamType=1,d.fRXLeft=h,d.fRXRight=c,d.fRYTop=_,d.fRYBottom=u,this.pFishParamManager.SetFishParam(this.nFECPort,d),1!=o)return o}if(null==n||null==s)return N;var p=this.ctx.createBuffer();this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,p),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,n,this.ctx.STATIC_DRAW),this.vertexPosBuffer=p;var m=this.ctx.createBuffer();return this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,m),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,s,this.ctx.STATIC_DRAW),this.texturePosBuffer=m,this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),0==this.b3DPort&&(n=null,s=null),1!=(o=this.InitCamera(e))?o:(this.enDisplayEffect=e,this.nFECPort)}},{key:"SR_DelSubPort",value:function(e){return null==this.ctx?X:(null!=this.pFishParamManager&&this.nFECPort==e&&this.pFishParamManager.FreeFECPort(this.nFECPort),this.enDisplayEffect=Z.SR_DE_NULL,0!=this.videoShaderProgram&&null!=this.ctx&&(this.ctx.deleteProgram(this.videoShaderProgram),this.videoShaderProgram=0),0!=this.vertexPosBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.vertexPosBuffer),this.vertexPosBuffer=0),0!=this.texturePosBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.texturePosBuffer),this.texturePosBuffer=0),this.nMaxPointNum=0,this.pLinePosVertices=null,this.pLineClrVertices=null,0!=this.glLinePosBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.glLinePosBuffer),this.glLinePosBuffer=0),0!=this.glLineTexBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.glLineTexBuffer),this.glLineTexBuffer=0),this.nLineTriangleNum=0,0!=this.nLineShaderProgram&&null!=this.ctx&&(this.ctx.deleteProgram(this.nLineShaderProgram),this.nLineShaderProgram=0),this.pFillBlockPosVertices=null,this.pFillBlockClrVertices=null,this.nMaxFillBlockTriNum=0,0!=this.glBlockPosBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.glBlockPosBuffer),this.glBlockPosBuffer=0),0!=this.glBlockClrBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.glBlockClrBuffer),this.glBlockClrBuffer=0),0!=this.nBlockShaderProgram&&null!=this.ctx&&(this.ctx.deleteProgram(this.nBlockShaderProgram),this.nBlockShaderProgram=0),this.nDrawFontWidth=0,this.nDrawFontHeight=0,0!=this.nFontColorTexture&&null!=this.ctx&&(this.ctx.deleteTexture(this.nFontColorTexture),this.nFontColorTexture=0),this.pFontColorBuffer=0,0!=this.nFontShaderProgram&&null!=this.ctx&&(this.ctx.deleteProgram(this.nFontShaderProgram),this.nFontShaderProgram=0),0!=this.nCaptureRTTex&&(this.ctx.deleteTexture(this.nCaptureRTTex),this.nCaptureRTTex=0),0!=this.nCaptureFBO&&(this.ctx.deleteFramebuffer(this.nCaptureFBO),this.nCaptureFBO=0),0!=this.nCaptureDepthbuffer&&(this.ctx.deleteRenderbuffer(this.nCaptureDepthbuffer),this.nCaptureDepthbuffer=0),this.bCaptureResInit=!1,this.pSemiSpherePos=null,this.pSemiSphereTex=null,this.nSemiSpherePosNum=0,this.nSemiSpherePosSize=0,this.nSemiSphereTexSize=0,this.pCylinderPos=null,this.pCylinderTex=null,this.nCylinderPosNum=0,this.nCylinderPosSize=0,this.nCylinderTexSize=0,this.fCylinderHeight=0,this.fCylinderRadius=0,this.pArcSpherePos=null,this.pArcSphereTex=null,this.nArcSpherePosNum=0,this.nArcSpherePosSize=0,this.nArcSphereTexSize=0,this.b3DPort=!1,this.pCamera=null,this.fRotateX=0,this.fRotateY=0,this.fScale=0,this.pfuncCBIn=null,this.pfuncCBOut=null,this.pUserIn=null,this.pUserOut=null,this.ctx.disable(this.ctx.CULL_FACE),this.ctx.disable(this.ctx.DEPTH_TEST),1)}},{key:"SR_GetFishParam",value:function(e){return null==e?U:null==this.pFishParamManager?X:this.pFishParamManager.GetFishParam(this.nFECPort,e)}},{key:"SR_SetFishParam",value:function(e){return null==e?U:null==this.pFishParamManager?X:this.pFishParamManager.SetFishParam(this.nFECPort,e)}},{key:"SR_SetDisplayRect",value:function(e,t,i,r,a){if(null==this.ctx)return X;var n=e,s=t,o=e+i,x=t+r,f=null,l=null;switch(a){case 1:if(this.frameDisplayWidth>0&&this.frameDisplayHeight>0){if(this.fSrcUseLeft=n/this.frameDisplayWidth,this.fSrcUseLeft<0?this.fSrcUseLeft=0:this.fSrcUseLeft>1&&(this.fSrcUseLeft=1),this.fSrcUseTop=s/this.frameDisplayHeight,this.fSrcUseTop<0?this.fSrcUseTop=0:this.fSrcUseTop>1&&(this.fSrcUseTop=1),this.fSrcUseRight=o/this.frameDisplayWidth,this.fSrcUseRight<0?this.fSrcUseRight=0:this.fSrcUseRight>1&&(this.fSrcUseRight=1),this.fSrcUseBottom=x/this.frameDisplayHeight,this.fSrcUseBottom<0?this.fSrcUseBottom=0:this.fSrcUseBottom>1&&(this.fSrcUseBottom=1),this.fSrcUseLeft>=this.fSrcUseRight||this.fSrcUseTop>=this.fSrcUseBottom)return U;f=new Float32Array([this.fSrcUseLeft,this.fSrcUseBottom,this.fSrcUseLeft,this.fSrcUseTop,this.fSrcUseRight,this.fSrcUseTop,this.fSrcUseRight,this.fSrcUseBottom])}else f=new Float32Array([0,1,0,0,1,0,1,1]);this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer),this.ctx.bufferSubData(this.ctx.ARRAY_BUFFER,0,f),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),f=null;break;case 2:if(this.frameDisplayWidth>0&&this.frameDisplayHeight>0){if(this.fDstUseLeft=n/this.frameDisplayWidth,this.fDstUseLeft<0?this.fDstUseLeft=0:this.fDstUseLeft>1&&(this.fDstUseLeft=1),this.fDstUseTop=s/this.frameDisplayHeight,this.fDstUseTop<0?this.fDstUseTop=0:this.fDstUseTop>1&&(this.fDstUseTop=1),this.fDstUseRight=o/this.frameDisplayWidth,this.fDstUseRight<0?this.fDstUseRight=0:this.fDstUseRight>1&&(this.fDstUseRight=1),this.fDstUseBottom=x/this.frameDisplayHeight,this.fDstUseBottom<0?this.fDstUseBottom=0:this.fDstUseBottom>1&&(this.fDstUseBottom=1),this.fDstUseLeft>=this.fDstUseRight||this.fDstUseTop>=this.fDstUseBottom)return U;(l=new Float32Array(12))[0]=2*this.fDstUseLeft-1,l[1]=1-2*this.fDstUseBottom,l[2]=0,l[3]=2*this.fDstUseLeft-1,l[4]=1-2*this.fDstUseTop,l[5]=0,l[6]=2*this.fDstUseRight-1,l[7]=1-2*this.fDstUseTop,l[8]=0,l[9]=2*this.fDstUseRight-1,l[10]=1-2*this.fDstUseBottom,l[11]=0,this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer),this.ctx.bufferSubData(this.ctx.ARRAY_BUFFER,0,l),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),l=null}break;default:return N}return 1}},{key:"SR_Destroy",value:function(){if(null==this.ctx)return X;this.frameDisplayWidth=0,this.frameDisplayHeight=0,this.pFrameData=null;for(var e=0;e<this.nTextureNum;e++)0!=this.nSurfaceTexture[e]&&null!=this.ctx&&(this.ctx.deleteTexture(this.nSurfaceTexture[e]),this.nSurfaceTexture[e]=0);return this.SR_DelSubPort(this.nFECPort),this.ctx.getExtension("WEBGL_lose_context").loseContext(),this.ctx=null,this.onlySupportedWebGL1=!1,this.bAntialias=!1,this.bRecreateTex=!0,this.pFishParamManager=null,1}},{key:"SR_SetCanvasSize",value:function(e,t){return this.canvas.width=e,this.canvas.height=t,1}},{key:"SR_GetCanvasSize",value:function(){return console.log("canvas width:"+this.canvas.width+",height:"+this.canvas.height),1}},{key:"SR_SetAntialias",value:function(e){return 1==this.onlySupportedWebGL1?N:(this.bAntialias!=e&&(this.bRecreateTex=!0,this.bAntialias=e),1)}},{key:"SR_SetPTZDisplayMode",value:function(e){return null==this.pFishParamManager?X:this.pFishParamManager.SetPTZDisplayMode(e)}},{key:"SR_SetFishParamManager",value:function(e){return null!=this.pFishParamManager?N:(this.pFishParamManager=e,1)}},{key:"_CreateSemiSphere",value:function(e,t,i,r){if(null!=this.pSemiSpherePos||null!=this.pSemiSphereTex)return X;this.pSemiSpherePos=new Float32Array(43200),this.pSemiSphereTex=new Float32Array(28800);for(var a=(t-e)/(r-i),n=(t-e)/2*1,s=6.2831852/60,o=.0392699075,x=0,f=0,l=0,h=0;h<60;++h)for(var c=0;c<40;++c){var _=h*s;0==h&&(x=_);var u=59==h?x:(h+1)*s,d=-c*o,p=-(c+1)*o,m=void 0,P=void 0;this.pSemiSpherePos[f]=-1*Math.cos(d)*Math.cos(_),this.pSemiSpherePos[f+1]=1*Math.sin(d),this.pSemiSpherePos[f+2]=-1*Math.cos(d)*Math.sin(_),P=.5-.5*(1+d/1.5707963)*Math.sin(_),m=.5-.5*(1+d/1.5707963)*Math.cos(_),this.pSemiSphereTex[l++]=(2*m*n+1*e)/1,this.pSemiSphereTex[l++]=(2*P*n+i*a)/a,f+=3,this.pSemiSpherePos[f]=-1*Math.cos(p)*Math.cos(_),this.pSemiSpherePos[f+1]=1*Math.sin(p),this.pSemiSpherePos[f+2]=-1*Math.cos(p)*Math.sin(_),P=.5-.5*(1+p/1.5707963)*Math.sin(_),m=.5-.5*(1+p/1.5707963)*Math.cos(_),this.pSemiSphereTex[l++]=(2*m*n+1*e)/1,this.pSemiSphereTex[l++]=(2*P*n+i*a)/a,f+=3,this.pSemiSpherePos[f]=-1*Math.cos(d)*Math.cos(u),this.pSemiSpherePos[f+1]=1*Math.sin(d),this.pSemiSpherePos[f+2]=-1*Math.cos(d)*Math.sin(u),P=.5-.5*(1+d/1.5707963)*Math.sin(u),m=.5-.5*(1+d/1.5707963)*Math.cos(u),this.pSemiSphereTex[l++]=(2*m*n+1*e)/1,this.pSemiSphereTex[l++]=(2*P*n+i*a)/a,f+=3,this.pSemiSpherePos[f]=-1*Math.cos(d)*Math.cos(u),this.pSemiSpherePos[f+1]=1*Math.sin(d),this.pSemiSpherePos[f+2]=-1*Math.cos(d)*Math.sin(u),P=.5-.5*(1+d/1.5707963)*Math.sin(u),m=.5-.5*(1+d/1.5707963)*Math.cos(u),this.pSemiSphereTex[l++]=(2*m*n+1*e)/1,this.pSemiSphereTex[l++]=(2*P*n+i*a)/a,f+=3,this.pSemiSpherePos[f]=-1*Math.cos(p)*Math.cos(_),this.pSemiSpherePos[f+1]=1*Math.sin(p),this.pSemiSpherePos[f+2]=-1*Math.cos(p)*Math.sin(_),P=.5-.5*(1+p/1.5707963)*Math.sin(_),m=.5-.5*(1+p/1.5707963)*Math.cos(_),this.pSemiSphereTex[l++]=(2*m*n+1*e)/1,this.pSemiSphereTex[l++]=(2*P*n+i*a)/a,f+=3,this.pSemiSpherePos[f]=-1*Math.cos(p)*Math.cos(u),this.pSemiSpherePos[f+1]=1*Math.sin(p),this.pSemiSpherePos[f+2]=-1*Math.cos(p)*Math.sin(u),P=.5-.5*(1+p/1.5707963)*Math.sin(u),m=.5-.5*(1+p/1.5707963)*Math.cos(u),this.pSemiSphereTex[l++]=(2*m*n+1*e)/1,this.pSemiSphereTex[l++]=(2*P*n+i*a)/a,f+=3}return this.nSemiSpherePosNum=f/3,this.nSemiSpherePosSize=3,this.nSemiSphereTexSize=2,1}},{key:"_CreateCylinder",value:function(e,t,i,r,a,n,s){if(null!=this.pCylinderPos||null!=this.pCylinderTex)return X;if(Math.abs(n-0)<re)this.fCylinderHeight=2;else{if(n<.5||n>6)return U;this.fCylinderHeight=n}if(Math.abs(s-0)<re)this.fCylinderRadius=e==Z.SR_DE_FISH_CYLINDER_FLOOR||e==Z.SR_DE_FISH_CYLINDER_CEILING?2:1;else{if(s<.5||s>4)return U;this.fCylinderRadius=s}if(this.pCylinderPos=new Float32Array(43200),this.pCylinderTex=new Float32Array(28800),null==this.pCylinderPos||null==this.pCylinderTex)return this.pCylinderPos=null,this.pCylinderTex=null,Y;for(var o=(i-t)/(a-r),x=(i-t)/2*1,f=6.2831852/60,l=this.fCylinderHeight/40,h=0,c=0,_=0;_<60;++_)for(var u=0;u<40;++u){var d=_*f,p=(_+1)*f,m=void 0,P=void 0;this.pCylinderPos[h]=-this.fCylinderRadius*Math.sin(d),this.pCylinderPos[h+1]=this.fCylinderHeight/2-u*l,this.pCylinderPos[h+2]=-this.fCylinderRadius*Math.cos(d),Z.SR_DE_FISH_CYLINDER_FLOOR==e||Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*u)*Math.sin(d),P=.5+(.1+.01*u)*Math.cos(d)):(m=.5-(.5-.01*u)*Math.sin(d),P=.5+(.5-.01*u)*Math.cos(d)),this.pCylinderTex[c++]=(2*m*x+1*t)/1,this.pCylinderTex[c++]=(2*P*x+r*o)/o,h+=3,this.pCylinderPos[h]=-this.fCylinderRadius*Math.sin(d),this.pCylinderPos[h+1]=this.fCylinderHeight/2-(u+1)*l,this.pCylinderPos[h+2]=-this.fCylinderRadius*Math.cos(d),Z.SR_DE_FISH_CYLINDER_FLOOR==e||Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*(u+1))*Math.sin(d),P=.5+(.1+.01*(u+1))*Math.cos(d)):(m=.5-(.5-.01*(u+1))*Math.sin(d),P=.5+(.5-.01*(u+1))*Math.cos(d)),this.pCylinderTex[c++]=(2*m*x+1*t)/1,this.pCylinderTex[c++]=(2*P*x+r*o)/o,h+=3,this.pCylinderPos[h]=-this.fCylinderRadius*Math.sin(p),this.pCylinderPos[h+1]=this.fCylinderHeight/2-u*l,this.pCylinderPos[h+2]=-this.fCylinderRadius*Math.cos(p),Z.SR_DE_FISH_CYLINDER_FLOOR==e||Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*u)*Math.sin(p),P=.5+(.1+.01*u)*Math.cos(p)):(m=.5-(.5-.01*u)*Math.sin(p),P=.5+(.5-.01*u)*Math.cos(p)),this.pCylinderTex[c++]=(2*m*x+1*t)/1,this.pCylinderTex[c++]=(2*P*x+r*o)/o,h+=3,this.pCylinderPos[h]=-this.fCylinderRadius*Math.sin(p),this.pCylinderPos[h+1]=this.fCylinderHeight/2-u*l,this.pCylinderPos[h+2]=-this.fCylinderRadius*Math.cos(p),Z.SR_DE_FISH_CYLINDER_FLOOR==e||Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*u)*Math.sin(p),P=.5+(.1+.01*u)*Math.cos(p)):(m=.5-(.5-.01*u)*Math.sin(p),P=.5+(.5-.01*u)*Math.cos(p)),this.pCylinderTex[c++]=(2*m*x+1*t)/1,this.pCylinderTex[c++]=(2*P*x+r*o)/o,h+=3,this.pCylinderPos[h]=-this.fCylinderRadius*Math.sin(d),this.pCylinderPos[h+1]=this.fCylinderHeight/2-(u+1)*l,this.pCylinderPos[h+2]=-this.fCylinderRadius*Math.cos(d),Z.SR_DE_FISH_CYLINDER_FLOOR==e||Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*(u+1))*Math.sin(d),P=.5+(.1+.01*(u+1))*Math.cos(d)):(m=.5-(.5-.01*(u+1))*Math.sin(d),P=.5+(.5-.01*(u+1))*Math.cos(d)),this.pCylinderTex[c++]=(2*m*x+1*t)/1,this.pCylinderTex[c++]=(2*P*x+r*o)/o,h+=3,this.pCylinderPos[h]=-this.fCylinderRadius*Math.sin(p),this.pCylinderPos[h+1]=this.fCylinderHeight/2-(u+1)*l,this.pCylinderPos[h+2]=-this.fCylinderRadius*Math.cos(p),Z.SR_DE_FISH_CYLINDER_FLOOR==e||Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*(u+1))*Math.sin(p),P=.5+(.1+.01*(u+1))*Math.cos(p)):(m=.5-(.5-.01*(u+1))*Math.sin(p),P=.5+(.5-.01*(u+1))*Math.cos(p)),this.pCylinderTex[c++]=(2*m*x+1*t)/1,this.pCylinderTex[c++]=(2*P*x+r*o)/o,h+=3}return this.nCylinderPosNum=h/3,this.nCylinderPosSize=3,this.nCylinderTexSize=2,1}},{key:"_CreateArcSphere",value:function(e,t,i,r,a){if(null!=this.pArcSpherePos||null!=this.pArcSphereTex)return X;if(e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL){if(r>0||a<1)return SR_ERR_PARAM}else{if(e!=Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL)return N;if(t>0||i<1)return SR_ERR_PARAM}this.fImageWidth=1,this.fImageHeight=(i-t)/(a-r),this.fTexCenterX=(t+i)/2*this.fImageWidth,this.fTexCenterY=(r+a)/2*this.fImageHeight,this.fTexRadius=(i-t)/2*this.fImageWidth;if(null==this.pArcSphereTex&&(this.pArcSphereTex=new Float32Array(14688),null==this.pArcSphereTex))return Y;if(null==this.pArcSpherePos&&(this.pArcSpherePos=new Float32Array(22032),null==this.pArcSpherePos))return Y;var n=new Float32Array(64);if(null==n)return Y;var s=1;if(e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?s=this._ComputeLatitudeHorizontal(n,25,40,1):e==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&(s=this._ComputeLatitudeVertical(n,25,40,1)),1!=s)return this.pArcSpherePos=null,this.pArcSphereTex=null,s;this.fFirstLatitude=n[12],this.fLastLatitude=n[51];var o=0,x=0,f=new Float32Array(5);if(null==f)return this.pArcSpherePos=null,this.pArcSphereTex=null,Y;for(var l=ae/24,h=-12;h<12;++h)for(var c=h<0?-h:h,_=h<0?c:c+1,u=h<0?64-2*(c-1)-2:64-2*c-2,d=0;d<u;++d,++_)e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-l*h,n[_],f):e==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-l*h,n[_],f),this.pArcSpherePos[o]=f[0],this.pArcSpherePos[o+1]=f[1],this.pArcSpherePos[o+2]=f[2],this.pArcSphereTex[x++]=f[3],this.pArcSphereTex[x++]=f[4],o+=3,e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-l*(h+1),n[_],f):e==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-l*(h+1),n[_],f),this.pArcSpherePos[o]=f[0],this.pArcSpherePos[o+1]=f[1],this.pArcSpherePos[o+2]=f[2],this.pArcSphereTex[x++]=f[3],this.pArcSphereTex[x++]=f[4],o+=3,h>=0&&0==d?e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-l*h,n[_-1],f):e==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-l*h,n[_-1],f):e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-l*(h+1),n[_-1],f):e==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-l*(h+1),n[_-1],f),this.pArcSpherePos[o]=f[0],this.pArcSpherePos[o+1]=f[1],this.pArcSpherePos[o+2]=f[2],this.pArcSphereTex[x++]=f[3],this.pArcSphereTex[x++]=f[4],o+=3,e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-l*(h+1),n[_],f):e==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-l*(h+1),n[_],f),this.pArcSpherePos[o]=f[0],this.pArcSpherePos[o+1]=f[1],this.pArcSpherePos[o+2]=f[2],this.pArcSphereTex[x++]=f[3],this.pArcSphereTex[x++]=f[4],o+=3,e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-l*h,n[_],f):e==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-l*h,n[_],f),this.pArcSpherePos[o]=f[0],this.pArcSpherePos[o+1]=f[1],this.pArcSpherePos[o+2]=f[2],this.pArcSphereTex[x++]=f[3],this.pArcSphereTex[x++]=f[4],o+=3,h<0&&d==u-1?e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-l*(h+1),n[_+1],f):e==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-l*(h+1),n[_+1],f):e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-l*h,n[_+1],f):e==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-l*h,n[_+1],f),this.pArcSpherePos[o]=f[0],this.pArcSpherePos[o+1]=f[1],this.pArcSpherePos[o+2]=f[2],this.pArcSphereTex[x++]=f[3],this.pArcSphereTex[x++]=f[4],o+=3;return this.nArcSpherePosNum=o/3,this.nArcSpherePosSize=3,this.nArcSphereTexSize=2,n=null,f=null,1}},{key:"_ComputeIntersectionOfPlaneAndLongtitude",value:function(e,t,i){if(null==e)return U;var r,a=e[1]*i,n=e[2]*i*Math.sin(t),s=-e[3],o=0;if(e[1]>0){var x=a*a*s*s-(a*a+n*n)*(s*s-n*n);o=(-a*s-Math.sqrt(x))/(a*a+n*n),x=n*n*s*s-(a*a+n*n)*(s*s-a*a)}if(e[1]<0){var f=a*a*s*s-(a*a+n*n)*(s*s-n*n);o=(-a*s+Math.sqrt(f))/(a*a+n*n),f=n*n*s*s-(a*a+n*n)*(s*s-a*a)}return r=-i*o,Math.asin(r/i)}},{key:"_ComputeLatitudeHorizontal",value:function(e,t,i,r){if(null==e)return U;var a=0,n=(this.fTexCenterY,ae/(t-1)),s=ae*this.fTexCenterY/(2*this.fTexRadius),o=Math.asin(this.fTexCenterY/this.fTexRadius),x=Math.atan(Math.cos(s)/(Math.sin(s)-Math.sin(o))),f=new Float32Array(4);f[0]=0,f[1]=Math.sin(x),f[2]=Math.cos(x),f[3]=-r*Math.sin(x)*Math.sin(o),e[a++]=s;for(var l=1;l<=(t-3)/2;++l){var h=this._ComputeIntersectionOfPlaneAndLongtitude(f,1.5707963-n*l,r);e[a++]=h}for(var c=-Math.asin((this.fImageHeight-this.fTexCenterY)/this.fTexRadius),_=o,u=(_-c)/(i-1),d=0;d<i;++d)e[a++]=_-d*u;var p=c,m=ae*(this.fTexCenterY-this.fImageHeight)/(2*this.fTexRadius);x=Math.atan(Math.cos(m)/(Math.sin(p)-Math.sin(m)));var P=new Float32Array(4);P[0]=0,P[1]=-Math.sin(x),P[2]=Math.cos(x),P[3]=r*Math.sin(x)*Math.sin(p);for(var y=1;y<=(t-3)/2;++y){var S=this._ComputeIntersectionOfPlaneAndLongtitude(P,n*y,r);e[a++]=S}return e[a++]=m,f=null,P=null,1}},{key:"_ComputeVertexAndTexturePosHorizontal",value:function(e,t,i,r){if(null==r)return U;r[2]=-e*Math.cos(i)*Math.sin(t),r[0]=e*Math.cos(i)*Math.cos(t),r[1]=e*Math.sin(i);var a,n=-Math.asin(-r[2]/e)/ae;a=i>=0?Math.acos(r[0]/Math.sqrt(r[0]*r[0]+r[1]*r[1])):6.2831852-Math.acos(r[0]/Math.sqrt(r[0]*r[0]+r[1]*r[1]));var s=this.fTexCenterX-this.fTexRadius,o=this.fTexRadius-this.fTexCenterY;return r[3]=(Math.cos(a)*this.fTexRadius*(1+2*n)+this.fTexRadius+s)/this.fImageWidth,r[4]=(Math.sin(a)*this.fTexRadius*(-1-2*n)+this.fTexRadius-o)/this.fImageHeight,1}},{key:"_ComputeLatitudeVertical",value:function(e,t,i,r){if(null==e)return SR_ERR_PARAM;var a=0,n=ae/(t-1),s=ae*this.fTexCenterX/(2*this.fTexRadius),o=Math.asin(this.fTexCenterX/this.fTexRadius),x=Math.atan(Math.cos(s)/(Math.sin(s)-Math.sin(o))),f=new Float32Array(4);f[0]=0,f[1]=Math.sin(x),f[2]=Math.cos(x),f[3]=-r*Math.sin(x)*Math.sin(o),e[a++]=s;for(var l=1;l<=(t-3)/2;++l){var h=this._ComputeIntersectionOfPlaneAndLongtitude(f,1.5707963-n*l,r);e[a++]=h}for(var c=-Math.asin((this.fImageWidth-this.fTexCenterX)/this.fTexRadius),_=o,u=(_-c)/(i-1),d=0;d<i;++d)e[a++]=_-d*u;var p=c,m=ae*(this.fTexCenterX-this.fImageWidth)/(2*this.fTexRadius);x=Math.atan(Math.cos(m)/(Math.sin(p)-Math.sin(m)));var P=new Float32Array(4);P[0]=0,P[1]=-Math.sin(x),P[2]=Math.cos(x),P[3]=r*Math.sin(x)*Math.sin(p);for(var y=1;y<=(t-3)/2;++y){var S=this._ComputeIntersectionOfPlaneAndLongtitude(P,n*y,r);e[a++]=S}return e[a++]=m,f=null,P=null,1}},{key:"_ComputeVertexAndTexturePosVertical",value:function(e,t,i,r){if(null==r)return SR_ERR_PARAM;r[2]=-e*Math.cos(i)*Math.sin(t),r[1]=e*Math.cos(i)*Math.cos(t),r[0]=-e*Math.sin(i);var a,n=-Math.asin(-r[2]/e)/ae;a=t<=1.5707963?Math.acos(r[0]/Math.sqrt(r[0]*r[0]+r[1]*r[1])):6.2831852-Math.acos(r[0]/Math.sqrt(r[0]*r[0]+r[1]*r[1]));var s=this.fTexCenterX-this.fTexRadius,o=this.fTexRadius-this.fTexCenterY;return r[3]=(Math.cos(a)*this.fTexRadius*(1+2*n)+this.fTexRadius+s)/this.fImageWidth,r[4]=(Math.sin(a)*this.fTexRadius*(-1-2*n)+this.fTexRadius-o)/this.fImageHeight,1}},{key:"InitCamera",value:function(e){if(null!=this.pCamera)return SR_ERR_CALL_ORDER;switch(e){case Z.SR_DE_NULL:case Z.SR_DE_FISH_ORIGINAL:case Z.SR_DE_FISH_PTZ_CEILING:case Z.SR_DE_FISH_PTZ_FLOOR:case Z.SR_DE_FISH_PTZ_WALL:case Z.SR_DE_FISH_PANORAMA_CEILING_360:case Z.SR_DE_FISH_PANORAMA_CEILING_180:case Z.SR_DE_FISH_PANORAMA_FLOOR_360:case Z.SR_DE_FISH_PANORAMA_FLOOR_180:case Z.SR_DE_FISH_PANORAMA_WALL:return 1;case Z.SR_DE_FISH_SEMISPHERE:if(this.pCamera=new Pe,null==this.pCamera)return Y;this.pCamera.SetFov(oe),this.pCamera.SetNear(ne),this.pCamera.SetFar(se),this.fRotateX=1.57,this.pCamera.SetPitch(3.14-this.fRotateX),this.fScale=3,this.pCamera.SetScale(this.fScale);break;case Z.SR_DE_FISH_CYLINDER_CEILING:case Z.SR_DE_FISH_CYLINDER_FLOOR:if(this.pCamera=new Pe,null==this.pCamera)return Y;this.pCamera.SetFov(oe),this.pCamera.SetNear(ne),this.pCamera.SetFar(se),this.fRotateX=.785,this.pCamera.SetPitch(-this.fRotateX),this.fScale=6,this.pCamera.SetScale(this.fScale);break;case Z.SR_DE_FISH_CYLINDER_SPLIT_CEILING:case Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR:if(this.pCamera=new Pe,null==this.pCamera)return Y;this.pCamera.SetOrtho(!0),this.pCamera.SetNear(ne),this.pCamera.SetFar(se),this.fScale=3,this.pCamera.SetScale(this.fScale);break;case Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:if(this.pCamera=new Pe,null==this.pCamera)return Y;this.pCamera.SetFov(oe),this.pCamera.SetNear(ne),this.pCamera.SetFar(se),this.fScale=2,this.pCamera.SetScale(this.fScale),Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==e?(this.fRotateLimitX=fe,this.fRotateLimitY=le):(this.fRotateLimitX=he,this.fRotateLimitY=ce);break;default:return N}return 1}},{key:"SR_SetViewParam",value:function(e,t){if(!this.b3DPort)return N;switch(e){case 1:if((this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL)&&(t>this.fRotateLimitX||t<-this.fRotateLimitX))return U;this.fRotateX=t;break;case 2:if((this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL)&&(t>this.fRotateLimitY||t<-this.fRotateLimitY))return U;this.fRotateY=t;break;case 3:if(this.enDisplayEffect==Z.SR_DE_FISH_SEMISPHERE){if(t<-.8||t>900)return U}else if(this.enDisplayEffect==Z.SR_DE_FISH_CYLINDER_FLOOR||this.enDisplayEffect==Z.SR_DE_FISH_CYLINDER_CEILING){if(t<0||t>900)return U}else if(this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL){if(t<-.3||t>5)return U;this._ComputeRotateLimits()}this.fScale=t;break;default:return N}return 1}},{key:"SR_GetViewParam",value:function(e,t){if(!this.b3DPort)return X;var i=0;switch(e){case 1:i=this.fRotateX;break;case 2:i=this.fRotateY;break;case 3:i=this.fScale;break;default:return N}return t.fValue=i,1}},{key:"SR_SetCallBack",value:function(e,t,i){switch(i){case 0:this.pfuncCBIn=e,this.pUserIn=t;break;case 1:this.pfuncCBOut=e,this.pUserOut=t;break;default:return N}return 1}},{key:"SR_SetRenderState",value:function(e,t){switch(e){case 1:if(this.b3DPort)return N;break;case 2:if(!this.b3DPort)return N;Math.abs(t-0)<re?this.bCullBack=!1:this.bCullBack=!0;break;default:return N}return 1}},{key:"SR_SetPTZColor",value:function(e,t){return null==this.pFishParamManager?X:this.pFishParamManager.SetPTZColor(e,t)}},{key:"SR_GetPTZColor",value:function(e,t){return null==this.pFishParamManager?X:this.pFishParamManager.GetPTZColor(e,t)}},{key:"SR_SetPTZPort",value:function(e){return null==this.pFishParamManager?X:this.pFishParamManager.SetPTZPort(e)}},{key:"SR_GetPTZPort",value:function(e,t,i){return null==this.pFishParamManager?X:null==i?U:this.pFishParamManager.GetPTZPort(e,t,i)}},{key:"SR_GetCaptureSize",value:function(e){if(null==e)return U;if(null==this.ctx)return X;if(null==e.nWidth||null==e.nWidth||null==e.nHeight||null==e.nHeight)return U;var t=0,i=0;if(0==e.nWidth&&0==e.nHeight)switch(this.enDisplayEffect){case Z.SR_DE_FISH_PTZ_WALL:case Z.SR_DE_FISH_PTZ_CEILING:case Z.SR_DE_FISH_PTZ_FLOOR:t=Math.round(5*this.frameDisplayHeight/8),i=Math.round(3*t/4);break;case Z.SR_DE_NULL:t=Math.round((this.fSrcUseRight-this.fSrcUseLeft)*this.frameDisplayWidth),i=Math.round((this.fSrcUseBottom-this.fSrcUseTop)*this.frameDisplayHeight);break;case Z.SR_DE_FISH_ORIGINAL:case Z.SR_DE_FISH_SEMISPHERE:case Z.SR_DE_FISH_CYLINDER_CEILING:case Z.SR_DE_FISH_CYLINDER_FLOOR:case Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:t=Math.round(this.frameDisplayWidth),i=Math.round(this.frameDisplayHeight);break;case Z.SR_DE_FISH_PANORAMA_FLOOR_360:case Z.SR_DE_FISH_PANORAMA_CEILING_360:this.frameDisplayHeight>=2048?(t=6144,i=864):this.frameDisplayHeight>=1536&&2048>this.frameDisplayHeight?(t=4096,i=576):(t=Math.round(3.14*this.frameDisplayHeight/1.6),i=Math.round(9*this.frameDisplayWidth/16),t=Math.round(2*t),i=Math.round(i/2));break;case Z.SR_DE_FISH_PANORAMA_FLOOR_180:case Z.SR_DE_FISH_PANORAMA_CEILING_180:this.frameDisplayHeight>=3072?(t=4096,i=2304):this.frameDisplayHeight>=2048&&3072>this.frameDisplayHeight?(t=3072,i=1728):this.frameDisplayHeight>=1536&&2048>this.frameDisplayHeight?(t=2048,i=1152):(t=Math.round(3.14*this.frameDisplayHeight/1.6),i=Math.round(9*t/16));break;case Z.SR_DE_FISH_PANORAMA_WALL:t=Math.round(this.frameDisplayHeight),i=Math.round(9*t/16);break;default:return U}else t=Math.round(e.nWidth),i=Math.round(e.nHeight);return t<16||i<16?U:(this.nCaptureWidth=4*Math.round(t/4),this.nCaptureHeight=Math.round(i),e.nWidth=this.nCaptureWidth,e.nHeight=this.nCaptureHeight,e.nBufferLen=this.nCaptureWidth*this.nCaptureHeight*4,1)}},{key:"SR_CaptureScreen",value:function(e){var t=1;if(1!=(t=this._BeginCapture()))return t;if(0==this.videoShaderProgram||0==this.vertexPosBuffer||0==this.texturePosBuffer)return X;this.ctx.useProgram(this.videoShaderProgram),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer);var i=this.ctx.getAttribLocation(this.videoShaderProgram,"xy");if(i<0)return G;this.ctx.vertexAttribPointer(i,3,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(i),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer);var r=this.ctx.getAttribLocation(this.videoShaderProgram,"uv");if(r<0)return G;this.ctx.vertexAttribPointer(r,2,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(r),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null);var a=this.enDisplayEffect,n=this.ctx.getUniformLocation(this.videoShaderProgram,"bCapture");if(n<=0)return G;switch(this.ctx.uniform1i(n,1),a){case Z.SR_DE_NULL:break;case Z.SR_DE_FISH_ORIGINAL:case Z.SR_DE_FISH_PTZ_CEILING:case Z.SR_DE_FISH_PTZ_FLOOR:case Z.SR_DE_FISH_PTZ_WALL:case Z.SR_DE_FISH_PANORAMA_CEILING_360:case Z.SR_DE_FISH_PANORAMA_CEILING_180:case Z.SR_DE_FISH_PANORAMA_FLOOR_360:case Z.SR_DE_FISH_PANORAMA_FLOOR_180:case Z.SR_DE_FISH_PANORAMA_WALL:if(null==this.pFishParamManager)return X;var s={};if(1!=(t=this.pFishParamManager.GetRenderParam(this.nFECPort,s)))return t;if(Z.SR_DE_FISH_ORIGINAL==a){var o=this.ctx.getUniformLocation(this.videoShaderProgram,"bBlack");if(o<=0)return G;this.ctx.uniform1i(o,s.bBlack);var x=this.ctx.getUniformLocation(this.videoShaderProgram,"bCut");if(x<=0)return G;this.ctx.uniform1i(x,s.bCut)}if(Z.SR_DE_FISH_PTZ_CEILING==a||Z.SR_DE_FISH_PTZ_FLOOR==a||Z.SR_DE_FISH_PTZ_WALL==a){var f=this.ctx.getUniformLocation(this.videoShaderProgram,"fHAngleCos");if(f<=0)return G;this.ctx.uniform1f(f,s.fCosH);var l=this.ctx.getUniformLocation(this.videoShaderProgram,"fHAngleSin");if(l<=0)return G;this.ctx.uniform1f(l,s.fSinH);var h=this.ctx.getUniformLocation(this.videoShaderProgram,"fVAngleCos");if(h<=0)return G;this.ctx.uniform1f(h,s.fCosV);var c=this.ctx.getUniformLocation(this.videoShaderProgram,"fVAngleSin");if(c<=0)return G;this.ctx.uniform1f(c,s.fSinV);var _=this.ctx.getUniformLocation(this.videoShaderProgram,"fZoom");if(_<=0)return G;this.ctx.uniform1f(_,s.fZoom)}if(Z.SR_DE_FISH_PANORAMA_CEILING_360==a||Z.SR_DE_FISH_PANORAMA_CEILING_180==a||Z.SR_DE_FISH_PANORAMA_FLOOR_360==a||Z.SR_DE_FISH_PANORAMA_FLOOR_180==a){var u=this.ctx.getUniformLocation(this.videoShaderProgram,"fAngle");if(u<=0)return G;this.ctx.uniform1f(u,s.fAngle)}var d=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX1");if(d<=0)return G;this.ctx.uniform1f(d,s.fRXLeft);var p=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX2");if(p<=0)return G;this.ctx.uniform1f(p,s.fRXRight);var m=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY1");if(m<=0)return G;this.ctx.uniform1f(m,s.fRYTop);var P=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY2");if(P<=0)return G;this.ctx.uniform1f(P,s.fRYBottom);break;case Z.SR_DE_FISH_SEMISPHERE:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(3.14-this.fRotateX),this.pCamera.SetYaw(-this.fRotateY),this.pCamera.UpdateCamera(this.canvas.width,this.canvas.height);var y=this.pCamera.GetView(),S=this.pCamera.GetProj(),b=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(b<=0)return G;this.ctx.uniformMatrix4fv(b,!1,y);var g=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(g<=0)return G;this.ctx.uniformMatrix4fv(g,!1,S);break;case Z.SR_DE_FISH_CYLINDER_CEILING:case Z.SR_DE_FISH_CYLINDER_FLOOR:case Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(-this.fRotateX),this.pCamera.SetYaw(-this.fRotateY),this.pCamera.UpdateCamera(this.canvas.width,this.canvas.height);var v=this.pCamera.GetView(),R=this.pCamera.GetProj(),C=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(C<=0)return G;this.ctx.uniformMatrix4fv(C,!1,v);var E=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(E<=0)return G;this.ctx.uniformMatrix4fv(E,!1,R);break;default:return N}if(this.nCaptureWidth<=0||this.nCaptureHeight<=0)return J;if(this.ctx.viewport(0,0,this.nCaptureWidth,this.nCaptureHeight),this.ctx.clearColor(0,0,0,1),this.ctx.clear(this.ctx.COLOR_BUFFER_BIT|this.ctx.DEPTH_BUFFER_BIT),this.b3DPort&&(this.ctx.enable(this.ctx.DEPTH_TEST),this.ctx.depthFunc(this.ctx.LESS),this.ctx.depthMask(!0),1==this.bCullBack?this.ctx.enable(this.ctx.CULL_FACE):this.ctx.disable(this.ctx.CULL_FACE)),this.enPixelFormat==j?this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]):(1==this.enPixelFormat||3==this.enPixelFormat)&&(this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]),this.ctx.activeTexture(this.ctx.TEXTURE1),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[1]),this.ctx.activeTexture(this.ctx.TEXTURE2),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[2])),this.onlySupportedWebGL1||this.ctx.clearBufferfi(this.ctx.DEPTH_STENCIL,0,1,0),0==this.b3DPort)this.ctx.drawArrays(this.ctx.TRIANGLE_FAN,0,4);else if(this.enDisplayEffect==Z.SR_DE_FISH_SEMISPHERE){if(this.nSemiSpherePosNum<=0)return X;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nSemiSpherePosNum)}else if(this.enDisplayEffect==Z.SR_DE_FISH_CYLINDER_CEILING||this.enDisplayEffect==Z.SR_DE_FISH_CYLINDER_FLOOR){if(this.nCylinderPosNum<=0)return X;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nCylinderPosNum)}else if(this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL){if(this.nArcSpherePosNum<=0)return X;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nArcSpherePosNum)}return this.ctx.useProgram(null),null!=this.pfuncCBIn&&this.pfuncCBIn(this.pUserIn),null!=this.pfuncCBOut&&this.pfuncCBOut(this.pUserOut),1!=(t=this._EndCapture(e))?t:1}},{key:"SR_SetImagePostProcess",value:function(e,t){if(null==this.ctx)return X;if(5==e||2==e){if(0-t>re||t-1>re)return U}else if((1==e||3==e||4==e)&&(-1-t>re||t-1>re))return U;switch(e){case 1:this.fBrightness=t;break;case 2:this.fHue=t;break;case 3:this.fSaturation=t;break;case 4:this.fContrast=t;break;case 5:this.fSharpness=t;break;default:return N}return Math.abs(this.fBrightness-0)<re&&Math.abs(this.fHue-0)<re&&Math.abs(this.fSaturation-0)<re&&Math.abs(this.fContrast-0)<re&&Math.abs(this.fSharpness-0)<re?this.nPostProc=0:this.nPostProc=1,1}},{key:"_BeginCapture",value:function(){var e=1;return 0==this.bCaptureResInit&&1!=(e=this._InitRenderTarget(this.nCaptureWidth,this.nCaptureHeight,!1,!0))?e:1!=(e=this._Resize(this.nCaptureWidth,this.nCaptureHeight,!1,!0))?e:(this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,this.nCaptureFBO),this.bIsCapturing=!0,1)}},{key:"_InitRenderTarget",value:function(e,t,i,r){if(0!=this.nCaptureRTTex||0!=this.nCaptureFBO)return X;if(e<=0||t<=0)return U;if(this.nCaptureRTTex=this.ctx.createTexture(),this.nCaptureRTTex<=0)return G;if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nCaptureRTTex),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,e,t,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,null),0==this.nCaptureFBO&&(this.nCaptureFBO=this.ctx.createFramebuffer(),this.nCaptureFBO<=0))return G;if(this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,this.nCaptureFBO),this.ctx.framebufferTexture2D(this.ctx.FRAMEBUFFER,this.ctx.COLOR_ATTACHMENT0,this.ctx.TEXTURE_2D,this.nCaptureRTTex,0),1==r&&0==this.nCaptureDepthbuffer){if(this.nCaptureDepthbuffer=this.ctx.createRenderbuffer(),this.nCaptureDepthbuffer<=0)return G;this.ctx.bindRenderbuffer(this.ctx.RENDERBUFFER,this.nCaptureDepthbuffer),this.ctx.renderbufferStorage(this.ctx.RENDERBUFFER,this.ctx.DEPTH_COMPONENT16,e,t),this.ctx.framebufferRenderbuffer(this.ctx.FRAMEBUFFER,this.ctx.DEPTH_ATTACHMENT,this.ctx.RENDERBUFFER,this.nCaptureDepthbuffer)}return this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),this.nCaptureFBOWidth=e,this.nCaptureFBOHeight=t,this.bCaptureResInit=!0,1}},{key:"_Resize",value:function(e,t,i,r){if(this.nCaptureFBOWidth!=e||this.nCaptureFBOHeight!=t){if(this.nCaptureFBOWidth=e,this.nCaptureFBOHeight=t,0!=this.nCaptureRTTex&&(this.ctx.deleteTexture(this.nCaptureRTTex),this.nCaptureRTTex=0),0!=this.nCaptureDepthbuffer&&(this.ctx.deleteRenderbuffer(this.nCaptureDepthbuffer),this.nCaptureDepthbuffer=0),0==this.nCaptureRTTex&&(this.nCaptureRTTex=this.ctx.createTexture(),this.nCaptureRTTex<=0))return G;if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nCaptureRTTex),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,this.nCaptureFBOWidth,this.nCaptureFBOHeight,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,null),this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,this.nCaptureFBO),this.ctx.framebufferTexture2D(this.ctx.FRAMEBUFFER,this.ctx.COLOR_ATTACHMENT0,this.ctx.TEXTURE_2D,this.nCaptureRTTex,0),1==r&&0==this.nCaptureDepthbuffer){if(this.nCaptureDepthbuffer=this.ctx.createRenderbuffer(),this.nCaptureDepthbuffer<=0)return G;this.ctx.bindRenderbuffer(this.ctx.RENDERBUFFER,this.nCaptureDepthbuffer),this.ctx.renderbufferStorage(this.ctx.RENDERBUFFER,this.ctx.DEPTH_COMPONENT16,e,t),this.ctx.framebufferRenderbuffer(this.ctx.FRAMEBUFFER,this.ctx.DEPTH_ATTACHMENT,this.ctx.RENDERBUFFER,this.nCaptureDepthbuffer)}this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null)}return 1}},{key:"_EndCapture",value:function(e){return null==this.ctx?X:null==e.pBuffer||null==e.pBuffer?U:(this.ctx.readPixels(0,0,this.nCaptureWidth,this.nCaptureHeight,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,e.pBuffer),this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),this.bIsCapturing=!1,1)}},{key:"_ResizeFrameData",value:function(e,t,i,r){if(0==t%8&&null==r)return this.frameDisplayWidth=Math.round(t),this.frameDisplayHeight=Math.round(i),this.pFrameData=e,1;if(null!=r&&0==r.nCropBottom&&0==r.nCropLeft&&0==r.nCropRight&&0==r.nCropTop&&0==t%8)return this.frameDisplayWidth=Math.round(t),this.frameDisplayHeight=Math.round(i),this.pFrameData=e,1;if((null==this.pFrameData||this.frameDisplayWidth!=t/8*8||this.frameDisplayHeight!=i)&&(this.frameDisplayWidth=8*Math.round(t/8),this.frameDisplayHeight=Math.round(i),this.pFrameData=null,this.pFrameData=new Uint8Array(this.frameDisplayWidth*this.frameDisplayHeight*3/2),null==this.pFrameData))return Y;var a=0,n=0,s=Math.round(r.nCodeWidth),o=Math.round(r.nCodeHeight),x=0;if(1==this.enPixelFormat||3==this.enPixelFormat){var f,l,h;null!=r?(a=Math.round(r.nCropLeft),n=Math.round(r.nCropTop),f=e.subarray(a*s+n,s*o),l=e.subarray(s*o+n*s/4+a/2,s*o*5/4),h=e.subarray(s*o*5/4+n*s/4+a/2,s*o*3/2),x=s):(f=e.subarray(0,t*i),l=e.subarray(t*i,t*i*5/4),h=e.subarray(t*i*5/4,t*i*3/2),x=this.frameDisplayWidth);for(var c=null,_=0;_<this.frameDisplayHeight;++_){var u=Math.round(_*x),d=Math.round(_*x+this.frameDisplayWidth);c=f.slice(u,d);var p=Math.round(_*this.frameDisplayWidth);this.pFrameData.set(c,p)}for(var m=0;m<this.frameDisplayHeight/2;++m){var P=Math.round(m*x/2),y=Math.round(m*x/2+this.frameDisplayWidth/2);c=l.slice(P,y);var S=Math.round(this.frameDisplayWidth*this.frameDisplayHeight+m*this.frameDisplayWidth/2);this.pFrameData.set(c,S)}for(var b=0;b<this.frameDisplayHeight/2;++b){var g=Math.round(b*x/2),v=Math.round(b*x/2+this.frameDisplayWidth/2);c=h.slice(g,v);var R=Math.round(this.frameDisplayWidth*this.frameDisplayHeight*5/4+b*this.frameDisplayWidth/2);this.pFrameData.set(c,R)}f=null,l=null,h=null,c=null}else if(2==this.enPixelFormat){var C,E,F;null!=r?(a=Math.round(r.nCropLeft),n=Math.round(r.nCropTop),C=e.subarray(n*s+a,s*o),E=e.subarray(s*o+n*s/4+a/2,s*o*3/2),x=Math.round(r.nCodeWidth)):(C=e.subarray(0,s*o),E=e.subarray(s*o,s*o*3/2),x=this.frameDisplayWidth);for(var T=0;T<this.frameDisplayHeight;++T){var D=Math.round(T*x),I=Math.round(T*x+this.frameDisplayWidth);F=C.slice(D,I);var M=Math.round(T*this.frameDisplayWidth);this.pFrameData.set(F,M)}for(var A=0;A<this.frameDisplayHeight/2;++A){var w=Math.round(A*x),L=Math.round(A*x+this.frameDisplayWidth);F=E.slice(w,L);var B=Math.round(this.frameDisplayWidth*this.frameDisplayHeight+A*this.frameDisplayWidth);this.pFrameData.set(F,B)}C=null,E=null,F=null}return 1}},{key:"_SetImagePostProcess",value:function(){var e=this.ctx.getUniformLocation(this.videoShaderProgram,"fBrightness");if(e<=0)return G;this.ctx.uniform1f(e,this.fBrightness);var t=this.ctx.getUniformLocation(this.videoShaderProgram,"fHue");if(t<=0)return G;this.ctx.uniform1f(t,this.fHue);var i=this.ctx.getUniformLocation(this.videoShaderProgram,"fSaturation");if(i<=0)return G;this.ctx.uniform1f(i,this.fSaturation);var r=this.ctx.getUniformLocation(this.videoShaderProgram,"fContrast");if(r<=0)return G;this.ctx.uniform1f(r,this.fContrast);var a=this.ctx.getUniformLocation(this.videoShaderProgram,"fSharpness");if(a<=0)return G;this.ctx.uniform1f(a,this.fSharpness);var n=this.ctx.getUniformLocation(this.videoShaderProgram,"fWndWidth");if(n<=0)return G;this.ctx.uniform1f(n,this.frameDisplayWidth);var s=this.ctx.getUniformLocation(this.videoShaderProgram,"fWndHeight");return s<=0?G:(this.ctx.uniform1f(s,this.frameDisplayHeight),1)}},{key:"_ComputeRotateLimits",value:function(){if(this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL){var e,t;if(this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?(e=fe,t=le):(e=he,t=ce),0==this.canvas.width||0==this.canvas.height)this.fRotateLimitX=e,this.fRotateLimitY=t;else{var i=Math.tan(2.748893525);if(Math.abs(i*this.fScale)<1){var r=i*i+1,a=-2*i*i*this.fScale,n=i*i*this.fScale*this.fScale-1,s=(-a-Math.sqrt(a*a-4*r*n))/(2*r),o=i*(s-this.fScale);this.fRotateLimitX=Math.acos(o/Math.sqrt(s*s+o*o)),this.fRotateLimitX<e&&(this.fRotateLimitX=e)}else this.fRotateLimitX=e;var x=Math.atan(this.canvas.width/this.canvas.height*Math.tan(oe/2));if(i=Math.tan(ae-x),Math.abs(i*this.fScale)<1){var f=i*i+1,l=-2*i*i*this.fScale,h=i*i*this.fScale*this.fScale-1,c=(-l-Math.sqrt(l*l-4*f*h))/(2*f),_=i*(c-this.fScale);this.fRotateLimitY=Math.acos(_/Math.sqrt(c*c+_*_)),this.fRotateLimitY<t&&(this.fRotateLimitY=t)}else this.fRotateLimitY=t}this.fRotateX>this.fRotateLimitX&&(this.fRotateX=this.fRotateLimitX),this.fRotateX<-this.fRotateLimitX&&(this.fRotateX=-this.fRotateLimitX),this.fRotateY>this.fRotateLimitY&&(this.fRotateY=this.fRotateLimitX),this.fRotateY<-this.fRotateLimitX&&(this.fRotateY=-this.fRotateLimitX)}return 1}}]),t}(),Se=function(){function t(){e(this,t),this.canvas=null,this.ctx=null,this.regionSx=0,this.regionSy=0,this.regionSw=0,this.regionSh=0,this.needRect=!1,this.bAntialias=!1,this.bRecreateAntia=!1,this.pfuncCBIn=null,this.pUserIn=null,this.pfuncCBOut=null,this.pUserOut=null}return s(t,[{key:"SR_Init",value:function(e){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.ctx||console.log("your browser does not support 2d render")}},{key:"SR_Draw",value:function(e){return this.needRect?this.ctx.drawImage(e,this.regionSx,this.regionSy,this.regionSw,this.regionSh,0,0,this.canvas.width,this.canvas.height):this.ctx.drawImage(e,0,0,e.displayWidth,e.displayHeight,0,0,this.canvas.width,this.canvas.height),null!=this.pfuncCBIn&&this.pfuncCBIn(this.pUserIn),1}},{key:"GetCanvasData",value:function(e){console.log("%c start time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds(),"color: blue");var t=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);console.log("%c 2 time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds(),"color: blue");var i=document.createElement("canvas"),r=i.getContext("2d");i.width=this.canvas.width,i.height=this.canvas.height,r.putImageData(t,0,0);var a=i.toDataURL(),n=document.createElement("a");n.download=(new Date).getTime()+".jpeg",n.href=a,n.dataset.downloadurl=["image/jpeg",n.download,n.href].join(":"),document.body.appendChild(n),n.click(),document.body.removeChild(n),console.log("%c end time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds(),"color: blue")}},{key:"SR_DelSubPort",value:function(e){return 0}},{key:"SR_AddSubPort",value:function(e){return 0}},{key:"SR_SetDisplayRect",value:function(e,t,i,r){this.regionSx=e,this.regionSy=t,this.regionSw=i,this.regionSh=r,this.needRect=!0}},{key:"SR_Destroy",value:function(){this.canvas=null,this.ctx=null,this.regionSx=0,this.regionSy=0,this.regionSw=0,this.regionSh=0,this.needRect=!1}},{key:"SR_SetCanvasSize",value:function(e,t){this.canvas.width=e,this.canvas.height=t}},{key:"SR_GetCanvasSize",value:function(){console.log("canvas width:"+this.canvas.width+",height:"+this.canvas.height)}},{key:"SR_SetAntialias",value:function(e){return e!=this.bAntialias?(this.bAntialias=e,this.bRecreateAntia=!0):this.bRecreateAntia=!1,this.bRecreateAntia&&(this.bAntialias?(this.canvas.width=5*this.canvas.width,this.canvas.height=5*this.canvas.height,this.canvas.style.transform="scale(0.2)",this.canvas.style.transformOrigin="0 0"):(this.canvas.width=this.canvas.width/5,this.canvas.height=this.canvas.height/5,this.canvas.style.transform="scale(1)",this.canvas.style.transformOrigin="0 0")),1}},{key:"SR_SetCallBack",value:function(e,t,i){switch(i){case 0:this.pfuncCBIn=e,this.pUserIn=t;break;case 1:this.pfuncCBOut=e,this.pUserOut=t;break;default:return 0}return 1}},{key:"SR_DrawFont",value:function(e,t,i,r,a,n,s,o,x){var f=[],l={};return l.bBackground=n,l.nFontWidth=r,l.nFontHeight=a,l.pstBGColor=s,l.pstFontColor=i,l.pString=e,l.pstStartPos=t,l.fRotateAngle=o,l.pFontFamily=x,f.push(l),this.SR_DrawFontEx(f,1),1}},{key:"SR_DrawFontEx",value:function(e,t){for(var i=0;i<t;i++){this.ctx.textBaseline="top";var r=e[i].nFontWidth,a=e[i].nFontHeight,n=(r=Math.round(r))<(a=Math.round(a))?r:a;this.ctx.font=n.toString()+"px "+e[i].pFontFamily;var s=parseInt(255*e[i].pstFontColor.fR),o=parseInt(255*e[i].pstFontColor.fG),x=parseInt(255*e[i].pstFontColor.fB),f=s<16?"0"+s.toString(16):s.toString(16),l=o<16?"0"+o.toString(16):o.toString(16),h=x<16?"0"+x.toString(16):x.toString(16);this.ctx.fillStyle="#"+f+l+h,this.ctx.globalAlpha=e[i].pstFontColor.fA,this.ctx.fillText(e[i].pString,e[i].pstStartPos.fX*this.canvas.width,e[i].pstStartPos.fY*this.canvas.height)}return 1}},{key:"SR_DrawImage",value:function(e,t,i,r,a,n){return 1}},{key:"SR_DrawLinesEx",value:function(e,t,i,r){return 1}}]),t}(),be=function(){function t(){e(this,t),this.bPortAllocated=[],this.pRenderParam=[],this.pFishParam=[],this.stPTZColor=[],this.pPTZSetColor=null,this.nBasePTZPointNum=[],this.nOriPTZPointNum=[],this.nPanoPTZPointNum=[],this.nPTZFragmentNum=[],this.pBasePTZPoints=[],this.pPanoPTZPoints=[],this.pRectPoints=[],this.nPTZRectNum=[],this.nPTZDisplayMode=0,this.fRX1=0,this.fRX2=1,this.fRY1=0,this.fRY2=1,this.bBlack=!1,this.pOriPTZPoints=[],this.nWndPort=xe,this.nPlaceType=0,this.nPTZFragmentNode=[],this.bPTZSelected=[],this.nPTZDisplayMode=2;for(var i=0;i<ee;++i){this.bPortAllocated[i]=!1,this.bPTZSelected[i]=!1,this.pRenderParam[i]=null,this.pFishParam[i]=null,this.stPTZColor[i]={},this.stPTZColor[i].fR=0,this.stPTZColor[i].fG=0,this.stPTZColor[i].fB=0,this.stPTZColor[i].fA=0,this.nBasePTZPointNum[i]=0,this.nOriPTZPointNum[i]=0,this.nPanoPTZPointNum[i]=0,this.nPTZRectNum[i]=0,this.pPanoPTZPoints[i]=[],this.pRectPoints[i]=[],this.pBasePTZPoints[i]=[],this.pOriPTZPoints[i]=[];for(var r=0;r<4;++r)this.pRectPoints[i][r]={},this.pRectPoints[i][r].fX=0,this.pRectPoints[i][r].fY=0;for(var a=0;a<te;++a)this.pBasePTZPoints[i][a]={},this.pBasePTZPoints[i][a].fX=0,this.pBasePTZPoints[i][a].fY=0,this.pOriPTZPoints[i][a]={},this.pOriPTZPoints[i][a].fX=0,this.pOriPTZPoints[i][a].fY=0,this.pPanoPTZPoints[i][a]={},this.pPanoPTZPoints[i][a].fX=0,this.pPanoPTZPoints[i][a].fY=0;this.nPTZFragmentNum[i]=0,this.nPTZFragmentNode[i]=[];for(var n=0;n<100;++n)this.nPTZFragmentNode[i][n]=0}this.InitColorList()}return s(t,[{key:"GetFECPort",value:function(e){for(var t=xe,i=0;i<ee;++i)if(0==this.bPortAllocated[i]){t=i;break}if(t==xe)return t;if(e==Z.SR_DE_NULL)return t;if(1!=this.JudgeDisplayEffect(e))return this.FreeFECPort(t),xe;if(Z.SR_DE_FISH_PANORAMA_CEILING_360==e||Z.SR_DE_FISH_PANORAMA_CEILING_180==e||Z.SR_DE_FISH_PANORAMA_FLOOR_360==e||Z.SR_DE_FISH_PANORAMA_FLOOR_180==e||Z.SR_DE_FISH_PANORAMA_WALL==e||Z.SR_DE_FISH_ORIGINAL==e){if(xe!=this.nWndPort)return this.FreeFECPort(t),xe;this.nWndPort=t}if(!(Z.SR_DE_FISH_PTZ_CEILING!=e&&Z.SR_DE_FISH_PTZ_FLOOR!=e&&Z.SR_DE_FISH_PTZ_WALL!=e||xe==this.nWndPort||null==this.pRenderParam[this.nWndPort]||Z.SR_DE_FISH_PANORAMA_CEILING_180!=this.pRenderParam[this.nWndPort].nDisplayEffect&&Z.SR_DE_FISH_PANORAMA_FLOOR_180!=this.pRenderParam[this.nWndPort].nDisplayEffect))return this.FreeFECPort(t),xe;if(Z.SR_DE_FISH_PANORAMA_CEILING_180==e||Z.SR_DE_FISH_PANORAMA_FLOOR_180==e)for(var r=0;r<ee;++r)if(null!=this.pRenderParam[r]&&(Z.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[r].nDisplayEffect||Z.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[r].nDisplayEffect||Z.SR_DE_FISH_PTZ_WALL==this.pRenderParam[r].nDisplayEffect))return this.FreeFECPort(t),xe;if(Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==e)for(var a=0;a<ee;++a)if(null!=this.pRenderParam[a]&&Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL==this.pRenderParam[a].nDisplayEffect)return this.FreeFECPort(t),xe;if(Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL==e)for(var n=0;n<ee;++n)if(null!=this.pRenderParam[n]&&Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==this.pRenderParam[n].nDisplayEffect)return this.FreeFECPort(t),xe;return this.pRenderParam[t]={},this.pRenderParam[t].fCosH=1,this.pRenderParam[t].fSinH=0,this.pRenderParam[t].fCosV=1,this.pRenderParam[t].fSinV=0,this.pRenderParam[t].fAngle=0,this.pRenderParam[t].fRX1=this.fRX1,this.pRenderParam[t].fRX2=this.fRX2,this.pRenderParam[t].fRY1=this.fRY1,this.pRenderParam[t].fRY2=this.fRY2,this.pRenderParam[t].bBlack=this.bBlack,this.pRenderParam[t].fZoom=.035+.8,this.pRenderParam[t].nDisplayEffect=e,this.pRenderParam[t].bBlack=!1,this.pRenderParam[t].bCut=!1,this.pFishParam[t]={},this.pFishParam[t].nFishParamType=0,this.pFishParam[t].bCut=!1,this.pFishParam[t].fAngle=this.pRenderParam[t].fAngle,this.pFishParam[t].fPTZX=.5,this.pFishParam[t].fPTZY=.5,this.pFishParam[t].fRXLeft=this.pRenderParam[t].fRX1,this.pFishParam[t].fRXRight=this.pRenderParam[t].fRX2,this.pFishParam[t].fRYTop=this.pRenderParam[t].fRY1,this.pFishParam[t].fRYBottom=this.pRenderParam[t].fRY2,this.pFishParam[t].bBlack=this.pRenderParam[t].bBlack,this.pFishParam[t].fZoom=(this.pRenderParam[t].fZoom-.8)/7,this.bPortAllocated[t]=!0,t}},{key:"FreeFECPort",value:function(e){if(e<0||e>=ee)return U;this.nWndPort==e&&(this.nWndPort=xe),null!=this.pRenderParam[e]&&(this.pRenderParam[e].fCosH=1,this.pRenderParam[e].fSinH=0,this.pRenderParam[e].fCosV=1,this.pRenderParam[e].fSinV=0,this.pRenderParam[e].fAngle=0,this.pRenderParam[e].fZoom=0,this.pRenderParam[e].fRX1=0,this.pRenderParam[e].fRX2=1,this.pRenderParam[e].fRY1=0,this.pRenderParam[e].fRY2=1,this.pRenderParam[e].nDisplayEffect=0,this.pRenderParam[e].bBlack=!1,this.pRenderParam[e].bCut=!1),null!=this.pFishParam[e]&&(this.pFishParam[e].nFishParamType=0,this.pFishParam[e].fRXLeft=0,this.pFishParam[e].fRXRight=1,this.pFishParam[e].fRYTop=0,this.pFishParam[e].fRYBottom=1,this.pFishParam[e].bBlack=!1,this.pFishParam[e].bCut=!1,this.pFishParam[e].fAngle=0,this.pFishParam[e].fZoom=0,this.pFishParam[e].fPTZX=.5,this.pFishParam[e].fPTZY=.5),this.nBasePTZPointNum[e]=0,this.nOriPTZPointNum[e]=0,this.nPanoPTZPointNum[e]=0,this.nPTZRectNum[e]=0;for(var t=0;t<4;++t)this.pRectPoints[e][t].fX=0,this.pRectPoints[e][t].fY=0;for(var r=0;r<te;++r)this.pBasePTZPoints[e][r].fX=0,this.pBasePTZPoints[e][r].fY=0,this.pOriPTZPoints[e][r].fX=0,this.pOriPTZPoints[e][r].fY=0,this.pPanoPTZPoints[e][r].fX=0,this.pPanoPTZPoints[e][r].fY=0;if(null!=this.pPTZSetColor&&(this.pPTZSetColor[e].fA=0,this.pPTZSetColor[e].fR=0,this.pPTZSetColor[e].fG=0,this.pPTZSetColor[e].fB=0),this.bPTZSelected[e]=!1,0!=this.nPlaceType){var a=!1;if(null!=this.pRenderParam[i])for(var n=0;n<ee;++n)if(null!=this.pRenderParam[n]&&(Z.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_PTZ_WALL==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_PANORAMA_CEILING_360==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_PANORAMA_CEILING_180==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_PANORAMA_FLOOR_360==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_PANORAMA_FLOOR_180==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_PANORAMA_WALL==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_CYLINDER_CEILING==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_CYLINDER_FLOOR==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_CYLINDER_SPLIT_CEILING==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL==this.pRenderParam[n].nDisplayEffect)){a=!0;break}a||(this.nPlaceType=0)}for(var s=!1,o=0;o<ee;++o)if(null!=this.pRenderParam[o]){s=!0;break}s||(this.fRX1=0,this.fRX2=1,this.fRY1=0,this.fRY2=1,this.bBlack=!1),this.nPTZFragmentNum[e]=0;for(var x=0;x<100;++x)this.nPTZFragmentNode[e][x]=0;return this.bPortAllocated[e]=!1,1}},{key:"DeInit",value:function(){for(var e=0;e<ee;++e){for(var t=0;t<4;++t)this.pRectPoints[e][t]=null;for(var i=0;i<te;++i)this.pBasePTZPoints[e][i]=null,this.pOriPTZPoints[e][i]=null,this.pPanoPTZPoints[e][i]=null;this.nPTZFragmentNum[e]=0,this.nPTZFragmentNode[e]=null,this.bPortAllocated[e]=!1,this.bPTZSelected[e]=!1,this.pRenderParam[e]=null,this.pFishParam[e]=null,this.stPTZColor[e]=null,this.nBasePTZPointNum[e]=0,this.nOriPTZPointNum[e]=0,this.nPanoPTZPointNum[e]=0,this.nPTZRectNum[e]=0,this.pPanoPTZPoints[e]=null,this.pRectPoints[e]=null,this.pBasePTZPoints[e]=null,this.pOriPTZPoints[e]=null}return this.bPortAllocated=null,this.pRenderParam=null,this.pFishParam=null,this.stPTZColor=null,this.pPTZSetColor=null,this.nBasePTZPointNum=null,this.nOriPTZPointNum=null,this.nPanoPTZPointNum=null,this.nPTZFragmentNum=null,this.pBasePTZPoints=null,this.pPanoPTZPoints=null,this.pRectPoints=null,this.nPTZRectNum=null,this.nPTZDisplayMode=0,this.fRX1=0,this.fRX2=1,this.fRY1=0,this.fRY2=1,this.bBlack=!1,this.pOriPTZPoints=null,this.pBasePTZPoints=null,this.nWndPort=xe,this.nPlaceType=0,this.nPTZFragmentNode=null,this.bPTZSelected=null,this.nPTZDisplayMode=2,1}},{key:"InitColorList",value:function(){this.stPTZColor[0].fR=.5,this.stPTZColor[0].fG=.5,this.stPTZColor[0].fB=0,this.stPTZColor[0].fA=1,this.stPTZColor[1].fR=1,this.stPTZColor[1].fG=0,this.stPTZColor[1].fB=0,this.stPTZColor[1].fA=1,this.stPTZColor[2].fR=0,this.stPTZColor[2].fG=1,this.stPTZColor[2].fB=0,this.stPTZColor[2].fA=1,this.stPTZColor[3].fR=0,this.stPTZColor[3].fG=0,this.stPTZColor[3].fB=1,this.stPTZColor[3].fA=1,this.stPTZColor[4].fR=1,this.stPTZColor[4].fG=1,this.stPTZColor[4].fB=0,this.stPTZColor[4].fA=1,this.stPTZColor[5].fR=.5,this.stPTZColor[5].fG=0,this.stPTZColor[5].fB=1,this.stPTZColor[5].fA=1,this.stPTZColor[6].fR=0,this.stPTZColor[6].fG=1,this.stPTZColor[6].fB=1,this.stPTZColor[6].fA=1,this.stPTZColor[7].fR=1,this.stPTZColor[7].fG=.5,this.stPTZColor[7].fB=0,this.stPTZColor[7].fA=1,this.stPTZColor[8].fR=0,this.stPTZColor[8].fG=.5,this.stPTZColor[8].fB=.5,this.stPTZColor[8].fA=1;for(var e=9;e<ee;e++)this.stPTZColor[e].fR=1*e/ee,this.stPTZColor[e].fG=1*e/ee,this.stPTZColor[e].fB=1*e/ee,this.stPTZColor[e].fA=1;return 1}},{key:"GetRangePoints",value:function(e){if(e<0||e>=ee)return U;if(null==this.pRenderParam[e])return X;var t=0,i=0;switch(this.nOriPTZPointNum[e]=0,this.nBasePTZPointNum[e]=0,this.pRenderParam[e].nDisplayEffect){case Z.SR_DE_FISH_PTZ_CEILING:for(i=0;i<1;i+=.01)this.GetFishPTZCeiling(t,i,e);for(i=.9995,t=0;t<1;t+=.02)this.GetFishPTZCeiling(t,i,e);for(t=.999,i=.9995;i>=0;i-=.01)this.GetFishPTZCeiling(t,i,e);for(i=0,t=.999;t>=0;t-=.02)this.GetFishPTZCeiling(t,i,e);break;case Z.SR_DE_FISH_PTZ_FLOOR:for(i=0;i<1;i+=.01)this.GetFishPTZFloor(t,i,e);for(i=.9995,t=0;t<1;t+=.02)this.GetFishPTZFloor(t,i,e);for(t=.999,i=.9995;i>=0;i-=.01)this.GetFishPTZFloor(t,i,e);for(i=0,t=.999;t>=0;t-=.02)this.GetFishPTZFloor(t,i,e);break;case Z.SR_DE_FISH_PTZ_WALL:for(i=0;i<1;i+=.01)this.GetFishPTZWALL(t,i,e);for(i=.9995,t=0;t<1;t+=.02)this.GetFishPTZWALL(t,i,e);for(t=.999,i=.9995;i>=0;i-=.01)this.GetFishPTZWALL(t,i,e);for(i=0,t=.999;t>=0;t-=.02)this.GetFishPTZWALL(t,i,e);break;default:return N}return 1}},{key:"TransformPTZRangePoints",value:function(e){if(xe==this.nWndPort)return X;if(null==this.pBasePTZPoints[e]||null==this.pRenderParam[this.nWndPort])return X;this.nPanoPTZPointNum[e]=0;var t=1,i=this.nWndPort;switch(this.pRenderParam[i].nDisplayEffect){case Z.SR_DE_FISH_PANORAMA_WALL:if(1!=(t=this.GetPanoPTZWall(e)))return t;break;case Z.SR_DE_FISH_PANORAMA_FLOOR_360:if(1!=(t=this.GetPanoPTZFloor(e)))return t;break;case Z.SR_DE_FISH_PANORAMA_CEILING_360:if(1!=(t=this.GetPanoPTZCeiling(e)))return t}return this.CalcPTZFragmentPoints(e),1}},{key:"GetRectPoints",value:function(e){if(e<0||e>=ee)return U;if(this.nWndPort==xe)return X;if(null==this.pRenderParam[this.nWndPort]||null==this.pFishParam[e])return X;var t=1,i={fX:0,fY:0};switch(this.pRenderParam[this.nWndPort].nDisplayEffect){case Z.SR_DE_FISH_PANORAMA_WALL:if(1!=(t=this.GetPointFish2PanoWall(i,this.pFishParam[e].fPTZX,this.pFishParam[e].fPTZY)))return t;break;case Z.SR_DE_FISH_PANORAMA_FLOOR_360:if(1!=(t=this.GetPointFish2PanoFloor(i,this.pFishParam[e].fPTZX,this.pFishParam[e].fPTZY)))return N==t&&(this.pRectPoints[e]=null),t;break;case Z.SR_DE_FISH_PANORAMA_CEILING_360:if(1!=(t=this.GetPointFish2PanoCeiling(i,this.pFishParam[e].fPTZX,this.pFishParam[e].fPTZY)))return N==t&&(this.pRectPoints[e]=null),t;break;case Z.SR_DE_FISH_ORIGINAL:i.fX=this.pFishParam[e].fPTZX,i.fY=this.pFishParam[e].fPTZY}if(null==this.pRectPoints[e]){this.pRectPoints[e]=[];for(var r=0;r<4;++r)this.pRectPoints[e][r]={},this.pRectPoints[e][r].fX=0,this.pRectPoints[e][r].fY=0}return this.pRectPoints[e][0].fX=i.fX-ie,this.pRectPoints[e][0].fY=i.fY-ie,this.pRectPoints[e][1].fX=i.fX+ie,this.pRectPoints[e][1].fY=i.fY-ie,this.pRectPoints[e][2].fX=i.fX+ie,this.pRectPoints[e][2].fY=i.fY+ie,this.pRectPoints[e][3].fX=i.fX-ie,this.pRectPoints[e][3].fY=i.fY+ie,this.nPTZRectNum[e]=4,1}},{key:"GetFishPTZCeiling",value:function(e,t,i){var r,a,n,s,o,x,f,l={fX:0,fY:0},h={fX:0,fY:0},c={fX:0,fY:0},_={};s=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),o=(this.fRX1+this.fRX2)/2*1,x=(this.fRY1+this.fRY2)/2*s,f=(this.fRX2-this.fRX1)/2*1,l.fX=t-.5,l.fY=.5-e,r=this.pRenderParam[i].fZoom,h.fX=l.fX,h.fY=l.fY*this.pRenderParam[i].fCosV+r*this.pRenderParam[i].fSinV,a=r*this.pRenderParam[i].fCosV-l.fY*this.pRenderParam[i].fSinV,n=Math.sqrt(h.fX*h.fX+h.fY*h.fY);var u=Math.sqrt(h.fX*h.fX+h.fY*h.fY+a*a),d=Math.asin(n/u)/1.5707963*.5;h.fX=d*h.fX/n,h.fY=d*h.fY/n,c.fX=h.fX*this.pRenderParam[i].fCosH-h.fY*this.pRenderParam[i].fSinH,c.fY=h.fX*this.pRenderParam[i].fSinH+h.fY*this.pRenderParam[i].fCosH,_.fX=2*c.fX*f+o,_.fY=2*-c.fY*f+x;var p=this.nBasePTZPointNum[i];this.pBasePTZPoints[i][p].fX=c.fX+.5,this.pBasePTZPoints[i][p].fY=.5-c.fY,this.nBasePTZPointNum[i]=this.nBasePTZPointNum[i]+1;var m=this.fRX1<=0?0:1*this.fRX1,P=this.fRY1<=0?0:this.fRY1*s,y=this.fRX2>=1?1-m:1*this.fRX2-m,S=this.fRY2>=1?s-P:this.fRY2*s-P;if(_.fX=(_.fX-m)/y,_.fY=(_.fY-P)/S,_.fX<=1&&_.fY<=1&&_.fX>=0&&_.fY>=0){var b=this.nOriPTZPointNum[i];this.pOriPTZPoints[i][b].fX=_.fX,this.pOriPTZPoints[i][b].fY=_.fY,this.nOriPTZPointNum[i]=this.nOriPTZPointNum[i]+1}return 1}},{key:"GetFishPTZFloor",value:function(e,t,i){var r,a,n,s,o,x,f,l={fX:0,fY:0},h={fX:0,fY:0},c={fX:0,fY:0},_={};s=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),o=(this.fRX1+this.fRX2)/2*1,x=(this.fRY1+this.fRY2)/2*s,f=(this.fRX2-this.fRX1)/2*1,l.fX=e-.5,l.fY=t-.5,r=this.pRenderParam[i].fZoom,h.fX=l.fX,h.fY=l.fY*this.pRenderParam[i].fCosV+r*this.pRenderParam[i].fSinV,a=r*this.pRenderParam[i].fCosV-l.fY*this.pRenderParam[i].fSinV,n=Math.sqrt(h.fX*h.fX+h.fY*h.fY);var u=Math.sqrt(h.fX*h.fX+h.fY*h.fY+a*a),d=Math.asin(n/u)/1.5707963*.5;h.fX=d*h.fX/n,h.fY=d*h.fY/n,c.fX=h.fX*this.pRenderParam[i].fCosH-h.fY*this.pRenderParam[i].fSinH,c.fY=h.fX*this.pRenderParam[i].fSinH+h.fY*this.pRenderParam[i].fCosH,_.fX=2*c.fX*f+o,_.fY=2*c.fY*f+x;var p=this.nBasePTZPointNum[i];this.pBasePTZPoints[i][p].fX=c.fX+.5,this.pBasePTZPoints[i][p].fY=c.fY+.5,this.nBasePTZPointNum[i]=this.nBasePTZPointNum[i]+1;var m=this.fRX1<=0?0:1*this.fRX1,P=this.fRY1<=0?0:this.fRY1*s,y=this.fRX2>=1?1-m:1*this.fRX2-m,S=this.fRY2>=1?s-P:this.fRY2*s-P;if(_.fX=(_.fX-m)/y,_.fY=(_.fY-P)/S,_.fX<=1&&_.fY<=1&&_.fX>=0&&_.fY>=0){var b=this.nOriPTZPointNum[i];this.pOriPTZPoints[i][b].fX=_.fX,this.pOriPTZPoints[i][b].fY=_.fY,this.nOriPTZPointNum[i]=this.nOriPTZPointNum[i]+1}return 1}},{key:"GetFishPTZWALL",value:function(e,t,i){var r,a,n,s,o,x,f,l,h={fX:0,fY:0},c={fX:0,fY:0},_={fX:0,fY:0},u={};o=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),x=(this.fRX1+this.fRX2)/2*1,f=(this.fRY1+this.fRY2)/2*o,l=(this.fRX2-this.fRX1)/2*1,h.fX=t-.5,h.fY=e-.5,r=this.pRenderParam[i].fZoom,c.fX=h.fX,c.fY=h.fY*this.pRenderParam[i].fCosV+r*this.pRenderParam[i].fSinV,a=r*this.pRenderParam[i].fCosV-h.fY*this.pRenderParam[i].fSinV,_.fX=c.fX*this.pRenderParam[i].fCosH+a*this.pRenderParam[i].fSinH,_.fY=c.fY,n=a*this.pRenderParam[i].fCosH-c.fX*this.pRenderParam[i].fSinH,s=Math.sqrt(_.fX*_.fX+_.fY*_.fY);var d=Math.sqrt(_.fX*_.fX+_.fY*_.fY+n*n),p=Math.asin(s/d)/1.5707963*.5;u.fX=p*_.fX/s*l*2+x,u.fY=p*_.fY/s*l*2+f;var m=this.nBasePTZPointNum[i];this.pBasePTZPoints[i][m].fX=p*_.fX/s+.5,this.pBasePTZPoints[i][m].fY=p*_.fY/s+.5,this.nBasePTZPointNum[i]=this.nBasePTZPointNum[i]+1;var P=this.fRX1<=0?0:1*this.fRX1,y=this.fRY1<=0?0:this.fRY1*o,S=this.fRX2>=1?1-P:1*this.fRX2-P,b=this.fRY2>=1?o-y:this.fRY2*o-y;if(u.fX=(u.fX-P)/S,u.fY=(u.fY-y)/b,u.fX<=1&&u.fY<=1&&u.fX>=0&&u.fY>=0){var g=this.nOriPTZPointNum[i];this.pOriPTZPoints[i][g].fX=u.fX,this.pOriPTZPoints[i][g].fY=u.fY,this.nOriPTZPointNum[i]=this.nOriPTZPointNum[i]+1}return 1}},{key:"GetPanoPTZCeiling",value:function(e){if(null==this.pRenderParam[e]||null==this.pRenderParam[this.nWndPort])return X;if(null==this.pBasePTZPoints[e])return X;var t,i,r=this.nBasePTZPointNum[e];t=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),i=(this.fRX2-this.fRX1)/2*1;var a,n=0;(this.fRX2>1||this.fRY2>1||this.fRY1<0||this.fRX1<0)&&(this.fRX1<0&&(a=1*-this.fRX1)>n&&(n=a),this.fRX2>1&&(a=1*(this.fRX2-1))>n&&(n=a),this.fRY1<0&&(a=-this.fRY1*t)>n&&(n=a),this.fRY2>1&&(a=(this.fRY2-1)*t)>n&&(n=a));for(var s,o=n/i,x={fX:0,fY:0},f={fX:0,fY:0},l=0;l<r;++l)if(f.fX=this.pBasePTZPoints[e][l].fX,f.fY=this.pBasePTZPoints[e][l].fY,!(Math.abs(f.fX-.5)<re&&Math.abs(f.fY-.5)<re)){var h={fX:0,fY:0},c={fX:0,fY:0};h.fX=f.fX-.5,h.fY=f.fY-.5,c.fX=-.5*Math.sin(this.pRenderParam[this.nWndPort].fAngle),c.fY=.5*Math.cos(this.pRenderParam[this.nWndPort].fAngle);var _=Math.sqrt(h.fX*h.fX+h.fY*h.fY),u=Math.sqrt(c.fX*c.fX+c.fY*c.fY);if(s=Math.acos((h.fX*c.fX+h.fY*c.fY)/(_*u)),h.fX*c.fY-h.fY*c.fX>0&&(s=6.2831852-s),x.fX=s/6.2831853,x.fY=(2*(.5-_)-o)/(.8-o),x.fY>=0&&x.fX>=0&&x.fY<=1&&x.fX<=1){var d=this.nPanoPTZPointNum[e];this.pPanoPTZPoints[e][d].fX=x.fX,this.pPanoPTZPoints[e][d].fY=x.fY,this.nPanoPTZPointNum[e]=this.nPanoPTZPointNum[e]+1}}return 1}},{key:"GetPanoPTZFloor",value:function(e){if(null==this.pRenderParam[e]||null==this.pRenderParam[this.nWndPort])return X;if(null==this.pBasePTZPoints[e])return X;var t,i,r=this.nBasePTZPointNum[e];t=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),i=(this.fRX2-this.fRX1)/2*1;var a,n=0;(this.fRX2>1||this.fRY2>1||this.fRY1<0||this.fRX1<0)&&(this.fRX1<0&&(a=1*-this.fRX1)>n&&(n=a),this.fRX2>1&&(a=1*(this.fRX2-1))>n&&(n=a),this.fRY1<0&&(a=-this.fRY1*t)>n&&(n=a),this.fRY2>1&&(a=(this.fRY2-1)*t)>n&&(n=a));for(var s,o=n/i,x={fX:0,fY:0},f={fX:0,fY:0},l=0;l<r;++l)if(f.fX=this.pBasePTZPoints[e][l].fX,f.fY=this.pBasePTZPoints[e][l].fY,!(Math.abs(f.fX-.5)<re&&Math.abs(f.fY-.5)<re)){var h={fX:0,fY:0},c={fX:0,fY:0};h.fX=f.fX-.5,h.fY=f.fY-.5,c.fX=-.5*Math.sin(this.pRenderParam[this.nWndPort].fAngle),c.fY=.5*Math.cos(this.pRenderParam[this.nWndPort].fAngle);var _=Math.sqrt(h.fX*h.fX+h.fY*h.fY),u=Math.sqrt(c.fX*c.fX+c.fY*c.fY);if(s=Math.acos((h.fX*c.fX+h.fY*c.fY)/(_*u)),h.fX*c.fY-h.fY*c.fX>0&&(s=6.2831852-s),x.fX=1-s/6.2831853,x.fY=1-(2*(.5-_)-o)/(.8-o),x.fY>=0&&x.fX>=0&&x.fY<=1&&x.fX<=1){var d=this.nPanoPTZPointNum[e];this.pPanoPTZPoints[e][d].fX=x.fX,this.pPanoPTZPoints[e][d].fY=x.fY,this.nPanoPTZPointNum[e]=this.nPanoPTZPointNum[e]+1}}return 1}},{key:"GetPanoPTZWall",value:function(e){if(null==this.pRenderParam[e]||null==this.pRenderParam[this.nWndPort])return X;if(null==this.pBasePTZPoints[e])return X;var t,i,r=this.nBasePTZPointNum[e];t=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),i=(this.fRX2-this.fRX1)/2*1;var a,n,s,o,x,f=0,l=1,h=.1,c=.9;this.fRX1<0&&(a=1*-this.fRX1,f=a/=2*i),this.fRX2>1&&(n=1*(this.fRX2-1),l=1-(n/=2*i)),this.fRY1<0&&(s=-this.fRY1*t,h=(s/=2*i)>.1?s:.1),this.fRY2>1&&(o=(this.fRY2-1)*t,c=(o/=2*i)>1-.9?1-o:.9);for(var _={fX:0,fY:0},u={fX:0,fY:0},d=0;d<r;++d){u.fX=this.pBasePTZPoints[e][d].fX,u.fY=this.pBasePTZPoints[e][d].fY;var p=2*u.fX*i,m=2*u.fY*i;if(x=Math.sqrt(i*i-(m-i)*(m-i)),!(Math.abs(x)<re)&&(u.fX=i*(p-i)/x+i,u.fY=m,_.fX=(u.fX-2*f*i)/(2*(l-f)*i),_.fY=(u.fY-2*h*i)/(2*(c-h)*i),_.fY>=0&&_.fX>=0&&_.fY<=1&&_.fX<=1)){var P=this.nPanoPTZPointNum[e];this.pPanoPTZPoints[e][P].fX=_.fX,this.pPanoPTZPoints[e][P].fY=_.fY,this.nPanoPTZPointNum[e]=this.nPanoPTZPointNum[e]+1}}return 1}},{key:"GetPointPano2FishCeiling",value:function(e,t,i){if(null==e||null==this.pRenderParam[this.nWndPort])return X;var r,a;r=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),a=(this.fRX2-this.fRX1)/2*1;var n,s=0,o=1,x=0,f=1,l=0;(this.fRX2>1||this.fRY2>1||this.fRX1<0||this.fRY1<0)&&(this.fRX1<0&&((n=1*-this.fRX1)>l&&(l=n),s=n/=2*a),this.fRX2>1&&((n=1*(this.fRX2-1))>l&&(l=n),o=1-(n/=2*a)),this.fRY1<0&&((n=-this.fRY1*r)>l&&(l=n),x=n/=2*a),this.fRY2>1&&((n=(this.fRY2-1)*r)>l&&(l=n),f=1-(n/=2*a)));var h,c,_=l/a,u={},d={};return u.fX=t,u.fY=(.8-_)*i+_,h=6.2831853*u.fX+this.pRenderParam[this.nWndPort].fAngle,c=.5*(1-u.fY),d.fX=.5-c*Math.sin(h),d.fY=.5+c*Math.cos(h),d.fX=(d.fX-s)/(o-s),d.fY=(d.fY-x)/(f-x),e.fX=d.fX,e.fY=d.fY,1}},{key:"GetPointPano2FishFloor",value:function(e,t,i){if(null==this.pRenderParam[this.nWndPort])return X;if(null==e)return U;var r,a;r=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),a=(this.fRX2-this.fRX1)/2*1;var n,s=0,o=1,x=0,f=1,l=0;(this.fRX2>1||this.fRY2>1||this.fRX1<0||this.fRY1<0)&&(this.fRX1<0&&((n=1*-this.fRX1)>l&&(l=n),s=n/=2*a),this.fRX2>1&&((n=1*(this.fRX2-1))>l&&(l=n),o=1-(n/=2*a)),this.fRY1<0&&((n=-this.fRY1*r)>l&&(l=n),x=n/=2*a),this.fRY2>1&&((n=(this.fRY2-1)*r)>l&&(l=n),f=1-(n/=2*a)));var h,c,_=l/a,u={},d={};return u.fX=1-t,u.fY=(.8-_)*(1-i)+_,h=6.2831853*u.fX+this.pRenderParam[this.nWndPort].fAngle,c=.5*(1-u.fY),d.fX=.5-c*Math.sin(h),d.fY=.5+c*Math.cos(h),d.fX=(d.fX-s)/(o-s),d.fY=(d.fY-x)/(f-x),e.fX=d.fX,e.fY=d.fY,1}},{key:"GetPointPano2FishWall",value:function(e,t,i){if(null==this.pRenderParam[this.nWndPort])return X;if(null==e)return U;var r,a;r=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),a=(this.fRX2-this.fRX1)/2*1;var n,s,o,x,f=0,l=1,h=.1,c=.9,_=0,u=1,d=0,p=1;this.fRX1<0&&(n=1*-this.fRX1,f=n/=2*a,_=n),this.fRX2>1&&(s=1*(this.fRX2-1),l=1-(s/=2*a),u=1-s),this.fRY1<0&&(o=-this.fRY1*r,h=(o/=2*a)>.1?o:.1,d=o),this.fRY2>1&&(x=(this.fRY2-1)*r,c=(x/=2*a)>1-.9?1-x:.9,p=1-x);var m={},P={};m.fX=t*(l-f)+f,m.fY=i*(c-h)+h;var y=Math.sqrt(.25-(m.fY-.5)*(m.fY-.5));return P.fX=(m.fX-.5)*y/.5+.5,P.fY=m.fY,P.fX=(P.fX-_)/(u-_),P.fY=(P.fY-d)/(p-d),e.fX=P.fX,e.fY=P.fY,1}},{key:"UpdatePTZPosition",value:function(e,t,i){if(null==this.pRenderParam[e])return X;var r={fHAngleSin:0,fHAngleCos:0,fVAngleSin:0,fVAngleCos:0},a=1;if(Z.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[e].nDisplayEffect||Z.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[e].nDisplayEffect){if(1!=(a=this.ComputeAngleVertical(t,i,r,this.pRenderParam[e].nDisplayEffect)))return a}else{if(Z.SR_DE_FISH_PTZ_WALL!=this.pRenderParam[e].nDisplayEffect)return N;if(1!=(a=this.ComputeAngleHorizontal(t,i,r)))return a}return 0==this.IsInImage(this.fRX1,this.fRX2,this.fRY1,this.fRY2,r,this.pRenderParam[e].fZoom,this.pRenderParam[e].nDisplayEffect)?U:(this.pRenderParam[e].fCosH=r.fHAngleCos,this.pRenderParam[e].fSinH=r.fHAngleSin,this.pRenderParam[e].fCosV=r.fVAngleCos,this.pRenderParam[e].fSinV=r.fVAngleSin,1)}},{key:"JudgeDisplayEffect",value:function(e){var t=0;switch(t){case 0:return t=this.GetPlaceType(e),4==this.nPlaceType&&(this.nPlaceType=0),1;case 3:return(t=this.GetPlaceType(e))==this.nPlaceType||4==this.nPlaceType?1:N;case 2:case 1:return(t=this.GetPlaceType(e))==this.nPlaceType||4==t?1:N;default:return N}return N}},{key:"GetPlaceType",value:function(e){switch(e){case Z.SR_DE_FISH_PTZ_CEILING:case Z.SR_DE_FISH_PANORAMA_CEILING_360:case Z.SR_DE_FISH_PANORAMA_CEILING_180:case Z.SR_DE_FISH_CYLINDER_CEILING:case Z.SR_DE_FISH_CYLINDER_SPLIT_CEILING:return 3;case Z.SR_DE_FISH_PTZ_FLOOR:case Z.SR_DE_FISH_PANORAMA_FLOOR_360:case Z.SR_DE_FISH_PANARAMA_FLOOR_180:case Z.SR_DE_FISH_CYLINDER_FLOOR:case Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR:return 2;case Z.SR_DE_FISH_PTZ_WALL:case Z.SR_DE_FISH_PANORAMA_WALL:case Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:return 1;case Z.SR_DE_FISH_SEMISPHERE:case Z.SR_DE_FISH_ORIGINAL:case Z.SR_DE_FISH_PLANET:case Z.SR_DE_FISH_SPHERE:case Z.SR_DE_FISH_PLANET:return 4;default:return 0}return 0}},{key:"SetFishParam",value:function(e,t){if(e<0||e>=ee)return U;if(null==t)return U;if(null==this.pRenderParam[e])return X;var i=1;switch(t.nFishParamType){case 1:if(1!=(i=this.UpdateCircyeParam(t.fRXLeft,t.fRXRight,t.fRYTop,t.fRYBottom)))return i;this.pRenderParam[e].bCut=t.bCut,this.bBlack=t.bBlack;break;case 2:if(Z.SR_DE_FISH_PANORAMA_CEILING_360!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PANORAMA_CEILING_180!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PANORAMA_FLOOR_360!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PANORAMA_FLOOR_180!=this.pRenderParam[e].nDisplayEffect)return N;if(1!=(i=this.UpdateWideScanAngle(e,t.fAngle)))return i;this.pFishParam[e].fAngle=t.fAngle;break;case 3:if(Z.SR_DE_FISH_PTZ_WALL!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PTZ_CEILING!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PTZ_FLOOR!=this.pRenderParam[e].nDisplayEffect)return N;if(1!=(i=this.UpdateRangeParam(e,t.fZoom)))return i;this.pFishParam[e].fZoom=t.fZoom;break;case 4:if(Z.SR_DE_FISH_PTZ_WALL!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PTZ_CEILING!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PTZ_FLOOR!=this.pRenderParam[e].nDisplayEffect)return N;if(1!=(i=this.UpdatePTZPosition(e,t.fPTZX,t.fPTZY,this.pRenderParam[e].fZoom,!0)))return i;this.pFishParam[e].fPTZX=t.fPTZX,this.pFishParam[e].fPTZY=t.fPTZY;break;default:return N}return this.ComputePTZPoints()}},{key:"GetFishParam",value:function(e,t){return e<0||e>=ee||null==t||null==this.pFishParam[e]?U:(t.fRXLeft=this.fRX1,t.fRXRight=this.fRX2,t.fRYTop=this.fRY1,t.fRYBottom=this.fRY2,t.bBlack=this.bBlack,t.bCut=this.pRenderParam[e].bCut,t.nFishParamType=this.pFishParam[e].nFishParamType,t.fAngle=this.pFishParam[e].fAngle,t.fZoom=this.pFishParam[e].fZoom,t.fPTZX=this.pFishParam[e].fPTZX,t.fPTZY=this.pFishParam[e].fPTZY,1)}},{key:"GetRenderParam",value:function(e,t){return e<0||e>=ee||null==t||null==this.pRenderParam[e]?U:(t.fRXLeft=this.fRX1,t.fRXRight=this.fRX2,t.fRYTop=this.fRY1,t.fRYBottom=this.fRY2,t.bBlack=this.bBlack,t.fCosH=this.pRenderParam[e].fCosH,t.fSinH=this.pRenderParam[e].fSinH,t.fCosV=this.pRenderParam[e].fCosV,t.fSinV=this.pRenderParam[e].fSinV,t.fAngle=this.pRenderParam[e].fAngle,t.fZoom=this.pRenderParam[e].fZoom,t.nDisplayEffect=this.pRenderParam[e].nDisplayEffect,t.bCut=this.pRenderParam[e].bCut,1)}},{key:"UpdateCircyeParam",value:function(e,t,i,r){if(e<=-.5||e>=.4||t<=.6||t>=1.5||i<=-.5||i>=.4||r<=.6||r>=1.5||e+t<=.8||e+t>=1.2||i+r<=.8||i+r>=1.2)return U;if(e<0||t>1||i<0||r>1)for(var a=0;a<ee;++a)if(null!=this.pRenderParam[a]&&(Z.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[a].nDisplayEffect||Z.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[a].nDisplayEffect||Z.SR_DE_FISH_PTZ_WALL==this.pRenderParam[a].nDisplayEffect)){var n={};if(n.fHAngleCos=this.pRenderParam[a].fCosH,n.fHAngleSin=this.pRenderParam[a].fSinH,n.fVAngleCos=this.pRenderParam[a].fCosV,n.fVAngleSin=this.pRenderParam[a].fSinV,0==this.IsInImage(e,t,i,r,n,this.pRenderParam[a].fZoom,this.pRenderParam[a].nDisplayEffect))return U}return this.fRX1=e,this.fRX2=t,this.fRY1=i,this.fRY2=r,1}},{key:"UpdateWideScanAngle",value:function(e,t){return null==this.pRenderParam[e]?X:(Z.SR_DE_FISH_PANORAMA_FLOOR_360==this.pRenderParam[e].nDisplayEffect||Z.SR_DE_FISH_PANORAMA_FLOOR_180==this.pRenderParam[e].nDisplayEffect?this.pRenderParam[e].fAngle=t:Z.SR_DE_FISH_PANORAMA_CEILING_360!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PANORAMA_CEILING_180!=this.pRenderParam[e].nDisplayEffect||(this.pRenderParam[e].fAngle=-t),1)}},{key:"ComputeAngleVertical",value:function(e,t,i,r){var a=e,n=t,s=Math.sqrt((n-.5)*(n-.5)+(a-.5)*(a-.5));if(s>.5)return U;if(s<.001)return i.fVAngleCos=1,i.fVAngleSin=0,i.fHAngleCos=1,i.fHAngleSin=0,1;if(r==Z.SR_DE_FISH_PTZ_CEILING){i.fHAngleCos=(.5-n)/s,i.fHAngleSin=(.5-a)/s;var o=s*ae;i.fVAngleCos=Math.cos(o),i.fVAngleSin=Math.sin(o)}else{if(r!=Z.SR_DE_FISH_PTZ_FLOOR)return U;i.fHAngleCos=(n-.5)/s,i.fHAngleSin=(.5-a)/s;var x=s*ae;i.fVAngleCos=Math.cos(x),i.fVAngleSin=Math.sin(x)}return 1}},{key:"ComputeAngleHorizontal",value:function(e,t,i){var r,a,n,s,o,x,f,l=e;return(t-(o=.5))*(t-o)+(l-o)*(l-o)>.25?U:(x=(t-o)/o*ae/2,r=Math.cos(x),a=Math.sin(x),(l-o)/o/r>1||(l-o)/o/r<-1?U:(f=(l-o)/o/r*ae/2,n=Math.cos(f),s=Math.sin(f),i.fVAngleCos=r,i.fVAngleSin=a,i.fHAngleCos=n,i.fHAngleSin=s,1))}},{key:"IsInImage",value:function(e,t,i,r,a,n,s){return 1!=this.IsOutofImage(e,t,i,r,a.fHAngleCos,a.fHAngleSin,a.fVAngleCos,a.fVAngleSin,n,1,.5,s)&&1!=this.IsOutofImage(e,t,i,r,a.fHAngleCos,a.fHAngleSin,a.fVAngleCos,a.fVAngleSin,n,0,.5,s)&&1!=this.IsOutofImage(e,t,i,r,a.fHAngleCos,a.fHAngleSin,a.fVAngleCos,a.fVAngleSin,n,.5,1,s)&&1!=this.IsOutofImage(e,t,i,r,a.fHAngleCos,a.fHAngleSin,a.fVAngleCos,a.fVAngleSin,n,.5,0,s)&&1!=this.IsOutofImage(e,t,i,r,a.fHAngleCos,a.fHAngleSin,a.fVAngleCos,a.fVAngleSin,n,0,0,s)&&1!=this.IsOutofImage(e,t,i,r,a.fHAngleCos,a.fHAngleSin,a.fVAngleCos,a.fVAngleSin,n,0,1,s)&&1!=this.IsOutofImage(e,t,i,r,a.fHAngleCos,a.fHAngleSin,a.fVAngleCos,a.fVAngleSin,n,1,1,s)&&1!=this.IsOutofImage(e,t,i,r,a.fHAngleCos,a.fHAngleSin,a.fVAngleCos,a.fVAngleSin,n,1,0,s)}},{key:"IsOutofImage",value:function(e,t,i,r,a,n,s,o,x,f,l,h){var c,_,u,d,p,m,P,y,S,b,g,v,R;if(g=(e+t)/2*1,v=(i+r)/2*(b=(t-e)/(r-i)),R=(t-e)/2*1,h==Z.SR_DE_FISH_PTZ_CEILING){if(_=f-.5,u=(c=.5-l)*s+(m=x)*o,(P=m*s-c*o)<=0)return!0;S=Math.sqrt(_*_+u*u);var C=Math.sqrt(_*_+u*u+P*P),E=Math.asin(S/C)/1.5707963*.5;if(p=(-((_=E*_/S)*n+(u=E*u/S)*a)*R*2+v)/b,(d=((_*a-u*n)*R*2+g)/1)<0||d>1||p<0||p>1)return!0}if(h==Z.SR_DE_FISH_PTZ_FLOOR){if(_=f-.5,u=(c=l-.5)*s+(m=x)*o,(P=m*s-c*o)<=0)return!0;S=Math.sqrt(_*_+u*u);var F=Math.sqrt(_*_+u*u+P*P),T=Math.asin(S/F)/1.5707963*.5;if(p=(((_=T*_/S)*n+(u=T*u/S)*a)*R*2+v)/b,(d=((_*a-u*n)*R*2+g)/1)<0||d>1||p<0||p>1)return!0}if(h==Z.SR_DE_FISH_PTZ_WALL){if(d=(_=f-.5)*a+(P=(m=x)*s-(c=l-.5)*o)*n,p=u=c*s+m*o,(y=P*a-_*n)<=0)return!0;S=Math.sqrt(d*d+p*p);var D=Math.sqrt(d*d+p*p+y*y),I=Math.asin(S/D)/1.5707963*.5;if(p=(I*p/S*R*2+v)/b,(d=(I*d/S*R*2+g)/1)<0||d>1||p<0||p>1)return!0}return!1}},{key:"ComputePTZPoints",value:function(){if(xe==this.nWndPort)return X;for(var e=0;e<ee;++e)if(null!=this.pRenderParam[e]&&(Z.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[e].nDisplayEffect||Z.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[e].nDisplayEffect||Z.SR_DE_FISH_PTZ_WALL==this.pRenderParam[e].nDisplayEffect)){if(2==this.nPTZDisplayMode){if(1!=this.GetRangePoints(e))continue;if(1!=this.TransformPTZRangePoints(e))continue}else if(1==this.nPTZDisplayMode&&1!=this.GetRectPoints(e))continue}return 1}},{key:"GetWndPort",value:function(){return this.nWndPort}},{key:"GetPTZDisplayMode",value:function(){return this.nPTZDisplayMode}},{key:"GetPTZColor",value:function(e,t){return e<0||e>=ee||null==t?U:(t.fA=this.stPTZColor[e].fA,t.fR=this.stPTZColor[e].fR,t.fG=this.stPTZColor[e].fG,t.fB=this.stPTZColor[e].fB,null!=this.pPTZSetColor&&(Math.abs(this.pPTZSetColor[e].fA)<re||Math.abs(this.pPTZSetColor[e].fR)<re||Math.abs(this.pPTZSetColor[e].fG)<re||Math.abs(this.pPTZSetColor[e].fB)<re)&&(t.fA=this.pPTZSetColor[e].fA,t.fR=this.pPTZSetColor[e].fR,t.fG=this.pPTZSetColor[e].fG,t.fB=this.pPTZSetColor[e].fB),1)}},{key:"SetPTZColor",value:function(e,t){if(e<0||e>=ee)return U;if(null==t)return U;if(null==this.pPTZSetColor){this.pPTZSetColor=[];for(var i=0;i<ee;++i)this.pPTZSetColor[i]={},this.pPTZSetColor[i].fR=0,this.pPTZSetColor[i].fG=0,this.pPTZSetColor[i].fB=0,this.pPTZSetColor[i].fA=1}return this.pPTZSetColor[e].fR=t.fR,this.pPTZSetColor[e].fG=t.fG,this.pPTZSetColor[e].fB=t.fB,this.pPTZSetColor[e].fA=t.fA,1}},{key:"IsPTZSelected",value:function(e){return!(e<0||e>=ee)&&this.bPTZSelected[e]}},{key:"GetPTZPort",value:function(e,t,i){if(this.nWndPort==xe)return X;if(null==this.pRenderParam[this.nWndPort])return X;var r=ee,a={};a.fX=e,a.fY=t;for(var n=0;n<ee;++n)this.bPTZSelected[n]=!1;if(2==this.nPTZDisplayMode){switch(this.pRenderParam[this.nWndPort].nDisplayEffect){case Z.SR_DE_FISH_PANORAMA_FLOOR_360:this.GetPointPano2FishFloor(a,e,t);break;case Z.SR_DE_FISH_PANORAMA_CEILING_360:this.GetPointPano2FishCeiling(a,e,t);break;case Z.SR_DE_FISH_PANORAMA_WALL:this.GetPointPano2FishWall(a,e,t)}for(var s=0;s<ee;++s)if(0!=this.nOriPTZPointNum[s]){var o={};o.fX=this.pOriPTZPoints[s][0].fX,o.fY=this.pOriPTZPoints[s][0].fY;var x={};x.fX=this.pOriPTZPoints[s][0].fX,x.fY=this.pOriPTZPoints[s][0].fY;for(var f=1;f<this.nOriPTZPointNum[s];++f)this.GetPTZRectange(o,x,this.pOriPTZPoints[s][f]);if(a.fX<=o.fX&&a.fX>=x.fX&&a.fY>=x.fY&&a.fY<=o.fY){r=s;break}}}else{if(1!=this.nPTZDisplayMode)return N;for(var l=0;l<ee;++l)if(a.fX<=this.pRectPoints[l][2].fX&&a.fX>=this.pRectPoints[l][0].fX&&a.fY>=this.pRectPoints[l][0].fY&&a.fY<=this.pRectPoints[l][2].fY){r=l;break}}return r<ee?(this.bPTZSelected[r]=!0,i.nPTZPort=r,1):N}},{key:"SetPTZPort",value:function(e){if(e<0||e>=ee)return U;for(var t=0;t<ee;++t)this.bPTZSelected[t]=!1;if(2==this.nPTZDisplayMode){if(0==this.nOriPTZPointNum[e])return U;this.bPTZSelected[e]=!0}else{if(0==this.nPTZRectNum[e])return U;this.bPTZSelected[e]=!0}return 1}},{key:"GetPTZRectange",value:function(e,t,i){return i.fX<t.fX&&(t.fX=i.fX),i.fY<t.fY&&(t.fY=i.fY),i.fX>e.fX&&(e.fX=i.fX),i.fY>e.fY&&(e.fY=i.fY),1}},{key:"GetPTZPoints",value:function(e,t,i){return e<0||e>=ee?U:null==this.pRenderParam[this.nWndPort]?X:(2==i?null!=this.pOriPTZPoints[e]&&0!=this.nOriPTZPointNum[e]&&(t.pstPoints=this.pOriPTZPoints[e],t.nPointNum=this.nOriPTZPointNum[e]):1==i&&null!=this.pRectPoints[e]&&(t.pstPoints=this.pRectPoints[e],t.nPointNum=4),1)}},{key:"SetPTZDisplayMode",value:function(e){return this.nPTZDisplayMode=e,this.ComputePTZPoints()}},{key:"GetDisplayEffect",value:function(e){return e<0||e>=ee||null==this.pRenderParam?Z.SR_DE_NULL:this.pRenderParam[e].nDisplayEffect}},{key:"GetPTZFragmentPoints",value:function(e,t,i){if(e<0||e>=ee)return U;if(null==this.pPanoPTZPoints[e]||0==this.nPanoPTZPointNum[e])return U;var r=this.nPTZFragmentNode[e][i];if(t.nPointNum=this.nPTZFragmentNode[e][i+1]-this.nPTZFragmentNode[e][i],t.nPointNum<0)return X;t.pstPoints=[];for(var a=0;a<t.nPointNum;++a){var n={};n.fX=this.pPanoPTZPoints[e][r+a].fX,n.fY=this.pPanoPTZPoints[e][r+a].fY,t.pstPoints.push(n)}return 1}},{key:"GetPTZFragmentNum",value:function(e){return e<0||e>=ee||0==this.nPTZFragmentNum[e]?0:this.nPTZFragmentNum[e]}},{key:"CalcPTZFragmentPoints",value:function(e){if(e<0||e>=ee)return U;if(null==this.pPanoPTZPoints[e]||0==this.nPanoPTZPointNum[e])return X;this.nPTZFragmentNode[e][0]=0,this.nPTZFragmentNum[e]=1;for(var t=0,i=0;i<this.nPanoPTZPointNum[e]-1;i++)Math.abs(this.pPanoPTZPoints[e][i+1].fX-this.pPanoPTZPoints[e][i].fX)>.5&&(t=this.nPTZFragmentNum[e],this.nPTZFragmentNode[e][t]=i+1,this.nPTZFragmentNum[e]=this.nPTZFragmentNum[e]+1);var r=this.nPanoPTZPointNum[e];return Math.abs(this.pPanoPTZPoints[e][0].fX-this.pPanoPTZPoints[e][r-1].fX)<.5&&(this.pPanoPTZPoints[e][r].fX=this.pPanoPTZPoints[e][0].fX,this.pPanoPTZPoints[e][r].fY=this.pPanoPTZPoints[e][0].fY,this.nPanoPTZPointNum[e]=this.nPanoPTZPointNum[e]+1),t=this.nPTZFragmentNum[e],this.nPTZFragmentNode[e][t]=this.nPanoPTZPointNum[e],1}},{key:"IsPortAllocated",value:function(e){return this.bPortAllocated[e]}},{key:"GetPointFish2PanoCeiling",value:function(e,t,i){if(null==this.pRenderParam[this.nWndPort])return X;if(null==e)return U;var r,a;r=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),a=(this.fRX2-this.fRX1)/2*1;var n,s=0;(this.fRX2>1||this.fRY2>1||this.fRX1<0||this.fRY1<0)&&(this.fRX1<0&&(n=1*-this.fRX1)>s&&(s=n),this.fRX2>1&&(n=1*(this.fRX2-1))>s&&(s=n),this.fRY1<0&&(n=-this.fRY1*r)>s&&(s=n),this.fRY2>1&&(n=(this.fRY2-1)*r)>s&&(s=n));var o,x=s/a,f={fX:0,fY:0};if(Math.abs(t-.5)<re&&Math.abs(i-.5)<re)return N;var l={},h={};l.fX=t-.5,l.fY=i-.5,h.fX=-.5*Math.sin(this.pRenderParam[this.nWndPort].fAngle),h.fY=.5*Math.cos(this.pRenderParam[this.nWndPort].fAngle);var c=Math.sqrt(l.fX*l.fX+l.fY*l.fY),_=Math.sqrt(h.fX*h.fX+h.fY*h.fY);return o=Math.acos((l.fX*h.fX+l.fY*h.fY)/(c*_)),l.fX*h.fY-l.fY*h.fX>0&&(o=6.2831852-o),f.fX=o/6.2831853,f.fY=(2*(.5-c)-x)/(.8-x),f.fY>=0&&f.fX>=0&&f.fY<=1&&f.fX<=1?(e.fX=f.fX,e.fY=f.fY,1):U}},{key:"GetPointFish2PanoFloor",value:function(e,t,i){if(null==this.pRenderParam[this.nWndPort])return X;if(null==e)return U;var r,a;r=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),a=(this.fRX2-this.fRX1)/2*1;var n,s=0;(this.fRX2>1||this.fRY2>1||this.fRX1<0||this.fRY1<0)&&(this.fRX1<0&&(n=1*-this.fRX1)>s&&(s=n),this.fRX2>1&&(n=1*(this.fRX2-1))>s&&(s=n),this.fRY1<0&&(n=-this.fRY1*r)>s&&(s=n),this.fRY2>1&&(n=(this.fRY2-1)*r)>s&&(s=n));var o,x=s/a,f={fX:0,fY:0};if(Math.abs(t-.5)<re&&Math.abs(i-.5)<re)return N;var l={},h={};l.fX=t-.5,l.fY=i-.5,h.fX=-.5*Math.sin(this.pRenderParam[this.nWndPort].fAngle),h.fY=.5*Math.cos(this.pRenderParam[this.nWndPort].fAngle);var c=Math.sqrt(l.fX*l.fX+l.fY*l.fY),_=Math.sqrt(h.fX*h.fX+h.fY*h.fY);return o=Math.acos((l.fX*h.fX+l.fY*h.fY)/(c*_)),l.fX*h.fY-l.fY*h.fX>0&&(o=6.2831852-o),f.fX=1-o/6.2831853,f.fY=1-(2*(.5-c)-x)/(.8-x),f.fY>=0&&f.fX>=0&&f.fY<=1&&f.fX<=1?(e.fX=f.fX,e.fY=f.fY,1):U}},{key:"GetPointFish2PanoWall",value:function(e,t,i){if(null==this.pRenderParam[this.nWndPort])return X;if(null==e)return U;var r,a;r=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),a=(this.fRX2-this.fRX1)/2*1;var n,s,o,x,f,l=0,h=1,c=.1,_=.9;this.fRX1<0&&(n=1*-this.fRX1,l=n/=2*a),this.fRX2>1&&(s=1*(this.fRX2-1),h=1-(s/=2*a)),this.fRY1<0&&(o=-this.fRY1*r,c=(o/=2*a)>.1?o:.1),this.fRY2>1&&(x=(this.fRY2-1)*r,_=(x/=2*a)>1-.9?1-x:.9);var u={fX:0,fY:0},d=2*t*a,p=2*i*a;return f=Math.sqrt(a*a-(p-a)*(p-a)),Math.abs(f)<re?SR_ERR_PARAM:(t=a*(d-a)/f+a,i=p,u.fX=(t-2*l*a)/(2*(h-l)*a),u.fY=(i-2*c*a)/(2*(_-c)*a),u.fY>=0&&u.fX>=0&&u.fY<=1&&u.fX<=1?(e.fX=u.fX,e.fY=u.fY,1):U)}},{key:"UpdateRangeParam",value:function(e,t){if(null==this.pRenderParam[e])return X;if(t<1e-5||t>.6)return U;var i=0;return Z.SR_DE_FISH_PTZ_WALL!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PTZ_CEILING!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PTZ_FLOOR!=this.pRenderParam[e].nDisplayEffect||(i=7*t+.8,this.IsInImage(this.fRX1,this.fRX2,this.fRY1,this.fRY2,this.pRenderParam[e].fCosH,this.pRenderParam[e].fSinH,this.pRenderParam[e].fCosV,this.pRenderParam[e].fSinV,i,this.pRenderParam[e].nDisplayEffect))?(this.pRenderParam[e].fZoom=i,1):U}}]),t}(),ge=32,ve=function(){function t(){e(this,t),this.renderEngine="webgl",this.oVideoHandle=null,this.mainCanvasID=null,this.curTimestamp=0,this.mainSubPort=0,this.mainVaildSubPort=0,this.mainFECCorrect=Z.SR_DE_NULL,this.FECErrorCode=0,this.subPortNum=0,this.FECShowMode=2,this.pFishParamManager=null,this.InitFECParam(),this.privateLinesInfo=[],this.privateFontsInfo=[],this.privateImageInfo=[],this.bSRCallBackFlag=!1,this.curLinesInfo=null,this.curFontsInfo=null,this.curImagesInfo=null,this.maxPrivateLineTimeStamp=0,this.hasSetFECParamManager=!1,this.pWaterFontParam=[],this.pWaterImageParam=[],this.waterMarkImageIndex=0,this.waterMarkImageMax=1,this.aPOSAdaptBuf=[]}return s(t,[{key:"InitDisplay",value:function(e,t,i){return this.renderEngine=t,this.mainCanvasID=e,"2d"===this.renderEngine||"2D"===this.renderEngine?(this.oVideoHandle=new Se,console.log("2d render")):(this.oVideoHandle=new ye,this.mainFECCorrect!=Z.SR_DE_NULL&&(null==this.pFishParamManager&&(this.pFishParamManager=new be),this.oVideoHandle.SR_SetFishParamManager(this.pFishParamManager),this.hasSetFECParamManager=!0),console.log("webgl render")),this.oVideoHandle.SR_Init(e,i),this.mainVaildSubPort=this.oVideoHandle.SR_AddSubPort(this.mainFECCorrect),-1==this.mainVaildSubPort?(console.info("%c InitDisplay SR_AddSubPort error subport:%d","color: red",this.mainVaildSubPort),0):(null==this.stFishEyeManager[0].pRender&&this.mainFECCorrect!==Z.SR_DE_NULL&&(this.stFishEyeManager[0].pRender=this.oVideoHandle,this.stFishEyeManager[0].nSubPort=0,this.stFishEyeManager[0].sCanvasID=this.mainCanvasID,this.stFishEyeManager[0].bUsed=1,this.stFishEyeManager[0].bInited=1,this.stFishEyeManager[0].nValidSubPort=this.mainVaildSubPort),1)}},{key:"ReleaseDisplay",value:function(){if(null!=this.oVideoHandle&&(this.oVideoHandle.SR_DelSubPort(this.mainVaildSubPort),this.oVideoHandle.SR_Destroy(),this.oVideoHandle=null),this.subPortNum>0)for(var e=1;e<ge;e++)0!=this.stFishEyeManager[e].nSubPort&&null!=this.stFishEyeManager[e].sCanvasID&&0!=this.stFishEyeManager[e].bInited&&(this.FEC_Disable(e),this.FEC_DelPort(e));for(var t=0;t<ge;t++)this.stFishEyeManager[t].pRender=null;return this.stFishEyeManager.splice(0,this.stFishEyeManager.length),this.stFishParam.splice(0,this.stFishParam.length),null!=this.pFishParamManager&&(this.pFishParamManager.DeInit(),this.pFishParamManager=null),this.FECShowMode=2,this.DeInitPrivateParam(),1}},{key:"DeInitPrivateParam",value:function(){this.privateLinesInfo.splice(0,this.privateLinesInfo.length),this.privateFontsInfo.splice(0,this.privateFontsInfo.length),this.privateImageInfo.splice(0,this.privateImageInfo.length),this.pWaterFontParam.splice(0,this.pWaterFontParam.length),this.pWaterImageParam.splice(0,this.pWaterImageParam.length),this.bSRCallBackFlag=!1,this.curLinesInfo=null}},{key:"DisplayFrame",value:function(e,t,i,r,a,n){var s=this;return new Promise((function(o){var x=-1;if(null!=e&&(x=r),s.bSRCallBackFlag||(null!=s.oVideoHandle&&s.oVideoHandle.SR_SetCallBack(s.WebGLDisplayCallBack,s,0),s.bSRCallBackFlag=!0),null!=e&&(0==s.privateLinesInfo.length&&0==s.privateFontsInfo.length&&0==s.privateImageInfo.length||(s.curTimestamp=x,s.FindIntelNodefromList(s.curTimestamp)),null!=s.oVideoHandle&&s.oVideoHandle.SR_Draw(e,t,i,a,n),s.subPortNum>0))for(var f=1;f<ge;f++)0!=s.stFishEyeManager[f].nSubPort&&null!=s.stFishEyeManager[f].sCanvasID&&0!=s.stFishEyeManager[f].bInited&&null!=s.stFishEyeManager[f].pRender&&s.stFishEyeManager[f].pRender.SR_Draw(e,t,i,null,null);o(x)}))}},{key:"SetDisplayRect",value:function(e,t,i,r){return null!=this.oVideoHandle?this.oVideoHandle.SR_SetDisplayRect(e,t,i,r,1):0}},{key:"SetCanvasSize",value:function(e,t){return null!=this.oVideoHandle?this.oVideoHandle.SR_SetCanvasSize(e,t):0}},{key:"GetCanvasSize",value:function(){return null!=this.oVideoHandle?this.oVideoHandle.SR_GetCanvasSize():0}},{key:"SetAntialias",value:function(e){return null!=this.oVideoHandle?this.oVideoHandle.SR_SetAntialias(e):0}},{key:"SetD3DPostProcess",value:function(e,t){return null!=this.oVideoHandle?this.oVideoHandle.SR_SetImagePostProcess(e,t):0}},{key:"InitFECParam",value:function(){this.stFishEyeManager=[];for(var e=0;e<ge;e++)this.stFishEyeManager[e]={},this.stFishEyeManager[e].pRender=null,this.stFishEyeManager[e].nSubPort=0,this.stFishEyeManager[e].sCanvasID=null,this.stFishEyeManager[e].bUsed=0,this.stFishEyeManager[e].bInit=0,this.stFishEyeManager[e].nValidSubPort=0,this.stFishEyeManager[e].emPlaceType=3,this.stFishEyeManager[e].emCorrectType=0,this.stFishEyeManager[e].emEffect=Z.SR_DE_FISH_ORIGINAL;this.stFishParam=[];for(var t=0;t<ge;t++)this.stFishParam[t]={},this.stFishParam[t].nUpDateType=0,this.stFishParam[t].stPTZParam={},this.stFishParam[t].stPTZParam.fPTZPositionX=0,this.stFishParam[t].stPTZParam.fPTZPositionY=0,this.stFishParam[t].stCycleParam={},this.stFishParam[t].stCycleParam.fRadiusLeft=0,this.stFishParam[t].stCycleParam.fRadiusRight=0,this.stFishParam[t].stCycleParam.fRadiusTop=0,this.stFishParam[t].stCycleParam.fRadiusBottom=0,this.stFishParam[t].fZoom=0,this.stFishParam[t].fWideScanOffset=0,this.stFishParam[t].stPTZColor={},this.stFishParam[t].stPTZColor.nR=0,this.stFishParam[t].stPTZColor.nG=0,this.stFishParam[t].stPTZColor.nB=0,this.stFishParam[t].stPTZColor.nAlpha=0,this.stFishParam[t].stPTZSelect={},this.stFishParam[t].stPTZSelect.fTop=0,this.stFishParam[t].stPTZSelect.fBottom=0,this.stFishParam[t].stPTZSelect.fLeft=0,this.stFishParam[t].stPTZSelect.fRight=0,this.stFishParam[t].nCut=0}},{key:"FEC_SetCanvasID",value:function(e){return this.mainFECCorrect=Z.SR_DE_FISH_ORIGINAL,1}},{key:"FEC_ResetCorrectType",value:function(e,t,i){if(!1===this.hasSetFECParamManager&&(null==this.pFishParamManager&&(this.pFishParamManager=new be),this.oVideoHandle.SR_SetFishParamManager(this.pFishParamManager),this.hasSetFECParamManager=!0),0!=i&&i!=E&&i!=F&&i!=D&&i!=C&&i!=T&&i!=I&&i!=w&&i!=L)return console.log("%c 20231122 hardDecoder not support correctType:%d","color:red",i),this.FECErrorCode=16,0;if(1!=this.FECParamJudge(e,t,i))return 0;var r;if(r=this._ConvertDisplayEffect(t,i),0==e&&null==this.stFishEyeManager[e].pRender&&(this.stFishEyeManager[e].pRender=this.oVideoHandle,this.stFishEyeManager[e].nSubPort=e,this.stFishEyeManager[e].sCanvasID=this.mainCanvasID,this.stFishEyeManager[e].bUsed=1,this.stFishEyeManager[e].bInited=1,this.stFishEyeManager[e].nValidSubPort=this.mainVaildSubPort,this.stFishEyeManager[e].emPlaceType=t,this.stFishEyeManager[e].emCorrectType=i,this.stFishEyeManager[e].emEffect=r,this.mainFECCorrect=r),null!=this.stFishEyeManager[e].pRender){this.stFishEyeManager[e].pRender.SR_DelSubPort(this.stFishEyeManager[e].nValidSubPort);var a=this.stFishEyeManager[e].pRender.SR_AddSubPort(r);if(-1==a)return console.info("%c FEC_ResetCorrectType SR_AddSubPort error subport:%d","color: red",a),0;if(this.stFishEyeManager[e].nValidSubPort=a,this.stFishEyeManager[e].emPlaceType=t,this.stFishEyeManager[e].emCorrectType=i,this.stFishEyeManager[e].emEffect=r,D<=this.stFishEyeManager[e].emCorrectType){var n=this.stFishEyeManager[e].pRender.SR_SetRenderState(2,0);1!=n&&console.log(">>>VideoRender.js SR_SetRenderState failed ret：%08x\n",n)}}return this.FECShowMode>0&&null!=this.stFishEyeManager[e].pRender&&this.stFishEyeManager[e].pRender.SR_SetPTZDisplayMode(this.FECShowMode),0==e&&(this.mainVaildSubPort=this.stFishEyeManager[e].nValidSubPort),1}},{key:"FEC_GetPort",value:function(e,t){if(0!=t&&t!=E&&t!=F&&t!=D&&t!=C&&t!=T&&t!=I&&t!=w&&t!=L)return console.log("%c 20231112 hardDecoder not support emCorrectType:%d","color:red",t),this.FECErrorCode=16,-1;var i;if(1!=this.FECParamJudge(-1,e,t))return-1;var r,a=0;for(i=1;i<ge;i++)if(0==this.stFishEyeManager[i].nSubPort&&0==this.stFishEyeManager[i].bUsed){this.stFishEyeManager[i].nSubPort=i,this.stFishEyeManager[i].nValidSubPort=-1,this.stFishEyeManager[i].bUsed=1,this.stFishEyeManager[i].emPlaceType=e,this.stFishEyeManager[i].emCorrectType=t,a=i;break}return ge==i?(console.info("%c FEC_GetPort-12 fish subport max","color: red"),this.FECErrorCode=1284,-1):(r=this._ConvertDisplayEffect(this.stFishEyeManager[a].emPlaceType,this.stFishEyeManager[a].emCorrectType),Z.SR_DE_FISH_ORIGINAL!=r?(0==this.stFishEyeManager[a].bInited&&(this.stFishEyeManager[a].emEffect=r,this.stFishEyeManager[a].bInited=0,this.stFishParam[a].fZoom=.005,this.stFishParam[a].stPTZParam.fPTZPositionX=.5,this.stFishParam[a].stPTZParam.fPTZPositionY=.5,this.stFishParam[a].fWideScanOffset=0),this.FECErrorCode=0,this.subPortNum++,a):a<ge&&0==this.stFishEyeManager[a].bInited?(this.stFishEyeManager[a].emEffect=r,this.stFishEyeManager[a].bInited=0,this.stFishParam[a].fZoom=0,this.stFishParam[a].stPTZParam.fPTZPositionX=0,this.stFishParam[a].stPTZParam.fPTZPositionY=0,this.stFishParam[a].fWideScanOffset=0,this.FECErrorCode=0,this.subPortNum++,a):(this.stFishEyeManager[i].pRender=null,this.stFishEyeManager[i].nSubPort=0,this.stFishEyeManager[i].sCanvasID=null,this.stFishEyeManager[i].bUsed=0,this.stFishEyeManager[i].bInited=0,this.stFishEyeManager[i].nValidSubPort=0,this.stFishEyeManager[i].emPlaceType=3,this.stFishEyeManager[i].emCorrectType=0,this.stFishEyeManager[i].emEffect=Z.SR_DE_FISH_ORIGINAL,this.FECErrorCode=y,-1))}},{key:"FECParamJudge",value:function(e,t,i){if((2==t||3==t)&&T==i)return console.info("%c FEC_GetPort-1 floor and ceiling not support lat","color: red"),this.FECErrorCode=y,0;if(1==t&&I==i)return console.info("%c FEC_GetPort-2 wall not support cylinger","color: red"),this.FECErrorCode=y,0;if(1==t&&M==i)return console.info("%c FEC_GetPort-3 wall not support split cylinger","color: red"),this.FECErrorCode=y,0;if((2==t||3==t)&&w==i)return console.info("%c FEC_GetPort-4 floor and ceiling not support horizontal","color: red"),this.FECErrorCode=y,0;if((2==t||3==t)&&L==i)return console.info("%c FEC_GetPort-5 floor and ceiling not support vertical","color: red"),this.FECErrorCode=y,0;if(1!=t&&2!=t&&3!=t)return console.info("%c FEC_GetPort-6 emPlaceType only support floor, ceiling and wall","color: red"),this.FECErrorCode=MP_E_SUPPORT,0;if(0!=i&&i!=C&&i!=E&&i!=F&&i!=T&&i!=D&&i!=I&&i!=M&&i!=A&&i!=w&&i!=L)return console.info("%c FEC_GetPort-7 emCorrectType error","color: red"),this.FECErrorCode=MP_E_SUPPORT,0;for(var r=0;r<ge;r++)if(r!=e){if(this.stFishEyeManager[r].bUsed&&this.stFishEyeManager[r].emPlaceType!=t)return console.info("%c FEC_GetPort-8 emPlaceType changed","color: red"),this.FECErrorCode=1303,0;if(this.stFishEyeManager[r].bUsed&&this.stFishEyeManager[r].emCorrectType!=C&&this.stFishEyeManager[r].emCorrectType!=D&&this.stFishEyeManager[r].emCorrectType!=I&&this.stFishEyeManager[r].emCorrectType!=M&&this.stFishEyeManager[r].emCorrectType!=A&&this.stFishEyeManager[r].emCorrectType!=w&&this.stFishEyeManager[r].emCorrectType!=L&&i!=C&&i!=D&&i!=I&&i!=M&&i!=A&&i!=w&&i!=L)return console.info("%c FEC_GetPort-9 origin/180/360/lat only display one port","color: red"),this.FECErrorCode=1304,0;if(this.stFishEyeManager[r].bUsed&&(this.stFishEyeManager[r].emCorrectType==C&&i==E||this.stFishEyeManager[r].emCorrectType==E&&i==C))return console.info("%c FEC_GetPort-10 180 cannot support ptz","color: red"),this.FECErrorCode=1304,0}return 1}},{key:"FEC_Enable",value:function(e){return e<1||e>31||null==e?(console.info("%c FEC_Enable-1 nSubPort:%d","color: red",e),this.FECErrorCode=v,0):null!==this.stFishEyeManager[e].pRender?(console.info("%c FEC_Enable-2 nSubPort:%d","color: red",e),this.FECErrorCode=1301,0):(null==this.stFishEyeManager[e].pRender&&(this.stFishEyeManager[e].pRender=new ye,null==this.pFishParamManager&&(this.pFishParamManager=new be),this.stFishEyeManager[e].pRender.SR_SetFishParamManager(this.pFishParamManager)),1)}},{key:"FEC_SetWnd",value:function(e,t){if(e<1||e>31||null==e)return console.info("%c FEC_SetWnd-1 nSubPort:%d","color: red",e),this.FECErrorCode=v,0;if(null==this.stFishEyeManager[e].pRender)return console.info("%c FEC_SetWnd-2 nSubPort:%d pRender is null","color: red",e),this.FECErrorCode=m,0;if(0==this.stFishEyeManager[e].bUsed)return console.info("%c FEC_SetWnd-3 nSubPort:%d bUsed:%d","color: red",e,this.stFishEyeManager[e].bUsed),this.FECErrorCode=P,0;if(null==t)return console.info("%c FEC_SetWnd-4 nSubPort:%d sCanvasID:%s","color: red",e,t),this.FECErrorCode=1305,0;if(0!=this.stFishEyeManager[e].nSubPort&&0!=this.stFishEyeManager[e].bUsed){if(0!=this.stFishEyeManager[e].bInited&&null!=this.stFishEyeManager[e].sCanvasID)return t!=this.stFishEyeManager[e].sCanvasID?(console.info("%c FEC_SetWnd-5 nSubPort:%d sCanvasID:%s already init","color: red",e,t),this.FECErrorCode=1286,0):1;var i;i=this._ConvertDisplayEffect(this.stFishEyeManager[e].emPlaceType,this.stFishEyeManager[e].emCorrectType);var r=this.stFishEyeManager[e].pRender.SR_Init(t,j),a=this.stFishEyeManager[e].pRender.SR_AddSubPort(i);if(-1==a)return console.info("%c FEC_SetWnd SR_AddSubPort error subport:%d","color: red",e),0;if(this.stFishEyeManager[e].nValidSubPort=a,1!=r)return this.stFishEyeManager[e].bInited=0,this.stFishEyeManager[e].sCanvasID=null,this.FECErrorCode=P,0;if(this.stFishEyeManager[e].bInited=1,this.stFishEyeManager[e].sCanvasID=t,D<=this.stFishEyeManager[e].emCorrectType){var n=this.stFishEyeManager[e].pRender.SR_SetRenderState(2,0);1!=n&&console.log(">>>VideoRender.js SR_SetRenderState failed ret：%08x\n",n)}return this.FECShowMode>0&&this.stFishEyeManager[e].pRender.SR_SetPTZDisplayMode(this.FECShowMode),1}return this.FECErrorCode=P,0}},{key:"FEC_Disable",value:function(e,t,i){if(e<1||e>31||null==e)return console.info("%c FEC_Disable-1 nSubPort:%d","color: red",e),this.FECErrorCode=v,0;if(1==this.stFishEyeManager[e].bInited&&null!=this.stFishEyeManager[e].pRender){if(1!=this.stFishEyeManager[e].pRender.SR_DelSubPort(this.stFishEyeManager[e].nValidSubPort))return console.info("%c FEC_Disable-2 SR_DelSubPort error nSubPort:%d","color: red",e),0;this.stFishEyeManager[e].bInited=0,this.stFishEyeManager[e].nValidSubPort=-1,this.stFishEyeManager[e].pRender.SR_Destroy(),this.stFishEyeManager[e].pRender=null}return 1}},{key:"FEC_DelPort",value:function(e){return e<1||e>31||null==e?(console.info("%c FEC_DelPort-1 nSubPort:%d","color: red",e),this.FECErrorCode=v,0):0==this.stFishEyeManager[e].bUsed?(console.info("%c FEC_DelPort-2 nSubPort:%d bUsed：%d","color: red",e,this.stFishEyeManager[e].bUsed),this.FECErrorCode=P,0):(this.stFishEyeManager[e].nSubPort=0,this.stFishEyeManager[e].sCanvasID=null,this.stFishEyeManager[e].bUsed=0,this.stFishEyeManager[e].bInited=0,this.stFishEyeManager[e].nValidSubPort=0,this.stFishEyeManager[e].emPlaceType=3,this.stFishEyeManager[e].emCorrectType=0,this.stFishEyeManager[e].emEffect=Z.SR_DE_FISH_ORIGINAL,this.stFishParam[e].stCycleParam.fRadiusLeft=0,this.stFishParam[e].stCycleParam.fRadiusRight=1,this.stFishParam[e].stCycleParam.fRadiusTop=0,this.stFishParam[e].stCycleParam.fRadiusBottom=1,this.subPortNum>0&&this.subPortNum--,1)}},{key:"FEC_SetParam",value:function(e,t){if(this.FECErrorCode=0,e<0||e>31||null==e)return console.info("%c FEC_SetParam-1 nSubPort:%d","color: red",e),this.FECErrorCode=v,0;if(null==this.stFishEyeManager[e].pRender)return console.info("%c FEC_SetParam-2 nSubPort:%d pRender:%d","color: red",e,this.stFishEyeManager[e].pRender),this.FECErrorCode=m,0;if(0==this.stFishEyeManager[e].bUsed)return console.info("%c FEC_SetParam-3 nSubPort:%d bUsed:%d","color: red",e,this.stFishEyeManager[e].bUsed),this.FECErrorCode=P,0;if(this.stFishEyeManager[e].emCorrectType>=D&&this.stFishEyeManager[e].emCorrectType<=L&&30&t.upDateType)return console.info("%c FEC_SetParam-4 nSubPort:%d not 3D","color: red",e),this.FECErrorCode=g,0;if(1&t.upDateType){if(null==t.stCycleParam)return this.FECErrorCode=b,0;for(var i=1;i<ge;i++){if(this.stFishEyeManager[i].bUsed&&this.stFishEyeManager[i].nSubPort&&w==this.stFishEyeManager[i].emCorrectType&&(t.stCycleParam.fRadiusLeft<=-.5||t.stCycleParam.fRadiusLeft>=.4||t.stCycleParam.fRadiusRight<=.6||t.stCycleParam.fRadiusRight>=1.5||t.stCycleParam.fRadiusTop<=-.5||t.stCycleParam.fRadiusTop>0||t.stCycleParam.fRadiusBottom<1||t.stCycleParam.fRadiusBottom>=1.5||t.stCycleParam.fRadiusLeft+t.stCycleParam.fRadiusRight<=.8||t.stCycleParam.fRadiusLeft+t.stCycleParam.fRadiusRight>=1.2||t.stCycleParam.fRadiusTop+t.stCycleParam.fRadiusBottom<=.8||t.stCycleParam.fRadiusTop+t.stCycleParam.fRadiusBottom>=1.2))return this.FECErrorCode=b,0;if(this.stFishEyeManager[i].bUsed&&this.stFishEyeManager[i].nSubPort&&L==this.stFishEyeManager[i].emCorrectType&&(t.stCycleParam.fRadiusLeft<=-.5||t.stCycleParam.fRadiusLeft>0||t.stCycleParam.fRadiusRight<1||t.stCycleParam.fRadiusRight>=1.5||t.stCycleParam.fRadiusTop<=-.5||t.stCycleParam.fRadiusTop>=.4||t.stCycleParam.fRadiusBottom<=.6||t.stCycleParam.fRadiusBottom>=1.5||t.stCycleParam.fRadiusLeft+t.stCycleParam.fRadiusRight<=.8||t.stCycleParam.fRadiusLeft+t.stCycleParam.fRadiusRight>=1.2||t.stCycleParam.fRadiusTop+t.stCycleParam.fRadiusBottom<=.8||t.stCycleParam.fRadiusTop+t.stCycleParam.fRadiusBottom>=1.2))return this.FECErrorCode=b,0}}if(0==this.stFishEyeManager[e].bInited){if(4&t.upDateType){if(E!=this.stFishEyeManager[e].emCorrectType&&F!=this.stFishEyeManager[e].emCorrectType||1==this.stFishEyeManager[e].emPlaceType)return this.FECErrorCode=g,0;for(var r=1;r<ge;r++)if(this.stFishEyeManager[r].nSubPort&&this.stFishEyeManager[r].bUsed&&this.stFishEyeManager[r].emCorrectType==C)return this.FECErrorCode=S,0;this.stFishParam[e].fWideScanOffset=t.fValue}if(16&t.upDateType){if(null==t.stPTZColor)return this.FECErrorCode=b,0;if(t.stPTZColor.nR>255||t.stPTZColor.nG>255||t.stPTZColor.nB>255||t.stPTZColor.nAlpha>255)return this.FECErrorCode=g,0;this.stFishParam[e].stPTZColor.nR=t.stPTZColor.nR,this.stFishParam[e].stPTZColor.nG=t.stPTZColor.nG,this.stFishParam[e].stPTZColor.nB=t.stPTZColor.nB,this.stFishParam[e].stPTZColor.nAlpha=t.stPTZColor.nAlpha}if(8&t.upDateType){if(C!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=g,0;this.stFishParam[e].stPTZParam.fPTZPositionX=t.fPTZParam.fPTZPositionX,this.stFishParam[e].stPTZParam.fPTZPositionY=t.fPTZParam.fPTZPositionY}if(2&t.upDateType){if(C!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=g,0;this.stFishParam[e].fZoom=t.fPTZZoom}if(32&t.upDateType){if(null==this.stFishParam.stPTZSelect)return 0;if(C!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=g,0;this.stFishParam.stPTZSelect.fTop=t.stPTZSelect.fTop,this.stFishParam.stPTZSelect.fBottom=t.stPTZSelect.fBottom,this.stFishParam.stPTZSelect.fLeft=t.stPTZSelect.fLeft,this.stFishParam.stPTZSelect.fRight=t.stPTZSelect.fRight}if(1&t.upDateType){if(null==t.stCycleParam)return this.FECErrorCode=b,0;if(0==this._IsValidRadiusParam(t.stCycleParam))return this.FECErrorCode=b,0;this.stFishParam[0].stCycleParam.fRadiusLeft=t.stCycleParam.fRadiusLeft,this.stFishParam[0].stCycleParam.fRadiusRight=t.stCycleParam.fRadiusRight,this.stFishParam[0].stCycleParam.fRadiusTop=t.stCycleParam.fRadiusTop,this.stFishParam[0].stCycleParam.fRadiusBottom=t.stCycleParam.fRadiusBottom}return 1}if(4&t.upDateType){if(E!=this.stFishEyeManager[e].emCorrectType&&F!=this.stFishEyeManager[e].emCorrectType||1==this.stFishEyeManager[e].emPlaceType)return this.FECErrorCode=g,0;for(var a=1;a<ge;a++)if(this.stFishEyeManager[a].nSubPort&&this.stFishEyeManager[a].bUsed&&this.stFishEyeManager[a].emCorrectType==C)return this.FECErrorCode=S,0;var n={nFishParamType:2,bBlack:0};if(n.fAngle=t.fValue,1!=this.stFishEyeManager[e].pRender.SR_SetFishParam(n))return this.FECErrorCode=S,0;this.stFishParam[e].fWideScanOffset=t.fValue}if(16&t.upDateType){if(null==t.stPTZColor)return this.FECErrorCode=g,0;if(t.stPTZColor.nR>255||t.stPTZColor.nG>255||t.stPTZColor.nB>255||t.stPTZColor.nAlpha>255)return this.FECErrorCode=g,0;var s={};s.fR=float(t.stPTZColor.nR/255),s.fG=float(t.stPTZColor.nG/255),s.fB=float(t.stPTZColor.nB/255),s.fA=float(t.stPTZColor.nAlpha/255),this.stFishParam[e].stPTZColor.nR=t.stPTZColor.nR,this.stFishParam[e].stPTZColor.nG=t.stPTZColor.nG,this.stFishParam[e].stPTZColor.nB=t.stPTZColor.nB,this.stFishParam[e].stPTZColor.nAlpha=t.stPTZColor.nAlpha}if(8&t.upDateType){if(C!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=g,0;var o={nFishParamType:4,bBlack:0};if(o.fPTZX=t.fPTZParam.fPTZPositionX,o.fPTZY=t.fPTZParam.fPTZPositionY,1!=this.stFishEyeManager[e].pRender.SR_SetFishParam(o))return this.FECErrorCode=S,0;this.stFishParam[e].stPTZParam.fPTZPositionX=t.fPTZParam.fPTZPositionX,this.stFishParam[e].stPTZParam.fPTZPositionY=t.fPTZParam.fPTZPositionY}if(2&t.upDateType){if(C!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=g,0;var x={nFishParamType:3,bBlack:0};if(x.fZoom=t.fPTZZoom,1!=this.stFishEyeManager[e].pRender.SR_SetFishParam(x))return this.FECErrorCode=S,0;this.stFishParam[e].fZoom=t.fPTZZoom}if(1&t.upDateType){if(0==this._IsValidRadiusParam(t.stCycleParam))return this.FECErrorCode=b,0;var f={nFishParamType:1,bBlack:1};if(f.fRXLeft=t.stCycleParam.fRadiusLeft,f.fRXRight=t.stCycleParam.fRadiusRight,f.fRYTop=t.stCycleParam.fRadiusTop,f.fRYBottom=t.stCycleParam.fRadiusBottom,1!=this.stFishEyeManager[e].pRender.SR_SetFishParam(this.stFishEyeManager[e].nValidSubPort,f))return this.FECErrorCode=b,0;this.stFishParam[0].stCycleParam.fRadiusLeft=t.stCycleParam.fRadiusLeft,this.stFishParam[0].stCycleParam.fRadiusRight=t.stCycleParam.fRadiusRight,this.stFishParam[0].stCycleParam.fRadiusTop=t.stCycleParam.fRadiusTop,this.stFishParam[0].stCycleParam.fRadiusBottom=t.stCycleParam.fRadiusBottom}return 32&t.upDateType&&C==this.stFishEyeManager[e].emCorrectType&&1!=this.stFishEyeManager[e].pRender.SR_SetFishParam(this.stFishEyeManager[e].stPTZSelect)?(this.FECErrorCode=1299,0):1}},{key:"FEC_GetParam",value:function(e,t){return e<0||e>31||null==e?(console.info("%c FEC_GetParam-1 nSubPort:%d","color: red",e),this.FECErrorCode=v,0):null==this.stFishEyeManager[e].pRender?(console.info("%c FEC_GetParam-2 pRender:%d","color: red",this.stFishEyeManager[e].pRender),this.FECErrorCode=m,0):(this.stFishEyeManager[e].pRender.SR_GetFishParam(t),t.emCorrectType=this.stFishEyeManager[e].emCorrectType,1)}},{key:"_IsValidRadiusParam",value:function(e){return e.fRadiusBottom<=e.fRadiusTop||e.fRadiusRight<=e.fRadiusLeft?0:1}},{key:"FEC_SetViewParam",value:function(e,t,i){return e<0||e>31||null==e?(console.info("%c FEC_SetViewParam-1 nSubPort:%d","color: red",e),this.FECErrorCode=v,0):null==this.stFishEyeManager[e].pRender?(console.info("%c FEC_SetViewParam-2 pRender:%d","color: red",this.stFishEyeManager[e].pRender),this.FECErrorCode=m,0):t<1||t>3?(this.FECErrorCode=R,0):(this.FECErrorCode=0,0==this.stFishEyeManager[e].bInited?(this.FECErrorCode=P,0):D<=this.stFishEyeManager[e].emCorrectType?1!=this.stFishEyeManager[e].pRender.SR_SetViewParam(t,i)?(this.FECErrorCode=R,0):1:(this.FECErrorCode=g,0))}},{key:"FEC_GetViewParam",value:function(e,t,i){return i.fValue=-1,e<0||e>31||null==e?(console.info("%c FEC_GetViewParam-1 nSubPort:%d","color: red",e),this.FECErrorCode=v,0):null==this.stFishEyeManager[e].pRender?(console.info("%c FEC_GetViewParam-2 pRender:%d","color: red",this.stFishEyeManager[e].pRender),this.FECErrorCode=m,0):t<1||t>3||0==this.stFishEyeManager[e].bInited?0:(D<=this.stFishEyeManager[e].emCorrectType&&this.stFishEyeManager[e].pRender.SR_GetViewParam(t,i),1)}},{key:"FEC_SetDisplayRegion",value:function(e,t,i,r,a,n,s){return e<0||e>31||null==e?(console.info("%c FEC_SetDisplayRegion-1 nSubPort:%d","color: red",e),this.FECErrorCode=v,0):null==this.stFishEyeManager[e].pRender?(console.info("%c FEC_SetDisplayRegion-2 pRender:%d","color: red",this.stFishEyeManager[e].pRender),this.FECErrorCode=m,0):0!=t||0!=i?(this.FECErrorCode=R,0):0!=this.stFishEyeManager[e].emCorrectType&&this.stFishEyeManager[e].emCorrectType!=E&&this.stFishEyeManager[e].emCorrectType!=F&&this.stFishEyeManager[e].emCorrectType!=T?(this.FECErrorCode=y,0):0==this.stFishEyeManager[e].bInited?(this.FECErrorCode=P,0):r<0||a<0||n<0||s<0?(this.FECErrorCode=R,0):1!=this.stFishEyeManager[e].pRender.SR_SetDisplayRect(r,a,n,s,1)?(this.FECErrorCode=1297,0):1}},{key:"FEC_SetBackCilling",value:function(e,t){return e<0||e>31||null==e?(this.FECErrorCode=v,0):null==this.stFishEyeManager[e].pRender?(this.FECErrorCode=m,0):0==this.stFishEyeManager[e].bInited?(this.FECErrorCode=P,0):1!=this.stFishEyeManager[e].pRender.SR_SetRenderState(2,t)?(this.FECErrorCode=1297,0):1}},{key:"FEC_GetPTZPort",value:function(e,t,i){if(null!=this.stFishEyeManager[e].pRender){var r={nPTZPort:-1};if(1==this.stFishEyeManager[e].pRender.SR_GetPTZPort(t,i,r))return r.nPTZPort}return-1}},{key:"FEC_SetPTZDisplayMode",value:function(e){return e>=0&&e<=2?(null!=this.stFishEyeManager[0].pRender&&this.stFishEyeManager[0].pRender.SR_SetPTZDisplayMode(e),this.FECShowMode=e,1):(console.info("%c FEC_SetPTZDisplayMode ptzMode:%d","color: red",e),0)}},{key:"CheckFrameRGB",value:function(e,t,i,r,a,n){if(null==e)return 0;for(var s=e.width/(r-1),o=e.height/(i-1),x=0,f=0,l=[],h=0;h<i*r;h++)l[h]=0,this.aPOSAdaptBuf[h]=0;if(t){for(var c=0,_=0;_<e.height;_++)for(var u=0;u<e.width;u++){x=(x=Math.round(u/(s/2)/2))<r?x:r-1,f=(f=Math.round(_/(o/2)/2))<i?f:i-1;var d=e.pBuffer[c],p=e.pBuffer[c+1],m=e.pBuffer[c+2],P=Math.round(.299*d+.587*p+.114*m);this.aPOSAdaptBuf[x+f*r]+=P,l[x+f*r]++,c+=4}for(var y=0,S=0;S<i*r;S++)y=this.aPOSAdaptBuf[S]/l[S],this.aPOSAdaptBuf[S]=y>128?0:1}else{for(var b=Math.round(a*e.width),g=Math.round(n*e.height),v=g-2;v<g+2;v++)for(var R=b-2;R<b+2;R++){var C=4*Math.floor((4*R+v*e.width*4)/4),E=e.pBuffer[C],F=e.pBuffer[C+1],T=e.pBuffer[C+2],D=Math.round(.299*E+.587*F+.114*T);this.aPOSAdaptBuf[0]+=D,l[0]++}this.aPOSAdaptBuf[0]=this.aPOSAdaptBuf[0]/l[0]>128?0:1}return 1}},{key:"GetWaterFontParam",value:function(e){var t=e.pFontString.length,i=e.pstFontRotate.fRotateAngle%360/360*2*Math.PI,r=Math.min(e.pstFontSize.nFontWidth,e.pstFontSize.nFontHeight),a=r/this.mainCanvasID.width,n=r/this.mainCanvasID.height,s=a*Math.cos(Math.PI/2-i)*e.pSpace,o=n*Math.sin(Math.PI/2-i)*e.pSpace,x=[],f=[],l=[];if(e.nFontAlign)for(var h=0;h<t;h++)x[h]=e.pFontString[0].length*a/6,f[h]=Math.atan2(x[0],o),l[h]=Math.sqrt(x[0]*x[0],o*o);else for(var c=0;c<t;c++)x[c]=0,f[c]=0,l[c]=0;var _=Math.floor(e.pstFontNumber.nRowNumber),u=Math.floor(e.pstFontNumber.nColNumber),d=_*u;if(e.pstFontRotate.fFillFullScreen){for(var p=[],m=[],P=1/(_-1),y=0;y<_;y++)p[y]=P*y-o*((t-1)/2);for(var S=1/(u-1),b=0;b<u;b++)m[b]=S*b+s*((t-1)/2);for(var g=0;g<d;++g)for(var v=0;v<t;v++){this.pWaterFontParam[t*g+v]={},this.pWaterFontParam[t*g+v].pString=e.pFontString[v],this.pWaterFontParam[t*g+v].nFontWidth=r,this.pWaterFontParam[t*g+v].nFontHeight=r,this.pWaterFontParam[t*g+v].pstStartPos={};var R=g%u,C=Math.floor(g/u),E=Math.PI/2-i+f[v];this.pWaterFontParam[t*g+v].pstStartPos.fX=m[R]-v*s+l[v]*Math.cos(E),this.pWaterFontParam[t*g+v].pstStartPos.fY=p[C]+v*o-l[v]*Math.sin(E),e.nColorAdapt?(this.pWaterFontParam[t*g+v].pstFontColor={},this.pWaterFontParam[t*g+v].pstFontColor.fR=this.aPOSAdaptBuf[g],this.pWaterFontParam[t*g+v].pstFontColor.fG=this.aPOSAdaptBuf[g],this.pWaterFontParam[t*g+v].pstFontColor.fB=this.aPOSAdaptBuf[g],this.pWaterFontParam[t*g+v].pstFontColor.fA=e.pstFontColor.fA):this.pWaterFontParam[t*g+v].pstFontColor=e.pstFontColor,this.pWaterFontParam[t*g+v].bBackGround=!1,this.pWaterFontParam[t*g+v].pstBGColor=null,this.pWaterFontParam[t*g+v].fRotateAngle=e.pstFontRotate.fRotateAngle,this.pWaterFontParam[t*g+v].pFontFamily=e.pFontFamily,e.nFontAlign?(this.pWaterFontParam[t*g+v].textAlign="left",this.pWaterFontParam[t*g+v].textBaseline="top"):(this.pWaterFontParam[t*g+v].textAlign="center",this.pWaterFontParam[t*g+v].textBaseline="middle")}}else for(var F=0;F<e.pFontString.length;F++)this.pWaterFontParam[F]={},this.pWaterFontParam[F].pString=e.pFontString[F],this.pWaterFontParam[F].nFontWidth=r,this.pWaterFontParam[F].nFontHeight=r,this.pWaterFontParam[F].pstStartPos={},this.pWaterFontParam[F].pstStartPos.fX=e.pstStartPos.fX-F*s,this.pWaterFontParam[F].pstStartPos.fY=e.pstStartPos.fY+F*o,e.nColorAdapt?(this.pWaterFontParam[F].pstFontColor={},this.pWaterFontParam[F].pstFontColor.fR=this.aPOSAdaptBuf[0],this.pWaterFontParam[F].pstFontColor.fG=this.aPOSAdaptBuf[0],this.pWaterFontParam[F].pstFontColor.fB=this.aPOSAdaptBuf[0],this.pWaterFontParam[F].pstFontColor.fA=e.pstFontColor.fA):this.pWaterFontParam[F].pstFontColor=e.pstFontColor,this.pWaterFontParam[F].bBackGround=!1,this.pWaterFontParam[F].pstBGColor=null,this.pWaterFontParam[F].fRotateAngle=e.pstFontRotate.fRotateAngle,this.pWaterFontParam[F].pFontFamily=e.pFontFamily,e.nFontAlign?(this.pWaterFontParam[F].textAlign="left",this.pWaterFontParam[F].textBaseline="top"):(this.pWaterFontParam[F].textAlign="center",this.pWaterFontParam[F].textBaseline="middle");return 1}},{key:"SetWaterMarkFont",value:function(e,t){if(this.pWaterFontParam.splice(0,this.pWaterFontParam.length),null===e)return 1;if(e.nColorAdapt){var i={nWidth:16,nHeight:16,nBufferLen:0};if(1==this.oVideoHandle.SR_GetCaptureSize(i)){var r=new Uint8Array(i.nBufferLen),a={};if(a.pBuffer=r,this.oVideoHandle.SR_CaptureScreen(a),a.width=i.nWidth,a.height=i.nHeight,e.pstFontRotate.fFillFullScreen){var n=Math.floor(e.pstFontNumber.nRowNumber),s=Math.floor(e.pstFontNumber.nColNumber);this.CheckFrameRGB(a,1,n,s,0,0)}else this.CheckFrameRGB(a,0,1,1,e.pstStartPos.fX,e.pstStartPos.fY);r=null}}return this.GetWaterFontParam(e),1}},{key:"ImageDecoder",value:function(e,t,i){var r=this;e.decode({frameIndex:i}).then((function(a){r.pWaterImageParam[i]={},r.pWaterImageParam[i].videoStream=a.image,r.pWaterImageParam[i].nImageWidth=a.image.displayWidth,r.pWaterImageParam[i].nImageHeight=a.image.displayHeight,null!=t.pstRectPos?r.pWaterImageParam[i].pstRectPos=t.pstRectPos:r.pWaterImageParam[i].pstRectPos={fLeft:0,fRight:.1,fTop:0,fBottom:.1},null!=t.fAlpha&&t.fAlpha<=1&&t.fAlpha>=0?r.pWaterImageParam[i].fAlpha=t.fAlpha:r.pWaterImageParam[i].fAlpha=1,r.waterMarkImageMax=e.tracks.selectedTrack.frameCount,i<e.tracks.selectedTrack.frameCount-1&&r.ImageDecoder(e,t,i+1)}))}},{key:"SetWaterMarkImage",value:function(e){if(this.pWaterImageParam.splice(0,this.pWaterImageParam.length),null===e)return 1;if(null!=e.pImageData){var t=new ImageDecoder({data:e.pImageData,type:"image/"+e.pImageType});t.tracks.ready.then((function(){})),this.ImageDecoder(t,e,0)}return this.waterMarkImageIndex=0,1}},{key:"_ConvertDisplayEffect",value:function(e,t){switch(e){case 1:return C==t?Z.SR_DE_FISH_PTZ_WALL:F==t||T==t?Z.SR_DE_FISH_PANORAMA_WALL:D==t?Z.SR_DE_FISH_SEMISPHERE:A==t?Z.SR_DE_FISH_PLANET:w==t?Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:L==t?Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:Z.SR_DE_FISH_ORIGINAL;case 2:return C==t?Z.SR_DE_FISH_PTZ_FLOOR:F==t?Z.SR_DE_FISH_PANORAMA_FLOOR_360:E==t?Z.SR_DE_FISH_PANORAMA_FLOOR_180:T==t?Z.SR_DE_FISH_PANORAMA_WALL:D==t?Z.SR_DE_FISH_SEMISPHERE:I==t?Z.SR_DE_FISH_CYLINDER_FLOOR:M==t?Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR:A==t?Z.SR_DE_FISH_PLANET:Z.SR_DE_FISH_ORIGINAL;case 3:return C==t?Z.SR_DE_FISH_PTZ_CEILING:F==t?Z.SR_DE_FISH_PANORAMA_CEILING_360:E==t?Z.SR_DE_FISH_PANORAMA_CEILING_180:T==t?Z.SR_DE_FISH_PANORAMA_WALL:D==t?Z.SR_DE_FISH_SEMISPHERE:I==t?Z.SR_DE_FISH_CYLINDER_CEILING:M==t?Z.SR_DE_FISH_CYLINDER_SPLIT_CEILING:A==t?Z.SR_DE_FISH_PLANET:Z.SR_DE_FISH_ORIGINAL;default:return Z.SR_DE_FISH_ORIGINAL}}},{key:"GetCanvasData",value:function(e){var t={nWidth:0,nHeight:0,nBufferLen:0};(1!=this.oVideoHandle.SR_GetCaptureSize(t)||t.nBufferLen<=0)&&e(null);var i=new Uint8Array(t.nBufferLen);null==i&&e(null);var r={};r.pBuffer=i,this.oVideoHandle.SR_CaptureScreen(r),e(i,t.nWidth,t.nHeight)}},{key:"FindIntelNodefromList",value:function(e){if(0!=this.privateLinesInfo.length){var t=this.privateLinesInfo[0].absTimeStamp;if(t<=e+100&&t>e-100)this.curLinesInfo=this.privateLinesInfo.shift();else if(t>e+2e3||t<e-2e3)for(this.curLinesInfo=this.privateLinesInfo.shift();this.privateLinesInfo.length>0;){var i=this.privateLinesInfo[0].absTimeStamp;if(!(i>e+2e3||i<e-2e3))break;this.curLinesInfo=this.privateLinesInfo.shift()}}if(0!=this.privateFontsInfo.length){var r=this.privateFontsInfo[0].absTimeStamp;if(r<=e+1e3&&r>e-1e3)this.curFontsInfo=this.privateFontsInfo.shift();else if(r>e+2e3||r<e-2e3)for(this.curFontsInfo=this.privateFontsInfo.shift();this.privateFontsInfo.length>0;){var a=this.privateFontsInfo[0].absTimeStamp;if(!(a>e+2e3||a<e-2e3))break;this.curFontsInfo=this.privateFontsInfo.shift()}}if(0!=this.privateImageInfo.length){var n=this.privateImageInfo[0].absTimeStamp;if(n<=e+1e3&&n>e-1e3)this.curImagesInfo=this.privateImageInfo.shift();else if(n>e+2e3||n<e-2e3)for(this.curImagesInfo=this.privateImageInfo.shift();this.privateImageInfo.length>0;){var s=this.privateImageInfo[0].absTimeStamp;if(!(s>e+2e3||s<e-2e3))break;this.curImagesInfo=this.privateImageInfo.shift()}}return 1}},{key:"RenderPrivateData",value:function(e){return 0!=this.privateLinesInfo.length||e||(this.curLinesInfo=null),1}},{key:"InputPrivateInfo",value:function(e,t,i){var r=!1,a=0;if(e.linesNum>0){if(e.absTimeStamp<=this.maxPrivateLineTimeStamp){var n=0;for(n=0;n<this.privateLinesInfo.length;n++)if(this.privateLinesInfo[n].absTimeStamp==e.absTimeStamp){r=!0,a=n;break}}if(r){var s=this.privateLinesInfo[a].linesNum;this.privateLinesInfo[a].linesNum=s+e.linesNum;for(var o=0;o<e.linesNum;o++){this.privateLinesInfo[a].stDrawLinesArray[o+s]={},this.privateLinesInfo[a].stDrawLinesArray[o+s].vertex_num=e.stDrawLinesArray[o].vertex_num,this.privateLinesInfo[a].stDrawLinesArray[o+s].lineWidth=e.stDrawLinesArray[o].lineWidth,this.privateLinesInfo[a].stDrawLinesArray[o+s].bFill=e.stDrawLinesArray[o].bFill,this.privateLinesInfo[a].stDrawLinesArray[o+s].bLoop=e.stDrawLinesArray[o].bLoop,this.privateLinesInfo[a].stDrawLinesArray[o+s].color={},this.privateLinesInfo[a].stDrawLinesArray[o+s].color.R=e.stDrawLinesArray[o].color.R,this.privateLinesInfo[a].stDrawLinesArray[o+s].color.G=e.stDrawLinesArray[o].color.G,this.privateLinesInfo[a].stDrawLinesArray[o+s].color.B=e.stDrawLinesArray[o].color.B,this.privateLinesInfo[a].stDrawLinesArray[o+s].color.A=e.stDrawLinesArray[o].color.A,this.privateLinesInfo[a].stDrawLinesArray[o+s].stPoint=[];for(var x=0;x<e.stDrawLinesArray[o].vertex_num;x++)this.privateLinesInfo[a].stDrawLinesArray[o+s].stPoint[x]={},this.privateLinesInfo[a].stDrawLinesArray[o+s].stPoint[x].x=e.stDrawLinesArray[o].stPoint[x].x,this.privateLinesInfo[a].stDrawLinesArray[o+s].stPoint[x].y=e.stDrawLinesArray[o].stPoint[x].y}}else{this.maxPrivateLineTimeStamp<e.absTimeStamp&&(this.maxPrivateLineTimeStamp=e.absTimeStamp);var f={};f.linesNum=e.linesNum,f.absTimeStamp=e.absTimeStamp,f.stDrawLinesArray=[];for(var l=0;l<e.linesNum;l++){f.stDrawLinesArray[l]={},f.stDrawLinesArray[l].vertex_num=e.stDrawLinesArray[l].vertex_num,f.stDrawLinesArray[l].lineWidth=e.stDrawLinesArray[l].lineWidth,f.stDrawLinesArray[l].bFill=e.stDrawLinesArray[l].bFill,f.stDrawLinesArray[l].bLoop=e.stDrawLinesArray[l].bLoop,f.stDrawLinesArray[l].color={},f.stDrawLinesArray[l].color.R=e.stDrawLinesArray[l].color.R,f.stDrawLinesArray[l].color.G=e.stDrawLinesArray[l].color.G,f.stDrawLinesArray[l].color.B=e.stDrawLinesArray[l].color.B,f.stDrawLinesArray[l].color.A=e.stDrawLinesArray[l].color.A,f.stDrawLinesArray[l].stPoint=[];for(var h=0;h<e.stDrawLinesArray[l].vertex_num;h++)f.stDrawLinesArray[l].stPoint[h]={},f.stDrawLinesArray[l].stPoint[h].x=e.stDrawLinesArray[l].stPoint[h].x,f.stDrawLinesArray[l].stPoint[h].y=e.stDrawLinesArray[l].stPoint[h].y}this.privateLinesInfo.push(f)}}if(t.nFontsNum>0){if(t.absTimeStamp<=this.maxPrivateLineTimeStamp){var c=0;for(c=0;c<this.privateFontsInfo.length;c++)if(this.privateFontsInfo[c].absTimeStamp==t.absTimeStamp){r=!0,a=c;break}}if(r);else{this.maxPrivateLineTimeStamp<t.absTimeStamp&&(this.maxPrivateLineTimeStamp=t.absTimeStamp);var _={};_.nFontsNum=t.nFontsNum,_.absTimeStamp=t.absTimeStamp,_.stDrawFontsArray=[];for(var u=0;u<t.nFontsNum;u++)_.stDrawFontsArray[u]={},_.stDrawFontsArray[u].nFontSizeW=t.stDrawFontsArray[u].nFontSizeW,_.stDrawFontsArray[u].nFontSizeH=t.stDrawFontsArray[u].nFontSizeH,_.stDrawFontsArray[u].color={},_.stDrawFontsArray[u].color.R=t.stDrawFontsArray[u].color.R,_.stDrawFontsArray[u].color.G=t.stDrawFontsArray[u].color.G,_.stDrawFontsArray[u].color.B=t.stDrawFontsArray[u].color.B,_.stDrawFontsArray[u].color.A=t.stDrawFontsArray[u].color.A,_.stDrawFontsArray[u].stPoint={},_.stDrawFontsArray[u].stPoint.x=t.stDrawFontsArray[u].stPoint.x,_.stDrawFontsArray[u].stPoint.y=t.stDrawFontsArray[u].stPoint.y,_.stDrawFontsArray[u].fontstring=t.stDrawFontsArray[u].fontString;this.privateFontsInfo.push(_)}}if(i.nPixelFormat>0){if(i.absTimeStamp<=this.maxPrivateLineTimeStamp){var d=0;for(d=0;d<this.privateImageInfo.length;d++)if(this.privateImageInfo[d].absTimeStamp==i.absTimeStamp){r=!0,a=d;break}}if(r);else{this.maxPrivateLineTimeStamp<i.absTimeStamp&&(this.maxPrivateLineTimeStamp=i.absTimeStamp);var p={};p.absTimeStamp=i.absTimeStamp,p.nWidth=i.nWidth,p.nHeight=i.nHeight,p.pstRect={},p.pstRect.fTop=i.pstRect.fTop,p.pstRect.fBottom=i.pstRect.fBottom,p.pstRect.fLeft=i.pstRect.fLeft,p.pstRect.fRight=i.pstRect.fRight,p.nPixelFormat=i.nPixelFormat,p.fAlpha=i.fAlpha,p.picImageData=i.picImageData,this.privateImageInfo.push(p)}}return 1}},{key:"WebGLDisplayCallBack",value:function(e){if(0!=e.privateLinesInfo.length||null!=e.curLinesInfo){if(null!=e.curLinesInfo){for(var t=[],i=0,r=1,a=0;a<e.curLinesInfo.linesNum;a++){t[a]={},t[a].nPointNum=e.curLinesInfo.stDrawLinesArray[a].vertex_num,t[a].nLineWidth=e.curLinesInfo.stDrawLinesArray[a].lineWidth,r=e.curLinesInfo.stDrawLinesArray[a].bFill,t[a].bLoop=e.curLinesInfo.stDrawLinesArray[a].bLoop,t[a].pstColor={},t[a].pstColor.fR=e.curLinesInfo.stDrawLinesArray[a].color.R,t[a].pstColor.fG=e.curLinesInfo.stDrawLinesArray[a].color.G,t[a].pstColor.fB=e.curLinesInfo.stDrawLinesArray[a].color.B,t[a].pstColor.fA=e.curLinesInfo.stDrawLinesArray[a].color.A,t[a].pstPoints=[];for(var n=0;n<t[a].nPointNum;n++)t[a].pstPoints[n]={},t[a].pstPoints[n].fX=e.curLinesInfo.stDrawLinesArray[a].stPoint[n].x,t[a].pstPoints[n].fY=e.curLinesInfo.stDrawLinesArray[a].stPoint[n].y;i+=t[a].nPointNum}e.oVideoHandle.SR_DrawLinesEx(t,e.curLinesInfo.linesNum,i,r)}e.curLinesInfo=null}if((0!=e.privateFontsInfo.length||null!=e.curFontsInfo)&&null!=e.curFontsInfo&&0!=e.curFontsInfo.nFontsNum){for(var s=[],o=0;o<e.curFontsInfo.nFontsNum;o++){var x={},f=e.curFontsInfo.stDrawFontsArray[o].fontstring,l={};l.fX=e.curFontsInfo.stDrawFontsArray[o].stPoint.x,l.fY=e.curFontsInfo.stDrawFontsArray[o].stPoint.y;var h={fR:1,fG:0,fB:0};h.fA=e.curFontsInfo.stDrawFontsArray[o].color.A;var c=e.curFontsInfo.stDrawFontsArray[o].nFontSizeW,_=e.curFontsInfo.stDrawFontsArray[o].nFontSizeH;x.pString=f,x.pstStartPos=l,x.nFontWidth=c,x.nFontHeight=_,x.pstFontColor=h,x.bBackGround=!1,x.pstBGColor=null,x.fRotateAngle=0,x.pFontFamily="sans-serif",s.push(x)}e.oVideoHandle.SR_DrawFontEx(s,e.curFontsInfo.nFontsNum)}if(0!=e.privateImageInfo.length||null!=e.curImagesInfo){var u=null;null!=e.curImagesInfo&&null!=e.curImagesInfo&&null!=e.curImagesInfo.picImageData&&null!=e.curImagesInfo.picImageData&&(u=new Uint16Array(e.curImagesInfo.picImageData.buffer)),null!=e.curImagesInfo&&e.curImagesInfo.nPixelFormat>0&&e.oVideoHandle.SR_DrawImage(u,e.curImagesInfo.nWidth,e.curImagesInfo.nHeight,e.curImagesInfo.pstRect,e.curImagesInfo.nPixelFormat,e.curImagesInfo.fAlpha)}if(0!==e.pWaterFontParam.length&&e.oVideoHandle.SR_DrawFontEx(e.pWaterFontParam,e.pWaterFontParam.length),0!==e.pWaterImageParam.length){e.waterMarkImageIndex>=e.waterMarkImageMax&&(e.waterMarkImageIndex=0);var d=e.waterMarkImageIndex;e.oVideoHandle.SR_DrawImage(e.pWaterImageParam[d].videoStream,e.pWaterImageParam[d].nImageWidth,e.pWaterImageParam[d].nImageHeight,e.pWaterImageParam[d].pstRectPos,j,e.pWaterImageParam[d].fAlpha),e.waterMarkImageIndex++}}}]),t}(),Re=function(){function t(){e(this,t),this.startTime=0,this.curTime=0,this.timeWalk=0,this.lastDate=0,this.preTimerStamp=0}return s(t,[{key:"Init",value:function(){this.startTime=this.GetCurTime()}},{key:"GetCurTime",value:function(){return this.curTime=60*(new Date).getHours()*60*1e3+60*(new Date).getMinutes()*1e3+1e3*(new Date).getSeconds()+(new Date).getMilliseconds(),this.lastDate=(new Date).getDate(),this.curTime}},{key:"GetTimerWalk",value:function(){var e=this.GetCurTime()-this.startTime;return this.lastDate!==(new Date).getDate()&&(e+=24*((new Date).getDate()-this.lastDate)*60*60*1e3),e}},{key:"timerReset",value:function(){this.startTime=0,this.curTime=0,this.timeWalk=0,this.lastDate=0,this.preTimerStamp=0}}]),t}(),Ce=function(){function t(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e(this,t),this.canvas=null,this.streamOpenMode=0,this.context=null,this.oVideoDecoder=null,this.frameBuffers=[],this.initTimer=!1,this.preTimeStamp=0,this.baseTimeStamp=0,this.resetTimer=!0,this.RenderFrame=this.RenderFrame.bind(this),this.renderCurStatus=2,this.playSpeed=1,this.nplaySpeed=1,this.displayBuf=14,this.needForward=!1,this.firstFrame=!0,this.LatcyTime=0,this.displayFrameInfoCB=null,this.displayFrameInfo=[],this.curFrameInfo={},this.curFrameInfo.timeStamp=0,this.sx=0,this.sy=0,this.sw=0,this.sh=0,this.displayRunning=!1,this.oRenderTimer=null,this.waitIFrameTimestamp=0,this.curFrame=null,this.player=null,null!=i&&(this.player=i),this.renderEngine="webgl",this.oVideoRender=null,this.FECCanvasID="",this.oVideoRender=new ve}return s(t,[{key:"init",value:function(e,t,i,r){this.canvas=e,this.streamOpenMode=t,this.renderEngine=r,this.SetCurStatus(2),null==this.oVideoDecoder&&(this.oVideoDecoder=new V(i,this,this.player),null!==this.oVideoDecoder&&this.oVideoDecoder.initDecoder()),this.frameBuffers=this.oVideoDecoder.ready_frames,null!=this.oVideoRender&&this.oVideoRender.InitDisplay(this.canvas,this.renderEngine,256),null==this.oRenderTimer&&(this.oRenderTimer=new Re)}},{key:"HardDecodeError",value:function(){return this.player._switchHardToSoft(),1}},{key:"inputData",value:function(e,t){var i={};i.port=t.port,i.codecType=t.codecType,i.frameType=t.frameType,i.frameSize=t.frameSize,i.width=t.width,i.height=t.height,i.timeStamp=t.timeStamp,i.frameRate=t.frameRate,i.frameNum=t.frameNum,i.interlace=t.interlace,i.streamEnd=t.streamEnd,i.cropLeft=t.cropLeft,i.cropRight=t.cropRight,i.cropTop=t.cropTop,i.cropBottom=t.cropBottom,i.year=t.year,i.month=t.month,i.week=t.week,i.day=t.day,i.hour=t.hour,i.minute=t.minute,i.second=t.second,i.milliseconds=t.milliseconds,this.displayFrameInfo.push(i),this.oVideoDecoder.inputData(e,t)}},{key:"_resetDecoder",value:function(){var e=this;return new Promise((function(t,i){e.oVideoDecoder.resetDecoder().then((function(){e.displayFrameInfo.splice(0,e.displayFrameInfo.length),e.curFrameInfo={},e.oVideoRender.DeInitPrivateParam(),e.renderCurStatus=2,e.player?e.player.JSPlayM4_ResetEnd():postMessage({function:"resetEnd"}),t()}),(function(){i()}))}))}},{key:"_resetRenderTimer",value:function(){this.initTimer=!1,this.preTimeStamp=0,this.baseTimeStamp=0,this.resetTimer=!0,null!=this.oRenderTimer&&this.oRenderTimer.timerReset(),this.RenderFrame=this.RenderFrame.bind(this),this.renderCurStatus=2,this.curTimeStamp=0,this.getImageJPEG=!1,this.getImageBMP=!1,this.getCropImageJPEG=!1,this.getCropImageBMP=!1,this.displayFrameInfoCB=null,this.displayFrameInfo.splice(0,this.displayFrameInfo.length),this.curFrameInfo={}}},{key:"_destroyPlayCtrl",value:function(){var e=this;this.oVideoDecoder.destroyDecoder().then((function(){e.oVideoDecoder=null,null!=e.oVideoRender&&(e.oVideoRender.ReleaseDisplay(),e.oVideoRender=null),e._resetRenderTimer(),e.oRenderTimer=null,e.displayRunning=!1,console.log(">>>JS 02 destroy oVideoDecoder/oVideoRender")}),(function(){console.log("stop failed ")}))}},{key:"RenderFrame",value:function(){var e=this;switch(this.renderCurStatus){case 0:this._resetRenderTimer(),this._resetDecoder().then((function(){var t=setTimeout((function(){e.RenderFrame(),clearTimeout(t)}),1)}),(function(){}));break;case 2:if(this.displayRunning)this.chooseFrame().then((function(t){if(e.curFrame=t,-1==e.displayBuf||0==e.streamOpenMode&&0==e.LatcyTime)null!=e.curFrame&&(e.curTimeStamp=e.curFrame.timestamp,e.paint(e.curFrame)),requestAnimationFrame(e.RenderFrame);else if(null!=e.curFrame){e.initTimer&&!e.resetTimer||(e.oRenderTimer.Init(),e.initTimer=!0,e.resetTimer=!1,e.preTimeStamp=e.curFrame.timestamp,e.baseTimeStamp=e.curFrame.timestamp,1==e.streamOpenMode&&(e.LatcyTime=0)),e.curTimeStamp=e.curFrame.timestamp;var i=e.curTimeStamp-e.preTimeStamp,r=e.curTimeStamp-e.baseTimeStamp;(i>5e3||i<0||r<0)&&(e.oRenderTimer.Init(),e.preTimeStamp=e.curFrame.timestamp,e.baseTimeStamp=e.curTimeStamp);var a=(e.curTimeStamp-e.baseTimeStamp+e.LatcyTime)/e.playSpeed-e.oRenderTimer.GetTimerWalk();if(a<15&&a>-15)e.paint(e.curFrame),e.preTimeStamp=e.curTimeStamp,e.RenderFrame();else if(a<0)e.paint(e.curFrame),e.preTimeStamp=e.curTimeStamp,e.RenderFrame();else var n=setTimeout((function(){2==e.renderCurStatus?(e.paint(e.curFrame),e.preTimeStamp=e.curTimeStamp,e.RenderFrame()):e.RenderFrame(),clearTimeout(n)}),a-5)}else{e.playSpeed;var s=setTimeout((function(){e.RenderFrame(),clearTimeout(s)}),0)}}));else var t=setTimeout((function(){e.RenderFrame(),clearTimeout(t)}),5);break;case 3:var i=setTimeout((function(){e._refresh(),e.RenderFrame(),clearTimeout(i)}),5);break;case 5:if(this.needForward)this.chooseFrame().then((function(t){e.curFrame=t;var i=setTimeout((function(){null!=e.curFrame&&(e.paint(e.curFrame),e.needForward=!1),e.RenderFrame(),clearTimeout(i)}),1)}));else var r=setTimeout((function(){e._refresh(),e.RenderFrame(),clearTimeout(r)}),5);break;case 4:return void this._destroyPlayCtrl();default:return}}},{key:"paint",value:function(e){var t=this;return new Promise((function(i,r){if(4==t.curstatus||null==e||null==t.oVideoRender)i();else{t.waitIFrameTimestamp===e.timestamp&&(t.resetTimer=!0);var a={nCropLeft:0,nCropRight:0,nCropTop:0,nCropBottom:0};a.nCodeWidth=e.displayWidth,a.nCodeHeight=e.displayHeight;var n={x:0,y:0};n.width=e.displayWidth,n.height=e.displayHeight,t.oVideoRender.DisplayFrame(e,e.displayWidth,e.displayHeight,e.timestamp,a,null).then((function(e){null!==t.displayFrameInfoCB&&t.respondFrameInfoCB(e),t.firstFrame&&(null!=t.player?null!=t.player.FFCallBackFun&&t.player.FFCallBackFun():postMessage({function:"firstFrameCB",value:!0}),t.firstFrame=!1),i()}))}}))}},{key:"respondFrameInfoCB",value:function(e){if(0!=this.displayFrameInfo.length&&this.curFrameInfo.timeStamp!==e){for(var t={},i=0;i<this.displayFrameInfo.length&&(t=this.displayFrameInfo.shift()).timeStamp!=e;i++);this.curFrameInfo.port=t.port,this.curFrameInfo.codecType=t.codecType,this.curFrameInfo.frameType=t.frameType,this.curFrameInfo.frameSize=t.frameSize,this.curFrameInfo.width=t.width,this.curFrameInfo.height=t.height,this.curFrameInfo.timeStamp=t.timeStamp,this.curFrameInfo.frameRate=t.frameRate,this.curFrameInfo.frameNum=t.frameNum,this.curFrameInfo.interlace=t.interlace,this.curFrameInfo.streamEnd=t.streamEnd,this.curFrameInfo.cropLeft=t.cropLeft,this.curFrameInfo.cropRight=t.cropRight,this.curFrameInfo.cropTop=t.cropTop,this.curFrameInfo.cropBottom=t.cropBottom,this.curFrameInfo.year=t.year,this.curFrameInfo.month=t.month,this.curFrameInfo.week=t.week,this.curFrameInfo.day=t.day,this.curFrameInfo.hour=t.hour,this.curFrameInfo.minute=t.minute,this.curFrameInfo.second=t.second,this.curFrameInfo.milliseconds=t.milliseconds,this.displayFrameInfoCB(this.curFrameInfo)}}},{key:"postImageData",value:function(e,t,i,r,a){this.player?(this.getImageJPEG&&(this.getImageJPEG=!1,this.player._GetImage2(e,t,i,r,"jpeg",a,0,0,0,0)),this.getImageBMP&&(this.getImageBMP=!1,this.player._GetImage2(e,t,i,r,"bmp",a,0,0,0,0)),this.getCropImageJPEG&&(this.getCropImageJPEG=!1,this.player._GetImage2(e,t,i,r,"jpeg",a,this.sx,this.sy,this.sw,this.sh)),this.getCropImageBMP&&(this.getCropImageBMP=!1,this.player._GetImage2(e,t,i,r,"bmp",a,this.sx,this.sy,this.sw,this.sh))):(this.getImageJPEG&&(this.getImageJPEG=!1,postMessage({function:"imageYUV",value:e.buffer,size:t,width:i,height:r,type:"jpeg",yuvType:a,sx:0,sy:0,sw:0,sh:0},[e.buffer])),this.getImageBMP&&(this.getImageBMP=!1,postMessage({function:"imageYUV",value:e.buffer,size:t,width:i,height:r,type:"bmp",yuvType:a,sx:0,sy:0,sw:0,sh:0},[e.buffer])),this.getCropImageJPEG&&(this.getCropImageJPEG=!1,postMessage({function:"imageYUV",value:e.buffer,size:t,width:i,height:r,type:"jpeg",yuvType:a,sx:this.sx,sy:this.sy,sw:this.sw,sh:this.sh},[e.buffer])),this.getCropImageBMP&&(this.getCropImageBMP=!1,postMessage({function:"imageYUV",value:e.buffer,size:t,width:i,height:r,type:"bmp",yuvType:a,sx:this.sx,sy:this.sy,sw:this.sw,sh:this.sh},[e.buffer])))}},{key:"chooseFrame",value:function(){var e=this;return new Promise((function(t,i){if(null==e.oVideoRender||null==e.oVideoDecoder)t(null);else if(e.oVideoDecoder.decoderObjNeedReset)e.oVideoDecoder.resetDecoder().then((function(){e.oVideoDecoder.decoderObjNeedReset=!1,t(null)}),(function(){i()}));else{var r=e.oVideoDecoder.GetFrameBufferLength();1==e.streamOpenMode&&r<3?t(null):e.oVideoDecoder.GetFrame().then((function(e){t(e)}),(function(){}))}}))}},{key:"SetDisplayRegion",value:function(e,t,i,r){return null==this.oVideoRender?0:(this.sx=e,this.sy=t,this.sw=i,this.sh=r,this.oVideoRender.SetDisplayRect(e,t,i,r))}},{key:"SetCurStatus",value:function(e){return this.renderCurStatus=e,1}},{key:"fast",value:function(){var e=this._GetFastSpeed(this.nplaySpeed);return this._SetPlaySpeed(e)}},{key:"slow",value:function(){var e=this._GetSlowSpeed(this.nplaySpeed);return this._SetPlaySpeed(e)}},{key:"Pause",value:function(e){if(e)this.SetCurStatus(3);else{if(3!==this.renderCurStatus)return-1;this.SetCurStatus(2),this.resetTimer=!0}return 1}},{key:"_refresh",value:function(){0!=this.frameBuffers.length&&this.paint(this.frameBuffers[0])}},{key:"OneByOne",value:function(e){if(e)this.SetCurStatus(5),this.needForward=!0;else{if(5!==this.renderCurStatus)return-1;this.SetCurStatus(2),this.resetTimer=!0,this.needForward=!1,this._SetPlaySpeed(1)}return 1}},{key:"SetCanvasSize",value:function(e,t){return null!=this.oVideoRender&&this.oVideoRender.SetCanvasSize(e,t)}},{key:"GetCanvasSize",value:function(){return null!=this.oVideoRender&&this.oVideoRender.GetCanvasSize()}},{key:"GetPlayedTime",value:function(){return this.curTimeStamp}},{key:"_SetPlaySpeed",value:function(e){switch(e){case-16:case-8:case-4:case-2:case 1:case 2:case 4:case 8:case 16:case 32:case 64:break;default:return-1}return e===this.nplaySpeed||(this.nplaySpeed=e,this.playSpeed=e>0?e:-1/e,console.log("playSpeed:"+this.playSpeed),this.resetTimer=!0,this.needForward=!1,2!=this.renderCurStatus&&this.SetCurStatus(2)),1}},{key:"_GetFastSpeed",value:function(e){var t=0;switch(e){case-16:t=-8;break;case-8:t=-4;break;case-4:t=-2;break;case-2:t=1;break;case 1:t=2;break;case 2:t=4;break;case 4:t=8;break;case 8:t=16;break;case 16:t=32;break;case 32:t=64;break;default:t=0}return t}},{key:"_GetSlowSpeed",value:function(e){var t=0;switch(e){case-8:t=-16;break;case-4:t=-8;break;case-2:t=-4;break;case 1:t=-2;break;case 2:t=1;break;case 4:t=2;break;case 8:t=4;break;case 16:t=8;break;case 32:t=16;break;case 64:t=32;break;default:t=0}return t}},{key:"SetDisplayBuf",value:function(e){return this.displayBuf=e,this.LatcyTime=1==e?0:15==e?700:45==e?1900:e>6&&e<45?40*e+100:-1==e?0:50,1}},{key:"GetJPEG",value:function(){var e=this;this.oVideoDecoder.GetImageYUV().then((function(t){var i=t.yuvFrameBuffer,r=t.yuvLength,a=t.displayWidth,n=t.displayHeight,s=t.yuvType;-1!=i&&(e.player?e.player._GetImage2(i,r,a,n,"jpeg",s,0,0,0,0):postMessage({function:"imageYUV",value:i.buffer,size:r,width:a,height:n,type:"jpeg",yuvType:s,sx:0,sy:0,sw:0,sh:0},[i.buffer]))}),(function(){}))}},{key:"GetBMP",value:function(){var e=this;this.oVideoDecoder.GetImageYUV().then((function(t){var i=t.yuvFrameBuffer,r=t.yuvLength,a=t.displayWidth,n=t.displayHeight,s=t.yuvType;-1!=i&&(e.player?e.player._GetImage2(i,r,a,n,"bmp",s,0,0,0,0):postMessage({function:"imageYUV",value:i.buffer,size:r,width:a,height:n,type:"bmp",yuvType:s,sx:0,sy:0,sw:0,sh:0},[i.buffer]))}),(function(){}))}},{key:"GetCropJPEG",value:function(){var e=this;this.oVideoDecoder.GetImageYUV().then((function(t){var i=t.yuvFrameBuffer,r=t.yuvLength,a=t.displayWidth,n=t.displayHeight,s=t.yuvType;-1!=i&&(e.player?e.player._GetImage2(i,r,a,n,"jpeg",s,e.sx,e.sy,e.sw,e.sh):postMessage({function:"imageYUV",value:i.buffer,size:r,width:a,height:n,type:"jpeg",yuvType:s,sx:e.sx,sy:e.sy,sw:e.sw,sh:e.sh},[i.buffer]))}),(function(){}))}},{key:"GetCropBMP",value:function(){var e=this;this.oVideoDecoder.GetImageYUV().then((function(t){var i=t.yuvFrameBuffer,r=t.yuvLength,a=t.displayWidth,n=t.displayHeight,s=t.yuvType;-1!=i&&(e.player?e.player._GetImage2(i,r,a,n,"bmp",s,e.sx,e.sy,e.sw,e.sh):postMessage({function:"imageYUV",value:i.buffer,size:r,width:a,height:n,type:"bmp",yuvType:s,sx:e.sx,sy:e.sy,sw:e.sw,sh:e.sh},[i.buffer]))}),(function(){}))}},{key:"GetCanvasCapture",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support GetCanvasCapture","color:red"),0):(this.oVideoRender.GetCanvasData(e),1)}},{key:"SetDecodeFrameType",value:function(e){return this.waitIFrameTimestamp=e,1}},{key:"SetStreamEnd",value:function(){return this.oVideoDecoder.SetStreamEnd(),1}},{key:"SetAntialias",value:function(e){return null!=this.oVideoRender?this.oVideoRender.SetAntialias(e):0}},{key:"SetFrameInfoCallBack",value:function(e,t){return this.displayFrameInfoCB=t?e:null,1}},{key:"FEC_SetCanvasID",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetCanvasID(e):(this.FECCanvasID=e,0)}},{key:"FEC_ResetCorrectType",value:function(e,t,i){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_ResetCorrectType(e,t,i):0}},{key:"FEC_GetPort",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),-1):null!=this.oVideoRender?this.oVideoRender.FEC_GetPort(e,t):-1}},{key:"FEC_Enable",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_Enable(e):0}},{key:"FEC_SetParam",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetParam(e,t):0}},{key:"FEC_GetParam",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_GetParam(e,t):0}},{key:"FEC_SetViewParam",value:function(e,t,i){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetViewParam(e,t,i):0}},{key:"FEC_GetViewParam",value:function(e,t,i){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_GetViewParam(e,t,i):0}},{key:"FEC_SetWnd",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetWnd(e,t):0}},{key:"FEC_Disable",value:function(e,t,i){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_Disable(e,t,i):0}},{key:"FEC_DelPort",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_DelPort(e):0}},{key:"FEC_SetDisplayRegion",value:function(e,t,i,r,a,n,s){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetDisplayRegion(e,t,i,r,a,n,s):0}},{key:"FEC_SetBackCilling",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetBackCilling(e,t):0}},{key:"FEC_GetPTZPort",value:function(e,t,i){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),-1):null!=this.oVideoRender?this.oVideoRender.FEC_GetPTZPort(e,t,i):-1}},{key:"FEC_SetPTZDisplayMode",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetPTZDisplayMode(e):0}},{key:"InputPrivateInfo",value:function(e,t,i){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support PrivateInfo","color:red"),0):null!=this.oVideoRender?this.oVideoRender.InputPrivateInfo(e,t,i):1}},{key:"RenderPrivateData",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support PrivateInfo","color:red"),0):null!=this.oVideoRender?this.oVideoRender.RenderPrivateData(e):1}},{key:"SetWaterMarkFont",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine||null==this.oVideoRender?(console.log("%c param error this.renderEngine:%d,this.oVideoRender:%d","color:red",this.renderEngine,this.oVideoRender),0):(null!=this.oVideoRender&&this.oVideoRender.SetWaterMarkFont(e,{yuvFrameBuffer:-1,yuvLength:-1,displayWidth:-1,displayHeight:-1,yuvType:-1}),1)}},{key:"SetWaterMarkImage",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support SetWaterMarkImage","color:red"),0):null!=this.oVideoRender?this.oVideoRender.SetWaterMarkImage(e):1}},{key:"SetD3DPostProcess",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support SetD3DPostProcess","color:red"),0):null!=this.oVideoRender?this.oVideoRender.SetD3DPostProcess(e,t):1}}]),t}(),Ee=function(){function t(i){e(this,t),this.player=i,this.oVideoPlayCtrl=new Ce(i)}return s(t,[{key:"init",value:function(e,t,i,r){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.init(e,t,i,r)}},{key:"inputData",value:function(e,t){null!=this.oVideoPlayCtrl&&this.oVideoPlayCtrl.inputData(e,t)}},{key:"SetDisplayRegion",value:function(e,t,i,r){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.SetDisplayRegion(e,t,i,r)}},{key:"stop",value:function(){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.SetCurStatus(4),this.oVideoPlayCtrl=null,console.log(">>>JS 03 destroy oVideoPlayCtrl")}},{key:"fast",value:function(){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.fast()?0:void 0}},{key:"slow",value:function(){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.slow()?0:void 0}},{key:"SetDisplayBuf",value:function(e){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.SetDisplayBuf(e)?0:void 0}},{key:"Pause",value:function(e){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.Pause(e)?0:void 0}},{key:"OneByOne",value:function(e){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.OneByOne(e)?0:void 0}},{key:"SetCanvasSize",value:function(e,t){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.SetCanvasSize(e,t)?0:void 0}},{key:"GetCanvasSize",value:function(){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.GetCanvasSize()?0:void 0}},{key:"GetPlayedTime",value:function(){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.GetPlayedTime()}},{key:"needReset",value:function(){this.oVideoPlayCtrl.SetCurStatus(0)}},{key:"GetJPEG",value:function(){this.oVideoPlayCtrl.GetJPEG()}},{key:"GetBMP",value:function(){this.oVideoPlayCtrl.GetBMP()}},{key:"GetCropJPEG",value:function(){this.oVideoPlayCtrl.GetCropJPEG()}},{key:"GetCropBMP",value:function(){this.oVideoPlayCtrl.GetCropBMP()}},{key:"JSPlayM4_GetCanvasCapture",value:function(e){this.oVideoPlayCtrl.GetCanvasCapture(e)}},{key:"SetDecodeFrameType",value:function(e){this.oVideoPlayCtrl.SetDecodeFrameType(e)}},{key:"streamEnd",value:function(){this.oVideoPlayCtrl.SetStreamEnd()}},{key:"SetAntialias",value:function(e){return this.oVideoPlayCtrl.SetAntialias(e)}},{key:"SetFrameInfoCallBack",value:function(e,t){return this.oVideoPlayCtrl.SetFrameInfoCallBack(e,t)}},{key:"FEC_SetCanvasID",value:function(e){return this.oVideoPlayCtrl.FEC_SetCanvasID(e)}},{key:"FEC_ResetCorrectType",value:function(e,t,i){return this.oVideoPlayCtrl.FEC_ResetCorrectType(e,t,i)}},{key:"FEC_GetPort",value:function(e,t){return this.oVideoPlayCtrl.FEC_GetPort(e,t)}},{key:"FEC_Enable",value:function(e){return this.oVideoPlayCtrl.FEC_Enable(e)}},{key:"FEC_SetParam",value:function(e,t){return this.oVideoPlayCtrl.FEC_SetParam(e,t)}},{key:"FEC_GetParam",value:function(e,t){return this.oVideoPlayCtrl.FEC_GetParam(e,t)}},{key:"FEC_SetViewParam",value:function(e,t,i){return this.oVideoPlayCtrl.FEC_SetViewParam(e,t,i)}},{key:"FEC_GetViewParam",value:function(e,t,i){return this.oVideoPlayCtrl.FEC_GetViewParam(e,t,i)}},{key:"FEC_SetWnd",value:function(e,t){return this.oVideoPlayCtrl.FEC_SetWnd(e,t)}},{key:"FEC_Disable",value:function(e,t,i){return this.oVideoPlayCtrl.FEC_Disable(e,t,i)}},{key:"FEC_DelPort",value:function(e){return this.oVideoPlayCtrl.FEC_DelPort(e)}},{key:"FEC_SetDisplayRegion",value:function(e,t,i,r,a,n,s){return this.oVideoPlayCtrl.FEC_SetDisplayRegion(e,t,i,r,a,n,s)}},{key:"FEC_SetBackCilling",value:function(e,t){return this.oVideoPlayCtrl.FEC_SetBackCilling(e,t)}},{key:"FEC_GetPTZPort",value:function(e,t,i){return this.oVideoPlayCtrl.FEC_GetPTZPort(e,t,i)}},{key:"FEC_SetPTZDisplayMode",value:function(e){return this.oVideoPlayCtrl.FEC_SetPTZDisplayMode(e)}},{key:"InputPrivateInfo",value:function(e,t,i){return this.oVideoPlayCtrl.InputPrivateInfo(e,t,i)}},{key:"RenderPrivateData",value:function(e){return this.oVideoPlayCtrl.RenderPrivateData(e)}},{key:"SetWaterMarkFont",value:function(e){return this.oVideoPlayCtrl.SetWaterMarkFont(e)}},{key:"SetWaterMarkImage",value:function(e){return this.oVideoPlayCtrl.SetWaterMarkImage(e)}},{key:"SetD3DPostProcess",value:function(e,t){return this.oVideoPlayCtrl.SetD3DPostProcess(e,t)}}]),t}(),Fe=[];!function(){for(var e=0;e<8;e++){Fe[e]=[];for(var t=0;t<64;t++)Fe[e][t]=null}}();var Te=null,De=!1,Ie=1,Me=1,Ae={bSupHardOrSoft:!0,bSupHardDecAVC:!0,bSupHardDecHEVC:!0,cmd:"unloaded",errorCode:0,status:0},we=-1;window.JSPlayM4_RawDataCallBack=function(e,t,i,r){null!=Fe[r][e]&&Fe[r][e].__proto__.hasOwnProperty("JSPlayM4_InputRawData")&&Fe[r][e].JSPlayM4_InputRawData(e,t,i)},window.JSPlayM4_PrivateInfoCallBack=function(e,t,i,r,a){null!=Fe[a][e]&&Fe[a][e].__proto__.hasOwnProperty("JSPlayM4_InputPrivateInfo")&&Fe[a][e].JSPlayM4_InputPrivateInfo(t,i,r)};var Le=function(){function t(i,r,a){var n=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"webgl",x=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1;if(e(this,t),this.jsplayer=i,this.szBasePath=r,this.fn=a,this.nUser=s,this.renderEngine=o,this.hasWebWorker=x,this.setHasThread=f,this.oJSPlayerObj=this,this.port=-1,this.pcVideoManager=null,this.decodeWorker=null,this.offscreen=null,this.canvasID="",this.canvasCnv=null,this.rtpType=0,this.decodeEngine=1,this.FirstFrameCallBackflag=!1,this.inputDataBuffer=null,this.inputDataBufferSize=204800,this.canvasIDData=null,this._decoderLoaded=!1,this.streamOpenMode=0,this.width=0,this.height=0,this.rawDataFrameInfoBuffer=null,this.rawDataFrameInfo={},this.displayFrameInfo={},this.startTimeStamp=0,this.decodeFrameType=0,this.switchDecodeFrame=!1,this.displayBuf=0,this.needSetDisplayBuf=!1,this.FirstFrame=!0,this.codecType=0,this.curStatus=0,this.playSpeed=1,this.needWaitIFrame=!1,this.printfFlag=!1,this.SetDisRegionBottom=0,this.SetDisRegionLeft=0,this.SetDisRegionRight=0,this.SetDisRegionTop=0,this.cropBottom=0,this.cropLeft=0,this.cropRight=0,this.cropTop=0,this.canvasWidth=960,this.canvasHeight=480,this.enableCanvas=!0,this.needResetCanvasSize=!1,this.hasThread=0,this.aTotalBuffer=[],this.iFrameNum=0,this.bWriteData=!0,this.downloadFlag=!1,this.bWriteAudioPCMData=!0,this.audioPCMBuffer=[],this.iAudioPCMFrameNum=0,this.pBmpData=null,this.nBmpDataSize=0,this.pBmpSizeData=null,this.bmpDataCallback=null,this.bmpDownloadFlag=!1,this.pJpegData=null,this.nJpegDataSize=0,this.pJPEGSizeData=null,this.jpegDataCallback=null,this.jpegDownloadFlag=!1,this.stDisplayRect={top:0,left:0,right:0,bottom:0},this.iZoomNum=0,this.iRatio_x=1,this.iRatio_y=1,this.pFECTotalCanvasIDData=null,this.iFECCanvasIDLen=0,this.iFECZoomNum=0,this.iFECRatio_x=1,this.iFECRatio_y=1,this.stFECDisplayRect={top:0,left:0,right:0,bottom:0},this.FECcanvasIDArray=[],this.FECGetPortCB=null,this.FECGetPTZPortCB=null,this.FECParamCB=null,this.FECViewParamCB=null,this.FFCallBackFun=null,this.addtionCallBackFun=null,this.displayCallBackFun=null,this.decCallBackFun=null,this.getPlayTimeCallBackFun=null,this.runtimeCBFun=null,this.callbackFlag=!1,this.runTimeModule=0,this.needSetSecretKey=!1,this.SecretKeyData=null,this.needPlaySound=!1,this.decInterval=-1,this.volumeValue=-1,this.renderPrivateInfo=new Map,this.renderIntelSubEx=new Map,this.renderIntelFlagEx=new Map,this.reversePlay=!1,this.decodeThreadNum=0,this.antialiasFlag=-1,this.decodeERCLevel=0,this.d3dPostProcessType=0,this.d3dPostProcessValue=0,this.needSetD3DPostProcess=!1,this.resetBufferType=-1,this.playOrBackSwitchMode=0,this.setStretchPlayTime=0,this.setStretchPlaySpeed=0,this.autoSmoothPlayModel=-1,this.keepPlaySpeed=-1,this.FECCanvasID="",this.FECPlaceType=0,this.FECCorrectType=0,this.anrParamFlag=!1,this.anrParamLevel=-1,this.resampleFlag=!1,this.resampleRate=48e3,this.globalBaseTime=null,this.needSetSkipErrorData=!1,this.skipErrorData=-1,this.needSetDemuxModel=!1,this.setDemuxModelType=-1,this.setDemuxModelFlag=!1,this.setAudioThreadModel=-1,this.syncToAudio=-1,this.HIK40Head=[],this.HIKHeadSize=40,this.HIKPoolSize=2097152,this.supportWebCodecs=_getFSupportWebCodecs(),this.supportSab=!!window.SharedArrayBuffer,this.offscreen=!!window.OffscreenCanvas,this.supportOffscreen=!1,this.offscreen){var l=new OffscreenCanvas(1,1),h=l.getContext("webgl");h&&(this.supportOffscreen=!0,h.getExtension("WEBGL_lose_context").loseContext()),l=null,h=null}if(console.log("%cstart load Decoder.js time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds(),"color: blue"),null!=Te||De)new Promise((function(e,t){e()})).then((function(){if(null===Te)var e=setInterval((function(){null!==Te&&(clearInterval(e),e=null,n.fn(Ae))}),10);else n.fn(Ae)}));else if(De=!0,we=_getFExplore(),this.supportWebCodecs?-1<we&&we<94?(console.info("%c1>your chrome version %d does not support 264/265 hard Decoder,please update the latest version above chromeV107","color: red",we),Me=0,Ie=0,Ae.bSupHardDecAVC=!1,Ae.bSupHardDecHEVC=!1,this.supportSab?Ae.bSupHardOrSoft=!0:Ae.bSupHardOrSoft=!1):94<=we&&we<107?(console.info("%c1>your chrome version %d does not support 265 hard Decoder,please update the latest version above chromeV107","color: red",we),Ie=0,Ae.bSupHardDecAVC=!0,Ae.bSupHardDecHEVC=!1,Ae.bSupHardOrSoft=!0):(Ae.bSupHardDecAVC=!0,Ae.bSupHardDecHEVC=!1,Ae.bSupHardOrSoft=!0):(console.info("%c1>your browser does not support hard Decoder ","color: red"),Me=0,Ie=0,Ae.bSupHardDecAVC=!1,Ae.bSupHardDecHEVC=!1,this.supportSab?Ae.bSupHardOrSoft=!0:Ae.bSupHardOrSoft=!1),Ae.bSupHardOrSoft){var c=this.szBasePath,_=document.createElement("script");_.type="text/javascript",_.src=c,console.info("%c>>>>The Decoder.js path:%s","color: green",c),_.onload=function(){window.JSPlayerModule().then((function(e){Te=e,n._decoderLoaded=!0,Ae.cmd="loaded";var t=Te._JSPlayM4_GetSDKVersion(),i=Te._JSPlayM4_GetBuildDate();console.log("%cEnd load Decoder.js time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds()+",version:"+t.toString(16)+",buildDate:"+i.toString(16),"color: blue"),n.supportWebCodecs?VideoDecoder.isConfigSupported({codec:"hvc1.1.6.L123.00",hardwareAcceleration:"prefer-hardware"}).then((function(e){e.supported?(Ae.bSupHardDecHEVC=!0,console.info("%c1>your browser support 264/265 hard Decoder","color: green")):(console.warn("%c1>your PC does not support 265 hard Decoder, if you want to hard decode 265 ,try to update the GPU driver","color: red"),Ie=0),n.callbackFlag||(n.fn(Ae),n.callbackFlag=!0)})).catch((function(){Ie=0,Ae.bSupHardDecHEVC=!1,console.log("%c2>hevc supported error","color: red"),n.callbackFlag||(n.fn(Ae),n.callbackFlag=!0)})):n.fn(Ae)}))},document.body.appendChild(_)}else console.log("%c not support hard or soft","color:red"),new Promise((function(e,t){e()})).then((function(){n.fn(Ae)}))}return s(t,[{key:"startWorker",value:function(e){function t(t,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){if(window.Worker){if(null==t.decodeWorker){if(t.decodeWorker=new f,null==t.decodeWorker)return 0;console.log("decodeWorker create success!")}t.canvasCnv=document.getElementById(e),t.offscreen=t.canvasCnv.transferControlToOffscreen(),t.decodeWorker.postMessage({command:"init",streamOpenMode:t.streamOpenMode,canvas:t.offscreen,sab:t.supportSab,renderEngine:t.renderEngine},[t.offscreen]),0!=t.displayBuf&&t.decodeWorker.postMessage({command:"SetDisplayBuf",value:t.displayBuf}),t.decodeWorker.onmessage=function(e){var i=e.data;switch(i.function){case"error":startWorker(t.canvasID,t);break;case"GetFrameData":var r=new Uint8Array(i.data);t.downloadRTPData(r);break;case"GetRawData":t.JSPlayM4_GetRawData();break;case"OrderError":console.log(">>>JS OrderError");break;case"GetPlayedTime":var a=i.value;t.getPlayTimeCallBackFun&&t.getPlayTimeCallBackFun(a-t.startTimeStamp);break;case"resetEnd":t.JSPlayM4_ResetEnd();break;case"bitmap":var n=i.value,s=i.type;t._GetImage(n,s);break;case"imageYUV":var o=new Uint8Array(i.value),x=i.size,f=new Uint8Array(o),l=i.type,h=i.width,c=i.height,_=i.yuvType,u=i.sx,d=i.sy,p=i.sw,m=i.sh;t._GetImage2(f,x,h,c,l,_,u,d,p,m),o=null,f=null,i.value=null;break;case"stop":t.decodeWorker=null,console.log("HardWorker is null");break;case"firstFrameCB":null!=t.FFCallBackFun&&t.FFCallBackFun();break;case"SetFrameInfoCallBack":t.displayFrameInfo.port=i.curFrameInfo.port,t.displayFrameInfo.codecType=i.curFrameInfo.codecType,t.displayFrameInfo.frameType=i.curFrameInfo.frameType,t.displayFrameInfo.frameSize=i.curFrameInfo.frameSize,t.displayFrameInfo.width=i.curFrameInfo.width,t.displayFrameInfo.height=i.curFrameInfo.height,t.displayFrameInfo.timeStamp=i.curFrameInfo.timeStamp,t.displayFrameInfo.frameRate=i.curFrameInfo.frameRate,t.displayFrameInfo.frameNum=i.curFrameInfo.frameNum,t.displayFrameInfo.interlace=i.curFrameInfo.interlace,t.displayFrameInfo.streamEnd=i.curFrameInfo.streamEnd,t.displayFrameInfo.cropLeft=i.curFrameInfo.cropLeft,t.displayFrameInfo.cropRight=i.curFrameInfo.cropRight,t.displayFrameInfo.cropTop=i.curFrameInfo.cropTop,t.displayFrameInfo.cropBottom=i.curFrameInfo.cropBottom,t.displayFrameInfo.year=i.curFrameInfo.year,t.displayFrameInfo.month=i.curFrameInfo.month,t.displayFrameInfo.week=i.curFrameInfo.week,t.displayFrameInfo.day=i.curFrameInfo.day,t.displayFrameInfo.hour=i.curFrameInfo.hour,t.displayFrameInfo.minute=i.curFrameInfo.minute,t.displayFrameInfo.second=i.curFrameInfo.second,t.displayFrameInfo.milliseconds=i.curFrameInfo.milliseconds;break;case"FECGetViewParam":null!=t.FECViewParamCB&&t.FECViewParamCB(i.Param3D);break;case"FECGetParam":null!=t.FECParamCB&&t.FECParamCB(i.param2d);break;case"FECGetPort":null!=t.FECGetPortCB&&t.FECGetPortCB(i.fishSubPort);break;case"FECGetPTZPort":null!=t.FECGetPTZPortCB&&t.FECGetPTZPortCB(i.fishSubPort)}},t.decodeWorker.addEventListener("error",(function(e){console.error(e)}))}}))},{key:"JSPlayM4_SetStreamEnd",value:function(){return 0}},{key:"JSPlayM4_GetPort",value:function(){return this.printfFlag&&console.log(">>>>>yff>>> JSPlayM4_GetPort 1"),null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetPort","color: red"),0):(this.port=Te._JSPlayM4_GetPort(),Fe[this.nUser][this.port]=this.oJSPlayerObj,this.printfFlag&&console.log(">>>>>yff>>> JSPlayM4_GetPort 2"),1)}},{key:"JSPlayM4_SetStreamOpenMode",value:function(e){return this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_SetStreamOpenMode 1 mode:"+e),null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetStreamOpenMode","color: red"),0):(this.streamOpenMode=e,this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_SetStreamOpenMode 2  mode:"+e),null==this.pcVideoManager&&(this.pcVideoManager=new Ee(this)),Te._JSPlayM4_SetStreamOpenMode(this.port,e))}},{key:"JSPlayM4_OpenStream",value:function(e,t,i){if(this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_OpenStream 1 :"+e+",this.port:"+this.port),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_OpenStream","color: red"),0;var r=Te._malloc(t);if(null===r)return console.log("hikHeadBuffer malloc failed"),0;var a=new Uint8Array(e.buffer);if(5==e[10]&&0==e[11]){if(this.codecType=5,!Ae.bSupHardDecHEVC&&!this.supportSab)return console.info("%c3>The codecType is VIDEO_AVC265,not support SharedArrayBuffer","color: red"),16}else 1==e[10]&&0==e[11]?this.codecType=1:0==e[10]&&1==e[11]?this.codecType=256:this.codecType=0;Te.writeArrayToMemory(a,r);var n=Te._JSPlayM4_OpenStream(this.port,r,t,i);return null!==r&&(Te._free(r),r=null),a=null,this.HIK40Head=new Uint8Array(e),this.HIKHeadSize=t,this.HIKPoolSize=i,n}},{key:"JSPlayM4_SetDecodeEngine",value:function(e){return this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_SetDecodeEngine 1:"+e),0!=e&&1!=e?(console.log("0 is softDecode, 1 is hardDecoder,decodeEngine:"+e),0):0!==e||this.supportSab&&this.supportOffscreen?(this.decodeEngine=e,1):(this.jsplayer._switchV3ToV1(this.streamOpenMode,this.HIK40Head,this.HIKHeadSize,this.HIKPoolSize,!0),0)}},{key:"_switchHardToSoft",value:function(){return this.JSPlayM4_Stop(!0),this.JSPlayM4_CloseStream(),this.JSPlayM4_FreePort(),this.supportSab&&this.supportOffscreen?(this.JSPlayM4_SetDecodeEngine(0)&&(console.log("V3 switchHardToSoft this.szBasePath:"+this.szBasePath),this.JSPlayM4_GetPort(),this.JSPlayM4_SetStreamOpenMode(this.streamOpenMode),this.JSPlayM4_OpenStream(this.HIK40Head,this.HIKHeadSize,this.HIKPoolSize),this.JSPlayM4_Play(null,!0)),1):(this.jsplayer._switchV3ToV1(this.streamOpenMode,this.HIK40Head,this.HIKHeadSize,this.HIKPoolSize,!0),0)}},{key:"_HardToSoftNeedResetParam",value:function(){null!=this.FFCallBackFun&&Te._JSPlayM4_SetFirstFrameCallBack(this.port,this.FirstFrameCallBackflag,this.nUser),this.needSetSecretKey&&this.JSPlayM4_SetSecretKey(this.SecretKeyData),null!=this.globalBaseTime&&this.globalBaseTime.month>0&&this.globalBaseTime.month<13&&this.JSPlayM4_SetGlobalBaseTime(this.globalBaseTime.year,this.globalBaseTime.month,this.globalBaseTime.day,this.globalBaseTime.hour,this.globalBaseTime.min,this.globalBaseTime.sec,this.globalBaseTime.ms),this.needSetSkipErrorData&&this.JSPlayM4_SkipErrorData(this.skipErrorData),this.needSetDemuxModel&&this.JSPlayM4_SetDemuxModel(this.setDemuxModelType,this.setDemuxModelFlag),this.JSPlayM4_SetDecodeFrameType(this.decodeFrameType),-1!=this.decInterval&&Te._JSPlayM4_SetIFrameDecInterval(this.port,nInterval),0!=this.decodeThreadNum&&Te._JSPlayM4_SetDecodeThreadNum(this.port,this.decodeThreadNum),0!=this.decodeERCLevel&&Te._JSPlayM4_SetDecodeERC(this.port,this.decodeERCLevel),-1!=this.resetBufferType&&Te._JSPlayM4_ResetBuffer(this.port,this.resetBufferType),this.needPlaySound&&this.JSPlayM4_PlaySound(),-1!=this.setAudioThreadModel&&this.JSPlayM4_SetAudioThreadModel(this.setAudioThreadModel),-1!=this.syncToAudio&&this.JSPlayM4_SyncToAudio(this.syncToAudio),this.anrParamFlag&&-1!=this.anrParamLevel&&this.JSPlayM4_SetANRParam(this.anrParamFlag,this.anrParamLevel),this.resampleFlag&&this.JSPlayM4_SetResampleValue(this.resampleFlag,this.resampleRate),-1!=this.volumeValue&&this.JSPlayM4_SetVolume(this.volumeValue),null!=this.runtimeCBFun&&Te._JSPlayM4_SetRunTimeInfoCallBackEx(this.port,this.runTimeModule,this.nUser),0!=this.playOrBackSwitchMode&&Te._JSPlayM4_SetPlayOrBackSwitchMode(this.port,this.playOrBackSwitchMode);var e,t=d(this.renderPrivateInfo.keys());try{for(t.s();!(e=t.n()).done;){var i=e.value,r=this.renderPrivateInfo.get(i);Te._JSPlayM4_RenderPrivateData(this.port,i,r)}}catch(e){t.e(e)}finally{t.f()}var a,n=d(this.renderIntelSubEx.keys());try{for(n.s();!(a=n.n()).done;){var s=a.value,o=this.renderIntelSubEx.get(s),x=this.renderIntelFlagEx.get(s);Te._JSPlayM4_RenderPrivateDataEx(this.port,s,o,x)}}catch(e){n.e(e)}finally{n.f()}return this.needSetDisplayBuf&&Te._JSPlayM4_SetDisplayBuf(this.port,this.displayBuf),-1!=this.antialiasFlag&&Te._JSPlayM4_SetAntialias(this.port,this.antialiasFlag),this.needSetD3DPostProcess&&Te._JSPlayM4_SetD3DPostProcess(this.port,this.d3dPostProcessType,this.d3dPostProcessValue),0!=this.setStretchPlaySpeed&&Te._JSPlayM4_SetStretchPlay(this.port,this.setStretchPlayTime,this.setStretchPlaySpeed),-1!=this.autoSmoothPlayModel&&Te._JSPlayM4_SetAutoSmoothPlay(this.port,this.autoSmoothPlayModel),-1!=this.keepPlaySpeed&&Te._JSPlayM4_KeepPlaySpeed(this.port,this.keepPlaySpeed),0!=this.printfFlag&&this.JSPlayM4_SetPrintLogFlag(this.printfFlag),""!=this.FECCanvasID&&this.JSPlayM4_FEC_SetCanvasID(this.FECCanvasID,!0),0!=this.FECPlaceType&&Te._JSPlayM4_FEC_ResetCorrectType(this.port,0,this.FECPlaceType,this.FECCorrectType),1}},{key:"JSPlayM4_DownloadRawData",value:function(){return this.downloadFlag=!0,1}},{key:"JSPlayM4_InputRawData",value:function(e,t,i){if(this.rawDataFrameInfoBuffer=i,this.rawDataFrameInfo.port=e,this.rawDataFrameInfo.codecType=Te.HEAP32[this.rawDataFrameInfoBuffer+4>>2],this.rawDataFrameInfo.frameType=Te.HEAP32[this.rawDataFrameInfoBuffer+12>>2],this.rawDataFrameInfo.frameSize=Te.HEAP32[this.rawDataFrameInfoBuffer+16>>2],this.rawDataFrameInfo.width=Te.HEAP32[this.rawDataFrameInfoBuffer+20>>2],this.rawDataFrameInfo.height=Te.HEAP32[this.rawDataFrameInfoBuffer+24>>2],this.rawDataFrameInfo.timeStamp=Te.HEAP32[this.rawDataFrameInfoBuffer+28>>2],this.rawDataFrameInfo.frameRate=Te.HEAP32[this.rawDataFrameInfoBuffer+32>>2],this.rawDataFrameInfo.frameNum=Te.HEAP32[this.rawDataFrameInfoBuffer+36>>2],this.rawDataFrameInfo.isKeyFrame=Te.HEAP32[this.rawDataFrameInfoBuffer+40>>2],this.rawDataFrameInfo.interlace=Te.HEAP32[this.rawDataFrameInfoBuffer+44>>2],this.rawDataFrameInfo.streamEnd=Te.HEAP32[this.rawDataFrameInfoBuffer+48>>2],this.rawDataFrameInfo.cropLeft=Te.HEAP32[this.rawDataFrameInfoBuffer+52>>2],this.rawDataFrameInfo.cropRight=Te.HEAP32[this.rawDataFrameInfoBuffer+56>>2],this.rawDataFrameInfo.cropTop=Te.HEAP32[this.rawDataFrameInfoBuffer+60>>2],this.rawDataFrameInfo.cropBottom=Te.HEAP32[this.rawDataFrameInfoBuffer+64>>2],this.rawDataFrameInfo.year=Te.HEAP16[this.rawDataFrameInfoBuffer+68>>1],this.rawDataFrameInfo.month=Te.HEAP16[this.rawDataFrameInfoBuffer+70>>1],this.rawDataFrameInfo.week=Te.HEAP16[this.rawDataFrameInfoBuffer+72>>1],this.rawDataFrameInfo.day=Te.HEAP16[this.rawDataFrameInfoBuffer+74>>1],this.rawDataFrameInfo.hour=Te.HEAP16[this.rawDataFrameInfoBuffer+76>>1],this.rawDataFrameInfo.minute=Te.HEAP16[this.rawDataFrameInfoBuffer+78>>1],this.rawDataFrameInfo.second=Te.HEAP16[this.rawDataFrameInfoBuffer+80>>1],this.rawDataFrameInfo.milliseconds=Te.HEAP16[this.rawDataFrameInfoBuffer+82>>1],this.rawDataFrameInfo.needSetPreSoft=!1,(this.rawDataFrameInfo.frameRate<1||1==this.rawDataFrameInfo.interlace)&&(this.rawDataFrameInfo.needSetPreSoft=!0),5==this.rawDataFrameInfo.codecType&&we<107&&console.info("%c1>your browser does not support hard 265 Decoder,please update chrome,sab:%d","color: red",this.sab),0!=this.width&&0!=this.height||(this.width=this.rawDataFrameInfo.width,this.height=this.rawDataFrameInfo.height,this.startTimeStamp=this.rawDataFrameInfo.timeStamp,this.FirstFrame=!1),0==this.rawDataFrameInfo.cropLeft&&0==this.rawDataFrameInfo.cropRight&&0==this.rawDataFrameInfo.cropTop&&0==this.rawDataFrameInfo.cropBottom||(this.cropBottom=this.rawDataFrameInfo.cropBottom,this.cropLeft=this.rawDataFrameInfo.cropLeft,this.cropRight=this.rawDataFrameInfo.cropRight,this.cropTop=this.rawDataFrameInfo.cropTop),1==this.decodeFrameType){if(1!==this.rawDataFrameInfo.isKeyFrame)return 1;this.needWaitIFrame&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"SetDecodeFrameType",timestamp:this.rawDataFrameInfo.timeStamp}):this.pcVideoManager.SetDecodeFrameType(this.rawDataFrameInfo.timeStamp),this.needWaitIFrame=!1)}if(0==this.decodeFrameType&&1==this.switchDecodeFrame){if(1!==this.rawDataFrameInfo.isKeyFrame)return 1;this.switchDecodeFrame=!1}if(this.downloadFlag&&this.downloadRTPData(t),this.hasWebWorker){if(null===this.decodeWorker)return t=null,0;this.decodeWorker.postMessage({command:"inputData",rawData:t.buffer,rawDataFrameInfo:this.rawDataFrameInfo},[t.buffer])}else null!==this.pcVideoManager&&this.pcVideoManager.inputData(t,this.rawDataFrameInfo)}},{key:"JSPlayM4_GetRawData",value:function(){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetRawData","color: red"),0;Te._JSPlayM4_GetRawData(this.port)}},{key:"JSPlayM4_ResetEnd",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_ResetEnd","color: red"),0):Te._JSPlayM4_ResetEnd(this.port)}},{key:"JSPlayM4_NeedReset",value:function(e,t,i){return this.hasWebWorker?null!=Fe[i][e].decodeWorker&&Fe[i][e].decodeWorker.postMessage({command:"needReset"}):this.pcVideoManager.needReset(),1}},{key:"JSPlayM4_SetAudioDisplayBuf",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAudioDisplayBuf","color: red"),0):Te._JSPlayM4_SetAudioDisplayBuf(this.port,e)}},{key:"JSPlayM4_Play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_Play 1 this.canvasID:"+this.canvasID+",this.supportSab:"+this.supportSab),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_Play","color: red"),0;if(this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_Play 2:"+this.decodeEngine),null!=e&&(this.canvasID=e,this.canvasWidth=document.getElementById(this.canvasID).width,this.canvasHeight=document.getElementById(this.canvasID).height),0===Ie&&5===this.codecType?(this.decodeEngine=0,console.info("%c2>there will decode 265 by softDecoder","color: green")):0!==Me||256!==this.codecType&&1!==this.codecType||(this.decodeEngine=0,console.info("%c2>there will decode 264 by softDecoder","color: green")),0==Me&&0==Ie&&(this.decodeEngine=0),!(this.supportSab&&this.supportOffscreen||0!==this.decodeEngine))return console.info("%c3>SharedArrayBuffer or Offscreen Error , does not support Soft Decdoe!!!!!","color: red"),this.jsplayer._switchV3ToV1(this.streamOpenMode,this.HIK40Head,this.HIKHeadSize,this.HIKPoolSize,!0),0;if(-1!=this.setHasThread&&(this.hasThread=this.setHasThread),Te._JSPlayM4_SetDecodeEngine(this.port,this.decodeEngine,this.hasThread),console.log("%cThe final decodeEngine is %d (0 is soft,1 is hard),codecType:%d","color: green",this.decodeEngine,this.codecType),0===this.decodeEngine&&t&&null!=this.canvasID){var i=document.getElementById(this.canvasID);i&&(this.clonedCanvas=i.cloneNode(!0),this.clonedCanvasParentNode=i.parentNode,this.clonedCanvasParentNode.replaceChild(this.clonedCanvas,i))}this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_Play 2 this.canvasID:"+this.canvasID+",this.supportSab:"+this.supportSab+",this.decodeEngine:"+this.decodeEngine);var r=1;if(1===this.decodeEngine){this.hasWebWorker?this.startWorker(this.canvasID,this):(this.canvasCnv=document.getElementById(this.canvasID),this.pcVideoManager.init(this.canvasCnv,this.streamOpenMode,this.supportSab,this.renderEngine),this.needSetDisplayBuf&&this.pcVideoManager.SetDisplayBuf(this.displayBuf)),Te._JSPlayM4_SetVideoRawDataCallBack(this.port,this.nUser);var a=Te.addFunction(this.JSPlayM4_NeedReset,"viii");Te._JSPlayM4_SetResetCallBack(this.port,a,this.nUser),Te._JSPlayM4_SetPrivateInfoCallBack(this.port,this.nUser),this.JSPlayM4_SetCanvasSize(this.canvasWidth,this.canvasHeight),1==(r=Te._JSPlayM4_Play(this.port,null))&&(this.curStatus=2)}else if(0===this.decodeEngine){if(""!=this.canvasID&&null!=this.canvasID){var n=this._stringToBytes("#"+this.canvasID),s=2*(this.canvasID.length+1);if(this.canvasIDData=Te._malloc(s),null===this.canvasIDData)return 0;var o=Te.HEAPU8.subarray(this.canvasIDData,this.canvasIDData+s),x=new Uint8Array(s);o.set(x,0),o.set(new Uint8Array(n)),o=null,x=null}this._HardToSoftNeedResetParam(),1==(r=Te._JSPlayM4_Play(this.port,this.canvasIDData))&&(this.curStatus=2)}return this.JSPlayM4_SetFrameInfoCallBack(1),r}},{key:"JSPlayM4_InputData",value:function(e,t){if(this.inputDataBufferSize<t&&(null!==this.inputDataBuffer&&(Te._free(this.inputDataBuffer),this.inputDataBuffer=null),this.inputDataBufferSize=t),null===this.inputDataBuffer&&(this.inputDataBuffer=Te._malloc(this.inputDataBufferSize)),null===this.inputDataBuffer)return console.log("inputdata malloc failed!!!"),0;if(1==this.needResetCanvasSize&&(this.JSPlayM4_SetCanvasSize(this.canvasWidth,this.canvasHeight+1),this.needResetCanvasSize=!1),this.enableCanvas){var i=this.JSPlayM4_GetFrameInfo(),r=i.width,a=i.height;r&&a&&(this.JSPlayM4_SetCanvasSize(this.canvasWidth,this.canvasHeight-1),this.enableCanvas=!1,this.needResetCanvasSize=!0)}var n=new Uint8Array(e.buffer);Te.writeArrayToMemory(n,this.inputDataBuffer);var s=Te._JSPlayM4_InputData(this.port,this.inputDataBuffer,t);return this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_InputData 2 res:"+s+",inputSize:"+t),s}},{key:"JSPlayM4_Stop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_Stop","color: red"),0;if(this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"stop"}):null!=this.pcVideoManager&&this.pcVideoManager.stop(),this.bWriteData&&this.iFrameNum>0){console.log("download"+this.iFrameNum+"Psdata");var t=new Uint8Array(this.aTotalBuffer);this._downloadFile(t,"RTPRaw.data"),this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.bWriteData=!1,this.iFrameNum=0,t=null}if(2==this.curStatus||5==this.curStatus){var i=Te._JSPlayM4_Stop(this.port);if(1==i&&(this.curStatus=4),1==i&&e){var r=document.getElementById(this.canvasID);if(r&&(this.clonedCanvas=r.cloneNode(!0),this.clonedCanvasParentNode=r.parentNode,this.clonedCanvasParentNode.replaceChild(this.clonedCanvas,r)),0!=this.FECcanvasIDArray.length)for(var a=0;a<this.FECcanvasIDArray.length;a++){var n=document.getElementById(this.FECcanvasIDArray[a]);n&&(this.clonedCanvas=n.cloneNode(!0),this.clonedCanvasParentNode=n.parentNode,this.clonedCanvasParentNode.replaceChild(this.clonedCanvas,n))}}return i}return 1}},{key:"JSPlayM4_CloseStream",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_CloseStream","color: red"),0):null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_FreePort","color: red"),0):(null!==this.inputDataBuffer&&(Te._free(this.inputDataBuffer),this.inputDataBuffer=null),null!==this.canvasIDData&&(Te._free(this.canvasIDData),this.canvasIDData=null,this.FirstFrame=!0),null!=this.pFECTotalCanvasIDData&&(Te._free(this.pFECTotalCanvasIDData),this.pFECTotalCanvasIDData=null),null!=this.pBmpData&&(Te._free(this.pBmpData),this.pBmpData=null),null!=this.pBmpSizeData&&(Te._free(this.pBmpSizeData),this.pBmpSizeData=null),null!=this.pJpegData&&(Te._free(this.pJpegData),this.pJpegData=null),null!=this.pJPEGSizeData&&(Te._free(this.pJPEGSizeData),this.pJPEGSizeData=null),this.bmpDataCallback=null,this.jpegDataCallback=null,this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.audioPCMBuffer.splice(0,this.audioPCMBuffer.length),this.width=0,this.height=0,this.curStatus=1,this.iZoomNum=0,this.rawDataFrameInfoBuffer=null,this.displayFrameInfo={},this.rawDataFrameInfo={},this.pcVideoManager=null,Te._JSPlayM4_CloseStream(this.port))}},{key:"JSPlayM4_FreePort",value:function(){return Te._JSPlayM4_FreePort(this.port)}},{key:"JSPlayM4_SetDecodeFrameType",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecodeFrameType","color: red"),0):(this.decodeFrameType=e,1===this.decodeEngine?(0==e&&1==this.decodeFrameType&&(this.switchDecodeFrame=!0),1==e&&(this.needWaitIFrame=!0),1):Te._JSPlayM4_SetDecodeFrameType(this.port,e))}},{key:"JSPlayM4_PlaySound",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_PlaySound","color: red"),0):(this.needPlaySound=!0,Te._JSPlayM4_PlaySound(this.port))}},{key:"resizedataURL",value:function(e,t,i){return new Promise((r=k().mark((function r(a,n){var s;return k().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:(s=document.createElement("img")).onload=function(){var e=document.createElement("canvas"),r=e.getContext("2d");e.width=t,e.height=i,r.drawImage(this,0,0,t,i);var n=e.toDataURL();a(n)},s.src=e;case 3:case"end":return r.stop()}}),r)})),a=function(){var e=this,t=arguments;return new Promise((function(i,a){var n=r.apply(e,t);function s(e){o(n,i,a,s,x,"next",e)}function x(e){o(n,i,a,s,x,"throw",e)}s(void 0)}))},function(e,t){return a.apply(this,arguments)}));var r,a}},{key:"_GetImage",value:function(e,t){if(1===this.decodeEngine&&e.width&&e.height){var i="image/"+t,r=document.createElement("canvas"),a=r.getContext("2d");r.width=e.width,r.height=e.height,a.drawImage(e,0,0,e.width,e.height),r.toBlob((function(r){console.log("blob:"+r);var n=window.URL.createObjectURL(r),s=document.createElement("a");s.download=(new Date).getTime()+"."+t,s.href=n,s.dataset.downloadurl=[i,s.download,s.href].join(":"),document.body.appendChild(s),s.click(),document.body.removeChild(s),e.close(),a=null}),i)}}},{key:"_GetImage2",value:function(e,t,i,r,a,n,s,o,x,f){var l=this;setTimeout((function(){if(0!=i&&0!=r){var h=Te._malloc(t);if(null===h)return;Te.writeArrayToMemory(new Uint8Array(e,0,t),h);var c;c=704!=i||288!=r&&240!=r?i*r*4+60:i*r*8+60;var _=Te._malloc(c),u=Te._malloc(4);if(null===_||null===u)return Te._free(h),h=null,null!=_&&(Te._free(_),_=null),void(null!=u&&(Te._free(u),u=null));Te.setValue(u,c,"i32");var d=2;"nv12"===n?d=2:"I420"===n&&(d=3),"jpeg"==a?Te._JSPlayM4_VideoDataToJpeg(l.port,h,t,_,u,i,r,d,s,o,x,f):"bmp"==a&&Te._JSPlayM4_VideoDataToBMP(l.port,h,t,_,u,i,r,d,s,o,x,f);var p=Te.getValue(u,"i32"),m=new Uint8Array(p);m.set(Te.HEAPU8.subarray(_,_+p)),0==s&&0==o&&0==x&&0==f?"jpeg"==a?(null!=l.jpegDataCallback&&l.jpegDataCallback(m,p),l.jpegDownloadFlag&&l._downloadFile(m,"GetImage."+a),l.jpegDataCallback=null,l.jpegDownloadFlag=!1):"bmp"==a&&(null!=l.bmpDataCallback&&l.bmpDataCallback(m,p),l.bmpDownloadFlag&&l._downloadFile(m,"GetImage."+a),l.bmpDataCallback=null,l.bmpDownloadFlag=!1):l._downloadFile(m,"GetCropImage."+a),m=null,null!=_&&(Te._free(_),_=null),null!=u&&(Te._free(u),u=null)}}),0)}},{key:"JSPlayM4_GetJPEG",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.jpegDataCallback=e,this.jpegDownloadFlag=t,1===this.decodeEngine)return this.hasWebWorker?this.decodeWorker.postMessage({command:"GetJPEG"}):null!=this.pcVideoManager&&this.pcVideoManager.GetJPEG(),1;if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetJPEG","color: red"),0;var i=Te._JSPlayM4_GetFrameInfo(this.port);if(this.width=Te.HEAP32[i+12>>2],this.height=Te.HEAP32[i+16>>2],0!=this.width&&0!=this.height){var r=this.width*this.height*4+60;if((null==this.pJpegData||this.nJPEGDataSize<r)&&(null!=this.pJpegData&&(Te._free(this.pJpegData),this.pJpegData=null),this.nJPEGDataSize=r,this.pJpegData=Te._malloc(this.nJPEGDataSize),null===this.pJpegData))return;null==this.pJPEGSizeData&&(this.pJPEGSizeData=Te._malloc(4));var a=Te._JSPlayM4_GetJPEG(this.port,this.pJpegData,this.nJPEGDataSize,this.pJPEGSizeData);if(1!=a){var n=Te._JSPlayM4_GetLastError(this.port);console.log("errorcode:"+n)}if(1==a){var s=Te.getValue(this.pJPEGSizeData,"i32"),o=new Uint8Array(s);o.set(Te.HEAPU8.subarray(this.pJpegData,this.pJpegData+s)),null!=e&&e(o,s),t&&this._downloadFile(o,"GetJPEG.jpeg"),o=null,this.jpegDataCallback=null,this.jpegDownloadFlag=!1}return a}return 0}},{key:"JSPlayM4_GetBMP",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.bmpDataCallback=e,this.bmpDownloadFlag=t,1===this.decodeEngine)return this.hasWebWorker?this.decodeWorker.postMessage({command:"GetBMP"}):null!=this.pcVideoManager&&this.pcVideoManager.GetBMP(),1;if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetBMP","color: red"),0;var i=Te._JSPlayM4_GetFrameInfo(this.port);if(this.width=Te.HEAP32[i+12>>2],this.height=Te.HEAP32[i+16>>2],0==this.width||0==this.height)return 0;var r;if(r=704!=this.width||288!=this.height&&240!=this.height?this.width*this.height*4+60:this.width*this.height*8+60,!(null==this.pBmpData||this.nBmpDataSize<r)||(null!=this.pBmpData&&(Te._free(this.pBmpData),this.pBmpData=null),this.nBmpDataSize=r,this.pBmpData=Te._malloc(this.nBmpDataSize),null!==this.pBmpData)){null==this.pBmpSizeData&&(this.pBmpSizeData=Te._malloc(4));var a=Te._JSPlayM4_GetBMP(this.port,this.pBmpData,this.nBmpDataSize,this.pBmpSizeData);if(1!=a){var n=Te._JSPlayM4_GetLastError(this.port);console.log("errorcode:"+n)}if(1==a){var s=Te.getValue(this.pBmpSizeData,"i32"),o=new Uint8Array(s);o.set(Te.HEAPU8.subarray(this.pBmpData,this.pBmpData+s)),null!=e&&e(o,s),t&&this._downloadFile(o,"GetBmp.bmp"),o=null,this.bmpDataCallback=null,this.bmpDownloadFlag=!1}return 1}}},{key:"JSPlayM4_GetCropJPEG",value:function(){if(1===this.decodeEngine)return this.hasWebWorker?this.decodeWorker.postMessage({command:"GetCropJPEG"}):null!=this.pcVideoManager&&this.pcVideoManager.GetCropJPEG(),1;if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetCropJPEG","color: red"),0;var e=Te._JSPlayM4_GetFrameInfo(this.port);if(this.width=Te.HEAP32[e+12>>2],this.height=Te.HEAP32[e+16>>2],0!=this.width&&0!=this.height){var t=this.width*this.height*4+60,i=Te._malloc(t),r=Te._malloc(4),a=this.SetDisRegionBottom,n=this.SetDisRegionLeft,s=this.SetDisRegionRight,o=this.SetDisRegionTop;if(null===i)return;var x=Te._JSPlayM4_GetCropJPEG(this.port,i,t,r,0,0,n,o,s,a);if(1!=x){var f=Te._JSPlayM4_GetLastError(this.port);console.log("errorcode:"+f)}if(1==x){var l=Te.getValue(r,"i32"),h=new Uint8Array(l);h.set(Te.HEAPU8.subarray(i,i+l)),this._downloadFile(h,"GetCropJPEG.jpeg"),h=null}return null!=i&&(Te._free(i),i=null),null!=r&&(Te._free(r),r=null),x}return 0}},{key:"JSPlayM4_GetCropBMP",value:function(){if(1===this.decodeEngine)return this.hasWebWorker?this.decodeWorker.postMessage({command:"GetCropBMP"}):null!=this.pcVideoManager&&this.pcVideoManager.GetCropBMP(),1;if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetCropBMP","color: red"),0;var e=Te._JSPlayM4_GetFrameInfo(this.port);if(this.width=Te.HEAP32[e+12>>2],this.height=Te.HEAP32[e+16>>2],0==this.width||0==this.height)return 0;var t=this.width*this.height*4+60,i=Te._malloc(t),r=Te._malloc(4),a=this.SetDisRegionBottom,n=this.SetDisRegionLeft,s=this.SetDisRegionRight,o=this.SetDisRegionTop;if(null!==i){var x=Te._JSPlayM4_GetCropBMP(this.port,i,t,r,0,0,n,o,s,a);if(1!=x){var f=Te._JSPlayM4_GetLastError(this.port);console.log("errorcode:"+f)}if(1==x){var l=Te.getValue(r,"i32"),h=new Uint8Array(l);h.set(Te.HEAPU8.subarray(i,i+l)),this._downloadFile(h,"GetCropBmp.bmp"),h=null}return null!=i&&(Te._free(i),i=null),null!=r&&(Te._free(r),r=null),1}}},{key:"JSPlayM4_GetCanvasCapture",value:function(e){return 1===this.decodeEngine?(this.hasWebWorker?this.decodeWorker.postMessage({command:"GetCanvasCapture",cbFun:e}):null!=this.pcVideoManager&&this.pcVideoManager.JSPlayM4_GetCanvasCapture(e),1):(console.info("%c SoftDecode not support canvas capture","color: red"),1)}},{key:"JSPlayM4_StopSound",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_StopSound","color: red"),0):(this.needPlaySound=!1,Te._JSPlayM4_StopSound())}},{key:"JSPlayM4_GetSDKVersion",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetSDKVersion","color: red"),0):Te._JSPlayM4_GetSDKVersion()}},{key:"JSPlayM4_GetBuildDate",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetBuildDate","color: red"),0):Te._JSPlayM4_GetBuildDate()}},{key:"JSPlayM4_GetLastError",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetLastError","color: red"),0):Te._JSPlayM4_GetLastError(this.port)}},{key:"JSPlayM4_Fast",value:function(){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_Fast","color: red"),0;if(0===this.streamOpenMode)return 1;if(1===this.decodeEngine)if(this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"fast"})}else null!=this.pcVideoManager&&this.pcVideoManager.fast();var e=Te._JSPlayM4_Fast(this.port);return 1==e&&(this.playSpeed=2*this.playSpeed),e}},{key:"JSPlayM4_Slow",value:function(){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_Slow","color: red"),0;if(0===this.streamOpenMode)return 1;if(1===this.decodeEngine)if(this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"slow"})}else null!=this.pcVideoManager&&this.pcVideoManager.slow();var e=Te._JSPlayM4_Slow(this.port);return 1==e&&(this.playSpeed=this.playSpeed/2),console.log("this.playSpeed:"+this.playSpeed),e}},{key:"JSPlayM4_SetIFrameDecInterval",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetIFrameDecInterval","color: red"),0):1===this.decodeEngine?1:(this.decInterval=e,Te._JSPlayM4_SetIFrameDecInterval(this.port,e))}},{key:"JSPlayM4_Pause",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_Pause","color: red"),0):0===this.streamOpenMode?1:(1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"Pause",value:e}):null!=this.pcVideoManager&&this.pcVideoManager.Pause(e)),Te._JSPlayM4_Pause(this.port,e))}},{key:"JSPlayM4_OneByOne",value:function(){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_OneByOne","color: red"),0;if(0===this.streamOpenMode)return 0;Ae.cmd="onebyone";var e=Te._JSPlayM4_GetSourceBufferRemain(this.port),t=Te._JSPlayM4_GetLastError(this.port);return e<1e3||31==t?(Ae.errorCode=31,Ae.status=!0,this.fn(Ae)):(e>this.HIKPoolSize-1e3||11==t)&&(Ae.errorCode=0,Ae.status=!1,this.fn(Ae)),this.curStatus=5,1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"OneByOne",value:1}):null!=this.pcVideoManager&&this.pcVideoManager.OneByOne(1)),Te._JSPlayM4_OneByOne(this.port)}},{key:"JSPlayM4_OneByOneResume",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_OneByOneResume","color: red"),0):(Ae.cmd="play",0===this.streamOpenMode?1:(this.curStatus=2,1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"OneByOne",value:0}):null!=this.pcVideoManager&&this.pcVideoManager.OneByOne(0)),Te._JSPlayM4_Play(this.port,this.canvasIDData)))}},{key:"JSPlayM4_SetVolume",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetVolume","color: red"),0):(this.volumeValue=e,Te._JSPlayM4_SetVolume(this.port,e))}},{key:"JSPlayM4_GetVolume",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetVolume","color: red"),0):Te._JSPlayM4_GetVolume(this.port)}},{key:"JSPlayM4_SetDisplayRegion",value:function(e,t,i,r,a){var n=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDisplayRegion","color: red"),0;var o=1,x=t,f=r,l=i,h=a;if("number"!=typeof t||"number"!=typeof r||"number"!=typeof i||"number"!=typeof a)return console.log("param is not number"),0;if(n)x=0,l=this.canvasWidth,f=0,h=this.canvasHeight,this.iZoomNum=0,this.iRatio_x=1,this.iRatio_y=1;else if(s){if(x<0||l<0||f<0||h<0)return 0;0!==this.iZoomNum&&(x=Math.round(x/this.iRatio_x)+this.stDisplayRect.left,f=Math.round(f/this.iRatio_y)+this.stDisplayRect.top,l=Math.round(l/this.iRatio_x)+this.stDisplayRect.left,h=Math.round(h/this.iRatio_y)+this.stDisplayRect.top)}if(this.stDisplayRect={top:f,left:x,right:l,bottom:h},l-x<16||h-f<16||l-x>this.canvasWidth||h-f>this.canvasHeight)return console.log(">>>JS left:"+t+",right:"+i+",top:"+r+",bottom:"+a+",bClose:"+n+",bZoomEnable:"+s+",iZoomNum:"+this.iZoomNum+",canvasWidth:"+this.canvasWidth+",canvasHeight:"+this.canvasHeight),0;if(1===this.decodeEngine)if(this.SetDisRegionBottom=h/this.canvasHeight*this.height,this.SetDisRegionLeft=x/this.canvasWidth*this.width,this.SetDisRegionRight=l/this.canvasWidth*this.width,this.SetDisRegionTop=f/this.canvasHeight*this.height,this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"SetDisplayRegion",sx:this.SetDisRegionLeft,sy:this.SetDisRegionTop,sw:this.SetDisRegionRight-this.SetDisRegionLeft,sh:this.SetDisRegionBottom-this.SetDisRegionTop})}else null!=this.pcVideoManager&&this.pcVideoManager.SetDisplayRegion(this.SetDisRegionLeft,this.SetDisRegionTop,this.SetDisRegionRight-this.SetDisRegionLeft,this.SetDisRegionBottom-this.SetDisRegionTop);else{var c=Te._JSPlayM4_GetFrameInfo(this.port);this.width=Te.HEAP32[c+12>>2],this.height=Te.HEAP32[c+16>>2],this.SetDisRegionBottom=h/this.canvasHeight*this.height,this.SetDisRegionLeft=x/this.canvasWidth*this.width,this.SetDisRegionRight=l/this.canvasWidth*this.width,this.SetDisRegionTop=f/this.canvasHeight*this.height,o=Te._JSPlayM4_SetDisplayRegion(this.port,this.canvasID,this.SetDisRegionLeft,this.SetDisRegionRight,this.SetDisRegionTop,this.SetDisRegionBottom)}return s&&(this.iRatio_x=this.canvasWidth/(l-x),this.iRatio_y=this.canvasHeight/(h-f),this.iZoomNum++),o}},{key:"JSPlayM4_SetPrintLogFlag",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetPrintLogFlag","color: red"),0):(this.printfFlag=Number(e),Te._JSPlayM4_SetPrintLogFlag(this.port,e))}},{key:"JSPlayM4_RenderPrivateData",value:function(e,t){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_RenderPrivateData","color: red"),0;if(this.renderPrivateInfo.set(e,t),1===this.decodeEngine)if(this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"RenderPrivateData",bTrue:t})}else null!=this.pcVideoManager&&this.pcVideoManager.RenderPrivateData(t);return Te._JSPlayM4_RenderPrivateData(this.port,e,t)}},{key:"JSPlayM4_RenderPrivateDataEx",value:function(e,t,i){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_RenderPrivateDataEx","color: red"),0):(this.renderIntelSubEx.set(e,t),this.renderIntelFlagEx.set(e,i),Te._JSPlayM4_RenderPrivateDataEx(this.port,e,t,i))}},{key:"JSPlayM4_SetCanvasSize",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetCanvasSize","color: red"),0;if(e<16||t<16||null===this.canvasID)return 0;if(this.canvasWidth=e,this.canvasHeight=t,1===this.decodeEngine)if(this.hasWebWorker){if(null==this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"SetCanvasSize",width:e,height:t})}else null!=this.pcVideoManager&&this.pcVideoManager.SetCanvasSize(e,t);return Te._JSPlayM4_SetCanvasSize(this.port,e,t,i)}},{key:"JSPlayM4_SetDisplayBuf",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDisplayBuf","color: red"),0):(this.displayBuf=e,this.needSetDisplayBuf=!0,1===this.decodeEngine&&(this.hasWebWorker?null===this.decodeWorker||this.decodeWorker.postMessage({command:"SetDisplayBuf",value:e}):null!=this.pcVideoManager&&this.pcVideoManager.SetDisplayBuf(e)),Te._JSPlayM4_SetDisplayBuf(this.port,e))}},{key:"JSPlayM4_GetSourceBufferRemain",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetSourceBufferRemain","color: red"),0):Te._JSPlayM4_GetSourceBufferRemain(this.port)}},{key:"JSPlayM4_GetBufferValue",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetBufferValue","color: red"),0):Te._JSPlayM4_GetBufferValue(this.port,e)}},{key:"JSPlayM4_ReversePlay",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_ReversePlay","color: red"),0):0===this.streamOpenMode?1:(this.reversePlay=!0,Te._JSPlayM4_ReversePlay(this.port))}},{key:"JSPlayM4_SetDecodeThreadNum",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecodeThreadNum","color: red"),0):(this.decodeThreadNum=e,Te._JSPlayM4_SetDecodeThreadNum(this.port,e))}},{key:"JSPlayM4_GetCanvasSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetCanvasSize","color: red"),0):1===this.decodeEngine?(this.hasWebWorker?this.decodeWorker.postMessage({command:"GetCanvasSize"}):null!=this.pcVideoManager&&this.pcVideoManager.GetCanvasSize(),1):Te._JSPlayM4_GetCanvasSize(this.port,e)}},{key:"JSPlayM4_DisplayLostFrames",value:function(e,t,i){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_DisplayLostFrames","color: red"),0):Te._JSPlayM4_DisplayLostFrames(this.port,e,t,i)}},{key:"JSPlayM4_SetANRParam",value:function(e,t){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetANRParam","color: red"),0):(this.anrParamFlag=e,this.anrParamLevel=t,Te._JSPlayM4_SetANRParam(this.port,e,t))}},{key:"JSPlayM4_SetResampleValue",value:function(e,t){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetResampleValue","color: red"),0):(this.resampleFlag=e,this.resampleRate=t,Te._JSPlayM4_SetResampleValue(this.port,e,t))}},{key:"JSPlayM4_SetAntialias",value:function(e){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAntialias","color: red"),0;var t=1;return this.antialiasFlag=e,1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"SetAntialias",value:e}):null!=this.pcVideoManager&&(t=this.pcVideoManager.SetAntialias(e)):t=Te._JSPlayM4_SetAntialias(this.port,e),t}},{key:"JSPlayM4_SyncToAudio",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SyncToAudio","color: red"),0):(this.syncToAudio=SyncToAudio,Te._JSPlayM4_SyncToAudio(this.port,e))}},{key:"JSPlayM4_SetAudioThreadModel",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAudioThreadModel","color: red"),0):(this.setAudioThreadModel=e,Te._JSPlayM4_SetAudioThreadModel(this.port,e))}},{key:"JSPlayM4_SetDecodeERC",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecodeERC","color: red"),0):(this.decodeERCLevel=e,Te._JSPlayM4_SetDecodeERC(this.port,e))}},{key:"JSPlayM4_SkipErrorData",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SkipErrorData","color: red"),0):(this.needSetSkipErrorData=!0,this.skipErrorData=e,Te._JSPlayM4_SkipErrorData(this.port,e))}},{key:"JSPlayM4_SetDemuxModel",value:function(e,t){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDemuxModel","color: red"),0):(this.needSetDemuxModel=!0,this.setDemuxModelType=e,this.setDemuxModelFlag=t,Te._JSPlayM4_SetDemuxModel(this.port,e,t))}},{key:"JSPlayM4_SetD3DPostProcess",value:function(e,t){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetD3DPostProcess","color: red"),0;var i=1;return this.d3dPostProcessType=e,this.d3dPostProcessValue=t,this.needSetD3DPostProcess=!0,1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"SetD3DPostProcess",ProcessType:e,ProcessValue:t}):null!=this.pcVideoManager&&(i=this.pcVideoManager.SetD3DPostProcess(e,t)):i=Te._JSPlayM4_SetD3DPostProcess(this.port,e,t),i}},{key:"JSPlayM4_SetFirstFrameCallBack",value:function(e,t){if(!(t&&"function"==typeof t||null===t))return 0;if(this.FFCallBackFun=t,this.FirstFrameCallBackflag=e,null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetFirstFrameCallBack","color: red"),0;var i=1;return 0===this.decodeEngine&&(i=Te._JSPlayM4_SetFirstFrameCallBack(this.port,e,this.nUser)),i}},{key:"JSPlayM4_SetDecCallBack",value:function(e,t){return t&&"function"==typeof t||null===t?(this.decCallBackFun=t,null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecCallBack","color: red"),0):Te._JSPlayM4_SetDecCallBack(this.port,e,this.nUser)):0}},{key:"JSPlayM4_SetDisplayCallBack",value:function(e,t){return t&&"function"==typeof t||null===t?(this.displayCallBackFun=t,null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDisplayCallBack","color: red"),0):Te._JSPlayM4_SetDisplayCallBack(this.port,e,this.nUser)):0}},{key:"JSPlayM4_SetFrameInfoCallBack",value:function(e){var t=this,i=1;if(1===this.decodeEngine)this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"SetFrameInfoCallBack",value:e}):null!=this.pcVideoManager&&(i=this.pcVideoManager.SetFrameInfoCallBack((function(e){t.displayFrameInfo.port=e.port,t.displayFrameInfo.codecType=e.codecType,t.displayFrameInfo.frameType=e.frameType,t.displayFrameInfo.frameSize=e.frameSize,t.displayFrameInfo.width=e.width,t.displayFrameInfo.height=e.height,t.displayFrameInfo.timeStamp=e.timeStamp,t.displayFrameInfo.frameRate=e.frameRate,t.displayFrameInfo.frameNum=e.frameNum,t.displayFrameInfo.interlace=e.interlace,t.displayFrameInfo.streamEnd=e.streamEnd,t.displayFrameInfo.cropLeft=e.cropLeft,t.displayFrameInfo.cropRight=e.cropRight,t.displayFrameInfo.cropTop=e.cropTop,t.displayFrameInfo.cropBottom=e.cropBottom,t.displayFrameInfo.year=e.year,t.displayFrameInfo.month=e.month,t.displayFrameInfo.week=e.week,t.displayFrameInfo.day=e.day,t.displayFrameInfo.hour=e.hour,t.displayFrameInfo.minute=e.minute,t.displayFrameInfo.second=e.second,t.displayFrameInfo.milliseconds=e.milliseconds}),e));else{if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetFrameInfoCallBack","color: red"),0;i=Te._JSPlayM4_SetFrameInfoCallBack(this.port,e)}return i}},{key:"JSPlayM4_SetDecCBStream",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecCBStream","color: red"),0):Te._JSPlayM4_SetDecCBStream(this.port,e)}},{key:"JSPlayM4_GetFrameInfo",value:function(){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetFrameInfo","color: red"),0;var e={};if(0==this.decodeEngine){var t=Te._JSPlayM4_GetFrameInfo(this.port);e.port=Te.HEAP32[t>>2],e.frameType=Te.HEAP32[t+4>>2],e.frameSize=Te.HEAP32[t+8>>2],e.width=Te.HEAP32[t+12>>2],e.height=Te.HEAP32[t+16>>2],e.timeStamp=Te.HEAP32[t+20>>2],e.frameRate=Te.HEAP32[t+24>>2],e.bitPerSample=Te.HEAP32[t+28>>2],e.samplesPerSec=Te.HEAP32[t+32>>2],e.channel=Te.HEAP32[t+36>>2],e.frameNum=Te.HEAP32[t+40>>2],e.cropLeft=Te.HEAP32[t+44>>2],e.cropRight=Te.HEAP32[t+48>>2],e.cropTop=Te.HEAP32[t+52>>2],e.cropBottom=Te.HEAP32[t+56>>2],e.year=Te.HEAP16[t+60>>1],e.month=Te.HEAP16[t+62>>1],e.week=Te.HEAP16[t+64>>1],e.day=Te.HEAP16[t+66>>1],e.hour=Te.HEAP16[t+68>>1],e.minute=Te.HEAP16[t+70>>1],e.second=Te.HEAP16[t+72>>1],e.milliseconds=Te.HEAP16[t+74>>1],this.width=e.width,this.height=e.height}else e=this.displayFrameInfo;return e}},{key:"JSPlayM4_GetAdditionData",value:function(){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetAdditionData","color: red"),0;var e=null,t=Te._JSPlayM4_GetAdditionData(this.port);return e.dataType=Te.HEAP32[t>>2],e.dataStrVersion=Te.HEAP32[t+4>>2],e.dataTimeStamp=Te.HEAP32[t+8>>2],e.dataLength=Te.HEAP32[t+12>>2],e.pData=Te.HEAP32[t+16>>2],e.additionDataBuffer=new Uint8Array(dataLength),additionDataBuffer.set(Te.HEAPU8.subarray(pData,pData+dataLength)),e}},{key:"JSPlayM4_SetAdditionDataCallBack",value:function(e,t,i){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAdditionDataCallBack","color: red"),0):i&&"function"==typeof i||null===i?(this.addtionCallBackFun=i,Te._JSPlayM4_SetAdditionDataCallBack(this.port,e,t,this.nUser)):0}},{key:"JSPlayM4_GetPlayedTimeEx",value:function(e){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetPlayedTimeEx","color: red"),0;if(!(e&&"function"==typeof e||null===e))return 0;if(this.getPlayTimeCallBackFun=e,1===this.decodeEngine){if(this.hasWebWorker)this.decodeWorker.postMessage({command:"GetPlayedTime"});else if(null!=this.pcVideoManager){var t=this.pcVideoManager.GetPlayedTime();this.getPlayTimeCallBackFun&&this.getPlayTimeCallBackFun(t-this.startTimeStamp)}}else{var i=Te._JSPlayM4_GetPlayedTimeEx(this.port);this.getPlayTimeCallBackFun(i)}}},{key:"JSPlayM4_GetFileTime",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetFileTime","color: red"),0):Te._JSPlayM4_GetFileTime(this.port)}},{key:"JSPlayM4_GetMpOffset",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetMpOffset","color: red"),0):e>this.JSPlayM4_GetFileTime()?-1:(1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"needReset"}):null!=this.pcVideoManager&&this.pcVideoManager.needReset()),Te._JSPlayM4_GetMpOffset(this.port,e))}},{key:"JSPlayM4_ResetBuffer",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_ResetBuffer","color: red"),0):(this.resetBufferType=e,Te._JSPlayM4_ResetBuffer(this.port,e))}},{key:"JSPlayM4_SetGlobalBaseTime",value:function(e,t,i,r,a,n,s){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetGlobalBaseTime","color: red"),0):(this.globalBaseTime={year:e,month:t,day:i,hour:r,min:a,sec:n,ms:s},Te._JSPlayM4_SetGlobalBaseTime(this.port,e,t,i,r,a,n,s))}},{key:"JSPlayM4_SetSecretKey",value:function(e){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetSecretKey","color: red"),0;var t=this._stringToBytes(e),i=Te._malloc(128);if(null!==i){var r=Te.HEAPU8.subarray(i,i+128),a=new Uint8Array(128);r.set(a,0),r.set(new Uint8Array(t)),r=null,a=null;var n=Te._JSPlayM4_SetSecretKey(this.port,1,i,128);return null!==i&&(Te._free(i),i=null),1===n&&(this.needSetSecretKey=!0,this.SecretKeyData=e),n}}},{key:"JSPlayM4_SetRunTimeInfoCallBackEx",value:function(e,t){return t&&"function"==typeof t||null===t?(this.runtimeCBFun=t,this.runTimeModule=e,null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetRunTimeInfoCallBackEx","color: red"),0):Te._JSPlayM4_SetRunTimeInfoCallBackEx(this.port,e,this.nUser)):0}},{key:"JSPlayM4_SetPlayOrBackSwitchMode",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetPlayOrBackSwitchMode","color: red"),0):(this.playOrBackSwitchMode=e,0==this.decodeEngine?Te._JSPlayM4_SetPlayOrBackSwitchMode(this.port,e):0)}},{key:"JSPlayM4_SetStretchPlay",value:function(e,t){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetStretchPlay","color: red"),0):(this.setStretchPlayTime=e,this.setStretchPlaySpeed=t,0==this.decodeEngine?Te._JSPlayM4_SetStretchPlay(this.port,e,t):0)}},{key:"JSPlayM4_SetAutoSmoothPlay",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAutoSmoothPlay","color: red"),0):(this.autoSmoothPlayModel=e,0==this.decodeEngine?Te._JSPlayM4_SetAutoSmoothPlay(this.port,e):0)}},{key:"JSPlayM4_KeepPlaySpeed",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_KeepPlaySpeed","color: red"),0):(this.keepPlaySpeed=e,0==this.decodeEngine?Te._JSPlayM4_KeepPlaySpeed(this.port,e):0)}},{key:"JSPlayM4_IgnoreHeaderAudioDefine",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_IgnoreHeaderAudioDefine","color: red"),0):Te._JSPlayM4_IgnoreHeaderAudioDefine(this.port,e)}},{key:"JSPlayM4_SetSycGroup",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetSycGroup","color: red"),0):Te._JSPlayM4_SetSycGroup(this.port,e)}},{key:"JSPlayM4_FEC_SetCanvasID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetCanvasID","color: red"),0;this.FECCanvasID=e;var i=1;if(null!=e&&""!=e)if(this.FECcanvasIDArray=e.split(","),1===this.decodeEngine)this.hasWebWorker?this.decodeWorker.postMessage({command:"SetCanvasID"}):null!=this.pcVideoManager?i=this.pcVideoManager.FEC_SetCanvasID(e):console.info("%c JSPlayM4_FEC_SetCanvasID this.pcVideoManager is null","color: red");else{for(var r="",a=0;a<this.FECcanvasIDArray.length;a++)a==this.FECcanvasIDArray.length-1?r+="#"+this.FECcanvasIDArray[a]:r+="#"+this.FECcanvasIDArray[a]+",";if(0!=this.FECcanvasIDArray.length&&t)for(var n=0;n<this.FECcanvasIDArray.length;n++){var s=document.getElementById(this.FECcanvasIDArray[n]);if(s){var o=s.cloneNode(!0);s.parentNode.replaceChild(o,s)}}var x=this._stringToBytes(r),f=2*r.length;if(this.pFECTotalCanvasIDData=Te._malloc(f),null===this.pFECTotalCanvasIDData)return 0;var l=Te.HEAPU8.subarray(this.pFECTotalCanvasIDData,this.pFECTotalCanvasIDData+f),h=new Uint8Array(f);l.set(h,0),l.set(new Uint8Array(x)),l=null,h=null,i=Te._JSPlayM4_FEC_SetCanvasID(this.port,this.pFECTotalCanvasIDData)}else console.log(" JSPlayM4_FEC_SetCanvasID canvasID is null :"+e),i=0;return i}},{key:"JSPlayM4_FEC_ResetCorrectType",value:function(e,t,i){if(this.printfFlag&&console.log("JSPlayM4_FEC_ResetCorrectType 1 decodeEngine:"+this.decodeEngine+",hasWebWorker:"+this.hasWebWorker+",fishSubPort:"+e+",placeType:"+t+",correctType:"+i),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_ResetCorrectType","color: red"),0;this.FECPlaceType=t,this.FECCorrectType=i;var r=1;return 1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECResetCorrectType",fishSubPort:e,placeType:t,correctType:i}):r=0:r=null!=this.pcVideoManager?this.pcVideoManager.FEC_ResetCorrectType(e,t,i):0:r=Te._JSPlayM4_FEC_ResetCorrectType(this.port,e,t,i),r}},{key:"JSPlayM4_FEC_GetPort",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_GetPort this.decodeEngine："+this.decodeEngine+",placeType:"+e+",correctType:"+t),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetPort","color: red"),0;var r=-1;return this.FECGetPortCB=i,1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECGetPort",placeType:e,correctType:t}):r=-1:(null!=this.pcVideoManager?((r=this.pcVideoManager.FEC_GetPort(e,t))<1||r>31||null==r)&&(r=-1):r=-1,null!=this.FECGetPortCB&&this.FECGetPortCB(r)):(((r=Te._JSPlayM4_FEC_GetPort(this.port,e,t))<1||r>31||null==r)&&(r=-1),null!=this.FECGetPortCB&&this.FECGetPortCB(r)),r}},{key:"JSPlayM4_FEC_Enable",value:function(e){if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_Enable this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_Enable","color: red"),0;var t=1;return 0==e?console.log("fishPort is 0 ,main canvas doesn't need call FEC_Enable"):1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECEnable",fishSubPort:e}):t=0:t=null!=this.pcVideoManager?this.pcVideoManager.FEC_Enable(e):0:t=Te._JSPlayM4_FEC_Enable(this.port,e),t}},{key:"JSPlayM4_FEC_SetParam",value:function(e,t){if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_SetParam 1 this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",upDateType:"+t.upDateType+",param2d.fPTZParam.fPTZPositionX:"+t.fPTZParam.fPTZPositionX+",param2d.fPTZParam.fPTZPositionY:"+t.fPTZParam.fPTZPositionY),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetParam","color: red"),0;var i=1;if(1===this.decodeEngine)this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetParam",fishSubPort:e,param2d:t}):i=0:i=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetParam(e,t):0;else{var r=Te._JSPlayM4_GetFishEye2DParam();null!=t.upDateType&&(Te.HEAP32[r>>2]=t.upDateType),null!=t.fPTZParam&&null!=t.fPTZParam.fPTZPositionX&&null!=t.fPTZParam.fPTZPositionY&&(Te.HEAPF32[r+8>>2]=t.fPTZParam.fPTZPositionX,Te.HEAPF32[r+12>>2]=t.fPTZParam.fPTZPositionY),null!=t.fPTZParam&&(Te.HEAPF32[r+32>>2]=t.fPTZZoom),null!=t.fValue&&(Te.HEAPF32[r+36>>2]=t.fValue),i=Te._JSPlayM4_FEC_SetParam(this.port,e)}return i}},{key:"JSPlayM4_FEC_GetParam",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetParam","color: red"),0;var i={fRXLeft:0,fRXRight:0,fRYTop:0,fRYBottom:0,bBlack:0,bCut:0,nFishParamType:0,fAngle:0,fZoom:0,fPTZX:0,fPTZY:0,emCorrectType:0};if(this.FECParamCB=t,1===this.decodeEngine)this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"FECGetParam",fishSubPort:e}):null!=this.pcVideoManager&&(this.pcVideoManager.FEC_GetParam(e,i),null!=this.FECParamCB&&this.FECParamCB(i));else{var r=Te._JSPlayM4_FEC_GetParam(this.port,e);i.bBlack=0,i.fPTZX=Te.HEAPF32[r+8>>2],i.fPTZY=Te.HEAPF32[r+12>>2],i.fRXLeft=Te.HEAPF32[r+16>>2],i.fRXRight=Te.HEAPF32[r+20>>2],i.fRYTop=Te.HEAPF32[r+24>>2],i.fRYBottom=Te.HEAPF32[r+28>>2],i.fZoom=Te.HEAPF32[r+32>>2],i.fAngle=Te.HEAPF32[r+36>>2],i.bCut=Te.HEAPF32[r+63>>2],i.nFishParamType=Te.HEAPF32[r+67>>2],null!=this.FECParamCB&&this.FECParamCB(i)}return 1}},{key:"JSPlayM4_FEC_SetViewParam",value:function(e,t,i){if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_SetViewParam this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",upDateType:"+t+",fValue:"+i),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetViewParam","color: red"),0;var r=1;return 1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetViewParam",fishSubPort:e,upDateType:t,fValue:i}):r=0:r=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetViewParam(e,t,i):0:r=Te._JSPlayM4_FEC_SetViewParam(this.port,e,t,i),r}},{key:"JSPlayM4_FEC_GetViewParam",value:function(e,t,i){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetViewParam","color: red"),0;var r=1;this.FECViewParamCB=i;var a={fValue:-1};if(1===this.decodeEngine)this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECGetViewParam",fishSubPort:e,upDateType:t}):r=0:null!=this.pcVideoManager?(r=this.pcVideoManager.FEC_GetViewParam(e,t,a),null!=this.FECViewParamCB&&this.FECViewParamCB(a)):r=0;else{var n=Te._JSPlayM4_GetViewParam(this.port,e,t);a.fValue=n,null!=this.FECViewParamCB&&this.FECViewParamCB(a)}return r}},{key:"JSPlayM4_FEC_SetWnd",value:function(e,t){if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_SetWnd this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",hWnd:"+t),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetWnd","color: red"),0;var i=1;if(0==e)console.log("fishPort is 0 ,main canvas doesn't need call FEC_SetWnd");else if(null!=t)if(1===this.decodeEngine){var r=document.getElementById(t);if(this.hasWebWorker){var a=r.transferControlToOffscreen();null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetWnd",fishSubPort:e,offscrrenCnv:a},[a]):i=0}else i=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetWnd(e,r):0}else{var n=null;if(null!=t){var s=this._stringToBytes("#"+t),o=2*(t.length+1);n=Te._malloc(o);var x=Te.HEAPU8.subarray(n,n+o),f=new Uint8Array(o);x.set(f,0),x.set(new Uint8Array(s)),x=null,f=null}i=Te._JSPlayM4_FEC_SetWnd(this.port,e,n),null!=n&&(Te._free(n),n=null)}else console.log(">>>JS JSPlayM4_FEC_SetWnd hwnd error this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",hWnd:"+t),i=0;return i}},{key:"JSPlayM4_FEC_Disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1;return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_Disable","color: red"),0):(0==e?console.log("fishPort is 0 ,main canvas doesn't need call FEC_Disable"):1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECDisable",fishSubPort:e,clearFECCanvas:t,clearContext:i}):r=0:r=null!=this.pcVideoManager?this.pcVideoManager.FEC_Disable(e,t,i):0:r=Te._JSPlayM4_FEC_Disable(this.port,e,t,i),r)}},{key:"JSPlayM4_FEC_DelPort",value:function(e){if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_DelPort this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_DelPort","color: red"),0;var t=1;return 1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECDelPort",fishSubPort:e}):t=0:t=null!=this.pcVideoManager?this.pcVideoManager.FEC_DelPort(e):0:t=Te._JSPlayM4_FEC_DelPort(this.port,e),t}},{key:"JSPlayM4_FEC_SetDisplayRegion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,n=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_SetDisplayRegion this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",left:"+r.left+",right:"+r.right+",top:"+r.top+",bottom:"+r.bottom),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetDisplayRegion","color: red"),0;var o=1,x=r.left,f=r.right,l=r.top,h=r.bottom;if("number"!=typeof x||"number"!=typeof f||"number"!=typeof h||"number"!=typeof l)return console.log("param is not number"),0;if(n){if(s){if(x<0||f<0||l<0||h<0)return 0;0!==this.iFECZoomNum&&(x=Math.round(x/this.iFECRatio_x)+this.stFECDisplayRect.left,l=Math.round(l/this.iFECRatio_y)+this.stFECDisplayRect.top,f=Math.round(f/this.iFECRatio_x)+this.stFECDisplayRect.left,h=Math.round(h/this.iFECRatio_y)+this.stFECDisplayRect.top)}}else x=0,f=this.canvasWidth,l=0,h=this.canvasHeight,this.iFECZoomNum=0,this.iFECRatio_x=1,this.iFECRatio_y=1;if(this.stFECDisplayRect={top:l,left:x,right:f,bottom:h},f-x<16||h-l<16||f-x>this.canvasWidth||h-l>this.canvasHeight)return 0;if(1===this.decodeEngine){var c=x/this.canvasWidth*this.width,_=f/this.canvasWidth*this.width,u=l/this.canvasHeight*this.height,d=h/this.canvasHeight*this.height;this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetDisplayRegion",fishSubPort:e,type:t,regionNum:i,sx:c,sy:u,sw:_-c,sh:d-u}):o=0:o=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetDisplayRegion(e,t,i,c,u,_-c,d-u):0}else if(null!==Te){var p=x/this.canvasWidth*1e3,m=f/this.canvasWidth*1e3,P=l/this.canvasHeight*1e3,y=h/this.canvasHeight*1e3;o=n?Te._JSPlayM4_FEC_SetDisplayRegion(this.port,e,t,i,p,m,P,y,a,n):Te._JSPlayM4_FEC_SetDisplayRegion(this.port,e,0,0,0,0,0,0,null,n)}else o=0;return s&&(this.iFECRatio_x=this.canvasWidth/(f-x),this.iFECRatio_y=this.canvasHeight/(h-l),this.iFECZoomNum++),o}},{key:"JSPlayM4_FEC_SetBackCilling",value:function(e,t){var i=1;return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetBackCilling","color: red"),0):(1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetBackCilling",fishSubPort:e,bValue:t}):i=0:i=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetBackCilling(e,t):0:i=Te._JSPlayM4_FEC_SetBackCilling(this.port,e,t),i)}},{key:"JSPlayM4_FEC_GetPTZPort",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetPTZPort","color: red"),0;var a=-1;return this.FECGetPTZPortCB=r,1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECGetPTZPort",fPositionX:e,fPositionY:t}):a=0:null!=this.pcVideoManager?(((a=this.pcVideoManager.FEC_GetPTZPort(i,e,t))<0||a>31||null==a)&&(a=-1),null!=this.FECGetPTZPortCB&&this.FECGetPTZPortCB(a)):a=-1:console.info("%c softDecoder not support JSPlayM4_FEC_GetPTZPort","color: red"),a}},{key:"JSPlayM4_FEC_SetPTZDisplayMode",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetPTZDisplayMode","color: red"),0):(1===this.decodeEngine&&(this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"FECSetPTZDisplayMode",ptzMode:e}):null!=this.pcVideoManager&&this.pcVideoManager.FEC_SetPTZDisplayMode(e)),1)}},{key:"JSPlayM4_FEC_PTZ2Window",value:function(e,t,i,r){return 1}},{key:"JSPlayM4_FEC_PTZ2Window2",value:function(e,t,i){return 1}},{key:"JSPlayM4_InputPrivateInfo",value:function(e,t,i){var r={};r.linesNum=Te.HEAP32[e>>2],r.absTimeStamp=Te.HEAP32[e+4>>2],r.stDrawLinesArray=[];for(var a=0;a<r.linesNum;a++){r.stDrawLinesArray[a]={},r.stDrawLinesArray[a].vertex_num=Te.HEAP32[e+8+112*a>>2],r.stDrawLinesArray[a].lineWidth=Te.HEAP32[e+12+112*a>>2],r.stDrawLinesArray[a].bFill=Te.HEAP32[e+16+112*a>>2],r.stDrawLinesArray[a].bLoop=Te.HEAP32[e+20+112*a>>2],r.stDrawLinesArray[a].color={},r.stDrawLinesArray[a].color.R=Te.HEAPF32[e+24+112*a>>2],r.stDrawLinesArray[a].color.G=Te.HEAPF32[e+28+112*a>>2],r.stDrawLinesArray[a].color.B=Te.HEAPF32[e+32+112*a>>2],r.stDrawLinesArray[a].color.A=Te.HEAPF32[e+36+112*a>>2],r.stDrawLinesArray[a].stPoint=[];for(var n=0;n<r.stDrawLinesArray[a].vertex_num;n++)r.stDrawLinesArray[a].stPoint[n]={},r.stDrawLinesArray[a].stPoint[n].x=Te.HEAPF32[e+40+112*a+8*n>>2],r.stDrawLinesArray[a].stPoint[n].y=Te.HEAPF32[e+44+112*a+8*n>>2]}var s={};s.nFontsNum=Te.HEAP32[t>>2],s.absTimeStamp=Te.HEAP32[t+4>>2],s.stDrawFontsArray=[];for(var o=0;o<s.nFontsNum;o++){s.stDrawFontsArray[o]={},s.stDrawFontsArray[o].nFontSizeW=Te.HEAP32[t+8+40*o>>2],s.stDrawFontsArray[o].nFontSizeH=Te.HEAP32[t+12+40*o>>2],s.stDrawFontsArray[o].color={},s.stDrawFontsArray[o].color.R=Te.HEAPF32[t+16+40*o>>2],s.stDrawFontsArray[o].color.G=Te.HEAPF32[t+20+40*o>>2],s.stDrawFontsArray[o].color.B=Te.HEAPF32[t+24+40*o>>2],s.stDrawFontsArray[o].color.A=Te.HEAPF32[t+28+40*o>>2],s.stDrawFontsArray[o].stPoint={},s.stDrawFontsArray[o].stPoint.x=Te.HEAPF32[t+32+40*o>>2],s.stDrawFontsArray[o].stPoint.y=Te.HEAPF32[t+36+40*o>>2];var x=Te.HEAP32[t+40+40*o>>2],f=Te.HEAP32[t+44+40*o>>2],l=new Uint8Array(f);l.set(Te.HEAP8.subarray(x,x+f));for(var h="",c=0;c<l.length;c++)0!==l[c]&&(h+=String.fromCharCode(l[c]));s.stDrawFontsArray[o].fontString=h}var _={};_.absTimeStamp=Te.HEAP32[i>>2],_.nWidth=Te.HEAP32[i+4>>2],_.nHeight=Te.HEAP32[i+8>>2],_.pstRect={},_.pstRect.fTop=Te.HEAPF32[i+12>>2],_.pstRect.fBottom=Te.HEAPF32[i+16>>2],_.pstRect.fLeft=Te.HEAPF32[i+20>>2],_.pstRect.fRight=Te.HEAPF32[i+24>>2],_.nPixelFormat=Te.HEAP32[i+28>>2],_.fAlpha=Te.HEAPF32[i+32>>2],_.nPixelFormat;var u=Te.HEAP32[i+36>>2],d=Te.HEAP32[i+40>>2],p=new Uint8Array(d);return p.set(Te.HEAPU8.subarray(u,u+d)),_.picImageData=p,1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"InputPrivateInfo",linesInfo:r,fontInfo:s,ImageInfo:_}):null!=this.pcVideoManager&&this.pcVideoManager.InputPrivateInfo(r,s,_)),1}},{key:"JSPlayM4_SetWaterMarkFont",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetWaterMarkFont","color: red"),0):(1===this.decodeEngine?this.hasWebWorker?this.decodeWorker.postMessage({command:"SetWaterMarkFont",fontParam:e}):null!=this.pcVideoManager&&this.pcVideoManager.SetWaterMarkFont(e):console.log("%c1>soft decode not support SetWaterMarkFont,","color: red"),1)}},{key:"JSPlayM4_SetWaterMarkImage",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetWaterMarkImage","color: red"),0):(1===this.decodeEngine?this.hasWebWorker?this.decodeWorker.postMessage({command:"SetWaterMarkImage",imageParam:e}):null!=this.pcVideoManager&&this.pcVideoManager.SetWaterMarkImage(e):console.log("%c1>soft decode not support SetWaterMarkImage,","color: red"),1)}},{key:"_stringToBytes",value:function(e){for(var t,i,r=[],a=0;a<e.length;a++){t=e.charCodeAt(a),i=[];do{i.push(255&t),t>>=8}while(t);r=r.concat(i.reverse())}return r}},{key:"_downloadFile",value:function(e,t){var i=e;n(e,Blob)||n(e,File)||(i=new Blob([e]));var r=window.URL.createObjectURL(i),a=window.document.createElement("a");a.href=r,a.download=t;var s=document.createEvent("MouseEvents");s.initEvent("click",!0,!0),a.dispatchEvent(s)}},{key:"downloadRTPData",value:function(e){if(this.bWriteData){var t=e,i=this.aTotalBuffer.length;console.log("totalLength:"+i);for(var r=0,a=t.length;r<a;r++)this.aTotalBuffer[i+r]=t[r];this.iFrameNum++,t=null,console.log("downloadRTPdata iFrameNum:"+this.iFrameNum)}if(this.bWriteData&&this.iFrameNum>=600){console.log("download600RawData");var n=new Uint8Array(this.aTotalBuffer);this._downloadFile(n,"Raw600.data"),this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.bWriteData=!1,this.iFrameNum=0,n=null}}},{key:"downloadAudioPCMData",value:function(e){if(this.bWriteAudioPCMData){for(var t=e,i=this.audioPCMBuffer.length,r=0,a=t.length;r<a;r++)this.audioPCMBuffer[i+r]=t[r];this.iAudioPCMFrameNum++,t=null,console.log("download ANR Decode AudioData FrameNum:"+this.iAudioPCMFrameNum)}if(this.bWriteAudioPCMData&&this.iAudioPCMFrameNum>=WRITE_PCM_NUM){console.log("download"+WRITE_PCM_NUM+"this.audioPCMBuffer");var n=new Uint8Array(this.audioPCMBuffer);this._downloadFile(n,"AudioANR.data"),this.audioPCMBuffer.splice(0,this.audioPCMBuffer.length),this.bWriteAudioPCMData=!1,this.iAudioPCMFrameNum=0,n=null}}}]),t}();window._getFExplore=function(){var e,t={},i=navigator.userAgent.toLowerCase();if((e=i.match(/rv:([\d.]+)\) like gecko/))||(e=i.match(/msie ([\d\.]+)/))?t.ie=e[1]:(e=i.match(/edge\/([\d\.]+)/))?t.edge=e[1]:(e=i.match(/firefox\/([\d\.]+)/))?t.firefox=e[1]:(e=i.match(/(?:opera|opr).([\d\.]+)/))?t.opera=e[1]:(e=i.match(/chrome\/([\d\.]+)/))?t.chrome=e[1]:(e=i.match(/version\/([\d\.]+).*safari/))&&(t.safari=e[1]),t.chrome){var r=t.chrome,a=r.indexOf(".");return Number(r.substring(0,a))}return t.ie?console.info("%c1>your browser is IE ,it does not support play without plugin","color: red"):t.safari?console.info("%c1>your browser is safari ,it does not support softV2.0 or hard decode","color: red"):t.firefox?console.info("%c1>your browser is Firefox ,it only support soft decode","color: red"):console.info("%c1>your browser does not support play without plugin","color: red"),-1},window.JSPlayM4_AdditionDataCBFun=function(e,t,i){if(null!=Fe[i][e]){var r={};r.dataType=Te.HEAP32[t>>2],r.dataStrVersion=Te.HEAP32[t+4>>2],r.dataTimeStamp=Te.HEAP32[t+8>>2],r.dataLength=Te.HEAP32[t+12>>2],r.pData=Te.HEAP32[t+16>>2],r.additionDataBuffer=new Uint8Array(r.dataLength),r.additionDataBuffer.set(Te.HEAPU8.subarray(r.pData,r.pData+r.dataLength)),Fe[i][e].hasOwnProperty("addtionCallBackFun")&&null!=Fe[i][e].addtionCallBackFun&&null!=Fe[i][e].addtionCallBackFun&&Fe[i][e].addtionCallBackFun(r)}},window.JSPlayM4_DisplayCallBack=function(e,t,i,r,a){if(null!=Fe[a][e]){var n={};n.yuvData=t,n.isize=i,n.timeStamp=r,Fe[a][e].hasOwnProperty("displayCallBackFun")&&null!=Fe[a][e].displayCallBackFun&&Fe[a][e].displayCallBackFun(n)}},window.JSPlayM4_DecCallBack=function(e,t,i,r,a,n){if(null!=Fe[n][e]){var s={};s.port=e,s.Data=t,s.isize=i,s.iDataType=r,s.SampleRate=a,Fe[n][e].hasOwnProperty("decCallBackFun")&&null!=Fe[n][e].decCallBackFun&&Fe[n][e].decCallBackFun(s)}},window.JSPlayM4_RunTimeInfoCallBack=function(e,t,i,r){if(null!=Fe[r][e]){var a=Te.HEAP32[t>>2],n=Te.HEAP32[t+4>>2],s=Te.HEAP32[t+8>>2],o=Te.HEAP32[t+12>>2],x=i;Fe[r][e].hasOwnProperty("runtimeCBFun")&&null!=Fe[r][e].runtimeCBFun&&Fe[r][e].runtimeCBFun(a,n,s,o,x)}},window.JSPlayM4_FirstFrameCallBack=function(e,t){null!=Fe[t][e]&&Fe[t][e].hasOwnProperty("FFCallBackFun")&&null!=Fe[t][e].FFCallBackFun&&null!=Fe[t][e].FFCallBackFun&&Fe[t][e].FFCallBackFun()},window.JSPlayM4_AudioPCMCallBack=function(e,t,i,r){null!=Fe[r][e]&&Fe[r][e].__proto__.hasOwnProperty("downloadAudioPCMData")&&Fe[r][e].downloadAudioPCMData(t)},window.JSPlayM4_RTPRawDataCallBack=function(e,t,i){null!=Fe[i][port]&&Fe[i][port].__proto__.hasOwnProperty("downloadRTPData")&&Fe[i][port].downloadRTPData(e)};var Be,ke=function(e){return"\n(function (event) {\n    const AUDIO_TYPE = 0;\t// 音频\n    const VIDEO_TYPE = 1;   // 视频\n    const PRIVT_TYPE = 2;  // 私有帧\n\n    const PLAYM4_AUDIO_FRAME = 100; // 音频帧\n    const PLAYM4_VIDEO_FRAME = 101; // 视频帧\n\n    const PLAYM4_OK = 1;\n    const PLAYM4_ORDER_ERROR = 2;\n    const PLAYM4_DECODE_ERROR = 44 \t// 解码失败\n    const PLAYM4_NOT_KEYFRAME = 48; \t// 非关键帧\n    const PLAYM4_NEED_MORE_DATA = 31;   // 需要更多数据才能解析\n    const PLAYM4_NEED_NEET_LOOP = 35; //丢帧需要下个循环\n    const PLAYM4_SYS_NOT_SUPPORT = 16; \t// 不支持\n\n    importScripts('".concat(e,'\');\n    Module.addOnPostRun(function () {\n        postMessage({ \'function\': "loaded" });\n    });\n\n    var iStreamMode = 0;  // 流模式\n\n    var bOpenMode = false;\n    var bOpenStream = false;\n\n    var funGetFrameData = null;\n    var funGetAudFrameData = null;\n\n    var bWorkerPrintLog = false;//worker层log开关\n\n    var g_nPort = -1;\n    var pInputData = null;\n    var inputBufferSize = 40960;\n\n    self.JSPlayM4_RunTimeInfoCallBack = function (nPort, pstRunTimeInfo, pUser) {\n        let port = nPort;\n        let user = pUser;\n        let nRunTimeModule = Module.HEAP32[pstRunTimeInfo >> 2];\n        let nStrVersion = Module.HEAP32[pstRunTimeInfo + 4 >> 2];\n        let nFrameTimeStamp = Module.HEAP32[pstRunTimeInfo + 8 >> 2];\n        let nFrameNum = Module.HEAP32[pstRunTimeInfo + 12 >> 2];\n        let nErrorCode = Module.HEAP32[pstRunTimeInfo + 16 >> 2];\n        // console.log("nRunTimeModule:"+nRunTimeModule+",nFrameNum:"+nFrameNum+",nErrorCode:"+nErrorCode);\n        postMessage({ \'function\': "RunTimeInfoCallBack", \'nRunTimeModule\': nRunTimeModule, \'nStrVersion\': nStrVersion, \'nFrameTimeStamp\': nFrameTimeStamp, \'nFrameNum\': nFrameNum, \'nErrorCode\': nErrorCode });\n    }\n\n    onmessage = function (event) {\n        var eventData = event.data;\n        var res = 0;\n        switch (eventData.command) {\n            case "printLog":\n                let downloadFlag = eventData.data;\n                if (downloadFlag === true) {\n                    bWorkerPrintLog = true;\n                    res = Module._SetPrintLogFlag(g_nPort, downloadFlag);\n                }\n                else {\n                    bWorkerPrintLog = false;\n                    res = Module._SetPrintLogFlag(g_nPort, downloadFlag);\n                }\n\n                if (res !== PLAYM4_OK) {\n                    console.log("DecodeWorker.js: PlayerSDK print log failed,res" + res);\n                    postMessage({ \'function\': "printLog", \'errorCode\': res });\n                }\n                break;\n            case "SetPlayPosition":\n                let nFrameNumOrTime = eventData.data;\n                let enPosType = eventData.type;\n                // res = Module._SetPlayPosition(nFrameNumOrTime,enPosType);\n                // if (res !== PLAYM4_OK)\n                // {\n                //     postMessage({\'function\': "SetPlayPosition", \'errorCode\': res});\n                //     return;\n                // }\n                // //有没有buffer需要清除\n\n                break;\n            case "SetStreamOpenMode":\n                //获取端口号\n                g_nPort = Module._GetPort();\n                //设置流打开模式\n                iStreamMode = eventData.data;\n                res = Module._SetStreamOpenMode(g_nPort, iStreamMode);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "SetStreamOpenMode", \'errorCode\': res });\n                    return;\n                }\n                bOpenMode = true;\n                break;\n\n            case "OpenStream":\n                // 接收到的数据\n                var iHeadLen = eventData.dataSize;\n                var pHead = Module._malloc(iHeadLen + 4);\n                if (pHead === null) {\n                    return;\n                }\n                var aHead = Module.HEAPU8.subarray(pHead, pHead + iHeadLen);\n                aHead.set(new Uint8Array(eventData.data));\n                res = Module._OpenStream(g_nPort, pHead, iHeadLen, eventData.bufPoolSize);\n                postMessage({ \'function\': "OpenStream", \'errorCode\': res });\n                if (res !== PLAYM4_OK) {\n                    //释放内存\n                    Module._free(pHead);\n                    pHead = null;\n                    return;\n                }\n                bOpenStream = true;\n                break;\n            case "Play":\n                let resP = Module._Play(g_nPort);\n                if (resP !== PLAYM4_OK) {\n                    return;\n                }\n                break;\n            case "InputData":\n                // 接收到的数据\n                var iLen = eventData.dataSize;\n                if (iLen > 0) {\n                    if (pInputData == null || iLen > inputBufferSize) {\n                        if (pInputData != null) {\n                            Module._free(pInputData);\n                            pInputData = null;\n                        }\n                        if (iLen > inputBufferSize) {\n                            inputBufferSize = iLen;\n                        }\n\n                        pInputData = Module._malloc(inputBufferSize);\n                        if (pInputData === null) {\n                            return;\n                        }\n                    }\n\n                    var inputData = new Uint8Array(eventData.data);\n                    // var aInputData = Module.HEAPU8.subarray(pInputData, pInputData + iLen);\n                    // aInputData.set(inputData);\n                    Module.writeArrayToMemory(inputData, pInputData);\n                    inputData = null;\n                    res = Module._InputData(g_nPort, pInputData, iLen);\n                    if (res !== PLAYM4_OK) {\n                        let errorCode = Module._GetLastError(g_nPort);\n                        let sourceRemain = Module._GetSourceBufferRemain(g_nPort);\n                        postMessage({ \'function\': "InputData", \'errorCode\': errorCode, "sourceRemain": sourceRemain });\n                    }\n                    //Module._free(pInputData);\n                    //pInputData = null;\n                } else {\n                    let sourceRemain = Module._GetSourceBufferRemain(g_nPort);\n                    if (sourceRemain == 0) {\n                        postMessage({ \'function\': "InputData", \'errorCode\': PLAYM4_NEED_MORE_DATA });\n                        return;\n                    }\n                }\n\n                /////////////////////\n                // if (funGetFrameData === null) {\n                //     funGetFrameData = Module.cwrap(\'GetFrameData\', \'number\');\n                // }\n\n                while (bOpenMode && bOpenStream) {\n\n                    var ret = getFrameData();\n                    // 直到获取视频帧或数据不足为止\n                    if (PLAYM4_VIDEO_FRAME === ret || PLAYM4_NEED_MORE_DATA === ret || PLAYM4_ORDER_ERROR === ret)//PLAYM4_VIDEO_FRAME === ret ||  || PLAYM4_NEED_NEET_LOOP === ret\n                    {\n                        break;\n                    }\n                }\n                break;\n\n            case "SetSecretKey":\n                var keyLen = eventData.nKeyLen;\n                var pKeyData = Module._malloc(keyLen);\n                if (pKeyData === null) {\n                    return;\n                }\n                var nKeySize = eventData.data.length\n                var bufData = stringToBytes(eventData.data);\n                var aKeyData = Module.HEAPU8.subarray(pKeyData, pKeyData + keyLen);\n                let u8array = new Uint8Array(keyLen);\n                aKeyData.set(u8array, 0);\n                aKeyData.set(new Uint8Array(bufData));\n                aKeyData = null;\n                u8array = null;\n\n                res = Module._SetSecretKey(g_nPort, eventData.nKeyType, pKeyData, keyLen);//, nKeySize\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "SetSecretKey", \'errorCode\': res });\n                    Module._free(pKeyData);\n                    pKeyData = null;\n                    return;\n                }\n\n                Module._free(pKeyData);\n                pKeyData = null;\n                break;\n\n            case "GetBMP":\n                var nBMPWidth = eventData.width;\n                var nBMPHeight = eventData.height;\n                var pYUVData = eventData.data;\n                var nYUVSize = nBMPWidth * nBMPHeight * 3 / 2;\n                var oBMPCropRect = eventData.rect;\n\n                var pDataYUV = Module._malloc(nYUVSize);\n                if (pDataYUV === null) {\n                    return;\n                }\n\n                Module.writeArrayToMemory(new Uint8Array(pYUVData, 0, nYUVSize), pDataYUV);\n\n                // 分配BMP空间\n                var nBmpSize = nBMPWidth * nBMPHeight * 4 + 60;\n                var pBmpData = Module._malloc(nBmpSize);\n                var pBmpSize = Module._malloc(4);\n                if (pBmpData === null || pBmpSize === null) {\n                    Module._free(pDataYUV);\n                    pDataYUV = null;\n\n                    if (pBmpData != null) {\n                        Module._free(pBmpData);\n                        pBmpData = null;\n                    }\n\n                    if (pBmpSize != null) {\n                        Module._free(pBmpSize);\n                        pBmpSize = null;\n                    }\n                    return;\n                }\n\n                //Module._memset(pBmpSize, nBmpSize, 4); // 防止bmp截图出现输入数据过大的错误码\n                Module.setValue(pBmpSize, nBmpSize, "i32");\n                res = Module._GetBMP(g_nPort, pDataYUV, nYUVSize, pBmpData, pBmpSize,\n                    oBMPCropRect.left, oBMPCropRect.top, oBMPCropRect.right, oBMPCropRect.bottom);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "GetBMP", \'errorCode\': res });\n                    Module._free(pDataYUV);\n                    pDataYUV = null;\n                    Module._free(pBmpData);\n                    pBmpData = null;\n                    Module._free(pBmpSize);\n                    pBmpSize = null;\n                    return;\n                }\n\n                // 获取BMP图片大小\n                var nBmpDataSize = Module.getValue(pBmpSize, "i32");\n\n                // 获取BMP图片数据\n                var aBmpData = new Uint8Array(nBmpDataSize);\n                aBmpData.set(Module.HEAPU8.subarray(pBmpData, pBmpData + nBmpDataSize));\n\n                postMessage({ \'function\': "GetBMP", \'data\': aBmpData, \'errorCode\': res }, [aBmpData.buffer]);\n                aBmpData = null;\n                if (pDataYUV != null) {\n                    Module._free(pDataYUV);\n                    pDataYUV = null;\n                }\n                if (pBmpData != null) {\n                    Module._free(pBmpData);\n                    pBmpData = null;\n                }\n                if (pBmpSize != null) {\n                    Module._free(pBmpSize);\n                    pBmpSize = null;\n                }\n                break;\n\n            case "GetJPEG":\n                var nJpegWidth = eventData.width;\n                var nJpegHeight = eventData.height;\n                var pYUVData1 = eventData.data;\n                var nYUVSize1 = nJpegWidth * nJpegHeight * 3 / 2;\n                var oJpegCropRect = eventData.rect;\n\n                var pDataYUV1 = Module._malloc(nYUVSize1);\n                if (pDataYUV1 === null) {\n                    return;\n                }\n\n                Module.writeArrayToMemory(new Uint8Array(pYUVData1, 0, nYUVSize1), pDataYUV1);\n\n                // 分配JPEG空间\n                var pJpegData = Module._malloc(nYUVSize1);\n                var pJpegSize = Module._malloc(4);\n                if (pJpegData === null || pJpegSize === null) {\n                    if (pJpegData != null) {\n                        Module._free(pJpegData);\n                        pJpegData = null;\n                    }\n\n                    if (pJpegSize != null) {\n                        Module._free(pJpegSize);\n                        pJpegSize = null;\n                    }\n\n                    if (pDataYUV1 != null) {\n                        Module._free(pDataYUV1);\n                        pDataYUV1 = null;\n                    }\n                    return;\n                }\n\n                Module.setValue(pJpegSize, nJpegWidth * nJpegHeight * 2, "i32");    // JPEG抓图，输入缓冲长度不小于当前帧YUV大小\n\n                res = Module._GetJPEG(g_nPort, pDataYUV1, nYUVSize1, pJpegData, pJpegSize,\n                    oJpegCropRect.left, oJpegCropRect.top, oJpegCropRect.right, oJpegCropRect.bottom);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "GetJPEG", \'errorCode\': res });\n                    if (pJpegData != null) {\n                        Module._free(pJpegData);\n                        pJpegData = null;\n                    }\n\n                    if (pJpegSize != null) {\n                        Module._free(pJpegSize);\n                        pJpegSize = null;\n                    }\n\n                    if (pDataYUV1 != null) {\n                        Module._free(pDataYUV1);\n                        pDataYUV1 = null;\n                    }\n                    return;\n                }\n\n                // 获取JPEG图片大小\n                var nJpegSize = Module.getValue(pJpegSize, "i32");\n\n                // 获取JPEG图片数据\n                var aJpegData = new Uint8Array(nJpegSize);\n                aJpegData.set(Module.HEAPU8.subarray(pJpegData, pJpegData + nJpegSize));\n\n                postMessage({ \'function\': "GetJPEG", \'data\': aJpegData, \'errorCode\': res }, [aJpegData.buffer]);\n\n                nJpegSize = null;\n                aJpegData = null;\n\n                if (pDataYUV1 != null) {\n                    Module._free(pDataYUV1);\n                    pDataYUV1 = null;\n                }\n                if (pJpegData != null) {\n                    Module._free(pJpegData);\n                    pJpegData = null;\n                }\n                if (pJpegSize != null) {\n                    Module._free(pJpegSize);\n                    pJpegSize = null;\n                }\n                break;\n\n            case "SetDecodeFrameType":\n                var nFrameType = eventData.data;\n                res = Module._SetDecodeFrameType(g_nPort, nFrameType);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "SetDecodeFrameType", \'errorCode\': res });\n                    return;\n                }\n                break;\n            case "CloseStream":\n                //stop\n                let resS = Module._Stop(g_nPort);\n                if (resS !== PLAYM4_OK) {\n                    postMessage({ \'function\': "Stop", \'errorCode\': res });\n                    return;\n                }\n                //closeStream\n                res = Module._CloseStream(g_nPort);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "CloseStream", \'errorCode\': res });\n                    return;\n                }\n                //freePort\n                let resF = Module._FreePort(g_nPort);\n                if (resF !== PLAYM4_OK) {\n                    postMessage({ \'function\': "FreePort", \'errorCode\': res });\n                    return;\n                }\n                if (pInputData != null) {\n                    Module._free(pInputData);\n                    pInputData = null;\n                }\n                break;\n            case "PlaySound":\n                let resPS = Module._PlaySound(g_nPort);\n                if (resPS !== PLAYM4_OK) {\n                    console.log("PlaySound failed");\n                    return;\n                }\n                break;\n            case "StopSound":\n                let resSS = Module._StopSound();\n                if (resSS !== PLAYM4_OK) {\n                    console.log("StopSound failed");\n                    return;\n                }\n                break;\n            case "SetVolume":\n                let resSV = Module._SetVolume(g_nPort, eventData.volume);\n                if (resSV !== PLAYM4_OK) {\n                    console.log("Audio SetVolume failed");\n                    return;\n                }\n                break;\n            case "GetVolume":\n                let volume = Module._GetVolume();\n                if (volume > 0) {\n                    postMessage({ \'function\': "GetVolume", \'volume\': volume });\n                }\n                else {\n                    console.log("Audio GetVolume failed");\n                    return;\n                }\n                break;\n            case "OnlyPlaySound":\n                let resOPS = Module._OnlyPlaySound(g_nPort);\n                if (resOPS !== PLAYM4_OK) {\n                    console.log("OnlyPlaySound failed");\n                    return;\n                }\n                break;\n            case "Pause":\n                let resPa = Module._Pause(g_nPort, eventData.bPlay);\n                if (resPa !== PLAYM4_OK) {\n                    console.log("Pause failed");\n                    return;\n                }\n            case "PlayRate":\n                Module._SetPlayRate(g_nPort, eventData.playRate);\n                break;\n            case "SetIFrameDecInterval":\n                Module._SetIFrameDecInterval(g_nPort, eventData.data);\n                break;\n            case "SetLostFrameMode":\n                Module._SetLostFrameMode(g_nPort, eventData.data, 0);\n                break;\n            case "SetDemuxModel":\n                let resSDM = Module._SetDemuxModel(g_nPort, eventData.nIdemuxType, eventData.bTrue);\n                break;\n            case "SkipErrorData":\n                Module._SkipErrorData(g_nPort, eventData.bSkip);\n                break;\n            case "SetDecodeERC":\n                Module._SetDecodeERC(g_nPort, eventData.nLevel);\n                break;\n            case "SetANRParam":\n                Module._SetANRParam(g_nPort, eventData.nEnable, eventData.nANRLevel);\n                break;\n            case "SetResampleValue":\n                Module._SetResampleValue(g_nPort, eventData.nEnable, eventData.resampleValue);\n                break;\n            case "GetLastError":\n                let errorCode = Module._GetLastError(g_nPort);\n                postMessage({ \'function\': "GetLastError", \'errorCode\': errorCode });\n                break;\n            case "SetGlobalBaseTime":\n                Module._SetGlobalBaseTime(g_nPort, eventData.year, eventData.month, eventData.day, eventData.hour, eventData.min, eventData.sec, eventData.ms);\n                break;\n            case "SetRunTimeInfoCB":\n                Module._SetRunTimeInfoCallBackEx(g_nPort, eventData.nModuleType, 0);\n                break;\n            default:\n                break;\n        }\n    };\n\n    function getOSDTime(oFrameInfo) {\n        var iYear = oFrameInfo.year;\n        var iMonth = oFrameInfo.month;\n        var iDay = oFrameInfo.day;\n        var iHour = oFrameInfo.hour;\n        var iMinute = oFrameInfo.minute;\n        var iSecond = oFrameInfo.second;\n        var iMiSecond = oFrameInfo.misecond\n\n        if (iMonth < 10) {\n            iMonth = "0" + iMonth;\n        }\n        if (iDay < 10) {\n            iDay = "0" + iDay;\n        }\n        if (iHour < 10) {\n            iHour = "0" + iHour;\n        }\n        if (iMinute < 10) {\n            iMinute = "0" + iMinute;\n        }\n        if (iSecond < 10) {\n            iSecond = "0" + iSecond;\n        }\n        let osdTime = {};\n\n        osdTime.year = iYear;\n        osdTime.month = iMonth;\n        osdTime.week = 0;\n        osdTime.day = iDay;\n        osdTime.hour = iHour;\n        osdTime.minute = iMinute;\n        osdTime.second = iSecond;\n        osdTime.milliseconds = iMiSecond;\n        return osdTime;\n        //return iYear + "-" + iMonth + "-" + iDay + " " + iHour + ":" + iMinute + ":" + iSecond;\n    }\n    // 获取帧数据\n    function getFrameData() {\n        // function getFrameData() {\n        // 获取帧数据\n        var res = Module._GetFrameData();\n        //var res = fun();\n        if (res === PLAYM4_OK) {\n            var iFrameInfo = Module._GetFrameInfo();\n            let oFrameInfo = {};\n            oFrameInfo.frameType = Module.HEAP32[iFrameInfo >> 2];\n            oFrameInfo.frameSize = Module.HEAP32[iFrameInfo + 4 >> 2];\n            oFrameInfo.width = Module.HEAP32[iFrameInfo + 8 >> 2];\n            oFrameInfo.height = Module.HEAP32[iFrameInfo + 12 >> 2];\n            oFrameInfo.timeStamp = Module.HEAP32[iFrameInfo + 16 >> 2];\n            oFrameInfo.frameRate = Module.HEAP32[iFrameInfo + 20 >> 2];\n            oFrameInfo.bitsPerSample = Module.HEAP32[iFrameInfo + 24 >> 2];\n            oFrameInfo.samplesPerSec = Module.HEAP32[iFrameInfo + 28 >> 2];\n            oFrameInfo.channels = Module.HEAP32[iFrameInfo + 32 >> 2];\n            oFrameInfo.frameNum = Module.HEAP32[iFrameInfo + 36 >> 2];\n\n            oFrameInfo.cropLeft = Module.HEAP32[iFrameInfo + 40 >> 2];\n            oFrameInfo.cropRight = Module.HEAP32[iFrameInfo + 44 >> 2];\n            oFrameInfo.cropTop = Module.HEAP32[iFrameInfo + 48 >> 2];\n            oFrameInfo.cropBottom = Module.HEAP32[iFrameInfo + 52 >> 2];\n\n            oFrameInfo.year = Module.HEAP16[iFrameInfo + 56 >> 1];\n            oFrameInfo.month = Module.HEAP16[iFrameInfo + 58 >> 1];\n            oFrameInfo.day = Module.HEAP16[iFrameInfo + 60 >> 1];\n            oFrameInfo.hour = Module.HEAP16[iFrameInfo + 62 >> 1];\n            oFrameInfo.minute = Module.HEAP16[iFrameInfo + 64 >> 1];\n            oFrameInfo.second = Module.HEAP16[iFrameInfo + 66 >> 1];\n            oFrameInfo.misecond = Module.HEAP16[iFrameInfo + 68 >> 1];\n            switch (oFrameInfo.frameType) {\n                case AUDIO_TYPE:\n                    var iSize = oFrameInfo.frameSize;\n                    if (0 === iSize) {\n                        return -1;\n                    }\n                    var pPCM = Module._GetFrameBuffer();\n                    // var audioBuf = new ArrayBuffer(iSize);\n                    var aPCMData = new Uint8Array(iSize);\n                    aPCMData.set(Module.HEAPU8.subarray(pPCM, pPCM + iSize));\n                    if (bWorkerPrintLog) {\n                        console.log("<<<Worker: audio media Info: nSise:" + oFrameInfo.frameSize + ",nSampleRate:" + oFrameInfo.samplesPerSec + \',channel:\' + oFrameInfo.channels + \',bitsPerSample:\' + oFrameInfo.bitsPerSample);\n                    }\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "audioType", \'data\': aPCMData.buffer,\n                        \'frameInfo\': oFrameInfo, \'errorCode\': res\n                    }, [aPCMData.buffer]);\n\n                    oFrameInfo = null;\n                    pPCM = null;\n                    aPCMData = null;\n                    return PLAYM4_AUDIO_FRAME;\n\n                case VIDEO_TYPE:\n                    var szOSDTime = getOSDTime(oFrameInfo);\n\n                    var iWidth = oFrameInfo.width;\n                    var iHeight = oFrameInfo.height;\n\n                    var iYUVSize = iWidth * iHeight * 3 / 2;\n                    if (0 === iYUVSize) {\n                        return -1;\n                    }\n\n                    var pYUV = Module._GetFrameBuffer();\n\n                    // 图像数据渲染后压回，若从主码流切到子码流，存在数组大小与图像大小不匹配现象\n                    var aYUVData = new Uint8Array(iYUVSize);\n                    aYUVData.set(Module.HEAPU8.subarray(pYUV, pYUV + iYUVSize));\n                    if (bWorkerPrintLog) {\n                        console.log("<<<Worker: video media Info: Width:" + oFrameInfo.width + ",Height:" + oFrameInfo.height + ",timeStamp:" + oFrameInfo.timeStamp);\n                    }\n\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "videoType", \'data\': aYUVData.buffer,\n                        \'dataLen\': aYUVData.length, \'osd\': szOSDTime, \'frameInfo\': oFrameInfo, \'errorCode\': res\n                    }, [aYUVData.buffer]);\n\n                    oFrameInfo = null;\n                    pYUV = null;\n                    aYUVData = null;\n                    return PLAYM4_VIDEO_FRAME;\n\n                case PRIVT_TYPE:\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "", \'data\': null,\n                        \'dataLen\': -1, \'osd\': 0, \'frameInfo\': null, \'errorCode\': PLAYM4_SYS_NOT_SUPPORT\n                    });\n                    return PLAYM4_SYS_NOT_SUPPORT;\n\n                default:\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "", \'data\': null,\n                        \'dataLen\': -1, \'osd\': 0, \'frameInfo\': null, \'errorCode\': PLAYM4_SYS_NOT_SUPPORT\n                    });\n                    return PLAYM4_SYS_NOT_SUPPORT;\n            }\n        }\n        else {\n            let errorCode = Module._GetLastError(g_nPort);\n            //解码失败返回裸数据\n            if (PLAYM4_DECODE_ERROR === errorCode) {\n                var rawInfo = Module._GetRawDataInfo();\n                var pRawData = Module._GetRawDataBuffer();\n                var aRawData = new Uint8Array(rawInfo.isize);\n                aRawData.set(Module.HEAPU8.subarray(pRawData, pRawData + rawInfo.isize));\n                postMessage({\n                    \'function\': "GetRawData", \'type\': "", \'data\': aRawData.buffer,\n                    \'rawDataLen\': rawInfo.isize, \'osd\': 0, \'frameInfo\': null, \'errorCode\': errorCode\n                });\n                rawInfo = null;\n                pRawData = null;\n                aRawData = null;\n            }\n            //需要更多数据\n            if (PLAYM4_NEED_MORE_DATA === errorCode || PLAYM4_SYS_NOT_SUPPORT === errorCode || PLAYM4_NEED_NEET_LOOP === errorCode) {\n                postMessage({\n                    \'function\': "GetFrameData", \'type\': "", \'data\': null,\n                    \'dataLen\': -1, \'osd\': 0, \'frameInfo\': null, \'errorCode\': errorCode\n                });\n            }\n            return errorCode;\n        }\n    }\n\n    // 开始计算时间\n    function startTime() {\n        return new Date().getTime();\n    }\n\n    // 结束计算时间\n    function endTime() {\n        return new Date().getTime();\n    }\n\n    // 字母字符串转byte数组\n    function stringToBytes(str) {\n        var ch, st, re = [];\n        for (var i = 0; i < str.length; i++) {\n            ch = str.charCodeAt(i);  // get char\n            st = [];                 // set up "stack"\n            do {\n                st.push(ch & 0xFF);  // push byte to stack\n                ch = ch >> 8;          // shift value down by 1 byte\n            }\n            while (ch);\n            // add stack contents to result\n            // done because chars have "wrong" endianness\n            re = re.concat(st.reverse());\n        }\n        // return an array of bytes\n        return re;\n    }\n})();\n')},Oe=function(){function e(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,i,r){return i&&e(t.prototype,i),r&&e(t,r),t}}(),He=(Be=void 0,function(e){return e&&(Be=e),Be}),Ve=function(){function e(){if(function(e,t){if(!n(e,t))throw new TypeError("Cannot call a class as a function")}(this,e),He())return He();if(void 0!==e.unique)return e.unique;e.unique=this,this.oAudioContext=null,this.currentVolume=80,this.bSetVolume=!1,this.gainNode=null,this.iWndNum=-1,this.mVolumes=new Map;var t=window.AudioContext||window.webkitAudioContext;this.oAudioContext=new t,this.writeString=function(e,t,i){for(var r=0;r<i.length;r++)e.setUint8(t+r,i.charCodeAt(r))},this.setBufferToDataview=function(e,t,i){for(var r=0;r<i.length;r++,t++)e.setUint8(t,i[r])},He(this)}return Oe(e,[{key:"Play",value:function(e,t,i){var r=new ArrayBuffer(44+t),a=new DataView(r),n=i.samplesPerSec,s=i.channels,o=i.bitsPerSample;this.writeString(a,0,"RIFF"),a.setUint32(4,32+2*t,!0),this.writeString(a,8,"WAVE"),this.writeString(a,12,"fmt "),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,s,!0),a.setUint32(24,n,!0),a.setUint32(28,2*n,!0),a.setUint16(32,s*o/8,!0),a.setUint16(34,o,!0),this.writeString(a,36,"data"),a.setUint32(40,t,!0),this.setBufferToDataview(a,44,e);var x=this;return this.oAudioContext.decodeAudioData(a.buffer,(function(e){var t=x.oAudioContext.createBufferSource();if(null==t)return-1;t.buffer=e,t.start(0),(null==x.gainNode||x.bSetVolume)&&(x.gainNode=x.oAudioContext.createGain(),x.bSetVolume=!1),x.gainNode.gain.value=x.currentVolume/100,x.gainNode.connect(x.oAudioContext.destination),t.connect(x.gainNode)}),(function(e){return console.log("decode error"),-1})),0}},{key:"Stop",value:function(){return null!=this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),!0}},{key:"SetVolume",value:function(e){return this.bSetVolume=!0,this.currentVolume=e,this.mVolumes.set(this.iWndNum,this.currentVolume),!0}},{key:"SetWndNum",value:function(e){this.iWndNum=e;var t=this.mVolumes.get(e);return null==t&&(t=80),this.currentVolume=t,!0}},{key:"GetVolume",value:function(){var e=this.mVolumes.get(this.iWndNum);return null==e&&(e=80),e}}]),e}(),Ne=31,Ye=25,Xe=20480,Ue={width:0,height:0,frameNum:0,yuvData:null},We={width:0,height:0,frameNum:0,yuvData:null},Ge={sampleRate:0,channel:0,bitsPerSample:0,length:0,pcmData:null},Je={id:null,cmd:null,data:null,errorCode:0,status:null},Ze=function(){function t(i,r,a,n){if(e(this,t),this.jsplayer=i,null==r||void 0===r||"string"!=typeof r)return 0;if(this.szBasePath=r,!a||"function"!=typeof a)return 0;this.fnCallBack=a,this.decodeWorker=null,this.streamOpenMode=null,this.bOpenStream=!1,this.audioRenderer=null,this.aAudioBuffer=[],this.iAudioBufferSize=0,this.Volume=0,this.oSuperRender=null,this.aVideoFrameBuffer=[],this.YUVBufferSize=1,this.szOSDTime=null,this.bJSPrintLog=!1,this.bWriteYUVData=!1,this.iYUV10size=0,this.aVideoYUVBuffer=[],this.bWritePCMData=!1,this.iAudioBuffer500Size=0,this.aAudioPCMBuffer=[],this.bWriteRawData=!1,this.iRawDataSize=0,this.aRawDataBuffer=[],this.bWriteRTPData=!0,this.iRTPDataSize=0,this.aRTPDataBuffer=[],this.downloadRTP=!1,this.rtpNum=0,this.bPlaySound=!1,this.bPlay=!1,this.bPause=!1,this.bOnebyOne=!1,this.bPlayRateChange=!1,this.audioNum=0,this.videoNum=0,this.FrameForwardLen=1,this.bOnlyPlaySound=!1,this.bVideoCropInfo=!1,this.dataCallBackFun=null,this.YUVBufSizeCBFun=null,this.DecCallBackFun=null,this.DisplayCallBackFun=null,this.PCMCallBackFun=null,this.DecInfoYUV=Ue,this.DisplayInfoYUV=We,this.DecInfoPCM=Ge,this.displayFrameInfo={},this.frameInfoFlag=!0,this.startTimeStamp=0,this.nWidth=0,this.nHeight=0,this.nSPSCropLeft=0,this.nSPSCropRight=0,this.nSPSCropTop=0,this.nSPSCropBottom=0,this.decCBStream=0,this.sCanvasId=null,this.aDisplayBuf=null,this.bVisibility=!0,this.nDecFrameType=0,this.runtimeInfoCBFun=null,this.firstFrameCB=null,this.needFirstFrameCB=!1,this.iCanvasWidth=0,this.iCanvasHeight=0,this.iZoomNum=0,this.iRatio_x=1,this.iRatio_y=1,this.stDisplayRect={top:0,left:0,right:0,bottom:0},this.bDisRect=!1,this.stYUVRect={top:0,left:0,right:0,bottom:0},this.aInputDataLens=[],this.aInputDataBuffer=[],this.bIsGetYUV=!1,this.bIsFirstFrame=!0,this.iInputMaxBufSize=5242880,this.bIsInput=!1,this.bIsInputBufOver=!1,this.bIsInputBufWillOver=!1,this.iInputDataLen=Xe;var s=this;this.errorCode=1,this.loopNum=0,console.info("%c1>there will play by V1","color: green"),this.setCallBack=function(e,t,i,r,a){var s=Je;s.id=n,s.cmd=t,s.data=i,s.errorCode=r,s.status=a,e.errorCode=r,e.fnCallBack(s)},this.convertErrorCode=function(e){switch(e){case 1:return 1;case 98:return 0;default:return e}},this.arrayBufferCopy=function(e){var t=e.byteLength,i=new Uint8Array(t),r=new Uint8Array(e),a=0;for(a=0;a<t;a++)i[a]=r[a];return i},this.inputDataFun=function(){var e,t=0;if(s.bIsGetYUV=!1,s.bIsInputBufOver||s.bIsInputBufWillOver){e=new Uint8Array(1);var i={command:"InputData",data:new Uint8Array(e).buffer,dataSize:0};s.decodeWorker.postMessage(i,[i.data])}else if(s.bPlay&&(!s.bPause||s.bOnebyOne)||this.bOnlyPlaySound){for(;s.aInputDataLens.length>0&&!((t+=s.aInputDataLens.shift())>s.iInputDataLen););e=s.aInputDataBuffer.splice(0,t),i={command:"InputData",data:new Uint8Array(e).buffer,dataSize:t},s.decodeWorker.postMessage(i,[i.data])}e=null},this.getPic=function(e,t){if(null==this.decodeWorker||null==this.oSuperRender)return 2;if(!this.bPlay)return 2;if(!e||"function"!=typeof e)return 0;if(this.dataCallBackFun=e,0===this.iZoomNum)this.stYUVRect.left=0,this.stYUVRect.top=0,this.stYUVRect.right=0,this.stYUVRect.bottom=0;else{if(0===this.iCanvasWidth||0===this.iCanvasHeight)this.stYUVRect.left=0,this.stYUVRect.top=0,this.stYUVRect.right=0,this.stYUVRect.bottom=0;else{var i=this.nWidth/this.iCanvasWidth,r=this.nHeight/this.iCanvasHeight;this.stYUVRect.left=Math.round(this.stDisplayRect.left*i),this.stYUVRect.top=Math.round(this.stDisplayRect.top*r),this.stYUVRect.right=Math.round(this.stDisplayRect.right*i),this.stYUVRect.bottom=Math.round(this.stDisplayRect.bottom*r)}if(this.stYUVRect.right-this.stYUVRect.left<32||this.stYUVRect.bottom-this.stYUVRect.top<32)return 0}if(null==this.aDisplayBuf)return 2;var a={command:t,data:this.arrayBufferCopy(this.aDisplayBuf).buffer,width:this.nWidth,height:this.nHeight,rect:this.stYUVRect};return this.decodeWorker.postMessage(a,[a.data]),1},this.createWorker=function(e){if(window.Worker){if(null==e.decodeWorker){var t=new Blob([ke(e.szBasePath)]),i=URL.createObjectURL(t);if(this.decodeWorker=new Worker(i),e.bJSPrintLog&&console.log(">>>JSPlayV1.1 createWorker success!"),null==e.decodeWorker)return 60}e.decodeWorker.onmessage=function(t){var i=null,r=t.data;switch(e.errorCode=r.errorCode,r.function){case"printLog":console.log("print JSPlayerSDK log failed");break;case"loaded":i="loaded",console.log("V1 Decoder.js loaded path:"+e.szBasePath),e.setCallBack(e,"loaded",0,0,!0);break;case"SetStreamOpenMode":i="SetStreamOpenMode";break;case"OpenStream":if(i="OpenStream",1===r.errorCode)return void(s.bOpenStream=!0);break;case"InputData":i="InputData",11===r.errorCode&&(s.bIsInputBufOver=!0,console.log("yff inputBuffer over set key frame \n"),1!=s.nDecFrameType&&s.PlayM4_SetDecodeFrameType(1)),36===r.errorCode&&(s.bIsInputBufWillOver=!0),r.errorCode===Ne&&(s.bIsInputBufOver=!1,s.bIsInputBufWillOver=!1,s.aInputDataLens.length>0&&s.bIsInput?(s.inputDataFun(),s.bIsInput=!1):s.bIsGetYUV=!0);break;case"GetFrameData":if(i="GetFrameData",!s.bOnlyPlaySound){if(null!=r.data&&null!=r.frameInfo&&(r.frameInfo.width,r.frameInfo.height),!s.bPlay)return;if(s.errorCode=r.errorCode,!(s.bIsFirstFrame||r.errorCode!==Ne&&35!==r.errorCode)){r.errorCode===Ne&&(s.bIsInputBufOver=!1,s.bIsInputBufWillOver=!1),s.loopNum>5?(s.bIsGetYUV=!0,s.loopNum=0):(s.inputDataFun(),s.loopNum++);break}s.bIsInputBufOver||s.bIsInputBufWillOver?s.inputDataFun():"videoType"===r.type&&(s.aInputDataLens.length>0&&s.bIsInput?(s.inputDataFun(),s.bIsInput=!1):s.bIsGetYUV=!0,s.bIsFirstFrame=!1)}if(s.bVisibility&&1===r.errorCode)switch(r.type){case"videoType":if(null==r.data||null==r.frameInfo)return 0;null!=s.DecCallBackFun&&(s.DecInfoYUV.port=0,s.DecInfoYUV.iDataType=3,s.DecInfoYUV.height=r.frameInfo.height,s.DecInfoYUV.width=r.frameInfo.width,s.DecInfoYUV.isize=r.frameInfo.width*r.frameInfo.height*3/2,s.DecInfoYUV.Data=new Uint8Array(r.data),s.DecCallBackFun(s.DecInfoYUV)),s.bIsFirstFrame=!1,e.nWidth=r.frameInfo.width,e.nHeight=r.frameInfo.height,e.nSPSCropLeft=r.frameInfo.cropLeft,e.nSPSCropRight=r.frameInfo.cropRight,e.nSPSCropTop=r.frameInfo.cropTop,e.nSPSCropBottom=r.frameInfo.cropBottom,e.timeStamp=r.frameInfo.timeStamp;var a=new Object;if(a.data=r.data,a.osdTime=r.frameInfo,a.nWidth=r.frameInfo.width,a.nHeight=r.frameInfo.height,a.frameNum=r.frameInfo.frameNum,a.timeStamp=r.frameInfo.timeStamp,e.bWriteYUVData){for(var n=new Uint8Array(r.data),o=e.aVideoYUVBuffer.length,x=0,f=n.length;x<f;x++)e.aVideoYUVBuffer[o+x]=n[x];e.iYUV10size++,n=null}if(e.bWriteYUVData&&e.iYUV10size>=20){var l=new Uint8Array(e.aVideoYUVBuffer);e.downloadFile(l,"videoYUV.data"),e.aVideoYUVBuffer.splice(0,e.aVideoYUVBuffer.length),e.bWriteYUVData=!1,e.iYUV10size=0,l=null}if(e.aVideoFrameBuffer.push(a),a=null,e.aVideoFrameBuffer.length>5&&(e.bOnebyOne||e.aVideoFrameBuffer.splice(0,2)),e.bOnebyOne&&e.aVideoFrameBuffer.length>=15){e.setCallBack(e,"OnebyOne",0,0,!1),e.bIsFirstFrame=!0;break}break;case"audioType":if(e.bPlaySound&&!e.bPlayRateChange||s.bOnlyPlaySound){for(null!=s.PCMCallBackFun&&(s.DecInfoPCM.port=0,s.DecInfoPCM.SampleRate=r.frameInfo.samplesPerSec,s.DecInfoPCM.channel=r.frameInfo.channels,s.DecInfoPCM.bitsPerSample=r.frameInfo.bitsPerSample,s.DecInfoPCM.iDataType=101,s.DecInfoPCM.Data=new Uint8Array(r.data),s.DecInfoPCM.isize=s.DecInfoPCM.Data.length,s.PCMCallBackFun(s.DecInfoPCM)),n=new Uint8Array(r.data),o=e.aAudioBuffer.length,x=0,f=n.length;x<f;x++)e.aAudioBuffer[o+x]=n[x];if(e.iAudioBufferSize++,n=null,e.bWritePCMData){for(n=new Uint8Array(r.data),o=e.aAudioPCMBuffer.length,x=0,f=n.length;x<f;x++)e.aAudioPCMBuffer[o+x]=n[x];console.log("audio_type num:"+e.iAudioBuffer500Size+", len:"+n.length),e.iAudioBuffer500Size++,n=null}if(e.bWritePCMData&&e.iAudioBuffer500Size>=100){var h=new Uint8Array(e.aAudioPCMBuffer);e.downloadFile(h,"audioPCM.data"),e.aAudioPCMBuffer.splice(0,e.aAudioPCMBuffer.length),e.bWritePCMData=!1,e.iAudioBuffer500Size=0,h=null}e.iAudioBufferSize>=Ye&&(e.audioRenderer.Play(e.aAudioBuffer,e.aAudioBuffer.length,r.frameInfo),e.aAudioBuffer.splice(0,e.aAudioBuffer.length),e.aAudioBuffer.length=0,e.iAudioBufferSize=0)}}break;case"GetRawData":if(i="GetRawData",e.bWriteRawData){var c=new Uint8Array(r.data),_=e.aRawDataBuffer.length;for(x=0,f=c.length;x<f;x++)e.aRawDataBuffer[_+x]=c[x];e.iRawDataSize++,c=null}if(e.bWriteRawData&&e.iRawDataSize>=100){var u=new Uint8Array(e.aRawDataBuffer);e.downloadFile(u,"rawBuffer.data"),e.aRawDataBuffer.splice(0,e.aRawDataBuffer.length),e.bWriteRawData=!1,e.iRawDataSize=0,u=null}break;case"PlaySound":i="PlaySound";break;case"GetJPEG":if(i="GetJPEG",1!==r.errorCode)return void console.log("GetJPEG ErrorParam");var d=r.data;e.dataCallBackFun(d,d.length);break;case"GetBMP":if(i="GetBMP",1!==r.errorCode)return void console.log("GetBMP ErrorParam");var p=r.data;e.dataCallBackFun(p,p.length);break;case"RunTimeInfoCallBack":i="RunTimeInfoCallBack";var m=r.nRunTimeModule,P=r.nStrVersion,y=r.nFrameTimeStamp,S=r.nFrameNum,b=r.nErrorCode;null!=e.runtimeInfoCBFun&&e.runtimeInfoCBFun(m,P,y,S,b)}"GetFrameData"!==i&&"loaded"!==i?e.setCallBack(e,i,0,e.convertErrorCode(r.errorCode),!0):16!==r.errorCode&&101!==r.errorCode&&100!==r.errorCode&&48!==r.errorCode||e.setCallBack(e,i,0,e.convertErrorCode(r.errorCode),!0)}}},this.createWorker(s),this.draw=function(){if(s.bPlay){if(s.needFirstFrameCB&&null!=s.firstFrameCB&&(s.firstFrameCB(),s.needFirstFrameCB=!1),!s.bPause||s.bOnebyOne){requestAnimationFrame(s.draw);var e=s.aVideoFrameBuffer.length;if(null!=s.YUVBufSizeCBFun&&s.YUVBufSizeCBFun(e),s.bOnebyOne){if(e<=8&&s.setCallBack(s,"OnebyOne",0,Ne,!0),e<=s.FrameForwardLen+1)return void s.setCallBack(s,"OnebyOne",0,Ne,!0);for(var t=s.FrameForwardLen;t>1;)s.aVideoFrameBuffer.shift(),t--;s.bOnebyOne=!1}if(e>0){var i=s.aVideoFrameBuffer.shift(),r={};r.nCropLeft=s.nSPSCropLeft,r.nCropRight=s.nSPSCropRight,r.nCropTop=s.nSPSCropTop,r.nCropBottom=s.nSPSCropBottom,r.nCodeWidth=i.nWidth,r.nCodeHeight=i.nHeight,s.aDisplayBuf=i.data;var a=new Uint8Array(s.aDisplayBuf);s.bVideoCropInfo?s.oSuperRender.DisplayFrame(a,i.nWidth-s.nSPSCropLeft-s.nSPSCropRight,i.nHeight-s.nSPSCropTop-s.nSPSCropBottom,i.timeStamp,r,null):s.oSuperRender.DisplayFrame(a,i.nWidth,i.nHeight,i.timeStamp,r,null),null!=s.DisplayCallBackFun&&(s.DisplayInfoYUV.height=i.nHeight,s.DisplayInfoYUV.width=i.nWidth,s.DisplayInfoYUV.iSize=s.DisplayInfoYUV.height*s.DisplayInfoYUV.width*3/2,s.DisplayInfoYUV.frameNum=i.frameNum,s.DisplayInfoYUV.timeStamp=i.timeStamp,s.DisplayInfoYUV.yuvData=new Uint8Array(a),s.DisplayCallBackFun(s.DisplayInfoYUV)),s.frameInfoFlag&&(s.displayFrameInfo.codecType=0,s.displayFrameInfo.frameType=0,s.displayFrameInfo.frameSize=0,s.displayFrameInfo.width=i.nWidth,s.displayFrameInfo.height=i.nHeight,s.displayFrameInfo.timeStamp=i.timeStamp,s.displayFrameInfo.frameRate=0,s.displayFrameInfo.frameNum=i.frameNum,s.displayFrameInfo.interlace=0,s.displayFrameInfo.streamEnd=0,s.displayFrameInfo.cropLeft=s.nSPSCropLeft,s.displayFrameInfo.cropRight=s.nSPSCropRight,s.displayFrameInfo.cropTop=s.nSPSCropTop,s.displayFrameInfo.cropBottom=s.nSPSCropBottom,s.displayFrameInfo.year=i.osdTime.year,s.displayFrameInfo.month=i.osdTime.month,s.displayFrameInfo.week=0,s.displayFrameInfo.day=i.osdTime.day,s.displayFrameInfo.hour=i.osdTime.hour,s.displayFrameInfo.minute=i.osdTime.minute,s.displayFrameInfo.second=i.osdTime.second,s.displayFrameInfo.milliseconds=i.osdTime.misecond),0==s.startTimeStamp&&(s.startTimeStamp=i.timeStamp),a=null;var n=i.osdTime.year,o=i.osdTime.month,x=i.osdTime.day,f=i.osdTime.hour,l=i.osdTime.minute,h=i.osdTime.second;s.szOSDTime=n+"-"+o+"-"+x+" "+f+":"+l+":"+h,i=null}else s.setCallBack(s,"Play",0,Ne,!0)}}else s.bPlay||(s.aVideoFrameBuffer.splice(0,s.aVideoFrameBuffer.length),s.aAudioBuffer.splice(0,s.aAudioBuffer.length))}}return s(t,[{key:"PlayM4_SetCurrentFrameNum",value:function(e,t){return 16}},{key:"PlayM4_OpenPlayerSDKPrintLog",value:function(e){return!0===e?(this.bJSPrintLog=!0,this.decodeWorker.postMessage({command:"printLog",data:e})):(this.bJSPrintLog=!1,this.decodeWorker.postMessage({command:"printLog",data:e})),1}},{key:"PlayM4_DownloadYUVdata",value:function(){return this.bWriteYUVData=!0,1}},{key:"PlayM4_DownloadPCMdata",value:function(){return this.bWritePCMData=!0,1}},{key:"PlayM4_SetDecCallBack",value:function(e,t){return e?(1==this.decCBStream&&(this.DecCallBackFun=t),2==this.decCBStream&&(this.PCMCallBackFun=t),3==this.decCBStream&&(this.PCMCallBackFun=t,this.DecCallBackFun=t)):(1==this.decCBStream&&(this.DecCallBackFun=null),2==this.decCBStream&&(this.PCMCallBackFun=null),3==this.decCBStream&&(this.PCMCallBackFun=null,this.DecCallBackFun=null)),1}},{key:"PlayM4_SetDisplayCallBack",value:function(e){return e&&"function"==typeof e?(this.DisplayCallBackFun=e,1):0}},{key:"PlayM4_SetPCMCallBack",value:function(e){return e&&"function"==typeof e?(this.PCMCallBackFun=e,1):0}},{key:"PlayM4_SetStreamOpenMode",value:function(e){return null==e||void 0===e||0!==e&&1!==e?0:(this.streamOpenMode=e,1)}},{key:"PlayM4_DownloadRTPData",value:function(e){this.downloadRTP=e}},{key:"PlayM4_SetVideoCropInfo",value:function(e){return null==e||void 0===e||"boolean"!=typeof e?0:(this.bVideoCropInfo=e,1)}},{key:"PlayM4_OpenStream",value:function(e,t,i){return this.bJSPrintLog&&console.log(">>>JS PlayM4_OpenStream nSysTime:"+((new Date).getMonth()+1)+"-"+(new Date).getDate()+" "+(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds()),null==this.decodeWorker?2:null==e||t<=0||i<=0?0:(this.bPlay=!1,this.bPause=!1,this.bOnebyOne=!1,this.bIsFirstFrame=!0,this.bIsGetYUV=!1,this.bIsInput=!1,4===e[8]&&0===e[9]?this.streamOpenMode=0:this.streamOpenMode=1,this.decodeWorker.postMessage({command:"SetStreamOpenMode",data:this.streamOpenMode}),this.decodeWorker.postMessage({command:"OpenStream",data:e,dataSize:t,bufPoolSize:i}),this.bOpenStream=!0,1)}},{key:"PlayM4_CloseStream",value:function(){return null===this.decodeWorker?1:null===this.decodeWorker||!1===this.bOpenStream?2:(this.bOnlyPlaySound=!1,this.decodeWorker.postMessage({command:"CloseStream"}),null!==this.oSuperRender&&(this.oSuperRender.ReleaseDisplay(),this.oSuperRender=null),null!==this.audioRenderer&&(this.audioRenderer.Stop(),this.audioRenderer=null),this.aAudioBuffer.splice(0,this.aAudioBuffer.length),this.aVideoFrameBuffer.splice(0,this.aVideoFrameBuffer.length),this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length),this.aInputDataLens.splice(0,this.aInputDataLens.length),this.aVideoYUVBuffer.splice(0,this.aVideoYUVBuffer.length),this.aAudioPCMBuffer.splice(0,this.aAudioPCMBuffer.length),this.aRawDataBuffer.splice(0,this.aRawDataBuffer.length),this.bOpenStream=!1,this.iAudioBufferSize=0,this.szOSDTime=null,this.startTimeStamp,1)}},{key:"PlayM4_Destroy",value:function(){return null===this.decodeWorker||(this.PlayM4_CloseStream(),this.decodeWorker.terminate(),this.decodeWorker=null),1}},{key:"PlayM4_FreePort",value:function(){return this.decodeWorker.terminate(),this.decodeWorker=null,1}},{key:"PlayM4_InputData",value:function(e,t){var i=this.aInputDataBuffer.length;if(4===t){var r=new Uint8Array(e.buffer);if(1===r[0]&&2===r[1]&&3===r[2]&&4===r[3])return this.bIsFirstFrame||this.bIsGetYUV?this.inputDataFun():this.bIsInput=!0,r=null,1}if(i+t>this.iInputMaxBufSize)return console.log("input over"),this.bIsGetYUV?this.inputDataFun():this.bIsInput=!0,11;var a=null,n=t;switch(this.streamOpenMode){case 1:a=new Uint8Array(e.buffer),this.aInputDataLens.push(t);break;case 0:n=t+4;var s=new Uint32Array([t]),o=new Uint8Array(s.buffer);(a=new Uint8Array(n)).set(o,0),a.set(e,4),s=null,o=null,this.aInputDataLens.push(t+4);break;default:return 16}for(var x=0;x<n;x++)this.aInputDataBuffer[i+x]=a[x];return!this.bPlay&&!this.bOnlyPlaySound||null===this.decodeWorker||!1===this.bOpenStream||(a=null,this.bOnlyPlaySound||this.bIsFirstFrame||this.bIsGetYUV?this.inputDataFun():this.bIsInput=!0),1}},{key:"PlayM4_Play",value:function(e){if(null===this.decodeWorker)return 2;if(this.bJSPrintLog&&console.log(">>>JS PlayM4_Play canvasID: "+e),null===e)this.bOnlyPlaySound=!0,this.decodeWorker.postMessage({command:"OnlyPlaySound"}),this.sCanvasId=null;else{if("string"!=typeof e)return 0;if(this.bOnebyOne&&(this.bPlayRateChange=!1,this.bOnebyOne=!1,this.bPause=!1,this.draw()),this.bPlay)return 1;if(null==this.oSuperRender&&(this.canvasCnv=document.getElementById(e),this.oSuperRender=new ve,this.oSuperRender.InitDisplay(this.canvasCnv,"webgl",1),null==this.oSuperRender))return 61;this.sCanvasId=e,this.bPlay=!0,this.bPause=!1,this.bOnebyOne=!1,this.bPlayRateChange=!1,this.bOnlyPlaySound=!1,this.draw()}return null==this.audioRenderer&&(this.audioRenderer=new Ve,null==this.audioRenderer)?61:(this.decodeWorker.postMessage({command:"Play"}),1)}},{key:"PlayM4_Stop",value:function(e){if(!0===this.bJSPrintLog&&console.log(">>>>yff1020>>>>> V1 PlayM4_Stop"),null==this.decodeWorker||null==this.oSuperRender)return 2;if(!this.bPlay)return 2;this.bPlaySound&&(this.PlayM4_StopSound(),this.bPlaySound=!0),this.bPlay=!1,this.bOnebyOne=!1,this.bPause=!1,this.oSuperRender.SetDisplayRect(0,0,this.nWidth,this.nHeight),this.iZoomNum=0,this.bDisRect=!1;var t={};t.nCropLeft=this.nSPSCropLeft,t.nCropRight=this.nSPSCropRight,t.nCropTop=this.nSPSCropTop,t.nCropBottom=this.nSPSCropBottom,t.nCodeWidth=this.nWidth,t.nCodeHeight=this.nHeight,this.bVideoCropInfo?this.oSuperRender.DisplayFrame(null,this.nWidth-this.nSPSCropLeft-this.nSPSCropRight,this.nHeight-this.nSPSCropTop-this.nSPSCropBottom,this.timeStamp,t,null):this.oSuperRender.DisplayFrame(null,this.nWidth,this.nHeight,this.timeStamp,t,null);var i=document.getElementById(this.sCanvasId);return i&&(this.clonedCanvas=i.cloneNode(!0),this.clonedCanvasParentNode=i.parentNode,this.clonedCanvasParentNode.replaceChild(this.clonedCanvas,i)),1}},{key:"PlayM4_PlayRate",value:function(e){return null==this.decodeWorker?2:(this.bPlayRateChange=1!==e,e<1&&(e=1),this.iInputDataLen=e*Xe,this.decodeWorker.postMessage({command:"PlayRate",playRate:e}),1)}},{key:"PlayM4_Pause",value:function(e){return null==this.decodeWorker||null==this.oSuperRender?2:this.bPlay?this.bOnebyOne||this.bPause==e?2:(this.bPause=e,this.bIsFirstFrame=!0,e?this.bPlaySound&&(this.PlayM4_StopSound(),this.bPlaySound=!0):(this.bPlaySound&&this.PlayM4_PlaySound(),this.draw()),1):2}},{key:"PlayM4_OneByOne",value:function(e){return null==this.decodeWorker||null==this.oSuperRender?2:this.bPlay?e>10||e<=0?0:(e||(e=1),this.iInputDataLen=Xe,this.FrameForwardLen=e,this.bPause=!0,this.bOnebyOne=!0,this.bIsFirstFrame=!0,this.draw(),1):2}},{key:"PlayM4_PlaySound",value:function(e){return null===this.decodeWorker||!1===this.bOpenStream?2:e<0||e>16?0:null==this.audioRenderer&&(this.audioRenderer=new Ve,null==this.audioRenderer)?61:(this.decodeWorker.postMessage({command:"PlaySound"}),this.audioRenderer.SetWndNum(e),0!==this.Volume&&this.audioRenderer.SetVolume(this.Volume),this.audioRenderer.oAudioContext.resume(),this.bPlaySound=!0,1)}},{key:"PlayM4_StopSound",value:function(){return null==this.decodeWorker||null==this.audioRenderer?2:this.bPlaySound?(this.decodeWorker.postMessage({command:"StopSound"}),this.bPlaySound=!1,1):2}},{key:"PlayM4_SetDisplayBuf",value:function(e){return null==this.decodeWorker?2:e<=0?0:(this.YUVBufferSize=e,1)}},{key:"PlayM4_SetSecretKey",value:function(e,t,i){if(null==this.decodeWorker||!1===this.bOpenStream)return 2;if(null==t)return 0;if(1===e){if(128!==i)return 0;if(null==t||void 0===t)return 0}else if(0!==e)return 0;return this.decodeWorker.postMessage({command:"SetSecretKey",data:t,nKeyType:e,nKeyLen:i}),1}},{key:"PlayM4_SetDecodeFrameType",value:function(e){return console.log("PlayM4_SetDecodeFrameType nFrameType:"+e),null==this.decodeWorker||null==this.oSuperRender?2:0!==e&&1!==e?0:(this.bJSPrintLog&&console.log(">>>JS PlayM4_SetDecodeFrameType :"+e),this.nDecFrameType=e,this.decodeWorker.postMessage({command:"SetDecodeFrameType",data:e}),1)}},{key:"PlayM4_SetIFrameDecInterval",value:function(e){return 1!==this.nDecFrameType?2:e<0?0:(this.decodeWorker.postMessage({command:"SetIFrameDecInterval",data:e}),1)}},{key:"PlayM4_SetLostFrameMode",value:function(e){return e<0||e>1?0:(this.decodeWorker.postMessage({command:"SetLostFrameMode",data:e}),1)}},{key:"PlayM4_SetDisplayRegion",value:function(e,t,i){if(!0===this.bJSPrintLog&&console.log(">>>>yff1020>>>>> PlayM4_SetDisplayRegion left:"+e.left+",top:"+e.top+",right:"+e.right+",bottom:"+e.bottom),null===this.decodeWorker||!1===this.bPlay||null===this.oSuperRender)return 2;if(null===this.canvasId)return 2;if(!0===t){if(null==e)return 0;if("number"!=typeof e.left||"number"!=typeof e.top||"number"!=typeof e.right||"number"!=typeof e.bottom)return 0;if(e.right<0||e.left<0||e.top<0||e.bottom<0)return 0;var r=e.left,a=e.right,n=e.top,s=e.bottom,o=document.getElementById(this.sCanvasId).getBoundingClientRect();if(this.iCanvasWidth=o.width,this.iCanvasHeight=o.height,a-r<16||s-n<16||a-r>this.iCanvasWidth||s-n>this.iCanvasHeight)return 0;0!==this.iZoomNum&&(r=Math.round(r/this.iRatio_x)+this.stDisplayRect.left,n=Math.round(n/this.iRatio_y)+this.stDisplayRect.top,a=Math.round(a/this.iRatio_x)+this.stDisplayRect.left,s=Math.round(s/this.iRatio_y)+this.stDisplayRect.top),this.stDisplayRect={top:n,left:r,right:a,bottom:s};var x=s/this.iCanvasHeight*this.nHeight,f=r/this.iCanvasWidth*this.nWidth,l=a/this.iCanvasWidth*this.nWidth,h=n/this.iCanvasHeight*this.nHeight;this.oSuperRender.SetDisplayRect(f,h,l-f,x-h),this.bDisRect=!0;var c=a-r,_=s-n;this.iRatio_x=this.iCanvasWidth/c,this.iRatio_y=this.iCanvasHeight/_,i&&this.iZoomNum++}else this.oSuperRender.SetDisplayRect(0,0,this.nWidth,this.nHeight),this.iZoomNum=0,this.bDisRect=!1;if(this.bPause||this.bOnebyOne||this.bPlayRateChange){var u={};u.nCropLeft=this.nSPSCropLeft,u.nCropRight=this.nSPSCropRight,u.nCropTop=this.nSPSCropTop,u.nCropBottom=this.nSPSCropBottom,u.nCodeWidth=this.nWidth,u.nCodeHeight=this.nHeight,this.bVideoCropInfo?this.oSuperRender.DisplayFrame(new Uint8Array(this.aDisplayBuf),this.nWidth-this.nSPSCropLeft-this.nSPSCropRight,this.nHeight-this.nSPSCropTop-this.nSPSCropBottom,this.timeStamp,u,null):this.oSuperRender.DisplayFrame(new Uint8Array(this.aDisplayBuf),this.nWidth,this.nHeight,this.timeStamp,u,null)}return 1}},{key:"PlayM4_GetBMP",value:function(e){return this.getPic(e,"GetBMP")}},{key:"PlayM4_GetJPEG",value:function(e){return this.getPic(e,"GetJPEG")}},{key:"PlayM4_SetVolume",value:function(e){return null==this.decodeWorker||null==this.audioRenderer?2:e<0||e>100||""===e?0:(this.Volume=e,this.audioRenderer.SetVolume(e),1)}},{key:"PlayM4_GetVolume",value:function(e){if(null==this.decodeWorker)return 2;if(null==this.audioRenderer)return 2;if(e&&"function"==typeof e){var t=this.audioRenderer.GetVolume();return null===t?63:(e(t),1)}return 0}},{key:"PlayM4_GetOSDTime",value:function(e){return null==this.decodeWorker?2:this.bPlay?e&&"function"==typeof e?(e(this.szOSDTime),1):0:2}},{key:"PlayM4_SetFrameInfoCallBack",value:function(e){return this.frameInfoFlag=!!e,1}},{key:"PlayM4_GetFrameInfo",value:function(){return this.displayFrameInfo}},{key:"PlayM4_IsVisible",value:function(e){return this.bVisibility=e,1}},{key:"PlayM4_GetSdkVersion",value:function(){return"07040007"}},{key:"PlayM4_GetBuildDate",value:function(){return"20231219"}},{key:"PlayM4_GetInputBufSize",value:function(){return this.aInputDataBuffer.length}},{key:"PlayM4_SetInputBufSize",value:function(e){return e>0?(this.iInputMaxBufSize=e,console.log(">>JSBufferSize SetInputBufSize:"+this.iInputMaxBufSize),1):0}},{key:"PlayM4_GetYUVBufSize",value:function(){return this.aVideoFrameBuffer.length}},{key:"PlayM4_GetFrameResolution",value:function(e){return null==this.decodeWorker?2:e&&"function"==typeof e?(e(this.nWidth,this.nHeight),1):0}},{key:"PlayM4_RegisterYUVBufSizeCB",value:function(e){return e&&"function"==typeof e?(this.YUVBufSizeCBFun=e,1):0}},{key:"PlayM4_UnRegisterYUVBufSizeCB",value:function(){return null!=this.YUVBufSizeCBFun&&(this.YUVBufSizeCBFun=null),1}},{key:"PlayM4_ClearCanvas",value:function(){if(null==this.oSuperRender)return 2;var e={};return e.nCropLeft=this.nSPSCropLeft,e.nCropRight=this.nSPSCropRight,e.nCropTop=this.nSPSCropTop,e.nCropBottom=this.nSPSCropBottom,e.nCodeWidth=this.nWidth,e.nCodeHeight=this.nHeight,this.bVideoCropInfo?this.oSuperRender.DisplayFrame(null,this.nWidth-this.nSPSCropLeft-this.nSPSCropRight,this.nHeight-this.nSPSCropTop-this.nSPSCropBottom,this.timeStamp,e,null):this.oSuperRender.DisplayFrame(null,this.nWidth,this.nHeight,this.timeStamp,e,null),1}},{key:"PlayM4_ReleaseInputBuffer",value:function(){return null===this.aInputDataBuffer?2:(this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length),this.aInputDataLens.splice(0,this.aInputDataLens.length),1)}},{key:"PlayM4_GetDecodeFrameType",value:function(){return this.nDecFrameType}},{key:"PlayM4_SetRunTimeInfoCallBackEx",value:function(e,t){return this.runtimeInfoCBFun=t,null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetRunTimeInfoCB",nModuleType:e}),1)}},{key:"PlayM4_SetDemuxModel",value:function(e,t){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetDemuxModel",nIdemuxType:e,bTrue:t}),1)}},{key:"PlayM4_SkipErrorData",value:function(e){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SkipErrorData",bSkip:e}),1)}},{key:"PlayM4_SetDecodeERC",value:function(e){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetDecodeERC",nLevel:e}),1)}},{key:"PlayM4_SetANRParam",value:function(e,t){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetANRParam",nEnable:e,nANRLevel:t}),1)}},{key:"PlayM4_SetResampleValue",value:function(e,t){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetResampleValue",nEnable:e,resampleValue:t}),1)}},{key:"PlayM4_SetGlobalBaseTime",value:function(e,t,i,r,a,n,s){return null==this.decodeWorker?2:e<2e3||e>3e3||t<1||t>12||e<0||t<0||i<0||r<0||a<0||n<0||s<0?16:(this.decodeWorker.postMessage({command:"SetGlobalBaseTime",year:e,month:t,day:i,hour:r,min:a,sec:n,ms:s}),1)}},{key:"PlayM4_SetAudioDisplayBuf",value:function(e){return Ye=e,1}},{key:"PlayM4_GetCanvasCapture",value:function(e){return null!=this.oSuperRender?this.oSuperRender.GetCanvasData(e):1}},{key:"PlayM4_SetFirstFrameCallBack",value:function(e,t){return null!=t&&"function"!=typeof t?0:(e&&(this.firstFrameCB=t),this.needFirstFrameCB=!0,1)}},{key:"PlayM4_SetDecCBStream",value:function(e){return this.decCBStream=e,1}},{key:"PlayM4_SetCanvasSize",value:function(e,t){return null!=this.oSuperRender&&this.oSuperRender.SetCanvasSize(e,t)}},{key:"PlayM4_GetCanvasSize",value:function(){return null!=this.oSuperRender&&this.oSuperRender.GetCanvasSize()}},{key:"PlayM4_GetBufferValue",value:function(){return this.iInputMaxBufSize}},{key:"PlayM4_GetLastError",value:function(){return this.errorCode}},{key:"PlayM4_GetPlayedTimeEx",value:function(e){e(this.timeStamp-this.startTimeStamp)}},{key:"PlayM4_SetAntialias",value:function(e){return null!=this.oSuperRender&&this.oSuperRender.SetAntialias(e)}},{key:"PlayM4_SetWaterMarkFont",value:function(e){return null!=this.oSuperRender&&this.oSuperRender.SetWaterMarkFont(e)}},{key:"PlayM4_SetWaterMarkImage",value:function(e){return null!=this.oSuperRender&&this.oSuperRender.SetWaterMarkImage(e)}},{key:"PlayM4_SetD3DPostProcess",value:function(e,t){return null!=this.oSuperRender&&this.oSuperRender.SetD3DPostProcess(e,t)}},{key:"getScriptDirectory",value:function(){var e=self.location.href;return e.substr(0,e.lastIndexOf("/")+1)}},{key:"downloadFile",value:function(e,t){var i=e;n(e,Blob)||n(e,File)||(i=new Blob([e]));var r=window.URL.createObjectURL(i),a=window.document.createElement("a");a.href=r,a.download=t;var s=document.createEvent("MouseEvents");s.initEvent("click",!0,!0),a.dispatchEvent(s)}}]),t}(),je=a((function(){return function(e,t){var i,r,a,n,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function o(n){return function(o){return function(n){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,r&&(a=2&n[0]?r.return:n[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,r=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],r=0}finally{i=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,o])}}}(this,(function(e){return[2,WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]))]}))})),ze={bSupHardOrSoft:!0,bSupHardDecAVC:!0,bSupHardDecHEVC:!0,cmd:null,errorCode:0,status:null},qe=function(){function t(i,r,a){var n=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"webgl",x=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1;if(e(this,t),console.log("%c>>>JSPlayerInterface wasmPathV3:%s, wasmPathV1:%s, chromeVersion:%d","color: red",i,r,_getFExplore()),this.szBasePathV3=i,this.szBasePathV1=r,this.fnCallBack=a,this.nUser=s,this.renderEngine=o,this.hasWebWorker=x,this.setHasThread=f,this.decodeEngine=1,this.streamOpenMode=0,this.printfFlag=!1,this.canvasID="",this.FECcanvasIDArray=[],this.aTotalBuffer=[],this.iFrameNum=0,this.bWriteData=!0,this.downloadInputDataFlag=!1,this.rtpDataNeedAdd4Size=!1,this.aInputDataBuffer=[],this.iInputMaxBufSize=2097152,this.audioDisplayBufSize=0,this.decodeFrameType=0,this.decInterval=-1,this.volume=0,this.displayBuf=0,this.anrParamLevel=0,this.anrParamFlag=0,this.resampleRate=0,this.resampleFlag=0,this.decodeERCLevel=0,this.skipErrorData=0,this.demuxModelType=0,this.demuxModeFlag=0,this.needResetBuffer=0,this.globalBaseTime={},this.globalBaseTime.year=0,this.inputBufSize=0,this.waterFontParam=null,this.waterImageParam=null,this.needSetFFCB=!1,this.FFCBFlag=0,this.firstFrameCB=null,this.needSetSecretKey=!1,this.keyData=null,this.runtimeModule=0,this.runtimeCBFun=null,this.needSetRunTimeInfoCB=!1,this.needPlaySound=!1,this.CanvasSubPortMap=new Map,this.oJSPlayerObj=null,this.supportWebCodecs=window._getFSupportWebCodecs(),this.supportSab=!!window.SharedArrayBuffer,this.offscreen=!!window.OffscreenCanvas,this.supportOffscreen=!1,this.offscreen){var l=new OffscreenCanvas(1,1),h=l.getContext("webgl");h&&(this.supportOffscreen=!0,h.getExtension("WEBGL_lose_context").loseContext()),l=null,h=null}this.securityContext=!0,"https:"===window.location.protocol||"localhost"===location.hostname?this.securityContext=!0:this.securityContext=!1;var c=this.JSPlayM4_GetSDKVersion(),_=this.JSPlayM4_GetBuildDate();console.log("%c wasmplayer.min.js version:%s,buildDate:%s","color: blue",c,_),this.supportSIMD=!1,this.callBackParameter=ze,this.jsplayerVersion=3,this.supportWebCodecs&&this.securityContext?this.jsplayerVersion=3:this.supportSab&&this.supportOffscreen?this.jsplayerVersion=2:this.jsplayerVersion=1,this.jsplayerVersion<3&&(this.callBackParameter.bSupHardDecAVC=!1,this.callBackParameter.bSupHardDecHEVC=!1,this.callBackParameter.bSupHardOrSoft=!1),null===this.szBasePathV3&&null!=this.szBasePathV1?this.jsplayerVersion=1:null!=this.szBasePathV3&&null===this.szBasePathV1?(console.info("%c>>>> szBasePathV1 is null ","color: red"),this.jsplayerVersion=3):null===this.szBasePathV3&&null===this.szBasePathV1&&(console.info("%c>>>> szBasePathV3 and szBasePathV1 are null ","color: red"),this.fnCallBack(this.callBackParameter)),je().then(function(e){e?(this.supportSIMD=!0,console.log("%c>>>>your browser protocol is %s, hostname:%s, WebCodecs:%s,Sab:%s,Offscreen:%s,SIMD:%s,jsplayerVersion:%d","color: red",window.location.protocol,location.hostname,this.supportWebCodecs,this.supportSab,this.supportOffscreen,this.supportSIMD,this.jsplayerVersion)):(this.supportSIMD=!1,console.log("%c>>>>your browser protocol is %s, hostname:%s, WebCodecs:%s,Sab:%s,Offscreen:%s,SIMD:%s,jsplayerVersion:%d","color: red",window.location.protocol,location.hostname,this.supportWebCodecs,this.supportSab,this.supportOffscreen,this.supportSIMD,this.jsplayerVersion))}.bind(this)),this.wasmloaded=!1,this.jsplayerVersion>1?this.oJSPlayerObj=new Le(this,this.szBasePathV3,(function(e){var t=e.bSupHardOrSoft,i=e.bSupHardDecAVC,r=e.bSupHardDecHEVC,a=e.cmd,s=e.errorCode,o=e.status;n.callBackParameter.bSupHardDecAVC=i,n.callBackParameter.bSupHardDecHEVC=r,n.callBackParameter.bSupHardOrSoft=t,n.callBackParameter.cmd=a,n.callBackParameter.errorCode=s,n.callBackParameter.status=o,n.wasmloaded=!0,n.fnCallBack(n.callBackParameter)}),this.nUser,this.renderEngine,this.hasWebWorker,this.setHasThread,this.jsplayerVersion):this.oJSPlayerObj=new Ze(this,this.szBasePathV1,(function(e){e.instance;var t=e.cmd,i=e.errorCode,r=e.status;n.callBackParameter.bSupHardDecAVC=!1,n.callBackParameter.bSupHardDecHEVC=!1,n.callBackParameter.bSupHardOrSoft=!1,n.callBackParameter.cmd=t,n.callBackParameter.errorCode=i,n.callBackParameter.status=r,n.wasmloaded=!0,n.fnCallBack(n.callBackParameter)}),0)}return s(t,[{key:"JSPlayM4_SetStreamEnd",value:function(){return 0}},{key:"JSPlayM4_GetPort",value:function(){return this.printfFlag&&console.log(">>>>>yff>>> JSPlayM4_GetPort 1"),null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetPort this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1&&this.oJSPlayerObj.JSPlayM4_GetPort(),1)}},{key:"JSPlayM4_SetStreamOpenMode",value:function(e){return this.printfFlag&&console.log(">>>>>yff20230817>>>>> JSPlayM4_SetStreamOpenMode 1 mode:"+e),this.streamOpenMode=e,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetStreamOpenMode this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetStreamOpenMode(e):this.oJSPlayerObj.PlayM4_SetStreamOpenMode(e),1)}},{key:"JSPlayM4_OpenStream",value:function(e,t,i){if(this.printfFlag&&console.log(">>>>>yff20230817>>>>> JSPlayM4_OpenStream 1 :"+e),40!==t&&console.info("%cJSPlayM4_OpenStream nSize is not 40","color: red"),4===e[8]&&0===e[9]&&(this.rtpDataNeedAdd4Size=!0),this.downloadInputDataFlag){var r=new Uint8Array(e.buffer);this.downloadRTPData(r),console.log("write 40 hik head")}var a=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_OpenStream this.oJSPlayerObj is null"),0):(a=this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_OpenStream(e,t,i):this.oJSPlayerObj.PlayM4_OpenStream(e,t,i),this.HIK40Head=e,this.HIKHeadSize=t,this.HIKPoolSize=i,16===a&&this._switchV3ToV1(this.streamOpenMode,e,t,i,this.needPlay),a)}},{key:"_switchV3ToV1",value:function(e,t,i,r,a){var n=this;console.log("%c5>switch V3 to V1","color: red"),this.jsplayerVersion=1,this.oJSPlayerObj.JSPlayM4_Stop(),this.oJSPlayerObj.JSPlayM4_CloseStream(),this.oJSPlayerObj.JSPlayM4_FreePort(),this.oJSPlayerObj=null;var s=new Ze(this,this.szBasePathV1,(function(o){o.instance;var x=o.cmd,f=o.errorCode,l=o.status;"loaded"===x&&(n.oJSPlayerObj=s,n.callBackParameter.cmd=x,n.callBackParameter.errorCode=f,n.callBackParameter.status=l,n.JSPlayM4_SetStreamOpenMode(e),n.JSPlayM4_OpenStream(t,i,r),(a||n.needPlay)&&n.JSPlayM4_Play(n.canvasID),n._switchV3ToV1ResetParam())}),0)}},{key:"_switchV3ToV1ResetParam",value:function(){return this.needSetSecretKey&&this.JSPlayM4_SetSecretKey(this.keyData),this.needSetFFCB&&this.JSPlayM4_SetFirstFrameCallBack(this.FFCBFlag,this.firstFrameCB),this.needSetRunTimeInfoCB&&this.JSPlayM4_SetRunTimeInfoCallBackEx(this.runtimeModule,this.runtimeCBFun),this.needPlaySound&&this.JSPlayM4_PlaySound(),0!=this.skipErrorData&&this.oJSPlayerObj.PlayM4_SkipErrorData(this.skipErrorData),0!=this.demuxModeFlag&&this.oJSPlayerObj.PlayM4_SetDemuxModel(this.demuxModelType,this.demuxModeFlag),0!=this.globalBaseTime.year&&this.oJSPlayerObj.PlayM4_SetGlobalBaseTime(this.globalBaseTime.year,this.globalBaseTime.month,this.globalBaseTime.day,this.globalBaseTime.hour,this.globalBaseTime.min,this.globalBaseTime.sec,this.globalBaseTime.ms),-1!=this.decInterval&&this.oJSPlayerObj.PlayM4_SetIFrameDecInterval(this.decInterval),0!=this.decodeERCLevel&&this.oJSPlayerObj.PlayM4_SetDecodeERC(this.decodeERCLevel),0!=this.volume&&this.JSPlayM4_SetVolume(this.volume),0!=this.anrParamFlag&&this.oJSPlayerObj.PlayM4_SetANRParam(this.anrParamFlag,this.anrParamLevel),0!=this.resampleFlag&&this.oJSPlayerObj.PlayM4_SetResampleValue(this.resampleFlag,this.resampleRate),0!=this.displayBuf&&this.oJSPlayerObj.PlayM4_SetDisplayBuf(this.displayBuf),null!=this.waterFontParam&&this.oJSPlayerObj.PlayM4_SetWaterMarkFont(this.waterFontParam),null!=this.waterImageParam&&this.oJSPlayerObj.PlayM4_SetWaterMarkImage(this.waterImageParam),0!=this.audioDisplayBufSize&&this.oJSPlayerObj.PlayM4_SetAudioDisplayBuf(this.audioDisplayBufSize),0!=this.decodeFrameType&&this.JSPlayM4_SetDecodeFrameType(this.decodeFrameType),0!=this.needResetBuffer&&this.oJSPlayerObj.PlayM4_ReleaseInputBuffer(),0!=this.inputBufSize&&this.oJSPlayerObj.PlayM4_SetInputBufSize(this.inputBufSize),1}},{key:"JSPlayM4_SetDecodeEngine",value:function(e){if(this.printfFlag&&console.log(">>>>>yff20230817>>>>> JSPlayM4_SetDecodeEngine 1:"+e),0!=e&&1!=e)return console.log("0 is V3softDecode, 1 is V3hardDecoder,decodeEngine:"+e),0;this.decodeEngine=e;var t=1;if(this.jsplayerVersion>1){if(!this.supportSab)return console.info("%c3>JSPlayM4_SetDecodeEngine(0 is soft,1 is hard):%d,SharedArrayBuffer Error , does not support Soft Decdoe!!!!!","color: red",e),0;t=this.oJSPlayerObj.JSPlayM4_SetDecodeEngine(this.decodeEngine)}return t}},{key:"JSPlayM4_DownloadData",value:function(){return this.downloadInputDataFlag=!0,1}},{key:"JSPlayM4_SetAudioDisplayBuf",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAudioDisplayBuf this.oJSPlayerObj is null"),0):(this.audioDisplayBufSize=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetAudioDisplayBuf(e):this.oJSPlayerObj.PlayM4_SetAudioDisplayBuf(e))}},{key:"JSPlayM4_Play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.canvasID=e;var t=1;return this.printfFlag&&console.log(">>>>>yff20230817>>>>> JSPlayM4_Play 1 this.supportSab:"+this.supportSab),null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_Play this.oJSPlayerObj is null"),this.needPlay=!0,0):(this.jsplayerVersion>1?(t=this.oJSPlayerObj.JSPlayM4_Play(e),0!=this.aInputDataBuffer.length&&(this.oJSPlayerObj.JSPlayM4_InputData(new Uint8Array(this.aInputDataBuffer),this.aInputDataBuffer.length),this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length))):(t=this.oJSPlayerObj.PlayM4_Play(e),0!=this.aInputDataBuffer.length&&(this.oJSPlayerObj.PlayM4_InputData(new Uint8Array(this.aInputDataBuffer),this.aInputDataBuffer.length),this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length))),t)}},{key:"JSPlayM4_InputData",value:function(e,t){var i;if(null===this.oJSPlayerObj||!this.wasmloaded){var r=this.aInputDataBuffer.length;if(r+t>this.iInputMaxBufSize)return console.log("WasmPlayer input over"),0;for(var a=0;a<t;a++)this.aInputDataBuffer[r+a]=e[a];return 0}if(i=this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_InputData(e,t):this.oJSPlayerObj.PlayM4_InputData(e,t),this.downloadInputDataFlag)if(this.rtpDataNeedAdd4Size){var n=null,s=t+4,o=new Uint32Array([t]),x=new Uint8Array(o.buffer);(n=new Uint8Array(s)).set(x,0),n.set(e,4),this.downloadRTPData(n),o=null,x=null,n=null}else this.downloadRTPData(e);return i}},{key:"JSPlayM4_Stop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_Stop this.oJSPlayerObj is null"),0;if(this.bWriteData&&this.iFrameNum>0){console.log("download"+this.iFrameNum+"Psdata");var t=new Uint8Array(this.aTotalBuffer);this._downloadFile(t,"RTPRaw.data"),this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.bWriteData=!1,this.iFrameNum=0,t=null}return this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_Stop(e):this.oJSPlayerObj.PlayM4_Stop(e)}},{key:"JSPlayM4_CloseStream",value:function(){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>>  JSPlayM4_CloseStream this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_CloseStream():this.oJSPlayerObj.PlayM4_CloseStream()}},{key:"JSPlayM4_FreePort",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FreePort this.oJSPlayerObj is null"),0):(e=this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FreePort():this.oJSPlayerObj.PlayM4_FreePort(),this.oJSPlayerObj=null,e)}},{key:"JSPlayM4_SetDecodeFrameType",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDecodeFrameType this.oJSPlayerObj is null"),0):(this.decodeFrameType=e,this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetDecodeFrameType(e):7==e?t=this.oJSPlayerObj.PlayM4_SetLostFrameMode(1):(t=this.oJSPlayerObj.PlayM4_SetLostFrameMode(0),t=this.oJSPlayerObj.PlayM4_SetDecodeFrameType(e)),t)}},{key:"JSPlayM4_PlaySound",value:function(){return this.needPlaySound=!0,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_PlaySound this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_PlaySound():this.oJSPlayerObj.PlayM4_PlaySound(0)}},{key:"JSPlayM4_GetJPEG",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetJPEG this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetJPEG(e,t):this.oJSPlayerObj.PlayM4_GetJPEG(e)}},{key:"JSPlayM4_GetBMP",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetBMP this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetBMP(e,t):this.oJSPlayerObj.PlayM4_GetBMP(e)}},{key:"JSPlayM4_GetCropJPEG",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetCropJPEG this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?e=this.oJSPlayerObj.JSPlayM4_GetCropJPEG():console.log("%c1>JSPlayerV1.X does not support GetCropJPEG","color: red"),e)}},{key:"JSPlayM4_GetCropBMP",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetCropBMP this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?e=this.oJSPlayerObj.JSPlayM4_GetCropBMP():console.log("%c1>JSPlayerV1.X does not support GetCropBMP","color: red"),e)}},{key:"JSPlayM4_GetCanvasCapture",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetCanvasCapture this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetCanvasCapture(e):this.oJSPlayerObj.PlayM4_GetCanvasCapture(e)}},{key:"JSPlayM4_StopSound",value:function(){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_StopSound this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_StopSound():this.oJSPlayerObj.PlayM4_StopSound()}},{key:"JSPlayM4_GetSDKVersion",value:function(){return"08010001"}},{key:"JSPlayM4_GetBuildDate",value:function(){return"2023220"}},{key:"JSPlayM4_GetLastError",value:function(){return null===this.oJSPlayerObj?0:this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetLastError():this.oJSPlayerObj.PlayM4_GetLastError()}},{key:"JSPlayM4_Fast",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_Fast this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1&&(e=this.oJSPlayerObj.JSPlayM4_Fast()),e)}},{key:"JSPlayM4_Slow",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_Slow this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1&&(e=this.oJSPlayerObj.JSPlayM4_Slow()),e)}},{key:"JSPlayM4_SetIFrameDecInterval",value:function(e){return this.decInterval=e,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetIFrameDecInterval this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetIFrameDecInterval(e):this.oJSPlayerObj.PlayM4_SetIFrameDecInterval(e)}},{key:"JSPlayM4_Pause",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_Pause this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_Pause(e):this.oJSPlayerObj.PlayM4_Pause(e)}},{key:"JSPlayM4_OneByOne",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_OneByOne this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_OneByOne():this.oJSPlayerObj.PlayM4_OneByOne(e)}},{key:"JSPlayM4_OneByOneResume",value:function(){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_OneByOneResume this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_OneByOneResume():this.oJSPlayerObj.PlayM4_Pause(!1)}},{key:"JSPlayM4_SetVolume",value:function(e){var t=1;if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_SetVolume this.oJSPlayerObj is null"),0;if(this.volume=e,this.jsplayerVersion>1)t=this.oJSPlayerObj.JSPlayM4_SetVolume(e);else{var i=e/65535*100;t=this.oJSPlayerObj.PlayM4_SetVolume(i)}return t}},{key:"JSPlayM4_GetVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetVolume this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?(t=this.oJSPlayerObj.JSPlayM4_GetVolume(),null!=e&&e(t)):t=this.oJSPlayerObj.PlayM4_GetVolume((function(t){null!=e&&e(t/100*65535)})),t)}},{key:"JSPlayM4_SetDisplayRegion",value:function(e,t,i,r,a){var n=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=1;if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_SetDisplayRegion this.oJSPlayerObj is null"),0;if(this.jsplayerVersion>1)o=this.oJSPlayerObj.JSPlayM4_SetDisplayRegion(e,t,i,r,a,n,s);else{var x={};x.left=t,x.right=i,x.top=r,x.bottom=a,o=this.oJSPlayerObj.PlayM4_SetDisplayRegion(x,!n,s)}return o}},{key:"JSPlayM4_SetPrintLogFlag",value:function(e){return this.printfFlag=e,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetPrintLogFlag this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetPrintLogFlag(e):this.oJSPlayerObj.PlayM4_OpenPlayerSDKPrintLog(e)}},{key:"JSPlayM4_RenderPrivateData",value:function(e,t){var i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_RenderPrivateData this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_RenderPrivateData(e,t):console.log("%c1>JSPlayerV1.X does not support RenderPrivateData","color: red"),i)}},{key:"JSPlayM4_RenderPrivateDataEx",value:function(e,t,i){var r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_RenderPrivateDataEx this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_RenderPrivateDataEx(e,t,i):console.log("%c1>JSPlayerV1.X does not support RenderPrivateDataEx","color: red"),r)}},{key:"JSPlayM4_SetCanvasSize",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetCanvasSize this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetCanvasSize(e,t,i):this.oJSPlayerObj.PlayM4_SetCanvasSize(e,t)}},{key:"JSPlayM4_SetDisplayBuf",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDisplayBuf this.oJSPlayerObj is null"),0):(this.displayBuf=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDisplayBuf(e):this.oJSPlayerObj.PlayM4_SetDisplayBuf(e))}},{key:"JSPlayM4_GetSourceBufferRemain",value:function(){return null===this.oJSPlayerObj?0:this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetSourceBufferRemain():this.oJSPlayerObj.PlayM4_GetInputBufSize()}},{key:"JSPlayM4_GetBufferValue",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetBufferValue this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetBufferValue(e):this.oJSPlayerObj.PlayM4_GetBufferValue(e)}},{key:"JSPlayM4_ReversePlay",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_ReversePlay this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?e=this.oJSPlayerObj.JSPlayM4_ReversePlay():console.log("%c1>JSPlayerV1.X does not support ReversePlay","color: red"),e)}},{key:"JSPlayM4_SetDecodeThreadNum",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDecodeThreadNum this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetDecodeThreadNum(e):console.log("%c1>JSPlayerV1.X does not support SetDecodeThreadNum, V1.X decocde only 1 thread","color: red"),t)}},{key:"JSPlayM4_GetCanvasSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetCanvasSize this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetCanvasSize(e):this.oJSPlayerObj.PlayM4_GetCanvasSize()}},{key:"JSPlayM4_DisplayLostFrames",value:function(e,t,i){var r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_DisplayLostFrames this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_DisplayLostFrames(e,t,i):console.log("%c1>JSPlayerV1.X does not support DisplayLostFrames","color: red"),r)}},{key:"JSPlayM4_SetANRParam",value:function(e,t){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetANRParam this.oJSPlayerObj is null"),0):(this.anrParamLevel=t,this.anrParamFlag=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetANRParam(e,t):this.oJSPlayerObj.PlayM4_SetANRParam(e,t))}},{key:"JSPlayM4_SetResampleValue",value:function(e,t){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetResampleValue this.oJSPlayerObj is null"),0):(this.resampleRate=t,this.resampleFlag=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetResampleValue(e,t):this.oJSPlayerObj.PlayM4_SetResampleValue(e,t))}},{key:"JSPlayM4_SetAntialias",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAntialias this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetAntialias(e):console.log("%c1>JSPlayerV1.X does not support JSPlayM4_SetAntialias 20230922","color: red"),t)}},{key:"JSPlayM4_SyncToAudio",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SyncToAudio this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SyncToAudio(e):console.log("%c1>JSPlayerV1.X does not support SyncToAudio","color: red"),t)}},{key:"JSPlayM4_SetAudioThreadModel",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAudioThreadModel this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetAudioThreadModel(e):console.log("%c1>JSPlayerV1.X does not support SetAudioThreadModel","color: red"),t)}},{key:"JSPlayM4_SetDecodeERC",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDecodeERC this.oJSPlayerObj is null"),0):(this.decodeERCLevel=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDecodeERC(e):this.oJSPlayerObj.PlayM4_SetDecodeERC(e))}},{key:"JSPlayM4_SkipErrorData",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SkipErrorData this.oJSPlayerObj is null"),0):(this.skipErrorData=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SkipErrorData(e):this.oJSPlayerObj.PlayM4_SkipErrorData(e))}},{key:"JSPlayM4_SetDemuxModel",value:function(e,t){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDemuxModel this.oJSPlayerObj is null"),0):(this.demuxModelType=e,this.demuxModeFlag=t,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDemuxModel(e,t):this.oJSPlayerObj.PlayM4_SetDemuxModel(e,t))}},{key:"JSPlayM4_SetD3DPostProcess",value:function(e,t){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetD3DPostProcess this.oJSPlayerObj is null"),0):"number"!=typeof e||"number"!=typeof t?(console.log(">>>>>yff>>> JSPlayM4_SetD3DPostProcess nPostType or fValue is not number"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetD3DPostProcess(e,t):this.oJSPlayerObj.PlayM4_SetD3DPostProcess(e,t)}},{key:"JSPlayM4_SetFirstFrameCallBack",value:function(e,t){return this.needSetFFCB=!0,this.FFCBFlag=e,this.firstFrameCB=t,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetFirstFrameCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetFirstFrameCallBack(e,t):this.oJSPlayerObj.PlayM4_SetFirstFrameCallBack(e,t)}},{key:"JSPlayM4_SetDecCallBack",value:function(e,t){return null===this.oJSPlayerObj||"function"!=typeof t?(console.log(">>>>>yff>>> JSPlayM4_SetDecCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDecCallBack(e,t):this.oJSPlayerObj.PlayM4_SetDecCallBack(e,t)}},{key:"JSPlayM4_SetDisplayCallBack",value:function(e,t){return null===this.oJSPlayerObj||"function"!=typeof t?(console.log(">>>>>yff>>> JSPlayM4_SetDisplayCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDisplayCallBack(e,t):this.oJSPlayerObj.PlayM4_SetDisplayCallBack(t)}},{key:"JSPlayM4_SetFrameInfoCallBack",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetFrameInfoCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetFrameInfoCallBack(e):this.oJSPlayerObj.PlayM4_SetFrameInfoCallBack(e)}},{key:"JSPlayM4_SetDecCBStream",value:function(e){return null===this.oJSPlayerObj||e<1||e>3?(console.log(">>>>>yff>>> JSPlayM4_SetDecCBStream this.oJSPlayerObj is null stream:"+e),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDecCBStream(e):this.oJSPlayerObj.PlayM4_SetDecCBStream(e)}},{key:"JSPlayM4_GetFrameInfo",value:function(){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetFrameInfo this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetFrameInfo():this.oJSPlayerObj.PlayM4_GetFrameInfo()}},{key:"JSPlayM4_GetAdditionData",value:function(){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetAdditionData this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetAdditionData():(console.log("%c1>JSPlayerV1.X does not support GetAdditionData","color: red"),0)}},{key:"JSPlayM4_SetAdditionDataCallBack",value:function(e,t,i){var r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAdditionDataCallBack this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_SetAdditionDataCallBack(e,t,i):(console.log("%c1>JSPlayerV1.X does not support SetAdditionDataCallBack","color: red"),r=0),r)}},{key:"JSPlayM4_GetPlayedTimeEx",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetPlayedTimeEx this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetPlayedTimeEx(e):this.oJSPlayerObj.PlayM4_GetPlayedTimeEx(e)}},{key:"JSPlayM4_GetFileTime",value:function(){var e=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetFileTime this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?e=this.oJSPlayerObj.JSPlayM4_GetFileTime():console.log("%c1>JSPlayerV1.X does not support GetPlayedTimeEx","color: red"),1e3*e)}},{key:"JSPlayM4_GetMpOffset",value:function(e){var t=-1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetMpOffset this.oJSPlayerObj is null"),-1):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_GetMpOffset(e):console.log("%c1>JSPlayerV1.X does not support GetMpOffset","color: red"),t)}},{key:"JSPlayM4_ResetBuffer",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_ResetBuffer this.oJSPlayerObj is null"),0):(this.needResetBuffer=!0,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_ResetBuffer(e):this.oJSPlayerObj.PlayM4_ReleaseInputBuffer())}},{key:"JSPlayM4_SetGlobalBaseTime",value:function(e,t,i,r,a,n,s){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetGlobalBaseTime this.oJSPlayerObj is null"),0):(this.globalBaseTime={year:e,month:t,day:i,hour:r,min:a,sec:n,ms:s},this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetGlobalBaseTime(e,t,i,r,a,n,s):this.oJSPlayerObj.PlayM4_SetGlobalBaseTime(e,t,i,r,a,n,s))}},{key:"JSPlayM4_SetSecretKey",value:function(e){return this.needSetSecretKey=!0,this.keyData=e,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetSecretKey this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetSecretKey(e):this.oJSPlayerObj.PlayM4_SetSecretKey(1,e,128)}},{key:"JSPlayM4_SetRunTimeInfoCallBackEx",value:function(e,t){return this.runtimeModule=e,this.runtimeCBFun=t,this.needSetRunTimeInfoCB=!0,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetRunTimeInfoCallBackEx this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetRunTimeInfoCallBackEx(e,t):this.oJSPlayerObj.PlayM4_SetRunTimeInfoCallBackEx(e,t)}},{key:"JSPlayM4_SetPlayOrBackSwitchMode",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetPlayOrBackSwitchMode this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetPlayOrBackSwitchMode(e):console.log("%c1>JSPlayerV1.X does not support SetPlayOrBackSwitchMode","color: red"),t)}},{key:"JSPlayM4_SetStretchPlay",value:function(e,t){var i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetStretchPlay this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_SetStretchPlay(e,t):console.log("%c1>JSPlayerV1.X does not support SetStretchPlay","color: red"),i)}},{key:"JSPlayM4_SetAutoSmoothPlay",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAutoSmoothPlay this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetAutoSmoothPlay(e):console.log("%c1>JSPlayerV1.X does not support SetAutoSmoothPlay","color: red"),t)}},{key:"JSPlayM4_KeepPlaySpeed",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_KeepPlaySpeed this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_KeepPlaySpeed(e):console.log("%c1>JSPlayerV1.X does not support KeepPlaySpeed","color: red"),t)}},{key:"JSPlayM4_IgnoreHeaderAudioDefine",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_IgnoreHeaderAudioDefine this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_IgnoreHeaderAudioDefine(e):console.log("%c1>JSPlayerV1.X does not support IgnoreHeaderAudioDefine","color: red"),t)}},{key:"JSPlayM4_SetSycGroup",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetSycGroup this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetSycGroup(e):console.log("%c1>JSPlayerV1.X does not support SetSycGroup","color: red"),t)}},{key:"JSPlayM4_FEC_SetCanvasID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=1;return this.FECcanvasIDArray=e.split(","),null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetCanvasID this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_FEC_SetCanvasID(e):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),t)}},{key:"JSPlayM4_FEC_ResetCorrectType",value:function(e,t,i){var r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_ResetCorrectType this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_FEC_ResetCorrectType(e,t,i):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),r)}},{key:"JSPlayM4_FEC_GetPort",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_GetPort this.oJSPlayerObj is null"),-1):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FEC_GetPort(e,t,i):-1}},{key:"JSPlayM4_FEC_Enable",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_Enable this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_FEC_Enable(e):console.log("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),t)}},{key:"JSPlayM4_FEC_SetParam",value:function(e,t){var i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetParam this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_FEC_SetParam(e,t):console.log("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),i)}},{key:"JSPlayM4_FEC_GetParam",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_GetParam this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FEC_GetParam(e,t):(console.log("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),1)}},{key:"JSPlayM4_FEC_SetViewParam",value:function(e,t,i){var r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetViewParam this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_FEC_SetViewParam(e,t,i):console.log("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),r)}},{key:"JSPlayM4_FEC_GetViewParam",value:function(e,t,i){var r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_GetViewParam this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_FEC_GetViewParam(e,t,i):console.log("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),r)}},{key:"JSPlayM4_FEC_SetWnd",value:function(e,t){var i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetWnd this.oJSPlayerObj is null"),0):(this.CanvasSubPortMap.set(e,t),this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_FEC_SetWnd(e,t):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),i)}},{key:"JSPlayM4_FEC_Disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_Disable this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_FEC_Disable(e,t,i):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),r)}},{key:"JSPlayM4_FEC_DelPort",value:function(e){var t=1;if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_FEC_DelPort this.oJSPlayerObj is null"),0;var i=this.CanvasSubPortMap.get(e);this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_FEC_DelPort(e):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red");var r=document.getElementById(i);if(r){var a=r.cloneNode(!0);r.parentNode.replaceChild(a,r)}return this.CanvasSubPortMap.delete(e),t}},{key:"JSPlayM4_FEC_SetDisplayRegion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,n=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,o=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetDisplayRegion this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?o=this.oJSPlayerObj.JSPlayM4_FEC_SetDisplayRegion(e,t,i,r,a,n,s):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),o)}},{key:"JSPlayM4_FEC_SetBackCilling",value:function(e,t){var i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetBackCilling this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_FEC_SetBackCilling(e,t):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),i)}},{key:"JSPlayM4_FEC_GetPTZPort",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=-1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_GetPTZPort this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?a=this.oJSPlayerObj.JSPlayM4_FEC_GetPTZPort(e,t,i,r):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),a)}},{key:"JSPlayM4_FEC_SetPTZDisplayMode",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetPTZDisplayMode this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_FEC_SetPTZDisplayMode(e):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),t)}},{key:"JSPlayM4_SetVideoCropInfo",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetVideoCropInfo this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support SetVideoCropInfo,","color: red"):t=this.oJSPlayerObj.PlayM4_SetVideoCropInfo(e),t)}},{key:"JSPlayM4_IsVisible",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_IsVisible this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support IsVisible,","color: red"):t=this.oJSPlayerObj.PlayM4_IsVisible(e),t)}},{key:"JSPlayM4_SetInputBufSize",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetInputBufSize this.oJSPlayerObj is null"),0):(this.inputBufSize=e,this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support SetInputBufSize,","color: red"):t=this.oJSPlayerObj.PlayM4_SetInputBufSize(e),t)}},{key:"JSPlayM4_GetYUVBufSize",value:function(){var e=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetYUVBufSize this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support GetYUVBufSize,","color: red"):e=this.oJSPlayerObj.PlayM4_GetYUVBufSize(),e)}},{key:"JSPlayM4_ClearCanvas",value:function(){var e=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_ClearCanvas this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support ClearCanvas,","color: red"):e=this.oJSPlayerObj.PlayM4_ClearCanvas(),e)}},{key:"JSPlayM4_ReleaseInputBuffer",value:function(){var e=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_ReleaseInputBuffer this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support ReleaseInputBuffer,","color: red"):e=this.oJSPlayerObj.PlayM4_ReleaseInputBuffer(),e)}},{key:"JSPlayM4_GetDecodeFrameType",value:function(){var e=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetDecodeFrameType this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support GetDecodeFrameType,","color: red"):e=this.oJSPlayerObj.PlayM4_GetDecodeFrameType(),e)}},{key:"JSPlayM4_SetWaterMarkFont",value:function(e){if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkFont this.oJSPlayerObj is null"),0;if(null!=e){if(void 0===e.pFontString||null==e.pstStartPos||null==e.pstFontColor||null==e.pstFontSize||null==e.pstFontRotate||null==e.pFontFamily||null==e.pstStartPos.fX||null==e.pstStartPos.fY||null==e.pstFontColor.fR||null==e.pstFontColor.fG||null==e.pstFontColor.fB||null==e.pstFontColor.fA||null==e.pstFontSize.nFontWidth||null==e.pstFontSize.nFontHeight||null==e.pstFontRotate.fRotateAngle||null==e.pstFontRotate.fFillFullScreen||null==e.pSpace)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkFont pFontParam undefined"),0;if(e.pstStartPos.fX>1||e.pstStartPos.fX<0||e.pstStartPos.fY>1||e.pstStartPos.fY<0||e.pstFontColor.fR>1||e.pstFontColor.fR<0||e.pstFontColor.fG>1||e.pstFontColor.fG<0||e.pstFontColor.fB>1||e.pstFontColor.fB<0||e.pstFontColor.fA>1||e.pstFontColor.fA<0)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkFont pFontParam f* is 0~1"),0;if(1!=e.pstFontRotate.fFillFullScreen&&0!=e.pstFontRotate.fFillFullScreen&&1!=e.pstFontRotate.fFillFullScreen&&0!=e.pstFontRotate.fFillFullScreen)return console.log(">>>>>yff>>> pFontParam.pstFontRotate.fFillFullScreen is true or false"),0;if(e.pstFontRotate.fFillFullScreen&&(e.pstFontNumber.nRowNumber<3||e.pstFontNumber.nColNumber<3||null==e.pstFontNumber.nRowNumber||null==e.pstFontNumber.nColNumber||e.pstFontNumber.nRowNumber>13||e.pstFontNumber.nColNumber>13))return console.log(">>>>>yff>>> pFontParam.pstFontNumber row/col num should be greater than 2 and les than 13"),0;if("string"!=typeof e.pFontFamily)return console.log(">>>>>yff>>> pFontParam.pFontFamily is not string"),0;if(!Array.isArray(e.pFontString))return console.log(">>>>>yff>>> pFontParam.pFontString is not array"),0;(e.pstFontSize.nFontHeight<=0||e.pstFontSize.nFontWidth<=0)&&(e=null),null!=e.nFontAlign&&null!=e.nFontAlign||(e.nFontAlign=0),null!=e.nColorAdapt&&null!=e.nColorAdapt||(e.nColorAdapt=0)}return this.waterFontParam=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetWaterMarkFont(e):this.oJSPlayerObj.PlayM4_SetWaterMarkFont(e)}},{key:"JSPlayM4_SetWaterMarkImage",value:function(e){if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkImage this.oJSPlayerObj is null"),0;if(!("ImageDecoder"in window))return console.log(">>>>>yff>>> window not support ImageDecoder"),16;if(null!=e){if(void 0===e.pImageData)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkImage pImageParam.pImageData undefined"),0;if(void 0===e.pImageType||"jpg"!=e.pImageType&&"jpeg"!=e.pImageType&&"png"!=e.pImageType&&"gif"!=e.pImageType&&"bmp"!=e.pImageType&&"webp"!=e.pImageType&&"avif"!=e.pImageType)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkImage pImageParam.pImageType:"+e.pImageType+" error"),0;(void 0===e.pstRectPos||e.fLeft<0||e.fLeft>1||e.fRight<0||e.fRight>1||e.fTop<0||e.fTop>1||e.fBottom<0||e.fBottom>1)&&(e.pstRectPos={fLeft:0,fRight:.1,fTop:0,fBottom:.1}),(void 0===e.fAlpha||e.fAlpha<0||e.fAlpha>1)&&(e.fAlpha=1)}return this.waterImageParam=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetWaterMarkImage(e):this.oJSPlayerObj.PlayM4_SetWaterMarkImage(e)}},{key:"_downloadFile",value:function(e,t){var i=e;n(e,Blob)||n(e,File)||(i=new Blob([e]));var r=window.URL.createObjectURL(i),a=window.document.createElement("a");a.href=r,a.download=t;var s=document.createEvent("MouseEvents");s.initEvent("click",!0,!0),a.dispatchEvent(s)}},{key:"downloadRTPData",value:function(e){if(this.bWriteData){var t=e,i=this.aTotalBuffer.length;console.log("totalLength:"+i);for(var r=0,a=t.length;r<a;r++)this.aTotalBuffer[i+r]=t[r];this.iFrameNum++,t=null,console.log("download200RTPdata iFrameNum:"+this.iFrameNum)}if(this.bWriteData&&this.iFrameNum>=100){console.log("download100RawData");var n=new Uint8Array(this.aTotalBuffer);this._downloadFile(n,"Raw100.data"),this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.bWriteData=!1,this.iFrameNum=0,n=null}}}]),t}();window._getFExplore=function(){var e,t={},i=navigator.userAgent.toLowerCase();if((e=i.match(/rv:([\d.]+)\) like gecko/))||(e=i.match(/msie ([\d\.]+)/))?t.ie=e[1]:(e=i.match(/edge\/([\d\.]+)/))?t.edge=e[1]:(e=i.match(/firefox\/([\d\.]+)/))?t.firefox=e[1]:(e=i.match(/(?:opera|opr).([\d\.]+)/))?t.opera=e[1]:(e=i.match(/chrome\/([\d\.]+)/))?t.chrome=e[1]:(e=i.match(/version\/([\d\.]+).*safari/))&&(t.safari=e[1]),t.chrome){var r=t.chrome,a=r.indexOf(".");return Number(r.substring(0,a))}return t.ie?console.info("%c1>your browser is IE ,it does not support play without plugin","color: red"):t.safari?console.info("%c1>your browser is safari","color: red"):t.firefox?console.info("%c1>your browser is Firefox","color: red"):console.info("%c1>your browser does not support play without plugin","color: red"),-1},window._getFSupportWebCodecs=function(){return"undefined"!=typeof MediaMetadata&&"undefined"!=typeof MediaRecorder&&"undefined"!=typeof VideoDecoder},window._getFSupportSIMD=function(){return new Promise((function(e,t){je().then((function(i){i?e():t()}))}))}}(),x}()}();var Ur=Xr.exports.JSPlayCtrl,Wr=function(){var e=new y;if(null==e?void 0:e.getResult){var t,i,r=(null==e?void 0:e.getResult())||{};if(r.browser&&"Chrome"===r.browser.name&&(!["120","118"].includes(null==(t=r.browser)?void 0:t.major)||"macOS"!==(null==(i=r.os)?void 0:i.name)))return!0}return!1};function Gr(e,t,i){return Gr=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,i){var r=[null];r.push.apply(r,t);var a=new(Function.bind.apply(e,r));return i&&Jr(a,i.prototype),a},Gr.apply(null,arguments)}function Jr(e,t){return Jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Jr(e,t)}var Zr="object"==("undefined"==typeof window?"undefined":o(window))&&window.window===window?window:"object"==("undefined"==typeof self?"undefined":o(self))&&self.self===self?self:"object"==("undefined"==typeof global?"undefined":o(global))&&global.global===global?global:void 0;function jr(e,t,i){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){$r(r.response,t,i)},r.onerror=function(){},r.send()}function zr(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function qr(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(i){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Kr=Zr.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),$r="object"!=("undefined"==typeof window?"undefined":o(window))||window!==Zr?function(){}:"download"in HTMLAnchorElement.prototype&&!Kr?function(e,t,i){var r=Zr.URL||Zr.webkitURL,a=document.createElementNS("http://www.w3.org/1999/xhtml","a");t=t||e.name||"download",a.download=t,a.rel="noopener","string"==typeof e?(a.href=e,a.origin!==location.origin?zr(a.href)?jr(e,t,i):qr(a,a.target="_blank"):qr(a)):(a.href=r.createObjectURL(e),setTimeout((function(){r.revokeObjectURL(a.href)}),4e4),setTimeout((function(){qr(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,i){if(t=t||e.name||"download","string"==typeof e)if(zr(e))jr(e,t,i);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){qr(r)}))}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=o(t)&&(t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,i),t)}:function(e,t,i,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof e)return jr(e,t,i);var a="application/octet-stream"===e.type,n=/constructor/i.test(Zr.HTMLElement)||Zr.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||a&&n||Kr)&&"undefined"!=typeof FileReader){var o=new FileReader;o.onloadend=function(){var e=o.result;e=s?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=e:location=e,r=null},o.readAsDataURL(e)}else{var x=Zr.URL||Zr.webkitURL,f=x.createObjectURL(e);r?r.location=f:location.href=f,r=null,setTimeout((function(){x.revokeObjectURL(f)}),4e4)}};function Qr(e,t){$r(function(e){void 0===e&&(e="");for(var t=e.split(","),i=atob(t[1]),r=t[0].replace("data:","").replace(";base64",""),a=i.length,n=new Uint8Array(a);a--;)n[a]=i.charCodeAt(a);return new File([n],"file",{type:r})}(e),t)}var ea={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,i="~";function r(){}function a(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function n(e,t,r,n,s){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new a(r,n||e,s),x=i?i+t:t;return e._events[x]?e._events[x].fn?e._events[x]=[e._events[x],o]:e._events[x].push(o):(e._events[x]=o,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),o.prototype.eventNames=function(){var e,r,a=[];if(0===this._eventsCount)return a;for(r in e=this._events)t.call(e,r)&&a.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var a=0,n=r.length,s=new Array(n);a<n;a++)s[a]=r[a].fn;return s},o.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,a,n,s){var o=i?i+e:e;if(!this._events[o])return!1;var x,f,l=this._events[o],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,r),!0;case 4:return l.fn.call(l.context,t,r,a),!0;case 5:return l.fn.call(l.context,t,r,a,n),!0;case 6:return l.fn.call(l.context,t,r,a,n,s),!0}for(f=1,x=new Array(h-1);f<h;f++)x[f-1]=arguments[f];l.fn.apply(l.context,x)}else{var c,_=l.length;for(f=0;f<_;f++)switch(l[f].once&&this.removeListener(e,l[f].fn,void 0,!0),h){case 1:l[f].fn.call(l[f].context);break;case 2:l[f].fn.call(l[f].context,t);break;case 3:l[f].fn.call(l[f].context,t,r);break;case 4:l[f].fn.call(l[f].context,t,r,a);break;default:if(!x)for(c=1,x=new Array(h-1);c<h;c++)x[c-1]=arguments[c];l[f].fn.apply(l[f].context,x)}}return!0},o.prototype.on=function(e,t,i){return n(this,e,t,i,!1)},o.prototype.once=function(e,t,i){return n(this,e,t,i,!0)},o.prototype.removeListener=function(e,t,r,a){var n=i?i+e:e;if(!this._events[n])return this;if(!t)return s(this,n),this;var o=this._events[n];if(o.fn)o.fn!==t||a&&!o.once||r&&o.context!==r||s(this,n);else{for(var x=0,f=[],l=o.length;x<l;x++)(o[x].fn!==t||a&&!o[x].once||r&&o[x].context!==r)&&f.push(o[x]);f.length?this._events[n]=1===f.length?f[0]:f:s(this,n)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&s(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=i,o.EventEmitter=o,e.exports=o}(ea);var ta=R(ea.exports);Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var i in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return e};var ia=function(e,t){var i=new RegExp("(\\?|#|&)"+e+"=(.*?)(#|&|$)"),r=(t||window.location.href).match(i);return decodeURIComponent(r?r[2]:"")},ra=function(e,t){var i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),r=t.match(i);return null!=r?unescape(r[2]):null};function aa(){return aa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},aa.apply(this,arguments)}function na(e,t,i){var r=e.reduce((function(e,t,i){return 0===i?(delete t.coverPic,e.push(aa({},t)),e):(e[e.length-1].downloadPath===t.downloadPath?e[e.length-1].endTime=t.endTime:(delete t.coverPic,e.push(aa({},t))),e)}),[]);return r.length>0&&(r[0].startTime=t.valueOf(),r[r.length-1].endTime=i.valueOf()),r}function sa(e){var t=e.wasmplayer;t&&t.JSPlayM4_CloseStream(),e.playing=!1}function oa(e,t,i,r){var a,n,s,o,x,f=(o=(s=t).split("?")[0].replace("/live","").replace("/playback",""),(x=(s.includes("/live")?"/live?":s.includes("cloudplayback")?"/cloudplayback?":"/playback?")+s.split("?")[1]).includes("/playback")&&(x=x.replace("stream=2","stream=1")),{websocketConnectUrl:o,websocketStreamingParam:x});if(f.websocketConnectUrl){var l,h=null!=(l=null==(n=e._options)||null==(a=n.env)?void 0:a.wsUrl)?l:f.websocketConnectUrl;la(e,h,{playURL:f.websocketStreamingParam}).then((function(){return i(0)}),(function(t){e.logger.error("play error: ",t),e.event.emit(xi,oi(t)),r(1)}))}}function xa(e){var t=e._options.url;return e.service.getRealPlayUrl({ezopen:e._options.url}).then((function(i){var a=i.realUrl,n=ra("checkCode",a);return n&&(e._validateCode=n),a.includes("playback")?function(e,t,i){var a,n=r(ra("begin",t)||ra("begin",i)||r().format("YYYY-MM-DD 00:00:00")),s=r(ra("end",t)||ra("end",i)||r().format("YYYY-MM-DD 23:59:59")),o=ra("end",t)||ra("end",i),x=+ia("timeZone",i);x<24&&x>-24?x=Math.round(x):(x=0,e.logger.warn("timeZone时区参数错误，取值范围为-23~23"));var f=r(n).add(x,"hour"),l=o?r(s).add(x,"hour"):r(r(f).format("YYYYMMDD 23:59:59"));f>=l&&(l=r(r(f).format("YYYYMMDD 23:59:59")),e.logger.warn("End time greater than or equal to start time"));var h,c="YYYYMMDDTHHmmss";return t=(t=t.replace("&begin="+ia("begin",t),""))+"&begin="+f.format(c)+"Z",function(e,t){var i=r(e).startOf("day"),a=r(t).startOf("day");return!i.isSame(a)}(f,l)&&"cloud"===e.urlInfo.recType&&(l=r(r(f).format("YYYYMMDD 23:59:59")),e.logger.warn("The start and end times have crossed days")),t=(t=t.replace("&end="+ia("end",t),""))+"&end="+l.format(c)+"Z",ia("stream",t)||(t=t.replace("stream","&stream")),"cloud"===e.urlInfo.recType&&"7"===(null==(a=e.urlInfo.searchParams)?void 0:a.busType)?function(e,t){return new Promise((function(i,r){e.service.getRecordCloudVideoByTime(t).then((function(t){e.event.emit(hi.NETWORK.videoFragmentFiles,oi(t.data||[],"云录制录像信息查询","RecordCloud")),i(t)})).catch((function(t){e.event.emit(hi.NETWORK.error.error,oi(t)),e.event.emit(hi.NETWORK.error.videoFragmentFiles,oi(t)),r(t)}))}))}(e,{channelNo:e.urlInfo.channelNo,startTime:r(r(f).format("YYYY-MM-DD 00:00:00")).valueOf(),endTime:r(r(l).format("YYYY-MM-DD 23:59:59")).valueOf(),spaceId:null==(h=e.urlInfo.searchParams)?void 0:h.spaceId}).then((function(e){var i=l;e.data.length>0&&r(e.data[e.data.length-1].endTime)<r(l)&&(i=r(e.data[e.data.length-1].endTime));var a=JSON.stringify(na(e.data,f,i)).replace("\\","");return t+="&recSlice="+a.replace("\\","")+"&r="+Math.random()})):"cloud"===e.urlInfo.recType?Tr(e,{recType:1,channelNo:e.urlInfo.channelNo,startTime:r(r(f).format("YYYY-MM-DD 00:00:00")).valueOf(),endTime:r(r(l).format("YYYY-MM-DD 23:59:59")).valueOf()}).then((function(e){var i=l;e.data.length>0&&r(e.data[e.data.length-1].endTime)<r(l)&&(i=r(e.data[e.data.length-1].endTime));var a=JSON.stringify(na(e.data,f,i)).replace("\\","");return t+="&recSlice="+a.replace("\\","")+"&r="+Math.random()})):(Tr(e,{recType:2,channelNo:e.urlInfo.channelNo,startTime:r(r(f).format("YYYY-MM-DD 00:00:00")).valueOf(),endTime:r(r(l).format("YYYY-MM-DD 23:59:59")).valueOf()}),Promise.resolve(t))}(e,a,t):Promise.resolve(a)}))}var fa="";function la(e,t,i,r){return e._playerWindow.reRenderCanvas(!0),e.playing=!1,e._wss_info={wssUrl:t,oParams:i},new Promise((function(t,i){fa="",e._oStreamClient.stopAll(),null===e._g_port&&(e._g_port=e.wasmplayer.JSPlayM4_GetPort(),e.logger.log("1.获取播放库端口号 g_port:"+e._g_port)),e.event.emit(fi,oi({type:li.openStreamCallback,data:null})),ha(e).then(t,i)}))}function ha(e,t){var i=!0,a=!0;return new Promise((function(n,s){e._oStreamClient.openStream(e._wss_info.wssUrl,e._wss_info.oParams,(function(s){if(s.errorCode&&"1"!=s.errorCode&&(e.event.emit(fi,oi({type:li.pluginErrorHandler,iWndIndex:0,code:s.errorCode,data:s})),e.event.emit(hi.SOCKET.autoClose)),null==s?void 0:s.bHead){var o;if(e.event.emit(fi,oi({type:li.getStreamHeaderCallback})),"resume"!==t&&function(e,t){var i=e.wasmplayer,a=i.JSPlayM4_OpenStream(t,40,4194304);e.event.emit("PlayM4_openStream",oi(t)),i.JSPlayM4_SetFirstFrameCallBack(1,(function(){e.event.emit("firstFrameCallBack",oi(null))}));var n=0;e.event&&e.event.on("seek",(function(e){n=e.data.startTime.replace(/[TZ]/gi,"")})),i.JSPlayM4_SetRunTimeInfoCallBackEx(1,(function(t,i,a,s,o){if(e.event){var x,f=e.getOSDTime();n=n||(Number.isNaN(f)?0:1e3*f),e.event.emit(fi,oi({type:li.setRunTimeInfoCallBack,data:{nRunTimeModule:t,nStrVersion:i,nFrameTimeStamp:a,nFrameNum:s,nErrorCode:o,errorTime:r(n||(null==(x=e.urlInfo.searchParams)?void 0:x.begin)||r().format("YYYYMMDD000000"))}})),n=0}})),e.logger.log("3.打开流 resO:"+a)}(e,null==s?void 0:s.buf),e._aHead=new Uint8Array(s.buf),"resume"===t&&((null==e||null==(o=e.urlInfo)?void 0:o.validateCode)?e.setSecretKey(e.urlInfo.validateCode):e._secretKey&&e.setSecretKey(e._secretKey)),"resume"!==t){var x;try{var f,l=function(e){return{year:parseInt(e.slice(0,4)),month:parseInt(e.slice(4,6)),day:parseInt(e.slice(6,8)),hour:parseInt(e.slice(9,11)),min:parseInt(e.slice(11,13)),second:parseInt(e.slice(13,15))+3}}(ia("begin",null==(f=e._wss_info.oParams)?void 0:f.playURL));if(!isNaN(l.year)){var h=e.wasmplayer.JSPlayM4_SetGlobalBaseTime(l.year,l.month,l.day,l.hour,l.min,l.second,0);e.logger.log("设置OSD时间res:",h)}}catch(t){e.logger.error("JSPlayM4_SetGlobalBaseTime:",t)}if(e.playing=!0,1!=+e.wasmplayer.JSPlayM4_SetFrameInfoCallBack(1)){var c=e.wasmplayer.JSPlayM4_GetLastError();e.logger.error("resFrameInfoError:",c)}e.wasmplayer.JSPlayM4_RenderPrivateData(4,1),i=!0,a=!0,e.event.emit("JSPlayM4_Play_Before",oi(void 0)),(null==e||null==(x=e.urlInfo)?void 0:x.validateCode)?e.setSecretKey(e.urlInfo.validateCode):e._secretKey&&e.setSecretKey(e._secretKey);var _=e.wasmplayer.JSPlayM4_Play(e._playerWindow.canvasId);e.event.emit("JSPlayM4_Play_After",oi(void 0)),e.logger.log("4.开始播放 resP:"+_,e._playerWindow.canvasId),n(_)}}else{if(a&&s.buf&&(a=!1,e.event.emit(fi,oi({type:li.getVideoStreamCallback}))),i&&s.buf){var u=e.getFrameInfo();(null==u?void 0:u.width)&&(e.event.emit(fi,oi({type:li.appearFirstFrameCallback})),e.event.emit(fi,oi({type:li.averageStreamSuccessCallback})),i=!1)}var d=new Uint8Array(s.buf);s.statusString?e.event.emit(fi,oi({type:li.pluginErrorHandler,iWndIndex:0,code:1001,data:s})):s.type&&"exception"===s.type&&e.event.emit(fi,oi({type:li.pluginErrorHandler,iWndIndex:0,code:1002,data:s})),e.wasmplayer.JSPlayM4_InputData(d,d.length),d=null}"resume"!==t&&(e.playing=!0),e.event.emit("recordInputData",oi(s.buf))}),(function(t){fa===t&&e.event&&(e.event.emit(fi,oi({type:li.pluginErrorHandler,iWndIndex:0,code:1003})),e.event.emit(hi.SOCKET.close)),e.playing=!1,s()})).then((function(i){fa=i,e._oStreamClient.startPlay().then((function(){if("resume"===t){var i=e.wasmplayer.JSPlayM4_Pause(0);i?(e.playing=!0,e._tempPauseDate=null,n(i)):(e.logger.error("startPlay pause error"),s())}else{var r=e.wasmplayer.JSPlayM4_SetStreamOpenMode(1);e.logger.log("2.设置流模式 resSSOM:"+r)}e.event.emit(hi.API.play)})).catch((function(t){e.playing=!1,e.logger.error("startPlay error:",t),s(t.oError)}))}),(function(t){e.playing=!1,e.logger.error("openStream error:",t),sa(e),s(t)}))}))}function ca(e){return(e=+e)<10&&(e="0"+e),e+""}var _a={startPos:{fX:.1,fY:.1},fontColor:{fR:0,fG:0,fB:0,fA:1},fontSize:{nFontWidth:20,nFontHeight:20},fontRotate:{fRotateAngle:0,fFillFullScreen:!1},fontFamily:"Arial",fontNumber:{nRowNumber:5,nColNumber:5},space:1};function ua(){return ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},ua.apply(this,arguments)}var da=function(){function e(e){var t,i;this.event=new ta,this.initializing=!0,this.loading=!1,this.playbackRate=1,this.playing=!1,this.volume=0,this.destroyed=!1,this.deviceCapacity={},this.deviceInfo={},this.error=null,this._aHead=null,this._g_port=null,this._secretKey="",this._tempPauseDate=null,this._tempPauseTime="",this.__videoInfo={},this._waterMarkParams=null,this._decoderStatus={},this._wss_info={wssUrl:"",oParams:{playURL:""}},this.version="0.1.0-beta.1",this._setOptions(e),this._playerWindow=new Yr(this._options.id,this._options.width,this._options.height),this._playerWindow.render(),this.esCanvas=new K(this._options.id+"canvas_draw0"),i=(t=this).$container,E(i).find("."+Hr+"-container").children().each((function(){E(this).bind("mouseenter",(function(){E(i).find("."+Hr+"-canvas-draw").css("pointer-events","all"),t.__b3DZoom?(t.esCanvas=null,E(i).find("."+Hr+"-canvas-draw").unbind(),t.esCanvas=new K(t._options.id+"canvas_draw0"),t.esCanvas.setShapeType("Rect"),t.esCanvas.setDrawStyle("#ff0000","",0),t.esCanvas.setDrawStatus(!0,(function(e){"function"==typeof t.__fCallback&&t.__fCallback(e)}))):E(i).find("."+Hr+"-canvas-draw").css("pointer-events","none")})),E(this).bind("mouseleave",(function(){E(i).find("."+Hr+"-canvas-draw").css("pointer-events","none")}))})),this._playerInit(),this._playerFullScreen=new kr(this,this._options.fullScreenEle)}var t=e.prototype;return t._playerInit=function(){var e=this;return function(e){return e.logger.log("player engine start init"),function(e){var t,i,r;e.initializing=!0,e.event.emit(hi.initializing);var a=(null!=(r=null==(t=e._options.staticPath)?void 0:t.replace(/\/$/,""))?r:"")+"/PlayCtrlWasm",n=a+"/playCtrl3/hasWorker/HasSIMD/Decoder.js",s=a+"/playCtrl1/HasSIMD/Decoder.js";window.SharedArrayBuffer||(n=a+"/playCtrl3/noWorker/Decoder.js");var o=Wr(),x=function(t,i,r,a){return void 0===t&&(t=0),void 0===i&&(i="webgl"),void 0===r&&(r=0),void 0===a&&(a=0),new Promise((function(x){var f=e._options.decoderType,l=[!u()&&o&&["auto","v3"].includes(f)?n:null,s];e.wasmplayer=Gr(Ur,[].concat(l,[function(t){"loaded"===t.cmd&&(e.logger.log("init wasm cmd:",t.cmd),window.JSPlayerModuleLoaded=!0,e.initializing=!1,e.event.emit(hi.initializing,oi(t))),e._decoderStatus=t,x(t)},t,i,r,a])),window["wasmplayer-"+e._options.id]=e.wasmplayer}))};return null==(i=window)?void 0:i._getFSupportSIMD().then((function(){return x()}),(function(){return n=a+"/playCtrl3/hasWorker/NoSIMD/Decoder.js",s=a+"/playCtrl1/NoSIMD/Decoder.js",x()}))}(e).then((function(t){return e.logger.log("player engine init success"),t}))}(this).then((function(t){return e._wasmDecoderInfo=t,"loaded"===t.cmd&&e._options.autoPlay&&e.play(),t}))},t.play=function(e){var t=this;return this.loading=!0,this._destroyed(),e&&this._setOptions(null!=e?e:{}),new Promise((function(e,i){var r;(r=t,r._playerWindow.hide(),r.__videoInfo={},new Promise((function(e,t){r._options.accessToken&&Qt(r._options.url)?r._oStreamClient._streamUUID?r.stop().then((function(){xa(r).then((function(i){oa(r,i,e,t)})).catch((function(e){r.logger.error("play error: ",e),r.event.emit(xi,oi(e)),t(e)}))})).catch((function(e){t(e)})):xa(r).then((function(i){oa(r,i,e,t)})).catch((function(e){r.logger.error("play error: ",e),r.event.emit(xi,oi(e)),t(e)})):t(1)}))).then((function(){t._options.audio&&setTimeout((function(){t.setVolume(.8)}),100),t.loading=!1,e(0)})).catch((function(){t.loading=!1,i(1)}))}))},t._wss_play=function(e,t,i){var r=this;return void 0===t&&(t={playURL:""}),this._destroyed(),new Promise((function(i,a){var n=setInterval((function(){window.JSPlayerModuleLoaded&&(clearInterval(n),la(r,e,t).then((function(e){i(e)})).catch((function(e){a(e)})))}),50)}))},t.pause=function(e){return function(e,t,i){if(!e.playing)return e._tempPauseDate?Promise.resolve(si(new Date(e._tempPauseDate),0)):Promise.reject(si(void 0,-1,"当前不是播放状态，不需要暂停"));var r=e.getFrameInfo(),a=new Date(r.year+"/"+r.month+"/"+r.day+" "+r.hour+":"+r.minute+":"+r.second).getTime()/1e3,n=new Date(1e3*a);return e._tempPauseDate=n.valueOf(),e._tempPauseTime=""+r.year+ca(r.month)+ca(r.day)+ca(r.hour)+ca(r.minute)+ca(r.second),new Promise((function(i,r){t?e.stop().then((function(){i(si(n,0,"暂停成功"))})).catch((function(e){r(si(n,-1,"暂停失败"))})):(e._oStreamClient.stopAll(),1==+e.wasmplayer.JSPlayM4_Pause(1)?(e.playing=!1,i(si(n))):r(si(n,-1,"暂停失败"))),e.event.emit("pause",oi(void 0))}))}(this,e)},t.resume=function(e){return this._destroyed(),function(e,t){var i=e._tempPauseTime,r=e._tempPauseDate,a=e._wss_info;if(e.playing)return Promise.resolve();var n=!1;return new Promise((function(s,o){var x,f,l;t&&(i?i=i.slice(0,14-t.length)+t:(n=!0,i=t)),(null==(x=a.oParams)?void 0:x.playURL.includes("playback"))&&(a.oParams.playURL=null==a||null==(f=a.oParams)?void 0:f.playURL.replace(/begin=[0-9]{8}T[0-9]{6}Z/gi,"begin="+i.slice(0,8)+"T"+i.slice(8,14)+"Z")),a.oParams.playURL.includes("cloudplayback")&&(a.oParams.playURL=null==a||null==(l=a.oParams)?void 0:l.playURL.replace(/"startTime":[0-9]{13}/gi,'"startTime":'+r)),e.event.emit(hi.API.resume,oi(t)),t&&!n?e._wss_play(null==a?void 0:a.wssUrl,null==a?void 0:a.oParams).then((function(t){e._waterMarkParams&&e.setWaterMark(e._waterMarkParams),s(t)})).catch((function(e){o(e)})):ha(e,"resume").then((function(t){e._waterMarkParams&&e.setWaterMark(e._waterMarkParams),s(t)})).catch((function(e){o(e)}))}))}(this,e)},t.destroy=function(){return(e=this)._oStreamClient&&(null==(t=e._oStreamClient)||t.destroy(),e._oStreamClient=null),sa(e),e.wasmplayer&&(e.wasmplayer.JSPlayM4_Stop(),e.wasmplayer.JSPlayM4_FreePort(),e.wasmplayer=null),e._g_port=null,e.pluginManager&&(e.pluginManager.destroy(),e.pluginManager=null),e._playerWindow&&(e._playerWindow.destroy(),e._playerWindow=null),setTimeout((function(){e.event&&(e.event.emit(hi.API.destroy),e.event=null)}),0),e.destroyed=!0,Promise.resolve();var e,t},t._destroyed=function(){return function(e){if(e.destroyed)throw new Error("player is destroyed!")}(this)},t.stop=function(){return t=(e=this).wasmplayer,e._playerWindow.hide(),new Promise((function(i,r){setTimeout((function(){e._oStreamClient&&e._oStreamClient.stopAll().then((function(){e.event.emit("stop",oi(void 0)),e.event.emit("JSPlayM4_Stop",oi(void 0));var r=t.JSPlayM4_Stop(!1);if(1===r)sa(e),i({resS:r});else{var a=t.JSPlayM4_GetLastError();if(35==+a)var n=setInterval((function(){r?clearInterval(n):1==+(r=t.JSPlayM4_Stop(!1))?(sa(e),i({resS:r})):(a=t.JSPlayM4_GetLastError(),e.logger.error("JSPlayM4_Stop error: ",a))}),50);else e.logger.error("stop - other error, still resolve: ",a),sa(e),i({resS:r,jsPluginErrorCode:a})}})).catch((function(i){sa(e);var a=t.JSPlayM4_GetLastError();e.logger.error("JSPlayM4_Stop error: ",a),r({jsPluginErrorCode:a})}))}),100)}));var e,t},t.snapshot=function(e,t,i,r){return void 0===t&&(t="jpeg"),function(e,t,i,r,a,n){var s;return void 0===i&&(i="jpeg"),void 0===n&&(n=!0),i="jpeg",t=(null!=(s=t)&&""!==s?t:(new Date).getTime())+"."+i,new Promise((function(r,s){var o=function(i){if(i){var s=function(e){for(var t=new Uint8Array(e),i="",r=0;r<t.length;r++)i+=String.fromCharCode(t[r]);return"data:image/jpeg;base64,"+window.btoa(i)}(i);a&&Qr(s,t),n&&e.event.emit(hi.API.snapshot,oi({fileName:t,base64:s})),r(si({fileName:t,base64:s}))}};1!=+e.wasmplayer.JSPlayM4_GetJPEG((function(e){o(e)}),!1)&&function(e,t,i,r,a){void 0===a&&(a=!0);var n=e.wasmplayer;return new Promise((function(s,o){1!==n.JSPlayM4_GetCanvasCapture((function(n,o,x){if(n&&o&&x){var f=new ImageData(o,x);f.data.set(n);var l="image/"+i,h=document.createElement("canvas"),c=h.getContext("2d");h.width=o,h.height=x,null==c||c.putImageData(f,0,0);var _=h.toDataURL(l,.7);r&&Qr(_,t),a&&e.event.emit(hi.API.snapshot,oi({fileName:t,base64:_})),s(si({fileName:t,base64:_}))}}))&&s(si(null,-1,"截图失败"))}))}(e,t,i,!!a,n).then((function(e){0===(null==e?void 0:e.code)?r(e):s(e)}))}))}(this,e,t,0,r)},t.fullScreen=function(e,t){return this._playerFullScreen.fullScreen(e,t)},t.exitScreen=function(){return this._playerFullScreen.exitScreen()},t.resize=function(e,t){return function(e,t,i){t=+t,i=+i;var r=Lr();if(isNaN(t)||isNaN(i)?(t=e._options.width,i=e._options.height):r||(e._options.width=t,e._options.height=i),t<16||i<16)return Promise.reject();if(e.$container.style.width=t+"px",e.$container.style.height=i+"px",e._playerWindow&&(e._playerWindow.resize(t,i),e.wasmplayer))try{0==+e.wasmplayer.JSPlayM4_SetCanvasSize(t,i)&&e.logger.error("canvas resize fail")}catch(t){e.logger.error("canvas resize fail: ",t)}return e.event&&e.event.emit("resize",oi({width:t,height:i})),e.logger&&e.logger.log("resize: width: "+t+"  height: "+i),Promise.resolve({width:t,height:i})}(this,e,t)},t.setVolume=function(e){return function(e,t){var i=0;return t<0||t>1?(e.logger.warn("audio volume ("+t+") is invalid!"),0):(0===t?1===(i=e.wasmplayer.JSPlayM4_StopSound())&&(e.volume=0):1===(i=e.wasmplayer.JSPlayM4_PlaySound())&&(e.volume=t),e.event.emit(hi.volumeChange,oi(t)),i)}(this,e)},t.use=function(e){this.pluginManager.use(e)},t.setFECCorrectType=function(e,t){return this.fECCorrect.setFECCorrectType(e,t)},t.setFEC2DParam=function(e,t){return this.fECCorrect.setFEC2DParam(e,t)},t.setFEC3DViewParam=function(e){return this.fECCorrect.setFEC3DViewParam(e)},t.get3DViewParam=function(e){return this.fECCorrect.get3DViewParam(e)},t.setPoster=function(e){},t.setPlaybackRate=function(e){!function(e,t){if(t=+t,Number.isNaN(t))throw new Error("rate is error, only support 0.5 | 1 | 2 | 4");if(![.5,1,2,4].includes(t))throw new Error("rate is error, only support  0.5 | 1 | 2 | 4");e._oStreamClient.setPlayRate(t);var i=e.playbackRate;if(i>t)for(var r=t;r<i;)r*=2,e.wasmplayer.JSPlayM4_Slow();else if(i<t)for(var a=i;a<t;)a*=2,e.wasmplayer.JSPlayM4_Fast();4==+t&&e.wasmplayer.JSPlayM4_SetDecodeThreadNum(4),e.event.emit(hi.API.rateChange,oi(t)),e.playbackRate=t}(this,e)},t.seek=function(e,t){return function(e,t,i){return e.wasmplayer.JSPlayM4_ResetBuffer(1),e.event.emit(hi.API.seek,oi({startTime:t,endTime:i})),e._oStreamClient.seek(t,i).then((function(t){e._waterMarkParams&&e.setWaterMark(e._waterMarkParams)})),Promise.resolve()}(this,e,t)},t._setOptions=function(e){Or(this,e)},t.enable3DZoom=function(e){return function(e,t){if(!e.playing)return-1;var i=e.wasmplayer,r=i.JSPlayM4_GetFrameInfo();return new Promise((function(t,a){t({code:0,data:i.JSPlayM4_SetDisplayRegion(e._playerWindow.canvasId,0,r.width,0,r.height,!1,!0)})})),E("."+e._options.id+"draw-window").unbind(),e.__fCallback=t,e.esCanvas=new K(e._options.id+"canvas_draw0"),e.esCanvas.setShapeType("Rect"),e.esCanvas.setDrawStyle("#ff0000","",0),e.esCanvas.setDrawStatus(!0,(function(e){"function"==typeof t&&t(e)})),e.__b3DZoom=!0,0}(this,e)},t.disable3DZoom=function(){return(e=this).playing?(e.esCanvas.setDrawStatus(!1),e.__fCallback=null,e.__b3DZoom=!1,0):-1;var e},t.getOSDTime=function(){var e=this.getFrameInfo();return new Date(e.year+"/"+e.month+"/"+e.day+" "+e.hour+":"+e.minute+":"+e.second).getTime()/1e3},t.getFrameInfo=function(){var e,t,i,r=this.wasmplayer.JSPlayM4_GetFrameInfo(),a=5===(null==r?void 0:r.codecType)?"H265":1===(null==r?void 0:r.codecType)||256===(null==r?void 0:r.codecType)?"H264":null==r?void 0:r.codecType;return r.codecType=a,r.codecType&&((null==(e=this.__videoInfo)?void 0:e.width)===(null==r?void 0:r.width)&&(null==(t=this.__videoInfo)?void 0:t.height)===(null==r?void 0:r.height)&&(null==(i=this.__videoInfo)?void 0:i.codecType)===(null==r?void 0:r.codecType)||(this.event.emit("videoInfo",oi(r)),this.__videoInfo=ua({},r),this.logger.log("[videoInfo] ",r))),r},t.setDisplayRegion=function(e,t,i,r,a,n){void 0===a&&(a=!0),void 0===n&&(n=!1);var s=function(e,t,i,r,a,n,s){void 0===n&&(n=!0),void 0===s&&(s=!1);var o=e.wasmplayer,x=e.getFrameInfo(),f=e._playerWindow.canvasId,l=document.getElementById(f);if(l){var h=function(e){return{width:(null==e?void 0:e.style.width)?+(null==e?void 0:e.style.width.replace("px","")):e.width||e.offsetWidth,height:(null==e?void 0:e.style.height)?+(null==e?void 0:e.style.height.replace("px","")):e.height||e.offsetHeight}}(l),c=h.width,_=h.height;return s&&(_=h.width,c=h.height),e.event.emit("setDisplayRegion",oi({left:t,right:i,top:r,bottom:a,flag:n,isFullscreen:s})),o.JSPlayM4_SetDisplayRegion(f,c*t/x.width,c*i/x.width,_*r/x.height,_*a/x.height,!n,!1)}}(this,e,t,i,r,a,n);return 1===s},t.setSecretKey=function(e){if(null!=e&&""!==e){this._secretKey=e;var t=this.wasmplayer.JSPlayM4_SetSecretKey(e);return 1==+t?this.logger.log("set secretKey success, ",e):this.logger.error("set secretKey fail, ",e),t}},t.getOptions=function(){return this._options},t.setLogger=function(e){this._setOptions(ua({},this._options,{logger:Object.assign({},this._options.logger,e)}))},t.getVersion=function(){var e=this.wasmplayer.JSPlayM4_GetSDKVersion();return{version:"0.1.0-beta.1",decoder:this._wasmDecoderInfo.bSupHardOrSoft?"V3":"V1",decoderVersion:e.toString(16)}},t.setWaterMark=function(e){return this._waterMarkParams=e,function(e,t){var i=e.wasmplayer;return t=Object.assign({},_a,t),new Promise((function(e,r){var a;1===(a=t&&t.fontString?i.JSPlayM4_SetWaterMarkFont({pFontString:t.fontString,pstStartPos:t.startPos,pstFontColor:t.fontColor,pstFontSize:t.fontSize,pstFontRotate:t.fontRotate,pstFontNumber:t.fontNumber,pFontFamily:t.fontFamily,pSpace:t.space}):i.JSPlayM4_SetWaterMarkFont(null))?e({code:0,msg:"水印设置成功"}):r({code:-1,msg:a})}))}(this,e)},t.setMirrorFlip=function(e){return function(e,t){var i;return e.service.setMirrorFlip({command:t,channelNo:null==(i=e.urlInfo)?void 0:i.channelNo})}(this,e)},e}();function pa(e,t){void 0===t&&(t={});var i=t.insertAt;if(e&&"undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===i&&r.firstChild?r.insertBefore(a,r.firstChild):r.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}da.EVENT_TYPE=hi;pa(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-message{align-items:center;bottom:0;display:none;flex-direction:column;font-size:14px;justify-content:center;left:0;position:absolute;right:0;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:20}.ezui-message-show{display:flex}.ezui-message-hide{display:none}");var ma={errorWrapClassName:n.PREFIX_CLASS_NAME+"-message-container"},Pa=function(){function e(e,t){var i;this._prefixCls=n.PREFIX_CLASS_NAME+"-message";var r,a=document.getElementById(e);this._options=Object.assign(ma,null!=t?t:{}),this.$messageContainer=document.createElement("div"),n.addClass(this.$messageContainer,this._prefixCls,null!=(r=null==(i=this._options)?void 0:i.errorWrapClassName)?r:ma.errorWrapClassName),a&&a.appendChild(this.$messageContainer)}var t=e.prototype;return t.show=function(e,t){var i=this;void 0===t&&(t=0),this.$messageContainer.innerHTML=e,this._show(),0!==t&&"number"==typeof t&&(this._timer=window.setTimeout((function(){i.hide(),i._timer=null}),t))},t.showError=function(e,t){void 0===t&&(t=0),e='<div style="color: red">'+e+"</div>",this.show(e,t)},t.hide=function(e){void 0===e&&(e=!1),e&&this.$messageContainer&&(this.$messageContainer.innerHTML=""),this._hide()},t.clear=function(){this.hide(!0)},t._show=function(){n.removeClass(this.$messageContainer,this._prefixCls+"-hide"),n.addClass(this.$messageContainer,this._prefixCls+"-show"),this._timer&&(window.clearTimeout(this._timer),this._timer=null)},t._hide=function(){n.removeClass(this.$messageContainer,this._prefixCls+"-show"),n.addClass(this.$messageContainer,this._prefixCls+"-hide"),this._timer&&(window.clearTimeout(this._timer),this._timer=null)},t.destroy=function(){var e;this._timer&&clearTimeout(this._timer),this.clear(),(null==(e=this.$messageContainer)?void 0:e.parentElement)&&this.$messageContainer.parentElement.removeChild(this.$messageContainer),this.$messageContainer=null},e}(),ya={stream:{1001:"vtm地址或端口非法",1002:"vtm生成文件描述符失败",1003:"vtm设置文件描述符非阻塞失败",1004:"vtm设置文件描述符阻塞失败",1005:"vtm解析服务器ip失败",1006:"vtm描述符select失败",1007:"vtm文件描述符不在可读中",1008:"vtm网络发生错误getsockopt",1009:"vtm描述符select超时",1101:"proxy地址或端口非法",1102:"proxy生成文件描述符失败",1103:"proxy设置文件描述符非阻塞失败",1104:"proxy设置文件描述符阻塞失败",1105:"proxy解析服务器ip失败",1106:"proxy描述符select失败",1107:"proxy文件描述符不在可读中",1108:"proxy网络发生错误getsockopt",1109:"proxy描述符select超时",1201:"vtdu地址或端口非法",1202:"vtdu生成文件描述符失败",1203:"vtdu设置文件描述符非阻塞失败",1204:"vtdu设置文件描述符阻塞失败",1205:"vtdu解析服务器ip失败",1206:"vtdu描述符select失败",1207:"vtdu文件描述符不在可读中",1208:"vtdu网络发生错误getsockopt",1209:"vtdu描述符select超时",5e3:"cas回复信令，发现内存已经释放（和设备之间异常断开）",5400:"私有化协议vtm检测私有化协议中码流类型小于0或者设备序列号为空等非法参数场景返回(app不重试取流)",5402:"回放找不到录像文件",5403:"操作码或信令密钥与设备不匹配",5404:"设备不在线",5405:"流媒体向设备发送或接受信令超时/cas响应超时",5406:"token失效",5407:"客户端的URL格式错误",5409:"预览开启隐私保护",5410:"设备达到最大连接数",5411:"token无权限",5412:"session不存在",5413:"验证token异常",5415:"设备通道错",5416:"设备资源受限",5451:"设备不支持的码流类型",5452:"设备链接流媒体服务器失败",5454:"流媒体中关于设备取流会话不存在",5455:"设备通道未关联",5456:"设备通道关联设备不在线",5457:"客户端不支持端到端加密",5458:"设备不支持当前并发ECDH密",5459:"VTDU 处理ECDH 加密失败",5460:"流媒体中关于设备取流会话不存在",5492:"设备不支持的命令",5500:"服务器处理失败",5501:"流媒体vtdu达到最大负载，请扩容",5503:"vtm返回分配vtdu失败",5504:"流媒体vtdu达到最大负载",5505:"vtm ecdh解密失败",5506:"vtm 返回IPC不支持取流",5530:"机房故障不可用",5544:"设备返回无视频源",5545:"视频分享时间已经结束",5546:"vtdu返回达到取流并发路数限制",5547:"vtdu返回开放平台用户并发限制",5556:"ticket校验失败",5557:"回放服务器等待流头超时",5558:"查找录像开始时间错误",5560:"群组分享取流二次验证失败",5561:"分享群组用户被锁住",5562:"群组分享用户权限变更",5563:"认证服务连接失败",5564:"认证超时",5566:"不在分享时间内预览",5567:"分享通道被锁定",5568:"未找到认证类型",5569:"认证返回的参数异常",5600:"分享设备不在分享时间内",5601:"群组分享用户没权限",5602:"群组分享权限变更",5610:"接收流头失败",5620:"心跳超时",5701:"cas信令返回格式错误",5702:"SPGW请求Cas、Status透传超时",5703:"SPGW请求http不通",6001:"客户端参数出错",6099:"客户端默认错误",6101:"不支持的命令",6102:"设备流头发送失败",6103:"cas/设备返回错误1",6104:"cas/设备返回错误-1",6105:"设备返回错误码3",6106:"设备返回错误码4",6107:"设备返回错误码5",6108:"cas信令回应重复",6109:"视频广场取消分享",6110:"设备信令默认错误",6501:"设备数据链路和实际链路不匹配",6502:"设备数据链路重复建立连接",6503:"设备数据链路端口不匹配",6504:"缓存设备数据链路失败(内存块不足)",6505:"设备发送确认头消息重复",6506:"设备数据先于确定头部到达",6508:"设备数据头部长度非法",6509:"索引找不到设备数据管理块",6510:"设备数据链路vtdu内存块协议状态不匹配",6511:"设备数据头部没有streamkey错误",6512:"设备数据头部非法",6513:"设备数据长度过小",6514:"设备老协议推流头部没有streamkey错误",6515:"设备老协议推流数据非法",6516:"设备老协议索引找不到内存管理块",6517:"设备老协议推流数据非法",6518:"设备数据包过大",6519:"设备推流链路网络不稳定",6520:"设备推流链路网络不稳定",6700:"异常数据",6701:"回放结束",7001:"与相应服务连接失败",7002:"与相应服务连接失败",7003:"与相应服务连接失败",7004:"与相应服务连接失败",7005:"VTDU连接失败，或VTDU侧断开连接",7006:"vtm断开连接",7007:"客户端发送缓冲区满（上行带宽太小）",9e3:"无效包，包过大",9001:"地址不合法",9002:"缺少端口",9048:"免费版并发数达到上限，请升级企业版使用多并发能力","0001":"通用错误返回","0002":"入参为空指针","0003":"入参值无效","0004":"信令消息解析非法","0005":"内存资源不足","0006":"协议格式不对或者消息体长度超过STREAM_MAX_MSGBODY_LEN","0007":"设备序列号长度不合法","0008":"取流url长度不合法","0009":"解析vtm返回vtdu地址不合法","0010":"解析vtm返回级联vtdu地址不合法","0011":"解析vtm返回会话标识长度不合法","0012":"vtdu返回流头长度不合法","0013":"vtdu会话长度非法","0014":"回调函数未注册","0015":"vtdu成功响应未携带会话标识","0016":"vtdu成功响应未携带流头","0017":"无数据流，尚未使用","0018":"信令消息体PB解析失败","0019":"信令消息体PB封装失败","0020":"申请系统内存资源失败","0021":"vtdu地址尚未获取到","0022":"客户端尚未支持","0023":"获取系统socket资源失败","0024":"上层填充的StreamSsnId不匹配","0025":"链接服务器失败","0026":"客户端请求未收到服务端应答","0027":"链路断开","0028":"没有取流链接","0029":"流成功停止","0030":"客户端防串流校验失败","0031":"应用层tcp粘包处理缓冲区满","0032":"无效状态迁移","0033":"无效客户端状态","0034":"向vtm取流流媒体信息请求超时","0035":"向代理取流请求超时","0036":"向代理保活取流请求超时","0037":"向vtdu取流请求超时","0038":"向vtdu保活取流请求超时"},server:{ptz:{start:{200:"",10001:"操作失败",10002:"账号异常，操作失败",10005:"账号异常，操作失败",20002:"设备不存在，请检查设备连接情况",20006:"操作失败，请检查设备网络情况",20007:"操作失败，请检查设备在线情况",20008:"操作过于频繁，稍后再试",20014:"操作失败",20032:"通道不存在请检查设备连接情况",49999:"操作失败，请重试",6e4:"操作失败，设备不支持该操作",60001:"操作失败，用户无权限",60002:"设备已旋转到上限位",60003:"设备已旋转到下限位",60004:"设备已旋转到左限位",60005:"设备已旋转到右限位",60006:"操作失败，请重试",60009:"设备正在操作中",60020:"操作失败"},stop:{200:"",10001:"操作失败",10002:"账号异常，操作失败",10005:"账号异常，操作失败",20002:"设备不存在，请检查设备连接情况",20006:"操作失败，请检查设备网络情况",20007:"操作失败，请检查设备在线情况",20008:"操作过于频繁，稍后再试",20014:"操作失败",20032:"通道不存在请检查设备连接情况",49999:"操作失败，请重试",6e4:"操作失败，设备不支持该操作",60001:"操作失败，用户无权限",60006:"操作失败，请重试",60009:"设备正在操作中",60020:"操作失败"}},talk:{200:"",10001:"播放失败",10002:"账号异常，操作失败",10031:"账号异常，操作失败",20002:"设备不存在请检查设备连接情况",60059:"播放失败"},time:{200:"",10001:"播放失败",10002:"账号异常，播放失败",10004:"账号异常，播放失败",10005:"账号异常，播放失败",10011:"播放失败",10013:"账号异常，播放失败",10030:"播放失败",20002:"设备不存在请检查设备连接情况",20014:"播放失败",20032:"设备不存在请检查设备连接情况",49999:"播放失败请重试",60024:"播放失败请重试"}},client:{default:{BTN_RETRY:"重试",BTN_RELOAD:"重新加载",LOADING:"加载中，请稍后",TIMEFORMAT_ERROR:"时间格式有误，请确认"},init:{USE_MULTITHREADING_WARING:"您当前浏览器可以开启谷歌实验室多线程特性，获取更好播放体验，避免浏览器卡顿及崩溃,详见",OPEN_INSTRUCTIONS:"开启说明",INIT_FINSHED:"初始化播放器完成",INIT_SUCCESS:"初始化播放器成功"},play:{GET_PLAYURL_FAILED:"获取播放地址失败",VIDEO_LOADING:"视频加载中",DISCONNECT:"连接断开，请重试",DEVICE_ENCRYPTED:"设备已加密",NO_RECORD:"未找到录像片段",PLAY_FAILED:"播放失败，请检查设备及客户端网络",PLAY_SUCCESS:"播放成功",STOP_SUCCESS:"停止成功",CHANGE_PLAYURL_SUCCESS:"切换播放地址成功",CHANGE_PLAYURL_FAILED:"切换播放地址失败",GET_OSD_TIME:"获取OSD时间",GET_OSD_TIME_FAILED:"获取OSD时间失败",SET_POSTER:"设置播放器封面",RESIZE:"调整播放器尺寸",SPEED:"倍速播放",GET_SPEED:"获取当前播放速率",MAX_SPEED_LIMIT:"播放速度最大为4倍速度",MIN_SPEED_LIMIT:"播放速度最小为1倍速度",SEEK_CANNOT_CROSS_DAYS:"seek时间不能跨日期",SEEK_TIMEFORMAT_ERROR:"seek时间格式错误",PAUSE:"暂停",PAUSE_FAILED:"暂停失败",RESUME:"恢复播放",RESUME_FAILED:"恢复播放失败"},call:{CALL_END:"通话已结束",USER_DO_NOT_OWN_DEVICE:"loadingSetTextWithBtn"},cloudRecord:{NO_CLOUD_RECORD:"该设备在当天没有云录制的录像"},videoLevel:{CHANGE_VIDEO_LEVEL:"切换清晰度",GET_VIDEO_LEVEL_LIST:"获取设备支持的清晰度列表",PLEASE_INPUT_RIGHT_VIDEO_LEVEL:"请输入正确的清度"},theme:{RESET_THEME:"重置主题",BTN_PLAY:"播放/结束播放",BTN_SOUND:"声音",BTN_RECORDVIDEO:"录屏",BTN_CAPTURE:"截图",BTN_TALK:"对讲",BTN_ZOOM:"电子放大",BTN_3D_ZOOM:"3D定位",BTN_PTZ:"云台控制",BTN_EXPEND:"全局全屏",BTN_WEBEXPEND:"网页全屏",BTN_HD:"画面清晰度",BTN_SPEED:"回放倍速",BTN_CLOUDREC:"云存储回放",BTN_CLOUDRECORD:"云录制",BTN_REC:"本地存储",DEVICE_NAME:"设备名称",DEVICE_ID:"设备序列号"},capture:{CAPTURE_SUCCESS:"截图成功",CAPTURE_FAILED:"截图失败"},record:{START_RECORD_SUCCESS:"开始录制成功",START_RECORD_FAILED:"开始录制失败",STOP_RECORD_SUCCESS:"停止录制成功",STOP_RECORD_FAILED:"停止录制失败"},sound:{OPEN_SOUND:"开启声音",CLOSE_SOUND:"关闭声音"},zoom:{ZOOM:"电子放大",START_ZOOM:"开启电子放大",CLOSE_ZOOM:"关闭电子放大","3D_ZOOM":"3D定位","3D_ZOOM_DISABLE":"未启用3D定位功能","3D_ZOOM_FAILED":"3D定位失败，请重试",START_3D_ZOOM:"开启3D定位",CLOSE_3D_ZOOM:"关闭3D定位",DEVICE_NOT_SUPPORT_3D_ZOOM:"当前设备不支持3D定位功能","3D_ZOOM_ACTIVED":"3D定位已处于开启状态","3D_ZOOM_NOT_ACTIVED":"未启用3D定位功能","3D_ZOOM_CLOSED":"3D定位已处于关闭状态",CHANGE_ZOOM_TYPE:"改变缩放模式"},fullscreen:{FULLSCREEN:"全局全屏",FULLSCREEN_EXIT:"退出全局全屏",GET_WEB_FULLSCREEN_STATUS:"获取浏览器网页全屏状态",WEB_FULLSCREEN:"开启网页全屏",WEB_FULLSCREEN_EXIT:"退出网页全屏"},destroy:{DESTROY:"销毁"},capacity:{GET_CAPACITY:"获取设备能力级",GET_CAPACITY_FAILED:"获取设备能力级失败"},ptz:{GET_PTZ_STATUS:"获取当前云台状态",GET_PTZ_STATUS_FAILED:"未加载Theme模块，无法获取云台状态",MOBILE_HIDE_PTZ:"移动端，非全屏状态不展示云台",OPTION_PTZ_FAILED:"未加载Theme模块，无法操作云台"},mirror:{MIRROR:"镜像翻转",MIRROR_TYPE_ERROR:"翻转参数类型错误"},FEC:{CHANGE_FEC_TYPE:"切换鱼眼矫正类型",DEVICE_NOT_SUPPORT:"设备不支持鱼眼模式",TYPE_NOT_SUPPORT:"鱼眼矫正类型暂时不支持",FEC_SUPPORT_VERSION:"当前只有V3软解支持鱼眼矫正",NO_CANVAS_ID:"鱼眼矫正类型需要分屏，但是没有传正确的分屏的canvas id",SET_FEC_PARAMS:"设置3D矫正视角参数",GET_FEC_PARAMS:"获取3D矫正视角参数",SET_FEC_PARAMS_FAILED:"该矫正类型不能设置3D矫正视角参数",GET_FEC_PARAMS_FAILED:"该矫正类型不能获取3D矫正视角参数",GET_FEC_PARAMS_SUPPORT_VERSION:"当前只有V3软解支持鱼眼矫正获取3D矫正视角参数"},watermark:{SET_WATERMARK:"设置水印"}}};function Sa(e,t){for(var i=0;i<t.length;i++){var r=t[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}pa(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-loading{align-items:center;background-color:rgba(0,0,0,.2);bottom:0;color:#fff;display:flex;flex-direction:column;justify-content:center;left:0;position:absolute;right:0;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:50}.ezui-loading-icon{font-size:24px}.ezui-loading-icon .ezui-icon-loading{animation:antRotate 1s linear infinite}.ezui-loading-loading-text{color:var(--ezui-color,#fff);font-size:var(--ezui-font-size,14px);margin-top:3px}@keyframes antRotate{to{transform:rotate(1turn);transform-origin:50% 50%}}");var ba=function(){function e(e,t){if(this._prefixCls=n.PREFIX_CLASS_NAME+"-loading",this._loading=!1,this._$container=document.getElementById(e),this._options=Object.assign({},null!=t?t:{}),this.$loadingContainer=document.createElement("div"),this._$container){var i,r;if("string"==typeof this._options.customLoadingHtml)return this.$loadingContainer.innerHTML=this._options.customLoadingHtml,this.$loadingContainer=this.$loadingContainer.childNodes[0],void n.addClass(this.$loadingContainer,null!=(i=this._options.loadingClass)?i:"");n.addClass(this.$loadingContainer,this._prefixCls,null!=(r=this._options.loadingClass)?r:""),this.$loadingContainer.innerHTML=this._renderHtml(),this._loading=!1}}var t,i,r,a=e.prototype;return a.show=function(e){var t;this.$loadingContainer.innerHTML=this._renderHtml(null!=(t=null!=e?e:this._options.loadingText)?t:""),this._$container&&(this._$container.appendChild(this.$loadingContainer),this._loading=!0)},a.hide=function(){this._$container&&this.$loadingContainer&&this._loading&&(this._$container.removeChild(this.$loadingContainer),this._loading=!1)},a.destroy=function(){this.hide(),this.$loadingContainer=null,this._loading=!1},a._renderHtml=function(e){var t,i=null!=(t=null!=e?e:this._options.loadingText)?t:"Loading ...";return'<div class="'+this._prefixCls+'-icon">'+s.loadingIcon().outerHTML+"</div>\n            "+(null===this._options.loadingText?"":'<div class="class="'+this._prefixCls+'-loading-text"">'+i+"</div>")},t=e,(i=[{key:"loading",get:function(){return this._loading}}])&&Sa(t.prototype,i),r&&Sa(t,r),e}(),ga={poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",loadingText:"加载中，请稍后",initText:"初始化播放器完成"};function va(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function Ra(){return Ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Ra.apply(this,arguments)}function Ca(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=function(e,t){if(e){if("string"==typeof e)return va(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(i):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?va(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ea=function(){function t(t){if(this.player=new da(Ra({},t)),this._options=a.merge({},this.player.getOptions(),ga,t),this.urlInfo=_(this._options.url),this.i18n=this.player.i18n,this.event=this.player.event,this.service=this.player.service,this.i18n.switchTranslation("zh"),this.i18n.appendTranslations({zh:ya}),this.logger=e({level:"INFO",showTime:!0,name:"SIMPLE"}),this.message=new Pa(t.id,{customErrorHtml:t.customErrorDom}),this.loading=new ba(t.id,d(this._options,["loadingText","customLoadingDom"])),this.loading.show(this._options.initText),"string"==typeof t.id&&(this.$container=document.getElementById(t.id)),!this.$container)throw new Error(t.id+" node does not exist");if("CANVAS"===this.$container.nodeName||"VIDEO"===this.$container.nodeName)throw new Error(t.id+" node is "+this.$container.nodeName);this._options.poster&&this.setPoster(this._options.poster),this._registerEvents_()}var i=t.prototype;return i.play=function(e){return(null==e?void 0:e.url)&&(this.urlInfo=_(null==e?void 0:e.url)),e&&(this._options=Object.assign(this._options,e||{})),this.loading.show(),this.message.hide(),this.player.play(e)},i.pause=function(e){return this.player.pause(e)},i.resume=function(e){return this.player.resume(e)},i.stop=function(){return this.player.stop()},i.destroy=function(){return this.message.destroy(),this.loading.destroy(),this.player.destroy()},i.snapshot=function(e,t,i,r){return void 0===t&&(t="jpeg"),this.player.snapshot(e,t,i,r)},i.resize=function(e,t){return this.player.resize(e,t)},i.fullScreen=function(e,t){return this.player.fullScreen(null!=e?e:window.screen.width,null!=t?t:window.screen.height)},i.exitScreen=function(){return this.player.exitScreen()},i.setVolume=function(e){if(!(e<0||e>1))return this.player.setVolume(e);this.logger.error("The range of volume values is [0, 1], "+e+" value set error, ")},i.getFrameInfo=function(){return this.player.getFrameInfo()},i.setDisplayRegion=function(e,t,i,r,a,n){return void 0===a&&(a=!0),void 0===n&&(n=!1),this.player.setDisplayRegion(e,t,i,r,a,n)},i.getOSDTime=function(){return this.player.getOSDTime()},i.use=function(e){this.player.use(e)},i.setFECCorrectType=function(e,t){return this.player.setFECCorrectType(e,t)},i.setFEC2DParam=function(e,t){return this.player.setFEC2DParam(e,t)},i.setFEC3DViewParam=function(e){return this.player.setFEC3DViewParam(e)},i.get3DViewParam=function(e){return this.player.get3DViewParam(e)},i.setPoster=function(e){if(this.$container){var t=document.getElementById(this._options.id+"-player");this._options.poster=e,t.style.backgroundImage="url("+e+")",t.style.backgroundSize="cover",this.$container.style.backgroundSize="cover"}},i.setPlaybackRate=function(e){return this.player.setPlaybackRate(e)},i.seek=function(e,t){return this.message.hide(),this.player.seek(e,t)},i.getOptions=function(){return this._options},i.getVersion=function(){return"0.1.1-beta.1"},i.setWaterMarkFont=function(e){return this.player.setWaterMark(e)},i.setMirrorFlip=function(e){return this.player.setMirrorFlip(e)},i._registerEvents_=function(){var e=this,t=!1,i=!1;this.event&&this.loading&&(this.event.on("initializing",(function(t){t.data&&(e.loading.hide(),e._options.autoPlay&&e.loading.show())})),this.event.on("play",(function(){t=!1})),this.event.on("seek",(function(){t=!1})),this.event.on("network.videoFragmentFiles",(function(t){var i,a,n=t.data||[],s=r((null==(i=e.urlInfo.searchParams)?void 0:i.begin)||r().format("YYYY-MM-DD 00:00:00")),o=r((null==(a=e.urlInfo.searchParams)?void 0:a.end)||r(s).format("YYYY-MM-DD 23:59:59"));n.find((function(e){return r(e.endTime)>s&&r(e.startTime)<o}))||(e.message.showError("RecordCloud"===(null==t?void 0:t.source)?e.i18n.t("client.cloudRecord.NO_CLOUD_RECORD"):e.i18n.t("client.play.NO_RECORD")),e.loading.loading&&e.loading.hide())})),this.event.on("EVENT_CALLBACK",(function(r){"appearFirstFrameCallback"===r.data.type&&(e.loading.hide(),e.message.hide(),t=!1,i=!1,e.logger.log("[appearFirstFrameCallback]",r))}))),this.event.on("network.error",(function(t){var i,r,a,n;e.loading.loading&&e.loading.hide();var s=(null==t||null==(i=t.data)?void 0:i.msg)||(null==t||null==(r=t.data)?void 0:r.errorMsg),o=(null==t||null==(a=t.data)?void 0:a.code)||(null==t||null==(n=t.data)?void 0:n.errorCode),x=e.i18n.t("stream."+o);x==='[missing "'+e.i18n.getCurrentLocale()+".stream."+o+'" translation]'&&(x=""),(x||s)&&e.message.showError(x||s,3e3)})),this.event.on("EVENT_CALLBACK",(function(r){var a,n;if("setRunTimeInfoCallBack"===r.data.type)5!==(null==r||null==(n=r.data)||null==(a=n.data)?void 0:a.nErrorCode)||t||(e.loading.loading&&e.loading.hide(),e.message.showError("设备已加密"),e.logger.error("[setRunTimeInfoCallBack]",r),e.event.emit("deviceEncrypted",r.data),t=!0);else if("pluginErrorHandler"===r.data.type){var s,o=e.i18n.t("client.play.DISCONNECT");if(i)return;if(1003===r.data.code)e.player.playing&&e.message.showError(o);else if(1001===r.data.code);else if(5402===r.data.code);else if((null==r?void 0:r.data)&&1!==(null==r||null==(s=r.data)?void 0:s.code)){var x,f,l,h;e.loading.loading&&e.loading.hide();var c=(null==r?void 0:r.msg)||(null==r?void 0:r.errorMsg)||(null==r||null==(x=r.data)?void 0:x.msg)||(null==r||null==(f=r.data)?void 0:f.errorMsg),_=(null==r||null==(l=r.data)?void 0:l.code)||(null==r||null==(h=r.data)?void 0:h.errorCode),u=e.i18n.t("stream."+_);u==='[missing "'+e.i18n.getCurrentLocale()+".stream."+_+'" translation]'&&(u=""),e.message.showError(u||c||o),6701===r.data.code&&e.logger.log("回放结束")}else e.message.hide()}})),this.event.on("StreamClient.autoClose",(function(){i=!0,e.player.playing=!1}))},t.install=function(e,i){t.plugins.get(e),t.plugins.set(e,i)},t.installs=function(e){for(var i,r=Ca(e);!(i=r()).done;){var a=i.value;t.install(a.name,a.plugin)}},t}();Ea.plugins=new Map,module.exports=Ea;
