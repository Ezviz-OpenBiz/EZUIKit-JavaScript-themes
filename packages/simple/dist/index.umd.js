/*
*
* @ezuikit/theme-simple v0.1.1-beta.1
* Copyright (c) 2024-3-26 Ezviz-OpenBiz
* Released under MIT the License.
*
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).SimpleTheme=t()}(this,(function(){"use strict";function e(){e=function(){return r};var t,r={},i=Object.prototype,a=i.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},o=s.iterator||"@@iterator",x=s.asyncIterator||"@@asyncIterator",f=s.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(t){l=function(e,t,r){return e[t]=r}}function h(e,t,r,i){var a=t&&t.prototype instanceof P?t:P,s=Object.create(a.prototype),o=new M(i||[]);return n(s,"_invoke",{value:F(e,r,o)}),s}function c(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=h;var u="suspendedStart",_="suspendedYield",d="executing",p="completed",m={};function P(){}function y(){}function g(){}var b={};l(b,o,(function(){return this}));var S=Object.getPrototypeOf,v=S&&S(S(A([])));v&&v!==i&&a.call(v,o)&&(b=v);var R=g.prototype=P.prototype=Object.create(b);function C(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(i,n,s,o){var x=c(e[i],e,n);if("throw"!==x.type){var f=x.arg,l=f.value;return l&&"object"==typeof l&&a.call(l,"__await")?t.resolve(l.__await).then((function(e){r("next",e,s,o)}),(function(e){r("throw",e,s,o)})):t.resolve(l).then((function(e){f.value=e,s(f)}),(function(e){return r("throw",e,s,o)}))}o(x.arg)}var i;n(this,"_invoke",{value:function(e,a){function n(){return new t((function(t,i){r(e,a,t,i)}))}return i=i?i.then(n,n):n()}})}function F(e,r,i){var a=u;return function(n,s){if(a===d)throw new Error("Generator is already running");if(a===p){if("throw"===n)throw s;return{value:t,done:!0}}for(i.method=n,i.arg=s;;){var o=i.delegate;if(o){var x=T(o,i);if(x){if(x===m)continue;return x}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(a===u)throw a=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a=d;var f=c(e,r,i);if("normal"===f.type){if(a=i.done?p:_,f.arg===m)continue;return{value:f.arg,done:i.done}}"throw"===f.type&&(a=p,i.method="throw",i.arg=f.arg)}}}function T(e,r){var i=r.method,a=e.iterator[i];if(a===t)return r.delegate=null,"throw"===i&&e.iterator.return&&(r.method="return",r.arg=t,T(e,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),m;var n=c(a,e.iterator,r.arg);if("throw"===n.type)return r.method="throw",r.arg=n.arg,r.delegate=null,m;var s=n.arg;return s?s.done?(r[e.resultName]=s.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,m):s:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function M(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function A(e){if(e||""===e){var r=e[o];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,n=function r(){for(;++i<e.length;)if(a.call(e,i))return r.value=e[i],r.done=!1,r;return r.value=t,r.done=!0,r};return n.next=n}}throw new TypeError(typeof e+" is not iterable")}return y.prototype=g,n(R,"constructor",{value:g,configurable:!0}),n(g,"constructor",{value:y,configurable:!0}),y.displayName=l(g,f,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,l(e,f,"GeneratorFunction")),e.prototype=Object.create(R),e},r.awrap=function(e){return{__await:e}},C(E.prototype),l(E.prototype,x,(function(){return this})),r.AsyncIterator=E,r.async=function(e,t,i,a,n){void 0===n&&(n=Promise);var s=new E(h(e,t,i,a),n);return r.isGeneratorFunction(t)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},C(R),l(R,f,"Generator"),l(R,o,(function(){return this})),l(R,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var i in t)r.push(i);return r.reverse(),function e(){for(;r.length;){var i=r.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},r.values=A,M.prototype={constructor:M,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(I),!e)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function i(i,a){return o.type="throw",o.arg=e,r.next=i,a&&(r.method="next",r.arg=t),!!a}for(var n=this.tryEntries.length-1;n>=0;--n){var s=this.tryEntries[n],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var x=a.call(s,"catchLoc"),f=a.call(s,"finallyLoc");if(x&&f){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(x){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!f)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var s=n?n.completion:{};return s.type=e,s.arg=t,n?(this.method="next",this.next=n.finallyLoc,m):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),I(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var a=i.arg;I(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,r,i){return this.delegate={iterator:A(e),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=t),m}},r}function t(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,r){for(var i=0;i<r.length;i++){var a=r[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,t(a.key),a)}}function s(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,a,n,s,o=[],x=!0,f=!1;try{if(n=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;x=!1}else for(;!(x=(i=n.call(r)).done)&&(o.push(i.value),o.length!==t);x=!0);}catch(e){f=!0,a=e}finally{try{if(!x&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(f)throw a}}return o}}(e,t)||x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function l(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=x(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,n=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw n}}}}
/*
  *
  * @ezuikit/utils-logger v1.0.1
  * Copyright (c) 2024-3-23 Ezviz-OpenBiz
  * Released under MIT the License.
  *
  */var h={info:"",log:"background: #4096ff; color: #FFF;",warn:"background: yellow; color: #FFF;",error:"background: red; color: #FFF;"},c=function(){function e(e){void 0===e&&(e={}),this._options={level:"INFO",showTime:!1},this._levelNum=3,this.info=this._loggerFactory("info",this._levelNum>=3),this.log=this._loggerFactory("log",this._levelNum>=2),this.warn=this._loggerFactory("warn",this._levelNum>=1),this.error=this._loggerFactory("error",this._levelNum>=0),this.setOptions(e)}var t=e.prototype;return t.setOptions=function(e){var t;this._options=Object.assign({},this._options,e),this._levelNum=this._matchLevel(null!=(t=this._options.level)?t:"INFO"),this.info=this._loggerFactory("info",this._levelNum>=3),this.log=this._loggerFactory("log",this._levelNum>=2),this.warn=this._loggerFactory("warn",this._levelNum>=1),this.error=this._loggerFactory("error",this._levelNum>=0)},t._matchLevel=function(e){var t=3;switch(e){case"INFO":t=3;break;case"LOG":t=2;break;case"WARN":t=1;break;case"ERROR":t=0}return t},t._loggerFactory=function(t,r){var i=console[t];if(r&&i){var a,n=this._options.name?"%c["+this._options.name+"]%c %c["+t.toUpperCase()+"]":"%c["+t.toUpperCase()+"]",s=[this._options.name?"background: green;color: #fff":null,this._options.name?"":null,h[t]].filter((function(e){return null!=e}));return(a=i).bind.apply(a,[].concat([console,n],s))}return e.noop},t.getOptions=function(){return this._options},t.getVersion=function(){return"1.0.1"},e}();function u(e){return(e=+e)<10&&(e="0"+e),e+""}c.noop=function(){};var _=["info","log","warn","error"];function d(e){var t=new c(e);return new Proxy(t,{get:function(e,t){if(_.includes(t)){var r;if(null==(r=e._options)?void 0:r.showTime){var i=(n=(a=new Date(Date.now())).getFullYear(),s=a.getMonth()+1,o=a.getDate(),x=a.getHours(),f=a.getMinutes(),l=a.getSeconds(),h=a.getMilliseconds(),n+"/"+u(s)+"/"+u(o)+" "+u(x)+":"+u(f)+":"+u(l)+":"+h);return e[t].bind(console,"["+i+"]")}return e[t].bind(console)}var a,n,s,o,x,f,l,h;return Reflect.get(e,t)}})}
/*
  *
  * @ezuikit/utils-i18n v1.0.1
  * Copyright (c) 2024-3-23 Ezviz-OpenBiz
  * Released under MIT the License.
  *
  */var p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function m(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var P,y=Array.isArray,g="object"==r(p)&&p&&p.Object===Object&&p,b=g,S="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,R=b||S||Function("return this")(),C=R.Symbol,E=C,F=Object.prototype,T=F.hasOwnProperty,D=F.toString,I=E?E.toStringTag:void 0,M=Object.prototype.toString,A=function(e){var t=T.call(e,I),r=e[I];try{e[I]=void 0;var i=!0}catch(e){}var a=D.call(e);return i&&(t?e[I]=r:delete e[I]),a},w=C?C.toStringTag:void 0,L=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":w&&w in Object(e)?A(e):function(e){return M.call(e)}(e)},k=function(e){return null!=e&&"object"==r(e)},B=L,O=k,H=function(e){return"symbol"==r(e)||O(e)&&"[object Symbol]"==B(e)},N=y,V=H,Y=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,U=/^\w*$/,X=function(e,t){if(N(e))return!1;var i=r(e);return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!V(e))||U.test(e)||!Y.test(e)||null!=t&&e in Object(t)},W=function(e){var t=r(e);return null!=e&&("object"==t||"function"==t)},G=L,J=W,Z=function(e){if(!J(e))return!1;var t=G(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},j=R["__core-js_shared__"],z=(P=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+P:"",q=Function.prototype.toString,$=function(e){if(null!=e){try{return q.call(e)}catch(e){}try{return e+""}catch(e){}}return""},K=Z,Q=function(e){return!!z&&z in e},ee=W,te=$,re=/^\[object .+?Constructor\]$/,ie=Function.prototype,ae=Object.prototype,ne=ie.toString,se=ae.hasOwnProperty,oe=RegExp("^"+ne.call(se).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xe=function(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!ee(e)||Q(e))&&(K(e)?oe:re).test(te(e))}(r)?r:void 0},fe=xe(Object,"create"),le=fe,he=fe,ce=Object.prototype.hasOwnProperty,ue=fe,_e=Object.prototype.hasOwnProperty,de=fe,pe=function(){this.__data__=le?le(null):{},this.size=0},me=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Pe=function(e){var t=this.__data__;if(he){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return ce.call(t,e)?t[e]:void 0};function ye(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}ye.prototype.clear=pe,ye.prototype.delete=me,ye.prototype.get=Pe,ye.prototype.has=function(e){var t=this.__data__;return ue?void 0!==t[e]:_e.call(t,e)},ye.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=de&&void 0===t?"__lodash_hash_undefined__":t,this};var ge=ye,be=function(e,t){return e===t||e!=e&&t!=t},Se=be,ve=function(e,t){for(var r=e.length;r--;)if(Se(e[r][0],t))return r;return-1},Re=ve,Ce=Array.prototype.splice,Ee=ve,Fe=ve,Te=ve,De=function(){this.__data__=[],this.size=0};function Ie(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Ie.prototype.clear=De,Ie.prototype.delete=function(e){var t=this.__data__,r=Re(t,e);return!(r<0||(r==t.length-1?t.pop():Ce.call(t,r,1),--this.size,0))},Ie.prototype.get=function(e){var t=this.__data__,r=Ee(t,e);return r<0?void 0:t[r][1]},Ie.prototype.has=function(e){return Fe(this.__data__,e)>-1},Ie.prototype.set=function(e,t){var r=this.__data__,i=Te(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this};var Me=Ie,Ae=xe(R,"Map"),we=ge,Le=Me,ke=Ae,Be=function(e,t){var i=e.__data__;return function(e){var t=r(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?i["string"==typeof t?"string":"hash"]:i.map},Oe=Be,He=Be,Ne=Be,Ve=Be;function Ye(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Ye.prototype.clear=function(){this.size=0,this.__data__={hash:new we,map:new(ke||Le),string:new we}},Ye.prototype.delete=function(e){var t=Oe(this,e).delete(e);return this.size-=t?1:0,t},Ye.prototype.get=function(e){return He(this,e).get(e)},Ye.prototype.has=function(e){return Ne(this,e).has(e)},Ye.prototype.set=function(e,t){var r=Ve(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this};var Ue=Ye,Xe=Ue;function We(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function r(){var i=arguments,a=t?t.apply(this,i):i[0],n=r.cache;if(n.has(a))return n.get(a);var s=e.apply(this,i);return r.cache=n.set(a,s)||n,s};return r.cache=new(We.Cache||Xe),r}We.Cache=Xe;var Ge=We,Je=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ze=/\\(\\)?/g,je=function(e){var t=Ge((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Je,(function(e,r,i,a){t.push(i?a.replace(Ze,"$1"):r||e)})),t}),(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}(),ze=function(e,t){for(var r=-1,i=null==e?0:e.length,a=Array(i);++r<i;)a[r]=t(e[r],r,e);return a},qe=ze,$e=y,Ke=H,Qe=C?C.prototype:void 0,et=Qe?Qe.toString:void 0,tt=function e(t){if("string"==typeof t)return t;if($e(t))return qe(t,e)+"";if(Ke(t))return et?et.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},rt=function(e){return null==e?"":tt(e)},it=y,at=X,nt=je,st=rt,ot=function(e,t){return it(e)?e:at(e,t)?[e]:nt(st(e))},xt=H,ft=function(e){if("string"==typeof e||xt(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},lt=ot,ht=ft,ct=function(e,t){for(var r=0,i=(t=lt(t,e)).length;null!=e&&r<i;)e=e[ht(t[r++])];return r&&r==i?e:void 0},ut=ct,_t=function(e,t,r){var i=null==e?void 0:ut(e,t);return void 0===i?r:i},dt=m(_t),pt=Object.prototype.hasOwnProperty,mt=L,Pt=k,yt=function(e){return Pt(e)&&"[object Arguments]"==mt(e)},gt=k,bt=Object.prototype,St=bt.hasOwnProperty,vt=bt.propertyIsEnumerable,Rt=yt(function(){return arguments}())?yt:function(e){return gt(e)&&St.call(e,"callee")&&!vt.call(e,"callee")},Ct=/^(?:0|[1-9]\d*)$/,Et=function(e,t){var i=r(e);return!!(t=null==t?9007199254740991:t)&&("number"==i||"symbol"!=i&&Ct.test(e))&&e>-1&&e%1==0&&e<t},Ft=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Tt=ot,Dt=Rt,It=y,Mt=Et,At=Ft,wt=ft,Lt=function(e,t,r){for(var i=-1,a=(t=Tt(t,e)).length,n=!1;++i<a;){var s=wt(t[i]);if(!(n=null!=e&&r(e,s)))break;e=e[s]}return n||++i!=a?n:!!(a=null==e?0:e.length)&&At(a)&&Mt(s,a)&&(It(e)||Dt(e))},kt=function(e,t){return null!=e&&pt.call(e,t)},Bt=Lt,Ot=m((function(e,t){return null!=e&&Bt(e,t,kt)})),Ht=Me,Nt=Me,Vt=Ae,Yt=Ue,Ut=Me;function Xt(e){var t=this.__data__=new Ut(e);this.size=t.size}Xt.prototype.clear=function(){this.__data__=new Ht,this.size=0},Xt.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Xt.prototype.get=function(e){return this.__data__.get(e)},Xt.prototype.has=function(e){return this.__data__.has(e)},Xt.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Nt){var i=r.__data__;if(!Vt||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Yt(i)}return r.set(e,t),this.size=r.size,this};var Wt=Xt,Gt=xe,Jt=function(){try{var e=Gt(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Zt=Jt,jt=function(e,t,r){"__proto__"==t&&Zt?Zt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},zt=jt,qt=be,$t=function(e,t,r){(void 0!==r&&!qt(e[t],r)||void 0===r&&!(t in e))&&zt(e,t,r)},Kt=function(e,t,r){for(var i=-1,a=Object(e),n=r(e),s=n.length;s--;){var o=n[++i];if(!1===t(a[o],o,a))break}return e},Qt={exports:{}};!function(e,t){var r=R,i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,n=a&&a.exports===i?r.Buffer:void 0,s=n?n.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,i=s?s(r):new e.constructor(r);return e.copy(i),i}}(Qt,Qt.exports);var er=Qt.exports,tr=R.Uint8Array,rr=tr,ir=W,ar=Object.create,nr=function(){function e(){}return function(t){if(!ir(t))return{};if(ar)return ar(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),sr=function(e,t){return function(r){return e(t(r))}},or=sr(Object.getPrototypeOf,Object),xr=Object.prototype,fr=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||xr)},lr=nr,hr=or,cr=fr,ur=Z,_r=Ft,dr=function(e){return null!=e&&_r(e.length)&&!ur(e)},pr=dr,mr=k,Pr={exports:{}},yr=function(){return!1};!function(e,t){var r=R,i=yr,a=t&&!t.nodeType&&t,n=a&&e&&!e.nodeType&&e,s=n&&n.exports===a?r.Buffer:void 0,o=(s?s.isBuffer:void 0)||i;e.exports=o}(Pr,Pr.exports);var gr=Pr.exports,br=L,Sr=or,vr=k,Rr=Function.prototype,Cr=Object.prototype,Er=Rr.toString,Fr=Cr.hasOwnProperty,Tr=Er.call(Object),Dr=L,Ir=Ft,Mr=k,Ar={};Ar["[object Float32Array]"]=Ar["[object Float64Array]"]=Ar["[object Int8Array]"]=Ar["[object Int16Array]"]=Ar["[object Int32Array]"]=Ar["[object Uint8Array]"]=Ar["[object Uint8ClampedArray]"]=Ar["[object Uint16Array]"]=Ar["[object Uint32Array]"]=!0,Ar["[object Arguments]"]=Ar["[object Array]"]=Ar["[object ArrayBuffer]"]=Ar["[object Boolean]"]=Ar["[object DataView]"]=Ar["[object Date]"]=Ar["[object Error]"]=Ar["[object Function]"]=Ar["[object Map]"]=Ar["[object Number]"]=Ar["[object Object]"]=Ar["[object RegExp]"]=Ar["[object Set]"]=Ar["[object String]"]=Ar["[object WeakMap]"]=!1;var wr=function(e){return function(t){return e(t)}},Lr={exports:{}};!function(e,t){var r=g,i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,n=a&&a.exports===i&&r.process,s=function(){try{return a&&a.require&&a.require("util").types||n&&n.binding&&n.binding("util")}catch(e){}}();e.exports=s}(Lr,Lr.exports);var kr=Lr.exports,Br=function(e){return Mr(e)&&Ir(e.length)&&!!Ar[Dr(e)]},Or=wr,Hr=kr&&kr.isTypedArray,Nr=Hr?Or(Hr):Br,Vr=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},Yr=jt,Ur=be,Xr=Object.prototype.hasOwnProperty,Wr=function(e,t,r){var i=e[t];Xr.call(e,t)&&Ur(i,r)&&(void 0!==r||t in e)||Yr(e,t,r)},Gr=Wr,Jr=jt,Zr=Rt,jr=y,zr=gr,qr=Et,$r=Nr,Kr=Object.prototype.hasOwnProperty,Qr=function(e,t){var r=jr(e),i=!r&&Zr(e),a=!r&&!i&&zr(e),n=!r&&!i&&!a&&$r(e),s=r||i||a||n,o=s?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],x=o.length;for(var f in e)!t&&!Kr.call(e,f)||s&&("length"==f||a&&("offset"==f||"parent"==f)||n&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||qr(f,x))||o.push(f);return o},ei=W,ti=fr,ri=Object.prototype.hasOwnProperty,ii=Qr,ai=function(e){if(!ei(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=ti(e),r=[];for(var i in e)("constructor"!=i||!t&&ri.call(e,i))&&r.push(i);return r},ni=dr,si=function(e){return ni(e)?ii(e,!0):ai(e)},oi=function(e,t,r,i){var a=!r;r||(r={});for(var n=-1,s=t.length;++n<s;){var o=t[n],x=i?i(r[o],e[o],o,r,e):void 0;void 0===x&&(x=e[o]),a?Jr(r,o,x):Gr(r,o,x)}return r},xi=si,fi=$t,li=er,hi=function(e,t){var r=t?function(e){var t=new e.constructor(e.byteLength);return new rr(t).set(new rr(e)),t}(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},ci=function(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t},ui=function(e){return"function"!=typeof e.constructor||cr(e)?{}:lr(hr(e))},_i=Rt,di=y,pi=function(e){return mr(e)&&pr(e)},mi=gr,Pi=Z,yi=W,gi=function(e){if(!vr(e)||"[object Object]"!=br(e))return!1;var t=Sr(e);if(null===t)return!0;var r=Fr.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Er.call(r)==Tr},bi=Nr,Si=Vr,vi=Wt,Ri=$t,Ci=Kt,Ei=function(e,t,r,i,a,n,s){var o=Si(e,r),x=Si(t,r),f=s.get(x);if(f)fi(e,r,f);else{var l=n?n(o,x,r+"",e,t,s):void 0,h=void 0===l;if(h){var c=di(x),u=!c&&mi(x),_=!c&&!u&&bi(x);l=x,c||u||_?di(o)?l=o:pi(o)?l=ci(o):u?(h=!1,l=li(x,!0)):_?(h=!1,l=hi(x,!0)):l=[]:gi(x)||_i(x)?(l=o,_i(o)?l=function(e){return oi(e,xi(e))}(o):yi(o)&&!Pi(o)||(l=ui(x))):h=!1}h&&(s.set(x,l),a(l,x,i,n,s),s.delete(x)),fi(e,r,l)}},Fi=W,Ti=si,Di=Vr,Ii=function(e){return e},Mi=Math.max,Ai=function(e){return function(){return e}},wi=Jt,Li=wi?function(e,t){return wi(e,"toString",{configurable:!0,enumerable:!1,value:Ai(t),writable:!0})}:Ii,ki=Date.now,Bi=function(e){var t=0,r=0;return function(){var i=ki(),a=16-(i-r);if(r=i,a>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Li),Oi=Ii,Hi=function(e,t,r){return t=Mi(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,n=Mi(i.length-t,0),s=Array(n);++a<n;)s[a]=i[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=i[a];return o[t]=r(s),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,o)}},Ni=Bi,Vi=function(e,t){return Ni(Hi(e,t,Oi),e+"")},Yi=be,Ui=dr,Xi=Et,Wi=W,Gi=function(e,t,i){if(!Wi(i))return!1;var a=r(t);return!!("number"==a?Ui(i)&&Xi(t,i.length):"string"==a&&t in i)&&Yi(i[t],e)},Ji=Vi,Zi=Gi,ji=function e(t,r,i,a,n){t!==r&&Ci(r,(function(s,o){if(n||(n=new vi),Fi(s))Ei(t,r,o,i,e,a,n);else{var x=a?a(Di(t,o),s,o+"",t,r,n):void 0;void 0===x&&(x=s),Ri(t,o,x)}}),Ti)},zi=m(function(e){return Ji((function(t,r){var i=-1,a=r.length,n=a>1?r[a-1]:void 0,s=a>2?r[2]:void 0;for(n=e.length>3&&"function"==typeof n?(a--,n):void 0,s&&Zi(r[0],r[1],s)&&(n=a<3?void 0:n,a=1),t=Object(t);++i<a;){var o=r[i];o&&e(t,o,i)}return t}))}((function(e,t,r){ji(e,t,r)}))),qi=Ue;function $i(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new qi;++t<r;)this.add(e[t])}$i.prototype.add=$i.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},$i.prototype.has=function(e){return this.__data__.has(e)};var Ki=$i,Qi=function(e){return e!=e},ea=function(e,t){return e.has(t)},ta=xe(R,"Set"),ra=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r},ia=ta,aa=ia&&1/ra(new ia([,-0]))[1]==1/0?function(e){return new ia(e)}:function(){},na=Ki,sa=function(e,t){return!(null==e||!e.length)&&function(e,t,r){return t==t?function(e,t,r){for(var i=r-1,a=e.length;++i<a;)if(e[i]===t)return i;return-1}(e,t,r):function(e,t,r,i){for(var a=e.length,n=r+(i?1:-1);i?n--:++n<a;)if(t(e[n],n,e))return n;return-1}(e,Qi,r)}(e,t,0)>-1},oa=function(e,t,r){for(var i=-1,a=null==e?0:e.length;++i<a;)if(r(t,e[i]))return!0;return!1},xa=ea,fa=aa,la=ra,ha=m((function(e){return e&&e.length?function(e,t,r){var i=-1,a=sa,n=e.length,s=!0,o=[],x=o;if(r)s=!1,a=oa;else if(n>=200){var f=t?null:fa(e);if(f)return la(f);s=!1,a=xa,x=new na}else x=t?[]:o;e:for(;++i<n;){var l=e[i],h=t?t(l):l;if(l=r||0!==l?l:0,s&&h==h){for(var c=x.length;c--;)if(x[c]===h)continue e;t&&x.push(h),o.push(l)}else a(x,h,r)||(x!==o&&x.push(h),o.push(l))}return o}(e):[]})),ca=function(e,t){var r=[],i=[];return r.push(t),t||r.push(e.locale),e.enableFallback&&r.push(e.defaultLocale),r.filter(Boolean).map((function(e){return e.toString()})).forEach((function(t){if(i.includes(t)||i.push(t),e.enableFallback){var r=t.split("-");3===r.length&&i.push("".concat(r[0],"-").concat(r[1])),i.push(r[0])}})),ha(i)},ua=function(){function e(t){a(this,e),this.i18n=t,this.registry={},this.register("default",ca)}return s(e,[{key:"register",value:function(e,t){if("function"!=typeof t){var r=t;t=function(){return r}}this.registry[e]=t}},{key:"get",value:function(e){var t=this.registry[e]||this.registry[this.i18n.locale]||this.registry.default;return"function"==typeof t&&(t=t(this.i18n,e)),t instanceof Array||(t=[t]),t}}]),e}(),_a=function(e){var t=e.pluralizer,r=e.includeZero,i=void 0===r||r,a=e.ordinal,n=void 0!==a&&a;return function(e,r){return[i&&0===r?"zero":"",t(r,n)].filter(Boolean)}}({pluralizer:function(e,t){var r=String(e).split("."),i=!r[1],a=Number(r[0])==e,n=a&&r[0].slice(-1),s=a&&r[0].slice(-2);return t?1==n&&11!=s?"one":2==n&&12!=s?"two":3==n&&13!=s?"few":"other":1==e&&i?"one":"other"},includeZero:!0}),da=function(){function e(t){a(this,e),this.i18n=t,this.registry={},this.register("default",_a)}return s(e,[{key:"register",value:function(e,t){this.registry[e]=t}},{key:"get",value:function(e){return this.registry[e]||this.registry[this.i18n.locale]||this.registry.default}}]),e}(),pa=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),ma=function(e){return pa.test(e)},Pa="\\ud800-\\udfff",ya="["+Pa+"]",ga="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ba="\\ud83c[\\udffb-\\udfff]",Sa="[^"+Pa+"]",va="(?:\\ud83c[\\udde6-\\uddff]){2}",Ra="[\\ud800-\\udbff][\\udc00-\\udfff]",Ca="(?:"+ga+"|"+ba+")?",Ea="[\\ufe0e\\ufe0f]?",Fa=Ea+Ca+"(?:\\u200d(?:"+[Sa,va,Ra].join("|")+")"+Ea+Ca+")*",Ta="(?:"+[Sa+ga+"?",ga,va,Ra,ya].join("|")+")",Da=RegExp(ba+"(?="+ba+")|"+Ta+Fa,"g"),Ia=function(e){return e.split("")},Ma=ma,Aa=function(e,t,r){var i=e.length;return r=void 0===r?i:r,!t&&r>=i?e:function(e,t,r){var i=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var n=Array(a);++i<a;)n[i]=e[i+t];return n}(e,t,r)},wa=ma,La=function(e){return Ma(e)?function(e){return e.match(Da)||[]}(e):Ia(e)},ka=rt,Ba=function(e){e=ka(e);var t=wa(e)?La(e):void 0,r=t?t[0]:e.charAt(0),i=t?Aa(t,1).join(""):e.slice(1);return r.toUpperCase()+i},Oa=rt,Ha=Ba,Na=function(e){return function(t){return null==e?void 0:e[t]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Va=rt,Ya=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ua=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),Xa=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Wa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Ga="\\ud800-\\udfff",Ja="\\u2700-\\u27bf",Za="a-z\\xdf-\\xf6\\xf8-\\xff",ja="A-Z\\xc0-\\xd6\\xd8-\\xde",za="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qa="["+za+"]",$a="\\d+",Ka="["+Ja+"]",Qa="["+Za+"]",en="[^"+Ga+za+$a+Ja+Za+ja+"]",tn="(?:\\ud83c[\\udde6-\\uddff]){2}",rn="[\\ud800-\\udbff][\\udc00-\\udfff]",an="["+ja+"]",nn="(?:"+Qa+"|"+en+")",sn="(?:"+an+"|"+en+")",on="(?:['’](?:d|ll|m|re|s|t|ve))?",xn="(?:['’](?:D|LL|M|RE|S|T|VE))?",fn="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",ln="[\\ufe0e\\ufe0f]?",hn=ln+fn+"(?:\\u200d(?:"+["[^"+Ga+"]",tn,rn].join("|")+")"+ln+fn+")*",cn="(?:"+[Ka,tn,rn].join("|")+")"+hn,un=RegExp([an+"?"+Qa+"+"+on+"(?="+[qa,an,"$"].join("|")+")",sn+"+"+xn+"(?="+[qa,an+nn,"$"].join("|")+")",an+"?"+nn+"+"+on,an+"+"+xn,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",$a,cn].join("|"),"g"),_n=function(e){return e.match(Xa)||[]},dn=function(e){return Wa.test(e)},pn=rt,mn=function(e,t,r,i){var a=-1,n=null==e?0:e.length;for(i&&n&&(r=e[++a]);++a<n;)r=t(r,e[a],a,e);return r},Pn=function(e){return(e=Va(e))&&e.replace(Ya,Na).replace(Ua,"")},yn=function(e,t,r){return e=pn(e),void 0===(t=r?void 0:t)?dn(e)?function(e){return e.match(un)||[]}(e):_n(e):e.match(t)||[]},gn=RegExp("['’]","g"),bn=function(e){return Ha(Oa(e).toLowerCase())},Sn=m(function(e){return function(t){return mn(yn(Pn(t).replace(gn,"")),e,"")}}((function(e,t,r){return t=t.toLowerCase(),e+(r?bn(t):t)})));function vn(e){return e?Object.keys(e).reduce((function(t,r){return t[Sn(r)]=e[r],t}),{}):{}}function Rn(e){return null!=e}
/*
   *      bignumber.js v9.1.2
   *      A JavaScript library for arbitrary-precision arithmetic.
   *      https://github.com/MikeMcl/bignumber.js
   *      Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
   *      MIT Licensed.
   *
   *      BigNumber.prototype methods     |  BigNumber methods
   *                                      |
   *      absoluteValue            abs    |  clone
   *      comparedTo                      |  config               set
   *      decimalPlaces            dp     |      DECIMAL_PLACES
   *      dividedBy                div    |      ROUNDING_MODE
   *      dividedToIntegerBy       idiv   |      EXPONENTIAL_AT
   *      exponentiatedBy          pow    |      RANGE
   *      integerValue                    |      CRYPTO
   *      isEqualTo                eq     |      MODULO_MODE
   *      isFinite                        |      POW_PRECISION
   *      isGreaterThan            gt     |      FORMAT
   *      isGreaterThanOrEqualTo   gte    |      ALPHABET
   *      isInteger                       |  isBigNumber
   *      isLessThan               lt     |  maximum              max
   *      isLessThanOrEqualTo      lte    |  minimum              min
   *      isNaN                           |  random
   *      isNegative                      |  sum
   *      isPositive                      |
   *      isZero                          |
   *      minus                           |
   *      modulo                   mod    |
   *      multipliedBy             times  |
   *      negated                         |
   *      plus                            |
   *      precision                sd     |
   *      shiftedBy                       |
   *      squareRoot               sqrt   |
   *      toExponential                   |
   *      toFixed                         |
   *      toFormat                        |
   *      toFraction                      |
   *      toJSON                          |
   *      toNumber                        |
   *      toPrecision                     |
   *      toString                        |
   *      valueOf                         |
   *
   */var Cn=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,En=Math.ceil,Fn=Math.floor,Tn="[BigNumber Error] ",Dn=Tn+"Number primitive has more than 15 significant digits: ",In=1e14,Mn=14,An=9007199254740991,wn=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],Ln=1e7,kn=1e9;function Bn(e){var t=0|e;return e>0||e===t?t:t-1}function On(e){for(var t,r,i=1,a=e.length,n=e[0]+"";i<a;){for(t=e[i++]+"",r=Mn-t.length;r--;t="0"+t);n+=t}for(a=n.length;48===n.charCodeAt(--a););return n.slice(0,a+1||1)}function Hn(e,t){var r,i,a=e.c,n=t.c,s=e.s,o=t.s,x=e.e,f=t.e;if(!s||!o)return null;if(r=a&&!a[0],i=n&&!n[0],r||i)return r?i?0:-o:s;if(s!=o)return s;if(r=s<0,i=x==f,!a||!n)return i?0:!a^r?1:-1;if(!i)return x>f^r?1:-1;for(o=(x=a.length)<(f=n.length)?x:f,s=0;s<o;s++)if(a[s]!=n[s])return a[s]>n[s]^r?1:-1;return x==f?0:x>f^r?1:-1}function Nn(e,t,r,i){if(e<t||e>r||e!==Fn(e))throw Error(Tn+(i||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function Vn(e){var t=e.c.length-1;return Bn(e.e/Mn)==t&&e.c[t]%2!=0}function Yn(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function Un(e,t,r){var i,a;if(t<0){for(a=r+".";++t;a+=r);e=a+e}else if(++t>(i=e.length)){for(a=r,t-=i;--t;a+=r);e+=a}else t<i&&(e=e.slice(0,t)+"."+e.slice(t));return e}var Xn,Wn=function e(t){var i,a,n,s,o,x,f,l,h,c,u=F.prototype={constructor:F,toString:null,valueOf:null},_=new F(1),d=20,p=4,m=-7,P=21,y=-1e7,g=1e7,b=!1,S=1,v=0,R={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},C="0123456789abcdefghijklmnopqrstuvwxyz",E=!0;function F(e,t){var r,i,s,o,x,f,l,h,c=this;if(!(c instanceof F))return new F(e,t);if(null==t){if(e&&!0===e._isBigNumber)return c.s=e.s,void(!e.c||e.e>g?c.c=c.e=null:e.e<y?c.c=[c.e=0]:(c.e=e.e,c.c=e.c.slice()));if((f="number"==typeof e)&&0*e==0){if(c.s=1/e<0?(e=-e,-1):1,e===~~e){for(o=0,x=e;x>=10;x/=10,o++);return void(o>g?c.c=c.e=null:(c.e=o,c.c=[e]))}h=String(e)}else{if(!Cn.test(h=String(e)))return n(c,h,f);c.s=45==h.charCodeAt(0)?(h=h.slice(1),-1):1}(o=h.indexOf("."))>-1&&(h=h.replace(".","")),(x=h.search(/e/i))>0?(o<0&&(o=x),o+=+h.slice(x+1),h=h.substring(0,x)):o<0&&(o=h.length)}else{if(Nn(t,2,C.length,"Base"),10==t&&E)return M(c=new F(e),d+c.e+1,p);if(h=String(e),f="number"==typeof e){if(0*e!=0)return n(c,h,f,t);if(c.s=1/e<0?(h=h.slice(1),-1):1,F.DEBUG&&h.replace(/^0\.0*|\./,"").length>15)throw Error(Dn+e)}else c.s=45===h.charCodeAt(0)?(h=h.slice(1),-1):1;for(r=C.slice(0,t),o=x=0,l=h.length;x<l;x++)if(r.indexOf(i=h.charAt(x))<0){if("."==i){if(x>o){o=l;continue}}else if(!s&&(h==h.toUpperCase()&&(h=h.toLowerCase())||h==h.toLowerCase()&&(h=h.toUpperCase()))){s=!0,x=-1,o=0;continue}return n(c,String(e),f,t)}f=!1,(o=(h=a(h,t,10,c.s)).indexOf("."))>-1?h=h.replace(".",""):o=h.length}for(x=0;48===h.charCodeAt(x);x++);for(l=h.length;48===h.charCodeAt(--l););if(h=h.slice(x,++l)){if(l-=x,f&&F.DEBUG&&l>15&&(e>An||e!==Fn(e)))throw Error(Dn+c.s*e);if((o=o-x-1)>g)c.c=c.e=null;else if(o<y)c.c=[c.e=0];else{if(c.e=o,c.c=[],x=(o+1)%Mn,o<0&&(x+=Mn),x<l){for(x&&c.c.push(+h.slice(0,x)),l-=Mn;x<l;)c.c.push(+h.slice(x,x+=Mn));x=Mn-(h=h.slice(x)).length}else x-=l;for(;x--;h+="0");c.c.push(+h)}}else c.c=[c.e=0]}function T(e,t,r,i){var a,n,s,o,x;if(null==r?r=p:Nn(r,0,8),!e.c)return e.toString();if(a=e.c[0],s=e.e,null==t)x=On(e.c),x=1==i||2==i&&(s<=m||s>=P)?Yn(x,s):Un(x,s,"0");else if(n=(e=M(new F(e),t,r)).e,o=(x=On(e.c)).length,1==i||2==i&&(t<=n||n<=m)){for(;o<t;x+="0",o++);x=Yn(x,n)}else if(t-=s,x=Un(x,n,"0"),n+1>o){if(--t>0)for(x+=".";t--;x+="0");}else if((t+=n-o)>0)for(n+1==o&&(x+=".");t--;x+="0");return e.s<0&&a?"-"+x:x}function D(e,t){for(var r,i,a=1,n=new F(e[0]);a<e.length;a++)(!(i=new F(e[a])).s||(r=Hn(n,i))===t||0===r&&n.s===t)&&(n=i);return n}function I(e,t,r){for(var i=1,a=t.length;!t[--a];t.pop());for(a=t[0];a>=10;a/=10,i++);return(r=i+r*Mn-1)>g?e.c=e.e=null:r<y?e.c=[e.e=0]:(e.e=r,e.c=t),e}function M(e,t,r,i){var a,n,s,o,x,f,l,h=e.c,c=wn;if(h){e:{for(a=1,o=h[0];o>=10;o/=10,a++);if((n=t-a)<0)n+=Mn,s=t,x=h[f=0],l=Fn(x/c[a-s-1]%10);else if((f=En((n+1)/Mn))>=h.length){if(!i)break e;for(;h.length<=f;h.push(0));x=l=0,a=1,s=(n%=Mn)-Mn+1}else{for(x=o=h[f],a=1;o>=10;o/=10,a++);l=(s=(n%=Mn)-Mn+a)<0?0:Fn(x/c[a-s-1]%10)}if(i=i||t<0||null!=h[f+1]||(s<0?x:x%c[a-s-1]),i=r<4?(l||i)&&(0==r||r==(e.s<0?3:2)):l>5||5==l&&(4==r||i||6==r&&(n>0?s>0?x/c[a-s]:0:h[f-1])%10&1||r==(e.s<0?8:7)),t<1||!h[0])return h.length=0,i?(t-=e.e+1,h[0]=c[(Mn-t%Mn)%Mn],e.e=-t||0):h[0]=e.e=0,e;if(0==n?(h.length=f,o=1,f--):(h.length=f+1,o=c[Mn-n],h[f]=s>0?Fn(x/c[a-s]%c[s])*o:0),i)for(;;){if(0==f){for(n=1,s=h[0];s>=10;s/=10,n++);for(s=h[0]+=o,o=1;s>=10;s/=10,o++);n!=o&&(e.e++,h[0]==In&&(h[0]=1));break}if(h[f]+=o,h[f]!=In)break;h[f--]=0,o=1}for(n=h.length;0===h[--n];h.pop());}e.e>g?e.c=e.e=null:e.e<y&&(e.c=[e.e=0])}return e}function A(e){var t,r=e.e;return null===r?e.toString():(t=On(e.c),t=r<=m||r>=P?Yn(t,r):Un(t,r,"0"),e.s<0?"-"+t:t)}return F.clone=e,F.ROUND_UP=0,F.ROUND_DOWN=1,F.ROUND_CEIL=2,F.ROUND_FLOOR=3,F.ROUND_HALF_UP=4,F.ROUND_HALF_DOWN=5,F.ROUND_HALF_EVEN=6,F.ROUND_HALF_CEIL=7,F.ROUND_HALF_FLOOR=8,F.EUCLID=9,F.config=F.set=function(e){var t,i;if(null!=e){if("object"!=r(e))throw Error(Tn+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(Nn(i=e[t],0,kn,t),d=i),e.hasOwnProperty(t="ROUNDING_MODE")&&(Nn(i=e[t],0,8,t),p=i),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((i=e[t])&&i.pop?(Nn(i[0],-kn,0,t),Nn(i[1],0,kn,t),m=i[0],P=i[1]):(Nn(i,-kn,kn,t),m=-(P=i<0?-i:i))),e.hasOwnProperty(t="RANGE"))if((i=e[t])&&i.pop)Nn(i[0],-kn,-1,t),Nn(i[1],1,kn,t),y=i[0],g=i[1];else{if(Nn(i,-kn,kn,t),!i)throw Error(Tn+t+" cannot be zero: "+i);y=-(g=i<0?-i:i)}if(e.hasOwnProperty(t="CRYPTO")){if((i=e[t])!==!!i)throw Error(Tn+t+" not true or false: "+i);if(i){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw b=!i,Error(Tn+"crypto unavailable");b=i}else b=i}if(e.hasOwnProperty(t="MODULO_MODE")&&(Nn(i=e[t],0,9,t),S=i),e.hasOwnProperty(t="POW_PRECISION")&&(Nn(i=e[t],0,kn,t),v=i),e.hasOwnProperty(t="FORMAT")){if("object"!=r(i=e[t]))throw Error(Tn+t+" not an object: "+i);R=i}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(i=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(i))throw Error(Tn+t+" invalid: "+i);E="0123456789"==i.slice(0,10),C=i}}return{DECIMAL_PLACES:d,ROUNDING_MODE:p,EXPONENTIAL_AT:[m,P],RANGE:[y,g],CRYPTO:b,MODULO_MODE:S,POW_PRECISION:v,FORMAT:R,ALPHABET:C}},F.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!F.DEBUG)return!0;var t,r,i=e.c,a=e.e,n=e.s;e:if("[object Array]"=={}.toString.call(i)){if((1===n||-1===n)&&a>=-kn&&a<=kn&&a===Fn(a)){if(0===i[0]){if(0===a&&1===i.length)return!0;break e}if((t=(a+1)%Mn)<1&&(t+=Mn),String(i[0]).length==t){for(t=0;t<i.length;t++)if((r=i[t])<0||r>=In||r!==Fn(r))break e;if(0!==r)return!0}}}else if(null===i&&null===a&&(null===n||1===n||-1===n))return!0;throw Error(Tn+"Invalid BigNumber: "+e)},F.maximum=F.max=function(){return D(arguments,-1)},F.minimum=F.min=function(){return D(arguments,1)},F.random=(s=9007199254740992,o=Math.random()*s&2097151?function(){return Fn(Math.random()*s)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,i,a,n,s=0,x=[],f=new F(_);if(null==e?e=d:Nn(e,0,kn),a=En(e/Mn),b)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(a*=2));s<a;)(n=131072*t[s]+(t[s+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[s]=r[0],t[s+1]=r[1]):(x.push(n%1e14),s+=2);s=a/2}else{if(!crypto.randomBytes)throw b=!1,Error(Tn+"crypto unavailable");for(t=crypto.randomBytes(a*=7);s<a;)(n=281474976710656*(31&t[s])+1099511627776*t[s+1]+4294967296*t[s+2]+16777216*t[s+3]+(t[s+4]<<16)+(t[s+5]<<8)+t[s+6])>=9e15?crypto.randomBytes(7).copy(t,s):(x.push(n%1e14),s+=7);s=a/7}if(!b)for(;s<a;)(n=o())<9e15&&(x[s++]=n%1e14);for(a=x[--s],e%=Mn,a&&e&&(n=wn[Mn-e],x[s]=Fn(a/n)*n);0===x[s];x.pop(),s--);if(s<0)x=[i=0];else{for(i=-1;0===x[0];x.splice(0,1),i-=Mn);for(s=1,n=x[0];n>=10;n/=10,s++);s<Mn&&(i-=Mn-s)}return f.e=i,f.c=x,f}),F.sum=function(){for(var e=1,t=arguments,r=new F(t[0]);e<t.length;)r=r.plus(t[e++]);return r},a=function(){var e="0123456789";function t(e,t,r,i){for(var a,n,s=[0],o=0,x=e.length;o<x;){for(n=s.length;n--;s[n]*=t);for(s[0]+=i.indexOf(e.charAt(o++)),a=0;a<s.length;a++)s[a]>r-1&&(null==s[a+1]&&(s[a+1]=0),s[a+1]+=s[a]/r|0,s[a]%=r)}return s.reverse()}return function(r,a,n,s,o){var x,f,l,h,c,u,_,m,P=r.indexOf("."),y=d,g=p;for(P>=0&&(h=v,v=0,r=r.replace(".",""),u=(m=new F(a)).pow(r.length-P),v=h,m.c=t(Un(On(u.c),u.e,"0"),10,n,e),m.e=m.c.length),l=h=(_=t(r,a,n,o?(x=C,e):(x=e,C))).length;0==_[--h];_.pop());if(!_[0])return x.charAt(0);if(P<0?--l:(u.c=_,u.e=l,u.s=s,_=(u=i(u,m,y,g,n)).c,c=u.r,l=u.e),P=_[f=l+y+1],h=n/2,c=c||f<0||null!=_[f+1],c=g<4?(null!=P||c)&&(0==g||g==(u.s<0?3:2)):P>h||P==h&&(4==g||c||6==g&&1&_[f-1]||g==(u.s<0?8:7)),f<1||!_[0])r=c?Un(x.charAt(1),-y,x.charAt(0)):x.charAt(0);else{if(_.length=f,c)for(--n;++_[--f]>n;)_[f]=0,f||(++l,_=[1].concat(_));for(h=_.length;!_[--h];);for(P=0,r="";P<=h;r+=x.charAt(_[P++]));r=Un(r,l,x.charAt(0))}return r}}(),i=function(){function e(e,t,r){var i,a,n,s,o=0,x=e.length,f=t%Ln,l=t/Ln|0;for(e=e.slice();x--;)o=((a=f*(n=e[x]%Ln)+(i=l*n+(s=e[x]/Ln|0)*f)%Ln*Ln+o)/r|0)+(i/Ln|0)+l*s,e[x]=a%r;return o&&(e=[o].concat(e)),e}function t(e,t,r,i){var a,n;if(r!=i)n=r>i?1:-1;else for(a=n=0;a<r;a++)if(e[a]!=t[a]){n=e[a]>t[a]?1:-1;break}return n}function r(e,t,r,i){for(var a=0;r--;)e[r]-=a,a=e[r]<t[r]?1:0,e[r]=a*i+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(i,a,n,s,o){var x,f,l,h,c,u,_,d,p,m,P,y,g,b,S,v,R,C=i.s==a.s?1:-1,E=i.c,T=a.c;if(!(E&&E[0]&&T&&T[0]))return new F(i.s&&a.s&&(E?!T||E[0]!=T[0]:T)?E&&0==E[0]||!T?0*C:C/0:NaN);for(p=(d=new F(C)).c=[],C=n+(f=i.e-a.e)+1,o||(o=In,f=Bn(i.e/Mn)-Bn(a.e/Mn),C=C/Mn|0),l=0;T[l]==(E[l]||0);l++);if(T[l]>(E[l]||0)&&f--,C<0)p.push(1),h=!0;else{for(b=E.length,v=T.length,l=0,C+=2,(c=Fn(o/(T[0]+1)))>1&&(T=e(T,c,o),E=e(E,c,o),v=T.length,b=E.length),g=v,P=(m=E.slice(0,v)).length;P<v;m[P++]=0);R=T.slice(),R=[0].concat(R),S=T[0],T[1]>=o/2&&S++;do{if(c=0,(x=t(T,m,v,P))<0){if(y=m[0],v!=P&&(y=y*o+(m[1]||0)),(c=Fn(y/S))>1)for(c>=o&&(c=o-1),_=(u=e(T,c,o)).length,P=m.length;1==t(u,m,_,P);)c--,r(u,v<_?R:T,_,o),_=u.length,x=1;else 0==c&&(x=c=1),_=(u=T.slice()).length;if(_<P&&(u=[0].concat(u)),r(m,u,P,o),P=m.length,-1==x)for(;t(T,m,v,P)<1;)c++,r(m,v<P?R:T,P,o),P=m.length}else 0===x&&(c++,m=[0]);p[l++]=c,m[0]?m[P++]=E[g]||0:(m=[E[g]],P=1)}while((g++<b||null!=m[0])&&C--);h=null!=m[0],p[0]||p.splice(0,1)}if(o==In){for(l=1,C=p[0];C>=10;C/=10,l++);M(d,n+(d.e=l+f*Mn-1)+1,s,h)}else d.e=f,d.r=+h;return d}}(),x=/^(-?)0([xbo])(?=\w[\w.]*$)/i,f=/^([^.]+)\.$/,l=/^\.([^.]+)$/,h=/^-?(Infinity|NaN)$/,c=/^\s*\+(?=[\w.])|^\s+|\s+$/g,n=function(e,t,r,i){var a,n=r?t:t.replace(c,"");if(h.test(n))e.s=isNaN(n)?null:n<0?-1:1;else{if(!r&&(n=n.replace(x,(function(e,t,r){return a="x"==(r=r.toLowerCase())?16:"b"==r?2:8,i&&i!=a?e:t})),i&&(a=i,n=n.replace(f,"$1").replace(l,"0.$1")),t!=n))return new F(n,a);if(F.DEBUG)throw Error(Tn+"Not a"+(i?" base "+i:"")+" number: "+t);e.s=null}e.c=e.e=null},u.absoluteValue=u.abs=function(){var e=new F(this);return e.s<0&&(e.s=1),e},u.comparedTo=function(e,t){return Hn(this,new F(e,t))},u.decimalPlaces=u.dp=function(e,t){var r,i,a,n=this;if(null!=e)return Nn(e,0,kn),null==t?t=p:Nn(t,0,8),M(new F(n),e+n.e+1,t);if(!(r=n.c))return null;if(i=((a=r.length-1)-Bn(this.e/Mn))*Mn,a=r[a])for(;a%10==0;a/=10,i--);return i<0&&(i=0),i},u.dividedBy=u.div=function(e,t){return i(this,new F(e,t),d,p)},u.dividedToIntegerBy=u.idiv=function(e,t){return i(this,new F(e,t),0,1)},u.exponentiatedBy=u.pow=function(e,t){var r,i,a,n,s,o,x,f,l=this;if((e=new F(e)).c&&!e.isInteger())throw Error(Tn+"Exponent not an integer: "+A(e));if(null!=t&&(t=new F(t)),s=e.e>14,!l.c||!l.c[0]||1==l.c[0]&&!l.e&&1==l.c.length||!e.c||!e.c[0])return f=new F(Math.pow(+A(l),s?e.s*(2-Vn(e)):+A(e))),t?f.mod(t):f;if(o=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new F(NaN);(i=!o&&l.isInteger()&&t.isInteger())&&(l=l.mod(t))}else{if(e.e>9&&(l.e>0||l.e<-1||(0==l.e?l.c[0]>1||s&&l.c[1]>=24e7:l.c[0]<8e13||s&&l.c[0]<=9999975e7)))return n=l.s<0&&Vn(e)?-0:0,l.e>-1&&(n=1/n),new F(o?1/n:n);v&&(n=En(v/Mn+2))}for(s?(r=new F(.5),o&&(e.s=1),x=Vn(e)):x=(a=Math.abs(+A(e)))%2,f=new F(_);;){if(x){if(!(f=f.times(l)).c)break;n?f.c.length>n&&(f.c.length=n):i&&(f=f.mod(t))}if(a){if(0===(a=Fn(a/2)))break;x=a%2}else if(M(e=e.times(r),e.e+1,1),e.e>14)x=Vn(e);else{if(0==(a=+A(e)))break;x=a%2}l=l.times(l),n?l.c&&l.c.length>n&&(l.c.length=n):i&&(l=l.mod(t))}return i?f:(o&&(f=_.div(f)),t?f.mod(t):n?M(f,v,p,void 0):f)},u.integerValue=function(e){var t=new F(this);return null==e?e=p:Nn(e,0,8),M(t,t.e+1,e)},u.isEqualTo=u.eq=function(e,t){return 0===Hn(this,new F(e,t))},u.isFinite=function(){return!!this.c},u.isGreaterThan=u.gt=function(e,t){return Hn(this,new F(e,t))>0},u.isGreaterThanOrEqualTo=u.gte=function(e,t){return 1===(t=Hn(this,new F(e,t)))||0===t},u.isInteger=function(){return!!this.c&&Bn(this.e/Mn)>this.c.length-2},u.isLessThan=u.lt=function(e,t){return Hn(this,new F(e,t))<0},u.isLessThanOrEqualTo=u.lte=function(e,t){return-1===(t=Hn(this,new F(e,t)))||0===t},u.isNaN=function(){return!this.s},u.isNegative=function(){return this.s<0},u.isPositive=function(){return this.s>0},u.isZero=function(){return!!this.c&&0==this.c[0]},u.minus=function(e,t){var r,i,a,n,s=this,o=s.s;if(t=(e=new F(e,t)).s,!o||!t)return new F(NaN);if(o!=t)return e.s=-t,s.plus(e);var x=s.e/Mn,f=e.e/Mn,l=s.c,h=e.c;if(!x||!f){if(!l||!h)return l?(e.s=-t,e):new F(h?s:NaN);if(!l[0]||!h[0])return h[0]?(e.s=-t,e):new F(l[0]?s:3==p?-0:0)}if(x=Bn(x),f=Bn(f),l=l.slice(),o=x-f){for((n=o<0)?(o=-o,a=l):(f=x,a=h),a.reverse(),t=o;t--;a.push(0));a.reverse()}else for(i=(n=(o=l.length)<(t=h.length))?o:t,o=t=0;t<i;t++)if(l[t]!=h[t]){n=l[t]<h[t];break}if(n&&(a=l,l=h,h=a,e.s=-e.s),(t=(i=h.length)-(r=l.length))>0)for(;t--;l[r++]=0);for(t=In-1;i>o;){if(l[--i]<h[i]){for(r=i;r&&!l[--r];l[r]=t);--l[r],l[i]+=In}l[i]-=h[i]}for(;0==l[0];l.splice(0,1),--f);return l[0]?I(e,l,f):(e.s=3==p?-1:1,e.c=[e.e=0],e)},u.modulo=u.mod=function(e,t){var r,a,n=this;return e=new F(e,t),!n.c||!e.s||e.c&&!e.c[0]?new F(NaN):!e.c||n.c&&!n.c[0]?new F(n):(9==S?(a=e.s,e.s=1,r=i(n,e,0,3),e.s=a,r.s*=a):r=i(n,e,0,S),(e=n.minus(r.times(e))).c[0]||1!=S||(e.s=n.s),e)},u.multipliedBy=u.times=function(e,t){var r,i,a,n,s,o,x,f,l,h,c,u,_,d,p,m=this,P=m.c,y=(e=new F(e,t)).c;if(!(P&&y&&P[0]&&y[0]))return!m.s||!e.s||P&&!P[0]&&!y||y&&!y[0]&&!P?e.c=e.e=e.s=null:(e.s*=m.s,P&&y?(e.c=[0],e.e=0):e.c=e.e=null),e;for(i=Bn(m.e/Mn)+Bn(e.e/Mn),e.s*=m.s,(x=P.length)<(h=y.length)&&(_=P,P=y,y=_,a=x,x=h,h=a),a=x+h,_=[];a--;_.push(0));for(d=In,p=Ln,a=h;--a>=0;){for(r=0,c=y[a]%p,u=y[a]/p|0,n=a+(s=x);n>a;)r=((f=c*(f=P[--s]%p)+(o=u*f+(l=P[s]/p|0)*c)%p*p+_[n]+r)/d|0)+(o/p|0)+u*l,_[n--]=f%d;_[n]=r}return r?++i:_.splice(0,1),I(e,_,i)},u.negated=function(){var e=new F(this);return e.s=-e.s||null,e},u.plus=function(e,t){var r,i=this,a=i.s;if(t=(e=new F(e,t)).s,!a||!t)return new F(NaN);if(a!=t)return e.s=-t,i.minus(e);var n=i.e/Mn,s=e.e/Mn,o=i.c,x=e.c;if(!n||!s){if(!o||!x)return new F(a/0);if(!o[0]||!x[0])return x[0]?e:new F(o[0]?i:0*a)}if(n=Bn(n),s=Bn(s),o=o.slice(),a=n-s){for(a>0?(s=n,r=x):(a=-a,r=o),r.reverse();a--;r.push(0));r.reverse()}for((a=o.length)-(t=x.length)<0&&(r=x,x=o,o=r,t=a),a=0;t;)a=(o[--t]=o[t]+x[t]+a)/In|0,o[t]=In===o[t]?0:o[t]%In;return a&&(o=[a].concat(o),++s),I(e,o,s)},u.precision=u.sd=function(e,t){var r,i,a,n=this;if(null!=e&&e!==!!e)return Nn(e,1,kn),null==t?t=p:Nn(t,0,8),M(new F(n),e,t);if(!(r=n.c))return null;if(i=(a=r.length-1)*Mn+1,a=r[a]){for(;a%10==0;a/=10,i--);for(a=r[0];a>=10;a/=10,i++);}return e&&n.e+1>i&&(i=n.e+1),i},u.shiftedBy=function(e){return Nn(e,-9007199254740991,An),this.times("1e"+e)},u.squareRoot=u.sqrt=function(){var e,t,r,a,n,s=this,o=s.c,x=s.s,f=s.e,l=d+4,h=new F("0.5");if(1!==x||!o||!o[0])return new F(!x||x<0&&(!o||o[0])?NaN:o?s:1/0);if(0==(x=Math.sqrt(+A(s)))||x==1/0?(((t=On(o)).length+f)%2==0&&(t+="0"),x=Math.sqrt(+t),f=Bn((f+1)/2)-(f<0||f%2),r=new F(t=x==1/0?"5e"+f:(t=x.toExponential()).slice(0,t.indexOf("e")+1)+f)):r=new F(x+""),r.c[0])for((x=(f=r.e)+l)<3&&(x=0);;)if(n=r,r=h.times(n.plus(i(s,n,l,1))),On(n.c).slice(0,x)===(t=On(r.c)).slice(0,x)){if(r.e<f&&--x,"9999"!=(t=t.slice(x-3,x+1))&&(a||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(M(r,r.e+d+2,1),e=!r.times(r).eq(s));break}if(!a&&(M(n,n.e+d+2,0),n.times(n).eq(s))){r=n;break}l+=4,x+=4,a=1}return M(r,r.e+d+1,p,e)},u.toExponential=function(e,t){return null!=e&&(Nn(e,0,kn),e++),T(this,e,t,1)},u.toFixed=function(e,t){return null!=e&&(Nn(e,0,kn),e=e+this.e+1),T(this,e,t)},u.toFormat=function(e,t,i){var a,n=this;if(null==i)null!=e&&t&&"object"==r(t)?(i=t,t=null):e&&"object"==r(e)?(i=e,e=t=null):i=R;else if("object"!=r(i))throw Error(Tn+"Argument not an object: "+i);if(a=n.toFixed(e,t),n.c){var s,o=a.split("."),x=+i.groupSize,f=+i.secondaryGroupSize,l=i.groupSeparator||"",h=o[0],c=o[1],u=n.s<0,_=u?h.slice(1):h,d=_.length;if(f&&(s=x,x=f,f=s,d-=s),x>0&&d>0){for(s=d%x||x,h=_.substr(0,s);s<d;s+=x)h+=l+_.substr(s,x);f>0&&(h+=l+_.slice(s)),u&&(h="-"+h)}a=c?h+(i.decimalSeparator||"")+((f=+i.fractionGroupSize)?c.replace(new RegExp("\\d{"+f+"}\\B","g"),"$&"+(i.fractionGroupSeparator||"")):c):h}return(i.prefix||"")+a+(i.suffix||"")},u.toFraction=function(e){var t,r,a,n,s,o,x,f,l,h,c,u,d=this,m=d.c;if(null!=e&&(!(x=new F(e)).isInteger()&&(x.c||1!==x.s)||x.lt(_)))throw Error(Tn+"Argument "+(x.isInteger()?"out of range: ":"not an integer: ")+A(x));if(!m)return new F(d);for(t=new F(_),l=r=new F(_),a=f=new F(_),u=On(m),s=t.e=u.length-d.e-1,t.c[0]=wn[(o=s%Mn)<0?Mn+o:o],e=!e||x.comparedTo(t)>0?s>0?t:l:x,o=g,g=1/0,x=new F(u),f.c[0]=0;h=i(x,t,0,1),1!=(n=r.plus(h.times(a))).comparedTo(e);)r=a,a=n,l=f.plus(h.times(n=l)),f=n,t=x.minus(h.times(n=t)),x=n;return n=i(e.minus(r),a,0,1),f=f.plus(n.times(l)),r=r.plus(n.times(a)),f.s=l.s=d.s,c=i(l,a,s*=2,p).minus(d).abs().comparedTo(i(f,r,s,p).minus(d).abs())<1?[l,a]:[f,r],g=o,c},u.toNumber=function(){return+A(this)},u.toPrecision=function(e,t){return null!=e&&Nn(e,1,kn),T(this,e,t,2)},u.toString=function(e){var t,r=this,i=r.s,n=r.e;return null===n?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=n<=m||n>=P?Yn(On(r.c),n):Un(On(r.c),n,"0"):10===e&&E?t=Un(On((r=M(new F(r),d+n+1,p)).c),r.e,"0"):(Nn(e,2,C.length,"Base"),t=a(Un(On(r.c),n,"0"),10,e,i,!0)),i<0&&r.c[0]&&(t="-"+t)),t},u.valueOf=u.toJSON=function(){return A(this)},u._isBigNumber=!0,u[Symbol.toStringTag]="BigNumber",u[Symbol.for("nodejs.util.inspect.custom")]=u.valueOf,null!=t&&F.set(t),F}();function Gn(e){var t;return null!==(t=Xn[e])&&void 0!==t?t:Xn.default}!function(e){e[e.up=Wn.ROUND_UP]="up",e[e.down=Wn.ROUND_DOWN]="down",e[e.truncate=Wn.ROUND_DOWN]="truncate",e[e.halfUp=Wn.ROUND_HALF_UP]="halfUp",e[e.default=Wn.ROUND_HALF_UP]="default",e[e.halfDown=Wn.ROUND_HALF_DOWN]="halfDown",e[e.halfEven=Wn.ROUND_HALF_EVEN]="halfEven",e[e.banker=Wn.ROUND_HALF_EVEN]="banker",e[e.ceiling=Wn.ROUND_CEIL]="ceiling",e[e.ceil=Wn.ROUND_CEIL]="ceil",e[e.floor=Wn.ROUND_FLOOR]="floor"}(Xn||(Xn={}));var Jn=Math.floor,Zn=/\s/,jn=/^\s+/,zn=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&Zn.test(e.charAt(t)););return t}(e)+1).replace(jn,""):e},qn=W,$n=H,Kn=/^[-+]0x[0-9a-f]+$/i,Qn=/^0b[01]+$/i,es=/^0o[0-7]+$/i,ts=parseInt,rs=1/0,is=function(e){return e?(e=function(e){if("number"==typeof e)return e;if($n(e))return NaN;if(qn(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=qn(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=zn(e);var r=Qn.test(e);return r||es.test(e)?ts(e.slice(2),r?2:8):Kn.test(e)?NaN:+e}(e))===rs||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0},as=is,ns=Gi,ss=rt,os=m((function(e,t,r){return t=(r?ns(e,t,r):void 0===t)?1:function(e){var t=as(e),r=t%1;return t==t?r?t-r:t:0}(t),function(e,t){var r="";if(!e||t<1||t>9007199254740991)return r;do{t%2&&(r+=e),(t=Jn(t/2))&&(e+=e)}while(t);return r}(ss(e),t)}));function xs(e,t){var r=function(e,t){var r=t.precision;return t.significant&&null!==r&&r>0?r-function(e){return e.isZero()?1:Math.floor(Math.log10(e.abs().toNumber())+1)}(e):r}(e,t);if(null===r)return e.toString();var i=Gn(t.roundMode);if(r>=0)return e.toFixed(r,i);var a=Math.pow(10,Math.abs(r));return(e=new Wn(e.div(a).toFixed(0,i)).times(a)).toString()}function fs(e,t){var r,i,a,n=new Wn(e);if(t.raise&&!n.isFinite())throw new Error('"'.concat(e,'" is not a valid numeric value'));var s,x=xs(n,t),f=new Wn(x),l=f.lt(0),h=f.isZero(),c=o(x.split("."),2),u=c[0],_=c[1],d=[],p=null!==(r=t.format)&&void 0!==r?r:"%n",m=null!==(i=t.negativeFormat)&&void 0!==i?i:"-".concat(p),P=l&&!h?m:p;for(u=u.replace("-","");u.length>0;)d.unshift(u.substr(Math.max(0,u.length-3),3)),u=u.substr(0,u.length-3);return u=d.join(""),s=d.join(t.delimiter),_=t.significant?function(e){var t=e.significand,r=e.whole,i=e.precision;if("0"===r||null===i)return t;var a=Math.max(0,i-r.length);return(null!=t?t:"").substr(0,a)}({whole:u,significand:_,precision:t.precision}):null!=_?_:os("0",null!==(a=t.precision)&&void 0!==a?a:0),t.stripInsignificantZeros&&_&&(_=_.replace(/0+$/,"")),n.isNaN()&&(s=e.toString()),_&&n.isFinite()&&(s+=(t.separator||".")+_),function(e,t){var r=t.formattedNumber,i=t.unit;return e.replace("%n",r).replace("%u",i)}(P,{formattedNumber:s,unit:t.unit})}function ls(e,t,r){var i="";return(t instanceof String||"string"==typeof t)&&(i=t),t instanceof Array&&(i=t.join(e.defaultSeparator)),r.scope&&(i=[r.scope,i].join(e.defaultSeparator)),i}function hs(e){var t,i;if(null===e)return"null";var a=r(e);return"object"!==a?a:(null===(i=null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)||void 0===i?void 0:i.toLowerCase())||"object"}function cs(e,t,r){r=Object.keys(r).reduce((function(t,i){return t[e.transformKey(i)]=r[i],t}),{});var i=t.match(e.placeholder);if(!i)return t;for(;i.length;){var a,n=i.shift(),s=n.replace(e.placeholder,"$1");a=Rn(r[s])?r[s].toString().replace(/\$/gm,"_#$#_"):s in r?e.nullPlaceholder(e,n,t,r):e.missingPlaceholder(e,n,t,r);var o=new RegExp(n.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}"));t=t.replace(o,a)}return t.replace(/_#\$#_/g,"$")}function us(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a="locale"in(i=Object.assign({},i))?i.locale:e.locale,n=hs(a),s=e.locales.get("string"===n?a:r(a)).slice(),o=ls(e,t,i).split(e.defaultSeparator).map((function(t){return e.transformKey(t)})),x=s.map((function(t){return o.reduce((function(e,t){return e&&e[t]}),e.translations[t])}));return x.push(i.defaultValue),x.find((function(e){return Rn(e)}))}var _s=function(e,t){for(var r=-1,i=t.length,a=e.length;++r<i;)e[a+r]=t[r];return e},ds=Rt,ps=y,ms=C?C.isConcatSpreadable:void 0,Ps=_s,ys=function(e){return ps(e)||ds(e)||!!(ms&&e&&e[ms])},gs=Ki,bs=function(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1},Ss=ea,vs=function(e,t,r,i,a,n){var s=1&r,o=e.length,x=t.length;if(o!=x&&!(s&&x>o))return!1;var f=n.get(e),l=n.get(t);if(f&&l)return f==t&&l==e;var h=-1,c=!0,u=2&r?new gs:void 0;for(n.set(e,t),n.set(t,e);++h<o;){var _=e[h],d=t[h];if(i)var p=s?i(d,_,h,t,e,n):i(_,d,h,e,t,n);if(void 0!==p){if(p)continue;c=!1;break}if(u){if(!bs(t,(function(e,t){if(!Ss(u,t)&&(_===e||a(_,e,r,i,n)))return u.push(t)}))){c=!1;break}}else if(_!==d&&!a(_,d,r,i,n)){c=!1;break}}return n.delete(e),n.delete(t),c},Rs=tr,Cs=be,Es=vs,Fs=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,i){r[++t]=[i,e]})),r},Ts=ra,Ds=C?C.prototype:void 0,Is=Ds?Ds.valueOf:void 0,Ms=_s,As=y,ws=Object.prototype.propertyIsEnumerable,Ls=Object.getOwnPropertySymbols,ks=Ls?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,i=null==e?0:e.length,a=0,n=[];++r<i;){var s=e[r];t(s,r,e)&&(n[a++]=s)}return n}(Ls(e),(function(t){return ws.call(e,t)})))}:function(){return[]},Bs=sr(Object.keys,Object),Os=fr,Hs=Bs,Ns=Object.prototype.hasOwnProperty,Vs=Qr,Ys=dr,Us=function(e){return Ys(e)?Vs(e):function(e){if(!Os(e))return Hs(e);var t=[];for(var r in Object(e))Ns.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)},Xs=function(e,t,r){var i=t(e);return As(e)?i:Ms(i,r(e))},Ws=ks,Gs=Us,Js=function(e){return Xs(e,Gs,Ws)},Zs=Object.prototype.hasOwnProperty,js=xe(R,"DataView"),zs=Ae,qs=xe(R,"Promise"),$s=ta,Ks=xe(R,"WeakMap"),Qs=L,eo=$,to="[object Map]",ro="[object Promise]",io="[object Set]",ao="[object WeakMap]",no="[object DataView]",so=eo(js),oo=eo(zs),xo=eo(qs),fo=eo($s),lo=eo(Ks),ho=Qs;(js&&ho(new js(new ArrayBuffer(1)))!=no||zs&&ho(new zs)!=to||qs&&ho(qs.resolve())!=ro||$s&&ho(new $s)!=io||Ks&&ho(new Ks)!=ao)&&(ho=function(e){var t=Qs(e),r="[object Object]"==t?e.constructor:void 0,i=r?eo(r):"";if(i)switch(i){case so:return no;case oo:return to;case xo:return ro;case fo:return io;case lo:return ao}return t});var co=Wt,uo=vs,_o=function(e,t,r,i,a,n,s){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!n(new Rs(e),new Rs(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Cs(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var o=Fs;case"[object Set]":var x=1&i;if(o||(o=Ts),e.size!=t.size&&!x)return!1;var f=s.get(e);if(f)return f==t;i|=2,s.set(e,t);var l=Es(o(e),o(t),i,a,n,s);return s.delete(e),l;case"[object Symbol]":if(Is)return Is.call(e)==Is.call(t)}return!1},po=function(e,t,r,i,a,n){var s=1&r,o=Js(e),x=o.length;if(x!=Js(t).length&&!s)return!1;for(var f=x;f--;){var l=o[f];if(!(s?l in t:Zs.call(t,l)))return!1}var h=n.get(e),c=n.get(t);if(h&&c)return h==t&&c==e;var u=!0;n.set(e,t),n.set(t,e);for(var _=s;++f<x;){var d=e[l=o[f]],p=t[l];if(i)var m=s?i(p,d,l,t,e,n):i(d,p,l,e,t,n);if(!(void 0===m?d===p||a(d,p,r,i,n):m)){u=!1;break}_||(_="constructor"==l)}if(u&&!_){var P=e.constructor,y=t.constructor;P==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof P&&P instanceof P&&"function"==typeof y&&y instanceof y||(u=!1)}return n.delete(e),n.delete(t),u},mo=ho,Po=y,yo=gr,go=Nr,bo="[object Arguments]",So="[object Array]",vo="[object Object]",Ro=Object.prototype.hasOwnProperty,Co=k,Eo=function e(t,r,i,a,n){return t===r||(null==t||null==r||!Co(t)&&!Co(r)?t!=t&&r!=r:function(e,t,r,i,a,n){var s=Po(e),o=Po(t),x=s?So:mo(e),f=o?So:mo(t),l=(x=x==bo?vo:x)==vo,h=(f=f==bo?vo:f)==vo,c=x==f;if(c&&yo(e)){if(!yo(t))return!1;s=!0,l=!1}if(c&&!l)return n||(n=new co),s||go(e)?uo(e,t,r,i,a,n):_o(e,t,x,r,i,a,n);if(!(1&r)){var u=l&&Ro.call(e,"__wrapped__"),_=h&&Ro.call(t,"__wrapped__");if(u||_){var d=u?e.value():e,p=_?t.value():t;return n||(n=new co),a(d,p,r,i,n)}}return!!c&&(n||(n=new co),po(e,t,r,i,a,n))}(t,r,i,a,e,n))},Fo=Wt,To=Eo,Do=W,Io=function(e){return e==e&&!Do(e)},Mo=Io,Ao=Us,wo=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}},Lo=wo,ko=function(e,t){return null!=e&&t in Object(e)},Bo=Lt,Oo=Eo,Ho=_t,No=X,Vo=Io,Yo=wo,Uo=ft,Xo=ct,Wo=X,Go=ft,Jo=function(e){var t=function(e){for(var t=Ao(e),r=t.length;r--;){var i=t[r],a=e[i];t[r]=[i,a,Mo(a)]}return t}(e);return 1==t.length&&t[0][2]?Lo(t[0][0],t[0][1]):function(r){return r===e||function(e,t,r,i){var a=r.length,n=a,s=!i;if(null==e)return!n;for(e=Object(e);a--;){var o=r[a];if(s&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++a<n;){var x=(o=r[a])[0],f=e[x],l=o[1];if(s&&o[2]){if(void 0===f&&!(x in e))return!1}else{var h=new Fo;if(i)var c=i(f,l,x,e,t,h);if(!(void 0===c?To(l,f,3,i,h):c))return!1}}return!0}(r,e,t)}},Zo=function(e,t){return No(e)&&Vo(t)?Yo(Uo(e),t):function(r){var i=Ho(r,e);return void 0===i&&i===t?function(e,t){return null!=e&&Bo(e,t,ko)}(r,e):Oo(t,i,3)}},jo=Ii,zo=y,qo=function(e){return Wo(e)?function(e){return function(t){return null==t?void 0:t[e]}}(Go(e)):function(e){return function(t){return Xo(t,e)}}(e)},$o=Kt,Ko=Us,Qo=dr,ex=function(e,t){if(null==e)return e;if(!Qo(e))return function(e,t){return e&&$o(e,t,Ko)}(e,t);for(var r=e.length,i=-1,a=Object(e);++i<r&&!1!==t(a[i],i,a););return e},tx=dr,rx=H,ix=function(e,t){if(e!==t){var r=void 0!==e,i=null===e,a=e==e,n=rx(e),s=void 0!==t,o=null===t,x=t==t,f=rx(t);if(!o&&!f&&!n&&e>t||n&&s&&x&&!o&&!f||i&&s&&x||!r&&x||!a)return 1;if(!i&&!n&&!f&&e<t||f&&r&&a&&!i&&!n||o&&r&&a||!s&&a||!x)return-1}return 0},ax=ze,nx=ct,sx=function(e){return"function"==typeof e?e:null==e?jo:"object"==r(e)?zo(e)?Zo(e[0],e[1]):Jo(e):qo(e)},ox=wr,xx=Ii,fx=y,lx=function e(t,r,i,a,n){var s=-1,o=t.length;for(i||(i=ys),n||(n=[]);++s<o;){var x=t[s];r>0&&i(x)?r>1?e(x,r-1,i,a,n):Ps(n,x):a||(n[n.length]=x)}return n},hx=function(e,t,r){t=t.length?ax(t,(function(e){return fx(e)?function(t){return nx(t,1===e.length?e[0]:e)}:e})):[xx];var i=-1;t=ax(t,ox(sx));var a=function(e,t){var r=-1,i=tx(e)?Array(e.length):[];return ex(e,(function(e,a,n){i[++r]=t(e,a,n)})),i}(e,(function(e,r,a){return{criteria:ax(t,(function(t){return t(e)})),index:++i,value:e}}));return function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(a,(function(e,t){return function(e,t,r){for(var i=-1,a=e.criteria,n=t.criteria,s=a.length,o=r.length;++i<s;){var x=ix(a[i],n[i]);if(x)return i>=o?x:x*("desc"==r[i]?-1:1)}return e.index-t.index}(e,t,r)}))},cx=Gi,ux=m(Vi((function(e,t){if(null==e)return[];var r=t.length;return r>1&&cx(e,t[0],t[1])?t=[]:r>2&&cx(t[0],t[1],t[2])&&(t=[t[0]]),hx(e,lx(t,1),[])}))),_x=Wr,dx={0:"unit",1:"ten",2:"hundred",3:"thousand",6:"million",9:"billion",12:"trillion",15:"quadrillion","-1":"deci","-2":"centi","-3":"mili","-6":"micro","-9":"nano","-12":"pico","-15":"femto"},px=m((function(e,t){return function(e,t,r){for(var i=-1,a=e.length,n=t.length,s={};++i<a;){var o=i<n?t[i]:void 0;r(s,e[i],o)}return s}(e||[],t||[],_x)}))(Object.values(dx),Object.keys(dx).map((function(e){return parseInt(e,10)})));var mx=["byte","kb","mb","gb","tb","pb","eb"];function Px(e){if(e instanceof Date)return e;if("number"==typeof e){var t=new Date;return t.setTime(e),t}var r=new String(e).match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})(?:[.,](\d{1,3}))?)?(Z|\+00:?00)?/);if(r){var i=r.slice(1,8).map((function(e){return parseInt(e,10)||0}));i[1]-=1;var a=o(i,7),n=a[0],s=a[1],x=a[2],f=a[3],l=a[4],h=a[5],c=a[6];return r[8]?new Date(Date.UTC(n,s,x,f,l,h,c)):new Date(n,s,x,f,l,h,c)}e.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)&&(new Date).setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" ")));var u=new Date;return u.setTime(Date.parse(e)),u}function yx(e){var t,i,a=e.i18n,n=e.count,s=e.scope,o=e.options,x=e.baseScope;if(o=Object.assign({},o),!(t="object"==r(s)&&s?s:us(a,s,o)))return a.missingTranslation.get(s,o);for(var f=a.pluralization.get(o.locale)(a,n),l=[];f.length;){var h=f.shift();if(Rn(t[h])){i=t[h];break}l.push(h)}return Rn(i)?(o.count=n,a.interpolate(a,i,o)):a.missingTranslation.get(x.split(a.defaultSeparator).concat([l[0]]),o)}var gx={meridian:{am:"AM",pm:"PM"},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbrDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbrMonthNames:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},bx=Math.ceil,Sx=Math.max,vx=Gi,Rx=is,Cx=m((function(e,t,r){return r&&"number"!=typeof r&&vx(e,t,r)&&(t=r=void 0),e=Rx(e),void 0===t?(t=e,e=0):t=Rx(t),function(e,t,r,i){for(var a=-1,n=Sx(bx((t-e)/(r||1)),0),s=Array(n);n--;)s[i?n:++a]=e,e+=r;return s}(e,t,r=void 0===r?e<t?1:-1:Rx(r),void 0)})),Ex=function(e,t,r){return r>=e&&r<=t},Fx=function(e,t){t instanceof Array&&(t=t.join(e.defaultSeparator));var r=t.split(e.defaultSeparator).slice(-1)[0];return e.missingTranslationPrefix+r.replace("_"," ").replace(/([a-z])([A-Z])/g,(function(e,t,r){return"".concat(t," ").concat(r.toLowerCase())}))},Tx=function(e,t,r){var i=ls(e,t,r),a="locale"in r?r.locale:e.locale,n=hs(a);return'[missing "'.concat(["string"==n?a:n,i].join(e.defaultSeparator),'" translation]')},Dx=function(e,t,r){var i=ls(e,t,r),a=[e.locale,i].join(e.defaultSeparator);throw new Error("Missing translation: ".concat(a))},Ix=function(){function e(t){a(this,e),this.i18n=t,this.registry={},this.register("guess",Fx),this.register("message",Tx),this.register("error",Dx)}return s(e,[{key:"register",value:function(e,t){this.registry[e]=t}},{key:"get",value:function(e,t){var r;return this.registry[null!==(r=t.missingBehavior)&&void 0!==r?r:this.i18n.missingBehavior](this.i18n,e,t)}}]),e}(),Mx={defaultLocale:"en",availableLocales:["en"],locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,enableFallback:!1,missingBehavior:"message",missingTranslationPrefix:"",missingPlaceholder:function(e,t){return'[missing "'.concat(t,'" value]')},nullPlaceholder:function(e,t,r,i){return e.missingPlaceholder(e,t,r,i)},transformKey:function(e){return e}},Ax=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,t),this._locale=Mx.locale,this._defaultLocale=Mx.defaultLocale,this._version=0,this.onChangeHandlers=[],this.translations={},this.availableLocales=[],this.t=this.translate,this.p=this.pluralize,this.l=this.localize,this.distanceOfTimeInWords=this.timeAgoInWords;var i=Object.assign(Object.assign({},Mx),r),n=i.locale,s=i.enableFallback,o=i.missingBehavior,x=i.missingTranslationPrefix,f=i.missingPlaceholder,l=i.nullPlaceholder,h=i.defaultLocale,c=i.defaultSeparator,u=i.placeholder,_=i.transformKey;this.locale=n,this.defaultLocale=h,this.defaultSeparator=c,this.enableFallback=s,this.locale=n,this.missingBehavior=o,this.missingTranslationPrefix=x,this.missingPlaceholder=f,this.nullPlaceholder=l,this.placeholder=u,this.pluralization=new da(this),this.locales=new ua(this),this.missingTranslation=new Ix(this),this.transformKey=_,this.interpolate=cs,this.store(e)}return s(t,[{key:"store",value:function(e){zi(this.translations,e),this.hasChanged()}},{key:"locale",get:function(){return this._locale||this.defaultLocale||"en"},set:function(e){if("string"!=typeof e)throw new Error("Expected newLocale to be a string; got ".concat(hs(e)));var t=this._locale!==e;this._locale=e,t&&this.hasChanged()}},{key:"defaultLocale",get:function(){return this._defaultLocale||"en"},set:function(e){if("string"!=typeof e)throw new Error("Expected newLocale to be a string; got ".concat(hs(e)));var t=this._defaultLocale!==e;this._defaultLocale=e,t&&this.hasChanged()}},{key:"translate",value:function(e,t){var i,a=this,n=function(e,t,r){var i=[{scope:t}];if(Rn(r.defaults)&&(i=i.concat(r.defaults)),Rn(r.defaultValue)){var a="function"==typeof r.defaultValue?r.defaultValue(e,t,r):r.defaultValue;i.push({message:a}),delete r.defaultValue}return i}(this,e,t=Object.assign({},t));return n.some((function(e){return Rn(e.scope)?i=us(a,e.scope,t):Rn(e.message)&&(i=e.message),null!=i}))?("string"==typeof i?i=this.interpolate(this,i,t):"object"==r(i)&&i&&Rn(t.count)&&(i=yx({i18n:this,count:t.count||0,scope:i,options:t,baseScope:ls(this,e,t)})),t&&i instanceof Array&&(i=i.map((function(e){return"string"==typeof e?cs(a,e,t):e}))),i):this.missingTranslation.get(e,t)}},{key:"pluralize",value:function(e,t,r){return yx({i18n:this,count:e,scope:t,options:Object.assign({},r),baseScope:ls(this,t,null!=r?r:{})})}},{key:"localize",value:function(e,t,r){if(r=Object.assign({},r),null==t)return"";switch(e){case"currency":return this.numberToCurrency(t);case"number":return fs(t,Object.assign({delimiter:",",precision:3,separator:".",significant:!1,stripInsignificantZeros:!1},us(this,"number.format")));case"percentage":return this.numberToPercentage(t);default:return cs(this,e.match(/^(date|time)/)?this.toTime(e,t):t.toString(),r)}}},{key:"toTime",value:function(e,t){var r=Px(t),i=us(this,e);return r.toString().match(/invalid/i)?r.toString():i?this.strftime(r,i):r.toString()}},{key:"numberToCurrency",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fs(e,Object.assign(Object.assign(Object.assign({delimiter:",",format:"%u%n",precision:2,separator:".",significant:!1,stripInsignificantZeros:!1,unit:"$"},vn(this.get("number.format"))),vn(this.get("number.currency.format"))),t))}},{key:"numberToPercentage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fs(e,Object.assign(Object.assign(Object.assign({delimiter:"",format:"%n%",precision:3,stripInsignificantZeros:!1,separator:".",significant:!1},vn(this.get("number.format"))),vn(this.get("number.percentage.format"))),t))}},{key:"numberToHumanSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t,r){var i,a=Gn(r.roundMode),n=1024,s=new Wn(t).abs(),o=s.lt(n),x=function(e,t){var r=mx.length-1,i=new Wn(Math.log(e.toNumber())).div(Math.log(n)).integerValue(Wn.ROUND_DOWN).toNumber();return Math.min(r,i)}(s);i=o?s.integerValue():new Wn(xs(s.div(Math.pow(n,x)),{significant:r.significant,precision:r.precision,roundMode:r.roundMode}));var f=e.translate("number.human.storage_units.format",{defaultValue:"%n %u"}),l=e.translate("number.human.storage_units.units.".concat(o?"byte":mx[x]),{count:s.integerValue().toNumber()}),h=i.toFixed(r.precision,a);return r.stripInsignificantZeros&&(h=h.replace(/(\..*?)0+$/,"$1").replace(/\.$/,"")),f.replace("%n",h).replace("%u",l)}(this,e,Object.assign(Object.assign(Object.assign({delimiter:"",precision:3,significant:!0,stripInsignificantZeros:!0,units:{billion:"Billion",million:"Million",quadrillion:"Quadrillion",thousand:"Thousand",trillion:"Trillion",unit:""}},vn(this.get("number.human.format"))),vn(this.get("number.human.storage_units"))),t))}},{key:"numberToHuman",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t,r){var i,a={roundMode:r.roundMode,precision:r.precision,significant:r.significant};if("string"===hs(r.units)){var n=r.units;if(!(i=us(e,n)))throw new Error('The scope "'.concat(e.locale).concat(e.defaultSeparator).concat(ls(e,n,{}),"\" couldn't be found"))}else i=r.units;var s=xs(new Wn(t),a),x=function(e,t){var r=e.isZero()?0:Math.floor(Math.log10(e.abs().toNumber()));return function(e){return ux(Object.keys(e).map((function(e){return px[e]})),(function(e){return-1*e}))}(t).find((function(e){return r>=e}))||0}(new Wn(s),i),f=function(e,t){return e[dx[t.toString()]]||""}(i,x);if(s=xs(new Wn(s).div(Math.pow(10,x)),a),r.stripInsignificantZeros){var l=o(s.split("."),2),h=l[0],c=l[1];s=h,(c=(c||"").replace(/0+$/,""))&&(s+="".concat(r.separator).concat(c))}return r.format.replace("%n",s||"0").replace("%u",f).trim()}(this,e,Object.assign(Object.assign(Object.assign({delimiter:"",separator:".",precision:3,significant:!0,stripInsignificantZeros:!0,format:"%n %u",roundMode:"default",units:{billion:"Billion",million:"Million",quadrillion:"Quadrillion",thousand:"Thousand",trillion:"Trillion",unit:""}},vn(this.get("number.human.format"))),vn(this.get("number.human.decimal_units"))),t))}},{key:"numberToRounded",value:function(e,t){return fs(e,Object.assign({unit:"",precision:3,significant:!1,separator:".",delimiter:"",stripInsignificantZeros:!1},t))}},{key:"numberToDelimited",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){var r=new Wn(e);if(!r.isFinite())return e.toString();if(!t.delimiterPattern.global)throw new Error("options.delimiterPattern must be a global regular expression; received ".concat(t.delimiterPattern));var i=o(r.toString().split("."),2),a=i[0],n=i[1];return a=a.replace(t.delimiterPattern,(function(e){return"".concat(e).concat(t.delimiter)})),[a,n].filter(Boolean).join(t.separator)}(e,Object.assign({delimiterPattern:/(\d)(?=(\d\d\d)+(?!\d))/g,delimiter:",",separator:"."},t))}},{key:"withLocale",value:function(t,r){return function(e,t,r,i){return new(r||(r=Promise))((function(a,n){function s(e){try{x(i.next(e))}catch(e){n(e)}}function o(e){try{x(i.throw(e))}catch(e){n(e)}}function x(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,o)}x((i=i.apply(e,t||[])).next())}))}(this,void 0,void 0,e().mark((function i(){var a;return e().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.locale,e.prev=1,this.locale=t,e.next=5,r();case 5:return e.prev=5,this.locale=a,e.finish(5);case 8:case"end":return e.stop()}}),i,this,[[1,,5,8]])})))}},{key:"strftime",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object.assign(Object.assign({},gx),r),a=i.abbrDayNames,n=i.dayNames,s=i.abbrMonthNames,o=i.monthNames,x=i.meridian;if(isNaN(e.getTime()))throw new Error("strftime() requires a valid date object, but received an invalid date.");var f=e.getDay(),l=e.getDate(),h=e.getFullYear(),c=e.getMonth()+1,u=e.getHours(),_=u,d=u>11?"pm":"am",p=e.getSeconds(),m=e.getMinutes(),P=e.getTimezoneOffset(),y=Math.floor(Math.abs(P/60)),g=Math.abs(P)-60*y,b=(P>0?"-":"+")+(y.toString().length<2?"0"+y:y)+(g.toString().length<2?"0"+g:g);return _>12?_-=12:0===_&&(_=12),(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%a",a[f])).replace("%A",n[f])).replace("%b",s[c])).replace("%B",o[c])).replace("%d",l.toString().padStart(2,"0"))).replace("%e",l.toString())).replace("%-d",l.toString())).replace("%H",u.toString().padStart(2,"0"))).replace("%-H",u.toString())).replace("%k",u.toString())).replace("%I",_.toString().padStart(2,"0"))).replace("%-I",_.toString())).replace("%l",_.toString())).replace("%m",c.toString().padStart(2,"0"))).replace("%-m",c.toString())).replace("%M",m.toString().padStart(2,"0"))).replace("%-M",m.toString())).replace("%p",x[d])).replace("%P",x[d].toLowerCase())).replace("%S",p.toString().padStart(2,"0"))).replace("%-S",p.toString())).replace("%w",f.toString())).replace("%y",h.toString().padStart(2,"0").substr(-2))).replace("%-y",h.toString().padStart(2,"0").substr(-2).replace(/^0+/,""))).replace("%Y",h.toString())).replace(/%z/i,b)}(e,t,Object.assign(Object.assign(Object.assign({},vn(us(this,"date"))),{meridian:{am:us(this,"time.am")||"AM",pm:us(this,"time.pm")||"PM"}}),r))}},{key:"update",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!1};if(r.strict&&!Ot(this.translations,e))throw new Error('The path "'.concat(e,'" is not currently defined'));var i,a=dt(this.translations,e),n=hs(a),s=hs(t);if(r.strict&&n!==s)throw new Error('The current type for "'.concat(e,'" is "').concat(n,'", but you\'re trying to override it with "').concat(s,'"'));i="object"===s?Object.assign(Object.assign({},a),t):t;var o,x=e.split(this.defaultSeparator),f=x.pop(),h=this.translations,c=l(x);try{for(c.s();!(o=c.n()).done;){var u=o.value;h[u]||(h[u]={}),h=h[u]}}catch(e){c.e(e)}finally{c.f()}h[f]=i,this.hasChanged()}},{key:"toSentence",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign(Object.assign({wordsConnector:", ",twoWordsConnector:" and ",lastWordConnector:", and "},vn(us(this,"support.array"))),t),i=r.wordsConnector,a=r.twoWordsConnector,n=r.lastWordConnector,s=e.length;switch(s){case 0:return"";case 1:return"".concat(e[0]);case 2:return e.join(a);default:return[e.slice(0,s-1).join(i),n,e[s-1]].join("")}}},{key:"timeAgoInWords",value:function(e,t){return function(e,t,r){var i,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=a.scope||"datetime.distance_in_words",s=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.t(t,{count:r,scope:n})};t=Px(t),r=Px(r);var o=t.getTime()/1e3,x=r.getTime()/1e3;o>x&&(t=(i=[r,t,x,o])[0],r=i[1],o=i[2],x=i[3]);var f=Math.round(x-o),l=Math.round((x-o)/60),h=l/60/24,c=Math.round(l/60),u=Math.round(h),_=Math.round(u/30);if(Ex(0,1,l))return a.includeSeconds?Ex(0,4,f)?s("less_than_x_seconds",5):Ex(5,9,f)?s("less_than_x_seconds",10):Ex(10,19,f)?s("less_than_x_seconds",20):Ex(20,39,f)?s("half_a_minute"):Ex(40,59,f)?s("less_than_x_minutes",1):s("x_minutes",1):0===l?s("less_than_x_minutes",1):s("x_minutes",l);if(Ex(2,44,l))return s("x_minutes",l);if(Ex(45,89,l))return s("about_x_hours",1);if(Ex(90,1439,l))return s("about_x_hours",c);if(Ex(1440,2519,l))return s("x_days",1);if(Ex(2520,43199,l))return s("x_days",u);if(Ex(43200,86399,l))return s("about_x_months",Math.round(l/43200));if(Ex(86400,525599,l))return s("x_months",_);var d=t.getFullYear();t.getMonth()+1>=3&&(d+=1);var p=r.getFullYear();r.getMonth()+1<3&&(p-=1);var m=525600,P=l-1440*(d>p?0:Cx(d,p).filter((function(e){return 1==new Date(e,1,29).getMonth()})).length),y=Math.trunc(P/m),g=parseFloat((P/m-y).toPrecision(3));return g<.25?s("about_x_years",y):g<.75?s("over_x_years",y):s("almost_x_years",y+1)}(this,e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}},{key:"onChange",value:function(e){var t=this;return this.onChangeHandlers.push(e),function(){t.onChangeHandlers.splice(t.onChangeHandlers.indexOf(e),1)}}},{key:"version",get:function(){return this._version}},{key:"formatNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fs(e,t=Object.assign(Object.assign({delimiter:",",precision:3,separator:".",unit:"",format:"%u%n",significant:!1,stripInsignificantZeros:!1},vn(this.get("number.format"))),t))}},{key:"get",value:function(e){return us(this,e)}},{key:"runCallbacks",value:function(){var e=this;this.onChangeHandlers.forEach((function(t){return t(e)}))}},{key:"hasChanged",value:function(){this._version+=1,this.runCallbacks()}}]),t}(),wx=function(){function e(e,t){this._i18n=new Ax(e,t)}var t=e.prototype;return t.t=function(e,t){return this._i18n.t(e,t)},t.appendTranslations=function(e){var t=this;Object.keys(e).forEach((function(r){t._i18n.translations[r]=Object.assign(t._i18n.translations[r]||{},e[r])}))},t.switchTranslation=function(e){this._i18n.locale=e},t.getCurrentLocale=function(){return this._i18n.locale},t.getCurrentTranslation=function(){return this._i18n.translations[this._i18n.locale]},t.getTranslations=function(){return this._i18n.translations},t.onChange=function(e){var t=this;return this._i18n.onChange((function(){return e(t)}))},t.getVersion=function(){return"1.0.1"},e}(),Lx=function(e){var t=e.split("?")[1],r={};if(t)for(var i=t.split("&"),a=0;a<i.length;a++){var n=i[a].split("=");r[n[0]]=decodeURIComponent(n[1])}return r};function kx(e){var t={};if(/^ezopen:\/\//.test(e)){if(e.includes("@")){var r=e.indexOf("@"),i=e.indexOf("//");t.validateCode=e.substring(i+2,r),e=e.replace(t.validateCode+"@","")}t.protocol=e.split("//")[0],t.search=e.split("?")[1]?"?"+e.split("?")[1]:"",t.hostname=e.split("/")[2],t.origin=t.protocol+"//"+t.hostname,t.pathname=e.split("?")[0].replace(t.origin,""),t.href=e;var a=t.pathname.split("/"),n=a[2].split(".");return t.deviceSerial=a[1],t.channelNo=n[0],t.type=n[n.length-1],"live"===t.type&&(t.definition=n.length>2?n[1]:"sd"),"rec"===t.type&&(t.recType=n.length>2?n[1]:""),t.searchParams=Lx(e),t}return{}}function Bx(e){var t,r;return!!((null!=e?e:null==(r=window)||null==(t=r.navigator)?void 0:t.userAgent)||"").match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}function Ox(e,t){return Object.entries(e).reduce((function(e,r){var i=r[0],a=r[1];return t.includes(i)&&(e[i]=a),e}),{})}var Hx="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Nx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vx={exports:{}};!function(e,t){e.exports=function(){var e=1e3,t=6e4,i=36e5,a="millisecond",n="second",s="minute",o="hour",x="day",f="week",l="month",h="quarter",c="year",u="date",_="Invalid Date",d=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},P=function(e,t,r){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(r)+e},y={s:P,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),i=Math.floor(r/60),a=r%60;return(t<=0?"+":"-")+P(i,2,"0")+":"+P(a,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var i=12*(r.year()-t.year())+(r.month()-t.month()),a=t.clone().add(i,l),n=r-a<0,s=t.clone().add(i+(n?-1:1),l);return+(-(i+(r-a)/(n?a-s:s-a))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:l,y:c,w:f,d:x,D:u,h:o,m:s,s:n,ms:a,Q:h}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},g="en",b={};b[g]=m;var S="$isDayjsObject",v=function(e){return e instanceof F||!(!e||!e[S])},R=function e(t,r,i){var a;if(!t)return g;if("string"==typeof t){var n=t.toLowerCase();b[n]&&(a=n),r&&(b[n]=r,a=n);var s=t.split("-");if(!a&&s.length>1)return e(s[0])}else{var o=t.name;b[o]=t,a=o}return!i&&a&&(g=a),a||!i&&g},C=function(e,t){if(v(e))return e.clone();var i="object"==r(t)?t:{};return i.date=e,i.args=arguments,new F(i)},E=y;E.l=R,E.i=v,E.w=function(e,t){return C(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var F=function(){function r(e){this.$L=R(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[S]=!0}var m=r.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(E.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(d);if(i){var a=i[2]-1||0,n=(i[7]||"0").substring(0,3);return r?new Date(Date.UTC(i[1],a,i[3]||1,i[4]||0,i[5]||0,i[6]||0,n)):new Date(i[1],a,i[3]||1,i[4]||0,i[5]||0,i[6]||0,n)}}return new Date(t)}(e),this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return E},m.isValid=function(){return!(this.$d.toString()===_)},m.isSame=function(e,t){var r=C(e);return this.startOf(t)<=r&&r<=this.endOf(t)},m.isAfter=function(e,t){return C(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<C(e)},m.$g=function(e,t,r){return E.u(e)?this[t]:this.set(r,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var r=this,i=!!E.u(t)||t,a=E.p(e),h=function(e,t){var a=E.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return i?a:a.endOf(x)},_=function(e,t){return E.w(r.toDate()[e].apply(r.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},d=this.$W,p=this.$M,m=this.$D,P="set"+(this.$u?"UTC":"");switch(a){case c:return i?h(1,0):h(31,11);case l:return i?h(1,p):h(0,p+1);case f:var y=this.$locale().weekStart||0,g=(d<y?d+7:d)-y;return h(i?m-g:m+(6-g),p);case x:case u:return _(P+"Hours",0);case o:return _(P+"Minutes",1);case s:return _(P+"Seconds",2);case n:return _(P+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var r,i=E.p(e),f="set"+(this.$u?"UTC":""),h=(r={},r[x]=f+"Date",r[u]=f+"Date",r[l]=f+"Month",r[c]=f+"FullYear",r[o]=f+"Hours",r[s]=f+"Minutes",r[n]=f+"Seconds",r[a]=f+"Milliseconds",r)[i],_=i===x?this.$D+(t-this.$W):t;if(i===l||i===c){var d=this.clone().set(u,1);d.$d[h](_),d.init(),this.$d=d.set(u,Math.min(this.$D,d.daysInMonth())).$d}else h&&this.$d[h](_);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[E.p(e)]()},m.add=function(r,a){var h,u=this;r=Number(r);var _=E.p(a),d=function(e){var t=C(u);return E.w(t.date(t.date()+Math.round(e*r)),u)};if(_===l)return this.set(l,this.$M+r);if(_===c)return this.set(c,this.$y+r);if(_===x)return d(1);if(_===f)return d(7);var p=(h={},h[s]=t,h[o]=i,h[n]=e,h)[_]||1,m=this.$d.getTime()+r*p;return E.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||_;var i=e||"YYYY-MM-DDTHH:mm:ssZ",a=E.z(this),n=this.$H,s=this.$m,o=this.$M,x=r.weekdays,f=r.months,l=r.meridiem,h=function(e,r,a,n){return e&&(e[r]||e(t,i))||a[r].slice(0,n)},c=function(e){return E.s(n%12||12,e,"0")},u=l||function(e,t,r){var i=e<12?"AM":"PM";return r?i.toLowerCase():i};return i.replace(p,(function(e,i){return i||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return E.s(t.$y,4,"0");case"M":return o+1;case"MM":return E.s(o+1,2,"0");case"MMM":return h(r.monthsShort,o,f,3);case"MMMM":return h(f,o);case"D":return t.$D;case"DD":return E.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return h(r.weekdaysMin,t.$W,x,2);case"ddd":return h(r.weekdaysShort,t.$W,x,3);case"dddd":return x[t.$W];case"H":return String(n);case"HH":return E.s(n,2,"0");case"h":return c(1);case"hh":return c(2);case"a":return u(n,s,!0);case"A":return u(n,s,!1);case"m":return String(s);case"mm":return E.s(s,2,"0");case"s":return String(t.$s);case"ss":return E.s(t.$s,2,"0");case"SSS":return E.s(t.$ms,3,"0");case"Z":return a}return null}(e)||a.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(r,a,u){var _,d=this,p=E.p(a),m=C(r),P=(m.utcOffset()-this.utcOffset())*t,y=this-m,g=function(){return E.m(d,m)};switch(p){case c:_=g()/12;break;case l:_=g();break;case h:_=g()/3;break;case f:_=(y-P)/6048e5;break;case x:_=(y-P)/864e5;break;case o:_=y/i;break;case s:_=y/t;break;case n:_=y/e;break;default:_=y}return u?_:E.a(_)},m.daysInMonth=function(){return this.endOf(l).$D},m.$locale=function(){return b[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),i=R(e,t,!0);return i&&(r.$L=i),r},m.clone=function(){return E.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},r}(),T=F.prototype;return C.prototype=T,[["$ms",a],["$s",n],["$m",s],["$H",o],["$W",x],["$M",l],["$y",c],["$D",u]].forEach((function(e){T[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),C.extend=function(e,t){return e.$i||(e(t,F,C),e.$i=!0),C},C.locale=R,C.isDayjs=v,C.unix=function(e){return C(1e3*e)},C.en=b[g],C.Ls=b,C.p={},C}()}(Vx);var Yx=Nx(Vx.exports),Ux={exports:{}};!function(e,t){function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":r(e)}!function(r,a){var n="function",s="undefined",o="object",x="string",f="major",l="model",h="name",c="type",u="vendor",_="version",d="architecture",p="console",m="mobile",P="tablet",y="smarttv",g="wearable",b="embedded",S="Amazon",v="Apple",R="ASUS",C="BlackBerry",E="Browser",F="Chrome",T="Firefox",D="Google",I="Huawei",M="LG",A="Microsoft",w="Motorola",L="Opera",k="Samsung",B="Sharp",O="Sony",H="Xiaomi",N="Zebra",V="Facebook",Y="Chromium OS",U="Mac OS",X=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},W=function(e,t){return(void 0===e?"undefined":i(e))===x&&-1!==G(t).indexOf(G(e))},G=function(e){return e.toLowerCase()},J=function(e,t){if((void 0===e?"undefined":i(e))===x)return e=e.replace(/^\s\s*/,""),(void 0===t?"undefined":i(t))===s?e:e.substring(0,500)},Z=function(e,t){for(var r,s,x,f,l,h,c=0;c<t.length&&!l;){var u=t[c],_=t[c+1];for(r=s=0;r<u.length&&!l&&u[r];)if(l=u[r++].exec(e))for(x=0;x<_.length;x++)h=l[++s],(void 0===(f=_[x])?"undefined":i(f))===o&&f.length>0?2===f.length?i(f[1])==n?this[f[0]]=f[1].call(this,h):this[f[0]]=f[1]:3===f.length?i(f[1])!==n||f[1].exec&&f[1].test?this[f[0]]=h?h.replace(f[1],f[2]):a:this[f[0]]=h?f[1].call(this,h,f[2]):a:4===f.length&&(this[f[0]]=h?f[3].call(this,h.replace(f[1],f[2])):a):this[f]=h||a;c+=2}},j=function(e,t){for(var r in t)if(i(t[r])===o&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(W(t[r][n],e))return"?"===r?a:r}else if(W(t[r],e))return"?"===r?a:r;return e},z={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[_,[h,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[_,[h,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[h,_],[/opios[\/ ]+([\w\.]+)/i],[_,[h,L+" Mini"]],[/\bopr\/([\w\.]+)/i],[_,[h,L]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[_,[h,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[h,_],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[_,[h,"UC"+E]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[_,[h,"WeChat"]],[/konqueror\/([\w\.]+)/i],[_,[h,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[_,[h,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[_,[h,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[_,[h,"Smart Lenovo "+E]],[/(avast|avg)\/([\w\.]+)/i],[[h,/(.+)/,"$1 Secure "+E],_],[/\bfocus\/([\w\.]+)/i],[_,[h,T+" Focus"]],[/\bopt\/([\w\.]+)/i],[_,[h,L+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[_,[h,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[_,[h,"Dolphin"]],[/coast\/([\w\.]+)/i],[_,[h,L+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[_,[h,"MIUI "+E]],[/fxios\/([-\w\.]+)/i],[_,[h,T]],[/\bqihu|(qi?ho?o?|360)browser/i],[[h,"360 "+E]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[h,/(.+)/,"$1 "+E],_],[/samsungbrowser\/([\w\.]+)/i],[_,[h,k+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[h,/_/g," "],_],[/metasr[\/ ]?([\d\.]+)/i],[_,[h,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[h,"Sogou Mobile"],_],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[h,_],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[h],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[h,V],_],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[h,_],[/\bgsa\/([\w\.]+) .*safari\//i],[_,[h,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[_,[h,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[_,[h,F+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[h,F+" WebView"],_],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[_,[h,"Android "+E]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[h,_],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[_,[h,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[_,h],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[h,[_,j,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[h,_],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[h,"Netscape"],_],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[_,[h,T+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[h,_],[/(cobalt)\/([\w\.]+)/i],[h,[_,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[d,"amd64"]],[/(ia32(?=;))/i],[[d,G]],[/((?:i[346]|x)86)[;\)]/i],[[d,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[d,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[d,"armhf"]],[/windows (ce|mobile); ppc;/i],[[d,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[d,/ower/,"",G]],[/(sun4\w)[;\)]/i],[[d,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[d,G]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[l,[u,k],[c,P]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[l,[u,k],[c,m]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[l,[u,v],[c,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[l,[u,v],[c,P]],[/(macintosh);/i],[l,[u,v]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[l,[u,B],[c,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[l,[u,I],[c,P]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[l,[u,I],[c,m]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[l,/_/g," "],[u,H],[c,m]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[l,/_/g," "],[u,H],[c,P]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[l,[u,"OPPO"],[c,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[l,[u,"Vivo"],[c,m]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[l,[u,"Realme"],[c,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[l,[u,w],[c,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[l,[u,w],[c,P]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[l,[u,M],[c,P]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[l,[u,M],[c,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[l,[u,"Lenovo"],[c,P]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[l,/_/g," "],[u,"Nokia"],[c,m]],[/(pixel c)\b/i],[l,[u,D],[c,P]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[l,[u,D],[c,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[l,[u,O],[c,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[l,"Xperia Tablet"],[u,O],[c,P]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[l,[u,"OnePlus"],[c,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[l,[u,S],[c,P]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[l,/(.+)/g,"Fire Phone $1"],[u,S],[c,m]],[/(playbook);[-\w\),; ]+(rim)/i],[l,u,[c,P]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[l,[u,C],[c,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[l,[u,R],[c,P]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[l,[u,R],[c,m]],[/(nexus 9)/i],[l,[u,"HTC"],[c,P]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[u,[l,/_/g," "],[c,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[l,[u,"Acer"],[c,P]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[l,[u,"Meizu"],[c,m]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[l,[u,"Ulefone"],[c,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[u,l,[c,m]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[u,l,[c,P]],[/(surface duo)/i],[l,[u,A],[c,P]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[l,[u,"Fairphone"],[c,m]],[/(u304aa)/i],[l,[u,"AT&T"],[c,m]],[/\bsie-(\w*)/i],[l,[u,"Siemens"],[c,m]],[/\b(rct\w+) b/i],[l,[u,"RCA"],[c,P]],[/\b(venue[\d ]{2,7}) b/i],[l,[u,"Dell"],[c,P]],[/\b(q(?:mv|ta)\w+) b/i],[l,[u,"Verizon"],[c,P]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[l,[u,"Barnes & Noble"],[c,P]],[/\b(tm\d{3}\w+) b/i],[l,[u,"NuVision"],[c,P]],[/\b(k88) b/i],[l,[u,"ZTE"],[c,P]],[/\b(nx\d{3}j) b/i],[l,[u,"ZTE"],[c,m]],[/\b(gen\d{3}) b.+49h/i],[l,[u,"Swiss"],[c,m]],[/\b(zur\d{3}) b/i],[l,[u,"Swiss"],[c,P]],[/\b((zeki)?tb.*\b) b/i],[l,[u,"Zeki"],[c,P]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[u,"Dragon Touch"],l,[c,P]],[/\b(ns-?\w{0,9}) b/i],[l,[u,"Insignia"],[c,P]],[/\b((nxa|next)-?\w{0,9}) b/i],[l,[u,"NextBook"],[c,P]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[u,"Voice"],l,[c,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[u,"LvTel"],l,[c,m]],[/\b(ph-1) /i],[l,[u,"Essential"],[c,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[l,[u,"Envizen"],[c,P]],[/\b(trio[-\w\. ]+) b/i],[l,[u,"MachSpeed"],[c,P]],[/\btu_(1491) b/i],[l,[u,"Rotor"],[c,P]],[/(shield[\w ]+) b/i],[l,[u,"Nvidia"],[c,P]],[/(sprint) (\w+)/i],[u,l,[c,m]],[/(kin\.[onetw]{3})/i],[[l,/\./g," "],[u,A],[c,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[l,[u,N],[c,P]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[l,[u,N],[c,m]],[/smart-tv.+(samsung)/i],[u,[c,y]],[/hbbtv.+maple;(\d+)/i],[[l,/^/,"SmartTV"],[u,k],[c,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[u,M],[c,y]],[/(apple) ?tv/i],[u,[l,v+" TV"],[c,y]],[/crkey/i],[[l,F+"cast"],[u,D],[c,y]],[/droid.+aft(\w+)( bui|\))/i],[l,[u,S],[c,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[l,[u,B],[c,y]],[/(bravia[\w ]+)( bui|\))/i],[l,[u,O],[c,y]],[/(mitv-\w{5}) bui/i],[l,[u,H],[c,y]],[/Hbbtv.*(technisat) (.*);/i],[u,l,[c,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[u,J],[l,J],[c,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[c,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[u,l,[c,p]],[/droid.+; (shield) bui/i],[l,[u,"Nvidia"],[c,p]],[/(playstation [345portablevi]+)/i],[l,[u,O],[c,p]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[l,[u,A],[c,p]],[/((pebble))app/i],[u,l,[c,g]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[l,[u,v],[c,g]],[/droid.+; (glass) \d/i],[l,[u,D],[c,g]],[/droid.+; (wt63?0{2,3})\)/i],[l,[u,N],[c,g]],[/(quest( 2| pro)?)/i],[l,[u,V],[c,g]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[u,[c,b]],[/(aeobc)\b/i],[l,[u,S],[c,b]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[l,[c,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[l,[c,P]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[c,P]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[c,m]],[/(android[-\w\. ]{0,9});.+buil/i],[l,[u,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[_,[h,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[_,[h,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[h,_],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[_,h]],os:[[/microsoft (windows) (vista|xp)/i],[h,_],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[h,[_,j,z]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[_,j,z],[h,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[_,/_/g,"."],[h,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[h,U],[_,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[_,h],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[h,_],[/\(bb(10);/i],[_,[h,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[_,[h,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[_,[h,T+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[_,[h,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[_,[h,"watchOS"]],[/crkey\/([\d\.]+)/i],[_,[h,F+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[h,Y],_],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[h,_],[/(sunos) ?([\w\.\d]*)/i],[[h,"Solaris"],_],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[h,_]]},$=function(e,t){if((void 0===e?"undefined":i(e))===o&&(t=e,e=a),p=this,!(null!=(y=$)&&"undefined"!=typeof Symbol&&y[Symbol.hasInstance]?y[Symbol.hasInstance](p):p instanceof y))return new $(e,t).getResult();var p,y,g=(void 0===r?"undefined":i(r))!==s&&r.navigator?r.navigator:a,b=e||(g&&g.userAgent?g.userAgent:""),S=g&&g.userAgentData?g.userAgentData:a,v=t?function(e,t){var r={};for(var i in e)t[i]&&t[i].length%2==0?r[i]=t[i].concat(e[i]):r[i]=e[i];return r}(q,t):q,R=g&&g.userAgent==b;return this.getBrowser=function(){var e,t={};return t[h]=a,t[_]=a,Z.call(t,b,v.browser),t[f]=(void 0===(e=t[_])?"undefined":i(e))===x?e.replace(/[^\d\.]/g,"").split(".")[0]:a,R&&g&&g.brave&&i(g.brave.isBrave)==n&&(t[h]="Brave"),t},this.getCPU=function(){var e={};return e[d]=a,Z.call(e,b,v.cpu),e},this.getDevice=function(){var e={};return e[u]=a,e[l]=a,e[c]=a,Z.call(e,b,v.device),R&&!e[c]&&S&&S.mobile&&(e[c]=m),R&&"Macintosh"==e[l]&&g&&i(g.standalone)!==s&&g.maxTouchPoints&&g.maxTouchPoints>2&&(e[l]="iPad",e[c]=P),e},this.getEngine=function(){var e={};return e[h]=a,e[_]=a,Z.call(e,b,v.engine),e},this.getOS=function(){var e={};return e[h]=a,e[_]=a,Z.call(e,b,v.os),R&&!e[h]&&S&&"Unknown"!=S.platform&&(e[h]=S.platform.replace(/chrome os/i,Y).replace(/macos/i,U)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return b},this.setUA=function(e){return b=(void 0===e?"undefined":i(e))===x&&e.length>500?J(e,500):e,this},this.setUA(b),this};$.VERSION="1.0.37",$.BROWSER=X([h,_,f]),$.CPU=X([d]),$.DEVICE=X([l,u,c,p,m,y,P,g,b]),$.ENGINE=$.OS=X([h,_]),i(t)!==s?(i(e)!==s&&e.exports&&(t=e.exports=$),t.UAParser=$):(void 0===r?"undefined":i(r))!==s&&(r.UAParser=$);var K=(void 0===r?"undefined":i(r))!==s&&(r.jQuery||r.Zepto);if(K&&!K.ua){var Q=new $;K.ua=Q.getResult(),K.ua.get=function(){return Q.getUA()},K.ua.set=function(e){Q.setUA(e);var t=Q.getResult();for(var r in t)K.ua[r]=t[r]}}}("object"===("undefined"==typeof window?"undefined":r(window))?window:Hx)}(Ux,Ux.exports);var Xx=Nx(Ux.exports),Wx=["attribute vec4 vertexPos;","attribute vec2 texturePos;","varying vec2 textureCoord;","void main()","{","gl_Position = vertexPos;","textureCoord = texturePos;","}"].join("\n"),Gx=["precision highp float;","varying highp vec2 textureCoord;","uniform sampler2D ySampler;","uniform sampler2D uSampler;","uniform sampler2D vSampler;","const mat4 YUV2RGB = mat4","(","1.1643828125, 0, 1.59602734375, -.87078515625,","1.1643828125, -.39176171875, -.81296875, .52959375,","1.1643828125, 2.017234375, 0, -1.081390625,","0, 0, 0, 1",");","void main(void) {","highp float y = texture2D(ySampler,  textureCoord).r;","highp float u = texture2D(uSampler,  textureCoord).r;","highp float v = texture2D(vSampler,  textureCoord).r;","gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;","}"].join("\n");window.SuperRender=function(){function e(e){this.canvasElement=document.getElementById(e),this.initContextGL(),this.contextGL&&(this.YUVProgram=this.initProgram(Wx,Gx),this.initBuffers(),this.initTextures())}return e.prototype.initContextGL=function(){var e=this.canvasElement,t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){t=null}t&&"function"==typeof t.getParameter||(t=null),this.contextGL=t},e.prototype.initProgram=function(e,t){var r=this.contextGL,i=r.createShader(r.VERTEX_SHADER);r.shaderSource(i,e),r.compileShader(i),r.getShaderParameter(i,r.COMPILE_STATUS);var a=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(a,t),r.compileShader(a),r.getShaderParameter(a,r.COMPILE_STATUS);var n=r.createProgram();return r.attachShader(n,i),r.attachShader(n,a),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS),r.deleteShader(i),r.deleteShader(a),n},e.prototype.initBuffers=function(){var e=this.contextGL,t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null);var r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this.vertexPosBuffer=t,this.texturePosBuffer=r},e.prototype.initTexture=function(){var e=this.contextGL,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),t},e.prototype.initTextures=function(){var e=this.contextGL,t=this.YUVProgram;e.useProgram(t);var r=this.initTexture(),i=e.getUniformLocation(t,"ySampler");e.uniform1i(i,0),this.yTextureRef=r;var a=this.initTexture(),n=e.getUniformLocation(t,"uSampler");e.uniform1i(n,1),this.uTextureRef=a;var s=this.initTexture(),o=e.getUniformLocation(t,"vSampler");e.uniform1i(o,2),this.vTextureRef=s,e.useProgram(null)},e.prototype.SR_DisplayFrameData=function(e,t,r,i,a){if(!(e<=0||t<=0)){var n=this.contextGL;if(null==r)return n.clearColor(0,0,0,0),void n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT);var s=this.canvasElement;this.nWindowWidth=s.width,this.nWindowHeight=s.height;var o=this.nWindowWidth,x=this.nWindowHeight;n.clearColor(.8,.8,1,1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),n.viewport(0,0,o,x),this.updateFrameData(e,t,r,i,a);var f=this.YUVProgram;n.useProgram(f);var l=this.vertexPosBuffer;n.bindBuffer(n.ARRAY_BUFFER,l);var h=n.getAttribLocation(f,"vertexPos");n.enableVertexAttribArray(h),n.vertexAttribPointer(h,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,null);var c=this.texturePosBuffer;n.bindBuffer(n.ARRAY_BUFFER,c);var u=n.getAttribLocation(f,"texturePos");n.enableVertexAttribArray(u),n.vertexAttribPointer(u,2,n.FLOAT,!1,0,0),n.bindBuffer(n.ARRAY_BUFFER,null),n.drawArrays(n.TRIANGLE_STRIP,0,4),n.disableVertexAttribArray(h),n.disableVertexAttribArray(u),n.useProgram(null)}},e.prototype.updateFrameData=function(e,t,r,i,a){var n=this.contextGL,s=this.yTextureRef,o=this.uTextureRef,x=this.vTextureRef,f=r;if(e==i&&t==a){var l=e*t,h=f.subarray(0,l);n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,s),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,e,t,0,n.LUMINANCE,n.UNSIGNED_BYTE,h);var c=e/2*t/2,u=f.subarray(e*t,e*t+c);n.activeTexture(n.TEXTURE2),n.bindTexture(n.TEXTURE_2D,x),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,e/2,t/2,0,n.LUMINANCE,n.UNSIGNED_BYTE,u);var _=c,d=f.subarray(e*t+e*t/4,e*t+e*t/4+_);n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,e/2,t/2,0,n.LUMINANCE,n.UNSIGNED_BYTE,d)}else{l=i*a,h=new Uint8Array(l);for(var p=0;p<a;p++)for(var m=f.subarray(p*e,p*e+i),P=0;P<i;P++)h[p*i+P]=m[P];for(n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,s),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,i,a,0,n.LUMINANCE,n.UNSIGNED_BYTE,h),h=null,m=null,c=i/2*a/2,u=new Uint8Array(c),p=0;p<a/2;p++){var y=f.subarray(e*t+p*e/2,e*t+p*e/2+i/2);for(P=0;P<i/2;P++)u[p*i/2+P]=y[P]}for(n.activeTexture(n.TEXTURE2),n.bindTexture(n.TEXTURE_2D,x),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,i/2,a/2,0,n.LUMINANCE,n.UNSIGNED_BYTE,u),u=null,y=null,_=c,d=new Uint8Array(_),p=0;p<a/2;p++){var g=f.subarray(e*t*5/4+p*e/2,e*t*5/4+p*e/2+i/2);for(P=0;P<i/2;P++)d[p*i/2+P]=g[P]}n.activeTexture(n.TEXTURE1),n.bindTexture(n.TEXTURE_2D,o),n.texImage2D(n.TEXTURE_2D,0,n.LUMINANCE,i/2,a/2,0,n.LUMINANCE,n.UNSIGNED_BYTE,d),d=null,g=null}},e.prototype.SR_SetDisplayRect=function(e){var t=this.contextGL,r=this.nWindowWidth,i=this.nWindowHeight,a=null;if(e&&r>0&&i>0){var n=e.left/r,s=e.top/i,o=e.right/r,x=e.bottom/i;a=new Float32Array([o,s,n,s,o,x,n,x])}else a=new Float32Array([1,0,0,0,1,1,0,1]);var f=this.texturePosBuffer;t.bindBuffer(t.ARRAY_BUFFER,f),t.bufferSubData(t.ARRAY_BUFFER,0,a),t.bindBuffer(t.ARRAY_BUFFER,null)},e.prototype.SR_Destroy=function(){var e=this.contextGL,t=this.YUVProgram;e.deleteProgram(t);var r=this.vertexPosBuffer,i=this.texturePosBuffer;e.deleteBuffer(r),e.deleteBuffer(i);var a=this.yTextureRef,n=this.uTextureRef,s=this.vTextureRef;e.deleteTexture(a),e.deleteTexture(n),e.deleteTexture(s)},e}(),function(){var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}();var t,r=(t=void 0,function(e){return e&&(t=e),t});function i(){if(function(e,t){if(r=e,!(null!=(i=t)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](r):r instanceof i))throw new TypeError("Cannot call a class as a function");var r,i}(this,i),r())return r();if(void 0!==i.unique)return i.unique;i.unique=this,this.oAudioContext=null,this.currentVolume=80,this.bSetVolume=!1,this.gainNode=null,this.iWndNum=-1,this.mVolumes=new Map;var e=window.AudioContext||window.webkitAudioContext;this.oAudioContext=new e,this.writeString=function(e,t,r){for(var i=0;i<r.length;i++)e.setUint8(t+i,r.charCodeAt(i))},this.setBufferToDataview=function(e,t,r){for(var i=0;i<r.length;i++,t++)e.setUint8(t,r[i])},r(this)}e(i,[{key:"Play",value:function(e,t,r){var i=new ArrayBuffer(44+t),a=new DataView(i),n=r.samplesPerSec,s=r.channels,o=r.bitsPerSample;this.writeString(a,0,"RIFF"),a.setUint32(4,32+2*t,!0),this.writeString(a,8,"WAVE"),this.writeString(a,12,"fmt "),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,s,!0),a.setUint32(24,n,!0),a.setUint32(28,2*n,!0),a.setUint16(32,s*o/8,!0),a.setUint16(34,o,!0),this.writeString(a,36,"data"),a.setUint32(40,t,!0),this.setBufferToDataview(a,44,e);var x=this;return this.oAudioContext.decodeAudioData(a.buffer,(function(e){var t=x.oAudioContext.createBufferSource();if(null==t)return-1;t.buffer=e,t.start(0),(null==x.gainNode||x.bSetVolume)&&(x.gainNode=x.oAudioContext.createGain(),x.bSetVolume=!1),x.gainNode.gain.value=x.currentVolume/100,x.gainNode.connect(x.oAudioContext.destination),t.connect(x.gainNode)}),(function(e){return-1})),0}},{key:"Stop",value:function(){return null!=this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),!0}},{key:"SetVolume",value:function(e){return this.bSetVolume=!0,this.currentVolume=e,this.mVolumes.set(this.iWndNum,this.currentVolume),!0}},{key:"SetWndNum",value:function(e){this.iWndNum=e;var t=this.mVolumes.get(e);return null==t&&(t=80),this.currentVolume=t,!0}},{key:"GetVolume",value:function(){var e=this.mVolumes.get(this.iWndNum);return null==e&&(e=80),e}}]),window.AudioRenderer=i}();var Jx="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Zx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var jx={exports:{}};!function(e){!function(t,r){e.exports=t.document?r(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}}("undefined"!=typeof window?window:Jx,(function(e,t){var i=[],a=Object.getPrototypeOf,n=i.slice,s=i.flat?function(e){return i.flat.call(e)}:function(e){return i.concat.apply([],e)},o=i.push,x=i.indexOf,f={},l=f.toString,h=f.hasOwnProperty,c=h.toString,u=c.call(Object),_={},d=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},p=function(e){return null!=e&&e===e.window},m=e.document,P={type:!0,src:!0,nonce:!0,noModule:!0};function y(e,t,r){var i,a,n=(r=r||m).createElement("script");if(n.text=e,t)for(i in P)(a=t[i]||t.getAttribute&&t.getAttribute(i))&&n.setAttribute(i,a);r.head.appendChild(n).parentNode.removeChild(n)}function g(e){return null==e?e+"":"object"==r(e)||"function"==typeof e?f[l.call(e)]||"object":r(e)}var b="3.7.1",S=/HTML$/i,v=function e(t,r){return new e.fn.init(t,r)};function R(e){var t=!!e&&"length"in e&&e.length,r=g(e);return!d(e)&&!p(e)&&("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}function C(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}v.fn=v.prototype={jquery:b,constructor:v,length:0,toArray:function(){return n.call(this)},get:function(e){return null==e?n.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=v.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return v.each(this,e)},map:function(e){return this.pushStack(v.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(v.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(v.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:i.sort,splice:i.splice},v.extend=v.fn.extend=function(){var e,t,i,a,n,s,o=arguments[0]||{},x=1,f=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[x]||{},x++),"object"==r(o)||d(o)||(o={}),x===f&&(o=this,x--);x<f;x++)if(null!=(e=arguments[x]))for(t in e)a=e[t],"__proto__"!==t&&o!==a&&(l&&a&&(v.isPlainObject(a)||(n=Array.isArray(a)))?(i=o[t],s=n&&!Array.isArray(i)?[]:n||v.isPlainObject(i)?i:{},n=!1,o[t]=v.extend(l,s,a)):void 0!==a&&(o[t]=a));return o},v.extend({expando:"jQuery"+(b+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;return!(!e||"[object Object]"!==l.call(e)||(t=a(e))&&("function"!=typeof(r=h.call(t,"constructor")&&t.constructor)||c.call(r)!==u))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,r){y(e,{nonce:t&&t.nonce},r)},each:function(e,t){var r,i=0;if(R(e))for(r=e.length;i<r&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},text:function(e){var t,r="",i=0,a=e.nodeType;if(!a)for(;t=e[i++];)r+=v.text(t);return 1===a||11===a?e.textContent:9===a?e.documentElement.textContent:3===a||4===a?e.nodeValue:r},makeArray:function(e,t){var r=t||[];return null!=e&&(R(Object(e))?v.merge(r,"string"==typeof e?[e]:e):o.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:x.call(t,e,r)},isXMLDoc:function(e){var t=e&&e.namespaceURI,r=e&&(e.ownerDocument||e).documentElement;return!S.test(t||r&&r.nodeName||"HTML")},merge:function(e,t){for(var r=+t.length,i=0,a=e.length;i<r;i++)e[a++]=t[i];return e.length=a,e},grep:function(e,t,r){for(var i=[],a=0,n=e.length,s=!r;a<n;a++)!t(e[a],a)!==s&&i.push(e[a]);return i},map:function(e,t,r){var i,a,n=0,o=[];if(R(e))for(i=e.length;n<i;n++)null!=(a=t(e[n],n,r))&&o.push(a);else for(n in e)null!=(a=t(e[n],n,r))&&o.push(a);return s(o)},guid:1,support:_}),"function"==typeof Symbol&&(v.fn[Symbol.iterator]=i[Symbol.iterator]),v.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){f["[object "+t+"]"]=t.toLowerCase()}));var E=i.pop,F=i.sort,T=i.splice,D="[\\x20\\t\\r\\n\\f]",I=new RegExp("^"+D+"+|((?:^|[^\\\\])(?:\\\\.)*)"+D+"+$","g");v.contains=function(e,t){var r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(e.contains?e.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))};var M=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function A(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}v.escapeSelector=function(e){return(e+"").replace(M,A)};var w=m,L=o;!function(){var t,r,a,s,o,f,l,c,u,d,p=L,m=v.expando,P=0,y=0,g=ee(),b=ee(),S=ee(),R=ee(),M=function(e,t){return e===t&&(o=!0),0},A="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",k="(?:\\\\[\\da-fA-F]{1,6}"+D+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",B="\\["+D+"*("+k+")(?:"+D+"*([*^$|!~]?=)"+D+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+k+"))|)"+D+"*\\]",O=":("+k+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",H=new RegExp(D+"+","g"),N=new RegExp("^"+D+"*,"+D+"*"),V=new RegExp("^"+D+"*([>+~]|"+D+")"+D+"*"),Y=new RegExp(D+"|>"),U=new RegExp(O),X=new RegExp("^"+k+"$"),W={ID:new RegExp("^#("+k+")"),CLASS:new RegExp("^\\.("+k+")"),TAG:new RegExp("^("+k+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+D+"*(even|odd|(([+-]|)(\\d*)n|)"+D+"*(?:([+-]|)"+D+"*(\\d+)|))"+D+"*\\)|)","i"),bool:new RegExp("^(?:"+A+")$","i"),needsContext:new RegExp("^"+D+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+D+"*((?:-\\d)?\\d*)"+D+"*\\)|)(?=[^-]|$)","i")},G=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,j=/[+~]/,z=new RegExp("\\\\[\\da-fA-F]{1,6}"+D+"?|\\\\([^\\r\\n\\f])","g"),q=function(e,t){var r="0x"+e.slice(1)-65536;return t||(r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320))},$=function(){xe()},K=ce((function(e){return!0===e.disabled&&C(e,"fieldset")}),{dir:"parentNode",next:"legend"});try{p.apply(i=n.call(w.childNodes),w.childNodes),i[w.childNodes.length].nodeType}catch(e){p={apply:function(e,t){L.apply(e,n.call(t))},call:function(e){L.apply(e,n.call(arguments,1))}}}function Q(e,t,r,i){var a,n,s,o,x,l,h,d=t&&t.ownerDocument,P=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==P&&9!==P&&11!==P)return r;if(!i&&(xe(t),t=t||f,c)){if(11!==P&&(x=Z.exec(e)))if(a=x[1]){if(9===P){if(!(s=t.getElementById(a)))return r;if(s.id===a)return p.call(r,s),r}else if(d&&(s=d.getElementById(a))&&Q.contains(t,s)&&s.id===a)return p.call(r,s),r}else{if(x[2])return p.apply(r,t.getElementsByTagName(e)),r;if((a=x[3])&&t.getElementsByClassName)return p.apply(r,t.getElementsByClassName(a)),r}if(!(R[e+" "]||u&&u.test(e))){if(h=e,d=t,1===P&&(Y.test(e)||V.test(e))){for((d=j.test(e)&&oe(t.parentNode)||t)==t&&_.scope||((o=t.getAttribute("id"))?o=v.escapeSelector(o):t.setAttribute("id",o=m)),n=(l=le(e)).length;n--;)l[n]=(o?"#"+o:":scope")+" "+he(l[n]);h=l.join(",")}try{return p.apply(r,d.querySelectorAll(h)),r}catch(t){R(e,!0)}finally{o===m&&t.removeAttribute("id")}}}return Pe(e.replace(I,"$1"),t,r,i)}function ee(){var e=[];return function t(i,a){return e.push(i+" ")>r.cacheLength&&delete t[e.shift()],t[i+" "]=a}}function te(e){return e[m]=!0,e}function re(e){var t=f.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ie(e){return function(t){return C(t,"input")&&t.type===e}}function ae(e){return function(t){return(C(t,"input")||C(t,"button"))&&t.type===e}}function ne(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&K(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function se(e){return te((function(t){return t=+t,te((function(r,i){for(var a,n=e([],r.length,t),s=n.length;s--;)r[a=n[s]]&&(r[a]=!(i[a]=r[a]))}))}))}function oe(e){return e&&void 0!==e.getElementsByTagName&&e}function xe(e){var t,i=e?e.ownerDocument||e:w;return i!=f&&9===i.nodeType&&i.documentElement?(l=(f=i).documentElement,c=!v.isXMLDoc(f),d=l.matches||l.webkitMatchesSelector||l.msMatchesSelector,l.msMatchesSelector&&w!=f&&(t=f.defaultView)&&t.top!==t&&t.addEventListener("unload",$),_.getById=re((function(e){return l.appendChild(e).id=v.expando,!f.getElementsByName||!f.getElementsByName(v.expando).length})),_.disconnectedMatch=re((function(e){return d.call(e,"*")})),_.scope=re((function(){return f.querySelectorAll(":scope")})),_.cssHas=re((function(){try{return f.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}})),_.getById?(r.filter.ID=function(e){var t=e.replace(z,q);return function(e){return e.getAttribute("id")===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&c){var r=t.getElementById(e);return r?[r]:[]}}):(r.filter.ID=function(e){var t=e.replace(z,q);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}},r.find.ID=function(e,t){if(void 0!==t.getElementById&&c){var r,i,a,n=t.getElementById(e);if(n){if((r=n.getAttributeNode("id"))&&r.value===e)return[n];for(a=t.getElementsByName(e),i=0;n=a[i++];)if((r=n.getAttributeNode("id"))&&r.value===e)return[n]}return[]}}),r.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},r.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&c)return t.getElementsByClassName(e)},u=[],re((function(e){var t;l.appendChild(e).innerHTML="<a id='"+m+"' href='' disabled='disabled'></a><select id='"+m+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||u.push("\\["+D+"*(?:value|"+A+")"),e.querySelectorAll("[id~="+m+"-]").length||u.push("~="),e.querySelectorAll("a#"+m+"+*").length||u.push(".#.+[+~]"),e.querySelectorAll(":checked").length||u.push(":checked"),(t=f.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),l.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&u.push(":enabled",":disabled"),(t=f.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||u.push("\\["+D+"*name"+D+"*="+D+"*(?:''|\"\")")})),_.cssHas||u.push(":has"),u=u.length&&new RegExp(u.join("|")),M=function(e,t){if(e===t)return o=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!_.sortDetached&&t.compareDocumentPosition(e)===r?e===f||e.ownerDocument==w&&Q.contains(w,e)?-1:t===f||t.ownerDocument==w&&Q.contains(w,t)?1:s?x.call(s,e)-x.call(s,t):0:4&r?-1:1)},f):f}for(t in Q.matches=function(e,t){return Q(e,null,null,t)},Q.matchesSelector=function(e,t){if(xe(e),c&&!R[t+" "]&&(!u||!u.test(t)))try{var r=d.call(e,t);if(r||_.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){R(t,!0)}return Q(t,f,null,[e]).length>0},Q.contains=function(e,t){return(e.ownerDocument||e)!=f&&xe(e),v.contains(e,t)},Q.attr=function(e,t){(e.ownerDocument||e)!=f&&xe(e);var i=r.attrHandle[t.toLowerCase()],a=i&&h.call(r.attrHandle,t.toLowerCase())?i(e,t,!c):void 0;return void 0!==a?a:e.getAttribute(t)},Q.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},v.uniqueSort=function(e){var t,r=[],i=0,a=0;if(o=!_.sortStable,s=!_.sortStable&&n.call(e,0),F.call(e,M),o){for(;t=e[a++];)t===e[a]&&(i=r.push(a));for(;i--;)T.call(e,r[i],1)}return s=null,e},v.fn.uniqueSort=function(){return this.pushStack(v.uniqueSort(n.apply(this)))},r=v.expr={cacheLength:50,createPseudo:te,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(z,q),e[3]=(e[3]||e[4]||e[5]||"").replace(z,q),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Q.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Q.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return W.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&U.test(r)&&(t=le(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(z,q).toLowerCase();return"*"===e?function(){return!0}:function(e){return C(e,t)}},CLASS:function(e){var t=g[e+" "];return t||(t=new RegExp("(^|"+D+")"+e+"("+D+"|$)"))&&g(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,r){return function(i){var a=Q.attr(i,e);return null==a?"!="===t:!t||(a+="","="===t?a===r:"!="===t?a!==r:"^="===t?r&&0===a.indexOf(r):"*="===t?r&&a.indexOf(r)>-1:"$="===t?r&&a.slice(-r.length)===r:"~="===t?(" "+a.replace(H," ")+" ").indexOf(r)>-1:"|="===t&&(a===r||a.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,r,i,a){var n="nth"!==e.slice(0,3),s="last"!==e.slice(-4),o="of-type"===t;return 1===i&&0===a?function(e){return!!e.parentNode}:function(t,r,x){var f,l,h,c,u,_=n!==s?"nextSibling":"previousSibling",d=t.parentNode,p=o&&t.nodeName.toLowerCase(),y=!x&&!o,g=!1;if(d){if(n){for(;_;){for(h=t;h=h[_];)if(o?C(h,p):1===h.nodeType)return!1;u=_="only"===e&&!u&&"nextSibling"}return!0}if(u=[s?d.firstChild:d.lastChild],s&&y){for(g=(c=(f=(l=d[m]||(d[m]={}))[e]||[])[0]===P&&f[1])&&f[2],h=c&&d.childNodes[c];h=++c&&h&&h[_]||(g=c=0)||u.pop();)if(1===h.nodeType&&++g&&h===t){l[e]=[P,c,g];break}}else if(y&&(g=c=(f=(l=t[m]||(t[m]={}))[e]||[])[0]===P&&f[1]),!1===g)for(;(h=++c&&h&&h[_]||(g=c=0)||u.pop())&&(!(o?C(h,p):1===h.nodeType)||!++g||(y&&((l=h[m]||(h[m]={}))[e]=[P,g]),h!==t)););return(g-=a)===i||g%i==0&&g/i>=0}}},PSEUDO:function(e,t){var i,a=r.pseudos[e]||r.setFilters[e.toLowerCase()]||Q.error("unsupported pseudo: "+e);return a[m]?a(t):a.length>1?(i=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?te((function(e,r){for(var i,n=a(e,t),s=n.length;s--;)e[i=x.call(e,n[s])]=!(r[i]=n[s])})):function(e){return a(e,0,i)}):a}},pseudos:{not:te((function(e){var t=[],r=[],i=me(e.replace(I,"$1"));return i[m]?te((function(e,t,r,a){for(var n,s=i(e,null,a,[]),o=e.length;o--;)(n=s[o])&&(e[o]=!(t[o]=n))})):function(e,a,n){return t[0]=e,i(t,null,n,r),t[0]=null,!r.pop()}})),has:te((function(e){return function(t){return Q(e,t).length>0}})),contains:te((function(e){return e=e.replace(z,q),function(t){return(t.textContent||v.text(t)).indexOf(e)>-1}})),lang:te((function(e){return X.test(e||"")||Q.error("unsupported lang: "+e),e=e.replace(z,q).toLowerCase(),function(t){var r;do{if(r=c?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===l},focus:function(e){return e===function(){try{return f.activeElement}catch(e){}}()&&f.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:ne(!1),disabled:ne(!0),checked:function(e){return C(e,"input")&&!!e.checked||C(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){return C(e,"input")&&"button"===e.type||C(e,"button")},text:function(e){var t;return C(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:se((function(){return[0]})),last:se((function(e,t){return[t-1]})),eq:se((function(e,t,r){return[r<0?r+t:r]})),even:se((function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e})),odd:se((function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e})),lt:se((function(e,t,r){var i;for(i=r<0?r+t:r>t?t:r;--i>=0;)e.push(i);return e})),gt:se((function(e,t,r){for(var i=r<0?r+t:r;++i<t;)e.push(i);return e}))}},r.pseudos.nth=r.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ie(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=ae(t);function fe(){}function le(e,t){var i,a,n,s,o,x,f,l=b[e+" "];if(l)return t?0:l.slice(0);for(o=e,x=[],f=r.preFilter;o;){for(s in i&&!(a=N.exec(o))||(a&&(o=o.slice(a[0].length)||o),x.push(n=[])),i=!1,(a=V.exec(o))&&(i=a.shift(),n.push({value:i,type:a[0].replace(I," ")}),o=o.slice(i.length)),r.filter)!(a=W[s].exec(o))||f[s]&&!(a=f[s](a))||(i=a.shift(),n.push({value:i,type:s,matches:a}),o=o.slice(i.length));if(!i)break}return t?o.length:o?Q.error(e):b(e,x).slice(0)}function he(e){for(var t=0,r=e.length,i="";t<r;t++)i+=e[t].value;return i}function ce(e,t,r){var i=t.dir,a=t.next,n=a||i,s=r&&"parentNode"===n,o=y++;return t.first?function(t,r,a){for(;t=t[i];)if(1===t.nodeType||s)return e(t,r,a);return!1}:function(t,r,x){var f,l,h=[P,o];if(x){for(;t=t[i];)if((1===t.nodeType||s)&&e(t,r,x))return!0}else for(;t=t[i];)if(1===t.nodeType||s)if(l=t[m]||(t[m]={}),a&&C(t,a))t=t[i]||t;else{if((f=l[n])&&f[0]===P&&f[1]===o)return h[2]=f[2];if(l[n]=h,h[2]=e(t,r,x))return!0}return!1}}function ue(e){return e.length>1?function(t,r,i){for(var a=e.length;a--;)if(!e[a](t,r,i))return!1;return!0}:e[0]}function _e(e,t,r,i,a){for(var n,s=[],o=0,x=e.length,f=null!=t;o<x;o++)(n=e[o])&&(r&&!r(n,i,a)||(s.push(n),f&&t.push(o)));return s}function de(e,t,r,i,a,n){return i&&!i[m]&&(i=de(i)),a&&!a[m]&&(a=de(a,n)),te((function(n,s,o,f){var l,h,c,u,_=[],d=[],m=s.length,P=n||function(e,t,r){for(var i=0,a=t.length;i<a;i++)Q(e,t[i],r);return r}(t||"*",o.nodeType?[o]:o,[]),y=!e||!n&&t?P:_e(P,_,e,o,f);if(r?r(y,u=a||(n?e:m||i)?[]:s,o,f):u=y,i)for(l=_e(u,d),i(l,[],o,f),h=l.length;h--;)(c=l[h])&&(u[d[h]]=!(y[d[h]]=c));if(n){if(a||e){if(a){for(l=[],h=u.length;h--;)(c=u[h])&&l.push(y[h]=c);a(null,u=[],l,f)}for(h=u.length;h--;)(c=u[h])&&(l=a?x.call(n,c):_[h])>-1&&(n[l]=!(s[l]=c))}}else u=_e(u===s?u.splice(m,u.length):u),a?a(null,s,u,f):p.apply(s,u)}))}function pe(e){for(var t,i,n,s=e.length,o=r.relative[e[0].type],f=o||r.relative[" "],l=o?1:0,h=ce((function(e){return e===t}),f,!0),c=ce((function(e){return x.call(t,e)>-1}),f,!0),u=[function(e,r,i){var n=!o&&(i||r!=a)||((t=r).nodeType?h(e,r,i):c(e,r,i));return t=null,n}];l<s;l++)if(i=r.relative[e[l].type])u=[ce(ue(u),i)];else{if((i=r.filter[e[l].type].apply(null,e[l].matches))[m]){for(n=++l;n<s&&!r.relative[e[n].type];n++);return de(l>1&&ue(u),l>1&&he(e.slice(0,l-1).concat({value:" "===e[l-2].type?"*":""})).replace(I,"$1"),i,l<n&&pe(e.slice(l,n)),n<s&&pe(e=e.slice(n)),n<s&&he(e))}u.push(i)}return ue(u)}function me(e,t){var i,n=[],s=[],o=S[e+" "];if(!o){for(t||(t=le(e)),i=t.length;i--;)(o=pe(t[i]))[m]?n.push(o):s.push(o);o=S(e,function(e,t){var i=t.length>0,n=e.length>0,s=function(s,o,x,l,h){var u,_,d,m=0,y="0",g=s&&[],b=[],S=a,R=s||n&&r.find.TAG("*",h),C=P+=null==S?1:Math.random()||.1,F=R.length;for(h&&(a=o==f||o||h);y!==F&&null!=(u=R[y]);y++){if(n&&u){for(_=0,o||u.ownerDocument==f||(xe(u),x=!c);d=e[_++];)if(d(u,o||f,x)){p.call(l,u);break}h&&(P=C)}i&&((u=!d&&u)&&m--,s&&g.push(u))}if(m+=y,i&&y!==m){for(_=0;d=t[_++];)d(g,b,o,x);if(s){if(m>0)for(;y--;)g[y]||b[y]||(b[y]=E.call(l));b=_e(b)}p.apply(l,b),h&&!s&&b.length>0&&m+t.length>1&&v.uniqueSort(l)}return h&&(P=C,a=S),g};return i?te(s):s}(s,n)),o.selector=e}return o}function Pe(e,t,i,a){var n,s,o,x,f,l="function"==typeof e&&e,h=!a&&le(e=l.selector||e);if(i=i||[],1===h.length){if((s=h[0]=h[0].slice(0)).length>2&&"ID"===(o=s[0]).type&&9===t.nodeType&&c&&r.relative[s[1].type]){if(!(t=(r.find.ID(o.matches[0].replace(z,q),t)||[])[0]))return i;l&&(t=t.parentNode),e=e.slice(s.shift().value.length)}for(n=W.needsContext.test(e)?0:s.length;n--&&(o=s[n],!r.relative[x=o.type]);)if((f=r.find[x])&&(a=f(o.matches[0].replace(z,q),j.test(s[0].type)&&oe(t.parentNode)||t))){if(s.splice(n,1),!(e=a.length&&he(s)))return p.apply(i,a),i;break}}return(l||me(e,h))(a,t,!c,i,!t||j.test(e)&&oe(t.parentNode)||t),i}fe.prototype=r.filters=r.pseudos,r.setFilters=new fe,_.sortStable=m.split("").sort(M).join("")===m,xe(),_.sortDetached=re((function(e){return 1&e.compareDocumentPosition(f.createElement("fieldset"))})),v.find=Q,v.expr[":"]=v.expr.pseudos,v.unique=v.uniqueSort,Q.compile=me,Q.select=Pe,Q.setDocument=xe,Q.tokenize=le,Q.escape=v.escapeSelector,Q.getText=v.text,Q.isXML=v.isXMLDoc,Q.selectors=v.expr,Q.support=v.support,Q.uniqueSort=v.uniqueSort}();var k=function(e,t,r){for(var i=[],a=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(a&&v(e).is(r))break;i.push(e)}return i},B=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},O=v.expr.match.needsContext,H=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function N(e,t,r){return d(t)?v.grep(e,(function(e,i){return!!t.call(e,i,e)!==r})):t.nodeType?v.grep(e,(function(e){return e===t!==r})):"string"!=typeof t?v.grep(e,(function(e){return x.call(t,e)>-1!==r})):v.filter(t,e,r)}v.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?v.find.matchesSelector(i,e)?[i]:[]:v.find.matches(e,v.grep(t,(function(e){return 1===e.nodeType})))},v.fn.extend({find:function(e){var t,r,i=this.length,a=this;if("string"!=typeof e)return this.pushStack(v(e).filter((function(){for(t=0;t<i;t++)if(v.contains(a[t],this))return!0})));for(r=this.pushStack([]),t=0;t<i;t++)v.find(e,a[t],r);return i>1?v.uniqueSort(r):r},filter:function(e){return this.pushStack(N(this,e||[],!1))},not:function(e){return this.pushStack(N(this,e||[],!0))},is:function(e){return!!N(this,"string"==typeof e&&O.test(e)?v(e):e||[],!1).length}});var V,Y=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,U=v.fn.init=function(e,t,r){var i,a;if(!e)return this;if(r=r||V,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:Y.exec(e))||!i[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof v?t[0]:t,v.merge(this,v.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:m,!0)),H.test(i[1])&&v.isPlainObject(t))for(i in t)d(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(a=m.getElementById(i[2]))&&(this[0]=a,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):d(e)?void 0!==r.ready?r.ready(e):e(v):v.makeArray(e,this)};U.prototype=v.fn,V=v(m);var X=/^(?:parents|prev(?:Until|All))/,W={children:!0,contents:!0,next:!0,prev:!0};function G(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}v.fn.extend({has:function(e){var t=v(e,this),r=t.length;return this.filter((function(){for(var e=0;e<r;e++)if(v.contains(this,t[e]))return!0}))},closest:function(e,t){var r,i=0,a=this.length,n=[],s="string"!=typeof e&&v(e);if(!O.test(e))for(;i<a;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(s?s.index(r)>-1:1===r.nodeType&&v.find.matchesSelector(r,e))){n.push(r);break}return this.pushStack(n.length>1?v.uniqueSort(n):n)},index:function(e){return e?"string"==typeof e?x.call(v(e),this[0]):x.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(v.uniqueSort(v.merge(this.get(),v(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),v.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,r){return k(e,"parentNode",r)},next:function(e){return G(e,"nextSibling")},prev:function(e){return G(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,r){return k(e,"nextSibling",r)},prevUntil:function(e,t,r){return k(e,"previousSibling",r)},siblings:function(e){return B((e.parentNode||{}).firstChild,e)},children:function(e){return B(e.firstChild)},contents:function(e){return null!=e.contentDocument&&a(e.contentDocument)?e.contentDocument:(C(e,"template")&&(e=e.content||e),v.merge([],e.childNodes))}},(function(e,t){v.fn[e]=function(r,i){var a=v.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(a=v.filter(i,a)),this.length>1&&(W[e]||v.uniqueSort(a),X.test(e)&&a.reverse()),this.pushStack(a)}}));var J=/[^\x20\t\r\n\f]+/g;function Z(e){return e}function j(e){throw e}function z(e,t,r,i){var a;try{e&&d(a=e.promise)?a.call(e).done(t).fail(r):e&&d(a=e.then)?a.call(e,t,r):t.apply(void 0,[e].slice(i))}catch(e){r.apply(void 0,[e])}}v.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return v.each(e.match(J)||[],(function(e,r){t[r]=!0})),t}(e):v.extend({},e);var t,r,i,a,n=[],s=[],o=-1,x=function(){for(a=a||e.once,i=t=!0;s.length;o=-1)for(r=s.shift();++o<n.length;)!1===n[o].apply(r[0],r[1])&&e.stopOnFalse&&(o=n.length,r=!1);e.memory||(r=!1),t=!1,a&&(n=r?[]:"")},f={add:function(){return n&&(r&&!t&&(o=n.length-1,s.push(r)),function t(r){v.each(r,(function(r,i){d(i)?e.unique&&f.has(i)||n.push(i):i&&i.length&&"string"!==g(i)&&t(i)}))}(arguments),r&&!t&&x()),this},remove:function(){return v.each(arguments,(function(e,t){for(var r;(r=v.inArray(t,n,r))>-1;)n.splice(r,1),r<=o&&o--})),this},has:function(e){return e?v.inArray(e,n)>-1:n.length>0},empty:function(){return n&&(n=[]),this},disable:function(){return a=s=[],n=r="",this},disabled:function(){return!n},lock:function(){return a=s=[],r||t||(n=r=""),this},locked:function(){return!!a},fireWith:function(e,r){return a||(r=[e,(r=r||[]).slice?r.slice():r],s.push(r),t||x()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!i}};return f},v.extend({Deferred:function(t){var i=[["notify","progress",v.Callbacks("memory"),v.Callbacks("memory"),2],["resolve","done",v.Callbacks("once memory"),v.Callbacks("once memory"),0,"resolved"],["reject","fail",v.Callbacks("once memory"),v.Callbacks("once memory"),1,"rejected"]],a="pending",n={state:function(){return a},always:function(){return s.done(arguments).fail(arguments),this},catch:function(e){return n.then(null,e)},pipe:function(){var e=arguments;return v.Deferred((function(t){v.each(i,(function(r,i){var a=d(e[i[4]])&&e[i[4]];s[i[1]]((function(){var e=a&&a.apply(this,arguments);e&&d(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+"With"](this,a?[e]:arguments)}))})),e=null})).promise()},then:function(t,a,n){var s=0;function o(t,i,a,n){return function(){var x=this,f=arguments,l=function(){var e,l;if(!(t<s)){if((e=a.apply(x,f))===i.promise())throw new TypeError("Thenable self-resolution");l=e&&("object"==r(e)||"function"==typeof e)&&e.then,d(l)?n?l.call(e,o(s,i,Z,n),o(s,i,j,n)):(s++,l.call(e,o(s,i,Z,n),o(s,i,j,n),o(s,i,Z,i.notifyWith))):(a!==Z&&(x=void 0,f=[e]),(n||i.resolveWith)(x,f))}},h=n?l:function(){try{l()}catch(e){v.Deferred.exceptionHook&&v.Deferred.exceptionHook(e,h.error),t+1>=s&&(a!==j&&(x=void 0,f=[e]),i.rejectWith(x,f))}};t?h():(v.Deferred.getErrorHook?h.error=v.Deferred.getErrorHook():v.Deferred.getStackHook&&(h.error=v.Deferred.getStackHook()),e.setTimeout(h))}}return v.Deferred((function(e){i[0][3].add(o(0,e,d(n)?n:Z,e.notifyWith)),i[1][3].add(o(0,e,d(t)?t:Z)),i[2][3].add(o(0,e,d(a)?a:j))})).promise()},promise:function(e){return null!=e?v.extend(e,n):n}},s={};return v.each(i,(function(e,t){var r=t[2],o=t[5];n[t[1]]=r.add,o&&r.add((function(){a=o}),i[3-e][2].disable,i[3-e][3].disable,i[0][2].lock,i[0][3].lock),r.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=r.fireWith})),n.promise(s),t&&t.call(s,s),s},when:function(e){var t=arguments.length,r=t,i=Array(r),a=n.call(arguments),s=v.Deferred(),o=function(e){return function(r){i[e]=this,a[e]=arguments.length>1?n.call(arguments):r,--t||s.resolveWith(i,a)}};if(t<=1&&(z(e,s.done(o(r)).resolve,s.reject,!t),"pending"===s.state()||d(a[r]&&a[r].then)))return s.then();for(;r--;)z(a[r],o(r),s.reject);return s.promise()}});var q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;v.Deferred.exceptionHook=function(t,r){e.console&&e.console.warn&&t&&q.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,r)},v.readyException=function(t){e.setTimeout((function(){throw t}))};var $=v.Deferred();function K(){m.removeEventListener("DOMContentLoaded",K),e.removeEventListener("load",K),v.ready()}v.fn.ready=function(e){return $.then(e).catch((function(e){v.readyException(e)})),this},v.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--v.readyWait:v.isReady)||(v.isReady=!0,!0!==e&&--v.readyWait>0||$.resolveWith(m,[v]))}}),v.ready.then=$.then,"complete"===m.readyState||"loading"!==m.readyState&&!m.documentElement.doScroll?e.setTimeout(v.ready):(m.addEventListener("DOMContentLoaded",K),e.addEventListener("load",K));var Q=function e(t,r,i,a,n,s,o){var x=0,f=t.length,l=null==i;if("object"===g(i))for(x in n=!0,i)e(t,r,x,i[x],!0,s,o);else if(void 0!==a&&(n=!0,d(a)||(o=!0),l&&(o?(r.call(t,a),r=null):(l=r,r=function(e,t,r){return l.call(v(e),r)})),r))for(;x<f;x++)r(t[x],i,o?a:a.call(t[x],x,r(t[x],i)));return n?t:l?r.call(t):f?r(t[0],i):s},ee=/^-ms-/,te=/-([a-z])/g;function re(e,t){return t.toUpperCase()}function ie(e){return e.replace(ee,"ms-").replace(te,re)}var ae=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function ne(){this.expando=v.expando+ne.uid++}ne.uid=1,ne.prototype={cache:function(e){var t=e[this.expando];return t||(t={},ae(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var i,a=this.cache(e);if("string"==typeof t)a[ie(t)]=r;else for(i in t)a[ie(i)]=t[i];return a},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][ie(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i=e[this.expando];if(void 0!==i){if(void 0!==t){r=(t=Array.isArray(t)?t.map(ie):(t=ie(t))in i?[t]:t.match(J)||[]).length;for(;r--;)delete i[t[r]]}(void 0===t||v.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!v.isEmptyObject(t)}};var se=new ne,oe=new ne,xe=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,fe=/[A-Z]/g;function le(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(fe,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(i))){try{r=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:xe.test(e)?JSON.parse(e):e)}(r)}catch(e){}oe.set(e,t,r)}else r=void 0;return r}v.extend({hasData:function(e){return oe.hasData(e)||se.hasData(e)},data:function(e,t,r){return oe.access(e,t,r)},removeData:function(e,t){oe.remove(e,t)},_data:function(e,t,r){return se.access(e,t,r)},_removeData:function(e,t){se.remove(e,t)}}),v.fn.extend({data:function(e,t){var i,a,n,s=this[0],o=s&&s.attributes;if(void 0===e){if(this.length&&(n=oe.get(s),1===s.nodeType&&!se.get(s,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&0===(a=o[i].name).indexOf("data-")&&(a=ie(a.slice(5)),le(s,a,n[a]));se.set(s,"hasDataAttrs",!0)}return n}return"object"==r(e)?this.each((function(){oe.set(this,e)})):Q(this,(function(t){var r;if(s&&void 0===t)return void 0!==(r=oe.get(s,e))||void 0!==(r=le(s,e))?r:void 0;this.each((function(){oe.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){oe.remove(this,e)}))}}),v.extend({queue:function(e,t,r){var i;if(e)return t=(t||"fx")+"queue",i=se.get(e,t),r&&(!i||Array.isArray(r)?i=se.access(e,t,v.makeArray(r)):i.push(r)),i||[]},dequeue:function(e,t){t=t||"fx";var r=v.queue(e,t),i=r.length,a=r.shift(),n=v._queueHooks(e,t);"inprogress"===a&&(a=r.shift(),i--),a&&("fx"===t&&r.unshift("inprogress"),delete n.stop,a.call(e,(function(){v.dequeue(e,t)}),n)),!i&&n&&n.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return se.get(e,r)||se.access(e,r,{empty:v.Callbacks("once memory").add((function(){se.remove(e,[t+"queue",r])}))})}}),v.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?v.queue(this[0],e):void 0===t?this:this.each((function(){var r=v.queue(this,e,t);v._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&v.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){v.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,a=v.Deferred(),n=this,s=this.length,o=function(){--i||a.resolveWith(n,[n])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";s--;)(r=se.get(n[s],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(o));return o(),a.promise(t)}});var he=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ce=new RegExp("^(?:([+-])=|)("+he+")([a-z%]*)$","i"),ue=["Top","Right","Bottom","Left"],_e=m.documentElement,de=function(e){return v.contains(e.ownerDocument,e)},pe={composed:!0};_e.getRootNode&&(de=function(e){return v.contains(e.ownerDocument,e)||e.getRootNode(pe)===e.ownerDocument});var me=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&de(e)&&"none"===v.css(e,"display")};function Pe(e,t,r,i){var a,n,s=20,o=i?function(){return i.cur()}:function(){return v.css(e,t,"")},x=o(),f=r&&r[3]||(v.cssNumber[t]?"":"px"),l=e.nodeType&&(v.cssNumber[t]||"px"!==f&&+x)&&ce.exec(v.css(e,t));if(l&&l[3]!==f){for(x/=2,f=f||l[3],l=+x||1;s--;)v.style(e,t,l+f),(1-n)*(1-(n=o()/x||.5))<=0&&(s=0),l/=n;l*=2,v.style(e,t,l+f),r=r||[]}return r&&(l=+l||+x||0,a=r[1]?l+(r[1]+1)*r[2]:+r[2],i&&(i.unit=f,i.start=l,i.end=a)),a}var ye={};function ge(e){var t,r=e.ownerDocument,i=e.nodeName,a=ye[i];return a||(t=r.body.appendChild(r.createElement(i)),a=v.css(t,"display"),t.parentNode.removeChild(t),"none"===a&&(a="block"),ye[i]=a,a)}function be(e,t){for(var r,i,a=[],n=0,s=e.length;n<s;n++)(i=e[n]).style&&(r=i.style.display,t?("none"===r&&(a[n]=se.get(i,"display")||null,a[n]||(i.style.display="")),""===i.style.display&&me(i)&&(a[n]=ge(i))):"none"!==r&&(a[n]="none",se.set(i,"display",r)));for(n=0;n<s;n++)null!=a[n]&&(e[n].style.display=a[n]);return e}v.fn.extend({show:function(){return be(this,!0)},hide:function(){return be(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){me(this)?v(this).show():v(this).hide()}))}});var Se,ve,Re=/^(?:checkbox|radio)$/i,Ce=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ee=/^$|^module$|\/(?:java|ecma)script/i;Se=m.createDocumentFragment().appendChild(m.createElement("div")),(ve=m.createElement("input")).setAttribute("type","radio"),ve.setAttribute("checked","checked"),ve.setAttribute("name","t"),Se.appendChild(ve),_.checkClone=Se.cloneNode(!0).cloneNode(!0).lastChild.checked,Se.innerHTML="<textarea>x</textarea>",_.noCloneChecked=!!Se.cloneNode(!0).lastChild.defaultValue,Se.innerHTML="<option></option>",_.option=!!Se.lastChild;var Fe={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Te(e,t){var r;return r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&C(e,t)?v.merge([e],r):r}function De(e,t){for(var r=0,i=e.length;r<i;r++)se.set(e[r],"globalEval",!t||se.get(t[r],"globalEval"))}Fe.tbody=Fe.tfoot=Fe.colgroup=Fe.caption=Fe.thead,Fe.th=Fe.td,_.option||(Fe.optgroup=Fe.option=[1,"<select multiple='multiple'>","</select>"]);var Ie=/<|&#?\w+;/;function Me(e,t,r,i,a){for(var n,s,o,x,f,l,h=t.createDocumentFragment(),c=[],u=0,_=e.length;u<_;u++)if((n=e[u])||0===n)if("object"===g(n))v.merge(c,n.nodeType?[n]:n);else if(Ie.test(n)){for(s=s||h.appendChild(t.createElement("div")),o=(Ce.exec(n)||["",""])[1].toLowerCase(),x=Fe[o]||Fe._default,s.innerHTML=x[1]+v.htmlPrefilter(n)+x[2],l=x[0];l--;)s=s.lastChild;v.merge(c,s.childNodes),(s=h.firstChild).textContent=""}else c.push(t.createTextNode(n));for(h.textContent="",u=0;n=c[u++];)if(i&&v.inArray(n,i)>-1)a&&a.push(n);else if(f=de(n),s=Te(h.appendChild(n),"script"),f&&De(s),r)for(l=0;n=s[l++];)Ee.test(n.type||"")&&r.push(n);return h}var Ae=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Le(){return!1}function ke(e,t,i,a,n,s){var o,x;if("object"==r(t)){for(x in"string"!=typeof i&&(a=a||i,i=void 0),t)ke(e,x,i,a,t[x],s);return e}if(null==a&&null==n?(n=i,a=i=void 0):null==n&&("string"==typeof i?(n=a,a=void 0):(n=a,a=i,i=void 0)),!1===n)n=Le;else if(!n)return e;return 1===s&&(o=n,n=function(e){return v().off(e),o.apply(this,arguments)},n.guid=o.guid||(o.guid=v.guid++)),e.each((function(){v.event.add(this,t,n,a,i)}))}function Be(e,t,r){r?(se.set(e,t,!1),v.event.add(e,t,{namespace:!1,handler:function(e){var r,i=se.get(this,t);if(1&e.isTrigger&&this[t]){if(i)(v.event.special[t]||{}).delegateType&&e.stopPropagation();else if(i=n.call(arguments),se.set(this,t,i),this[t](),r=se.get(this,t),se.set(this,t,!1),i!==r)return e.stopImmediatePropagation(),e.preventDefault(),r}else i&&(se.set(this,t,v.event.trigger(i[0],i.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=we)}})):void 0===se.get(e,t)&&v.event.add(e,t,we)}v.event={global:{},add:function(e,t,r,i,a){var n,s,o,x,f,l,h,c,u,_,d,p=se.get(e);if(ae(e))for(r.handler&&(r=(n=r).handler,a=n.selector),a&&v.find.matchesSelector(_e,a),r.guid||(r.guid=v.guid++),(x=p.events)||(x=p.events=Object.create(null)),(s=p.handle)||(s=p.handle=function(t){return void 0!==v&&v.event.triggered!==t.type?v.event.dispatch.apply(e,arguments):void 0}),f=(t=(t||"").match(J)||[""]).length;f--;)u=d=(o=Ae.exec(t[f])||[])[1],_=(o[2]||"").split(".").sort(),u&&(h=v.event.special[u]||{},u=(a?h.delegateType:h.bindType)||u,h=v.event.special[u]||{},l=v.extend({type:u,origType:d,data:i,handler:r,guid:r.guid,selector:a,needsContext:a&&v.expr.match.needsContext.test(a),namespace:_.join(".")},n),(c=x[u])||((c=x[u]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(e,i,_,s)||e.addEventListener&&e.addEventListener(u,s)),h.add&&(h.add.call(e,l),l.handler.guid||(l.handler.guid=r.guid)),a?c.splice(c.delegateCount++,0,l):c.push(l),v.event.global[u]=!0)},remove:function(e,t,r,i,a){var n,s,o,x,f,l,h,c,u,_,d,p=se.hasData(e)&&se.get(e);if(p&&(x=p.events)){for(f=(t=(t||"").match(J)||[""]).length;f--;)if(u=d=(o=Ae.exec(t[f])||[])[1],_=(o[2]||"").split(".").sort(),u){for(h=v.event.special[u]||{},c=x[u=(i?h.delegateType:h.bindType)||u]||[],o=o[2]&&new RegExp("(^|\\.)"+_.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=n=c.length;n--;)l=c[n],!a&&d!==l.origType||r&&r.guid!==l.guid||o&&!o.test(l.namespace)||i&&i!==l.selector&&("**"!==i||!l.selector)||(c.splice(n,1),l.selector&&c.delegateCount--,h.remove&&h.remove.call(e,l));s&&!c.length&&(h.teardown&&!1!==h.teardown.call(e,_,p.handle)||v.removeEvent(e,u,p.handle),delete x[u])}else for(u in x)v.event.remove(e,u+t[f],r,i,!0);v.isEmptyObject(x)&&se.remove(e,"handle events")}},dispatch:function(e){var t,r,i,a,n,s,o=new Array(arguments.length),x=v.event.fix(e),f=(se.get(this,"events")||Object.create(null))[x.type]||[],l=v.event.special[x.type]||{};for(o[0]=x,t=1;t<arguments.length;t++)o[t]=arguments[t];if(x.delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,x)){for(s=v.event.handlers.call(this,x,f),t=0;(a=s[t++])&&!x.isPropagationStopped();)for(x.currentTarget=a.elem,r=0;(n=a.handlers[r++])&&!x.isImmediatePropagationStopped();)x.rnamespace&&!1!==n.namespace&&!x.rnamespace.test(n.namespace)||(x.handleObj=n,x.data=n.data,void 0!==(i=((v.event.special[n.origType]||{}).handle||n.handler).apply(a.elem,o))&&!1===(x.result=i)&&(x.preventDefault(),x.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,x),x.result}},handlers:function(e,t){var r,i,a,n,s,o=[],x=t.delegateCount,f=e.target;if(x&&f.nodeType&&!("click"===e.type&&e.button>=1))for(;f!==this;f=f.parentNode||this)if(1===f.nodeType&&("click"!==e.type||!0!==f.disabled)){for(n=[],s={},r=0;r<x;r++)void 0===s[a=(i=t[r]).selector+" "]&&(s[a]=i.needsContext?v(a,this).index(f)>-1:v.find(a,this,null,[f]).length),s[a]&&n.push(i);n.length&&o.push({elem:f,handlers:n})}return f=this,x<t.length&&o.push({elem:f,handlers:t.slice(x)}),o},addProp:function(e,t){Object.defineProperty(v.Event.prototype,e,{enumerable:!0,configurable:!0,get:d(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[v.expando]?e:new v.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Re.test(t.type)&&t.click&&C(t,"input")&&Be(t,"click",!0),!1},trigger:function(e){var t=this||e;return Re.test(t.type)&&t.click&&C(t,"input")&&Be(t,"click"),!0},_default:function(e){var t=e.target;return Re.test(t.type)&&t.click&&C(t,"input")&&se.get(t,"click")||C(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},v.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},v.Event=function(e,t){if(!(this instanceof v.Event))return new v.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Le,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&v.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[v.expando]=!0},v.Event.prototype={constructor:v.Event,isDefaultPrevented:Le,isPropagationStopped:Le,isImmediatePropagationStopped:Le,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},v.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},v.event.addProp),v.each({focus:"focusin",blur:"focusout"},(function(e,t){function r(e){if(m.documentMode){var r=se.get(this,"handle"),i=v.event.fix(e);i.type="focusin"===e.type?"focus":"blur",i.isSimulated=!0,r(e),i.target===i.currentTarget&&r(i)}else v.event.simulate(t,e.target,v.event.fix(e))}v.event.special[e]={setup:function(){var i;if(Be(this,e,!0),!m.documentMode)return!1;(i=se.get(this,t))||this.addEventListener(t,r),se.set(this,t,(i||0)+1)},trigger:function(){return Be(this,e),!0},teardown:function(){var e;if(!m.documentMode)return!1;(e=se.get(this,t)-1)?se.set(this,t,e):(this.removeEventListener(t,r),se.remove(this,t))},_default:function(t){return se.get(t.target,e)},delegateType:t},v.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,a=m.documentMode?this:i,n=se.get(a,t);n||(m.documentMode?this.addEventListener(t,r):i.addEventListener(e,r,!0)),se.set(a,t,(n||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,a=m.documentMode?this:i,n=se.get(a,t)-1;n?se.set(a,t,n):(m.documentMode?this.removeEventListener(t,r):i.removeEventListener(e,r,!0),se.remove(a,t))}}})),v.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){v.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=e.relatedTarget,a=e.handleObj;return i&&(i===this||v.contains(this,i))||(e.type=a.origType,r=a.handler.apply(this,arguments),e.type=t),r}}})),v.fn.extend({on:function(e,t,r,i){return ke(this,e,t,r,i)},one:function(e,t,r,i){return ke(this,e,t,r,i,1)},off:function(e,t,i){var a,n;if(e&&e.preventDefault&&e.handleObj)return a=e.handleObj,v(e.delegateTarget).off(a.namespace?a.origType+"."+a.namespace:a.origType,a.selector,a.handler),this;if("object"==r(e)){for(n in e)this.off(n,t,e[n]);return this}return!1!==t&&"function"!=typeof t||(i=t,t=void 0),!1===i&&(i=Le),this.each((function(){v.event.remove(this,e,i,t)}))}});var Oe=/<script|<style|<link/i,He=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ve(e,t){return C(e,"table")&&C(11!==t.nodeType?t:t.firstChild,"tr")&&v(e).children("tbody")[0]||e}function Ye(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ue(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Xe(e,t){var r,i,a,n,s,o;if(1===t.nodeType){if(se.hasData(e)&&(o=se.get(e).events))for(a in se.remove(t,"handle events"),o)for(r=0,i=o[a].length;r<i;r++)v.event.add(t,a,o[a][r]);oe.hasData(e)&&(n=oe.access(e),s=v.extend({},n),oe.set(t,s))}}function We(e,t){var r=t.nodeName.toLowerCase();"input"===r&&Re.test(e.type)?t.checked=e.checked:"input"!==r&&"textarea"!==r||(t.defaultValue=e.defaultValue)}function Ge(e,t,r,i){t=s(t);var a,n,o,x,f,l,h=0,c=e.length,u=c-1,p=t[0],m=d(p);if(m||c>1&&"string"==typeof p&&!_.checkClone&&He.test(p))return e.each((function(a){var n=e.eq(a);m&&(t[0]=p.call(this,a,n.html())),Ge(n,t,r,i)}));if(c&&(n=(a=Me(t,e[0].ownerDocument,!1,e,i)).firstChild,1===a.childNodes.length&&(a=n),n||i)){for(x=(o=v.map(Te(a,"script"),Ye)).length;h<c;h++)f=a,h!==u&&(f=v.clone(f,!0,!0),x&&v.merge(o,Te(f,"script"))),r.call(e[h],f,h);if(x)for(l=o[o.length-1].ownerDocument,v.map(o,Ue),h=0;h<x;h++)f=o[h],Ee.test(f.type||"")&&!se.access(f,"globalEval")&&v.contains(l,f)&&(f.src&&"module"!==(f.type||"").toLowerCase()?v._evalUrl&&!f.noModule&&v._evalUrl(f.src,{nonce:f.nonce||f.getAttribute("nonce")},l):y(f.textContent.replace(Ne,""),f,l))}return e}function Je(e,t,r){for(var i,a=t?v.filter(t,e):e,n=0;null!=(i=a[n]);n++)r||1!==i.nodeType||v.cleanData(Te(i)),i.parentNode&&(r&&de(i)&&De(Te(i,"script")),i.parentNode.removeChild(i));return e}v.extend({htmlPrefilter:function(e){return e},clone:function(e,t,r){var i,a,n,s,o=e.cloneNode(!0),x=de(e);if(!(_.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||v.isXMLDoc(e)))for(s=Te(o),i=0,a=(n=Te(e)).length;i<a;i++)We(n[i],s[i]);if(t)if(r)for(n=n||Te(e),s=s||Te(o),i=0,a=n.length;i<a;i++)Xe(n[i],s[i]);else Xe(e,o);return(s=Te(o,"script")).length>0&&De(s,!x&&Te(e,"script")),o},cleanData:function(e){for(var t,r,i,a=v.event.special,n=0;void 0!==(r=e[n]);n++)if(ae(r)){if(t=r[se.expando]){if(t.events)for(i in t.events)a[i]?v.event.remove(r,i):v.removeEvent(r,i,t.handle);r[se.expando]=void 0}r[oe.expando]&&(r[oe.expando]=void 0)}}}),v.fn.extend({detach:function(e){return Je(this,e,!0)},remove:function(e){return Je(this,e)},text:function(e){return Q(this,(function(e){return void 0===e?v.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return Ge(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ve(this,e).appendChild(e)}))},prepend:function(){return Ge(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ve(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return Ge(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return Ge(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(v.cleanData(Te(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return v.clone(this,e,t)}))},html:function(e){return Q(this,(function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Oe.test(e)&&!Fe[(Ce.exec(e)||["",""])[1].toLowerCase()]){e=v.htmlPrefilter(e);try{for(;r<i;r++)1===(t=this[r]||{}).nodeType&&(v.cleanData(Te(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return Ge(this,arguments,(function(t){var r=this.parentNode;v.inArray(this,e)<0&&(v.cleanData(Te(this)),r&&r.replaceChild(t,this))}),e)}}),v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){v.fn[e]=function(e){for(var r,i=[],a=v(e),n=a.length-1,s=0;s<=n;s++)r=s===n?this:this.clone(!0),v(a[s])[t](r),o.apply(i,r.get());return this.pushStack(i)}}));var Ze=new RegExp("^("+he+")(?!px)[a-z%]+$","i"),je=/^--/,ze=function(t){var r=t.ownerDocument.defaultView;return r&&r.opener||(r=e),r.getComputedStyle(t)},qe=function(e,t,r){var i,a,n={};for(a in t)n[a]=e.style[a],e.style[a]=t[a];for(a in i=r.call(e),t)e.style[a]=n[a];return i},$e=new RegExp(ue.join("|"),"i");function Ke(e,t,r){var i,a,n,s,o=je.test(t),x=e.style;return(r=r||ze(e))&&(s=r.getPropertyValue(t)||r[t],o&&s&&(s=s.replace(I,"$1")||void 0),""!==s||de(e)||(s=v.style(e,t)),!_.pixelBoxStyles()&&Ze.test(s)&&$e.test(t)&&(i=x.width,a=x.minWidth,n=x.maxWidth,x.minWidth=x.maxWidth=x.width=s,s=r.width,x.width=i,x.minWidth=a,x.maxWidth=n)),void 0!==s?s+"":s}function Qe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(l){f.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",_e.appendChild(f).appendChild(l);var t=e.getComputedStyle(l);i="1%"!==t.top,x=12===r(t.marginLeft),l.style.right="60%",s=36===r(t.right),a=36===r(t.width),l.style.position="absolute",n=12===r(l.offsetWidth/3),_e.removeChild(f),l=null}}function r(e){return Math.round(parseFloat(e))}var i,a,n,s,o,x,f=m.createElement("div"),l=m.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",_.clearCloneStyle="content-box"===l.style.backgroundClip,v.extend(_,{boxSizingReliable:function(){return t(),a},pixelBoxStyles:function(){return t(),s},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),x},scrollboxSize:function(){return t(),n},reliableTrDimensions:function(){var t,r,i,a;return null==o&&(t=m.createElement("table"),r=m.createElement("tr"),i=m.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",r.style.cssText="box-sizing:content-box;border:1px solid",r.style.height="1px",i.style.height="9px",i.style.display="block",_e.appendChild(t).appendChild(r).appendChild(i),a=e.getComputedStyle(r),o=parseInt(a.height,10)+parseInt(a.borderTopWidth,10)+parseInt(a.borderBottomWidth,10)===r.offsetHeight,_e.removeChild(t)),o}}))}();var et=["Webkit","Moz","ms"],tt=m.createElement("div").style,rt={};function it(e){return v.cssProps[e]||rt[e]||(e in tt?e:rt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),r=et.length;r--;)if((e=et[r]+t)in tt)return e}(e)||e)}var at=/^(none|table(?!-c[ea]).+)/,nt={position:"absolute",visibility:"hidden",display:"block"},st={letterSpacing:"0",fontWeight:"400"};function ot(e,t,r){var i=ce.exec(t);return i?Math.max(0,i[2]-(r||0))+(i[3]||"px"):t}function xt(e,t,r,i,a,n){var s="width"===t?1:0,o=0,x=0,f=0;if(r===(i?"border":"content"))return 0;for(;s<4;s+=2)"margin"===r&&(f+=v.css(e,r+ue[s],!0,a)),i?("content"===r&&(x-=v.css(e,"padding"+ue[s],!0,a)),"margin"!==r&&(x-=v.css(e,"border"+ue[s]+"Width",!0,a))):(x+=v.css(e,"padding"+ue[s],!0,a),"padding"!==r?x+=v.css(e,"border"+ue[s]+"Width",!0,a):o+=v.css(e,"border"+ue[s]+"Width",!0,a));return!i&&n>=0&&(x+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-n-x-o-.5))||0),x+f}function ft(e,t,r){var i=ze(e),a=(!_.boxSizingReliable()||r)&&"border-box"===v.css(e,"boxSizing",!1,i),n=a,s=Ke(e,t,i),o="offset"+t[0].toUpperCase()+t.slice(1);if(Ze.test(s)){if(!r)return s;s="auto"}return(!_.boxSizingReliable()&&a||!_.reliableTrDimensions()&&C(e,"tr")||"auto"===s||!parseFloat(s)&&"inline"===v.css(e,"display",!1,i))&&e.getClientRects().length&&(a="border-box"===v.css(e,"boxSizing",!1,i),(n=o in e)&&(s=e[o])),(s=parseFloat(s)||0)+xt(e,t,r||(a?"border":"content"),n,i,s)+"px"}function lt(e,t,r,i,a){return new lt.prototype.init(e,t,r,i,a)}v.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=Ke(e,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,i,a){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,s,o,x=ie(t),f=je.test(t),l=e.style;if(f||(t=it(x)),o=v.cssHooks[t]||v.cssHooks[x],void 0===i)return o&&"get"in o&&void 0!==(n=o.get(e,!1,a))?n:l[t];"string"===(s=r(i))&&(n=ce.exec(i))&&n[1]&&(i=Pe(e,t,n),s="number"),null!=i&&i==i&&("number"!==s||f||(i+=n&&n[3]||(v.cssNumber[x]?"":"px")),_.clearCloneStyle||""!==i||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(i=o.set(e,i,a))||(f?l.setProperty(t,i):l[t]=i))}},css:function(e,t,r,i){var a,n,s,o=ie(t);return je.test(t)||(t=it(o)),(s=v.cssHooks[t]||v.cssHooks[o])&&"get"in s&&(a=s.get(e,!0,r)),void 0===a&&(a=Ke(e,t,i)),"normal"===a&&t in st&&(a=st[t]),""===r||r?(n=parseFloat(a),!0===r||isFinite(n)?n||0:a):a}}),v.each(["height","width"],(function(e,t){v.cssHooks[t]={get:function(e,r,i){if(r)return!at.test(v.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?ft(e,t,i):qe(e,nt,(function(){return ft(e,t,i)}))},set:function(e,r,i){var a,n=ze(e),s=!_.scrollboxSize()&&"absolute"===n.position,o=(s||i)&&"border-box"===v.css(e,"boxSizing",!1,n),x=i?xt(e,t,i,o,n):0;return o&&s&&(x-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(n[t])-xt(e,t,"border",!1,n)-.5)),x&&(a=ce.exec(r))&&"px"!==(a[3]||"px")&&(e.style[t]=r,r=v.css(e,t)),ot(0,r,x)}}})),v.cssHooks.marginLeft=Qe(_.reliableMarginLeft,(function(e,t){if(t)return(parseFloat(Ke(e,"marginLeft"))||e.getBoundingClientRect().left-qe(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),v.each({margin:"",padding:"",border:"Width"},(function(e,t){v.cssHooks[e+t]={expand:function(r){for(var i=0,a={},n="string"==typeof r?r.split(" "):[r];i<4;i++)a[e+ue[i]+t]=n[i]||n[i-2]||n[0];return a}},"margin"!==e&&(v.cssHooks[e+t].set=ot)})),v.fn.extend({css:function(e,t){return Q(this,(function(e,t,r){var i,a,n={},s=0;if(Array.isArray(t)){for(i=ze(e),a=t.length;s<a;s++)n[t[s]]=v.css(e,t[s],!1,i);return n}return void 0!==r?v.style(e,t,r):v.css(e,t)}),e,t,arguments.length>1)}}),v.Tween=lt,lt.prototype={constructor:lt,init:function(e,t,r,i,a,n){this.elem=e,this.prop=r,this.easing=a||v.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=n||(v.cssNumber[r]?"":"px")},cur:function(){var e=lt.propHooks[this.prop];return e&&e.get?e.get(this):lt.propHooks._default.get(this)},run:function(e){var t,r=lt.propHooks[this.prop];return this.options.duration?this.pos=t=v.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):lt.propHooks._default.set(this),this}},lt.prototype.init.prototype=lt.prototype,lt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=v.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){v.fx.step[e.prop]?v.fx.step[e.prop](e):1!==e.elem.nodeType||!v.cssHooks[e.prop]&&null==e.elem.style[it(e.prop)]?e.elem[e.prop]=e.now:v.style(e.elem,e.prop,e.now+e.unit)}}},lt.propHooks.scrollTop=lt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},v.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},v.fx=lt.prototype.init,v.fx.step={};var ht,ct,ut=/^(?:toggle|show|hide)$/,_t=/queueHooks$/;function dt(){ct&&(!1===m.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(dt):e.setTimeout(dt,v.fx.interval),v.fx.tick())}function pt(){return e.setTimeout((function(){ht=void 0})),ht=Date.now()}function mt(e,t){var r,i=0,a={height:e};for(t=t?1:0;i<4;i+=2-t)a["margin"+(r=ue[i])]=a["padding"+r]=e;return t&&(a.opacity=a.width=e),a}function Pt(e,t,r){for(var i,a=(yt.tweeners[t]||[]).concat(yt.tweeners["*"]),n=0,s=a.length;n<s;n++)if(i=a[n].call(r,t,e))return i}function yt(e,t,r){var i,a,n=0,s=yt.prefilters.length,o=v.Deferred().always((function(){delete x.elem})),x=function(){if(a)return!1;for(var t=ht||pt(),r=Math.max(0,f.startTime+f.duration-t),i=1-(r/f.duration||0),n=0,s=f.tweens.length;n<s;n++)f.tweens[n].run(i);return o.notifyWith(e,[f,i,r]),i<1&&s?r:(s||o.notifyWith(e,[f,1,0]),o.resolveWith(e,[f]),!1)},f=o.promise({elem:e,props:v.extend({},t),opts:v.extend(!0,{specialEasing:{},easing:v.easing._default},r),originalProperties:t,originalOptions:r,startTime:ht||pt(),duration:r.duration,tweens:[],createTween:function(t,r){var i=v.Tween(e,f.opts,t,r,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(i),i},stop:function(t){var r=0,i=t?f.tweens.length:0;if(a)return this;for(a=!0;r<i;r++)f.tweens[r].run(1);return t?(o.notifyWith(e,[f,1,0]),o.resolveWith(e,[f,t])):o.rejectWith(e,[f,t]),this}}),l=f.props;for(function(e,t){var r,i,a,n,s;for(r in e)if(a=t[i=ie(r)],n=e[r],Array.isArray(n)&&(a=n[1],n=e[r]=n[0]),r!==i&&(e[i]=n,delete e[r]),(s=v.cssHooks[i])&&"expand"in s)for(r in n=s.expand(n),delete e[i],n)r in e||(e[r]=n[r],t[r]=a);else t[i]=a}(l,f.opts.specialEasing);n<s;n++)if(i=yt.prefilters[n].call(f,e,l,f.opts))return d(i.stop)&&(v._queueHooks(f.elem,f.opts.queue).stop=i.stop.bind(i)),i;return v.map(l,Pt,f),d(f.opts.start)&&f.opts.start.call(e,f),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always),v.fx.timer(v.extend(x,{elem:e,anim:f,queue:f.opts.queue})),f}v.Animation=v.extend(yt,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return Pe(r.elem,e,ce.exec(t),r),r}]},tweener:function(e,t){d(e)?(t=e,e=["*"]):e=e.match(J);for(var r,i=0,a=e.length;i<a;i++)r=e[i],yt.tweeners[r]=yt.tweeners[r]||[],yt.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var i,a,n,s,o,x,f,l,h="width"in t||"height"in t,c=this,u={},_=e.style,d=e.nodeType&&me(e),p=se.get(e,"fxshow");for(i in r.queue||(null==(s=v._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,o=s.empty.fire,s.empty.fire=function(){s.unqueued||o()}),s.unqueued++,c.always((function(){c.always((function(){s.unqueued--,v.queue(e,"fx").length||s.empty.fire()}))}))),t)if(a=t[i],ut.test(a)){if(delete t[i],n=n||"toggle"===a,a===(d?"hide":"show")){if("show"!==a||!p||void 0===p[i])continue;d=!0}u[i]=p&&p[i]||v.style(e,i)}if((x=!v.isEmptyObject(t))||!v.isEmptyObject(u))for(i in h&&1===e.nodeType&&(r.overflow=[_.overflow,_.overflowX,_.overflowY],null==(f=p&&p.display)&&(f=se.get(e,"display")),"none"===(l=v.css(e,"display"))&&(f?l=f:(be([e],!0),f=e.style.display||f,l=v.css(e,"display"),be([e]))),("inline"===l||"inline-block"===l&&null!=f)&&"none"===v.css(e,"float")&&(x||(c.done((function(){_.display=f})),null==f&&(l=_.display,f="none"===l?"":l)),_.display="inline-block")),r.overflow&&(_.overflow="hidden",c.always((function(){_.overflow=r.overflow[0],_.overflowX=r.overflow[1],_.overflowY=r.overflow[2]}))),x=!1,u)x||(p?"hidden"in p&&(d=p.hidden):p=se.access(e,"fxshow",{display:f}),n&&(p.hidden=!d),d&&be([e],!0),c.done((function(){for(i in d||be([e]),se.remove(e,"fxshow"),u)v.style(e,i,u[i])}))),x=Pt(d?p[i]:0,i,c),i in p||(p[i]=x.start,d&&(x.end=x.start,x.start=0))}],prefilter:function(e,t){t?yt.prefilters.unshift(e):yt.prefilters.push(e)}}),v.speed=function(e,t,i){var a=e&&"object"==r(e)?v.extend({},e):{complete:i||!i&&t||d(e)&&e,duration:e,easing:i&&t||t&&!d(t)&&t};return v.fx.off?a.duration=0:"number"!=typeof a.duration&&(a.duration in v.fx.speeds?a.duration=v.fx.speeds[a.duration]:a.duration=v.fx.speeds._default),null!=a.queue&&!0!==a.queue||(a.queue="fx"),a.old=a.complete,a.complete=function(){d(a.old)&&a.old.call(this),a.queue&&v.dequeue(this,a.queue)},a},v.fn.extend({fadeTo:function(e,t,r,i){return this.filter(me).css("opacity",0).show().end().animate({opacity:t},e,r,i)},animate:function(e,t,r,i){var a=v.isEmptyObject(e),n=v.speed(t,r,i),s=function(){var t=yt(this,v.extend({},e),n);(a||se.get(this,"finish"))&&t.stop(!0)};return s.finish=s,a||!1===n.queue?this.each(s):this.queue(n.queue,s)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,a=null!=e&&e+"queueHooks",n=v.timers,s=se.get(this);if(a)s[a]&&s[a].stop&&i(s[a]);else for(a in s)s[a]&&s[a].stop&&_t.test(a)&&i(s[a]);for(a=n.length;a--;)n[a].elem!==this||null!=e&&n[a].queue!==e||(n[a].anim.stop(r),t=!1,n.splice(a,1));!t&&r||v.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,r=se.get(this),i=r[e+"queue"],a=r[e+"queueHooks"],n=v.timers,s=i?i.length:0;for(r.finish=!0,v.queue(this,e,[]),a&&a.stop&&a.stop.call(this,!0),t=n.length;t--;)n[t].elem===this&&n[t].queue===e&&(n[t].anim.stop(!0),n.splice(t,1));for(t=0;t<s;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish}))}}),v.each(["toggle","show","hide"],(function(e,t){var r=v.fn[t];v.fn[t]=function(e,i,a){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(mt(t,!0),e,i,a)}})),v.each({slideDown:mt("show"),slideUp:mt("hide"),slideToggle:mt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){v.fn[e]=function(e,r,i){return this.animate(t,e,r,i)}})),v.timers=[],v.fx.tick=function(){var e,t=0,r=v.timers;for(ht=Date.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||v.fx.stop(),ht=void 0},v.fx.timer=function(e){v.timers.push(e),v.fx.start()},v.fx.interval=13,v.fx.start=function(){ct||(ct=!0,dt())},v.fx.stop=function(){ct=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fn.delay=function(t,r){return t=v.fx&&v.fx.speeds[t]||t,r=r||"fx",this.queue(r,(function(r,i){var a=e.setTimeout(r,t);i.stop=function(){e.clearTimeout(a)}}))},function(){var e=m.createElement("input"),t=m.createElement("select").appendChild(m.createElement("option"));e.type="checkbox",_.checkOn=""!==e.value,_.optSelected=t.selected,(e=m.createElement("input")).value="t",e.type="radio",_.radioValue="t"===e.value}();var gt,bt=v.expr.attrHandle;v.fn.extend({attr:function(e,t){return Q(this,v.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){v.removeAttr(this,e)}))}}),v.extend({attr:function(e,t,r){var i,a,n=e.nodeType;if(3!==n&&8!==n&&2!==n)return void 0===e.getAttribute?v.prop(e,t,r):(1===n&&v.isXMLDoc(e)||(a=v.attrHooks[t.toLowerCase()]||(v.expr.match.bool.test(t)?gt:void 0)),void 0!==r?null===r?void v.removeAttr(e,t):a&&"set"in a&&void 0!==(i=a.set(e,r,t))?i:(e.setAttribute(t,r+""),r):a&&"get"in a&&null!==(i=a.get(e,t))?i:null==(i=v.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!_.radioValue&&"radio"===t&&C(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,i=0,a=t&&t.match(J);if(a&&1===e.nodeType)for(;r=a[i++];)e.removeAttribute(r)}}),gt={set:function(e,t,r){return!1===t?v.removeAttr(e,r):e.setAttribute(r,r),r}},v.each(v.expr.match.bool.source.match(/\w+/g),(function(e,t){var r=bt[t]||v.find.attr;bt[t]=function(e,t,i){var a,n,s=t.toLowerCase();return i||(n=bt[s],bt[s]=a,a=null!=r(e,t,i)?s:null,bt[s]=n),a}}));var St=/^(?:input|select|textarea|button)$/i,vt=/^(?:a|area)$/i;function Rt(e){return(e.match(J)||[]).join(" ")}function Ct(e){return e.getAttribute&&e.getAttribute("class")||""}function Et(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(J)||[]}v.fn.extend({prop:function(e,t){return Q(this,v.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[v.propFix[e]||e]}))}}),v.extend({prop:function(e,t,r){var i,a,n=e.nodeType;if(3!==n&&8!==n&&2!==n)return 1===n&&v.isXMLDoc(e)||(t=v.propFix[t]||t,a=v.propHooks[t]),void 0!==r?a&&"set"in a&&void 0!==(i=a.set(e,r,t))?i:e[t]=r:a&&"get"in a&&null!==(i=a.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=v.find.attr(e,"tabindex");return t?parseInt(t,10):St.test(e.nodeName)||vt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),_.optSelected||(v.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),v.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){v.propFix[this.toLowerCase()]=this})),v.fn.extend({addClass:function(e){var t,r,i,a,n,s;return d(e)?this.each((function(t){v(this).addClass(e.call(this,t,Ct(this)))})):(t=Et(e)).length?this.each((function(){if(i=Ct(this),r=1===this.nodeType&&" "+Rt(i)+" "){for(n=0;n<t.length;n++)a=t[n],r.indexOf(" "+a+" ")<0&&(r+=a+" ");s=Rt(r),i!==s&&this.setAttribute("class",s)}})):this},removeClass:function(e){var t,r,i,a,n,s;return d(e)?this.each((function(t){v(this).removeClass(e.call(this,t,Ct(this)))})):arguments.length?(t=Et(e)).length?this.each((function(){if(i=Ct(this),r=1===this.nodeType&&" "+Rt(i)+" "){for(n=0;n<t.length;n++)for(a=t[n];r.indexOf(" "+a+" ")>-1;)r=r.replace(" "+a+" "," ");s=Rt(r),i!==s&&this.setAttribute("class",s)}})):this:this.attr("class","")},toggleClass:function(e,t){var i,a,n,s,o=r(e),x="string"===o||Array.isArray(e);return d(e)?this.each((function(r){v(this).toggleClass(e.call(this,r,Ct(this),t),t)})):"boolean"==typeof t&&x?t?this.addClass(e):this.removeClass(e):(i=Et(e),this.each((function(){if(x)for(s=v(this),n=0;n<i.length;n++)a=i[n],s.hasClass(a)?s.removeClass(a):s.addClass(a);else void 0!==e&&"boolean"!==o||((a=Ct(this))&&se.set(this,"__className__",a),this.setAttribute&&this.setAttribute("class",a||!1===e?"":se.get(this,"__className__")||""))})))},hasClass:function(e){var t,r,i=0;for(t=" "+e+" ";r=this[i++];)if(1===r.nodeType&&(" "+Rt(Ct(r))+" ").indexOf(t)>-1)return!0;return!1}});var Ft=/\r/g;v.fn.extend({val:function(e){var t,r,i,a=this[0];return arguments.length?(i=d(e),this.each((function(r){var a;1===this.nodeType&&(null==(a=i?e.call(this,r,v(this).val()):e)?a="":"number"==typeof a?a+="":Array.isArray(a)&&(a=v.map(a,(function(e){return null==e?"":e+""}))),(t=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,a,"value")||(this.value=a))}))):a?(t=v.valHooks[a.type]||v.valHooks[a.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(a,"value"))?r:"string"==typeof(r=a.value)?r.replace(Ft,""):null==r?"":r:void 0}}),v.extend({valHooks:{option:{get:function(e){var t=v.find.attr(e,"value");return null!=t?t:Rt(v.text(e))}},select:{get:function(e){var t,r,i,a=e.options,n=e.selectedIndex,s="select-one"===e.type,o=s?null:[],x=s?n+1:a.length;for(i=n<0?x:s?n:0;i<x;i++)if(((r=a[i]).selected||i===n)&&!r.disabled&&(!r.parentNode.disabled||!C(r.parentNode,"optgroup"))){if(t=v(r).val(),s)return t;o.push(t)}return o},set:function(e,t){for(var r,i,a=e.options,n=v.makeArray(t),s=a.length;s--;)((i=a[s]).selected=v.inArray(v.valHooks.option.get(i),n)>-1)&&(r=!0);return r||(e.selectedIndex=-1),n}}}}),v.each(["radio","checkbox"],(function(){v.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=v.inArray(v(e).val(),t)>-1}},_.checkOn||(v.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var Tt=e.location,Dt={guid:Date.now()},It=/\?/;v.parseXML=function(t){var r,i;if(!t||"string"!=typeof t)return null;try{r=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){}return i=r&&r.getElementsByTagName("parsererror")[0],r&&!i||v.error("Invalid XML: "+(i?v.map(i.childNodes,(function(e){return e.textContent})).join("\n"):t)),r};var Mt=/^(?:focusinfocus|focusoutblur)$/,At=function(e){e.stopPropagation()};v.extend(v.event,{trigger:function(t,i,a,n){var s,o,x,f,l,c,u,_,P=[a||m],y=h.call(t,"type")?t.type:t,g=h.call(t,"namespace")?t.namespace.split("."):[];if(o=_=x=a=a||m,3!==a.nodeType&&8!==a.nodeType&&!Mt.test(y+v.event.triggered)&&(y.indexOf(".")>-1&&(g=y.split("."),y=g.shift(),g.sort()),l=y.indexOf(":")<0&&"on"+y,(t=t[v.expando]?t:new v.Event(y,"object"==r(t)&&t)).isTrigger=n?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=a),i=null==i?[t]:v.makeArray(i,[t]),u=v.event.special[y]||{},n||!u.trigger||!1!==u.trigger.apply(a,i))){if(!n&&!u.noBubble&&!p(a)){for(f=u.delegateType||y,Mt.test(f+y)||(o=o.parentNode);o;o=o.parentNode)P.push(o),x=o;x===(a.ownerDocument||m)&&P.push(x.defaultView||x.parentWindow||e)}for(s=0;(o=P[s++])&&!t.isPropagationStopped();)_=o,t.type=s>1?f:u.bindType||y,(c=(se.get(o,"events")||Object.create(null))[t.type]&&se.get(o,"handle"))&&c.apply(o,i),(c=l&&o[l])&&c.apply&&ae(o)&&(t.result=c.apply(o,i),!1===t.result&&t.preventDefault());return t.type=y,n||t.isDefaultPrevented()||u._default&&!1!==u._default.apply(P.pop(),i)||!ae(a)||l&&d(a[y])&&!p(a)&&((x=a[l])&&(a[l]=null),v.event.triggered=y,t.isPropagationStopped()&&_.addEventListener(y,At),a[y](),t.isPropagationStopped()&&_.removeEventListener(y,At),v.event.triggered=void 0,x&&(a[l]=x)),t.result}},simulate:function(e,t,r){var i=v.extend(new v.Event,r,{type:e,isSimulated:!0});v.event.trigger(i,null,t)}}),v.fn.extend({trigger:function(e,t){return this.each((function(){v.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var r=this[0];if(r)return v.event.trigger(e,t,r,!0)}});var wt=/\[\]$/,Lt=/\r?\n/g,kt=/^(?:submit|button|image|reset|file)$/i,Bt=/^(?:input|select|textarea|keygen)/i;function Ot(e,t,i,a){var n;if(Array.isArray(t))v.each(t,(function(t,n){i||wt.test(e)?a(e,n):Ot(e+"["+("object"==r(n)&&null!=n?t:"")+"]",n,i,a)}));else if(i||"object"!==g(t))a(e,t);else for(n in t)Ot(e+"["+n+"]",t[n],i,a)}v.param=function(e,t){var r,i=[],a=function(e,t){var r=d(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==r?"":r)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!v.isPlainObject(e))v.each(e,(function(){a(this.name,this.value)}));else for(r in e)Ot(r,e[r],t,a);return i.join("&")},v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=v.prop(this,"elements");return e?v.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!v(this).is(":disabled")&&Bt.test(this.nodeName)&&!kt.test(e)&&(this.checked||!Re.test(e))})).map((function(e,t){var r=v(this).val();return null==r?null:Array.isArray(r)?v.map(r,(function(e){return{name:t.name,value:e.replace(Lt,"\r\n")}})):{name:t.name,value:r.replace(Lt,"\r\n")}})).get()}});var Ht=/%20/g,Nt=/#.*$/,Vt=/([?&])_=[^&]*/,Yt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ut=/^(?:GET|HEAD)$/,Xt=/^\/\//,Wt={},Gt={},Jt="*/".concat("*"),Zt=m.createElement("a");function jt(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,a=0,n=t.toLowerCase().match(J)||[];if(d(r))for(;i=n[a++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function zt(e,t,r,i){var a={},n=e===Gt;function s(o){var x;return a[o]=!0,v.each(e[o]||[],(function(e,o){var f=o(t,r,i);return"string"!=typeof f||n||a[f]?n?!(x=f):void 0:(t.dataTypes.unshift(f),s(f),!1)})),x}return s(t.dataTypes[0])||!a["*"]&&s("*")}function qt(e,t){var r,i,a=v.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((a[r]?e:i||(i={}))[r]=t[r]);return i&&v.extend(!0,e,i),e}Zt.href=Tt.href,v.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":v.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?qt(qt(e,v.ajaxSettings),t):qt(v.ajaxSettings,e)},ajaxPrefilter:jt(Wt),ajaxTransport:jt(Gt),ajax:function(t,i){"object"==r(t)&&(i=t,t=void 0),i=i||{};var a,n,s,o,x,f,l,h,c,u,_=v.ajaxSetup({},i),d=_.context||_,p=_.context&&(d.nodeType||d.jquery)?v(d):v.event,P=v.Deferred(),y=v.Callbacks("once memory"),g=_.statusCode||{},b={},S={},R="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(l){if(!o)for(o={};t=Yt.exec(s);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?s:null},setRequestHeader:function(e,t){return null==l&&(e=S[e.toLowerCase()]=S[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==l&&(_.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)C.always(e[C.status]);else for(t in e)g[t]=[g[t],e[t]];return this},abort:function(e){var t=e||R;return a&&a.abort(t),E(0,t),this}};if(P.promise(C),_.url=((t||_.url||Tt.href)+"").replace(Xt,Tt.protocol+"//"),_.type=i.method||i.type||_.method||_.type,_.dataTypes=(_.dataType||"*").toLowerCase().match(J)||[""],null==_.crossDomain){f=m.createElement("a");try{f.href=_.url,f.href=f.href,_.crossDomain=Zt.protocol+"//"+Zt.host!=f.protocol+"//"+f.host}catch(e){_.crossDomain=!0}}if(_.data&&_.processData&&"string"!=typeof _.data&&(_.data=v.param(_.data,_.traditional)),zt(Wt,_,i,C),l)return C;for(c in(h=v.event&&_.global)&&0==v.active++&&v.event.trigger("ajaxStart"),_.type=_.type.toUpperCase(),_.hasContent=!Ut.test(_.type),n=_.url.replace(Nt,""),_.hasContent?_.data&&_.processData&&0===(_.contentType||"").indexOf("application/x-www-form-urlencoded")&&(_.data=_.data.replace(Ht,"+")):(u=_.url.slice(n.length),_.data&&(_.processData||"string"==typeof _.data)&&(n+=(It.test(n)?"&":"?")+_.data,delete _.data),!1===_.cache&&(n=n.replace(Vt,"$1"),u=(It.test(n)?"&":"?")+"_="+Dt.guid+++u),_.url=n+u),_.ifModified&&(v.lastModified[n]&&C.setRequestHeader("If-Modified-Since",v.lastModified[n]),v.etag[n]&&C.setRequestHeader("If-None-Match",v.etag[n])),(_.data&&_.hasContent&&!1!==_.contentType||i.contentType)&&C.setRequestHeader("Content-Type",_.contentType),C.setRequestHeader("Accept",_.dataTypes[0]&&_.accepts[_.dataTypes[0]]?_.accepts[_.dataTypes[0]]+("*"!==_.dataTypes[0]?", "+Jt+"; q=0.01":""):_.accepts["*"]),_.headers)C.setRequestHeader(c,_.headers[c]);if(_.beforeSend&&(!1===_.beforeSend.call(d,C,_)||l))return C.abort();if(R="abort",y.add(_.complete),C.done(_.success),C.fail(_.error),a=zt(Gt,_,i,C)){if(C.readyState=1,h&&p.trigger("ajaxSend",[C,_]),l)return C;_.async&&_.timeout>0&&(x=e.setTimeout((function(){C.abort("timeout")}),_.timeout));try{l=!1,a.send(b,E)}catch(e){if(l)throw e;E(-1,e)}}else E(-1,"No Transport");function E(t,r,i,o){var f,c,u,m,b,S=r;l||(l=!0,x&&e.clearTimeout(x),a=void 0,s=o||"",C.readyState=t>0?4:0,f=t>=200&&t<300||304===t,i&&(m=function(e,t,r){for(var i,a,n,s,o=e.contents,x=e.dataTypes;"*"===x[0];)x.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(a in o)if(o[a]&&o[a].test(i)){x.unshift(a);break}if(x[0]in r)n=x[0];else{for(a in r){if(!x[0]||e.converters[a+" "+x[0]]){n=a;break}s||(s=a)}n=n||s}if(n)return n!==x[0]&&x.unshift(n),r[n]}(_,C,i)),!f&&v.inArray("script",_.dataTypes)>-1&&v.inArray("json",_.dataTypes)<0&&(_.converters["text script"]=function(){}),m=function(e,t,r,i){var a,n,s,o,x,f={},l=e.dataTypes.slice();if(l[1])for(s in e.converters)f[s.toLowerCase()]=e.converters[s];for(n=l.shift();n;)if(e.responseFields[n]&&(r[e.responseFields[n]]=t),!x&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),x=n,n=l.shift())if("*"===n)n=x;else if("*"!==x&&x!==n){if(!(s=f[x+" "+n]||f["* "+n]))for(a in f)if((o=a.split(" "))[1]===n&&(s=f[x+" "+o[0]]||f["* "+o[0]])){!0===s?s=f[a]:!0!==f[a]&&(n=o[0],l.unshift(o[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+x+" to "+n}}}return{state:"success",data:t}}(_,m,C,f),f?(_.ifModified&&((b=C.getResponseHeader("Last-Modified"))&&(v.lastModified[n]=b),(b=C.getResponseHeader("etag"))&&(v.etag[n]=b)),204===t||"HEAD"===_.type?S="nocontent":304===t?S="notmodified":(S=m.state,c=m.data,f=!(u=m.error))):(u=S,!t&&S||(S="error",t<0&&(t=0))),C.status=t,C.statusText=(r||S)+"",f?P.resolveWith(d,[c,S,C]):P.rejectWith(d,[C,S,u]),C.statusCode(g),g=void 0,h&&p.trigger(f?"ajaxSuccess":"ajaxError",[C,_,f?c:u]),y.fireWith(d,[C,S]),h&&(p.trigger("ajaxComplete",[C,_]),--v.active||v.event.trigger("ajaxStop")))}return C},getJSON:function(e,t,r){return v.get(e,t,r,"json")},getScript:function(e,t){return v.get(e,void 0,t,"script")}}),v.each(["get","post"],(function(e,t){v[t]=function(e,r,i,a){return d(r)&&(a=a||i,i=r,r=void 0),v.ajax(v.extend({url:e,type:t,dataType:a,data:r,success:i},v.isPlainObject(e)&&e))}})),v.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),v._evalUrl=function(e,t,r){return v.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){v.globalEval(e,t,r)}})},v.fn.extend({wrapAll:function(e){var t;return this[0]&&(d(e)&&(e=e.call(this[0])),t=v(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return d(e)?this.each((function(t){v(this).wrapInner(e.call(this,t))})):this.each((function(){var t=v(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)}))},wrap:function(e){var t=d(e);return this.each((function(r){v(this).wrapAll(t?e.call(this,r):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){v(this).replaceWith(this.childNodes)})),this}}),v.expr.pseudos.hidden=function(e){return!v.expr.pseudos.visible(e)},v.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},v.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var $t={0:200,1223:204},Kt=v.ajaxSettings.xhr();_.cors=!!Kt&&"withCredentials"in Kt,_.ajax=Kt=!!Kt,v.ajaxTransport((function(t){var r,i;if(_.cors||Kt&&!t.crossDomain)return{send:function(a,n){var s,o=t.xhr();if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];for(s in t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest"),a)o.setRequestHeader(s,a[s]);r=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return function(){r&&(r=i=o.onload=o.onerror=o.onabort=o.ontimeout=o.onreadystatechange=null,"abort"===e?o.abort():"error"===e?"number"!=typeof o.status?n(0,"error"):n(o.status,o.statusText):n($t[o.status]||o.status,o.statusText,"text"!==(o.responseType||"text")||"string"!=typeof o.responseText?{binary:o.response}:{text:o.responseText},o.getAllResponseHeaders()))}})),o.onload=r(),i=o.onerror=o.ontimeout=r("error"),void 0!==o.onabort?o.onabort=i:o.onreadystatechange=function(){4===o.readyState&&e.setTimeout((function(){r&&i()}))},r=r("abort");try{o.send(t.hasContent&&t.data||null)}catch(e){if(r)throw e}},abort:function(){r&&r()}}})),v.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return v.globalEval(e),e}}}),v.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),v.ajaxTransport("script",(function(e){var t,r;if(e.crossDomain||e.scriptAttrs)return{send:function(i,a){t=v("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){t.remove(),r=null,e&&a("error"===e.type?404:200,e.type)}))),m.head.appendChild(t[0])},abort:function(){r&&r()}}}));var Qt,er=[],tr=/(=)\?(?=&|$)|\?\?/;v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=er.pop()||v.expando+"_"+Dt.guid++;return this[e]=!0,e}}),v.ajaxPrefilter("json jsonp",(function(t,r,i){var a,n,s,o=!1!==t.jsonp&&(tr.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&tr.test(t.data)&&"data");if(o||"jsonp"===t.dataTypes[0])return a=t.jsonpCallback=d(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,o?t[o]=t[o].replace(tr,"$1"+a):!1!==t.jsonp&&(t.url+=(It.test(t.url)?"&":"?")+t.jsonp+"="+a),t.converters["script json"]=function(){return s||v.error(a+" was not called"),s[0]},t.dataTypes[0]="json",n=e[a],e[a]=function(){s=arguments},i.always((function(){void 0===n?v(e).removeProp(a):e[a]=n,t[a]&&(t.jsonpCallback=r.jsonpCallback,er.push(a)),s&&d(n)&&n(s[0]),s=n=void 0})),"script"})),_.createHTMLDocument=((Qt=m.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Qt.childNodes.length),v.parseHTML=function(e,t,r){return"string"!=typeof e?[]:("boolean"==typeof t&&(r=t,t=!1),t||(_.createHTMLDocument?((i=(t=m.implementation.createHTMLDocument("")).createElement("base")).href=m.location.href,t.head.appendChild(i)):t=m),n=!r&&[],(a=H.exec(e))?[t.createElement(a[1])]:(a=Me([e],t,n),n&&n.length&&v(n).remove(),v.merge([],a.childNodes)));var i,a,n},v.fn.load=function(e,t,i){var a,n,s,o=this,x=e.indexOf(" ");return x>-1&&(a=Rt(e.slice(x)),e=e.slice(0,x)),d(t)?(i=t,t=void 0):t&&"object"==r(t)&&(n="POST"),o.length>0&&v.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done((function(e){s=arguments,o.html(a?v("<div>").append(v.parseHTML(e)).find(a):e)})).always(i&&function(e,t){o.each((function(){i.apply(this,s||[e.responseText,t,e])}))}),this},v.expr.pseudos.animated=function(e){return v.grep(v.timers,(function(t){return e===t.elem})).length},v.offset={setOffset:function(e,t,r){var i,a,n,s,o,x,f=v.css(e,"position"),l=v(e),h={};"static"===f&&(e.style.position="relative"),o=l.offset(),n=v.css(e,"top"),x=v.css(e,"left"),("absolute"===f||"fixed"===f)&&(n+x).indexOf("auto")>-1?(s=(i=l.position()).top,a=i.left):(s=parseFloat(n)||0,a=parseFloat(x)||0),d(t)&&(t=t.call(e,r,v.extend({},o))),null!=t.top&&(h.top=t.top-o.top+s),null!=t.left&&(h.left=t.left-o.left+a),"using"in t?t.using.call(e,h):l.css(h)}},v.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){v.offset.setOffset(this,e,t)}));var t,r,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),r=i.ownerDocument.defaultView,{top:t.top+r.pageYOffset,left:t.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,r,i=this[0],a={top:0,left:0};if("fixed"===v.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),r=i.ownerDocument,e=i.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&"static"===v.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((a=v(e).offset()).top+=v.css(e,"borderTopWidth",!0),a.left+=v.css(e,"borderLeftWidth",!0))}return{top:t.top-a.top-v.css(i,"marginTop",!0),left:t.left-a.left-v.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===v.css(e,"position");)e=e.offsetParent;return e||_e}))}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var r="pageYOffset"===t;v.fn[e]=function(i){return Q(this,(function(e,i,a){var n;if(p(e)?n=e:9===e.nodeType&&(n=e.defaultView),void 0===a)return n?n[t]:e[i];n?n.scrollTo(r?n.pageXOffset:a,r?a:n.pageYOffset):e[i]=a}),e,i,arguments.length)}})),v.each(["top","left"],(function(e,t){v.cssHooks[t]=Qe(_.pixelPosition,(function(e,r){if(r)return r=Ke(e,t),Ze.test(r)?v(e).position()[t]+"px":r}))})),v.each({Height:"height",Width:"width"},(function(e,t){v.each({padding:"inner"+e,content:t,"":"outer"+e},(function(r,i){v.fn[i]=function(a,n){var s=arguments.length&&(r||"boolean"!=typeof a),o=r||(!0===a||!0===n?"margin":"border");return Q(this,(function(t,r,a){var n;return p(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(n=t.documentElement,Math.max(t.body["scroll"+e],n["scroll"+e],t.body["offset"+e],n["offset"+e],n["client"+e])):void 0===a?v.css(t,r,o):v.style(t,r,a,o)}),t,s?a:void 0,s)}}))})),v.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){v.fn[t]=function(e){return this.on(t,e)}})),v.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,i){return this.on(t,e,r,i)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),v.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){v.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}));var rr=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;v.proxy=function(e,t){var r,i,a;if("string"==typeof t&&(r=e[t],t=e,e=r),d(e))return i=n.call(arguments,2),a=function(){return e.apply(t||this,i.concat(n.call(arguments)))},a.guid=e.guid=e.guid||v.guid++,a},v.holdReady=function(e){e?v.readyWait++:v.ready(!0)},v.isArray=Array.isArray,v.parseJSON=JSON.parse,v.nodeName=C,v.isFunction=d,v.isWindow=p,v.camelCase=ie,v.type=g,v.now=Date.now,v.isNumeric=function(e){var t=v.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},v.trim=function(e){return null==e?"":(e+"").replace(rr,"$1")};var ir=e.jQuery,ar=e.$;return v.noConflict=function(t){return e.$===v&&(e.$=ar),t&&e.jQuery===v&&(e.jQuery=ir),v},void 0===t&&(e.jQuery=e.$=v),v}))}(jx);var zx=Zx(jx.exports);function qx(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$x(e,t)}function $x(e,t){return $x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$x(e,t)}var Kx=null,Qx=Symbol("CANVAS"),ef=Symbol("CONTEXT"),tf=Symbol("SHAPES"),rf=Symbol("DRAWSTATUS"),af=Symbol("SHAPETYPE"),nf=Symbol("MAXSHAPENUMSUPPORT"),sf=Symbol("SHAPESTYLE"),of=Symbol("POLYGONDRAWING"),xf=Symbol("CURRENTSHAPEINFO"),ff=Symbol("DRAWSHAPEMULTIONETIME"),lf=Symbol("EVENTCALLBACK");function hf(){Kx[ef].clearRect(0,0,Kx.m_iCanvasWidth,Kx.m_iCanvasHeight);for(var e=0,t=Kx[tf].length;e<t;e++)Kx[tf][e].draw()}function cf(e){Kx[tf].length<Kx[nf]&&Kx[tf].push(e)}function uf(){var e=!1,t={},r=0,i=0,a=0,n=0,s=0,o=0,x="draw",f=null;function l(){for(var e=-1,t=0,r=Kx[tf].length;t<r;t++)if(Kx[tf][t].m_bChoosed){e=t;break}return e}Kx[Qx][0].oncontextmenu=function(){return!1},Kx[Qx][0].onselectstart=function(){return!1},Kx[Qx].unbind(),Kx[Qx].bind("mousedown",(function(t){if(2===t.button)Kx[of]&&f&&f.m_aPoint.length>=f.m_iMinClosed&&(f.m_bClosed=!0,Kx[of]=!1,f.setPointInfo(f.m_aPoint),cf(f),hf(),e=!1,Kx[ff]||(Kx[rf]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,f.m_szType,"onDrawEnd",f.m_szId));else if(0===t.button){if(e){if(Math.abs(t.offsetX-r)>2&&Math.abs(t.offsetY-i)>2&&(cf(f),Kx[ff]||(Kx[rf]=!1)),Kx[lf]){var a,n={startPos:[],endPos:[]};n.startPos=[r,i],n.endPos=[t.offsetX,t.offsetY],null==(a=Kx[lf])||a.call(Kx,n),Kx.clearAllShape()}return f=null,void(e=!1)}if(r=t.offsetX,i=t.offsetY,x="draw",!Kx[of]){var s=l();if(-1!==s&&Kx[tf][s].inArc(t.offsetX,t.offsetY,5)&&(x="stretch"),"stretch"!==x)for(var o=0,h=Kx[tf].length;o<h;o++)Kx[tf][o].inShape(t.offsetX,t.offsetY)&&2!==Kx[tf][o].m_iEditType?(Kx[tf][o].m_bChoosed=!0,Kx[tf][o].getMouseDownPoints(t.offsetX,t.offsetY),x="drag",null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,Kx[tf][o].m_szType,"onChoose",Kx[tf][o].m_szId)):Kx[tf][o].m_bChoosed=!1;Kx[Qx][0].style.cursor="drag"===x?"move":"default","draw"===x&&1===Kx[tf].length&&1===Kx[tf][0].m_iRedrawMode&&(Kx.deleteRepeatPolyonById(Kx[tf][0].m_szId),Kx[rf]=!0),Kx[rf]&&!Kx[ff]&&(x="draw")}if("draw"===x&&Kx[rf]){if(Kx[nf]<=Kx[tf].length&&"Grid"!==Kx[af]&&"Point"!==Kx[af])return;"Rect"===Kx[af]?(f=new df).m_szTips=Kx[xf].szTips||"":"Grid"===Kx[af]?0===Kx[tf].length&&cf(f=new mf):"Polygon"===Kx[af]?(Kx[of]||(Kx[of]=!0,(f=new yf).m_szId=Kx[xf].szId||"",f.m_szTips=Kx[xf].szTips||"",f.m_iMinClosed=Kx[xf].iMinClosed||3,f.m_iMaxPointNum=Kx[xf].iMaxPointNum||11,f.m_iPolygonType=Kx[xf].iPolygonType,f.m_szDrawColor=Kx[xf].szDrawColor,f.m_szFillColor=Kx[xf].szFillColor,f.m_iTranslucent=Kx[xf].iTranslucent,f.m_iRedrawMode=Kx[xf].iRedrawMode),1===f.m_iPolygonType&&(f.addPoint(r,i),f.m_aPoint.length===f.m_iMaxPointNum&&(f.m_bClosed=!0,Kx[of]=!1,cf(f),hf(),e=!1,Kx[ff]||(Kx[rf]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,f.m_szType,"onDrawEnd",f.m_szId)))):"Point"===Kx[af]&&(Kx.clearShapeByType("Point"),(f=new gf).m_szId=Kx[xf].szId||"",f.m_szDrawColor=Kx[xf].szDrawColor,f.setPointInfo([[r,i]]),cf(f),hf())}e=!0}})),Kx[Qx].bind("mouseenter",(function(a){t={isIn:!0,offsetX:a.offsetX,offsetY:a.offsetY},Kx[rf]&&e&&("Rect"===Kx[af]?f.move([[r,i],[a.offsetX,a.offsetY]]):"Grid"===Kx[af]&&Kx[tf][0].move(r,i,a.offsetX,a.offsetY))})),Kx[Qx].bind("mouseleave",(function(e){t={isIn:!1,offsetX:e.offsetX,offsetY:e.offsetY}})),Kx[Qx].bind("mousemove",(function(a){if(Kx[of])Kx[rf]&&e&&("Polygon"===Kx[af]&&0===f.m_iPolygonType&&(f.m_bClosed=!0),hf(),f.move(a.offsetX,a.offsetY,r,i));else{var n=l();n>-1?e&&("drag"===x?(Kx[tf][n].drag(a.offsetX,a.offsetY),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,Kx[tf][n].m_szType,"onDrag",Kx[tf][n].m_szId)):"stretch"===x&&(Kx[tf][n].stretch(a.offsetX,a.offsetY),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,Kx[tf][n].m_szType,"onStretch",Kx[tf][n].m_szId))):Kx[rf]&&e&&t.isIn&&("Rect"===Kx[af]?f.move([[r,i],[a.offsetX,a.offsetY]]):"Grid"===Kx[af]&&Kx[tf][0].move(r,i,a.offsetX,a.offsetY))}})),Kx[Qx].bind("mouseup",(function(t){if(Kx[Qx][0].style.cursor="default",null!=f&&"draw"===x)if("Rect"===Kx[af]){if(Math.abs(t.offsetX-r)>2&&Math.abs(t.offsetY-i)>2&&(cf(f),Kx[ff]||(Kx[rf]=!1)),Kx[lf]){var a,n={startPos:[],endPos:[]};n.startPos=[r,i],n.endPos=[t.offsetX,t.offsetY],null==(a=Kx[lf])||a.call(Kx,n),Kx.clearAllShape()}f=null}else"Polygon"===Kx[af]&&0===f.m_iPolygonType&&Kx[of]&&Math.abs(t.offsetX-r)>2&&Math.abs(t.offsetY-i)>2&&(cf(f),Kx[of]=!1,Kx[ff]||(Kx[rf]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,f.m_szType,"onDrawEnd",f.m_szId));e=!!Kx[of],Kx[of]||hf()})),Kx[Qx].bind("dblclick",(function(){Kx[rf]&&"Grid"===Kx[af]&&(Kx[tf][0].m_szGridMap="fffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffc",hf())})),Kx[Qx].bind("touchstart",(function(t){var r,i=t.target.getBoundingClientRect();if(null==(r=t.touches)?void 0:r[0]){if(a=parseInt(t.touches[0].clientX-i.x)>0?parseInt(t.touches[0].clientX-i.x):0,n=parseInt(t.touches[0].clientY-i.y)>0?parseInt(t.touches[0].clientY-i.y):0,x="draw",Kx[rf]){if(Kx[nf]<=Kx[tf].length&&"Grid"!==Kx[af]&&"Point"!==Kx[af])return;"Rect"===Kx[af]?(f=new df).m_szTips=Kx[xf].szTips||"":"Grid"===Kx[af]?0===Kx[tf].length&&cf(f=new mf):"Polygon"===Kx[af]?(Kx[of]||(Kx[of]=!0,(f=new yf).m_szId=Kx[xf].szId||"",f.m_szTips=Kx[xf].szTips||"",f.m_iMinClosed=Kx[xf].iMinClosed||3,f.m_iMaxPointNum=Kx[xf].iMaxPointNum||11,f.m_iPolygonType=Kx[xf].iPolygonType,f.m_szDrawColor=Kx[xf].szDrawColor,f.m_szFillColor=Kx[xf].szFillColor,f.m_iTranslucent=Kx[xf].iTranslucent,f.m_iRedrawMode=Kx[xf].iRedrawMode),1===f.m_iPolygonType&&(f.addPoint(a,n),f.m_aPoint.length===f.m_iMaxPointNum&&(f.m_bClosed=!0,Kx[of]=!1,cf(f),hf(),e=!1,Kx[ff]||(Kx[rf]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,f.m_szType,"onDrawEnd",f.m_szId)))):"Point"===Kx[af]&&(Kx.clearShapeByType("Point"),(f=new gf).m_szId=Kx[xf].szId||"",f.m_szDrawColor=Kx[xf].szDrawColor,f.setPointInfo([[a,n]]),cf(f),hf())}e=!0}})),Kx[Qx].bind("touchmove",(function(t){var r,i=t.target.getBoundingClientRect();if(null==(r=t.touches)?void 0:r[0])if(s=parseInt(t.touches[0].clientX-i.x)>0?parseInt(t.touches[0].clientX-i.x):0,o=parseInt(t.touches[0].clientY-i.y)>0?parseInt(t.touches[0].clientY-i.y):0,Kx[of])Kx[rf]&&e&&("Polygon"===Kx[af]&&0===f.m_iPolygonType&&(f.m_bClosed=!0),hf(),f.move(t.touches[0].offsetX,t.touches[0].offsetY,a,n));else{var h=l();h>-1?e&&("drag"===x?(Kx[tf][h].drag(s,o),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,Kx[tf][h].m_szType,"onDrag",Kx[tf][h].m_szId)):"stretch"===x&&(Kx[tf][h].stretch(s,o),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,Kx[tf][h].m_szType,"onStretch",Kx[tf][h].m_szId))):Kx[rf]&&e&&("Rect"===Kx[af]?f.move([[2*a,2*n],[2*s,2*o]]):"Grid"===Kx[af]&&Kx[tf][0].move(a,n,s,o))}})),Kx[Qx].bind("touchend",(function(t){if(a!=s||n!=o){if(Kx[Qx][0].style.cursor="default",null!=f&&"draw"===x)if("Rect"===Kx[af]){if(Math.abs(s-a)>2&&Math.abs(o-n)>2&&(cf(f),Kx[ff]||(Kx[rf]=!1)),Kx[lf]&&Math.abs(s-a)>15&&Math.abs(o-n)>15){var r,i={startPos:[],endPos:[]};i.startPos=[a,n],i.endPos=[s,o],null==(r=Kx[lf])||r.call(Kx,i)}Kx.clearAllShape(),f=null}else"Polygon"===Kx[af]&&0===f.m_iPolygonType&&Kx[of]&&Math.abs(s-a)>2&&Math.abs(o-n)>2&&(cf(f),Kx[of]=!1,Kx[ff]||(Kx[rf]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,f.m_szType,"onDrawEnd",f.m_szId));e=!!Kx[of],Kx[of]||hf()}}))}var _f=function(){function e(){this.m_szId="",this.m_aPoint=[],this.m_bChoosed=!1,this.m_szDrawColor=Kx[sf].szDrawColor,this.m_szFillColor=Kx[sf].szFillColor,this.m_iTranslucent=Kx[sf].iTranslucent,this.m_iIndexChoosePoint=-1,this.m_iDriftStartX=0,this.m_iDriftStartY=0,this.m_oEdgePoints={top:{x:0,y:0},left:{x:0,y:0},right:{x:0,y:0},bottom:{x:0,y:0}},this.m_szTips="",this.m_iEditType=0,this.m_iMinClosed=3,this.m_iMaxPointNum=11,this.m_bClosed=!1,this.m_iRedrawMode=0}var t=e.prototype;return t.draw=function(){},t.drag=function(e,t){if(2!==this.m_iEditType){var r=this.m_aPoint.length,i=0;for(i=0;i<r;i++)if(this.m_aPoint[i][0]+e-this.m_iDriftStartX>Kx.m_iCanvasWidth||this.m_aPoint[i][1]+t-this.m_iDriftStartY>Kx.m_iCanvasHeight||this.m_aPoint[i][0]+e-this.m_iDriftStartX<0||this.m_aPoint[i][1]+t-this.m_iDriftStartY<0)return this.m_iDriftStartX=e,void(this.m_iDriftStartY=t);for(i=0;i<r;i++)this.m_aPoint[i][0]=this.m_aPoint[i][0]+e-this.m_iDriftStartX,this.m_aPoint[i][1]=this.m_aPoint[i][1]+t-this.m_iDriftStartY;this.m_iDriftStartX=e,this.m_iDriftStartY=t,this.setPointInfo(this.m_aPoint),hf()}},t.stretch=function(e,t){0===this.m_iEditType&&(-1!==this.m_iIndexChoosePoint&&(this.m_aPoint[this.m_iIndexChoosePoint][0]=e,this.m_aPoint[this.m_iIndexChoosePoint][1]=t),this.setPointInfo(this.m_aPoint),hf())},t.inShape=function(e,t){for(var r=!1,i=this.m_aPoint.length,a=0,n=i-1;a<i;n=a++)this.m_aPoint[a][1]>t!=this.m_aPoint[n][1]>t&&e<(this.m_aPoint[n][0]-this.m_aPoint[a][0])*(t-this.m_aPoint[a][1])/(this.m_aPoint[n][1]-this.m_aPoint[a][1])+this.m_aPoint[a][0]&&(r=!r);return r},t.inArc=function(e,t,r){for(var i=!1,a=0,n=this.m_aPoint.length;a<n;a++)if(Math.sqrt((e-this.m_aPoint[a][0])*(e-this.m_aPoint[a][0])+(t-this.m_aPoint[a][1])*(t-this.m_aPoint[a][1]))<r){i=!0,this.m_iIndexChoosePoint=a;break}return i},t.getMouseDownPoints=function(e,t){this.m_iDriftStartX=e,this.m_iDriftStartY=t},t.getPointInfo=function(){return this.m_aPoint},t.setPointInfo=function(e){null!=e&&e.length>0&&(this.m_aPoint=e,this.setEdgePoints(e))},t.addPoint=function(e,t){this.m_aPoint.length<this.m_iMaxPointNum&&this.m_aPoint.push([e,t]),this.m_aPoint.length===this.m_iMaxPointNum&&this.setPointInfo(this.m_aPoint)},t.setEdgePoints=function(e){for(var t=0,r=e.length;t<r;t++)0===t?(this.m_oEdgePoints.top.x=e[t][0],this.m_oEdgePoints.top.y=e[t][1],this.m_oEdgePoints.left.x=e[t][0],this.m_oEdgePoints.left.y=e[t][1],this.m_oEdgePoints.right.x=e[t][0],this.m_oEdgePoints.right.y=e[t][1],this.m_oEdgePoints.bottom.x=e[t][0],this.m_oEdgePoints.bottom.y=e[t][1]):(e[t][1]<this.m_oEdgePoints.top.y&&(this.m_oEdgePoints.top.x=e[t][0],this.m_oEdgePoints.top.y=e[t][1]),e[t][0]>this.m_oEdgePoints.right.x&&(this.m_oEdgePoints.right.x=e[t][0],this.m_oEdgePoints.right.y=e[t][1]),e[t][1]>this.m_oEdgePoints.bottom.y&&(this.m_oEdgePoints.bottom.x=e[t][0],this.m_oEdgePoints.bottom.y=e[t][1]),e[t][0]<this.m_oEdgePoints.left.x&&(this.m_oEdgePoints.left.x=e[t][0],this.m_oEdgePoints.left.y=e[t][1]))},e}(),df=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Rect",t}qx(t,e);var r=t.prototype;return r.setPointInfo=function(e){if(null!=e){for(var t=e[0][0],r=e[0][1],i=e[0][0],a=e[0][1],n=0,s=e.length;n<s;n++)t>e[n][0]&&(t=e[n][0]),r>e[n][1]&&(r=e[n][1]),i<e[n][0]&&(i=e[n][0]),a<e[n][1]&&(a=e[n][1]);this.m_aPoint=[[t,r],[i,r],[i,a],[t,a]]}},r.draw=function(){Kx[ef].fillStyle=this.m_szFillColor,Kx[ef].strokeStyle=this.m_szDrawColor;var e=this.m_aPoint[0][0],t=this.m_aPoint[0][1],r=this.m_aPoint[2][0]-e,i=this.m_aPoint[2][1]-t;if(Kx[ef].globalAlpha=this.m_iTranslucent,Kx[ef].fillRect(e,t,r,i),Kx[ef].globalAlpha=1,Kx[ef].fillText(this.m_szTips,(e+this.m_aPoint[2][0])/2,(t+this.m_aPoint[2][1])/2),this.m_bChoosed){var a=Math.round(r/2),n=Math.round(i/2);if(0===this.m_iEditType)for(var s=[e,e+a,e+r,e,e+r,e,e+a,e+r],o=[t,t,t,t+n,t+n,t+i,t+i,t+i],x=0;x<8;x++)Kx[ef].beginPath(),Kx[ef].arc(s[x],o[x],3,0,360,!1),Kx[ef].fillStyle=this.m_szDrawColor,Kx[ef].closePath(),Kx[ef].fill()}Kx[ef].strokeRect(e,t,r,i)},r.stretch=function(e,t){0===this.m_iEditType&&(0===this.m_iIndexChoosePoint?e<this.m_aPoint[2][0]&&t<this.m_aPoint[2][1]&&(this.m_aPoint[0][0]=e,this.m_aPoint[0][1]=t,this.m_aPoint[3][0]=e,this.m_aPoint[1][1]=t):1===this.m_iIndexChoosePoint?t<this.m_aPoint[2][1]&&(this.m_aPoint[0][1]=t,this.m_aPoint[1][1]=t):2===this.m_iIndexChoosePoint?e>this.m_aPoint[3][0]&&t<this.m_aPoint[3][1]&&(this.m_aPoint[1][0]=e,this.m_aPoint[1][1]=t,this.m_aPoint[2][0]=e,this.m_aPoint[0][1]=t):3===this.m_iIndexChoosePoint?e<this.m_aPoint[2][0]&&(this.m_aPoint[0][0]=e,this.m_aPoint[3][0]=e):4===this.m_iIndexChoosePoint?e>this.m_aPoint[0][0]&&(this.m_aPoint[1][0]=e,this.m_aPoint[2][0]=e):5===this.m_iIndexChoosePoint?e<this.m_aPoint[1][0]&&t>this.m_aPoint[1][1]&&(this.m_aPoint[3][0]=e,this.m_aPoint[3][1]=t,this.m_aPoint[0][0]=e,this.m_aPoint[2][1]=t):6===this.m_iIndexChoosePoint?t>this.m_aPoint[1][1]&&(this.m_aPoint[2][1]=t,this.m_aPoint[3][1]=t):7===this.m_iIndexChoosePoint&&e>this.m_aPoint[0][0]&&t>this.m_aPoint[0][1]&&(this.m_aPoint[2][0]=e,this.m_aPoint[2][1]=t,this.m_aPoint[1][0]=e,this.m_aPoint[3][1]=t),hf())},r.move=function(e){hf(),this.m_bChoosed=!0;var t=e[0][0],r=e[0][1],i=e[1][0],a=e[1][1];this.setPointInfo([[t,r],[i,r],[i,a],[t,a]]),this.draw()},r.inArc=function(e,t,r){for(var i=this.m_aPoint[0][0],a=this.m_aPoint[0][1],n=this.m_aPoint[2][0]-i,s=this.m_aPoint[2][1]-a,o=Math.round(n/2),x=Math.round(s/2),f=[i,i+o,i+n,i,i+n,i,i+o,i+n],l=[a,a,a,a+x,a+x,a+s,a+s,a+s],h=0;h<8;h++)if(Math.sqrt((e-f[h])*(e-f[h])+(t-l[h])*(t-l[h]))<r)return this.m_iIndexChoosePoint=h,!0;return!1},t}(_f),pf=function(e){function t(t,r){var i;return(i=e.call(this)||this).m_szType="RectOSD",i.m_szOSDType="overlay-date",i.m_szText=t||"",i.m_szEnabled=r||"",i.m_szDateStyle="",i.m_szClockType="",i.m_szDisplayWeek="",i.m_szId="",i.m_szAlignment="0",i}qx(t,e);var r=t.prototype;return r.draw=function(){if("true"===this.m_szEnabled){var e=this.m_aPoint[0][0],t=this.m_aPoint[0][1],r=this.m_aPoint[2][0]-e,i=this.m_aPoint[2][1]-t;Kx[ef].beginPath(),Kx[ef].strokeStyle=this.m_szDrawColor,Kx[ef].globalAlpha=1,Kx[ef].rect(e,t,r,i),Kx[ef].font="15px serif",Kx[ef].strokeText(this.m_szText,e,t+15),Kx[ef].stroke()}},r.drag=function(e,t){var r=this.m_aPoint.length,i=0;if("0"===this.m_szAlignment){for(i=0;i<r;i++)if(this.m_aPoint[i][1]+t-this.m_iDriftStartY>Kx.m_iCanvasHeight||this.m_aPoint[i][0]+e-this.m_iDriftStartX<0||this.m_aPoint[i][1]+t-this.m_iDriftStartY<0)return this.m_iDriftStartX=e,void(this.m_iDriftStartY=t);for(i=0;i<r;i++)this.m_aPoint[i][0]=this.m_aPoint[i][0]+e-this.m_iDriftStartX,this.m_aPoint[i][1]=this.m_aPoint[i][1]+t-this.m_iDriftStartY}else if("1"===this.m_szAlignment||"2"===this.m_szAlignment){for(i=0;i<r;i++)if(this.m_aPoint[i][1]+t-this.m_iDriftStartY>Kx.m_iCanvasHeight||this.m_aPoint[i][1]+t-this.m_iDriftStartY<0)return this.m_iDriftStartX=e,void(this.m_iDriftStartY=t);for(i=0;i<r;i++)this.m_aPoint[i][1]=this.m_aPoint[i][1]+t-this.m_iDriftStartY}this.m_iDriftStartX=e,this.m_iDriftStartY=t,this.setEdgePoints(this.m_aPoint),hf()},r.stretch=function(){},t}(_f),mf=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Grid",t.m_iGridColNum=22,t.m_iGridRowNum=18,t.m_szGridMap="",t.m_aAddGridMap=[],t}qx(t,e);var r=t.prototype;return r.draw=function(){for(var e=Kx.m_iCanvasWidth/this.m_iGridColNum,t=Kx.m_iCanvasHeight/this.m_iGridRowNum,r="",i=0;i<this.m_iGridRowNum;i++){for(var a=this.m_szGridMap.substring(6*i,6*i+6),n=parseInt("f"+a,16).toString(2).split("").slice(4),s="",o=0;o<this.m_iGridColNum;o++){var x="";"1"===n[o]?(Kx[ef].strokeStyle=this.m_szDrawColor,Kx[ef].globalAlpha=1,Kx[ef].strokeRect(e*o,t*i,e,t),x="1"):x="0",this.m_aAddGridMap.length&&1===this.m_aAddGridMap[i][o]&&(Kx[ef].strokeStyle=this.m_szDrawColor,Kx[ef].strokeRect(e*o,t*i,e,t),x="1"),s+=x}r+=parseInt("1111"+s+"00",2).toString(16).substring(1)}this.m_szGridMap=r},r.move=function(e,t,r,i){var a,n,s=Kx.m_iCanvasWidth/this.m_iGridColNum,o=Kx.m_iCanvasHeight/this.m_iGridRowNum,x=Math.floor(e/s),f=Math.floor(t/o),l=Math.floor(Math.abs(r-e)/s),h=Math.floor(Math.abs(i-t)/o);a=r-e>0?1:-1,n=i-t>0?1:-1;for(var c=[],u=0;u<this.m_iGridRowNum;u++){c[u]=[];for(var _=0;_<this.m_iGridColNum;_++)c[u][_]=1===a?1===n?u>=f&&u<=f+h&&_>=x&&_<=x+l?1:0:u<=f&&u>=f-h&&_>=x&&_<=x+l?1:0:1===n?u>=f&&u<=f+h&&_<=x&&_>=x-l?1:0:u<=f&&u>=f-h&&_<=x&&_>=x-l?1:0}this.m_aAddGridMap=c,this.draw()},t}(_f),Pf=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Line",t.m_iLineType=0,t.m_iDirection=0,t.m_iArrowType=0,t.m_aCrossArrowPoint=[],t}qx(t,e);var r=t.prototype;return r.draw=function(){0===this.m_iLineType?this.drawNormalLine():1===this.m_iLineType?this.drawArrowLine():3===this.m_iLineType?this.drawCrossLine():4===this.m_iLineType&&this.drawLineCount()},r.drawNormalLine=function(){if(Kx[ef].globalAlpha=1,this.m_aPoint.length>0){Kx[ef].beginPath(),Kx[ef].strokeStyle=this.m_szDrawColor,Kx[ef].lineWidth=2,Kx[ef].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]);for(var e=1,t=this.m_aPoint.length;e<t;e++)Kx[ef].lineTo(this.m_aPoint[e][0],this.m_aPoint[e][1]);if(Kx[ef].stroke(),this.m_bChoosed)for(var r=0,i=this.m_aPoint.length;r<i;r++)Kx[ef].beginPath(),Kx[ef].fillStyle=this.m_szDrawColor,Kx[ef].arc(this.m_aPoint[r][0],this.m_aPoint[r][1],3,0,2*Math.PI,!0),Kx[ef].closePath(),Kx[ef].fill();""!==this.m_szTips&&(Kx[ef].strokeStyle=this.m_szDrawColor,Kx[ef].fillText(this.m_szTips,this.m_aPoint[0][0]+10,this.m_aPoint[0][1]+4))}},r.drawArrowLine=function(e,t,r,i,a,n,s,o){n=void 0!==n?n:30,s=void 0!==s?s:10,o=void 0!==o?o:1;var x=180*Math.atan2(r-a,t-i)/Math.PI,f=(x+n)*Math.PI/180,l=(x-n)*Math.PI/180,h=s*Math.cos(f),c=s*Math.sin(f),u=s*Math.cos(l),_=s*Math.sin(l);Kx[ef].save(),Kx[ef].beginPath();var d=t-h,p=r-c;Kx[ef].moveTo(d,p),Kx[ef].lineTo(t,r),d=t-u,p=r-_,Kx[ef].lineTo(d,p),Kx[ef].moveTo(t,r),Kx[ef].lineTo(i,a),1===e&&(d=i+h,p=a+c,Kx[ef].moveTo(d,p),Kx[ef].lineTo(i,a),d=i+u,p=a+_,Kx[ef].lineTo(d,p)),Kx[ef].strokeStyle=this.m_szDrawColor,Kx[ef].lineWidth=o,Kx[ef].stroke(),Kx[ef].restore()},r.drawCrossLine=function(){this.drawNormalLine();var e=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2,t=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2,r=180*Math.atan2(t-this.m_aPoint[0][1],e-this.m_aPoint[0][0])/Math.PI,i=(r+90)*Math.PI/180,a=(r-90)*Math.PI/180,n=25*Math.cos(i),s=25*Math.sin(i),o=25*Math.cos(a),x=25*Math.sin(a),f=0,l=0;f=e-n,l=t-s;var h=0,c=0;0===this.m_iDirection?(h=-10,c=-15):1===this.m_iDirection?(h=10,c=10):(h=10,c=-15),0!==this.m_iDirection&&this.drawArrowLine(0,f,l,e,t),Kx[ef].strokeStyle=this.m_szDrawColor,Kx[ef].font="8px",Kx[ef].strokeText("A",f+h,l+4),f=e-o,l=t-x,1!==this.m_iDirection&&this.drawArrowLine(0,f,l,e,t),Kx[ef].strokeStyle=this.m_szDrawColor,Kx[ef].font="8px",Kx[ef].strokeText("B",f+c,l+4)},r.drawLineCount=function(){this.drawNormalLine();var e=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2,t=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2,r=180*Math.atan2(t-this.m_aPoint[0][1],e-this.m_aPoint[0][0])/Math.PI,i=(r+90)*Math.PI/180,a=(r-90)*Math.PI/180,n=25*Math.cos(i),s=25*Math.sin(i),o=25*Math.cos(a),x=25*Math.sin(a),f=0,l=0;f=e-n,l=t-s,1===this.m_iArrowType?(f=e-o,l=t-x,this.drawArrowLine(0,f,l,e,t)):0===this.m_iArrowType&&this.drawArrowLine(0,f,l,e,t),this.m_aCrossArrowPoint=[[e,t],[f,l]]},r.inShape=function(e,t){for(var r=!1,i=0,a=this.m_aPoint.length-1;i<a;i++){var n=Math.sqrt((this.m_aPoint[i+1][0]-this.m_aPoint[i][0])*(this.m_aPoint[i+1][0]-this.m_aPoint[i][0])+(this.m_aPoint[i+1][1]-this.m_aPoint[i][1])*(this.m_aPoint[i+1][1]-this.m_aPoint[i][1]));Math.sqrt((e-this.m_aPoint[i][0])*(e-this.m_aPoint[i][0])+(t-this.m_aPoint[i][1])*(t-this.m_aPoint[i][1]))+Math.sqrt((e-this.m_aPoint[i+1][0])*(e-this.m_aPoint[i+1][0])+(t-this.m_aPoint[i+1][1])*(t-this.m_aPoint[i+1][1]))-n<1&&(r=!0)}return r},t}(_f),yf=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Polygon",t.m_iPolygonType=1,t}qx(t,e);var r=t.prototype;return r.setPointInfo=function(e){if(null!=e){if(0===this.m_iPolygonType){for(var t=e[0][0],r=e[0][1],i=e[0][0],a=e[0][1],n=0,s=e.length;n<s;n++)t>e[n][0]&&(t=e[n][0]),r>e[n][1]&&(r=e[n][1]),i<e[n][0]&&(i=e[n][0]),a<e[n][1]&&(a=e[n][1]);this.m_aPoint=[[t,r],[i,r],[i,a],[t,a]]}else this.m_iPolygonType,this.m_aPoint=e;this.setEdgePoints(e)}},r.draw=function(){if(this.m_aPoint.length>0){Kx[ef].fillStyle=this.m_szFillColor,Kx[ef].strokeStyle=this.m_szDrawColor,Kx[ef].globalAlpha=1;var e=0,t=0;if(this.m_bChoosed)for(e=0,t=this.m_aPoint.length;e<t;e++)Kx[ef].beginPath(),Kx[ef].arc(this.m_aPoint[e][0],this.m_aPoint[e][1],3,0,360,!1),Kx[ef].fillStyle=this.m_szDrawColor,Kx[ef].closePath(),Kx[ef].fill();for(Kx[ef].beginPath(),Kx[ef].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]),e=0,t=this.m_aPoint.length;e<t;e++)0!==e&&Kx[ef].lineTo(this.m_aPoint[e][0],this.m_aPoint[e][1]);Kx[ef].stroke(),this.m_bClosed&&(Kx[ef].fillText(this.m_szTips,(this.m_oEdgePoints.left.x+this.m_oEdgePoints.right.x)/2,(this.m_oEdgePoints.top.y+this.m_oEdgePoints.bottom.y)/2),Kx[ef].closePath(),Kx[ef].stroke(),Kx[ef].globalAlpha=this.m_iTranslucent,Kx[ef].fill())}},r.move=function(e,t,r,i){if(1===this.m_iPolygonType){if(this.m_aPoint.length<this.m_iMaxPointNum&&this.m_aPoint.length>0){Kx[ef].fillStyle=this.m_szFillColor,Kx[ef].strokeStyle=this.m_szDrawColor,Kx[ef].globalAlpha=1;var a=0,n=0;for(a=0,n=this.m_aPoint.length;a<n;a++)Kx[ef].beginPath(),Kx[ef].arc(this.m_aPoint[a][0],this.m_aPoint[a][1],3,0,360,!1),Kx[ef].fillStyle=this.m_szDrawColor,Kx[ef].closePath(),Kx[ef].fill();for(Kx[ef].beginPath(),Kx[ef].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]),a=0,n=this.m_aPoint.length;a<n;a++)0!==a&&Kx[ef].lineTo(this.m_aPoint[a][0],this.m_aPoint[a][1]);Kx[ef].lineTo(e,t),Kx[ef].closePath(),Kx[ef].stroke()}}else if(0===this.m_iPolygonType){this.m_bChoosed=!0;var s=r,o=i,x=e,f=t;this.setPointInfo([[s,o],[x,o],[x,f],[s,f]]),this.draw()}},r.stretch=function(e,t){0===this.m_iEditType&&(1===this.m_iPolygonType?-1!==this.m_iIndexChoosePoint&&(this.m_aPoint[this.m_iIndexChoosePoint][0]=e,this.m_aPoint[this.m_iIndexChoosePoint][1]=t):0===this.m_iIndexChoosePoint?e<this.m_aPoint[2][0]&&t<this.m_aPoint[2][1]&&(this.m_aPoint[0][0]=e,this.m_aPoint[0][1]=t,this.m_aPoint[3][0]=e,this.m_aPoint[1][1]=t):1===this.m_iIndexChoosePoint?e>this.m_aPoint[3][0]&&t<this.m_aPoint[3][1]&&(this.m_aPoint[1][0]=e,this.m_aPoint[1][1]=t,this.m_aPoint[2][0]=e,this.m_aPoint[0][1]=t):2===this.m_iIndexChoosePoint?e>this.m_aPoint[0][0]&&t>this.m_aPoint[0][1]&&(this.m_aPoint[2][0]=e,this.m_aPoint[2][1]=t,this.m_aPoint[1][0]=e,this.m_aPoint[3][1]=t):3===this.m_iIndexChoosePoint&&e<this.m_aPoint[1][0]&&t>this.m_aPoint[1][1]&&(this.m_aPoint[3][0]=e,this.m_aPoint[3][1]=t,this.m_aPoint[0][0]=e,this.m_aPoint[2][1]=t),this.setPointInfo(this.m_aPoint),hf())},t}(_f),gf=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Point",t.m_szId="",t}qx(t,e);var r=t.prototype;return r.draw=function(){Kx[ef].beginPath(),Kx[ef].fillStyle=this.m_szDrawColor,Kx[ef].globalAlpha=1,Kx[ef].arc(this.m_aPoint[0][0],this.m_aPoint[0][1],10,0,2*Math.PI,!0),Kx[ef].closePath(),Kx[ef].fill()},r.drag=function(){},r.stretch=function(){},t}(_f),bf=function(){function e(e){Kx=this,this[Qx]=zx("#"+e),this[ef]=this[Qx][0].getContext("2d"),this[tf]=[],this[rf]=!1,this[af]="Rect",this[nf]=10,this[ff]=!0,this[xf]={},this[lf]=null,this[sf]={szDrawColor:"#ff0000",szFillColor:"#343434",iTranslucent:.7},this[of]=!1,this.m_iCanvasWidth=this[Qx].width(),this.m_iCanvasHeight=this[Qx].height(),this.m_iHorizontalResolution=0,this.m_iVerticalResolution=0,this.m_szDisplayMode="",this.m_szVideoFormat="",uf(),this[tf].length=0}var t=e.prototype;return t.setDrawMutiShapeOneTime=function(e){this[ff]=e},t.setMaxShapeSupport=function(e){this[nf]=e},t.getMaxShapeSupport=function(){return this[nf]},t.setDrawStatus=function(e,t){this[rf]=e,t&&e&&(this[lf]=t),e||(this[lf]=null)},t.setShapeType=function(e){this[af]=e,hf()},t.setCurrentShapeInfo=function(e){this[xf]=e||{szId:"",szTips:"",iMinClosed:3,iMaxPointNum:11,iPolygonType:1,iRedrawMode:0}},t.getShapeType=function(){return this[af]},t.getAllShapesInfo=function(){for(var e=[],t=0,r=this[tf].length;t<r;t++)"Grid"===this[tf][t].m_szType?e.push({szType:this[tf][t].m_szType,szGridMap:this[tf][t].m_szGridMap,iGridColNum:this[tf][t].m_iGridColNum,iGridRowNum:this[tf][t].m_iGridRowNum}):"RectOSD"===this[tf][t].m_szType?e.push({szType:this[tf][t].m_szType,szText:this[tf][t].m_szText,szEnabled:this[tf][t].m_szEnabled,szOSDType:this[tf][t].m_szOSDType,iPositionX:this[tf][t].m_aPoint[0][0],iPositionY:this[tf][t].m_aPoint[0][1],szDateStyle:this[tf][t].m_szDateStyle,szClockType:this[tf][t].m_szClockType,szDisplayWeek:this[tf][t].m_szDisplayWeek,szId:this[tf][t].m_szId,szAlignment:this[tf][t].m_szAlignment}):e.push({szType:this[tf][t].m_szType,aPoint:this[tf][t].m_aPoint,szId:this[tf][t].m_szId,bChoosed:this[tf][t].m_bChoosed});return e},t.deleteRepeatPolyonById=function(e){var t=this.getAllShapesInfo(),r=t.length;if(r>0)for(var i=0;i<r;i++)"Polygon"===t[i].szType&&t[i].szId===e&&this.deleteShape(i)},t.getShapesInfoByType=function(e){for(var t=[],r=0,i=this[tf].length;r<i;r++)this[tf][r].m_szType===e&&("Grid"===this[tf][r].m_szType?t.push({szType:this[tf][r].m_szType,szGridMap:this[tf][r].m_szGridMap,iGridColNum:this[tf][r].m_iGridColNum,iGridRowNum:this[tf][r].m_iGridRowNum}):"RectOSD"===this[tf][r].m_szType?t.push({szType:this[tf][r].m_szType,szText:this[tf][r].m_szText,szEnabled:this[tf][r].m_szEnabled,szOSDType:this[tf][r].m_szOSDType,iPositionX:this[tf][r].m_aPoint[0][0],iPositionY:this[tf][r].m_aPoint[0][1],szDateStyle:this[tf][r].m_szDateStyle,szClockType:this[tf][r].m_szClockType,szDisplayWeek:this[tf][r].m_szDisplayWeek,szId:this[tf][r].m_szId,szAlignment:this[tf][r].m_szAlignment}):"Polygon"===e?t.push({szType:this[tf][r].m_szType,szId:this[tf][r].m_szId,iPolygonType:this[tf][r].m_iPolygonType,iMinClosed:this[tf][r].m_iMinClosed,iMaxPointNum:this[tf][r].m_iMaxPointNum,iEditType:this[tf][r].m_iEditType,aPoint:this[tf][r].m_aPoint,bClosed:this[tf][r].m_bClosed,szTips:this[tf][r].m_szTips,szDrawColor:this[tf][r].m_szDrawColor,szFillColor:this[tf][r].m_szFillColor,iTranslucent:this[tf][r].m_iTranslucent}):"Line"===e?t.push({szType:this[tf][r].m_szType,szId:this[tf][r].m_szId,aPoint:this[tf][r].m_aPoint,szTips:this[tf][r].m_szTips,iLineType:this[tf][r].m_iLineType,iDirection:this[tf][r].m_iDirection,iArrowType:this[tf][r].m_iArrowType,szDrawColor:this[tf][r].m_szDrawColor,aCrossArrowPoint:this[tf][r].m_aCrossArrowPoint}):"Rect"===e?t.push({szType:this[tf][r].m_szType,iEditType:this[tf][r].m_iEditType,aPoint:this[tf][r].m_aPoint,szTips:this[tf][r].m_szTips,szDrawColor:this[tf][r].m_szDrawColor,szFillColor:this[tf][r].m_szFillColor,iTranslucent:this[tf][r].m_iTranslucent}):t.push({szType:this[tf][r].m_szType,aPoint:this[tf][r].m_aPoint}));return t},t.setShapesInfoByType=function(e,t){t||(t=[]);var r=null;if("Rect"===e||"Polygon"===e||"Line"===e||"Point"===e)for(var i=0,a=t.length;i<a;i++)"Rect"===e?((r=new df).m_iEditType=t[i].iEditType,r.m_szTips=t[i].szTips||"",r.m_szDrawColor=t[i].szDrawColor,r.m_szFillColor=t[i].szFillColor,r.m_iTranslucent=t[i].iTranslucent,r.m_iRedrawMode=t[i].iRedrawMode):"Polygon"===e?(r=new yf,0===t[i].iPolygonType?r.m_bClosed=!0:r.m_bClosed=t[i].bClosed,r.m_szTips=t[i].szTips||"",r.m_szId=t[i].szId||"",r.m_iPolygonType=t[i].iPolygonType,r.m_iMinClosed=t[i].iMinClosed||3,r.m_iMaxPointNum=t[i].iMaxPointNum||11,r.m_iEditType=t[i].iEditType,r.m_szDrawColor=t[i].szDrawColor,r.m_szFillColor=t[i].szFillColor,r.m_iTranslucent=t[i].iTranslucent,r.m_iRedrawMode=t[i].iRedrawMode):"Line"===e?((r=new Pf).m_iLineType=t[i].iLineType,r.m_szTips=t[i].szTips||"",r.m_szId=t[i].szId,r.m_iDirection=t[i].iDirection,r.m_iArrowType=t[i].iArrowType,r.m_szDrawColor=t[i].szDrawColor,r.setPointInfo(t[i].aPoint)):"Point"===e&&((r=new gf).m_szId=t[i].szId,r.m_szDrawColor=t[i].szDrawColor,r.setPointInfo(t[i].aPoint)),r.setPointInfo(t[i].aPoint),0===i&&(r.m_bChoosed=!0),cf(r);else"Grid"===e&&((r=new mf).m_szGridMap=t[0].szGridMap||"",r.m_iGridColNum=t[0].iGridColNum||22,r.m_iGridRowNum=t[0].iGridRowNum||18,cf(r));hf()},t.addOSDShape=function(e,t,r,i,a){r||i||(r=0,i=0),a||(a={});var n=new pf(e,t),s=10*e.replace(/[^x00-xff]/g,"rr").length;n.m_szOSDType=a.szOSDType||"",n.m_szDateStyle=a.szDateStyle||"",n.m_szClockType=a.szClockType||"",n.m_szDisplayWeek=a.szDisplayWeek||"",n.m_szId=a.szId||"",n.m_szAlignment=""+a.szAlignment||"0","0"===n.m_szAlignment?n.m_aPoint=[[r,i],[s+r,i],[s+r,i+20],[r,i+20]]:"1"===n.m_szAlignment?n.m_aPoint=[[0,i],[s,i],[s,i+20],[0,i+20]]:"2"===n.m_szAlignment?n.m_aPoint=[[this.m_iCanvasWidth-s,i],[this.m_iCanvasWidth,i],[this.m_iCanvasWidth,i+20],[this.m_iCanvasWidth-s,i+20]]:n.m_aPoint=[[r,i],[s+r,i],[s+r,i+20],[r,i+20]],cf(n),hf()},t.selectShapeById=function(e,t){for(var r=0,i=Kx[tf].length;r<i;r++)e===Kx[tf][r].m_szType&&(t===Kx[tf][r].m_szId?Kx[tf][r].m_bChoosed=!0:Kx[tf][r].m_bChoosed=!1);hf()},t.setCanvasSize=function(e,t){e>0&&t>0&&(this.m_iCanvasWidth=e,this.m_iCanvasHeight=t,hf())},t.setDrawStyle=function(e,t,r){this[sf]={szDrawColor:e,szFillColor:t,iTranslucent:r}},t.clearAllShape=function(){this[tf].length=0,Kx[of]=!1,hf()},t.clearShapeByType=function(e){for(var t=this[tf].length;t>0;t--)this[tf][t-1].m_szType===e&&("Grid"===e?(this[tf][t-1].m_szGridMap="",this[tf][t-1].m_aAddGridMap=[]):this[tf].splice(t-1,1));"Polygon"===e&&(Kx[of]=!1),hf()},t.deleteShape=function(e){this[tf].length>e&&this[tf].splice(e,1),hf()},t.updateCanvas=function(e){this[Qx]=zx("#"+e),this[ef]=this[Qx][0].getContext("2d"),this.m_iCanvasWidth=this[Qx].width(),this.m_iCanvasHeight=this[Qx].height(),uf()},t.resizeCanvas=function(){this.m_iCanvasWidth=this[Qx].width(),this.m_iCanvasHeight=this[Qx].height()},t.canvasRedraw=function(){hf()},e}(),Sf="object"==("undefined"==typeof global?"undefined":r(global))&&global&&global.Object===Object&&global,vf="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,Rf=Sf||vf||Function("return this")(),Cf=Rf.Symbol,Ef=Object.prototype,Ff=Ef.hasOwnProperty,Tf=Ef.toString,Df=Cf?Cf.toStringTag:void 0,If=Object.prototype.toString,Mf="[object Null]",Af="[object Undefined]",wf=Cf?Cf.toStringTag:void 0;function Lf(e){return null==e?void 0===e?Af:Mf:wf&&wf in Object(e)?function(e){var t=Ff.call(e,Df),r=e[Df];try{e[Df]=void 0;var i=!0}catch(e){}var a=Tf.call(e);return i&&(t?e[Df]=r:delete e[Df]),a}(e):function(e){return If.call(e)}(e)}function kf(e){return null!=e&&"object"==r(e)}var Bf=Array.isArray;function Of(e){var t=r(e);return null!=e&&("object"==t||"function"==t)}function Hf(e){return e}var Nf="[object AsyncFunction]",Vf="[object Function]",Yf="[object GeneratorFunction]",Uf="[object Proxy]";function Xf(e){if(!Of(e))return!1;var t=Lf(e);return t==Vf||t==Yf||t==Nf||t==Uf}var Wf,Gf=Rf["__core-js_shared__"],Jf=(Wf=/[^.]+$/.exec(Gf&&Gf.keys&&Gf.keys.IE_PROTO||""))?"Symbol(src)_1."+Wf:"",Zf=Function.prototype.toString,jf=/^\[object .+?Constructor\]$/,zf=Function.prototype,qf=Object.prototype,$f=zf.toString,Kf=qf.hasOwnProperty,Qf=RegExp("^"+$f.call(Kf).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function el(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Of(e)||(t=e,Jf&&Jf in t))&&(Xf(e)?Qf:jf).test(function(e){if(null!=e){try{return Zf.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}(r)?r:void 0}var tl,rl,il,al=Object.create,nl=function(){function e(){}return function(t){if(!Of(t))return{};if(al)return al(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),sl=Date.now,ol=function(){try{var e=el(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),xl=ol?function(e,t){return ol(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:Hf,fl=(tl=xl,rl=0,il=0,function(){var e=sl(),t=16-(e-il);if(il=e,t>0){if(++rl>=800)return arguments[0]}else rl=0;return tl.apply(void 0,arguments)}),ll=9007199254740991,hl=/^(?:0|[1-9]\d*)$/;function cl(e,t){var i=r(e);return!!(t=null==t?ll:t)&&("number"==i||"symbol"!=i&&hl.test(e))&&e>-1&&e%1==0&&e<t}function ul(e,t,r){"__proto__"==t&&ol?ol(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function _l(e,t){return e===t||e!=e&&t!=t}var dl=Object.prototype.hasOwnProperty;function pl(e,t,r){var i=e[t];dl.call(e,t)&&_l(i,r)&&(void 0!==r||t in e)||ul(e,t,r)}var ml=Math.max;var Pl=9007199254740991;function yl(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Pl}function gl(e){return null!=e&&yl(e.length)&&!Xf(e)}var bl=Object.prototype;function Sl(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||bl)}function vl(e){return kf(e)&&"[object Arguments]"==Lf(e)}var Rl=Object.prototype,Cl=Rl.hasOwnProperty,El=Rl.propertyIsEnumerable,Fl=vl(function(){return arguments}())?vl:function(e){return kf(e)&&Cl.call(e,"callee")&&!El.call(e,"callee")},Tl="object"==("undefined"==typeof exports?"undefined":r(exports))&&exports&&!exports.nodeType&&exports,Dl=Tl&&"object"==("undefined"==typeof module?"undefined":r(module))&&module&&!module.nodeType&&module,Il=Dl&&Dl.exports===Tl?Rf.Buffer:void 0,Ml=(Il?Il.isBuffer:void 0)||function(){return!1},Al={};Al["[object Float32Array]"]=Al["[object Float64Array]"]=Al["[object Int8Array]"]=Al["[object Int16Array]"]=Al["[object Int32Array]"]=Al["[object Uint8Array]"]=Al["[object Uint8ClampedArray]"]=Al["[object Uint16Array]"]=Al["[object Uint32Array]"]=!0,Al["[object Arguments]"]=Al["[object Array]"]=Al["[object ArrayBuffer]"]=Al["[object Boolean]"]=Al["[object DataView]"]=Al["[object Date]"]=Al["[object Error]"]=Al["[object Function]"]=Al["[object Map]"]=Al["[object Number]"]=Al["[object Object]"]=Al["[object RegExp]"]=Al["[object Set]"]=Al["[object String]"]=Al["[object WeakMap]"]=!1;var wl="object"==("undefined"==typeof exports?"undefined":r(exports))&&exports&&!exports.nodeType&&exports,Ll=wl&&"object"==("undefined"==typeof module?"undefined":r(module))&&module&&!module.nodeType&&module,kl=Ll&&Ll.exports===wl&&Sf.process,Bl=function(){try{return Ll&&Ll.require&&Ll.require("util").types||kl&&kl.binding&&kl.binding("util")}catch(e){}}(),Ol=Bl&&Bl.isTypedArray,Hl=Ol?function(e){return function(t){return e(t)}}(Ol):function(e){return kf(e)&&yl(e.length)&&!!Al[Lf(e)]},Nl=Object.prototype.hasOwnProperty;var Vl=Object.prototype.hasOwnProperty;function Yl(e){return gl(e)?function(e,t){var r=Bf(e),i=!r&&Fl(e),a=!r&&!i&&Ml(e),n=!r&&!i&&!a&&Hl(e),s=r||i||a||n,o=s?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],x=o.length;for(var f in e)!t&&!Nl.call(e,f)||s&&("length"==f||a&&("offset"==f||"parent"==f)||n&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||cl(f,x))||o.push(f);return o}(e,!0):function(e){if(!Of(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=Sl(e),r=[];for(var i in e)("constructor"!=i||!t&&Vl.call(e,i))&&r.push(i);return r}(e)}var Ul=el(Object,"create"),Xl=Object.prototype.hasOwnProperty,Wl=Object.prototype.hasOwnProperty;function Gl(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function Jl(e,t){for(var r=e.length;r--;)if(_l(e[r][0],t))return r;return-1}Gl.prototype.clear=function(){this.__data__=Ul?Ul(null):{},this.size=0},Gl.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Gl.prototype.get=function(e){var t=this.__data__;if(Ul){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Xl.call(t,e)?t[e]:void 0},Gl.prototype.has=function(e){var t=this.__data__;return Ul?void 0!==t[e]:Wl.call(t,e)},Gl.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Ul&&void 0===t?"__lodash_hash_undefined__":t,this};var Zl=Array.prototype.splice;function jl(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}jl.prototype.clear=function(){this.__data__=[],this.size=0},jl.prototype.delete=function(e){var t=this.__data__,r=Jl(t,e);return!(r<0||(r==t.length-1?t.pop():Zl.call(t,r,1),--this.size,0))},jl.prototype.get=function(e){var t=this.__data__,r=Jl(t,e);return r<0?void 0:t[r][1]},jl.prototype.has=function(e){return Jl(this.__data__,e)>-1},jl.prototype.set=function(e,t){var r=this.__data__,i=Jl(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this};var zl=el(Rf,"Map");function ql(e,t){var i,a,n=e.__data__;return("string"==(a=r(i=t))||"number"==a||"symbol"==a||"boolean"==a?"__proto__"!==i:null===i)?n["string"==typeof t?"string":"hash"]:n.map}function $l(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}$l.prototype.clear=function(){this.size=0,this.__data__={hash:new Gl,map:new(zl||jl),string:new Gl}},$l.prototype.delete=function(e){var t=ql(this,e).delete(e);return this.size-=t?1:0,t},$l.prototype.get=function(e){return ql(this,e).get(e)},$l.prototype.has=function(e){return ql(this,e).has(e)},$l.prototype.set=function(e,t){var r=ql(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this};var Kl=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object),Ql="[object Object]",eh=Function.prototype,th=Object.prototype,rh=eh.toString,ih=th.hasOwnProperty,ah=rh.call(Object);function nh(e){var t=this.__data__=new jl(e);this.size=t.size}nh.prototype.clear=function(){this.__data__=new jl,this.size=0},nh.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},nh.prototype.get=function(e){return this.__data__.get(e)},nh.prototype.has=function(e){return this.__data__.has(e)},nh.prototype.set=function(e,t){var r=this.__data__;if(r instanceof jl){var i=r.__data__;if(!zl||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new $l(i)}return r.set(e,t),this.size=r.size,this};var sh="object"==("undefined"==typeof exports?"undefined":r(exports))&&exports&&!exports.nodeType&&exports,oh=sh&&"object"==("undefined"==typeof module?"undefined":r(module))&&module&&!module.nodeType&&module,xh=oh&&oh.exports===sh?Rf.Buffer:void 0,fh=(xh&&xh.allocUnsafe,Rf.Uint8Array);function lh(e,t,r){(void 0!==r&&!_l(e[t],r)||void 0===r&&!(t in e))&&ul(e,t,r)}function hh(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function ch(e,t,r,i,a,n,s){var o=hh(e,r),x=hh(t,r),f=s.get(x);if(f)lh(e,r,f);else{var l,h=n?n(o,x,r+"",e,t,s):void 0,c=void 0===h;if(c){var u=Bf(x),_=!u&&Ml(x),d=!u&&!_&&Hl(x);h=x,u||_||d?Bf(o)?h=o:kf(l=o)&&gl(l)?h=function(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}(o):_?(c=!1,h=function(e,t){return e.slice()}(x)):d?(c=!1,h=function(e,t){var r,i,a=t?(i=new(r=e.buffer).constructor(r.byteLength),new fh(i).set(new fh(r)),i):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}(x,!0)):h=[]:function(e){if(!kf(e)||Lf(e)!=Ql)return!1;var t=Kl(e);if(null===t)return!0;var r=ih.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&rh.call(r)==ah}(x)||Fl(x)?(h=o,Fl(o)?h=function(e){return function(e,t,r,i){var a=!r;r||(r={});for(var n=-1,s=t.length;++n<s;){var o=t[n],x=void 0;void 0===x&&(x=e[o]),a?ul(r,o,x):pl(r,o,x)}return r}(e,Yl(e))}(o):Of(o)&&!Xf(o)||(h=function(e){return"function"!=typeof e.constructor||Sl(e)?{}:nl(Kl(e))}(x))):c=!1}c&&(s.set(x,h),a(h,x,i,n,s),s.delete(x)),lh(e,r,h)}}function uh(e,t,r,i,a){e!==t&&function(e,t,r){for(var i=-1,a=Object(e),n=r(e),s=n.length;s--;){var o=n[++i];if(!1===t(a[o],o,a))break}}(t,(function(n,s){if(a||(a=new nh),Of(n))ch(e,t,s,r,uh,i,a);else{var o=i?i(hh(e,s),n,s+"",e,t,a):void 0;void 0===o&&(o=n),lh(e,s,o)}}),Yl)}var _h,dh=(_h=function(e,t,r){uh(e,t,r)},function(e,t){return fl(function(e,t,r){return t=ml(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,n=ml(i.length-t,0),s=Array(n);++a<n;)s[a]=i[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=i[a];return o[t]=r(s),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,o)}}(e,t,Hf),e+"")}((function(e,t){var i=-1,a=t.length,n=a>1?t[a-1]:void 0,s=a>2?t[2]:void 0;for(n=_h.length>3&&"function"==typeof n?(a--,n):void 0,s&&function(e,t,i){if(!Of(i))return!1;var a=r(t);return!!("number"==a?gl(i)&&cl(t,i.length):"string"==a&&t in i)&&_l(i[t],e)}(t[0],t[1],s)&&(n=a<3?void 0:n,a=1),e=Object(e);++i<a;){var o=t[i];o&&_h(e,o,i)}return e}))),ph="https://open.ys7.com";
/*
  *
  * @ezuikit/utils-service v1.0.1
  * Copyright (c) 2024-3-23 Ezviz-OpenBiz
  * Released under MIT the License.
  *
  */function mh(e,t){return new Promise((function(r,i){fetch(e,t).then((function(e){return e.json()})).then((function(e){var t,a;if(200==+e.code||0==+(null==(t=e.meta)?void 0:t.code)||200==+(null==(a=e.meta)?void 0:a.code))r(e);else{if(e.meta)return e.meta.msg=e.meta.message,void i(e.meta);i(e)}})).catch((function(e){if(e.meta)return e.meta.msg=e.meta.message,void i(e.meta);i(e)}))}))}function Ph(e,t,r,i,a,n,s){try{var o=e[n](s),x=o.value}catch(e){return void r(e)}o.done?t(x):Promise.resolve(x).then(i,a)}function yh(e){var t=e.slice(0,4),r=e.slice(4,6),i=e.slice(6,8),a=e.slice(8,10),n=e.slice(10,12),s=e.slice(12,14);return new Date(t+"/"+r+"/"+i+" "+a+":"+n+":"+s)}var gh=function(){function e(e){if(!e)throw new Error("options is required");var t;this._options=e,/^http[s]?:\/\//.test(null!=(t=null==e?void 0:e.domain)?t:"")||(this._options.domain=ph)}var t=e.prototype;return t.getDeviceCapacity=function(){return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var r=new FormData;Object.entries(e).forEach((function(e){var t=e[0],i=e[1];r.append(t,i)})),e=r}return mh((null!=t?t:ph)+"/api/lapp/device/capacity",{method:"POST",body:e})}(Ox(this._options,["accessToken","deviceSerial"]),this._options.domain)},t.getDeviceInfo=function(){return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var r=new FormData;Object.entries(e).forEach((function(e){var t=e[0],i=e[1];r.append(t,i)})),e=r}return mh((null!=t?t:ph)+"/api/lapp/device/info",{method:"POST",body:e})}(Ox(this._options,["accessToken","deviceSerial"]),this._options.domain)},t.getRealPlayUrl=function(e){var t,i,a=this,n=null==(i=this._options)||null==(t=i.extraParams)?void 0:t.ezopenParams;return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var r,i,a=new FormData;a.append("isFlv","false"),a.append("userAgent",null==(i=window)||null==(r=i.navigator)?void 0:r.userAgent),a.append("isHttp","false"),Object.entries(e).forEach((function(e){var t=e[0],r=e[1];a.append(t,r)})),e=a}return mh((null!=t?t:ph)+"/api/lapp/live/url/ezopen",{method:"POST",body:e})}(e=Object.assign({},Ox(this._options,["accessToken"]),e,"object"==r(n)?n:{}),this._options.domain).then((function(e){var t,i,n,s,o,x,f,l,h,c,u="",_="",d="";if((null==e||null==(t=e.ext)?void 0:t.token)?(_+=e.data,d=e.ext.token,u=e.data):(null==(i=e.data)?void 0:i.token)&&(_+=e.data.url,d=e.data.token,u=e.data.url),_=_.includes("live")?_+"&ssn="+d+"&auth=1&biz=4&cln=100":_+"&ssn="+d+"&auth=1&cln=100",null==(s=a._options)||null==(n=s.extraParams)?void 0:n.wsParams)if("string"==typeof(null==(x=a._options)||null==(o=x.extraParams)?void 0:o.wsParams))_+="&"+(null==(c=a._options)||null==(h=c.extraParams)?void 0:h.wsParams);else if("object"==r(null==(l=a._options)||null==(f=l.extraParams)?void 0:f.wsParams)){var p,m;for(var P in null==(m=a._options)||null==(p=m.extraParams)?void 0:p.wsParams){var y,g;_+="&"+P+"="+(null==(g=a._options)||null==(y=g.extraParams)?void 0:y.wsParams[P])}}return{playUrl:u,stream:d,realUrl:_}}))},t.getVideoByTime=function(e){return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var r,i=new FormData;Object.entries(e).forEach((function(e){var t=e[0],r=e[1];i.append(t,r)})),i.append("version",null!=(r=e.version)?r:"2.0"),e=i}return new Promise((function(r,i){var a=function(){return s.apply(this,arguments)},n=[];function s(){var o;return o=function(){var s,o,x,f;return function(e,t){var r,i,a,n,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function o(n){return function(o){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(a=2&n[0]?i.return:n[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],i=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,o])}}}(this,(function(l){switch(l.label){case 0:return[4,mh((null!=t?t:ph)+"/api/lapp/video/by/time",{method:"POST",body:e})];case 1:return(o=l.sent()).data&&Array.isArray(o.data)?(n=n.concat(o.data),r({code:200,data:n,msg:""}),[2]):(!Array.isArray(o.data)&&(null==(s=o.data)?void 0:s.files)&&(n=n.concat(o.data.files),(null==(x=o.data)?void 0:x.isAll)?r({code:200,data:n,msg:""}):(null==(f=o.data)?void 0:f.nextFileTime)&&(e.append("startTime",o.data.nextFileTime),a().catch(i))),r({code:200,data:[],msg:""}),[2])}}))},s=function(){var e=this,t=arguments;return new Promise((function(r,i){var a=o.apply(e,t);function n(e){Ph(a,r,i,n,s,"next",e)}function s(e){Ph(a,r,i,n,s,"throw",e)}n(void 0)}))},s.apply(this,arguments)}a().catch(i)}))}(e=Object.assign({},Ox(this._options,["accessToken","deviceSerial"]),e),this._options.domain)},t.getRecordCloudVideoByTime=function(e){return function(e,t){var r,i,a={startTime:e.startTime?null==(r=Yx(e.startTime))?void 0:r.format("YYYY-MM-DD HH:mm:ss"):void 0,endTime:e.startTime?null==(i=Yx(e.endTime))?void 0:i.format("YYYY-MM-DD HH:mm:ss"):void 0,spaceId:e.spaceId},n=Object.keys(a).reduce((function(e,t){return null==a[t]?e:e+="&"+t+"="+encodeURIComponent(a[t])}),"").replace("&","");return mh((null!=t?t:ph)+"/api/service/cloudrecord/video/info/list?"+n,{method:"GET",headers:{accessToken:e.accessToken,deviceSerial:e.deviceSerial,localIndex:e.channelNo}}).then((function(e){return e.data=(e.data||[]).map((function(e){return e.endTime=yh(e.stopTime).getTime(),e.startTime=yh(e.startTime).getTime(),e.iStorageVersion=e.istorageVersion,e.busType=7,delete e.istorageVersion,e})),e}))}(e=Object.assign({},Ox(this._options,["accessToken","deviceSerial"]),e),this._options.domain)},t.getThemeDetailById=function(e){return t={accessToken:this._options.accessToken,id:e},mh((null!=(r=this._options.domain)?r:ph)+"/api/service/media/template/getDetail?accessToken="+t.accessToken+"&id="+t.id,{method:"GET"});var t,r},t.setMirrorFlip=function(e){return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var r=new FormData;Object.entries(e).forEach((function(e){var t=e[0],i=e[1];r.append(t,i)})),e=r}return mh((null!=t?t:ph)+"/api/lapp/device/ptz/mirror",{method:"POST",body:e})}(e=Object.assign({},Ox(this._options,["accessToken","deviceSerial"]),e),this._options.domain)},t.getVideoByID=function(e){return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var r=new FormData;Object.entries(e).forEach((function(e){var t=e[0],i=e[1];r.append(t,i)})),e=r}return mh((null!=t?t:ph)+"/api/lapp/video/by/id",{method:"POST",body:e})}(e,this._options.domain)},t.getVersion=function(){return this.version},e}(),bh={title:"title",name:"name {{name}}"},Sh={title:"标题",name:"姓名 {{name}}"};function vh(e){return/^ezopen:\/\//.test(e)}var Rh={autoPlay:!0,width:600,height:400,decoderType:"auto",audio:!0,logger:{level:"INFO",name:"EZOPEN",showTime:!0}};function Ch(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Eh(e,t,r,i,a,n,s){try{var o=e[n](s),x=o.value}catch(e){return void r(e)}o.done?t(x):Promise.resolve(x).then(i,a)}function Fh(e){return function(){var t=this,r=arguments;return new Promise((function(i,a){var n=e.apply(t,r);function s(e){Eh(n,i,a,s,o,"next",e)}function o(e){Eh(n,i,a,s,o,"throw",e)}s(void 0)}))}}function Th(e,t){var r,i,a,n,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function o(n){return function(o){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(a=2&n[0]?i.return:n[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],i=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,o])}}}var Dh=function(){function e(e){this.plugins=new Map,this.context=e}var t=e.prototype;return t.usePlugins=function(e){var t=this;return Fh((function(){var r,i,a;return Th(this,(function(n){switch(n.label){case 0:r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Ch(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ch(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e),n.label=1;case 1:return(i=r()).done?[3,4]:(a=i.value,[4,t.use(a)]);case 2:n.sent(),n.label=3;case 3:return[3,1];case 4:return[2]}}))}))()},t.use=function(e){var t=this;return Fh((function(){var r;return Th(this,(function(i){switch(i.label){case 0:return e.name?("function"==typeof(null==e?void 0:e.init)&&(null==e||e.init()),r=!0,(null==e?void 0:e.beforeExec)?[4,e.beforeExec(t.context)]:[3,2]):[3,3];case 1:r=i.sent(),i.label=2;case 2:return r&&e.exec(t.context),"function"==typeof(null==e?void 0:e.afterExec)&&(null==e||e.afterExec(t.context)),t.plugins.set(e.name.toLowerCase(),e),[3,4];case 3:i.label=4;case 4:return[2]}}))}))()},t.destroyByName=function(e){var t=this.plugins.get(e.toLowerCase());t&&"function"==typeof(null==t?void 0:t.destroy)&&t.destroy(),this.plugins.delete(e)},t.destroy=function(){var e=this;(this.plugins||[]).forEach((function(t,r){e.destroyByName(r)})),this.plugins=null},e}();function Ih(e,t,r){return{code:null!=t?t:0,data:e,msg:r}}function Mh(e,t,r,i){return{data:e,msg:t,source:r,target:i}}var Ah="playError",wh="EVENT_CALLBACK",Lh={pluginErrorHandler:"pluginErrorHandler",getStreamHeaderCallback:"getStreamHeaderCallback",getVideoStreamCallback:"getVideoStreamCallback",appearFirstFrameCallback:"appearFirstFrameCallback",averageStreamSuccessCallback:"averageStreamSuccessCallback",setRunTimeInfoCallBack:"setRunTimeInfoCallBack",openStreamCallback:"openStreamCallback"},kh={initializing:"initializing",loadstart:"loadstart",abort:"abort",waiting:"waiting",canplay:"canplay",rateChange:"ratechange",volumeChange:"volumechange",debug:"debug",error:"error",videoInfo:"videoInfo",decoder:"decoder",urlChange:"urlChange",API:{play:"play",pause:"pause",rateChange:"ratechange",volumeChange:"volumechange",destroy:"destroy",snapshot:"snapshot",fullScreen:"fullScreen",exitScreen:"exitScreen",resize:"resize",seek:"seek",resume:"resume"},NETWORK:{deviceCapacity:"network.deviceCapacity",deviceInfo:"network.deviceInfo",videoFragmentFiles:"network.videoFragmentFiles",error:{error:"network.error",deviceCapacity:"network.error.deviceCapacity",deviceInfo:"network.error.deviceInfo",realPlayUrl:"network.error.realPlayUrl",videoFragmentFiles:"network.error.videoFragmentFiles"}},SOCKET:{autoClose:"StreamClient.autoClose",openStream:"StreamClient.openStream",startPlay:"StreamClient.startPlay",stopAll:"StreamClient.stopAll",setPlayRate:"StreamClient.setPlayRate",seek:"StreamClient.seek",close:"StreamClient.close"},CALLBACK:Lh,FECCorrect:{setFEC2DParam:"setFEC2DParam"}},Bh="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Oh=new Uint8Array(16);function Hh(){if(!Bh)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Bh(Oh)}for(var Nh=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Vh=[],Yh=0;Yh<256;++Yh)Vh.push((Yh+256).toString(16).substr(1));function Uh(e,t,r){var i=(e=e||{}).random||(e.rng||Hh)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){r=r||0;for(var a=0;a<16;++a)t[r+a]=i[a];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(Vh[e[t+0]]+Vh[e[t+1]]+Vh[e[t+2]]+Vh[e[t+3]]+"-"+Vh[e[t+4]]+Vh[e[t+5]]+"-"+Vh[e[t+6]]+Vh[e[t+7]]+"-"+Vh[e[t+8]]+Vh[e[t+9]]+"-"+Vh[e[t+10]]+Vh[e[t+11]]+Vh[e[t+12]]+Vh[e[t+13]]+Vh[e[t+14]]+Vh[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&Nh.test(e)}(r))throw TypeError("Stringified UUID is invalid");return r}(i)}var Xh=function(){function e(){}var t=e.prototype;return t.createClientObject=function(e,t,r,i){return{socket:e,id:t,iCurChannel:r,iCurStream:i,resolve:null,reject:null}},t.zeroPlayCmd=function(e,t){return new Uint8Array([0,0,0,44,0,0,0,0,0,0,0,0,0,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e+1,0,0,0,t,0,0,4,0])},t.playCmd=function(e,t){return new Uint8Array([0,0,0,44,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e,0,0,0,t,0,0,4,0])},t.playbackCmd=function(e,t,r,i){var a=e.split("T")[0],n=e.split("T")[1],s="0"+parseInt(a.substring(0,4),10).toString(16),o=parseInt(a.substring(4,6),10),x=parseInt(a.substring(6),10),f=parseInt(n.substring(0,2),10),l=parseInt(n.substring(2,4),10),h=parseInt(n.substring(4,6),10),c=t.split("T")[0],u=t.split("T")[1],_="0"+parseInt(c.substring(0,4),10).toString(16),d=parseInt(c.substring(4,6),10),p=parseInt(u.substring(0,2),10),m=parseInt(u.substring(2,4),10),P=parseInt(u.substring(4,6),10),y=[0,0,0,96,0,0,0,0,0,0,0,0,0,3,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,r,0,0,parseInt(s.substring(0,2),16),parseInt(s.substring(2,4),16),0,0,0,o,0,0,0,x,0,0,0,f,0,0,0,l,0,0,0,h,0,0,parseInt(_.substring(0,2),16),parseInt(_.substring(2,4),16),0,0,0,d,0,0,0,x,0,0,0,p,0,0,0,m,0,0,0,P,0,0,0,0,0,0,0,0,i,0,0,0];return new Uint8Array(y)},t.playRateCmd=function(e){for(var t=(parseInt(e,10)>>>0).toString(16).toLocaleUpperCase().toString(16),r=t.length;r<8;r++)t="0"+t;for(var i=[0,0,0,0],a=0,n=t.length;a<n;a+=2)i[Math.floor(a/2)]=parseInt(t.substring(a,a+2),16);var s=[0,0,0,36,0,0,0,0,0,0,0,0,0,3,1,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i[0],i[1],i[2],i[3]];return new Uint8Array(s)},t.pauseCmd=function(){return new Uint8Array([0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])},t.resumeCmd=function(){return new Uint8Array([0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])},e}(),Wh=function(){function e(){}var t=e.prototype;return t.createClientObject=function(e,t,r){return{socket:e,id:t,playURL:r,resolve:null,reject:null}},t.getMediaFromSdp=function(e){for(var t=e.indexOf("MEDIAINFO=")+10,r=e.slice(t,t+80),i=[],a=0,n=r.length/2;a<n;a++)i[a]=parseInt(r.slice(2*a,2*a+2),16);return new Uint8Array(i)},t.playCmd=function(e){var t={sequence:0,cmd:"realplay",url:e};return JSON.stringify(t)},t.playbackCmd=function(e,t,r){var i={sequence:0,cmd:"playback",url:r,startTime:e,endTime:t};return JSON.stringify(i)},t.playRateCmd=function(e){var t={sequence:0,cmd:"changespeed",speed:e};return JSON.stringify(t)},t.pauseCmd=function(){return JSON.stringify({sequence:0,cmd:"pause"})},t.resumeCmd=function(){return JSON.stringify({sequence:0,cmd:"resume"})},t.getError=function(e){var t=3001;return e&&(6===parseInt(e.statusCode,10)&&"streamLimit"===e.subStatusCode?t=3002:4===parseInt(e.statusCode,10)&&"badAuthorization"===e.subStatusCode&&(t=3003)),{iErrorNum:t,oError:e}},e}();function Gh(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function Jh(){return new Gh(null)}Gh.prototype.am=function(e,t,r,i,a,n){var s=16383&t;for(t>>=14;--n>=0;){var o=16383&this[e],x=this[e++]>>14,f=t*o+x*s;a=((o=s*o+((16383&f)<<14)+r[i]+a)>>28)+(f>>14)+t*x,r[i++]=268435455&o}return a},Gh.prototype.DB=28,Gh.prototype.DM=268435455,Gh.prototype.DV=1<<28,Gh.prototype.FV=Math.pow(2,52),Gh.prototype.F1=24,Gh.prototype.F2=4;var Zh,jh,zh=[];for(Zh="0".charCodeAt(0),jh=0;jh<=9;++jh)zh[Zh++]=jh;for(Zh="a".charCodeAt(0),jh=10;jh<36;++jh)zh[Zh++]=jh;for(Zh="A".charCodeAt(0),jh=10;jh<36;++jh)zh[Zh++]=jh;function qh(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function $h(e,t){var r=zh[e.charCodeAt(t)];return null==r?-1:r}function Kh(e){var t=Jh();return t.fromInt(e),t}function Qh(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),!!(e>>1)&&(r+=1),r}function ec(e){this.m=e}function tc(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function rc(e,t){return e&t}function ic(e,t){return e|t}function ac(e,t){return e^t}function nc(e,t){return e&~t}function sc(e){if(0==e)return-1;var t=0;return!(65535&e)&&(e>>=16,t+=16),!(255&e)&&(e>>=8,t+=8),!(15&e)&&(e>>=4,t+=4),!(3&e)&&(e>>=2,t+=2),!(1&e)&&++t,t}function oc(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function xc(){}function fc(e){return e}function lc(e){this.r2=Jh(),this.q3=Jh(),Gh.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}ec.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},ec.prototype.revert=function(e){return e},ec.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},ec.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},ec.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},tc.prototype.convert=function(e){var t=Jh();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(Gh.ZERO)>0&&this.m.subTo(t,t),t},tc.prototype.revert=function(e){var t=Jh();return e.copyTo(t),this.reduce(t),t},tc.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r,i=(r=32767&e[t])*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,i,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},tc.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},tc.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},Gh.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},Gh.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0},Gh.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.s=this.t=0;for(var i=e.length,a=!1,n=0;--i>=0;){var s=8==r?255&e[i]:$h(e,i);s<0?"-"==e.charAt(i)&&(a=!0):(a=!1,0==n?this[this.t++]=s:n+r>this.DB?(this[this.t-1]|=(s&(1<<this.DB-n)-1)<<n,this[this.t++]=s>>this.DB-n):this[this.t-1]|=s<<n,(n+=r)>=this.DB&&(n-=this.DB))}8==r&&!!(128&e[0])&&(this.s=-1,n>0&&(this[this.t-1]|=(1<<this.DB-n)-1<<n)),this.clamp(),a&&Gh.ZERO.subTo(this,this)},Gh.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},Gh.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},Gh.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},Gh.prototype.lShiftTo=function(e,t){var r,i=e%this.DB,a=this.DB-i,n=(1<<a)-1,s=Math.floor(e/this.DB),o=this.s<<i&this.DM;for(r=this.t-1;r>=0;--r)t[r+s+1]=this[r]>>a|o,o=(this[r]&n)<<i;for(r=s-1;r>=0;--r)t[r]=0;t[s]=o,t.t=this.t+s+1,t.s=this.s,t.clamp()},Gh.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var i=e%this.DB,a=this.DB-i,n=(1<<i)-1;t[0]=this[r]>>i;for(var s=r+1;s<this.t;++s)t[s-r-1]|=(this[s]&n)<<a,t[s-r]=this[s]>>i;i>0&&(t[this.t-r-1]|=(this.s&n)<<a),t.t=this.t-r,t.clamp()}},Gh.prototype.subTo=function(e,t){for(var r=0,i=0,a=Math.min(e.t,this.t);r<a;)i+=this[r]-e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i-=e[r],t[r++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[r++]=this.DV+i:i>0&&(t[r++]=i),t.t=r,t.clamp()},Gh.prototype.multiplyTo=function(e,t){var r=this.abs(),i=e.abs(),a=r.t;for(t.t=a+i.t;--a>=0;)t[a]=0;for(a=0;a<i.t;++a)t[a+r.t]=r.am(0,i[a],t,a,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&Gh.ZERO.subTo(t,t)},Gh.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var i=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,i,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},Gh.prototype.divRemTo=function(e,t,r){var i=e.abs();if(!(i.t<=0)){var a=this.abs();if(a.t<i.t)null!=t&&t.fromInt(0),null!=r&&this.copyTo(r);else{null==r&&(r=Jh());var n=Jh(),s=this.s,o=(e=e.s,this.DB-Qh(i[i.t-1]));if(o>0?(i.lShiftTo(o,n),a.lShiftTo(o,r)):(i.copyTo(n),a.copyTo(r)),0!=(a=n[(i=n.t)-1])){var x=a*(1<<this.F1)+(i>1?n[i-2]>>this.F2:0),f=this.FV/x,l=(x=(1<<this.F1)/x,1<<this.F2),h=r.t,c=h-i,u=null==t?Jh():t;for(n.dlShiftTo(c,u),r.compareTo(u)>=0&&(r[r.t++]=1,r.subTo(u,r)),Gh.ONE.dlShiftTo(i,u),u.subTo(n,n);n.t<i;)n[n.t++]=0;for(;--c>=0;){var _=r[--h]==a?this.DM:Math.floor(r[h]*f+(r[h-1]+l)*x);if((r[h]+=n.am(0,_,r,c,0,i))<_)for(n.dlShiftTo(c,u),r.subTo(u,r);r[h]<--_;)r.subTo(u,r)}null!=t&&(r.drShiftTo(i,t),s!=e&&Gh.ZERO.subTo(t,t)),r.t=i,r.clamp(),o>0&&r.rShiftTo(o,r),s<0&&Gh.ZERO.subTo(r,r)}}}},Gh.prototype.invDigit=function(){if(this.t<1)return 0;var e,t=this[0];return 1&t?(e=(e=(e=(e=(e=3&t)*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e:0},Gh.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},Gh.prototype.exp=function(e,t){if(e>4294967295||e<1)return Gh.ONE;var r=Jh(),i=Jh(),a=t.convert(this),n=Qh(e)-1;for(a.copyTo(r);--n>=0;)if(t.sqrTo(r,i),(e&1<<n)>0)t.mulTo(i,a,r);else{var s=r;r=i,i=s}return t.revert(r)},Gh.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);if(16==e)e=4;else if(8==e)e=3;else if(2==e)e=1;else if(32==e)e=5;else if(64==e)e=6;else{if(4!=e)return this.toRadix(e);e=2}var t,r=(1<<e)-1,i=!1,a="",n=this.t,s=this.DB-n*this.DB%e;if(n-- >0)for(s<this.DB&&(t=this[n]>>s)>0&&(i=!0,a=qh(t));n>=0;)s<e?(t=(this[n]&(1<<s)-1)<<e-s,t|=this[--n]>>(s+=this.DB-e)):(t=this[n]>>(s-=e)&r,s<=0&&(s+=this.DB,--n)),t>0&&(i=!0),i&&(a+=qh(t));return i?a:"0"},Gh.prototype.negate=function(){var e=Jh();return Gh.ZERO.subTo(this,e),e},Gh.prototype.abs=function(){return this.s<0?this.negate():this},Gh.prototype.compareTo=function(e){if(0!=(t=this.s-e.s))return t;var t,r=this.t;if(0!=(t=r-e.t))return t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},Gh.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+Qh(this[this.t-1]^this.s&this.DM)},Gh.prototype.mod=function(e){var t=Jh();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(Gh.ZERO)>0&&e.subTo(t,t),t},Gh.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new ec(t):new tc(t),this.exp(e,r)},Gh.ZERO=Kh(0),Gh.ONE=Kh(1),xc.prototype.convert=fc,xc.prototype.revert=fc,xc.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},xc.prototype.sqrTo=function(e,t){e.squareTo(t)},lc.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Jh();return e.copyTo(t),this.reduce(t),t},lc.prototype.revert=function(e){return e},lc.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},lc.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},lc.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var hc=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],cc=67108864/hc[hc.length-1];function uc(){}function _c(){this.j=this.i=0,this.S=[]}Gh.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},Gh.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Kh(t=Math.pow(e,t)),i=Jh(),a=Jh(),n="";for(this.divRemTo(r,i,a);i.signum()>0;)n=(t+a.intValue()).toString(e).substr(1)+n,i.divRemTo(r,i,a);return a.intValue().toString(e)+n},Gh.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),i=Math.pow(t,r),a=!1,n=0,s=0,o=0;o<e.length;++o){var x=$h(e,o);x<0?"-"==e.charAt(o)&&0==this.signum()&&(a=!0):(s=t*s+x,++n>=r&&(this.dMultiply(i),this.dAddOffset(s,0),s=n=0))}n>0&&(this.dMultiply(Math.pow(t,n)),this.dAddOffset(s,0)),a&&Gh.ZERO.subTo(this,this)},Gh.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(Gh.ONE.shiftLeft(e-1),ic,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(Gh.ONE.shiftLeft(e-1),this);else{var i=7&e;(r=[]).length=1+(e>>3),t.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}},Gh.prototype.bitwiseTo=function(e,t,r){var i,a,n=Math.min(e.t,this.t);for(i=0;i<n;++i)r[i]=t(this[i],e[i]);if(e.t<this.t){for(a=e.s&this.DM,i=n;i<this.t;++i)r[i]=t(this[i],a);r.t=this.t}else{for(a=this.s&this.DM,i=n;i<e.t;++i)r[i]=t(a,e[i]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},Gh.prototype.changeBit=function(e,t){var r=Gh.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},Gh.prototype.addTo=function(e,t){for(var r=0,i=0,a=Math.min(e.t,this.t);r<a;)i+=this[r]+e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i+=e[r],t[r++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[r++]=i:i<-1&&(t[r++]=this.DV+i),t.t=r,t.clamp()},Gh.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},Gh.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},Gh.prototype.multiplyLowerTo=function(e,t,r){var i,a=Math.min(this.t+e.t,t);for(r.s=0,r.t=a;a>0;)r[--a]=0;for(i=r.t-this.t;a<i;++a)r[a+this.t]=this.am(0,e[a],r,a,0,this.t);for(i=Math.min(e.t,t);a<i;++a)this.am(0,e[a],r,a,0,t-a);r.clamp()},Gh.prototype.multiplyUpperTo=function(e,t,r){--t;var i=r.t=this.t+e.t-t;for(r.s=0;--i>=0;)r[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)r[this.t+i-t]=this.am(t-i,e[i],r,0,0,this.t+i-t);r.clamp(),r.drShiftTo(1,r)},Gh.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var i=this.t-1;i>=0;--i)r=(t*r+this[i])%e;return r},Gh.prototype.millerRabin=function(e){var t=this.subtract(Gh.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var i=t.shiftRight(r);(e=e+1>>1)>hc.length&&(e=hc.length);for(var a=Jh(),n=0;n<e;++n){a.fromInt(hc[Math.floor(Math.random()*hc.length)]);var s=a.modPow(i,this);if(0!=s.compareTo(Gh.ONE)&&0!=s.compareTo(t)){for(var o=1;o++<r&&0!=s.compareTo(t);)if(0==(s=s.modPowInt(2,this)).compareTo(Gh.ONE))return!1;if(0!=s.compareTo(t))return!1}}return!0},Gh.prototype.clone=function(){var e=Jh();return this.copyTo(e),e},Gh.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},Gh.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},Gh.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},Gh.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},Gh.prototype.toByteArray=function(){var e=this.t,t=[];t[0]=this.s;var r,i=this.DB-e*this.DB%8,a=0;if(e-- >0)for(i<this.DB&&(r=this[e]>>i)!=(this.s&this.DM)>>i&&(t[a++]=r|this.s<<this.DB-i);e>=0;)i<8?(r=(this[e]&(1<<i)-1)<<8-i,r|=this[--e]>>(i+=this.DB-8)):(r=this[e]>>(i-=8)&255,i<=0&&(i+=this.DB,--e)),!!(128&r)&&(r|=-256),0==a&&(128&this.s)!=(128&r)&&++a,(a>0||r!=this.s)&&(t[a++]=r);return t},Gh.prototype.equals=function(e){return 0==this.compareTo(e)},Gh.prototype.min=function(e){return this.compareTo(e)<0?this:e},Gh.prototype.max=function(e){return this.compareTo(e)>0?this:e},Gh.prototype.and=function(e){var t=Jh();return this.bitwiseTo(e,rc,t),t},Gh.prototype.or=function(e){var t=Jh();return this.bitwiseTo(e,ic,t),t},Gh.prototype.xor=function(e){var t=Jh();return this.bitwiseTo(e,ac,t),t},Gh.prototype.andNot=function(e){var t=Jh();return this.bitwiseTo(e,nc,t),t},Gh.prototype.not=function(){for(var e=Jh(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},Gh.prototype.shiftLeft=function(e){var t=Jh();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},Gh.prototype.shiftRight=function(e){var t=Jh();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},Gh.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+sc(this[e]);return this.s<0?this.t*this.DB:-1},Gh.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=oc(this[r]^t);return e},Gh.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:!!(this[t]&1<<e%this.DB)},Gh.prototype.setBit=function(e){return this.changeBit(e,ic)},Gh.prototype.clearBit=function(e){return this.changeBit(e,nc)},Gh.prototype.flipBit=function(e){return this.changeBit(e,ac)},Gh.prototype.add=function(e){var t=Jh();return this.addTo(e,t),t},Gh.prototype.subtract=function(e){var t=Jh();return this.subTo(e,t),t},Gh.prototype.multiply=function(e){var t=Jh();return this.multiplyTo(e,t),t},Gh.prototype.divide=function(e){var t=Jh();return this.divRemTo(e,t,null),t},Gh.prototype.remainder=function(e){var t=Jh();return this.divRemTo(e,null,t),t},Gh.prototype.divideAndRemainder=function(e){var t=Jh(),r=Jh();return this.divRemTo(e,t,r),[t,r]},Gh.prototype.modPow=function(e,t){var r,i,a=e.bitLength(),n=Kh(1);if(a<=0)return n;r=a<18?1:a<48?3:a<144?4:a<768?5:6,i=a<8?new ec(t):t.isEven()?new lc(t):new tc(t);var s=[],o=3,x=r-1,f=(1<<r)-1;if(s[1]=i.convert(this),r>1)for(a=Jh(),i.sqrTo(s[1],a);o<=f;)s[o]=Jh(),i.mulTo(a,s[o-2],s[o]),o+=2;var l,h=e.t-1,c=!0,u=Jh();for(a=Qh(e[h])-1;h>=0;){for(a>=x?l=e[h]>>a-x&f:(l=(e[h]&(1<<a+1)-1)<<x-a,h>0&&(l|=e[h-1]>>this.DB+a-x)),o=r;!(1&l);)l>>=1,--o;if((a-=o)<0&&(a+=this.DB,--h),c)s[l].copyTo(n),c=!1;else{for(;o>1;)i.sqrTo(n,u),i.sqrTo(u,n),o-=2;o>0?i.sqrTo(n,u):(o=n,n=u,u=o),i.mulTo(u,s[l],n)}for(;h>=0&&!(e[h]&1<<a);)i.sqrTo(n,u),o=n,n=u,u=o,--a<0&&(a=this.DB-1,--h)}return i.revert(n)},Gh.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return Gh.ZERO;for(var r=e.clone(),i=this.clone(),a=Kh(1),n=Kh(0),s=Kh(0),o=Kh(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(a.isEven()&&n.isEven()||(a.addTo(this,a),n.subTo(e,n)),a.rShiftTo(1,a)):n.isEven()||n.subTo(e,n),n.rShiftTo(1,n);for(;i.isEven();)i.rShiftTo(1,i),t?(s.isEven()&&o.isEven()||(s.addTo(this,s),o.subTo(e,o)),s.rShiftTo(1,s)):o.isEven()||o.subTo(e,o),o.rShiftTo(1,o);r.compareTo(i)>=0?(r.subTo(i,r),t&&a.subTo(s,a),n.subTo(o,n)):(i.subTo(r,i),t&&s.subTo(a,s),o.subTo(n,o))}return 0!=i.compareTo(Gh.ONE)?Gh.ZERO:o.compareTo(e)>=0?o.subtract(e):o.signum()<0?(o.addTo(e,o),o.signum()<0?o.add(e):o):o},Gh.prototype.pow=function(e){return this.exp(e,new xc)},Gh.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone();if(e=e.s<0?e.negate():e.clone(),t.compareTo(e)<0){var r=t;t=e,e=r}r=t.getLowestSetBit();var i=e.getLowestSetBit();if(i<0)return t;for(r<i&&(i=r),i>0&&(t.rShiftTo(i,t),e.rShiftTo(i,e));t.signum()>0;)(r=t.getLowestSetBit())>0&&t.rShiftTo(r,t),(r=e.getLowestSetBit())>0&&e.rShiftTo(r,e),t.compareTo(e)>=0?(t.subTo(e,t),t.rShiftTo(1,t)):(e.subTo(t,e),e.rShiftTo(1,e));return i>0&&e.lShiftTo(i,e),e},Gh.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=hc[hc.length-1]){for(t=0;t<hc.length;++t)if(r[0]==hc[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<hc.length;){for(var i=hc[t],a=t+1;a<hc.length&&i<cc;)i*=hc[a++];for(i=r.modInt(i);t<a;)if(i%hc[t++]==0)return!1}return r.millerRabin(e)},Gh.prototype.square=function(){var e=Jh();return this.squareTo(e),e},function(e,t,i,a,n,s,o){function x(e){var t,r,a=this,n=e.length,s=0,o=a.i=a.j=a.m=0;for(a.S=[],a.c=[],n||(e=[n++]);s<i;)a.S[s]=s++;for(s=0;s<i;s++)o=o+(t=a.S[s])+e[s%n]&255,r=a.S[o],a.S[s]=r,a.S[o]=t;a.g=function(e){var t=a.S,r=a.i+1&255,n=t[r],s=a.j+n&255,o=t[s];t[r]=o,t[s]=n;for(var x=t[n+o&255];--e;)o=t[s=s+(n=t[r=r+1&255])&255],t[r]=o,t[s]=n,x=x*i+t[n+o&255];return a.i=r,a.j=s,x},a.g(i)}function f(e,t,i,a,n){var s;if(i=[],n=void 0===e?"undefined":(s=e)&&"undefined"!=typeof Symbol&&s.constructor===Symbol?"symbol":r(s),t&&"object"==n)for(a in e)if(a.indexOf("S")<5)try{i.push(f(e[a],t-1))}catch(e){}return i.length?i:e+("string"!=n?"\0":"")}function l(e,t,r,i){for(e+="",i=r=0;i<e.length;i++){var a=t,n=255&i,s=(r^=19*t[255&i])+e.charCodeAt(i);a[n]=255&s}for(i in e="",t)e+=String.fromCharCode(t[i]);return e}t.seedrandom=function(r,a){var h,c=[];return r=l(f(a?[r,e]:arguments.length?r:[(new Date).getTime(),e,window],3),c),l((h=new x(c)).S,e),t.random=function(){for(var e=h.g(6),t=o,r=0;e<n;)e=(e+r)*i,t*=i,r=h.g(1);for(;e>=s;)e/=2,t/=2,r>>>=1;return(e+r)/t},r},o=t.pow(i,6),n=t.pow(2,n),s=2*n,l(t.random(),e)}([],Math,256,0,52),uc.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random())},_c.prototype.init=function(e){var t,r,i;for(t=0;t<256;++t)this.S[t]=t;for(t=r=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,i=this.S[t],this.S[t]=this.S[r],this.S[r]=i;this.j=this.i=0},_c.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var dc,pc,mc,Pc=256;function yc(){!function(e){pc[mc++]^=255&e,pc[mc++]^=e>>8&255,pc[mc++]^=e>>16&255,pc[mc++]^=e>>24&255,mc>=Pc&&(mc-=Pc)}((new Date).getTime())}if(null==pc){var gc;for(pc=[],mc=0;mc<Pc;)gc=Math.floor(65536*Math.random()),pc[mc++]=gc>>>8,pc[mc++]=255&gc;mc=0,yc()}function bc(){if(null==dc){for(yc(),(dc=new _c).init(pc),mc=0;mc<pc.length;++mc)pc[mc]=0;mc=0}return dc.next()}function Sc(){}Sc.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=bc()};var vc=function(e){return function(e){function t(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function r(e,t){return e>>>t|e<<32-t}return e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t+=String.fromCharCode(i):(i>127&&i<2048?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t}(e),function(e){for(var t="",r=0;r<4*e.length;r++)t+="0123456789abcdef".charAt(e[r>>2]>>8*(3-r%4)+4&15)+"0123456789abcdef".charAt(e[r>>2]>>8*(3-r%4)&15);return t}(function(e,i){var a,n,s,o,x,f,l,h,c,u,_,d,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],m=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],P=Array(64);for(e[i>>5]|=128<<24-i%32,e[15+(i+64>>9<<4)]=i,c=0;c<e.length;c+=16){for(a=m[0],n=m[1],s=m[2],o=m[3],x=m[4],f=m[5],l=m[6],h=m[7],u=0;u<64;u++)P[u]=u<16?e[u+c]:t(t(t(r(P[u-2],17)^r(P[u-2],19)^P[u-2]>>>10,P[u-7]),r(P[u-15],7)^r(P[u-15],18)^P[u-15]>>>3),P[u-16]),_=t(t(t(t(h,r(x,6)^r(x,11)^r(x,25)),x&f^~x&l),p[u]),P[u]),d=t(r(a,2)^r(a,13)^r(a,22),a&n^a&s^n&s),h=l,l=f,f=x,x=t(o,_),o=s,s=n,n=a,a=t(_,d);m[0]=t(a,m[0]),m[1]=t(n,m[1]),m[2]=t(s,m[2]),m[3]=t(o,m[3]),m[4]=t(x,m[4]),m[5]=t(f,m[5]),m[6]=t(l,m[6]),m[7]=t(h,m[7])}return m}(function(e){for(var t=[],r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<24-r%32;return t}(e),8*e.length))}(e)};function Rc(e,t){return new Gh(e,t)}function Cc(){this.n=null,this.e=0,this.coeff=this.dmq1=this.dmp1=this.q=this.p=this.d=null}Cc.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},Cc.prototype.setPublic=function(e,t){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=Rc(e,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")},Cc.prototype.encrypt=function(e){return null==(e=function(e,t){if(t<e.length+11)throw"Message too long for RSA (n="+t+", l="+e.length+")";for(var r=[],i=e.length-1;i>=0&&t>0;){var a=e.charCodeAt(i--);a<128?r[--t]=a:a>127&&a<2048?(r[--t]=63&a|128,r[--t]=a>>6|192):(r[--t]=63&a|128,r[--t]=a>>6&63|128,r[--t]=a>>12|224)}for(r[--t]=0,i=new Sc,a=[];t>2;){for(a[0]=0;0==a[0];)i.nextBytes(a);r[--t]=a[0]}return r[--t]=2,r[--t]=0,new Gh(r)}(e,this.n.bitLength()+7>>3))||null==(e=this.doPublic(e))?null:1&(e=e.toString(16)).length?"0"+e:e},Cc.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);var t=e.mod(this.p).modPow(this.dmp1,this.p);for(e=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(e)<0;)t=t.add(this.p);return t.subtract(e).multiply(this.coeff).mod(this.p).multiply(this.q).add(e)},Cc.prototype.setPrivate=function(e,t,r){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=Rc(e,16),this.e=parseInt(t,16),this.d=Rc(r,16)):alert("Invalid RSA private key")},Cc.prototype.setPrivateEx=function(e,t,r,i,a,n,s,o){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=Rc(e,16),this.e=parseInt(t,16),this.d=Rc(r,16),this.p=Rc(i,16),this.q=Rc(a,16),this.dmp1=Rc(n,16),this.dmq1=Rc(s,16),this.coeff=Rc(o,16)):alert("Invalid RSA private key")},Cc.prototype.generate=function(e,t){var r=new uc,i=e>>1;this.e=parseInt(t,16);for(var a=new Gh(t,16);;){for(;this.p=new Gh(e-i,1,r),0!=this.p.subtract(Gh.ONE).gcd(a).compareTo(Gh.ONE)||!this.p.isProbablePrime(10););for(;this.q=new Gh(i,1,r),0!=this.q.subtract(Gh.ONE).gcd(a).compareTo(Gh.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var n=this.p;this.p=this.q,this.q=n}n=this.p.subtract(Gh.ONE);var s=this.q.subtract(Gh.ONE),o=n.multiply(s);if(0==o.gcd(a).compareTo(Gh.ONE)){this.n=this.p.multiply(this.q),this.d=a.modInverse(o),this.dmp1=this.d.mod(n),this.dmq1=this.d.mod(s),this.coeff=this.q.modInverse(this.p);break}}},Cc.prototype.decrypt=function(e){return null==(e=this.doPrivate(Rc(e,16)))?null:function(e,t){for(var r=e.toByteArray(),i=0;i<r.length&&0==r[i];)++i;if(r.length-i!=t-1||2!=r[i])return null;for(++i;0!=r[i];)if(++i>=r.length)return null;for(var a="";++i<r.length;){var n=255&r[i];n<128?a+=String.fromCharCode(n):n>191&&n<224?(a+=String.fromCharCode((31&n)<<6|63&r[i+1]),++i):(a+=String.fromCharCode((15&n)<<12|(63&r[i+1])<<6|63&r[i+2]),i+=2)}return a}(e,this.n.bitLength()+7>>3)};var Ec=[];Ec.sha1="3021300906052b0e03021a05000414",Ec.sha256="3031300d060960864801650304020105000420";var Fc=[];function Tc(e,t,r){t/=4,e=(0,Fc[r])(e),r="00"+Ec[r]+e,e="",t=t-4-r.length;for(var i=0;i<t;i+=2)e+="ff";return sPaddedMessageHex="0001"+e+r}function Dc(e){for(var t in Ec){var r=Ec[t],i=r.length;if(e.substring(0,i)==r)return[t,e.substring(i)]}return[]}Fc.sha1=function(e){return function(e){function t(e,t){return e<<t|e>>>32-t}function r(e){var t,r="";for(t=7;t>=0;t--)r+=(e>>>4*t&15).toString(16);return r}var i,a,n,s,o,x,f,l=Array(80),h=1732584193,c=4023233417,u=2562383102,_=271733878,d=3285377520;e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t+=String.fromCharCode(i):(i>127&&i<2048?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t}(e),n=e.length;var p=[];for(i=0;i<n-3;i+=4)a=e.charCodeAt(i)<<24|e.charCodeAt(i+1)<<16|e.charCodeAt(i+2)<<8|e.charCodeAt(i+3),p.push(a);switch(n%4){case 0:i=2147483648;break;case 1:i=e.charCodeAt(n-1)<<24|8388608;break;case 2:i=e.charCodeAt(n-2)<<24|e.charCodeAt(n-1)<<16|32768;break;case 3:i=e.charCodeAt(n-3)<<24|e.charCodeAt(n-2)<<16|e.charCodeAt(n-1)<<8|128}for(p.push(i);p.length%16!=14;)p.push(0);for(p.push(n>>>29),p.push(n<<3&4294967295),e=0;e<p.length;e+=16){for(i=0;i<16;i++)l[i]=p[e+i];for(i=16;i<=79;i++)l[i]=t(l[i-3]^l[i-8]^l[i-14]^l[i-16],1);for(a=h,n=c,s=u,o=_,x=d,i=0;i<=19;i++)f=t(a,5)+(n&s|~n&o)+x+l[i]+1518500249&4294967295,x=o,o=s,s=t(n,30),n=a,a=f;for(i=20;i<=39;i++)f=t(a,5)+(n^s^o)+x+l[i]+1859775393&4294967295,x=o,o=s,s=t(n,30),n=a,a=f;for(i=40;i<=59;i++)f=t(a,5)+(n&s|n&o|s&o)+x+l[i]+2400959708&4294967295,x=o,o=s,s=t(n,30),n=a,a=f;for(i=60;i<=79;i++)f=t(a,5)+(n^s^o)+x+l[i]+3395469782&4294967295,x=o,o=s,s=t(n,30),n=a,a=f;h=h+a&4294967295,c=c+n&4294967295,u=u+s&4294967295,_=_+o&4294967295,d=d+x&4294967295}return(f=r(h)+r(c)+r(u)+r(_)+r(d)).toLowerCase()}(e)},Fc.sha256=vc,Cc.prototype.signString=function(e,t){var r=Tc(e,this.n.bitLength(),t);return this.doPrivate(Rc(r,16)).toString(16)},Cc.prototype.signStringWithSHA1=function(e){return e=Tc(e,this.n.bitLength(),"sha1"),this.doPrivate(Rc(e,16)).toString(16)},Cc.prototype.signStringWithSHA256=function(e){return e=Tc(e,this.n.bitLength(),"sha256"),this.doPrivate(Rc(e,16)).toString(16)},Cc.prototype.verifyString=function(e,t){t=t.replace(/[ \n]+/g,"");var r=this.doPublic(Rc(t,16)).toString(16).replace(/^1f+00/,""),i=Dc(r);return 0!=i.length&&(r=i[1])==(0,Fc[i[0]])(e)},Cc.prototype.verifyHexSignatureForMessage=function(e,t){return function(e,t,r,i){return 0!=(r=Dc(t=function(e,t,r){return function(e,t,r){var i=new Cc;return i.setPublic(t,r),i.doPublic(e)}(e,t,r).toString(16).replace(/^1f+00/,"")}(t,r,i))).length&&(t=r[1])==(0,Fc[r[0]])(e)}(t,Rc(e,16),this.n.toString(16),this.e.toString(16))};var Ic,Mc,Ac=function(){var e={Sbox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ShiftRowTab:[0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11],Init:function(){e.Sbox_Inv=Array(256);for(var t=0;t<256;t++)e.Sbox_Inv[e.Sbox[t]]=t;for(e.ShiftRowTab_Inv=Array(16),t=0;t<16;t++)e.ShiftRowTab_Inv[e.ShiftRowTab[t]]=t;for(e.xtime=Array(256),t=0;t<128;t++)e.xtime[t]=t<<1,e.xtime[128+t]=t<<1^27},Done:function(){delete e.Sbox_Inv,delete e.ShiftRowTab_Inv,delete e.xtime},ExpandKey:function(t){var r,i=t.length,a=1;switch(i){case 16:r=176;break;case 24:r=208;break;case 32:r=240;break;default:alert("my.ExpandKey: Only key lengths of 16, 24 or 32 bytes allowed!")}for(var n=i;n<r;n+=4){var s=t.slice(n-4,n);n%i==0?(s=[e.Sbox[s[1]]^a,e.Sbox[s[2]],e.Sbox[s[3]],e.Sbox[s[0]]],(a<<=1)>=256&&(a^=283)):i>24&&n%i==16&&(s=[e.Sbox[s[0]],e.Sbox[s[1]],e.Sbox[s[2]],e.Sbox[s[3]]]);for(var o=0;o<4;o++)t[n+o]=t[n+o-i]^s[o]}},Encrypt:function(t,r){var i=r.length;e.AddRoundKey(t,r.slice(0,16));for(var a=16;a<i-16;a+=16)e.SubBytes(t,e.Sbox),e.ShiftRows(t,e.ShiftRowTab),e.MixColumns(t),e.AddRoundKey(t,r.slice(a,a+16));e.SubBytes(t,e.Sbox),e.ShiftRows(t,e.ShiftRowTab),e.AddRoundKey(t,r.slice(a,i))},Decrypt:function(t,r){var i=r.length;for(e.AddRoundKey(t,r.slice(i-16,i)),e.ShiftRows(t,e.ShiftRowTab_Inv),e.SubBytes(t,e.Sbox_Inv),i-=32;i>=16;i-=16)e.AddRoundKey(t,r.slice(i,i+16)),e.MixColumns_Inv(t),e.ShiftRows(t,e.ShiftRowTab_Inv),e.SubBytes(t,e.Sbox_Inv);e.AddRoundKey(t,r.slice(0,16))},SubBytes:function(e,t){for(var r=0;r<16;r++)e[r]=t[e[r]]},AddRoundKey:function(e,t){for(var r=0;r<16;r++)e[r]^=t[r]},ShiftRows:function(e,t){for(var r=[].concat(e),i=0;i<16;i++)e[i]=r[t[i]]},MixColumns:function(t){for(var r=0;r<16;r+=4){var i=t[r+0],a=t[r+1],n=t[r+2],s=t[r+3],o=i^a^n^s;t[r+0]^=o^e.xtime[i^a],t[r+1]^=o^e.xtime[a^n],t[r+2]^=o^e.xtime[n^s],t[r+3]^=o^e.xtime[s^i]}},MixColumns_Inv:function(t){for(var r=0;r<16;r+=4){var i=t[r+0],a=t[r+1],n=t[r+2],s=t[r+3],o=i^a^n^s,x=e.xtime[o],f=e.xtime[e.xtime[x^i^n]]^o;o^=e.xtime[e.xtime[x^a^s]],t[r+0]^=f^e.xtime[i^a],t[r+1]^=o^e.xtime[a^n],t[r+2]^=f^e.xtime[n^s],t[r+3]^=o^e.xtime[s^i]}}};return e}(),wc=function(){var e={};return Ac.Init(),e.b256to64=function(e){var t,r,i,a="",n=0,s=e.length;for(i=0;i<s;i++)r=e.charCodeAt(i),0==n?(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>2&63),t=(3&r)<<4):1==n?(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t|r>>4&15),t=(15&r)<<2):2==n&&(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t|r>>6&3),a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&r)),3==(n+=1)&&(n=0);return n>0&&(a+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t),a+="="),1==n&&(a+="="),a},e.b64to256=function(e){var t,r,i="",a=0,n=0,s=e.length;for(r=0;r<s;r++)(t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(r)))>=0&&(a&&(i+=String.fromCharCode(n|t>>6-a&255)),n=t<<(a=a+2&7)&255);return i},e.b16to64=function(e){var t,r,i="";for(e.length%2==1&&(e="0"+e),t=0;t+3<=e.length;t+=3)r=parseInt(e.substring(t,t+3),16),i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>6)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&r);for(t+1==e.length?(r=parseInt(e.substring(t,t+1),16),i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r<<2)):t+2==e.length&&(r=parseInt(e.substring(t,t+2),16),i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((3&r)<<4));(3&i.length)>0;)i+="=";return i},e.b64to16=function(e){var t,r,i="",a=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t)v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(t)),v<0||(0==a?(i+=qh(v>>2),r=3&v,a=1):1==a?(i+=qh(r<<2|v>>4),r=15&v,a=2):2==a?(i+=qh(r),i+=qh(v>>2),r=3&v,a=3):(i+=qh(r<<2|v>>4),i+=qh(15&v),a=0));return 1==a&&(i+=qh(r<<2)),i},e.string2bytes=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r));return t},e.bytes2string=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e.blockXOR=function(e,t){for(var r=Array(16),i=0;i<16;i++)r[i]=e[i]^t[i];return r},e.blockIV=function(){var e=new Sc,t=Array(16);return e.nextBytes(t),t},e.pad16=function(e){var t=e.slice(0),r=(16-e.length%16)%16;for(i=e.length;i<e.length+r;i++)t.push(0);return t},e.depad=function(e){for(e=e.slice(0);0==e[e.length-1];)e=e.slice(0,e.length-1);return e},e.encryptAESCBC=function(t,r){var i=r.slice(0);Ac.ExpandKey(i);for(var a=e.string2bytes(t),n=(a=e.pad16(a),e.blockIV()),s=0;s<a.length/16;s++){var o=a.slice(16*s,16*s+16),x=n.slice(16*s,16*s+16);o=e.blockXOR(x,o),Ac.Encrypt(o,i),n=n.concat(o)}return i=e.bytes2string(n),e.b256to64(i)},e.decryptAESCBC=function(t,r){var i=r.slice(0);Ac.ExpandKey(i),t=e.b64to256(t);for(var a=e.string2bytes(t),n=[],s=1;s<a.length/16;s++){var o=a.slice(16*s,16*s+16),x=a.slice(16*(s-1),16*(s-1)+16);Ac.Decrypt(o,i),o=e.blockXOR(x,o),n=n.concat(o)}return n=e.depad(n),e.bytes2string(n)},e.wrap60=function(e){for(var t="",r=0;r<e.length;r++)r%60==0&&0!=r&&(t+="\n"),t+=e[r];return t},e.generateAESKey=function(){var e=Array(16);return(new Sc).nextBytes(e),e},e.generateRSAKey=function(e,t){Math.seedrandom(vc(e));var r=new Cc;return r.generate(t,"10001"),r},e.publicKeyString=function(e){return pubkey=e.n.toString(16)},e.publicKeyID=function(e){return function(e){function t(e,t){var r,i,a,n,s;return a=2147483648&e,n=2147483648&t,s=(1073741823&e)+(1073741823&t),(r=1073741824&e)&(i=1073741824&t)?2147483648^s^a^n:r|i?1073741824&s?3221225472^s^a^n:1073741824^s^a^n:s^a^n}function r(e,r,i,a,n,s,o){return e=t(e,t(t(r&i|~r&a,n),o)),t(e<<s|e>>>32-s,r)}function i(e,r,i,a,n,s,o){return e=t(e,t(t(r&a|i&~a,n),o)),t(e<<s|e>>>32-s,r)}function a(e,r,i,a,n,s,o){return e=t(e,t(t(r^i^a,n),o)),t(e<<s|e>>>32-s,r)}function n(e,r,i,a,n,s,o){return e=t(e,t(t(i^(r|~a),n),o)),t(e<<s|e>>>32-s,r)}function s(e){var t,r="",i="";for(t=0;t<=3;t++)r+=(i="0"+(i=e>>>8*t&255).toString(16)).substr(i.length-2,2);return r}var o,x,f,l,h,c,u,_,d=function(e){for(var t,r=e.length,i=16*(((t=r+8)-t%64)/64+1),a=Array(i-1),n=0,s=0;s<r;)n=s%4*8,a[t=(s-s%4)/4]|=e.charCodeAt(s)<<n,s++;return a[(s-s%4)/4]|=128<<s%4*8,a[i-2]=r<<3,a[i-1]=r>>>29,a}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t+=String.fromCharCode(i):(i>127&&i<2048?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t}(e));for(h=1732584193,c=4023233417,u=2562383102,_=271733878,e=0;e<d.length;e+=16)o=h,x=c,f=u,l=_,h=r(h,c,u,_,d[e+0],7,3614090360),_=r(_,h,c,u,d[e+1],12,3905402710),u=r(u,_,h,c,d[e+2],17,606105819),c=r(c,u,_,h,d[e+3],22,3250441966),h=r(h,c,u,_,d[e+4],7,4118548399),_=r(_,h,c,u,d[e+5],12,1200080426),u=r(u,_,h,c,d[e+6],17,2821735955),c=r(c,u,_,h,d[e+7],22,4249261313),h=r(h,c,u,_,d[e+8],7,1770035416),_=r(_,h,c,u,d[e+9],12,2336552879),u=r(u,_,h,c,d[e+10],17,4294925233),c=r(c,u,_,h,d[e+11],22,2304563134),h=r(h,c,u,_,d[e+12],7,1804603682),_=r(_,h,c,u,d[e+13],12,4254626195),u=r(u,_,h,c,d[e+14],17,2792965006),h=i(h,c=r(c,u,_,h,d[e+15],22,1236535329),u,_,d[e+1],5,4129170786),_=i(_,h,c,u,d[e+6],9,3225465664),u=i(u,_,h,c,d[e+11],14,643717713),c=i(c,u,_,h,d[e+0],20,3921069994),h=i(h,c,u,_,d[e+5],5,3593408605),_=i(_,h,c,u,d[e+10],9,38016083),u=i(u,_,h,c,d[e+15],14,3634488961),c=i(c,u,_,h,d[e+4],20,3889429448),h=i(h,c,u,_,d[e+9],5,568446438),_=i(_,h,c,u,d[e+14],9,3275163606),u=i(u,_,h,c,d[e+3],14,4107603335),c=i(c,u,_,h,d[e+8],20,1163531501),h=i(h,c,u,_,d[e+13],5,2850285829),_=i(_,h,c,u,d[e+2],9,4243563512),u=i(u,_,h,c,d[e+7],14,1735328473),h=a(h,c=i(c,u,_,h,d[e+12],20,2368359562),u,_,d[e+5],4,4294588738),_=a(_,h,c,u,d[e+8],11,2272392833),u=a(u,_,h,c,d[e+11],16,1839030562),c=a(c,u,_,h,d[e+14],23,4259657740),h=a(h,c,u,_,d[e+1],4,2763975236),_=a(_,h,c,u,d[e+4],11,1272893353),u=a(u,_,h,c,d[e+7],16,4139469664),c=a(c,u,_,h,d[e+10],23,3200236656),h=a(h,c,u,_,d[e+13],4,681279174),_=a(_,h,c,u,d[e+0],11,3936430074),u=a(u,_,h,c,d[e+3],16,3572445317),c=a(c,u,_,h,d[e+6],23,76029189),h=a(h,c,u,_,d[e+9],4,3654602809),_=a(_,h,c,u,d[e+12],11,3873151461),u=a(u,_,h,c,d[e+15],16,530742520),h=n(h,c=a(c,u,_,h,d[e+2],23,3299628645),u,_,d[e+0],6,4096336452),_=n(_,h,c,u,d[e+7],10,1126891415),u=n(u,_,h,c,d[e+14],15,2878612391),c=n(c,u,_,h,d[e+5],21,4237533241),h=n(h,c,u,_,d[e+12],6,1700485571),_=n(_,h,c,u,d[e+3],10,2399980690),u=n(u,_,h,c,d[e+10],15,4293915773),c=n(c,u,_,h,d[e+1],21,2240044497),h=n(h,c,u,_,d[e+8],6,1873313359),_=n(_,h,c,u,d[e+15],10,4264355552),u=n(u,_,h,c,d[e+6],15,2734768916),c=n(c,u,_,h,d[e+13],21,1309151649),h=n(h,c,u,_,d[e+4],6,4149444226),_=n(_,h,c,u,d[e+11],10,3174756917),u=n(u,_,h,c,d[e+2],15,718787259),c=n(c,u,_,h,d[e+9],21,3951481745),h=t(h,o),c=t(c,x),u=t(u,f),_=t(_,l);return(s(h)+s(c)+s(u)+s(_)).toLowerCase()}(e)},e.publicKeyFromString=function(e){e=e.split("|")[0];var t=new Cc;return t.setPublic(e,"10001"),t},e.encrypt=function(t,r,i){var a="";try{a+=e.publicKeyFromString(r).encrypt(t)+"?"}catch(e){return{status:"Invalid public key"}}return{status:"success",cipher:a}},e.decrypt=function(e,t){var r=e.split("?");return{status:"success",plaintext:t.decrypt(r[0]),signature:"unsigned"}},e}(),Lc=Lc||function(e,t){var r={},i=r.lib={},a=function(){},n=i.Base={extend:function(e){a.prototype=this;var t=new a;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},s=i.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||x).stringify(this)},concat:function(e){var t=this.words,r=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var a=0;a<e;a++)t[i+a>>>2]|=(r[a>>>2]>>>24-a%4*8&255)<<24-(i+a)%4*8;else if(65535<r.length)for(a=0;a<e;a+=4)t[i+a>>>2]=r[a>>>2];else t.push.apply(t,r);return this.sigBytes+=e,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r=[],i=0;i<t;i+=4)r.push(4294967296*e.random()|0);return new s.init(r,t)}}),o=r.enc={},x=o.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],i=0;i<e;i++){var a=t[i>>>2]>>>24-i%4*8&255;r.push((a>>>4).toString(16)),r.push((15&a).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new s.init(r,t/2)}},f=o.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],i=0;i<e;i++)r.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return r.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new s.init(r,t)}},l=o.Utf8={stringify:function(e){try{return decodeURIComponent(escape(f.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return f.parse(unescape(encodeURIComponent(e)))}},h=i.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=l.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,i=r.words,a=r.sigBytes,n=this.blockSize,o=a/(4*n);if(t=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*n,a=e.min(4*t,a),t){for(var x=0;x<t;x+=n)this._doProcessBlock(i,x);x=i.splice(0,t),r.sigBytes-=a}return new s.init(x,a)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=h.extend({cfg:n.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){h.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new c.HMAC.init(e,r).finalize(t)}}});var c=r.algo={};return r}(Math);Mc=(Ic=Lc).lib.WordArray,Ic.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,i=this._map;e.clamp(),e=[];for(var a=0;a<r;a+=3)for(var n=(t[a>>>2]>>>24-a%4*8&255)<<16|(t[a+1>>>2]>>>24-(a+1)%4*8&255)<<8|t[a+2>>>2]>>>24-(a+2)%4*8&255,s=0;4>s&&a+.75*s<r;s++)e.push(i.charAt(n>>>6*(3-s)&63));if(t=i.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,r=this._map;(i=r.charAt(64))&&-1!=(i=e.indexOf(i))&&(t=i);for(var i=[],a=0,n=0;n<t;n++)if(n%4){var s=r.indexOf(e.charAt(n-1))<<n%4*2,o=r.indexOf(e.charAt(n))>>>6-n%4*2;i[a>>>2]|=(s|o)<<24-a%4*8,a++}return Mc.create(i,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){function t(e,t,r,i,a,n,s){return((e=e+(t&r|~t&i)+a+s)<<n|e>>>32-n)+t}function r(e,t,r,i,a,n,s){return((e=e+(t&i|r&~i)+a+s)<<n|e>>>32-n)+t}function i(e,t,r,i,a,n,s){return((e=e+(t^r^i)+a+s)<<n|e>>>32-n)+t}function a(e,t,r,i,a,n,s){return((e=e+(r^(t|~i))+a+s)<<n|e>>>32-n)+t}for(var n=Lc,s=(x=n.lib).WordArray,o=x.Hasher,x=n.algo,f=[],l=0;64>l;l++)f[l]=4294967296*e.abs(e.sin(l+1))|0;x=x.MD5=o.extend({_doReset:function(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,n){for(var s=0;16>s;s++){var o=e[x=n+s];e[x]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8)}s=this._hash.words;var x=e[n+0],l=(o=e[n+1],e[n+2]),h=e[n+3],c=e[n+4],u=e[n+5],_=e[n+6],d=e[n+7],p=e[n+8],m=e[n+9],P=e[n+10],y=e[n+11],g=e[n+12],b=e[n+13],S=e[n+14],v=e[n+15],R=t(R=s[0],F=s[1],E=s[2],C=s[3],x,7,f[0]),C=t(C,R,F,E,o,12,f[1]),E=t(E,C,R,F,l,17,f[2]),F=t(F,E,C,R,h,22,f[3]);R=t(R,F,E,C,c,7,f[4]),C=t(C,R,F,E,u,12,f[5]),E=t(E,C,R,F,_,17,f[6]),F=t(F,E,C,R,d,22,f[7]),R=t(R,F,E,C,p,7,f[8]),C=t(C,R,F,E,m,12,f[9]),E=t(E,C,R,F,P,17,f[10]),F=t(F,E,C,R,y,22,f[11]),R=t(R,F,E,C,g,7,f[12]),C=t(C,R,F,E,b,12,f[13]),E=t(E,C,R,F,S,17,f[14]),R=r(R,F=t(F,E,C,R,v,22,f[15]),E,C,o,5,f[16]),C=r(C,R,F,E,_,9,f[17]),E=r(E,C,R,F,y,14,f[18]),F=r(F,E,C,R,x,20,f[19]),R=r(R,F,E,C,u,5,f[20]),C=r(C,R,F,E,P,9,f[21]),E=r(E,C,R,F,v,14,f[22]),F=r(F,E,C,R,c,20,f[23]),R=r(R,F,E,C,m,5,f[24]),C=r(C,R,F,E,S,9,f[25]),E=r(E,C,R,F,h,14,f[26]),F=r(F,E,C,R,p,20,f[27]),R=r(R,F,E,C,b,5,f[28]),C=r(C,R,F,E,l,9,f[29]),E=r(E,C,R,F,d,14,f[30]),R=i(R,F=r(F,E,C,R,g,20,f[31]),E,C,u,4,f[32]),C=i(C,R,F,E,p,11,f[33]),E=i(E,C,R,F,y,16,f[34]),F=i(F,E,C,R,S,23,f[35]),R=i(R,F,E,C,o,4,f[36]),C=i(C,R,F,E,c,11,f[37]),E=i(E,C,R,F,d,16,f[38]),F=i(F,E,C,R,P,23,f[39]),R=i(R,F,E,C,b,4,f[40]),C=i(C,R,F,E,x,11,f[41]),E=i(E,C,R,F,h,16,f[42]),F=i(F,E,C,R,_,23,f[43]),R=i(R,F,E,C,m,4,f[44]),C=i(C,R,F,E,g,11,f[45]),E=i(E,C,R,F,v,16,f[46]),R=a(R,F=i(F,E,C,R,l,23,f[47]),E,C,x,6,f[48]),C=a(C,R,F,E,d,10,f[49]),E=a(E,C,R,F,S,15,f[50]),F=a(F,E,C,R,u,21,f[51]),R=a(R,F,E,C,g,6,f[52]),C=a(C,R,F,E,h,10,f[53]),E=a(E,C,R,F,P,15,f[54]),F=a(F,E,C,R,o,21,f[55]),R=a(R,F,E,C,p,6,f[56]),C=a(C,R,F,E,v,10,f[57]),E=a(E,C,R,F,_,15,f[58]),F=a(F,E,C,R,b,21,f[59]),R=a(R,F,E,C,c,6,f[60]),C=a(C,R,F,E,y,10,f[61]),E=a(E,C,R,F,l,15,f[62]),F=a(F,E,C,R,m,21,f[63]),s[0]=s[0]+R|0,s[1]=s[1]+F|0,s[2]=s[2]+E|0,s[3]=s[3]+C|0},_doFinalize:function(){var t=this._data,r=t.words,i=8*this._nDataBytes,a=8*t.sigBytes;r[a>>>5]|=128<<24-a%32;var n=e.floor(i/4294967296);for(r[15+(a+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),r[14+(a+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.sigBytes=4*(r.length+1),this._process(),r=(t=this._hash).words,i=0;4>i;i++)a=r[i],r[i]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);return t},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}}),n.MD5=o._createHelper(x),n.HmacMD5=o._createHmacHelper(x)}(Math),function(){var e,t=Lc,r=(e=t.lib).Base,i=e.WordArray,a=(e=t.algo).EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=(o=this.cfg).hasher.create(),a=i.create(),n=a.words,s=o.keySize,o=o.iterations;n.length<s;){x&&r.update(x);var x=r.update(e).finalize(t);r.reset();for(var f=1;f<o;f++)x=r.finalize(x),r.reset();a.concat(x)}return a.sigBytes=4*s,a}});t.EvpKDF=function(e,t,r){return a.create(r).compute(e,t)}}(),Lc.lib.Cipher||function(e){var t=(u=Lc).lib,r=t.Base,i=t.WordArray,a=t.BufferedBlockAlgorithm,n=u.enc.Base64,s=u.algo.EvpKDF,o=t.Cipher=a.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,r,i){return("string"==typeof r?_:c).encrypt(e,t,r,i)},decrypt:function(t,r,i){return("string"==typeof r?_:c).decrypt(e,t,r,i)}}}});t.StreamCipher=o.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var x=u.mode={},f=function(e,t,r){var i=this._iv;i?this._iv=void 0:i=this._prevBlock;for(var a=0;a<r;a++)e[t+a]^=i[a]},l=(t.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();l.Encryptor=l.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize;f.call(this,e,t,i),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),l.Decryptor=l.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,a=e.slice(t,t+i);r.decryptBlock(e,t),f.call(this,e,t,i),this._prevBlock=a}}),x=x.CBC=l,l=(u.pad={}).Pkcs7={pad:function(e,t){for(var r,a=(r=(r=4*t)-e.sigBytes%r)<<24|r<<16|r<<8|r,n=[],s=0;s<r;s+=4)n.push(a);r=i.create(n,r),e.concat(r)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=o.extend({cfg:o.cfg.extend({mode:x,padding:l}),reset:function(){o.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=t.createEncryptor;else r=t.createDecryptor,this._minBufferSize=1;this._mode=r.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var h=t.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),c=(x=(u.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?i.create([1398893684,1701076831]).concat(e).concat(t):t).toString(n)},parse:function(e){var t=(e=n.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var r=i.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return h.create({ciphertext:e,salt:r})}},t.SerializableCipher=r.extend({cfg:r.extend({format:x}),encrypt:function(e,t,r,i){i=this.cfg.extend(i);var a=e.createEncryptor(r,i);return t=a.finalize(t),a=a.cfg,h.create({ciphertext:t,key:r,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,r,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(r,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),u=(u.kdf={}).OpenSSL={execute:function(e,t,r,a){return a||(a=i.random(8)),e=s.create({keySize:t+r}).compute(e,a),r=i.create(e.words.slice(t),4*r),e.sigBytes=4*t,h.create({key:e,iv:r,salt:a})}},_=t.PasswordBasedCipher=c.extend({cfg:c.cfg.extend({kdf:u}),encrypt:function(e,t,r,i){return r=(i=this.cfg.extend(i)).kdf.execute(r,e.keySize,e.ivSize),i.iv=r.iv,(e=c.encrypt.call(this,e,t,r.key,i)).mixIn(r),e},decrypt:function(e,t,r,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),r=i.kdf.execute(r,e.keySize,e.ivSize,t.salt),i.iv=r.iv,c.decrypt.call(this,e,t,r.key,i)}})}(),function(){for(var e=Lc,t=e.lib.BlockCipher,r=e.algo,i=[],a=[],n=[],s=[],o=[],x=[],f=[],l=[],h=[],c=[],u=[],_=0;256>_;_++)u[_]=128>_?_<<1:_<<1^283;var d=0,p=0;for(_=0;256>_;_++){var m=(m=p^p<<1^p<<2^p<<3^p<<4)>>>8^255&m^99;i[d]=m,a[m]=d;var P=u[d],y=u[P],g=u[y],b=257*u[m]^16843008*m;n[d]=b<<24|b>>>8,s[d]=b<<16|b>>>16,o[d]=b<<8|b>>>24,x[d]=b,b=16843009*g^65537*y^257*P^16843008*d,f[m]=b<<24|b>>>8,l[m]=b<<16|b>>>16,h[m]=b<<8|b>>>24,c[m]=b,d?(d=P^u[u[u[g^P]]],p^=u[u[p]]):d=p=1}var S=[0,1,2,4,8,16,32,64,128,27,54];r=r.AES=t.extend({_doReset:function(){for(var e=(r=this._key).words,t=r.sigBytes/4,r=4*((this._nRounds=t+6)+1),a=this._keySchedule=[],n=0;n<r;n++)if(n<t)a[n]=e[n];else{var s=a[n-1];n%t?6<t&&4==n%t&&(s=i[s>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s]):(s=i[(s=s<<8|s>>>24)>>>24]<<24|i[s>>>16&255]<<16|i[s>>>8&255]<<8|i[255&s],s^=S[n/t|0]<<24),a[n]=a[n-t]^s}for(e=this._invKeySchedule=[],t=0;t<r;t++)n=r-t,s=t%4?a[n]:a[n-4],e[t]=4>t||4>=n?s:f[i[s>>>24]]^l[i[s>>>16&255]]^h[i[s>>>8&255]]^c[i[255&s]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,n,s,o,x,i)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,f,l,h,c,a),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,i,a,n,s,o){for(var x=this._nRounds,f=e[t]^r[0],l=e[t+1]^r[1],h=e[t+2]^r[2],c=e[t+3]^r[3],u=4,_=1;_<x;_++){var d=i[f>>>24]^a[l>>>16&255]^n[h>>>8&255]^s[255&c]^r[u++],p=i[l>>>24]^a[h>>>16&255]^n[c>>>8&255]^s[255&f]^r[u++],m=i[h>>>24]^a[c>>>16&255]^n[f>>>8&255]^s[255&l]^r[u++];c=i[c>>>24]^a[f>>>16&255]^n[l>>>8&255]^s[255&h]^r[u++],f=d,l=p,h=m}d=(o[f>>>24]<<24|o[l>>>16&255]<<16|o[h>>>8&255]<<8|o[255&c])^r[u++],p=(o[l>>>24]<<24|o[h>>>16&255]<<16|o[c>>>8&255]<<8|o[255&f])^r[u++],m=(o[h>>>24]<<24|o[c>>>16&255]<<16|o[f>>>8&255]<<8|o[255&l])^r[u++],c=(o[c>>>24]<<24|o[f>>>16&255]<<16|o[l>>>8&255]<<8|o[255&h])^r[u++],e[t]=d,e[t+1]=p,e[t+2]=m,e[t+3]=c},keySize:8}),e.AES=t._createHelper(r)}();var kc=function(){function e(){}var t=e.prototype;return t.createClientObject=function(e,t,r,i,a){var n=Lc.AES.encrypt((new Date).getTime().toString(),Lc.enc.Hex.parse("1234567891234567123456789123456712345678912345671234567891234567"),{mode:Lc.mode.CBC,iv:Lc.enc.Hex.parse("12345678912345671234567891234567"),padding:Lc.pad.Pkcs7}).ciphertext.toString();n.length<64&&(n+=n);var s=Lc.AES.encrypt((new Date).getTime().toString(),Lc.enc.Hex.parse("12345678912345671234567891234567"),{mode:Lc.mode.CBC,iv:Lc.enc.Hex.parse("12345678912345671234567891234567"),padding:Lc.pad.Pkcs7}).ciphertext.toString();return{socket:e,id:t,PKD:r,rand:i,playURL:a.playURL||"",auth:a.auth||"",token:a.token||"",key:n,iv:s,resolve:null,reject:null}},t.playCmd=function(e){var t={sequence:0,cmd:"realplay",url:e.playURL,key:wc.encrypt(e.iv+":"+e.key,e.PKD).cipher.split("?")[0],authorization:Lc.AES.encrypt(e.rand+":"+e.auth,Lc.enc.Hex.parse(e.key),{mode:Lc.mode.CBC,iv:Lc.enc.Hex.parse(e.iv),padding:Lc.pad.Pkcs7}).ciphertext.toString(),token:Lc.AES.encrypt(e.token,Lc.enc.Hex.parse(e.key),{mode:Lc.mode.CBC,iv:Lc.enc.Hex.parse(e.iv),padding:Lc.pad.Pkcs7}).ciphertext.toString()};return JSON.stringify(t)},t.playbackCmd=function(e,t,r){var i={sequence:0,cmd:"playback",url:e.playURL,key:wc.encrypt(e.iv+":"+e.key,e.PKD).cipher.split("?")[0],authorization:Lc.AES.encrypt(e.rand+":"+e.auth,Lc.enc.Hex.parse(e.key),{mode:Lc.mode.CBC,iv:Lc.enc.Hex.parse(e.iv),padding:Lc.pad.Pkcs7}).ciphertext.toString(),token:Lc.AES.encrypt(e.token,Lc.enc.Hex.parse(e.key),{mode:Lc.mode.CBC,iv:Lc.enc.Hex.parse(e.iv),padding:Lc.pad.Pkcs7}).ciphertext.toString(),startTime:t,endTime:r};return JSON.stringify(i)},t.seekCmd=function(e,t){var r={sequence:0,cmd:"seek",startTime:e,endTime:t};return JSON.stringify(r)},e}(),Bc=function(){function e(){}var t=e.prototype;return t.createClientObject=function(e,t,r,i){return{socket:e,id:t,playURL:r,deviceSerial:i.deviceSerial||"",verificationCode:i.verificationCode||"",resolve:null,reject:null}},t.playCmd=function(e){var t={sequence:0,cmd:"realplay",deviceSerial:e.deviceSerial,verificationCode:e.verificationCode,url:e.playURL};return JSON.stringify(t)},t.playbackCmd=function(e,t,r){var i={sequence:0,cmd:"playback",deviceSerial:e.deviceSerial,verificationCode:e.verificationCode,url:e.playURL,startTime:t,endTime:r};return JSON.stringify(i)},e}(),Oc=Symbol("WEBSOCKET"),Hc=Symbol("GETINDEX"),Nc=Symbol("PROTOCOLVERSION"),Vc=Symbol("CIPHERSUITES"),Yc=new Xh,Uc=new Wh,Xc=new kc,Wc=new Bc,Gc=function(){function e(){this[Nc]="0.1",this[Vc]=0,this[Oc]=[],this.ERRORS={},this[Hc]=function(e){for(var t=-1,r=0,i=this[Oc].length;r<i;r++)if(this[Oc][r].id===e){t=r;break}return t}}var t=e.prototype;return t.openStream=function(e,t,r,i){var a=!1;e.indexOf("[")>-1&&(a=!0);var n=this,s=e.split("://"),o=s[0],x="",f=7681,l=1,h=0,c=!1;if(a)x=s[1].split("]:")[0]+"]",f=Math.floor(s[1].split("]:")[1].split("/")[0]),l=Math.floor(s[1].split("]:")[1].split("/")[1]/100),h=Math.floor(s[1].split("]:")[1].split("/")[1]%100)-1;else{x=s[1].split(":")[0],f=Math.floor(s[1].split(":")[1].split("/")[0]),l=Math.floor(s[1].split(":")[1].split("/")[1]/100),h=Math.floor(s[1].split(":")[1].split("/")[1]%100)-1;var u=s[1].split(":")[1].split("/")[2];""!==u&&"webSocketVideoCtrlProxy"===u&&(c=!0)}0===l&&(h=0);var _="&sessionID=";(t=t||{}).token&&!t.playURL&&(_="&token=");var d=t.sessionID||t.session||(t.playURL?"":t.token)||"",p=new window.WebSocket(o+"://"+x+":"+f+(t.mode?"/"+t.mode:"")+(c?"/webSocketVideoCtrlProxy":"")+"?version="+n[Nc]+"&cipherSuites="+n[Vc]+_+d+(t.proxy?"&proxy="+t.proxy:""));p.binaryType="arraybuffer";var m=Uh(),P=-1;return new Promise((function(e,a){p.onopen=function(){t.playURL||t.sessionID||t.deviceSerial||t.token||(n[Oc].push(Yc.createClientObject(p,m,l,h)),e(m))},p.onmessage=function(i){if("string"==typeof i.data){var s=JSON.parse(i.data),o=n[Hc](m);if(s&&s.version&&s.cipherSuite){if(n[Nc]=s.version,n[Vc]=parseInt(s.cipherSuite,10),s&&s.PKD&&s.rand)n[Oc].push(Xc.createClientObject(p,m,s.PKD,s.rand,t));else{var c="live://"+x+":"+f+"/"+l+"/"+h;-1===n[Vc]?n[Oc].push(Wc.createClientObject(p,m,c,t)):n[Oc].push(Uc.createClientObject(p,m,c))}return void e(m)}if(s&&s.sdp){var u=Uc.getMediaFromSdp(s.sdp);r({bHead:!0,buf:u})}if(s&&s.cmd&&"end"===s.cmd&&r({type:"exception",cmd:s.cmd}),s&&s.statusString&&("ok"===s.statusString.toLowerCase()&&n[Oc][o].resolve&&n[Oc][o].resolve(s),"ok"!==s.statusString.toLowerCase())){var _=Uc.getError(s);o>-1?n[Oc][o].reject&&n[Oc][o].reject(_):a(_)}s&&s.errorCode&&r(s)}else{var d={},y=new Uint8Array(i.data);if(P++,64===y.byteLength||40===y.byteLength){for(var g=-1,b=y.byteLength,S=0;S<b;S++)if(73===y[S]&&77===y[S+1]&&75===y[S+2]&&72===y[S+3]){g=S;break}d=-1!==g?{bHead:!0,buf:y.slice(g,g+40)}:{bHead:!1,buf:y},r(d)}else P>0&&r(d={bHead:!1,buf:y});y=null,d=null,i=null}},p.onclose=function(){for(var e=0,t=n[Oc].length;e<t;e++)if(n[Oc][e].id===m){n[Oc][e].resolve(),n[Oc].splice(e,1),setTimeout((function(){i(m)}),200);break}a()}}))},t.startPlay=function(e,t,r){var i=this,a=this[Hc](e);return t&&r&&"0.1"===i[Nc]&&(t=t.replace(/-/g,"").replace(/:/g,""),r=r.replace(/-/g,"").replace(/:/g,"")),new Promise((function(e,n){if(a>-1){i[Oc][a].resolve=e,i[Oc][a].reject=n;var s=null;t&&r?"0.1"!==i[Nc]?0===i[Vc]?s=Xc.playbackCmd(i[Oc][a],t,r):1===i[Vc]?s=Uc.playbackCmd(t,r,i[Oc][a].playURL):-1===i[Vc]&&(s=Wc.playbackCmd(i[Oc][a],t,r)):s=Yc.playbackCmd(t,r,i[Oc][a].iCurChannel,i[Oc][a].iCurStream):0===i[Oc][a].iCurChannel&&"0.1"===i[Nc]?s=Yc.zeroPlayCmd(i[Oc][a].iCurChannel,i[Oc][a].iCurStream):"0.1"!==i[Nc]?0===i[Vc]?s=Xc.playCmd(i[Oc][a]):1===i[Vc]?s=Uc.playCmd(i[Oc][a].playURL):-1===i[Vc]&&(s=Wc.playCmd(i[Oc][a])):s=Yc.playCmd(i[Oc][a].iCurChannel,i[Oc][a].iCurStream),i[Oc][a].socket.send(s),"0.1"===i[Nc]&&e()}else"0.1"===i[Nc]&&n()}))},t.singleFrame=function(){},t.setPlayRate=function(e,t){var r=this;return new Promise((function(i,a){for(var n=0,s=r[Oc].length;n<s;n++)if(r[Oc][n].id===e){if("0.1"===r[Nc]){var o=Yc.playRateCmd(t);r[Oc][n].socket.send(o),i();break}r[Oc][n].resolve=i,r[Oc][n].reject=a;var x=Uc.playRateCmd(t);r[Oc][n].socket.send(x)}}))},t.seek=function(e,t,r){var i=this;return new Promise((function(a,n){for(var s=0,o=i[Oc].length;s<o;s++)if(i[Oc][s].id===e){i[Oc][s].resolve=a,i[Oc][s].reject=n;var x=Xc.seekCmd(t,r);i[Oc][s].socket.send(x)}}))},t.pause=function(e){var t=this;return new Promise((function(r,i){for(var a=0,n=t[Oc].length;a<n;a++)if(t[Oc][a].id===e){if("0.1"===t[Nc]){var s=Yc.pauseCmd();t[Oc][a].socket.send(s),r();break}t[Oc][a].resolve=r,t[Oc][a].reject=i;var o=Uc.pauseCmd();t[Oc][a].socket.send(o)}}))},t.transmission=function(e,t){var r=this;return new Promise((function(i,a){for(var n=0,s=r[Oc].length;n<s;n++)r[Oc][n].id===e&&(r[Oc][n].resolve=i,r[Oc][n].reject=a,r[Oc][n].socket.send(t))}))},t.resume=function(e){var t=this;return new Promise((function(r,i){for(var a=0,n=t[Oc].length;a<n;a++)if(t[Oc][a].id===e){if("0.1"===t[Nc]){var s=Yc.resumeCmd();t[Oc][a].socket.send(s),r();break}t[Oc][a].resolve=r,t[Oc][a].reject=i;var o=Uc.resumeCmd();t[Oc][a].socket.send(o)}}))},t.stop=function(e){var t=this;return new Promise((function(r,i){if(e){for(var a=-1,n=0,s=t[Oc].length;n<s;n++)if(t[Oc][n].id===e){a=n,t[Oc][n].resolve=r,t[Oc][n].socket.close(1e3,"CLOSE");break}-1===a&&i()}else i()}))},t.stopAll=function(){var e=this;return new Promise((function(t,r){for(var i=0,a=e[Oc].length;i<a;i++)e[Oc][i].socket.close(1e3,"CLOSE");t()}))},e}(),Jc=function(){function e(e){this._streamUUID=null,this._player=e,this._streamClient=new Gc}var t=e.prototype;return t.openStream=function(e,t,r,i){var a=this;return this._streamClient.openStream(e,t,r,i).then((function(r){return a._streamUUID=r,a._player.logger.log("["+kh.SOCKET.openStream+"] url: ",e,"oParams: ",t),a._player.event.emit(""+kh.SOCKET.openStream,Mh(r)),r}))},t.startPlay=function(e){var t=this;return e=null!=e?e:this._streamUUID,this._streamClient.startPlay(e).then((function(){t._player.logger.log("["+kh.SOCKET.startPlay+"] StreamUUID: ",e),t._player.event.emit(""+kh.SOCKET.startPlay,Mh(e))}))},t.setPlayRate=function(e,t){var r=this;return t=null!=t?t:this._streamUUID,this._streamClient.setPlayRate(t,e).then((function(){r._player.logger.log("["+kh.SOCKET.setPlayRate+"] StreamUUID: ",t," rate: ",e),r._player.event.emit(""+kh.SOCKET.startPlay,Mh({id:t,rate:e}))}))},t.seek=function(e,t,r){var i=this;return r=null!=r?r:this._streamUUID,this._streamClient.seek(r,e,t).then((function(){i._player.logger.log("["+kh.SOCKET.seek+"] StreamUUID: ",r," startTime: ",e," stopTime:",t),i._player.event.emit(""+kh.SOCKET.seek,Mh({id:r,startTime:e,stopTime:t}))}))},t.stopAll=function(){var e=this;return this._streamClient.stopAll().then((function(){e._player.logger.log("["+kh.SOCKET.stopAll+"]"),e._player.event.emit(kh.SOCKET.stopAll,Mh(void 0)),e._streamUUID=null}))},t.destroy=function(){var e=this;this.stopAll().then((function(){e._streamUUID=null,e._streamClient=null}))},e}();function Zc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function jc(){return jc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},jc.apply(this,arguments)}var zc=768,qc={port:0,start:{x:0,y:0},total:{x:0,y:0},diff:{x:0,y:0},startPTZPosition:{x:0,y:0},lastCorrdsY:0,param2d:{upDateType:4,fValue:0,fPTZParam:{fPTZPositionX:0,fPTZPositionY:0},fPTZZoom:0}},$c=function(){function e(e){this._canvasFECSubPort=new Map,this._correctType=null,this._player=e,this.init()}var t=e.prototype;return t._supportFEC=function(){return this._player._decoderStatus.bSupHardOrSoft},t.init=function(){var e=this;this._player.logger.log("FECSplitIds.init"),this._player.event.on("JSPlayM4_Play_Before",(function(){e._player.logger.log("JSPlayM4_Play_Before event: _FECSplitIds =  ",e._FECSplitIds),e._FECSplitIds&&e._supportFEC()&&e._player.wasmplayer.JSPlayM4_FEC_SetCanvasID(e._FECSplitIds)})),this._player.event.on("JSPlayM4_Play_After",(function(){e._player.logger.log("JSPlayM4_Play_After event: _FECSplitIds =  ",e._FECSplitIds),e._FECSplitIds&&e._supportFEC()&&e._canvasFECSubPort.set(e._player._playerWindow.canvasId,jc({},qc))})),this._player.event.on("PlayM4_openStream",(function(){e._FECSplitIds&&e._supportFEC()&&e._player.wasmplayer.JSPlayM4_SetDecodeEngine(0)})),this._player.event.on("JSPlayM4_Stop",(function(){e._closeFECAllSubWnd()})),this._player.event.on(kh.API.destroy,(function(){e._closeFECAllSubWnd()})),this._player.logger.log("FECCorrect init")},t.setFECCorrectType=function(e,t){var r=this;return this._supportFEC()?(this._FECSplitIds=t,this._correctType=e,new Promise((function(i,a){var n=r._createSplitCanvas(e,t),s=n.find((function(e){return-1===e.code}));r._player.event.emit("FECCorrect.setFECCorrectType",Mh({type:e,ids:t})),s||0===n.length?a(n):i(n)}))):Promise.reject()},t.setFEC2DParam=function(e,t){if(this._supportFEC())return this._player.event.emit("FECCorrect.setFEC2DParam",Mh({port:e,param2d:t})),this._player.wasmplayer.JSPlayM4_FEC_SetParam(e,t)},t.setFEC3DViewParam=function(e){if(!this._supportFEC())return Promise.reject(!1);var t=this._player.wasmplayer;if(this._FECSplitIds&&this._canvasFECSubPort&&this._correctType){var r=t.JSPlayM4_FEC_SetViewParam(e.port,e.upDateType,e.fValue);return this._player.event.emit("FECCorrect.setFEC3DViewParam",Mh({param:e})),1===r?Promise.resolve(!0):Promise.reject(!1)}return Promise.reject(void 0)},t.get3DViewParam=function(e){var t=this;if(!this._supportFEC())return Promise.reject(!1);var r=this._player.wasmplayer;return new Promise((function(i,a){return t._FECSplitIds&&t._canvasFECSubPort&&t._correctType&&1!==r.JSPlayM4_FEC_GetViewParam(e.port,e.upDateType,(function(r){t._player.event.emit("FECCorrect.get3DViewParam",Mh({param:e})),i(r)}))?a(!1):a(void 0)}))},t.getFECSubPortMap=function(){var e=this._canvasFECSubPort;return this._player.event.emit("FECCorrect.getFECSubPortMap",Mh(e)),e},t._createSplitCanvas=function(e,t){var r=this._player._playerWindow.canvasId,i=(t=r+t?","+this._FECSplitIds:"")?t.split(","):[],a=this._player.wasmplayer,n=[],s=this;if(e.correctList&&e.correctList.length>0){for(var o=0;o<e.correctList.length;o++)if(0!==o||!e.correctList[o].hidden)if(0!==o){var x=document.getElementById(i[o]);if(!i[o]||!x||"CANVAS"!==x.nodeName)return this._player.logger.error("Canvas element is null"),[];var f=a.JSPlayM4_FEC_GetPort(e.place,e.correctList[o].correctType),l=a.JSPlayM4_FEC_Enable(f),h=a.JSPlayM4_FEC_SetWnd(f,i[o]),c={upDateType:this._matchUpDateType(e.correctList[o].correctType),fValue:0,fPTZParam:{fPTZPositionX:e.correctList[o].x||0,fPTZPositionY:e.correctList[o].y||0},fPTZZoom:1e-5};this.setFEC2DParam(f,c),0===l||0===h?n.push({code:-1,msg:"失败",port:f,id:i[o]}):(n.push({code:0,msg:"成功",port:f,id:i[o]}),this._canvasFECSubPort.set(i[o],jc({},qc,{port:f,param2d:c,startPTZPosition:{x:c.fPTZParam.fPTZPositionX,y:c.fPTZParam.fPTZPositionY}})),x.setAttribute("data-port",f),this._spliceCanvasMouseEvents(i[o],e.correctList[o]))}else u(e.correctList[0])}else u(e);function u(t){var i={upDateType:s._matchUpDateType(t.correctType),fValue:0,fPTZParam:{fPTZPositionX:t.x||0,fPTZPositionY:t.y||0},fPTZZoom:1e-5},o=s._canvasFECSubPort.get(r).port;if(void 0===o)return n;1===a.JSPlayM4_FEC_ResetCorrectType(o,e.place,t.correctType)?(n.push({code:0,msg:"成功",port:o,id:r}),t.correctType<=zc?s.setFEC2DParam(o,i):t.viewParam&&setTimeout((function(){"number"==typeof t.viewParam.x&&"number"==typeof t.viewParam.y&&(a.JSPlayM4_FEC_SetViewParam(o,2,t.viewParam.x),a.JSPlayM4_FEC_SetViewParam(o,1,t.viewParam.y)),"number"==typeof t.viewParam.zoom&&a.JSPlayM4_FEC_SetViewParam(o,3,t.viewParam.zoom)}),200),s._canvasFECSubPort.set(r,jc({},qc,{port:o,param2d:i,startPTZPosition:{x:i.fPTZParam.fPTZPositionX,y:i.fPTZParam.fPTZPositionY}})),s._spliceCanvasMouseEvents(r,t)):n.push({code:-1,msg:"失败",port:o,id:r})}return n},t._matchUpDateType=function(e){switch(e){case zc:return 4;case 256:return 8}return 2},t._spliceCanvasMouseEvents=function(e,t){if(void 0!==e){var r=document.getElementById(e);if(null!==r){var i=this._player.wasmplayer,a=r.getAttribute("id"),n=this._canvasFECSubPort.get(a);if(void 0!==n.port){var s=r.width,o=r.height,x=function(e){};r.addEventListener("mousedown",(function(e){n.start.x=e.pageX,n.start.y=e.pageY,n.lastCorrdsY=e.pageY,x=function(e){!function(e){var r=[e.clientX,e.clientY];n.diff.y=r[1]-n.start.y;var a=(n.total.y+n.diff.y)/o*2*Math.PI,x=(r[1]-n.lastCorrdsY)/(2*o),f=Math.atan2(n.startPTZPosition.y-.5,n.startPTZPosition.x-.5),l=n.startPTZPosition.x+x*Math.cos(f),h=n.startPTZPosition.y+x*Math.sin(f);n.diff.x=r[0]-n.start.x;var c=(n.total.x+n.diff.x)/s*2*Math.PI,u=Math.sqrt(Math.pow(l-.5,2)+Math.pow(h-.5,2)),_=-c,d=.5+u*Math.cos(_),p=.5+u*Math.sin(_);if(t.correctType<=zc){switch(t.correctType){case zc:case 512:n.param2d.upDateType=4;break;case 256:if(n.param2d.upDateType=8,Math.sqrt(Math.pow(d-.5,2)+Math.pow(p-.5,2))>.4)return}n.param2d.fValue=c,n.param2d.fPTZParam.fPTZPositionX=d,n.param2d.fPTZParam.fPTZPositionY=p,i.JSPlayM4_FEC_SetParam(n.port,n.param2d)}else 1536===t.correctType&&(i.JSPlayM4_FEC_SetViewParam(n.port,2,c),i.JSPlayM4_FEC_SetViewParam(n.port,1,a))}(e)},r.addEventListener("mousemove",x)}));var f=function(){null!==x&&(r.removeEventListener("mousemove",x),x=null,n.total.x+=n.diff.x,n.total.y+=n.diff.y)};r.addEventListener("mouseup",f),r.addEventListener("mouseleave",f),r.addEventListener("mouseout",f)}}}},t._closeFECAllSubWnd=function(){if(this._FECSplitIds&&this._canvasFECSubPort&&this._supportFEC())for(var e,t=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Zc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zc(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this._FECSplitIds.split(","));!(e=t()).done;){var r=e.value;if(r){var i=this._canvasFECSubPort.get(r);if(void 0===i||void 0===i.port)continue;this._canvasFECSubPort.delete(r);var a=this._player.wasmplayer;a.JSPlayM4_FEC_Disable(i.port,!0),a.JSPlayM4_FEC_DelPort(i.port)}}},e}();function Kc(e,t){return new Promise((function(r,i){e.service.getVideoByTime(t).then((function(i){e.event.emit(kh.NETWORK.videoFragmentFiles,Mh(i.data||[],"根据时间获取存储文件信息",t.recType+"")),r(i)})).catch((function(t){e.event.emit(kh.NETWORK.error.error,Mh(t)),e.event.emit(kh.NETWORK.error.videoFragmentFiles,Mh(t)),i(t)}))}))}var Qc=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],eu=function(){if("undefined"==typeof document)return!1;for(var e=Qc[0],t={},r=0,i=Qc;r<i.length;r++){var a=i[r];if((null==a?void 0:a[1])in document){var n,s=l(a.entries());try{for(s.s();!(n=s.n()).done;){var x=o(n.value,2),f=x[0],h=x[1];t[e[f]]=h}}catch(e){s.e(e)}finally{s.f()}return t}}return!1}(),tu={change:eu.fullscreenchange,error:eu.fullscreenerror},ru={request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement,t=arguments.length>1?arguments[1]:void 0;return new Promise((function(r,i){var a=function e(){ru.off("change",e),r()};ru.on("change",a);var n=e[eu.requestFullscreen](t);n instanceof Promise&&n.then(a).catch(i)}))},exit:function(){return new Promise((function(e,t){if(ru.isFullscreen){var r=function t(){ru.off("change",t),e()};ru.on("change",r);var i=document[eu.exitFullscreen]();i instanceof Promise&&i.then(r).catch(t)}else e()}))},toggle:function(e,t){return ru.isFullscreen?ru.exit():ru.request(e,t)},onchange:function(e){ru.on("change",e)},onerror:function(e){ru.on("error",e)},on:function(e,t){var r=tu[e];r&&document.addEventListener(r,t,!1)},off:function(e,t){var r=tu[e];r&&document.removeEventListener(r,t,!1)},raw:eu};Object.defineProperties(ru,{isFullscreen:{get:function(){return Boolean(document[eu.fullscreenElement])}},element:{enumerable:!0,get:function(){var e;return null!==(e=document[eu.fullscreenElement])&&void 0!==e?e:void 0}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[eu.fullscreenEnabled])}}}),eu||(ru={isEnabled:!1});var iu=ru;function au(){return!!(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen)}var nu=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange"],su=function(){function e(e,t){this._fullscreenchangeEvent=null,this.player=e,this.target=null!=t?t:e.$container,this._fullscreenChange(),this._registerEvent()}var t=e.prototype;return t.fullScreen=function(e,t){var r=this;return this.target?iu.request(this.target).then((function(){e&&t&&r.player.resize(e,t)})):Promise.reject()},t.exitScreen=function(){return au()?iu.exit():Promise.resolve()},t.destroy=function(){var e=this;nu.forEach((function(t){e.target&&e._fullscreenchangeEvent&&e.target.removeEventListener(t,e._fullscreenchangeEvent)}))},t._registerEvent=function(){var e=this;this.player.event.on("exitScreen",(function(){e.player.resize()}))},t._fullscreenChange=function(){var e=this,t=this;this._fullscreenchangeEvent=function(){au()?t.player.event.emit("fullScreen"):t.player.event.emit("exitScreen")},nu.forEach((function(t){e.target&&e.target.addEventListener(t,e._fullscreenchangeEvent)})),this.player&&this.player.event.on(kh.API.destroy,(function(){e.destroy()}))},e}();var ou="ezui-player";function xu(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var fu={borderSelect:"#FFCC00",border:"none",background:"#000000"},lu=function(){function e(e,t,r,i){void 0===i&&(i={}),this.id=e,this.canvasId=e+"-player",this.width=t,this.height=r,this.style=Object.assign({},fu,i),this.$playerWnd=document.createElement("div")}var t=e.prototype;return t.render=function(){var e;this.$playerWnd&&(this.$playerWnd.innerHTML="");var t=""+ou,r=this.width,i=this.height,a=this.width-r,n=this.height-i;this.$playerWnd.classList.add(this.id+"parent-wnd",t+"-wrapper"),this.$playerWnd.style.overflow="hidden",this.$playerWnd.style.width="100%",this.$playerWnd.style.height="100%",this.$playerWnd.style.position="relative";for(var s="",o=0;o<1;o++){var x=a+(o%1==0?r:0),f=n+(o+1>=Math.pow(1,2)?i:0);s+='<div id="'+this.id+"-container-"+o+'" class="'+t+"-container "+t+"-container-"+o+'" style="width:'+x+"px; height: "+f+'px;">\n                  <canvas id="'+this.id+"canvas_draw"+o+'" class="'+this.id+"draw-window "+t+'-canvas-draw" style="position:absolute; top:0; left:0;" wid="'+o+'" width="'+this.width+"\" height='"+this.height+"'></canvas>\n                  <canvas id=\""+this.canvasId+'" class="'+this.id+"play-window "+t+'-canvas" wid="'+o+'" width="'+x+'" height="'+f+'"></canvas>\n                </div>'}this.$playerWnd.innerHTML=s,null==(e=document.getElementById(this.id))||e.appendChild(this.$playerWnd)},t.hide=function(){var e=document.getElementById(this.canvasId);e&&(e.style.display="none")},t.destroy=function(){var e=document.getElementById(this.id);e&&e.removeChild(this.$playerWnd),this.$playerWnd=null,this.width=0,this.height=0},t.resize=function(e,t){if(this.$playerWnd){this.width=e,this.height=t;for(var r,i=document.getElementById(this.id+"-container-0"),a=document.getElementById(this.id+"canvas_draw0"),n=document.getElementById(this.canvasId),s=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return xu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xu(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}([this.$playerWnd,i,n,a]);!(r=s()).done;){var o=r.value;o&&(o.style.width=e+"px",o.style.height=t+"px")}}},t.reRenderCanvas=function(e){var t,r=document.getElementById(this.canvasId),i=null==(t=this.$playerWnd)?void 0:t.children[0];if(r){if(!e)return;null==i||i.removeChild(r)}var a=document.createElement("canvas");a.id=this.canvasId,i&&i.appendChild(a),a.width=this.width,a.height=this.height},e}(),hu={exports:{}};!function(e,t){function a(e,t,r,i,a,n,s){try{var o=e[n](s),x=o.value}catch(e){return void r(e)}o.done?t(x):Promise.resolve(x).then(i,a)}function n(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var s=e.apply(t,r);function o(e){a(s,i,n,o,x,"next",e)}function x(e){a(s,i,n,o,x,"throw",e)}o(void 0)}))}}function s(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function o(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":r(e)}hu.exports=function(){var e={477:function(e){e.exports=function(e,t,r,i){var a=self||window;try{try{var n;try{n=new a.Blob([e])}catch(t){(n=new(a.BlobBuilder||a.WebKitBlobBuilder||a.MozBlobBuilder||a.MSBlobBuilder)).append(e),n=n.getBlob()}var s=a.URL||a.webkitURL,o=s.createObjectURL(n),x=new a[t](o,r);return s.revokeObjectURL(o),x}catch(i){return new a[t]("data:application/javascript,".concat(encodeURIComponent(e)),r)}}catch(e){if(!i)throw Error("Inline worker is not supported");return new a[t](i,r)}}},61:function(e,t,r){var i=r(698).default;function a(){e.exports=a=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,n=r.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},x=o.iterator||"@@iterator",f=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function h(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{h({},"")}catch(e){h=function(e,t,r){return e[t]=r}}function c(e,t,r,i){var a,n,o,x,f=t&&s(t.prototype,d)?t:d,l=Object.create(f.prototype),h=new F(i||[]);return l._invoke=(a=e,n=r,o=h,x="suspendedStart",function(e,t){if("executing"===x)throw new Error("Generator is already running");if("completed"===x){if("throw"===e)throw t;return{value:void 0,done:!0}}for(o.method=e,o.arg=t;;){var r=o.delegate;if(r){var i=R(r,o);if(i){if(i===_)continue;return i}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if("suspendedStart"===x)throw x="completed",o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);x="executing";var s=u(a,n,o);if("normal"===s.type){if(x=o.done?"completed":"suspendedYield",s.arg===_)continue;return{value:s.arg,done:o.done}}"throw"===s.type&&(x="completed",o.method="throw",o.arg=s.arg)}}),l}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=c;var _={};function d(){}function p(){}function m(){}var P={};h(P,x,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(T([])));g&&g!==r&&n.call(g,x)&&(P=g);var b=m.prototype=d.prototype=Object.create(P);function S(e){["next","throw","return"].forEach((function(t){h(e,t,(function(e){return this._invoke(t,e)}))}))}function v(e,t){function r(a,s,o,x){var f=u(e[a],e,s);if("throw"!==f.type){var l=f.arg,h=l.value;return h&&"object"==i(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){r("next",e,o,x)}),(function(e){r("throw",e,o,x)})):t.resolve(h).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,x)}))}x(f.arg)}var a;this._invoke=function(e,i){function n(){return new t((function(t,a){r(e,i,t,a)}))}return a=a?a.then(n,n):n()}}function R(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,R(e,t),"throw"===t.method))return _;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return _}var i=u(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,_;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,_):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,_)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function F(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function T(e){if(e){var t=e[x];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:D}}function D(){return{value:void 0,done:!0}}return p.prototype=m,h(b,"constructor",m),h(m,"constructor",p),p.displayName=h(m,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,h(e,l,"GeneratorFunction")),e.prototype=Object.create(b),e},t.awrap=function(e){return{__await:e}},S(v.prototype),h(v.prototype,f,(function(){return this})),t.AsyncIterator=v,t.async=function(e,r,i,a,n){void 0===n&&(n=Promise);var s=new v(c(e,r,i,a),n);return t.isGeneratorFunction(r)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},S(b),h(b,l,"Generator"),h(b,x,(function(){return this})),h(b,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var i=t.pop();if(i in e)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=T,F.prototype={constructor:F,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return s.type="throw",s.arg=e,t.next=r,i&&(t.method="next",t.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],s=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var o=n.call(a,"catchLoc"),x=n.call(a,"finallyLoc");if(o&&x){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!x)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var s=a?a.completion:{};return s.type=e,s.arg=t,a?(this.method="next",this.next=a.finallyLoc,_):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),_},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),_}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var a=i.arg;E(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:T(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),_}},t}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports},698:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":o(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},687:function(e,t,i){var a=i(61)();e.exports=a;try{regeneratorRuntime=a}catch(e){"object"==("undefined"==typeof globalThis?"undefined":r(globalThis))?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}}},t={};function a(r){var i=t[r];if(void 0!==i)return i.exports;var n=t[r]={exports:{}};return e[r](n,n.exports,a),n.exports}a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var x={};return function(){var e=function(e,t){if(!s(e,t))throw new TypeError("Cannot call a class as a function")},t=function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}},r=function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e},o=function(e,t,r,i,a,n,s){try{var o=e[n](s),x=o.value}catch(e){return void r(e)}o.done?t(x):Promise.resolve(x).then(i,a)},f=function(){return H()("((()=>{'use strict';function _0x54580d(_0x2b6bad,_0x2d533c){if(!(_0x2b6bad instanceof _0x2d533c))throw new TypeError('Cannot\\x20call\\x20a\\x20class\\x20as\\x20a\\x20function');}function _0xae16d8(_0x51512e,_0x306019){for(var _0x585d8=0x0;_0x585d8<_0x306019['length'];_0x585d8++){var _0x34aa33=_0x306019[_0x585d8];_0x34aa33['enumerable']=_0x34aa33['enumerable']||!0x1,_0x34aa33['configurable']=!0x0,'value'in _0x34aa33&&(_0x34aa33['writable']=!0x0),Object['defineProperty'](_0x51512e,_0x34aa33['key'],_0x34aa33);}}function _0x4fd085(_0xfb685a,_0x3f4464,_0xc28cb1){return _0x3f4464&&_0xae16d8(_0xfb685a['prototype'],_0x3f4464),_0xc28cb1&&_0xae16d8(_0xfb685a,_0xc28cb1),Object['defineProperty'](_0xfb685a,'prototype',{'writable':!0x1}),_0xfb685a;}var _0x599b74=0x501,_0x4b57a2=0x502,_0xa88cb3=0x505,_0x1ee0b0=0x507,_0x31d5c8=0x508,_0x13beae=0x509,_0x41c932=0x512,_0x633153=0x516,_0x2aea6b=0x1,_0x240c92=0x2,_0x1e68ea=0x3,_0x4fbb93=0x0,_0x54a990=0x100,_0x2cb8a2=0x200,_0x4e5968=0x300,_0x30e952=0x400,_0x1837a3=0x500,_0x20b7ae=0x600,_0x443c47=0x700,_0x30ecd9=0x800,_0x39b0d3=0x900,_0x2a01ec=0xa00,_0x16ee77=0x1,_0x3ff4c5=0x2,_0x353221=0x4,_0x2b1528=0x8,_0x1f2582=0x10,_0x160732=0x20,_0x285caf=(function(){function _0x3a5d6f(_0x464baf,_0x1e0a98,_0x5183ee){_0x54580d(this,_0x3a5d6f),this['width']=0x0,this['height']=0x0,this['decoderObj']=null,this['FirstFrame']=!0x0,this['ready_frames']=[],this['underflow']=!0x0,this['sab']=_0x464baf,this['frameRate']=0x1e,this['needSetPreSoft']=!0x1,this['decoderCurStatus']=0x2,this['decoderOutSuccess']=!0x1,this['decoderObjNeedReset']=!0x1,this['oVideoRenderHandle']=_0x1e0a98,this['output']=this['output']['bind'](this),this['reportError']=this['reportError']['bind'](this),this['player']=null,null!=_0x5183ee&&(this['player']=_0x5183ee),this['curFrame']=null;}return _0x4fd085(_0x3a5d6f,[{'key':'initDecoder','value':function(){if(null==this['decoderObj']){var _0x2d79fc={'output':this['output'],'error':this['reportError']};this['decoderObj']=new VideoDecoder(_0x2d79fc);}this['underflow']&&(this['underflow']=!0x1,setTimeout(this['oVideoRenderHandle']['RenderFrame'](),0x0),this['oVideoRenderHandle']['displayRunning']=!0x0),this['decoderCurStatus']=0x2,this['FirstFrame']=!0x0;}},{'key':'inputData','value':function(_0x14a132,_0x2702c6){null!=this['decoderObj']&&('configured'==this['decoderObj']['state']||this['FirstFrame'])&&this['decodeProcess'](_0x14a132,_0x2702c6),_0x2702c6['nStreamEnd']&&this['SetStreamEnd']();}},{'key':'concatenate','value':function(_0x5e99ee){for(var _0x1d99af=0x0,_0x224806=arguments['length'],_0x2c0fc3=new Array(_0x224806>0x1?_0x224806-0x1:0x0),_0xe5bc19=0x1;_0xe5bc19<_0x224806;_0xe5bc19++)_0x2c0fc3[_0xe5bc19-0x1]=arguments[_0xe5bc19];for(var _0x2e36e3=0x0,_0x4839aa=_0x2c0fc3;_0x2e36e3<_0x4839aa['length'];_0x2e36e3++){var _0x5b5797=_0x4839aa[_0x2e36e3];_0x1d99af+=_0x5b5797['length'];}for(var _0xd7b863=new _0x5e99ee(_0x1d99af),_0x34342b=0x0,_0x467991=0x0,_0x454adf=_0x2c0fc3;_0x467991<_0x454adf['length'];_0x467991++){var _0x1d9c81=_0x454adf[_0x467991];_0xd7b863['set'](_0x1d9c81,_0x34342b),_0x34342b+=_0x1d9c81['length'];}return _0xd7b863;}},{'key':'processData','value':function(_0x3e77b2){for(var _0x24d282=null,_0x199354=null,_0x7aab92=null,_0x3c4951=!0x1,_0x2f2bac=!0x1,_0x4e9e0c=0x0,_0x7feff9=0x0;_0x7feff9<_0x3e77b2['length']-0x4;_0x7feff9++){if(0x0!=_0x3e77b2[_0x7feff9]||0x0!=_0x3e77b2[_0x7feff9+0x1]||0x0!=_0x3e77b2[_0x7feff9+0x2]||0x1!=_0x3e77b2[_0x7feff9+0x3]||0x67!=_0x3e77b2[_0x7feff9+0x4]&&0x27!=_0x3e77b2[_0x7feff9+0x4]||(0x0!=_0x7feff9?(_0x2f2bac=!0x0,_0x24d282=_0x3e77b2['slice'](_0x7feff9),_0x4e9e0c=_0x7feff9):_0x24d282=_0x3e77b2),0x0==_0x3e77b2[_0x7feff9]&&0x0==_0x3e77b2[_0x7feff9+0x1]&&0x0==_0x3e77b2[_0x7feff9+0x2]&&0x1==_0x3e77b2[_0x7feff9+0x3]&&(0x9==_0x3e77b2[_0x7feff9+0x4]||0x6==_0x3e77b2[_0x7feff9+0x4])){if(null==_0x24d282)continue;null==_0x199354&&(_0x199354=_0x3e77b2['slice'](_0x4e9e0c,_0x7feff9),_0x3c4951=!0x0);}if(0x0==_0x3e77b2[_0x7feff9]&&0x0==_0x3e77b2[_0x7feff9+0x1]&&0x0==_0x3e77b2[_0x7feff9+0x2]&&0x1==_0x3e77b2[_0x7feff9+0x3]&&(0x65==_0x3e77b2[_0x7feff9+0x4]||0x25==_0x3e77b2[_0x7feff9+0x4])){_0x3c4951&&(_0x7aab92=_0x3e77b2['slice'](_0x7feff9));break;}}return _0x3c4951?this['concatenate'](Uint8Array,_0x199354,_0x7aab92):_0x2f2bac?_0x24d282:_0x3e77b2;}},{'key':'processData1','value':function(_0x16bcc1){return 0x0!=_0x16bcc1[0x0]||0x0!=_0x16bcc1[0x1]||0x0!=_0x16bcc1[0x2]||0x1!=_0x16bcc1[0x3]||0x9!=_0x16bcc1[0x4]&&0x6!=_0x16bcc1[0x4]?_0x16bcc1:_0x16bcc1['slice'](0x5);}},{'key':'formatVideoDecoderConfigure','value':function(_0x54ce8e,_0x196d31,_0x5a1ba3,_0x50f43f){var _0x1ffc78='';if(0x5==_0x196d31)_0x1ffc78='hvc1.1.6.L123.00',console['log']('265\\x20hard\\x20decoder');else{if(0x100==_0x196d31){for(var _0x1ccde6=0x0;_0x1ccde6<_0x54ce8e['length'];_0x1ccde6++)if(0x67===_0x54ce8e[_0x1ccde6]||0x27===_0x54ce8e[_0x1ccde6]){var _0x3cd7eb=_0x54ce8e['subarray'](_0x1ccde6+0x1,_0x1ccde6+0x4);_0x1ffc78='avc1.';for(var _0x34c212=0x0;_0x34c212<0x3;_0x34c212++){var _0x1ce113=_0x3cd7eb[_0x34c212]['toString'](0x10);_0x1ce113['length']<0x2&&(_0x1ce113='0'+_0x1ce113),_0x1ffc78+=_0x1ce113;}break;}console['log']('264\\x20hard\\x20decoder');}else console['log']('Support\\x20Error:\\x20hard\\x20decoder\\x20only\\x20support\\x20264\\x20and\\x20265\\x20!!!');}var _0x34eea1={'codec':_0x1ffc78,'hardwareAcceleration':'prefer-hardware','optimizeForLatency':0x1};return 0x5!=_0x196d31&&this['needSetPreSoft']&&(_0x34eea1['hardwareAcceleration']='prefer-software'),_0x34eea1;}},{'key':'decodeProcess','value':function(_0x39207c,_0x2e1195){var _0x4f64b2=this;this['frameRate']!=_0x2e1195['frameRate']&&(this['frameRate']=_0x2e1195['frameRate']),this['width']!=_0x2e1195['width']&&(this['width']=_0x2e1195['width']),this['height']!=_0x2e1195['height']&&(this['height']=_0x2e1195['height']),_0x2e1195['needSetPreSoft']&&(this['needSetPreSoft']=_0x2e1195['needSetPreSoft']);var _0x1e93e7=_0x39207c;if(0x4!=this['decoderCurStatus']&&null!=this['decoderObj']){if('configured'==this['decoderObj']['state']){var _0x38e22c=new EncodedVideoChunk({'data':_0x1e93e7,'timestamp':_0x2e1195['timeStamp'],'type':_0x2e1195['isKeyFrame']?'key':'delta'});this['decoderObj']['decode'](_0x38e22c),_0x1e93e7=null,_0x39207c=null,_0x38e22c=null,_0x2e1195['frameType'];}else{if(_0x2e1195['isKeyFrame']&&'unconfigured'==this['decoderObj']['state']){var _0x158e69=this['formatVideoDecoderConfigure'](_0x39207c,_0x2e1195['codecType'],_0x2e1195['width'],_0x2e1195['height']);if(''==_0x158e69['codec'])return-0x1;VideoDecoder['isConfigSupported'](_0x158e69)['then'](function(_0x5e7fa4){if(_0x5e7fa4['supported']){_0x4f64b2['decoderObj']['configure'](_0x158e69),_0x1e93e7=_0x4f64b2['processData'](_0x39207c),_0x4f64b2['FirstFrame']=!0x1;var _0x3f5221=new EncodedVideoChunk({'data':_0x1e93e7,'timestamp':_0x2e1195['timeStamp'],'type':_0x2e1195['isKeyFrame']?'key':'delta'});_0x4f64b2['decoderObj']['decode'](_0x3f5221),_0x158e69=null,_0x1e93e7=null,_0x39207c=null;}else console['log']('%c4>HardDecoder\\x20ConfigSupported\\x20error,switch\\x20hard\\x20to\\x20soft','color:\\x20red'),_0x4f64b2['oVideoRenderHandle']['HardDecodeError']();})['catch'](function(){console['log']('VideoDecoder.js\\x20isConfigSupported\\x20error\\x20switch\\x20hard\\x20to\\x20soft\\x20'),_0x4f64b2['oVideoRenderHandle']['HardDecodeError']();});}}}}},{'key':'output','value':function(_0x206cf6){if('configured'==this['decoderObj']['state'])_0x206cf6['format'],_0x206cf6['codedWidth'],_0x206cf6['codedHeight'],_0x206cf6['displayWidth'],_0x206cf6['displayHeight'],_0x206cf6['duration'],_0x206cf6['timestamp'],(this['ready_frames']['push'](_0x206cf6),this['decoderOutSuccess']||(this['decoderOutSuccess']=!0x0),this['decoderObj']['decodeQueueSize']<=0x1&&(this['player']?this['player']['JSPlayM4_GetRawData']():postMessage({'function':'GetRawData'})));else _0x206cf6['close']();}},{'key':'output2','value':function(_0x4be35d){var _0x3a3570=this;_0x4be35d['timestamp'],createImageBitmap(_0x4be35d)['then'](function(_0x3adf18){_0x4be35d['close'](),_0x3a3570['ready_frames']['push'](_0x3adf18);});}},{'key':'reportError','value':function(_0x16c406){this['decoderOutSuccess']?this['decoderObjNeedReset']=!0x0:(this['oVideoRenderHandle']['HardDecodeError'](),console['log']('%cswitch\\x20hardVideoDecoder\\x20to\\x20softVideoDecoder','color:\\x20red'));}},{'key':'destroyDecoder','value':function(){var _0x450263=this;return new Promise(function(_0x200299,_0x1c35a9){_0x450263['clearDecoderObjBuffer']()['then'](function(){null!=_0x450263['decoderObj']&&('closed'!=_0x450263['decoderObj']['state']&&_0x450263['decoderObj']['close'](),console['log']('>>>JS\\x2001\\x20destroy\\x20decoderObj'),_0x450263['decoderObj']=null),_0x450263['decoderCurStatus']=0x4,_0x450263['decoderOutSuccess']=!0x1,_0x450263['FirstFrame']=!0x0,_0x450263['underflow']=!0x0,_0x450263['needSetPreSoft']=!0x1,_0x450263['decoderObjNeedReset']=!0x1,_0x200299();},function(){_0x1c35a9();});});}},{'key':'resetDecoder','value':function(){var _0x1c7703=this;return new Promise(function(_0x240094,_0x2effac){_0x1c7703['destroyDecoder']()['then'](function(){_0x1c7703['initDecoder'](),console['log']('%c\\x20reset\\x20hard\\x20decoder','color:red'),_0x240094();},function(){_0x2effac();});});}},{'key':'clearDecoderObjBuffer','value':function(){var _0x27b4db=this;return new Promise(function(_0xdf8f82,_0x28479a){for(var _0x5d26a1=_0x27b4db['ready_frames']['length'],_0x2e9d24=0x0;_0x2e9d24<_0x5d26a1;_0x2e9d24++){_0x27b4db['ready_frames']['shift']()['close']();}_0x27b4db['ready_frames']['splice'](0x0,_0x27b4db['ready_frames']['length']),null!=_0x27b4db['decoderObj']&&'configured'==_0x27b4db['decoderObj']['state']&&_0x27b4db['decoderObj']['reset'](),_0xdf8f82();});}},{'key':'SetStreamEnd','value':function(){return 0x0==this['decoderObj']['decodeQueueSize']&&0x0==this['ready_frames']['length']&&(this['decoderObj']['flush'](),console['log']('flush')),0x1;}},{'key':'GetFrame','value':function(){var _0x5f11c6=this;return new Promise(function(_0x2ac610,_0x3d6f62){if(null!=_0x5f11c6['curFrame']){var _0x4417cc=_0x5f11c6['ready_frames']['shift']();_0x4417cc['close'](),_0x4417cc=null,_0x5f11c6['curFrame']=null;}0x0!=_0x5f11c6['ready_frames']['length']?(_0x5f11c6['curFrame']=_0x5f11c6['ready_frames'][0x0],_0x2ac610(_0x5f11c6['curFrame'])):(_0x5f11c6['curFrame']=null,_0x2ac610(null));});}},{'key':'GetFrameBufferLength','value':function(){return this['ready_frames']['length'];}},{'key':'GetImageYUV','value':function(){var _0x58efa4=this;return new Promise(function(_0x80d209,_0x5c516d){var _0x32f011=null;if(null!=_0x58efa4['curFrame']?_0x32f011=_0x58efa4['curFrame']:0x0!=_0x58efa4['ready_frames']['length']&&(_0x32f011=_0x58efa4['ready_frames'][0x0]),null!=_0x32f011){var _0x586862=_0x32f011['displayWidth'],_0x9b681b=_0x32f011['displayHeight'],_0x3f3636=_0x586862*_0x9b681b*0x3/0x2,_0x331745=new Uint8Array(_0x3f3636),_0x37d16e=_0x32f011['format'];_0x32f011['copyTo'](_0x331745)['then'](function(){console['log']('2\\x20yuvLength:'+_0x3f3636+',displayWidth:'+_0x586862),_0x80d209({'yuvFrameBuffer':_0x331745,'yuvLength':_0x3f3636,'displayWidth':_0x586862,'displayHeight':_0x9b681b,'yuvType':_0x37d16e});});}else _0x80d209({'yuvFrameBuffer':-0x1,'yuvLength':-0x1,'displayWidth':-0x1,'displayHeight':-0x1,'yuvType':-0x1});});}}]),_0x3a5d6f;}()),_0xa87ede=0x1,_0x86aef9=0x80000001,_0x3d12cf=0x80000003,_0x520965=0x80000004,_0x31ddcf=0x80000005,_0x13126c=0x8000000a,_0x4d26c0=0x8000000d,_0x4fea1b=0x8000000e,_0xe9e464=0x1,_0x206403=0x2,_0x186ff9={'SR_DE_NULL':0x0,'SR_DE_FISH_ORIGINAL':0x1,'SR_DE_FISH_PTZ_CEILING':0x2,'SR_DE_FISH_PTZ_FLOOR':0x3,'SR_DE_FISH_PTZ_WALL':0x4,'SR_DE_FISH_PANORAMA_CEILING_360':0x5,'SR_DE_FISH_PANORAMA_CEILING_180':0x6,'SR_DE_FISH_PANORAMA_FLOOR_360':0x7,'SR_DE_FISH_PANORAMA_FLOOR_180':0x8,'SR_DE_FISH_PANORAMA_WALL':0x9,'SR_DE_FISH_SEMISPHERE':0xa,'SR_DE_EAGLEEYE_SEMISPHERE':0xb,'SR_DE_EAGLEEYE_PLANE':0xc,'SR_DE_FISH_CYLINDER_CEILING':0xd,'SR_DE_FISH_CYLINDER_FLOOR':0xe,'SR_DE_FISH_CYLINDER_SPLIT_CEILING':0xf,'SR_DE_FISH_CYLINDER_SPLIT_FLOOR':0x10,'SR_DE_FISH_PLANET':0x11,'SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL':0x12,'SR_DE_FISH_ARCSPHERE_VERTICAL_WALL':0x13,'SR_DE_FISH_ANIMATION_SWITCH_CEILING':0x14,'SR_DE_FISH_ANIMATION_SWITCH_FLOOR':0x15,'SR_DE_PANORAMA_SPHERE':0x16,'SR_DE_PANORAMA_PLANET':0x17},_0x343a24=0x0,_0x58bd8b=0x1,_0x532920=0x2,_0x264b64=0x3,_0x2818bf=0x4,_0x3b8155=0x5,_0x3840be=0x6,_0xa01ff6=0x100,_0x392c27=0x1,_0x5ca12e=0x2,_0x378a81=0x3,_0x3be196=0x4,_0x569e7f=0x0,_0x150ab7=0x1,_0x495db0=0x2,_0x394973=0x1,_0x42f4b3=0x2,_0x339c63=0x3,_0x444649=0x0,_0x4f7368=0x1,_0x11cf81=0x1,_0x57ef5a=0x2,_0x46c7b3=0x1,_0x2d33eb=0x2,_0x199c31=0x3,_0x414976=0x4,_0xe529b7=0x5,_0x1f462c='\\x0aattribute\\x20vec3\\x20xy;\\x0aattribute\\x20vec2\\x20uv;\\x0auniform\\x20int\\x20bCapture;\\x20\\x0a\\x0avarying\\x20highp\\x20vec2\\x20v_uv;\\x0a\\x0avoid\\x20main(void)\\x20{\\x0a\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(xy.x,\\x20-xy.y,\\x20xy.z,\\x201.0);\\x0a\\x20\\x20}\\x0a\\x20\\x20else\\x0a\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(xy,\\x201.0);\\x0a\\x20\\x20}\\x0a\\x20\\x20v_uv\\x20=\\x20uv;\\x0a}\\x0a',_0x48a033='\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec3\\x20position;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20\\x20color;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20\\x20float\\x20\\x20pp;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20\\x20vec4\\x20\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(position.x,\\x20-position.y,\\x200.0,\\x201.0);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(position.x,\\x20position.y,\\x200.0,\\x201.0);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20position.z;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20colorOut\\x20=\\x20color;\\x0a\\x20\\x20\\x20\\x20}\\x0a',_0x283927='\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20mediump\\x20float\\x20pp;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20lowp\\x20vec4\\x20\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20mediump\\x20float\\x20fx\\x20=\\x20abs(pp);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(fx\\x20>\\x200.2)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20=\\x20colorOut.a*(1.25\\x20-\\x201.25*fx);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',_0x2a3c39='\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20position;\\x20\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20\\x20\\x20mat4\\x20\\x20\\x20matRotate;\\x20\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x20\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20position;\\x20//*\\x20matRotate;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20=\\x20\\x20-position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',_0x350ff5='\\x0a\\x20\\x20\\x20\\x20precision\\x20mediump\\x20float;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAlpha;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20pp.st);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20*=\\x20fAlpha;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',_0x379995=0x20,_0x4b88be=0x400,_0x466865=0.05,_0x4a23c6=0.000001,_0x530a52=3.1415926,_0x49aaae=0.02,_0x26dab3=0x3e8,_0x13b181=0.78539815,_0x40743d=0x28,_0x3cf544=-0x1,_0x44d661=_0x530a52/0x12,_0x5affea=_0x530a52/0x3,_0x438d57=_0x530a52/0x6,_0x2506c4=_0x530a52/0x9,_0x2fd873=0.000001,_0x1d1f9f='undefined'!=typeof Float32Array?Float32Array:Array;Math['random'],Math['PI'],Math['hypot']||(Math['hypot']=function(){for(var _0x1528a6=0x0,_0xb5940b=arguments['length'];_0xb5940b--;)_0x1528a6+=arguments[_0xb5940b]*arguments[_0xb5940b];return Math['sqrt'](_0x1528a6);});function _0x5d7ee2(){var _0x2c8471=new _0x1d1f9f(0x10);return _0x1d1f9f!=Float32Array&&(_0x2c8471[0x1]=0x0,_0x2c8471[0x2]=0x0,_0x2c8471[0x3]=0x0,_0x2c8471[0x4]=0x0,_0x2c8471[0x6]=0x0,_0x2c8471[0x7]=0x0,_0x2c8471[0x8]=0x0,_0x2c8471[0x9]=0x0,_0x2c8471[0xb]=0x0,_0x2c8471[0xc]=0x0,_0x2c8471[0xd]=0x0,_0x2c8471[0xe]=0x0),_0x2c8471[0x0]=0x1,_0x2c8471[0x5]=0x1,_0x2c8471[0xa]=0x1,_0x2c8471[0xf]=0x1,_0x2c8471;}function _0x5ec25a(_0x3bc3fc,_0x205ca0,_0x1e9eea){var _0x331936=_0x205ca0[0x0],_0x40c3da=_0x205ca0[0x1],_0x37c4cb=_0x205ca0[0x2],_0xa889b6=_0x205ca0[0x3],_0x4c0dbb=_0x205ca0[0x4],_0x52301a=_0x205ca0[0x5],_0x17f559=_0x205ca0[0x6],_0x2c8144=_0x205ca0[0x7],_0x48eb8a=_0x205ca0[0x8],_0x4d2bbd=_0x205ca0[0x9],_0x5a4141=_0x205ca0[0xa],_0x480471=_0x205ca0[0xb],_0x2d955c=_0x205ca0[0xc],_0x5b4064=_0x205ca0[0xd],_0x2f8b5f=_0x205ca0[0xe],_0x227864=_0x205ca0[0xf],_0x5af42b=_0x1e9eea[0x0],_0x2f83a3=_0x1e9eea[0x1],_0x50ee36=_0x1e9eea[0x2],_0xf7a7ad=_0x1e9eea[0x3];return _0x3bc3fc[0x0]=_0x5af42b*_0x331936+_0x2f83a3*_0x4c0dbb+_0x50ee36*_0x48eb8a+_0xf7a7ad*_0x2d955c,_0x3bc3fc[0x1]=_0x5af42b*_0x40c3da+_0x2f83a3*_0x52301a+_0x50ee36*_0x4d2bbd+_0xf7a7ad*_0x5b4064,_0x3bc3fc[0x2]=_0x5af42b*_0x37c4cb+_0x2f83a3*_0x17f559+_0x50ee36*_0x5a4141+_0xf7a7ad*_0x2f8b5f,_0x3bc3fc[0x3]=_0x5af42b*_0xa889b6+_0x2f83a3*_0x2c8144+_0x50ee36*_0x480471+_0xf7a7ad*_0x227864,_0x5af42b=_0x1e9eea[0x4],_0x2f83a3=_0x1e9eea[0x5],_0x50ee36=_0x1e9eea[0x6],_0xf7a7ad=_0x1e9eea[0x7],_0x3bc3fc[0x4]=_0x5af42b*_0x331936+_0x2f83a3*_0x4c0dbb+_0x50ee36*_0x48eb8a+_0xf7a7ad*_0x2d955c,_0x3bc3fc[0x5]=_0x5af42b*_0x40c3da+_0x2f83a3*_0x52301a+_0x50ee36*_0x4d2bbd+_0xf7a7ad*_0x5b4064,_0x3bc3fc[0x6]=_0x5af42b*_0x37c4cb+_0x2f83a3*_0x17f559+_0x50ee36*_0x5a4141+_0xf7a7ad*_0x2f8b5f,_0x3bc3fc[0x7]=_0x5af42b*_0xa889b6+_0x2f83a3*_0x2c8144+_0x50ee36*_0x480471+_0xf7a7ad*_0x227864,_0x5af42b=_0x1e9eea[0x8],_0x2f83a3=_0x1e9eea[0x9],_0x50ee36=_0x1e9eea[0xa],_0xf7a7ad=_0x1e9eea[0xb],_0x3bc3fc[0x8]=_0x5af42b*_0x331936+_0x2f83a3*_0x4c0dbb+_0x50ee36*_0x48eb8a+_0xf7a7ad*_0x2d955c,_0x3bc3fc[0x9]=_0x5af42b*_0x40c3da+_0x2f83a3*_0x52301a+_0x50ee36*_0x4d2bbd+_0xf7a7ad*_0x5b4064,_0x3bc3fc[0xa]=_0x5af42b*_0x37c4cb+_0x2f83a3*_0x17f559+_0x50ee36*_0x5a4141+_0xf7a7ad*_0x2f8b5f,_0x3bc3fc[0xb]=_0x5af42b*_0xa889b6+_0x2f83a3*_0x2c8144+_0x50ee36*_0x480471+_0xf7a7ad*_0x227864,_0x5af42b=_0x1e9eea[0xc],_0x2f83a3=_0x1e9eea[0xd],_0x50ee36=_0x1e9eea[0xe],_0xf7a7ad=_0x1e9eea[0xf],_0x3bc3fc[0xc]=_0x5af42b*_0x331936+_0x2f83a3*_0x4c0dbb+_0x50ee36*_0x48eb8a+_0xf7a7ad*_0x2d955c,_0x3bc3fc[0xd]=_0x5af42b*_0x40c3da+_0x2f83a3*_0x52301a+_0x50ee36*_0x4d2bbd+_0xf7a7ad*_0x5b4064,_0x3bc3fc[0xe]=_0x5af42b*_0x37c4cb+_0x2f83a3*_0x17f559+_0x50ee36*_0x5a4141+_0xf7a7ad*_0x2f8b5f,_0x3bc3fc[0xf]=_0x5af42b*_0xa889b6+_0x2f83a3*_0x2c8144+_0x50ee36*_0x480471+_0xf7a7ad*_0x227864,_0x3bc3fc;}function _0x3405d1(_0xe0081f,_0x1b674b,_0x4ce0fb,_0x151c92){var _0xa104c9,_0x46ae43,_0x26d557,_0x237e66,_0x40ab05,_0x5fd26e,_0x5ae90f,_0x4f396b,_0x5b9f89,_0x1d5853,_0x5beaee,_0xc07032,_0x391691,_0xb7a629,_0x5861cc,_0x3b1ef3,_0x7394b2,_0x2b731b,_0x41f62d,_0x3cc106,_0x3890ac,_0x29cdd9,_0x496a78,_0x197fb4,_0x12c2f9=_0x151c92[0x0],_0x16ab04=_0x151c92[0x1],_0x1fb873=_0x151c92[0x2],_0x4b6fb0=Math['hypot'](_0x12c2f9,_0x16ab04,_0x1fb873);return _0x4b6fb0<_0x2fd873?null:(_0x12c2f9*=_0x4b6fb0=0x1/_0x4b6fb0,_0x16ab04*=_0x4b6fb0,_0x1fb873*=_0x4b6fb0,_0xa104c9=Math['sin'](_0x4ce0fb),_0x26d557=0x1-(_0x46ae43=Math['cos'](_0x4ce0fb)),_0x237e66=_0x1b674b[0x0],_0x40ab05=_0x1b674b[0x1],_0x5fd26e=_0x1b674b[0x2],_0x5ae90f=_0x1b674b[0x3],_0x4f396b=_0x1b674b[0x4],_0x5b9f89=_0x1b674b[0x5],_0x1d5853=_0x1b674b[0x6],_0x5beaee=_0x1b674b[0x7],_0xc07032=_0x1b674b[0x8],_0x391691=_0x1b674b[0x9],_0xb7a629=_0x1b674b[0xa],_0x5861cc=_0x1b674b[0xb],_0x3b1ef3=_0x12c2f9*_0x12c2f9*_0x26d557+_0x46ae43,_0x7394b2=_0x16ab04*_0x12c2f9*_0x26d557+_0x1fb873*_0xa104c9,_0x2b731b=_0x1fb873*_0x12c2f9*_0x26d557-_0x16ab04*_0xa104c9,_0x41f62d=_0x12c2f9*_0x16ab04*_0x26d557-_0x1fb873*_0xa104c9,_0x3cc106=_0x16ab04*_0x16ab04*_0x26d557+_0x46ae43,_0x3890ac=_0x1fb873*_0x16ab04*_0x26d557+_0x12c2f9*_0xa104c9,_0x29cdd9=_0x12c2f9*_0x1fb873*_0x26d557+_0x16ab04*_0xa104c9,_0x496a78=_0x16ab04*_0x1fb873*_0x26d557-_0x12c2f9*_0xa104c9,_0x197fb4=_0x1fb873*_0x1fb873*_0x26d557+_0x46ae43,_0xe0081f[0x0]=_0x237e66*_0x3b1ef3+_0x4f396b*_0x7394b2+_0xc07032*_0x2b731b,_0xe0081f[0x1]=_0x40ab05*_0x3b1ef3+_0x5b9f89*_0x7394b2+_0x391691*_0x2b731b,_0xe0081f[0x2]=_0x5fd26e*_0x3b1ef3+_0x1d5853*_0x7394b2+_0xb7a629*_0x2b731b,_0xe0081f[0x3]=_0x5ae90f*_0x3b1ef3+_0x5beaee*_0x7394b2+_0x5861cc*_0x2b731b,_0xe0081f[0x4]=_0x237e66*_0x41f62d+_0x4f396b*_0x3cc106+_0xc07032*_0x3890ac,_0xe0081f[0x5]=_0x40ab05*_0x41f62d+_0x5b9f89*_0x3cc106+_0x391691*_0x3890ac,_0xe0081f[0x6]=_0x5fd26e*_0x41f62d+_0x1d5853*_0x3cc106+_0xb7a629*_0x3890ac,_0xe0081f[0x7]=_0x5ae90f*_0x41f62d+_0x5beaee*_0x3cc106+_0x5861cc*_0x3890ac,_0xe0081f[0x8]=_0x237e66*_0x29cdd9+_0x4f396b*_0x496a78+_0xc07032*_0x197fb4,_0xe0081f[0x9]=_0x40ab05*_0x29cdd9+_0x5b9f89*_0x496a78+_0x391691*_0x197fb4,_0xe0081f[0xa]=_0x5fd26e*_0x29cdd9+_0x1d5853*_0x496a78+_0xb7a629*_0x197fb4,_0xe0081f[0xb]=_0x5ae90f*_0x29cdd9+_0x5beaee*_0x496a78+_0x5861cc*_0x197fb4,_0x1b674b!==_0xe0081f&&(_0xe0081f[0xc]=_0x1b674b[0xc],_0xe0081f[0xd]=_0x1b674b[0xd],_0xe0081f[0xe]=_0x1b674b[0xe],_0xe0081f[0xf]=_0x1b674b[0xf]),_0xe0081f);}var _0x4ceff8=function(_0x302553,_0xab7b4e,_0x299e09,_0x38ab7f,_0x237322){var _0x3eec8b=0x1/Math['tan'](_0xab7b4e/0x2);if(_0x302553[0x0]=_0x3eec8b/_0x299e09,_0x302553[0x1]=0x0,_0x302553[0x2]=0x0,_0x302553[0x3]=0x0,_0x302553[0x4]=0x0,_0x302553[0x5]=_0x3eec8b,_0x302553[0x6]=0x0,_0x302553[0x7]=0x0,_0x302553[0x8]=0x0,_0x302553[0x9]=0x0,_0x302553[0xb]=-0x1,_0x302553[0xc]=0x0,_0x302553[0xd]=0x0,_0x302553[0xf]=0x0,null!=_0x237322&&_0x237322!==0x1/0x0){var _0x2642b3=0x1/(_0x38ab7f-_0x237322);_0x302553[0xa]=(_0x237322+_0x38ab7f)*_0x2642b3,_0x302553[0xe]=0x2*_0x237322*_0x38ab7f*_0x2642b3;}else _0x302553[0xa]=-0x1,_0x302553[0xe]=-0x2*_0x38ab7f;return _0x302553;},_0x504680=function(_0x23342e,_0x5bb1cc,_0x473ea1,_0x29c6e7,_0x5528a9,_0x3833eb,_0x35e8e6){var _0x445103=0x1/(_0x5bb1cc-_0x473ea1),_0x1b3a48=0x1/(_0x29c6e7-_0x5528a9),_0x19b6f6=0x1/(_0x3833eb-_0x35e8e6);return _0x23342e[0x0]=-0x2*_0x445103,_0x23342e[0x1]=0x0,_0x23342e[0x2]=0x0,_0x23342e[0x3]=0x0,_0x23342e[0x4]=0x0,_0x23342e[0x5]=-0x2*_0x1b3a48,_0x23342e[0x6]=0x0,_0x23342e[0x7]=0x0,_0x23342e[0x8]=0x0,_0x23342e[0x9]=0x0,_0x23342e[0xa]=0x2*_0x19b6f6,_0x23342e[0xb]=0x0,_0x23342e[0xc]=(_0x5bb1cc+_0x473ea1)*_0x445103,_0x23342e[0xd]=(_0x5528a9+_0x29c6e7)*_0x1b3a48,_0x23342e[0xe]=(_0x35e8e6+_0x3833eb)*_0x19b6f6,_0x23342e[0xf]=0x1,_0x23342e;};function _0x4d7c69(){var _0x295eb7=new _0x1d1f9f(0x3);return _0x1d1f9f!=Float32Array&&(_0x295eb7[0x0]=0x0,_0x295eb7[0x1]=0x0,_0x295eb7[0x2]=0x0),_0x295eb7;}function _0x21a3b9(_0x558408,_0x34df78,_0x527718){var _0x15b0f4=new _0x1d1f9f(0x3);return _0x15b0f4[0x0]=_0x558408,_0x15b0f4[0x1]=_0x34df78,_0x15b0f4[0x2]=_0x527718,_0x15b0f4;}function _0x1a3314(_0x378744,_0xbd9ba4){return _0x378744[0x0]*_0xbd9ba4[0x0]+_0x378744[0x1]*_0xbd9ba4[0x1]+_0x378744[0x2]*_0xbd9ba4[0x2];}function _0x3d4060(_0x17fee6,_0x4a9566,_0x713dfe){var _0x3fee8d=_0x4a9566[0x0],_0x8cebec=_0x4a9566[0x1],_0x28e065=_0x4a9566[0x2],_0x38339=_0x713dfe[0x0],_0x22f745=_0x713dfe[0x1],_0x5a41a6=_0x713dfe[0x2];return _0x17fee6[0x0]=_0x8cebec*_0x5a41a6-_0x28e065*_0x22f745,_0x17fee6[0x1]=_0x28e065*_0x38339-_0x3fee8d*_0x5a41a6,_0x17fee6[0x2]=_0x3fee8d*_0x22f745-_0x8cebec*_0x38339,_0x17fee6;}var _0x3e3a1f,_0x395623=function(_0x388fd0){var _0x5b9529=_0x388fd0[0x0],_0xd338a0=_0x388fd0[0x1],_0x2aad30=_0x388fd0[0x2];return Math['hypot'](_0x5b9529,_0xd338a0,_0x2aad30);};_0x3e3a1f=_0x4d7c69(),!(function(){var _0x582aae,_0x79f026=(_0x582aae=new _0x1d1f9f(0x4),_0x1d1f9f!=Float32Array&&(_0x582aae[0x0]=0x0,_0x582aae[0x1]=0x0,_0x582aae[0x2]=0x0,_0x582aae[0x3]=0x0),_0x582aae);}());function _0x5b294c(){var _0x2c9a14=new _0x1d1f9f(0x4);return _0x1d1f9f!=Float32Array&&(_0x2c9a14[0x0]=0x0,_0x2c9a14[0x1]=0x0,_0x2c9a14[0x2]=0x0),_0x2c9a14[0x3]=0x1,_0x2c9a14;}function _0x600e23(_0x1ab4b1,_0x205eec,_0x3e3ad5,_0x5d3c36){var _0x13db1a,_0x48838a,_0x37104f,_0x20dc1e,_0x32d1b7,_0x11e631=_0x205eec[0x0],_0x41b90d=_0x205eec[0x1],_0x1ba7cf=_0x205eec[0x2],_0x4f337e=_0x205eec[0x3],_0x55bad6=_0x3e3ad5[0x0],_0x5b458b=_0x3e3ad5[0x1],_0x28612f=_0x3e3ad5[0x2],_0x1a2451=_0x3e3ad5[0x3];return(_0x48838a=_0x11e631*_0x55bad6+_0x41b90d*_0x5b458b+_0x1ba7cf*_0x28612f+_0x4f337e*_0x1a2451)<0x0&&(_0x48838a=-_0x48838a,_0x55bad6=-_0x55bad6,_0x5b458b=-_0x5b458b,_0x28612f=-_0x28612f,_0x1a2451=-_0x1a2451),0x1-_0x48838a>_0x2fd873?(_0x13db1a=Math['acos'](_0x48838a),_0x37104f=Math['sin'](_0x13db1a),_0x20dc1e=Math['sin']((0x1-_0x5d3c36)*_0x13db1a)/_0x37104f,_0x32d1b7=Math['sin'](_0x5d3c36*_0x13db1a)/_0x37104f):(_0x20dc1e=0x1-_0x5d3c36,_0x32d1b7=_0x5d3c36),_0x1ab4b1[0x0]=_0x20dc1e*_0x11e631+_0x32d1b7*_0x55bad6,_0x1ab4b1[0x1]=_0x20dc1e*_0x41b90d+_0x32d1b7*_0x5b458b,_0x1ab4b1[0x2]=_0x20dc1e*_0x1ba7cf+_0x32d1b7*_0x28612f,_0x1ab4b1[0x3]=_0x20dc1e*_0x4f337e+_0x32d1b7*_0x1a2451,_0x1ab4b1;}var _0xb87275=function(_0x3b20b1,_0x83271c){var _0x26a808=_0x83271c[0x0],_0x4ed1e4=_0x83271c[0x1],_0x3e9207=_0x83271c[0x2],_0x423be1=_0x83271c[0x3],_0x48404d=_0x26a808*_0x26a808+_0x4ed1e4*_0x4ed1e4+_0x3e9207*_0x3e9207+_0x423be1*_0x423be1;return _0x48404d>0x0&&(_0x48404d=0x1/Math['sqrt'](_0x48404d)),_0x3b20b1[0x0]=_0x26a808*_0x48404d,_0x3b20b1[0x1]=_0x4ed1e4*_0x48404d,_0x3b20b1[0x2]=_0x3e9207*_0x48404d,_0x3b20b1[0x3]=_0x423be1*_0x48404d,_0x3b20b1;},_0x45cf39,_0x4265e3,_0x42ab8a,_0x37c073,_0x27f373,_0x464119,_0x1db24d;_0x45cf39=_0x4d7c69(),_0x4265e3=_0x21a3b9(0x1,0x0,0x0),_0x42ab8a=_0x21a3b9(0x0,0x1,0x0),_0x37c073=_0x5b294c(),_0x27f373=_0x5b294c(),_0x464119=new _0x1d1f9f(0x9),_0x1d1f9f!=Float32Array&&(_0x464119[0x1]=0x0,_0x464119[0x2]=0x0,_0x464119[0x3]=0x0,_0x464119[0x5]=0x0,_0x464119[0x6]=0x0,_0x464119[0x7]=0x0),_0x464119[0x0]=0x1,_0x464119[0x4]=0x1,_0x464119[0x8]=0x1,_0x1db24d=_0x464119,!(function(){var _0x5e96d8=(function(){var _0x1f208b=new _0x1d1f9f(0x2);return _0x1d1f9f!=Float32Array&&(_0x1f208b[0x0]=0x0,_0x1f208b[0x1]=0x0),_0x1f208b;}());}());var _0x2e6310,_0x3b657c=(function(){function _0x5ee987(){_0x54580d(this,_0x5ee987),this['fFov']=0.785,this['fAspect']=0x1,this['fNear']=0.02,this['fFar']=0x3e8,this['fTheta']=0x0,this['fAlpha']=0x0,this['fBeta']=0x0,this['fScale']=0x1,this['bOrtho']=!0x1,this['matView']=_0x5d7ee2(),this['matProj']=_0x5d7ee2(),this['vecEye']=_0x21a3b9(0x0,0x0,0x0),this['vecCenter']=_0x21a3b9(0x0,0x0,0x64),this['vecUp']=_0x21a3b9(0x0,0x1,0x0);}return _0x4fd085(_0x5ee987,[{'key':'SetYaw','value':function(_0x1b1db8){this['fTheta']=_0x1b1db8;}},{'key':'GetYaw','value':function(){return this['fTheta'];}},{'key':'SetPitch','value':function(_0x23bed8){this['fAlpha']=_0x23bed8;}},{'key':'GetPitch','value':function(){return this['fAlpha'];}},{'key':'SetRoll','value':function(_0x483c88){this['fBeta']=_0x483c88;}},{'key':'GetRoll','value':function(){return this['fBeta'];}},{'key':'SetScale','value':function(_0x49b3da){this['fScale']=_0x49b3da;}},{'key':'GetScale','value':function(){return this['fScale'];}},{'key':'SetFov','value':function(_0x51f792){this['fFov']=_0x51f792;}},{'key':'SetAspect','value':function(_0x5abf13){this['fAspect']=_0x5abf13;}},{'key':'SetNear','value':function(_0x54349a){this['fNear']=_0x54349a;}},{'key':'SetFar','value':function(_0x1e3429){this['fFar']=_0x1e3429;}},{'key':'SetOrtho','value':function(_0x5f483d){this['bOrtho']=_0x5f483d;}},{'key':'UpdateCamera','value':function(_0x1bda20,_0x2990c0){if(!(_0x1bda20<=0x0||_0x2990c0<=0x0)){if(0x1==this['bOrtho'])_0x504680(this['matProj'],0x0,_0x1bda20,_0x2990c0,0x0,this['fNear'],this['fFar']);else{var _0x2fa5f4=this['fFov']/_0x530a52*0xb4;_0x4ceff8(this['matProj'],_0x2fa5f4,_0x1bda20/_0x2990c0,this['fNear'],this['fFar']);}this['vecEye']=_0x21a3b9(0x0,0x0,this['fScale']),this['vecCenter']=_0x21a3b9(0x0,0x0,0x0),this['vecUp']=_0x21a3b9(0x0,0x1,0x0);var _0x5b2a20=_0x21a3b9(0x1,0x0,0x0),_0x2cf9bf=_0x21a3b9(0x0,0x1,0x0),_0x4e957e=_0x21a3b9(0x0,0x0,0x1),_0x48156e=_0x5d7ee2();!function(_0x25ec01,_0x40b862,_0x56ef8c,_0x12ba71){var _0x50ab75,_0x19e466,_0x34f9a4,_0x215482,_0x31dc54,_0x21c876,_0x5e5bc4,_0x5c7e59,_0x573ea3,_0x47e710,_0x5bc565=_0x40b862[0x0],_0x398682=_0x40b862[0x1],_0x2390fd=_0x40b862[0x2],_0x2dc34a=_0x12ba71[0x0],_0x3d1e14=_0x12ba71[0x1],_0x21f20c=_0x12ba71[0x2],_0x9b62d=_0x56ef8c[0x0],_0x420fd0=_0x56ef8c[0x1],_0x3cc1aa=_0x56ef8c[0x2];Math['abs'](_0x5bc565-_0x9b62d)<_0x2fd873&&Math['abs'](_0x398682-_0x420fd0)<_0x2fd873&&Math['abs'](_0x2390fd-_0x3cc1aa)<_0x2fd873?function(_0x26b1cc){_0x26b1cc[0x0]=0x1,_0x26b1cc[0x1]=0x0,_0x26b1cc[0x2]=0x0,_0x26b1cc[0x3]=0x0,_0x26b1cc[0x4]=0x0,_0x26b1cc[0x5]=0x1,_0x26b1cc[0x6]=0x0,_0x26b1cc[0x7]=0x0,_0x26b1cc[0x8]=0x0,_0x26b1cc[0x9]=0x0,_0x26b1cc[0xa]=0x1,_0x26b1cc[0xb]=0x0,_0x26b1cc[0xc]=0x0,_0x26b1cc[0xd]=0x0,_0x26b1cc[0xe]=0x0,_0x26b1cc[0xf]=0x1;}(_0x25ec01):(_0x5e5bc4=_0x5bc565-_0x9b62d,_0x5c7e59=_0x398682-_0x420fd0,_0x573ea3=_0x2390fd-_0x3cc1aa,_0x50ab75=_0x3d1e14*(_0x573ea3*=_0x47e710=0x1/Math['hypot'](_0x5e5bc4,_0x5c7e59,_0x573ea3))-_0x21f20c*(_0x5c7e59*=_0x47e710),_0x19e466=_0x21f20c*(_0x5e5bc4*=_0x47e710)-_0x2dc34a*_0x573ea3,_0x34f9a4=_0x2dc34a*_0x5c7e59-_0x3d1e14*_0x5e5bc4,(_0x47e710=Math['hypot'](_0x50ab75,_0x19e466,_0x34f9a4))?(_0x50ab75*=_0x47e710=0x1/_0x47e710,_0x19e466*=_0x47e710,_0x34f9a4*=_0x47e710):(_0x50ab75=0x0,_0x19e466=0x0,_0x34f9a4=0x0),_0x215482=_0x5c7e59*_0x34f9a4-_0x573ea3*_0x19e466,_0x31dc54=_0x573ea3*_0x50ab75-_0x5e5bc4*_0x34f9a4,_0x21c876=_0x5e5bc4*_0x19e466-_0x5c7e59*_0x50ab75,(_0x47e710=Math['hypot'](_0x215482,_0x31dc54,_0x21c876))?(_0x215482*=_0x47e710=0x1/_0x47e710,_0x31dc54*=_0x47e710,_0x21c876*=_0x47e710):(_0x215482=0x0,_0x31dc54=0x0,_0x21c876=0x0),_0x25ec01[0x0]=_0x50ab75,_0x25ec01[0x1]=_0x215482,_0x25ec01[0x2]=_0x5e5bc4,_0x25ec01[0x3]=0x0,_0x25ec01[0x4]=_0x19e466,_0x25ec01[0x5]=_0x31dc54,_0x25ec01[0x6]=_0x5c7e59,_0x25ec01[0x7]=0x0,_0x25ec01[0x8]=_0x34f9a4,_0x25ec01[0x9]=_0x21c876,_0x25ec01[0xa]=_0x573ea3,_0x25ec01[0xb]=0x0,_0x25ec01[0xc]=-(_0x50ab75*_0x5bc565+_0x19e466*_0x398682+_0x34f9a4*_0x2390fd),_0x25ec01[0xd]=-(_0x215482*_0x5bc565+_0x31dc54*_0x398682+_0x21c876*_0x2390fd),_0x25ec01[0xe]=-(_0x5e5bc4*_0x5bc565+_0x5c7e59*_0x398682+_0x573ea3*_0x2390fd),_0x25ec01[0xf]=0x1);}(_0x48156e,this['vecEye'],this['vecCenter'],this['vecUp']);var _0x14046d=_0x5d7ee2(),_0x18395f=_0x5d7ee2(),_0x549d74=_0x5d7ee2(),_0x15744a=_0x5d7ee2();_0x3405d1(_0x18395f,_0x14046d,-this['fAlpha'],_0x5b2a20),_0x3405d1(_0x549d74,_0x18395f,-this['fTheta'],_0x2cf9bf),_0x3405d1(_0x15744a,_0x549d74,-this['fBeta'],_0x4e957e),_0x5ec25a(this['matView'],_0x48156e,_0x15744a);}}},{'key':'GetView','value':function(){return this['matView'];}},{'key':'GetProj','value':function(){return this['matProj'];}}]),_0x5ee987;}()),_0x453e55=(function(){function _0x2425ba(){_0x54580d(this,_0x2425ba),this['canvas']=null,this['ctx']=null,this['videoShaderProgram']=0x0,this['vertexPosBuffer']=0x0,this['texturePosBuffer']=0x0,this['pFrameData']=null,this['frameDisplayWidth']=0x0,this['frameDisplayHeight']=0x0,this['onlySupportedWebGL1']=!0x1,this['bAntialias']=!0x1,this['bRecreateTex']=!0x0,this['nSurfaceTexture']=[],this['nMaxPointNum']=0x0,this['pLinePosVertices']=null,this['pLineClrVertices']=null,this['glLinePosBuffer']=0x0,this['glLineClrBuffer']=0x0,this['nLineTriangleNum']=0x0,this['nLineShaderProgram']=0x0,this['pFillBlockPosVertices']=null,this['pFillBlockClrVertices']=null,this['nMaxFillBlockTriNum']=0x0,this['glBlockPosBuffer']=0x0,this['glBlockClrBuffer']=0x0,this['nBlockShaderProgram']=0x0,this['nDrawFontWidth']=0x0,this['nDrawFontHeight']=0x0,this['nFontColorTexture']=0x0,this['pFontColorBuffer']=0x0,this['nFontShaderProgram']=0x0,this['nFontBGNum']=0x0,this['pstFontBGLines']=[],this['nImageShaderProgram']=0x0,this['pImagePosVertices']=null,this['pImageClrVertices']=null,this['glImagePosBuffer']=0x0,this['glImageClrBuffer']=0x0,this['nImageColorTexture']=null,this['nDrawImageWidth']=0x0,this['nDrawImageHeight']=0x0,this['nImageColorTextures']=[],this['pFishParamManager']=null,this['enDisplayEffect']=_0x186ff9['SR_DE_NULL'],this['nFECPort']=_0x3cf544,this['bIsCapturing']=!0x1,this['pSemiSpherePos']=null,this['pSemiSphereTex']=null,this['nSemiSpherePosNum']=0x0,this['nSemiSpherePosSize']=0x0,this['nSemiSphereTexSize']=0x0,this['pCylinderPos']=null,this['pCylinderTex']=null,this['nCylinderPosNum']=0x0,this['nCylinderPosSize']=0x0,this['nCylinderTexSize']=0x0,this['fCylinderHeight']=0x0,this['fCylinderRadius']=0x0,this['pArcSpherePos']=null,this['pArcSphereTex']=null,this['nArcSpherePosNum']=0x0,this['nArcSpherePosSize']=0x0,this['nArcSphereTexSize']=0x0,this['fImageWidth']=0x1,this['fImageHeight']=0x1,this['fTexCenterX']=0.5,this['fTexCenterY']=0.5,this['fTexRadius']=0.5,this['b3DPort']=!0x1,this['pCamera']=null,this['fRotateX']=0x0,this['fRotateY']=0x0,this['fScale']=0x0,this['fRotateLimitX']=0x0,this['fRotateLimitY']=0x0,this['pfuncCBIn']=null,this['pfuncCBOut']=null,this['pUserIn']=null,this['pUserOut']=null,this['bCullBack']=!0x1,this['fSrcUseLeft']=0x0,this['fSrcUseRight']=0x1,this['fSrcUseTop']=0x0,this['fSrcUseBottom']=0x1,this['fDstUseLeft']=0x0,this['fDstUseRight']=0x1,this['fDstUseTop']=0x0,this['fDstUseBottom']=0x1,this['enPixelFormat']=_0x343a24,this['nTextureNum']=0x0,this['textCanvas']=null,this['textCanvasCtx']=null,this['nCaptureWidth']=0x0,this['nCaptureHeight']=0x0,this['nCaptureRTTex']=0x0,this['nCaptureFBO']=0x0,this['nCaptureFBOWidth']=0x0,this['nCaptureFBOHeight']=0x0,this['nCaptureDepthbuffer']=0x0,this['bCaptureResInit']=!0x1,this['fBrightness']=0x0,this['fHue']=0x0,this['fSaturation']=0x0,this['fContrast']=0x0,this['fSharpness']=0x0,this['nPostProc']=0x0;}return _0x4fd085(_0x2425ba,[{'key':'CompileProgram','value':function(_0x298713,_0xb12ba2){var _0x593a9b=this['ctx'];if(null==_0x593a9b||null==_0x298713||null==_0xb12ba2)return-0x1;var _0x240e10=_0x593a9b['createShader'](_0x593a9b['VERTEX_SHADER']);if(_0x593a9b['shaderSource'](_0x240e10,_0x298713),_0x593a9b['compileShader'](_0x240e10),!_0x593a9b['getShaderParameter'](_0x240e10,_0x593a9b['COMPILE_STATUS']))return console['log']('Vertex\\x20shader\\x20failed\\x20to\\x20compile:\\x20'+_0x593a9b['getShaderInfoLog'](_0x240e10)),-0x1;var _0x4a47df=_0x593a9b['createShader'](_0x593a9b['FRAGMENT_SHADER']);if(_0x593a9b['shaderSource'](_0x4a47df,_0xb12ba2),_0x593a9b['compileShader'](_0x4a47df),!_0x593a9b['getShaderParameter'](_0x4a47df,_0x593a9b['COMPILE_STATUS']))return console['log']('Fragment\\x20shader\\x20failed\\x20to\\x20compile:\\x20'+_0x593a9b['getShaderInfoLog'](_0x4a47df)),-0x1;var _0x213125=_0x593a9b['createProgram']();return _0x593a9b['attachShader'](_0x213125,_0x240e10),_0x593a9b['attachShader'](_0x213125,_0x4a47df),_0x593a9b['linkProgram'](_0x213125),_0x593a9b['getProgramParameter'](_0x213125,_0x593a9b['LINK_STATUS'])?(_0x593a9b['deleteShader'](_0x240e10),_0x593a9b['deleteShader'](_0x4a47df),_0x213125):(console['log']('Program\\x20failed\\x20to\\x20compile:\\x20'+_0x593a9b['getProgramInfoLog'](_0x213125)),-0x1);}},{'key':'SR_Init','value':function(_0x446426,_0x117296){if(null==_0x446426)return _0x31ddcf;if(this['canvas']=_0x446426,this['ctx']=this['canvas']['getContext']('webgl2'),this['ctx']||(this['ctx']=this['canvas']['getContext']('webgl')||this['canvas']['getContext']('experimental-webgl'),this['onlySupportedWebGL1']=!0x0,console['log']('only\\x20support\\x20webgl1')),!this['ctx'])return console['log']('your\\x20browser\\x20does\\x20not\\x20support\\x20WebGL'),_0x4fea1b;if(_0x117296==_0x532920||_0x117296==_0x3840be)return _0x86aef9;switch(_0x117296){case _0x58bd8b:case _0x264b64:this['nTextureNum']=0x3;break;case _0x532920:case _0x3840be:this['nTextureNum']=0x2;break;case _0xa01ff6:this['nTextureNum']=0x1;break;default:return _0x86aef9;}return this['enPixelFormat']=_0x117296,_0xa87ede;}},{'key':'SR_Draw','value':function(_0x1eea6a,_0x54c230,_0x533ad6,_0x39828b,_0x130cba){if(null==this['ctx'])return _0x520965;var _0x196b60=this['nTextureNum'];if(null==_0x1eea6a||_0x54c230<=0x0||_0x533ad6<=0x0)return _0x31ddcf;if(0x0==this['videoShaderProgram']||0x0==this['vertexPosBuffer']||0x0==this['texturePosBuffer'])return _0x520965;var _0x570392=_0xa87ede;if(_0xa01ff6==this['enPixelFormat'])this['frameDisplayWidth']=_0x54c230,this['frameDisplayHeight']=_0x533ad6;else{if(_0x570392=this['_ResizeFrameData'](_0x1eea6a,_0x54c230,_0x533ad6,_0x39828b),_0xa87ede!=_0x570392)return _0x570392;}if(this['ctx']['useProgram'](this['videoShaderProgram']),0x1==this['bRecreateTex']){if(this['enPixelFormat']==_0xa01ff6){if(0x0!=this['nSurfaceTexture'][0x0]){var _0x307c8c=this['nSurfaceTexture'][0x0];this['ctx']['deleteTexture'](_0x307c8c),this['nSurfaceTexture'][0x0]=0x0;}var _0xfa0c54=this['ctx']['createTexture']();if(_0xfa0c54<=0x0)return _0x4d26c0;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],_0xfa0c54),0x1==this['bAntialias']?this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR_MIPMAP_NEAREST']):this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),this['nSurfaceTexture'][0x0]=_0xfa0c54;}else{if(this['enPixelFormat']==_0x58bd8b||this['enPixelFormat']==_0x264b64)for(var _0x3d8d4b=0x0;_0x3d8d4b<_0x196b60;_0x3d8d4b++){if(0x0!=this['nSurfaceTexture'][_0x3d8d4b]){var _0xe89fbf=this['nSurfaceTexture'][_0x3d8d4b];this['ctx']['deleteTexture'](_0xe89fbf),this['nSurfaceTexture'][_0x3d8d4b]=0x0;}var _0x44ac7b=this['ctx']['createTexture']();if(_0x44ac7b<=0x0)return _0x4d26c0;if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],_0x44ac7b),0x1==this['bAntialias']?this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR_MIPMAP_NEAREST']):this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),0x0==_0x3d8d4b){var _0xef5d37=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Ytexture');this['ctx']['uniform1i'](_0xef5d37,0x0);}else{if(0x1==_0x3d8d4b){var _0x5d982f=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Utexture');this['ctx']['uniform1i'](_0x5d982f,0x1);}else{if(0x2==_0x3d8d4b){var _0x3ed5dc=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Vtexture');this['ctx']['uniform1i'](_0x3ed5dc,0x2);}}}this['nSurfaceTexture'][_0x3d8d4b]=_0x44ac7b,this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],null);}}this['bRecreateTex']=!0x1;}this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x1b8d0c=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'xy');if(_0x1b8d0c<0x0)return _0x4d26c0;this['ctx']['vertexAttribPointer'](_0x1b8d0c,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x1b8d0c),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x16bf1a=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'uv');if(_0x16bf1a<0x0)return _0x4d26c0;this['ctx']['vertexAttribPointer'](_0x16bf1a,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x16bf1a),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null);var _0x2a1b79=this['enDisplayEffect'],_0x5377d3=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCapture');if(_0x5377d3<=0x0)return _0x4d26c0;this['ctx']['uniform1i'](_0x5377d3,0x0);var _0x24e3f9=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'nPostProc');switch(this['ctx']['uniform1i'](_0x24e3f9,this['nPostProc']),0x1==this['nPostProc']&&(_0x570392=this['_SetImagePostProcess']()),_0x2a1b79){case _0x186ff9['SR_DE_NULL']:break;case _0x186ff9['SR_DE_FISH_ORIGINAL']:case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:case _0x186ff9['SR_DE_FISH_PTZ_WALL']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:if(null==this['pFishParamManager'])return _0x520965;var _0x2bdc46={};if(_0x570392=this['pFishParamManager']['GetRenderParam'](this['nFECPort'],_0x2bdc46),_0xa87ede!=_0x570392)return _0x570392;if(_0x186ff9['SR_DE_FISH_ORIGINAL']==_0x2a1b79){var _0x5156fb=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bBlack');if(_0x5156fb<=0x0)return _0x4d26c0;this['ctx']['uniform1i'](_0x5156fb,_0x2bdc46['bBlack']);var _0x314d35=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCut');if(_0x314d35<=0x0)return _0x4d26c0;this['ctx']['uniform1i'](_0x314d35,_0x2bdc46['bCut']);}if(_0x186ff9['SR_DE_FISH_PTZ_CEILING']==_0x2a1b79||_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==_0x2a1b79||_0x186ff9['SR_DE_FISH_PTZ_WALL']==_0x2a1b79){var _0x124160=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleCos');if(_0x124160<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x124160,_0x2bdc46['fCosH']);var _0x306b85=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleSin');if(_0x306b85<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x306b85,_0x2bdc46['fSinH']);var _0x1bc35c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleCos');if(_0x1bc35c<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x1bc35c,_0x2bdc46['fCosV']);var _0x4c60dc=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleSin');if(_0x4c60dc<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x4c60dc,_0x2bdc46['fSinV']);var _0x136f7b=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fZoom');if(_0x136f7b<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x136f7b,_0x2bdc46['fZoom']);}if(_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']==_0x2a1b79||_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']==_0x2a1b79||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']==_0x2a1b79||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']==_0x2a1b79){var _0x517882=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fAngle');if(_0x517882<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x517882,_0x2bdc46['fAngle']);}var _0x3d42d7=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX1');if(_0x3d42d7<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x3d42d7,_0x2bdc46['fRXLeft']);var _0x5b37ec=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX2');if(_0x5b37ec<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x5b37ec,_0x2bdc46['fRXRight']);var _0x407ff2=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY1');if(_0x407ff2<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x407ff2,_0x2bdc46['fRYTop']);var _0x1c8e20=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY2');if(_0x1c8e20<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x1c8e20,_0x2bdc46['fRYBottom']);break;case _0x186ff9['SR_DE_FISH_SEMISPHERE']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](3.14-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['canvas']['width'],this['canvas']['height']);var _0x489295=this['pCamera']['GetView'](),_0xac09cc=this['pCamera']['GetProj'](),_0x5a6fea=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x5a6fea<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x5a6fea,!0x1,_0x489295);var _0x37770e=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x37770e<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x37770e,!0x1,_0xac09cc);break;case _0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['canvas']['width'],this['canvas']['height']);var _0x4082e3=this['pCamera']['GetView'](),_0x24ca6f=this['pCamera']['GetProj'](),_0x3b3b00=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x3b3b00<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x3b3b00,!0x1,_0x4082e3);var _0x87ffb2=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x87ffb2<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x87ffb2,!0x1,_0x24ca6f);break;default:return _0x86aef9;}if(this['canvas']['width']<=0x0||this['canvas']['height']<=0x0)return _0x4fea1b;if(null!=_0x130cba&&(_0x570392=this['SR_SetDisplayRect'](_0x130cba['fx'],_0x130cba['fy'],_0x130cba['width'],_0x130cba['height'],_0x206403))!=_0xa87ede)return _0x570392;if(null!=_0x130cba?this['ctx']['viewport'](this['canvas']['width']*this['fDstUseLeft'],this['canvas']['height']*this['fDstUseTop'],this['canvas']['width']*this['fDstUseRight'],this['canvas']['height']*this['fDstUseBottom']):(this['ctx']['viewport'](0x0,0x0,this['canvas']['width'],this['canvas']['height']),this['ctx']['clearColor'](0x0,0x0,0x0,0x1),this['ctx']['clear'](this['ctx']['COLOR_BUFFER_BIT']|this['ctx']['DEPTH_BUFFER_BIT'])),this['b3DPort']&&(this['ctx']['enable'](this['ctx']['DEPTH_TEST']),this['ctx']['depthFunc'](this['ctx']['LESS']),this['ctx']['depthMask'](!0x0),0x1==this['bCullBack']?this['ctx']['enable'](this['ctx']['CULL_FACE']):this['ctx']['disable'](this['ctx']['CULL_FACE'])),this['enPixelFormat']==_0xa01ff6)this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],_0x54c230,_0x533ad6,0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x1eea6a),0x1==this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']);else{if(this['enPixelFormat']==_0x58bd8b){var _0x166fc9=this['pFrameData']['subarray'](0x0,_0x54c230*_0x533ad6);this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x54c230,_0x533ad6,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x166fc9);var _0x3b1a83=this['pFrameData']['subarray'](_0x54c230*_0x533ad6+_0x54c230/0x2*_0x533ad6/0x2,_0x54c230*_0x533ad6+_0x54c230/0x2*_0x533ad6/0x2+_0x54c230/0x2*_0x533ad6/0x2);this['ctx']['activeTexture'](this['ctx']['TEXTURE1']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x1]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x54c230/0x2,_0x533ad6/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x3b1a83);var _0x402c77=this['pFrameData']['subarray'](_0x54c230*_0x533ad6,_0x54c230*_0x533ad6+_0x54c230/0x2*_0x533ad6/0x2);this['ctx']['activeTexture'](this['ctx']['TEXTURE2']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x2]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x54c230/0x2,_0x533ad6/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x402c77),0x1==this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']),_0x166fc9=null,_0x3b1a83=null,_0x402c77=null;}else this['enPixelFormat']==_0x264b64&&(_0x166fc9=this['pFrameData']['subarray'](0x0,_0x54c230*_0x533ad6),(this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x54c230,_0x533ad6,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x166fc9)),_0x3b1a83=this['pFrameData']['subarray'](_0x54c230*_0x533ad6,_0x54c230*_0x533ad6+_0x54c230/0x2*_0x533ad6/0x2),(this['ctx']['activeTexture'](this['ctx']['TEXTURE1']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x1]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x54c230/0x2,_0x533ad6/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x3b1a83)),_0x402c77=this['pFrameData']['subarray'](_0x54c230*_0x533ad6+_0x54c230/0x2*_0x533ad6/0x2,_0x54c230*_0x533ad6+_0x54c230/0x2*_0x533ad6/0x2+_0x54c230/0x2*_0x533ad6/0x2),(this['ctx']['activeTexture'](this['ctx']['TEXTURE2']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x2]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x54c230/0x2,_0x533ad6/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x402c77),0x1==this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']),_0x166fc9=null,_0x3b1a83=null,_0x402c77=null));}if(this['onlySupportedWebGL1']||this['ctx']['clearBufferfi'](this['ctx']['DEPTH_STENCIL'],0x0,0x1,0x0),0x0==this['b3DPort'])this['ctx']['drawArrays'](this['ctx']['TRIANGLE_FAN'],0x0,0x4);else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_SEMISPHERE']){if(this['nSemiSpherePosNum']<=0x0)return _0x520965;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nSemiSpherePosNum']);}else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']){if(this['nCylinderPosNum']<=0x0)return _0x520965;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nCylinderPosNum']);}else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){if(this['nArcSpherePosNum']<=0x0)return _0x520965;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nArcSpherePosNum']);}}}}if(this['ctx']['useProgram'](null),null!=this['pFishParamManager']){var _0x2c1465=this['pFishParamManager']['GetWndPort']();_0x2c1465!=_0x3cf544&&_0x2c1465==this['nFECPort']&&this['DrawPTZLines']();}return null!=this['pfuncCBIn']&&this['pfuncCBIn'](this['pUserIn']),null!=this['pfuncCBOut']&&this['pfuncCBOut'](this['pUserOut']),_0xa87ede;}},{'key':'DrawPTZLines','value':function(){if(null==this['pFishParamManager'])return _0x520965;var _0xfb6bfe=this['pFishParamManager']['GetPTZDisplayMode']();if(_0xfb6bfe==_0x495db0||_0xfb6bfe==_0x150ab7){for(var _0x33b298=0x0,_0x4499b9={'fR':0x0,'fG':0x0,'fB':0x0,'fA':0x0},_0x594c33=_0xa87ede,_0x4b01f7=0x0;_0x4b01f7<_0x379995;++_0x4b01f7)if(0x0!=this['pFishParamManager']['IsPortAllocated'](_0x4b01f7)&&(_0x33b298=0x2,_0x594c33=this['pFishParamManager']['GetPTZColor'](_0x4b01f7,_0x4499b9),_0xa87ede==_0x594c33)){0x1==this['pFishParamManager']['IsPTZSelected'](_0x4b01f7)&&(_0x33b298+=0x1);var _0x23fea9=this['pFishParamManager']['GetWndPort']();if(_0x4b01f7!=_0x23fea9&&_0x495db0==_0xfb6bfe){if(_0x186ff9['SR_DE_FISH_ORIGINAL']==this['pFishParamManager']['GetDisplayEffect'](_0x23fea9)){var _0x327590={};if(_0x594c33=this['pFishParamManager']['GetPTZPoints'](_0x4b01f7,_0x327590,_0x495db0),_0xa87ede!=_0x594c33)continue;if(null!=_0x327590['pstPoints']&&0x0!=_0x327590['nPointNum']&&(_0x594c33=this['SR_DrawLines'](_0x327590['pstPoints'],_0x327590['nPointNum'],!0x0,_0x4499b9,_0x33b298,!0x1),_0xa87ede!=_0x594c33))continue;}else{var _0x19796d;if((_0x19796d=this['pFishParamManager']['GetPTZFragmentNum'](_0x4b01f7))<=0x0)continue;for(var _0x3eeec2=0x0;_0x3eeec2<_0x19796d;_0x3eeec2++){var _0x4ab5d3={};this['pFishParamManager']['GetPTZFragmentPoints'](_0x4b01f7,_0x4ab5d3,_0x3eeec2),null!=_0x4ab5d3['pstPoints']&&0x0!=_0x4ab5d3['nPointNum']&&this['SR_DrawLines'](_0x4ab5d3['pstPoints'],_0x4ab5d3['nPointNum'],!0x1,_0x4499b9,_0x33b298,!0x1);}}}else{if(_0x4b01f7!=_0x23fea9&&_0x150ab7==_0xfb6bfe){var _0x50bab0={};if(_0x594c33=this['pFishParamManager']['GetPTZPoints'](_0x4b01f7,_0x50bab0,_0x150ab7),_0xa87ede!=_0x594c33)continue;if(null!=_0x50bab0['pstPoints']&&0x0!=_0x50bab0['nPointNum']&&(_0x594c33=this['SR_DrawLines'](_0x50bab0['pstPoints'],_0x50bab0['nPointNum'],!0x0,_0x4499b9,_0x33b298,!0x1),_0xa87ede!=_0x594c33))continue;}}}}return _0xa87ede;}},{'key':'DrawFillBlock','value':function(_0x5db47d,_0x17ee38,_0x3a5c7f){if(null==this['ctx'])return _0x520965;if(null==_0x5db47d||_0x17ee38<0x1||_0x3a5c7f<0x2)return _0x31ddcf;for(var _0x3175a2=0x0,_0xb41871=0x0;_0xb41871<_0x17ee38;++_0xb41871){if(null==_0x5db47d[_0xb41871]['pstPoints']||_0x5db47d[_0xb41871]['nPointNum']<0x3||!0x0!==_0x5db47d[_0xb41871]['bLoop']||null==_0x5db47d[_0xb41871]['pstColor'])return _0x31ddcf;_0x3175a2+=_0x5db47d[_0xb41871]['nPointNum'];}if(_0x3175a2!==_0x3a5c7f)return _0x31ddcf;var _0x55a3ec=_0x3a5c7f-0x2*_0x17ee38;if(_0x55a3ec>this['nMaxFillBlockTriNum']&&(this['pFillBlockPosVertices']=null,this['pFillBlockClrVertices']=null,this['nMaxFillBlockTriNum']=_0x55a3ec),0x0==this['glBlockPosBuffer']&&(this['glBlockPosBuffer']=this['ctx']['createBuffer'](),0x0==this['glBlockPosBuffer']))return _0x4d26c0;if(0x0==this['glBlockClrBuffer']&&(this['glBlockClrBuffer']=this['ctx']['createBuffer'](),0x0==this['glBlockClrBuffer']))return _0x4d26c0;if(null==this['pFillBlockPosVertices']){var _0x5a946e=this['nMaxFillBlockTriNum'];if(this['pFillBlockPosVertices']=new Float32Array(0x3*_0x5a946e*0x3),null==this['pFillBlockPosVertices'])return _0x3d12cf;}if(this['pFillBlockPosVertices']['fill'](0x0),null==this['pFillBlockClrVertices']){var _0x11b260=this['nMaxFillBlockTriNum'];if(this['pFillBlockClrVertices']=new Float32Array(0x4*_0x11b260*0x3),null==this['pFillBlockClrVertices'])return _0x3d12cf;}this['pFillBlockClrVertices']['fill'](0x0);for(var _0x5c54b8=0x0,_0x419f68=0x0,_0x513399=0x0,_0xa7cd13=null,_0x2758c4=null,_0x490836={},_0x5f517a={},_0xabaeff={},_0x5b4ff3=0x0;_0x5b4ff3<_0x17ee38;++_0x5b4ff3){_0x513399=_0x5db47d[_0x5b4ff3]['nPointNum'],_0xa7cd13=_0x5db47d[_0x5b4ff3]['pstPoints'],_0x2758c4=_0x5db47d[_0x5b4ff3]['pstColor'],_0x490836['fX']=(_0xa7cd13[0x0]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x490836['fX']=this['fDstUseLeft']+_0x490836['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0x490836['fX']=0x2*_0x490836['fX']-0x1,_0x490836['fY']=(_0xa7cd13[0x0]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x490836['fY']=this['fDstUseTop']+_0x490836['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0x490836['fY']=0x1-0x2*_0x490836['fY'];for(var _0x5c8d08=0x1;_0x5c8d08<_0x513399-0x1;_0x5c8d08++)_0x5f517a['fX']=(_0xa7cd13[_0x5c8d08]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x5f517a['fX']=this['fDstUseLeft']+_0x5f517a['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0x5f517a['fX']=0x2*_0x5f517a['fX']-0x1,_0x5f517a['fY']=(_0xa7cd13[_0x5c8d08]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x5f517a['fY']=this['fDstUseTop']+_0x5f517a['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0x5f517a['fY']=0x1-0x2*_0x5f517a['fY'],_0xabaeff['fX']=(_0xa7cd13[_0x5c8d08+0x1]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0xabaeff['fX']=this['fDstUseLeft']+_0xabaeff['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0xabaeff['fX']=0x2*_0xabaeff['fX']-0x1,_0xabaeff['fY']=(_0xa7cd13[_0x5c8d08+0x1]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0xabaeff['fY']=this['fDstUseTop']+_0xabaeff['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0xabaeff['fY']=0x1-0x2*_0xabaeff['fY'],this['pFillBlockPosVertices'][_0x5c54b8++]=_0x490836['fX'],this['pFillBlockPosVertices'][_0x5c54b8++]=_0x490836['fY'],this['pFillBlockPosVertices'][_0x5c54b8++]=0x0,this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fR'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fG'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fB'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fA'],this['pFillBlockPosVertices'][_0x5c54b8++]=_0x5f517a['fX'],this['pFillBlockPosVertices'][_0x5c54b8++]=_0x5f517a['fY'],this['pFillBlockPosVertices'][_0x5c54b8++]=0x0,this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fR'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fG'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fB'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fA'],this['pFillBlockPosVertices'][_0x5c54b8++]=_0xabaeff['fX'],this['pFillBlockPosVertices'][_0x5c54b8++]=_0xabaeff['fY'],this['pFillBlockPosVertices'][_0x5c54b8++]=0x0,this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fR'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fG'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fB'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fA'];}if(0x0==this['nBlockShaderProgram']&&(this['nBlockShaderProgram']=this['CompileProgram'](_0x48a033,_0x283927),this['nBlockShaderProgram']<=0x0))return _0x4d26c0;this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFunc'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockPosBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pFillBlockPosVertices'],this['ctx']['STATIC_DRAW']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockClrBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pFillBlockClrVertices'],this['ctx']['STATIC_DRAW']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['useProgram'](this['nBlockShaderProgram']);var _0x55229f=this['ctx']['getUniformLocation'](this['nLineShaderProgram'],'bCapture');if(_0x55229f<=0x0)return _0x4d26c0;0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x55229f,0x1):this['ctx']['uniform1i'](_0x55229f,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockPosBuffer']);var _0x5d25b6=this['ctx']['getAttribLocation'](this['nBlockShaderProgram'],'position');this['ctx']['enableVertexAttribArray'](_0x5d25b6),this['ctx']['vertexAttribPointer'](_0x5d25b6,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockClrBuffer']);var _0x59f897=this['ctx']['getAttribLocation'](this['nBlockShaderProgram'],'color');return this['ctx']['enableVertexAttribArray'](_0x59f897),this['ctx']['vertexAttribPointer'](_0x59f897,0x4,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,0x3*_0x55a3ec),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),_0xa87ede;}},{'key':'ComputeLinePoint','value':function(_0x511066,_0x1d3b6f){if(null==_0x511066||_0x1d3b6f<0x1)return _0x31ddcf;if(null==this['pLinePosVertices']||null==this['pLineClrVertices'])return _0x520965;var _0xea88ad=0x0,_0x574a97=0x0;0x1==this['bIsCapturing']?(_0xea88ad=(this['fDstUseRight']-this['fDstUseLeft'])*this['nCaptureWidth'],_0x574a97=(this['fDstUseBottom']-this['fDstUseTop'])*this['nCaptureHeight']):(_0xea88ad=(this['fDstUseRight']-this['fDstUseLeft'])*this['canvas']['width'],_0x574a97=(this['fDstUseBottom']-this['fDstUseTop'])*this['canvas']['height']);for(var _0x347d33=0x0,_0x2b608b=0x0,_0x47870b=0x0,_0x278ab8=0x0,_0x28d930=0x0,_0x4592f5=0x0,_0x3b9b4c=0x0,_0xd4ce8f=0x0,_0xdb8723=0x0,_0xd5d75a=0x0,_0x3cc192=0x0,_0x59d8e0=0x0;_0x59d8e0<_0x1d3b6f;++_0x59d8e0){var _0x3e11c9=[];if(!((_0x3cc192=_0x511066[_0x59d8e0]['nPointNum'])<=0x0)){for(var _0x247d88=0x0;_0x247d88<_0x3cc192;++_0x247d88){var _0x3d4d29={};_0x3d4d29['fX']=(_0x511066[_0x59d8e0]['pstPoints'][_0x247d88]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x3d4d29['fX']=this['fDstUseLeft']+_0x3d4d29['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0x3d4d29['fX']=0x2*_0x3d4d29['fX']-0x1,_0x3d4d29['fY']=(_0x511066[_0x59d8e0]['pstPoints'][_0x247d88]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x3d4d29['fY']=this['fDstUseTop']+_0x3d4d29['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0x3d4d29['fY']=0x1-0x2*_0x3d4d29['fY'],_0x3e11c9['push'](_0x3d4d29);}if(this['canvas']['width']<=0x0||this['canvas']['height']<=0x0)return _0x4fea1b;if(_0x4592f5=3.5*_0x511066[_0x59d8e0]['nLineWidth']/_0xea88ad,_0x3b9b4c=3.5*_0x511066[_0x59d8e0]['nLineWidth']/_0x574a97,_0x4592f5<=0x0||_0x3b9b4c<=0x0)return _0x31ddcf;var _0x419dfa=_0x511066[_0x59d8e0]['pstColor'];if(null==_0x419dfa||null==_0x419dfa)return _0x31ddcf;for(var _0x2ae122=0x0;_0x2ae122<_0x3cc192-0x1;++_0x2ae122)_0x2b608b=_0x3e11c9[_0x2ae122+0x1]['fX']-_0x3e11c9[_0x2ae122]['fX'],_0x47870b=_0x3e11c9[_0x2ae122+0x1]['fY']-_0x3e11c9[_0x2ae122]['fY'],_0x347d33=Math['sqrt'](_0x2b608b*_0x2b608b+_0x47870b*_0x47870b),Math['abs'](_0x347d33-0x0)<0.000001||(_0x278ab8=-_0x4592f5*_0x47870b/_0x347d33/0x2,_0x28d930=_0x3b9b4c*_0x2b608b/_0x347d33/0x2,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122]['fX']+_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122]['fY']+_0x28d930,this['pLinePosVertices'][_0xdb8723++]=-0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122+0x1]['fX']-_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122+0x1]['fY']-_0x28d930,this['pLinePosVertices'][_0xdb8723++]=0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122]['fX']-_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122]['fY']-_0x28d930,this['pLinePosVertices'][_0xdb8723++]=0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122]['fX']+_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122]['fY']+_0x28d930,this['pLinePosVertices'][_0xdb8723++]=-0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122+0x1]['fX']+_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122+0x1]['fY']+_0x28d930,this['pLinePosVertices'][_0xdb8723++]=-0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122+0x1]['fX']-_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122+0x1]['fY']-_0x28d930,this['pLinePosVertices'][_0xdb8723++]=0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],_0xd4ce8f+=0x2);0x1==_0x511066[_0x59d8e0]['bLoop']&&0x2<_0x3cc192&&(_0x2b608b=_0x3e11c9[_0x3cc192-0x1]['fX']-_0x3e11c9[0x0]['fX'],_0x47870b=_0x3e11c9[_0x3cc192-0x1]['fY']-_0x3e11c9[0x0]['fY'],_0x347d33=Math['sqrt'](_0x2b608b*_0x2b608b+_0x47870b*_0x47870b),Math['abs'](_0x347d33-0x0)>0.000001&&(_0x278ab8=-_0x4592f5*_0x47870b/_0x347d33/0x2,_0x28d930=_0x3b9b4c*_0x2b608b/_0x347d33/0x2,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[0x0]['fX']+_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[0x0]['fY']+_0x28d930,this['pLinePosVertices'][_0xdb8723++]=-0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x3cc192-0x1]['fX']-_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x3cc192-0x1]['fY']-_0x28d930,this['pLinePosVertices'][_0xdb8723++]=0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[0x0]['fX']-_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[0x0]['fY']-_0x28d930,this['pLinePosVertices'][_0xdb8723++]=0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[0x0]['fX']+_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[0x0]['fY']+_0x28d930,this['pLinePosVertices'][_0xdb8723++]=-0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x3cc192-0x1]['fX']+_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x3cc192-0x1]['fY']+_0x28d930,this['pLinePosVertices'][_0xdb8723++]=-0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x3cc192-0x1]['fX']-_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x3cc192-0x1]['fY']-_0x28d930,this['pLinePosVertices'][_0xdb8723++]=0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],_0xd4ce8f+=0x2));}}return 0x0==_0xd4ce8f?_0x31ddcf:(this['nLineTriangleNum']=_0xd4ce8f,_0xa87ede);}},{'key':'SR_DrawLines','value':function(_0xc257fa,_0x5e3a45,_0x5782f2,_0x385965,_0x4f81fe,_0x20842c){var _0x34f8e7=[],_0x36c991={};return _0x36c991['pstPoints']=_0xc257fa,_0x36c991['nPointNum']=_0x5e3a45,_0x36c991['bLoop']=_0x5782f2,_0x36c991['pstColor']=_0x385965,_0x36c991['nLineWidth']=_0x4f81fe,_0x34f8e7['push'](_0x36c991),this['SR_DrawLinesEx'](_0x34f8e7,0x1,_0x5e3a45,_0x20842c);}},{'key':'SR_DrawLinesEx','value':function(_0x5a7518,_0x168ef4,_0x387f93,_0x2a560f){if(null==this['ctx'])return _0x520965;if(null==_0x5a7518||_0x168ef4<0x1||_0x387f93<0x2)return _0x31ddcf;if(0x0==this['nLineShaderProgram']){var _0x2c6b24=this['CompileProgram'](_0x48a033,_0x283927);if(_0x2c6b24<=0x0)return _0x4d26c0;this['nLineShaderProgram']=_0x2c6b24;}if(0x1==_0x2a560f)return this['DrawFillBlock'](_0x5a7518,_0x168ef4,_0x387f93);for(var _0x3b9fda=0x0,_0x20df99=0x0;_0x20df99<_0x168ef4;++_0x20df99){if(null==_0x5a7518[_0x20df99]['pstPoints']||_0x5a7518[_0x20df99]['nPointNum']<=0x1||_0x5a7518[_0x20df99]['nPointNum']>=0x400||_0x5a7518[_0x20df99]['nLineWidth']<=0x0||null==_0x5a7518[_0x20df99]['pstColor'])return _0x31ddcf;_0x3b9fda+=_0x5a7518[_0x20df99]['nPointNum'];}if(_0x3b9fda!=_0x387f93)return _0x31ddcf;if((_0x3b9fda+=_0x168ef4)>this['nMaxPointNum']&&(this['nMaxPointNum']=_0x3b9fda,this['pLinePosVertices']=null,this['pLineClrVertices']=null),null==this['pLinePosVertices']&&(this['pLinePosVertices']=new Float32Array(0x6*this['nMaxPointNum']*0x3),null==this['pLinePosVertices']))return _0x3d12cf;if(this['pLinePosVertices']['fill'](0x0),null==this['pLineClrVertices']&&(this['pLineClrVertices']=new Float32Array(0x6*this['nMaxPointNum']*0x4),null==this['pLineClrVertices']))return _0x3d12cf;if(this['pLineClrVertices']['fill'](0x0),0x0==this['glLinePosBuffer']&&(this['glLinePosBuffer']=this['ctx']['createBuffer'](),0x0==this['glLinePosBuffer']))return _0x4d26c0;if(0x0==this['glLineClrBuffer']&&(this['glLineClrBuffer']=this['ctx']['createBuffer'](),0x0==this['glLineClrBuffer']))return _0x4d26c0;var _0x2729ac=this['ComputeLinePoint'](_0x5a7518,_0x168ef4);if(_0xa87ede!=_0x2729ac)return _0x2729ac;this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFunc'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA']);var _0x539ebb=this['nLineShaderProgram'];this['ctx']['useProgram'](_0x539ebb);var _0x45c49a=this['ctx']['getUniformLocation'](this['nLineShaderProgram'],'bCapture');if(_0x45c49a<=0x0)return _0x4d26c0;0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x45c49a,0x1):this['ctx']['uniform1i'](_0x45c49a,0x0);var _0x3da9fb=this['glLinePosBuffer'],_0x53c565=this['glLineClrBuffer'],_0x5a1957=this['nLineTriangleNum'],_0x3ce2a8=this['pLinePosVertices'],_0x20734b=this['pLineClrVertices'];this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0x3da9fb),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x3ce2a8,this['ctx']['STATIC_DRAW']);var _0x5a578b=this['ctx']['getAttribLocation'](_0x539ebb,'position');this['ctx']['enableVertexAttribArray'](_0x5a578b),this['ctx']['vertexAttribPointer'](_0x5a578b,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0x53c565),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x20734b,this['ctx']['STATIC_DRAW']);var _0x3afb19=this['ctx']['getAttribLocation'](_0x539ebb,'color');return this['ctx']['enableVertexAttribArray'](_0x3afb19),this['ctx']['vertexAttribPointer'](_0x3afb19,0x4,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),0x1==this['bIsCapturing']?this['ctx']['viewport'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight']):this['ctx']['viewport'](0x0,0x0,this['canvas']['width'],this['canvas']['height']),this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,0x3*_0x5a1957),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),_0xa87ede;}},{'key':'SR_DrawFont','value':function(_0x6eab1a,_0x4143dd,_0x2bbea7,_0x2279ac,_0x152461,_0x2b681e,_0xbd83ec,_0x33f12d,_0x5f236b,_0xf708b7,_0x233741){if(null==_0x6eab1a||null==_0x4143dd||null==_0x2bbea7||_0x2279ac<=0x1||_0x152461<=0x1)return _0x31ddcf;if(0x1==_0x2b681e&&null==_0xbd83ec)return _0x31ddcf;var _0x3b9af0=[],_0x35b6ae={};return _0x35b6ae['bBackground']=_0x2b681e,_0x35b6ae['nFontWidth']=_0x2279ac,_0x35b6ae['nFontHeight']=_0x152461,_0x35b6ae['pstBGColor']=_0xbd83ec,_0x35b6ae['pstFontColor']=_0x2bbea7,_0x35b6ae['pString']=_0x6eab1a,_0x35b6ae['pstStartPos']=_0x4143dd,_0x35b6ae['fRotateAngle']=_0x33f12d,_0x35b6ae['pFontFamily']=_0x5f236b,_0x35b6ae['textAlign']=_0xf708b7,_0x35b6ae['textBaseline']=_0x233741,_0x3b9af0['push'](_0x35b6ae),this['SR_DrawFontEx'](_0x3b9af0,0x1);}},{'key':'SR_DrawFontEx','value':function(_0x1ac011,_0x304601){if(null==this['ctx'])return _0x520965;if(0x0>_0x304601||null==_0x1ac011)return _0x31ddcf;var _0x1a5d2f,_0x3f4f85,_0x5cc926=0x0,_0x1efaee=0x0;if(0x1==this['bIsCapturing']){if(0x0==this['nCaptureWidth']||0x0==this['nCaptureHeight'])return _0x520965;_0x5cc926=Math['round']((this['fDstUseRight']-this['fDstUseLeft'])*this['nCaptureWidth']),_0x1efaee=Math['round']((this['fDstUseBottom']-this['fDstUseTop'])*this['nCaptureHeight']);}else _0x5cc926=Math['round']((this['fDstUseRight']-this['fDstUseLeft'])*this['canvas']['width']),_0x1efaee=Math['round']((this['fDstUseBottom']-this['fDstUseTop'])*this['canvas']['height']);if(_0x5cc926=_0x5cc926+0x4-_0x5cc926%0x4,_0x1efaee=_0x1efaee+0x4-_0x1efaee%0x4,this['nDrawFontWidth']==_0x5cc926&&this['nDrawFontHeight']==_0x1efaee||(this['pFontColorBuffer']=null,this['nFontColorTexture']=0x0,this['nDrawFontWidth']=_0x5cc926,this['nDrawFontHeight']=_0x1efaee,null!=this['textCanvas']&&(this['textCanvas']['remove'](),this['textCanvas']=null,this['textCanvasCtx']=null)),0x0==this['nFontColorTexture']){if(this['nFontColorTexture']=this['ctx']['createTexture'](),0x0==this['nFontColorTexture'])return _0x4d26c0;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nFontColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}if(null==this['textCanvas']){if(this['textCanvas']=document['createElement']('canvas'),null==this['textCanvas'])return _0x13126c;if(this['textCanvasCtx']=this['textCanvas']['getContext']('2d'),null==this['textCanvasCtx'])return _0x13126c;this['textCanvasCtx']['canvas']['width']=this['nDrawFontWidth'],this['textCanvasCtx']['canvas']['height']=this['nDrawFontHeight'];}this['textCanvasCtx']['clearRect'](0x0,0x0,this['nDrawFontWidth'],this['nDrawFontHeight']);for(var _0x29913c=0x0;_0x29913c<_0x304601;++_0x29913c){var _0x597442=_0x1ac011[_0x29913c]['nFontWidth'],_0x51713c=_0x1ac011[_0x29913c]['nFontHeight'];0x1==this['bIsCapturing']&&(_0x597442=Math['round'](0.7*this['nCaptureWidth']/this['canvas']['width']*_0x597442),_0x51713c=Math['round'](0.7*this['nCaptureHeight']/this['canvas']['height']*_0x51713c));var _0x20deee=_0x597442<_0x51713c?_0x597442:_0x51713c;this['textCanvasCtx']['font']=_0x20deee['toString']()+'px\\x20'+_0x1ac011[_0x29913c]['pFontFamily'],null==_0x1ac011[_0x29913c]['textAlign']||null==_0x1ac011[_0x29913c]['textAlign']?this['textCanvasCtx']['textAlign']='left':this['textCanvasCtx']['textAlign']=_0x1ac011[_0x29913c]['textAlign'],null==_0x1ac011[_0x29913c]['textBaseline']||null==_0x1ac011[_0x29913c]['textBaseline']?this['textCanvasCtx']['textBaseline']='top':this['textCanvasCtx']['textBaseline']=_0x1ac011[_0x29913c]['textBaseline'];var _0x5823b0=parseInt(0xff*_0x1ac011[_0x29913c]['pstFontColor']['fR']),_0x6ef32b=parseInt(0xff*_0x1ac011[_0x29913c]['pstFontColor']['fG']),_0x398c18=parseInt(0xff*_0x1ac011[_0x29913c]['pstFontColor']['fB']),_0x2437c7=_0x5823b0<0x10?'0'+_0x5823b0['toString'](0x10):_0x5823b0['toString'](0x10),_0x5becf5=_0x6ef32b<0x10?'0'+_0x6ef32b['toString'](0x10):_0x6ef32b['toString'](0x10),_0x1ea421=_0x398c18<0x10?'0'+_0x398c18['toString'](0x10):_0x398c18['toString'](0x10);this['textCanvasCtx']['fillStyle']='#'+_0x2437c7+_0x5becf5+_0x1ea421,this['textCanvasCtx']['globalAlpha']=_0x1ac011[_0x29913c]['pstFontColor']['fA'];var _0x4eff32=_0x1ac011[_0x29913c]['pstStartPos']['fX']*this['nDrawFontWidth'],_0x11c46b=_0x1ac011[_0x29913c]['pstStartPos']['fY']*this['nDrawFontHeight'];this['textCanvasCtx']['save'](),this['textCanvasCtx']['translate'](_0x4eff32,_0x11c46b),this['textCanvasCtx']['rotate'](_0x1ac011[_0x29913c]['fRotateAngle']*Math['PI']/0xb4),this['textCanvasCtx']['fillText'](_0x1ac011[_0x29913c]['pString'],0x0,0x0),this['textCanvasCtx']['restore']();}if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nFontColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],this['textCanvasCtx']['canvas']),0x0==this['nFontShaderProgram']&&(this['nFontShaderProgram']=this['CompileProgram']('\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20position;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20texCoord;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.x\\x20\\x20=\\x20position.x;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20\\x20=\\x20position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20=\\x20-position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.z\\x20\\x20=\\x200.1;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.w\\x20\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a','\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20pp.st);\\x0a\\x20\\x20\\x20\\x20}\\x0a'),this['nFontShaderProgram']<=0x0))return _0x4d26c0;0x1==this['bIsCapturing']?(_0x1a5d2f=this['nCaptureWidth']+0x4-this['nCaptureWidth']%0x4,_0x3f4f85=this['nCaptureHeight']+0x4-this['nCaptureHeight']%0x4):(_0x1a5d2f=this['canvas']['width']+0x4-this['canvas']['width']%0x4,_0x3f4f85=this['canvas']['height']+0x4-this['canvas']['height']%0x4),this['ctx']['viewport'](0x0,0x0,_0x1a5d2f,_0x3f4f85),this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFunc'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA']),this['ctx']['useProgram'](this['nFontShaderProgram']);var _0x2103fe=this['ctx']['getUniformLocation'](this['nFontShaderProgram'],'bCapture');if(_0x2103fe<=0x0)return _0x4d26c0;0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x2103fe,0x1):this['ctx']['uniform1i'](_0x2103fe,0x0),this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nFontColorTexture']);var _0x352925=this['ctx']['getUniformLocation'](this['nFontShaderProgram'],'texture');this['ctx']['uniform1i'](_0x352925,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x2cf17b=this['ctx']['getAttribLocation'](this['nFontShaderProgram'],'position');this['ctx']['enableVertexAttribArray'](_0x2cf17b),this['ctx']['vertexAttribPointer'](_0x2cf17b,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x58c4a5=this['ctx']['getAttribLocation'](this['nFontShaderProgram'],'texCoord');return this['ctx']['enableVertexAttribArray'](_0x58c4a5),this['ctx']['vertexAttribPointer'](_0x58c4a5,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['drawArrays'](this['ctx']['TRIANGLE_FAN'],0x0,0x4),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],null),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),_0xa87ede;}},{'key':'SR_DrawImage','value':function(_0x1c393e,_0x3cb83a,_0x19a57a,_0x2b70fe,_0x384884,_0x562e06){if(null==this['ctx'])return _0x520965;if(null==_0x1c393e||_0x3cb83a<=0x0||_0x19a57a<=0x0||null==_0x2b70fe||_0x562e06<0x0||_0x562e06>0x1)return _0x31ddcf;if(this['nDrawImageWidth']=_0x3cb83a,this['nDrawImageHeight']=_0x19a57a,0x0==this['glImagePosBuffer']&&(this['glImagePosBuffer']=this['ctx']['createBuffer'](),0x0==this['glImagePosBuffer']))return _0x4d26c0;if(0x0==this['glImageClrBuffer']&&(this['glImageClrBuffer']=this['ctx']['createBuffer'](),0x0==this['glImageClrBuffer']))return _0x4d26c0;if(null==this['pImageClrVertices']){if(this['pImageClrVertices']=new Float32Array(0xc),null==this['pImageClrVertices'])return _0x3d12cf;this['pImageClrVertices'][0x0]=0x0,this['pImageClrVertices'][0x1]=0x0,this['pImageClrVertices'][0x2]=0x0,this['pImageClrVertices'][0x3]=0x1,this['pImageClrVertices'][0x4]=0x1,this['pImageClrVertices'][0x5]=0x0,this['pImageClrVertices'][0x6]=0x1,this['pImageClrVertices'][0x7]=0x0,this['pImageClrVertices'][0x8]=0x0,this['pImageClrVertices'][0x9]=0x1,this['pImageClrVertices'][0xa]=0x1,this['pImageClrVertices'][0xb]=0x1;}var _0x24a466={},_0x254ae9={};if(_0x24a466['fLeft']=(_0x2b70fe['fLeft']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x24a466['fRight']=(_0x2b70fe['fRight']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x24a466['fTop']=(_0x2b70fe['fTop']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x24a466['fBottom']=(_0x2b70fe['fBottom']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x254ae9['fLeft']=this['fDstUseLeft']+_0x24a466['fLeft']*(this['fDstUseRight']-this['fDstUseLeft']),_0x254ae9['fRight']=this['fDstUseLeft']+_0x24a466['fRight']*(this['fDstUseRight']-this['fDstUseLeft']),_0x254ae9['fTop']=this['fDstUseTop']+_0x24a466['fTop']*(this['fDstUseBottom']-this['fDstUseTop']),_0x254ae9['fBottom']=this['fDstUseTop']+_0x24a466['fBottom']*(this['fDstUseBottom']-this['fDstUseTop']),null==this['pImagePosVertices']&&(this['pImagePosVertices']=new Float32Array(0xc),null==this['pImagePosVertices']))return _0x3d12cf;switch(this['pImagePosVertices']['fill'](0x0),this['pImagePosVertices'][0x0]=0x2*_0x254ae9['fLeft']-0x1,this['pImagePosVertices'][0x1]=0x1-0x2*_0x254ae9['fTop'],this['pImagePosVertices'][0x2]=0x2*_0x254ae9['fLeft']-0x1,this['pImagePosVertices'][0x3]=0x1-0x2*_0x254ae9['fBottom'],this['pImagePosVertices'][0x4]=0x2*_0x254ae9['fRight']-0x1,this['pImagePosVertices'][0x5]=0x1-0x2*_0x254ae9['fTop'],this['pImagePosVertices'][0x6]=0x2*_0x254ae9['fRight']-0x1,this['pImagePosVertices'][0x7]=0x1-0x2*_0x254ae9['fTop'],this['pImagePosVertices'][0x8]=0x2*_0x254ae9['fLeft']-0x1,this['pImagePosVertices'][0x9]=0x1-0x2*_0x254ae9['fBottom'],this['pImagePosVertices'][0xa]=0x2*_0x254ae9['fRight']-0x1,this['pImagePosVertices'][0xb]=0x1-0x2*_0x254ae9['fBottom'],0x1==this['bIsCapturing']?this['ctx']['viewport'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight']):this['ctx']['viewport'](0x0,0x0,this['canvas']['width'],this['canvas']['height']),this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFunc'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA']),_0x384884){case _0x3b8155:if(null==this['nImageColorTexture']){if(this['nImageColorTexture']=this['ctx']['createTexture'](),0x0==this['nImageColorTexture'])return _0x4d26c0;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['nDrawImageWidth'],this['nDrawImageHeight'],0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x1c393e),0x0==this['nImageShaderProgram']){var _0x39f044=this['CompileProgram'](_0x2a3c39,_0x350ff5);if(_0x39f044<=0x0)return _0x4d26c0;this['nImageShaderProgram']=_0x39f044;}break;case _0x2818bf:if(null==this['nImageColorTexture']){if(this['nImageColorTexture']=this['ctx']['createTexture'](),0x0==this['nImageColorTexture'])return _0x4d26c0;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGB'],this['nDrawImageWidth'],this['nDrawImageHeight'],0x0,this['ctx']['RGB'],this['ctx']['UNSIGNED_SHORT_5_6_5'],_0x1c393e),0x0==this['nImageShaderProgram']){var _0x42c057=this['CompileProgram'](_0x2a3c39,'\\x0a\\x20\\x20\\x20\\x20precision\\x20mediump\\x20float;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x20\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAlpha;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20pp.st);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20*=\\x20fAlpha;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a');if(_0x42c057<=0x0)return _0x4d26c0;this['nImageShaderProgram']=_0x42c057;}break;case _0x58bd8b:for(var _0x22b758=0x0;_0x22b758<0x3;_0x22b758++){if(this['nImageColorTextures'][_0x22b758]=this['ctx']['createTexture'](),0x0==this['nImageColorTextures'][_0x22b758])return _0x4d26c0;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTextures'][_0x22b758]),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTextures'][0x0]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],this['nDrawImageWidth'],this['nDrawImageHeight'],0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x1c393e),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTextures'][0x1]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],this['nDrawImageWidth']/0x2,this['nDrawImageHeight']/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x1c393e+this['nDrawImageWidth']*this['nDrawImageHeight']*0x5/0x4),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTextures'][0x2]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],this['nDrawImageWidth']/0x2,this['nDrawImageHeight']/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x1c393e+this['nDrawImageWidth']*this['nDrawImageHeight']),0x0==this['nImageShaderProgram']){var _0x826ac7=this['CompileProgram'](_0x2a3c39,'\\x0a\\x20\\x20\\x20\\x20precision\\x20mediump\\x20float;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Ytexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Utexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Vtexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAlpha;\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,\\x20g,\\x20b,\\x20y,\\x20u,\\x20v;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y\\x20=\\x20texture2D(Ytexture,\\x20pp.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u\\x20=\\x20texture2D(Utexture,\\x20pp.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v\\x20=\\x20texture2D(Vtexture,\\x20pp.st).r;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y\\x20=\\x201.1643\\x20*\\x20(y\\x20-\\x200.0625);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u\\x20=\\x20u\\x20-\\x200.5;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v\\x20=\\x20v\\x20-\\x200.5;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20y\\x20+\\x201.5958\\x20*\\x20v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20y\\x20-\\x200.39173\\x20*\\x20u\\x20-\\x200.81290\\x20*\\x20v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20y\\x20+\\x202.017\\x20*\\x20u;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r,\\x20g,\\x20b,\\x20fAlpha);\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a');if(_0x826ac7<=0x0)return _0x4d26c0;this['nImageShaderProgram']=_0x826ac7;}break;case _0xa01ff6:if(null==this['nImageColorTexture']){if(this['nImageColorTexture']=this['ctx']['createTexture'](),0x0==this['nImageColorTexture'])return _0x4d26c0;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}this['ctx']['useProgram'](this['videoShaderProgram']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x23716d=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'xy');if(_0x23716d<0x0)return _0x4d26c0;this['ctx']['vertexAttribPointer'](_0x23716d,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x23716d),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x47a4a9=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'uv');if(_0x47a4a9<0x0)return _0x4d26c0;if(this['ctx']['vertexAttribPointer'](_0x47a4a9,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x47a4a9),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['useProgram'](null),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['nDrawImageWidth'],this['nDrawImageHeight'],0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x1c393e),0x0==this['nImageShaderProgram']){var _0x1889b9=this['CompileProgram'](_0x2a3c39,_0x350ff5);if(_0x1889b9<=0x0)return _0x4d26c0;this['nImageShaderProgram']=_0x1889b9;}break;default:return _0x86aef9;}var _0x39944f=this['nImageShaderProgram'];this['ctx']['useProgram'](_0x39944f);var _0x35df32=this['ctx']['getUniformLocation'](this['nImageShaderProgram'],'bCapture');if(_0x35df32<=0x0)return _0x4d26c0;0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x35df32,0x1):this['ctx']['uniform1i'](_0x35df32,0x0),this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']);var _0x370d63=this['ctx']['getUniformLocation'](this['nImageShaderProgram'],'texture');this['ctx']['uniform1i'](_0x370d63,0x0),_0x370d63=this['ctx']['getUniformLocation'](this['nImageShaderProgram'],'fAlpha'),this['ctx']['uniform1f'](_0x370d63,_0x562e06),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glImagePosBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pImagePosVertices'],this['ctx']['STATIC_DRAW']);var _0x3daade=this['ctx']['getAttribLocation'](this['nImageShaderProgram'],'position');this['ctx']['enableVertexAttribArray'](_0x3daade),this['ctx']['vertexAttribPointer'](_0x3daade,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glImageClrBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pImageClrVertices'],this['ctx']['STATIC_DRAW']);var _0x44ee1a=this['ctx']['getAttribLocation'](this['nImageShaderProgram'],'texCoord');return this['ctx']['enableVertexAttribArray'](_0x44ee1a),this['ctx']['vertexAttribPointer'](_0x44ee1a,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,0x6),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),_0xa87ede;}},{'key':'SR_AddSubPort','value':function(_0x1c4dff){var _0x29f273,_0x1303a3,_0x30143d=_0x3cf544;if(null==this['ctx'])return _0x30143d;if(null!=this['pFishParamManager']?_0x30143d=this['pFishParamManager']['GetFECPort'](_0x1c4dff):_0x1c4dff==_0x186ff9['SR_DE_NULL']&&(_0x30143d=0x0),_0x30143d==_0x3cf544)return _0x3cf544;switch(this['nFECPort']=_0x30143d,_0x1c4dff){case _0x186ff9['SR_DE_NULL']:_0x29f273=_0x1f462c,this['enPixelFormat']==_0xa01ff6?_0x1303a3='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20highp\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fWndWidth;\\x0auniform\\x20float\\x20fWndHeight;\\x0auniform\\x20float\\x20fBrightness;\\x0auniform\\x20float\\x20fHue;\\x0auniform\\x20float\\x20fSaturation;\\x0auniform\\x20float\\x20fContrast;\\x0auniform\\x20float\\x20fSharpness;\\x0auniform\\x20int\\x20nPostProc;\\x0avec3\\x20rgb2hsv(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20K\\x20=\\x20vec4(0.0,\\x20-1.0\\x20/\\x203.0,\\x202.0\\x20/\\x203.0,\\x20-1.0);\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20p\\x20=\\x20c.g\\x20<\\x20c.b\\x20?\\x20vec4(c.bg,\\x20K.wz)\\x20:\\x20vec4(c.gb,\\x20K.xy);\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20q\\x20=\\x20c.r\\x20<\\x20p.x\\x20?\\x20vec4(p.xyw,\\x20c.r)\\x20:\\x20vec4(c.r,\\x20p.yzx);\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20q.x\\x20-\\x20min(q.w,\\x20q.y);\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20e\\x20=\\x201.0e-10;\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20vec3(abs(q.z\\x20+\\x20(q.w\\x20-\\x20q.y)\\x20/\\x20(6.0\\x20*\\x20d\\x20+\\x20e)),\\x20d\\x20/\\x20(q.x\\x20+\\x20e),\\x20q.x);\\x20\\x0a}\\x20\\x0avec3\\x20hsv2rgb(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20K\\x20=\\x20vec4(1.0,\\x202.0\\x20/\\x203.0,\\x201.0\\x20/\\x203.0,\\x203.0);\\x20\\x0a\\x20\\x20\\x20\\x20vec3\\x20p\\x20=\\x20abs(fract(c.xxx\\x20+\\x20K.xyz)\\x20*\\x206.0\\x20-\\x20K.www);\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20c.z\\x20*\\x20mix(K.xxx,\\x20clamp(p\\x20-\\x20K.xxx,\\x200.0,\\x201.0),\\x20c.y);\\x20\\x0a}\\x20\\x0avec3\\x20sharpen()\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec3\\x20sharpenColor;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20offWidth\\x20=\\x201.0\\x20/\\x20fWndWidth;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20offHeight\\x20=\\x201.0\\x20/\\x20fWndHeight;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20tempSharpness\\x20=\\x20fSharpness\\x20*\\x20100.0;\\x20\\x0a\\x20\\x20\\x20\\x20vec2\\x20uv\\x20\\x20\\x20\\x20\\x20=\\x20v_uv;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20\\x20=\\x20(1.0\\x20+\\x204.0\\x20*\\x20tempSharpness)\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(-offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(0,\\x20offHeight);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(0,\\x20-offHeight);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20return\\x20sharpenColor;\\x20\\x0a}\\x20\\x0avoid\\x20main(void)\\x20\\x0a{\\x0a\\x20\\x20\\x20\\x20if(1\\x20==\\x20nPostProc)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec3\\x20fragRGB\\x20=\\x20sharpen();\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//sharpen\\x20锐度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec3\\x20fragHSV\\x20=\\x20rgb2hsv(fragRGB);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragHSV.x\\x20=\\x20fragHSV.x\\x20+\\x20fHue;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//hue\\x20色度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragHSV.y\\x20=\\x20fragHSV.y\\x20*\\x20(fSaturation\\x20+\\x201.0);\\x20\\x20\\x20\\x20//saturation\\x20饱和度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20hsv2rgb(fragHSV);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(fBrightness\\x20>\\x200.0)\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//brightness\\x20亮度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20fragRGB\\x20+\\x20(1.0\\x20-\\x20fragRGB)\\x20*\\x20fBrightness;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20fragRGB\\x20+\\x20fragRGB\\x20*\\x20fBrightness;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tempContrast\\x20=\\x20fContrast\\x20>\\x200.0\\x20?\\x20fContrast\\x20*\\x2010.0\\x20:\\x20fContrast;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20((fragRGB\\x20-\\x200.5)\\x20*\\x20max(tempContrast\\x20+\\x201.0,\\x200.0))\\x20+\\x200.5;\\x20\\x20\\x20\\x20\\x20\\x20//contrast\\x20对比度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(fragRGB,\\x201.0);\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20v_uv);\\x0a\\x20\\x20\\x20\\x20}\\x0a}\\x0a':this['enPixelFormat']!=_0x58bd8b&&this['enPixelFormat']!=_0x264b64||(_0x1303a3='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20highp\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20Ytexture;\\x0auniform\\x20sampler2D\\x20Utexture;\\x0auniform\\x20sampler2D\\x20Vtexture;\\x0auniform\\x20float\\x20fWndWidth;\\x0auniform\\x20float\\x20fWndHeight;\\x0auniform\\x20float\\x20fBrightness;\\x0auniform\\x20float\\x20fHue;\\x0auniform\\x20float\\x20fSaturation;\\x0auniform\\x20float\\x20fContrast;\\x0auniform\\x20float\\x20fSharpness;\\x0auniform\\x20int\\x20nPostProc;\\x0avec3\\x20rgb;\\x0avec3\\x20yuv2rgb(float\\x20y,\\x20float\\x20u,\\x20float\\x20v)\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x0a\\x20\\x20\\x20\\x20y\\x20=\\x201.1643\\x20*\\x20(y\\x20-\\x200.0625);\\x20\\x0a\\x20\\x20\\x20\\x20u\\x20=\\x20u\\x20-\\x200.5;\\x20\\x0a\\x20\\x20\\x20\\x20v\\x20=\\x20v\\x20-\\x200.5;\\x20\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20y\\x20+\\x201.5958\\x20*\\x20v;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20y\\x20-\\x200.39173\\x20*\\x20u\\x20-\\x200.81290\\x20*\\x20v;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20y\\x20+\\x202.017\\x20*\\x20u;\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20vec3(r,\\x20g,\\x20b);\\x0a}\\x0avec3\\x20rgb2hsv(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20K\\x20=\\x20vec4(0.0,\\x20-1.0\\x20/\\x203.0,\\x202.0\\x20/\\x203.0,\\x20-1.0);\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20p\\x20=\\x20c.g\\x20<\\x20c.b\\x20?\\x20vec4(c.bg,\\x20K.wz)\\x20:\\x20vec4(c.gb,\\x20K.xy);\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20q\\x20=\\x20c.r\\x20<\\x20p.x\\x20?\\x20vec4(p.xyw,\\x20c.r)\\x20:\\x20vec4(c.r,\\x20p.yzx);\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20q.x\\x20-\\x20min(q.w,\\x20q.y);\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20e\\x20=\\x201.0e-10;\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20vec3(abs(q.z\\x20+\\x20(q.w\\x20-\\x20q.y)\\x20/\\x20(6.0\\x20*\\x20d\\x20+\\x20e)),\\x20d\\x20/\\x20(q.x\\x20+\\x20e),\\x20q.x);\\x20\\x0a}\\x20\\x0a\\x0avec3\\x20hsv2rgb(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20K\\x20=\\x20vec4(1.0,\\x202.0\\x20/\\x203.0,\\x201.0\\x20/\\x203.0,\\x203.0);\\x20\\x0a\\x20\\x20\\x20\\x20vec3\\x20p\\x20=\\x20abs(fract(c.xxx\\x20+\\x20K.xyz)\\x20*\\x206.0\\x20-\\x20K.www);\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20c.z\\x20*\\x20mix(K.xxx,\\x20clamp(p\\x20-\\x20K.xxx,\\x200.0,\\x201.0),\\x20c.y);\\x20\\x0a}\\x20\\x0a\\x0avec3\\x20sharpen(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec3\\x20sharpenColor;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20sharpenColorY;\\x0a\\x20\\x20\\x20\\x20float\\x20sharpenColorU;\\x0a\\x20\\x20\\x20\\x20float\\x20sharpenColorV;\\x0a\\x20\\x20\\x20\\x20float\\x20offWidth\\x20\\x20=\\x201.0\\x20/\\x20fWndWidth;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20offHeight\\x20=\\x201.0\\x20/\\x20fWndHeight;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20tempSharpness\\x20=\\x20fSharpness\\x20*\\x20100.0;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20=\\x20(1.0\\x20+\\x204.0\\x20*\\x20tempSharpness)\\x20*\\x20c;\\x0a\\x0a\\x20\\x20\\x20\\x20vec2\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(-offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x0a\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(0,\\x20offHeight);\\x0a\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(0,\\x20-offHeight);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x0a\\x20\\x20\\x20\\x20return\\x20sharpenColor;\\x20\\x0a}\\x20\\x0avoid\\x20main(void)\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20y,\\x20u,\\x20v;\\x0a\\x20\\x20\\x20\\x20y\\x20=\\x20texture2D(Ytexture,\\x20v_uv).r;\\x0a\\x20\\x20\\x20\\x20u\\x20=\\x20texture2D(Utexture,\\x20v_uv).r;\\x0a\\x20\\x20\\x20\\x20v\\x20=\\x20texture2D(Vtexture,\\x20v_uv).r;\\x0a\\x20\\x20\\x20\\x20rgb\\x20=\\x20yuv2rgb(y,\\x20u,\\x20v);\\x0a\\x20\\x20\\x20\\x20if(1\\x20==\\x20nPostProc)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec3\\x20fragRGB\\x20=\\x20sharpen(rgb);\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//sharpen\\x20锐度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec3\\x20fragHSV\\x20=\\x20rgb2hsv(fragRGB);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragHSV.x\\x20=\\x20fragHSV.x\\x20+\\x20fHue;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//hue\\x20色度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragHSV.y\\x20=\\x20fragHSV.y\\x20*\\x20(fSaturation\\x20+\\x201.0);\\x20\\x20\\x20\\x20//saturation\\x20饱和度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20hsv2rgb(fragHSV);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(fBrightness\\x20>\\x200.0)\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//brightness\\x20亮度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20fragRGB\\x20+\\x20(1.0\\x20-\\x20fragRGB)\\x20*\\x20fBrightness;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20fragRGB\\x20+\\x20fragRGB\\x20*\\x20fBrightness;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tempContrast\\x20=\\x20fContrast\\x20>\\x200.0\\x20?\\x20fContrast\\x20*\\x2010.0\\x20:\\x20fContrast;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20((fragRGB\\x20-\\x200.5)\\x20*\\x20max(tempContrast\\x20+\\x201.0,\\x200.0))\\x20+\\x200.5;\\x20\\x20\\x20\\x20\\x20\\x20//contrast\\x20对比度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(fragRGB,\\x201.0);\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(rgb,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a}\\x0a'),this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_ORIGINAL']:_0x29f273=_0x1f462c,_0x1303a3='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fRX1;\\x0auniform\\x20float\\x20fRX2;\\x0auniform\\x20float\\x20fRY1;\\x0auniform\\x20float\\x20fRY2;\\x0auniform\\x20int\\x20bBlack;\\x20\\x0auniform\\x20int\\x20bCut;\\x0a\\x0avoid\\x20main()\\x0a{\\x20\\x0a\\x09float\\x20r,g,b;\\x0a\\x09vec4\\x20origin;\\x0a\\x0a\\x09float\\x20\\x20w;\\x0a\\x09float\\x20\\x20h;\\x0a\\x09float\\x20\\x20fCenterX;\\x0a\\x09float\\x20\\x20fCenterY;\\x0a\\x09float\\x20\\x20fRadius;\\x0a\\x09w\\x20=\\x201.0;\\x0a\\x09h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x09fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x09fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x09fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x09float\\x20\\x20leftCut\\x20=\\x200.0;\\x0a\\x09float\\x20\\x20rightCut\\x20=\\x201.0;\\x0a\\x09float\\x20\\x20topCut\\x20=\\x200.0;\\x0a\\x09float\\x20\\x20bottomCut\\x20=\\x201.0;\\x0a\\x09if(bCut\\x20==\\x201)\\x0a\\x09{\\x0a\\x09\\x09if(fRX1\\x20>\\x200.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09leftCut\\x20=\\x20fRX1;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRX2\\x20<\\x201.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09rightCut\\x20=\\x20fRX2;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRY1\\x20>\\x200.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09topCut\\x20=\\x20fRY1;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRY2\\x20<\\x201.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09bottomCut\\x20=\\x20fRY2;\\x0a\\x09\\x09}\\x0a\\x09}\\x0a\\x09origin.s\\x20=\\x20v_uv.s\\x20*\\x20(rightCut-leftCut)\\x20+\\x20leftCut;\\x0a\\x09origin.t\\x20=\\x20v_uv.t\\x20*\\x20(bottomCut-topCut)\\x20+\\x20topCut;\\x0a\\x0a\\x09r\\x20=\\x20texture2D(texture,\\x20origin.st).r;\\x20\\x0a\\x09g\\x20=\\x20texture2D(texture,\\x20origin.st).g;\\x20\\x0a\\x09b\\x20=\\x20texture2D(texture,\\x20origin.st).b;\\x20\\x0a\\x0a\\x09if(bBlack\\x20==\\x201)\\x0a\\x09{\\x0a\\x09\\x09float\\x20tmpX,\\x20tmpY;\\x0a\\x09\\x09tmpX\\x20=\\x20origin.s\\x20*\\x20w;\\x20\\x0a\\x09\\x09tmpY\\x20=\\x20origin.t\\x20*\\x20h;\\x20\\x0a\\x09\\x09float\\x20d2\\x20=\\x20(tmpX-fCenterX)*(tmpX-fCenterX)\\x20+\\x20(tmpY-fCenterY)*(tmpY-fCenterY);\\x0a\\x09\\x09if(d2\\x20>\\x20fRadius*fRadius)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09r\\x20=\\x200.0;\\x20\\x0a\\x09\\x09\\x09g\\x20=\\x200.0;\\x20\\x0a\\x09\\x09\\x09b\\x20=\\x200.0;\\x20\\x0a\\x09\\x09}\\x0a\\x09}\\x0a\\x0a\\x09gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:_0x29f273=_0x1f462c,_0x1303a3='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fHAngleCos;\\x0auniform\\x20float\\x20fHAngleSin;\\x0auniform\\x20float\\x20fVAngleCos;\\x0auniform\\x20float\\x20fVAngleSin;\\x0auniform\\x20float\\x20fZoom;\\x0a\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20v_uv.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x200.5\\x20-\\x20v_uv.t;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t\\x20+\\x20z2*z2);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20tmp*origin2.s\\x20/\\x20dnew\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20tmp*origin2.t\\x20/\\x20dnew\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20((origin2.s*fHAngleCos\\x20-\\x20origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20(-(origin2.s*fHAngleSin\\x20+\\x20origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:_0x29f273=_0x1f462c,_0x1303a3='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x20\\x20\\x0auniform\\x20float\\x20fHAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fHAngleSin;\\x20\\x0auniform\\x20float\\x20fVAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fZoom;\\x0a\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<Բ��ʵ������\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<�뾶ʵ�ʳ���\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20v_uv.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x20v_uv.t\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t\\x20+\\x20z2*z2);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20tmp*origin2.s\\x20/\\x20dnew\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20tmp*origin2.t\\x20/\\x20dnew\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20((origin2.s*fHAngleCos\\x20-\\x20origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20((origin2.s*fHAngleSin\\x20+\\x20origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PTZ_WALL']:_0x29f273=_0x1f462c,_0x1303a3='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fHAngleCos;\\x0auniform\\x20float\\x20fHAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fZoom;\\x0a\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin3;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z3;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<Բ��ʵ������\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<�뾶ʵ�ʳ���\\x0a\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20v_uv.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x20v_uv.t\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20origin3.s\\x20=\\x20origin2.s*fHAngleCos\\x20+\\x20z2*fHAngleSin\\x20;\\x0a\\x20\\x20\\x20\\x20origin3.t\\x20=\\x20origin2.y;\\x0a\\x20\\x20\\x20\\x20z3\\x20=\\x20z2*fHAngleCos\\x20-\\x20origin2.x*fHAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin3.s*origin3.s\\x20+\\x20origin3.t*origin3.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin3.s*origin3.s\\x20+\\x20origin3.t*origin3.t\\x20+\\x20z3*z3);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20(tmp*origin3.s\\x20/\\x20dnew\\x20*\\x20fRadius\\x20*\\x202.0\\x20+\\x20fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20(tmp*origin3.t\\x20/\\x20dnew\\x20*\\x20fRadius\\x20*\\x202.0\\x20+\\x20fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:_0x29f273=_0x1f462c,_0x1303a3='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x20v_uv.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20v_uv.t\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r,\\x20g,\\x20b,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:_0x29f273=_0x1f462c,_0x1303a3='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20newpp;\\x20\\x20///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(v_uv.t\\x20\\x20<=\\x200.5)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0\\x20+\\x200.5;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20v_uv.t\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20(v_uv.t\\x20-\\x200.5)\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x20newpp.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20newpp.t\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:_0x29f273=_0x1f462c,_0x1303a3='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x201.0\\x20-\\x20v_uv.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20(1.0\\x20-\\x20v_uv.t)\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']:_0x29f273=_0x1f462c,_0x1303a3='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20newpp;\\x20\\x20///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(v_uv.t\\x20\\x20<=\\x200.5)\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20v_uv.t\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0\\x20+\\x200.5;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20(v_uv.t\\x20-\\x200.5)\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x201.0\\x20-\\x20newpp.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20(1.0\\x20-\\x20newpp.t)\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:_0x29f273=_0x1f462c,_0x1303a3='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20defaultTopCut\\x20=\\x200.1;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20defaultBottomCut\\x20=\\x200.9;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20leftCut\\x20=\\x200.0;\\x20\\x20\\x20\\x20///<当图像中圆不完整时需要切掉无图像部分,即使图像完整,为了效果,也要切掉上下固定的一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20rightCut\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20topCut\\x20=\\x20defaultTopCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20bottomCut\\x20=\\x20defaultBottomCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20leftCut\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20rightCut\\x20=\\x201.0\\x20-\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20defaultTopCut)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20topCut\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20topCut\\x20=\\x20defaultTopCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x201.0\\x20-\\x20defaultBottomCut)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20bottomCut\\x20=\\x201.0\\x20-\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20bottomCut\\x20=\\x20defaultBottomCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x20v_uv.s\\x20*\\x20(rightCut-leftCut)\\x20+\\x20leftCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20v_uv.t\\x20*\\x20(bottomCut-topCut)\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmpx\\x20=\\x20origin.s\\x20*\\x202.0\\x20*\\x20fRadius\\x20+\\x20fCenterX\\x20-\\x20fRadius;\\x20///<纹理坐标转化为原图上的实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmpy\\x20=\\x20origin.t\\x20*\\x202.0\\x20*\\x20fRadius\\x20+\\x20fCenterY\\x20-\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20sqrt(fRadius*fRadius\\x20-\\x20(tmpy-fCenterY)*(tmpy-fCenterY));\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20((tmpx-fCenterX)\\x20*\\x20d\\x20/\\x20fRadius\\x20+\\x20fCenterX)\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20tmpy\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_SEMISPHERE']:case _0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:_0x1c4dff==_0x186ff9['SR_DE_FISH_SEMISPHERE']&&(this['bCullBack']=!0x0),_0x29f273='\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20xy;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec2\\x20uv;\\x0a\\x20\\x20\\x20\\x20varying\\x20highp\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x0a\\x0a\\x20\\x20\\x20\\x20uniform\\x20mat4\\x20matProj;\\x0a\\x20\\x20\\x20\\x20uniform\\x20mat4\\x20matView;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20matProj\\x20*\\x20matView\\x20*\\x20xy;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v_uv\\x20=\\x20uv;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v_uv.y\\x20=\\x201.0\\x20-\\x20uv.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20}\\x0a',_0x1303a3='\\x0a\\x20\\x20\\x20\\x20varying\\x20highp\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20v_uv);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x0;break;default:return _0x86aef9;}var _0x4822c4=this['CompileProgram'](_0x29f273,_0x1303a3);if(_0x4822c4<=0x0)return _0x4d26c0;this['videoShaderProgram']=_0x4822c4;var _0x2e497f=null,_0x2f9f99=null,_0x2e0613=_0xa87ede;if(0x0==this['b3DPort'])_0x2e497f=new Float32Array([-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,0x1,0x0,0x1,-0x1,0x0]),_0x2f9f99=new Float32Array([0x0,0x1,0x0,0x0,0x1,0x0,0x1,0x1]);else{var _0x21dd60={},_0x8748d5=!0x1;if(null==this['pFishParamManager'])return _0x520965;for(var _0x3c7177=0x0;_0x3c7177<_0x379995;++_0x3c7177)if(_0x3c7177!=_0x30143d&&_0xa87ede==this['pFishParamManager']['GetRenderParam'](_0x3c7177,_0x21dd60)){_0x8748d5=!0x0;break;}var _0x15cab7=0x0,_0x19ebf4=0x1,_0x2e5f56=0x0,_0x4e7ce6=0x1;if(0x1==_0x8748d5&&(_0x15cab7=_0x21dd60['fRXLeft'],_0x19ebf4=_0x21dd60['fRXRight'],_0x2e5f56=_0x21dd60['fRYTop'],_0x4e7ce6=_0x21dd60['fRYBottom']),_0x1c4dff==_0x186ff9['SR_DE_FISH_SEMISPHERE'])_0x2e0613=this['_CreateSemiSphere'](_0x15cab7,_0x19ebf4,_0x2e5f56,_0x4e7ce6),_0x2e497f=this['pSemiSpherePos'],_0x2f9f99=this['pSemiSphereTex'];else{if(_0x1c4dff==_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']||_0x1c4dff==_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR'])_0x2e0613=this['_CreateCylinder'](_0x1c4dff,_0x15cab7,_0x19ebf4,_0x2e5f56,_0x4e7ce6,0x2,0x2),_0x2e497f=this['pCylinderPos'],_0x2f9f99=this['pCylinderTex'];else{if(_0x1c4dff!=_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']&&_0x1c4dff!=_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])return _0x86aef9;0x0==_0x8748d5?_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0x1c4dff?(_0x15cab7=0.05,_0x19ebf4=0.95,_0x2e5f56=-0.3,_0x4e7ce6=1.3):_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==_0x1c4dff&&(_0x15cab7=-0.16,_0x19ebf4=1.16,_0x2e5f56=0.005,_0x4e7ce6=0.995):_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0x1c4dff?(_0x21dd60['fRYTop']>0x0||_0x21dd60['fRYBottom']<0x1)&&(_0x15cab7=0.05,_0x19ebf4=0.95,_0x2e5f56=-0.3,_0x4e7ce6=1.3):_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==_0x1c4dff&&(_0x21dd60['fRXLeft']>0x0||_0x21dd60['fRXRight']<0x1)&&(_0x15cab7=-0.16,_0x19ebf4=1.16,_0x2e5f56=0.005,_0x4e7ce6=0.995),_0x2e0613=this['_CreateArcSphere'](_0x1c4dff,_0x15cab7,_0x19ebf4,_0x2e5f56,_0x4e7ce6),_0x2e497f=this['pArcSpherePos'],_0x2f9f99=this['pArcSphereTex'];}}if(_0x2e0613!=_0xa87ede)return _0x2e0613;var _0x20506b={};if((_0x2e0613=this['pFishParamManager']['GetFishParam'](this['nFECPort'],_0x20506b))!=_0xa87ede)return _0x2e0613;if(_0x20506b['nFishParamType']=_0x392c27,_0x20506b['fRXLeft']=_0x15cab7,_0x20506b['fRXRight']=_0x19ebf4,_0x20506b['fRYTop']=_0x2e5f56,_0x20506b['fRYBottom']=_0x4e7ce6,this['pFishParamManager']['SetFishParam'](this['nFECPort'],_0x20506b),_0x2e0613!=_0xa87ede)return _0x2e0613;}if(null==_0x2e497f||null==_0x2f9f99)return _0x86aef9;var _0xc42bb=this['ctx']['createBuffer']();this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0xc42bb),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x2e497f,this['ctx']['STATIC_DRAW']),this['vertexPosBuffer']=_0xc42bb;var _0x116e2e=this['ctx']['createBuffer']();return this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0x116e2e),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x2f9f99,this['ctx']['STATIC_DRAW']),this['texturePosBuffer']=_0x116e2e,this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),0x0==this['b3DPort']&&(_0x2e497f=null,_0x2f9f99=null),_0x2e0613=this['InitCamera'](_0x1c4dff),_0xa87ede!=_0x2e0613?_0x2e0613:(this['enDisplayEffect']=_0x1c4dff,this['nFECPort']);}},{'key':'SR_DelSubPort','value':function(_0x431502){return null==this['ctx']?_0x520965:(null!=this['pFishParamManager']&&this['nFECPort']==_0x431502&&this['pFishParamManager']['FreeFECPort'](this['nFECPort']),this['enDisplayEffect']=_0x186ff9['SR_DE_NULL'],0x0!=this['videoShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['videoShaderProgram']),this['videoShaderProgram']=0x0),0x0!=this['vertexPosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['vertexPosBuffer']),this['vertexPosBuffer']=0x0),0x0!=this['texturePosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['texturePosBuffer']),this['texturePosBuffer']=0x0),this['nMaxPointNum']=0x0,this['pLinePosVertices']=null,this['pLineClrVertices']=null,0x0!=this['glLinePosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glLinePosBuffer']),this['glLinePosBuffer']=0x0),0x0!=this['glLineTexBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glLineTexBuffer']),this['glLineTexBuffer']=0x0),this['nLineTriangleNum']=0x0,0x0!=this['nLineShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['nLineShaderProgram']),this['nLineShaderProgram']=0x0),this['pFillBlockPosVertices']=null,this['pFillBlockClrVertices']=null,this['nMaxFillBlockTriNum']=0x0,0x0!=this['glBlockPosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glBlockPosBuffer']),this['glBlockPosBuffer']=0x0),0x0!=this['glBlockClrBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glBlockClrBuffer']),this['glBlockClrBuffer']=0x0),0x0!=this['nBlockShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['nBlockShaderProgram']),this['nBlockShaderProgram']=0x0),this['nDrawFontWidth']=0x0,this['nDrawFontHeight']=0x0,0x0!=this['nFontColorTexture']&&null!=this['ctx']&&(this['ctx']['deleteTexture'](this['nFontColorTexture']),this['nFontColorTexture']=0x0),this['pFontColorBuffer']=0x0,0x0!=this['nFontShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['nFontShaderProgram']),this['nFontShaderProgram']=0x0),0x0!=this['nCaptureRTTex']&&(this['ctx']['deleteTexture'](this['nCaptureRTTex']),this['nCaptureRTTex']=0x0),0x0!=this['nCaptureFBO']&&(this['ctx']['deleteFramebuffer'](this['nCaptureFBO']),this['nCaptureFBO']=0x0),0x0!=this['nCaptureDepthbuffer']&&(this['ctx']['deleteRenderbuffer'](this['nCaptureDepthbuffer']),this['nCaptureDepthbuffer']=0x0),this['bCaptureResInit']=!0x1,this['pSemiSpherePos']=null,this['pSemiSphereTex']=null,this['nSemiSpherePosNum']=0x0,this['nSemiSpherePosSize']=0x0,this['nSemiSphereTexSize']=0x0,this['pCylinderPos']=null,this['pCylinderTex']=null,this['nCylinderPosNum']=0x0,this['nCylinderPosSize']=0x0,this['nCylinderTexSize']=0x0,this['fCylinderHeight']=0x0,this['fCylinderRadius']=0x0,this['pArcSpherePos']=null,this['pArcSphereTex']=null,this['nArcSpherePosNum']=0x0,this['nArcSpherePosSize']=0x0,this['nArcSphereTexSize']=0x0,this['b3DPort']=!0x1,this['pCamera']=null,this['fRotateX']=0x0,this['fRotateY']=0x0,this['fScale']=0x0,this['pfuncCBIn']=null,this['pfuncCBOut']=null,this['pUserIn']=null,this['pUserOut']=null,this['ctx']['disable'](this['ctx']['CULL_FACE']),this['ctx']['disable'](this['ctx']['DEPTH_TEST']),_0xa87ede);}},{'key':'SR_GetFishParam','value':function(_0x5ba2c1){return null==_0x5ba2c1?_0x31ddcf:null==this['pFishParamManager']?_0x520965:this['pFishParamManager']['GetFishParam'](this['nFECPort'],_0x5ba2c1);}},{'key':'SR_SetFishParam','value':function(_0x231728){return null==_0x231728?_0x31ddcf:null==this['pFishParamManager']?_0x520965:this['pFishParamManager']['SetFishParam'](this['nFECPort'],_0x231728);}},{'key':'SR_SetDisplayRect','value':function(_0x55eb5a,_0x1c555c,_0x1e932c,_0x799fda,_0x1b6d8f){if(null==this['ctx'])return _0x520965;var _0x41f710=_0x55eb5a,_0x5590bb=_0x1c555c,_0x536b65=_0x55eb5a+_0x1e932c,_0x1e96da=_0x1c555c+_0x799fda,_0x5d50c7=null,_0x135ea7=null;switch(_0x1b6d8f){case _0xe9e464:if(this['frameDisplayWidth']>0x0&&this['frameDisplayHeight']>0x0){if(this['fSrcUseLeft']=_0x41f710/this['frameDisplayWidth'],this['fSrcUseLeft']<0x0?this['fSrcUseLeft']=0x0:this['fSrcUseLeft']>0x1&&(this['fSrcUseLeft']=0x1),this['fSrcUseTop']=_0x5590bb/this['frameDisplayHeight'],this['fSrcUseTop']<0x0?this['fSrcUseTop']=0x0:this['fSrcUseTop']>0x1&&(this['fSrcUseTop']=0x1),this['fSrcUseRight']=_0x536b65/this['frameDisplayWidth'],this['fSrcUseRight']<0x0?this['fSrcUseRight']=0x0:this['fSrcUseRight']>0x1&&(this['fSrcUseRight']=0x1),this['fSrcUseBottom']=_0x1e96da/this['frameDisplayHeight'],this['fSrcUseBottom']<0x0?this['fSrcUseBottom']=0x0:this['fSrcUseBottom']>0x1&&(this['fSrcUseBottom']=0x1),this['fSrcUseLeft']>=this['fSrcUseRight']||this['fSrcUseTop']>=this['fSrcUseBottom'])return _0x31ddcf;_0x5d50c7=new Float32Array([this['fSrcUseLeft'],this['fSrcUseBottom'],this['fSrcUseLeft'],this['fSrcUseTop'],this['fSrcUseRight'],this['fSrcUseTop'],this['fSrcUseRight'],this['fSrcUseBottom']]);}else _0x5d50c7=new Float32Array([0x0,0x1,0x0,0x0,0x1,0x0,0x1,0x1]);this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']),this['ctx']['bufferSubData'](this['ctx']['ARRAY_BUFFER'],0x0,_0x5d50c7),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),_0x5d50c7=null;break;case _0x206403:if(this['frameDisplayWidth']>0x0&&this['frameDisplayHeight']>0x0){if(this['fDstUseLeft']=_0x41f710/this['frameDisplayWidth'],this['fDstUseLeft']<0x0?this['fDstUseLeft']=0x0:this['fDstUseLeft']>0x1&&(this['fDstUseLeft']=0x1),this['fDstUseTop']=_0x5590bb/this['frameDisplayHeight'],this['fDstUseTop']<0x0?this['fDstUseTop']=0x0:this['fDstUseTop']>0x1&&(this['fDstUseTop']=0x1),this['fDstUseRight']=_0x536b65/this['frameDisplayWidth'],this['fDstUseRight']<0x0?this['fDstUseRight']=0x0:this['fDstUseRight']>0x1&&(this['fDstUseRight']=0x1),this['fDstUseBottom']=_0x1e96da/this['frameDisplayHeight'],this['fDstUseBottom']<0x0?this['fDstUseBottom']=0x0:this['fDstUseBottom']>0x1&&(this['fDstUseBottom']=0x1),this['fDstUseLeft']>=this['fDstUseRight']||this['fDstUseTop']>=this['fDstUseBottom'])return _0x31ddcf;(_0x135ea7=new Float32Array(0xc))[0x0]=0x2*this['fDstUseLeft']-0x1,_0x135ea7[0x1]=0x1-0x2*this['fDstUseBottom'],_0x135ea7[0x2]=0x0,_0x135ea7[0x3]=0x2*this['fDstUseLeft']-0x1,_0x135ea7[0x4]=0x1-0x2*this['fDstUseTop'],_0x135ea7[0x5]=0x0,_0x135ea7[0x6]=0x2*this['fDstUseRight']-0x1,_0x135ea7[0x7]=0x1-0x2*this['fDstUseTop'],_0x135ea7[0x8]=0x0,_0x135ea7[0x9]=0x2*this['fDstUseRight']-0x1,_0x135ea7[0xa]=0x1-0x2*this['fDstUseBottom'],_0x135ea7[0xb]=0x0,this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']),this['ctx']['bufferSubData'](this['ctx']['ARRAY_BUFFER'],0x0,_0x135ea7),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),_0x135ea7=null;}break;default:return _0x86aef9;}return _0xa87ede;}},{'key':'SR_Destroy','value':function(){if(null==this['ctx'])return _0x520965;this['frameDisplayWidth']=0x0,this['frameDisplayHeight']=0x0,this['pFrameData']=null;for(var _0x45dbcd=0x0;_0x45dbcd<this['nTextureNum'];_0x45dbcd++)0x0!=this['nSurfaceTexture'][_0x45dbcd]&&null!=this['ctx']&&(this['ctx']['deleteTexture'](this['nSurfaceTexture'][_0x45dbcd]),this['nSurfaceTexture'][_0x45dbcd]=0x0);return this['SR_DelSubPort'](this['nFECPort']),this['ctx']['getExtension']('WEBGL_lose_context')['loseContext'](),this['ctx']=null,this['onlySupportedWebGL1']=!0x1,this['bAntialias']=!0x1,this['bRecreateTex']=!0x0,this['pFishParamManager']=null,_0xa87ede;}},{'key':'SR_SetCanvasSize','value':function(_0x270c96,_0x520a5b){return this['canvas']['width']=_0x270c96,this['canvas']['height']=_0x520a5b,_0xa87ede;}},{'key':'SR_GetCanvasSize','value':function(){return console['log']('canvas\\x20width:'+this['canvas']['width']+',height:'+this['canvas']['height']),_0xa87ede;}},{'key':'SR_SetAntialias','value':function(_0x3f93ac){return 0x1==this['onlySupportedWebGL1']?_0x86aef9:(this['bAntialias']!=_0x3f93ac&&(this['bRecreateTex']=!0x0,this['bAntialias']=_0x3f93ac),_0xa87ede);}},{'key':'SR_SetPTZDisplayMode','value':function(_0x56d449){return null==this['pFishParamManager']?_0x520965:this['pFishParamManager']['SetPTZDisplayMode'](_0x56d449);}},{'key':'SR_SetFishParamManager','value':function(_0x52f915){return null!=this['pFishParamManager']?_0x86aef9:(this['pFishParamManager']=_0x52f915,_0xa87ede);}},{'key':'_CreateSemiSphere','value':function(_0x13c3d3,_0x3c0eef,_0xfcb7c8,_0x4b4979){if(null!=this['pSemiSpherePos']||null!=this['pSemiSphereTex'])return _0x520965;this['pSemiSpherePos']=new Float32Array(0xa8c0),this['pSemiSphereTex']=new Float32Array(0x7080);for(var _0x306be6=(_0x3c0eef-_0x13c3d3)/(_0x4b4979-_0xfcb7c8),_0x115894=(_0x3c0eef-_0x13c3d3)/0x2*0x1,_0x18964f=6.2831852/0x3c,_0x399e01=0.0392699075,_0x29408f=0x0,_0xa1b95a=0x0,_0x190a15=0x0,_0x2823ad=0x0;_0x2823ad<0x3c;++_0x2823ad)for(var _0x305025=0x0;_0x305025<0x28;++_0x305025){var _0x55b496=_0x2823ad*_0x18964f;0x0==_0x2823ad&&(_0x29408f=_0x55b496);var _0x163c07=0x3b==_0x2823ad?_0x29408f:(_0x2823ad+0x1)*_0x18964f,_0x38fa2b=-_0x305025*_0x399e01,_0x33daa7=-(_0x305025+0x1)*_0x399e01,_0x461f11=void 0x0,_0x4105f8=void 0x0;this['pSemiSpherePos'][_0xa1b95a]=-0x1*Math['cos'](_0x38fa2b)*Math['cos'](_0x55b496),this['pSemiSpherePos'][_0xa1b95a+0x1]=0x1*Math['sin'](_0x38fa2b),this['pSemiSpherePos'][_0xa1b95a+0x2]=-0x1*Math['cos'](_0x38fa2b)*Math['sin'](_0x55b496),_0x4105f8=0.5-0.5*(0x1+_0x38fa2b/1.5707963)*Math['sin'](_0x55b496),_0x461f11=0.5-0.5*(0x1+_0x38fa2b/1.5707963)*Math['cos'](_0x55b496),this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x461f11*_0x115894+0x1*_0x13c3d3)/0x1,this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x4105f8*_0x115894+_0xfcb7c8*_0x306be6)/_0x306be6,_0xa1b95a+=0x3,this['pSemiSpherePos'][_0xa1b95a]=-0x1*Math['cos'](_0x33daa7)*Math['cos'](_0x55b496),this['pSemiSpherePos'][_0xa1b95a+0x1]=0x1*Math['sin'](_0x33daa7),this['pSemiSpherePos'][_0xa1b95a+0x2]=-0x1*Math['cos'](_0x33daa7)*Math['sin'](_0x55b496),_0x4105f8=0.5-0.5*(0x1+_0x33daa7/1.5707963)*Math['sin'](_0x55b496),_0x461f11=0.5-0.5*(0x1+_0x33daa7/1.5707963)*Math['cos'](_0x55b496),this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x461f11*_0x115894+0x1*_0x13c3d3)/0x1,this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x4105f8*_0x115894+_0xfcb7c8*_0x306be6)/_0x306be6,_0xa1b95a+=0x3,this['pSemiSpherePos'][_0xa1b95a]=-0x1*Math['cos'](_0x38fa2b)*Math['cos'](_0x163c07),this['pSemiSpherePos'][_0xa1b95a+0x1]=0x1*Math['sin'](_0x38fa2b),this['pSemiSpherePos'][_0xa1b95a+0x2]=-0x1*Math['cos'](_0x38fa2b)*Math['sin'](_0x163c07),_0x4105f8=0.5-0.5*(0x1+_0x38fa2b/1.5707963)*Math['sin'](_0x163c07),_0x461f11=0.5-0.5*(0x1+_0x38fa2b/1.5707963)*Math['cos'](_0x163c07),this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x461f11*_0x115894+0x1*_0x13c3d3)/0x1,this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x4105f8*_0x115894+_0xfcb7c8*_0x306be6)/_0x306be6,_0xa1b95a+=0x3,this['pSemiSpherePos'][_0xa1b95a]=-0x1*Math['cos'](_0x38fa2b)*Math['cos'](_0x163c07),this['pSemiSpherePos'][_0xa1b95a+0x1]=0x1*Math['sin'](_0x38fa2b),this['pSemiSpherePos'][_0xa1b95a+0x2]=-0x1*Math['cos'](_0x38fa2b)*Math['sin'](_0x163c07),_0x4105f8=0.5-0.5*(0x1+_0x38fa2b/1.5707963)*Math['sin'](_0x163c07),_0x461f11=0.5-0.5*(0x1+_0x38fa2b/1.5707963)*Math['cos'](_0x163c07),this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x461f11*_0x115894+0x1*_0x13c3d3)/0x1,this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x4105f8*_0x115894+_0xfcb7c8*_0x306be6)/_0x306be6,_0xa1b95a+=0x3,this['pSemiSpherePos'][_0xa1b95a]=-0x1*Math['cos'](_0x33daa7)*Math['cos'](_0x55b496),this['pSemiSpherePos'][_0xa1b95a+0x1]=0x1*Math['sin'](_0x33daa7),this['pSemiSpherePos'][_0xa1b95a+0x2]=-0x1*Math['cos'](_0x33daa7)*Math['sin'](_0x55b496),_0x4105f8=0.5-0.5*(0x1+_0x33daa7/1.5707963)*Math['sin'](_0x55b496),_0x461f11=0.5-0.5*(0x1+_0x33daa7/1.5707963)*Math['cos'](_0x55b496),this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x461f11*_0x115894+0x1*_0x13c3d3)/0x1,this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x4105f8*_0x115894+_0xfcb7c8*_0x306be6)/_0x306be6,_0xa1b95a+=0x3,this['pSemiSpherePos'][_0xa1b95a]=-0x1*Math['cos'](_0x33daa7)*Math['cos'](_0x163c07),this['pSemiSpherePos'][_0xa1b95a+0x1]=0x1*Math['sin'](_0x33daa7),this['pSemiSpherePos'][_0xa1b95a+0x2]=-0x1*Math['cos'](_0x33daa7)*Math['sin'](_0x163c07),_0x4105f8=0.5-0.5*(0x1+_0x33daa7/1.5707963)*Math['sin'](_0x163c07),_0x461f11=0.5-0.5*(0x1+_0x33daa7/1.5707963)*Math['cos'](_0x163c07),this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x461f11*_0x115894+0x1*_0x13c3d3)/0x1,this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x4105f8*_0x115894+_0xfcb7c8*_0x306be6)/_0x306be6,_0xa1b95a+=0x3;}return this['nSemiSpherePosNum']=_0xa1b95a/0x3,this['nSemiSpherePosSize']=0x3,this['nSemiSphereTexSize']=0x2,_0xa87ede;}},{'key':'_CreateCylinder','value':function(_0x44cf2d,_0x21ffe7,_0x381786,_0x4528b6,_0x2f5aa3,_0x739606,_0x3b790c){if(null!=this['pCylinderPos']||null!=this['pCylinderTex'])return _0x520965;if(Math['abs'](_0x739606-0x0)<_0x4a23c6)this['fCylinderHeight']=0x2;else{if(_0x739606<0.5||_0x739606>0x6)return _0x31ddcf;this['fCylinderHeight']=_0x739606;}if(Math['abs'](_0x3b790c-0x0)<_0x4a23c6)this['fCylinderRadius']=_0x44cf2d==_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']||_0x44cf2d==_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']?0x2:0x1;else{if(_0x3b790c<0.5||_0x3b790c>0x4)return _0x31ddcf;this['fCylinderRadius']=_0x3b790c;}if(this['pCylinderPos']=new Float32Array(0xa8c0),this['pCylinderTex']=new Float32Array(0x7080),null==this['pCylinderPos']||null==this['pCylinderTex'])return this['pCylinderPos']=null,this['pCylinderTex']=null,_0x3d12cf;for(var _0xcbf3c9=(_0x381786-_0x21ffe7)/(_0x2f5aa3-_0x4528b6),_0x48eb5f=(_0x381786-_0x21ffe7)/0x2*0x1,_0x5485a5=6.2831852/0x3c,_0x26550d=this['fCylinderHeight']/_0x40743d,_0xc19360=0x0,_0xcec4ef=0x0,_0x48d549=0x0;_0x48d549<0x3c;++_0x48d549)for(var _0x481b39=0x0;_0x481b39<_0x40743d;++_0x481b39){var _0x4f2b3f=_0x48d549*_0x5485a5,_0x788b55=(_0x48d549+0x1)*_0x5485a5,_0x23966a=void 0x0,_0xda562b=void 0x0;this['pCylinderPos'][_0xc19360]=-this['fCylinderRadius']*Math['sin'](_0x4f2b3f),this['pCylinderPos'][_0xc19360+0x1]=this['fCylinderHeight']/0x2-_0x481b39*_0x26550d,this['pCylinderPos'][_0xc19360+0x2]=-this['fCylinderRadius']*Math['cos'](_0x4f2b3f),_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==_0x44cf2d||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x44cf2d?(_0x23966a=0.5+(0.1+0.01*_0x481b39)*Math['sin'](_0x4f2b3f),_0xda562b=0.5+(0.1+0.01*_0x481b39)*Math['cos'](_0x4f2b3f)):(_0x23966a=0.5-(0.5-0.01*_0x481b39)*Math['sin'](_0x4f2b3f),_0xda562b=0.5+(0.5-0.01*_0x481b39)*Math['cos'](_0x4f2b3f)),this['pCylinderTex'][_0xcec4ef++]=(0x2*_0x23966a*_0x48eb5f+0x1*_0x21ffe7)/0x1,this['pCylinderTex'][_0xcec4ef++]=(0x2*_0xda562b*_0x48eb5f+_0x4528b6*_0xcbf3c9)/_0xcbf3c9,_0xc19360+=0x3,this['pCylinderPos'][_0xc19360]=-this['fCylinderRadius']*Math['sin'](_0x4f2b3f),this['pCylinderPos'][_0xc19360+0x1]=this['fCylinderHeight']/0x2-(_0x481b39+0x1)*_0x26550d,this['pCylinderPos'][_0xc19360+0x2]=-this['fCylinderRadius']*Math['cos'](_0x4f2b3f),_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==_0x44cf2d||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x44cf2d?(_0x23966a=0.5+(0.1+0.01*(_0x481b39+0x1))*Math['sin'](_0x4f2b3f),_0xda562b=0.5+(0.1+0.01*(_0x481b39+0x1))*Math['cos'](_0x4f2b3f)):(_0x23966a=0.5-(0.5-0.01*(_0x481b39+0x1))*Math['sin'](_0x4f2b3f),_0xda562b=0.5+(0.5-0.01*(_0x481b39+0x1))*Math['cos'](_0x4f2b3f)),this['pCylinderTex'][_0xcec4ef++]=(0x2*_0x23966a*_0x48eb5f+0x1*_0x21ffe7)/0x1,this['pCylinderTex'][_0xcec4ef++]=(0x2*_0xda562b*_0x48eb5f+_0x4528b6*_0xcbf3c9)/_0xcbf3c9,_0xc19360+=0x3,this['pCylinderPos'][_0xc19360]=-this['fCylinderRadius']*Math['sin'](_0x788b55),this['pCylinderPos'][_0xc19360+0x1]=this['fCylinderHeight']/0x2-_0x481b39*_0x26550d,this['pCylinderPos'][_0xc19360+0x2]=-this['fCylinderRadius']*Math['cos'](_0x788b55),_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==_0x44cf2d||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x44cf2d?(_0x23966a=0.5+(0.1+0.01*_0x481b39)*Math['sin'](_0x788b55),_0xda562b=0.5+(0.1+0.01*_0x481b39)*Math['cos'](_0x788b55)):(_0x23966a=0.5-(0.5-0.01*_0x481b39)*Math['sin'](_0x788b55),_0xda562b=0.5+(0.5-0.01*_0x481b39)*Math['cos'](_0x788b55)),this['pCylinderTex'][_0xcec4ef++]=(0x2*_0x23966a*_0x48eb5f+0x1*_0x21ffe7)/0x1,this['pCylinderTex'][_0xcec4ef++]=(0x2*_0xda562b*_0x48eb5f+_0x4528b6*_0xcbf3c9)/_0xcbf3c9,_0xc19360+=0x3,this['pCylinderPos'][_0xc19360]=-this['fCylinderRadius']*Math['sin'](_0x788b55),this['pCylinderPos'][_0xc19360+0x1]=this['fCylinderHeight']/0x2-_0x481b39*_0x26550d,this['pCylinderPos'][_0xc19360+0x2]=-this['fCylinderRadius']*Math['cos'](_0x788b55),_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==_0x44cf2d||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x44cf2d?(_0x23966a=0.5+(0.1+0.01*_0x481b39)*Math['sin'](_0x788b55),_0xda562b=0.5+(0.1+0.01*_0x481b39)*Math['cos'](_0x788b55)):(_0x23966a=0.5-(0.5-0.01*_0x481b39)*Math['sin'](_0x788b55),_0xda562b=0.5+(0.5-0.01*_0x481b39)*Math['cos'](_0x788b55)),this['pCylinderTex'][_0xcec4ef++]=(0x2*_0x23966a*_0x48eb5f+0x1*_0x21ffe7)/0x1,this['pCylinderTex'][_0xcec4ef++]=(0x2*_0xda562b*_0x48eb5f+_0x4528b6*_0xcbf3c9)/_0xcbf3c9,_0xc19360+=0x3,this['pCylinderPos'][_0xc19360]=-this['fCylinderRadius']*Math['sin'](_0x4f2b3f),this['pCylinderPos'][_0xc19360+0x1]=this['fCylinderHeight']/0x2-(_0x481b39+0x1)*_0x26550d,this['pCylinderPos'][_0xc19360+0x2]=-this['fCylinderRadius']*Math['cos'](_0x4f2b3f),_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==_0x44cf2d||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x44cf2d?(_0x23966a=0.5+(0.1+0.01*(_0x481b39+0x1))*Math['sin'](_0x4f2b3f),_0xda562b=0.5+(0.1+0.01*(_0x481b39+0x1))*Math['cos'](_0x4f2b3f)):(_0x23966a=0.5-(0.5-0.01*(_0x481b39+0x1))*Math['sin'](_0x4f2b3f),_0xda562b=0.5+(0.5-0.01*(_0x481b39+0x1))*Math['cos'](_0x4f2b3f)),this['pCylinderTex'][_0xcec4ef++]=(0x2*_0x23966a*_0x48eb5f+0x1*_0x21ffe7)/0x1,this['pCylinderTex'][_0xcec4ef++]=(0x2*_0xda562b*_0x48eb5f+_0x4528b6*_0xcbf3c9)/_0xcbf3c9,_0xc19360+=0x3,this['pCylinderPos'][_0xc19360]=-this['fCylinderRadius']*Math['sin'](_0x788b55),this['pCylinderPos'][_0xc19360+0x1]=this['fCylinderHeight']/0x2-(_0x481b39+0x1)*_0x26550d,this['pCylinderPos'][_0xc19360+0x2]=-this['fCylinderRadius']*Math['cos'](_0x788b55),_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==_0x44cf2d||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x44cf2d?(_0x23966a=0.5+(0.1+0.01*(_0x481b39+0x1))*Math['sin'](_0x788b55),_0xda562b=0.5+(0.1+0.01*(_0x481b39+0x1))*Math['cos'](_0x788b55)):(_0x23966a=0.5-(0.5-0.01*(_0x481b39+0x1))*Math['sin'](_0x788b55),_0xda562b=0.5+(0.5-0.01*(_0x481b39+0x1))*Math['cos'](_0x788b55)),this['pCylinderTex'][_0xcec4ef++]=(0x2*_0x23966a*_0x48eb5f+0x1*_0x21ffe7)/0x1,this['pCylinderTex'][_0xcec4ef++]=(0x2*_0xda562b*_0x48eb5f+_0x4528b6*_0xcbf3c9)/_0xcbf3c9,_0xc19360+=0x3;}return this['nCylinderPosNum']=_0xc19360/0x3,this['nCylinderPosSize']=0x3,this['nCylinderTexSize']=0x2,_0xa87ede;}},{'key':'_CreateArcSphere','value':function(_0x17b8f4,_0x5a4278,_0x5e025d,_0x4a61b7,_0x3a8181){if(null!=this['pArcSpherePos']||null!=this['pArcSphereTex'])return _0x520965;if(_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']){if(_0x4a61b7>0x0||_0x3a8181<0x1)return SR_ERR_PARAM;}else{if(_0x17b8f4!=_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])return _0x86aef9;if(_0x5a4278>0x0||_0x5e025d<0x1)return SR_ERR_PARAM;}this['fImageWidth']=0x1,this['fImageHeight']=(_0x5e025d-_0x5a4278)/(_0x3a8181-_0x4a61b7),this['fTexCenterX']=(_0x5a4278+_0x5e025d)/0x2*this['fImageWidth'],this['fTexCenterY']=(_0x4a61b7+_0x3a8181)/0x2*this['fImageHeight'],this['fTexRadius']=(_0x5e025d-_0x5a4278)/0x2*this['fImageWidth'];var _0x32c935=0x19;if(null==this['pArcSphereTex']&&(this['pArcSphereTex']=new Float32Array(0x3960),null==this['pArcSphereTex']))return _0x3d12cf;if(null==this['pArcSpherePos']&&(this['pArcSpherePos']=new Float32Array(0x5610),null==this['pArcSpherePos']))return _0x3d12cf;var _0x9aa956=new Float32Array(0x40);if(null==_0x9aa956)return _0x3d12cf;var _0x16db8c=_0xa87ede;if(_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?_0x16db8c=this['_ComputeLatitudeHorizontal'](_0x9aa956,_0x32c935,0x28,0x1):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&(_0x16db8c=this['_ComputeLatitudeVertical'](_0x9aa956,_0x32c935,0x28,0x1)),_0xa87ede!=_0x16db8c)return this['pArcSpherePos']=null,this['pArcSphereTex']=null,_0x16db8c;this['fFirstLatitude']=_0x9aa956[0xc],this['fLastLatitude']=_0x9aa956[0x33];var _0x57502c=0x0,_0x5595c4=0x0,_0x5f4e16=new Float32Array(0x5);if(null==_0x5f4e16)return this['pArcSpherePos']=null,this['pArcSphereTex']=null,_0x3d12cf;for(var _0x2de16a=_0x530a52/0x18,_0x4431c2=-0xc;_0x4431c2<0xc;++_0x4431c2)for(var _0x27ba1b=_0x4431c2<0x0?-_0x4431c2:_0x4431c2,_0x2ade6b=_0x4431c2<0x0?_0x27ba1b:_0x27ba1b+0x1,_0x495f79=_0x4431c2<0x0?0x40-0x2*(_0x27ba1b-0x1)-0x2:0x40-0x2*_0x27ba1b-0x2,_0x123bfe=0x0;_0x123bfe<_0x495f79;++_0x123bfe,++_0x2ade6b)_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b],_0x5f4e16),this['pArcSpherePos'][_0x57502c]=_0x5f4e16[0x0],this['pArcSpherePos'][_0x57502c+0x1]=_0x5f4e16[0x1],this['pArcSpherePos'][_0x57502c+0x2]=_0x5f4e16[0x2],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x3],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x4],_0x57502c+=0x3,_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b],_0x5f4e16),this['pArcSpherePos'][_0x57502c]=_0x5f4e16[0x0],this['pArcSpherePos'][_0x57502c+0x1]=_0x5f4e16[0x1],this['pArcSpherePos'][_0x57502c+0x2]=_0x5f4e16[0x2],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x3],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x4],_0x57502c+=0x3,_0x4431c2>=0x0&&0x0==_0x123bfe?_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b-0x1],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b-0x1],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b-0x1],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b-0x1],_0x5f4e16),this['pArcSpherePos'][_0x57502c]=_0x5f4e16[0x0],this['pArcSpherePos'][_0x57502c+0x1]=_0x5f4e16[0x1],this['pArcSpherePos'][_0x57502c+0x2]=_0x5f4e16[0x2],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x3],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x4],_0x57502c+=0x3,_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b],_0x5f4e16),this['pArcSpherePos'][_0x57502c]=_0x5f4e16[0x0],this['pArcSpherePos'][_0x57502c+0x1]=_0x5f4e16[0x1],this['pArcSpherePos'][_0x57502c+0x2]=_0x5f4e16[0x2],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x3],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x4],_0x57502c+=0x3,_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b],_0x5f4e16),this['pArcSpherePos'][_0x57502c]=_0x5f4e16[0x0],this['pArcSpherePos'][_0x57502c+0x1]=_0x5f4e16[0x1],this['pArcSpherePos'][_0x57502c+0x2]=_0x5f4e16[0x2],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x3],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x4],_0x57502c+=0x3,_0x4431c2<0x0&&_0x123bfe==_0x495f79-0x1?_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b+0x1],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b+0x1],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b+0x1],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b+0x1],_0x5f4e16),this['pArcSpherePos'][_0x57502c]=_0x5f4e16[0x0],this['pArcSpherePos'][_0x57502c+0x1]=_0x5f4e16[0x1],this['pArcSpherePos'][_0x57502c+0x2]=_0x5f4e16[0x2],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x3],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x4],_0x57502c+=0x3;return this['nArcSpherePosNum']=_0x57502c/0x3,this['nArcSpherePosSize']=0x3,this['nArcSphereTexSize']=0x2,_0x9aa956=null,_0x5f4e16=null,_0xa87ede;}},{'key':'_ComputeIntersectionOfPlaneAndLongtitude','value':function(_0x45fd53,_0x47d03e,_0x217c54){if(null==_0x45fd53)return _0x31ddcf;var _0x2976b1,_0x4374a3=_0x45fd53[0x1]*_0x217c54,_0x1eff9b=_0x45fd53[0x2]*_0x217c54*Math['sin'](_0x47d03e),_0x68ac01=-_0x45fd53[0x3],_0x257e8f=0x0,_0x4a835b=0x0;if(_0x45fd53[0x1]>0x0){var _0x375aae=_0x4374a3*_0x4374a3*_0x68ac01*_0x68ac01-(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b)*(_0x68ac01*_0x68ac01-_0x1eff9b*_0x1eff9b);_0x257e8f=(-_0x4374a3*_0x68ac01-Math['sqrt'](_0x375aae))/(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b),_0x375aae=_0x1eff9b*_0x1eff9b*_0x68ac01*_0x68ac01-(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b)*(_0x68ac01*_0x68ac01-_0x4374a3*_0x4374a3),_0x4a835b=(-_0x1eff9b*_0x68ac01+Math['sqrt'](_0x375aae))/(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b);}if(_0x45fd53[0x1]<0x0){var _0x4908e2=_0x4374a3*_0x4374a3*_0x68ac01*_0x68ac01-(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b)*(_0x68ac01*_0x68ac01-_0x1eff9b*_0x1eff9b);_0x257e8f=(-_0x4374a3*_0x68ac01+Math['sqrt'](_0x4908e2))/(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b),_0x4908e2=_0x1eff9b*_0x1eff9b*_0x68ac01*_0x68ac01-(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b)*(_0x68ac01*_0x68ac01-_0x4374a3*_0x4374a3),_0x4a835b=(-_0x1eff9b*_0x68ac01+Math['sqrt'](_0x4908e2))/(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b);}return _0x217c54*Math['cos'](_0x47d03e)*_0x4a835b,_0x2976b1=-_0x217c54*_0x257e8f,-_0x217c54*Math['sin'](_0x47d03e)*_0x4a835b,Math['asin'](_0x2976b1/_0x217c54);}},{'key':'_ComputeLatitudeHorizontal','value':function(_0x1d9035,_0x4201d9,_0x55cdcb,_0x17ff34){if(null==_0x1d9035)return _0x31ddcf;var _0x28b004=0x0,_0x96e209=(this['fTexCenterY'],_0x530a52/(_0x4201d9-0x1)),_0x563232=_0x530a52*this['fTexCenterY']/(0x2*this['fTexRadius']),_0x295ce4=Math['asin'](this['fTexCenterY']/this['fTexRadius']),_0x1c880c=Math['atan'](Math['cos'](_0x563232)/(Math['sin'](_0x563232)-Math['sin'](_0x295ce4))),_0x456365=new Float32Array(0x4);_0x456365[0x0]=0x0,_0x456365[0x1]=Math['sin'](_0x1c880c),_0x456365[0x2]=Math['cos'](_0x1c880c),_0x456365[0x3]=-_0x17ff34*Math['sin'](_0x1c880c)*Math['sin'](_0x295ce4),_0x1d9035[_0x28b004++]=_0x563232;for(var _0x27acbc=0x1;_0x27acbc<=(_0x4201d9-0x3)/0x2;++_0x27acbc){var _0x3d819d=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0x456365,1.5707963-_0x96e209*_0x27acbc,_0x17ff34);_0x1d9035[_0x28b004++]=_0x3d819d;}for(var _0x416567=-Math['asin']((this['fImageHeight']-this['fTexCenterY'])/this['fTexRadius']),_0xfbeb74=_0x295ce4,_0x757933=(_0xfbeb74-_0x416567)/(_0x55cdcb-0x1),_0x2194fe=0x0;_0x2194fe<_0x55cdcb;++_0x2194fe)_0x1d9035[_0x28b004++]=_0xfbeb74-_0x2194fe*_0x757933;var _0x9de884=_0x416567,_0x950ea=_0x530a52*(this['fTexCenterY']-this['fImageHeight'])/(0x2*this['fTexRadius']);_0x1c880c=Math['atan'](Math['cos'](_0x950ea)/(Math['sin'](_0x9de884)-Math['sin'](_0x950ea)));var _0x5db530=new Float32Array(0x4);_0x5db530[0x0]=0x0,_0x5db530[0x1]=-Math['sin'](_0x1c880c),_0x5db530[0x2]=Math['cos'](_0x1c880c),_0x5db530[0x3]=_0x17ff34*Math['sin'](_0x1c880c)*Math['sin'](_0x9de884);for(var _0x4faffc=0x1;_0x4faffc<=(_0x4201d9-0x3)/0x2;++_0x4faffc){var _0x4d8954=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0x5db530,_0x96e209*_0x4faffc,_0x17ff34);_0x1d9035[_0x28b004++]=_0x4d8954;}return _0x1d9035[_0x28b004++]=_0x950ea,_0x456365=null,_0x5db530=null,_0xa87ede;}},{'key':'_ComputeVertexAndTexturePosHorizontal','value':function(_0x237ede,_0x4d0778,_0x13a528,_0x4db42c){if(null==_0x4db42c)return _0x31ddcf;_0x4db42c[0x2]=-_0x237ede*Math['cos'](_0x13a528)*Math['sin'](_0x4d0778),_0x4db42c[0x0]=_0x237ede*Math['cos'](_0x13a528)*Math['cos'](_0x4d0778),_0x4db42c[0x1]=_0x237ede*Math['sin'](_0x13a528);var _0x202bd0,_0x2a92e7=-Math['asin'](-_0x4db42c[0x2]/_0x237ede)/_0x530a52;_0x202bd0=_0x13a528>=0x0?Math['acos'](_0x4db42c[0x0]/Math['sqrt'](_0x4db42c[0x0]*_0x4db42c[0x0]+_0x4db42c[0x1]*_0x4db42c[0x1])):6.2831852-Math['acos'](_0x4db42c[0x0]/Math['sqrt'](_0x4db42c[0x0]*_0x4db42c[0x0]+_0x4db42c[0x1]*_0x4db42c[0x1]));var _0x41db05=this['fTexCenterX']-this['fTexRadius'],_0x53c029=this['fTexRadius']-this['fTexCenterY'];return _0x4db42c[0x3]=(Math['cos'](_0x202bd0)*this['fTexRadius']*(0x1+0x2*_0x2a92e7)+this['fTexRadius']+_0x41db05)/this['fImageWidth'],_0x4db42c[0x4]=(Math['sin'](_0x202bd0)*this['fTexRadius']*(-0x1-0x2*_0x2a92e7)+this['fTexRadius']-_0x53c029)/this['fImageHeight'],_0xa87ede;}},{'key':'_ComputeLatitudeVertical','value':function(_0x34484c,_0xb0c36,_0x2a9bf2,_0x46e820){if(null==_0x34484c)return SR_ERR_PARAM;var _0x59bfbe=0x0,_0x328331=_0x530a52/(_0xb0c36-0x1),_0x44937f=_0x530a52*this['fTexCenterX']/(0x2*this['fTexRadius']),_0x5ed7ac=Math['asin'](this['fTexCenterX']/this['fTexRadius']),_0x5524c3=Math['atan'](Math['cos'](_0x44937f)/(Math['sin'](_0x44937f)-Math['sin'](_0x5ed7ac))),_0x1969e8=new Float32Array(0x4);_0x1969e8[0x0]=0x0,_0x1969e8[0x1]=Math['sin'](_0x5524c3),_0x1969e8[0x2]=Math['cos'](_0x5524c3),_0x1969e8[0x3]=-_0x46e820*Math['sin'](_0x5524c3)*Math['sin'](_0x5ed7ac),_0x34484c[_0x59bfbe++]=_0x44937f;for(var _0x20ee3e=0x1;_0x20ee3e<=(_0xb0c36-0x3)/0x2;++_0x20ee3e){var _0x2386b2=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0x1969e8,1.5707963-_0x328331*_0x20ee3e,_0x46e820);_0x34484c[_0x59bfbe++]=_0x2386b2;}for(var _0x2c3055=-Math['asin']((this['fImageWidth']-this['fTexCenterX'])/this['fTexRadius']),_0x40c0b8=_0x5ed7ac,_0x39678a=(_0x40c0b8-_0x2c3055)/(_0x2a9bf2-0x1),_0x44e4ac=0x0;_0x44e4ac<_0x2a9bf2;++_0x44e4ac)_0x34484c[_0x59bfbe++]=_0x40c0b8-_0x44e4ac*_0x39678a;var _0x49fb50=_0x2c3055,_0x654a8=_0x530a52*(this['fTexCenterX']-this['fImageWidth'])/(0x2*this['fTexRadius']);_0x5524c3=Math['atan'](Math['cos'](_0x654a8)/(Math['sin'](_0x49fb50)-Math['sin'](_0x654a8)));var _0xae5f17=new Float32Array(0x4);_0xae5f17[0x0]=0x0,_0xae5f17[0x1]=-Math['sin'](_0x5524c3),_0xae5f17[0x2]=Math['cos'](_0x5524c3),_0xae5f17[0x3]=_0x46e820*Math['sin'](_0x5524c3)*Math['sin'](_0x49fb50);for(var _0x2349b8=0x1;_0x2349b8<=(_0xb0c36-0x3)/0x2;++_0x2349b8){var _0x3b0f29=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0xae5f17,_0x328331*_0x2349b8,_0x46e820);_0x34484c[_0x59bfbe++]=_0x3b0f29;}return _0x34484c[_0x59bfbe++]=_0x654a8,_0x1969e8=null,_0xae5f17=null,_0xa87ede;}},{'key':'_ComputeVertexAndTexturePosVertical','value':function(_0x534f39,_0x159869,_0xc2a7c8,_0x17e0da){if(null==_0x17e0da)return SR_ERR_PARAM;_0x17e0da[0x2]=-_0x534f39*Math['cos'](_0xc2a7c8)*Math['sin'](_0x159869),_0x17e0da[0x1]=_0x534f39*Math['cos'](_0xc2a7c8)*Math['cos'](_0x159869),_0x17e0da[0x0]=-_0x534f39*Math['sin'](_0xc2a7c8);var _0xa5e24d,_0x10e2f0=-Math['asin'](-_0x17e0da[0x2]/_0x534f39)/_0x530a52;_0xa5e24d=_0x159869<=1.5707963?Math['acos'](_0x17e0da[0x0]/Math['sqrt'](_0x17e0da[0x0]*_0x17e0da[0x0]+_0x17e0da[0x1]*_0x17e0da[0x1])):6.2831852-Math['acos'](_0x17e0da[0x0]/Math['sqrt'](_0x17e0da[0x0]*_0x17e0da[0x0]+_0x17e0da[0x1]*_0x17e0da[0x1]));var _0x4f865f=this['fTexCenterX']-this['fTexRadius'],_0x10dbcb=this['fTexRadius']-this['fTexCenterY'];return _0x17e0da[0x3]=(Math['cos'](_0xa5e24d)*this['fTexRadius']*(0x1+0x2*_0x10e2f0)+this['fTexRadius']+_0x4f865f)/this['fImageWidth'],_0x17e0da[0x4]=(Math['sin'](_0xa5e24d)*this['fTexRadius']*(-0x1-0x2*_0x10e2f0)+this['fTexRadius']-_0x10dbcb)/this['fImageHeight'],_0xa87ede;}},{'key':'InitCamera','value':function(_0xcc10d5){if(null!=this['pCamera'])return SR_ERR_CALL_ORDER;switch(_0xcc10d5){case _0x186ff9['SR_DE_NULL']:case _0x186ff9['SR_DE_FISH_ORIGINAL']:case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:case _0x186ff9['SR_DE_FISH_PTZ_WALL']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:return _0xa87ede;case _0x186ff9['SR_DE_FISH_SEMISPHERE']:if(this['pCamera']=new _0x3b657c(),null==this['pCamera'])return _0x3d12cf;this['pCamera']['SetFov'](_0x13b181),this['pCamera']['SetNear'](_0x49aaae),this['pCamera']['SetFar'](_0x26dab3),this['fRotateX']=1.57,this['pCamera']['SetPitch'](3.14-this['fRotateX']),this['fScale']=0x3,this['pCamera']['SetScale'](this['fScale']);break;case _0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:if(this['pCamera']=new _0x3b657c(),null==this['pCamera'])return _0x3d12cf;this['pCamera']['SetFov'](_0x13b181),this['pCamera']['SetNear'](_0x49aaae),this['pCamera']['SetFar'](_0x26dab3),this['fRotateX']=0.785,this['pCamera']['SetPitch'](-this['fRotateX']),this['fScale']=0x6,this['pCamera']['SetScale'](this['fScale']);break;case _0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:if(this['pCamera']=new _0x3b657c(),null==this['pCamera'])return _0x3d12cf;this['pCamera']['SetOrtho'](!0x0),this['pCamera']['SetNear'](_0x49aaae),this['pCamera']['SetFar'](_0x26dab3),this['fScale']=0x3,this['pCamera']['SetScale'](this['fScale']);break;case _0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:if(this['pCamera']=new _0x3b657c(),null==this['pCamera'])return _0x3d12cf;this['pCamera']['SetFov'](_0x13b181),this['pCamera']['SetNear'](_0x49aaae),this['pCamera']['SetFar'](_0x26dab3),this['fScale']=0x2,this['pCamera']['SetScale'](this['fScale']),_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0xcc10d5?(this['fRotateLimitX']=_0x44d661,this['fRotateLimitY']=_0x5affea):(this['fRotateLimitX']=_0x438d57,this['fRotateLimitY']=_0x2506c4);break;default:return _0x86aef9;}return _0xa87ede;}},{'key':'SR_SetViewParam','value':function(_0x46d073,_0x6189a7){if(!this['b3DPort'])return _0x86aef9;switch(_0x46d073){case _0x394973:if((this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])&&(_0x6189a7>this['fRotateLimitX']||_0x6189a7<-this['fRotateLimitX']))return _0x31ddcf;this['fRotateX']=_0x6189a7;break;case _0x42f4b3:if((this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])&&(_0x6189a7>this['fRotateLimitY']||_0x6189a7<-this['fRotateLimitY']))return _0x31ddcf;this['fRotateY']=_0x6189a7;break;case _0x339c63:if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_SEMISPHERE']){if(_0x6189a7<-0.8||_0x6189a7>0x384)return _0x31ddcf;}else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']){if(_0x6189a7<0x0||_0x6189a7>0x384)return _0x31ddcf;}else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){if(_0x6189a7<-0.3||_0x6189a7>0x5)return _0x31ddcf;this['_ComputeRotateLimits']();}}}this['fScale']=_0x6189a7;break;default:return _0x86aef9;}return _0xa87ede;}},{'key':'SR_GetViewParam','value':function(_0x52c4fa,_0x205d9b){if(!this['b3DPort'])return _0x520965;var _0x50830b=0x0;switch(_0x52c4fa){case _0x394973:_0x50830b=this['fRotateX'];break;case _0x42f4b3:_0x50830b=this['fRotateY'];break;case _0x339c63:_0x50830b=this['fScale'];break;default:return _0x86aef9;}return _0x205d9b['fValue']=_0x50830b,_0xa87ede;}},{'key':'SR_SetCallBack','value':function(_0x5da1bd,_0x2bbf0b,_0x3e50e3){switch(_0x3e50e3){case _0x444649:this['pfuncCBIn']=_0x5da1bd,this['pUserIn']=_0x2bbf0b;break;case _0x4f7368:this['pfuncCBOut']=_0x5da1bd,this['pUserOut']=_0x2bbf0b;break;default:return _0x86aef9;}return _0xa87ede;}},{'key':'SR_SetRenderState','value':function(_0x2206d5,_0x3e7889){switch(_0x2206d5){case _0x11cf81:if(this['b3DPort'])return _0x86aef9;break;case _0x57ef5a:if(!this['b3DPort'])return _0x86aef9;Math['abs'](_0x3e7889-0x0)<_0x4a23c6?this['bCullBack']=!0x1:this['bCullBack']=!0x0;break;default:return _0x86aef9;}return _0xa87ede;}},{'key':'SR_SetPTZColor','value':function(_0x22a340,_0x2d7345){return null==this['pFishParamManager']?_0x520965:this['pFishParamManager']['SetPTZColor'](_0x22a340,_0x2d7345);}},{'key':'SR_GetPTZColor','value':function(_0xaeb36f,_0x463679){return null==this['pFishParamManager']?_0x520965:this['pFishParamManager']['GetPTZColor'](_0xaeb36f,_0x463679);}},{'key':'SR_SetPTZPort','value':function(_0x5c99b6){return null==this['pFishParamManager']?_0x520965:this['pFishParamManager']['SetPTZPort'](_0x5c99b6);}},{'key':'SR_GetPTZPort','value':function(_0x1d4d34,_0x29e620,_0x25da3e){return null==this['pFishParamManager']?_0x520965:null==_0x25da3e?_0x31ddcf:this['pFishParamManager']['GetPTZPort'](_0x1d4d34,_0x29e620,_0x25da3e);}},{'key':'SR_GetCaptureSize','value':function(_0x3d6a1f){if(null==_0x3d6a1f)return _0x31ddcf;if(null==this['ctx'])return _0x520965;if(null==_0x3d6a1f['nWidth']||null==_0x3d6a1f['nWidth']||null==_0x3d6a1f['nHeight']||null==_0x3d6a1f['nHeight'])return _0x31ddcf;var _0x3077f0=0x0,_0x2f261a=0x0;if(0x0==_0x3d6a1f['nWidth']&&0x0==_0x3d6a1f['nHeight'])switch(this['enDisplayEffect']){case _0x186ff9['SR_DE_FISH_PTZ_WALL']:case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:_0x3077f0=Math['round'](0x5*this['frameDisplayHeight']/0x8),_0x2f261a=Math['round'](0x3*_0x3077f0/0x4);break;case _0x186ff9['SR_DE_NULL']:_0x3077f0=Math['round']((this['fSrcUseRight']-this['fSrcUseLeft'])*this['frameDisplayWidth']),_0x2f261a=Math['round']((this['fSrcUseBottom']-this['fSrcUseTop'])*this['frameDisplayHeight']);break;case _0x186ff9['SR_DE_FISH_ORIGINAL']:case _0x186ff9['SR_DE_FISH_SEMISPHERE']:case _0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:_0x3077f0=Math['round'](this['frameDisplayWidth']),_0x2f261a=Math['round'](this['frameDisplayHeight']);break;case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:this['frameDisplayHeight']>=0x800?(_0x3077f0=0x1800,_0x2f261a=0x360):this['frameDisplayHeight']>=0x600&&0x800>this['frameDisplayHeight']?(_0x3077f0=0x1000,_0x2f261a=0x240):(_0x3077f0=Math['round'](3.14*this['frameDisplayHeight']/1.6),_0x2f261a=Math['round'](0x9*this['frameDisplayWidth']/0x10),_0x3077f0=Math['round'](0x2*_0x3077f0),_0x2f261a=Math['round'](_0x2f261a/0x2));break;case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:this['frameDisplayHeight']>=0xc00?(_0x3077f0=0x1000,_0x2f261a=0x900):this['frameDisplayHeight']>=0x800&&0xc00>this['frameDisplayHeight']?(_0x3077f0=0xc00,_0x2f261a=0x6c0):this['frameDisplayHeight']>=0x600&&0x800>this['frameDisplayHeight']?(_0x3077f0=0x800,_0x2f261a=0x480):(_0x3077f0=Math['round'](3.14*this['frameDisplayHeight']/1.6),_0x2f261a=Math['round'](0x9*_0x3077f0/0x10));break;case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:_0x3077f0=Math['round'](this['frameDisplayHeight']),_0x2f261a=Math['round'](0x9*_0x3077f0/0x10);break;default:return _0x31ddcf;}else _0x3077f0=Math['round'](_0x3d6a1f['nWidth']),_0x2f261a=Math['round'](_0x3d6a1f['nHeight']);return _0x3077f0<0x10||_0x2f261a<0x10?_0x31ddcf:(this['nCaptureWidth']=0x4*Math['round'](_0x3077f0/0x4),this['nCaptureHeight']=Math['round'](_0x2f261a),_0x3d6a1f['nWidth']=this['nCaptureWidth'],_0x3d6a1f['nHeight']=this['nCaptureHeight'],_0x3d6a1f['nBufferLen']=this['nCaptureWidth']*this['nCaptureHeight']*0x4,_0xa87ede);}},{'key':'SR_CaptureScreen','value':function(_0x182ed1){var _0x2c8855=_0xa87ede;if(_0x2c8855=this['_BeginCapture'](),_0xa87ede!=_0x2c8855)return _0x2c8855;if(0x0==this['videoShaderProgram']||0x0==this['vertexPosBuffer']||0x0==this['texturePosBuffer'])return _0x520965;this['ctx']['useProgram'](this['videoShaderProgram']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x517ee9=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'xy');if(_0x517ee9<0x0)return _0x4d26c0;this['ctx']['vertexAttribPointer'](_0x517ee9,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x517ee9),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x14700d=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'uv');if(_0x14700d<0x0)return _0x4d26c0;this['ctx']['vertexAttribPointer'](_0x14700d,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x14700d),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null);var _0x51a1ec=this['enDisplayEffect'],_0x34fe9c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCapture');if(_0x34fe9c<=0x0)return _0x4d26c0;switch(this['ctx']['uniform1i'](_0x34fe9c,0x1),_0x51a1ec){case _0x186ff9['SR_DE_NULL']:break;case _0x186ff9['SR_DE_FISH_ORIGINAL']:case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:case _0x186ff9['SR_DE_FISH_PTZ_WALL']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:if(null==this['pFishParamManager'])return _0x520965;var _0x1fd457={};if(_0x2c8855=this['pFishParamManager']['GetRenderParam'](this['nFECPort'],_0x1fd457),_0xa87ede!=_0x2c8855)return _0x2c8855;if(_0x186ff9['SR_DE_FISH_ORIGINAL']==_0x51a1ec){var _0x5ed42b=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bBlack');if(_0x5ed42b<=0x0)return _0x4d26c0;this['ctx']['uniform1i'](_0x5ed42b,_0x1fd457['bBlack']);var _0x22c412=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCut');if(_0x22c412<=0x0)return _0x4d26c0;this['ctx']['uniform1i'](_0x22c412,_0x1fd457['bCut']);}if(_0x186ff9['SR_DE_FISH_PTZ_CEILING']==_0x51a1ec||_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==_0x51a1ec||_0x186ff9['SR_DE_FISH_PTZ_WALL']==_0x51a1ec){var _0x1be46e=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleCos');if(_0x1be46e<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x1be46e,_0x1fd457['fCosH']);var _0x4cee7f=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleSin');if(_0x4cee7f<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x4cee7f,_0x1fd457['fSinH']);var _0x34ae1c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleCos');if(_0x34ae1c<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x34ae1c,_0x1fd457['fCosV']);var _0x300454=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleSin');if(_0x300454<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x300454,_0x1fd457['fSinV']);var _0x2862f4=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fZoom');if(_0x2862f4<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x2862f4,_0x1fd457['fZoom']);}if(_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']==_0x51a1ec||_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']==_0x51a1ec||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']==_0x51a1ec||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']==_0x51a1ec){var _0x11460a=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fAngle');if(_0x11460a<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x11460a,_0x1fd457['fAngle']);}var _0x25ff1c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX1');if(_0x25ff1c<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x25ff1c,_0x1fd457['fRXLeft']);var _0x558e2c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX2');if(_0x558e2c<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x558e2c,_0x1fd457['fRXRight']);var _0x1f7592=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY1');if(_0x1f7592<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x1f7592,_0x1fd457['fRYTop']);var _0x4966fe=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY2');if(_0x4966fe<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x4966fe,_0x1fd457['fRYBottom']);break;case _0x186ff9['SR_DE_FISH_SEMISPHERE']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](3.14-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['canvas']['width'],this['canvas']['height']);var _0x5e2a11=this['pCamera']['GetView'](),_0xf45b1a=this['pCamera']['GetProj'](),_0x3aaee2=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x3aaee2<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x3aaee2,!0x1,_0x5e2a11);var _0x51d4ee=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x51d4ee<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x51d4ee,!0x1,_0xf45b1a);break;case _0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['canvas']['width'],this['canvas']['height']);var _0x4ad072=this['pCamera']['GetView'](),_0x3a7e99=this['pCamera']['GetProj'](),_0x8e98a2=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x8e98a2<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x8e98a2,!0x1,_0x4ad072);var _0x5b3983=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x5b3983<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x5b3983,!0x1,_0x3a7e99);break;default:return _0x86aef9;}if(this['nCaptureWidth']<=0x0||this['nCaptureHeight']<=0x0)return _0x4fea1b;if(this['ctx']['viewport'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight']),this['ctx']['clearColor'](0x0,0x0,0x0,0x1),this['ctx']['clear'](this['ctx']['COLOR_BUFFER_BIT']|this['ctx']['DEPTH_BUFFER_BIT']),this['b3DPort']&&(this['ctx']['enable'](this['ctx']['DEPTH_TEST']),this['ctx']['depthFunc'](this['ctx']['LESS']),this['ctx']['depthMask'](!0x0),0x1==this['bCullBack']?this['ctx']['enable'](this['ctx']['CULL_FACE']):this['ctx']['disable'](this['ctx']['CULL_FACE'])),this['enPixelFormat']==_0xa01ff6?this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]):(this['enPixelFormat']==_0x58bd8b||this['enPixelFormat']==_0x264b64)&&(this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),this['ctx']['activeTexture'](this['ctx']['TEXTURE1']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x1]),this['ctx']['activeTexture'](this['ctx']['TEXTURE2']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x2])),this['onlySupportedWebGL1']||this['ctx']['clearBufferfi'](this['ctx']['DEPTH_STENCIL'],0x0,0x1,0x0),0x0==this['b3DPort'])this['ctx']['drawArrays'](this['ctx']['TRIANGLE_FAN'],0x0,0x4);else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_SEMISPHERE']){if(this['nSemiSpherePosNum']<=0x0)return _0x520965;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nSemiSpherePosNum']);}else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']){if(this['nCylinderPosNum']<=0x0)return _0x520965;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nCylinderPosNum']);}else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){if(this['nArcSpherePosNum']<=0x0)return _0x520965;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nArcSpherePosNum']);}}}}return this['ctx']['useProgram'](null),null!=this['pfuncCBIn']&&this['pfuncCBIn'](this['pUserIn']),null!=this['pfuncCBOut']&&this['pfuncCBOut'](this['pUserOut']),_0x2c8855=this['_EndCapture'](_0x182ed1),_0xa87ede!=_0x2c8855?_0x2c8855:_0xa87ede;}},{'key':'SR_SetImagePostProcess','value':function(_0x2048cc,_0x1ac4fe){if(null==this['ctx'])return _0x520965;if(_0xe529b7==_0x2048cc||_0x2d33eb==_0x2048cc){if(0x0-_0x1ac4fe>_0x4a23c6||_0x1ac4fe-0x1>_0x4a23c6)return _0x31ddcf;}else{if((_0x46c7b3==_0x2048cc||_0x199c31==_0x2048cc||_0x414976==_0x2048cc)&&(-0x1-_0x1ac4fe>_0x4a23c6||_0x1ac4fe-0x1>_0x4a23c6))return _0x31ddcf;}switch(_0x2048cc){case _0x46c7b3:this['fBrightness']=_0x1ac4fe;break;case _0x2d33eb:this['fHue']=_0x1ac4fe;break;case _0x199c31:this['fSaturation']=_0x1ac4fe;break;case _0x414976:this['fContrast']=_0x1ac4fe;break;case _0xe529b7:this['fSharpness']=_0x1ac4fe;break;default:return _0x86aef9;}return Math['abs'](this['fBrightness']-0x0)<_0x4a23c6&&Math['abs'](this['fHue']-0x0)<_0x4a23c6&&Math['abs'](this['fSaturation']-0x0)<_0x4a23c6&&Math['abs'](this['fContrast']-0x0)<_0x4a23c6&&Math['abs'](this['fSharpness']-0x0)<_0x4a23c6?this['nPostProc']=0x0:this['nPostProc']=0x1,_0xa87ede;}},{'key':'_BeginCapture','value':function(){var _0x594b67=_0xa87ede;return 0x0==this['bCaptureResInit']&&(_0x594b67=this['_InitRenderTarget'](this['nCaptureWidth'],this['nCaptureHeight'],!0x1,!0x0),_0xa87ede!=_0x594b67)?_0x594b67:(_0x594b67=this['_Resize'](this['nCaptureWidth'],this['nCaptureHeight'],!0x1,!0x0),_0xa87ede!=_0x594b67?_0x594b67:(this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],this['nCaptureFBO']),this['bIsCapturing']=!0x0,_0xa87ede));}},{'key':'_InitRenderTarget','value':function(_0x5a333c,_0x43881f,_0x249770,_0x2948c0){if(0x0!=this['nCaptureRTTex']||0x0!=this['nCaptureFBO'])return _0x520965;if(_0x5a333c<=0x0||_0x43881f<=0x0)return _0x31ddcf;if(this['nCaptureRTTex']=this['ctx']['createTexture'](),this['nCaptureRTTex']<=0x0)return _0x4d26c0;if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nCaptureRTTex']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],_0x5a333c,_0x43881f,0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],null),0x0==this['nCaptureFBO']&&(this['nCaptureFBO']=this['ctx']['createFramebuffer'](),this['nCaptureFBO']<=0x0))return _0x4d26c0;if(this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],this['nCaptureFBO']),this['ctx']['framebufferTexture2D'](this['ctx']['FRAMEBUFFER'],this['ctx']['COLOR_ATTACHMENT0'],this['ctx']['TEXTURE_2D'],this['nCaptureRTTex'],0x0),0x1==_0x2948c0&&0x0==this['nCaptureDepthbuffer']){if(this['nCaptureDepthbuffer']=this['ctx']['createRenderbuffer'](),this['nCaptureDepthbuffer']<=0x0)return _0x4d26c0;this['ctx']['bindRenderbuffer'](this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']),this['ctx']['renderbufferStorage'](this['ctx']['RENDERBUFFER'],this['ctx']['DEPTH_COMPONENT16'],_0x5a333c,_0x43881f),this['ctx']['framebufferRenderbuffer'](this['ctx']['FRAMEBUFFER'],this['ctx']['DEPTH_ATTACHMENT'],this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']);}return this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),this['nCaptureFBOWidth']=_0x5a333c,this['nCaptureFBOHeight']=_0x43881f,this['bCaptureResInit']=!0x0,_0xa87ede;}},{'key':'_Resize','value':function(_0xcfe8c4,_0x52f7d1,_0x42dc08,_0x357e6b){if(this['nCaptureFBOWidth']!=_0xcfe8c4||this['nCaptureFBOHeight']!=_0x52f7d1){if(this['nCaptureFBOWidth']=_0xcfe8c4,this['nCaptureFBOHeight']=_0x52f7d1,0x0!=this['nCaptureRTTex']&&(this['ctx']['deleteTexture'](this['nCaptureRTTex']),this['nCaptureRTTex']=0x0),0x0!=this['nCaptureDepthbuffer']&&(this['ctx']['deleteRenderbuffer'](this['nCaptureDepthbuffer']),this['nCaptureDepthbuffer']=0x0),0x0==this['nCaptureRTTex']&&(this['nCaptureRTTex']=this['ctx']['createTexture'](),this['nCaptureRTTex']<=0x0))return _0x4d26c0;if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nCaptureRTTex']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['nCaptureFBOWidth'],this['nCaptureFBOHeight'],0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],null),this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],this['nCaptureFBO']),this['ctx']['framebufferTexture2D'](this['ctx']['FRAMEBUFFER'],this['ctx']['COLOR_ATTACHMENT0'],this['ctx']['TEXTURE_2D'],this['nCaptureRTTex'],0x0),0x1==_0x357e6b&&0x0==this['nCaptureDepthbuffer']){if(this['nCaptureDepthbuffer']=this['ctx']['createRenderbuffer'](),this['nCaptureDepthbuffer']<=0x0)return _0x4d26c0;this['ctx']['bindRenderbuffer'](this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']),this['ctx']['renderbufferStorage'](this['ctx']['RENDERBUFFER'],this['ctx']['DEPTH_COMPONENT16'],_0xcfe8c4,_0x52f7d1),this['ctx']['framebufferRenderbuffer'](this['ctx']['FRAMEBUFFER'],this['ctx']['DEPTH_ATTACHMENT'],this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']);}this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null);}return _0xa87ede;}},{'key':'_EndCapture','value':function(_0x4c1472){return null==this['ctx']?_0x520965:null==_0x4c1472['pBuffer']||null==_0x4c1472['pBuffer']?_0x31ddcf:(this['ctx']['readPixels'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight'],this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x4c1472['pBuffer']),this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),this['bIsCapturing']=!0x1,_0xa87ede);}},{'key':'_ResizeFrameData','value':function(_0x5bdf2c,_0xb05249,_0x32fafb,_0x14166a){if(0x0==_0xb05249%0x8&&null==_0x14166a)return this['frameDisplayWidth']=Math['round'](_0xb05249),this['frameDisplayHeight']=Math['round'](_0x32fafb),this['pFrameData']=_0x5bdf2c,_0xa87ede;if(null!=_0x14166a&&0x0==_0x14166a['nCropBottom']&&0x0==_0x14166a['nCropLeft']&&0x0==_0x14166a['nCropRight']&&0x0==_0x14166a['nCropTop']&&0x0==_0xb05249%0x8)return this['frameDisplayWidth']=Math['round'](_0xb05249),this['frameDisplayHeight']=Math['round'](_0x32fafb),this['pFrameData']=_0x5bdf2c,_0xa87ede;if((null==this['pFrameData']||this['frameDisplayWidth']!=_0xb05249/0x8*0x8||this['frameDisplayHeight']!=_0x32fafb)&&(this['frameDisplayWidth']=0x8*Math['round'](_0xb05249/0x8),this['frameDisplayHeight']=Math['round'](_0x32fafb),this['pFrameData']=null,this['pFrameData']=new Uint8Array(this['frameDisplayWidth']*this['frameDisplayHeight']*0x3/0x2),null==this['pFrameData']))return _0x3d12cf;var _0x28d502=0x0,_0x14e706=0x0,_0x5dba3f=Math['round'](_0x14166a['nCodeWidth']),_0x529996=Math['round'](_0x14166a['nCodeHeight']),_0x51b8fc=0x0;if(_0x58bd8b==this['enPixelFormat']||_0x264b64==this['enPixelFormat']){var _0x267b16,_0x2b423f,_0x3428fd;null!=_0x14166a?(_0x28d502=Math['round'](_0x14166a['nCropLeft']),_0x14e706=Math['round'](_0x14166a['nCropTop']),_0x267b16=_0x5bdf2c['subarray'](_0x28d502*_0x5dba3f+_0x14e706,_0x5dba3f*_0x529996),_0x2b423f=_0x5bdf2c['subarray'](_0x5dba3f*_0x529996+_0x14e706*_0x5dba3f/0x4+_0x28d502/0x2,_0x5dba3f*_0x529996*0x5/0x4),_0x3428fd=_0x5bdf2c['subarray'](_0x5dba3f*_0x529996*0x5/0x4+_0x14e706*_0x5dba3f/0x4+_0x28d502/0x2,_0x5dba3f*_0x529996*0x3/0x2),_0x51b8fc=_0x5dba3f):(_0x267b16=_0x5bdf2c['subarray'](0x0,_0xb05249*_0x32fafb),_0x2b423f=_0x5bdf2c['subarray'](_0xb05249*_0x32fafb,_0xb05249*_0x32fafb*0x5/0x4),_0x3428fd=_0x5bdf2c['subarray'](_0xb05249*_0x32fafb*0x5/0x4,_0xb05249*_0x32fafb*0x3/0x2),_0x51b8fc=this['frameDisplayWidth']);for(var _0x13336c=null,_0x4b9afa=0x0;_0x4b9afa<this['frameDisplayHeight'];++_0x4b9afa){var _0x3781f7=Math['round'](_0x4b9afa*_0x51b8fc),_0x327116=Math['round'](_0x4b9afa*_0x51b8fc+this['frameDisplayWidth']);_0x13336c=_0x267b16['slice'](_0x3781f7,_0x327116);var _0x141fa6=Math['round'](_0x4b9afa*this['frameDisplayWidth']);this['pFrameData']['set'](_0x13336c,_0x141fa6);}for(var _0x477bdd=0x0;_0x477bdd<this['frameDisplayHeight']/0x2;++_0x477bdd){var _0x50edd6=Math['round'](_0x477bdd*_0x51b8fc/0x2),_0x503319=Math['round'](_0x477bdd*_0x51b8fc/0x2+this['frameDisplayWidth']/0x2);_0x13336c=_0x2b423f['slice'](_0x50edd6,_0x503319);var _0x22f9fb=Math['round'](this['frameDisplayWidth']*this['frameDisplayHeight']+_0x477bdd*this['frameDisplayWidth']/0x2);this['pFrameData']['set'](_0x13336c,_0x22f9fb);}for(var _0xb58ce5=0x0;_0xb58ce5<this['frameDisplayHeight']/0x2;++_0xb58ce5){var _0x47cd2f=Math['round'](_0xb58ce5*_0x51b8fc/0x2),_0x1244ce=Math['round'](_0xb58ce5*_0x51b8fc/0x2+this['frameDisplayWidth']/0x2);_0x13336c=_0x3428fd['slice'](_0x47cd2f,_0x1244ce);var _0x25a663=Math['round'](this['frameDisplayWidth']*this['frameDisplayHeight']*0x5/0x4+_0xb58ce5*this['frameDisplayWidth']/0x2);this['pFrameData']['set'](_0x13336c,_0x25a663);}_0x267b16=null,_0x2b423f=null,_0x3428fd=null,_0x13336c=null;}else{if(_0x532920==this['enPixelFormat']){var _0x372b86,_0x4951e3,_0x174e12;null!=_0x14166a?(_0x28d502=Math['round'](_0x14166a['nCropLeft']),_0x14e706=Math['round'](_0x14166a['nCropTop']),_0x372b86=_0x5bdf2c['subarray'](_0x14e706*_0x5dba3f+_0x28d502,_0x5dba3f*_0x529996),_0x4951e3=_0x5bdf2c['subarray'](_0x5dba3f*_0x529996+_0x14e706*_0x5dba3f/0x4+_0x28d502/0x2,_0x5dba3f*_0x529996*0x3/0x2),_0x51b8fc=Math['round'](_0x14166a['nCodeWidth'])):(_0x372b86=_0x5bdf2c['subarray'](0x0,_0x5dba3f*_0x529996),_0x4951e3=_0x5bdf2c['subarray'](_0x5dba3f*_0x529996,_0x5dba3f*_0x529996*0x3/0x2),_0x51b8fc=this['frameDisplayWidth']);for(var _0x2c9864=0x0;_0x2c9864<this['frameDisplayHeight'];++_0x2c9864){var _0x337f86=Math['round'](_0x2c9864*_0x51b8fc),_0x50a9ce=Math['round'](_0x2c9864*_0x51b8fc+this['frameDisplayWidth']);_0x174e12=_0x372b86['slice'](_0x337f86,_0x50a9ce);var _0x638927=Math['round'](_0x2c9864*this['frameDisplayWidth']);this['pFrameData']['set'](_0x174e12,_0x638927);}for(var _0x29fc18=0x0;_0x29fc18<this['frameDisplayHeight']/0x2;++_0x29fc18){var _0x214b42=Math['round'](_0x29fc18*_0x51b8fc),_0x3b1a87=Math['round'](_0x29fc18*_0x51b8fc+this['frameDisplayWidth']);_0x174e12=_0x4951e3['slice'](_0x214b42,_0x3b1a87);var _0x2c17e5=Math['round'](this['frameDisplayWidth']*this['frameDisplayHeight']+_0x29fc18*this['frameDisplayWidth']);this['pFrameData']['set'](_0x174e12,_0x2c17e5);}_0x372b86=null,_0x4951e3=null,_0x174e12=null;}}return _0xa87ede;}},{'key':'_SetImagePostProcess','value':function(){var _0x30cf7b=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fBrightness');if(_0x30cf7b<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x30cf7b,this['fBrightness']);var _0x5553d2=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHue');if(_0x5553d2<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x5553d2,this['fHue']);var _0x42c592=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fSaturation');if(_0x42c592<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x42c592,this['fSaturation']);var _0x3629e8=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fContrast');if(_0x3629e8<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x3629e8,this['fContrast']);var _0x1c53e9=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fSharpness');if(_0x1c53e9<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x1c53e9,this['fSharpness']);var _0x5733f8=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fWndWidth');if(_0x5733f8<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x5733f8,this['frameDisplayWidth']);var _0x2dad49=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fWndHeight');return _0x2dad49<=0x0?_0x4d26c0:(this['ctx']['uniform1f'](_0x2dad49,this['frameDisplayHeight']),_0xa87ede);}},{'key':'_ComputeRotateLimits','value':function(){if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){var _0x31467d,_0x35837a;if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?(_0x31467d=_0x44d661,_0x35837a=_0x5affea):(_0x31467d=_0x438d57,_0x35837a=_0x2506c4),0x0==this['canvas']['width']||0x0==this['canvas']['height'])this['fRotateLimitX']=_0x31467d,this['fRotateLimitY']=_0x35837a;else{var _0x4a5e79=Math['tan'](2.748893525);if(Math['abs'](_0x4a5e79*this['fScale'])<0x1){var _0x50f721=_0x4a5e79*_0x4a5e79+0x1,_0x185702=-0x2*_0x4a5e79*_0x4a5e79*this['fScale'],_0x571130=_0x4a5e79*_0x4a5e79*this['fScale']*this['fScale']-0x1,_0x3fa40c=(-_0x185702-Math['sqrt'](_0x185702*_0x185702-0x4*_0x50f721*_0x571130))/(0x2*_0x50f721),_0x429003=_0x4a5e79*(_0x3fa40c-this['fScale']);this['fRotateLimitX']=Math['acos'](_0x429003/Math['sqrt'](_0x3fa40c*_0x3fa40c+_0x429003*_0x429003)),this['fRotateLimitX']<_0x31467d&&(this['fRotateLimitX']=_0x31467d);}else this['fRotateLimitX']=_0x31467d;var _0x536723=Math['atan'](this['canvas']['width']/this['canvas']['height']*Math['tan'](_0x13b181/0x2));if(_0x4a5e79=Math['tan'](_0x530a52-_0x536723),Math['abs'](_0x4a5e79*this['fScale'])<0x1){var _0x3a1ac0=_0x4a5e79*_0x4a5e79+0x1,_0x2c4813=-0x2*_0x4a5e79*_0x4a5e79*this['fScale'],_0x2b2259=_0x4a5e79*_0x4a5e79*this['fScale']*this['fScale']-0x1,_0x1484df=(-_0x2c4813-Math['sqrt'](_0x2c4813*_0x2c4813-0x4*_0x3a1ac0*_0x2b2259))/(0x2*_0x3a1ac0),_0x2c89d0=_0x4a5e79*(_0x1484df-this['fScale']);this['fRotateLimitY']=Math['acos'](_0x2c89d0/Math['sqrt'](_0x1484df*_0x1484df+_0x2c89d0*_0x2c89d0)),this['fRotateLimitY']<_0x35837a&&(this['fRotateLimitY']=_0x35837a);}else this['fRotateLimitY']=_0x35837a;}this['fRotateX']>this['fRotateLimitX']&&(this['fRotateX']=this['fRotateLimitX']),this['fRotateX']<-this['fRotateLimitX']&&(this['fRotateX']=-this['fRotateLimitX']),this['fRotateY']>this['fRotateLimitY']&&(this['fRotateY']=this['fRotateLimitX']),this['fRotateY']<-this['fRotateLimitX']&&(this['fRotateY']=-this['fRotateLimitX']);}return _0xa87ede;}}]),_0x2425ba;}()),_0x47e209=(function(){function _0x142b4f(){_0x54580d(this,_0x142b4f),this['canvas']=null,this['ctx']=null,this['regionSx']=0x0,this['regionSy']=0x0,this['regionSw']=0x0,this['regionSh']=0x0,this['needRect']=!0x1,this['bAntialias']=!0x1,this['bRecreateAntia']=!0x1,this['pfuncCBIn']=null,this['pUserIn']=null,this['pfuncCBOut']=null,this['pUserOut']=null;}return _0x4fd085(_0x142b4f,[{'key':'SR_Init','value':function(_0x5ecf9e){this['canvas']=_0x5ecf9e,this['ctx']=this['canvas']['getContext']('2d'),this['ctx']||console['log']('your\\x20browser\\x20does\\x20not\\x20support\\x202d\\x20render');}},{'key':'SR_Draw','value':function(_0x2b71ee){return this['needRect']?this['ctx']['drawImage'](_0x2b71ee,this['regionSx'],this['regionSy'],this['regionSw'],this['regionSh'],0x0,0x0,this['canvas']['width'],this['canvas']['height']):this['ctx']['drawImage'](_0x2b71ee,0x0,0x0,_0x2b71ee['displayWidth'],_0x2b71ee['displayHeight'],0x0,0x0,this['canvas']['width'],this['canvas']['height']),null!=this['pfuncCBIn']&&this['pfuncCBIn'](this['pUserIn']),0x1;}},{'key':'GetCanvasData','value':function(_0x25230b){console['log']('%c\\x20start\\x20time:'+new Date()['getMinutes']()+':'+new Date()['getSeconds']()+'.'+new Date()['getMilliseconds'](),'color:\\x20blue');var _0x574217=this['ctx']['getImageData'](0x0,0x0,this['canvas']['width'],this['canvas']['height']);console['log']('%c\\x202\\x20time:'+new Date()['getMinutes']()+':'+new Date()['getSeconds']()+'.'+new Date()['getMilliseconds'](),'color:\\x20blue');var _0x2d10bb='jpeg',_0x5a684e='image/jpeg',_0x6b5089=document['createElement']('canvas'),_0x5315a3=_0x6b5089['getContext']('2d');_0x6b5089['width']=this['canvas']['width'],_0x6b5089['height']=this['canvas']['height'],_0x5315a3['putImageData'](_0x574217,0x0,0x0);var _0x24024d=_0x6b5089['toDataURL'](),_0x26efe5=document['createElement']('a');_0x26efe5['download']=new Date()['getTime']()+'.'+_0x2d10bb,_0x26efe5['href']=_0x24024d,_0x26efe5['dataset']['downloadurl']=[_0x5a684e,_0x26efe5['download'],_0x26efe5['href']]['join'](':'),document['body']['appendChild'](_0x26efe5),_0x26efe5['click'](),document['body']['removeChild'](_0x26efe5),console['log']('%c\\x20end\\x20time:'+new Date()['getMinutes']()+':'+new Date()['getSeconds']()+'.'+new Date()['getMilliseconds'](),'color:\\x20blue');}},{'key':'SR_DelSubPort','value':function(_0x57fda8){return 0x0;}},{'key':'SR_AddSubPort','value':function(_0x36c54a){return 0x0;}},{'key':'SR_SetDisplayRect','value':function(_0x115279,_0xd4deec,_0x5a44bc,_0x341c14){this['regionSx']=_0x115279,this['regionSy']=_0xd4deec,this['regionSw']=_0x5a44bc,this['regionSh']=_0x341c14,this['needRect']=!0x0;}},{'key':'SR_Destroy','value':function(){this['canvas']=null,this['ctx']=null,this['regionSx']=0x0,this['regionSy']=0x0,this['regionSw']=0x0,this['regionSh']=0x0,this['needRect']=!0x1;}},{'key':'SR_SetCanvasSize','value':function(_0x585c32,_0x3f5351){this['canvas']['width']=_0x585c32,this['canvas']['height']=_0x3f5351;}},{'key':'SR_GetCanvasSize','value':function(){console['log']('canvas\\x20width:'+this['canvas']['width']+',height:'+this['canvas']['height']);}},{'key':'SR_SetAntialias','value':function(_0x41dd55){return _0x41dd55!=this['bAntialias']?(this['bAntialias']=_0x41dd55,this['bRecreateAntia']=!0x0):this['bRecreateAntia']=!0x1,this['bRecreateAntia']&&(this['bAntialias']?(this['canvas']['width']=0x5*this['canvas']['width'],this['canvas']['height']=0x5*this['canvas']['height'],this['canvas']['style']['transform']='scale(0.2)',this['canvas']['style']['transformOrigin']='0\\x200'):(this['canvas']['width']=this['canvas']['width']/0x5,this['canvas']['height']=this['canvas']['height']/0x5,this['canvas']['style']['transform']='scale(1)',this['canvas']['style']['transformOrigin']='0\\x200')),0x1;}},{'key':'SR_SetCallBack','value':function(_0x4d1e6d,_0x1f07ee,_0x3d33ea){switch(_0x3d33ea){case _0x444649:this['pfuncCBIn']=_0x4d1e6d,this['pUserIn']=_0x1f07ee;break;case _0x4f7368:this['pfuncCBOut']=_0x4d1e6d,this['pUserOut']=_0x1f07ee;break;default:return 0x0;}return 0x1;}},{'key':'SR_DrawFont','value':function(_0x2963cc,_0x4b046e,_0x516b83,_0x38303f,_0x31842a,_0x353830,_0x1a9008,_0x36e714,_0x39a389){var _0x27d4e5=[],_0x15ef3d={};return _0x15ef3d['bBackground']=_0x353830,_0x15ef3d['nFontWidth']=_0x38303f,_0x15ef3d['nFontHeight']=_0x31842a,_0x15ef3d['pstBGColor']=_0x1a9008,_0x15ef3d['pstFontColor']=_0x516b83,_0x15ef3d['pString']=_0x2963cc,_0x15ef3d['pstStartPos']=_0x4b046e,_0x15ef3d['fRotateAngle']=_0x36e714,_0x15ef3d['pFontFamily']=_0x39a389,_0x27d4e5['push'](_0x15ef3d),this['SR_DrawFontEx'](_0x27d4e5,0x1),0x1;}},{'key':'SR_DrawFontEx','value':function(_0x57d469,_0x12c5ae){for(var _0x2b5ed6=0x0;_0x2b5ed6<_0x12c5ae;_0x2b5ed6++){this['ctx']['textBaseline']='top';var _0x350f8f=_0x57d469[_0x2b5ed6]['nFontWidth'],_0x46fd6d=_0x57d469[_0x2b5ed6]['nFontHeight'],_0x2d8f2f=(_0x350f8f=Math['round'](_0x350f8f))<(_0x46fd6d=Math['round'](_0x46fd6d))?_0x350f8f:_0x46fd6d;this['ctx']['font']=_0x2d8f2f['toString']()+'px\\x20'+_0x57d469[_0x2b5ed6]['pFontFamily'];var _0x3e589a=parseInt(0xff*_0x57d469[_0x2b5ed6]['pstFontColor']['fR']),_0x4fd711=parseInt(0xff*_0x57d469[_0x2b5ed6]['pstFontColor']['fG']),_0x4755ae=parseInt(0xff*_0x57d469[_0x2b5ed6]['pstFontColor']['fB']),_0x43ec1f=_0x3e589a<0x10?'0'+_0x3e589a['toString'](0x10):_0x3e589a['toString'](0x10),_0x25bbfd=_0x4fd711<0x10?'0'+_0x4fd711['toString'](0x10):_0x4fd711['toString'](0x10),_0x1dead4=_0x4755ae<0x10?'0'+_0x4755ae['toString'](0x10):_0x4755ae['toString'](0x10);this['ctx']['fillStyle']='#'+_0x43ec1f+_0x25bbfd+_0x1dead4,this['ctx']['globalAlpha']=_0x57d469[_0x2b5ed6]['pstFontColor']['fA'],this['ctx']['fillText'](_0x57d469[_0x2b5ed6]['pString'],_0x57d469[_0x2b5ed6]['pstStartPos']['fX']*this['canvas']['width'],_0x57d469[_0x2b5ed6]['pstStartPos']['fY']*this['canvas']['height']);}return 0x1;}},{'key':'SR_DrawImage','value':function(_0x5e1584,_0x4fe178,_0x4811b5,_0xa8f872,_0x15dd02,_0x226fc5){return 0x1;}},{'key':'SR_DrawLinesEx','value':function(_0x564439,_0x1a98fd,_0x33d077,_0xaa2fdd){return 0x1;}}]),_0x142b4f;}()),_0x30cc90=(function(){function _0x132b86(){_0x54580d(this,_0x132b86),this['bPortAllocated']=[],this['pRenderParam']=[],this['pFishParam']=[],this['stPTZColor']=[],this['pPTZSetColor']=null,this['nBasePTZPointNum']=[],this['nOriPTZPointNum']=[],this['nPanoPTZPointNum']=[],this['nPTZFragmentNum']=[],this['pBasePTZPoints']=[],this['pPanoPTZPoints']=[],this['pRectPoints']=[],this['nPTZRectNum']=[],this['nPTZDisplayMode']=_0x569e7f,this['fRX1']=0x0,this['fRX2']=0x1,this['fRY1']=0x0,this['fRY2']=0x1,this['bBlack']=!0x1,this['pOriPTZPoints']=[],this['nWndPort']=_0x3cf544,this['nPlaceType']=0x0,this['nPTZFragmentNode']=[],this['bPTZSelected']=[],this['nPTZDisplayMode']=_0x495db0;for(var _0x26ae66=0x0;_0x26ae66<_0x379995;++_0x26ae66){this['bPortAllocated'][_0x26ae66]=!0x1,this['bPTZSelected'][_0x26ae66]=!0x1,this['pRenderParam'][_0x26ae66]=null,this['pFishParam'][_0x26ae66]=null,this['stPTZColor'][_0x26ae66]={},this['stPTZColor'][_0x26ae66]['fR']=0x0,this['stPTZColor'][_0x26ae66]['fG']=0x0,this['stPTZColor'][_0x26ae66]['fB']=0x0,this['stPTZColor'][_0x26ae66]['fA']=0x0,this['nBasePTZPointNum'][_0x26ae66]=0x0,this['nOriPTZPointNum'][_0x26ae66]=0x0,this['nPanoPTZPointNum'][_0x26ae66]=0x0,this['nPTZRectNum'][_0x26ae66]=0x0,this['pPanoPTZPoints'][_0x26ae66]=[],this['pRectPoints'][_0x26ae66]=[],this['pBasePTZPoints'][_0x26ae66]=[],this['pOriPTZPoints'][_0x26ae66]=[];for(var _0x4e780f=0x0;_0x4e780f<0x4;++_0x4e780f)this['pRectPoints'][_0x26ae66][_0x4e780f]={},this['pRectPoints'][_0x26ae66][_0x4e780f]['fX']=0x0,this['pRectPoints'][_0x26ae66][_0x4e780f]['fY']=0x0;for(var _0x1fa045=0x0;_0x1fa045<_0x4b88be;++_0x1fa045)this['pBasePTZPoints'][_0x26ae66][_0x1fa045]={},this['pBasePTZPoints'][_0x26ae66][_0x1fa045]['fX']=0x0,this['pBasePTZPoints'][_0x26ae66][_0x1fa045]['fY']=0x0,this['pOriPTZPoints'][_0x26ae66][_0x1fa045]={},this['pOriPTZPoints'][_0x26ae66][_0x1fa045]['fX']=0x0,this['pOriPTZPoints'][_0x26ae66][_0x1fa045]['fY']=0x0,this['pPanoPTZPoints'][_0x26ae66][_0x1fa045]={},this['pPanoPTZPoints'][_0x26ae66][_0x1fa045]['fX']=0x0,this['pPanoPTZPoints'][_0x26ae66][_0x1fa045]['fY']=0x0;this['nPTZFragmentNum'][_0x26ae66]=0x0,this['nPTZFragmentNode'][_0x26ae66]=[];for(var _0x5716c7=0x0;_0x5716c7<0x64;++_0x5716c7)this['nPTZFragmentNode'][_0x26ae66][_0x5716c7]=0x0;}this['InitColorList']();}return _0x4fd085(_0x132b86,[{'key':'GetFECPort','value':function(_0x422de9){for(var _0xeda2cb=_0x3cf544,_0x5a74b9=0x0;_0x5a74b9<_0x379995;++_0x5a74b9)if(0x0==this['bPortAllocated'][_0x5a74b9]){_0xeda2cb=_0x5a74b9;break;}if(_0xeda2cb==_0x3cf544)return _0xeda2cb;if(_0x422de9==_0x186ff9['SR_DE_NULL'])return _0xeda2cb;var _0xb974d1=this['JudgeDisplayEffect'](_0x422de9);if(_0xa87ede!=_0xb974d1)return this['FreeFECPort'](_0xeda2cb),_0xeda2cb=_0x3cf544;if(_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']==_0x422de9||_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']==_0x422de9||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']==_0x422de9||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']==_0x422de9||_0x186ff9['SR_DE_FISH_PANORAMA_WALL']==_0x422de9||_0x186ff9['SR_DE_FISH_ORIGINAL']==_0x422de9){if(_0x3cf544!=this['nWndPort'])return this['FreeFECPort'](_0xeda2cb),_0xeda2cb=_0x3cf544;this['nWndPort']=_0xeda2cb;}if(!(_0x186ff9['SR_DE_FISH_PTZ_CEILING']!=_0x422de9&&_0x186ff9['SR_DE_FISH_PTZ_FLOOR']!=_0x422de9&&_0x186ff9['SR_DE_FISH_PTZ_WALL']!=_0x422de9||_0x3cf544==this['nWndPort']||null==this['pRenderParam'][this['nWndPort']]||_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']!=this['pRenderParam'][this['nWndPort']]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']!=this['pRenderParam'][this['nWndPort']]['nDisplayEffect']))return this['FreeFECPort'](_0xeda2cb),_0xeda2cb=_0x3cf544;if(_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']==_0x422de9||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']==_0x422de9){for(var _0x183f86=0x0;_0x183f86<_0x379995;++_0x183f86)if(null!=this['pRenderParam'][_0x183f86]&&(_0x186ff9['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x183f86]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x183f86]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x183f86]['nDisplayEffect']))return this['FreeFECPort'](_0xeda2cb),_0xeda2cb=_0x3cf544;}if(_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0x422de9){for(var _0xde2840=0x0;_0xde2840<_0x379995;++_0xde2840)if(null!=this['pRenderParam'][_0xde2840]&&_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==this['pRenderParam'][_0xde2840]['nDisplayEffect'])return this['FreeFECPort'](_0xeda2cb),_0xeda2cb=_0x3cf544;}if(_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==_0x422de9){for(var _0x2ddcba=0x0;_0x2ddcba<_0x379995;++_0x2ddcba)if(null!=this['pRenderParam'][_0x2ddcba]&&_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==this['pRenderParam'][_0x2ddcba]['nDisplayEffect'])return this['FreeFECPort'](_0xeda2cb),_0xeda2cb=_0x3cf544;}return this['pRenderParam'][_0xeda2cb]={},this['pRenderParam'][_0xeda2cb]['fCosH']=0x1,this['pRenderParam'][_0xeda2cb]['fSinH']=0x0,this['pRenderParam'][_0xeda2cb]['fCosV']=0x1,this['pRenderParam'][_0xeda2cb]['fSinV']=0x0,this['pRenderParam'][_0xeda2cb]['fAngle']=0x0,this['pRenderParam'][_0xeda2cb]['fRX1']=this['fRX1'],this['pRenderParam'][_0xeda2cb]['fRX2']=this['fRX2'],this['pRenderParam'][_0xeda2cb]['fRY1']=this['fRY1'],this['pRenderParam'][_0xeda2cb]['fRY2']=this['fRY2'],this['pRenderParam'][_0xeda2cb]['bBlack']=this['bBlack'],this['pRenderParam'][_0xeda2cb]['fZoom']=0.035+0.8,this['pRenderParam'][_0xeda2cb]['nDisplayEffect']=_0x422de9,this['pRenderParam'][_0xeda2cb]['bBlack']=!0x1,this['pRenderParam'][_0xeda2cb]['bCut']=!0x1,this['pFishParam'][_0xeda2cb]={},this['pFishParam'][_0xeda2cb]['nFishParamType']=0x0,this['pFishParam'][_0xeda2cb]['bCut']=!0x1,this['pFishParam'][_0xeda2cb]['fAngle']=this['pRenderParam'][_0xeda2cb]['fAngle'],this['pFishParam'][_0xeda2cb]['fPTZX']=0.5,this['pFishParam'][_0xeda2cb]['fPTZY']=0.5,this['pFishParam'][_0xeda2cb]['fRXLeft']=this['pRenderParam'][_0xeda2cb]['fRX1'],this['pFishParam'][_0xeda2cb]['fRXRight']=this['pRenderParam'][_0xeda2cb]['fRX2'],this['pFishParam'][_0xeda2cb]['fRYTop']=this['pRenderParam'][_0xeda2cb]['fRY1'],this['pFishParam'][_0xeda2cb]['fRYBottom']=this['pRenderParam'][_0xeda2cb]['fRY2'],this['pFishParam'][_0xeda2cb]['bBlack']=this['pRenderParam'][_0xeda2cb]['bBlack'],this['pFishParam'][_0xeda2cb]['fZoom']=(this['pRenderParam'][_0xeda2cb]['fZoom']-0.8)/0x7,this['bPortAllocated'][_0xeda2cb]=!0x0,_0xeda2cb;}},{'key':'FreeFECPort','value':function(_0x450324){if(_0x450324<0x0||_0x450324>=_0x379995)return _0x31ddcf;this['nWndPort']==_0x450324&&(this['nWndPort']=_0x3cf544),null!=this['pRenderParam'][_0x450324]&&(this['pRenderParam'][_0x450324]['fCosH']=0x1,this['pRenderParam'][_0x450324]['fSinH']=0x0,this['pRenderParam'][_0x450324]['fCosV']=0x1,this['pRenderParam'][_0x450324]['fSinV']=0x0,this['pRenderParam'][_0x450324]['fAngle']=0x0,this['pRenderParam'][_0x450324]['fZoom']=0x0,this['pRenderParam'][_0x450324]['fRX1']=0x0,this['pRenderParam'][_0x450324]['fRX2']=0x1,this['pRenderParam'][_0x450324]['fRY1']=0x0,this['pRenderParam'][_0x450324]['fRY2']=0x1,this['pRenderParam'][_0x450324]['nDisplayEffect']=0x0,this['pRenderParam'][_0x450324]['bBlack']=!0x1,this['pRenderParam'][_0x450324]['bCut']=!0x1),null!=this['pFishParam'][_0x450324]&&(this['pFishParam'][_0x450324]['nFishParamType']=0x0,this['pFishParam'][_0x450324]['fRXLeft']=0x0,this['pFishParam'][_0x450324]['fRXRight']=0x1,this['pFishParam'][_0x450324]['fRYTop']=0x0,this['pFishParam'][_0x450324]['fRYBottom']=0x1,this['pFishParam'][_0x450324]['bBlack']=!0x1,this['pFishParam'][_0x450324]['bCut']=!0x1,this['pFishParam'][_0x450324]['fAngle']=0x0,this['pFishParam'][_0x450324]['fZoom']=0x0,this['pFishParam'][_0x450324]['fPTZX']=0.5,this['pFishParam'][_0x450324]['fPTZY']=0.5),this['nBasePTZPointNum'][_0x450324]=0x0,this['nOriPTZPointNum'][_0x450324]=0x0,this['nPanoPTZPointNum'][_0x450324]=0x0,this['nPTZRectNum'][_0x450324]=0x0;for(var _0x5851aa=0x0;_0x5851aa<0x4;++_0x5851aa)this['pRectPoints'][_0x450324][_0x5851aa]['fX']=0x0,this['pRectPoints'][_0x450324][_0x5851aa]['fY']=0x0;for(var _0x509c4c=0x0;_0x509c4c<_0x4b88be;++_0x509c4c)this['pBasePTZPoints'][_0x450324][_0x509c4c]['fX']=0x0,this['pBasePTZPoints'][_0x450324][_0x509c4c]['fY']=0x0,this['pOriPTZPoints'][_0x450324][_0x509c4c]['fX']=0x0,this['pOriPTZPoints'][_0x450324][_0x509c4c]['fY']=0x0,this['pPanoPTZPoints'][_0x450324][_0x509c4c]['fX']=0x0,this['pPanoPTZPoints'][_0x450324][_0x509c4c]['fY']=0x0;if(null!=this['pPTZSetColor']&&(this['pPTZSetColor'][_0x450324]['fA']=0x0,this['pPTZSetColor'][_0x450324]['fR']=0x0,this['pPTZSetColor'][_0x450324]['fG']=0x0,this['pPTZSetColor'][_0x450324]['fB']=0x0),this['bPTZSelected'][_0x450324]=!0x1,0x0!=this['nPlaceType']){var _0x46235e=!0x1;if(null!=this['pRenderParam'][i]){for(var _0x61e3ec=0x0;_0x61e3ec<_0x379995;++_0x61e3ec)if(null!=this['pRenderParam'][_0x61e3ec]&&(_0x186ff9['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PANORAMA_WALL']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_CEILING']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect'])){_0x46235e=!0x0;break;}}_0x46235e||(this['nPlaceType']=0x0);}for(var _0x308bbb=!0x1,_0x30bc0d=0x0;_0x30bc0d<_0x379995;++_0x30bc0d)if(null!=this['pRenderParam'][_0x30bc0d]){_0x308bbb=!0x0;break;}_0x308bbb||(this['fRX1']=0x0,this['fRX2']=0x1,this['fRY1']=0x0,this['fRY2']=0x1,this['bBlack']=!0x1),this['nPTZFragmentNum'][_0x450324]=0x0;for(var _0x59d008=0x0;_0x59d008<0x64;++_0x59d008)this['nPTZFragmentNode'][_0x450324][_0x59d008]=0x0;return this['bPortAllocated'][_0x450324]=!0x1,_0xa87ede;}},{'key':'DeInit','value':function(){for(var _0x2a6913=0x0;_0x2a6913<_0x379995;++_0x2a6913){for(var _0x5c283e=0x0;_0x5c283e<0x4;++_0x5c283e)this['pRectPoints'][_0x2a6913][_0x5c283e]=null;for(var _0x164210=0x0;_0x164210<_0x4b88be;++_0x164210)this['pBasePTZPoints'][_0x2a6913][_0x164210]=null,this['pOriPTZPoints'][_0x2a6913][_0x164210]=null,this['pPanoPTZPoints'][_0x2a6913][_0x164210]=null;this['nPTZFragmentNum'][_0x2a6913]=0x0,this['nPTZFragmentNode'][_0x2a6913]=null,this['bPortAllocated'][_0x2a6913]=!0x1,this['bPTZSelected'][_0x2a6913]=!0x1,this['pRenderParam'][_0x2a6913]=null,this['pFishParam'][_0x2a6913]=null,this['stPTZColor'][_0x2a6913]=null,this['nBasePTZPointNum'][_0x2a6913]=0x0,this['nOriPTZPointNum'][_0x2a6913]=0x0,this['nPanoPTZPointNum'][_0x2a6913]=0x0,this['nPTZRectNum'][_0x2a6913]=0x0,this['pPanoPTZPoints'][_0x2a6913]=null,this['pRectPoints'][_0x2a6913]=null,this['pBasePTZPoints'][_0x2a6913]=null,this['pOriPTZPoints'][_0x2a6913]=null;}return this['bPortAllocated']=null,this['pRenderParam']=null,this['pFishParam']=null,this['stPTZColor']=null,this['pPTZSetColor']=null,this['nBasePTZPointNum']=null,this['nOriPTZPointNum']=null,this['nPanoPTZPointNum']=null,this['nPTZFragmentNum']=null,this['pBasePTZPoints']=null,this['pPanoPTZPoints']=null,this['pRectPoints']=null,this['nPTZRectNum']=null,this['nPTZDisplayMode']=_0x569e7f,this['fRX1']=0x0,this['fRX2']=0x1,this['fRY1']=0x0,this['fRY2']=0x1,this['bBlack']=!0x1,this['pOriPTZPoints']=null,this['pBasePTZPoints']=null,this['nWndPort']=_0x3cf544,this['nPlaceType']=0x0,this['nPTZFragmentNode']=null,this['bPTZSelected']=null,this['nPTZDisplayMode']=_0x495db0,_0xa87ede;}},{'key':'InitColorList','value':function(){this['stPTZColor'][0x0]['fR']=0.5,this['stPTZColor'][0x0]['fG']=0.5,this['stPTZColor'][0x0]['fB']=0x0,this['stPTZColor'][0x0]['fA']=0x1,this['stPTZColor'][0x1]['fR']=0x1,this['stPTZColor'][0x1]['fG']=0x0,this['stPTZColor'][0x1]['fB']=0x0,this['stPTZColor'][0x1]['fA']=0x1,this['stPTZColor'][0x2]['fR']=0x0,this['stPTZColor'][0x2]['fG']=0x1,this['stPTZColor'][0x2]['fB']=0x0,this['stPTZColor'][0x2]['fA']=0x1,this['stPTZColor'][0x3]['fR']=0x0,this['stPTZColor'][0x3]['fG']=0x0,this['stPTZColor'][0x3]['fB']=0x1,this['stPTZColor'][0x3]['fA']=0x1,this['stPTZColor'][0x4]['fR']=0x1,this['stPTZColor'][0x4]['fG']=0x1,this['stPTZColor'][0x4]['fB']=0x0,this['stPTZColor'][0x4]['fA']=0x1,this['stPTZColor'][0x5]['fR']=0.5,this['stPTZColor'][0x5]['fG']=0x0,this['stPTZColor'][0x5]['fB']=0x1,this['stPTZColor'][0x5]['fA']=0x1,this['stPTZColor'][0x6]['fR']=0x0,this['stPTZColor'][0x6]['fG']=0x1,this['stPTZColor'][0x6]['fB']=0x1,this['stPTZColor'][0x6]['fA']=0x1,this['stPTZColor'][0x7]['fR']=0x1,this['stPTZColor'][0x7]['fG']=0.5,this['stPTZColor'][0x7]['fB']=0x0,this['stPTZColor'][0x7]['fA']=0x1,this['stPTZColor'][0x8]['fR']=0x0,this['stPTZColor'][0x8]['fG']=0.5,this['stPTZColor'][0x8]['fB']=0.5,this['stPTZColor'][0x8]['fA']=0x1;for(var _0x4a606d=0x9;_0x4a606d<_0x379995;_0x4a606d++)this['stPTZColor'][_0x4a606d]['fR']=0x1*_0x4a606d/_0x379995,this['stPTZColor'][_0x4a606d]['fG']=0x1*_0x4a606d/_0x379995,this['stPTZColor'][_0x4a606d]['fB']=0x1*_0x4a606d/_0x379995,this['stPTZColor'][_0x4a606d]['fA']=0x1;return _0xa87ede;}},{'key':'GetRangePoints','value':function(_0x25d84b){if(_0x25d84b<0x0||_0x25d84b>=_0x379995)return _0x31ddcf;if(null==this['pRenderParam'][_0x25d84b])return _0x520965;var _0x547759=0x0,_0x13094f=0x0;switch(this['nOriPTZPointNum'][_0x25d84b]=0x0,this['nBasePTZPointNum'][_0x25d84b]=0x0,this['pRenderParam'][_0x25d84b]['nDisplayEffect']){case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:for(_0x13094f=0x0;_0x13094f<0x1;_0x13094f+=0.01)this['GetFishPTZCeiling'](_0x547759,_0x13094f,_0x25d84b);for(_0x13094f=0.9995,_0x547759=0x0;_0x547759<0x1;_0x547759+=0.02)this['GetFishPTZCeiling'](_0x547759,_0x13094f,_0x25d84b);for(_0x547759=0.999,_0x13094f=0.9995;_0x13094f>=0x0;_0x13094f-=0.01)this['GetFishPTZCeiling'](_0x547759,_0x13094f,_0x25d84b);for(_0x13094f=0x0,_0x547759=0.999;_0x547759>=0x0;_0x547759-=0.02)this['GetFishPTZCeiling'](_0x547759,_0x13094f,_0x25d84b);break;case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:for(_0x13094f=0x0;_0x13094f<0x1;_0x13094f+=0.01)this['GetFishPTZFloor'](_0x547759,_0x13094f,_0x25d84b);for(_0x13094f=0.9995,_0x547759=0x0;_0x547759<0x1;_0x547759+=0.02)this['GetFishPTZFloor'](_0x547759,_0x13094f,_0x25d84b);for(_0x547759=0.999,_0x13094f=0.9995;_0x13094f>=0x0;_0x13094f-=0.01)this['GetFishPTZFloor'](_0x547759,_0x13094f,_0x25d84b);for(_0x13094f=0x0,_0x547759=0.999;_0x547759>=0x0;_0x547759-=0.02)this['GetFishPTZFloor'](_0x547759,_0x13094f,_0x25d84b);break;case _0x186ff9['SR_DE_FISH_PTZ_WALL']:for(_0x13094f=0x0;_0x13094f<0x1;_0x13094f+=0.01)this['GetFishPTZWALL'](_0x547759,_0x13094f,_0x25d84b);for(_0x13094f=0.9995,_0x547759=0x0;_0x547759<0x1;_0x547759+=0.02)this['GetFishPTZWALL'](_0x547759,_0x13094f,_0x25d84b);for(_0x547759=0.999,_0x13094f=0.9995;_0x13094f>=0x0;_0x13094f-=0.01)this['GetFishPTZWALL'](_0x547759,_0x13094f,_0x25d84b);for(_0x13094f=0x0,_0x547759=0.999;_0x547759>=0x0;_0x547759-=0.02)this['GetFishPTZWALL'](_0x547759,_0x13094f,_0x25d84b);break;default:return _0x86aef9;}return _0xa87ede;}},{'key':'TransformPTZRangePoints','value':function(_0x2f3cac){if(_0x3cf544==this['nWndPort'])return _0x520965;if(null==this['pBasePTZPoints'][_0x2f3cac]||null==this['pRenderParam'][this['nWndPort']])return _0x520965;this['nPanoPTZPointNum'][_0x2f3cac]=0x0;var _0x3c706a=_0xa87ede,_0x2be664=this['nWndPort'];switch(this['pRenderParam'][_0x2be664]['nDisplayEffect']){case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:if(_0x3c706a=this['GetPanoPTZWall'](_0x2f3cac),_0xa87ede!=_0x3c706a)return _0x3c706a;break;case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:if(_0x3c706a=this['GetPanoPTZFloor'](_0x2f3cac),_0xa87ede!=_0x3c706a)return _0x3c706a;break;case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:if(_0x3c706a=this['GetPanoPTZCeiling'](_0x2f3cac),_0xa87ede!=_0x3c706a)return _0x3c706a;}return this['CalcPTZFragmentPoints'](_0x2f3cac),_0xa87ede;}},{'key':'GetRectPoints','value':function(_0x5e6c1c){if(_0x5e6c1c<0x0||_0x5e6c1c>=_0x379995)return _0x31ddcf;if(this['nWndPort']==_0x3cf544)return _0x520965;if(null==this['pRenderParam'][this['nWndPort']]||null==this['pFishParam'][_0x5e6c1c])return _0x520965;var _0x1f9178=this['pRenderParam'][this['nWndPort']]['nDisplayEffect'],_0x392ce2=_0xa87ede,_0x399f52={'fX':0x0,'fY':0x0};switch(_0x1f9178){case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:if(_0x392ce2=this['GetPointFish2PanoWall'](_0x399f52,this['pFishParam'][_0x5e6c1c]['fPTZX'],this['pFishParam'][_0x5e6c1c]['fPTZY']),_0xa87ede!=_0x392ce2)return _0x392ce2;break;case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:if(_0x392ce2=this['GetPointFish2PanoFloor'](_0x399f52,this['pFishParam'][_0x5e6c1c]['fPTZX'],this['pFishParam'][_0x5e6c1c]['fPTZY']),_0xa87ede!=_0x392ce2)return _0x86aef9==_0x392ce2&&(this['pRectPoints'][_0x5e6c1c]=null),_0x392ce2;break;case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:if(_0x392ce2=this['GetPointFish2PanoCeiling'](_0x399f52,this['pFishParam'][_0x5e6c1c]['fPTZX'],this['pFishParam'][_0x5e6c1c]['fPTZY']),_0xa87ede!=_0x392ce2)return _0x86aef9==_0x392ce2&&(this['pRectPoints'][_0x5e6c1c]=null),_0x392ce2;break;case _0x186ff9['SR_DE_FISH_ORIGINAL']:_0x399f52['fX']=this['pFishParam'][_0x5e6c1c]['fPTZX'],_0x399f52['fY']=this['pFishParam'][_0x5e6c1c]['fPTZY'];}if(null==this['pRectPoints'][_0x5e6c1c]){this['pRectPoints'][_0x5e6c1c]=[];for(var _0x1698af=0x0;_0x1698af<0x4;++_0x1698af)this['pRectPoints'][_0x5e6c1c][_0x1698af]={},this['pRectPoints'][_0x5e6c1c][_0x1698af]['fX']=0x0,this['pRectPoints'][_0x5e6c1c][_0x1698af]['fY']=0x0;}return this['pRectPoints'][_0x5e6c1c][0x0]['fX']=_0x399f52['fX']-_0x466865,this['pRectPoints'][_0x5e6c1c][0x0]['fY']=_0x399f52['fY']-_0x466865,this['pRectPoints'][_0x5e6c1c][0x1]['fX']=_0x399f52['fX']+_0x466865,this['pRectPoints'][_0x5e6c1c][0x1]['fY']=_0x399f52['fY']-_0x466865,this['pRectPoints'][_0x5e6c1c][0x2]['fX']=_0x399f52['fX']+_0x466865,this['pRectPoints'][_0x5e6c1c][0x2]['fY']=_0x399f52['fY']+_0x466865,this['pRectPoints'][_0x5e6c1c][0x3]['fX']=_0x399f52['fX']-_0x466865,this['pRectPoints'][_0x5e6c1c][0x3]['fY']=_0x399f52['fY']+_0x466865,this['nPTZRectNum'][_0x5e6c1c]=0x4,_0xa87ede;}},{'key':'GetFishPTZCeiling','value':function(_0x517b14,_0x2ce55a,_0x2434b6){var _0xf3955c,_0x3a92e4,_0x1cd7f2,_0x198938,_0x2f97b3,_0x108ac4,_0x49eb1e,_0x36d97d={'fX':0x0,'fY':0x0},_0x22b255={'fX':0x0,'fY':0x0},_0x5daa5e={'fX':0x0,'fY':0x0},_0x4af31d={};_0x198938=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x2f97b3=(this['fRX1']+this['fRX2'])/0x2*0x1,_0x108ac4=(this['fRY1']+this['fRY2'])/0x2*_0x198938,_0x49eb1e=(this['fRX2']-this['fRX1'])/0x2*0x1,_0x36d97d['fX']=_0x2ce55a-0.5,_0x36d97d['fY']=0.5-_0x517b14,_0xf3955c=this['pRenderParam'][_0x2434b6]['fZoom'],_0x22b255['fX']=_0x36d97d['fX'],_0x22b255['fY']=_0x36d97d['fY']*this['pRenderParam'][_0x2434b6]['fCosV']+_0xf3955c*this['pRenderParam'][_0x2434b6]['fSinV'],_0x3a92e4=_0xf3955c*this['pRenderParam'][_0x2434b6]['fCosV']-_0x36d97d['fY']*this['pRenderParam'][_0x2434b6]['fSinV'],_0x1cd7f2=Math['sqrt'](_0x22b255['fX']*_0x22b255['fX']+_0x22b255['fY']*_0x22b255['fY']);var _0x1ce234=Math['sqrt'](_0x22b255['fX']*_0x22b255['fX']+_0x22b255['fY']*_0x22b255['fY']+_0x3a92e4*_0x3a92e4),_0x1e49ba=Math['asin'](_0x1cd7f2/_0x1ce234)/1.5707963*0.5;_0x22b255['fX']=_0x1e49ba*_0x22b255['fX']/_0x1cd7f2,_0x22b255['fY']=_0x1e49ba*_0x22b255['fY']/_0x1cd7f2,_0x5daa5e['fX']=_0x22b255['fX']*this['pRenderParam'][_0x2434b6]['fCosH']-_0x22b255['fY']*this['pRenderParam'][_0x2434b6]['fSinH'],_0x5daa5e['fY']=_0x22b255['fX']*this['pRenderParam'][_0x2434b6]['fSinH']+_0x22b255['fY']*this['pRenderParam'][_0x2434b6]['fCosH'],_0x4af31d['fX']=0x2*_0x5daa5e['fX']*_0x49eb1e+_0x2f97b3,_0x4af31d['fY']=0x2*-_0x5daa5e['fY']*_0x49eb1e+_0x108ac4;var _0x2433b8=this['nBasePTZPointNum'][_0x2434b6];this['pBasePTZPoints'][_0x2434b6][_0x2433b8]['fX']=_0x5daa5e['fX']+0.5,this['pBasePTZPoints'][_0x2434b6][_0x2433b8]['fY']=0.5-_0x5daa5e['fY'],this['nBasePTZPointNum'][_0x2434b6]=this['nBasePTZPointNum'][_0x2434b6]+0x1;var _0x308ac9=this['fRX1']<=0x0?0x0:0x1*this['fRX1'],_0x4efb75=this['fRY1']<=0x0?0x0:this['fRY1']*_0x198938,_0x17a5c7=this['fRX2']>=0x1?0x1-_0x308ac9:0x1*this['fRX2']-_0x308ac9,_0x5f1e62=this['fRY2']>=0x1?_0x198938-_0x4efb75:this['fRY2']*_0x198938-_0x4efb75;if(_0x4af31d['fX']=(_0x4af31d['fX']-_0x308ac9)/_0x17a5c7,_0x4af31d['fY']=(_0x4af31d['fY']-_0x4efb75)/_0x5f1e62,_0x4af31d['fX']<=0x1&&_0x4af31d['fY']<=0x1&&_0x4af31d['fX']>=0x0&&_0x4af31d['fY']>=0x0){var _0x37b5f2=this['nOriPTZPointNum'][_0x2434b6];this['pOriPTZPoints'][_0x2434b6][_0x37b5f2]['fX']=_0x4af31d['fX'],this['pOriPTZPoints'][_0x2434b6][_0x37b5f2]['fY']=_0x4af31d['fY'],this['nOriPTZPointNum'][_0x2434b6]=this['nOriPTZPointNum'][_0x2434b6]+0x1;}return _0xa87ede;}},{'key':'GetFishPTZFloor','value':function(_0x5d64c8,_0x230377,_0x20b682){var _0x2402ff,_0x2bb293,_0x51bf0f,_0x1f4a36,_0x11cb3a,_0x7fb709,_0x1491eb,_0x598378={'fX':0x0,'fY':0x0},_0x737f5e={'fX':0x0,'fY':0x0},_0x185f6e={'fX':0x0,'fY':0x0},_0x243ac0={};_0x1f4a36=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x11cb3a=(this['fRX1']+this['fRX2'])/0x2*0x1,_0x7fb709=(this['fRY1']+this['fRY2'])/0x2*_0x1f4a36,_0x1491eb=(this['fRX2']-this['fRX1'])/0x2*0x1,_0x598378['fX']=_0x5d64c8-0.5,_0x598378['fY']=_0x230377-0.5,_0x2402ff=this['pRenderParam'][_0x20b682]['fZoom'],_0x737f5e['fX']=_0x598378['fX'],_0x737f5e['fY']=_0x598378['fY']*this['pRenderParam'][_0x20b682]['fCosV']+_0x2402ff*this['pRenderParam'][_0x20b682]['fSinV'],_0x2bb293=_0x2402ff*this['pRenderParam'][_0x20b682]['fCosV']-_0x598378['fY']*this['pRenderParam'][_0x20b682]['fSinV'],_0x51bf0f=Math['sqrt'](_0x737f5e['fX']*_0x737f5e['fX']+_0x737f5e['fY']*_0x737f5e['fY']);var _0x441996=Math['sqrt'](_0x737f5e['fX']*_0x737f5e['fX']+_0x737f5e['fY']*_0x737f5e['fY']+_0x2bb293*_0x2bb293),_0x3be58c=Math['asin'](_0x51bf0f/_0x441996)/1.5707963*0.5;_0x737f5e['fX']=_0x3be58c*_0x737f5e['fX']/_0x51bf0f,_0x737f5e['fY']=_0x3be58c*_0x737f5e['fY']/_0x51bf0f,_0x185f6e['fX']=_0x737f5e['fX']*this['pRenderParam'][_0x20b682]['fCosH']-_0x737f5e['fY']*this['pRenderParam'][_0x20b682]['fSinH'],_0x185f6e['fY']=_0x737f5e['fX']*this['pRenderParam'][_0x20b682]['fSinH']+_0x737f5e['fY']*this['pRenderParam'][_0x20b682]['fCosH'],_0x243ac0['fX']=0x2*_0x185f6e['fX']*_0x1491eb+_0x11cb3a,_0x243ac0['fY']=0x2*_0x185f6e['fY']*_0x1491eb+_0x7fb709;var _0x15bcf5=this['nBasePTZPointNum'][_0x20b682];this['pBasePTZPoints'][_0x20b682][_0x15bcf5]['fX']=_0x185f6e['fX']+0.5,this['pBasePTZPoints'][_0x20b682][_0x15bcf5]['fY']=_0x185f6e['fY']+0.5,this['nBasePTZPointNum'][_0x20b682]=this['nBasePTZPointNum'][_0x20b682]+0x1;var _0x1e561a=this['fRX1']<=0x0?0x0:0x1*this['fRX1'],_0x19a04e=this['fRY1']<=0x0?0x0:this['fRY1']*_0x1f4a36,_0x470745=this['fRX2']>=0x1?0x1-_0x1e561a:0x1*this['fRX2']-_0x1e561a,_0x3ffe59=this['fRY2']>=0x1?_0x1f4a36-_0x19a04e:this['fRY2']*_0x1f4a36-_0x19a04e;if(_0x243ac0['fX']=(_0x243ac0['fX']-_0x1e561a)/_0x470745,_0x243ac0['fY']=(_0x243ac0['fY']-_0x19a04e)/_0x3ffe59,_0x243ac0['fX']<=0x1&&_0x243ac0['fY']<=0x1&&_0x243ac0['fX']>=0x0&&_0x243ac0['fY']>=0x0){var _0xf69c5b=this['nOriPTZPointNum'][_0x20b682];this['pOriPTZPoints'][_0x20b682][_0xf69c5b]['fX']=_0x243ac0['fX'],this['pOriPTZPoints'][_0x20b682][_0xf69c5b]['fY']=_0x243ac0['fY'],this['nOriPTZPointNum'][_0x20b682]=this['nOriPTZPointNum'][_0x20b682]+0x1;}return _0xa87ede;}},{'key':'GetFishPTZWALL','value':function(_0x38c74c,_0x5d9e53,_0x98f087){var _0x596ea3,_0x51bf3e,_0x5780c4,_0x3e49f7,_0x30dad9,_0x10ea85,_0x27a63e,_0x51e487,_0x31152b={'fX':0x0,'fY':0x0},_0x4df952={'fX':0x0,'fY':0x0},_0x5e7e33={'fX':0x0,'fY':0x0},_0x44bf25={};_0x30dad9=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x10ea85=(this['fRX1']+this['fRX2'])/0x2*0x1,_0x27a63e=(this['fRY1']+this['fRY2'])/0x2*_0x30dad9,_0x51e487=(this['fRX2']-this['fRX1'])/0x2*0x1,_0x31152b['fX']=_0x5d9e53-0.5,_0x31152b['fY']=_0x38c74c-0.5,_0x596ea3=this['pRenderParam'][_0x98f087]['fZoom'],_0x4df952['fX']=_0x31152b['fX'],_0x4df952['fY']=_0x31152b['fY']*this['pRenderParam'][_0x98f087]['fCosV']+_0x596ea3*this['pRenderParam'][_0x98f087]['fSinV'],_0x51bf3e=_0x596ea3*this['pRenderParam'][_0x98f087]['fCosV']-_0x31152b['fY']*this['pRenderParam'][_0x98f087]['fSinV'],_0x5e7e33['fX']=_0x4df952['fX']*this['pRenderParam'][_0x98f087]['fCosH']+_0x51bf3e*this['pRenderParam'][_0x98f087]['fSinH'],_0x5e7e33['fY']=_0x4df952['fY'],_0x5780c4=_0x51bf3e*this['pRenderParam'][_0x98f087]['fCosH']-_0x4df952['fX']*this['pRenderParam'][_0x98f087]['fSinH'],_0x3e49f7=Math['sqrt'](_0x5e7e33['fX']*_0x5e7e33['fX']+_0x5e7e33['fY']*_0x5e7e33['fY']);var _0x9e123=Math['sqrt'](_0x5e7e33['fX']*_0x5e7e33['fX']+_0x5e7e33['fY']*_0x5e7e33['fY']+_0x5780c4*_0x5780c4),_0x14461f=Math['asin'](_0x3e49f7/_0x9e123)/1.5707963*0.5;_0x44bf25['fX']=_0x14461f*_0x5e7e33['fX']/_0x3e49f7*_0x51e487*0x2+_0x10ea85,_0x44bf25['fY']=_0x14461f*_0x5e7e33['fY']/_0x3e49f7*_0x51e487*0x2+_0x27a63e;var _0x18649b=this['nBasePTZPointNum'][_0x98f087];this['pBasePTZPoints'][_0x98f087][_0x18649b]['fX']=_0x14461f*_0x5e7e33['fX']/_0x3e49f7+0.5,this['pBasePTZPoints'][_0x98f087][_0x18649b]['fY']=_0x14461f*_0x5e7e33['fY']/_0x3e49f7+0.5,this['nBasePTZPointNum'][_0x98f087]=this['nBasePTZPointNum'][_0x98f087]+0x1;var _0x240ce4=this['fRX1']<=0x0?0x0:0x1*this['fRX1'],_0x5017ea=this['fRY1']<=0x0?0x0:this['fRY1']*_0x30dad9,_0x22234a=this['fRX2']>=0x1?0x1-_0x240ce4:0x1*this['fRX2']-_0x240ce4,_0x1a56a0=this['fRY2']>=0x1?_0x30dad9-_0x5017ea:this['fRY2']*_0x30dad9-_0x5017ea;if(_0x44bf25['fX']=(_0x44bf25['fX']-_0x240ce4)/_0x22234a,_0x44bf25['fY']=(_0x44bf25['fY']-_0x5017ea)/_0x1a56a0,_0x44bf25['fX']<=0x1&&_0x44bf25['fY']<=0x1&&_0x44bf25['fX']>=0x0&&_0x44bf25['fY']>=0x0){var _0x19cc2f=this['nOriPTZPointNum'][_0x98f087];this['pOriPTZPoints'][_0x98f087][_0x19cc2f]['fX']=_0x44bf25['fX'],this['pOriPTZPoints'][_0x98f087][_0x19cc2f]['fY']=_0x44bf25['fY'],this['nOriPTZPointNum'][_0x98f087]=this['nOriPTZPointNum'][_0x98f087]+0x1;}return _0xa87ede;}},{'key':'GetPanoPTZCeiling','value':function(_0x263f7b){if(null==this['pRenderParam'][_0x263f7b]||null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==this['pBasePTZPoints'][_0x263f7b])return _0x520965;var _0x22ec24,_0x2ebe10,_0x186506=this['nBasePTZPointNum'][_0x263f7b];_0x22ec24=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x2ebe10=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x22da37,_0x18297c=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRY1']<0x0||this['fRX1']<0x0)&&(this['fRX1']<0x0&&(_0x22da37=0x1*-this['fRX1'])>_0x18297c&&(_0x18297c=_0x22da37),this['fRX2']>0x1&&(_0x22da37=0x1*(this['fRX2']-0x1))>_0x18297c&&(_0x18297c=_0x22da37),this['fRY1']<0x0&&(_0x22da37=-this['fRY1']*_0x22ec24)>_0x18297c&&(_0x18297c=_0x22da37),this['fRY2']>0x1&&(_0x22da37=(this['fRY2']-0x1)*_0x22ec24)>_0x18297c&&(_0x18297c=_0x22da37));for(var _0xf6789b,_0x579bb=_0x18297c/_0x2ebe10,_0x1304b7={'fX':0x0,'fY':0x0},_0x16843f={'fX':0x0,'fY':0x0},_0x581f36=0x0;_0x581f36<_0x186506;++_0x581f36)if(_0x16843f['fX']=this['pBasePTZPoints'][_0x263f7b][_0x581f36]['fX'],_0x16843f['fY']=this['pBasePTZPoints'][_0x263f7b][_0x581f36]['fY'],!(Math['abs'](_0x16843f['fX']-0.5)<_0x4a23c6&&Math['abs'](_0x16843f['fY']-0.5)<_0x4a23c6)){var _0x27e377={'fX':0x0,'fY':0x0},_0x542b58={'fX':0x0,'fY':0x0};_0x27e377['fX']=_0x16843f['fX']-0.5,_0x27e377['fY']=_0x16843f['fY']-0.5,_0x542b58['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x542b58['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0x30de9a=Math['sqrt'](_0x27e377['fX']*_0x27e377['fX']+_0x27e377['fY']*_0x27e377['fY']),_0x3fb02f=Math['sqrt'](_0x542b58['fX']*_0x542b58['fX']+_0x542b58['fY']*_0x542b58['fY']);if(_0xf6789b=Math['acos']((_0x27e377['fX']*_0x542b58['fX']+_0x27e377['fY']*_0x542b58['fY'])/(_0x30de9a*_0x3fb02f)),_0x27e377['fX']*_0x542b58['fY']-_0x27e377['fY']*_0x542b58['fX']>0x0&&(_0xf6789b=6.2831852-_0xf6789b),_0x1304b7['fX']=_0xf6789b/6.2831853,_0x1304b7['fY']=(0x2*(0.5-_0x30de9a)-_0x579bb)/(0.8-_0x579bb),_0x1304b7['fY']>=0x0&&_0x1304b7['fX']>=0x0&&_0x1304b7['fY']<=0x1&&_0x1304b7['fX']<=0x1){var _0x2a305c=this['nPanoPTZPointNum'][_0x263f7b];this['pPanoPTZPoints'][_0x263f7b][_0x2a305c]['fX']=_0x1304b7['fX'],this['pPanoPTZPoints'][_0x263f7b][_0x2a305c]['fY']=_0x1304b7['fY'],this['nPanoPTZPointNum'][_0x263f7b]=this['nPanoPTZPointNum'][_0x263f7b]+0x1;}}return _0xa87ede;}},{'key':'GetPanoPTZFloor','value':function(_0x5d0fc0){if(null==this['pRenderParam'][_0x5d0fc0]||null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==this['pBasePTZPoints'][_0x5d0fc0])return _0x520965;var _0x100b2a,_0x18120b,_0x19ec44=this['nBasePTZPointNum'][_0x5d0fc0];_0x100b2a=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x18120b=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x543faf,_0x261275=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRY1']<0x0||this['fRX1']<0x0)&&(this['fRX1']<0x0&&(_0x543faf=0x1*-this['fRX1'])>_0x261275&&(_0x261275=_0x543faf),this['fRX2']>0x1&&(_0x543faf=0x1*(this['fRX2']-0x1))>_0x261275&&(_0x261275=_0x543faf),this['fRY1']<0x0&&(_0x543faf=-this['fRY1']*_0x100b2a)>_0x261275&&(_0x261275=_0x543faf),this['fRY2']>0x1&&(_0x543faf=(this['fRY2']-0x1)*_0x100b2a)>_0x261275&&(_0x261275=_0x543faf));for(var _0x2f2b37,_0x27bd4a=_0x261275/_0x18120b,_0x2a79e7={'fX':0x0,'fY':0x0},_0x10ed1b={'fX':0x0,'fY':0x0},_0x54ae89=0x0;_0x54ae89<_0x19ec44;++_0x54ae89)if(_0x10ed1b['fX']=this['pBasePTZPoints'][_0x5d0fc0][_0x54ae89]['fX'],_0x10ed1b['fY']=this['pBasePTZPoints'][_0x5d0fc0][_0x54ae89]['fY'],!(Math['abs'](_0x10ed1b['fX']-0.5)<_0x4a23c6&&Math['abs'](_0x10ed1b['fY']-0.5)<_0x4a23c6)){var _0x2ecec4={'fX':0x0,'fY':0x0},_0x2f6c97={'fX':0x0,'fY':0x0};_0x2ecec4['fX']=_0x10ed1b['fX']-0.5,_0x2ecec4['fY']=_0x10ed1b['fY']-0.5,_0x2f6c97['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x2f6c97['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0x4e4dea=Math['sqrt'](_0x2ecec4['fX']*_0x2ecec4['fX']+_0x2ecec4['fY']*_0x2ecec4['fY']),_0x186af7=Math['sqrt'](_0x2f6c97['fX']*_0x2f6c97['fX']+_0x2f6c97['fY']*_0x2f6c97['fY']);if(_0x2f2b37=Math['acos']((_0x2ecec4['fX']*_0x2f6c97['fX']+_0x2ecec4['fY']*_0x2f6c97['fY'])/(_0x4e4dea*_0x186af7)),_0x2ecec4['fX']*_0x2f6c97['fY']-_0x2ecec4['fY']*_0x2f6c97['fX']>0x0&&(_0x2f2b37=6.2831852-_0x2f2b37),_0x2a79e7['fX']=0x1-_0x2f2b37/6.2831853,_0x2a79e7['fY']=0x1-(0x2*(0.5-_0x4e4dea)-_0x27bd4a)/(0.8-_0x27bd4a),_0x2a79e7['fY']>=0x0&&_0x2a79e7['fX']>=0x0&&_0x2a79e7['fY']<=0x1&&_0x2a79e7['fX']<=0x1){var _0x16ff25=this['nPanoPTZPointNum'][_0x5d0fc0];this['pPanoPTZPoints'][_0x5d0fc0][_0x16ff25]['fX']=_0x2a79e7['fX'],this['pPanoPTZPoints'][_0x5d0fc0][_0x16ff25]['fY']=_0x2a79e7['fY'],this['nPanoPTZPointNum'][_0x5d0fc0]=this['nPanoPTZPointNum'][_0x5d0fc0]+0x1;}}return _0xa87ede;}},{'key':'GetPanoPTZWall','value':function(_0x42a7bd){if(null==this['pRenderParam'][_0x42a7bd]||null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==this['pBasePTZPoints'][_0x42a7bd])return _0x520965;var _0x564e3d,_0x3e602d,_0x423c9f=this['nBasePTZPointNum'][_0x42a7bd];_0x564e3d=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x3e602d=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x56aaa5,_0x1f4537,_0x54b6be,_0xb5f14d,_0x49fdb6,_0x2fb7bb=0x0,_0xf39383=0x1,_0x5125ea=0.1,_0x2b07de=0.9;this['fRX1']<0x0&&(_0x56aaa5=0x1*-this['fRX1'],_0x2fb7bb=_0x56aaa5/=0x2*_0x3e602d),this['fRX2']>0x1&&(_0x1f4537=0x1*(this['fRX2']-0x1),_0xf39383=0x1-(_0x1f4537/=0x2*_0x3e602d)),this['fRY1']<0x0&&(_0x54b6be=-this['fRY1']*_0x564e3d,_0x5125ea=(_0x54b6be/=0x2*_0x3e602d)>0.1?_0x54b6be:0.1),this['fRY2']>0x1&&(_0xb5f14d=(this['fRY2']-0x1)*_0x564e3d,_0x2b07de=(_0xb5f14d/=0x2*_0x3e602d)>0x1-0.9?0x1-_0xb5f14d:0.9);for(var _0x51c7d7={'fX':0x0,'fY':0x0},_0x15cbb7={'fX':0x0,'fY':0x0},_0x211521=0x0;_0x211521<_0x423c9f;++_0x211521){_0x15cbb7['fX']=this['pBasePTZPoints'][_0x42a7bd][_0x211521]['fX'],_0x15cbb7['fY']=this['pBasePTZPoints'][_0x42a7bd][_0x211521]['fY'];var _0x8074a7=0x2*_0x15cbb7['fX']*_0x3e602d,_0x445fec=0x2*_0x15cbb7['fY']*_0x3e602d;if(_0x49fdb6=Math['sqrt'](_0x3e602d*_0x3e602d-(_0x445fec-_0x3e602d)*(_0x445fec-_0x3e602d)),!(Math['abs'](_0x49fdb6)<_0x4a23c6)&&(_0x15cbb7['fX']=_0x3e602d*(_0x8074a7-_0x3e602d)/_0x49fdb6+_0x3e602d,_0x15cbb7['fY']=_0x445fec,_0x51c7d7['fX']=(_0x15cbb7['fX']-0x2*_0x2fb7bb*_0x3e602d)/(0x2*(_0xf39383-_0x2fb7bb)*_0x3e602d),_0x51c7d7['fY']=(_0x15cbb7['fY']-0x2*_0x5125ea*_0x3e602d)/(0x2*(_0x2b07de-_0x5125ea)*_0x3e602d),_0x51c7d7['fY']>=0x0&&_0x51c7d7['fX']>=0x0&&_0x51c7d7['fY']<=0x1&&_0x51c7d7['fX']<=0x1)){var _0x4f41e4=this['nPanoPTZPointNum'][_0x42a7bd];this['pPanoPTZPoints'][_0x42a7bd][_0x4f41e4]['fX']=_0x51c7d7['fX'],this['pPanoPTZPoints'][_0x42a7bd][_0x4f41e4]['fY']=_0x51c7d7['fY'],this['nPanoPTZPointNum'][_0x42a7bd]=this['nPanoPTZPointNum'][_0x42a7bd]+0x1;}}return _0xa87ede;}},{'key':'GetPointPano2FishCeiling','value':function(_0x2f3dd8,_0x7b3d9e,_0x3c003f){if(null==_0x2f3dd8||null==this['pRenderParam'][this['nWndPort']])return _0x520965;var _0x1ca50d,_0x4730c9;_0x1ca50d=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x4730c9=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x1f6f27,_0x49d370=0x0,_0x4968e2=0x1,_0x30c450=0x0,_0x4aba84=0x1,_0xfcab6e=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&((_0x1f6f27=0x1*-this['fRX1'])>_0xfcab6e&&(_0xfcab6e=_0x1f6f27),_0x49d370=_0x1f6f27/=0x2*_0x4730c9),this['fRX2']>0x1&&((_0x1f6f27=0x1*(this['fRX2']-0x1))>_0xfcab6e&&(_0xfcab6e=_0x1f6f27),_0x4968e2=0x1-(_0x1f6f27/=0x2*_0x4730c9)),this['fRY1']<0x0&&((_0x1f6f27=-this['fRY1']*_0x1ca50d)>_0xfcab6e&&(_0xfcab6e=_0x1f6f27),_0x30c450=_0x1f6f27/=0x2*_0x4730c9),this['fRY2']>0x1&&((_0x1f6f27=(this['fRY2']-0x1)*_0x1ca50d)>_0xfcab6e&&(_0xfcab6e=_0x1f6f27),_0x4aba84=0x1-(_0x1f6f27/=0x2*_0x4730c9)));var _0x236287,_0x1b3214,_0x39bc45=_0xfcab6e/_0x4730c9,_0x59c55c={},_0x1adaf={};return _0x59c55c['fX']=_0x7b3d9e,_0x59c55c['fY']=(0.8-_0x39bc45)*_0x3c003f+_0x39bc45,_0x236287=6.2831853*_0x59c55c['fX']+this['pRenderParam'][this['nWndPort']]['fAngle'],_0x1b3214=0.5*(0x1-_0x59c55c['fY']),_0x1adaf['fX']=0.5-_0x1b3214*Math['sin'](_0x236287),_0x1adaf['fY']=0.5+_0x1b3214*Math['cos'](_0x236287),_0x1adaf['fX']=(_0x1adaf['fX']-_0x49d370)/(_0x4968e2-_0x49d370),_0x1adaf['fY']=(_0x1adaf['fY']-_0x30c450)/(_0x4aba84-_0x30c450),_0x2f3dd8['fX']=_0x1adaf['fX'],_0x2f3dd8['fY']=_0x1adaf['fY'],_0xa87ede;}},{'key':'GetPointPano2FishFloor','value':function(_0x307474,_0xee954,_0x3a3359){if(null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==_0x307474)return _0x31ddcf;var _0x311c35,_0x29e646;_0x311c35=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x29e646=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x42c110,_0x530bbd=0x0,_0x45eecf=0x1,_0x12cd4a=0x0,_0x405165=0x1,_0x5a35b9=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&((_0x42c110=0x1*-this['fRX1'])>_0x5a35b9&&(_0x5a35b9=_0x42c110),_0x530bbd=_0x42c110/=0x2*_0x29e646),this['fRX2']>0x1&&((_0x42c110=0x1*(this['fRX2']-0x1))>_0x5a35b9&&(_0x5a35b9=_0x42c110),_0x45eecf=0x1-(_0x42c110/=0x2*_0x29e646)),this['fRY1']<0x0&&((_0x42c110=-this['fRY1']*_0x311c35)>_0x5a35b9&&(_0x5a35b9=_0x42c110),_0x12cd4a=_0x42c110/=0x2*_0x29e646),this['fRY2']>0x1&&((_0x42c110=(this['fRY2']-0x1)*_0x311c35)>_0x5a35b9&&(_0x5a35b9=_0x42c110),_0x405165=0x1-(_0x42c110/=0x2*_0x29e646)));var _0x1ce7ff,_0x30ab48,_0x21a80b=_0x5a35b9/_0x29e646,_0x38a985={},_0x3a7f13={};return _0x38a985['fX']=0x1-_0xee954,_0x38a985['fY']=(0.8-_0x21a80b)*(0x1-_0x3a3359)+_0x21a80b,_0x1ce7ff=6.2831853*_0x38a985['fX']+this['pRenderParam'][this['nWndPort']]['fAngle'],_0x30ab48=0.5*(0x1-_0x38a985['fY']),_0x3a7f13['fX']=0.5-_0x30ab48*Math['sin'](_0x1ce7ff),_0x3a7f13['fY']=0.5+_0x30ab48*Math['cos'](_0x1ce7ff),_0x3a7f13['fX']=(_0x3a7f13['fX']-_0x530bbd)/(_0x45eecf-_0x530bbd),_0x3a7f13['fY']=(_0x3a7f13['fY']-_0x12cd4a)/(_0x405165-_0x12cd4a),_0x307474['fX']=_0x3a7f13['fX'],_0x307474['fY']=_0x3a7f13['fY'],_0xa87ede;}},{'key':'GetPointPano2FishWall','value':function(_0x48426c,_0x191ed4,_0x4abadc){if(null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==_0x48426c)return _0x31ddcf;var _0xb24078,_0x4bdf86;_0xb24078=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x4bdf86=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x42a26f,_0x12f390,_0x4672e7,_0x31bf4b,_0x215ccf=0x0,_0x42b094=0x1,_0x6ef8c2=0.1,_0x31cf8e=0.9,_0xb08d5e=0x0,_0x33e210=0x1,_0x34cc54=0x0,_0x490ecc=0x1;this['fRX1']<0x0&&(_0x42a26f=0x1*-this['fRX1'],_0x215ccf=_0x42a26f/=0x2*_0x4bdf86,_0xb08d5e=_0x42a26f),this['fRX2']>0x1&&(_0x12f390=0x1*(this['fRX2']-0x1),_0x42b094=0x1-(_0x12f390/=0x2*_0x4bdf86),_0x33e210=0x1-_0x12f390),this['fRY1']<0x0&&(_0x4672e7=-this['fRY1']*_0xb24078,_0x6ef8c2=(_0x4672e7/=0x2*_0x4bdf86)>0.1?_0x4672e7:0.1,_0x34cc54=_0x4672e7),this['fRY2']>0x1&&(_0x31bf4b=(this['fRY2']-0x1)*_0xb24078,_0x31cf8e=(_0x31bf4b/=0x2*_0x4bdf86)>0x1-0.9?0x1-_0x31bf4b:0.9,_0x490ecc=0x1-_0x31bf4b);var _0x41527b={},_0xcbadff={};_0x41527b['fX']=_0x191ed4*(_0x42b094-_0x215ccf)+_0x215ccf,_0x41527b['fY']=_0x4abadc*(_0x31cf8e-_0x6ef8c2)+_0x6ef8c2;var _0x4dc2a0=Math['sqrt'](0.25-(_0x41527b['fY']-0.5)*(_0x41527b['fY']-0.5));return _0xcbadff['fX']=(_0x41527b['fX']-0.5)*_0x4dc2a0/0.5+0.5,_0xcbadff['fY']=_0x41527b['fY'],_0xcbadff['fX']=(_0xcbadff['fX']-_0xb08d5e)/(_0x33e210-_0xb08d5e),_0xcbadff['fY']=(_0xcbadff['fY']-_0x34cc54)/(_0x490ecc-_0x34cc54),_0x48426c['fX']=_0xcbadff['fX'],_0x48426c['fY']=_0xcbadff['fY'],_0xa87ede;}},{'key':'UpdatePTZPosition','value':function(_0x2da374,_0x47dd34,_0x416e91){if(null==this['pRenderParam'][_0x2da374])return _0x520965;var _0x3368ab={'fHAngleSin':0x0,'fHAngleCos':0x0,'fVAngleSin':0x0,'fVAngleCos':0x0},_0x22c4dc=_0xa87ede;if(_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x2da374]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x2da374]['nDisplayEffect']){if((_0x22c4dc=this['ComputeAngleVertical'](_0x47dd34,_0x416e91,_0x3368ab,this['pRenderParam'][_0x2da374]['nDisplayEffect']))!=_0xa87ede)return _0x22c4dc;}else{if(_0x186ff9['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x2da374]['nDisplayEffect'])return _0x86aef9;if((_0x22c4dc=this['ComputeAngleHorizontal'](_0x47dd34,_0x416e91,_0x3368ab))!=_0xa87ede)return _0x22c4dc;}return 0x0==this['IsInImage'](this['fRX1'],this['fRX2'],this['fRY1'],this['fRY2'],_0x3368ab,this['pRenderParam'][_0x2da374]['fZoom'],this['pRenderParam'][_0x2da374]['nDisplayEffect'])?_0x31ddcf:(this['pRenderParam'][_0x2da374]['fCosH']=_0x3368ab['fHAngleCos'],this['pRenderParam'][_0x2da374]['fSinH']=_0x3368ab['fHAngleSin'],this['pRenderParam'][_0x2da374]['fCosV']=_0x3368ab['fVAngleCos'],this['pRenderParam'][_0x2da374]['fSinV']=_0x3368ab['fVAngleSin'],_0xa87ede);}},{'key':'JudgeDisplayEffect','value':function(_0x1c7058){var _0x4ea6e2=0x0;switch(_0x4ea6e2){case 0x0:return _0x4ea6e2=this['GetPlaceType'](_0x1c7058),0x4==this['nPlaceType']&&(this['nPlaceType']=0x0),_0xa87ede;case 0x3:return(_0x4ea6e2=this['GetPlaceType'](_0x1c7058))==this['nPlaceType']||0x4==this['nPlaceType']?_0xa87ede:_0x86aef9;case 0x2:case 0x1:return(_0x4ea6e2=this['GetPlaceType'](_0x1c7058))==this['nPlaceType']||0x4==_0x4ea6e2?_0xa87ede:_0x86aef9;default:return _0x86aef9;}return _0x86aef9;}},{'key':'GetPlaceType','value':function(_0x28fcf9){switch(_0x28fcf9){case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_CEILING']:return 0x3;case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x186ff9['SR_DE_FISH_PANARAMA_FLOOR_180']:case _0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:case _0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:return 0x2;case _0x186ff9['SR_DE_FISH_PTZ_WALL']:case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:return 0x1;case _0x186ff9['SR_DE_FISH_SEMISPHERE']:case _0x186ff9['SR_DE_FISH_ORIGINAL']:case _0x186ff9['SR_DE_FISH_PLANET']:case _0x186ff9['SR_DE_FISH_SPHERE']:case _0x186ff9['SR_DE_FISH_PLANET']:return 0x4;default:return 0x0;}return 0x0;}},{'key':'SetFishParam','value':function(_0x1f35b5,_0x43d6c5){if(_0x1f35b5<0x0||_0x1f35b5>=_0x379995)return _0x31ddcf;if(null==_0x43d6c5)return _0x31ddcf;if(null==this['pRenderParam'][_0x1f35b5])return _0x520965;var _0x144707=_0xa87ede;switch(_0x43d6c5['nFishParamType']){case _0x392c27:if((_0x144707=this['UpdateCircyeParam'](_0x43d6c5['fRXLeft'],_0x43d6c5['fRXRight'],_0x43d6c5['fRYTop'],_0x43d6c5['fRYBottom']))!=_0xa87ede)return _0x144707;this['pRenderParam'][_0x1f35b5]['bCut']=_0x43d6c5['bCut'],this['bBlack']=_0x43d6c5['bBlack'];break;case _0x5ca12e:if(_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect'])return _0x86aef9;if((_0x144707=this['UpdateWideScanAngle'](_0x1f35b5,_0x43d6c5['fAngle']))!=_0xa87ede)return _0x144707;this['pFishParam'][_0x1f35b5]['fAngle']=_0x43d6c5['fAngle'];break;case _0x378a81:if(_0x186ff9['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PTZ_CEILING']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PTZ_FLOOR']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect'])return _0x86aef9;if((_0x144707=this['UpdateRangeParam'](_0x1f35b5,_0x43d6c5['fZoom']))!=_0xa87ede)return _0x144707;this['pFishParam'][_0x1f35b5]['fZoom']=_0x43d6c5['fZoom'];break;case _0x3be196:if(_0x186ff9['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PTZ_CEILING']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PTZ_FLOOR']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect'])return _0x86aef9;if((_0x144707=this['UpdatePTZPosition'](_0x1f35b5,_0x43d6c5['fPTZX'],_0x43d6c5['fPTZY'],this['pRenderParam'][_0x1f35b5]['fZoom'],!0x0))!=_0xa87ede)return _0x144707;this['pFishParam'][_0x1f35b5]['fPTZX']=_0x43d6c5['fPTZX'],this['pFishParam'][_0x1f35b5]['fPTZY']=_0x43d6c5['fPTZY'];break;default:return _0x86aef9;}return _0x144707=this['ComputePTZPoints']();}},{'key':'GetFishParam','value':function(_0x2cc8ea,_0x26ceb1){return _0x2cc8ea<0x0||_0x2cc8ea>=_0x379995||null==_0x26ceb1||null==this['pFishParam'][_0x2cc8ea]?_0x31ddcf:(_0x26ceb1['fRXLeft']=this['fRX1'],_0x26ceb1['fRXRight']=this['fRX2'],_0x26ceb1['fRYTop']=this['fRY1'],_0x26ceb1['fRYBottom']=this['fRY2'],_0x26ceb1['bBlack']=this['bBlack'],_0x26ceb1['bCut']=this['pRenderParam'][_0x2cc8ea]['bCut'],_0x26ceb1['nFishParamType']=this['pFishParam'][_0x2cc8ea]['nFishParamType'],_0x26ceb1['fAngle']=this['pFishParam'][_0x2cc8ea]['fAngle'],_0x26ceb1['fZoom']=this['pFishParam'][_0x2cc8ea]['fZoom'],_0x26ceb1['fPTZX']=this['pFishParam'][_0x2cc8ea]['fPTZX'],_0x26ceb1['fPTZY']=this['pFishParam'][_0x2cc8ea]['fPTZY'],_0xa87ede);}},{'key':'GetRenderParam','value':function(_0x357f40,_0x215a6a){return _0x357f40<0x0||_0x357f40>=_0x379995||null==_0x215a6a||null==this['pRenderParam'][_0x357f40]?_0x31ddcf:(_0x215a6a['fRXLeft']=this['fRX1'],_0x215a6a['fRXRight']=this['fRX2'],_0x215a6a['fRYTop']=this['fRY1'],_0x215a6a['fRYBottom']=this['fRY2'],_0x215a6a['bBlack']=this['bBlack'],_0x215a6a['fCosH']=this['pRenderParam'][_0x357f40]['fCosH'],_0x215a6a['fSinH']=this['pRenderParam'][_0x357f40]['fSinH'],_0x215a6a['fCosV']=this['pRenderParam'][_0x357f40]['fCosV'],_0x215a6a['fSinV']=this['pRenderParam'][_0x357f40]['fSinV'],_0x215a6a['fAngle']=this['pRenderParam'][_0x357f40]['fAngle'],_0x215a6a['fZoom']=this['pRenderParam'][_0x357f40]['fZoom'],_0x215a6a['nDisplayEffect']=this['pRenderParam'][_0x357f40]['nDisplayEffect'],_0x215a6a['bCut']=this['pRenderParam'][_0x357f40]['bCut'],_0xa87ede);}},{'key':'UpdateCircyeParam','value':function(_0x3c2410,_0x304e26,_0x834a20,_0x344cab){if(_0x3c2410<=-0.5||_0x3c2410>=0.4||_0x304e26<=0.6||_0x304e26>=1.5||_0x834a20<=-0.5||_0x834a20>=0.4||_0x344cab<=0.6||_0x344cab>=1.5||_0x3c2410+_0x304e26<=0.8||_0x3c2410+_0x304e26>=1.2||_0x834a20+_0x344cab<=0.8||_0x834a20+_0x344cab>=1.2)return _0x31ddcf;if(_0x3c2410<0x0||_0x304e26>0x1||_0x834a20<0x0||_0x344cab>0x1){for(var _0x49ed0d=0x0;_0x49ed0d<_0x379995;++_0x49ed0d)if(null!=this['pRenderParam'][_0x49ed0d]&&(_0x186ff9['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x49ed0d]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x49ed0d]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x49ed0d]['nDisplayEffect'])){var _0xd74afc={};if(_0xd74afc['fHAngleCos']=this['pRenderParam'][_0x49ed0d]['fCosH'],_0xd74afc['fHAngleSin']=this['pRenderParam'][_0x49ed0d]['fSinH'],_0xd74afc['fVAngleCos']=this['pRenderParam'][_0x49ed0d]['fCosV'],_0xd74afc['fVAngleSin']=this['pRenderParam'][_0x49ed0d]['fSinV'],0x0==this['IsInImage'](_0x3c2410,_0x304e26,_0x834a20,_0x344cab,_0xd74afc,this['pRenderParam'][_0x49ed0d]['fZoom'],this['pRenderParam'][_0x49ed0d]['nDisplayEffect']))return _0x31ddcf;}}return this['fRX1']=_0x3c2410,this['fRX2']=_0x304e26,this['fRY1']=_0x834a20,this['fRY2']=_0x344cab,_0xa87ede;}},{'key':'UpdateWideScanAngle','value':function(_0x1a368e,_0x3c704b){return null==this['pRenderParam'][_0x1a368e]?_0x520965:(_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']==this['pRenderParam'][_0x1a368e]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']==this['pRenderParam'][_0x1a368e]['nDisplayEffect']?this['pRenderParam'][_0x1a368e]['fAngle']=_0x3c704b:_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']!=this['pRenderParam'][_0x1a368e]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']!=this['pRenderParam'][_0x1a368e]['nDisplayEffect']||(this['pRenderParam'][_0x1a368e]['fAngle']=-_0x3c704b),_0xa87ede);}},{'key':'ComputeAngleVertical','value':function(_0x44631d,_0x3f14f5,_0xa133ad,_0x428ea9){var _0x5db699=_0x44631d,_0x3501fe=_0x3f14f5,_0xd2137a=Math['sqrt']((_0x3501fe-0.5)*(_0x3501fe-0.5)+(_0x5db699-0.5)*(_0x5db699-0.5));if(_0xd2137a>0.5)return _0x31ddcf;if(_0xd2137a<0.001)return _0xa133ad['fVAngleCos']=0x1,_0xa133ad['fVAngleSin']=0x0,_0xa133ad['fHAngleCos']=0x1,_0xa133ad['fHAngleSin']=0x0,_0xa87ede;if(_0x428ea9==_0x186ff9['SR_DE_FISH_PTZ_CEILING']){_0xa133ad['fHAngleCos']=(0.5-_0x3501fe)/_0xd2137a,_0xa133ad['fHAngleSin']=(0.5-_0x5db699)/_0xd2137a;var _0x4cbe61=_0xd2137a*_0x530a52;_0xa133ad['fVAngleCos']=Math['cos'](_0x4cbe61),_0xa133ad['fVAngleSin']=Math['sin'](_0x4cbe61);}else{if(_0x428ea9!=_0x186ff9['SR_DE_FISH_PTZ_FLOOR'])return _0x31ddcf;_0xa133ad['fHAngleCos']=(_0x3501fe-0.5)/_0xd2137a,_0xa133ad['fHAngleSin']=(0.5-_0x5db699)/_0xd2137a;var _0x3a4040=_0xd2137a*_0x530a52;_0xa133ad['fVAngleCos']=Math['cos'](_0x3a4040),_0xa133ad['fVAngleSin']=Math['sin'](_0x3a4040);}return _0xa87ede;}},{'key':'ComputeAngleHorizontal','value':function(_0x29818c,_0x5b806c,_0x317efc){var _0x37f326,_0x10f5ae,_0xf18d33,_0x551c74,_0x45cf44,_0x384585,_0x530308,_0x578f2e=_0x29818c;return(_0x5b806c-(_0x45cf44=0.5))*(_0x5b806c-_0x45cf44)+(_0x578f2e-_0x45cf44)*(_0x578f2e-_0x45cf44)>0.25?_0x31ddcf:(_0x384585=(_0x5b806c-_0x45cf44)/_0x45cf44*_0x530a52/0x2,_0x37f326=Math['cos'](_0x384585),_0x10f5ae=Math['sin'](_0x384585),(_0x578f2e-_0x45cf44)/_0x45cf44/_0x37f326>0x1||(_0x578f2e-_0x45cf44)/_0x45cf44/_0x37f326<-0x1?_0x31ddcf:(_0x530308=(_0x578f2e-_0x45cf44)/_0x45cf44/_0x37f326*_0x530a52/0x2,_0xf18d33=Math['cos'](_0x530308),_0x551c74=Math['sin'](_0x530308),_0x317efc['fVAngleCos']=_0x37f326,_0x317efc['fVAngleSin']=_0x10f5ae,_0x317efc['fHAngleCos']=_0xf18d33,_0x317efc['fHAngleSin']=_0x551c74,_0xa87ede));}},{'key':'IsInImage','value':function(_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e,_0x34b532,_0x5075bd){return 0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0x1,0.5,_0x5075bd)&&(0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0x0,0.5,_0x5075bd)&&(0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0.5,0x1,_0x5075bd)&&(0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0.5,0x0,_0x5075bd)&&(0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0x0,0x0,_0x5075bd)&&(0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0x0,0x1,_0x5075bd)&&(0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0x1,0x1,_0x5075bd)&&0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0x1,0x0,_0x5075bd)))))));}},{'key':'IsOutofImage','value':function(_0x55554,_0x5cba81,_0x39725d,_0x4b39ef,_0x173db4,_0x33d145,_0x4dd928,_0x4b8cf0,_0x571801,_0x55c4c5,_0x2d5629,_0x302c59){var _0x1a12f8,_0x40381b,_0x33acd8,_0x1be963,_0x4569de,_0x87404c,_0x41254e,_0x42ce74,_0x9f0377,_0x186da2,_0x3b320a,_0x37f2f4,_0xff0b8f;if(0x1,_0x3b320a=(_0x55554+_0x5cba81)/0x2*0x1,_0x37f2f4=(_0x39725d+_0x4b39ef)/0x2*(_0x186da2=(_0x5cba81-_0x55554)/(_0x4b39ef-_0x39725d)),_0xff0b8f=(_0x5cba81-_0x55554)/0x2*0x1,_0x302c59==_0x186ff9['SR_DE_FISH_PTZ_CEILING']){if(_0x40381b=_0x55c4c5-0.5,_0x33acd8=(_0x1a12f8=0.5-_0x2d5629)*_0x4dd928+(_0x87404c=_0x571801)*_0x4b8cf0,(_0x41254e=_0x87404c*_0x4dd928-_0x1a12f8*_0x4b8cf0)<=0x0)return!0x0;_0x9f0377=Math['sqrt'](_0x40381b*_0x40381b+_0x33acd8*_0x33acd8);var _0x23e843=Math['sqrt'](_0x40381b*_0x40381b+_0x33acd8*_0x33acd8+_0x41254e*_0x41254e),_0x3db894=Math['asin'](_0x9f0377/_0x23e843)/1.5707963*0.5;if(_0x4569de=(-((_0x40381b=_0x3db894*_0x40381b/_0x9f0377)*_0x33d145+(_0x33acd8=_0x3db894*_0x33acd8/_0x9f0377)*_0x173db4)*_0xff0b8f*0x2+_0x37f2f4)/_0x186da2,(_0x1be963=((_0x40381b*_0x173db4-_0x33acd8*_0x33d145)*_0xff0b8f*0x2+_0x3b320a)/0x1)<0x0||_0x1be963>0x1||_0x4569de<0x0||_0x4569de>0x1)return!0x0;}if(_0x302c59==_0x186ff9['SR_DE_FISH_PTZ_FLOOR']){if(_0x40381b=_0x55c4c5-0.5,_0x33acd8=(_0x1a12f8=_0x2d5629-0.5)*_0x4dd928+(_0x87404c=_0x571801)*_0x4b8cf0,(_0x41254e=_0x87404c*_0x4dd928-_0x1a12f8*_0x4b8cf0)<=0x0)return!0x0;_0x9f0377=Math['sqrt'](_0x40381b*_0x40381b+_0x33acd8*_0x33acd8);var _0x283f42=Math['sqrt'](_0x40381b*_0x40381b+_0x33acd8*_0x33acd8+_0x41254e*_0x41254e),_0xaf09b9=Math['asin'](_0x9f0377/_0x283f42)/1.5707963*0.5;if(_0x4569de=(((_0x40381b=_0xaf09b9*_0x40381b/_0x9f0377)*_0x33d145+(_0x33acd8=_0xaf09b9*_0x33acd8/_0x9f0377)*_0x173db4)*_0xff0b8f*0x2+_0x37f2f4)/_0x186da2,(_0x1be963=((_0x40381b*_0x173db4-_0x33acd8*_0x33d145)*_0xff0b8f*0x2+_0x3b320a)/0x1)<0x0||_0x1be963>0x1||_0x4569de<0x0||_0x4569de>0x1)return!0x0;}if(_0x302c59==_0x186ff9['SR_DE_FISH_PTZ_WALL']){if(_0x1be963=(_0x40381b=_0x55c4c5-0.5)*_0x173db4+(_0x41254e=(_0x87404c=_0x571801)*_0x4dd928-(_0x1a12f8=_0x2d5629-0.5)*_0x4b8cf0)*_0x33d145,_0x4569de=_0x33acd8=_0x1a12f8*_0x4dd928+_0x87404c*_0x4b8cf0,(_0x42ce74=_0x41254e*_0x173db4-_0x40381b*_0x33d145)<=0x0)return!0x0;_0x9f0377=Math['sqrt'](_0x1be963*_0x1be963+_0x4569de*_0x4569de);var _0x19d8a7=Math['sqrt'](_0x1be963*_0x1be963+_0x4569de*_0x4569de+_0x42ce74*_0x42ce74),_0xfca511=Math['asin'](_0x9f0377/_0x19d8a7)/1.5707963*0.5;if(_0x4569de=(_0xfca511*_0x4569de/_0x9f0377*_0xff0b8f*0x2+_0x37f2f4)/_0x186da2,(_0x1be963=(_0xfca511*_0x1be963/_0x9f0377*_0xff0b8f*0x2+_0x3b320a)/0x1)<0x0||_0x1be963>0x1||_0x4569de<0x0||_0x4569de>0x1)return!0x0;}return!0x1;}},{'key':'ComputePTZPoints','value':function(){if(_0x3cf544==this['nWndPort'])return _0x520965;for(var _0x58c912=0x0;_0x58c912<_0x379995;++_0x58c912)if(null!=this['pRenderParam'][_0x58c912]&&(_0x186ff9['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x58c912]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x58c912]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x58c912]['nDisplayEffect'])){var _0x242d80=_0xa87ede;if(this['nPTZDisplayMode']==_0x495db0){if(_0x242d80=this['GetRangePoints'](_0x58c912),_0xa87ede!=_0x242d80)continue;if(_0x242d80=this['TransformPTZRangePoints'](_0x58c912),_0xa87ede!=_0x242d80)continue;}else{if(this['nPTZDisplayMode']==_0x150ab7&&(_0x242d80=this['GetRectPoints'](_0x58c912),_0xa87ede!=_0x242d80))continue;}}return _0xa87ede;}},{'key':'GetWndPort','value':function(){return this['nWndPort'];}},{'key':'GetPTZDisplayMode','value':function(){return this['nPTZDisplayMode'];}},{'key':'GetPTZColor','value':function(_0x50ee0b,_0x3dbb47){return _0x50ee0b<0x0||_0x50ee0b>=_0x379995||null==_0x3dbb47?_0x31ddcf:(_0x3dbb47['fA']=this['stPTZColor'][_0x50ee0b]['fA'],_0x3dbb47['fR']=this['stPTZColor'][_0x50ee0b]['fR'],_0x3dbb47['fG']=this['stPTZColor'][_0x50ee0b]['fG'],_0x3dbb47['fB']=this['stPTZColor'][_0x50ee0b]['fB'],null!=this['pPTZSetColor']&&(Math['abs'](this['pPTZSetColor'][_0x50ee0b]['fA'])<_0x4a23c6||Math['abs'](this['pPTZSetColor'][_0x50ee0b]['fR'])<_0x4a23c6||Math['abs'](this['pPTZSetColor'][_0x50ee0b]['fG'])<_0x4a23c6||Math['abs'](this['pPTZSetColor'][_0x50ee0b]['fB'])<_0x4a23c6)&&(_0x3dbb47['fA']=this['pPTZSetColor'][_0x50ee0b]['fA'],_0x3dbb47['fR']=this['pPTZSetColor'][_0x50ee0b]['fR'],_0x3dbb47['fG']=this['pPTZSetColor'][_0x50ee0b]['fG'],_0x3dbb47['fB']=this['pPTZSetColor'][_0x50ee0b]['fB']),_0xa87ede);}},{'key':'SetPTZColor','value':function(_0x5e498c,_0x1b4ad4){if(_0x5e498c<0x0||_0x5e498c>=_0x379995)return _0x31ddcf;if(null==_0x1b4ad4)return _0x31ddcf;if(null==this['pPTZSetColor']){this['pPTZSetColor']=[];for(var _0x533551=0x0;_0x533551<_0x379995;++_0x533551)this['pPTZSetColor'][_0x533551]={},this['pPTZSetColor'][_0x533551]['fR']=0x0,this['pPTZSetColor'][_0x533551]['fG']=0x0,this['pPTZSetColor'][_0x533551]['fB']=0x0,this['pPTZSetColor'][_0x533551]['fA']=0x1;}return this['pPTZSetColor'][_0x5e498c]['fR']=_0x1b4ad4['fR'],this['pPTZSetColor'][_0x5e498c]['fG']=_0x1b4ad4['fG'],this['pPTZSetColor'][_0x5e498c]['fB']=_0x1b4ad4['fB'],this['pPTZSetColor'][_0x5e498c]['fA']=_0x1b4ad4['fA'],_0xa87ede;}},{'key':'IsPTZSelected','value':function(_0x3173db){return!(_0x3173db<0x0||_0x3173db>=_0x379995)&&this['bPTZSelected'][_0x3173db];}},{'key':'GetPTZPort','value':function(_0x2294b2,_0xb0dbfe,_0xa80085){if(this['nWndPort']==_0x3cf544)return _0x520965;if(null==this['pRenderParam'][this['nWndPort']])return _0x520965;var _0x15d626=_0x379995,_0x16f17c={};_0x16f17c['fX']=_0x2294b2,_0x16f17c['fY']=_0xb0dbfe;for(var _0x2c3539=0x0;_0x2c3539<_0x379995;++_0x2c3539)this['bPTZSelected'][_0x2c3539]=!0x1;if(this['nPTZDisplayMode']==_0x495db0){switch(this['pRenderParam'][this['nWndPort']]['nDisplayEffect']){case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:this['GetPointPano2FishFloor'](_0x16f17c,_0x2294b2,_0xb0dbfe);break;case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:this['GetPointPano2FishCeiling'](_0x16f17c,_0x2294b2,_0xb0dbfe);break;case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:this['GetPointPano2FishWall'](_0x16f17c,_0x2294b2,_0xb0dbfe);}for(var _0x398890=0x0;_0x398890<_0x379995;++_0x398890)if(0x0!=this['nOriPTZPointNum'][_0x398890]){var _0x2c092e={};_0x2c092e['fX']=this['pOriPTZPoints'][_0x398890][0x0]['fX'],_0x2c092e['fY']=this['pOriPTZPoints'][_0x398890][0x0]['fY'];var _0x6358e2={};_0x6358e2['fX']=this['pOriPTZPoints'][_0x398890][0x0]['fX'],_0x6358e2['fY']=this['pOriPTZPoints'][_0x398890][0x0]['fY'];for(var _0x1bdca0=0x1;_0x1bdca0<this['nOriPTZPointNum'][_0x398890];++_0x1bdca0)this['GetPTZRectange'](_0x2c092e,_0x6358e2,this['pOriPTZPoints'][_0x398890][_0x1bdca0]);if(_0x16f17c['fX']<=_0x2c092e['fX']&&_0x16f17c['fX']>=_0x6358e2['fX']&&_0x16f17c['fY']>=_0x6358e2['fY']&&_0x16f17c['fY']<=_0x2c092e['fY']){_0x15d626=_0x398890;break;}}}else{if(this['nPTZDisplayMode']!=_0x150ab7)return _0x86aef9;for(var _0x200f11=0x0;_0x200f11<_0x379995;++_0x200f11)if(_0x16f17c['fX']<=this['pRectPoints'][_0x200f11][0x2]['fX']&&_0x16f17c['fX']>=this['pRectPoints'][_0x200f11][0x0]['fX']&&_0x16f17c['fY']>=this['pRectPoints'][_0x200f11][0x0]['fY']&&_0x16f17c['fY']<=this['pRectPoints'][_0x200f11][0x2]['fY']){_0x15d626=_0x200f11;break;}}return _0x15d626<_0x379995?(this['bPTZSelected'][_0x15d626]=!0x0,_0xa80085['nPTZPort']=_0x15d626,_0xa87ede):_0x86aef9;}},{'key':'SetPTZPort','value':function(_0x54100c){if(_0x54100c<0x0||_0x54100c>=_0x379995)return _0x31ddcf;for(var _0xba5ecb=0x0;_0xba5ecb<_0x379995;++_0xba5ecb)this['bPTZSelected'][_0xba5ecb]=!0x1;if(this['nPTZDisplayMode']==_0x495db0){if(0x0==this['nOriPTZPointNum'][_0x54100c])return _0x31ddcf;this['bPTZSelected'][_0x54100c]=!0x0;}else{if(0x0==this['nPTZRectNum'][_0x54100c])return _0x31ddcf;this['bPTZSelected'][_0x54100c]=!0x0;}return _0xa87ede;}},{'key':'GetPTZRectange','value':function(_0x2a6656,_0x54d29e,_0x1b0a20){return _0x1b0a20['fX']<_0x54d29e['fX']&&(_0x54d29e['fX']=_0x1b0a20['fX']),_0x1b0a20['fY']<_0x54d29e['fY']&&(_0x54d29e['fY']=_0x1b0a20['fY']),_0x1b0a20['fX']>_0x2a6656['fX']&&(_0x2a6656['fX']=_0x1b0a20['fX']),_0x1b0a20['fY']>_0x2a6656['fY']&&(_0x2a6656['fY']=_0x1b0a20['fY']),_0xa87ede;}},{'key':'GetPTZPoints','value':function(_0x4bfd20,_0x581c46,_0x1cb85a){return _0x4bfd20<0x0||_0x4bfd20>=_0x379995?_0x31ddcf:null==this['pRenderParam'][this['nWndPort']]?_0x520965:(_0x495db0==_0x1cb85a?null!=this['pOriPTZPoints'][_0x4bfd20]&&0x0!=this['nOriPTZPointNum'][_0x4bfd20]&&(_0x581c46['pstPoints']=this['pOriPTZPoints'][_0x4bfd20],_0x581c46['nPointNum']=this['nOriPTZPointNum'][_0x4bfd20]):_0x150ab7==_0x1cb85a&&null!=this['pRectPoints'][_0x4bfd20]&&(_0x581c46['pstPoints']=this['pRectPoints'][_0x4bfd20],_0x581c46['nPointNum']=0x4),_0xa87ede);}},{'key':'SetPTZDisplayMode','value':function(_0x236fa7){return this['nPTZDisplayMode']=_0x236fa7,this['ComputePTZPoints']();}},{'key':'GetDisplayEffect','value':function(_0x18e72c){return _0x18e72c<0x0||_0x18e72c>=_0x379995||null==this['pRenderParam']?_0x186ff9['SR_DE_NULL']:this['pRenderParam'][_0x18e72c]['nDisplayEffect'];}},{'key':'GetPTZFragmentPoints','value':function(_0x42473d,_0x24b5a4,_0x3e8a32){if(_0x42473d<0x0||_0x42473d>=_0x379995)return _0x31ddcf;if(null==this['pPanoPTZPoints'][_0x42473d]||0x0==this['nPanoPTZPointNum'][_0x42473d])return _0x31ddcf;var _0x392470=this['nPTZFragmentNode'][_0x42473d][_0x3e8a32];if(_0x24b5a4['nPointNum']=this['nPTZFragmentNode'][_0x42473d][_0x3e8a32+0x1]-this['nPTZFragmentNode'][_0x42473d][_0x3e8a32],_0x24b5a4['nPointNum']<0x0)return _0x520965;_0x24b5a4['pstPoints']=[];for(var _0x3505dd=0x0;_0x3505dd<_0x24b5a4['nPointNum'];++_0x3505dd){var _0x1ae379={};_0x1ae379['fX']=this['pPanoPTZPoints'][_0x42473d][_0x392470+_0x3505dd]['fX'],_0x1ae379['fY']=this['pPanoPTZPoints'][_0x42473d][_0x392470+_0x3505dd]['fY'],_0x24b5a4['pstPoints']['push'](_0x1ae379);}return _0xa87ede;}},{'key':'GetPTZFragmentNum','value':function(_0x4d18ad){return _0x4d18ad<0x0||_0x4d18ad>=_0x379995||0x0==this['nPTZFragmentNum'][_0x4d18ad]?0x0:this['nPTZFragmentNum'][_0x4d18ad];}},{'key':'CalcPTZFragmentPoints','value':function(_0x220257){if(_0x220257<0x0||_0x220257>=_0x379995)return _0x31ddcf;if(null==this['pPanoPTZPoints'][_0x220257]||0x0==this['nPanoPTZPointNum'][_0x220257])return _0x520965;this['nPTZFragmentNode'][_0x220257][0x0]=0x0,this['nPTZFragmentNum'][_0x220257]=0x1;for(var _0x39fb1c=0x0,_0x29453d=0x0;_0x29453d<this['nPanoPTZPointNum'][_0x220257]-0x1;_0x29453d++)Math['abs'](this['pPanoPTZPoints'][_0x220257][_0x29453d+0x1]['fX']-this['pPanoPTZPoints'][_0x220257][_0x29453d]['fX'])>0.5&&(_0x39fb1c=this['nPTZFragmentNum'][_0x220257],this['nPTZFragmentNode'][_0x220257][_0x39fb1c]=_0x29453d+0x1,this['nPTZFragmentNum'][_0x220257]=this['nPTZFragmentNum'][_0x220257]+0x1);var _0x99788e=this['nPanoPTZPointNum'][_0x220257];return Math['abs'](this['pPanoPTZPoints'][_0x220257][0x0]['fX']-this['pPanoPTZPoints'][_0x220257][_0x99788e-0x1]['fX'])<0.5&&(this['pPanoPTZPoints'][_0x220257][_0x99788e]['fX']=this['pPanoPTZPoints'][_0x220257][0x0]['fX'],this['pPanoPTZPoints'][_0x220257][_0x99788e]['fY']=this['pPanoPTZPoints'][_0x220257][0x0]['fY'],this['nPanoPTZPointNum'][_0x220257]=this['nPanoPTZPointNum'][_0x220257]+0x1),_0x39fb1c=this['nPTZFragmentNum'][_0x220257],this['nPTZFragmentNode'][_0x220257][_0x39fb1c]=this['nPanoPTZPointNum'][_0x220257],_0xa87ede;}},{'key':'IsPortAllocated','value':function(_0x57f699){return this['bPortAllocated'][_0x57f699];}},{'key':'GetPointFish2PanoCeiling','value':function(_0x4d4650,_0x33309b,_0x5302ff){if(null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==_0x4d4650)return _0x31ddcf;var _0x50af1a,_0x33bc1d;_0x50af1a=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x33bc1d=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0xd61f47,_0x31cd33=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&(_0xd61f47=0x1*-this['fRX1'])>_0x31cd33&&(_0x31cd33=_0xd61f47),this['fRX2']>0x1&&(_0xd61f47=0x1*(this['fRX2']-0x1))>_0x31cd33&&(_0x31cd33=_0xd61f47),this['fRY1']<0x0&&(_0xd61f47=-this['fRY1']*_0x50af1a)>_0x31cd33&&(_0x31cd33=_0xd61f47),this['fRY2']>0x1&&(_0xd61f47=(this['fRY2']-0x1)*_0x50af1a)>_0x31cd33&&(_0x31cd33=_0xd61f47));var _0x1b5642,_0x157591=_0x31cd33/_0x33bc1d,_0x21e458={};if(_0x21e458['fX']=0x0,_0x21e458['fY']=0x0,Math['abs'](_0x33309b-0.5)<_0x4a23c6&&Math['abs'](_0x5302ff-0.5)<_0x4a23c6)return _0x86aef9;var _0x2e80fa={},_0x54a6d2={};_0x2e80fa['fX']=_0x33309b-0.5,_0x2e80fa['fY']=_0x5302ff-0.5,_0x54a6d2['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x54a6d2['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0x1aead2=Math['sqrt'](_0x2e80fa['fX']*_0x2e80fa['fX']+_0x2e80fa['fY']*_0x2e80fa['fY']),_0x5cec6b=Math['sqrt'](_0x54a6d2['fX']*_0x54a6d2['fX']+_0x54a6d2['fY']*_0x54a6d2['fY']);return _0x1b5642=Math['acos']((_0x2e80fa['fX']*_0x54a6d2['fX']+_0x2e80fa['fY']*_0x54a6d2['fY'])/(_0x1aead2*_0x5cec6b)),_0x2e80fa['fX']*_0x54a6d2['fY']-_0x2e80fa['fY']*_0x54a6d2['fX']>0x0&&(_0x1b5642=6.2831852-_0x1b5642),_0x21e458['fX']=_0x1b5642/6.2831853,_0x21e458['fY']=(0x2*(0.5-_0x1aead2)-_0x157591)/(0.8-_0x157591),_0x21e458['fY']>=0x0&&_0x21e458['fX']>=0x0&&_0x21e458['fY']<=0x1&&_0x21e458['fX']<=0x1?(_0x4d4650['fX']=_0x21e458['fX'],_0x4d4650['fY']=_0x21e458['fY'],_0xa87ede):_0x31ddcf;}},{'key':'GetPointFish2PanoFloor','value':function(_0x3190e8,_0x1ae5c7,_0x3e57c9){if(null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==_0x3190e8)return _0x31ddcf;var _0xb389b3,_0x4f9e7b;_0xb389b3=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x4f9e7b=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x3d1cb8,_0x193c42=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&(_0x3d1cb8=0x1*-this['fRX1'])>_0x193c42&&(_0x193c42=_0x3d1cb8),this['fRX2']>0x1&&(_0x3d1cb8=0x1*(this['fRX2']-0x1))>_0x193c42&&(_0x193c42=_0x3d1cb8),this['fRY1']<0x0&&(_0x3d1cb8=-this['fRY1']*_0xb389b3)>_0x193c42&&(_0x193c42=_0x3d1cb8),this['fRY2']>0x1&&(_0x3d1cb8=(this['fRY2']-0x1)*_0xb389b3)>_0x193c42&&(_0x193c42=_0x3d1cb8));var _0x59f56c,_0x474b44=_0x193c42/_0x4f9e7b,_0x1f06df={'fX':0x0,'fY':0x0};if(Math['abs'](_0x1ae5c7-0.5)<_0x4a23c6&&Math['abs'](_0x3e57c9-0.5)<_0x4a23c6)return _0x86aef9;var _0x4e227e={},_0x47ca01={};_0x4e227e['fX']=_0x1ae5c7-0.5,_0x4e227e['fY']=_0x3e57c9-0.5,_0x47ca01['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x47ca01['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0x2765a4=Math['sqrt'](_0x4e227e['fX']*_0x4e227e['fX']+_0x4e227e['fY']*_0x4e227e['fY']),_0xf458cb=Math['sqrt'](_0x47ca01['fX']*_0x47ca01['fX']+_0x47ca01['fY']*_0x47ca01['fY']);return _0x59f56c=Math['acos']((_0x4e227e['fX']*_0x47ca01['fX']+_0x4e227e['fY']*_0x47ca01['fY'])/(_0x2765a4*_0xf458cb)),_0x4e227e['fX']*_0x47ca01['fY']-_0x4e227e['fY']*_0x47ca01['fX']>0x0&&(_0x59f56c=6.2831852-_0x59f56c),_0x1f06df['fX']=0x1-_0x59f56c/6.2831853,_0x1f06df['fY']=0x1-(0x2*(0.5-_0x2765a4)-_0x474b44)/(0.8-_0x474b44),_0x1f06df['fY']>=0x0&&_0x1f06df['fX']>=0x0&&_0x1f06df['fY']<=0x1&&_0x1f06df['fX']<=0x1?(_0x3190e8['fX']=_0x1f06df['fX'],_0x3190e8['fY']=_0x1f06df['fY'],_0xa87ede):_0x31ddcf;}},{'key':'GetPointFish2PanoWall','value':function(_0x32e9fb,_0x333161,_0x265730){if(null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==_0x32e9fb)return _0x31ddcf;var _0x4ff303,_0x33b439;_0x4ff303=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x33b439=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x224936,_0xc43223,_0x4e65e4,_0x51a192,_0x6331f0,_0x1bbea8=0x0,_0x2283ca=0x1,_0x2966c4=0.1,_0x59ba23=0.9;this['fRX1']<0x0&&(_0x224936=0x1*-this['fRX1'],_0x1bbea8=_0x224936/=0x2*_0x33b439),this['fRX2']>0x1&&(_0xc43223=0x1*(this['fRX2']-0x1),_0x2283ca=0x1-(_0xc43223/=0x2*_0x33b439)),this['fRY1']<0x0&&(_0x4e65e4=-this['fRY1']*_0x4ff303,_0x2966c4=(_0x4e65e4/=0x2*_0x33b439)>0.1?_0x4e65e4:0.1),this['fRY2']>0x1&&(_0x51a192=(this['fRY2']-0x1)*_0x4ff303,_0x59ba23=(_0x51a192/=0x2*_0x33b439)>0x1-0.9?0x1-_0x51a192:0.9);var _0x266343={'fX':0x0,'fY':0x0},_0x219b0f=0x2*_0x333161*_0x33b439,_0xdf73cf=0x2*_0x265730*_0x33b439;return _0x6331f0=Math['sqrt'](_0x33b439*_0x33b439-(_0xdf73cf-_0x33b439)*(_0xdf73cf-_0x33b439)),Math['abs'](_0x6331f0)<_0x4a23c6?SR_ERR_PARAM:(_0x333161=_0x33b439*(_0x219b0f-_0x33b439)/_0x6331f0+_0x33b439,_0x265730=_0xdf73cf,_0x266343['fX']=(_0x333161-0x2*_0x1bbea8*_0x33b439)/(0x2*(_0x2283ca-_0x1bbea8)*_0x33b439),_0x266343['fY']=(_0x265730-0x2*_0x2966c4*_0x33b439)/(0x2*(_0x59ba23-_0x2966c4)*_0x33b439),_0x266343['fY']>=0x0&&_0x266343['fX']>=0x0&&_0x266343['fY']<=0x1&&_0x266343['fX']<=0x1?(_0x32e9fb['fX']=_0x266343['fX'],_0x32e9fb['fY']=_0x266343['fY'],_0xa87ede):_0x31ddcf);}},{'key':'UpdateRangeParam','value':function(_0x6c8fa1,_0x32a255){if(null==this['pRenderParam'][_0x6c8fa1])return _0x520965;if(_0x32a255<0.00001||_0x32a255>0.6)return _0x31ddcf;var _0x3c870d=0x0;return _0x186ff9['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x6c8fa1]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PTZ_CEILING']!=this['pRenderParam'][_0x6c8fa1]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PTZ_FLOOR']!=this['pRenderParam'][_0x6c8fa1]['nDisplayEffect']||(_0x3c870d=0x7*_0x32a255+0.8,this['IsInImage'](this['fRX1'],this['fRX2'],this['fRY1'],this['fRY2'],this['pRenderParam'][_0x6c8fa1]['fCosH'],this['pRenderParam'][_0x6c8fa1]['fSinH'],this['pRenderParam'][_0x6c8fa1]['fCosV'],this['pRenderParam'][_0x6c8fa1]['fSinV'],_0x3c870d,this['pRenderParam'][_0x6c8fa1]['nDisplayEffect']))?(this['pRenderParam'][_0x6c8fa1]['fZoom']=_0x3c870d,_0xa87ede):_0x31ddcf;}}]),_0x132b86;}()),_0x5440d6=0x20,_0x4ae543=(function(){function _0x48881e(){_0x54580d(this,_0x48881e),this['renderEngine']='webgl',this['oVideoHandle']=null,this['mainCanvasID']=null,this['curTimestamp']=0x0,this['mainSubPort']=0x0,this['mainVaildSubPort']=0x0,this['mainFECCorrect']=_0x186ff9['SR_DE_NULL'],this['FECErrorCode']=0x0,this['subPortNum']=0x0,this['FECShowMode']=_0x495db0,this['pFishParamManager']=null,this['InitFECParam'](),this['privateLinesInfo']=[],this['privateFontsInfo']=[],this['privateImageInfo']=[],this['bSRCallBackFlag']=!0x1,this['curLinesInfo']=null,this['curFontsInfo']=null,this['curImagesInfo']=null,this['maxPrivateLineTimeStamp']=0x0,this['hasSetFECParamManager']=!0x1,this['pWaterFontParam']=[],this['pWaterImageParam']=[],this['waterMarkImageIndex']=0x0,this['waterMarkImageMax']=0x1,this['aPOSAdaptBuf']=[];}return _0x4fd085(_0x48881e,[{'key':'InitDisplay','value':function(_0x41b975,_0xaf9fa6,_0xbaa2d7){return this['renderEngine']=_0xaf9fa6,this['mainCanvasID']=_0x41b975,'2d'===this['renderEngine']||'2D'===this['renderEngine']?(this['oVideoHandle']=new _0x47e209(),console['log']('2d\\x20render')):(this['oVideoHandle']=new _0x453e55(),this['mainFECCorrect']!=_0x186ff9['SR_DE_NULL']&&(null==this['pFishParamManager']&&(this['pFishParamManager']=new _0x30cc90()),this['oVideoHandle']['SR_SetFishParamManager'](this['pFishParamManager']),this['hasSetFECParamManager']=!0x0),console['log']('webgl\\x20render')),this['oVideoHandle']['SR_Init'](_0x41b975,_0xbaa2d7),this['mainVaildSubPort']=this['oVideoHandle']['SR_AddSubPort'](this['mainFECCorrect']),-0x1==this['mainVaildSubPort']?(console['info']('%c\\x20InitDisplay\\x20SR_AddSubPort\\x20error\\x20subport:%d','color:\\x20red',this['mainVaildSubPort']),0x0):(null==this['stFishEyeManager'][0x0]['pRender']&&this['mainFECCorrect']!==_0x186ff9['SR_DE_NULL']&&(this['stFishEyeManager'][0x0]['pRender']=this['oVideoHandle'],this['stFishEyeManager'][0x0]['nSubPort']=0x0,this['stFishEyeManager'][0x0]['sCanvasID']=this['mainCanvasID'],this['stFishEyeManager'][0x0]['bUsed']=0x1,this['stFishEyeManager'][0x0]['bInited']=0x1,this['stFishEyeManager'][0x0]['nValidSubPort']=this['mainVaildSubPort']),0x1);}},{'key':'ReleaseDisplay','value':function(){if(null!=this['oVideoHandle']&&(this['oVideoHandle']['SR_DelSubPort'](this['mainVaildSubPort']),this['oVideoHandle']['SR_Destroy'](),this['oVideoHandle']=null),this['subPortNum']>0x0){for(var _0x94556=0x1;_0x94556<_0x5440d6;_0x94556++)0x0!=this['stFishEyeManager'][_0x94556]['nSubPort']&&null!=this['stFishEyeManager'][_0x94556]['sCanvasID']&&0x0!=this['stFishEyeManager'][_0x94556]['bInited']&&(this['FEC_Disable'](_0x94556),this['FEC_DelPort'](_0x94556));}for(var _0x4ea93c=0x0;_0x4ea93c<_0x5440d6;_0x4ea93c++)this['stFishEyeManager'][_0x4ea93c]['pRender']=null;return this['stFishEyeManager']['splice'](0x0,this['stFishEyeManager']['length']),this['stFishParam']['splice'](0x0,this['stFishParam']['length']),null!=this['pFishParamManager']&&(this['pFishParamManager']['DeInit'](),this['pFishParamManager']=null),this['FECShowMode']=_0x495db0,this['DeInitPrivateParam'](),0x1;}},{'key':'DeInitPrivateParam','value':function(){this['privateLinesInfo']['splice'](0x0,this['privateLinesInfo']['length']),this['privateFontsInfo']['splice'](0x0,this['privateFontsInfo']['length']),this['privateImageInfo']['splice'](0x0,this['privateImageInfo']['length']),this['pWaterFontParam']['splice'](0x0,this['pWaterFontParam']['length']),this['pWaterImageParam']['splice'](0x0,this['pWaterImageParam']['length']),this['bSRCallBackFlag']=!0x1,this['curLinesInfo']=null;}},{'key':'DisplayFrame','value':function(_0x241257,_0x381b91,_0x5e3b07,_0x5d210c,_0x2bf64a,_0x244c7e){var _0x396b03=this;return new Promise(function(_0x3130e8){var _0x805485=-0x1;if(null!=_0x241257&&(_0x805485=_0x5d210c),_0x396b03['bSRCallBackFlag']||(null!=_0x396b03['oVideoHandle']&&_0x396b03['oVideoHandle']['SR_SetCallBack'](_0x396b03['WebGLDisplayCallBack'],_0x396b03,_0x444649),_0x396b03['bSRCallBackFlag']=!0x0),null!=_0x241257&&(0x0==_0x396b03['privateLinesInfo']['length']&&0x0==_0x396b03['privateFontsInfo']['length']&&0x0==_0x396b03['privateImageInfo']['length']||(_0x396b03['curTimestamp']=_0x805485,_0x396b03['FindIntelNodefromList'](_0x396b03['curTimestamp'])),null!=_0x396b03['oVideoHandle']&&_0x396b03['oVideoHandle']['SR_Draw'](_0x241257,_0x381b91,_0x5e3b07,_0x2bf64a,_0x244c7e),_0x396b03['subPortNum']>0x0)){for(var _0x14a6d1=0x1;_0x14a6d1<_0x5440d6;_0x14a6d1++)0x0!=_0x396b03['stFishEyeManager'][_0x14a6d1]['nSubPort']&&null!=_0x396b03['stFishEyeManager'][_0x14a6d1]['sCanvasID']&&0x0!=_0x396b03['stFishEyeManager'][_0x14a6d1]['bInited']&&null!=_0x396b03['stFishEyeManager'][_0x14a6d1]['pRender']&&_0x396b03['stFishEyeManager'][_0x14a6d1]['pRender']['SR_Draw'](_0x241257,_0x381b91,_0x5e3b07,null,null);}_0x3130e8(_0x805485);});}},{'key':'SetDisplayRect','value':function(_0x154492,_0x4d7bf2,_0x1a0b43,_0xfa552d){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_SetDisplayRect'](_0x154492,_0x4d7bf2,_0x1a0b43,_0xfa552d,_0xe9e464):0x0;}},{'key':'SetCanvasSize','value':function(_0x3e6288,_0x186bd2){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_SetCanvasSize'](_0x3e6288,_0x186bd2):0x0;}},{'key':'GetCanvasSize','value':function(){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_GetCanvasSize']():0x0;}},{'key':'SetAntialias','value':function(_0x3c0ac9){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_SetAntialias'](_0x3c0ac9):0x0;}},{'key':'SetD3DPostProcess','value':function(_0x2321b2,_0x3465f0){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_SetImagePostProcess'](_0x2321b2,_0x3465f0):0x0;}},{'key':'InitFECParam','value':function(){this['stFishEyeManager']=[];for(var _0x599cf5=0x0;_0x599cf5<_0x5440d6;_0x599cf5++)this['stFishEyeManager'][_0x599cf5]={},this['stFishEyeManager'][_0x599cf5]['pRender']=null,this['stFishEyeManager'][_0x599cf5]['nSubPort']=0x0,this['stFishEyeManager'][_0x599cf5]['sCanvasID']=null,this['stFishEyeManager'][_0x599cf5]['bUsed']=0x0,this['stFishEyeManager'][_0x599cf5]['bInit']=0x0,this['stFishEyeManager'][_0x599cf5]['nValidSubPort']=0x0,this['stFishEyeManager'][_0x599cf5]['emPlaceType']=_0x1e68ea,this['stFishEyeManager'][_0x599cf5]['emCorrectType']=_0x4fbb93,this['stFishEyeManager'][_0x599cf5]['emEffect']=_0x186ff9['SR_DE_FISH_ORIGINAL'];this['stFishParam']=[];for(var _0x5bb5bd=0x0;_0x5bb5bd<_0x5440d6;_0x5bb5bd++)this['stFishParam'][_0x5bb5bd]={},this['stFishParam'][_0x5bb5bd]['nUpDateType']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZParam']={},this['stFishParam'][_0x5bb5bd]['stPTZParam']['fPTZPositionX']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZParam']['fPTZPositionY']=0x0,this['stFishParam'][_0x5bb5bd]['stCycleParam']={},this['stFishParam'][_0x5bb5bd]['stCycleParam']['fRadiusLeft']=0x0,this['stFishParam'][_0x5bb5bd]['stCycleParam']['fRadiusRight']=0x0,this['stFishParam'][_0x5bb5bd]['stCycleParam']['fRadiusTop']=0x0,this['stFishParam'][_0x5bb5bd]['stCycleParam']['fRadiusBottom']=0x0,this['stFishParam'][_0x5bb5bd]['fZoom']=0x0,this['stFishParam'][_0x5bb5bd]['fWideScanOffset']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZColor']={},this['stFishParam'][_0x5bb5bd]['stPTZColor']['nR']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZColor']['nG']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZColor']['nB']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZColor']['nAlpha']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZSelect']={},this['stFishParam'][_0x5bb5bd]['stPTZSelect']['fTop']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZSelect']['fBottom']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZSelect']['fLeft']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZSelect']['fRight']=0x0,this['stFishParam'][_0x5bb5bd]['nCut']=0x0;}},{'key':'FEC_SetCanvasID','value':function(_0x461e15){return this['mainFECCorrect']=_0x186ff9['SR_DE_FISH_ORIGINAL'],0x1;}},{'key':'FEC_ResetCorrectType','value':function(_0x524c38,_0x41579d,_0x34714a){if(!0x1===this['hasSetFECParamManager']&&(null==this['pFishParamManager']&&(this['pFishParamManager']=new _0x30cc90()),this['oVideoHandle']['SR_SetFishParamManager'](this['pFishParamManager']),this['hasSetFECParamManager']=!0x0),_0x34714a!=_0x4fbb93&&_0x34714a!=_0x2cb8a2&&_0x34714a!=_0x4e5968&&_0x34714a!=_0x1837a3&&_0x34714a!=_0x54a990&&_0x34714a!=_0x30e952&&_0x34714a!=_0x20b7ae&&_0x34714a!=_0x39b0d3&&_0x34714a!=_0x2a01ec)return console['log']('%c\\x2020231122\\x20hardDecoder\\x20not\\x20support\\x20correctType:%d','color:red',_0x34714a),this['FECErrorCode']=0x10,0x0;if(0x1!=this['FECParamJudge'](_0x524c38,_0x41579d,_0x34714a))return 0x0;var _0x204106;if(_0x204106=this['_ConvertDisplayEffect'](_0x41579d,_0x34714a),0x0==_0x524c38&&null==this['stFishEyeManager'][_0x524c38]['pRender']&&(this['stFishEyeManager'][_0x524c38]['pRender']=this['oVideoHandle'],this['stFishEyeManager'][_0x524c38]['nSubPort']=_0x524c38,this['stFishEyeManager'][_0x524c38]['sCanvasID']=this['mainCanvasID'],this['stFishEyeManager'][_0x524c38]['bUsed']=0x1,this['stFishEyeManager'][_0x524c38]['bInited']=0x1,this['stFishEyeManager'][_0x524c38]['nValidSubPort']=this['mainVaildSubPort'],this['stFishEyeManager'][_0x524c38]['emPlaceType']=_0x41579d,this['stFishEyeManager'][_0x524c38]['emCorrectType']=_0x34714a,this['stFishEyeManager'][_0x524c38]['emEffect']=_0x204106,this['mainFECCorrect']=_0x204106),null!=this['stFishEyeManager'][_0x524c38]['pRender']){this['stFishEyeManager'][_0x524c38]['pRender']['SR_DelSubPort'](this['stFishEyeManager'][_0x524c38]['nValidSubPort']);var _0x3379b4=this['stFishEyeManager'][_0x524c38]['pRender']['SR_AddSubPort'](_0x204106);if(-0x1==_0x3379b4)return console['info']('%c\\x20FEC_ResetCorrectType\\x20SR_AddSubPort\\x20error\\x20subport:%d','color:\\x20red',_0x3379b4),0x0;if(this['stFishEyeManager'][_0x524c38]['nValidSubPort']=_0x3379b4,this['stFishEyeManager'][_0x524c38]['emPlaceType']=_0x41579d,this['stFishEyeManager'][_0x524c38]['emCorrectType']=_0x34714a,this['stFishEyeManager'][_0x524c38]['emEffect']=_0x204106,_0x1837a3<=this['stFishEyeManager'][_0x524c38]['emCorrectType']){var _0x5ac827=this['stFishEyeManager'][_0x524c38]['pRender']['SR_SetRenderState'](_0x57ef5a,0x0);_0xa87ede!=_0x5ac827&&console['log']('>>>VideoRender.js\\x20SR_SetRenderState\\x20failed\\x20ret：%08x\\x0a',_0x5ac827);}}return this['FECShowMode']>0x0&&null!=this['stFishEyeManager'][_0x524c38]['pRender']&&this['stFishEyeManager'][_0x524c38]['pRender']['SR_SetPTZDisplayMode'](this['FECShowMode']),0x0==_0x524c38&&(this['mainVaildSubPort']=this['stFishEyeManager'][_0x524c38]['nValidSubPort']),0x1;}},{'key':'FEC_GetPort','value':function(_0x4edce7,_0x16fe01){if(_0x16fe01!=_0x4fbb93&&_0x16fe01!=_0x2cb8a2&&_0x16fe01!=_0x4e5968&&_0x16fe01!=_0x1837a3&&_0x16fe01!=_0x54a990&&_0x16fe01!=_0x30e952&&_0x16fe01!=_0x20b7ae&&_0x16fe01!=_0x39b0d3&&_0x16fe01!=_0x2a01ec)return console['log']('%c\\x2020231112\\x20hardDecoder\\x20not\\x20support\\x20emCorrectType:%d','color:red',_0x16fe01),this['FECErrorCode']=0x10,-0x1;var _0x427cfe;if(0x1!=this['FECParamJudge'](-0x1,_0x4edce7,_0x16fe01))return-0x1;var _0x3df02b=0x0;for(_0x427cfe=0x1;_0x427cfe<_0x5440d6;_0x427cfe++)if(0x0==this['stFishEyeManager'][_0x427cfe]['nSubPort']&&0x0==this['stFishEyeManager'][_0x427cfe]['bUsed']){this['stFishEyeManager'][_0x427cfe]['nSubPort']=_0x427cfe,this['stFishEyeManager'][_0x427cfe]['nValidSubPort']=-0x1,this['stFishEyeManager'][_0x427cfe]['bUsed']=0x1,this['stFishEyeManager'][_0x427cfe]['emPlaceType']=_0x4edce7,this['stFishEyeManager'][_0x427cfe]['emCorrectType']=_0x16fe01,_0x3df02b=_0x427cfe;break;}if(_0x5440d6==_0x427cfe)return console['info']('%c\\x20FEC_GetPort-12\\x20fish\\x20subport\\x20max','color:\\x20red'),this['FECErrorCode']=0x504,-0x1;var _0x36ac05;return _0x36ac05=this['_ConvertDisplayEffect'](this['stFishEyeManager'][_0x3df02b]['emPlaceType'],this['stFishEyeManager'][_0x3df02b]['emCorrectType']),_0x186ff9['SR_DE_FISH_ORIGINAL']!=_0x36ac05?(0x0==this['stFishEyeManager'][_0x3df02b]['bInited']&&(this['stFishEyeManager'][_0x3df02b]['emEffect']=_0x36ac05,this['stFishEyeManager'][_0x3df02b]['bInited']=0x0,this['stFishParam'][_0x3df02b]['fZoom']=0.005,this['stFishParam'][_0x3df02b]['stPTZParam']['fPTZPositionX']=0.5,this['stFishParam'][_0x3df02b]['stPTZParam']['fPTZPositionY']=0.5,this['stFishParam'][_0x3df02b]['fWideScanOffset']=0x0),this['FECErrorCode']=0x0,this['subPortNum']++,_0x3df02b):_0x3df02b<_0x5440d6&&0x0==this['stFishEyeManager'][_0x3df02b]['bInited']?(this['stFishEyeManager'][_0x3df02b]['emEffect']=_0x36ac05,this['stFishEyeManager'][_0x3df02b]['bInited']=0x0,this['stFishParam'][_0x3df02b]['fZoom']=0x0,this['stFishParam'][_0x3df02b]['stPTZParam']['fPTZPositionX']=0x0,this['stFishParam'][_0x3df02b]['stPTZParam']['fPTZPositionY']=0x0,this['stFishParam'][_0x3df02b]['fWideScanOffset']=0x0,this['FECErrorCode']=0x0,this['subPortNum']++,_0x3df02b):(this['stFishEyeManager'][_0x427cfe]['pRender']=null,this['stFishEyeManager'][_0x427cfe]['nSubPort']=0x0,this['stFishEyeManager'][_0x427cfe]['sCanvasID']=null,this['stFishEyeManager'][_0x427cfe]['bUsed']=0x0,this['stFishEyeManager'][_0x427cfe]['bInited']=0x0,this['stFishEyeManager'][_0x427cfe]['nValidSubPort']=0x0,this['stFishEyeManager'][_0x427cfe]['emPlaceType']=_0x1e68ea,this['stFishEyeManager'][_0x427cfe]['emCorrectType']=_0x4fbb93,this['stFishEyeManager'][_0x427cfe]['emEffect']=_0x186ff9['SR_DE_FISH_ORIGINAL'],this['FECErrorCode']=_0xa88cb3,-0x1);}},{'key':'FECParamJudge','value':function(_0xd98f83,_0x19e843,_0x440875){if((_0x240c92==_0x19e843||_0x1e68ea==_0x19e843)&&_0x30e952==_0x440875)return console['info']('%c\\x20FEC_GetPort-1\\x20floor\\x20and\\x20ceiling\\x20not\\x20support\\x20lat','color:\\x20red'),this['FECErrorCode']=_0xa88cb3,0x0;if(_0x2aea6b==_0x19e843&&_0x20b7ae==_0x440875)return console['info']('%c\\x20FEC_GetPort-2\\x20wall\\x20not\\x20support\\x20cylinger','color:\\x20red'),this['FECErrorCode']=_0xa88cb3,0x0;if(_0x2aea6b==_0x19e843&&_0x443c47==_0x440875)return console['info']('%c\\x20FEC_GetPort-3\\x20wall\\x20not\\x20support\\x20split\\x20cylinger','color:\\x20red'),this['FECErrorCode']=_0xa88cb3,0x0;if((_0x240c92==_0x19e843||_0x1e68ea==_0x19e843)&&_0x39b0d3==_0x440875)return console['info']('%c\\x20FEC_GetPort-4\\x20floor\\x20and\\x20ceiling\\x20not\\x20support\\x20horizontal','color:\\x20red'),this['FECErrorCode']=_0xa88cb3,0x0;if((_0x240c92==_0x19e843||_0x1e68ea==_0x19e843)&&_0x2a01ec==_0x440875)return console['info']('%c\\x20FEC_GetPort-5\\x20floor\\x20and\\x20ceiling\\x20not\\x20support\\x20vertical','color:\\x20red'),this['FECErrorCode']=_0xa88cb3,0x0;if(_0x2aea6b!=_0x19e843&&_0x240c92!=_0x19e843&&_0x1e68ea!=_0x19e843)return console['info']('%c\\x20FEC_GetPort-6\\x20emPlaceType\\x20only\\x20support\\x20floor,\\x20ceiling\\x20and\\x20wall','color:\\x20red'),this['FECErrorCode']=MP_E_SUPPORT,0x0;if(0x0!=_0x440875&&_0x440875!=_0x54a990&&_0x440875!=_0x2cb8a2&&_0x440875!=_0x4e5968&&_0x440875!=_0x30e952&&_0x440875!=_0x1837a3&&_0x440875!=_0x20b7ae&&_0x440875!=_0x443c47&&_0x440875!=_0x30ecd9&&_0x440875!=_0x39b0d3&&_0x440875!=_0x2a01ec)return console['info']('%c\\x20FEC_GetPort-7\\x20emCorrectType\\x20error','color:\\x20red'),this['FECErrorCode']=MP_E_SUPPORT,0x0;for(var _0x4c6d6b=0x0;_0x4c6d6b<_0x5440d6;_0x4c6d6b++)if(_0x4c6d6b!=_0xd98f83){if(this['stFishEyeManager'][_0x4c6d6b]['bUsed']&&this['stFishEyeManager'][_0x4c6d6b]['emPlaceType']!=_0x19e843)return console['info']('%c\\x20FEC_GetPort-8\\x20emPlaceType\\x20changed','color:\\x20red'),this['FECErrorCode']=0x517,0x0;if(this['stFishEyeManager'][_0x4c6d6b]['bUsed']&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x54a990&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x1837a3&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x20b7ae&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x443c47&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x30ecd9&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x39b0d3&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x2a01ec&&_0x440875!=_0x54a990&&_0x440875!=_0x1837a3&&_0x440875!=_0x20b7ae&&_0x440875!=_0x443c47&&_0x440875!=_0x30ecd9&&_0x440875!=_0x39b0d3&&_0x440875!=_0x2a01ec)return console['info']('%c\\x20FEC_GetPort-9\\x20origin/180/360/lat\\x20only\\x20display\\x20one\\x20port','color:\\x20red'),this['FECErrorCode']=0x518,0x0;if(this['stFishEyeManager'][_0x4c6d6b]['bUsed']&&(this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']==_0x54a990&&_0x440875==_0x2cb8a2||this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']==_0x2cb8a2&&_0x440875==_0x54a990))return console['info']('%c\\x20FEC_GetPort-10\\x20180\\x20cannot\\x20support\\x20ptz','color:\\x20red'),this['FECErrorCode']=0x518,0x0;}return 0x1;}},{'key':'FEC_Enable','value':function(_0x38de61){return _0x38de61<0x1||_0x38de61>0x1f||null==_0x38de61?(console['info']('%c\\x20FEC_Enable-1\\x20nSubPort:%d','color:\\x20red',_0x38de61),this['FECErrorCode']=_0x41c932,0x0):null!==this['stFishEyeManager'][_0x38de61]['pRender']?(console['info']('%c\\x20FEC_Enable-2\\x20nSubPort:%d','color:\\x20red',_0x38de61),this['FECErrorCode']=0x515,0x0):(null==this['stFishEyeManager'][_0x38de61]['pRender']&&(this['stFishEyeManager'][_0x38de61]['pRender']=new _0x453e55(),null==this['pFishParamManager']&&(this['pFishParamManager']=new _0x30cc90()),this['stFishEyeManager'][_0x38de61]['pRender']['SR_SetFishParamManager'](this['pFishParamManager'])),0x1);}},{'key':'FEC_SetWnd','value':function(_0xb663fd,_0x1038c6){if(_0xb663fd<0x1||_0xb663fd>0x1f||null==_0xb663fd)return console['info']('%c\\x20FEC_SetWnd-1\\x20nSubPort:%d','color:\\x20red',_0xb663fd),this['FECErrorCode']=_0x41c932,0x0;if(null==this['stFishEyeManager'][_0xb663fd]['pRender'])return console['info']('%c\\x20FEC_SetWnd-2\\x20nSubPort:%d\\x20pRender\\x20is\\x20null','color:\\x20red',_0xb663fd),this['FECErrorCode']=_0x599b74,0x0;if(0x0==this['stFishEyeManager'][_0xb663fd]['bUsed'])return console['info']('%c\\x20FEC_SetWnd-3\\x20nSubPort:%d\\x20bUsed:%d','color:\\x20red',_0xb663fd,this['stFishEyeManager'][_0xb663fd]['bUsed']),this['FECErrorCode']=_0x4b57a2,0x0;if(null==_0x1038c6)return console['info']('%c\\x20FEC_SetWnd-4\\x20nSubPort:%d\\x20sCanvasID:%s','color:\\x20red',_0xb663fd,_0x1038c6),this['FECErrorCode']=0x519,0x0;if(0x0!=this['stFishEyeManager'][_0xb663fd]['nSubPort']&&0x0!=this['stFishEyeManager'][_0xb663fd]['bUsed']){if(0x0!=this['stFishEyeManager'][_0xb663fd]['bInited']&&null!=this['stFishEyeManager'][_0xb663fd]['sCanvasID'])return _0x1038c6!=this['stFishEyeManager'][_0xb663fd]['sCanvasID']?(console['info']('%c\\x20FEC_SetWnd-5\\x20nSubPort:%d\\x20sCanvasID:%s\\x20already\\x20init','color:\\x20red',_0xb663fd,_0x1038c6),this['FECErrorCode']=0x506,0x0):0x1;var _0x49e36c;_0x49e36c=this['_ConvertDisplayEffect'](this['stFishEyeManager'][_0xb663fd]['emPlaceType'],this['stFishEyeManager'][_0xb663fd]['emCorrectType']);var _0x4577b8=this['stFishEyeManager'][_0xb663fd]['pRender']['SR_Init'](_0x1038c6,_0xa01ff6),_0x552ae2=this['stFishEyeManager'][_0xb663fd]['pRender']['SR_AddSubPort'](_0x49e36c);if(-0x1==_0x552ae2)return console['info']('%c\\x20FEC_SetWnd\\x20SR_AddSubPort\\x20error\\x20subport:%d','color:\\x20red',_0xb663fd),0x0;if(this['stFishEyeManager'][_0xb663fd]['nValidSubPort']=_0x552ae2,_0xa87ede!=_0x4577b8)return this['stFishEyeManager'][_0xb663fd]['bInited']=0x0,this['stFishEyeManager'][_0xb663fd]['sCanvasID']=null,this['FECErrorCode']=_0x4b57a2,0x0;if(this['stFishEyeManager'][_0xb663fd]['bInited']=0x1,this['stFishEyeManager'][_0xb663fd]['sCanvasID']=_0x1038c6,_0x1837a3<=this['stFishEyeManager'][_0xb663fd]['emCorrectType']){var _0x303aaf=this['stFishEyeManager'][_0xb663fd]['pRender']['SR_SetRenderState'](_0x57ef5a,0x0);_0xa87ede!=_0x303aaf&&console['log']('>>>VideoRender.js\\x20SR_SetRenderState\\x20failed\\x20ret：%08x\\x0a',_0x303aaf);}return this['FECShowMode']>0x0&&this['stFishEyeManager'][_0xb663fd]['pRender']['SR_SetPTZDisplayMode'](this['FECShowMode']),0x1;}return this['FECErrorCode']=_0x4b57a2,0x0;}},{'key':'FEC_Disable','value':function(_0x21074f,_0x145f67,_0x183cf1){if(_0x21074f<0x1||_0x21074f>0x1f||null==_0x21074f)return console['info']('%c\\x20FEC_Disable-1\\x20nSubPort:%d','color:\\x20red',_0x21074f),this['FECErrorCode']=_0x41c932,0x0;if(0x1==this['stFishEyeManager'][_0x21074f]['bInited']&&null!=this['stFishEyeManager'][_0x21074f]['pRender']){if(_0xa87ede!=this['stFishEyeManager'][_0x21074f]['pRender']['SR_DelSubPort'](this['stFishEyeManager'][_0x21074f]['nValidSubPort']))return console['info']('%c\\x20FEC_Disable-2\\x20SR_DelSubPort\\x20error\\x20nSubPort:%d','color:\\x20red',_0x21074f),0x0;this['stFishEyeManager'][_0x21074f]['bInited']=0x0,this['stFishEyeManager'][_0x21074f]['nValidSubPort']=-0x1,this['stFishEyeManager'][_0x21074f]['pRender']['SR_Destroy'](),this['stFishEyeManager'][_0x21074f]['pRender']=null;}return 0x1;}},{'key':'FEC_DelPort','value':function(_0x439d0b){return _0x439d0b<0x1||_0x439d0b>0x1f||null==_0x439d0b?(console['info']('%c\\x20FEC_DelPort-1\\x20nSubPort:%d','color:\\x20red',_0x439d0b),this['FECErrorCode']=_0x41c932,0x0):0x0==this['stFishEyeManager'][_0x439d0b]['bUsed']?(console['info']('%c\\x20FEC_DelPort-2\\x20nSubPort:%d\\x20bUsed：%d','color:\\x20red',_0x439d0b,this['stFishEyeManager'][_0x439d0b]['bUsed']),this['FECErrorCode']=_0x4b57a2,0x0):(this['stFishEyeManager'][_0x439d0b]['nSubPort']=0x0,this['stFishEyeManager'][_0x439d0b]['sCanvasID']=null,this['stFishEyeManager'][_0x439d0b]['bUsed']=0x0,this['stFishEyeManager'][_0x439d0b]['bInited']=0x0,this['stFishEyeManager'][_0x439d0b]['nValidSubPort']=0x0,this['stFishEyeManager'][_0x439d0b]['emPlaceType']=_0x1e68ea,this['stFishEyeManager'][_0x439d0b]['emCorrectType']=_0x4fbb93,this['stFishEyeManager'][_0x439d0b]['emEffect']=_0x186ff9['SR_DE_FISH_ORIGINAL'],this['stFishParam'][_0x439d0b]['stCycleParam']['fRadiusLeft']=0x0,this['stFishParam'][_0x439d0b]['stCycleParam']['fRadiusRight']=0x1,this['stFishParam'][_0x439d0b]['stCycleParam']['fRadiusTop']=0x0,this['stFishParam'][_0x439d0b]['stCycleParam']['fRadiusBottom']=0x1,this['subPortNum']>0x0&&this['subPortNum']--,0x1);}},{'key':'FEC_SetParam','value':function(_0x237226,_0x485f7d){if(this['FECErrorCode']=0x0,_0x237226<0x0||_0x237226>0x1f||null==_0x237226)return console['info']('%c\\x20FEC_SetParam-1\\x20nSubPort:%d','color:\\x20red',_0x237226),this['FECErrorCode']=_0x41c932,0x0;if(null==this['stFishEyeManager'][_0x237226]['pRender'])return console['info']('%c\\x20FEC_SetParam-2\\x20nSubPort:%d\\x20pRender:%d','color:\\x20red',_0x237226,this['stFishEyeManager'][_0x237226]['pRender']),this['FECErrorCode']=_0x599b74,0x0;if(0x0==this['stFishEyeManager'][_0x237226]['bUsed'])return console['info']('%c\\x20FEC_SetParam-3\\x20nSubPort:%d\\x20bUsed:%d','color:\\x20red',_0x237226,this['stFishEyeManager'][_0x237226]['bUsed']),this['FECErrorCode']=_0x4b57a2,0x0;if(this['stFishEyeManager'][_0x237226]['emCorrectType']>=_0x1837a3&&this['stFishEyeManager'][_0x237226]['emCorrectType']<=_0x2a01ec&&0x1e&_0x485f7d['upDateType'])return console['info']('%c\\x20FEC_SetParam-4\\x20nSubPort:%d\\x20not\\x203D','color:\\x20red',_0x237226),this['FECErrorCode']=_0x13beae,0x0;if(_0x16ee77&_0x485f7d['upDateType']){if(null==_0x485f7d['stCycleParam'])return this['FECErrorCode']=_0x31d5c8,0x0;for(var _0x43b2cb=0x1;_0x43b2cb<_0x5440d6;_0x43b2cb++){if(this['stFishEyeManager'][_0x43b2cb]['bUsed']&&this['stFishEyeManager'][_0x43b2cb]['nSubPort']&&_0x39b0d3==this['stFishEyeManager'][_0x43b2cb]['emCorrectType']&&(_0x485f7d['stCycleParam']['fRadiusLeft']<=-0.5||_0x485f7d['stCycleParam']['fRadiusLeft']>=0.4||_0x485f7d['stCycleParam']['fRadiusRight']<=0.6||_0x485f7d['stCycleParam']['fRadiusRight']>=1.5||_0x485f7d['stCycleParam']['fRadiusTop']<=-0.5||_0x485f7d['stCycleParam']['fRadiusTop']>0x0||_0x485f7d['stCycleParam']['fRadiusBottom']<0x1||_0x485f7d['stCycleParam']['fRadiusBottom']>=1.5||_0x485f7d['stCycleParam']['fRadiusLeft']+_0x485f7d['stCycleParam']['fRadiusRight']<=0.8||_0x485f7d['stCycleParam']['fRadiusLeft']+_0x485f7d['stCycleParam']['fRadiusRight']>=1.2||_0x485f7d['stCycleParam']['fRadiusTop']+_0x485f7d['stCycleParam']['fRadiusBottom']<=0.8||_0x485f7d['stCycleParam']['fRadiusTop']+_0x485f7d['stCycleParam']['fRadiusBottom']>=1.2))return this['FECErrorCode']=_0x31d5c8,0x0;if(this['stFishEyeManager'][_0x43b2cb]['bUsed']&&this['stFishEyeManager'][_0x43b2cb]['nSubPort']&&_0x2a01ec==this['stFishEyeManager'][_0x43b2cb]['emCorrectType']&&(_0x485f7d['stCycleParam']['fRadiusLeft']<=-0.5||_0x485f7d['stCycleParam']['fRadiusLeft']>0x0||_0x485f7d['stCycleParam']['fRadiusRight']<0x1||_0x485f7d['stCycleParam']['fRadiusRight']>=1.5||_0x485f7d['stCycleParam']['fRadiusTop']<=-0.5||_0x485f7d['stCycleParam']['fRadiusTop']>=0.4||_0x485f7d['stCycleParam']['fRadiusBottom']<=0.6||_0x485f7d['stCycleParam']['fRadiusBottom']>=1.5||_0x485f7d['stCycleParam']['fRadiusLeft']+_0x485f7d['stCycleParam']['fRadiusRight']<=0.8||_0x485f7d['stCycleParam']['fRadiusLeft']+_0x485f7d['stCycleParam']['fRadiusRight']>=1.2||_0x485f7d['stCycleParam']['fRadiusTop']+_0x485f7d['stCycleParam']['fRadiusBottom']<=0.8||_0x485f7d['stCycleParam']['fRadiusTop']+_0x485f7d['stCycleParam']['fRadiusBottom']>=1.2))return this['FECErrorCode']=_0x31d5c8,0x0;}}if(0x0==this['stFishEyeManager'][_0x237226]['bInited']){if(_0x353221&_0x485f7d['upDateType']){if(_0x2cb8a2!=this['stFishEyeManager'][_0x237226]['emCorrectType']&&_0x4e5968!=this['stFishEyeManager'][_0x237226]['emCorrectType']||_0x2aea6b==this['stFishEyeManager'][_0x237226]['emPlaceType'])return this['FECErrorCode']=_0x13beae,0x0;for(var _0x1db10f=0x1;_0x1db10f<_0x5440d6;_0x1db10f++)if(this['stFishEyeManager'][_0x1db10f]['nSubPort']&&this['stFishEyeManager'][_0x1db10f]['bUsed']&&this['stFishEyeManager'][_0x1db10f]['emCorrectType']==_0x54a990)return this['FECErrorCode']=_0x1ee0b0,0x0;this['stFishParam'][_0x237226]['fWideScanOffset']=_0x485f7d['fValue'];}if(_0x1f2582&_0x485f7d['upDateType']){if(null==_0x485f7d['stPTZColor'])return this['FECErrorCode']=_0x31d5c8,0x0;if(_0x485f7d['stPTZColor']['nR']>0xff||_0x485f7d['stPTZColor']['nG']>0xff||_0x485f7d['stPTZColor']['nB']>0xff||_0x485f7d['stPTZColor']['nAlpha']>0xff)return this['FECErrorCode']=_0x13beae,0x0;this['stFishParam'][_0x237226]['stPTZColor']['nR']=_0x485f7d['stPTZColor']['nR'],this['stFishParam'][_0x237226]['stPTZColor']['nG']=_0x485f7d['stPTZColor']['nG'],this['stFishParam'][_0x237226]['stPTZColor']['nB']=_0x485f7d['stPTZColor']['nB'],this['stFishParam'][_0x237226]['stPTZColor']['nAlpha']=_0x485f7d['stPTZColor']['nAlpha'];}if(_0x2b1528&_0x485f7d['upDateType']){if(_0x54a990!=this['stFishEyeManager'][_0x237226]['emCorrectType'])return this['FECErrorCode']=_0x13beae,0x0;this['stFishParam'][_0x237226]['stPTZParam']['fPTZPositionX']=_0x485f7d['fPTZParam']['fPTZPositionX'],this['stFishParam'][_0x237226]['stPTZParam']['fPTZPositionY']=_0x485f7d['fPTZParam']['fPTZPositionY'];}if(_0x3ff4c5&_0x485f7d['upDateType']){if(_0x54a990!=this['stFishEyeManager'][_0x237226]['emCorrectType'])return this['FECErrorCode']=_0x13beae,0x0;this['stFishParam'][_0x237226]['fZoom']=_0x485f7d['fPTZZoom'];}if(_0x160732&_0x485f7d['upDateType']){if(null==this['stFishParam']['stPTZSelect'])return 0x0;if(_0x54a990!=this['stFishEyeManager'][_0x237226]['emCorrectType'])return this['FECErrorCode']=_0x13beae,0x0;this['stFishParam']['stPTZSelect']['fTop']=_0x485f7d['stPTZSelect']['fTop'],this['stFishParam']['stPTZSelect']['fBottom']=_0x485f7d['stPTZSelect']['fBottom'],this['stFishParam']['stPTZSelect']['fLeft']=_0x485f7d['stPTZSelect']['fLeft'],this['stFishParam']['stPTZSelect']['fRight']=_0x485f7d['stPTZSelect']['fRight'];}if(_0x16ee77&_0x485f7d['upDateType']){if(null==_0x485f7d['stCycleParam'])return this['FECErrorCode']=_0x31d5c8,0x0;if(0x0==this['_IsValidRadiusParam'](_0x485f7d['stCycleParam']))return this['FECErrorCode']=_0x31d5c8,0x0;this['stFishParam'][0x0]['stCycleParam']['fRadiusLeft']=_0x485f7d['stCycleParam']['fRadiusLeft'],this['stFishParam'][0x0]['stCycleParam']['fRadiusRight']=_0x485f7d['stCycleParam']['fRadiusRight'],this['stFishParam'][0x0]['stCycleParam']['fRadiusTop']=_0x485f7d['stCycleParam']['fRadiusTop'],this['stFishParam'][0x0]['stCycleParam']['fRadiusBottom']=_0x485f7d['stCycleParam']['fRadiusBottom'];}return 0x1;}if(_0x353221&_0x485f7d['upDateType']){if(_0x2cb8a2!=this['stFishEyeManager'][_0x237226]['emCorrectType']&&_0x4e5968!=this['stFishEyeManager'][_0x237226]['emCorrectType']||_0x2aea6b==this['stFishEyeManager'][_0x237226]['emPlaceType'])return this['FECErrorCode']=_0x13beae,0x0;for(var _0x605b6d=0x1;_0x605b6d<_0x5440d6;_0x605b6d++)if(this['stFishEyeManager'][_0x605b6d]['nSubPort']&&this['stFishEyeManager'][_0x605b6d]['bUsed']&&this['stFishEyeManager'][_0x605b6d]['emCorrectType']==_0x54a990)return this['FECErrorCode']=_0x1ee0b0,0x0;var _0x2745e8={};if(_0x2745e8['nFishParamType']=_0x5ca12e,_0x2745e8['bBlack']=0x0,_0x2745e8['fAngle']=_0x485f7d['fValue'],_0xa87ede!=this['stFishEyeManager'][_0x237226]['pRender']['SR_SetFishParam'](_0x2745e8))return this['FECErrorCode']=_0x1ee0b0,0x0;this['stFishParam'][_0x237226]['fWideScanOffset']=_0x485f7d['fValue'];}if(_0x1f2582&_0x485f7d['upDateType']){if(null==_0x485f7d['stPTZColor'])return this['FECErrorCode']=_0x13beae,0x0;if(_0x485f7d['stPTZColor']['nR']>0xff||_0x485f7d['stPTZColor']['nG']>0xff||_0x485f7d['stPTZColor']['nB']>0xff||_0x485f7d['stPTZColor']['nAlpha']>0xff)return this['FECErrorCode']=_0x13beae,0x0;var _0x226925={};_0x226925['fR']=float(_0x485f7d['stPTZColor']['nR']/0xff),_0x226925['fG']=float(_0x485f7d['stPTZColor']['nG']/0xff),_0x226925['fB']=float(_0x485f7d['stPTZColor']['nB']/0xff),_0x226925['fA']=float(_0x485f7d['stPTZColor']['nAlpha']/0xff),this['stFishParam'][_0x237226]['stPTZColor']['nR']=_0x485f7d['stPTZColor']['nR'],this['stFishParam'][_0x237226]['stPTZColor']['nG']=_0x485f7d['stPTZColor']['nG'],this['stFishParam'][_0x237226]['stPTZColor']['nB']=_0x485f7d['stPTZColor']['nB'],this['stFishParam'][_0x237226]['stPTZColor']['nAlpha']=_0x485f7d['stPTZColor']['nAlpha'];}if(_0x2b1528&_0x485f7d['upDateType']){if(_0x54a990!=this['stFishEyeManager'][_0x237226]['emCorrectType'])return this['FECErrorCode']=_0x13beae,0x0;var _0x179a25={};_0x179a25['nFishParamType']=_0x3be196,_0x179a25['bBlack']=0x0,_0x179a25['fPTZX']=_0x485f7d['fPTZParam']['fPTZPositionX'],_0x179a25['fPTZY']=_0x485f7d['fPTZParam']['fPTZPositionY'];var _0x2080ac=this['stFishEyeManager'][_0x237226]['pRender']['SR_SetFishParam'](_0x179a25);if(_0xa87ede!=_0x2080ac)return this['FECErrorCode']=_0x1ee0b0,0x0;this['stFishParam'][_0x237226]['stPTZParam']['fPTZPositionX']=_0x485f7d['fPTZParam']['fPTZPositionX'],this['stFishParam'][_0x237226]['stPTZParam']['fPTZPositionY']=_0x485f7d['fPTZParam']['fPTZPositionY'];}if(_0x3ff4c5&_0x485f7d['upDateType']){if(_0x54a990!=this['stFishEyeManager'][_0x237226]['emCorrectType'])return this['FECErrorCode']=_0x13beae,0x0;var _0x3a5d9f={};if(_0x3a5d9f['nFishParamType']=_0x378a81,_0x3a5d9f['bBlack']=0x0,_0x3a5d9f['fZoom']=_0x485f7d['fPTZZoom'],_0xa87ede!=this['stFishEyeManager'][_0x237226]['pRender']['SR_SetFishParam'](_0x3a5d9f))return this['FECErrorCode']=_0x1ee0b0,0x0;this['stFishParam'][_0x237226]['fZoom']=_0x485f7d['fPTZZoom'];}if(_0x16ee77&_0x485f7d['upDateType']){if(0x0==this['_IsValidRadiusParam'](_0x485f7d['stCycleParam']))return this['FECErrorCode']=_0x31d5c8,0x0;var _0x5b29fe={};if(_0x5b29fe['nFishParamType']=_0x392c27,_0x5b29fe['bBlack']=0x1,_0x5b29fe['fRXLeft']=_0x485f7d['stCycleParam']['fRadiusLeft'],_0x5b29fe['fRXRight']=_0x485f7d['stCycleParam']['fRadiusRight'],_0x5b29fe['fRYTop']=_0x485f7d['stCycleParam']['fRadiusTop'],_0x5b29fe['fRYBottom']=_0x485f7d['stCycleParam']['fRadiusBottom'],_0xa87ede!=this['stFishEyeManager'][_0x237226]['pRender']['SR_SetFishParam'](this['stFishEyeManager'][_0x237226]['nValidSubPort'],_0x5b29fe))return this['FECErrorCode']=_0x31d5c8,0x0;this['stFishParam'][0x0]['stCycleParam']['fRadiusLeft']=_0x485f7d['stCycleParam']['fRadiusLeft'],this['stFishParam'][0x0]['stCycleParam']['fRadiusRight']=_0x485f7d['stCycleParam']['fRadiusRight'],this['stFishParam'][0x0]['stCycleParam']['fRadiusTop']=_0x485f7d['stCycleParam']['fRadiusTop'],this['stFishParam'][0x0]['stCycleParam']['fRadiusBottom']=_0x485f7d['stCycleParam']['fRadiusBottom'];}return _0x160732&_0x485f7d['upDateType']&&_0x54a990==this['stFishEyeManager'][_0x237226]['emCorrectType']&&_0xa87ede!=this['stFishEyeManager'][_0x237226]['pRender']['SR_SetFishParam'](this['stFishEyeManager'][_0x237226]['stPTZSelect'])?(this['FECErrorCode']=0x513,0x0):0x1;}},{'key':'FEC_GetParam','value':function(_0x23d898,_0x5da795){return _0x23d898<0x0||_0x23d898>0x1f||null==_0x23d898?(console['info']('%c\\x20FEC_GetParam-1\\x20nSubPort:%d','color:\\x20red',_0x23d898),this['FECErrorCode']=_0x41c932,0x0):null==this['stFishEyeManager'][_0x23d898]['pRender']?(console['info']('%c\\x20FEC_GetParam-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0x23d898]['pRender']),this['FECErrorCode']=_0x599b74,0x0):(this['stFishEyeManager'][_0x23d898]['pRender']['SR_GetFishParam'](_0x5da795),_0x5da795['emCorrectType']=this['stFishEyeManager'][_0x23d898]['emCorrectType'],0x1);}},{'key':'_IsValidRadiusParam','value':function(_0x40fd77){return _0x40fd77['fRadiusBottom']<=_0x40fd77['fRadiusTop']||_0x40fd77['fRadiusRight']<=_0x40fd77['fRadiusLeft']?0x0:0x1;}},{'key':'FEC_SetViewParam','value':function(_0x4a0fcd,_0x6d5dc9,_0x40e4db){return _0x4a0fcd<0x0||_0x4a0fcd>0x1f||null==_0x4a0fcd?(console['info']('%c\\x20FEC_SetViewParam-1\\x20nSubPort:%d','color:\\x20red',_0x4a0fcd),this['FECErrorCode']=_0x41c932,0x0):null==this['stFishEyeManager'][_0x4a0fcd]['pRender']?(console['info']('%c\\x20FEC_SetViewParam-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0x4a0fcd]['pRender']),this['FECErrorCode']=_0x599b74,0x0):_0x6d5dc9<_0x394973||_0x6d5dc9>_0x339c63?(this['FECErrorCode']=_0x633153,0x0):(this['FECErrorCode']=0x0,0x0==this['stFishEyeManager'][_0x4a0fcd]['bInited']?(this['FECErrorCode']=_0x4b57a2,0x0):_0x1837a3<=this['stFishEyeManager'][_0x4a0fcd]['emCorrectType']?_0xa87ede!=this['stFishEyeManager'][_0x4a0fcd]['pRender']['SR_SetViewParam'](_0x6d5dc9,_0x40e4db)?(this['FECErrorCode']=_0x633153,0x0):0x1:(this['FECErrorCode']=_0x13beae,0x0));}},{'key':'FEC_GetViewParam','value':function(_0xcd7f54,_0x5891ca,_0x5f1437){if(_0x5f1437['fValue']=-0x1,_0xcd7f54<0x0||_0xcd7f54>0x1f||null==_0xcd7f54)return console['info']('%c\\x20FEC_GetViewParam-1\\x20nSubPort:%d','color:\\x20red',_0xcd7f54),this['FECErrorCode']=_0x41c932,0x0;if(null==this['stFishEyeManager'][_0xcd7f54]['pRender'])return console['info']('%c\\x20FEC_GetViewParam-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0xcd7f54]['pRender']),this['FECErrorCode']=_0x599b74,0x0;if(_0x5891ca<0x1||_0x5891ca>0x3||0x0==this['stFishEyeManager'][_0xcd7f54]['bInited'])return 0x0;if(_0x1837a3<=this['stFishEyeManager'][_0xcd7f54]['emCorrectType'])this['stFishEyeManager'][_0xcd7f54]['pRender']['SR_GetViewParam'](_0x5891ca,_0x5f1437);return 0x1;}},{'key':'FEC_SetDisplayRegion','value':function(_0x3d509f,_0x79e701,_0x3db710,_0x11fb5e,_0x5d386a,_0x384723,_0x377cbb){return _0x3d509f<0x0||_0x3d509f>0x1f||null==_0x3d509f?(console['info']('%c\\x20FEC_SetDisplayRegion-1\\x20nSubPort:%d','color:\\x20red',_0x3d509f),this['FECErrorCode']=_0x41c932,0x0):null==this['stFishEyeManager'][_0x3d509f]['pRender']?(console['info']('%c\\x20FEC_SetDisplayRegion-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0x3d509f]['pRender']),this['FECErrorCode']=_0x599b74,0x0):0x0!=_0x79e701||0x0!=_0x3db710?(this['FECErrorCode']=_0x633153,0x0):this['stFishEyeManager'][_0x3d509f]['emCorrectType']!=_0x4fbb93&&this['stFishEyeManager'][_0x3d509f]['emCorrectType']!=_0x2cb8a2&&this['stFishEyeManager'][_0x3d509f]['emCorrectType']!=_0x4e5968&&this['stFishEyeManager'][_0x3d509f]['emCorrectType']!=_0x30e952?(this['FECErrorCode']=_0xa88cb3,0x0):0x0==this['stFishEyeManager'][_0x3d509f]['bInited']?(this['FECErrorCode']=_0x4b57a2,0x0):_0x11fb5e<0x0||_0x5d386a<0x0||_0x384723<0x0||_0x377cbb<0x0?(this['FECErrorCode']=_0x633153,0x0):_0xa87ede!=this['stFishEyeManager'][_0x3d509f]['pRender']['SR_SetDisplayRect'](_0x11fb5e,_0x5d386a,_0x384723,_0x377cbb,_0xe9e464)?(this['FECErrorCode']=0x511,0x0):0x1;}},{'key':'FEC_SetBackCilling','value':function(_0xbc4cf3,_0x201397){return _0xbc4cf3<0x0||_0xbc4cf3>0x1f||null==_0xbc4cf3?(this['FECErrorCode']=_0x41c932,0x0):null==this['stFishEyeManager'][_0xbc4cf3]['pRender']?(this['FECErrorCode']=_0x599b74,0x0):0x0==this['stFishEyeManager'][_0xbc4cf3]['bInited']?(this['FECErrorCode']=_0x4b57a2,0x0):_0xa87ede!=this['stFishEyeManager'][_0xbc4cf3]['pRender']['SR_SetRenderState'](_0x57ef5a,_0x201397)?(this['FECErrorCode']=0x511,0x0):0x1;}},{'key':'FEC_GetPTZPort','value':function(_0x4fe218,_0x7d79a,_0x4703e2){if(null!=this['stFishEyeManager'][_0x4fe218]['pRender']){var _0x47f9ac={'nPTZPort':-0x1};if(this['stFishEyeManager'][_0x4fe218]['pRender']['SR_GetPTZPort'](_0x7d79a,_0x4703e2,_0x47f9ac)==_0xa87ede)return _0x47f9ac['nPTZPort'];}return-0x1;}},{'key':'FEC_SetPTZDisplayMode','value':function(_0x5168d7){return _0x5168d7>=0x0&&_0x5168d7<=0x2?(null!=this['stFishEyeManager'][0x0]['pRender']&&this['stFishEyeManager'][0x0]['pRender']['SR_SetPTZDisplayMode'](_0x5168d7),this['FECShowMode']=_0x5168d7,0x1):(console['info']('%c\\x20FEC_SetPTZDisplayMode\\x20ptzMode:%d','color:\\x20red',_0x5168d7),0x0);}},{'key':'CheckFrameRGB','value':function(_0x400c17,_0x548d6f,_0x2d4a2b,_0x429d43,_0x85a7c0,_0x75707d){if(null==_0x400c17)return 0x0;for(var _0x1abe54=_0x400c17['width']/(_0x429d43-0x1),_0x597f03=_0x400c17['height']/(_0x2d4a2b-0x1),_0x5de9dd=0x0,_0x42fb15=0x0,_0x5e4ee7=[],_0x370864=0x0;_0x370864<_0x2d4a2b*_0x429d43;_0x370864++)_0x5e4ee7[_0x370864]=0x0,this['aPOSAdaptBuf'][_0x370864]=0x0;if(_0x548d6f){for(var _0x3e2865=0x0,_0x5c702f=0x0;_0x5c702f<_0x400c17['height'];_0x5c702f++)for(var _0x10ae9f=0x0;_0x10ae9f<_0x400c17['width'];_0x10ae9f++){_0x5de9dd=(_0x5de9dd=Math['round'](_0x10ae9f/(_0x1abe54/0x2)/0x2))<_0x429d43?_0x5de9dd:_0x429d43-0x1,_0x42fb15=(_0x42fb15=Math['round'](_0x5c702f/(_0x597f03/0x2)/0x2))<_0x2d4a2b?_0x42fb15:_0x2d4a2b-0x1;var _0x336a7e=_0x400c17['pBuffer'][_0x3e2865],_0x24b367=_0x400c17['pBuffer'][_0x3e2865+0x1],_0x36ee90=_0x400c17['pBuffer'][_0x3e2865+0x2],_0x22e317=Math['round'](0.299*_0x336a7e+0.587*_0x24b367+0.114*_0x36ee90);this['aPOSAdaptBuf'][_0x5de9dd+_0x42fb15*_0x429d43]+=_0x22e317,_0x5e4ee7[_0x5de9dd+_0x42fb15*_0x429d43]++,_0x3e2865+=0x4;}for(var _0x401fa2=0x0,_0x5bb257=0x0;_0x5bb257<_0x2d4a2b*_0x429d43;_0x5bb257++)_0x401fa2=this['aPOSAdaptBuf'][_0x5bb257]/_0x5e4ee7[_0x5bb257],this['aPOSAdaptBuf'][_0x5bb257]=_0x401fa2>0x80?0x0:0x1;}else{for(var _0x3562ea=Math['round'](_0x85a7c0*_0x400c17['width']),_0x1174dc=Math['round'](_0x75707d*_0x400c17['height']),_0x55c743=_0x1174dc-0x2;_0x55c743<_0x1174dc+0x2;_0x55c743++)for(var _0xb2203=_0x3562ea-0x2;_0xb2203<_0x3562ea+0x2;_0xb2203++){var _0x5add96=0x4*Math['floor']((0x4*_0xb2203+_0x55c743*_0x400c17['width']*0x4)/0x4),_0x1f54e5=_0x400c17['pBuffer'][_0x5add96],_0x2a4e1c=_0x400c17['pBuffer'][_0x5add96+0x1],_0x49d1c6=_0x400c17['pBuffer'][_0x5add96+0x2],_0x2aa3f7=Math['round'](0.299*_0x1f54e5+0.587*_0x2a4e1c+0.114*_0x49d1c6);this['aPOSAdaptBuf'][0x0]+=_0x2aa3f7,_0x5e4ee7[0x0]++;}this['aPOSAdaptBuf'][0x0]=this['aPOSAdaptBuf'][0x0]/_0x5e4ee7[0x0]>0x80?0x0:0x1;}return 0x1;}},{'key':'GetWaterFontParam','value':function(_0x2b0736){var _0x4f4c87=_0x2b0736['pFontString']['length'],_0x1ea0c5=_0x2b0736['pstFontRotate']['fRotateAngle']%0x168/0x168*0x2*Math['PI'],_0x4bcf18=Math['min'](_0x2b0736['pstFontSize']['nFontWidth'],_0x2b0736['pstFontSize']['nFontHeight']),_0x353469=_0x4bcf18/this['mainCanvasID']['width'],_0x5c3214=_0x4bcf18/this['mainCanvasID']['height'],_0xf815fd=_0x353469*Math['cos'](Math['PI']/0x2-_0x1ea0c5)*_0x2b0736['pSpace'],_0x55e462=_0x5c3214*Math['sin'](Math['PI']/0x2-_0x1ea0c5)*_0x2b0736['pSpace'],_0x59715c=[],_0x34cae1=[],_0x7da49d=[];if(_0x2b0736['nFontAlign']){for(var _0x1169c4=0x0;_0x1169c4<_0x4f4c87;_0x1169c4++)_0x59715c[_0x1169c4]=_0x2b0736['pFontString'][0x0]['length']*_0x353469/0x6,_0x34cae1[_0x1169c4]=Math['atan2'](_0x59715c[0x0],_0x55e462),_0x7da49d[_0x1169c4]=Math['sqrt'](_0x59715c[0x0]*_0x59715c[0x0],_0x55e462*_0x55e462);}else{for(var _0x2fc8f2=0x0;_0x2fc8f2<_0x4f4c87;_0x2fc8f2++)_0x59715c[_0x2fc8f2]=0x0,_0x34cae1[_0x2fc8f2]=0x0,_0x7da49d[_0x2fc8f2]=0x0;}var _0x2555f3=Math['floor'](_0x2b0736['pstFontNumber']['nRowNumber']),_0x3d982a=Math['floor'](_0x2b0736['pstFontNumber']['nColNumber']),_0x55fbab=_0x2555f3*_0x3d982a;if(_0x2b0736['pstFontRotate']['fFillFullScreen']){for(var _0x2a16f3=[],_0x3d058c=[],_0x14f147=0x1/(_0x2555f3-0x1),_0x54aad3=0x0;_0x54aad3<_0x2555f3;_0x54aad3++)_0x2a16f3[_0x54aad3]=_0x14f147*_0x54aad3-_0x55e462*((_0x4f4c87-0x1)/0x2);for(var _0x207291=0x1/(_0x3d982a-0x1),_0x38e523=0x0;_0x38e523<_0x3d982a;_0x38e523++)_0x3d058c[_0x38e523]=_0x207291*_0x38e523+_0xf815fd*((_0x4f4c87-0x1)/0x2);for(var _0x29c684=0x0;_0x29c684<_0x55fbab;++_0x29c684)for(var _0x3e40a4=0x0;_0x3e40a4<_0x4f4c87;_0x3e40a4++){this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]={},this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pString']=_0x2b0736['pFontString'][_0x3e40a4],this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['nFontWidth']=_0x4bcf18,this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['nFontHeight']=_0x4bcf18,this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstStartPos']={};var _0x268e69=_0x29c684%_0x3d982a,_0x3739c2=Math['floor'](_0x29c684/_0x3d982a),_0x42d794=Math['PI']/0x2-_0x1ea0c5+_0x34cae1[_0x3e40a4];this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstStartPos']['fX']=_0x3d058c[_0x268e69]-_0x3e40a4*_0xf815fd+_0x7da49d[_0x3e40a4]*Math['cos'](_0x42d794),this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstStartPos']['fY']=_0x2a16f3[_0x3739c2]+_0x3e40a4*_0x55e462-_0x7da49d[_0x3e40a4]*Math['sin'](_0x42d794),_0x2b0736['nColorAdapt']?(this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstFontColor']={},this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstFontColor']['fR']=this['aPOSAdaptBuf'][_0x29c684],this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstFontColor']['fG']=this['aPOSAdaptBuf'][_0x29c684],this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstFontColor']['fB']=this['aPOSAdaptBuf'][_0x29c684],this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstFontColor']['fA']=_0x2b0736['pstFontColor']['fA']):this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstFontColor']=_0x2b0736['pstFontColor'],this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['bBackGround']=!0x1,this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstBGColor']=null,this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['fRotateAngle']=_0x2b0736['pstFontRotate']['fRotateAngle'],this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pFontFamily']=_0x2b0736['pFontFamily'],_0x2b0736['nFontAlign']?(this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['textAlign']='left',this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['textBaseline']='top'):(this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['textAlign']='center',this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['textBaseline']='middle');}}else{for(var _0x177df4=0x0;_0x177df4<_0x2b0736['pFontString']['length'];_0x177df4++)this['pWaterFontParam'][_0x177df4]={},this['pWaterFontParam'][_0x177df4]['pString']=_0x2b0736['pFontString'][_0x177df4],this['pWaterFontParam'][_0x177df4]['nFontWidth']=_0x4bcf18,this['pWaterFontParam'][_0x177df4]['nFontHeight']=_0x4bcf18,this['pWaterFontParam'][_0x177df4]['pstStartPos']={},this['pWaterFontParam'][_0x177df4]['pstStartPos']['fX']=_0x2b0736['pstStartPos']['fX']-_0x177df4*_0xf815fd,this['pWaterFontParam'][_0x177df4]['pstStartPos']['fY']=_0x2b0736['pstStartPos']['fY']+_0x177df4*_0x55e462,_0x2b0736['nColorAdapt']?(this['pWaterFontParam'][_0x177df4]['pstFontColor']={},this['pWaterFontParam'][_0x177df4]['pstFontColor']['fR']=this['aPOSAdaptBuf'][0x0],this['pWaterFontParam'][_0x177df4]['pstFontColor']['fG']=this['aPOSAdaptBuf'][0x0],this['pWaterFontParam'][_0x177df4]['pstFontColor']['fB']=this['aPOSAdaptBuf'][0x0],this['pWaterFontParam'][_0x177df4]['pstFontColor']['fA']=_0x2b0736['pstFontColor']['fA']):this['pWaterFontParam'][_0x177df4]['pstFontColor']=_0x2b0736['pstFontColor'],this['pWaterFontParam'][_0x177df4]['bBackGround']=!0x1,this['pWaterFontParam'][_0x177df4]['pstBGColor']=null,this['pWaterFontParam'][_0x177df4]['fRotateAngle']=_0x2b0736['pstFontRotate']['fRotateAngle'],this['pWaterFontParam'][_0x177df4]['pFontFamily']=_0x2b0736['pFontFamily'],_0x2b0736['nFontAlign']?(this['pWaterFontParam'][_0x177df4]['textAlign']='left',this['pWaterFontParam'][_0x177df4]['textBaseline']='top'):(this['pWaterFontParam'][_0x177df4]['textAlign']='center',this['pWaterFontParam'][_0x177df4]['textBaseline']='middle');}return 0x1;}},{'key':'SetWaterMarkFont','value':function(_0x1caf95,_0x5cfbb1){if(this['pWaterFontParam']['splice'](0x0,this['pWaterFontParam']['length']),null===_0x1caf95)return 0x1;if(_0x1caf95['nColorAdapt']){var _0x30b2aa={'nWidth':0x10,'nHeight':0x10,'nBufferLen':0x0},_0x45f96a=this['oVideoHandle']['SR_GetCaptureSize'](_0x30b2aa);if(_0xa87ede==_0x45f96a){var _0x24b57b=new Uint8Array(_0x30b2aa['nBufferLen']),_0x498d3b={};if(_0x498d3b['pBuffer']=_0x24b57b,this['oVideoHandle']['SR_CaptureScreen'](_0x498d3b),_0x498d3b['width']=_0x30b2aa['nWidth'],_0x498d3b['height']=_0x30b2aa['nHeight'],_0x1caf95['pstFontRotate']['fFillFullScreen']){var _0x3dc164=Math['floor'](_0x1caf95['pstFontNumber']['nRowNumber']),_0x5ec18c=Math['floor'](_0x1caf95['pstFontNumber']['nColNumber']);this['CheckFrameRGB'](_0x498d3b,0x1,_0x3dc164,_0x5ec18c,0x0,0x0);}else this['CheckFrameRGB'](_0x498d3b,0x0,0x1,0x1,_0x1caf95['pstStartPos']['fX'],_0x1caf95['pstStartPos']['fY']);_0x24b57b=null;}}return this['GetWaterFontParam'](_0x1caf95),0x1;}},{'key':'ImageDecoder','value':function(_0x5a3da3,_0x1c5c5e,_0xbe633){var _0x5e9ab7=this;_0x5a3da3['decode']({'frameIndex':_0xbe633})['then'](function(_0xfaa340){_0x5e9ab7['pWaterImageParam'][_0xbe633]={},_0x5e9ab7['pWaterImageParam'][_0xbe633]['videoStream']=_0xfaa340['image'],_0x5e9ab7['pWaterImageParam'][_0xbe633]['nImageWidth']=_0xfaa340['image']['displayWidth'],_0x5e9ab7['pWaterImageParam'][_0xbe633]['nImageHeight']=_0xfaa340['image']['displayHeight'],null!=_0x1c5c5e['pstRectPos']?_0x5e9ab7['pWaterImageParam'][_0xbe633]['pstRectPos']=_0x1c5c5e['pstRectPos']:_0x5e9ab7['pWaterImageParam'][_0xbe633]['pstRectPos']={'fLeft':0x0,'fRight':0.1,'fTop':0x0,'fBottom':0.1},null!=_0x1c5c5e['fAlpha']&&_0x1c5c5e['fAlpha']<=0x1&&_0x1c5c5e['fAlpha']>=0x0?_0x5e9ab7['pWaterImageParam'][_0xbe633]['fAlpha']=_0x1c5c5e['fAlpha']:_0x5e9ab7['pWaterImageParam'][_0xbe633]['fAlpha']=0x1,_0x5e9ab7['waterMarkImageMax']=_0x5a3da3['tracks']['selectedTrack']['frameCount'],_0xbe633<_0x5a3da3['tracks']['selectedTrack']['frameCount']-0x1&&_0x5e9ab7['ImageDecoder'](_0x5a3da3,_0x1c5c5e,_0xbe633+0x1);});}},{'key':'SetWaterMarkImage','value':function(_0x4e2929){if(this['pWaterImageParam']['splice'](0x0,this['pWaterImageParam']['length']),null===_0x4e2929)return 0x1;if(null!=_0x4e2929['pImageData']){var _0xb20ecb=new ImageDecoder({'data':_0x4e2929['pImageData'],'type':'image/'+_0x4e2929['pImageType']});_0xb20ecb['tracks']['ready']['then'](function(){}),this['ImageDecoder'](_0xb20ecb,_0x4e2929,0x0);}return this['waterMarkImageIndex']=0x0,0x1;}},{'key':'_ConvertDisplayEffect','value':function(_0x4ea039,_0x46ff13){switch(_0x4ea039){case _0x2aea6b:return _0x54a990==_0x46ff13?_0x186ff9['SR_DE_FISH_PTZ_WALL']:_0x4e5968==_0x46ff13||_0x30e952==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_WALL']:_0x1837a3==_0x46ff13?_0x186ff9['SR_DE_FISH_SEMISPHERE']:_0x30ecd9==_0x46ff13?_0x186ff9['SR_DE_FISH_PLANET']:_0x39b0d3==_0x46ff13?_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:_0x2a01ec==_0x46ff13?_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:_0x186ff9['SR_DE_FISH_ORIGINAL'];case _0x240c92:return _0x54a990==_0x46ff13?_0x186ff9['SR_DE_FISH_PTZ_FLOOR']:_0x4e5968==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:_0x2cb8a2==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']:_0x30e952==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_WALL']:_0x1837a3==_0x46ff13?_0x186ff9['SR_DE_FISH_SEMISPHERE']:_0x20b7ae==_0x46ff13?_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:_0x443c47==_0x46ff13?_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:_0x30ecd9==_0x46ff13?_0x186ff9['SR_DE_FISH_PLANET']:_0x186ff9['SR_DE_FISH_ORIGINAL'];case _0x1e68ea:return _0x54a990==_0x46ff13?_0x186ff9['SR_DE_FISH_PTZ_CEILING']:_0x4e5968==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:_0x2cb8a2==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:_0x30e952==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_WALL']:_0x1837a3==_0x46ff13?_0x186ff9['SR_DE_FISH_SEMISPHERE']:_0x20b7ae==_0x46ff13?_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:_0x443c47==_0x46ff13?_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_CEILING']:_0x30ecd9==_0x46ff13?_0x186ff9['SR_DE_FISH_PLANET']:_0x186ff9['SR_DE_FISH_ORIGINAL'];default:return _0x186ff9['SR_DE_FISH_ORIGINAL'];}return _0x186ff9['SR_DE_FISH_ORIGINAL'];}},{'key':'GetCanvasData','value':function(_0x168b52){var _0x4cbc60={'nWidth':0x0,'nHeight':0x0,'nBufferLen':0x0},_0x2f0ef5=this['oVideoHandle']['SR_GetCaptureSize'](_0x4cbc60);(_0xa87ede!=_0x2f0ef5||_0x4cbc60['nBufferLen']<=0x0)&&_0x168b52(null);var _0x58ab1e=new Uint8Array(_0x4cbc60['nBufferLen']);null==_0x58ab1e&&_0x168b52(null);var _0x40363f={};_0x40363f['pBuffer']=_0x58ab1e,this['oVideoHandle']['SR_CaptureScreen'](_0x40363f),_0x168b52(_0x58ab1e,_0x4cbc60['nWidth'],_0x4cbc60['nHeight']);}},{'key':'FindIntelNodefromList','value':function(_0xff0932){if(0x0!=this['privateLinesInfo']['length']){var _0x11e4ab=this['privateLinesInfo'][0x0]['absTimeStamp'];if(_0x11e4ab<=_0xff0932+0x64&&_0x11e4ab>_0xff0932-0x64)this['curLinesInfo']=this['privateLinesInfo']['shift']();else{if(_0x11e4ab>_0xff0932+0x7d0||_0x11e4ab<_0xff0932-0x7d0)for(this['curLinesInfo']=this['privateLinesInfo']['shift']();this['privateLinesInfo']['length']>0x0;){var _0x2d684a=this['privateLinesInfo'][0x0]['absTimeStamp'];if(!(_0x2d684a>_0xff0932+0x7d0||_0x2d684a<_0xff0932-0x7d0))break;this['curLinesInfo']=this['privateLinesInfo']['shift']();}}}if(0x0!=this['privateFontsInfo']['length']){var _0x588728=this['privateFontsInfo'][0x0]['absTimeStamp'];if(_0x588728<=_0xff0932+0x3e8&&_0x588728>_0xff0932-0x3e8)this['curFontsInfo']=this['privateFontsInfo']['shift']();else{if(_0x588728>_0xff0932+0x7d0||_0x588728<_0xff0932-0x7d0)for(this['curFontsInfo']=this['privateFontsInfo']['shift']();this['privateFontsInfo']['length']>0x0;){var _0xe2c5d7=this['privateFontsInfo'][0x0]['absTimeStamp'];if(!(_0xe2c5d7>_0xff0932+0x7d0||_0xe2c5d7<_0xff0932-0x7d0))break;this['curFontsInfo']=this['privateFontsInfo']['shift']();}}}if(0x0!=this['privateImageInfo']['length']){var _0x258d83=this['privateImageInfo'][0x0]['absTimeStamp'];if(_0x258d83<=_0xff0932+0x3e8&&_0x258d83>_0xff0932-0x3e8)this['curImagesInfo']=this['privateImageInfo']['shift']();else{if(_0x258d83>_0xff0932+0x7d0||_0x258d83<_0xff0932-0x7d0)for(this['curImagesInfo']=this['privateImageInfo']['shift']();this['privateImageInfo']['length']>0x0;){var _0x5a81bc=this['privateImageInfo'][0x0]['absTimeStamp'];if(!(_0x5a81bc>_0xff0932+0x7d0||_0x5a81bc<_0xff0932-0x7d0))break;this['curImagesInfo']=this['privateImageInfo']['shift']();}}}return 0x1;}},{'key':'RenderPrivateData','value':function(_0x1231e6){return 0x0!=this['privateLinesInfo']['length']||_0x1231e6||(this['curLinesInfo']=null),0x1;}},{'key':'InputPrivateInfo','value':function(_0x4714d3,_0x175777,_0x56d599){var _0x1f7229=!0x1,_0x186733=0x0;if(_0x4714d3['linesNum']>0x0){if(_0x4714d3['absTimeStamp']<=this['maxPrivateLineTimeStamp']){var _0x1673f8=0x0;for(_0x1673f8=0x0;_0x1673f8<this['privateLinesInfo']['length'];_0x1673f8++)if(this['privateLinesInfo'][_0x1673f8]['absTimeStamp']==_0x4714d3['absTimeStamp']){_0x1f7229=!0x0,_0x186733=_0x1673f8;break;}}if(_0x1f7229){var _0x2798dd=this['privateLinesInfo'][_0x186733]['linesNum'];this['privateLinesInfo'][_0x186733]['linesNum']=_0x2798dd+_0x4714d3['linesNum'];for(var _0x271036=0x0;_0x271036<_0x4714d3['linesNum'];_0x271036++){this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]={},this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['vertex_num']=_0x4714d3['stDrawLinesArray'][_0x271036]['vertex_num'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['lineWidth']=_0x4714d3['stDrawLinesArray'][_0x271036]['lineWidth'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['bFill']=_0x4714d3['stDrawLinesArray'][_0x271036]['bFill'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['bLoop']=_0x4714d3['stDrawLinesArray'][_0x271036]['bLoop'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['color']={},this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['color']['R']=_0x4714d3['stDrawLinesArray'][_0x271036]['color']['R'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['color']['G']=_0x4714d3['stDrawLinesArray'][_0x271036]['color']['G'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['color']['B']=_0x4714d3['stDrawLinesArray'][_0x271036]['color']['B'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['color']['A']=_0x4714d3['stDrawLinesArray'][_0x271036]['color']['A'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['stPoint']=[];for(var _0x23d852=0x0;_0x23d852<_0x4714d3['stDrawLinesArray'][_0x271036]['vertex_num'];_0x23d852++)this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['stPoint'][_0x23d852]={},this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['stPoint'][_0x23d852]['x']=_0x4714d3['stDrawLinesArray'][_0x271036]['stPoint'][_0x23d852]['x'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['stPoint'][_0x23d852]['y']=_0x4714d3['stDrawLinesArray'][_0x271036]['stPoint'][_0x23d852]['y'];}}else{this['maxPrivateLineTimeStamp']<_0x4714d3['absTimeStamp']&&(this['maxPrivateLineTimeStamp']=_0x4714d3['absTimeStamp']);var _0x134d36={};_0x134d36['linesNum']=_0x4714d3['linesNum'],_0x134d36['absTimeStamp']=_0x4714d3['absTimeStamp'],_0x134d36['stDrawLinesArray']=[];for(var _0x4bcab2=0x0;_0x4bcab2<_0x4714d3['linesNum'];_0x4bcab2++){_0x134d36['stDrawLinesArray'][_0x4bcab2]={},_0x134d36['stDrawLinesArray'][_0x4bcab2]['vertex_num']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['vertex_num'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['lineWidth']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['lineWidth'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['bFill']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['bFill'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['bLoop']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['bLoop'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['color']={},_0x134d36['stDrawLinesArray'][_0x4bcab2]['color']['R']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['color']['R'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['color']['G']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['color']['G'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['color']['B']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['color']['B'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['color']['A']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['color']['A'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['stPoint']=[];for(var _0x19e95f=0x0;_0x19e95f<_0x4714d3['stDrawLinesArray'][_0x4bcab2]['vertex_num'];_0x19e95f++)_0x134d36['stDrawLinesArray'][_0x4bcab2]['stPoint'][_0x19e95f]={},_0x134d36['stDrawLinesArray'][_0x4bcab2]['stPoint'][_0x19e95f]['x']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['stPoint'][_0x19e95f]['x'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['stPoint'][_0x19e95f]['y']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['stPoint'][_0x19e95f]['y'];}this['privateLinesInfo']['push'](_0x134d36);}}if(_0x175777['nFontsNum']>0x0){if(_0x175777['absTimeStamp']<=this['maxPrivateLineTimeStamp']){var _0x5026f8=0x0;for(_0x5026f8=0x0;_0x5026f8<this['privateFontsInfo']['length'];_0x5026f8++)if(this['privateFontsInfo'][_0x5026f8]['absTimeStamp']==_0x175777['absTimeStamp']){_0x1f7229=!0x0,_0x186733=_0x5026f8;break;}}if(_0x1f7229);else{this['maxPrivateLineTimeStamp']<_0x175777['absTimeStamp']&&(this['maxPrivateLineTimeStamp']=_0x175777['absTimeStamp']);var _0x4876a6={};_0x4876a6['nFontsNum']=_0x175777['nFontsNum'],_0x4876a6['absTimeStamp']=_0x175777['absTimeStamp'],_0x4876a6['stDrawFontsArray']=[];for(var _0x52496a=0x0;_0x52496a<_0x175777['nFontsNum'];_0x52496a++)_0x4876a6['stDrawFontsArray'][_0x52496a]={},_0x4876a6['stDrawFontsArray'][_0x52496a]['nFontSizeW']=_0x175777['stDrawFontsArray'][_0x52496a]['nFontSizeW'],_0x4876a6['stDrawFontsArray'][_0x52496a]['nFontSizeH']=_0x175777['stDrawFontsArray'][_0x52496a]['nFontSizeH'],_0x4876a6['stDrawFontsArray'][_0x52496a]['color']={},_0x4876a6['stDrawFontsArray'][_0x52496a]['color']['R']=_0x175777['stDrawFontsArray'][_0x52496a]['color']['R'],_0x4876a6['stDrawFontsArray'][_0x52496a]['color']['G']=_0x175777['stDrawFontsArray'][_0x52496a]['color']['G'],_0x4876a6['stDrawFontsArray'][_0x52496a]['color']['B']=_0x175777['stDrawFontsArray'][_0x52496a]['color']['B'],_0x4876a6['stDrawFontsArray'][_0x52496a]['color']['A']=_0x175777['stDrawFontsArray'][_0x52496a]['color']['A'],_0x4876a6['stDrawFontsArray'][_0x52496a]['stPoint']={},_0x4876a6['stDrawFontsArray'][_0x52496a]['stPoint']['x']=_0x175777['stDrawFontsArray'][_0x52496a]['stPoint']['x'],_0x4876a6['stDrawFontsArray'][_0x52496a]['stPoint']['y']=_0x175777['stDrawFontsArray'][_0x52496a]['stPoint']['y'],_0x4876a6['stDrawFontsArray'][_0x52496a]['fontstring']=_0x175777['stDrawFontsArray'][_0x52496a]['fontString'];this['privateFontsInfo']['push'](_0x4876a6);}}if(_0x56d599['nPixelFormat']>0x0){if(_0x56d599['absTimeStamp']<=this['maxPrivateLineTimeStamp']){var _0x33e36e=0x0;for(_0x33e36e=0x0;_0x33e36e<this['privateImageInfo']['length'];_0x33e36e++)if(this['privateImageInfo'][_0x33e36e]['absTimeStamp']==_0x56d599['absTimeStamp']){_0x1f7229=!0x0,_0x186733=_0x33e36e;break;}}if(_0x1f7229);else{this['maxPrivateLineTimeStamp']<_0x56d599['absTimeStamp']&&(this['maxPrivateLineTimeStamp']=_0x56d599['absTimeStamp']);var _0x271b09={};_0x271b09['absTimeStamp']=_0x56d599['absTimeStamp'],_0x271b09['nWidth']=_0x56d599['nWidth'],_0x271b09['nHeight']=_0x56d599['nHeight'],_0x271b09['pstRect']={},_0x271b09['pstRect']['fTop']=_0x56d599['pstRect']['fTop'],_0x271b09['pstRect']['fBottom']=_0x56d599['pstRect']['fBottom'],_0x271b09['pstRect']['fLeft']=_0x56d599['pstRect']['fLeft'],_0x271b09['pstRect']['fRight']=_0x56d599['pstRect']['fRight'],_0x271b09['nPixelFormat']=_0x56d599['nPixelFormat'],_0x271b09['fAlpha']=_0x56d599['fAlpha'],_0x271b09['picImageData']=_0x56d599['picImageData'],this['privateImageInfo']['push'](_0x271b09);}}return 0x1;}},{'key':'WebGLDisplayCallBack','value':function(_0x273e95){if(0x0!=_0x273e95['privateLinesInfo']['length']||null!=_0x273e95['curLinesInfo']){if(null!=_0x273e95['curLinesInfo']){for(var _0x152c9d=[],_0x3b3ffc=0x0,_0x4ea37c=0x1,_0xae4f9b=0x0;_0xae4f9b<_0x273e95['curLinesInfo']['linesNum'];_0xae4f9b++){_0x152c9d[_0xae4f9b]={},_0x152c9d[_0xae4f9b]['nPointNum']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['vertex_num'],_0x152c9d[_0xae4f9b]['nLineWidth']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['lineWidth'],_0x4ea37c=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['bFill'],_0x152c9d[_0xae4f9b]['bLoop']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['bLoop'],_0x152c9d[_0xae4f9b]['pstColor']={},_0x152c9d[_0xae4f9b]['pstColor']['fR']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['color']['R'],_0x152c9d[_0xae4f9b]['pstColor']['fG']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['color']['G'],_0x152c9d[_0xae4f9b]['pstColor']['fB']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['color']['B'],_0x152c9d[_0xae4f9b]['pstColor']['fA']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['color']['A'],_0x152c9d[_0xae4f9b]['pstPoints']=[];for(var _0x19d608=0x0;_0x19d608<_0x152c9d[_0xae4f9b]['nPointNum'];_0x19d608++)_0x152c9d[_0xae4f9b]['pstPoints'][_0x19d608]={},_0x152c9d[_0xae4f9b]['pstPoints'][_0x19d608]['fX']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['stPoint'][_0x19d608]['x'],_0x152c9d[_0xae4f9b]['pstPoints'][_0x19d608]['fY']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['stPoint'][_0x19d608]['y'];_0x3b3ffc+=_0x152c9d[_0xae4f9b]['nPointNum'];}_0x273e95['oVideoHandle']['SR_DrawLinesEx'](_0x152c9d,_0x273e95['curLinesInfo']['linesNum'],_0x3b3ffc,_0x4ea37c);}_0x273e95['curLinesInfo']=null;}if((0x0!=_0x273e95['privateFontsInfo']['length']||null!=_0x273e95['curFontsInfo'])&&null!=_0x273e95['curFontsInfo']&&0x0!=_0x273e95['curFontsInfo']['nFontsNum']){for(var _0x318203=[],_0x238209=0x0;_0x238209<_0x273e95['curFontsInfo']['nFontsNum'];_0x238209++){var _0x3ac5ed={},_0x431a46=_0x273e95['curFontsInfo']['stDrawFontsArray'][_0x238209]['fontstring'],_0x3a1ba2={};_0x3a1ba2['fX']=_0x273e95['curFontsInfo']['stDrawFontsArray'][_0x238209]['stPoint']['x'],_0x3a1ba2['fY']=_0x273e95['curFontsInfo']['stDrawFontsArray'][_0x238209]['stPoint']['y'];var _0x1f2cce={'fR':0x1,'fG':0x0,'fB':0x0};_0x1f2cce['fA']=_0x273e95['curFontsInfo']['stDrawFontsArray'][_0x238209]['color']['A'];var _0x5074eb=_0x273e95['curFontsInfo']['stDrawFontsArray'][_0x238209]['nFontSizeW'],_0x441f96=_0x273e95['curFontsInfo']['stDrawFontsArray'][_0x238209]['nFontSizeH'];_0x3ac5ed['pString']=_0x431a46,_0x3ac5ed['pstStartPos']=_0x3a1ba2,_0x3ac5ed['nFontWidth']=_0x5074eb,_0x3ac5ed['nFontHeight']=_0x441f96,_0x3ac5ed['pstFontColor']=_0x1f2cce,_0x3ac5ed['bBackGround']=!0x1,_0x3ac5ed['pstBGColor']=null,_0x3ac5ed['fRotateAngle']=0x0,_0x3ac5ed['pFontFamily']='sans-serif',_0x318203['push'](_0x3ac5ed);}_0x273e95['oVideoHandle']['SR_DrawFontEx'](_0x318203,_0x273e95['curFontsInfo']['nFontsNum']);}if(0x0!=_0x273e95['privateImageInfo']['length']||null!=_0x273e95['curImagesInfo']){var _0x2481ef=null;null!=_0x273e95['curImagesInfo']&&null!=_0x273e95['curImagesInfo']&&null!=_0x273e95['curImagesInfo']['picImageData']&&null!=_0x273e95['curImagesInfo']['picImageData']&&(_0x2481ef=new Uint16Array(_0x273e95['curImagesInfo']['picImageData']['buffer'])),null!=_0x273e95['curImagesInfo']&&_0x273e95['curImagesInfo']['nPixelFormat']>0x0&&_0x273e95['oVideoHandle']['SR_DrawImage'](_0x2481ef,_0x273e95['curImagesInfo']['nWidth'],_0x273e95['curImagesInfo']['nHeight'],_0x273e95['curImagesInfo']['pstRect'],_0x273e95['curImagesInfo']['nPixelFormat'],_0x273e95['curImagesInfo']['fAlpha']);}if(0x0!==_0x273e95['pWaterFontParam']['length']&&_0x273e95['oVideoHandle']['SR_DrawFontEx'](_0x273e95['pWaterFontParam'],_0x273e95['pWaterFontParam']['length']),0x0!==_0x273e95['pWaterImageParam']['length']){_0x273e95['waterMarkImageIndex']>=_0x273e95['waterMarkImageMax']&&(_0x273e95['waterMarkImageIndex']=0x0);var _0x1b3126=_0x273e95['waterMarkImageIndex'];_0x273e95['oVideoHandle']['SR_DrawImage'](_0x273e95['pWaterImageParam'][_0x1b3126]['videoStream'],_0x273e95['pWaterImageParam'][_0x1b3126]['nImageWidth'],_0x273e95['pWaterImageParam'][_0x1b3126]['nImageHeight'],_0x273e95['pWaterImageParam'][_0x1b3126]['pstRectPos'],_0xa01ff6,_0x273e95['pWaterImageParam'][_0x1b3126]['fAlpha']),_0x273e95['waterMarkImageIndex']++;}}}]),_0x48881e;}()),_0x5111f0=(function(){function _0x231541(){_0x54580d(this,_0x231541),this['startTime']=0x0,this['curTime']=0x0,this['timeWalk']=0x0,this['lastDate']=0x0,this['preTimerStamp']=0x0;}return _0x4fd085(_0x231541,[{'key':'Init','value':function(){this['startTime']=this['GetCurTime']();}},{'key':'GetCurTime','value':function(){return this['curTime']=0x3c*new Date()['getHours']()*0x3c*0x3e8+0x3c*new Date()['getMinutes']()*0x3e8+0x3e8*new Date()['getSeconds']()+new Date()['getMilliseconds'](),this['lastDate']=new Date()['getDate'](),this['curTime'];}},{'key':'GetTimerWalk','value':function(){var _0x2e0b9c=this['GetCurTime']()-this['startTime'];return this['lastDate']!==new Date()['getDate']()&&(_0x2e0b9c+=0x18*(new Date()['getDate']()-this['lastDate'])*0x3c*0x3c*0x3e8),_0x2e0b9c;}},{'key':'timerReset','value':function(){this['startTime']=0x0,this['curTime']=0x0,this['timeWalk']=0x0,this['lastDate']=0x0,this['preTimerStamp']=0x0;}}]),_0x231541;}()),_0x436cae=(function(){function _0x2bfe2e(){var _0xc5035a=arguments['length']>0x0&&void 0x0!==arguments[0x0]?arguments[0x0]:null;_0x54580d(this,_0x2bfe2e),this['canvas']=null,this['streamOpenMode']=0x0,this['context']=null,this['oVideoDecoder']=null,this['frameBuffers']=[],this['initTimer']=!0x1,this['preTimeStamp']=0x0,this['baseTimeStamp']=0x0,this['resetTimer']=!0x0,this['RenderFrame']=this['RenderFrame']['bind'](this),this['renderCurStatus']=0x2,this['playSpeed']=0x1,this['nplaySpeed']=0x1,this['displayBuf']=0xe,this['needForward']=!0x1,this['firstFrame']=!0x0,this['LatcyTime']=0x0,this['displayFrameInfoCB']=null,this['displayFrameInfo']=[],this['curFrameInfo']={},this['curFrameInfo']['timeStamp']=0x0,this['sx']=0x0,this['sy']=0x0,this['sw']=0x0,this['sh']=0x0,this['displayRunning']=!0x1,this['oRenderTimer']=null,this['waitIFrameTimestamp']=0x0,this['curFrame']=null,this['player']=null,null!=_0xc5035a&&(this['player']=_0xc5035a),this['renderEngine']='webgl',this['oVideoRender']=null,this['FECCanvasID']='',this['oVideoRender']=new _0x4ae543();}return _0x4fd085(_0x2bfe2e,[{'key':'init','value':function(_0x2b4de0,_0x2c8a8e,_0x250db0,_0x3f5d69){this['canvas']=_0x2b4de0,this['streamOpenMode']=_0x2c8a8e,this['renderEngine']=_0x3f5d69,this['SetCurStatus'](0x2),null==this['oVideoDecoder']&&(this['oVideoDecoder']=new _0x285caf(_0x250db0,this,this['player']),null!==this['oVideoDecoder']&&this['oVideoDecoder']['initDecoder']()),this['frameBuffers']=this['oVideoDecoder']['ready_frames'],null!=this['oVideoRender']&&this['oVideoRender']['InitDisplay'](this['canvas'],this['renderEngine'],0x100),null==this['oRenderTimer']&&(this['oRenderTimer']=new _0x5111f0());}},{'key':'HardDecodeError','value':function(){return this['player']['_switchHardToSoft'](),0x1;}},{'key':'inputData','value':function(_0x2ca1dd,_0x429b37){var _0x3a0a86={};_0x3a0a86['port']=_0x429b37['port'],_0x3a0a86['codecType']=_0x429b37['codecType'],_0x3a0a86['frameType']=_0x429b37['frameType'],_0x3a0a86['frameSize']=_0x429b37['frameSize'],_0x3a0a86['width']=_0x429b37['width'],_0x3a0a86['height']=_0x429b37['height'],_0x3a0a86['timeStamp']=_0x429b37['timeStamp'],_0x3a0a86['frameRate']=_0x429b37['frameRate'],_0x3a0a86['frameNum']=_0x429b37['frameNum'],_0x3a0a86['interlace']=_0x429b37['interlace'],_0x3a0a86['streamEnd']=_0x429b37['streamEnd'],_0x3a0a86['cropLeft']=_0x429b37['cropLeft'],_0x3a0a86['cropRight']=_0x429b37['cropRight'],_0x3a0a86['cropTop']=_0x429b37['cropTop'],_0x3a0a86['cropBottom']=_0x429b37['cropBottom'],_0x3a0a86['year']=_0x429b37['year'],_0x3a0a86['month']=_0x429b37['month'],_0x3a0a86['week']=_0x429b37['week'],_0x3a0a86['day']=_0x429b37['day'],_0x3a0a86['hour']=_0x429b37['hour'],_0x3a0a86['minute']=_0x429b37['minute'],_0x3a0a86['second']=_0x429b37['second'],_0x3a0a86['milliseconds']=_0x429b37['milliseconds'],this['displayFrameInfo']['push'](_0x3a0a86),this['oVideoDecoder']['inputData'](_0x2ca1dd,_0x429b37);}},{'key':'_resetDecoder','value':function(){var _0x1b030e=this;return new Promise(function(_0x4d081d,_0x553412){_0x1b030e['oVideoDecoder']['resetDecoder']()['then'](function(){_0x1b030e['displayFrameInfo']['splice'](0x0,_0x1b030e['displayFrameInfo']['length']),_0x1b030e['curFrameInfo']={},_0x1b030e['oVideoRender']['DeInitPrivateParam'](),_0x1b030e['renderCurStatus']=0x2,_0x1b030e['player']?_0x1b030e['player']['JSPlayM4_ResetEnd']():postMessage({'function':'resetEnd'}),_0x4d081d();},function(){_0x553412();});});}},{'key':'_resetRenderTimer','value':function(){this['initTimer']=!0x1,this['preTimeStamp']=0x0,this['baseTimeStamp']=0x0,this['resetTimer']=!0x0,null!=this['oRenderTimer']&&this['oRenderTimer']['timerReset'](),this['RenderFrame']=this['RenderFrame']['bind'](this),this['renderCurStatus']=0x2,this['curTimeStamp']=0x0,this['getImageJPEG']=!0x1,this['getImageBMP']=!0x1,this['getCropImageJPEG']=!0x1,this['getCropImageBMP']=!0x1,this['displayFrameInfoCB']=null,this['displayFrameInfo']['splice'](0x0,this['displayFrameInfo']['length']),this['curFrameInfo']={};}},{'key':'_destroyPlayCtrl','value':function(){var _0x3ce15e=this;this['oVideoDecoder']['destroyDecoder']()['then'](function(){_0x3ce15e['oVideoDecoder']=null,null!=_0x3ce15e['oVideoRender']&&(_0x3ce15e['oVideoRender']['ReleaseDisplay'](),_0x3ce15e['oVideoRender']=null),_0x3ce15e['_resetRenderTimer'](),_0x3ce15e['oRenderTimer']=null,_0x3ce15e['displayRunning']=!0x1,console['log']('>>>JS\\x2002\\x20destroy\\x20oVideoDecoder/oVideoRender');},function(){console['log']('stop\\x20failed\\x20');});}},{'key':'RenderFrame','value':function(){var _0x409278=this;switch(this['renderCurStatus']){case 0x0:this['_resetRenderTimer'](),this['_resetDecoder']()['then'](function(){var _0x24c4ed=setTimeout(function(){_0x409278['RenderFrame'](),clearTimeout(_0x24c4ed);},0x1);},function(){});break;case 0x2:if(this['displayRunning'])this['chooseFrame']()['then'](function(_0x57f524){if(_0x409278['curFrame']=_0x57f524,-0x1==_0x409278['displayBuf']||0x0==_0x409278['streamOpenMode']&&0x0==_0x409278['LatcyTime'])null!=_0x409278['curFrame']&&(_0x409278['curTimeStamp']=_0x409278['curFrame']['timestamp'],_0x409278['paint'](_0x409278['curFrame'])),requestAnimationFrame(_0x409278['RenderFrame']);else{if(null!=_0x409278['curFrame']){_0x409278['initTimer']&&!_0x409278['resetTimer']||(_0x409278['oRenderTimer']['Init'](),_0x409278['initTimer']=!0x0,_0x409278['resetTimer']=!0x1,_0x409278['preTimeStamp']=_0x409278['curFrame']['timestamp'],_0x409278['baseTimeStamp']=_0x409278['curFrame']['timestamp'],0x1==_0x409278['streamOpenMode']&&(_0x409278['LatcyTime']=0x0)),_0x409278['curTimeStamp']=_0x409278['curFrame']['timestamp'];var _0x49eb0b=_0x409278['curTimeStamp']-_0x409278['preTimeStamp'],_0x30b6b7=_0x409278['curTimeStamp']-_0x409278['baseTimeStamp'];(_0x49eb0b>0x1388||_0x49eb0b<0x0||_0x30b6b7<0x0)&&(_0x409278['oRenderTimer']['Init'](),_0x409278['preTimeStamp']=_0x409278['curFrame']['timestamp'],_0x409278['baseTimeStamp']=_0x409278['curTimeStamp']);var _0x4b1144=(_0x409278['curTimeStamp']-_0x409278['baseTimeStamp']+_0x409278['LatcyTime'])/_0x409278['playSpeed']-_0x409278['oRenderTimer']['GetTimerWalk']();if(_0x4b1144<0xf&&_0x4b1144>-0xf)_0x409278['paint'](_0x409278['curFrame']),_0x409278['preTimeStamp']=_0x409278['curTimeStamp'],_0x409278['RenderFrame']();else{if(_0x4b1144<0x0)_0x409278['paint'](_0x409278['curFrame']),_0x409278['preTimeStamp']=_0x409278['curTimeStamp'],_0x409278['RenderFrame']();else var _0x263c52=setTimeout(function(){0x2==_0x409278['renderCurStatus']?(_0x409278['paint'](_0x409278['curFrame']),_0x409278['preTimeStamp']=_0x409278['curTimeStamp'],_0x409278['RenderFrame']()):_0x409278['RenderFrame'](),clearTimeout(_0x263c52);},_0x4b1144-0x5);}}else{_0x409278['playSpeed']>0x2&&0x1;var _0x1fce2d=setTimeout(function(){_0x409278['RenderFrame'](),clearTimeout(_0x1fce2d);},0x0);}}});else var _0x13bfbc=setTimeout(function(){_0x409278['RenderFrame'](),clearTimeout(_0x13bfbc);},0x5);break;case 0x3:var _0x2afd32=setTimeout(function(){_0x409278['_refresh'](),_0x409278['RenderFrame'](),clearTimeout(_0x2afd32);},0x5);break;case 0x5:if(this['needForward'])this['chooseFrame']()['then'](function(_0x4c6555){_0x409278['curFrame']=_0x4c6555;var _0x4e05c4=setTimeout(function(){null!=_0x409278['curFrame']&&(_0x409278['paint'](_0x409278['curFrame']),_0x409278['needForward']=!0x1),_0x409278['RenderFrame'](),clearTimeout(_0x4e05c4);},0x1);});else var _0x570dc5=setTimeout(function(){_0x409278['_refresh'](),_0x409278['RenderFrame'](),clearTimeout(_0x570dc5);},0x5);break;case 0x4:return void this['_destroyPlayCtrl']();default:return;}}},{'key':'paint','value':function(_0x2382b9){var _0x10ce19=this;return new Promise(function(_0x184257,_0x3369ae){if(0x4==_0x10ce19['curstatus']||null==_0x2382b9||null==_0x10ce19['oVideoRender'])_0x184257();else{_0x10ce19['waitIFrameTimestamp']===_0x2382b9['timestamp']&&(_0x10ce19['resetTimer']=!0x0);var _0x43dc93={'nCropLeft':0x0,'nCropRight':0x0,'nCropTop':0x0,'nCropBottom':0x0};_0x43dc93['nCodeWidth']=_0x2382b9['displayWidth'],_0x43dc93['nCodeHeight']=_0x2382b9['displayHeight'];var _0x420bde={'x':0x0,'y':0x0};_0x420bde['width']=_0x2382b9['displayWidth'],_0x420bde['height']=_0x2382b9['displayHeight'],_0x10ce19['oVideoRender']['DisplayFrame'](_0x2382b9,_0x2382b9['displayWidth'],_0x2382b9['displayHeight'],_0x2382b9['timestamp'],_0x43dc93,null)['then'](function(_0x4d63d0){null!==_0x10ce19['displayFrameInfoCB']&&_0x10ce19['respondFrameInfoCB'](_0x4d63d0),_0x10ce19['firstFrame']&&(null!=_0x10ce19['player']?null!=_0x10ce19['player']['FFCallBackFun']&&_0x10ce19['player']['FFCallBackFun']():postMessage({'function':'firstFrameCB','value':!0x0}),_0x10ce19['firstFrame']=!0x1),_0x184257();});}});}},{'key':'respondFrameInfoCB','value':function(_0x2eec20){if(0x0!=this['displayFrameInfo']['length']&&this['curFrameInfo']['timeStamp']!==_0x2eec20){for(var _0x5cda6c={},_0x54c3ca=0x0;_0x54c3ca<this['displayFrameInfo']['length']&&(_0x5cda6c=this['displayFrameInfo']['shift']())['timeStamp']!=_0x2eec20;_0x54c3ca++);this['curFrameInfo']['port']=_0x5cda6c['port'],this['curFrameInfo']['codecType']=_0x5cda6c['codecType'],this['curFrameInfo']['frameType']=_0x5cda6c['frameType'],this['curFrameInfo']['frameSize']=_0x5cda6c['frameSize'],this['curFrameInfo']['width']=_0x5cda6c['width'],this['curFrameInfo']['height']=_0x5cda6c['height'],this['curFrameInfo']['timeStamp']=_0x5cda6c['timeStamp'],this['curFrameInfo']['frameRate']=_0x5cda6c['frameRate'],this['curFrameInfo']['frameNum']=_0x5cda6c['frameNum'],this['curFrameInfo']['interlace']=_0x5cda6c['interlace'],this['curFrameInfo']['streamEnd']=_0x5cda6c['streamEnd'],this['curFrameInfo']['cropLeft']=_0x5cda6c['cropLeft'],this['curFrameInfo']['cropRight']=_0x5cda6c['cropRight'],this['curFrameInfo']['cropTop']=_0x5cda6c['cropTop'],this['curFrameInfo']['cropBottom']=_0x5cda6c['cropBottom'],this['curFrameInfo']['year']=_0x5cda6c['year'],this['curFrameInfo']['month']=_0x5cda6c['month'],this['curFrameInfo']['week']=_0x5cda6c['week'],this['curFrameInfo']['day']=_0x5cda6c['day'],this['curFrameInfo']['hour']=_0x5cda6c['hour'],this['curFrameInfo']['minute']=_0x5cda6c['minute'],this['curFrameInfo']['second']=_0x5cda6c['second'],this['curFrameInfo']['milliseconds']=_0x5cda6c['milliseconds'],this['displayFrameInfoCB'](this['curFrameInfo']);}}},{'key':'postImageData','value':function(_0x23da09,_0x181d56,_0x2ca6fa,_0x54b505,_0x3f5f6c){this['player']?(this['getImageJPEG']&&(this['getImageJPEG']=!0x1,this['player']['_GetImage2'](_0x23da09,_0x181d56,_0x2ca6fa,_0x54b505,'jpeg',_0x3f5f6c,0x0,0x0,0x0,0x0)),this['getImageBMP']&&(this['getImageBMP']=!0x1,this['player']['_GetImage2'](_0x23da09,_0x181d56,_0x2ca6fa,_0x54b505,'bmp',_0x3f5f6c,0x0,0x0,0x0,0x0)),this['getCropImageJPEG']&&(this['getCropImageJPEG']=!0x1,this['player']['_GetImage2'](_0x23da09,_0x181d56,_0x2ca6fa,_0x54b505,'jpeg',_0x3f5f6c,this['sx'],this['sy'],this['sw'],this['sh'])),this['getCropImageBMP']&&(this['getCropImageBMP']=!0x1,this['player']['_GetImage2'](_0x23da09,_0x181d56,_0x2ca6fa,_0x54b505,'bmp',_0x3f5f6c,this['sx'],this['sy'],this['sw'],this['sh']))):(this['getImageJPEG']&&(this['getImageJPEG']=!0x1,postMessage({'function':'imageYUV','value':_0x23da09['buffer'],'size':_0x181d56,'width':_0x2ca6fa,'height':_0x54b505,'type':'jpeg','yuvType':_0x3f5f6c,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x23da09['buffer']])),this['getImageBMP']&&(this['getImageBMP']=!0x1,postMessage({'function':'imageYUV','value':_0x23da09['buffer'],'size':_0x181d56,'width':_0x2ca6fa,'height':_0x54b505,'type':'bmp','yuvType':_0x3f5f6c,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x23da09['buffer']])),this['getCropImageJPEG']&&(this['getCropImageJPEG']=!0x1,postMessage({'function':'imageYUV','value':_0x23da09['buffer'],'size':_0x181d56,'width':_0x2ca6fa,'height':_0x54b505,'type':'jpeg','yuvType':_0x3f5f6c,'sx':this['sx'],'sy':this['sy'],'sw':this['sw'],'sh':this['sh']},[_0x23da09['buffer']])),this['getCropImageBMP']&&(this['getCropImageBMP']=!0x1,postMessage({'function':'imageYUV','value':_0x23da09['buffer'],'size':_0x181d56,'width':_0x2ca6fa,'height':_0x54b505,'type':'bmp','yuvType':_0x3f5f6c,'sx':this['sx'],'sy':this['sy'],'sw':this['sw'],'sh':this['sh']},[_0x23da09['buffer']])));}},{'key':'chooseFrame','value':function(){var _0x45f677=this;return new Promise(function(_0x318d43,_0xf2cda4){if(null==_0x45f677['oVideoRender']||null==_0x45f677['oVideoDecoder'])_0x318d43(null);else{if(_0x45f677['oVideoDecoder']['decoderObjNeedReset'])_0x45f677['oVideoDecoder']['resetDecoder']()['then'](function(){_0x45f677['oVideoDecoder']['decoderObjNeedReset']=!0x1,_0x318d43(null);},function(){_0xf2cda4();});else{var _0x333c9e=_0x45f677['oVideoDecoder']['GetFrameBufferLength']();0x1==_0x45f677['streamOpenMode']&&_0x333c9e<0x3?_0x318d43(null):_0x45f677['oVideoDecoder']['GetFrame']()['then'](function(_0x93c594){_0x318d43(_0x93c594);},function(){});}}});}},{'key':'SetDisplayRegion','value':function(_0x528461,_0x69e80a,_0x1ed1c5,_0x31af05){return null==this['oVideoRender']?0x0:(this['sx']=_0x528461,this['sy']=_0x69e80a,this['sw']=_0x1ed1c5,this['sh']=_0x31af05,this['oVideoRender']['SetDisplayRect'](_0x528461,_0x69e80a,_0x1ed1c5,_0x31af05));}},{'key':'SetCurStatus','value':function(_0x4d3bc4){return this['renderCurStatus']=_0x4d3bc4,0x1;}},{'key':'fast','value':function(){var _0x4114f6=this['_GetFastSpeed'](this['nplaySpeed']);return this['_SetPlaySpeed'](_0x4114f6);}},{'key':'slow','value':function(){var _0x424dc2=this['_GetSlowSpeed'](this['nplaySpeed']);return this['_SetPlaySpeed'](_0x424dc2);}},{'key':'Pause','value':function(_0x26d476){if(_0x26d476)this['SetCurStatus'](0x3);else{if(0x3!==this['renderCurStatus'])return-0x1;this['SetCurStatus'](0x2),this['resetTimer']=!0x0;}return 0x1;}},{'key':'_refresh','value':function(){0x0!=this['frameBuffers']['length']&&this['paint'](this['frameBuffers'][0x0]);}},{'key':'OneByOne','value':function(_0xed1311){if(_0xed1311)this['SetCurStatus'](0x5),this['needForward']=!0x0;else{if(0x5!==this['renderCurStatus'])return-0x1;this['SetCurStatus'](0x2),this['resetTimer']=!0x0,this['needForward']=!0x1,this['_SetPlaySpeed'](0x1);}return 0x1;}},{'key':'SetCanvasSize','value':function(_0x2099f6,_0x5edbf8){return null!=this['oVideoRender']&&this['oVideoRender']['SetCanvasSize'](_0x2099f6,_0x5edbf8);}},{'key':'GetCanvasSize','value':function(){return null!=this['oVideoRender']&&this['oVideoRender']['GetCanvasSize']();}},{'key':'GetPlayedTime','value':function(){return this['curTimeStamp'];}},{'key':'_SetPlaySpeed','value':function(_0x3fe8a4){switch(_0x3fe8a4){case-0x10:case-0x8:case-0x4:case-0x2:case 0x1:case 0x2:case 0x4:case 0x8:case 0x10:case 0x20:case 0x40:break;default:return-0x1;}return _0x3fe8a4===this['nplaySpeed']||(this['nplaySpeed']=_0x3fe8a4,this['playSpeed']=_0x3fe8a4>0x0?_0x3fe8a4:-0x1/_0x3fe8a4,console['log']('playSpeed:'+this['playSpeed']),this['resetTimer']=!0x0,this['needForward']=!0x1,0x2!=this['renderCurStatus']&&this['SetCurStatus'](0x2)),0x1;}},{'key':'_GetFastSpeed','value':function(_0x56131f){var _0x3a8976=0x0;switch(_0x56131f){case-0x10:_0x3a8976=-0x8;break;case-0x8:_0x3a8976=-0x4;break;case-0x4:_0x3a8976=-0x2;break;case-0x2:_0x3a8976=0x1;break;case 0x1:_0x3a8976=0x2;break;case 0x2:_0x3a8976=0x4;break;case 0x4:_0x3a8976=0x8;break;case 0x8:_0x3a8976=0x10;break;case 0x10:_0x3a8976=0x20;break;case 0x20:_0x3a8976=0x40;break;default:_0x3a8976=0x0;}return _0x3a8976;}},{'key':'_GetSlowSpeed','value':function(_0x45b3b7){var _0x3856b0=0x0;switch(_0x45b3b7){case-0x8:_0x3856b0=-0x10;break;case-0x4:_0x3856b0=-0x8;break;case-0x2:_0x3856b0=-0x4;break;case 0x1:_0x3856b0=-0x2;break;case 0x2:_0x3856b0=0x1;break;case 0x4:_0x3856b0=0x2;break;case 0x8:_0x3856b0=0x4;break;case 0x10:_0x3856b0=0x8;break;case 0x20:_0x3856b0=0x10;break;case 0x40:_0x3856b0=0x20;break;default:_0x3856b0=0x0;}return _0x3856b0;}},{'key':'SetDisplayBuf','value':function(_0x106ca3){return this['displayBuf']=_0x106ca3,this['LatcyTime']=0x1==_0x106ca3?0x0:0xf==_0x106ca3?0x2bc:0x2d==_0x106ca3?0x76c:_0x106ca3>0x6&&_0x106ca3<0x2d?0x28*_0x106ca3+0x64:-0x1==_0x106ca3?0x0:0x32,0x1;}},{'key':'GetJPEG','value':function(){var _0x250f6c=this;this['oVideoDecoder']['GetImageYUV']()['then'](function(_0x5c4ac6){var _0x204c0f=_0x5c4ac6['yuvFrameBuffer'],_0x13cae3=_0x5c4ac6['yuvLength'],_0x5692f0=_0x5c4ac6['displayWidth'],_0x138c37=_0x5c4ac6['displayHeight'],_0x2b67ff=_0x5c4ac6['yuvType'];-0x1!=_0x204c0f&&(_0x250f6c['player']?_0x250f6c['player']['_GetImage2'](_0x204c0f,_0x13cae3,_0x5692f0,_0x138c37,'jpeg',_0x2b67ff,0x0,0x0,0x0,0x0):postMessage({'function':'imageYUV','value':_0x204c0f['buffer'],'size':_0x13cae3,'width':_0x5692f0,'height':_0x138c37,'type':'jpeg','yuvType':_0x2b67ff,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x204c0f['buffer']]));},function(){});}},{'key':'GetBMP','value':function(){var _0x40df8b=this;this['oVideoDecoder']['GetImageYUV']()['then'](function(_0x783b6f){var _0x11b41c=_0x783b6f['yuvFrameBuffer'],_0x2648e7=_0x783b6f['yuvLength'],_0x2875d9=_0x783b6f['displayWidth'],_0x1d5f92=_0x783b6f['displayHeight'],_0x1d4ea2=_0x783b6f['yuvType'];-0x1!=_0x11b41c&&(_0x40df8b['player']?_0x40df8b['player']['_GetImage2'](_0x11b41c,_0x2648e7,_0x2875d9,_0x1d5f92,'bmp',_0x1d4ea2,0x0,0x0,0x0,0x0):postMessage({'function':'imageYUV','value':_0x11b41c['buffer'],'size':_0x2648e7,'width':_0x2875d9,'height':_0x1d5f92,'type':'bmp','yuvType':_0x1d4ea2,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x11b41c['buffer']]));},function(){});}},{'key':'GetCropJPEG','value':function(){var _0x19dfc0=this;this['oVideoDecoder']['GetImageYUV']()['then'](function(_0x3af1e4){var _0x2a2139=_0x3af1e4['yuvFrameBuffer'],_0x5be45e=_0x3af1e4['yuvLength'],_0x3fad91=_0x3af1e4['displayWidth'],_0x579157=_0x3af1e4['displayHeight'],_0x43e814=_0x3af1e4['yuvType'];-0x1!=_0x2a2139&&(_0x19dfc0['player']?_0x19dfc0['player']['_GetImage2'](_0x2a2139,_0x5be45e,_0x3fad91,_0x579157,'jpeg',_0x43e814,_0x19dfc0['sx'],_0x19dfc0['sy'],_0x19dfc0['sw'],_0x19dfc0['sh']):postMessage({'function':'imageYUV','value':_0x2a2139['buffer'],'size':_0x5be45e,'width':_0x3fad91,'height':_0x579157,'type':'jpeg','yuvType':_0x43e814,'sx':_0x19dfc0['sx'],'sy':_0x19dfc0['sy'],'sw':_0x19dfc0['sw'],'sh':_0x19dfc0['sh']},[_0x2a2139['buffer']]));},function(){});}},{'key':'GetCropBMP','value':function(){var _0x2e57e5=this;this['oVideoDecoder']['GetImageYUV']()['then'](function(_0x39ea05){var _0x312376=_0x39ea05['yuvFrameBuffer'],_0x1e6e7b=_0x39ea05['yuvLength'],_0x531810=_0x39ea05['displayWidth'],_0x39d2d4=_0x39ea05['displayHeight'],_0x118eb9=_0x39ea05['yuvType'];-0x1!=_0x312376&&(_0x2e57e5['player']?_0x2e57e5['player']['_GetImage2'](_0x312376,_0x1e6e7b,_0x531810,_0x39d2d4,'bmp',_0x118eb9,_0x2e57e5['sx'],_0x2e57e5['sy'],_0x2e57e5['sw'],_0x2e57e5['sh']):postMessage({'function':'imageYUV','value':_0x312376['buffer'],'size':_0x1e6e7b,'width':_0x531810,'height':_0x39d2d4,'type':'bmp','yuvType':_0x118eb9,'sx':_0x2e57e5['sx'],'sy':_0x2e57e5['sy'],'sw':_0x2e57e5['sw'],'sh':_0x2e57e5['sh']},[_0x312376['buffer']]));},function(){});}},{'key':'GetCanvasCapture','value':function(_0x5274f0){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20GetCanvasCapture','color:red'),0x0):(this['oVideoRender']['GetCanvasData'](_0x5274f0),0x1);}},{'key':'SetDecodeFrameType','value':function(_0xafe902){return this['waitIFrameTimestamp']=_0xafe902,0x1;}},{'key':'SetStreamEnd','value':function(){return this['oVideoDecoder']['SetStreamEnd'](),0x1;}},{'key':'SetAntialias','value':function(_0x4cb309){return null!=this['oVideoRender']?this['oVideoRender']['SetAntialias'](_0x4cb309):0x0;}},{'key':'SetFrameInfoCallBack','value':function(_0x193a6f,_0xfa0899){return this['displayFrameInfoCB']=_0xfa0899?_0x193a6f:null,0x1;}},{'key':'FEC_SetCanvasID','value':function(_0x5e972f){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetCanvasID'](_0x5e972f):(this['FECCanvasID']=_0x5e972f,0x0);}},{'key':'FEC_ResetCorrectType','value':function(_0x1c4eb6,_0x3befb7,_0x1bc68a){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_ResetCorrectType'](_0x1c4eb6,_0x3befb7,_0x1bc68a):0x0;}},{'key':'FEC_GetPort','value':function(_0x4bc99e,_0x1d761d){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),-0x1):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetPort'](_0x4bc99e,_0x1d761d):-0x1;}},{'key':'FEC_Enable','value':function(_0x24c814){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_Enable'](_0x24c814):0x0;}},{'key':'FEC_SetParam','value':function(_0x4b47cc,_0x45ac68){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetParam'](_0x4b47cc,_0x45ac68):0x0;}},{'key':'FEC_GetParam','value':function(_0x262555,_0x597461){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetParam'](_0x262555,_0x597461):0x0;}},{'key':'FEC_SetViewParam','value':function(_0x1da199,_0x16b82f,_0x414559){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetViewParam'](_0x1da199,_0x16b82f,_0x414559):0x0;}},{'key':'FEC_GetViewParam','value':function(_0x5a0af3,_0x3a1b00,_0x59130e){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetViewParam'](_0x5a0af3,_0x3a1b00,_0x59130e):0x0;}},{'key':'FEC_SetWnd','value':function(_0xa8e05,_0x2eb965){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetWnd'](_0xa8e05,_0x2eb965):0x0;}},{'key':'FEC_Disable','value':function(_0x3906d4,_0x22cb26,_0x385acc){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_Disable'](_0x3906d4,_0x22cb26,_0x385acc):0x0;}},{'key':'FEC_DelPort','value':function(_0x1eac9f){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_DelPort'](_0x1eac9f):0x0;}},{'key':'FEC_SetDisplayRegion','value':function(_0x56017d,_0x464808,_0x52ea86,_0x5e218a,_0x40d1eb,_0x2e645c,_0x13d4de){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetDisplayRegion'](_0x56017d,_0x464808,_0x52ea86,_0x5e218a,_0x40d1eb,_0x2e645c,_0x13d4de):0x0;}},{'key':'FEC_SetBackCilling','value':function(_0x453651,_0x19c072){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetBackCilling'](_0x453651,_0x19c072):0x0;}},{'key':'FEC_GetPTZPort','value':function(_0x267004,_0x22cae9,_0x35fdab){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),-0x1):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetPTZPort'](_0x267004,_0x22cae9,_0x35fdab):-0x1;}},{'key':'FEC_SetPTZDisplayMode','value':function(_0x44ab29){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetPTZDisplayMode'](_0x44ab29):0x0;}},{'key':'InputPrivateInfo','value':function(_0x59722d,_0x11ebaf,_0xf48ace){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20PrivateInfo','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['InputPrivateInfo'](_0x59722d,_0x11ebaf,_0xf48ace):0x1;}},{'key':'RenderPrivateData','value':function(_0x20408a){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20PrivateInfo','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['RenderPrivateData'](_0x20408a):0x1;}},{'key':'SetWaterMarkFont','value':function(_0x45d8a7){return'2d'===this['renderEngine']||'2D'===this['renderEngine']||null==this['oVideoRender']?(console['log']('%c\\x20param\\x20error\\x20this.renderEngine:%d,this.oVideoRender:%d','color:red',this['renderEngine'],this['oVideoRender']),0x0):(null!=this['oVideoRender']&&this['oVideoRender']['SetWaterMarkFont'](_0x45d8a7,{'yuvFrameBuffer':-0x1,'yuvLength':-0x1,'displayWidth':-0x1,'displayHeight':-0x1,'yuvType':-0x1}),0x1);}},{'key':'SetWaterMarkImage','value':function(_0x48982c){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20SetWaterMarkImage','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['SetWaterMarkImage'](_0x48982c):0x1;}},{'key':'SetD3DPostProcess','value':function(_0x105551,_0x2dcd9b){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20SetD3DPostProcess','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['SetD3DPostProcess'](_0x105551,_0x2dcd9b):0x1;}}]),_0x2bfe2e;}());_0x2e6310=new _0x436cae(),self['onmessage']=function(_0x336e5d){let _0x3b3e97=_0x336e5d['data'];switch(_0x3b3e97['command']){case'init':_0x2e6310['init'](_0x3b3e97['canvas'],_0x3b3e97['streamOpenMode'],_0x3b3e97['sab'],_0x3b3e97['renderEngine']);break;case'inputData':let _0x380e6b=new Uint8Array(_0x3b3e97['rawData']),_0x590bb2=_0x3b3e97['rawDataFrameInfo'];_0x2e6310['inputData'](_0x380e6b,_0x590bb2),_0x380e6b=null;break;case'SetDisplayRegion':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),_0x2e6310['SetDisplayRegion'](_0x3b3e97['sx'],_0x3b3e97['sy'],_0x3b3e97['sw'],_0x3b3e97['sh']);break;case'stop':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),_0x2e6310['SetCurStatus'](0x4);let _0x2622f7=setInterval(()=>{_0x2e6310['displayRunning']||(_0x2e6310=null,self['postMessage']({'function':'stop'}),clearInterval(_0x2622f7),_0x2622f7=null,self['close'](),console['log']('>>>JS\\x2003\\x20destroy\\x20oVideoPlayCtrl\\x20and\\x20worker'));},0x2);break;case'fast':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['fast']()&&self['postMessage']({'function':'paraError'});break;case'slow':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['slow']()&&self['postMessage']({'function':'paraError'});break;case'SetDisplayBuf':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['SetDisplayBuf'](_0x3b3e97['value'])&&self['postMessage']({'function':'paraError'});break;case'Pause':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['Pause'](_0x3b3e97['value'])&&self['postMessage']({'function':'paraError'});break;case'OneByOne':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['OneByOne'](_0x3b3e97['value'])&&self['postMessage']({'function':'paraError'});break;case'SetCanvasSize':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['SetCanvasSize'](_0x3b3e97['width'],_0x3b3e97['height'])&&self['postMessage']({'function':'paraError'});break;case'GetCanvasSize':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['GetCanvasSize']()&&self['postMessage']({'function':'paraError'});break;case'GetPlayedTime':null===_0x2e6310&&self['postMessage']({'function':'OrderError'});let _0x1b5e3d=_0x2e6310['GetPlayedTime']();0x0!==_0x1b5e3d&&self['postMessage']({'function':'GetPlayedTime','value':_0x1b5e3d});break;case'needReset':_0x2e6310['SetCurStatus'](0x0);break;case'GetJPEG':_0x2e6310['GetJPEG']();break;case'GetBMP':_0x2e6310['GetBMP']();break;case'GetCropJPEG':_0x2e6310['GetCropJPEG']();break;case'GetCropBMP':_0x2e6310['GetCropBMP']();break;case'SetDecodeFrameType':_0x2e6310['SetDecodeFrameType'](_0x3b3e97['timestamp']);break;case'streamEnd':_0x2e6310['SetStreamEnd']();break;case'SetAntialias':_0x2e6310['SetAntialias'](_0x3b3e97['value']);break;case'SetFrameInfoCallBack':_0x2e6310['SetFrameInfoCallBack'](_0x26f608=>{self['postMessage']({'function':'SetFrameInfoCallBack','curFrameInfo':_0x26f608});},_0x3b3e97['value']);break;case'FEC_SetCanvasID':_0x2e6310['FEC_SetCanvasID'](_0x3b3e97['canvasID']);break;case'FECResetCorrectType':_0x2e6310['FEC_ResetCorrectType'](_0x3b3e97['fishSubPort'],_0x3b3e97['placeType'],_0x3b3e97['correctType']);break;case'FECGetPort':let _0xc3af92=_0x2e6310['FEC_GetPort'](_0x3b3e97['placeType'],_0x3b3e97['correctType']);(_0xc3af92<0x1||_0xc3af92>0x1f||null==_0xc3af92)&&(_0xc3af92=-0x1),self['postMessage']({'function':'FECGetPort','fishSubPort':_0xc3af92});break;case'FECEnable':_0x2e6310['FEC_Enable'](_0x3b3e97['fishSubPort']);break;case'FECSetParam':_0x2e6310['FEC_SetParam'](_0x3b3e97['fishSubPort'],_0x3b3e97['param2d']);break;case'FECGetParam':let _0x28b110={};_0x2e6310['FEC_GetParam'](_0x3b3e97['fishSubPort'],_0x28b110),self['postMessage']({'function':'FECGetParam','param2d':_0x28b110});break;case'FECSetViewParam':_0x2e6310['FEC_SetViewParam'](_0x3b3e97['fishSubPort'],_0x3b3e97['upDateType'],_0x3b3e97['fValue']);break;case'FECGetViewParam':let _0x3712f4={};_0x2e6310['FEC_GetViewParam'](_0x3b3e97['fishSubPort'],_0x3b3e97['upDateType'],_0x3712f4),self['postMessage']({'function':'FECGetViewParam','Param3D':Param});break;case'FECSetWnd':_0x2e6310['FEC_SetWnd'](_0x3b3e97['fishSubPort'],_0x3b3e97['offscrrenCnv']);break;case'FECDisable':_0x2e6310['FEC_Disable'](_0x3b3e97['fishSubPort'],_0x3b3e97['clearFECCanvas'],_0x3b3e97['clearContext']);break;case'FECDelPort':_0x2e6310['FEC_DelPort'](_0x3b3e97['fishSubPort']);break;case'FECSetDisplayRegion':_0x2e6310['FEC_SetDisplayRegion'](_0x3b3e97['fishSubPort'],_0x3b3e97['type'],_0x3b3e97['regionNum'],_0x3b3e97['sx'],_0x3b3e97['sy'],_0x3b3e97['sw'],_0x3b3e97['sh']);break;case'FECSetBackCilling':_0x2e6310['FEC_SetBackCilling'](_0x3b3e97['fishSubPort'],_0x3b3e97['bValue']);break;case'FECGetPTZPort':let _0x1b036c=_0x2e6310['FEC_GetPTZPort'](_0x3b3e97['fPositionX'],_0x3b3e97['fPositionY']);(_0x1b036c<0x1||_0x1b036c>0x1f||null==_0x1b036c)&&(_0x1b036c=-0x1,console['info']('%c\\x20hardDecoderWorker\\x20FECGetPTZPort\\x20error\\x20','color:\\x20red')),self['postMessage']({'function':'FECGetPTZPort','fishSubPort':_0x1b036c});break;case'FECSetPTZDisplayMode':_0x2e6310['FEC_SetPTZDisplayMode'](_0x3b3e97['ptzMode']);break;case'RenderPrivateData':_0x2e6310['RenderPrivateData'](_0x3b3e97['bTrue']);break;case'InputPrivateInfo':_0x2e6310['InputPrivateInfo'](_0x3b3e97['linesInfo'],_0x3b3e97['fontInfo'],_0x3b3e97['ImageInfo']);break;case'GetCanvasCapture':_0x2e6310['GetCanvasCapture'](_0x3b3e97['cbFun']);break;case'SetWaterMarkFont':_0x2e6310['SetWaterMarkFont'](_0x3b3e97['fontParam']);break;case'SetWaterMarkImage':_0x2e6310['SetWaterMarkImage'](_0x3b3e97['imageParam']);break;case'SetD3DPostProcess':_0x2e6310['SetD3DPostProcess'](_0x3b3e97['ProcessType'],_0x3b3e97['ProcessValue']);}};})());","Worker",void 0,void 0)},l=function(){var e=new _e(16);return _e!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},h=function(e,t,r,i){var a,n,s,o,x,f,l,h,c,u,_,d,p,m,P,y,g,b,S,v,R,C,E,F,T=i[0],D=i[1],I=i[2],M=Math.hypot(T,D,I);return M<ue?null:(T*=M=1/M,D*=M,I*=M,a=Math.sin(r),s=1-(n=Math.cos(r)),o=t[0],x=t[1],f=t[2],l=t[3],h=t[4],c=t[5],u=t[6],_=t[7],d=t[8],p=t[9],m=t[10],P=t[11],y=T*T*s+n,g=D*T*s+I*a,b=I*T*s-D*a,S=T*D*s-I*a,v=D*D*s+n,R=I*D*s+T*a,C=T*I*s+D*a,E=D*I*s-T*a,F=I*I*s+n,e[0]=o*y+h*g+d*b,e[1]=x*y+c*g+p*b,e[2]=f*y+u*g+m*b,e[3]=l*y+_*g+P*b,e[4]=o*S+h*v+d*R,e[5]=x*S+c*v+p*R,e[6]=f*S+u*v+m*R,e[7]=l*S+_*v+P*R,e[8]=o*C+h*E+d*F,e[9]=x*C+c*E+p*F,e[10]=f*C+u*E+m*F,e[11]=l*C+_*E+P*F,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},c=function(){var e=new _e(3);return _e!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e},u=function(e,t,r){var i=new _e(3);return i[0]=e,i[1]=t,i[2]=r,i},_=function(){var e=new _e(4);return _e!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e},d=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){o=!0,n=e},f:function(){try{s||null==r.return||r.return()}finally{if(o)throw n}}}},p=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i};a.r(x),a.d(x,{JSPlayCtrl:function(){return qe}});var m=1281,P=1282,y=1285,g=1287,b=1288,S=1289,v=1298,R=1302,C=256,E=512,F=768,T=1024,D=1280,I=1536,M=1792,A=2048,w=2304,L=2560,k=a(687),B=a.n(k),O=a(477),H=a.n(O),N=function(){function t(r,i,a){e(this,t),this.width=0,this.height=0,this.decoderObj=null,this.FirstFrame=!0,this.ready_frames=[],this.underflow=!0,this.sab=r,this.frameRate=30,this.needSetPreSoft=!1,this.decoderCurStatus=2,this.decoderOutSuccess=!1,this.decoderObjNeedReset=!1,this.oVideoRenderHandle=i,this.output=this.output.bind(this),this.reportError=this.reportError.bind(this),this.player=null,null!=a&&(this.player=a),this.curFrame=null}return r(t,[{key:"initDecoder",value:function(){if(null==this.decoderObj){var e={output:this.output,error:this.reportError};this.decoderObj=new VideoDecoder(e)}this.underflow&&(this.underflow=!1,setTimeout(this.oVideoRenderHandle.RenderFrame(),0),this.oVideoRenderHandle.displayRunning=!0),this.decoderCurStatus=2,this.FirstFrame=!0}},{key:"inputData",value:function(e,t){null!=this.decoderObj&&("configured"==this.decoderObj.state||this.FirstFrame)&&this.decodeProcess(e,t),t.nStreamEnd&&this.SetStreamEnd()}},{key:"concatenate",value:function(e){for(var t=0,r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];for(var n=0,s=i;n<s.length;n++)t+=s[n].length;for(var o=new e(t),x=0,f=0,l=i;f<l.length;f++){var h=l[f];o.set(h,x),x+=h.length}return o}},{key:"processData",value:function(e){for(var t=null,r=null,i=null,a=!1,n=!1,s=0,o=0;o<e.length-4;o++){if(0!=e[o]||0!=e[o+1]||0!=e[o+2]||1!=e[o+3]||103!=e[o+4]&&39!=e[o+4]||(0!=o?(n=!0,t=e.slice(o),s=o):t=e),0==e[o]&&0==e[o+1]&&0==e[o+2]&&1==e[o+3]&&(9==e[o+4]||6==e[o+4])){if(null==t)continue;null==r&&(r=e.slice(s,o),a=!0)}if(0==e[o]&&0==e[o+1]&&0==e[o+2]&&1==e[o+3]&&(101==e[o+4]||37==e[o+4])){a&&(i=e.slice(o));break}}return a?this.concatenate(Uint8Array,r,i):n?t:e}},{key:"processData1",value:function(e){return 0!=e[0]||0!=e[1]||0!=e[2]||1!=e[3]||9!=e[4]&&6!=e[4]?e:e.slice(5)}},{key:"formatVideoDecoderConfigure",value:function(e,t,r,i){var a="";if(5==t)a="hvc1.1.6.L123.00",console.log("265 hard decoder");else if(256==t){for(var n=0;n<e.length;n++)if(103===e[n]||39===e[n]){var s=e.subarray(n+1,n+4);a="avc1.";for(var o=0;o<3;o++){var x=s[o].toString(16);x.length<2&&(x="0"+x),a+=x}break}console.log("264 hard decoder")}else console.log("Support Error: hard decoder only support 264 and 265 !!!");var f={codec:a,hardwareAcceleration:"prefer-hardware",optimizeForLatency:1};return 5!=t&&this.needSetPreSoft&&(f.hardwareAcceleration="prefer-software"),f}},{key:"decodeProcess",value:function(e,t){var r=this;this.frameRate!=t.frameRate&&(this.frameRate=t.frameRate),this.width!=t.width&&(this.width=t.width),this.height!=t.height&&(this.height=t.height),t.needSetPreSoft&&(this.needSetPreSoft=t.needSetPreSoft);var i=e;if(4!=this.decoderCurStatus&&null!=this.decoderObj)if("configured"==this.decoderObj.state){var a=new EncodedVideoChunk({data:i,timestamp:t.timeStamp,type:t.isKeyFrame?"key":"delta"});this.decoderObj.decode(a),i=null,e=null,a=null,t.frameType}else if(t.isKeyFrame&&"unconfigured"==this.decoderObj.state){var n=this.formatVideoDecoderConfigure(e,t.codecType,t.width,t.height);if(""==n.codec)return-1;VideoDecoder.isConfigSupported(n).then((function(a){if(a.supported){r.decoderObj.configure(n),i=r.processData(e),r.FirstFrame=!1;var s=new EncodedVideoChunk({data:i,timestamp:t.timeStamp,type:t.isKeyFrame?"key":"delta"});r.decoderObj.decode(s),n=null,i=null,e=null}else console.log("%c4>HardDecoder ConfigSupported error,switch hard to soft","color: red"),r.oVideoRenderHandle.HardDecodeError()})).catch((function(){console.log("VideoDecoder.js isConfigSupported error switch hard to soft "),r.oVideoRenderHandle.HardDecodeError()}))}}},{key:"output",value:function(e){"configured"==this.decoderObj.state?(e.format,e.codedWidth,e.codedHeight,e.displayWidth,e.displayHeight,e.duration,e.timestamp,this.ready_frames.push(e),this.decoderOutSuccess||(this.decoderOutSuccess=!0),this.decoderObj.decodeQueueSize<=1&&(this.player?this.player.JSPlayM4_GetRawData():postMessage({function:"GetRawData"}))):e.close()}},{key:"output2",value:function(e){var t=this;e.timestamp,createImageBitmap(e).then((function(r){e.close(),t.ready_frames.push(r)}))}},{key:"reportError",value:function(e){this.decoderOutSuccess?this.decoderObjNeedReset=!0:(this.oVideoRenderHandle.HardDecodeError(),console.log("%cswitch hardVideoDecoder to softVideoDecoder","color: red"))}},{key:"destroyDecoder",value:function(){var e=this;return new Promise((function(t,r){e.clearDecoderObjBuffer().then((function(){null!=e.decoderObj&&("closed"!=e.decoderObj.state&&e.decoderObj.close(),console.log(">>>JS 01 destroy decoderObj"),e.decoderObj=null),e.decoderCurStatus=4,e.decoderOutSuccess=!1,e.FirstFrame=!0,e.underflow=!0,e.needSetPreSoft=!1,e.decoderObjNeedReset=!1,t()}),(function(){r()}))}))}},{key:"resetDecoder",value:function(){var e=this;return new Promise((function(t,r){e.destroyDecoder().then((function(){e.initDecoder(),console.log("%c reset hard decoder","color:red"),t()}),(function(){r()}))}))}},{key:"clearDecoderObjBuffer",value:function(){var e=this;return new Promise((function(t,r){for(var i=e.ready_frames.length,a=0;a<i;a++)e.ready_frames.shift().close();e.ready_frames.splice(0,e.ready_frames.length),null!=e.decoderObj&&"configured"==e.decoderObj.state&&e.decoderObj.reset(),t()}))}},{key:"SetStreamEnd",value:function(){return 0==this.decoderObj.decodeQueueSize&&0==this.ready_frames.length&&(this.decoderObj.flush(),console.log("flush")),1}},{key:"GetFrame",value:function(){var e=this;return new Promise((function(t,r){if(null!=e.curFrame){var i=e.ready_frames.shift();i.close(),i=null,e.curFrame=null}0!=e.ready_frames.length?(e.curFrame=e.ready_frames[0],t(e.curFrame)):(e.curFrame=null,t(null))}))}},{key:"GetFrameBufferLength",value:function(){return this.ready_frames.length}},{key:"GetImageYUV",value:function(){var e=this;return new Promise((function(t,r){var i=null;if(null!=e.curFrame?i=e.curFrame:0!=e.ready_frames.length&&(i=e.ready_frames[0]),null!=i){var a=i.displayWidth,n=i.displayHeight,s=a*n*3/2,o=new Uint8Array(s),x=i.format;i.copyTo(o).then((function(){console.log("2 yuvLength:"+s+",displayWidth:"+a),t({yuvFrameBuffer:o,yuvLength:s,displayWidth:a,displayHeight:n,yuvType:x})}))}else t({yuvFrameBuffer:-1,yuvLength:-1,displayWidth:-1,displayHeight:-1,yuvType:-1})}))}}]),t}(),V=2147483649,Y=2147483651,U=2147483652,X=2147483653,W=2147483658,G=2147483661,J=2147483662,Z={SR_DE_NULL:0,SR_DE_FISH_ORIGINAL:1,SR_DE_FISH_PTZ_CEILING:2,SR_DE_FISH_PTZ_FLOOR:3,SR_DE_FISH_PTZ_WALL:4,SR_DE_FISH_PANORAMA_CEILING_360:5,SR_DE_FISH_PANORAMA_CEILING_180:6,SR_DE_FISH_PANORAMA_FLOOR_360:7,SR_DE_FISH_PANORAMA_FLOOR_180:8,SR_DE_FISH_PANORAMA_WALL:9,SR_DE_FISH_SEMISPHERE:10,SR_DE_EAGLEEYE_SEMISPHERE:11,SR_DE_EAGLEEYE_PLANE:12,SR_DE_FISH_CYLINDER_CEILING:13,SR_DE_FISH_CYLINDER_FLOOR:14,SR_DE_FISH_CYLINDER_SPLIT_CEILING:15,SR_DE_FISH_CYLINDER_SPLIT_FLOOR:16,SR_DE_FISH_PLANET:17,SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:18,SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:19,SR_DE_FISH_ANIMATION_SWITCH_CEILING:20,SR_DE_FISH_ANIMATION_SWITCH_FLOOR:21,SR_DE_PANORAMA_SPHERE:22,SR_DE_PANORAMA_PLANET:23},j=256,z="\nattribute vec3 xy;\nattribute vec2 uv;\nuniform int bCapture; \n\nvarying highp vec2 v_uv;\n\nvoid main(void) {\n  if(bCapture == 1)\n  {\n    gl_Position = vec4(xy.x, -xy.y, xy.z, 1.0);\n  }\n  else\n  {\n    gl_Position = vec4(xy, 1.0);\n  }\n  v_uv = uv;\n}\n",q="\n    attribute vec3 position;\n    attribute vec4   color;\n    varying   float  pp;\n    varying   vec4  colorOut;\n    uniform int bCapture; \n\n    void main()\n    {\n        if(bCapture == 1)\n        {\n            gl_Position = vec4(position.x, -position.y, 0.0, 1.0);\n        }\n        else\n        {\n            gl_Position = vec4(position.x, position.y, 0.0, 1.0);\n        }\n        pp = position.z;\n        colorOut = color;\n    }\n",$="\n    varying  mediump float pp;\n    varying  lowp vec4  colorOut;\n    void main()\n    {\n        gl_FragColor = colorOut;\n        mediump float fx = abs(pp);\n        if (fx > 0.2)\n        { \n            gl_FragColor.a = colorOut.a*(1.25 - 1.25*fx);\n        } \n    } \n",K="\n    attribute vec4 position; \n    attribute vec4 texCoord; \n    uniform   mat4   matRotate; \n    varying vec4 pp; \n    uniform int bCapture;\n\n    void main() \n    { \n        gl_Position = position; //* matRotate; \n        if(bCapture == 1)\n        {\n           gl_Position.y =  -position.y;\n        }\n        pp = texCoord; \n    } \n",Q="\n    precision mediump float; \n    uniform sampler2D texture;\n    varying lowp vec4 pp; \n    uniform float fAlpha;\n    void main(void) \n    { \n        gl_FragColor = texture2D(texture, pp.st); \n        gl_FragColor.a *= fAlpha; \n    } \n",ee=32,te=1024,re=.05,ie=1e-6,ae=3.1415926,ne=.02,se=1e3,oe=.78539815,xe=-1,fe=ae/18,le=ae/3,he=ae/6,ce=ae/9,ue=1e-6,_e="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var de,pe,me;c(),de=new _e(4),_e!=Float32Array&&(de[0]=0,de[1]=0,de[2]=0,de[3]=0),c(),u(1,0,0),u(0,1,0),_(),_(),pe=new _e(9),_e!=Float32Array&&(pe[1]=0,pe[2]=0,pe[3]=0,pe[5]=0,pe[6]=0,pe[7]=0),pe[0]=1,pe[4]=1,pe[8]=1,me=new _e(2),_e!=Float32Array&&(me[0]=0,me[1]=0);var Pe=function(){function t(){e(this,t),this.fFov=.785,this.fAspect=1,this.fNear=.02,this.fFar=1e3,this.fTheta=0,this.fAlpha=0,this.fBeta=0,this.fScale=1,this.bOrtho=!1,this.matView=l(),this.matProj=l(),this.vecEye=u(0,0,0),this.vecCenter=u(0,0,100),this.vecUp=u(0,1,0)}return r(t,[{key:"SetYaw",value:function(e){this.fTheta=e}},{key:"GetYaw",value:function(){return this.fTheta}},{key:"SetPitch",value:function(e){this.fAlpha=e}},{key:"GetPitch",value:function(){return this.fAlpha}},{key:"SetRoll",value:function(e){this.fBeta=e}},{key:"GetRoll",value:function(){return this.fBeta}},{key:"SetScale",value:function(e){this.fScale=e}},{key:"GetScale",value:function(){return this.fScale}},{key:"SetFov",value:function(e){this.fFov=e}},{key:"SetAspect",value:function(e){this.fAspect=e}},{key:"SetNear",value:function(e){this.fNear=e}},{key:"SetFar",value:function(e){this.fFar=e}},{key:"SetOrtho",value:function(e){this.bOrtho=e}},{key:"UpdateCamera",value:function(e,t){if(!(e<=0||t<=0)){if(1==this.bOrtho)!function(e,t,r,i,a,n,s){var o=1/(t-r),x=1/(i-a),f=1/(n-s);e[0]=-2*o,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*x,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*f,e[11]=0,e[12]=(t+r)*o,e[13]=(a+i)*x,e[14]=(s+n)*f,e[15]=1}(this.matProj,0,e,t,0,this.fNear,this.fFar);else{var r=this.fFov/ae*180;!function(e,t,r,i,a){var n=1/Math.tan(t/2);if(e[0]=n/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=n,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=a&&a!==1/0){var s=1/(i-a);e[10]=(a+i)*s,e[14]=2*a*i*s}else e[10]=-1,e[14]=-2*i}(this.matProj,r,e/t,this.fNear,this.fFar)}this.vecEye=u(0,0,this.fScale),this.vecCenter=u(0,0,0),this.vecUp=u(0,1,0);var i=u(1,0,0),a=u(0,1,0),n=u(0,0,1),s=l();_=s,d=this.vecEye,p=this.vecCenter,m=this.vecUp,D=d[0],I=d[1],M=d[2],A=m[0],w=m[1],L=m[2],k=p[0],B=p[1],O=p[2],Math.abs(D-k)<ue&&Math.abs(I-B)<ue&&Math.abs(M-O)<ue?((T=_)[0]=1,T[1]=0,T[2]=0,T[3]=0,T[4]=0,T[5]=1,T[6]=0,T[7]=0,T[8]=0,T[9]=0,T[10]=1,T[11]=0,T[12]=0,T[13]=0,T[14]=0,T[15]=1):(R=D-k,C=I-B,E=M-O,P=w*(E*=F=1/Math.hypot(R,C,E))-L*(C*=F),y=L*(R*=F)-A*E,g=A*C-w*R,(F=Math.hypot(P,y,g))?(P*=F=1/F,y*=F,g*=F):(P=0,y=0,g=0),b=C*g-E*y,S=E*P-R*g,v=R*y-C*P,(F=Math.hypot(b,S,v))?(b*=F=1/F,S*=F,v*=F):(b=0,S=0,v=0),_[0]=P,_[1]=b,_[2]=R,_[3]=0,_[4]=y,_[5]=S,_[6]=C,_[7]=0,_[8]=g,_[9]=v,_[10]=E,_[11]=0,_[12]=-(P*D+y*I+g*M),_[13]=-(b*D+S*I+v*M),_[14]=-(R*D+C*I+E*M),_[15]=1);var o=l(),x=l(),f=l(),c=l();h(x,o,-this.fAlpha,i),h(f,x,-this.fTheta,a),h(c,f,-this.fBeta,n),function(e,t,r){var i=t[0],a=t[1],n=t[2],s=t[3],o=t[4],x=t[5],f=t[6],l=t[7],h=t[8],c=t[9],u=t[10],_=t[11],d=t[12],p=t[13],m=t[14],P=t[15],y=r[0],g=r[1],b=r[2],S=r[3];e[0]=y*i+g*o+b*h+S*d,e[1]=y*a+g*x+b*c+S*p,e[2]=y*n+g*f+b*u+S*m,e[3]=y*s+g*l+b*_+S*P,y=r[4],g=r[5],b=r[6],S=r[7],e[4]=y*i+g*o+b*h+S*d,e[5]=y*a+g*x+b*c+S*p,e[6]=y*n+g*f+b*u+S*m,e[7]=y*s+g*l+b*_+S*P,y=r[8],g=r[9],b=r[10],S=r[11],e[8]=y*i+g*o+b*h+S*d,e[9]=y*a+g*x+b*c+S*p,e[10]=y*n+g*f+b*u+S*m,e[11]=y*s+g*l+b*_+S*P,y=r[12],g=r[13],b=r[14],S=r[15],e[12]=y*i+g*o+b*h+S*d,e[13]=y*a+g*x+b*c+S*p,e[14]=y*n+g*f+b*u+S*m,e[15]=y*s+g*l+b*_+S*P}(this.matView,s,c)}var _,d,p,m,P,y,g,b,S,v,R,C,E,F,T,D,I,M,A,w,L,k,B,O}},{key:"GetView",value:function(){return this.matView}},{key:"GetProj",value:function(){return this.matProj}}]),t}(),ye=function(){function t(){e(this,t),this.canvas=null,this.ctx=null,this.videoShaderProgram=0,this.vertexPosBuffer=0,this.texturePosBuffer=0,this.pFrameData=null,this.frameDisplayWidth=0,this.frameDisplayHeight=0,this.onlySupportedWebGL1=!1,this.bAntialias=!1,this.bRecreateTex=!0,this.nSurfaceTexture=[],this.nMaxPointNum=0,this.pLinePosVertices=null,this.pLineClrVertices=null,this.glLinePosBuffer=0,this.glLineClrBuffer=0,this.nLineTriangleNum=0,this.nLineShaderProgram=0,this.pFillBlockPosVertices=null,this.pFillBlockClrVertices=null,this.nMaxFillBlockTriNum=0,this.glBlockPosBuffer=0,this.glBlockClrBuffer=0,this.nBlockShaderProgram=0,this.nDrawFontWidth=0,this.nDrawFontHeight=0,this.nFontColorTexture=0,this.pFontColorBuffer=0,this.nFontShaderProgram=0,this.nFontBGNum=0,this.pstFontBGLines=[],this.nImageShaderProgram=0,this.pImagePosVertices=null,this.pImageClrVertices=null,this.glImagePosBuffer=0,this.glImageClrBuffer=0,this.nImageColorTexture=null,this.nDrawImageWidth=0,this.nDrawImageHeight=0,this.nImageColorTextures=[],this.pFishParamManager=null,this.enDisplayEffect=Z.SR_DE_NULL,this.nFECPort=xe,this.bIsCapturing=!1,this.pSemiSpherePos=null,this.pSemiSphereTex=null,this.nSemiSpherePosNum=0,this.nSemiSpherePosSize=0,this.nSemiSphereTexSize=0,this.pCylinderPos=null,this.pCylinderTex=null,this.nCylinderPosNum=0,this.nCylinderPosSize=0,this.nCylinderTexSize=0,this.fCylinderHeight=0,this.fCylinderRadius=0,this.pArcSpherePos=null,this.pArcSphereTex=null,this.nArcSpherePosNum=0,this.nArcSpherePosSize=0,this.nArcSphereTexSize=0,this.fImageWidth=1,this.fImageHeight=1,this.fTexCenterX=.5,this.fTexCenterY=.5,this.fTexRadius=.5,this.b3DPort=!1,this.pCamera=null,this.fRotateX=0,this.fRotateY=0,this.fScale=0,this.fRotateLimitX=0,this.fRotateLimitY=0,this.pfuncCBIn=null,this.pfuncCBOut=null,this.pUserIn=null,this.pUserOut=null,this.bCullBack=!1,this.fSrcUseLeft=0,this.fSrcUseRight=1,this.fSrcUseTop=0,this.fSrcUseBottom=1,this.fDstUseLeft=0,this.fDstUseRight=1,this.fDstUseTop=0,this.fDstUseBottom=1,this.enPixelFormat=0,this.nTextureNum=0,this.textCanvas=null,this.textCanvasCtx=null,this.nCaptureWidth=0,this.nCaptureHeight=0,this.nCaptureRTTex=0,this.nCaptureFBO=0,this.nCaptureFBOWidth=0,this.nCaptureFBOHeight=0,this.nCaptureDepthbuffer=0,this.bCaptureResInit=!1,this.fBrightness=0,this.fHue=0,this.fSaturation=0,this.fContrast=0,this.fSharpness=0,this.nPostProc=0}return r(t,[{key:"CompileProgram",value:function(e,t){var r=this.ctx;if(null==r||null==e||null==t)return-1;var i=r.createShader(r.VERTEX_SHADER);if(r.shaderSource(i,e),r.compileShader(i),!r.getShaderParameter(i,r.COMPILE_STATUS))return console.log("Vertex shader failed to compile: "+r.getShaderInfoLog(i)),-1;var a=r.createShader(r.FRAGMENT_SHADER);if(r.shaderSource(a,t),r.compileShader(a),!r.getShaderParameter(a,r.COMPILE_STATUS))return console.log("Fragment shader failed to compile: "+r.getShaderInfoLog(a)),-1;var n=r.createProgram();return r.attachShader(n,i),r.attachShader(n,a),r.linkProgram(n),r.getProgramParameter(n,r.LINK_STATUS)?(r.deleteShader(i),r.deleteShader(a),n):(console.log("Program failed to compile: "+r.getProgramInfoLog(n)),-1)}},{key:"SR_Init",value:function(e,t){if(null==e)return X;if(this.canvas=e,this.ctx=this.canvas.getContext("webgl2"),this.ctx||(this.ctx=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl"),this.onlySupportedWebGL1=!0,console.log("only support webgl1")),!this.ctx)return console.log("your browser does not support WebGL"),J;if(2==t||6==t)return V;switch(t){case 1:case 3:this.nTextureNum=3;break;case 2:case 6:this.nTextureNum=2;break;case j:this.nTextureNum=1;break;default:return V}return this.enPixelFormat=t,1}},{key:"SR_Draw",value:function(e,t,r,i,a){if(null==this.ctx)return U;var n=this.nTextureNum;if(null==e||t<=0||r<=0)return X;if(0==this.videoShaderProgram||0==this.vertexPosBuffer||0==this.texturePosBuffer)return U;var s=1;if(j==this.enPixelFormat)this.frameDisplayWidth=t,this.frameDisplayHeight=r;else if(1!=(s=this._ResizeFrameData(e,t,r,i)))return s;if(this.ctx.useProgram(this.videoShaderProgram),1==this.bRecreateTex){if(this.enPixelFormat==j){if(0!=this.nSurfaceTexture[0]){var o=this.nSurfaceTexture[0];this.ctx.deleteTexture(o),this.nSurfaceTexture[0]=0}var x=this.ctx.createTexture();if(x<=0)return G;this.ctx.bindTexture(this.ctx.TEXTURE_2D,x),1==this.bAntialias?this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR_MIPMAP_NEAREST):this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE),this.nSurfaceTexture[0]=x}else if(1==this.enPixelFormat||3==this.enPixelFormat)for(var f=0;f<n;f++){if(0!=this.nSurfaceTexture[f]){var l=this.nSurfaceTexture[f];this.ctx.deleteTexture(l),this.nSurfaceTexture[f]=0}var h=this.ctx.createTexture();if(h<=0)return G;if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,h),1==this.bAntialias?this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR_MIPMAP_NEAREST):this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE),0==f){var c=this.ctx.getUniformLocation(this.videoShaderProgram,"Ytexture");this.ctx.uniform1i(c,0)}else if(1==f){var u=this.ctx.getUniformLocation(this.videoShaderProgram,"Utexture");this.ctx.uniform1i(u,1)}else if(2==f){var _=this.ctx.getUniformLocation(this.videoShaderProgram,"Vtexture");this.ctx.uniform1i(_,2)}this.nSurfaceTexture[f]=h,this.ctx.bindTexture(this.ctx.TEXTURE_2D,null)}this.bRecreateTex=!1}this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer);var d=this.ctx.getAttribLocation(this.videoShaderProgram,"xy");if(d<0)return G;this.ctx.vertexAttribPointer(d,3,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(d),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer);var p=this.ctx.getAttribLocation(this.videoShaderProgram,"uv");if(p<0)return G;this.ctx.vertexAttribPointer(p,2,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(p),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null);var m=this.enDisplayEffect,P=this.ctx.getUniformLocation(this.videoShaderProgram,"bCapture");if(P<=0)return G;this.ctx.uniform1i(P,0);var y=this.ctx.getUniformLocation(this.videoShaderProgram,"nPostProc");switch(this.ctx.uniform1i(y,this.nPostProc),1==this.nPostProc&&(s=this._SetImagePostProcess()),m){case Z.SR_DE_NULL:break;case Z.SR_DE_FISH_ORIGINAL:case Z.SR_DE_FISH_PTZ_CEILING:case Z.SR_DE_FISH_PTZ_FLOOR:case Z.SR_DE_FISH_PTZ_WALL:case Z.SR_DE_FISH_PANORAMA_CEILING_360:case Z.SR_DE_FISH_PANORAMA_CEILING_180:case Z.SR_DE_FISH_PANORAMA_FLOOR_360:case Z.SR_DE_FISH_PANORAMA_FLOOR_180:case Z.SR_DE_FISH_PANORAMA_WALL:if(null==this.pFishParamManager)return U;var g={};if(1!=(s=this.pFishParamManager.GetRenderParam(this.nFECPort,g)))return s;if(Z.SR_DE_FISH_ORIGINAL==m){var b=this.ctx.getUniformLocation(this.videoShaderProgram,"bBlack");if(b<=0)return G;this.ctx.uniform1i(b,g.bBlack);var S=this.ctx.getUniformLocation(this.videoShaderProgram,"bCut");if(S<=0)return G;this.ctx.uniform1i(S,g.bCut)}if(Z.SR_DE_FISH_PTZ_CEILING==m||Z.SR_DE_FISH_PTZ_FLOOR==m||Z.SR_DE_FISH_PTZ_WALL==m){var v=this.ctx.getUniformLocation(this.videoShaderProgram,"fHAngleCos");if(v<=0)return G;this.ctx.uniform1f(v,g.fCosH);var R=this.ctx.getUniformLocation(this.videoShaderProgram,"fHAngleSin");if(R<=0)return G;this.ctx.uniform1f(R,g.fSinH);var C=this.ctx.getUniformLocation(this.videoShaderProgram,"fVAngleCos");if(C<=0)return G;this.ctx.uniform1f(C,g.fCosV);var E=this.ctx.getUniformLocation(this.videoShaderProgram,"fVAngleSin");if(E<=0)return G;this.ctx.uniform1f(E,g.fSinV);var F=this.ctx.getUniformLocation(this.videoShaderProgram,"fZoom");if(F<=0)return G;this.ctx.uniform1f(F,g.fZoom)}if(Z.SR_DE_FISH_PANORAMA_CEILING_360==m||Z.SR_DE_FISH_PANORAMA_CEILING_180==m||Z.SR_DE_FISH_PANORAMA_FLOOR_360==m||Z.SR_DE_FISH_PANORAMA_FLOOR_180==m){var T=this.ctx.getUniformLocation(this.videoShaderProgram,"fAngle");if(T<=0)return G;this.ctx.uniform1f(T,g.fAngle)}var D=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX1");if(D<=0)return G;this.ctx.uniform1f(D,g.fRXLeft);var I=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX2");if(I<=0)return G;this.ctx.uniform1f(I,g.fRXRight);var M=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY1");if(M<=0)return G;this.ctx.uniform1f(M,g.fRYTop);var A=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY2");if(A<=0)return G;this.ctx.uniform1f(A,g.fRYBottom);break;case Z.SR_DE_FISH_SEMISPHERE:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(3.14-this.fRotateX),this.pCamera.SetYaw(-this.fRotateY),this.pCamera.UpdateCamera(this.canvas.width,this.canvas.height);var w=this.pCamera.GetView(),L=this.pCamera.GetProj(),k=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(k<=0)return G;this.ctx.uniformMatrix4fv(k,!1,w);var B=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(B<=0)return G;this.ctx.uniformMatrix4fv(B,!1,L);break;case Z.SR_DE_FISH_CYLINDER_CEILING:case Z.SR_DE_FISH_CYLINDER_FLOOR:case Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(-this.fRotateX),this.pCamera.SetYaw(-this.fRotateY),this.pCamera.UpdateCamera(this.canvas.width,this.canvas.height);var O=this.pCamera.GetView(),H=this.pCamera.GetProj(),N=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(N<=0)return G;this.ctx.uniformMatrix4fv(N,!1,O);var Y=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(Y<=0)return G;this.ctx.uniformMatrix4fv(Y,!1,H);break;default:return V}if(this.canvas.width<=0||this.canvas.height<=0)return J;if(null!=a&&1!=(s=this.SR_SetDisplayRect(a.fx,a.fy,a.width,a.height,2)))return s;if(null!=a?this.ctx.viewport(this.canvas.width*this.fDstUseLeft,this.canvas.height*this.fDstUseTop,this.canvas.width*this.fDstUseRight,this.canvas.height*this.fDstUseBottom):(this.ctx.viewport(0,0,this.canvas.width,this.canvas.height),this.ctx.clearColor(0,0,0,1),this.ctx.clear(this.ctx.COLOR_BUFFER_BIT|this.ctx.DEPTH_BUFFER_BIT)),this.b3DPort&&(this.ctx.enable(this.ctx.DEPTH_TEST),this.ctx.depthFunc(this.ctx.LESS),this.ctx.depthMask(!0),1==this.bCullBack?this.ctx.enable(this.ctx.CULL_FACE):this.ctx.disable(this.ctx.CULL_FACE)),this.enPixelFormat==j)this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,t,r,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,e),1==this.bAntialias&&this.ctx.generateMipmap(this.ctx.TEXTURE_2D);else if(1==this.enPixelFormat){var W=this.pFrameData.subarray(0,t*r);this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t,r,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,W);var z=this.pFrameData.subarray(t*r+t/2*r/2,t*r+t/2*r/2+t/2*r/2);this.ctx.activeTexture(this.ctx.TEXTURE1),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[1]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t/2,r/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,z);var q=this.pFrameData.subarray(t*r,t*r+t/2*r/2);this.ctx.activeTexture(this.ctx.TEXTURE2),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[2]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t/2,r/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,q),1==this.bAntialias&&this.ctx.generateMipmap(this.ctx.TEXTURE_2D),W=null,z=null,q=null}else 3==this.enPixelFormat&&(W=this.pFrameData.subarray(0,t*r),this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t,r,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,W),z=this.pFrameData.subarray(t*r,t*r+t/2*r/2),this.ctx.activeTexture(this.ctx.TEXTURE1),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[1]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t/2,r/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,z),q=this.pFrameData.subarray(t*r+t/2*r/2,t*r+t/2*r/2+t/2*r/2),this.ctx.activeTexture(this.ctx.TEXTURE2),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[2]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t/2,r/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,q),1==this.bAntialias&&this.ctx.generateMipmap(this.ctx.TEXTURE_2D),W=null,z=null,q=null);if(this.onlySupportedWebGL1||this.ctx.clearBufferfi(this.ctx.DEPTH_STENCIL,0,1,0),0==this.b3DPort)this.ctx.drawArrays(this.ctx.TRIANGLE_FAN,0,4);else if(this.enDisplayEffect==Z.SR_DE_FISH_SEMISPHERE){if(this.nSemiSpherePosNum<=0)return U;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nSemiSpherePosNum)}else if(this.enDisplayEffect==Z.SR_DE_FISH_CYLINDER_CEILING||this.enDisplayEffect==Z.SR_DE_FISH_CYLINDER_FLOOR){if(this.nCylinderPosNum<=0)return U;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nCylinderPosNum)}else if(this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL){if(this.nArcSpherePosNum<=0)return U;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nArcSpherePosNum)}if(this.ctx.useProgram(null),null!=this.pFishParamManager){var $=this.pFishParamManager.GetWndPort();$!=xe&&$==this.nFECPort&&this.DrawPTZLines()}return null!=this.pfuncCBIn&&this.pfuncCBIn(this.pUserIn),null!=this.pfuncCBOut&&this.pfuncCBOut(this.pUserOut),1}},{key:"DrawPTZLines",value:function(){if(null==this.pFishParamManager)return U;var e=this.pFishParamManager.GetPTZDisplayMode();if(2==e||1==e)for(var t=0,r={fR:0,fG:0,fB:0,fA:0},i=0;i<ee;++i)if(0!=this.pFishParamManager.IsPortAllocated(i)&&(t=2,1==this.pFishParamManager.GetPTZColor(i,r))){1==this.pFishParamManager.IsPTZSelected(i)&&(t+=1);var a=this.pFishParamManager.GetWndPort();if(i!=a&&2==e)if(Z.SR_DE_FISH_ORIGINAL==this.pFishParamManager.GetDisplayEffect(a)){var n={};if(1!=this.pFishParamManager.GetPTZPoints(i,n,2))continue;if(null!=n.pstPoints&&0!=n.nPointNum&&1!=this.SR_DrawLines(n.pstPoints,n.nPointNum,!0,r,t,!1))continue}else{var s;if((s=this.pFishParamManager.GetPTZFragmentNum(i))<=0)continue;for(var o=0;o<s;o++){var x={};this.pFishParamManager.GetPTZFragmentPoints(i,x,o),null!=x.pstPoints&&0!=x.nPointNum&&this.SR_DrawLines(x.pstPoints,x.nPointNum,!1,r,t,!1)}}else if(i!=a&&1==e){var f={};if(1!=this.pFishParamManager.GetPTZPoints(i,f,1))continue;if(null!=f.pstPoints&&0!=f.nPointNum&&1!=this.SR_DrawLines(f.pstPoints,f.nPointNum,!0,r,t,!1))continue}}return 1}},{key:"DrawFillBlock",value:function(e,t,r){if(null==this.ctx)return U;if(null==e||t<1||r<2)return X;for(var i=0,a=0;a<t;++a){if(null==e[a].pstPoints||e[a].nPointNum<3||!0!==e[a].bLoop||null==e[a].pstColor)return X;i+=e[a].nPointNum}if(i!==r)return X;var n=r-2*t;if(n>this.nMaxFillBlockTriNum&&(this.pFillBlockPosVertices=null,this.pFillBlockClrVertices=null,this.nMaxFillBlockTriNum=n),0==this.glBlockPosBuffer&&(this.glBlockPosBuffer=this.ctx.createBuffer(),0==this.glBlockPosBuffer))return G;if(0==this.glBlockClrBuffer&&(this.glBlockClrBuffer=this.ctx.createBuffer(),0==this.glBlockClrBuffer))return G;if(null==this.pFillBlockPosVertices){var s=this.nMaxFillBlockTriNum;if(this.pFillBlockPosVertices=new Float32Array(3*s*3),null==this.pFillBlockPosVertices)return Y}if(this.pFillBlockPosVertices.fill(0),null==this.pFillBlockClrVertices){var o=this.nMaxFillBlockTriNum;if(this.pFillBlockClrVertices=new Float32Array(4*o*3),null==this.pFillBlockClrVertices)return Y}this.pFillBlockClrVertices.fill(0);for(var x=0,f=0,l=0,h=null,c=null,u={},_={},d={},p=0;p<t;++p){l=e[p].nPointNum,h=e[p].pstPoints,c=e[p].pstColor,u.fX=(h[0].fX-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),u.fX=this.fDstUseLeft+u.fX*(this.fDstUseRight-this.fDstUseLeft),u.fX=2*u.fX-1,u.fY=(h[0].fY-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),u.fY=this.fDstUseTop+u.fY*(this.fDstUseBottom-this.fDstUseTop),u.fY=1-2*u.fY;for(var m=1;m<l-1;m++)_.fX=(h[m].fX-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),_.fX=this.fDstUseLeft+_.fX*(this.fDstUseRight-this.fDstUseLeft),_.fX=2*_.fX-1,_.fY=(h[m].fY-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),_.fY=this.fDstUseTop+_.fY*(this.fDstUseBottom-this.fDstUseTop),_.fY=1-2*_.fY,d.fX=(h[m+1].fX-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),d.fX=this.fDstUseLeft+d.fX*(this.fDstUseRight-this.fDstUseLeft),d.fX=2*d.fX-1,d.fY=(h[m+1].fY-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),d.fY=this.fDstUseTop+d.fY*(this.fDstUseBottom-this.fDstUseTop),d.fY=1-2*d.fY,this.pFillBlockPosVertices[x++]=u.fX,this.pFillBlockPosVertices[x++]=u.fY,this.pFillBlockPosVertices[x++]=0,this.pFillBlockClrVertices[f++]=c.fR,this.pFillBlockClrVertices[f++]=c.fG,this.pFillBlockClrVertices[f++]=c.fB,this.pFillBlockClrVertices[f++]=c.fA,this.pFillBlockPosVertices[x++]=_.fX,this.pFillBlockPosVertices[x++]=_.fY,this.pFillBlockPosVertices[x++]=0,this.pFillBlockClrVertices[f++]=c.fR,this.pFillBlockClrVertices[f++]=c.fG,this.pFillBlockClrVertices[f++]=c.fB,this.pFillBlockClrVertices[f++]=c.fA,this.pFillBlockPosVertices[x++]=d.fX,this.pFillBlockPosVertices[x++]=d.fY,this.pFillBlockPosVertices[x++]=0,this.pFillBlockClrVertices[f++]=c.fR,this.pFillBlockClrVertices[f++]=c.fG,this.pFillBlockClrVertices[f++]=c.fB,this.pFillBlockClrVertices[f++]=c.fA}if(0==this.nBlockShaderProgram&&(this.nBlockShaderProgram=this.CompileProgram(q,$),this.nBlockShaderProgram<=0))return G;this.ctx.enable(this.ctx.BLEND),this.ctx.blendFunc(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glBlockPosBuffer),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,this.pFillBlockPosVertices,this.ctx.STATIC_DRAW),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glBlockClrBuffer),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,this.pFillBlockClrVertices,this.ctx.STATIC_DRAW),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.useProgram(this.nBlockShaderProgram);var P=this.ctx.getUniformLocation(this.nLineShaderProgram,"bCapture");if(P<=0)return G;1==this.bIsCapturing?this.ctx.uniform1i(P,1):this.ctx.uniform1i(P,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glBlockPosBuffer);var y=this.ctx.getAttribLocation(this.nBlockShaderProgram,"position");this.ctx.enableVertexAttribArray(y),this.ctx.vertexAttribPointer(y,3,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glBlockClrBuffer);var g=this.ctx.getAttribLocation(this.nBlockShaderProgram,"color");return this.ctx.enableVertexAttribArray(g),this.ctx.vertexAttribPointer(g,4,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.drawArrays(this.ctx.TRIANGLES,0,3*n),this.ctx.useProgram(null),this.ctx.disable(this.ctx.BLEND),1}},{key:"ComputeLinePoint",value:function(e,t){if(null==e||t<1)return X;if(null==this.pLinePosVertices||null==this.pLineClrVertices)return U;var r=0,i=0;1==this.bIsCapturing?(r=(this.fDstUseRight-this.fDstUseLeft)*this.nCaptureWidth,i=(this.fDstUseBottom-this.fDstUseTop)*this.nCaptureHeight):(r=(this.fDstUseRight-this.fDstUseLeft)*this.canvas.width,i=(this.fDstUseBottom-this.fDstUseTop)*this.canvas.height);for(var a=0,n=0,s=0,o=0,x=0,f=0,l=0,h=0,c=0,u=0,_=0,d=0;d<t;++d){var p=[];if(!((_=e[d].nPointNum)<=0)){for(var m=0;m<_;++m){var P={};P.fX=(e[d].pstPoints[m].fX-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),P.fX=this.fDstUseLeft+P.fX*(this.fDstUseRight-this.fDstUseLeft),P.fX=2*P.fX-1,P.fY=(e[d].pstPoints[m].fY-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),P.fY=this.fDstUseTop+P.fY*(this.fDstUseBottom-this.fDstUseTop),P.fY=1-2*P.fY,p.push(P)}if(this.canvas.width<=0||this.canvas.height<=0)return J;if(f=3.5*e[d].nLineWidth/r,l=3.5*e[d].nLineWidth/i,f<=0||l<=0)return X;var y=e[d].pstColor;if(null==y||null==y)return X;for(var g=0;g<_-1;++g)n=p[g+1].fX-p[g].fX,s=p[g+1].fY-p[g].fY,a=Math.sqrt(n*n+s*s),Math.abs(a-0)<1e-6||(o=-f*s/a/2,x=l*n/a/2,this.pLinePosVertices[c++]=p[g].fX+o,this.pLinePosVertices[c++]=p[g].fY+x,this.pLinePosVertices[c++]=-1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[c++]=p[g+1].fX-o,this.pLinePosVertices[c++]=p[g+1].fY-x,this.pLinePosVertices[c++]=1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[c++]=p[g].fX-o,this.pLinePosVertices[c++]=p[g].fY-x,this.pLinePosVertices[c++]=1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[c++]=p[g].fX+o,this.pLinePosVertices[c++]=p[g].fY+x,this.pLinePosVertices[c++]=-1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[c++]=p[g+1].fX+o,this.pLinePosVertices[c++]=p[g+1].fY+x,this.pLinePosVertices[c++]=-1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[c++]=p[g+1].fX-o,this.pLinePosVertices[c++]=p[g+1].fY-x,this.pLinePosVertices[c++]=1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,h+=2);1==e[d].bLoop&&2<_&&(n=p[_-1].fX-p[0].fX,s=p[_-1].fY-p[0].fY,a=Math.sqrt(n*n+s*s),Math.abs(a-0)>1e-6&&(o=-f*s/a/2,x=l*n/a/2,this.pLinePosVertices[c++]=p[0].fX+o,this.pLinePosVertices[c++]=p[0].fY+x,this.pLinePosVertices[c++]=-1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[c++]=p[_-1].fX-o,this.pLinePosVertices[c++]=p[_-1].fY-x,this.pLinePosVertices[c++]=1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[c++]=p[0].fX-o,this.pLinePosVertices[c++]=p[0].fY-x,this.pLinePosVertices[c++]=1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[c++]=p[0].fX+o,this.pLinePosVertices[c++]=p[0].fY+x,this.pLinePosVertices[c++]=-1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[c++]=p[_-1].fX+o,this.pLinePosVertices[c++]=p[_-1].fY+x,this.pLinePosVertices[c++]=-1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[c++]=p[_-1].fX-o,this.pLinePosVertices[c++]=p[_-1].fY-x,this.pLinePosVertices[c++]=1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,h+=2))}}return 0==h?X:(this.nLineTriangleNum=h,1)}},{key:"SR_DrawLines",value:function(e,t,r,i,a,n){var s=[],o={};return o.pstPoints=e,o.nPointNum=t,o.bLoop=r,o.pstColor=i,o.nLineWidth=a,s.push(o),this.SR_DrawLinesEx(s,1,t,n)}},{key:"SR_DrawLinesEx",value:function(e,t,r,i){if(null==this.ctx)return U;if(null==e||t<1||r<2)return X;if(0==this.nLineShaderProgram){var a=this.CompileProgram(q,$);if(a<=0)return G;this.nLineShaderProgram=a}if(1==i)return this.DrawFillBlock(e,t,r);for(var n=0,s=0;s<t;++s){if(null==e[s].pstPoints||e[s].nPointNum<=1||e[s].nPointNum>=1024||e[s].nLineWidth<=0||null==e[s].pstColor)return X;n+=e[s].nPointNum}if(n!=r)return X;if((n+=t)>this.nMaxPointNum&&(this.nMaxPointNum=n,this.pLinePosVertices=null,this.pLineClrVertices=null),null==this.pLinePosVertices&&(this.pLinePosVertices=new Float32Array(6*this.nMaxPointNum*3),null==this.pLinePosVertices))return Y;if(this.pLinePosVertices.fill(0),null==this.pLineClrVertices&&(this.pLineClrVertices=new Float32Array(6*this.nMaxPointNum*4),null==this.pLineClrVertices))return Y;if(this.pLineClrVertices.fill(0),0==this.glLinePosBuffer&&(this.glLinePosBuffer=this.ctx.createBuffer(),0==this.glLinePosBuffer))return G;if(0==this.glLineClrBuffer&&(this.glLineClrBuffer=this.ctx.createBuffer(),0==this.glLineClrBuffer))return G;var o=this.ComputeLinePoint(e,t);if(1!=o)return o;this.ctx.enable(this.ctx.BLEND),this.ctx.blendFunc(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA);var x=this.nLineShaderProgram;this.ctx.useProgram(x);var f=this.ctx.getUniformLocation(this.nLineShaderProgram,"bCapture");if(f<=0)return G;1==this.bIsCapturing?this.ctx.uniform1i(f,1):this.ctx.uniform1i(f,0);var l=this.glLinePosBuffer,h=this.glLineClrBuffer,c=this.nLineTriangleNum,u=this.pLinePosVertices,_=this.pLineClrVertices;this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,l),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,u,this.ctx.STATIC_DRAW);var d=this.ctx.getAttribLocation(x,"position");this.ctx.enableVertexAttribArray(d),this.ctx.vertexAttribPointer(d,3,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,h),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,_,this.ctx.STATIC_DRAW);var p=this.ctx.getAttribLocation(x,"color");return this.ctx.enableVertexAttribArray(p),this.ctx.vertexAttribPointer(p,4,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),1==this.bIsCapturing?this.ctx.viewport(0,0,this.nCaptureWidth,this.nCaptureHeight):this.ctx.viewport(0,0,this.canvas.width,this.canvas.height),this.ctx.drawArrays(this.ctx.TRIANGLES,0,3*c),this.ctx.useProgram(null),this.ctx.disable(this.ctx.BLEND),1}},{key:"SR_DrawFont",value:function(e,t,r,i,a,n,s,o,x,f,l){if(null==e||null==t||null==r||i<=1||a<=1)return X;if(1==n&&null==s)return X;var h=[],c={};return c.bBackground=n,c.nFontWidth=i,c.nFontHeight=a,c.pstBGColor=s,c.pstFontColor=r,c.pString=e,c.pstStartPos=t,c.fRotateAngle=o,c.pFontFamily=x,c.textAlign=f,c.textBaseline=l,h.push(c),this.SR_DrawFontEx(h,1)}},{key:"SR_DrawFontEx",value:function(e,t){if(null==this.ctx)return U;if(0>t||null==e)return X;var r,i,a=0,n=0;if(1==this.bIsCapturing){if(0==this.nCaptureWidth||0==this.nCaptureHeight)return U;a=Math.round((this.fDstUseRight-this.fDstUseLeft)*this.nCaptureWidth),n=Math.round((this.fDstUseBottom-this.fDstUseTop)*this.nCaptureHeight)}else a=Math.round((this.fDstUseRight-this.fDstUseLeft)*this.canvas.width),n=Math.round((this.fDstUseBottom-this.fDstUseTop)*this.canvas.height);if(a=a+4-a%4,n=n+4-n%4,this.nDrawFontWidth==a&&this.nDrawFontHeight==n||(this.pFontColorBuffer=null,this.nFontColorTexture=0,this.nDrawFontWidth=a,this.nDrawFontHeight=n,null!=this.textCanvas&&(this.textCanvas.remove(),this.textCanvas=null,this.textCanvasCtx=null)),0==this.nFontColorTexture){if(this.nFontColorTexture=this.ctx.createTexture(),0==this.nFontColorTexture)return G;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nFontColorTexture),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE)}if(null==this.textCanvas){if(this.textCanvas=document.createElement("canvas"),null==this.textCanvas)return W;if(this.textCanvasCtx=this.textCanvas.getContext("2d"),null==this.textCanvasCtx)return W;this.textCanvasCtx.canvas.width=this.nDrawFontWidth,this.textCanvasCtx.canvas.height=this.nDrawFontHeight}this.textCanvasCtx.clearRect(0,0,this.nDrawFontWidth,this.nDrawFontHeight);for(var s=0;s<t;++s){var o=e[s].nFontWidth,x=e[s].nFontHeight;1==this.bIsCapturing&&(o=Math.round(.7*this.nCaptureWidth/this.canvas.width*o),x=Math.round(.7*this.nCaptureHeight/this.canvas.height*x));var f=o<x?o:x;this.textCanvasCtx.font=f.toString()+"px "+e[s].pFontFamily,null==e[s].textAlign||null==e[s].textAlign?this.textCanvasCtx.textAlign="left":this.textCanvasCtx.textAlign=e[s].textAlign,null==e[s].textBaseline||null==e[s].textBaseline?this.textCanvasCtx.textBaseline="top":this.textCanvasCtx.textBaseline=e[s].textBaseline;var l=parseInt(255*e[s].pstFontColor.fR),h=parseInt(255*e[s].pstFontColor.fG),c=parseInt(255*e[s].pstFontColor.fB),u=l<16?"0"+l.toString(16):l.toString(16),_=h<16?"0"+h.toString(16):h.toString(16),d=c<16?"0"+c.toString(16):c.toString(16);this.textCanvasCtx.fillStyle="#"+u+_+d,this.textCanvasCtx.globalAlpha=e[s].pstFontColor.fA;var p=e[s].pstStartPos.fX*this.nDrawFontWidth,m=e[s].pstStartPos.fY*this.nDrawFontHeight;this.textCanvasCtx.save(),this.textCanvasCtx.translate(p,m),this.textCanvasCtx.rotate(e[s].fRotateAngle*Math.PI/180),this.textCanvasCtx.fillText(e[s].pString,0,0),this.textCanvasCtx.restore()}if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nFontColorTexture),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,this.textCanvasCtx.canvas),0==this.nFontShaderProgram&&(this.nFontShaderProgram=this.CompileProgram("\n    attribute vec4  position;\n    attribute vec4  texCoord;\n    varying vec4  pp; \n    uniform int bCapture;\n\n    void main()\n    { \n        gl_Position.x  = position.x;\n        gl_Position.y  = position.y;\n        if(bCapture == 1)\n        {\n            gl_Position.y = -position.y;\n        }\n        gl_Position.z  = 0.1;\n        gl_Position.w  = 1.0;\n        pp = texCoord; \n    }\n","\n    varying lowp vec4 pp;\n    uniform sampler2D texture;\n\n    void main(void)\n    {\n        gl_FragColor = texture2D(texture, pp.st);\n    }\n"),this.nFontShaderProgram<=0))return G;1==this.bIsCapturing?(r=this.nCaptureWidth+4-this.nCaptureWidth%4,i=this.nCaptureHeight+4-this.nCaptureHeight%4):(r=this.canvas.width+4-this.canvas.width%4,i=this.canvas.height+4-this.canvas.height%4),this.ctx.viewport(0,0,r,i),this.ctx.enable(this.ctx.BLEND),this.ctx.blendFunc(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA),this.ctx.useProgram(this.nFontShaderProgram);var P=this.ctx.getUniformLocation(this.nFontShaderProgram,"bCapture");if(P<=0)return G;1==this.bIsCapturing?this.ctx.uniform1i(P,1):this.ctx.uniform1i(P,0),this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nFontColorTexture);var y=this.ctx.getUniformLocation(this.nFontShaderProgram,"texture");this.ctx.uniform1i(y,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer);var g=this.ctx.getAttribLocation(this.nFontShaderProgram,"position");this.ctx.enableVertexAttribArray(g),this.ctx.vertexAttribPointer(g,3,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer);var b=this.ctx.getAttribLocation(this.nFontShaderProgram,"texCoord");return this.ctx.enableVertexAttribArray(b),this.ctx.vertexAttribPointer(b,2,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.drawArrays(this.ctx.TRIANGLE_FAN,0,4),this.ctx.bindTexture(this.ctx.TEXTURE_2D,null),this.ctx.useProgram(null),this.ctx.disable(this.ctx.BLEND),1}},{key:"SR_DrawImage",value:function(e,t,r,i,a,n){if(null==this.ctx)return U;if(null==e||t<=0||r<=0||null==i||n<0||n>1)return X;if(this.nDrawImageWidth=t,this.nDrawImageHeight=r,0==this.glImagePosBuffer&&(this.glImagePosBuffer=this.ctx.createBuffer(),0==this.glImagePosBuffer))return G;if(0==this.glImageClrBuffer&&(this.glImageClrBuffer=this.ctx.createBuffer(),0==this.glImageClrBuffer))return G;if(null==this.pImageClrVertices){if(this.pImageClrVertices=new Float32Array(12),null==this.pImageClrVertices)return Y;this.pImageClrVertices[0]=0,this.pImageClrVertices[1]=0,this.pImageClrVertices[2]=0,this.pImageClrVertices[3]=1,this.pImageClrVertices[4]=1,this.pImageClrVertices[5]=0,this.pImageClrVertices[6]=1,this.pImageClrVertices[7]=0,this.pImageClrVertices[8]=0,this.pImageClrVertices[9]=1,this.pImageClrVertices[10]=1,this.pImageClrVertices[11]=1}var s={},o={};if(s.fLeft=(i.fLeft-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),s.fRight=(i.fRight-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),s.fTop=(i.fTop-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),s.fBottom=(i.fBottom-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),o.fLeft=this.fDstUseLeft+s.fLeft*(this.fDstUseRight-this.fDstUseLeft),o.fRight=this.fDstUseLeft+s.fRight*(this.fDstUseRight-this.fDstUseLeft),o.fTop=this.fDstUseTop+s.fTop*(this.fDstUseBottom-this.fDstUseTop),o.fBottom=this.fDstUseTop+s.fBottom*(this.fDstUseBottom-this.fDstUseTop),null==this.pImagePosVertices&&(this.pImagePosVertices=new Float32Array(12),null==this.pImagePosVertices))return Y;switch(this.pImagePosVertices.fill(0),this.pImagePosVertices[0]=2*o.fLeft-1,this.pImagePosVertices[1]=1-2*o.fTop,this.pImagePosVertices[2]=2*o.fLeft-1,this.pImagePosVertices[3]=1-2*o.fBottom,this.pImagePosVertices[4]=2*o.fRight-1,this.pImagePosVertices[5]=1-2*o.fTop,this.pImagePosVertices[6]=2*o.fRight-1,this.pImagePosVertices[7]=1-2*o.fTop,this.pImagePosVertices[8]=2*o.fLeft-1,this.pImagePosVertices[9]=1-2*o.fBottom,this.pImagePosVertices[10]=2*o.fRight-1,this.pImagePosVertices[11]=1-2*o.fBottom,1==this.bIsCapturing?this.ctx.viewport(0,0,this.nCaptureWidth,this.nCaptureHeight):this.ctx.viewport(0,0,this.canvas.width,this.canvas.height),this.ctx.enable(this.ctx.BLEND),this.ctx.blendFunc(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA),a){case 5:if(null==this.nImageColorTexture){if(this.nImageColorTexture=this.ctx.createTexture(),0==this.nImageColorTexture)return G;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE)}if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,this.nDrawImageWidth,this.nDrawImageHeight,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,e),0==this.nImageShaderProgram){var x=this.CompileProgram(K,Q);if(x<=0)return G;this.nImageShaderProgram=x}break;case 4:if(null==this.nImageColorTexture){if(this.nImageColorTexture=this.ctx.createTexture(),0==this.nImageColorTexture)return G;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE)}if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGB,this.nDrawImageWidth,this.nDrawImageHeight,0,this.ctx.RGB,this.ctx.UNSIGNED_SHORT_5_6_5,e),0==this.nImageShaderProgram){var f=this.CompileProgram(K,"\n    precision mediump float; \n    uniform sampler2D texture; \n    varying lowp vec4 pp;\n    uniform float fAlpha;\n    void main(void) \n    { \n        gl_FragColor = texture2D(texture, pp.st); \n        gl_FragColor.a *= fAlpha; \n    } \n");if(f<=0)return G;this.nImageShaderProgram=f}break;case 1:for(var l=0;l<3;l++){if(this.nImageColorTextures[l]=this.ctx.createTexture(),0==this.nImageColorTextures[l])return G;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTextures[l]),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE)}if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTextures[0]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,this.nDrawImageWidth,this.nDrawImageHeight,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,e),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTextures[1]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,this.nDrawImageWidth/2,this.nDrawImageHeight/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,e+this.nDrawImageWidth*this.nDrawImageHeight*5/4),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTextures[2]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,this.nDrawImageWidth/2,this.nDrawImageHeight/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,e+this.nDrawImageWidth*this.nDrawImageHeight),0==this.nImageShaderProgram){var h=this.CompileProgram(K,"\n    precision mediump float;\n    uniform sampler2D Ytexture;\n    uniform sampler2D Utexture;\n    uniform sampler2D Vtexture;\n    uniform float fAlpha;\n    varying lowp vec4 pp;\n\n    void main(void)\n    {\n        float r, g, b, y, u, v; \n\n        y = texture2D(Ytexture, pp.st).r; \n        u = texture2D(Utexture, pp.st).r; \n        v = texture2D(Vtexture, pp.st).r; \n\n        y = 1.1643 * (y - 0.0625); \n        u = u - 0.5; \n        v = v - 0.5; \n\n        r = y + 1.5958 * v; \n        g = y - 0.39173 * u - 0.81290 * v; \n        b = y + 2.017 * u; \n\n        gl_FragColor = vec4(r, g, b, fAlpha); \n    }\n");if(h<=0)return G;this.nImageShaderProgram=h}break;case j:if(null==this.nImageColorTexture){if(this.nImageColorTexture=this.ctx.createTexture(),0==this.nImageColorTexture)return G;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE)}this.ctx.useProgram(this.videoShaderProgram),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer);var c=this.ctx.getAttribLocation(this.videoShaderProgram,"xy");if(c<0)return G;this.ctx.vertexAttribPointer(c,3,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(c),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer);var u=this.ctx.getAttribLocation(this.videoShaderProgram,"uv");if(u<0)return G;if(this.ctx.vertexAttribPointer(u,2,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(u),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.useProgram(null),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,this.nDrawImageWidth,this.nDrawImageHeight,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,e),0==this.nImageShaderProgram){var _=this.CompileProgram(K,Q);if(_<=0)return G;this.nImageShaderProgram=_}break;default:return V}var d=this.nImageShaderProgram;this.ctx.useProgram(d);var p=this.ctx.getUniformLocation(this.nImageShaderProgram,"bCapture");if(p<=0)return G;1==this.bIsCapturing?this.ctx.uniform1i(p,1):this.ctx.uniform1i(p,0),this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture);var m=this.ctx.getUniformLocation(this.nImageShaderProgram,"texture");this.ctx.uniform1i(m,0),m=this.ctx.getUniformLocation(this.nImageShaderProgram,"fAlpha"),this.ctx.uniform1f(m,n),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glImagePosBuffer),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,this.pImagePosVertices,this.ctx.STATIC_DRAW);var P=this.ctx.getAttribLocation(this.nImageShaderProgram,"position");this.ctx.enableVertexAttribArray(P),this.ctx.vertexAttribPointer(P,2,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glImageClrBuffer),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,this.pImageClrVertices,this.ctx.STATIC_DRAW);var y=this.ctx.getAttribLocation(this.nImageShaderProgram,"texCoord");return this.ctx.enableVertexAttribArray(y),this.ctx.vertexAttribPointer(y,2,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.drawArrays(this.ctx.TRIANGLES,0,6),this.ctx.useProgram(null),this.ctx.disable(this.ctx.BLEND),1}},{key:"SR_AddSubPort",value:function(e){var t,r,i=xe;if(null==this.ctx)return i;if(null!=this.pFishParamManager?i=this.pFishParamManager.GetFECPort(e):e==Z.SR_DE_NULL&&(i=0),i==xe)return xe;switch(this.nFECPort=i,e){case Z.SR_DE_NULL:t=z,this.enPixelFormat==j?r="\nprecision mediump float;\nvarying highp vec2 v_uv;\nuniform sampler2D texture;\nuniform float fWndWidth;\nuniform float fWndHeight;\nuniform float fBrightness;\nuniform float fHue;\nuniform float fSaturation;\nuniform float fContrast;\nuniform float fSharpness;\nuniform int nPostProc;\nvec3 rgb2hsv(vec3 c) \n{ \n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0); \n    vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy); \n    vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx); \n    float d = q.x - min(q.w, q.y); \n    float e = 1.0e-10; \n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x); \n} \nvec3 hsv2rgb(vec3 c) \n{ \n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0); \n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www); \n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y); \n} \nvec3 sharpen() \n{ \n    vec3 sharpenColor; \n    float offWidth = 1.0 / fWndWidth; \n    float offHeight = 1.0 / fWndHeight; \n    float tempSharpness = fSharpness * 100.0; \n    vec2 uv     = v_uv; \n    sharpenColor  = (1.0 + 4.0 * tempSharpness) * texture2D(texture, uv).rgb; \n\n    uv            = v_uv + vec2(offWidth, 0); \n    sharpenColor -= tempSharpness * texture2D(texture, uv).rgb; \n\n    uv            = v_uv + vec2(-offWidth, 0); \n    sharpenColor -= tempSharpness * texture2D(texture, uv).rgb; \n\n    uv            = v_uv + vec2(0, offHeight); \n    sharpenColor -= tempSharpness * texture2D(texture, uv).rgb; \n\n    uv            = v_uv + vec2(0, -offHeight); \n    sharpenColor -= tempSharpness * texture2D(texture, uv).rgb; \n\n    return sharpenColor; \n} \nvoid main(void) \n{\n    if(1 == nPostProc)\n    {\n        vec3 fragRGB = sharpen();                    //sharpen 锐度\n        vec3 fragHSV = rgb2hsv(fragRGB); \n        fragHSV.x = fragHSV.x + fHue;                   //hue 色度\n        fragHSV.y = fragHSV.y * (fSaturation + 1.0);    //saturation 饱和度\n        fragRGB = hsv2rgb(fragHSV); \n        if (fBrightness > 0.0)                          //brightness 亮度\n        { \n            fragRGB = fragRGB + (1.0 - fragRGB) * fBrightness; \n        } \n        else \n        { \n            fragRGB = fragRGB + fragRGB * fBrightness; \n        } \n        float tempContrast = fContrast > 0.0 ? fContrast * 10.0 : fContrast; \n        fragRGB = ((fragRGB - 0.5) * max(tempContrast + 1.0, 0.0)) + 0.5;      //contrast 对比度\n        gl_FragColor = vec4(fragRGB, 1.0); \n    }\n    else\n    {\n        gl_FragColor = texture2D(texture, v_uv);\n    }\n}\n":1!=this.enPixelFormat&&3!=this.enPixelFormat||(r="\nprecision mediump float;\nvarying highp vec2 v_uv;\nuniform sampler2D Ytexture;\nuniform sampler2D Utexture;\nuniform sampler2D Vtexture;\nuniform float fWndWidth;\nuniform float fWndHeight;\nuniform float fBrightness;\nuniform float fHue;\nuniform float fSaturation;\nuniform float fContrast;\nuniform float fSharpness;\nuniform int nPostProc;\nvec3 rgb;\nvec3 yuv2rgb(float y, float u, float v)\n{\n    float r,g,b; \n    y = 1.1643 * (y - 0.0625); \n    u = u - 0.5; \n    v = v - 0.5; \n    r = y + 1.5958 * v; \n    g = y - 0.39173 * u - 0.81290 * v; \n    b = y + 2.017 * u; \n    return vec3(r, g, b);\n}\nvec3 rgb2hsv(vec3 c) \n{ \n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0); \n    vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy); \n    vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx); \n\n    float d = q.x - min(q.w, q.y); \n    float e = 1.0e-10; \n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x); \n} \n\nvec3 hsv2rgb(vec3 c) \n{ \n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0); \n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www); \n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y); \n} \n\nvec3 sharpen(vec3 c) \n{ \n    vec3 sharpenColor; \n    float sharpenColorY;\n    float sharpenColorU;\n    float sharpenColorV;\n    float offWidth  = 1.0 / fWndWidth; \n    float offHeight = 1.0 / fWndHeight; \n    float tempSharpness = fSharpness * 100.0; \n\n    sharpenColor = (1.0 + 4.0 * tempSharpness) * c;\n\n    vec2 uv       = v_uv + vec2(offWidth, 0); \n    sharpenColorY = texture2D(Ytexture, uv).r; \n    sharpenColorU = texture2D(Utexture, uv).r; \n    sharpenColorV = texture2D(Vtexture, uv).r; \n    sharpenColor -= tempSharpness *  yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n\n    uv            = v_uv + vec2(-offWidth, 0); \n    sharpenColorY = texture2D(Ytexture, uv).r;\n    sharpenColorU = texture2D(Utexture, uv).r; \n    sharpenColorV = texture2D(Vtexture, uv).r; \n    sharpenColor -= tempSharpness *  yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n\n    uv            = v_uv + vec2(0, offHeight);\n    sharpenColorY = texture2D(Ytexture, uv).r; \n    sharpenColorU = texture2D(Utexture, uv).r; \n    sharpenColorV = texture2D(Vtexture, uv).r; \n    sharpenColor -= tempSharpness * yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n\n    uv            = v_uv + vec2(0, -offHeight); \n    sharpenColorY = texture2D(Ytexture, uv).r; \n    sharpenColorU = texture2D(Utexture, uv).r; \n    sharpenColorV = texture2D(Vtexture, uv).r; \n    sharpenColor -= tempSharpness *  yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n\n    return sharpenColor; \n} \nvoid main(void)\n{\n    float y, u, v;\n    y = texture2D(Ytexture, v_uv).r;\n    u = texture2D(Utexture, v_uv).r;\n    v = texture2D(Vtexture, v_uv).r;\n    rgb = yuv2rgb(y, u, v);\n    if(1 == nPostProc)\n    {\n        vec3 fragRGB = sharpen(rgb);                    //sharpen 锐度\n        vec3 fragHSV = rgb2hsv(fragRGB); \n        fragHSV.x = fragHSV.x + fHue;                   //hue 色度\n        fragHSV.y = fragHSV.y * (fSaturation + 1.0);    //saturation 饱和度\n        fragRGB = hsv2rgb(fragHSV); \n        if (fBrightness > 0.0)                        //brightness 亮度\n        { \n            fragRGB = fragRGB + (1.0 - fragRGB) * fBrightness; \n        } \n        else \n        { \n            fragRGB = fragRGB + fragRGB * fBrightness; \n        } \n\n        float tempContrast = fContrast > 0.0 ? fContrast * 10.0 : fContrast; \n        fragRGB = ((fragRGB - 0.5) * max(tempContrast + 1.0, 0.0)) + 0.5;      //contrast 对比度\n        gl_FragColor = vec4(fragRGB, 1.0); \n    }\n    else\n    {\n        gl_FragColor = vec4(rgb, 1.0);\n    }\n}\n"),this.b3DPort=!1;break;case Z.SR_DE_FISH_ORIGINAL:t=z,r="\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;\nuniform float fRX1;\nuniform float fRX2;\nuniform float fRY1;\nuniform float fRY2;\nuniform int bBlack; \nuniform int bCut;\n\nvoid main()\n{ \n\tfloat r,g,b;\n\tvec4 origin;\n\n\tfloat  w;\n\tfloat  h;\n\tfloat  fCenterX;\n\tfloat  fCenterY;\n\tfloat  fRadius;\n\tw = 1.0;\n\th = (fRX2 - fRX1) / (fRY2 - fRY1);\n\tfCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n\tfCenterY = (fRY1 + fRY2) / 2.0 * h;\n\tfRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n\tfloat  leftCut = 0.0;\n\tfloat  rightCut = 1.0;\n\tfloat  topCut = 0.0;\n\tfloat  bottomCut = 1.0;\n\tif(bCut == 1)\n\t{\n\t\tif(fRX1 > 0.0)\n\t\t{\n\t\t\tleftCut = fRX1;\n\t\t}\n\t\tif(fRX2 < 1.0)\n\t\t{\n\t\t\trightCut = fRX2;\n\t\t}\n\t\tif(fRY1 > 0.0)\n\t\t{\n\t\t\ttopCut = fRY1;\n\t\t}\n\t\tif(fRY2 < 1.0)\n\t\t{\n\t\t\tbottomCut = fRY2;\n\t\t}\n\t}\n\torigin.s = v_uv.s * (rightCut-leftCut) + leftCut;\n\torigin.t = v_uv.t * (bottomCut-topCut) + topCut;\n\n\tr = texture2D(texture, origin.st).r; \n\tg = texture2D(texture, origin.st).g; \n\tb = texture2D(texture, origin.st).b; \n\n\tif(bBlack == 1)\n\t{\n\t\tfloat tmpX, tmpY;\n\t\ttmpX = origin.s * w; \n\t\ttmpY = origin.t * h; \n\t\tfloat d2 = (tmpX-fCenterX)*(tmpX-fCenterX) + (tmpY-fCenterY)*(tmpY-fCenterY);\n\t\tif(d2 > fRadius*fRadius)\n\t\t{\n\t\t\tr = 0.0; \n\t\t\tg = 0.0; \n\t\t\tb = 0.0; \n\t\t}\n\t}\n\n\tgl_FragColor = vec4(r ,g ,b , 1.0);\n}\n",this.b3DPort=!1;break;case Z.SR_DE_FISH_PTZ_CEILING:t=z,r="\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;\nuniform float fHAngleCos;\nuniform float fHAngleSin;\nuniform float fVAngleCos;\nuniform float fVAngleSin;\nuniform float fZoom;\n\nuniform float fRX1; \nuniform float fRX2; \nuniform float fRY1; \nuniform float fRY2; \n\nvoid main()\n{\n    float r,g,b;  \n\n    vec4 origin1;\n    vec4 origin2;\n    vec4 result;\n    float  z1;\n    float  z2;\n    float  dnew;\n\n    float  w;\n    float  h;\n    float  fCenterX;\n    float  fCenterY;\n    float  fRadius;\n    w = 1.0;\n    h = (fRX2 - fRX1) / (fRY2 - fRY1);\n    fCenterX = (fRX1 + fRX2) / 2.0 * w;    \n    fCenterY = (fRY1 + fRY2) / 2.0 * h;\n    fRadius = (fRX2 - fRX1) / 2.0 * w; \n\n    origin1.s = v_uv.s - 0.5;\n    origin1.t = 0.5 - v_uv.t;\n    z1 = fZoom ;\n\n    origin2.s = origin1.s ;\n    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);\n    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;\n\n    dnew = sqrt(origin2.s*origin2.s + origin2.t*origin2.t) ;\n    float d = sqrt(origin2.s*origin2.s + origin2.t*origin2.t + z2*z2);\n    float theta = asin(dnew/d);\n    float tmp = theta / 1.5707963 * 0.5;\n    origin2.s = tmp*origin2.s / dnew ;\n    origin2.t = tmp*origin2.t / dnew ;\n\n    result.s = ((origin2.s*fHAngleCos - origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\n    result.t = (-(origin2.s*fHAngleSin + origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\n\n    r = texture2D(texture, result.st).r; \n    g = texture2D(texture, result.st).g; \n    b = texture2D(texture, result.st).b; \n    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n    {\n        r = 0.0; \n        g = 0.0; \n        b = 0.0; \n    }\n    gl_FragColor = vec4(r ,g ,b , 1.0);\n} \n",this.b3DPort=!1;break;case Z.SR_DE_FISH_PTZ_FLOOR:t=z,r="\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;  \nuniform float fHAngleCos;  \nuniform float fHAngleSin; \nuniform float fVAngleCos;  \nuniform float fVAngleSin;  \nuniform float fZoom;\n\nuniform float fRX1; \nuniform float fRX2; \nuniform float fRY1; \nuniform float fRY2; \n\nvoid main()\n{\n    float r,g,b;\n\n    vec4 origin1;\n    vec4 origin2;\n    vec4 result;\n    float  z1;\n    float  z2;\n    float  dnew;\n\n    float  w;\n    float  h;\n    float  fCenterX;\n    float  fCenterY;\n    float  fRadius;\n    w = 1.0;\n    h = (fRX2 - fRX1) / (fRY2 - fRY1);\n    fCenterX = (fRX1 + fRX2) / 2.0 * w;     ///<Բ��ʵ������\n    fCenterY = (fRY1 + fRY2) / 2.0 * h;\n    fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<�뾶ʵ�ʳ���\n    origin1.s = v_uv.s - 0.5;\n    origin1.t = v_uv.t - 0.5;\n    z1 = fZoom ;\n\n    origin2.s = origin1.s ;\n    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);\n    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;\n\n    dnew = sqrt(origin2.s*origin2.s + origin2.t*origin2.t) ;\n    float d = sqrt(origin2.s*origin2.s + origin2.t*origin2.t + z2*z2);\n    float theta = asin(dnew/d);\n    float tmp = theta / 1.5707963 * 0.5;\n    origin2.s = tmp*origin2.s / dnew ;\n    origin2.t = tmp*origin2.t / dnew ;\n\n    result.s = ((origin2.s*fHAngleCos - origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\n    result.t = ((origin2.s*fHAngleSin + origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\n\n    r = texture2D(texture, result.st).r; \n    g = texture2D(texture, result.st).g; \n    b = texture2D(texture, result.st).b; \n    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n    {\n        r = 0.0;\n        g = 0.0; \n        b = 0.0; \n    }\n    gl_FragColor = vec4(r ,g ,b , 1.0);\n} \n",this.b3DPort=!1;break;case Z.SR_DE_FISH_PTZ_WALL:t=z,r="\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;\nuniform float fHAngleCos;\nuniform float fHAngleSin;  \nuniform float fVAngleCos;  \nuniform float fVAngleSin;  \nuniform float fZoom;\n\nuniform float fRX1; \nuniform float fRX2; \nuniform float fRY1; \nuniform float fRY2; \n\nvoid main()\n{\n    float r,g,b;  \n\n    vec4 origin1;\n    vec4 origin2;\n    vec4 origin3;\n    vec4 result;\n    float  z1;\n    float  z2;\n    float  z3;\n    float  dnew;\n\n    float  w;\n    float  h;\n    float  fCenterX;\n    float  fCenterY;\n    float  fRadius;\n    w = 1.0;\n    h = (fRX2 - fRX1) / (fRY2 - fRY1);\n    fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<Բ��ʵ������\n    fCenterY = (fRY1 + fRY2) / 2.0 * h;\n    fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<�뾶ʵ�ʳ���\n\n    origin1.s = v_uv.s - 0.5;\n    origin1.t = v_uv.t - 0.5;\n    z1 = fZoom ;\n\n    origin2.s = origin1.s ;\n    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);\n    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;\n\n    origin3.s = origin2.s*fHAngleCos + z2*fHAngleSin ;\n    origin3.t = origin2.y;\n    z3 = z2*fHAngleCos - origin2.x*fHAngleSin;\n\n    dnew = sqrt(origin3.s*origin3.s + origin3.t*origin3.t) ;\n    float d = sqrt(origin3.s*origin3.s + origin3.t*origin3.t + z3*z3);\n    float theta = asin(dnew/d);\n    float tmp = theta / 1.5707963 * 0.5;\n    result.s = (tmp*origin3.s / dnew * fRadius * 2.0 + fCenterX)/w;\n    result.t = (tmp*origin3.t / dnew * fRadius * 2.0 + fCenterY)/h;\n\n    r = texture2D(texture, result.st).r; \n    g = texture2D(texture, result.st).g; \n    b = texture2D(texture, result.st).b; \n    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n    {\n        r = 0.0; \n        g = 0.0; \n        b = 0.0; \n    }\n    gl_FragColor = vec4(r ,g ,b , 1.0);\n} \n",this.b3DPort=!1;break;case Z.SR_DE_FISH_PANORAMA_CEILING_360:t=z,r="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1;\n    uniform float fRY2;\n    \n    void main()\n    {\n    \n        float r,g,b; \n    \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n            float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;  ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = v_uv.s;\n        origin.t = (bottomCut - topCut) * v_uv.t + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r;\n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0;\n        }\n        gl_FragColor = vec4(r, g, b, 1.0);\n    }\n",this.b3DPort=!1;break;case Z.SR_DE_FISH_PANORAMA_CEILING_180:t=z,r="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1; \n    uniform float fRX2; \n    uniform float fRY1; \n    uniform float fRY2; \n    \n    void main()\n    {\n        float r,g,b;  \n    \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        vec4 newpp;  ///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\n        if (v_uv.t  <= 0.5)\n        {\n            newpp.s =  v_uv.s / 2.0 + 0.5;\n            newpp.t =  v_uv.t * 2.0;\n        }\n        else\n        {\n            newpp.s =  v_uv.s / 2.0;\n            newpp.t =  (v_uv.t - 0.5) * 2.0;\n        }\n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;     ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n            float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = newpp.s;\n        origin.t = (bottomCut - topCut) * newpp.t + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r;\n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0;\n            g = 0.0;\n            b = 0.0;\n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    }\n",this.b3DPort=!1;break;case Z.SR_DE_FISH_PANORAMA_FLOOR_360:t=z,r="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1;\n    uniform float fRY2;\n    \n    void main()\n    {\n        float r,g,b;  \n    \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n            float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                   fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = 1.0 - v_uv.s;\n        origin.t = (bottomCut - topCut) * (1.0 - v_uv.t) + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r;\n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0; \n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    }\n",this.b3DPort=!1;break;case Z.SR_DE_FISH_PANORAMA_FLOOR_180:t=z,r="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1;\n    uniform float fRY2;\n\n    void main()\n    {\n        float r,g,b;  \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        vec4 newpp;  ///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\n        if (v_uv.t  <= 0.5) \n        {\n            newpp.s =  v_uv.s / 2.0;\n            newpp.t =  v_uv.t * 2.0;\n        }\n        else\n        {\n            newpp.s =  v_uv.s / 2.0 + 0.5;\n            newpp.t =  (v_uv.t - 0.5) * 2.0;\n        }\n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n             float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = 1.0 - newpp.s;\n        origin.t = (bottomCut - topCut) * (1.0 - newpp.t) + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r; \n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0; \n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    } \n",this.b3DPort=!1;break;case Z.SR_DE_FISH_PANORAMA_WALL:t=z,r="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1; \n    uniform float fRY2; \n    \n    void main()\n    {\n        float r,g,b;\n    \n        vec4 origin;\n        vec4 result;\n        float  d;\n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;     ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n        float  defaultTopCut = 0.1;\n        float  defaultBottomCut = 0.9;\n        float  leftCut = 0.0;    ///<当图像中圆不完整时需要切掉无图像部分,即使图像完整,为了效果,也要切掉上下固定的一部分\n        float  rightCut = 1.0;\n        float  topCut = defaultTopCut;\n        float  bottomCut = defaultBottomCut;\n        if(fRX1 < 0.0)\n        {\n            float tmp;\n            tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            leftCut = tmp;\n        }\n        if(fRX2 > 1.0)\n        {\n            float tmp;\n            tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            rightCut = 1.0 - tmp;\n        }\n        if(fRY1 < 0.0)\n        {\n            float tmp;\n            tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            if(tmp > defaultTopCut)\n                topCut = tmp;\n            else\n                topCut = defaultTopCut;\n        }\n        if(fRY2 > 1.0)\n        {\n            float tmp;\n            tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            if(tmp > 1.0 - defaultBottomCut)\n                bottomCut = 1.0 - tmp;\n            else\n                bottomCut = defaultBottomCut;\n        }\n        origin.s = v_uv.s * (rightCut-leftCut) + leftCut;\n        origin.t = v_uv.t * (bottomCut-topCut) + topCut;\n        float tmpx = origin.s * 2.0 * fRadius + fCenterX - fRadius; ///<纹理坐标转化为原图上的实际坐标\n        float tmpy = origin.t * 2.0 * fRadius + fCenterY - fRadius;\n        d = sqrt(fRadius*fRadius - (tmpy-fCenterY)*(tmpy-fCenterY));\n        result.s = ((tmpx-fCenterX) * d / fRadius + fCenterX) / w;\n        result.t = tmpy / h;\n    \n        r = texture2D(texture, result.st).r; \n        g = texture2D(texture, result.st).g; \n        b = texture2D(texture, result.st).b; \n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0; \n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    }\n",this.b3DPort=!1;break;case Z.SR_DE_FISH_SEMISPHERE:case Z.SR_DE_FISH_CYLINDER_CEILING:case Z.SR_DE_FISH_CYLINDER_FLOOR:case Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:e==Z.SR_DE_FISH_SEMISPHERE&&(this.bCullBack=!0),t="\n    attribute vec4 xy;\n    attribute vec2 uv;\n    varying highp vec2 v_uv;\n    uniform int bCapture;\n\n    uniform mat4 matProj;\n    uniform mat4 matView;\n    void main(void) {\n        gl_Position = matProj * matView * xy;\n        v_uv = uv;\n        if(bCapture == 1)\n        {\n          v_uv.y = 1.0 - uv.y;\n        }\n    }\n",r="\n    varying highp vec2 v_uv;\n    uniform sampler2D texture;\n    void main(void) {\n        gl_FragColor = texture2D(texture, v_uv);\n    }\n",this.b3DPort=!0;break;default:return V}var a=this.CompileProgram(t,r);if(a<=0)return G;this.videoShaderProgram=a;var n=null,s=null,o=1;if(0==this.b3DPort)n=new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0]),s=new Float32Array([0,1,0,0,1,0,1,1]);else{var x={},f=!1;if(null==this.pFishParamManager)return U;for(var l=0;l<ee;++l)if(l!=i&&1==this.pFishParamManager.GetRenderParam(l,x)){f=!0;break}var h=0,c=1,u=0,_=1;if(1==f&&(h=x.fRXLeft,c=x.fRXRight,u=x.fRYTop,_=x.fRYBottom),e==Z.SR_DE_FISH_SEMISPHERE)o=this._CreateSemiSphere(h,c,u,_),n=this.pSemiSpherePos,s=this.pSemiSphereTex;else if(e==Z.SR_DE_FISH_CYLINDER_CEILING||e==Z.SR_DE_FISH_CYLINDER_FLOOR)o=this._CreateCylinder(e,h,c,u,_,2,2),n=this.pCylinderPos,s=this.pCylinderTex;else{if(e!=Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL&&e!=Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL)return V;0==f?Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==e?(h=.05,c=.95,u=-.3,_=1.3):Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL==e&&(h=-.16,c=1.16,u=.005,_=.995):Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==e?(x.fRYTop>0||x.fRYBottom<1)&&(h=.05,c=.95,u=-.3,_=1.3):Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL==e&&(x.fRXLeft>0||x.fRXRight<1)&&(h=-.16,c=1.16,u=.005,_=.995),o=this._CreateArcSphere(e,h,c,u,_),n=this.pArcSpherePos,s=this.pArcSphereTex}if(1!=o)return o;var d={};if(1!=(o=this.pFishParamManager.GetFishParam(this.nFECPort,d)))return o;if(d.nFishParamType=1,d.fRXLeft=h,d.fRXRight=c,d.fRYTop=u,d.fRYBottom=_,this.pFishParamManager.SetFishParam(this.nFECPort,d),1!=o)return o}if(null==n||null==s)return V;var p=this.ctx.createBuffer();this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,p),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,n,this.ctx.STATIC_DRAW),this.vertexPosBuffer=p;var m=this.ctx.createBuffer();return this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,m),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,s,this.ctx.STATIC_DRAW),this.texturePosBuffer=m,this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),0==this.b3DPort&&(n=null,s=null),1!=(o=this.InitCamera(e))?o:(this.enDisplayEffect=e,this.nFECPort)}},{key:"SR_DelSubPort",value:function(e){return null==this.ctx?U:(null!=this.pFishParamManager&&this.nFECPort==e&&this.pFishParamManager.FreeFECPort(this.nFECPort),this.enDisplayEffect=Z.SR_DE_NULL,0!=this.videoShaderProgram&&null!=this.ctx&&(this.ctx.deleteProgram(this.videoShaderProgram),this.videoShaderProgram=0),0!=this.vertexPosBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.vertexPosBuffer),this.vertexPosBuffer=0),0!=this.texturePosBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.texturePosBuffer),this.texturePosBuffer=0),this.nMaxPointNum=0,this.pLinePosVertices=null,this.pLineClrVertices=null,0!=this.glLinePosBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.glLinePosBuffer),this.glLinePosBuffer=0),0!=this.glLineTexBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.glLineTexBuffer),this.glLineTexBuffer=0),this.nLineTriangleNum=0,0!=this.nLineShaderProgram&&null!=this.ctx&&(this.ctx.deleteProgram(this.nLineShaderProgram),this.nLineShaderProgram=0),this.pFillBlockPosVertices=null,this.pFillBlockClrVertices=null,this.nMaxFillBlockTriNum=0,0!=this.glBlockPosBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.glBlockPosBuffer),this.glBlockPosBuffer=0),0!=this.glBlockClrBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.glBlockClrBuffer),this.glBlockClrBuffer=0),0!=this.nBlockShaderProgram&&null!=this.ctx&&(this.ctx.deleteProgram(this.nBlockShaderProgram),this.nBlockShaderProgram=0),this.nDrawFontWidth=0,this.nDrawFontHeight=0,0!=this.nFontColorTexture&&null!=this.ctx&&(this.ctx.deleteTexture(this.nFontColorTexture),this.nFontColorTexture=0),this.pFontColorBuffer=0,0!=this.nFontShaderProgram&&null!=this.ctx&&(this.ctx.deleteProgram(this.nFontShaderProgram),this.nFontShaderProgram=0),0!=this.nCaptureRTTex&&(this.ctx.deleteTexture(this.nCaptureRTTex),this.nCaptureRTTex=0),0!=this.nCaptureFBO&&(this.ctx.deleteFramebuffer(this.nCaptureFBO),this.nCaptureFBO=0),0!=this.nCaptureDepthbuffer&&(this.ctx.deleteRenderbuffer(this.nCaptureDepthbuffer),this.nCaptureDepthbuffer=0),this.bCaptureResInit=!1,this.pSemiSpherePos=null,this.pSemiSphereTex=null,this.nSemiSpherePosNum=0,this.nSemiSpherePosSize=0,this.nSemiSphereTexSize=0,this.pCylinderPos=null,this.pCylinderTex=null,this.nCylinderPosNum=0,this.nCylinderPosSize=0,this.nCylinderTexSize=0,this.fCylinderHeight=0,this.fCylinderRadius=0,this.pArcSpherePos=null,this.pArcSphereTex=null,this.nArcSpherePosNum=0,this.nArcSpherePosSize=0,this.nArcSphereTexSize=0,this.b3DPort=!1,this.pCamera=null,this.fRotateX=0,this.fRotateY=0,this.fScale=0,this.pfuncCBIn=null,this.pfuncCBOut=null,this.pUserIn=null,this.pUserOut=null,this.ctx.disable(this.ctx.CULL_FACE),this.ctx.disable(this.ctx.DEPTH_TEST),1)}},{key:"SR_GetFishParam",value:function(e){return null==e?X:null==this.pFishParamManager?U:this.pFishParamManager.GetFishParam(this.nFECPort,e)}},{key:"SR_SetFishParam",value:function(e){return null==e?X:null==this.pFishParamManager?U:this.pFishParamManager.SetFishParam(this.nFECPort,e)}},{key:"SR_SetDisplayRect",value:function(e,t,r,i,a){if(null==this.ctx)return U;var n=e,s=t,o=e+r,x=t+i,f=null,l=null;switch(a){case 1:if(this.frameDisplayWidth>0&&this.frameDisplayHeight>0){if(this.fSrcUseLeft=n/this.frameDisplayWidth,this.fSrcUseLeft<0?this.fSrcUseLeft=0:this.fSrcUseLeft>1&&(this.fSrcUseLeft=1),this.fSrcUseTop=s/this.frameDisplayHeight,this.fSrcUseTop<0?this.fSrcUseTop=0:this.fSrcUseTop>1&&(this.fSrcUseTop=1),this.fSrcUseRight=o/this.frameDisplayWidth,this.fSrcUseRight<0?this.fSrcUseRight=0:this.fSrcUseRight>1&&(this.fSrcUseRight=1),this.fSrcUseBottom=x/this.frameDisplayHeight,this.fSrcUseBottom<0?this.fSrcUseBottom=0:this.fSrcUseBottom>1&&(this.fSrcUseBottom=1),this.fSrcUseLeft>=this.fSrcUseRight||this.fSrcUseTop>=this.fSrcUseBottom)return X;f=new Float32Array([this.fSrcUseLeft,this.fSrcUseBottom,this.fSrcUseLeft,this.fSrcUseTop,this.fSrcUseRight,this.fSrcUseTop,this.fSrcUseRight,this.fSrcUseBottom])}else f=new Float32Array([0,1,0,0,1,0,1,1]);this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer),this.ctx.bufferSubData(this.ctx.ARRAY_BUFFER,0,f),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),f=null;break;case 2:if(this.frameDisplayWidth>0&&this.frameDisplayHeight>0){if(this.fDstUseLeft=n/this.frameDisplayWidth,this.fDstUseLeft<0?this.fDstUseLeft=0:this.fDstUseLeft>1&&(this.fDstUseLeft=1),this.fDstUseTop=s/this.frameDisplayHeight,this.fDstUseTop<0?this.fDstUseTop=0:this.fDstUseTop>1&&(this.fDstUseTop=1),this.fDstUseRight=o/this.frameDisplayWidth,this.fDstUseRight<0?this.fDstUseRight=0:this.fDstUseRight>1&&(this.fDstUseRight=1),this.fDstUseBottom=x/this.frameDisplayHeight,this.fDstUseBottom<0?this.fDstUseBottom=0:this.fDstUseBottom>1&&(this.fDstUseBottom=1),this.fDstUseLeft>=this.fDstUseRight||this.fDstUseTop>=this.fDstUseBottom)return X;(l=new Float32Array(12))[0]=2*this.fDstUseLeft-1,l[1]=1-2*this.fDstUseBottom,l[2]=0,l[3]=2*this.fDstUseLeft-1,l[4]=1-2*this.fDstUseTop,l[5]=0,l[6]=2*this.fDstUseRight-1,l[7]=1-2*this.fDstUseTop,l[8]=0,l[9]=2*this.fDstUseRight-1,l[10]=1-2*this.fDstUseBottom,l[11]=0,this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer),this.ctx.bufferSubData(this.ctx.ARRAY_BUFFER,0,l),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),l=null}break;default:return V}return 1}},{key:"SR_Destroy",value:function(){if(null==this.ctx)return U;this.frameDisplayWidth=0,this.frameDisplayHeight=0,this.pFrameData=null;for(var e=0;e<this.nTextureNum;e++)0!=this.nSurfaceTexture[e]&&null!=this.ctx&&(this.ctx.deleteTexture(this.nSurfaceTexture[e]),this.nSurfaceTexture[e]=0);return this.SR_DelSubPort(this.nFECPort),this.ctx.getExtension("WEBGL_lose_context").loseContext(),this.ctx=null,this.onlySupportedWebGL1=!1,this.bAntialias=!1,this.bRecreateTex=!0,this.pFishParamManager=null,1}},{key:"SR_SetCanvasSize",value:function(e,t){return this.canvas.width=e,this.canvas.height=t,1}},{key:"SR_GetCanvasSize",value:function(){return console.log("canvas width:"+this.canvas.width+",height:"+this.canvas.height),1}},{key:"SR_SetAntialias",value:function(e){return 1==this.onlySupportedWebGL1?V:(this.bAntialias!=e&&(this.bRecreateTex=!0,this.bAntialias=e),1)}},{key:"SR_SetPTZDisplayMode",value:function(e){return null==this.pFishParamManager?U:this.pFishParamManager.SetPTZDisplayMode(e)}},{key:"SR_SetFishParamManager",value:function(e){return null!=this.pFishParamManager?V:(this.pFishParamManager=e,1)}},{key:"_CreateSemiSphere",value:function(e,t,r,i){if(null!=this.pSemiSpherePos||null!=this.pSemiSphereTex)return U;this.pSemiSpherePos=new Float32Array(43200),this.pSemiSphereTex=new Float32Array(28800);for(var a=(t-e)/(i-r),n=(t-e)/2*1,s=6.2831852/60,o=.0392699075,x=0,f=0,l=0,h=0;h<60;++h)for(var c=0;c<40;++c){var u=h*s;0==h&&(x=u);var _=59==h?x:(h+1)*s,d=-c*o,p=-(c+1)*o,m=void 0,P=void 0;this.pSemiSpherePos[f]=-1*Math.cos(d)*Math.cos(u),this.pSemiSpherePos[f+1]=1*Math.sin(d),this.pSemiSpherePos[f+2]=-1*Math.cos(d)*Math.sin(u),P=.5-.5*(1+d/1.5707963)*Math.sin(u),m=.5-.5*(1+d/1.5707963)*Math.cos(u),this.pSemiSphereTex[l++]=(2*m*n+1*e)/1,this.pSemiSphereTex[l++]=(2*P*n+r*a)/a,f+=3,this.pSemiSpherePos[f]=-1*Math.cos(p)*Math.cos(u),this.pSemiSpherePos[f+1]=1*Math.sin(p),this.pSemiSpherePos[f+2]=-1*Math.cos(p)*Math.sin(u),P=.5-.5*(1+p/1.5707963)*Math.sin(u),m=.5-.5*(1+p/1.5707963)*Math.cos(u),this.pSemiSphereTex[l++]=(2*m*n+1*e)/1,this.pSemiSphereTex[l++]=(2*P*n+r*a)/a,f+=3,this.pSemiSpherePos[f]=-1*Math.cos(d)*Math.cos(_),this.pSemiSpherePos[f+1]=1*Math.sin(d),this.pSemiSpherePos[f+2]=-1*Math.cos(d)*Math.sin(_),P=.5-.5*(1+d/1.5707963)*Math.sin(_),m=.5-.5*(1+d/1.5707963)*Math.cos(_),this.pSemiSphereTex[l++]=(2*m*n+1*e)/1,this.pSemiSphereTex[l++]=(2*P*n+r*a)/a,f+=3,this.pSemiSpherePos[f]=-1*Math.cos(d)*Math.cos(_),this.pSemiSpherePos[f+1]=1*Math.sin(d),this.pSemiSpherePos[f+2]=-1*Math.cos(d)*Math.sin(_),P=.5-.5*(1+d/1.5707963)*Math.sin(_),m=.5-.5*(1+d/1.5707963)*Math.cos(_),this.pSemiSphereTex[l++]=(2*m*n+1*e)/1,this.pSemiSphereTex[l++]=(2*P*n+r*a)/a,f+=3,this.pSemiSpherePos[f]=-1*Math.cos(p)*Math.cos(u),this.pSemiSpherePos[f+1]=1*Math.sin(p),this.pSemiSpherePos[f+2]=-1*Math.cos(p)*Math.sin(u),P=.5-.5*(1+p/1.5707963)*Math.sin(u),m=.5-.5*(1+p/1.5707963)*Math.cos(u),this.pSemiSphereTex[l++]=(2*m*n+1*e)/1,this.pSemiSphereTex[l++]=(2*P*n+r*a)/a,f+=3,this.pSemiSpherePos[f]=-1*Math.cos(p)*Math.cos(_),this.pSemiSpherePos[f+1]=1*Math.sin(p),this.pSemiSpherePos[f+2]=-1*Math.cos(p)*Math.sin(_),P=.5-.5*(1+p/1.5707963)*Math.sin(_),m=.5-.5*(1+p/1.5707963)*Math.cos(_),this.pSemiSphereTex[l++]=(2*m*n+1*e)/1,this.pSemiSphereTex[l++]=(2*P*n+r*a)/a,f+=3}return this.nSemiSpherePosNum=f/3,this.nSemiSpherePosSize=3,this.nSemiSphereTexSize=2,1}},{key:"_CreateCylinder",value:function(e,t,r,i,a,n,s){if(null!=this.pCylinderPos||null!=this.pCylinderTex)return U;if(Math.abs(n-0)<ie)this.fCylinderHeight=2;else{if(n<.5||n>6)return X;this.fCylinderHeight=n}if(Math.abs(s-0)<ie)this.fCylinderRadius=e==Z.SR_DE_FISH_CYLINDER_FLOOR||e==Z.SR_DE_FISH_CYLINDER_CEILING?2:1;else{if(s<.5||s>4)return X;this.fCylinderRadius=s}if(this.pCylinderPos=new Float32Array(43200),this.pCylinderTex=new Float32Array(28800),null==this.pCylinderPos||null==this.pCylinderTex)return this.pCylinderPos=null,this.pCylinderTex=null,Y;for(var o=(r-t)/(a-i),x=(r-t)/2*1,f=6.2831852/60,l=this.fCylinderHeight/40,h=0,c=0,u=0;u<60;++u)for(var _=0;_<40;++_){var d=u*f,p=(u+1)*f,m=void 0,P=void 0;this.pCylinderPos[h]=-this.fCylinderRadius*Math.sin(d),this.pCylinderPos[h+1]=this.fCylinderHeight/2-_*l,this.pCylinderPos[h+2]=-this.fCylinderRadius*Math.cos(d),Z.SR_DE_FISH_CYLINDER_FLOOR==e||Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*_)*Math.sin(d),P=.5+(.1+.01*_)*Math.cos(d)):(m=.5-(.5-.01*_)*Math.sin(d),P=.5+(.5-.01*_)*Math.cos(d)),this.pCylinderTex[c++]=(2*m*x+1*t)/1,this.pCylinderTex[c++]=(2*P*x+i*o)/o,h+=3,this.pCylinderPos[h]=-this.fCylinderRadius*Math.sin(d),this.pCylinderPos[h+1]=this.fCylinderHeight/2-(_+1)*l,this.pCylinderPos[h+2]=-this.fCylinderRadius*Math.cos(d),Z.SR_DE_FISH_CYLINDER_FLOOR==e||Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*(_+1))*Math.sin(d),P=.5+(.1+.01*(_+1))*Math.cos(d)):(m=.5-(.5-.01*(_+1))*Math.sin(d),P=.5+(.5-.01*(_+1))*Math.cos(d)),this.pCylinderTex[c++]=(2*m*x+1*t)/1,this.pCylinderTex[c++]=(2*P*x+i*o)/o,h+=3,this.pCylinderPos[h]=-this.fCylinderRadius*Math.sin(p),this.pCylinderPos[h+1]=this.fCylinderHeight/2-_*l,this.pCylinderPos[h+2]=-this.fCylinderRadius*Math.cos(p),Z.SR_DE_FISH_CYLINDER_FLOOR==e||Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*_)*Math.sin(p),P=.5+(.1+.01*_)*Math.cos(p)):(m=.5-(.5-.01*_)*Math.sin(p),P=.5+(.5-.01*_)*Math.cos(p)),this.pCylinderTex[c++]=(2*m*x+1*t)/1,this.pCylinderTex[c++]=(2*P*x+i*o)/o,h+=3,this.pCylinderPos[h]=-this.fCylinderRadius*Math.sin(p),this.pCylinderPos[h+1]=this.fCylinderHeight/2-_*l,this.pCylinderPos[h+2]=-this.fCylinderRadius*Math.cos(p),Z.SR_DE_FISH_CYLINDER_FLOOR==e||Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*_)*Math.sin(p),P=.5+(.1+.01*_)*Math.cos(p)):(m=.5-(.5-.01*_)*Math.sin(p),P=.5+(.5-.01*_)*Math.cos(p)),this.pCylinderTex[c++]=(2*m*x+1*t)/1,this.pCylinderTex[c++]=(2*P*x+i*o)/o,h+=3,this.pCylinderPos[h]=-this.fCylinderRadius*Math.sin(d),this.pCylinderPos[h+1]=this.fCylinderHeight/2-(_+1)*l,this.pCylinderPos[h+2]=-this.fCylinderRadius*Math.cos(d),Z.SR_DE_FISH_CYLINDER_FLOOR==e||Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*(_+1))*Math.sin(d),P=.5+(.1+.01*(_+1))*Math.cos(d)):(m=.5-(.5-.01*(_+1))*Math.sin(d),P=.5+(.5-.01*(_+1))*Math.cos(d)),this.pCylinderTex[c++]=(2*m*x+1*t)/1,this.pCylinderTex[c++]=(2*P*x+i*o)/o,h+=3,this.pCylinderPos[h]=-this.fCylinderRadius*Math.sin(p),this.pCylinderPos[h+1]=this.fCylinderHeight/2-(_+1)*l,this.pCylinderPos[h+2]=-this.fCylinderRadius*Math.cos(p),Z.SR_DE_FISH_CYLINDER_FLOOR==e||Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*(_+1))*Math.sin(p),P=.5+(.1+.01*(_+1))*Math.cos(p)):(m=.5-(.5-.01*(_+1))*Math.sin(p),P=.5+(.5-.01*(_+1))*Math.cos(p)),this.pCylinderTex[c++]=(2*m*x+1*t)/1,this.pCylinderTex[c++]=(2*P*x+i*o)/o,h+=3}return this.nCylinderPosNum=h/3,this.nCylinderPosSize=3,this.nCylinderTexSize=2,1}},{key:"_CreateArcSphere",value:function(e,t,r,i,a){if(null!=this.pArcSpherePos||null!=this.pArcSphereTex)return U;if(e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL){if(i>0||a<1)return SR_ERR_PARAM}else{if(e!=Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL)return V;if(t>0||r<1)return SR_ERR_PARAM}this.fImageWidth=1,this.fImageHeight=(r-t)/(a-i),this.fTexCenterX=(t+r)/2*this.fImageWidth,this.fTexCenterY=(i+a)/2*this.fImageHeight,this.fTexRadius=(r-t)/2*this.fImageWidth;if(null==this.pArcSphereTex&&(this.pArcSphereTex=new Float32Array(14688),null==this.pArcSphereTex))return Y;if(null==this.pArcSpherePos&&(this.pArcSpherePos=new Float32Array(22032),null==this.pArcSpherePos))return Y;var n=new Float32Array(64);if(null==n)return Y;var s=1;if(e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?s=this._ComputeLatitudeHorizontal(n,25,40,1):e==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&(s=this._ComputeLatitudeVertical(n,25,40,1)),1!=s)return this.pArcSpherePos=null,this.pArcSphereTex=null,s;this.fFirstLatitude=n[12],this.fLastLatitude=n[51];var o=0,x=0,f=new Float32Array(5);if(null==f)return this.pArcSpherePos=null,this.pArcSphereTex=null,Y;for(var l=ae/24,h=-12;h<12;++h)for(var c=h<0?-h:h,u=h<0?c:c+1,_=h<0?64-2*(c-1)-2:64-2*c-2,d=0;d<_;++d,++u)e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-l*h,n[u],f):e==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-l*h,n[u],f),this.pArcSpherePos[o]=f[0],this.pArcSpherePos[o+1]=f[1],this.pArcSpherePos[o+2]=f[2],this.pArcSphereTex[x++]=f[3],this.pArcSphereTex[x++]=f[4],o+=3,e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-l*(h+1),n[u],f):e==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-l*(h+1),n[u],f),this.pArcSpherePos[o]=f[0],this.pArcSpherePos[o+1]=f[1],this.pArcSpherePos[o+2]=f[2],this.pArcSphereTex[x++]=f[3],this.pArcSphereTex[x++]=f[4],o+=3,h>=0&&0==d?e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-l*h,n[u-1],f):e==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-l*h,n[u-1],f):e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-l*(h+1),n[u-1],f):e==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-l*(h+1),n[u-1],f),this.pArcSpherePos[o]=f[0],this.pArcSpherePos[o+1]=f[1],this.pArcSpherePos[o+2]=f[2],this.pArcSphereTex[x++]=f[3],this.pArcSphereTex[x++]=f[4],o+=3,e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-l*(h+1),n[u],f):e==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-l*(h+1),n[u],f),this.pArcSpherePos[o]=f[0],this.pArcSpherePos[o+1]=f[1],this.pArcSpherePos[o+2]=f[2],this.pArcSphereTex[x++]=f[3],this.pArcSphereTex[x++]=f[4],o+=3,e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-l*h,n[u],f):e==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-l*h,n[u],f),this.pArcSpherePos[o]=f[0],this.pArcSpherePos[o+1]=f[1],this.pArcSpherePos[o+2]=f[2],this.pArcSphereTex[x++]=f[3],this.pArcSphereTex[x++]=f[4],o+=3,h<0&&d==_-1?e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-l*(h+1),n[u+1],f):e==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-l*(h+1),n[u+1],f):e==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-l*h,n[u+1],f):e==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-l*h,n[u+1],f),this.pArcSpherePos[o]=f[0],this.pArcSpherePos[o+1]=f[1],this.pArcSpherePos[o+2]=f[2],this.pArcSphereTex[x++]=f[3],this.pArcSphereTex[x++]=f[4],o+=3;return this.nArcSpherePosNum=o/3,this.nArcSpherePosSize=3,this.nArcSphereTexSize=2,n=null,f=null,1}},{key:"_ComputeIntersectionOfPlaneAndLongtitude",value:function(e,t,r){if(null==e)return X;var i,a=e[1]*r,n=e[2]*r*Math.sin(t),s=-e[3],o=0;if(e[1]>0){var x=a*a*s*s-(a*a+n*n)*(s*s-n*n);o=(-a*s-Math.sqrt(x))/(a*a+n*n),x=n*n*s*s-(a*a+n*n)*(s*s-a*a)}if(e[1]<0){var f=a*a*s*s-(a*a+n*n)*(s*s-n*n);o=(-a*s+Math.sqrt(f))/(a*a+n*n),f=n*n*s*s-(a*a+n*n)*(s*s-a*a)}return i=-r*o,Math.asin(i/r)}},{key:"_ComputeLatitudeHorizontal",value:function(e,t,r,i){if(null==e)return X;var a=0,n=(this.fTexCenterY,ae/(t-1)),s=ae*this.fTexCenterY/(2*this.fTexRadius),o=Math.asin(this.fTexCenterY/this.fTexRadius),x=Math.atan(Math.cos(s)/(Math.sin(s)-Math.sin(o))),f=new Float32Array(4);f[0]=0,f[1]=Math.sin(x),f[2]=Math.cos(x),f[3]=-i*Math.sin(x)*Math.sin(o),e[a++]=s;for(var l=1;l<=(t-3)/2;++l){var h=this._ComputeIntersectionOfPlaneAndLongtitude(f,1.5707963-n*l,i);e[a++]=h}for(var c=-Math.asin((this.fImageHeight-this.fTexCenterY)/this.fTexRadius),u=o,_=(u-c)/(r-1),d=0;d<r;++d)e[a++]=u-d*_;var p=c,m=ae*(this.fTexCenterY-this.fImageHeight)/(2*this.fTexRadius);x=Math.atan(Math.cos(m)/(Math.sin(p)-Math.sin(m)));var P=new Float32Array(4);P[0]=0,P[1]=-Math.sin(x),P[2]=Math.cos(x),P[3]=i*Math.sin(x)*Math.sin(p);for(var y=1;y<=(t-3)/2;++y){var g=this._ComputeIntersectionOfPlaneAndLongtitude(P,n*y,i);e[a++]=g}return e[a++]=m,f=null,P=null,1}},{key:"_ComputeVertexAndTexturePosHorizontal",value:function(e,t,r,i){if(null==i)return X;i[2]=-e*Math.cos(r)*Math.sin(t),i[0]=e*Math.cos(r)*Math.cos(t),i[1]=e*Math.sin(r);var a,n=-Math.asin(-i[2]/e)/ae;a=r>=0?Math.acos(i[0]/Math.sqrt(i[0]*i[0]+i[1]*i[1])):6.2831852-Math.acos(i[0]/Math.sqrt(i[0]*i[0]+i[1]*i[1]));var s=this.fTexCenterX-this.fTexRadius,o=this.fTexRadius-this.fTexCenterY;return i[3]=(Math.cos(a)*this.fTexRadius*(1+2*n)+this.fTexRadius+s)/this.fImageWidth,i[4]=(Math.sin(a)*this.fTexRadius*(-1-2*n)+this.fTexRadius-o)/this.fImageHeight,1}},{key:"_ComputeLatitudeVertical",value:function(e,t,r,i){if(null==e)return SR_ERR_PARAM;var a=0,n=ae/(t-1),s=ae*this.fTexCenterX/(2*this.fTexRadius),o=Math.asin(this.fTexCenterX/this.fTexRadius),x=Math.atan(Math.cos(s)/(Math.sin(s)-Math.sin(o))),f=new Float32Array(4);f[0]=0,f[1]=Math.sin(x),f[2]=Math.cos(x),f[3]=-i*Math.sin(x)*Math.sin(o),e[a++]=s;for(var l=1;l<=(t-3)/2;++l){var h=this._ComputeIntersectionOfPlaneAndLongtitude(f,1.5707963-n*l,i);e[a++]=h}for(var c=-Math.asin((this.fImageWidth-this.fTexCenterX)/this.fTexRadius),u=o,_=(u-c)/(r-1),d=0;d<r;++d)e[a++]=u-d*_;var p=c,m=ae*(this.fTexCenterX-this.fImageWidth)/(2*this.fTexRadius);x=Math.atan(Math.cos(m)/(Math.sin(p)-Math.sin(m)));var P=new Float32Array(4);P[0]=0,P[1]=-Math.sin(x),P[2]=Math.cos(x),P[3]=i*Math.sin(x)*Math.sin(p);for(var y=1;y<=(t-3)/2;++y){var g=this._ComputeIntersectionOfPlaneAndLongtitude(P,n*y,i);e[a++]=g}return e[a++]=m,f=null,P=null,1}},{key:"_ComputeVertexAndTexturePosVertical",value:function(e,t,r,i){if(null==i)return SR_ERR_PARAM;i[2]=-e*Math.cos(r)*Math.sin(t),i[1]=e*Math.cos(r)*Math.cos(t),i[0]=-e*Math.sin(r);var a,n=-Math.asin(-i[2]/e)/ae;a=t<=1.5707963?Math.acos(i[0]/Math.sqrt(i[0]*i[0]+i[1]*i[1])):6.2831852-Math.acos(i[0]/Math.sqrt(i[0]*i[0]+i[1]*i[1]));var s=this.fTexCenterX-this.fTexRadius,o=this.fTexRadius-this.fTexCenterY;return i[3]=(Math.cos(a)*this.fTexRadius*(1+2*n)+this.fTexRadius+s)/this.fImageWidth,i[4]=(Math.sin(a)*this.fTexRadius*(-1-2*n)+this.fTexRadius-o)/this.fImageHeight,1}},{key:"InitCamera",value:function(e){if(null!=this.pCamera)return SR_ERR_CALL_ORDER;switch(e){case Z.SR_DE_NULL:case Z.SR_DE_FISH_ORIGINAL:case Z.SR_DE_FISH_PTZ_CEILING:case Z.SR_DE_FISH_PTZ_FLOOR:case Z.SR_DE_FISH_PTZ_WALL:case Z.SR_DE_FISH_PANORAMA_CEILING_360:case Z.SR_DE_FISH_PANORAMA_CEILING_180:case Z.SR_DE_FISH_PANORAMA_FLOOR_360:case Z.SR_DE_FISH_PANORAMA_FLOOR_180:case Z.SR_DE_FISH_PANORAMA_WALL:return 1;case Z.SR_DE_FISH_SEMISPHERE:if(this.pCamera=new Pe,null==this.pCamera)return Y;this.pCamera.SetFov(oe),this.pCamera.SetNear(ne),this.pCamera.SetFar(se),this.fRotateX=1.57,this.pCamera.SetPitch(3.14-this.fRotateX),this.fScale=3,this.pCamera.SetScale(this.fScale);break;case Z.SR_DE_FISH_CYLINDER_CEILING:case Z.SR_DE_FISH_CYLINDER_FLOOR:if(this.pCamera=new Pe,null==this.pCamera)return Y;this.pCamera.SetFov(oe),this.pCamera.SetNear(ne),this.pCamera.SetFar(se),this.fRotateX=.785,this.pCamera.SetPitch(-this.fRotateX),this.fScale=6,this.pCamera.SetScale(this.fScale);break;case Z.SR_DE_FISH_CYLINDER_SPLIT_CEILING:case Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR:if(this.pCamera=new Pe,null==this.pCamera)return Y;this.pCamera.SetOrtho(!0),this.pCamera.SetNear(ne),this.pCamera.SetFar(se),this.fScale=3,this.pCamera.SetScale(this.fScale);break;case Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:if(this.pCamera=new Pe,null==this.pCamera)return Y;this.pCamera.SetFov(oe),this.pCamera.SetNear(ne),this.pCamera.SetFar(se),this.fScale=2,this.pCamera.SetScale(this.fScale),Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==e?(this.fRotateLimitX=fe,this.fRotateLimitY=le):(this.fRotateLimitX=he,this.fRotateLimitY=ce);break;default:return V}return 1}},{key:"SR_SetViewParam",value:function(e,t){if(!this.b3DPort)return V;switch(e){case 1:if((this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL)&&(t>this.fRotateLimitX||t<-this.fRotateLimitX))return X;this.fRotateX=t;break;case 2:if((this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL)&&(t>this.fRotateLimitY||t<-this.fRotateLimitY))return X;this.fRotateY=t;break;case 3:if(this.enDisplayEffect==Z.SR_DE_FISH_SEMISPHERE){if(t<-.8||t>900)return X}else if(this.enDisplayEffect==Z.SR_DE_FISH_CYLINDER_FLOOR||this.enDisplayEffect==Z.SR_DE_FISH_CYLINDER_CEILING){if(t<0||t>900)return X}else if(this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL){if(t<-.3||t>5)return X;this._ComputeRotateLimits()}this.fScale=t;break;default:return V}return 1}},{key:"SR_GetViewParam",value:function(e,t){if(!this.b3DPort)return U;var r=0;switch(e){case 1:r=this.fRotateX;break;case 2:r=this.fRotateY;break;case 3:r=this.fScale;break;default:return V}return t.fValue=r,1}},{key:"SR_SetCallBack",value:function(e,t,r){switch(r){case 0:this.pfuncCBIn=e,this.pUserIn=t;break;case 1:this.pfuncCBOut=e,this.pUserOut=t;break;default:return V}return 1}},{key:"SR_SetRenderState",value:function(e,t){switch(e){case 1:if(this.b3DPort)return V;break;case 2:if(!this.b3DPort)return V;Math.abs(t-0)<ie?this.bCullBack=!1:this.bCullBack=!0;break;default:return V}return 1}},{key:"SR_SetPTZColor",value:function(e,t){return null==this.pFishParamManager?U:this.pFishParamManager.SetPTZColor(e,t)}},{key:"SR_GetPTZColor",value:function(e,t){return null==this.pFishParamManager?U:this.pFishParamManager.GetPTZColor(e,t)}},{key:"SR_SetPTZPort",value:function(e){return null==this.pFishParamManager?U:this.pFishParamManager.SetPTZPort(e)}},{key:"SR_GetPTZPort",value:function(e,t,r){return null==this.pFishParamManager?U:null==r?X:this.pFishParamManager.GetPTZPort(e,t,r)}},{key:"SR_GetCaptureSize",value:function(e){if(null==e)return X;if(null==this.ctx)return U;if(null==e.nWidth||null==e.nWidth||null==e.nHeight||null==e.nHeight)return X;var t=0,r=0;if(0==e.nWidth&&0==e.nHeight)switch(this.enDisplayEffect){case Z.SR_DE_FISH_PTZ_WALL:case Z.SR_DE_FISH_PTZ_CEILING:case Z.SR_DE_FISH_PTZ_FLOOR:t=Math.round(5*this.frameDisplayHeight/8),r=Math.round(3*t/4);break;case Z.SR_DE_NULL:t=Math.round((this.fSrcUseRight-this.fSrcUseLeft)*this.frameDisplayWidth),r=Math.round((this.fSrcUseBottom-this.fSrcUseTop)*this.frameDisplayHeight);break;case Z.SR_DE_FISH_ORIGINAL:case Z.SR_DE_FISH_SEMISPHERE:case Z.SR_DE_FISH_CYLINDER_CEILING:case Z.SR_DE_FISH_CYLINDER_FLOOR:case Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:t=Math.round(this.frameDisplayWidth),r=Math.round(this.frameDisplayHeight);break;case Z.SR_DE_FISH_PANORAMA_FLOOR_360:case Z.SR_DE_FISH_PANORAMA_CEILING_360:this.frameDisplayHeight>=2048?(t=6144,r=864):this.frameDisplayHeight>=1536&&2048>this.frameDisplayHeight?(t=4096,r=576):(t=Math.round(3.14*this.frameDisplayHeight/1.6),r=Math.round(9*this.frameDisplayWidth/16),t=Math.round(2*t),r=Math.round(r/2));break;case Z.SR_DE_FISH_PANORAMA_FLOOR_180:case Z.SR_DE_FISH_PANORAMA_CEILING_180:this.frameDisplayHeight>=3072?(t=4096,r=2304):this.frameDisplayHeight>=2048&&3072>this.frameDisplayHeight?(t=3072,r=1728):this.frameDisplayHeight>=1536&&2048>this.frameDisplayHeight?(t=2048,r=1152):(t=Math.round(3.14*this.frameDisplayHeight/1.6),r=Math.round(9*t/16));break;case Z.SR_DE_FISH_PANORAMA_WALL:t=Math.round(this.frameDisplayHeight),r=Math.round(9*t/16);break;default:return X}else t=Math.round(e.nWidth),r=Math.round(e.nHeight);return t<16||r<16?X:(this.nCaptureWidth=4*Math.round(t/4),this.nCaptureHeight=Math.round(r),e.nWidth=this.nCaptureWidth,e.nHeight=this.nCaptureHeight,e.nBufferLen=this.nCaptureWidth*this.nCaptureHeight*4,1)}},{key:"SR_CaptureScreen",value:function(e){var t=1;if(1!=(t=this._BeginCapture()))return t;if(0==this.videoShaderProgram||0==this.vertexPosBuffer||0==this.texturePosBuffer)return U;this.ctx.useProgram(this.videoShaderProgram),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer);var r=this.ctx.getAttribLocation(this.videoShaderProgram,"xy");if(r<0)return G;this.ctx.vertexAttribPointer(r,3,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(r),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer);var i=this.ctx.getAttribLocation(this.videoShaderProgram,"uv");if(i<0)return G;this.ctx.vertexAttribPointer(i,2,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(i),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null);var a=this.enDisplayEffect,n=this.ctx.getUniformLocation(this.videoShaderProgram,"bCapture");if(n<=0)return G;switch(this.ctx.uniform1i(n,1),a){case Z.SR_DE_NULL:break;case Z.SR_DE_FISH_ORIGINAL:case Z.SR_DE_FISH_PTZ_CEILING:case Z.SR_DE_FISH_PTZ_FLOOR:case Z.SR_DE_FISH_PTZ_WALL:case Z.SR_DE_FISH_PANORAMA_CEILING_360:case Z.SR_DE_FISH_PANORAMA_CEILING_180:case Z.SR_DE_FISH_PANORAMA_FLOOR_360:case Z.SR_DE_FISH_PANORAMA_FLOOR_180:case Z.SR_DE_FISH_PANORAMA_WALL:if(null==this.pFishParamManager)return U;var s={};if(1!=(t=this.pFishParamManager.GetRenderParam(this.nFECPort,s)))return t;if(Z.SR_DE_FISH_ORIGINAL==a){var o=this.ctx.getUniformLocation(this.videoShaderProgram,"bBlack");if(o<=0)return G;this.ctx.uniform1i(o,s.bBlack);var x=this.ctx.getUniformLocation(this.videoShaderProgram,"bCut");if(x<=0)return G;this.ctx.uniform1i(x,s.bCut)}if(Z.SR_DE_FISH_PTZ_CEILING==a||Z.SR_DE_FISH_PTZ_FLOOR==a||Z.SR_DE_FISH_PTZ_WALL==a){var f=this.ctx.getUniformLocation(this.videoShaderProgram,"fHAngleCos");if(f<=0)return G;this.ctx.uniform1f(f,s.fCosH);var l=this.ctx.getUniformLocation(this.videoShaderProgram,"fHAngleSin");if(l<=0)return G;this.ctx.uniform1f(l,s.fSinH);var h=this.ctx.getUniformLocation(this.videoShaderProgram,"fVAngleCos");if(h<=0)return G;this.ctx.uniform1f(h,s.fCosV);var c=this.ctx.getUniformLocation(this.videoShaderProgram,"fVAngleSin");if(c<=0)return G;this.ctx.uniform1f(c,s.fSinV);var u=this.ctx.getUniformLocation(this.videoShaderProgram,"fZoom");if(u<=0)return G;this.ctx.uniform1f(u,s.fZoom)}if(Z.SR_DE_FISH_PANORAMA_CEILING_360==a||Z.SR_DE_FISH_PANORAMA_CEILING_180==a||Z.SR_DE_FISH_PANORAMA_FLOOR_360==a||Z.SR_DE_FISH_PANORAMA_FLOOR_180==a){var _=this.ctx.getUniformLocation(this.videoShaderProgram,"fAngle");if(_<=0)return G;this.ctx.uniform1f(_,s.fAngle)}var d=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX1");if(d<=0)return G;this.ctx.uniform1f(d,s.fRXLeft);var p=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX2");if(p<=0)return G;this.ctx.uniform1f(p,s.fRXRight);var m=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY1");if(m<=0)return G;this.ctx.uniform1f(m,s.fRYTop);var P=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY2");if(P<=0)return G;this.ctx.uniform1f(P,s.fRYBottom);break;case Z.SR_DE_FISH_SEMISPHERE:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(3.14-this.fRotateX),this.pCamera.SetYaw(-this.fRotateY),this.pCamera.UpdateCamera(this.canvas.width,this.canvas.height);var y=this.pCamera.GetView(),g=this.pCamera.GetProj(),b=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(b<=0)return G;this.ctx.uniformMatrix4fv(b,!1,y);var S=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(S<=0)return G;this.ctx.uniformMatrix4fv(S,!1,g);break;case Z.SR_DE_FISH_CYLINDER_CEILING:case Z.SR_DE_FISH_CYLINDER_FLOOR:case Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(-this.fRotateX),this.pCamera.SetYaw(-this.fRotateY),this.pCamera.UpdateCamera(this.canvas.width,this.canvas.height);var v=this.pCamera.GetView(),R=this.pCamera.GetProj(),C=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(C<=0)return G;this.ctx.uniformMatrix4fv(C,!1,v);var E=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(E<=0)return G;this.ctx.uniformMatrix4fv(E,!1,R);break;default:return V}if(this.nCaptureWidth<=0||this.nCaptureHeight<=0)return J;if(this.ctx.viewport(0,0,this.nCaptureWidth,this.nCaptureHeight),this.ctx.clearColor(0,0,0,1),this.ctx.clear(this.ctx.COLOR_BUFFER_BIT|this.ctx.DEPTH_BUFFER_BIT),this.b3DPort&&(this.ctx.enable(this.ctx.DEPTH_TEST),this.ctx.depthFunc(this.ctx.LESS),this.ctx.depthMask(!0),1==this.bCullBack?this.ctx.enable(this.ctx.CULL_FACE):this.ctx.disable(this.ctx.CULL_FACE)),this.enPixelFormat==j?this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]):(1==this.enPixelFormat||3==this.enPixelFormat)&&(this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]),this.ctx.activeTexture(this.ctx.TEXTURE1),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[1]),this.ctx.activeTexture(this.ctx.TEXTURE2),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[2])),this.onlySupportedWebGL1||this.ctx.clearBufferfi(this.ctx.DEPTH_STENCIL,0,1,0),0==this.b3DPort)this.ctx.drawArrays(this.ctx.TRIANGLE_FAN,0,4);else if(this.enDisplayEffect==Z.SR_DE_FISH_SEMISPHERE){if(this.nSemiSpherePosNum<=0)return U;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nSemiSpherePosNum)}else if(this.enDisplayEffect==Z.SR_DE_FISH_CYLINDER_CEILING||this.enDisplayEffect==Z.SR_DE_FISH_CYLINDER_FLOOR){if(this.nCylinderPosNum<=0)return U;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nCylinderPosNum)}else if(this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL){if(this.nArcSpherePosNum<=0)return U;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nArcSpherePosNum)}return this.ctx.useProgram(null),null!=this.pfuncCBIn&&this.pfuncCBIn(this.pUserIn),null!=this.pfuncCBOut&&this.pfuncCBOut(this.pUserOut),1!=(t=this._EndCapture(e))?t:1}},{key:"SR_SetImagePostProcess",value:function(e,t){if(null==this.ctx)return U;if(5==e||2==e){if(0-t>ie||t-1>ie)return X}else if((1==e||3==e||4==e)&&(-1-t>ie||t-1>ie))return X;switch(e){case 1:this.fBrightness=t;break;case 2:this.fHue=t;break;case 3:this.fSaturation=t;break;case 4:this.fContrast=t;break;case 5:this.fSharpness=t;break;default:return V}return Math.abs(this.fBrightness-0)<ie&&Math.abs(this.fHue-0)<ie&&Math.abs(this.fSaturation-0)<ie&&Math.abs(this.fContrast-0)<ie&&Math.abs(this.fSharpness-0)<ie?this.nPostProc=0:this.nPostProc=1,1}},{key:"_BeginCapture",value:function(){var e=1;return 0==this.bCaptureResInit&&1!=(e=this._InitRenderTarget(this.nCaptureWidth,this.nCaptureHeight,!1,!0))?e:1!=(e=this._Resize(this.nCaptureWidth,this.nCaptureHeight,!1,!0))?e:(this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,this.nCaptureFBO),this.bIsCapturing=!0,1)}},{key:"_InitRenderTarget",value:function(e,t,r,i){if(0!=this.nCaptureRTTex||0!=this.nCaptureFBO)return U;if(e<=0||t<=0)return X;if(this.nCaptureRTTex=this.ctx.createTexture(),this.nCaptureRTTex<=0)return G;if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nCaptureRTTex),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,e,t,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,null),0==this.nCaptureFBO&&(this.nCaptureFBO=this.ctx.createFramebuffer(),this.nCaptureFBO<=0))return G;if(this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,this.nCaptureFBO),this.ctx.framebufferTexture2D(this.ctx.FRAMEBUFFER,this.ctx.COLOR_ATTACHMENT0,this.ctx.TEXTURE_2D,this.nCaptureRTTex,0),1==i&&0==this.nCaptureDepthbuffer){if(this.nCaptureDepthbuffer=this.ctx.createRenderbuffer(),this.nCaptureDepthbuffer<=0)return G;this.ctx.bindRenderbuffer(this.ctx.RENDERBUFFER,this.nCaptureDepthbuffer),this.ctx.renderbufferStorage(this.ctx.RENDERBUFFER,this.ctx.DEPTH_COMPONENT16,e,t),this.ctx.framebufferRenderbuffer(this.ctx.FRAMEBUFFER,this.ctx.DEPTH_ATTACHMENT,this.ctx.RENDERBUFFER,this.nCaptureDepthbuffer)}return this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),this.nCaptureFBOWidth=e,this.nCaptureFBOHeight=t,this.bCaptureResInit=!0,1}},{key:"_Resize",value:function(e,t,r,i){if(this.nCaptureFBOWidth!=e||this.nCaptureFBOHeight!=t){if(this.nCaptureFBOWidth=e,this.nCaptureFBOHeight=t,0!=this.nCaptureRTTex&&(this.ctx.deleteTexture(this.nCaptureRTTex),this.nCaptureRTTex=0),0!=this.nCaptureDepthbuffer&&(this.ctx.deleteRenderbuffer(this.nCaptureDepthbuffer),this.nCaptureDepthbuffer=0),0==this.nCaptureRTTex&&(this.nCaptureRTTex=this.ctx.createTexture(),this.nCaptureRTTex<=0))return G;if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nCaptureRTTex),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,this.nCaptureFBOWidth,this.nCaptureFBOHeight,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,null),this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,this.nCaptureFBO),this.ctx.framebufferTexture2D(this.ctx.FRAMEBUFFER,this.ctx.COLOR_ATTACHMENT0,this.ctx.TEXTURE_2D,this.nCaptureRTTex,0),1==i&&0==this.nCaptureDepthbuffer){if(this.nCaptureDepthbuffer=this.ctx.createRenderbuffer(),this.nCaptureDepthbuffer<=0)return G;this.ctx.bindRenderbuffer(this.ctx.RENDERBUFFER,this.nCaptureDepthbuffer),this.ctx.renderbufferStorage(this.ctx.RENDERBUFFER,this.ctx.DEPTH_COMPONENT16,e,t),this.ctx.framebufferRenderbuffer(this.ctx.FRAMEBUFFER,this.ctx.DEPTH_ATTACHMENT,this.ctx.RENDERBUFFER,this.nCaptureDepthbuffer)}this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null)}return 1}},{key:"_EndCapture",value:function(e){return null==this.ctx?U:null==e.pBuffer||null==e.pBuffer?X:(this.ctx.readPixels(0,0,this.nCaptureWidth,this.nCaptureHeight,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,e.pBuffer),this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),this.bIsCapturing=!1,1)}},{key:"_ResizeFrameData",value:function(e,t,r,i){if(0==t%8&&null==i)return this.frameDisplayWidth=Math.round(t),this.frameDisplayHeight=Math.round(r),this.pFrameData=e,1;if(null!=i&&0==i.nCropBottom&&0==i.nCropLeft&&0==i.nCropRight&&0==i.nCropTop&&0==t%8)return this.frameDisplayWidth=Math.round(t),this.frameDisplayHeight=Math.round(r),this.pFrameData=e,1;if((null==this.pFrameData||this.frameDisplayWidth!=t/8*8||this.frameDisplayHeight!=r)&&(this.frameDisplayWidth=8*Math.round(t/8),this.frameDisplayHeight=Math.round(r),this.pFrameData=null,this.pFrameData=new Uint8Array(this.frameDisplayWidth*this.frameDisplayHeight*3/2),null==this.pFrameData))return Y;var a=0,n=0,s=Math.round(i.nCodeWidth),o=Math.round(i.nCodeHeight),x=0;if(1==this.enPixelFormat||3==this.enPixelFormat){var f,l,h;null!=i?(a=Math.round(i.nCropLeft),n=Math.round(i.nCropTop),f=e.subarray(a*s+n,s*o),l=e.subarray(s*o+n*s/4+a/2,s*o*5/4),h=e.subarray(s*o*5/4+n*s/4+a/2,s*o*3/2),x=s):(f=e.subarray(0,t*r),l=e.subarray(t*r,t*r*5/4),h=e.subarray(t*r*5/4,t*r*3/2),x=this.frameDisplayWidth);for(var c=null,u=0;u<this.frameDisplayHeight;++u){var _=Math.round(u*x),d=Math.round(u*x+this.frameDisplayWidth);c=f.slice(_,d);var p=Math.round(u*this.frameDisplayWidth);this.pFrameData.set(c,p)}for(var m=0;m<this.frameDisplayHeight/2;++m){var P=Math.round(m*x/2),y=Math.round(m*x/2+this.frameDisplayWidth/2);c=l.slice(P,y);var g=Math.round(this.frameDisplayWidth*this.frameDisplayHeight+m*this.frameDisplayWidth/2);this.pFrameData.set(c,g)}for(var b=0;b<this.frameDisplayHeight/2;++b){var S=Math.round(b*x/2),v=Math.round(b*x/2+this.frameDisplayWidth/2);c=h.slice(S,v);var R=Math.round(this.frameDisplayWidth*this.frameDisplayHeight*5/4+b*this.frameDisplayWidth/2);this.pFrameData.set(c,R)}f=null,l=null,h=null,c=null}else if(2==this.enPixelFormat){var C,E,F;null!=i?(a=Math.round(i.nCropLeft),n=Math.round(i.nCropTop),C=e.subarray(n*s+a,s*o),E=e.subarray(s*o+n*s/4+a/2,s*o*3/2),x=Math.round(i.nCodeWidth)):(C=e.subarray(0,s*o),E=e.subarray(s*o,s*o*3/2),x=this.frameDisplayWidth);for(var T=0;T<this.frameDisplayHeight;++T){var D=Math.round(T*x),I=Math.round(T*x+this.frameDisplayWidth);F=C.slice(D,I);var M=Math.round(T*this.frameDisplayWidth);this.pFrameData.set(F,M)}for(var A=0;A<this.frameDisplayHeight/2;++A){var w=Math.round(A*x),L=Math.round(A*x+this.frameDisplayWidth);F=E.slice(w,L);var k=Math.round(this.frameDisplayWidth*this.frameDisplayHeight+A*this.frameDisplayWidth);this.pFrameData.set(F,k)}C=null,E=null,F=null}return 1}},{key:"_SetImagePostProcess",value:function(){var e=this.ctx.getUniformLocation(this.videoShaderProgram,"fBrightness");if(e<=0)return G;this.ctx.uniform1f(e,this.fBrightness);var t=this.ctx.getUniformLocation(this.videoShaderProgram,"fHue");if(t<=0)return G;this.ctx.uniform1f(t,this.fHue);var r=this.ctx.getUniformLocation(this.videoShaderProgram,"fSaturation");if(r<=0)return G;this.ctx.uniform1f(r,this.fSaturation);var i=this.ctx.getUniformLocation(this.videoShaderProgram,"fContrast");if(i<=0)return G;this.ctx.uniform1f(i,this.fContrast);var a=this.ctx.getUniformLocation(this.videoShaderProgram,"fSharpness");if(a<=0)return G;this.ctx.uniform1f(a,this.fSharpness);var n=this.ctx.getUniformLocation(this.videoShaderProgram,"fWndWidth");if(n<=0)return G;this.ctx.uniform1f(n,this.frameDisplayWidth);var s=this.ctx.getUniformLocation(this.videoShaderProgram,"fWndHeight");return s<=0?G:(this.ctx.uniform1f(s,this.frameDisplayHeight),1)}},{key:"_ComputeRotateLimits",value:function(){if(this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL){var e,t;if(this.enDisplayEffect==Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?(e=fe,t=le):(e=he,t=ce),0==this.canvas.width||0==this.canvas.height)this.fRotateLimitX=e,this.fRotateLimitY=t;else{var r=Math.tan(2.748893525);if(Math.abs(r*this.fScale)<1){var i=r*r+1,a=-2*r*r*this.fScale,n=r*r*this.fScale*this.fScale-1,s=(-a-Math.sqrt(a*a-4*i*n))/(2*i),o=r*(s-this.fScale);this.fRotateLimitX=Math.acos(o/Math.sqrt(s*s+o*o)),this.fRotateLimitX<e&&(this.fRotateLimitX=e)}else this.fRotateLimitX=e;var x=Math.atan(this.canvas.width/this.canvas.height*Math.tan(oe/2));if(r=Math.tan(ae-x),Math.abs(r*this.fScale)<1){var f=r*r+1,l=-2*r*r*this.fScale,h=r*r*this.fScale*this.fScale-1,c=(-l-Math.sqrt(l*l-4*f*h))/(2*f),u=r*(c-this.fScale);this.fRotateLimitY=Math.acos(u/Math.sqrt(c*c+u*u)),this.fRotateLimitY<t&&(this.fRotateLimitY=t)}else this.fRotateLimitY=t}this.fRotateX>this.fRotateLimitX&&(this.fRotateX=this.fRotateLimitX),this.fRotateX<-this.fRotateLimitX&&(this.fRotateX=-this.fRotateLimitX),this.fRotateY>this.fRotateLimitY&&(this.fRotateY=this.fRotateLimitX),this.fRotateY<-this.fRotateLimitX&&(this.fRotateY=-this.fRotateLimitX)}return 1}}]),t}(),ge=function(){function t(){e(this,t),this.canvas=null,this.ctx=null,this.regionSx=0,this.regionSy=0,this.regionSw=0,this.regionSh=0,this.needRect=!1,this.bAntialias=!1,this.bRecreateAntia=!1,this.pfuncCBIn=null,this.pUserIn=null,this.pfuncCBOut=null,this.pUserOut=null}return r(t,[{key:"SR_Init",value:function(e){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.ctx||console.log("your browser does not support 2d render")}},{key:"SR_Draw",value:function(e){return this.needRect?this.ctx.drawImage(e,this.regionSx,this.regionSy,this.regionSw,this.regionSh,0,0,this.canvas.width,this.canvas.height):this.ctx.drawImage(e,0,0,e.displayWidth,e.displayHeight,0,0,this.canvas.width,this.canvas.height),null!=this.pfuncCBIn&&this.pfuncCBIn(this.pUserIn),1}},{key:"GetCanvasData",value:function(e){console.log("%c start time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds(),"color: blue");var t=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);console.log("%c 2 time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds(),"color: blue");var r=document.createElement("canvas"),i=r.getContext("2d");r.width=this.canvas.width,r.height=this.canvas.height,i.putImageData(t,0,0);var a=r.toDataURL(),n=document.createElement("a");n.download=(new Date).getTime()+".jpeg",n.href=a,n.dataset.downloadurl=["image/jpeg",n.download,n.href].join(":"),document.body.appendChild(n),n.click(),document.body.removeChild(n),console.log("%c end time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds(),"color: blue")}},{key:"SR_DelSubPort",value:function(e){return 0}},{key:"SR_AddSubPort",value:function(e){return 0}},{key:"SR_SetDisplayRect",value:function(e,t,r,i){this.regionSx=e,this.regionSy=t,this.regionSw=r,this.regionSh=i,this.needRect=!0}},{key:"SR_Destroy",value:function(){this.canvas=null,this.ctx=null,this.regionSx=0,this.regionSy=0,this.regionSw=0,this.regionSh=0,this.needRect=!1}},{key:"SR_SetCanvasSize",value:function(e,t){this.canvas.width=e,this.canvas.height=t}},{key:"SR_GetCanvasSize",value:function(){console.log("canvas width:"+this.canvas.width+",height:"+this.canvas.height)}},{key:"SR_SetAntialias",value:function(e){return e!=this.bAntialias?(this.bAntialias=e,this.bRecreateAntia=!0):this.bRecreateAntia=!1,this.bRecreateAntia&&(this.bAntialias?(this.canvas.width=5*this.canvas.width,this.canvas.height=5*this.canvas.height,this.canvas.style.transform="scale(0.2)",this.canvas.style.transformOrigin="0 0"):(this.canvas.width=this.canvas.width/5,this.canvas.height=this.canvas.height/5,this.canvas.style.transform="scale(1)",this.canvas.style.transformOrigin="0 0")),1}},{key:"SR_SetCallBack",value:function(e,t,r){switch(r){case 0:this.pfuncCBIn=e,this.pUserIn=t;break;case 1:this.pfuncCBOut=e,this.pUserOut=t;break;default:return 0}return 1}},{key:"SR_DrawFont",value:function(e,t,r,i,a,n,s,o,x){var f=[],l={};return l.bBackground=n,l.nFontWidth=i,l.nFontHeight=a,l.pstBGColor=s,l.pstFontColor=r,l.pString=e,l.pstStartPos=t,l.fRotateAngle=o,l.pFontFamily=x,f.push(l),this.SR_DrawFontEx(f,1),1}},{key:"SR_DrawFontEx",value:function(e,t){for(var r=0;r<t;r++){this.ctx.textBaseline="top";var i=e[r].nFontWidth,a=e[r].nFontHeight,n=(i=Math.round(i))<(a=Math.round(a))?i:a;this.ctx.font=n.toString()+"px "+e[r].pFontFamily;var s=parseInt(255*e[r].pstFontColor.fR),o=parseInt(255*e[r].pstFontColor.fG),x=parseInt(255*e[r].pstFontColor.fB),f=s<16?"0"+s.toString(16):s.toString(16),l=o<16?"0"+o.toString(16):o.toString(16),h=x<16?"0"+x.toString(16):x.toString(16);this.ctx.fillStyle="#"+f+l+h,this.ctx.globalAlpha=e[r].pstFontColor.fA,this.ctx.fillText(e[r].pString,e[r].pstStartPos.fX*this.canvas.width,e[r].pstStartPos.fY*this.canvas.height)}return 1}},{key:"SR_DrawImage",value:function(e,t,r,i,a,n){return 1}},{key:"SR_DrawLinesEx",value:function(e,t,r,i){return 1}}]),t}(),be=function(){function t(){e(this,t),this.bPortAllocated=[],this.pRenderParam=[],this.pFishParam=[],this.stPTZColor=[],this.pPTZSetColor=null,this.nBasePTZPointNum=[],this.nOriPTZPointNum=[],this.nPanoPTZPointNum=[],this.nPTZFragmentNum=[],this.pBasePTZPoints=[],this.pPanoPTZPoints=[],this.pRectPoints=[],this.nPTZRectNum=[],this.nPTZDisplayMode=0,this.fRX1=0,this.fRX2=1,this.fRY1=0,this.fRY2=1,this.bBlack=!1,this.pOriPTZPoints=[],this.nWndPort=xe,this.nPlaceType=0,this.nPTZFragmentNode=[],this.bPTZSelected=[],this.nPTZDisplayMode=2;for(var r=0;r<ee;++r){this.bPortAllocated[r]=!1,this.bPTZSelected[r]=!1,this.pRenderParam[r]=null,this.pFishParam[r]=null,this.stPTZColor[r]={},this.stPTZColor[r].fR=0,this.stPTZColor[r].fG=0,this.stPTZColor[r].fB=0,this.stPTZColor[r].fA=0,this.nBasePTZPointNum[r]=0,this.nOriPTZPointNum[r]=0,this.nPanoPTZPointNum[r]=0,this.nPTZRectNum[r]=0,this.pPanoPTZPoints[r]=[],this.pRectPoints[r]=[],this.pBasePTZPoints[r]=[],this.pOriPTZPoints[r]=[];for(var i=0;i<4;++i)this.pRectPoints[r][i]={},this.pRectPoints[r][i].fX=0,this.pRectPoints[r][i].fY=0;for(var a=0;a<te;++a)this.pBasePTZPoints[r][a]={},this.pBasePTZPoints[r][a].fX=0,this.pBasePTZPoints[r][a].fY=0,this.pOriPTZPoints[r][a]={},this.pOriPTZPoints[r][a].fX=0,this.pOriPTZPoints[r][a].fY=0,this.pPanoPTZPoints[r][a]={},this.pPanoPTZPoints[r][a].fX=0,this.pPanoPTZPoints[r][a].fY=0;this.nPTZFragmentNum[r]=0,this.nPTZFragmentNode[r]=[];for(var n=0;n<100;++n)this.nPTZFragmentNode[r][n]=0}this.InitColorList()}return r(t,[{key:"GetFECPort",value:function(e){for(var t=xe,r=0;r<ee;++r)if(0==this.bPortAllocated[r]){t=r;break}if(t==xe)return t;if(e==Z.SR_DE_NULL)return t;if(1!=this.JudgeDisplayEffect(e))return this.FreeFECPort(t),xe;if(Z.SR_DE_FISH_PANORAMA_CEILING_360==e||Z.SR_DE_FISH_PANORAMA_CEILING_180==e||Z.SR_DE_FISH_PANORAMA_FLOOR_360==e||Z.SR_DE_FISH_PANORAMA_FLOOR_180==e||Z.SR_DE_FISH_PANORAMA_WALL==e||Z.SR_DE_FISH_ORIGINAL==e){if(xe!=this.nWndPort)return this.FreeFECPort(t),xe;this.nWndPort=t}if(!(Z.SR_DE_FISH_PTZ_CEILING!=e&&Z.SR_DE_FISH_PTZ_FLOOR!=e&&Z.SR_DE_FISH_PTZ_WALL!=e||xe==this.nWndPort||null==this.pRenderParam[this.nWndPort]||Z.SR_DE_FISH_PANORAMA_CEILING_180!=this.pRenderParam[this.nWndPort].nDisplayEffect&&Z.SR_DE_FISH_PANORAMA_FLOOR_180!=this.pRenderParam[this.nWndPort].nDisplayEffect))return this.FreeFECPort(t),xe;if(Z.SR_DE_FISH_PANORAMA_CEILING_180==e||Z.SR_DE_FISH_PANORAMA_FLOOR_180==e)for(var i=0;i<ee;++i)if(null!=this.pRenderParam[i]&&(Z.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[i].nDisplayEffect||Z.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[i].nDisplayEffect||Z.SR_DE_FISH_PTZ_WALL==this.pRenderParam[i].nDisplayEffect))return this.FreeFECPort(t),xe;if(Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==e)for(var a=0;a<ee;++a)if(null!=this.pRenderParam[a]&&Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL==this.pRenderParam[a].nDisplayEffect)return this.FreeFECPort(t),xe;if(Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL==e)for(var n=0;n<ee;++n)if(null!=this.pRenderParam[n]&&Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==this.pRenderParam[n].nDisplayEffect)return this.FreeFECPort(t),xe;return this.pRenderParam[t]={},this.pRenderParam[t].fCosH=1,this.pRenderParam[t].fSinH=0,this.pRenderParam[t].fCosV=1,this.pRenderParam[t].fSinV=0,this.pRenderParam[t].fAngle=0,this.pRenderParam[t].fRX1=this.fRX1,this.pRenderParam[t].fRX2=this.fRX2,this.pRenderParam[t].fRY1=this.fRY1,this.pRenderParam[t].fRY2=this.fRY2,this.pRenderParam[t].bBlack=this.bBlack,this.pRenderParam[t].fZoom=.035+.8,this.pRenderParam[t].nDisplayEffect=e,this.pRenderParam[t].bBlack=!1,this.pRenderParam[t].bCut=!1,this.pFishParam[t]={},this.pFishParam[t].nFishParamType=0,this.pFishParam[t].bCut=!1,this.pFishParam[t].fAngle=this.pRenderParam[t].fAngle,this.pFishParam[t].fPTZX=.5,this.pFishParam[t].fPTZY=.5,this.pFishParam[t].fRXLeft=this.pRenderParam[t].fRX1,this.pFishParam[t].fRXRight=this.pRenderParam[t].fRX2,this.pFishParam[t].fRYTop=this.pRenderParam[t].fRY1,this.pFishParam[t].fRYBottom=this.pRenderParam[t].fRY2,this.pFishParam[t].bBlack=this.pRenderParam[t].bBlack,this.pFishParam[t].fZoom=(this.pRenderParam[t].fZoom-.8)/7,this.bPortAllocated[t]=!0,t}},{key:"FreeFECPort",value:function(e){if(e<0||e>=ee)return X;this.nWndPort==e&&(this.nWndPort=xe),null!=this.pRenderParam[e]&&(this.pRenderParam[e].fCosH=1,this.pRenderParam[e].fSinH=0,this.pRenderParam[e].fCosV=1,this.pRenderParam[e].fSinV=0,this.pRenderParam[e].fAngle=0,this.pRenderParam[e].fZoom=0,this.pRenderParam[e].fRX1=0,this.pRenderParam[e].fRX2=1,this.pRenderParam[e].fRY1=0,this.pRenderParam[e].fRY2=1,this.pRenderParam[e].nDisplayEffect=0,this.pRenderParam[e].bBlack=!1,this.pRenderParam[e].bCut=!1),null!=this.pFishParam[e]&&(this.pFishParam[e].nFishParamType=0,this.pFishParam[e].fRXLeft=0,this.pFishParam[e].fRXRight=1,this.pFishParam[e].fRYTop=0,this.pFishParam[e].fRYBottom=1,this.pFishParam[e].bBlack=!1,this.pFishParam[e].bCut=!1,this.pFishParam[e].fAngle=0,this.pFishParam[e].fZoom=0,this.pFishParam[e].fPTZX=.5,this.pFishParam[e].fPTZY=.5),this.nBasePTZPointNum[e]=0,this.nOriPTZPointNum[e]=0,this.nPanoPTZPointNum[e]=0,this.nPTZRectNum[e]=0;for(var t=0;t<4;++t)this.pRectPoints[e][t].fX=0,this.pRectPoints[e][t].fY=0;for(var r=0;r<te;++r)this.pBasePTZPoints[e][r].fX=0,this.pBasePTZPoints[e][r].fY=0,this.pOriPTZPoints[e][r].fX=0,this.pOriPTZPoints[e][r].fY=0,this.pPanoPTZPoints[e][r].fX=0,this.pPanoPTZPoints[e][r].fY=0;if(null!=this.pPTZSetColor&&(this.pPTZSetColor[e].fA=0,this.pPTZSetColor[e].fR=0,this.pPTZSetColor[e].fG=0,this.pPTZSetColor[e].fB=0),this.bPTZSelected[e]=!1,0!=this.nPlaceType){var a=!1;if(null!=this.pRenderParam[i])for(var n=0;n<ee;++n)if(null!=this.pRenderParam[n]&&(Z.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_PTZ_WALL==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_PANORAMA_CEILING_360==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_PANORAMA_CEILING_180==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_PANORAMA_FLOOR_360==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_PANORAMA_FLOOR_180==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_PANORAMA_WALL==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_CYLINDER_CEILING==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_CYLINDER_FLOOR==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_CYLINDER_SPLIT_CEILING==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==this.pRenderParam[n].nDisplayEffect||Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL==this.pRenderParam[n].nDisplayEffect)){a=!0;break}a||(this.nPlaceType=0)}for(var s=!1,o=0;o<ee;++o)if(null!=this.pRenderParam[o]){s=!0;break}s||(this.fRX1=0,this.fRX2=1,this.fRY1=0,this.fRY2=1,this.bBlack=!1),this.nPTZFragmentNum[e]=0;for(var x=0;x<100;++x)this.nPTZFragmentNode[e][x]=0;return this.bPortAllocated[e]=!1,1}},{key:"DeInit",value:function(){for(var e=0;e<ee;++e){for(var t=0;t<4;++t)this.pRectPoints[e][t]=null;for(var r=0;r<te;++r)this.pBasePTZPoints[e][r]=null,this.pOriPTZPoints[e][r]=null,this.pPanoPTZPoints[e][r]=null;this.nPTZFragmentNum[e]=0,this.nPTZFragmentNode[e]=null,this.bPortAllocated[e]=!1,this.bPTZSelected[e]=!1,this.pRenderParam[e]=null,this.pFishParam[e]=null,this.stPTZColor[e]=null,this.nBasePTZPointNum[e]=0,this.nOriPTZPointNum[e]=0,this.nPanoPTZPointNum[e]=0,this.nPTZRectNum[e]=0,this.pPanoPTZPoints[e]=null,this.pRectPoints[e]=null,this.pBasePTZPoints[e]=null,this.pOriPTZPoints[e]=null}return this.bPortAllocated=null,this.pRenderParam=null,this.pFishParam=null,this.stPTZColor=null,this.pPTZSetColor=null,this.nBasePTZPointNum=null,this.nOriPTZPointNum=null,this.nPanoPTZPointNum=null,this.nPTZFragmentNum=null,this.pBasePTZPoints=null,this.pPanoPTZPoints=null,this.pRectPoints=null,this.nPTZRectNum=null,this.nPTZDisplayMode=0,this.fRX1=0,this.fRX2=1,this.fRY1=0,this.fRY2=1,this.bBlack=!1,this.pOriPTZPoints=null,this.pBasePTZPoints=null,this.nWndPort=xe,this.nPlaceType=0,this.nPTZFragmentNode=null,this.bPTZSelected=null,this.nPTZDisplayMode=2,1}},{key:"InitColorList",value:function(){this.stPTZColor[0].fR=.5,this.stPTZColor[0].fG=.5,this.stPTZColor[0].fB=0,this.stPTZColor[0].fA=1,this.stPTZColor[1].fR=1,this.stPTZColor[1].fG=0,this.stPTZColor[1].fB=0,this.stPTZColor[1].fA=1,this.stPTZColor[2].fR=0,this.stPTZColor[2].fG=1,this.stPTZColor[2].fB=0,this.stPTZColor[2].fA=1,this.stPTZColor[3].fR=0,this.stPTZColor[3].fG=0,this.stPTZColor[3].fB=1,this.stPTZColor[3].fA=1,this.stPTZColor[4].fR=1,this.stPTZColor[4].fG=1,this.stPTZColor[4].fB=0,this.stPTZColor[4].fA=1,this.stPTZColor[5].fR=.5,this.stPTZColor[5].fG=0,this.stPTZColor[5].fB=1,this.stPTZColor[5].fA=1,this.stPTZColor[6].fR=0,this.stPTZColor[6].fG=1,this.stPTZColor[6].fB=1,this.stPTZColor[6].fA=1,this.stPTZColor[7].fR=1,this.stPTZColor[7].fG=.5,this.stPTZColor[7].fB=0,this.stPTZColor[7].fA=1,this.stPTZColor[8].fR=0,this.stPTZColor[8].fG=.5,this.stPTZColor[8].fB=.5,this.stPTZColor[8].fA=1;for(var e=9;e<ee;e++)this.stPTZColor[e].fR=1*e/ee,this.stPTZColor[e].fG=1*e/ee,this.stPTZColor[e].fB=1*e/ee,this.stPTZColor[e].fA=1;return 1}},{key:"GetRangePoints",value:function(e){if(e<0||e>=ee)return X;if(null==this.pRenderParam[e])return U;var t=0,r=0;switch(this.nOriPTZPointNum[e]=0,this.nBasePTZPointNum[e]=0,this.pRenderParam[e].nDisplayEffect){case Z.SR_DE_FISH_PTZ_CEILING:for(r=0;r<1;r+=.01)this.GetFishPTZCeiling(t,r,e);for(r=.9995,t=0;t<1;t+=.02)this.GetFishPTZCeiling(t,r,e);for(t=.999,r=.9995;r>=0;r-=.01)this.GetFishPTZCeiling(t,r,e);for(r=0,t=.999;t>=0;t-=.02)this.GetFishPTZCeiling(t,r,e);break;case Z.SR_DE_FISH_PTZ_FLOOR:for(r=0;r<1;r+=.01)this.GetFishPTZFloor(t,r,e);for(r=.9995,t=0;t<1;t+=.02)this.GetFishPTZFloor(t,r,e);for(t=.999,r=.9995;r>=0;r-=.01)this.GetFishPTZFloor(t,r,e);for(r=0,t=.999;t>=0;t-=.02)this.GetFishPTZFloor(t,r,e);break;case Z.SR_DE_FISH_PTZ_WALL:for(r=0;r<1;r+=.01)this.GetFishPTZWALL(t,r,e);for(r=.9995,t=0;t<1;t+=.02)this.GetFishPTZWALL(t,r,e);for(t=.999,r=.9995;r>=0;r-=.01)this.GetFishPTZWALL(t,r,e);for(r=0,t=.999;t>=0;t-=.02)this.GetFishPTZWALL(t,r,e);break;default:return V}return 1}},{key:"TransformPTZRangePoints",value:function(e){if(xe==this.nWndPort)return U;if(null==this.pBasePTZPoints[e]||null==this.pRenderParam[this.nWndPort])return U;this.nPanoPTZPointNum[e]=0;var t=1,r=this.nWndPort;switch(this.pRenderParam[r].nDisplayEffect){case Z.SR_DE_FISH_PANORAMA_WALL:if(1!=(t=this.GetPanoPTZWall(e)))return t;break;case Z.SR_DE_FISH_PANORAMA_FLOOR_360:if(1!=(t=this.GetPanoPTZFloor(e)))return t;break;case Z.SR_DE_FISH_PANORAMA_CEILING_360:if(1!=(t=this.GetPanoPTZCeiling(e)))return t}return this.CalcPTZFragmentPoints(e),1}},{key:"GetRectPoints",value:function(e){if(e<0||e>=ee)return X;if(this.nWndPort==xe)return U;if(null==this.pRenderParam[this.nWndPort]||null==this.pFishParam[e])return U;var t=1,r={fX:0,fY:0};switch(this.pRenderParam[this.nWndPort].nDisplayEffect){case Z.SR_DE_FISH_PANORAMA_WALL:if(1!=(t=this.GetPointFish2PanoWall(r,this.pFishParam[e].fPTZX,this.pFishParam[e].fPTZY)))return t;break;case Z.SR_DE_FISH_PANORAMA_FLOOR_360:if(1!=(t=this.GetPointFish2PanoFloor(r,this.pFishParam[e].fPTZX,this.pFishParam[e].fPTZY)))return V==t&&(this.pRectPoints[e]=null),t;break;case Z.SR_DE_FISH_PANORAMA_CEILING_360:if(1!=(t=this.GetPointFish2PanoCeiling(r,this.pFishParam[e].fPTZX,this.pFishParam[e].fPTZY)))return V==t&&(this.pRectPoints[e]=null),t;break;case Z.SR_DE_FISH_ORIGINAL:r.fX=this.pFishParam[e].fPTZX,r.fY=this.pFishParam[e].fPTZY}if(null==this.pRectPoints[e]){this.pRectPoints[e]=[];for(var i=0;i<4;++i)this.pRectPoints[e][i]={},this.pRectPoints[e][i].fX=0,this.pRectPoints[e][i].fY=0}return this.pRectPoints[e][0].fX=r.fX-re,this.pRectPoints[e][0].fY=r.fY-re,this.pRectPoints[e][1].fX=r.fX+re,this.pRectPoints[e][1].fY=r.fY-re,this.pRectPoints[e][2].fX=r.fX+re,this.pRectPoints[e][2].fY=r.fY+re,this.pRectPoints[e][3].fX=r.fX-re,this.pRectPoints[e][3].fY=r.fY+re,this.nPTZRectNum[e]=4,1}},{key:"GetFishPTZCeiling",value:function(e,t,r){var i,a,n,s,o,x,f,l={fX:0,fY:0},h={fX:0,fY:0},c={fX:0,fY:0},u={};s=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),o=(this.fRX1+this.fRX2)/2*1,x=(this.fRY1+this.fRY2)/2*s,f=(this.fRX2-this.fRX1)/2*1,l.fX=t-.5,l.fY=.5-e,i=this.pRenderParam[r].fZoom,h.fX=l.fX,h.fY=l.fY*this.pRenderParam[r].fCosV+i*this.pRenderParam[r].fSinV,a=i*this.pRenderParam[r].fCosV-l.fY*this.pRenderParam[r].fSinV,n=Math.sqrt(h.fX*h.fX+h.fY*h.fY);var _=Math.sqrt(h.fX*h.fX+h.fY*h.fY+a*a),d=Math.asin(n/_)/1.5707963*.5;h.fX=d*h.fX/n,h.fY=d*h.fY/n,c.fX=h.fX*this.pRenderParam[r].fCosH-h.fY*this.pRenderParam[r].fSinH,c.fY=h.fX*this.pRenderParam[r].fSinH+h.fY*this.pRenderParam[r].fCosH,u.fX=2*c.fX*f+o,u.fY=2*-c.fY*f+x;var p=this.nBasePTZPointNum[r];this.pBasePTZPoints[r][p].fX=c.fX+.5,this.pBasePTZPoints[r][p].fY=.5-c.fY,this.nBasePTZPointNum[r]=this.nBasePTZPointNum[r]+1;var m=this.fRX1<=0?0:1*this.fRX1,P=this.fRY1<=0?0:this.fRY1*s,y=this.fRX2>=1?1-m:1*this.fRX2-m,g=this.fRY2>=1?s-P:this.fRY2*s-P;if(u.fX=(u.fX-m)/y,u.fY=(u.fY-P)/g,u.fX<=1&&u.fY<=1&&u.fX>=0&&u.fY>=0){var b=this.nOriPTZPointNum[r];this.pOriPTZPoints[r][b].fX=u.fX,this.pOriPTZPoints[r][b].fY=u.fY,this.nOriPTZPointNum[r]=this.nOriPTZPointNum[r]+1}return 1}},{key:"GetFishPTZFloor",value:function(e,t,r){var i,a,n,s,o,x,f,l={fX:0,fY:0},h={fX:0,fY:0},c={fX:0,fY:0},u={};s=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),o=(this.fRX1+this.fRX2)/2*1,x=(this.fRY1+this.fRY2)/2*s,f=(this.fRX2-this.fRX1)/2*1,l.fX=e-.5,l.fY=t-.5,i=this.pRenderParam[r].fZoom,h.fX=l.fX,h.fY=l.fY*this.pRenderParam[r].fCosV+i*this.pRenderParam[r].fSinV,a=i*this.pRenderParam[r].fCosV-l.fY*this.pRenderParam[r].fSinV,n=Math.sqrt(h.fX*h.fX+h.fY*h.fY);var _=Math.sqrt(h.fX*h.fX+h.fY*h.fY+a*a),d=Math.asin(n/_)/1.5707963*.5;h.fX=d*h.fX/n,h.fY=d*h.fY/n,c.fX=h.fX*this.pRenderParam[r].fCosH-h.fY*this.pRenderParam[r].fSinH,c.fY=h.fX*this.pRenderParam[r].fSinH+h.fY*this.pRenderParam[r].fCosH,u.fX=2*c.fX*f+o,u.fY=2*c.fY*f+x;var p=this.nBasePTZPointNum[r];this.pBasePTZPoints[r][p].fX=c.fX+.5,this.pBasePTZPoints[r][p].fY=c.fY+.5,this.nBasePTZPointNum[r]=this.nBasePTZPointNum[r]+1;var m=this.fRX1<=0?0:1*this.fRX1,P=this.fRY1<=0?0:this.fRY1*s,y=this.fRX2>=1?1-m:1*this.fRX2-m,g=this.fRY2>=1?s-P:this.fRY2*s-P;if(u.fX=(u.fX-m)/y,u.fY=(u.fY-P)/g,u.fX<=1&&u.fY<=1&&u.fX>=0&&u.fY>=0){var b=this.nOriPTZPointNum[r];this.pOriPTZPoints[r][b].fX=u.fX,this.pOriPTZPoints[r][b].fY=u.fY,this.nOriPTZPointNum[r]=this.nOriPTZPointNum[r]+1}return 1}},{key:"GetFishPTZWALL",value:function(e,t,r){var i,a,n,s,o,x,f,l,h={fX:0,fY:0},c={fX:0,fY:0},u={fX:0,fY:0},_={};o=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),x=(this.fRX1+this.fRX2)/2*1,f=(this.fRY1+this.fRY2)/2*o,l=(this.fRX2-this.fRX1)/2*1,h.fX=t-.5,h.fY=e-.5,i=this.pRenderParam[r].fZoom,c.fX=h.fX,c.fY=h.fY*this.pRenderParam[r].fCosV+i*this.pRenderParam[r].fSinV,a=i*this.pRenderParam[r].fCosV-h.fY*this.pRenderParam[r].fSinV,u.fX=c.fX*this.pRenderParam[r].fCosH+a*this.pRenderParam[r].fSinH,u.fY=c.fY,n=a*this.pRenderParam[r].fCosH-c.fX*this.pRenderParam[r].fSinH,s=Math.sqrt(u.fX*u.fX+u.fY*u.fY);var d=Math.sqrt(u.fX*u.fX+u.fY*u.fY+n*n),p=Math.asin(s/d)/1.5707963*.5;_.fX=p*u.fX/s*l*2+x,_.fY=p*u.fY/s*l*2+f;var m=this.nBasePTZPointNum[r];this.pBasePTZPoints[r][m].fX=p*u.fX/s+.5,this.pBasePTZPoints[r][m].fY=p*u.fY/s+.5,this.nBasePTZPointNum[r]=this.nBasePTZPointNum[r]+1;var P=this.fRX1<=0?0:1*this.fRX1,y=this.fRY1<=0?0:this.fRY1*o,g=this.fRX2>=1?1-P:1*this.fRX2-P,b=this.fRY2>=1?o-y:this.fRY2*o-y;if(_.fX=(_.fX-P)/g,_.fY=(_.fY-y)/b,_.fX<=1&&_.fY<=1&&_.fX>=0&&_.fY>=0){var S=this.nOriPTZPointNum[r];this.pOriPTZPoints[r][S].fX=_.fX,this.pOriPTZPoints[r][S].fY=_.fY,this.nOriPTZPointNum[r]=this.nOriPTZPointNum[r]+1}return 1}},{key:"GetPanoPTZCeiling",value:function(e){if(null==this.pRenderParam[e]||null==this.pRenderParam[this.nWndPort])return U;if(null==this.pBasePTZPoints[e])return U;var t,r,i=this.nBasePTZPointNum[e];t=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),r=(this.fRX2-this.fRX1)/2*1;var a,n=0;(this.fRX2>1||this.fRY2>1||this.fRY1<0||this.fRX1<0)&&(this.fRX1<0&&(a=1*-this.fRX1)>n&&(n=a),this.fRX2>1&&(a=1*(this.fRX2-1))>n&&(n=a),this.fRY1<0&&(a=-this.fRY1*t)>n&&(n=a),this.fRY2>1&&(a=(this.fRY2-1)*t)>n&&(n=a));for(var s,o=n/r,x={fX:0,fY:0},f={fX:0,fY:0},l=0;l<i;++l)if(f.fX=this.pBasePTZPoints[e][l].fX,f.fY=this.pBasePTZPoints[e][l].fY,!(Math.abs(f.fX-.5)<ie&&Math.abs(f.fY-.5)<ie)){var h={fX:0,fY:0},c={fX:0,fY:0};h.fX=f.fX-.5,h.fY=f.fY-.5,c.fX=-.5*Math.sin(this.pRenderParam[this.nWndPort].fAngle),c.fY=.5*Math.cos(this.pRenderParam[this.nWndPort].fAngle);var u=Math.sqrt(h.fX*h.fX+h.fY*h.fY),_=Math.sqrt(c.fX*c.fX+c.fY*c.fY);if(s=Math.acos((h.fX*c.fX+h.fY*c.fY)/(u*_)),h.fX*c.fY-h.fY*c.fX>0&&(s=6.2831852-s),x.fX=s/6.2831853,x.fY=(2*(.5-u)-o)/(.8-o),x.fY>=0&&x.fX>=0&&x.fY<=1&&x.fX<=1){var d=this.nPanoPTZPointNum[e];this.pPanoPTZPoints[e][d].fX=x.fX,this.pPanoPTZPoints[e][d].fY=x.fY,this.nPanoPTZPointNum[e]=this.nPanoPTZPointNum[e]+1}}return 1}},{key:"GetPanoPTZFloor",value:function(e){if(null==this.pRenderParam[e]||null==this.pRenderParam[this.nWndPort])return U;if(null==this.pBasePTZPoints[e])return U;var t,r,i=this.nBasePTZPointNum[e];t=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),r=(this.fRX2-this.fRX1)/2*1;var a,n=0;(this.fRX2>1||this.fRY2>1||this.fRY1<0||this.fRX1<0)&&(this.fRX1<0&&(a=1*-this.fRX1)>n&&(n=a),this.fRX2>1&&(a=1*(this.fRX2-1))>n&&(n=a),this.fRY1<0&&(a=-this.fRY1*t)>n&&(n=a),this.fRY2>1&&(a=(this.fRY2-1)*t)>n&&(n=a));for(var s,o=n/r,x={fX:0,fY:0},f={fX:0,fY:0},l=0;l<i;++l)if(f.fX=this.pBasePTZPoints[e][l].fX,f.fY=this.pBasePTZPoints[e][l].fY,!(Math.abs(f.fX-.5)<ie&&Math.abs(f.fY-.5)<ie)){var h={fX:0,fY:0},c={fX:0,fY:0};h.fX=f.fX-.5,h.fY=f.fY-.5,c.fX=-.5*Math.sin(this.pRenderParam[this.nWndPort].fAngle),c.fY=.5*Math.cos(this.pRenderParam[this.nWndPort].fAngle);var u=Math.sqrt(h.fX*h.fX+h.fY*h.fY),_=Math.sqrt(c.fX*c.fX+c.fY*c.fY);if(s=Math.acos((h.fX*c.fX+h.fY*c.fY)/(u*_)),h.fX*c.fY-h.fY*c.fX>0&&(s=6.2831852-s),x.fX=1-s/6.2831853,x.fY=1-(2*(.5-u)-o)/(.8-o),x.fY>=0&&x.fX>=0&&x.fY<=1&&x.fX<=1){var d=this.nPanoPTZPointNum[e];this.pPanoPTZPoints[e][d].fX=x.fX,this.pPanoPTZPoints[e][d].fY=x.fY,this.nPanoPTZPointNum[e]=this.nPanoPTZPointNum[e]+1}}return 1}},{key:"GetPanoPTZWall",value:function(e){if(null==this.pRenderParam[e]||null==this.pRenderParam[this.nWndPort])return U;if(null==this.pBasePTZPoints[e])return U;var t,r,i=this.nBasePTZPointNum[e];t=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),r=(this.fRX2-this.fRX1)/2*1;var a,n,s,o,x,f=0,l=1,h=.1,c=.9;this.fRX1<0&&(a=1*-this.fRX1,f=a/=2*r),this.fRX2>1&&(n=1*(this.fRX2-1),l=1-(n/=2*r)),this.fRY1<0&&(s=-this.fRY1*t,h=(s/=2*r)>.1?s:.1),this.fRY2>1&&(o=(this.fRY2-1)*t,c=(o/=2*r)>1-.9?1-o:.9);for(var u={fX:0,fY:0},_={fX:0,fY:0},d=0;d<i;++d){_.fX=this.pBasePTZPoints[e][d].fX,_.fY=this.pBasePTZPoints[e][d].fY;var p=2*_.fX*r,m=2*_.fY*r;if(x=Math.sqrt(r*r-(m-r)*(m-r)),!(Math.abs(x)<ie)&&(_.fX=r*(p-r)/x+r,_.fY=m,u.fX=(_.fX-2*f*r)/(2*(l-f)*r),u.fY=(_.fY-2*h*r)/(2*(c-h)*r),u.fY>=0&&u.fX>=0&&u.fY<=1&&u.fX<=1)){var P=this.nPanoPTZPointNum[e];this.pPanoPTZPoints[e][P].fX=u.fX,this.pPanoPTZPoints[e][P].fY=u.fY,this.nPanoPTZPointNum[e]=this.nPanoPTZPointNum[e]+1}}return 1}},{key:"GetPointPano2FishCeiling",value:function(e,t,r){if(null==e||null==this.pRenderParam[this.nWndPort])return U;var i,a;i=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),a=(this.fRX2-this.fRX1)/2*1;var n,s=0,o=1,x=0,f=1,l=0;(this.fRX2>1||this.fRY2>1||this.fRX1<0||this.fRY1<0)&&(this.fRX1<0&&((n=1*-this.fRX1)>l&&(l=n),s=n/=2*a),this.fRX2>1&&((n=1*(this.fRX2-1))>l&&(l=n),o=1-(n/=2*a)),this.fRY1<0&&((n=-this.fRY1*i)>l&&(l=n),x=n/=2*a),this.fRY2>1&&((n=(this.fRY2-1)*i)>l&&(l=n),f=1-(n/=2*a)));var h,c,u=l/a,_={},d={};return _.fX=t,_.fY=(.8-u)*r+u,h=6.2831853*_.fX+this.pRenderParam[this.nWndPort].fAngle,c=.5*(1-_.fY),d.fX=.5-c*Math.sin(h),d.fY=.5+c*Math.cos(h),d.fX=(d.fX-s)/(o-s),d.fY=(d.fY-x)/(f-x),e.fX=d.fX,e.fY=d.fY,1}},{key:"GetPointPano2FishFloor",value:function(e,t,r){if(null==this.pRenderParam[this.nWndPort])return U;if(null==e)return X;var i,a;i=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),a=(this.fRX2-this.fRX1)/2*1;var n,s=0,o=1,x=0,f=1,l=0;(this.fRX2>1||this.fRY2>1||this.fRX1<0||this.fRY1<0)&&(this.fRX1<0&&((n=1*-this.fRX1)>l&&(l=n),s=n/=2*a),this.fRX2>1&&((n=1*(this.fRX2-1))>l&&(l=n),o=1-(n/=2*a)),this.fRY1<0&&((n=-this.fRY1*i)>l&&(l=n),x=n/=2*a),this.fRY2>1&&((n=(this.fRY2-1)*i)>l&&(l=n),f=1-(n/=2*a)));var h,c,u=l/a,_={},d={};return _.fX=1-t,_.fY=(.8-u)*(1-r)+u,h=6.2831853*_.fX+this.pRenderParam[this.nWndPort].fAngle,c=.5*(1-_.fY),d.fX=.5-c*Math.sin(h),d.fY=.5+c*Math.cos(h),d.fX=(d.fX-s)/(o-s),d.fY=(d.fY-x)/(f-x),e.fX=d.fX,e.fY=d.fY,1}},{key:"GetPointPano2FishWall",value:function(e,t,r){if(null==this.pRenderParam[this.nWndPort])return U;if(null==e)return X;var i,a;i=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),a=(this.fRX2-this.fRX1)/2*1;var n,s,o,x,f=0,l=1,h=.1,c=.9,u=0,_=1,d=0,p=1;this.fRX1<0&&(n=1*-this.fRX1,f=n/=2*a,u=n),this.fRX2>1&&(s=1*(this.fRX2-1),l=1-(s/=2*a),_=1-s),this.fRY1<0&&(o=-this.fRY1*i,h=(o/=2*a)>.1?o:.1,d=o),this.fRY2>1&&(x=(this.fRY2-1)*i,c=(x/=2*a)>1-.9?1-x:.9,p=1-x);var m={},P={};m.fX=t*(l-f)+f,m.fY=r*(c-h)+h;var y=Math.sqrt(.25-(m.fY-.5)*(m.fY-.5));return P.fX=(m.fX-.5)*y/.5+.5,P.fY=m.fY,P.fX=(P.fX-u)/(_-u),P.fY=(P.fY-d)/(p-d),e.fX=P.fX,e.fY=P.fY,1}},{key:"UpdatePTZPosition",value:function(e,t,r){if(null==this.pRenderParam[e])return U;var i={fHAngleSin:0,fHAngleCos:0,fVAngleSin:0,fVAngleCos:0},a=1;if(Z.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[e].nDisplayEffect||Z.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[e].nDisplayEffect){if(1!=(a=this.ComputeAngleVertical(t,r,i,this.pRenderParam[e].nDisplayEffect)))return a}else{if(Z.SR_DE_FISH_PTZ_WALL!=this.pRenderParam[e].nDisplayEffect)return V;if(1!=(a=this.ComputeAngleHorizontal(t,r,i)))return a}return 0==this.IsInImage(this.fRX1,this.fRX2,this.fRY1,this.fRY2,i,this.pRenderParam[e].fZoom,this.pRenderParam[e].nDisplayEffect)?X:(this.pRenderParam[e].fCosH=i.fHAngleCos,this.pRenderParam[e].fSinH=i.fHAngleSin,this.pRenderParam[e].fCosV=i.fVAngleCos,this.pRenderParam[e].fSinV=i.fVAngleSin,1)}},{key:"JudgeDisplayEffect",value:function(e){var t=0;switch(t){case 0:return t=this.GetPlaceType(e),4==this.nPlaceType&&(this.nPlaceType=0),1;case 3:return(t=this.GetPlaceType(e))==this.nPlaceType||4==this.nPlaceType?1:V;case 2:case 1:return(t=this.GetPlaceType(e))==this.nPlaceType||4==t?1:V;default:return V}return V}},{key:"GetPlaceType",value:function(e){switch(e){case Z.SR_DE_FISH_PTZ_CEILING:case Z.SR_DE_FISH_PANORAMA_CEILING_360:case Z.SR_DE_FISH_PANORAMA_CEILING_180:case Z.SR_DE_FISH_CYLINDER_CEILING:case Z.SR_DE_FISH_CYLINDER_SPLIT_CEILING:return 3;case Z.SR_DE_FISH_PTZ_FLOOR:case Z.SR_DE_FISH_PANORAMA_FLOOR_360:case Z.SR_DE_FISH_PANARAMA_FLOOR_180:case Z.SR_DE_FISH_CYLINDER_FLOOR:case Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR:return 2;case Z.SR_DE_FISH_PTZ_WALL:case Z.SR_DE_FISH_PANORAMA_WALL:case Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:return 1;case Z.SR_DE_FISH_SEMISPHERE:case Z.SR_DE_FISH_ORIGINAL:case Z.SR_DE_FISH_PLANET:case Z.SR_DE_FISH_SPHERE:case Z.SR_DE_FISH_PLANET:return 4;default:return 0}return 0}},{key:"SetFishParam",value:function(e,t){if(e<0||e>=ee)return X;if(null==t)return X;if(null==this.pRenderParam[e])return U;var r=1;switch(t.nFishParamType){case 1:if(1!=(r=this.UpdateCircyeParam(t.fRXLeft,t.fRXRight,t.fRYTop,t.fRYBottom)))return r;this.pRenderParam[e].bCut=t.bCut,this.bBlack=t.bBlack;break;case 2:if(Z.SR_DE_FISH_PANORAMA_CEILING_360!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PANORAMA_CEILING_180!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PANORAMA_FLOOR_360!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PANORAMA_FLOOR_180!=this.pRenderParam[e].nDisplayEffect)return V;if(1!=(r=this.UpdateWideScanAngle(e,t.fAngle)))return r;this.pFishParam[e].fAngle=t.fAngle;break;case 3:if(Z.SR_DE_FISH_PTZ_WALL!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PTZ_CEILING!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PTZ_FLOOR!=this.pRenderParam[e].nDisplayEffect)return V;if(1!=(r=this.UpdateRangeParam(e,t.fZoom)))return r;this.pFishParam[e].fZoom=t.fZoom;break;case 4:if(Z.SR_DE_FISH_PTZ_WALL!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PTZ_CEILING!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PTZ_FLOOR!=this.pRenderParam[e].nDisplayEffect)return V;if(1!=(r=this.UpdatePTZPosition(e,t.fPTZX,t.fPTZY,this.pRenderParam[e].fZoom,!0)))return r;this.pFishParam[e].fPTZX=t.fPTZX,this.pFishParam[e].fPTZY=t.fPTZY;break;default:return V}return this.ComputePTZPoints()}},{key:"GetFishParam",value:function(e,t){return e<0||e>=ee||null==t||null==this.pFishParam[e]?X:(t.fRXLeft=this.fRX1,t.fRXRight=this.fRX2,t.fRYTop=this.fRY1,t.fRYBottom=this.fRY2,t.bBlack=this.bBlack,t.bCut=this.pRenderParam[e].bCut,t.nFishParamType=this.pFishParam[e].nFishParamType,t.fAngle=this.pFishParam[e].fAngle,t.fZoom=this.pFishParam[e].fZoom,t.fPTZX=this.pFishParam[e].fPTZX,t.fPTZY=this.pFishParam[e].fPTZY,1)}},{key:"GetRenderParam",value:function(e,t){return e<0||e>=ee||null==t||null==this.pRenderParam[e]?X:(t.fRXLeft=this.fRX1,t.fRXRight=this.fRX2,t.fRYTop=this.fRY1,t.fRYBottom=this.fRY2,t.bBlack=this.bBlack,t.fCosH=this.pRenderParam[e].fCosH,t.fSinH=this.pRenderParam[e].fSinH,t.fCosV=this.pRenderParam[e].fCosV,t.fSinV=this.pRenderParam[e].fSinV,t.fAngle=this.pRenderParam[e].fAngle,t.fZoom=this.pRenderParam[e].fZoom,t.nDisplayEffect=this.pRenderParam[e].nDisplayEffect,t.bCut=this.pRenderParam[e].bCut,1)}},{key:"UpdateCircyeParam",value:function(e,t,r,i){if(e<=-.5||e>=.4||t<=.6||t>=1.5||r<=-.5||r>=.4||i<=.6||i>=1.5||e+t<=.8||e+t>=1.2||r+i<=.8||r+i>=1.2)return X;if(e<0||t>1||r<0||i>1)for(var a=0;a<ee;++a)if(null!=this.pRenderParam[a]&&(Z.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[a].nDisplayEffect||Z.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[a].nDisplayEffect||Z.SR_DE_FISH_PTZ_WALL==this.pRenderParam[a].nDisplayEffect)){var n={};if(n.fHAngleCos=this.pRenderParam[a].fCosH,n.fHAngleSin=this.pRenderParam[a].fSinH,n.fVAngleCos=this.pRenderParam[a].fCosV,n.fVAngleSin=this.pRenderParam[a].fSinV,0==this.IsInImage(e,t,r,i,n,this.pRenderParam[a].fZoom,this.pRenderParam[a].nDisplayEffect))return X}return this.fRX1=e,this.fRX2=t,this.fRY1=r,this.fRY2=i,1}},{key:"UpdateWideScanAngle",value:function(e,t){return null==this.pRenderParam[e]?U:(Z.SR_DE_FISH_PANORAMA_FLOOR_360==this.pRenderParam[e].nDisplayEffect||Z.SR_DE_FISH_PANORAMA_FLOOR_180==this.pRenderParam[e].nDisplayEffect?this.pRenderParam[e].fAngle=t:Z.SR_DE_FISH_PANORAMA_CEILING_360!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PANORAMA_CEILING_180!=this.pRenderParam[e].nDisplayEffect||(this.pRenderParam[e].fAngle=-t),1)}},{key:"ComputeAngleVertical",value:function(e,t,r,i){var a=e,n=t,s=Math.sqrt((n-.5)*(n-.5)+(a-.5)*(a-.5));if(s>.5)return X;if(s<.001)return r.fVAngleCos=1,r.fVAngleSin=0,r.fHAngleCos=1,r.fHAngleSin=0,1;if(i==Z.SR_DE_FISH_PTZ_CEILING){r.fHAngleCos=(.5-n)/s,r.fHAngleSin=(.5-a)/s;var o=s*ae;r.fVAngleCos=Math.cos(o),r.fVAngleSin=Math.sin(o)}else{if(i!=Z.SR_DE_FISH_PTZ_FLOOR)return X;r.fHAngleCos=(n-.5)/s,r.fHAngleSin=(.5-a)/s;var x=s*ae;r.fVAngleCos=Math.cos(x),r.fVAngleSin=Math.sin(x)}return 1}},{key:"ComputeAngleHorizontal",value:function(e,t,r){var i,a,n,s,o,x,f,l=e;return(t-(o=.5))*(t-o)+(l-o)*(l-o)>.25?X:(x=(t-o)/o*ae/2,i=Math.cos(x),a=Math.sin(x),(l-o)/o/i>1||(l-o)/o/i<-1?X:(f=(l-o)/o/i*ae/2,n=Math.cos(f),s=Math.sin(f),r.fVAngleCos=i,r.fVAngleSin=a,r.fHAngleCos=n,r.fHAngleSin=s,1))}},{key:"IsInImage",value:function(e,t,r,i,a,n,s){return 1!=this.IsOutofImage(e,t,r,i,a.fHAngleCos,a.fHAngleSin,a.fVAngleCos,a.fVAngleSin,n,1,.5,s)&&1!=this.IsOutofImage(e,t,r,i,a.fHAngleCos,a.fHAngleSin,a.fVAngleCos,a.fVAngleSin,n,0,.5,s)&&1!=this.IsOutofImage(e,t,r,i,a.fHAngleCos,a.fHAngleSin,a.fVAngleCos,a.fVAngleSin,n,.5,1,s)&&1!=this.IsOutofImage(e,t,r,i,a.fHAngleCos,a.fHAngleSin,a.fVAngleCos,a.fVAngleSin,n,.5,0,s)&&1!=this.IsOutofImage(e,t,r,i,a.fHAngleCos,a.fHAngleSin,a.fVAngleCos,a.fVAngleSin,n,0,0,s)&&1!=this.IsOutofImage(e,t,r,i,a.fHAngleCos,a.fHAngleSin,a.fVAngleCos,a.fVAngleSin,n,0,1,s)&&1!=this.IsOutofImage(e,t,r,i,a.fHAngleCos,a.fHAngleSin,a.fVAngleCos,a.fVAngleSin,n,1,1,s)&&1!=this.IsOutofImage(e,t,r,i,a.fHAngleCos,a.fHAngleSin,a.fVAngleCos,a.fVAngleSin,n,1,0,s)}},{key:"IsOutofImage",value:function(e,t,r,i,a,n,s,o,x,f,l,h){var c,u,_,d,p,m,P,y,g,b,S,v,R;if(S=(e+t)/2*1,v=(r+i)/2*(b=(t-e)/(i-r)),R=(t-e)/2*1,h==Z.SR_DE_FISH_PTZ_CEILING){if(u=f-.5,_=(c=.5-l)*s+(m=x)*o,(P=m*s-c*o)<=0)return!0;g=Math.sqrt(u*u+_*_);var C=Math.sqrt(u*u+_*_+P*P),E=Math.asin(g/C)/1.5707963*.5;if(p=(-((u=E*u/g)*n+(_=E*_/g)*a)*R*2+v)/b,(d=((u*a-_*n)*R*2+S)/1)<0||d>1||p<0||p>1)return!0}if(h==Z.SR_DE_FISH_PTZ_FLOOR){if(u=f-.5,_=(c=l-.5)*s+(m=x)*o,(P=m*s-c*o)<=0)return!0;g=Math.sqrt(u*u+_*_);var F=Math.sqrt(u*u+_*_+P*P),T=Math.asin(g/F)/1.5707963*.5;if(p=(((u=T*u/g)*n+(_=T*_/g)*a)*R*2+v)/b,(d=((u*a-_*n)*R*2+S)/1)<0||d>1||p<0||p>1)return!0}if(h==Z.SR_DE_FISH_PTZ_WALL){if(d=(u=f-.5)*a+(P=(m=x)*s-(c=l-.5)*o)*n,p=_=c*s+m*o,(y=P*a-u*n)<=0)return!0;g=Math.sqrt(d*d+p*p);var D=Math.sqrt(d*d+p*p+y*y),I=Math.asin(g/D)/1.5707963*.5;if(p=(I*p/g*R*2+v)/b,(d=(I*d/g*R*2+S)/1)<0||d>1||p<0||p>1)return!0}return!1}},{key:"ComputePTZPoints",value:function(){if(xe==this.nWndPort)return U;for(var e=0;e<ee;++e)if(null!=this.pRenderParam[e]&&(Z.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[e].nDisplayEffect||Z.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[e].nDisplayEffect||Z.SR_DE_FISH_PTZ_WALL==this.pRenderParam[e].nDisplayEffect)){if(2==this.nPTZDisplayMode){if(1!=this.GetRangePoints(e))continue;if(1!=this.TransformPTZRangePoints(e))continue}else if(1==this.nPTZDisplayMode&&1!=this.GetRectPoints(e))continue}return 1}},{key:"GetWndPort",value:function(){return this.nWndPort}},{key:"GetPTZDisplayMode",value:function(){return this.nPTZDisplayMode}},{key:"GetPTZColor",value:function(e,t){return e<0||e>=ee||null==t?X:(t.fA=this.stPTZColor[e].fA,t.fR=this.stPTZColor[e].fR,t.fG=this.stPTZColor[e].fG,t.fB=this.stPTZColor[e].fB,null!=this.pPTZSetColor&&(Math.abs(this.pPTZSetColor[e].fA)<ie||Math.abs(this.pPTZSetColor[e].fR)<ie||Math.abs(this.pPTZSetColor[e].fG)<ie||Math.abs(this.pPTZSetColor[e].fB)<ie)&&(t.fA=this.pPTZSetColor[e].fA,t.fR=this.pPTZSetColor[e].fR,t.fG=this.pPTZSetColor[e].fG,t.fB=this.pPTZSetColor[e].fB),1)}},{key:"SetPTZColor",value:function(e,t){if(e<0||e>=ee)return X;if(null==t)return X;if(null==this.pPTZSetColor){this.pPTZSetColor=[];for(var r=0;r<ee;++r)this.pPTZSetColor[r]={},this.pPTZSetColor[r].fR=0,this.pPTZSetColor[r].fG=0,this.pPTZSetColor[r].fB=0,this.pPTZSetColor[r].fA=1}return this.pPTZSetColor[e].fR=t.fR,this.pPTZSetColor[e].fG=t.fG,this.pPTZSetColor[e].fB=t.fB,this.pPTZSetColor[e].fA=t.fA,1}},{key:"IsPTZSelected",value:function(e){return!(e<0||e>=ee)&&this.bPTZSelected[e]}},{key:"GetPTZPort",value:function(e,t,r){if(this.nWndPort==xe)return U;if(null==this.pRenderParam[this.nWndPort])return U;var i=ee,a={};a.fX=e,a.fY=t;for(var n=0;n<ee;++n)this.bPTZSelected[n]=!1;if(2==this.nPTZDisplayMode){switch(this.pRenderParam[this.nWndPort].nDisplayEffect){case Z.SR_DE_FISH_PANORAMA_FLOOR_360:this.GetPointPano2FishFloor(a,e,t);break;case Z.SR_DE_FISH_PANORAMA_CEILING_360:this.GetPointPano2FishCeiling(a,e,t);break;case Z.SR_DE_FISH_PANORAMA_WALL:this.GetPointPano2FishWall(a,e,t)}for(var s=0;s<ee;++s)if(0!=this.nOriPTZPointNum[s]){var o={};o.fX=this.pOriPTZPoints[s][0].fX,o.fY=this.pOriPTZPoints[s][0].fY;var x={};x.fX=this.pOriPTZPoints[s][0].fX,x.fY=this.pOriPTZPoints[s][0].fY;for(var f=1;f<this.nOriPTZPointNum[s];++f)this.GetPTZRectange(o,x,this.pOriPTZPoints[s][f]);if(a.fX<=o.fX&&a.fX>=x.fX&&a.fY>=x.fY&&a.fY<=o.fY){i=s;break}}}else{if(1!=this.nPTZDisplayMode)return V;for(var l=0;l<ee;++l)if(a.fX<=this.pRectPoints[l][2].fX&&a.fX>=this.pRectPoints[l][0].fX&&a.fY>=this.pRectPoints[l][0].fY&&a.fY<=this.pRectPoints[l][2].fY){i=l;break}}return i<ee?(this.bPTZSelected[i]=!0,r.nPTZPort=i,1):V}},{key:"SetPTZPort",value:function(e){if(e<0||e>=ee)return X;for(var t=0;t<ee;++t)this.bPTZSelected[t]=!1;if(2==this.nPTZDisplayMode){if(0==this.nOriPTZPointNum[e])return X;this.bPTZSelected[e]=!0}else{if(0==this.nPTZRectNum[e])return X;this.bPTZSelected[e]=!0}return 1}},{key:"GetPTZRectange",value:function(e,t,r){return r.fX<t.fX&&(t.fX=r.fX),r.fY<t.fY&&(t.fY=r.fY),r.fX>e.fX&&(e.fX=r.fX),r.fY>e.fY&&(e.fY=r.fY),1}},{key:"GetPTZPoints",value:function(e,t,r){return e<0||e>=ee?X:null==this.pRenderParam[this.nWndPort]?U:(2==r?null!=this.pOriPTZPoints[e]&&0!=this.nOriPTZPointNum[e]&&(t.pstPoints=this.pOriPTZPoints[e],t.nPointNum=this.nOriPTZPointNum[e]):1==r&&null!=this.pRectPoints[e]&&(t.pstPoints=this.pRectPoints[e],t.nPointNum=4),1)}},{key:"SetPTZDisplayMode",value:function(e){return this.nPTZDisplayMode=e,this.ComputePTZPoints()}},{key:"GetDisplayEffect",value:function(e){return e<0||e>=ee||null==this.pRenderParam?Z.SR_DE_NULL:this.pRenderParam[e].nDisplayEffect}},{key:"GetPTZFragmentPoints",value:function(e,t,r){if(e<0||e>=ee)return X;if(null==this.pPanoPTZPoints[e]||0==this.nPanoPTZPointNum[e])return X;var i=this.nPTZFragmentNode[e][r];if(t.nPointNum=this.nPTZFragmentNode[e][r+1]-this.nPTZFragmentNode[e][r],t.nPointNum<0)return U;t.pstPoints=[];for(var a=0;a<t.nPointNum;++a){var n={};n.fX=this.pPanoPTZPoints[e][i+a].fX,n.fY=this.pPanoPTZPoints[e][i+a].fY,t.pstPoints.push(n)}return 1}},{key:"GetPTZFragmentNum",value:function(e){return e<0||e>=ee||0==this.nPTZFragmentNum[e]?0:this.nPTZFragmentNum[e]}},{key:"CalcPTZFragmentPoints",value:function(e){if(e<0||e>=ee)return X;if(null==this.pPanoPTZPoints[e]||0==this.nPanoPTZPointNum[e])return U;this.nPTZFragmentNode[e][0]=0,this.nPTZFragmentNum[e]=1;for(var t=0,r=0;r<this.nPanoPTZPointNum[e]-1;r++)Math.abs(this.pPanoPTZPoints[e][r+1].fX-this.pPanoPTZPoints[e][r].fX)>.5&&(t=this.nPTZFragmentNum[e],this.nPTZFragmentNode[e][t]=r+1,this.nPTZFragmentNum[e]=this.nPTZFragmentNum[e]+1);var i=this.nPanoPTZPointNum[e];return Math.abs(this.pPanoPTZPoints[e][0].fX-this.pPanoPTZPoints[e][i-1].fX)<.5&&(this.pPanoPTZPoints[e][i].fX=this.pPanoPTZPoints[e][0].fX,this.pPanoPTZPoints[e][i].fY=this.pPanoPTZPoints[e][0].fY,this.nPanoPTZPointNum[e]=this.nPanoPTZPointNum[e]+1),t=this.nPTZFragmentNum[e],this.nPTZFragmentNode[e][t]=this.nPanoPTZPointNum[e],1}},{key:"IsPortAllocated",value:function(e){return this.bPortAllocated[e]}},{key:"GetPointFish2PanoCeiling",value:function(e,t,r){if(null==this.pRenderParam[this.nWndPort])return U;if(null==e)return X;var i,a;i=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),a=(this.fRX2-this.fRX1)/2*1;var n,s=0;(this.fRX2>1||this.fRY2>1||this.fRX1<0||this.fRY1<0)&&(this.fRX1<0&&(n=1*-this.fRX1)>s&&(s=n),this.fRX2>1&&(n=1*(this.fRX2-1))>s&&(s=n),this.fRY1<0&&(n=-this.fRY1*i)>s&&(s=n),this.fRY2>1&&(n=(this.fRY2-1)*i)>s&&(s=n));var o,x=s/a,f={fX:0,fY:0};if(Math.abs(t-.5)<ie&&Math.abs(r-.5)<ie)return V;var l={},h={};l.fX=t-.5,l.fY=r-.5,h.fX=-.5*Math.sin(this.pRenderParam[this.nWndPort].fAngle),h.fY=.5*Math.cos(this.pRenderParam[this.nWndPort].fAngle);var c=Math.sqrt(l.fX*l.fX+l.fY*l.fY),u=Math.sqrt(h.fX*h.fX+h.fY*h.fY);return o=Math.acos((l.fX*h.fX+l.fY*h.fY)/(c*u)),l.fX*h.fY-l.fY*h.fX>0&&(o=6.2831852-o),f.fX=o/6.2831853,f.fY=(2*(.5-c)-x)/(.8-x),f.fY>=0&&f.fX>=0&&f.fY<=1&&f.fX<=1?(e.fX=f.fX,e.fY=f.fY,1):X}},{key:"GetPointFish2PanoFloor",value:function(e,t,r){if(null==this.pRenderParam[this.nWndPort])return U;if(null==e)return X;var i,a;i=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),a=(this.fRX2-this.fRX1)/2*1;var n,s=0;(this.fRX2>1||this.fRY2>1||this.fRX1<0||this.fRY1<0)&&(this.fRX1<0&&(n=1*-this.fRX1)>s&&(s=n),this.fRX2>1&&(n=1*(this.fRX2-1))>s&&(s=n),this.fRY1<0&&(n=-this.fRY1*i)>s&&(s=n),this.fRY2>1&&(n=(this.fRY2-1)*i)>s&&(s=n));var o,x=s/a,f={fX:0,fY:0};if(Math.abs(t-.5)<ie&&Math.abs(r-.5)<ie)return V;var l={},h={};l.fX=t-.5,l.fY=r-.5,h.fX=-.5*Math.sin(this.pRenderParam[this.nWndPort].fAngle),h.fY=.5*Math.cos(this.pRenderParam[this.nWndPort].fAngle);var c=Math.sqrt(l.fX*l.fX+l.fY*l.fY),u=Math.sqrt(h.fX*h.fX+h.fY*h.fY);return o=Math.acos((l.fX*h.fX+l.fY*h.fY)/(c*u)),l.fX*h.fY-l.fY*h.fX>0&&(o=6.2831852-o),f.fX=1-o/6.2831853,f.fY=1-(2*(.5-c)-x)/(.8-x),f.fY>=0&&f.fX>=0&&f.fY<=1&&f.fX<=1?(e.fX=f.fX,e.fY=f.fY,1):X}},{key:"GetPointFish2PanoWall",value:function(e,t,r){if(null==this.pRenderParam[this.nWndPort])return U;if(null==e)return X;var i,a;i=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),a=(this.fRX2-this.fRX1)/2*1;var n,s,o,x,f,l=0,h=1,c=.1,u=.9;this.fRX1<0&&(n=1*-this.fRX1,l=n/=2*a),this.fRX2>1&&(s=1*(this.fRX2-1),h=1-(s/=2*a)),this.fRY1<0&&(o=-this.fRY1*i,c=(o/=2*a)>.1?o:.1),this.fRY2>1&&(x=(this.fRY2-1)*i,u=(x/=2*a)>1-.9?1-x:.9);var _={fX:0,fY:0},d=2*t*a,p=2*r*a;return f=Math.sqrt(a*a-(p-a)*(p-a)),Math.abs(f)<ie?SR_ERR_PARAM:(t=a*(d-a)/f+a,r=p,_.fX=(t-2*l*a)/(2*(h-l)*a),_.fY=(r-2*c*a)/(2*(u-c)*a),_.fY>=0&&_.fX>=0&&_.fY<=1&&_.fX<=1?(e.fX=_.fX,e.fY=_.fY,1):X)}},{key:"UpdateRangeParam",value:function(e,t){if(null==this.pRenderParam[e])return U;if(t<1e-5||t>.6)return X;var r=0;return Z.SR_DE_FISH_PTZ_WALL!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PTZ_CEILING!=this.pRenderParam[e].nDisplayEffect&&Z.SR_DE_FISH_PTZ_FLOOR!=this.pRenderParam[e].nDisplayEffect||(r=7*t+.8,this.IsInImage(this.fRX1,this.fRX2,this.fRY1,this.fRY2,this.pRenderParam[e].fCosH,this.pRenderParam[e].fSinH,this.pRenderParam[e].fCosV,this.pRenderParam[e].fSinV,r,this.pRenderParam[e].nDisplayEffect))?(this.pRenderParam[e].fZoom=r,1):X}}]),t}(),Se=32,ve=function(){function t(){e(this,t),this.renderEngine="webgl",this.oVideoHandle=null,this.mainCanvasID=null,this.curTimestamp=0,this.mainSubPort=0,this.mainVaildSubPort=0,this.mainFECCorrect=Z.SR_DE_NULL,this.FECErrorCode=0,this.subPortNum=0,this.FECShowMode=2,this.pFishParamManager=null,this.InitFECParam(),this.privateLinesInfo=[],this.privateFontsInfo=[],this.privateImageInfo=[],this.bSRCallBackFlag=!1,this.curLinesInfo=null,this.curFontsInfo=null,this.curImagesInfo=null,this.maxPrivateLineTimeStamp=0,this.hasSetFECParamManager=!1,this.pWaterFontParam=[],this.pWaterImageParam=[],this.waterMarkImageIndex=0,this.waterMarkImageMax=1,this.aPOSAdaptBuf=[]}return r(t,[{key:"InitDisplay",value:function(e,t,r){return this.renderEngine=t,this.mainCanvasID=e,"2d"===this.renderEngine||"2D"===this.renderEngine?(this.oVideoHandle=new ge,console.log("2d render")):(this.oVideoHandle=new ye,this.mainFECCorrect!=Z.SR_DE_NULL&&(null==this.pFishParamManager&&(this.pFishParamManager=new be),this.oVideoHandle.SR_SetFishParamManager(this.pFishParamManager),this.hasSetFECParamManager=!0),console.log("webgl render")),this.oVideoHandle.SR_Init(e,r),this.mainVaildSubPort=this.oVideoHandle.SR_AddSubPort(this.mainFECCorrect),-1==this.mainVaildSubPort?(console.info("%c InitDisplay SR_AddSubPort error subport:%d","color: red",this.mainVaildSubPort),0):(null==this.stFishEyeManager[0].pRender&&this.mainFECCorrect!==Z.SR_DE_NULL&&(this.stFishEyeManager[0].pRender=this.oVideoHandle,this.stFishEyeManager[0].nSubPort=0,this.stFishEyeManager[0].sCanvasID=this.mainCanvasID,this.stFishEyeManager[0].bUsed=1,this.stFishEyeManager[0].bInited=1,this.stFishEyeManager[0].nValidSubPort=this.mainVaildSubPort),1)}},{key:"ReleaseDisplay",value:function(){if(null!=this.oVideoHandle&&(this.oVideoHandle.SR_DelSubPort(this.mainVaildSubPort),this.oVideoHandle.SR_Destroy(),this.oVideoHandle=null),this.subPortNum>0)for(var e=1;e<Se;e++)0!=this.stFishEyeManager[e].nSubPort&&null!=this.stFishEyeManager[e].sCanvasID&&0!=this.stFishEyeManager[e].bInited&&(this.FEC_Disable(e),this.FEC_DelPort(e));for(var t=0;t<Se;t++)this.stFishEyeManager[t].pRender=null;return this.stFishEyeManager.splice(0,this.stFishEyeManager.length),this.stFishParam.splice(0,this.stFishParam.length),null!=this.pFishParamManager&&(this.pFishParamManager.DeInit(),this.pFishParamManager=null),this.FECShowMode=2,this.DeInitPrivateParam(),1}},{key:"DeInitPrivateParam",value:function(){this.privateLinesInfo.splice(0,this.privateLinesInfo.length),this.privateFontsInfo.splice(0,this.privateFontsInfo.length),this.privateImageInfo.splice(0,this.privateImageInfo.length),this.pWaterFontParam.splice(0,this.pWaterFontParam.length),this.pWaterImageParam.splice(0,this.pWaterImageParam.length),this.bSRCallBackFlag=!1,this.curLinesInfo=null}},{key:"DisplayFrame",value:function(e,t,r,i,a,n){var s=this;return new Promise((function(o){var x=-1;if(null!=e&&(x=i),s.bSRCallBackFlag||(null!=s.oVideoHandle&&s.oVideoHandle.SR_SetCallBack(s.WebGLDisplayCallBack,s,0),s.bSRCallBackFlag=!0),null!=e&&(0==s.privateLinesInfo.length&&0==s.privateFontsInfo.length&&0==s.privateImageInfo.length||(s.curTimestamp=x,s.FindIntelNodefromList(s.curTimestamp)),null!=s.oVideoHandle&&s.oVideoHandle.SR_Draw(e,t,r,a,n),s.subPortNum>0))for(var f=1;f<Se;f++)0!=s.stFishEyeManager[f].nSubPort&&null!=s.stFishEyeManager[f].sCanvasID&&0!=s.stFishEyeManager[f].bInited&&null!=s.stFishEyeManager[f].pRender&&s.stFishEyeManager[f].pRender.SR_Draw(e,t,r,null,null);o(x)}))}},{key:"SetDisplayRect",value:function(e,t,r,i){return null!=this.oVideoHandle?this.oVideoHandle.SR_SetDisplayRect(e,t,r,i,1):0}},{key:"SetCanvasSize",value:function(e,t){return null!=this.oVideoHandle?this.oVideoHandle.SR_SetCanvasSize(e,t):0}},{key:"GetCanvasSize",value:function(){return null!=this.oVideoHandle?this.oVideoHandle.SR_GetCanvasSize():0}},{key:"SetAntialias",value:function(e){return null!=this.oVideoHandle?this.oVideoHandle.SR_SetAntialias(e):0}},{key:"SetD3DPostProcess",value:function(e,t){return null!=this.oVideoHandle?this.oVideoHandle.SR_SetImagePostProcess(e,t):0}},{key:"InitFECParam",value:function(){this.stFishEyeManager=[];for(var e=0;e<Se;e++)this.stFishEyeManager[e]={},this.stFishEyeManager[e].pRender=null,this.stFishEyeManager[e].nSubPort=0,this.stFishEyeManager[e].sCanvasID=null,this.stFishEyeManager[e].bUsed=0,this.stFishEyeManager[e].bInit=0,this.stFishEyeManager[e].nValidSubPort=0,this.stFishEyeManager[e].emPlaceType=3,this.stFishEyeManager[e].emCorrectType=0,this.stFishEyeManager[e].emEffect=Z.SR_DE_FISH_ORIGINAL;this.stFishParam=[];for(var t=0;t<Se;t++)this.stFishParam[t]={},this.stFishParam[t].nUpDateType=0,this.stFishParam[t].stPTZParam={},this.stFishParam[t].stPTZParam.fPTZPositionX=0,this.stFishParam[t].stPTZParam.fPTZPositionY=0,this.stFishParam[t].stCycleParam={},this.stFishParam[t].stCycleParam.fRadiusLeft=0,this.stFishParam[t].stCycleParam.fRadiusRight=0,this.stFishParam[t].stCycleParam.fRadiusTop=0,this.stFishParam[t].stCycleParam.fRadiusBottom=0,this.stFishParam[t].fZoom=0,this.stFishParam[t].fWideScanOffset=0,this.stFishParam[t].stPTZColor={},this.stFishParam[t].stPTZColor.nR=0,this.stFishParam[t].stPTZColor.nG=0,this.stFishParam[t].stPTZColor.nB=0,this.stFishParam[t].stPTZColor.nAlpha=0,this.stFishParam[t].stPTZSelect={},this.stFishParam[t].stPTZSelect.fTop=0,this.stFishParam[t].stPTZSelect.fBottom=0,this.stFishParam[t].stPTZSelect.fLeft=0,this.stFishParam[t].stPTZSelect.fRight=0,this.stFishParam[t].nCut=0}},{key:"FEC_SetCanvasID",value:function(e){return this.mainFECCorrect=Z.SR_DE_FISH_ORIGINAL,1}},{key:"FEC_ResetCorrectType",value:function(e,t,r){if(!1===this.hasSetFECParamManager&&(null==this.pFishParamManager&&(this.pFishParamManager=new be),this.oVideoHandle.SR_SetFishParamManager(this.pFishParamManager),this.hasSetFECParamManager=!0),0!=r&&r!=E&&r!=F&&r!=D&&r!=C&&r!=T&&r!=I&&r!=w&&r!=L)return console.log("%c 20231122 hardDecoder not support correctType:%d","color:red",r),this.FECErrorCode=16,0;if(1!=this.FECParamJudge(e,t,r))return 0;var i;if(i=this._ConvertDisplayEffect(t,r),0==e&&null==this.stFishEyeManager[e].pRender&&(this.stFishEyeManager[e].pRender=this.oVideoHandle,this.stFishEyeManager[e].nSubPort=e,this.stFishEyeManager[e].sCanvasID=this.mainCanvasID,this.stFishEyeManager[e].bUsed=1,this.stFishEyeManager[e].bInited=1,this.stFishEyeManager[e].nValidSubPort=this.mainVaildSubPort,this.stFishEyeManager[e].emPlaceType=t,this.stFishEyeManager[e].emCorrectType=r,this.stFishEyeManager[e].emEffect=i,this.mainFECCorrect=i),null!=this.stFishEyeManager[e].pRender){this.stFishEyeManager[e].pRender.SR_DelSubPort(this.stFishEyeManager[e].nValidSubPort);var a=this.stFishEyeManager[e].pRender.SR_AddSubPort(i);if(-1==a)return console.info("%c FEC_ResetCorrectType SR_AddSubPort error subport:%d","color: red",a),0;if(this.stFishEyeManager[e].nValidSubPort=a,this.stFishEyeManager[e].emPlaceType=t,this.stFishEyeManager[e].emCorrectType=r,this.stFishEyeManager[e].emEffect=i,D<=this.stFishEyeManager[e].emCorrectType){var n=this.stFishEyeManager[e].pRender.SR_SetRenderState(2,0);1!=n&&console.log(">>>VideoRender.js SR_SetRenderState failed ret：%08x\n",n)}}return this.FECShowMode>0&&null!=this.stFishEyeManager[e].pRender&&this.stFishEyeManager[e].pRender.SR_SetPTZDisplayMode(this.FECShowMode),0==e&&(this.mainVaildSubPort=this.stFishEyeManager[e].nValidSubPort),1}},{key:"FEC_GetPort",value:function(e,t){if(0!=t&&t!=E&&t!=F&&t!=D&&t!=C&&t!=T&&t!=I&&t!=w&&t!=L)return console.log("%c 20231112 hardDecoder not support emCorrectType:%d","color:red",t),this.FECErrorCode=16,-1;var r;if(1!=this.FECParamJudge(-1,e,t))return-1;var i,a=0;for(r=1;r<Se;r++)if(0==this.stFishEyeManager[r].nSubPort&&0==this.stFishEyeManager[r].bUsed){this.stFishEyeManager[r].nSubPort=r,this.stFishEyeManager[r].nValidSubPort=-1,this.stFishEyeManager[r].bUsed=1,this.stFishEyeManager[r].emPlaceType=e,this.stFishEyeManager[r].emCorrectType=t,a=r;break}return Se==r?(console.info("%c FEC_GetPort-12 fish subport max","color: red"),this.FECErrorCode=1284,-1):(i=this._ConvertDisplayEffect(this.stFishEyeManager[a].emPlaceType,this.stFishEyeManager[a].emCorrectType),Z.SR_DE_FISH_ORIGINAL!=i?(0==this.stFishEyeManager[a].bInited&&(this.stFishEyeManager[a].emEffect=i,this.stFishEyeManager[a].bInited=0,this.stFishParam[a].fZoom=.005,this.stFishParam[a].stPTZParam.fPTZPositionX=.5,this.stFishParam[a].stPTZParam.fPTZPositionY=.5,this.stFishParam[a].fWideScanOffset=0),this.FECErrorCode=0,this.subPortNum++,a):a<Se&&0==this.stFishEyeManager[a].bInited?(this.stFishEyeManager[a].emEffect=i,this.stFishEyeManager[a].bInited=0,this.stFishParam[a].fZoom=0,this.stFishParam[a].stPTZParam.fPTZPositionX=0,this.stFishParam[a].stPTZParam.fPTZPositionY=0,this.stFishParam[a].fWideScanOffset=0,this.FECErrorCode=0,this.subPortNum++,a):(this.stFishEyeManager[r].pRender=null,this.stFishEyeManager[r].nSubPort=0,this.stFishEyeManager[r].sCanvasID=null,this.stFishEyeManager[r].bUsed=0,this.stFishEyeManager[r].bInited=0,this.stFishEyeManager[r].nValidSubPort=0,this.stFishEyeManager[r].emPlaceType=3,this.stFishEyeManager[r].emCorrectType=0,this.stFishEyeManager[r].emEffect=Z.SR_DE_FISH_ORIGINAL,this.FECErrorCode=y,-1))}},{key:"FECParamJudge",value:function(e,t,r){if((2==t||3==t)&&T==r)return console.info("%c FEC_GetPort-1 floor and ceiling not support lat","color: red"),this.FECErrorCode=y,0;if(1==t&&I==r)return console.info("%c FEC_GetPort-2 wall not support cylinger","color: red"),this.FECErrorCode=y,0;if(1==t&&M==r)return console.info("%c FEC_GetPort-3 wall not support split cylinger","color: red"),this.FECErrorCode=y,0;if((2==t||3==t)&&w==r)return console.info("%c FEC_GetPort-4 floor and ceiling not support horizontal","color: red"),this.FECErrorCode=y,0;if((2==t||3==t)&&L==r)return console.info("%c FEC_GetPort-5 floor and ceiling not support vertical","color: red"),this.FECErrorCode=y,0;if(1!=t&&2!=t&&3!=t)return console.info("%c FEC_GetPort-6 emPlaceType only support floor, ceiling and wall","color: red"),this.FECErrorCode=MP_E_SUPPORT,0;if(0!=r&&r!=C&&r!=E&&r!=F&&r!=T&&r!=D&&r!=I&&r!=M&&r!=A&&r!=w&&r!=L)return console.info("%c FEC_GetPort-7 emCorrectType error","color: red"),this.FECErrorCode=MP_E_SUPPORT,0;for(var i=0;i<Se;i++)if(i!=e){if(this.stFishEyeManager[i].bUsed&&this.stFishEyeManager[i].emPlaceType!=t)return console.info("%c FEC_GetPort-8 emPlaceType changed","color: red"),this.FECErrorCode=1303,0;if(this.stFishEyeManager[i].bUsed&&this.stFishEyeManager[i].emCorrectType!=C&&this.stFishEyeManager[i].emCorrectType!=D&&this.stFishEyeManager[i].emCorrectType!=I&&this.stFishEyeManager[i].emCorrectType!=M&&this.stFishEyeManager[i].emCorrectType!=A&&this.stFishEyeManager[i].emCorrectType!=w&&this.stFishEyeManager[i].emCorrectType!=L&&r!=C&&r!=D&&r!=I&&r!=M&&r!=A&&r!=w&&r!=L)return console.info("%c FEC_GetPort-9 origin/180/360/lat only display one port","color: red"),this.FECErrorCode=1304,0;if(this.stFishEyeManager[i].bUsed&&(this.stFishEyeManager[i].emCorrectType==C&&r==E||this.stFishEyeManager[i].emCorrectType==E&&r==C))return console.info("%c FEC_GetPort-10 180 cannot support ptz","color: red"),this.FECErrorCode=1304,0}return 1}},{key:"FEC_Enable",value:function(e){return e<1||e>31||null==e?(console.info("%c FEC_Enable-1 nSubPort:%d","color: red",e),this.FECErrorCode=v,0):null!==this.stFishEyeManager[e].pRender?(console.info("%c FEC_Enable-2 nSubPort:%d","color: red",e),this.FECErrorCode=1301,0):(null==this.stFishEyeManager[e].pRender&&(this.stFishEyeManager[e].pRender=new ye,null==this.pFishParamManager&&(this.pFishParamManager=new be),this.stFishEyeManager[e].pRender.SR_SetFishParamManager(this.pFishParamManager)),1)}},{key:"FEC_SetWnd",value:function(e,t){if(e<1||e>31||null==e)return console.info("%c FEC_SetWnd-1 nSubPort:%d","color: red",e),this.FECErrorCode=v,0;if(null==this.stFishEyeManager[e].pRender)return console.info("%c FEC_SetWnd-2 nSubPort:%d pRender is null","color: red",e),this.FECErrorCode=m,0;if(0==this.stFishEyeManager[e].bUsed)return console.info("%c FEC_SetWnd-3 nSubPort:%d bUsed:%d","color: red",e,this.stFishEyeManager[e].bUsed),this.FECErrorCode=P,0;if(null==t)return console.info("%c FEC_SetWnd-4 nSubPort:%d sCanvasID:%s","color: red",e,t),this.FECErrorCode=1305,0;if(0!=this.stFishEyeManager[e].nSubPort&&0!=this.stFishEyeManager[e].bUsed){if(0!=this.stFishEyeManager[e].bInited&&null!=this.stFishEyeManager[e].sCanvasID)return t!=this.stFishEyeManager[e].sCanvasID?(console.info("%c FEC_SetWnd-5 nSubPort:%d sCanvasID:%s already init","color: red",e,t),this.FECErrorCode=1286,0):1;var r;r=this._ConvertDisplayEffect(this.stFishEyeManager[e].emPlaceType,this.stFishEyeManager[e].emCorrectType);var i=this.stFishEyeManager[e].pRender.SR_Init(t,j),a=this.stFishEyeManager[e].pRender.SR_AddSubPort(r);if(-1==a)return console.info("%c FEC_SetWnd SR_AddSubPort error subport:%d","color: red",e),0;if(this.stFishEyeManager[e].nValidSubPort=a,1!=i)return this.stFishEyeManager[e].bInited=0,this.stFishEyeManager[e].sCanvasID=null,this.FECErrorCode=P,0;if(this.stFishEyeManager[e].bInited=1,this.stFishEyeManager[e].sCanvasID=t,D<=this.stFishEyeManager[e].emCorrectType){var n=this.stFishEyeManager[e].pRender.SR_SetRenderState(2,0);1!=n&&console.log(">>>VideoRender.js SR_SetRenderState failed ret：%08x\n",n)}return this.FECShowMode>0&&this.stFishEyeManager[e].pRender.SR_SetPTZDisplayMode(this.FECShowMode),1}return this.FECErrorCode=P,0}},{key:"FEC_Disable",value:function(e,t,r){if(e<1||e>31||null==e)return console.info("%c FEC_Disable-1 nSubPort:%d","color: red",e),this.FECErrorCode=v,0;if(1==this.stFishEyeManager[e].bInited&&null!=this.stFishEyeManager[e].pRender){if(1!=this.stFishEyeManager[e].pRender.SR_DelSubPort(this.stFishEyeManager[e].nValidSubPort))return console.info("%c FEC_Disable-2 SR_DelSubPort error nSubPort:%d","color: red",e),0;this.stFishEyeManager[e].bInited=0,this.stFishEyeManager[e].nValidSubPort=-1,this.stFishEyeManager[e].pRender.SR_Destroy(),this.stFishEyeManager[e].pRender=null}return 1}},{key:"FEC_DelPort",value:function(e){return e<1||e>31||null==e?(console.info("%c FEC_DelPort-1 nSubPort:%d","color: red",e),this.FECErrorCode=v,0):0==this.stFishEyeManager[e].bUsed?(console.info("%c FEC_DelPort-2 nSubPort:%d bUsed：%d","color: red",e,this.stFishEyeManager[e].bUsed),this.FECErrorCode=P,0):(this.stFishEyeManager[e].nSubPort=0,this.stFishEyeManager[e].sCanvasID=null,this.stFishEyeManager[e].bUsed=0,this.stFishEyeManager[e].bInited=0,this.stFishEyeManager[e].nValidSubPort=0,this.stFishEyeManager[e].emPlaceType=3,this.stFishEyeManager[e].emCorrectType=0,this.stFishEyeManager[e].emEffect=Z.SR_DE_FISH_ORIGINAL,this.stFishParam[e].stCycleParam.fRadiusLeft=0,this.stFishParam[e].stCycleParam.fRadiusRight=1,this.stFishParam[e].stCycleParam.fRadiusTop=0,this.stFishParam[e].stCycleParam.fRadiusBottom=1,this.subPortNum>0&&this.subPortNum--,1)}},{key:"FEC_SetParam",value:function(e,t){if(this.FECErrorCode=0,e<0||e>31||null==e)return console.info("%c FEC_SetParam-1 nSubPort:%d","color: red",e),this.FECErrorCode=v,0;if(null==this.stFishEyeManager[e].pRender)return console.info("%c FEC_SetParam-2 nSubPort:%d pRender:%d","color: red",e,this.stFishEyeManager[e].pRender),this.FECErrorCode=m,0;if(0==this.stFishEyeManager[e].bUsed)return console.info("%c FEC_SetParam-3 nSubPort:%d bUsed:%d","color: red",e,this.stFishEyeManager[e].bUsed),this.FECErrorCode=P,0;if(this.stFishEyeManager[e].emCorrectType>=D&&this.stFishEyeManager[e].emCorrectType<=L&&30&t.upDateType)return console.info("%c FEC_SetParam-4 nSubPort:%d not 3D","color: red",e),this.FECErrorCode=S,0;if(1&t.upDateType){if(null==t.stCycleParam)return this.FECErrorCode=b,0;for(var r=1;r<Se;r++){if(this.stFishEyeManager[r].bUsed&&this.stFishEyeManager[r].nSubPort&&w==this.stFishEyeManager[r].emCorrectType&&(t.stCycleParam.fRadiusLeft<=-.5||t.stCycleParam.fRadiusLeft>=.4||t.stCycleParam.fRadiusRight<=.6||t.stCycleParam.fRadiusRight>=1.5||t.stCycleParam.fRadiusTop<=-.5||t.stCycleParam.fRadiusTop>0||t.stCycleParam.fRadiusBottom<1||t.stCycleParam.fRadiusBottom>=1.5||t.stCycleParam.fRadiusLeft+t.stCycleParam.fRadiusRight<=.8||t.stCycleParam.fRadiusLeft+t.stCycleParam.fRadiusRight>=1.2||t.stCycleParam.fRadiusTop+t.stCycleParam.fRadiusBottom<=.8||t.stCycleParam.fRadiusTop+t.stCycleParam.fRadiusBottom>=1.2))return this.FECErrorCode=b,0;if(this.stFishEyeManager[r].bUsed&&this.stFishEyeManager[r].nSubPort&&L==this.stFishEyeManager[r].emCorrectType&&(t.stCycleParam.fRadiusLeft<=-.5||t.stCycleParam.fRadiusLeft>0||t.stCycleParam.fRadiusRight<1||t.stCycleParam.fRadiusRight>=1.5||t.stCycleParam.fRadiusTop<=-.5||t.stCycleParam.fRadiusTop>=.4||t.stCycleParam.fRadiusBottom<=.6||t.stCycleParam.fRadiusBottom>=1.5||t.stCycleParam.fRadiusLeft+t.stCycleParam.fRadiusRight<=.8||t.stCycleParam.fRadiusLeft+t.stCycleParam.fRadiusRight>=1.2||t.stCycleParam.fRadiusTop+t.stCycleParam.fRadiusBottom<=.8||t.stCycleParam.fRadiusTop+t.stCycleParam.fRadiusBottom>=1.2))return this.FECErrorCode=b,0}}if(0==this.stFishEyeManager[e].bInited){if(4&t.upDateType){if(E!=this.stFishEyeManager[e].emCorrectType&&F!=this.stFishEyeManager[e].emCorrectType||1==this.stFishEyeManager[e].emPlaceType)return this.FECErrorCode=S,0;for(var i=1;i<Se;i++)if(this.stFishEyeManager[i].nSubPort&&this.stFishEyeManager[i].bUsed&&this.stFishEyeManager[i].emCorrectType==C)return this.FECErrorCode=g,0;this.stFishParam[e].fWideScanOffset=t.fValue}if(16&t.upDateType){if(null==t.stPTZColor)return this.FECErrorCode=b,0;if(t.stPTZColor.nR>255||t.stPTZColor.nG>255||t.stPTZColor.nB>255||t.stPTZColor.nAlpha>255)return this.FECErrorCode=S,0;this.stFishParam[e].stPTZColor.nR=t.stPTZColor.nR,this.stFishParam[e].stPTZColor.nG=t.stPTZColor.nG,this.stFishParam[e].stPTZColor.nB=t.stPTZColor.nB,this.stFishParam[e].stPTZColor.nAlpha=t.stPTZColor.nAlpha}if(8&t.upDateType){if(C!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=S,0;this.stFishParam[e].stPTZParam.fPTZPositionX=t.fPTZParam.fPTZPositionX,this.stFishParam[e].stPTZParam.fPTZPositionY=t.fPTZParam.fPTZPositionY}if(2&t.upDateType){if(C!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=S,0;this.stFishParam[e].fZoom=t.fPTZZoom}if(32&t.upDateType){if(null==this.stFishParam.stPTZSelect)return 0;if(C!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=S,0;this.stFishParam.stPTZSelect.fTop=t.stPTZSelect.fTop,this.stFishParam.stPTZSelect.fBottom=t.stPTZSelect.fBottom,this.stFishParam.stPTZSelect.fLeft=t.stPTZSelect.fLeft,this.stFishParam.stPTZSelect.fRight=t.stPTZSelect.fRight}if(1&t.upDateType){if(null==t.stCycleParam)return this.FECErrorCode=b,0;if(0==this._IsValidRadiusParam(t.stCycleParam))return this.FECErrorCode=b,0;this.stFishParam[0].stCycleParam.fRadiusLeft=t.stCycleParam.fRadiusLeft,this.stFishParam[0].stCycleParam.fRadiusRight=t.stCycleParam.fRadiusRight,this.stFishParam[0].stCycleParam.fRadiusTop=t.stCycleParam.fRadiusTop,this.stFishParam[0].stCycleParam.fRadiusBottom=t.stCycleParam.fRadiusBottom}return 1}if(4&t.upDateType){if(E!=this.stFishEyeManager[e].emCorrectType&&F!=this.stFishEyeManager[e].emCorrectType||1==this.stFishEyeManager[e].emPlaceType)return this.FECErrorCode=S,0;for(var a=1;a<Se;a++)if(this.stFishEyeManager[a].nSubPort&&this.stFishEyeManager[a].bUsed&&this.stFishEyeManager[a].emCorrectType==C)return this.FECErrorCode=g,0;var n={nFishParamType:2,bBlack:0};if(n.fAngle=t.fValue,1!=this.stFishEyeManager[e].pRender.SR_SetFishParam(n))return this.FECErrorCode=g,0;this.stFishParam[e].fWideScanOffset=t.fValue}if(16&t.upDateType){if(null==t.stPTZColor)return this.FECErrorCode=S,0;if(t.stPTZColor.nR>255||t.stPTZColor.nG>255||t.stPTZColor.nB>255||t.stPTZColor.nAlpha>255)return this.FECErrorCode=S,0;var s={};s.fR=float(t.stPTZColor.nR/255),s.fG=float(t.stPTZColor.nG/255),s.fB=float(t.stPTZColor.nB/255),s.fA=float(t.stPTZColor.nAlpha/255),this.stFishParam[e].stPTZColor.nR=t.stPTZColor.nR,this.stFishParam[e].stPTZColor.nG=t.stPTZColor.nG,this.stFishParam[e].stPTZColor.nB=t.stPTZColor.nB,this.stFishParam[e].stPTZColor.nAlpha=t.stPTZColor.nAlpha}if(8&t.upDateType){if(C!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=S,0;var o={nFishParamType:4,bBlack:0};if(o.fPTZX=t.fPTZParam.fPTZPositionX,o.fPTZY=t.fPTZParam.fPTZPositionY,1!=this.stFishEyeManager[e].pRender.SR_SetFishParam(o))return this.FECErrorCode=g,0;this.stFishParam[e].stPTZParam.fPTZPositionX=t.fPTZParam.fPTZPositionX,this.stFishParam[e].stPTZParam.fPTZPositionY=t.fPTZParam.fPTZPositionY}if(2&t.upDateType){if(C!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=S,0;var x={nFishParamType:3,bBlack:0};if(x.fZoom=t.fPTZZoom,1!=this.stFishEyeManager[e].pRender.SR_SetFishParam(x))return this.FECErrorCode=g,0;this.stFishParam[e].fZoom=t.fPTZZoom}if(1&t.upDateType){if(0==this._IsValidRadiusParam(t.stCycleParam))return this.FECErrorCode=b,0;var f={nFishParamType:1,bBlack:1};if(f.fRXLeft=t.stCycleParam.fRadiusLeft,f.fRXRight=t.stCycleParam.fRadiusRight,f.fRYTop=t.stCycleParam.fRadiusTop,f.fRYBottom=t.stCycleParam.fRadiusBottom,1!=this.stFishEyeManager[e].pRender.SR_SetFishParam(this.stFishEyeManager[e].nValidSubPort,f))return this.FECErrorCode=b,0;this.stFishParam[0].stCycleParam.fRadiusLeft=t.stCycleParam.fRadiusLeft,this.stFishParam[0].stCycleParam.fRadiusRight=t.stCycleParam.fRadiusRight,this.stFishParam[0].stCycleParam.fRadiusTop=t.stCycleParam.fRadiusTop,this.stFishParam[0].stCycleParam.fRadiusBottom=t.stCycleParam.fRadiusBottom}return 32&t.upDateType&&C==this.stFishEyeManager[e].emCorrectType&&1!=this.stFishEyeManager[e].pRender.SR_SetFishParam(this.stFishEyeManager[e].stPTZSelect)?(this.FECErrorCode=1299,0):1}},{key:"FEC_GetParam",value:function(e,t){return e<0||e>31||null==e?(console.info("%c FEC_GetParam-1 nSubPort:%d","color: red",e),this.FECErrorCode=v,0):null==this.stFishEyeManager[e].pRender?(console.info("%c FEC_GetParam-2 pRender:%d","color: red",this.stFishEyeManager[e].pRender),this.FECErrorCode=m,0):(this.stFishEyeManager[e].pRender.SR_GetFishParam(t),t.emCorrectType=this.stFishEyeManager[e].emCorrectType,1)}},{key:"_IsValidRadiusParam",value:function(e){return e.fRadiusBottom<=e.fRadiusTop||e.fRadiusRight<=e.fRadiusLeft?0:1}},{key:"FEC_SetViewParam",value:function(e,t,r){return e<0||e>31||null==e?(console.info("%c FEC_SetViewParam-1 nSubPort:%d","color: red",e),this.FECErrorCode=v,0):null==this.stFishEyeManager[e].pRender?(console.info("%c FEC_SetViewParam-2 pRender:%d","color: red",this.stFishEyeManager[e].pRender),this.FECErrorCode=m,0):t<1||t>3?(this.FECErrorCode=R,0):(this.FECErrorCode=0,0==this.stFishEyeManager[e].bInited?(this.FECErrorCode=P,0):D<=this.stFishEyeManager[e].emCorrectType?1!=this.stFishEyeManager[e].pRender.SR_SetViewParam(t,r)?(this.FECErrorCode=R,0):1:(this.FECErrorCode=S,0))}},{key:"FEC_GetViewParam",value:function(e,t,r){return r.fValue=-1,e<0||e>31||null==e?(console.info("%c FEC_GetViewParam-1 nSubPort:%d","color: red",e),this.FECErrorCode=v,0):null==this.stFishEyeManager[e].pRender?(console.info("%c FEC_GetViewParam-2 pRender:%d","color: red",this.stFishEyeManager[e].pRender),this.FECErrorCode=m,0):t<1||t>3||0==this.stFishEyeManager[e].bInited?0:(D<=this.stFishEyeManager[e].emCorrectType&&this.stFishEyeManager[e].pRender.SR_GetViewParam(t,r),1)}},{key:"FEC_SetDisplayRegion",value:function(e,t,r,i,a,n,s){return e<0||e>31||null==e?(console.info("%c FEC_SetDisplayRegion-1 nSubPort:%d","color: red",e),this.FECErrorCode=v,0):null==this.stFishEyeManager[e].pRender?(console.info("%c FEC_SetDisplayRegion-2 pRender:%d","color: red",this.stFishEyeManager[e].pRender),this.FECErrorCode=m,0):0!=t||0!=r?(this.FECErrorCode=R,0):0!=this.stFishEyeManager[e].emCorrectType&&this.stFishEyeManager[e].emCorrectType!=E&&this.stFishEyeManager[e].emCorrectType!=F&&this.stFishEyeManager[e].emCorrectType!=T?(this.FECErrorCode=y,0):0==this.stFishEyeManager[e].bInited?(this.FECErrorCode=P,0):i<0||a<0||n<0||s<0?(this.FECErrorCode=R,0):1!=this.stFishEyeManager[e].pRender.SR_SetDisplayRect(i,a,n,s,1)?(this.FECErrorCode=1297,0):1}},{key:"FEC_SetBackCilling",value:function(e,t){return e<0||e>31||null==e?(this.FECErrorCode=v,0):null==this.stFishEyeManager[e].pRender?(this.FECErrorCode=m,0):0==this.stFishEyeManager[e].bInited?(this.FECErrorCode=P,0):1!=this.stFishEyeManager[e].pRender.SR_SetRenderState(2,t)?(this.FECErrorCode=1297,0):1}},{key:"FEC_GetPTZPort",value:function(e,t,r){if(null!=this.stFishEyeManager[e].pRender){var i={nPTZPort:-1};if(1==this.stFishEyeManager[e].pRender.SR_GetPTZPort(t,r,i))return i.nPTZPort}return-1}},{key:"FEC_SetPTZDisplayMode",value:function(e){return e>=0&&e<=2?(null!=this.stFishEyeManager[0].pRender&&this.stFishEyeManager[0].pRender.SR_SetPTZDisplayMode(e),this.FECShowMode=e,1):(console.info("%c FEC_SetPTZDisplayMode ptzMode:%d","color: red",e),0)}},{key:"CheckFrameRGB",value:function(e,t,r,i,a,n){if(null==e)return 0;for(var s=e.width/(i-1),o=e.height/(r-1),x=0,f=0,l=[],h=0;h<r*i;h++)l[h]=0,this.aPOSAdaptBuf[h]=0;if(t){for(var c=0,u=0;u<e.height;u++)for(var _=0;_<e.width;_++){x=(x=Math.round(_/(s/2)/2))<i?x:i-1,f=(f=Math.round(u/(o/2)/2))<r?f:r-1;var d=e.pBuffer[c],p=e.pBuffer[c+1],m=e.pBuffer[c+2],P=Math.round(.299*d+.587*p+.114*m);this.aPOSAdaptBuf[x+f*i]+=P,l[x+f*i]++,c+=4}for(var y=0,g=0;g<r*i;g++)y=this.aPOSAdaptBuf[g]/l[g],this.aPOSAdaptBuf[g]=y>128?0:1}else{for(var b=Math.round(a*e.width),S=Math.round(n*e.height),v=S-2;v<S+2;v++)for(var R=b-2;R<b+2;R++){var C=4*Math.floor((4*R+v*e.width*4)/4),E=e.pBuffer[C],F=e.pBuffer[C+1],T=e.pBuffer[C+2],D=Math.round(.299*E+.587*F+.114*T);this.aPOSAdaptBuf[0]+=D,l[0]++}this.aPOSAdaptBuf[0]=this.aPOSAdaptBuf[0]/l[0]>128?0:1}return 1}},{key:"GetWaterFontParam",value:function(e){var t=e.pFontString.length,r=e.pstFontRotate.fRotateAngle%360/360*2*Math.PI,i=Math.min(e.pstFontSize.nFontWidth,e.pstFontSize.nFontHeight),a=i/this.mainCanvasID.width,n=i/this.mainCanvasID.height,s=a*Math.cos(Math.PI/2-r)*e.pSpace,o=n*Math.sin(Math.PI/2-r)*e.pSpace,x=[],f=[],l=[];if(e.nFontAlign)for(var h=0;h<t;h++)x[h]=e.pFontString[0].length*a/6,f[h]=Math.atan2(x[0],o),l[h]=Math.sqrt(x[0]*x[0],o*o);else for(var c=0;c<t;c++)x[c]=0,f[c]=0,l[c]=0;var u=Math.floor(e.pstFontNumber.nRowNumber),_=Math.floor(e.pstFontNumber.nColNumber),d=u*_;if(e.pstFontRotate.fFillFullScreen){for(var p=[],m=[],P=1/(u-1),y=0;y<u;y++)p[y]=P*y-o*((t-1)/2);for(var g=1/(_-1),b=0;b<_;b++)m[b]=g*b+s*((t-1)/2);for(var S=0;S<d;++S)for(var v=0;v<t;v++){this.pWaterFontParam[t*S+v]={},this.pWaterFontParam[t*S+v].pString=e.pFontString[v],this.pWaterFontParam[t*S+v].nFontWidth=i,this.pWaterFontParam[t*S+v].nFontHeight=i,this.pWaterFontParam[t*S+v].pstStartPos={};var R=S%_,C=Math.floor(S/_),E=Math.PI/2-r+f[v];this.pWaterFontParam[t*S+v].pstStartPos.fX=m[R]-v*s+l[v]*Math.cos(E),this.pWaterFontParam[t*S+v].pstStartPos.fY=p[C]+v*o-l[v]*Math.sin(E),e.nColorAdapt?(this.pWaterFontParam[t*S+v].pstFontColor={},this.pWaterFontParam[t*S+v].pstFontColor.fR=this.aPOSAdaptBuf[S],this.pWaterFontParam[t*S+v].pstFontColor.fG=this.aPOSAdaptBuf[S],this.pWaterFontParam[t*S+v].pstFontColor.fB=this.aPOSAdaptBuf[S],this.pWaterFontParam[t*S+v].pstFontColor.fA=e.pstFontColor.fA):this.pWaterFontParam[t*S+v].pstFontColor=e.pstFontColor,this.pWaterFontParam[t*S+v].bBackGround=!1,this.pWaterFontParam[t*S+v].pstBGColor=null,this.pWaterFontParam[t*S+v].fRotateAngle=e.pstFontRotate.fRotateAngle,this.pWaterFontParam[t*S+v].pFontFamily=e.pFontFamily,e.nFontAlign?(this.pWaterFontParam[t*S+v].textAlign="left",this.pWaterFontParam[t*S+v].textBaseline="top"):(this.pWaterFontParam[t*S+v].textAlign="center",this.pWaterFontParam[t*S+v].textBaseline="middle")}}else for(var F=0;F<e.pFontString.length;F++)this.pWaterFontParam[F]={},this.pWaterFontParam[F].pString=e.pFontString[F],this.pWaterFontParam[F].nFontWidth=i,this.pWaterFontParam[F].nFontHeight=i,this.pWaterFontParam[F].pstStartPos={},this.pWaterFontParam[F].pstStartPos.fX=e.pstStartPos.fX-F*s,this.pWaterFontParam[F].pstStartPos.fY=e.pstStartPos.fY+F*o,e.nColorAdapt?(this.pWaterFontParam[F].pstFontColor={},this.pWaterFontParam[F].pstFontColor.fR=this.aPOSAdaptBuf[0],this.pWaterFontParam[F].pstFontColor.fG=this.aPOSAdaptBuf[0],this.pWaterFontParam[F].pstFontColor.fB=this.aPOSAdaptBuf[0],this.pWaterFontParam[F].pstFontColor.fA=e.pstFontColor.fA):this.pWaterFontParam[F].pstFontColor=e.pstFontColor,this.pWaterFontParam[F].bBackGround=!1,this.pWaterFontParam[F].pstBGColor=null,this.pWaterFontParam[F].fRotateAngle=e.pstFontRotate.fRotateAngle,this.pWaterFontParam[F].pFontFamily=e.pFontFamily,e.nFontAlign?(this.pWaterFontParam[F].textAlign="left",this.pWaterFontParam[F].textBaseline="top"):(this.pWaterFontParam[F].textAlign="center",this.pWaterFontParam[F].textBaseline="middle");return 1}},{key:"SetWaterMarkFont",value:function(e,t){if(this.pWaterFontParam.splice(0,this.pWaterFontParam.length),null===e)return 1;if(e.nColorAdapt){var r={nWidth:16,nHeight:16,nBufferLen:0};if(1==this.oVideoHandle.SR_GetCaptureSize(r)){var i=new Uint8Array(r.nBufferLen),a={};if(a.pBuffer=i,this.oVideoHandle.SR_CaptureScreen(a),a.width=r.nWidth,a.height=r.nHeight,e.pstFontRotate.fFillFullScreen){var n=Math.floor(e.pstFontNumber.nRowNumber),s=Math.floor(e.pstFontNumber.nColNumber);this.CheckFrameRGB(a,1,n,s,0,0)}else this.CheckFrameRGB(a,0,1,1,e.pstStartPos.fX,e.pstStartPos.fY);i=null}}return this.GetWaterFontParam(e),1}},{key:"ImageDecoder",value:function(e,t,r){var i=this;e.decode({frameIndex:r}).then((function(a){i.pWaterImageParam[r]={},i.pWaterImageParam[r].videoStream=a.image,i.pWaterImageParam[r].nImageWidth=a.image.displayWidth,i.pWaterImageParam[r].nImageHeight=a.image.displayHeight,null!=t.pstRectPos?i.pWaterImageParam[r].pstRectPos=t.pstRectPos:i.pWaterImageParam[r].pstRectPos={fLeft:0,fRight:.1,fTop:0,fBottom:.1},null!=t.fAlpha&&t.fAlpha<=1&&t.fAlpha>=0?i.pWaterImageParam[r].fAlpha=t.fAlpha:i.pWaterImageParam[r].fAlpha=1,i.waterMarkImageMax=e.tracks.selectedTrack.frameCount,r<e.tracks.selectedTrack.frameCount-1&&i.ImageDecoder(e,t,r+1)}))}},{key:"SetWaterMarkImage",value:function(e){if(this.pWaterImageParam.splice(0,this.pWaterImageParam.length),null===e)return 1;if(null!=e.pImageData){var t=new ImageDecoder({data:e.pImageData,type:"image/"+e.pImageType});t.tracks.ready.then((function(){})),this.ImageDecoder(t,e,0)}return this.waterMarkImageIndex=0,1}},{key:"_ConvertDisplayEffect",value:function(e,t){switch(e){case 1:return C==t?Z.SR_DE_FISH_PTZ_WALL:F==t||T==t?Z.SR_DE_FISH_PANORAMA_WALL:D==t?Z.SR_DE_FISH_SEMISPHERE:A==t?Z.SR_DE_FISH_PLANET:w==t?Z.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:L==t?Z.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:Z.SR_DE_FISH_ORIGINAL;case 2:return C==t?Z.SR_DE_FISH_PTZ_FLOOR:F==t?Z.SR_DE_FISH_PANORAMA_FLOOR_360:E==t?Z.SR_DE_FISH_PANORAMA_FLOOR_180:T==t?Z.SR_DE_FISH_PANORAMA_WALL:D==t?Z.SR_DE_FISH_SEMISPHERE:I==t?Z.SR_DE_FISH_CYLINDER_FLOOR:M==t?Z.SR_DE_FISH_CYLINDER_SPLIT_FLOOR:A==t?Z.SR_DE_FISH_PLANET:Z.SR_DE_FISH_ORIGINAL;case 3:return C==t?Z.SR_DE_FISH_PTZ_CEILING:F==t?Z.SR_DE_FISH_PANORAMA_CEILING_360:E==t?Z.SR_DE_FISH_PANORAMA_CEILING_180:T==t?Z.SR_DE_FISH_PANORAMA_WALL:D==t?Z.SR_DE_FISH_SEMISPHERE:I==t?Z.SR_DE_FISH_CYLINDER_CEILING:M==t?Z.SR_DE_FISH_CYLINDER_SPLIT_CEILING:A==t?Z.SR_DE_FISH_PLANET:Z.SR_DE_FISH_ORIGINAL;default:return Z.SR_DE_FISH_ORIGINAL}}},{key:"GetCanvasData",value:function(e){var t={nWidth:0,nHeight:0,nBufferLen:0};(1!=this.oVideoHandle.SR_GetCaptureSize(t)||t.nBufferLen<=0)&&e(null);var r=new Uint8Array(t.nBufferLen);null==r&&e(null);var i={};i.pBuffer=r,this.oVideoHandle.SR_CaptureScreen(i),e(r,t.nWidth,t.nHeight)}},{key:"FindIntelNodefromList",value:function(e){if(0!=this.privateLinesInfo.length){var t=this.privateLinesInfo[0].absTimeStamp;if(t<=e+100&&t>e-100)this.curLinesInfo=this.privateLinesInfo.shift();else if(t>e+2e3||t<e-2e3)for(this.curLinesInfo=this.privateLinesInfo.shift();this.privateLinesInfo.length>0;){var r=this.privateLinesInfo[0].absTimeStamp;if(!(r>e+2e3||r<e-2e3))break;this.curLinesInfo=this.privateLinesInfo.shift()}}if(0!=this.privateFontsInfo.length){var i=this.privateFontsInfo[0].absTimeStamp;if(i<=e+1e3&&i>e-1e3)this.curFontsInfo=this.privateFontsInfo.shift();else if(i>e+2e3||i<e-2e3)for(this.curFontsInfo=this.privateFontsInfo.shift();this.privateFontsInfo.length>0;){var a=this.privateFontsInfo[0].absTimeStamp;if(!(a>e+2e3||a<e-2e3))break;this.curFontsInfo=this.privateFontsInfo.shift()}}if(0!=this.privateImageInfo.length){var n=this.privateImageInfo[0].absTimeStamp;if(n<=e+1e3&&n>e-1e3)this.curImagesInfo=this.privateImageInfo.shift();else if(n>e+2e3||n<e-2e3)for(this.curImagesInfo=this.privateImageInfo.shift();this.privateImageInfo.length>0;){var s=this.privateImageInfo[0].absTimeStamp;if(!(s>e+2e3||s<e-2e3))break;this.curImagesInfo=this.privateImageInfo.shift()}}return 1}},{key:"RenderPrivateData",value:function(e){return 0!=this.privateLinesInfo.length||e||(this.curLinesInfo=null),1}},{key:"InputPrivateInfo",value:function(e,t,r){var i=!1,a=0;if(e.linesNum>0){if(e.absTimeStamp<=this.maxPrivateLineTimeStamp){var n=0;for(n=0;n<this.privateLinesInfo.length;n++)if(this.privateLinesInfo[n].absTimeStamp==e.absTimeStamp){i=!0,a=n;break}}if(i){var s=this.privateLinesInfo[a].linesNum;this.privateLinesInfo[a].linesNum=s+e.linesNum;for(var o=0;o<e.linesNum;o++){this.privateLinesInfo[a].stDrawLinesArray[o+s]={},this.privateLinesInfo[a].stDrawLinesArray[o+s].vertex_num=e.stDrawLinesArray[o].vertex_num,this.privateLinesInfo[a].stDrawLinesArray[o+s].lineWidth=e.stDrawLinesArray[o].lineWidth,this.privateLinesInfo[a].stDrawLinesArray[o+s].bFill=e.stDrawLinesArray[o].bFill,this.privateLinesInfo[a].stDrawLinesArray[o+s].bLoop=e.stDrawLinesArray[o].bLoop,this.privateLinesInfo[a].stDrawLinesArray[o+s].color={},this.privateLinesInfo[a].stDrawLinesArray[o+s].color.R=e.stDrawLinesArray[o].color.R,this.privateLinesInfo[a].stDrawLinesArray[o+s].color.G=e.stDrawLinesArray[o].color.G,this.privateLinesInfo[a].stDrawLinesArray[o+s].color.B=e.stDrawLinesArray[o].color.B,this.privateLinesInfo[a].stDrawLinesArray[o+s].color.A=e.stDrawLinesArray[o].color.A,this.privateLinesInfo[a].stDrawLinesArray[o+s].stPoint=[];for(var x=0;x<e.stDrawLinesArray[o].vertex_num;x++)this.privateLinesInfo[a].stDrawLinesArray[o+s].stPoint[x]={},this.privateLinesInfo[a].stDrawLinesArray[o+s].stPoint[x].x=e.stDrawLinesArray[o].stPoint[x].x,this.privateLinesInfo[a].stDrawLinesArray[o+s].stPoint[x].y=e.stDrawLinesArray[o].stPoint[x].y}}else{this.maxPrivateLineTimeStamp<e.absTimeStamp&&(this.maxPrivateLineTimeStamp=e.absTimeStamp);var f={};f.linesNum=e.linesNum,f.absTimeStamp=e.absTimeStamp,f.stDrawLinesArray=[];for(var l=0;l<e.linesNum;l++){f.stDrawLinesArray[l]={},f.stDrawLinesArray[l].vertex_num=e.stDrawLinesArray[l].vertex_num,f.stDrawLinesArray[l].lineWidth=e.stDrawLinesArray[l].lineWidth,f.stDrawLinesArray[l].bFill=e.stDrawLinesArray[l].bFill,f.stDrawLinesArray[l].bLoop=e.stDrawLinesArray[l].bLoop,f.stDrawLinesArray[l].color={},f.stDrawLinesArray[l].color.R=e.stDrawLinesArray[l].color.R,f.stDrawLinesArray[l].color.G=e.stDrawLinesArray[l].color.G,f.stDrawLinesArray[l].color.B=e.stDrawLinesArray[l].color.B,f.stDrawLinesArray[l].color.A=e.stDrawLinesArray[l].color.A,f.stDrawLinesArray[l].stPoint=[];for(var h=0;h<e.stDrawLinesArray[l].vertex_num;h++)f.stDrawLinesArray[l].stPoint[h]={},f.stDrawLinesArray[l].stPoint[h].x=e.stDrawLinesArray[l].stPoint[h].x,f.stDrawLinesArray[l].stPoint[h].y=e.stDrawLinesArray[l].stPoint[h].y}this.privateLinesInfo.push(f)}}if(t.nFontsNum>0){if(t.absTimeStamp<=this.maxPrivateLineTimeStamp){var c=0;for(c=0;c<this.privateFontsInfo.length;c++)if(this.privateFontsInfo[c].absTimeStamp==t.absTimeStamp){i=!0,a=c;break}}if(i);else{this.maxPrivateLineTimeStamp<t.absTimeStamp&&(this.maxPrivateLineTimeStamp=t.absTimeStamp);var u={};u.nFontsNum=t.nFontsNum,u.absTimeStamp=t.absTimeStamp,u.stDrawFontsArray=[];for(var _=0;_<t.nFontsNum;_++)u.stDrawFontsArray[_]={},u.stDrawFontsArray[_].nFontSizeW=t.stDrawFontsArray[_].nFontSizeW,u.stDrawFontsArray[_].nFontSizeH=t.stDrawFontsArray[_].nFontSizeH,u.stDrawFontsArray[_].color={},u.stDrawFontsArray[_].color.R=t.stDrawFontsArray[_].color.R,u.stDrawFontsArray[_].color.G=t.stDrawFontsArray[_].color.G,u.stDrawFontsArray[_].color.B=t.stDrawFontsArray[_].color.B,u.stDrawFontsArray[_].color.A=t.stDrawFontsArray[_].color.A,u.stDrawFontsArray[_].stPoint={},u.stDrawFontsArray[_].stPoint.x=t.stDrawFontsArray[_].stPoint.x,u.stDrawFontsArray[_].stPoint.y=t.stDrawFontsArray[_].stPoint.y,u.stDrawFontsArray[_].fontstring=t.stDrawFontsArray[_].fontString;this.privateFontsInfo.push(u)}}if(r.nPixelFormat>0){if(r.absTimeStamp<=this.maxPrivateLineTimeStamp){var d=0;for(d=0;d<this.privateImageInfo.length;d++)if(this.privateImageInfo[d].absTimeStamp==r.absTimeStamp){i=!0,a=d;break}}if(i);else{this.maxPrivateLineTimeStamp<r.absTimeStamp&&(this.maxPrivateLineTimeStamp=r.absTimeStamp);var p={};p.absTimeStamp=r.absTimeStamp,p.nWidth=r.nWidth,p.nHeight=r.nHeight,p.pstRect={},p.pstRect.fTop=r.pstRect.fTop,p.pstRect.fBottom=r.pstRect.fBottom,p.pstRect.fLeft=r.pstRect.fLeft,p.pstRect.fRight=r.pstRect.fRight,p.nPixelFormat=r.nPixelFormat,p.fAlpha=r.fAlpha,p.picImageData=r.picImageData,this.privateImageInfo.push(p)}}return 1}},{key:"WebGLDisplayCallBack",value:function(e){if(0!=e.privateLinesInfo.length||null!=e.curLinesInfo){if(null!=e.curLinesInfo){for(var t=[],r=0,i=1,a=0;a<e.curLinesInfo.linesNum;a++){t[a]={},t[a].nPointNum=e.curLinesInfo.stDrawLinesArray[a].vertex_num,t[a].nLineWidth=e.curLinesInfo.stDrawLinesArray[a].lineWidth,i=e.curLinesInfo.stDrawLinesArray[a].bFill,t[a].bLoop=e.curLinesInfo.stDrawLinesArray[a].bLoop,t[a].pstColor={},t[a].pstColor.fR=e.curLinesInfo.stDrawLinesArray[a].color.R,t[a].pstColor.fG=e.curLinesInfo.stDrawLinesArray[a].color.G,t[a].pstColor.fB=e.curLinesInfo.stDrawLinesArray[a].color.B,t[a].pstColor.fA=e.curLinesInfo.stDrawLinesArray[a].color.A,t[a].pstPoints=[];for(var n=0;n<t[a].nPointNum;n++)t[a].pstPoints[n]={},t[a].pstPoints[n].fX=e.curLinesInfo.stDrawLinesArray[a].stPoint[n].x,t[a].pstPoints[n].fY=e.curLinesInfo.stDrawLinesArray[a].stPoint[n].y;r+=t[a].nPointNum}e.oVideoHandle.SR_DrawLinesEx(t,e.curLinesInfo.linesNum,r,i)}e.curLinesInfo=null}if((0!=e.privateFontsInfo.length||null!=e.curFontsInfo)&&null!=e.curFontsInfo&&0!=e.curFontsInfo.nFontsNum){for(var s=[],o=0;o<e.curFontsInfo.nFontsNum;o++){var x={},f=e.curFontsInfo.stDrawFontsArray[o].fontstring,l={};l.fX=e.curFontsInfo.stDrawFontsArray[o].stPoint.x,l.fY=e.curFontsInfo.stDrawFontsArray[o].stPoint.y;var h={fR:1,fG:0,fB:0};h.fA=e.curFontsInfo.stDrawFontsArray[o].color.A;var c=e.curFontsInfo.stDrawFontsArray[o].nFontSizeW,u=e.curFontsInfo.stDrawFontsArray[o].nFontSizeH;x.pString=f,x.pstStartPos=l,x.nFontWidth=c,x.nFontHeight=u,x.pstFontColor=h,x.bBackGround=!1,x.pstBGColor=null,x.fRotateAngle=0,x.pFontFamily="sans-serif",s.push(x)}e.oVideoHandle.SR_DrawFontEx(s,e.curFontsInfo.nFontsNum)}if(0!=e.privateImageInfo.length||null!=e.curImagesInfo){var _=null;null!=e.curImagesInfo&&null!=e.curImagesInfo&&null!=e.curImagesInfo.picImageData&&null!=e.curImagesInfo.picImageData&&(_=new Uint16Array(e.curImagesInfo.picImageData.buffer)),null!=e.curImagesInfo&&e.curImagesInfo.nPixelFormat>0&&e.oVideoHandle.SR_DrawImage(_,e.curImagesInfo.nWidth,e.curImagesInfo.nHeight,e.curImagesInfo.pstRect,e.curImagesInfo.nPixelFormat,e.curImagesInfo.fAlpha)}if(0!==e.pWaterFontParam.length&&e.oVideoHandle.SR_DrawFontEx(e.pWaterFontParam,e.pWaterFontParam.length),0!==e.pWaterImageParam.length){e.waterMarkImageIndex>=e.waterMarkImageMax&&(e.waterMarkImageIndex=0);var d=e.waterMarkImageIndex;e.oVideoHandle.SR_DrawImage(e.pWaterImageParam[d].videoStream,e.pWaterImageParam[d].nImageWidth,e.pWaterImageParam[d].nImageHeight,e.pWaterImageParam[d].pstRectPos,j,e.pWaterImageParam[d].fAlpha),e.waterMarkImageIndex++}}}]),t}(),Re=function(){function t(){e(this,t),this.startTime=0,this.curTime=0,this.timeWalk=0,this.lastDate=0,this.preTimerStamp=0}return r(t,[{key:"Init",value:function(){this.startTime=this.GetCurTime()}},{key:"GetCurTime",value:function(){return this.curTime=60*(new Date).getHours()*60*1e3+60*(new Date).getMinutes()*1e3+1e3*(new Date).getSeconds()+(new Date).getMilliseconds(),this.lastDate=(new Date).getDate(),this.curTime}},{key:"GetTimerWalk",value:function(){var e=this.GetCurTime()-this.startTime;return this.lastDate!==(new Date).getDate()&&(e+=24*((new Date).getDate()-this.lastDate)*60*60*1e3),e}},{key:"timerReset",value:function(){this.startTime=0,this.curTime=0,this.timeWalk=0,this.lastDate=0,this.preTimerStamp=0}}]),t}(),Ce=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e(this,t),this.canvas=null,this.streamOpenMode=0,this.context=null,this.oVideoDecoder=null,this.frameBuffers=[],this.initTimer=!1,this.preTimeStamp=0,this.baseTimeStamp=0,this.resetTimer=!0,this.RenderFrame=this.RenderFrame.bind(this),this.renderCurStatus=2,this.playSpeed=1,this.nplaySpeed=1,this.displayBuf=14,this.needForward=!1,this.firstFrame=!0,this.LatcyTime=0,this.displayFrameInfoCB=null,this.displayFrameInfo=[],this.curFrameInfo={},this.curFrameInfo.timeStamp=0,this.sx=0,this.sy=0,this.sw=0,this.sh=0,this.displayRunning=!1,this.oRenderTimer=null,this.waitIFrameTimestamp=0,this.curFrame=null,this.player=null,null!=r&&(this.player=r),this.renderEngine="webgl",this.oVideoRender=null,this.FECCanvasID="",this.oVideoRender=new ve}return r(t,[{key:"init",value:function(e,t,r,i){this.canvas=e,this.streamOpenMode=t,this.renderEngine=i,this.SetCurStatus(2),null==this.oVideoDecoder&&(this.oVideoDecoder=new N(r,this,this.player),null!==this.oVideoDecoder&&this.oVideoDecoder.initDecoder()),this.frameBuffers=this.oVideoDecoder.ready_frames,null!=this.oVideoRender&&this.oVideoRender.InitDisplay(this.canvas,this.renderEngine,256),null==this.oRenderTimer&&(this.oRenderTimer=new Re)}},{key:"HardDecodeError",value:function(){return this.player._switchHardToSoft(),1}},{key:"inputData",value:function(e,t){var r={};r.port=t.port,r.codecType=t.codecType,r.frameType=t.frameType,r.frameSize=t.frameSize,r.width=t.width,r.height=t.height,r.timeStamp=t.timeStamp,r.frameRate=t.frameRate,r.frameNum=t.frameNum,r.interlace=t.interlace,r.streamEnd=t.streamEnd,r.cropLeft=t.cropLeft,r.cropRight=t.cropRight,r.cropTop=t.cropTop,r.cropBottom=t.cropBottom,r.year=t.year,r.month=t.month,r.week=t.week,r.day=t.day,r.hour=t.hour,r.minute=t.minute,r.second=t.second,r.milliseconds=t.milliseconds,this.displayFrameInfo.push(r),this.oVideoDecoder.inputData(e,t)}},{key:"_resetDecoder",value:function(){var e=this;return new Promise((function(t,r){e.oVideoDecoder.resetDecoder().then((function(){e.displayFrameInfo.splice(0,e.displayFrameInfo.length),e.curFrameInfo={},e.oVideoRender.DeInitPrivateParam(),e.renderCurStatus=2,e.player?e.player.JSPlayM4_ResetEnd():postMessage({function:"resetEnd"}),t()}),(function(){r()}))}))}},{key:"_resetRenderTimer",value:function(){this.initTimer=!1,this.preTimeStamp=0,this.baseTimeStamp=0,this.resetTimer=!0,null!=this.oRenderTimer&&this.oRenderTimer.timerReset(),this.RenderFrame=this.RenderFrame.bind(this),this.renderCurStatus=2,this.curTimeStamp=0,this.getImageJPEG=!1,this.getImageBMP=!1,this.getCropImageJPEG=!1,this.getCropImageBMP=!1,this.displayFrameInfoCB=null,this.displayFrameInfo.splice(0,this.displayFrameInfo.length),this.curFrameInfo={}}},{key:"_destroyPlayCtrl",value:function(){var e=this;this.oVideoDecoder.destroyDecoder().then((function(){e.oVideoDecoder=null,null!=e.oVideoRender&&(e.oVideoRender.ReleaseDisplay(),e.oVideoRender=null),e._resetRenderTimer(),e.oRenderTimer=null,e.displayRunning=!1,console.log(">>>JS 02 destroy oVideoDecoder/oVideoRender")}),(function(){console.log("stop failed ")}))}},{key:"RenderFrame",value:function(){var e=this;switch(this.renderCurStatus){case 0:this._resetRenderTimer(),this._resetDecoder().then((function(){var t=setTimeout((function(){e.RenderFrame(),clearTimeout(t)}),1)}),(function(){}));break;case 2:if(this.displayRunning)this.chooseFrame().then((function(t){if(e.curFrame=t,-1==e.displayBuf||0==e.streamOpenMode&&0==e.LatcyTime)null!=e.curFrame&&(e.curTimeStamp=e.curFrame.timestamp,e.paint(e.curFrame)),requestAnimationFrame(e.RenderFrame);else if(null!=e.curFrame){e.initTimer&&!e.resetTimer||(e.oRenderTimer.Init(),e.initTimer=!0,e.resetTimer=!1,e.preTimeStamp=e.curFrame.timestamp,e.baseTimeStamp=e.curFrame.timestamp,1==e.streamOpenMode&&(e.LatcyTime=0)),e.curTimeStamp=e.curFrame.timestamp;var r=e.curTimeStamp-e.preTimeStamp,i=e.curTimeStamp-e.baseTimeStamp;(r>5e3||r<0||i<0)&&(e.oRenderTimer.Init(),e.preTimeStamp=e.curFrame.timestamp,e.baseTimeStamp=e.curTimeStamp);var a=(e.curTimeStamp-e.baseTimeStamp+e.LatcyTime)/e.playSpeed-e.oRenderTimer.GetTimerWalk();if(a<15&&a>-15)e.paint(e.curFrame),e.preTimeStamp=e.curTimeStamp,e.RenderFrame();else if(a<0)e.paint(e.curFrame),e.preTimeStamp=e.curTimeStamp,e.RenderFrame();else var n=setTimeout((function(){2==e.renderCurStatus?(e.paint(e.curFrame),e.preTimeStamp=e.curTimeStamp,e.RenderFrame()):e.RenderFrame(),clearTimeout(n)}),a-5)}else{e.playSpeed;var s=setTimeout((function(){e.RenderFrame(),clearTimeout(s)}),0)}}));else var t=setTimeout((function(){e.RenderFrame(),clearTimeout(t)}),5);break;case 3:var r=setTimeout((function(){e._refresh(),e.RenderFrame(),clearTimeout(r)}),5);break;case 5:if(this.needForward)this.chooseFrame().then((function(t){e.curFrame=t;var r=setTimeout((function(){null!=e.curFrame&&(e.paint(e.curFrame),e.needForward=!1),e.RenderFrame(),clearTimeout(r)}),1)}));else var i=setTimeout((function(){e._refresh(),e.RenderFrame(),clearTimeout(i)}),5);break;case 4:return void this._destroyPlayCtrl();default:return}}},{key:"paint",value:function(e){var t=this;return new Promise((function(r,i){if(4==t.curstatus||null==e||null==t.oVideoRender)r();else{t.waitIFrameTimestamp===e.timestamp&&(t.resetTimer=!0);var a={nCropLeft:0,nCropRight:0,nCropTop:0,nCropBottom:0};a.nCodeWidth=e.displayWidth,a.nCodeHeight=e.displayHeight;var n={x:0,y:0};n.width=e.displayWidth,n.height=e.displayHeight,t.oVideoRender.DisplayFrame(e,e.displayWidth,e.displayHeight,e.timestamp,a,null).then((function(e){null!==t.displayFrameInfoCB&&t.respondFrameInfoCB(e),t.firstFrame&&(null!=t.player?null!=t.player.FFCallBackFun&&t.player.FFCallBackFun():postMessage({function:"firstFrameCB",value:!0}),t.firstFrame=!1),r()}))}}))}},{key:"respondFrameInfoCB",value:function(e){if(0!=this.displayFrameInfo.length&&this.curFrameInfo.timeStamp!==e){for(var t={},r=0;r<this.displayFrameInfo.length&&(t=this.displayFrameInfo.shift()).timeStamp!=e;r++);this.curFrameInfo.port=t.port,this.curFrameInfo.codecType=t.codecType,this.curFrameInfo.frameType=t.frameType,this.curFrameInfo.frameSize=t.frameSize,this.curFrameInfo.width=t.width,this.curFrameInfo.height=t.height,this.curFrameInfo.timeStamp=t.timeStamp,this.curFrameInfo.frameRate=t.frameRate,this.curFrameInfo.frameNum=t.frameNum,this.curFrameInfo.interlace=t.interlace,this.curFrameInfo.streamEnd=t.streamEnd,this.curFrameInfo.cropLeft=t.cropLeft,this.curFrameInfo.cropRight=t.cropRight,this.curFrameInfo.cropTop=t.cropTop,this.curFrameInfo.cropBottom=t.cropBottom,this.curFrameInfo.year=t.year,this.curFrameInfo.month=t.month,this.curFrameInfo.week=t.week,this.curFrameInfo.day=t.day,this.curFrameInfo.hour=t.hour,this.curFrameInfo.minute=t.minute,this.curFrameInfo.second=t.second,this.curFrameInfo.milliseconds=t.milliseconds,this.displayFrameInfoCB(this.curFrameInfo)}}},{key:"postImageData",value:function(e,t,r,i,a){this.player?(this.getImageJPEG&&(this.getImageJPEG=!1,this.player._GetImage2(e,t,r,i,"jpeg",a,0,0,0,0)),this.getImageBMP&&(this.getImageBMP=!1,this.player._GetImage2(e,t,r,i,"bmp",a,0,0,0,0)),this.getCropImageJPEG&&(this.getCropImageJPEG=!1,this.player._GetImage2(e,t,r,i,"jpeg",a,this.sx,this.sy,this.sw,this.sh)),this.getCropImageBMP&&(this.getCropImageBMP=!1,this.player._GetImage2(e,t,r,i,"bmp",a,this.sx,this.sy,this.sw,this.sh))):(this.getImageJPEG&&(this.getImageJPEG=!1,postMessage({function:"imageYUV",value:e.buffer,size:t,width:r,height:i,type:"jpeg",yuvType:a,sx:0,sy:0,sw:0,sh:0},[e.buffer])),this.getImageBMP&&(this.getImageBMP=!1,postMessage({function:"imageYUV",value:e.buffer,size:t,width:r,height:i,type:"bmp",yuvType:a,sx:0,sy:0,sw:0,sh:0},[e.buffer])),this.getCropImageJPEG&&(this.getCropImageJPEG=!1,postMessage({function:"imageYUV",value:e.buffer,size:t,width:r,height:i,type:"jpeg",yuvType:a,sx:this.sx,sy:this.sy,sw:this.sw,sh:this.sh},[e.buffer])),this.getCropImageBMP&&(this.getCropImageBMP=!1,postMessage({function:"imageYUV",value:e.buffer,size:t,width:r,height:i,type:"bmp",yuvType:a,sx:this.sx,sy:this.sy,sw:this.sw,sh:this.sh},[e.buffer])))}},{key:"chooseFrame",value:function(){var e=this;return new Promise((function(t,r){if(null==e.oVideoRender||null==e.oVideoDecoder)t(null);else if(e.oVideoDecoder.decoderObjNeedReset)e.oVideoDecoder.resetDecoder().then((function(){e.oVideoDecoder.decoderObjNeedReset=!1,t(null)}),(function(){r()}));else{var i=e.oVideoDecoder.GetFrameBufferLength();1==e.streamOpenMode&&i<3?t(null):e.oVideoDecoder.GetFrame().then((function(e){t(e)}),(function(){}))}}))}},{key:"SetDisplayRegion",value:function(e,t,r,i){return null==this.oVideoRender?0:(this.sx=e,this.sy=t,this.sw=r,this.sh=i,this.oVideoRender.SetDisplayRect(e,t,r,i))}},{key:"SetCurStatus",value:function(e){return this.renderCurStatus=e,1}},{key:"fast",value:function(){var e=this._GetFastSpeed(this.nplaySpeed);return this._SetPlaySpeed(e)}},{key:"slow",value:function(){var e=this._GetSlowSpeed(this.nplaySpeed);return this._SetPlaySpeed(e)}},{key:"Pause",value:function(e){if(e)this.SetCurStatus(3);else{if(3!==this.renderCurStatus)return-1;this.SetCurStatus(2),this.resetTimer=!0}return 1}},{key:"_refresh",value:function(){0!=this.frameBuffers.length&&this.paint(this.frameBuffers[0])}},{key:"OneByOne",value:function(e){if(e)this.SetCurStatus(5),this.needForward=!0;else{if(5!==this.renderCurStatus)return-1;this.SetCurStatus(2),this.resetTimer=!0,this.needForward=!1,this._SetPlaySpeed(1)}return 1}},{key:"SetCanvasSize",value:function(e,t){return null!=this.oVideoRender&&this.oVideoRender.SetCanvasSize(e,t)}},{key:"GetCanvasSize",value:function(){return null!=this.oVideoRender&&this.oVideoRender.GetCanvasSize()}},{key:"GetPlayedTime",value:function(){return this.curTimeStamp}},{key:"_SetPlaySpeed",value:function(e){switch(e){case-16:case-8:case-4:case-2:case 1:case 2:case 4:case 8:case 16:case 32:case 64:break;default:return-1}return e===this.nplaySpeed||(this.nplaySpeed=e,this.playSpeed=e>0?e:-1/e,console.log("playSpeed:"+this.playSpeed),this.resetTimer=!0,this.needForward=!1,2!=this.renderCurStatus&&this.SetCurStatus(2)),1}},{key:"_GetFastSpeed",value:function(e){var t=0;switch(e){case-16:t=-8;break;case-8:t=-4;break;case-4:t=-2;break;case-2:t=1;break;case 1:t=2;break;case 2:t=4;break;case 4:t=8;break;case 8:t=16;break;case 16:t=32;break;case 32:t=64;break;default:t=0}return t}},{key:"_GetSlowSpeed",value:function(e){var t=0;switch(e){case-8:t=-16;break;case-4:t=-8;break;case-2:t=-4;break;case 1:t=-2;break;case 2:t=1;break;case 4:t=2;break;case 8:t=4;break;case 16:t=8;break;case 32:t=16;break;case 64:t=32;break;default:t=0}return t}},{key:"SetDisplayBuf",value:function(e){return this.displayBuf=e,this.LatcyTime=1==e?0:15==e?700:45==e?1900:e>6&&e<45?40*e+100:-1==e?0:50,1}},{key:"GetJPEG",value:function(){var e=this;this.oVideoDecoder.GetImageYUV().then((function(t){var r=t.yuvFrameBuffer,i=t.yuvLength,a=t.displayWidth,n=t.displayHeight,s=t.yuvType;-1!=r&&(e.player?e.player._GetImage2(r,i,a,n,"jpeg",s,0,0,0,0):postMessage({function:"imageYUV",value:r.buffer,size:i,width:a,height:n,type:"jpeg",yuvType:s,sx:0,sy:0,sw:0,sh:0},[r.buffer]))}),(function(){}))}},{key:"GetBMP",value:function(){var e=this;this.oVideoDecoder.GetImageYUV().then((function(t){var r=t.yuvFrameBuffer,i=t.yuvLength,a=t.displayWidth,n=t.displayHeight,s=t.yuvType;-1!=r&&(e.player?e.player._GetImage2(r,i,a,n,"bmp",s,0,0,0,0):postMessage({function:"imageYUV",value:r.buffer,size:i,width:a,height:n,type:"bmp",yuvType:s,sx:0,sy:0,sw:0,sh:0},[r.buffer]))}),(function(){}))}},{key:"GetCropJPEG",value:function(){var e=this;this.oVideoDecoder.GetImageYUV().then((function(t){var r=t.yuvFrameBuffer,i=t.yuvLength,a=t.displayWidth,n=t.displayHeight,s=t.yuvType;-1!=r&&(e.player?e.player._GetImage2(r,i,a,n,"jpeg",s,e.sx,e.sy,e.sw,e.sh):postMessage({function:"imageYUV",value:r.buffer,size:i,width:a,height:n,type:"jpeg",yuvType:s,sx:e.sx,sy:e.sy,sw:e.sw,sh:e.sh},[r.buffer]))}),(function(){}))}},{key:"GetCropBMP",value:function(){var e=this;this.oVideoDecoder.GetImageYUV().then((function(t){var r=t.yuvFrameBuffer,i=t.yuvLength,a=t.displayWidth,n=t.displayHeight,s=t.yuvType;-1!=r&&(e.player?e.player._GetImage2(r,i,a,n,"bmp",s,e.sx,e.sy,e.sw,e.sh):postMessage({function:"imageYUV",value:r.buffer,size:i,width:a,height:n,type:"bmp",yuvType:s,sx:e.sx,sy:e.sy,sw:e.sw,sh:e.sh},[r.buffer]))}),(function(){}))}},{key:"GetCanvasCapture",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support GetCanvasCapture","color:red"),0):(this.oVideoRender.GetCanvasData(e),1)}},{key:"SetDecodeFrameType",value:function(e){return this.waitIFrameTimestamp=e,1}},{key:"SetStreamEnd",value:function(){return this.oVideoDecoder.SetStreamEnd(),1}},{key:"SetAntialias",value:function(e){return null!=this.oVideoRender?this.oVideoRender.SetAntialias(e):0}},{key:"SetFrameInfoCallBack",value:function(e,t){return this.displayFrameInfoCB=t?e:null,1}},{key:"FEC_SetCanvasID",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetCanvasID(e):(this.FECCanvasID=e,0)}},{key:"FEC_ResetCorrectType",value:function(e,t,r){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_ResetCorrectType(e,t,r):0}},{key:"FEC_GetPort",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),-1):null!=this.oVideoRender?this.oVideoRender.FEC_GetPort(e,t):-1}},{key:"FEC_Enable",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_Enable(e):0}},{key:"FEC_SetParam",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetParam(e,t):0}},{key:"FEC_GetParam",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_GetParam(e,t):0}},{key:"FEC_SetViewParam",value:function(e,t,r){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetViewParam(e,t,r):0}},{key:"FEC_GetViewParam",value:function(e,t,r){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_GetViewParam(e,t,r):0}},{key:"FEC_SetWnd",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetWnd(e,t):0}},{key:"FEC_Disable",value:function(e,t,r){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_Disable(e,t,r):0}},{key:"FEC_DelPort",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_DelPort(e):0}},{key:"FEC_SetDisplayRegion",value:function(e,t,r,i,a,n,s){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetDisplayRegion(e,t,r,i,a,n,s):0}},{key:"FEC_SetBackCilling",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetBackCilling(e,t):0}},{key:"FEC_GetPTZPort",value:function(e,t,r){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),-1):null!=this.oVideoRender?this.oVideoRender.FEC_GetPTZPort(e,t,r):-1}},{key:"FEC_SetPTZDisplayMode",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetPTZDisplayMode(e):0}},{key:"InputPrivateInfo",value:function(e,t,r){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support PrivateInfo","color:red"),0):null!=this.oVideoRender?this.oVideoRender.InputPrivateInfo(e,t,r):1}},{key:"RenderPrivateData",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support PrivateInfo","color:red"),0):null!=this.oVideoRender?this.oVideoRender.RenderPrivateData(e):1}},{key:"SetWaterMarkFont",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine||null==this.oVideoRender?(console.log("%c param error this.renderEngine:%d,this.oVideoRender:%d","color:red",this.renderEngine,this.oVideoRender),0):(null!=this.oVideoRender&&this.oVideoRender.SetWaterMarkFont(e,{yuvFrameBuffer:-1,yuvLength:-1,displayWidth:-1,displayHeight:-1,yuvType:-1}),1)}},{key:"SetWaterMarkImage",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support SetWaterMarkImage","color:red"),0):null!=this.oVideoRender?this.oVideoRender.SetWaterMarkImage(e):1}},{key:"SetD3DPostProcess",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support SetD3DPostProcess","color:red"),0):null!=this.oVideoRender?this.oVideoRender.SetD3DPostProcess(e,t):1}}]),t}(),Ee=function(){function t(r){e(this,t),this.player=r,this.oVideoPlayCtrl=new Ce(r)}return r(t,[{key:"init",value:function(e,t,r,i){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.init(e,t,r,i)}},{key:"inputData",value:function(e,t){null!=this.oVideoPlayCtrl&&this.oVideoPlayCtrl.inputData(e,t)}},{key:"SetDisplayRegion",value:function(e,t,r,i){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.SetDisplayRegion(e,t,r,i)}},{key:"stop",value:function(){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.SetCurStatus(4),this.oVideoPlayCtrl=null,console.log(">>>JS 03 destroy oVideoPlayCtrl")}},{key:"fast",value:function(){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.fast()?0:void 0}},{key:"slow",value:function(){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.slow()?0:void 0}},{key:"SetDisplayBuf",value:function(e){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.SetDisplayBuf(e)?0:void 0}},{key:"Pause",value:function(e){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.Pause(e)?0:void 0}},{key:"OneByOne",value:function(e){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.OneByOne(e)?0:void 0}},{key:"SetCanvasSize",value:function(e,t){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.SetCanvasSize(e,t)?0:void 0}},{key:"GetCanvasSize",value:function(){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.GetCanvasSize()?0:void 0}},{key:"GetPlayedTime",value:function(){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.GetPlayedTime()}},{key:"needReset",value:function(){this.oVideoPlayCtrl.SetCurStatus(0)}},{key:"GetJPEG",value:function(){this.oVideoPlayCtrl.GetJPEG()}},{key:"GetBMP",value:function(){this.oVideoPlayCtrl.GetBMP()}},{key:"GetCropJPEG",value:function(){this.oVideoPlayCtrl.GetCropJPEG()}},{key:"GetCropBMP",value:function(){this.oVideoPlayCtrl.GetCropBMP()}},{key:"JSPlayM4_GetCanvasCapture",value:function(e){this.oVideoPlayCtrl.GetCanvasCapture(e)}},{key:"SetDecodeFrameType",value:function(e){this.oVideoPlayCtrl.SetDecodeFrameType(e)}},{key:"streamEnd",value:function(){this.oVideoPlayCtrl.SetStreamEnd()}},{key:"SetAntialias",value:function(e){return this.oVideoPlayCtrl.SetAntialias(e)}},{key:"SetFrameInfoCallBack",value:function(e,t){return this.oVideoPlayCtrl.SetFrameInfoCallBack(e,t)}},{key:"FEC_SetCanvasID",value:function(e){return this.oVideoPlayCtrl.FEC_SetCanvasID(e)}},{key:"FEC_ResetCorrectType",value:function(e,t,r){return this.oVideoPlayCtrl.FEC_ResetCorrectType(e,t,r)}},{key:"FEC_GetPort",value:function(e,t){return this.oVideoPlayCtrl.FEC_GetPort(e,t)}},{key:"FEC_Enable",value:function(e){return this.oVideoPlayCtrl.FEC_Enable(e)}},{key:"FEC_SetParam",value:function(e,t){return this.oVideoPlayCtrl.FEC_SetParam(e,t)}},{key:"FEC_GetParam",value:function(e,t){return this.oVideoPlayCtrl.FEC_GetParam(e,t)}},{key:"FEC_SetViewParam",value:function(e,t,r){return this.oVideoPlayCtrl.FEC_SetViewParam(e,t,r)}},{key:"FEC_GetViewParam",value:function(e,t,r){return this.oVideoPlayCtrl.FEC_GetViewParam(e,t,r)}},{key:"FEC_SetWnd",value:function(e,t){return this.oVideoPlayCtrl.FEC_SetWnd(e,t)}},{key:"FEC_Disable",value:function(e,t,r){return this.oVideoPlayCtrl.FEC_Disable(e,t,r)}},{key:"FEC_DelPort",value:function(e){return this.oVideoPlayCtrl.FEC_DelPort(e)}},{key:"FEC_SetDisplayRegion",value:function(e,t,r,i,a,n,s){return this.oVideoPlayCtrl.FEC_SetDisplayRegion(e,t,r,i,a,n,s)}},{key:"FEC_SetBackCilling",value:function(e,t){return this.oVideoPlayCtrl.FEC_SetBackCilling(e,t)}},{key:"FEC_GetPTZPort",value:function(e,t,r){return this.oVideoPlayCtrl.FEC_GetPTZPort(e,t,r)}},{key:"FEC_SetPTZDisplayMode",value:function(e){return this.oVideoPlayCtrl.FEC_SetPTZDisplayMode(e)}},{key:"InputPrivateInfo",value:function(e,t,r){return this.oVideoPlayCtrl.InputPrivateInfo(e,t,r)}},{key:"RenderPrivateData",value:function(e){return this.oVideoPlayCtrl.RenderPrivateData(e)}},{key:"SetWaterMarkFont",value:function(e){return this.oVideoPlayCtrl.SetWaterMarkFont(e)}},{key:"SetWaterMarkImage",value:function(e){return this.oVideoPlayCtrl.SetWaterMarkImage(e)}},{key:"SetD3DPostProcess",value:function(e,t){return this.oVideoPlayCtrl.SetD3DPostProcess(e,t)}}]),t}(),Fe=[];!function(){for(var e=0;e<8;e++){Fe[e]=[];for(var t=0;t<64;t++)Fe[e][t]=null}}();var Te=null,De=!1,Ie=1,Me=1,Ae={bSupHardOrSoft:!0,bSupHardDecAVC:!0,bSupHardDecHEVC:!0,cmd:"unloaded",errorCode:0,status:0},we=-1;window.JSPlayM4_RawDataCallBack=function(e,t,r,i){null!=Fe[i][e]&&Fe[i][e].__proto__.hasOwnProperty("JSPlayM4_InputRawData")&&Fe[i][e].JSPlayM4_InputRawData(e,t,r)},window.JSPlayM4_PrivateInfoCallBack=function(e,t,r,i,a){null!=Fe[a][e]&&Fe[a][e].__proto__.hasOwnProperty("JSPlayM4_InputPrivateInfo")&&Fe[a][e].JSPlayM4_InputPrivateInfo(t,r,i)};var Le=function(){function t(r,i,a){var n=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"webgl",x=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1;if(e(this,t),this.jsplayer=r,this.szBasePath=i,this.fn=a,this.nUser=s,this.renderEngine=o,this.hasWebWorker=x,this.setHasThread=f,this.oJSPlayerObj=this,this.port=-1,this.pcVideoManager=null,this.decodeWorker=null,this.offscreen=null,this.canvasID="",this.canvasCnv=null,this.rtpType=0,this.decodeEngine=1,this.FirstFrameCallBackflag=!1,this.inputDataBuffer=null,this.inputDataBufferSize=204800,this.canvasIDData=null,this._decoderLoaded=!1,this.streamOpenMode=0,this.width=0,this.height=0,this.rawDataFrameInfoBuffer=null,this.rawDataFrameInfo={},this.displayFrameInfo={},this.startTimeStamp=0,this.decodeFrameType=0,this.switchDecodeFrame=!1,this.displayBuf=0,this.needSetDisplayBuf=!1,this.FirstFrame=!0,this.codecType=0,this.curStatus=0,this.playSpeed=1,this.needWaitIFrame=!1,this.printfFlag=!1,this.SetDisRegionBottom=0,this.SetDisRegionLeft=0,this.SetDisRegionRight=0,this.SetDisRegionTop=0,this.cropBottom=0,this.cropLeft=0,this.cropRight=0,this.cropTop=0,this.canvasWidth=960,this.canvasHeight=480,this.enableCanvas=!0,this.needResetCanvasSize=!1,this.hasThread=0,this.aTotalBuffer=[],this.iFrameNum=0,this.bWriteData=!0,this.downloadFlag=!1,this.bWriteAudioPCMData=!0,this.audioPCMBuffer=[],this.iAudioPCMFrameNum=0,this.pBmpData=null,this.nBmpDataSize=0,this.pBmpSizeData=null,this.bmpDataCallback=null,this.bmpDownloadFlag=!1,this.pJpegData=null,this.nJpegDataSize=0,this.pJPEGSizeData=null,this.jpegDataCallback=null,this.jpegDownloadFlag=!1,this.stDisplayRect={top:0,left:0,right:0,bottom:0},this.iZoomNum=0,this.iRatio_x=1,this.iRatio_y=1,this.pFECTotalCanvasIDData=null,this.iFECCanvasIDLen=0,this.iFECZoomNum=0,this.iFECRatio_x=1,this.iFECRatio_y=1,this.stFECDisplayRect={top:0,left:0,right:0,bottom:0},this.FECcanvasIDArray=[],this.FECGetPortCB=null,this.FECGetPTZPortCB=null,this.FECParamCB=null,this.FECViewParamCB=null,this.FFCallBackFun=null,this.addtionCallBackFun=null,this.displayCallBackFun=null,this.decCallBackFun=null,this.getPlayTimeCallBackFun=null,this.runtimeCBFun=null,this.callbackFlag=!1,this.runTimeModule=0,this.needSetSecretKey=!1,this.SecretKeyData=null,this.needPlaySound=!1,this.decInterval=-1,this.volumeValue=-1,this.renderPrivateInfo=new Map,this.renderIntelSubEx=new Map,this.renderIntelFlagEx=new Map,this.reversePlay=!1,this.decodeThreadNum=0,this.antialiasFlag=-1,this.decodeERCLevel=0,this.d3dPostProcessType=0,this.d3dPostProcessValue=0,this.needSetD3DPostProcess=!1,this.resetBufferType=-1,this.playOrBackSwitchMode=0,this.setStretchPlayTime=0,this.setStretchPlaySpeed=0,this.autoSmoothPlayModel=-1,this.keepPlaySpeed=-1,this.FECCanvasID="",this.FECPlaceType=0,this.FECCorrectType=0,this.anrParamFlag=!1,this.anrParamLevel=-1,this.resampleFlag=!1,this.resampleRate=48e3,this.globalBaseTime=null,this.needSetSkipErrorData=!1,this.skipErrorData=-1,this.needSetDemuxModel=!1,this.setDemuxModelType=-1,this.setDemuxModelFlag=!1,this.setAudioThreadModel=-1,this.syncToAudio=-1,this.HIK40Head=[],this.HIKHeadSize=40,this.HIKPoolSize=2097152,this.supportWebCodecs=_getFSupportWebCodecs(),this.supportSab=!!window.SharedArrayBuffer,this.offscreen=!!window.OffscreenCanvas,this.supportOffscreen=!1,this.offscreen){var l=new OffscreenCanvas(1,1),h=l.getContext("webgl");h&&(this.supportOffscreen=!0,h.getExtension("WEBGL_lose_context").loseContext()),l=null,h=null}if(console.log("%cstart load Decoder.js time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds(),"color: blue"),null!=Te||De)new Promise((function(e,t){e()})).then((function(){if(null===Te)var e=setInterval((function(){null!==Te&&(clearInterval(e),e=null,n.fn(Ae))}),10);else n.fn(Ae)}));else if(De=!0,we=_getFExplore(),this.supportWebCodecs?-1<we&&we<94?(console.info("%c1>your chrome version %d does not support 264/265 hard Decoder,please update the latest version above chromeV107","color: red",we),Me=0,Ie=0,Ae.bSupHardDecAVC=!1,Ae.bSupHardDecHEVC=!1,this.supportSab?Ae.bSupHardOrSoft=!0:Ae.bSupHardOrSoft=!1):94<=we&&we<107?(console.info("%c1>your chrome version %d does not support 265 hard Decoder,please update the latest version above chromeV107","color: red",we),Ie=0,Ae.bSupHardDecAVC=!0,Ae.bSupHardDecHEVC=!1,Ae.bSupHardOrSoft=!0):(Ae.bSupHardDecAVC=!0,Ae.bSupHardDecHEVC=!1,Ae.bSupHardOrSoft=!0):(console.info("%c1>your browser does not support hard Decoder ","color: red"),Me=0,Ie=0,Ae.bSupHardDecAVC=!1,Ae.bSupHardDecHEVC=!1,this.supportSab?Ae.bSupHardOrSoft=!0:Ae.bSupHardOrSoft=!1),Ae.bSupHardOrSoft){var c=this.szBasePath,u=document.createElement("script");u.type="text/javascript",u.src=c,console.info("%c>>>>The Decoder.js path:%s","color: green",c),u.onload=function(){window.JSPlayerModule().then((function(e){Te=e,n._decoderLoaded=!0,Ae.cmd="loaded";var t=Te._JSPlayM4_GetSDKVersion(),r=Te._JSPlayM4_GetBuildDate();console.log("%cEnd load Decoder.js time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds()+",version:"+t.toString(16)+",buildDate:"+r.toString(16),"color: blue"),n.supportWebCodecs?VideoDecoder.isConfigSupported({codec:"hvc1.1.6.L123.00",hardwareAcceleration:"prefer-hardware"}).then((function(e){e.supported?(Ae.bSupHardDecHEVC=!0,console.info("%c1>your browser support 264/265 hard Decoder","color: green")):(console.warn("%c1>your PC does not support 265 hard Decoder, if you want to hard decode 265 ,try to update the GPU driver","color: red"),Ie=0),n.callbackFlag||(n.fn(Ae),n.callbackFlag=!0)})).catch((function(){Ie=0,Ae.bSupHardDecHEVC=!1,console.log("%c2>hevc supported error","color: red"),n.callbackFlag||(n.fn(Ae),n.callbackFlag=!0)})):n.fn(Ae)}))},document.body.appendChild(u)}else console.log("%c not support hard or soft","color:red"),new Promise((function(e,t){e()})).then((function(){n.fn(Ae)}))}return r(t,[{key:"startWorker",value:function(e){function t(t,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){if(window.Worker){if(null==t.decodeWorker){if(t.decodeWorker=new f,null==t.decodeWorker)return 0;console.log("decodeWorker create success!")}t.canvasCnv=document.getElementById(e),t.offscreen=t.canvasCnv.transferControlToOffscreen(),t.decodeWorker.postMessage({command:"init",streamOpenMode:t.streamOpenMode,canvas:t.offscreen,sab:t.supportSab,renderEngine:t.renderEngine},[t.offscreen]),0!=t.displayBuf&&t.decodeWorker.postMessage({command:"SetDisplayBuf",value:t.displayBuf}),t.decodeWorker.onmessage=function(e){var r=e.data;switch(r.function){case"error":startWorker(t.canvasID,t);break;case"GetFrameData":var i=new Uint8Array(r.data);t.downloadRTPData(i);break;case"GetRawData":t.JSPlayM4_GetRawData();break;case"OrderError":console.log(">>>JS OrderError");break;case"GetPlayedTime":var a=r.value;t.getPlayTimeCallBackFun&&t.getPlayTimeCallBackFun(a-t.startTimeStamp);break;case"resetEnd":t.JSPlayM4_ResetEnd();break;case"bitmap":var n=r.value,s=r.type;t._GetImage(n,s);break;case"imageYUV":var o=new Uint8Array(r.value),x=r.size,f=new Uint8Array(o),l=r.type,h=r.width,c=r.height,u=r.yuvType,_=r.sx,d=r.sy,p=r.sw,m=r.sh;t._GetImage2(f,x,h,c,l,u,_,d,p,m),o=null,f=null,r.value=null;break;case"stop":t.decodeWorker=null,console.log("HardWorker is null");break;case"firstFrameCB":null!=t.FFCallBackFun&&t.FFCallBackFun();break;case"SetFrameInfoCallBack":t.displayFrameInfo.port=r.curFrameInfo.port,t.displayFrameInfo.codecType=r.curFrameInfo.codecType,t.displayFrameInfo.frameType=r.curFrameInfo.frameType,t.displayFrameInfo.frameSize=r.curFrameInfo.frameSize,t.displayFrameInfo.width=r.curFrameInfo.width,t.displayFrameInfo.height=r.curFrameInfo.height,t.displayFrameInfo.timeStamp=r.curFrameInfo.timeStamp,t.displayFrameInfo.frameRate=r.curFrameInfo.frameRate,t.displayFrameInfo.frameNum=r.curFrameInfo.frameNum,t.displayFrameInfo.interlace=r.curFrameInfo.interlace,t.displayFrameInfo.streamEnd=r.curFrameInfo.streamEnd,t.displayFrameInfo.cropLeft=r.curFrameInfo.cropLeft,t.displayFrameInfo.cropRight=r.curFrameInfo.cropRight,t.displayFrameInfo.cropTop=r.curFrameInfo.cropTop,t.displayFrameInfo.cropBottom=r.curFrameInfo.cropBottom,t.displayFrameInfo.year=r.curFrameInfo.year,t.displayFrameInfo.month=r.curFrameInfo.month,t.displayFrameInfo.week=r.curFrameInfo.week,t.displayFrameInfo.day=r.curFrameInfo.day,t.displayFrameInfo.hour=r.curFrameInfo.hour,t.displayFrameInfo.minute=r.curFrameInfo.minute,t.displayFrameInfo.second=r.curFrameInfo.second,t.displayFrameInfo.milliseconds=r.curFrameInfo.milliseconds;break;case"FECGetViewParam":null!=t.FECViewParamCB&&t.FECViewParamCB(r.Param3D);break;case"FECGetParam":null!=t.FECParamCB&&t.FECParamCB(r.param2d);break;case"FECGetPort":null!=t.FECGetPortCB&&t.FECGetPortCB(r.fishSubPort);break;case"FECGetPTZPort":null!=t.FECGetPTZPortCB&&t.FECGetPTZPortCB(r.fishSubPort)}},t.decodeWorker.addEventListener("error",(function(e){console.error(e)}))}}))},{key:"JSPlayM4_SetStreamEnd",value:function(){return 0}},{key:"JSPlayM4_GetPort",value:function(){return this.printfFlag&&console.log(">>>>>yff>>> JSPlayM4_GetPort 1"),null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetPort","color: red"),0):(this.port=Te._JSPlayM4_GetPort(),Fe[this.nUser][this.port]=this.oJSPlayerObj,this.printfFlag&&console.log(">>>>>yff>>> JSPlayM4_GetPort 2"),1)}},{key:"JSPlayM4_SetStreamOpenMode",value:function(e){return this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_SetStreamOpenMode 1 mode:"+e),null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetStreamOpenMode","color: red"),0):(this.streamOpenMode=e,this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_SetStreamOpenMode 2  mode:"+e),null==this.pcVideoManager&&(this.pcVideoManager=new Ee(this)),Te._JSPlayM4_SetStreamOpenMode(this.port,e))}},{key:"JSPlayM4_OpenStream",value:function(e,t,r){if(this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_OpenStream 1 :"+e+",this.port:"+this.port),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_OpenStream","color: red"),0;var i=Te._malloc(t);if(null===i)return console.log("hikHeadBuffer malloc failed"),0;var a=new Uint8Array(e.buffer);if(5==e[10]&&0==e[11]){if(this.codecType=5,!Ae.bSupHardDecHEVC&&!this.supportSab)return console.info("%c3>The codecType is VIDEO_AVC265,not support SharedArrayBuffer","color: red"),16}else 1==e[10]&&0==e[11]?this.codecType=1:0==e[10]&&1==e[11]?this.codecType=256:this.codecType=0;Te.writeArrayToMemory(a,i);var n=Te._JSPlayM4_OpenStream(this.port,i,t,r);return null!==i&&(Te._free(i),i=null),a=null,this.HIK40Head=new Uint8Array(e),this.HIKHeadSize=t,this.HIKPoolSize=r,n}},{key:"JSPlayM4_SetDecodeEngine",value:function(e){return this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_SetDecodeEngine 1:"+e),0!=e&&1!=e?(console.log("0 is softDecode, 1 is hardDecoder,decodeEngine:"+e),0):0!==e||this.supportSab&&this.supportOffscreen?(this.decodeEngine=e,1):(this.jsplayer._switchV3ToV1(this.streamOpenMode,this.HIK40Head,this.HIKHeadSize,this.HIKPoolSize,!0),0)}},{key:"_switchHardToSoft",value:function(){return this.JSPlayM4_Stop(!0),this.JSPlayM4_CloseStream(),this.JSPlayM4_FreePort(),this.supportSab&&this.supportOffscreen?(this.JSPlayM4_SetDecodeEngine(0)&&(console.log("V3 switchHardToSoft this.szBasePath:"+this.szBasePath),this.JSPlayM4_GetPort(),this.JSPlayM4_SetStreamOpenMode(this.streamOpenMode),this.JSPlayM4_OpenStream(this.HIK40Head,this.HIKHeadSize,this.HIKPoolSize),this.JSPlayM4_Play(null,!0)),1):(this.jsplayer._switchV3ToV1(this.streamOpenMode,this.HIK40Head,this.HIKHeadSize,this.HIKPoolSize,!0),0)}},{key:"_HardToSoftNeedResetParam",value:function(){null!=this.FFCallBackFun&&Te._JSPlayM4_SetFirstFrameCallBack(this.port,this.FirstFrameCallBackflag,this.nUser),this.needSetSecretKey&&this.JSPlayM4_SetSecretKey(this.SecretKeyData),null!=this.globalBaseTime&&this.globalBaseTime.month>0&&this.globalBaseTime.month<13&&this.JSPlayM4_SetGlobalBaseTime(this.globalBaseTime.year,this.globalBaseTime.month,this.globalBaseTime.day,this.globalBaseTime.hour,this.globalBaseTime.min,this.globalBaseTime.sec,this.globalBaseTime.ms),this.needSetSkipErrorData&&this.JSPlayM4_SkipErrorData(this.skipErrorData),this.needSetDemuxModel&&this.JSPlayM4_SetDemuxModel(this.setDemuxModelType,this.setDemuxModelFlag),this.JSPlayM4_SetDecodeFrameType(this.decodeFrameType),-1!=this.decInterval&&Te._JSPlayM4_SetIFrameDecInterval(this.port,nInterval),0!=this.decodeThreadNum&&Te._JSPlayM4_SetDecodeThreadNum(this.port,this.decodeThreadNum),0!=this.decodeERCLevel&&Te._JSPlayM4_SetDecodeERC(this.port,this.decodeERCLevel),-1!=this.resetBufferType&&Te._JSPlayM4_ResetBuffer(this.port,this.resetBufferType),this.needPlaySound&&this.JSPlayM4_PlaySound(),-1!=this.setAudioThreadModel&&this.JSPlayM4_SetAudioThreadModel(this.setAudioThreadModel),-1!=this.syncToAudio&&this.JSPlayM4_SyncToAudio(this.syncToAudio),this.anrParamFlag&&-1!=this.anrParamLevel&&this.JSPlayM4_SetANRParam(this.anrParamFlag,this.anrParamLevel),this.resampleFlag&&this.JSPlayM4_SetResampleValue(this.resampleFlag,this.resampleRate),-1!=this.volumeValue&&this.JSPlayM4_SetVolume(this.volumeValue),null!=this.runtimeCBFun&&Te._JSPlayM4_SetRunTimeInfoCallBackEx(this.port,this.runTimeModule,this.nUser),0!=this.playOrBackSwitchMode&&Te._JSPlayM4_SetPlayOrBackSwitchMode(this.port,this.playOrBackSwitchMode);var e,t=d(this.renderPrivateInfo.keys());try{for(t.s();!(e=t.n()).done;){var r=e.value,i=this.renderPrivateInfo.get(r);Te._JSPlayM4_RenderPrivateData(this.port,r,i)}}catch(e){t.e(e)}finally{t.f()}var a,n=d(this.renderIntelSubEx.keys());try{for(n.s();!(a=n.n()).done;){var s=a.value,o=this.renderIntelSubEx.get(s),x=this.renderIntelFlagEx.get(s);Te._JSPlayM4_RenderPrivateDataEx(this.port,s,o,x)}}catch(e){n.e(e)}finally{n.f()}return this.needSetDisplayBuf&&Te._JSPlayM4_SetDisplayBuf(this.port,this.displayBuf),-1!=this.antialiasFlag&&Te._JSPlayM4_SetAntialias(this.port,this.antialiasFlag),this.needSetD3DPostProcess&&Te._JSPlayM4_SetD3DPostProcess(this.port,this.d3dPostProcessType,this.d3dPostProcessValue),0!=this.setStretchPlaySpeed&&Te._JSPlayM4_SetStretchPlay(this.port,this.setStretchPlayTime,this.setStretchPlaySpeed),-1!=this.autoSmoothPlayModel&&Te._JSPlayM4_SetAutoSmoothPlay(this.port,this.autoSmoothPlayModel),-1!=this.keepPlaySpeed&&Te._JSPlayM4_KeepPlaySpeed(this.port,this.keepPlaySpeed),0!=this.printfFlag&&this.JSPlayM4_SetPrintLogFlag(this.printfFlag),""!=this.FECCanvasID&&this.JSPlayM4_FEC_SetCanvasID(this.FECCanvasID,!0),0!=this.FECPlaceType&&Te._JSPlayM4_FEC_ResetCorrectType(this.port,0,this.FECPlaceType,this.FECCorrectType),1}},{key:"JSPlayM4_DownloadRawData",value:function(){return this.downloadFlag=!0,1}},{key:"JSPlayM4_InputRawData",value:function(e,t,r){if(this.rawDataFrameInfoBuffer=r,this.rawDataFrameInfo.port=e,this.rawDataFrameInfo.codecType=Te.HEAP32[this.rawDataFrameInfoBuffer+4>>2],this.rawDataFrameInfo.frameType=Te.HEAP32[this.rawDataFrameInfoBuffer+12>>2],this.rawDataFrameInfo.frameSize=Te.HEAP32[this.rawDataFrameInfoBuffer+16>>2],this.rawDataFrameInfo.width=Te.HEAP32[this.rawDataFrameInfoBuffer+20>>2],this.rawDataFrameInfo.height=Te.HEAP32[this.rawDataFrameInfoBuffer+24>>2],this.rawDataFrameInfo.timeStamp=Te.HEAP32[this.rawDataFrameInfoBuffer+28>>2],this.rawDataFrameInfo.frameRate=Te.HEAP32[this.rawDataFrameInfoBuffer+32>>2],this.rawDataFrameInfo.frameNum=Te.HEAP32[this.rawDataFrameInfoBuffer+36>>2],this.rawDataFrameInfo.isKeyFrame=Te.HEAP32[this.rawDataFrameInfoBuffer+40>>2],this.rawDataFrameInfo.interlace=Te.HEAP32[this.rawDataFrameInfoBuffer+44>>2],this.rawDataFrameInfo.streamEnd=Te.HEAP32[this.rawDataFrameInfoBuffer+48>>2],this.rawDataFrameInfo.cropLeft=Te.HEAP32[this.rawDataFrameInfoBuffer+52>>2],this.rawDataFrameInfo.cropRight=Te.HEAP32[this.rawDataFrameInfoBuffer+56>>2],this.rawDataFrameInfo.cropTop=Te.HEAP32[this.rawDataFrameInfoBuffer+60>>2],this.rawDataFrameInfo.cropBottom=Te.HEAP32[this.rawDataFrameInfoBuffer+64>>2],this.rawDataFrameInfo.year=Te.HEAP16[this.rawDataFrameInfoBuffer+68>>1],this.rawDataFrameInfo.month=Te.HEAP16[this.rawDataFrameInfoBuffer+70>>1],this.rawDataFrameInfo.week=Te.HEAP16[this.rawDataFrameInfoBuffer+72>>1],this.rawDataFrameInfo.day=Te.HEAP16[this.rawDataFrameInfoBuffer+74>>1],this.rawDataFrameInfo.hour=Te.HEAP16[this.rawDataFrameInfoBuffer+76>>1],this.rawDataFrameInfo.minute=Te.HEAP16[this.rawDataFrameInfoBuffer+78>>1],this.rawDataFrameInfo.second=Te.HEAP16[this.rawDataFrameInfoBuffer+80>>1],this.rawDataFrameInfo.milliseconds=Te.HEAP16[this.rawDataFrameInfoBuffer+82>>1],this.rawDataFrameInfo.needSetPreSoft=!1,(this.rawDataFrameInfo.frameRate<1||1==this.rawDataFrameInfo.interlace)&&(this.rawDataFrameInfo.needSetPreSoft=!0),5==this.rawDataFrameInfo.codecType&&we<107&&console.info("%c1>your browser does not support hard 265 Decoder,please update chrome,sab:%d","color: red",this.sab),0!=this.width&&0!=this.height||(this.width=this.rawDataFrameInfo.width,this.height=this.rawDataFrameInfo.height,this.startTimeStamp=this.rawDataFrameInfo.timeStamp,this.FirstFrame=!1),0==this.rawDataFrameInfo.cropLeft&&0==this.rawDataFrameInfo.cropRight&&0==this.rawDataFrameInfo.cropTop&&0==this.rawDataFrameInfo.cropBottom||(this.cropBottom=this.rawDataFrameInfo.cropBottom,this.cropLeft=this.rawDataFrameInfo.cropLeft,this.cropRight=this.rawDataFrameInfo.cropRight,this.cropTop=this.rawDataFrameInfo.cropTop),1==this.decodeFrameType){if(1!==this.rawDataFrameInfo.isKeyFrame)return 1;this.needWaitIFrame&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"SetDecodeFrameType",timestamp:this.rawDataFrameInfo.timeStamp}):this.pcVideoManager.SetDecodeFrameType(this.rawDataFrameInfo.timeStamp),this.needWaitIFrame=!1)}if(0==this.decodeFrameType&&1==this.switchDecodeFrame){if(1!==this.rawDataFrameInfo.isKeyFrame)return 1;this.switchDecodeFrame=!1}if(this.downloadFlag&&this.downloadRTPData(t),this.hasWebWorker){if(null===this.decodeWorker)return t=null,0;this.decodeWorker.postMessage({command:"inputData",rawData:t.buffer,rawDataFrameInfo:this.rawDataFrameInfo},[t.buffer])}else null!==this.pcVideoManager&&this.pcVideoManager.inputData(t,this.rawDataFrameInfo)}},{key:"JSPlayM4_GetRawData",value:function(){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetRawData","color: red"),0;Te._JSPlayM4_GetRawData(this.port)}},{key:"JSPlayM4_ResetEnd",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_ResetEnd","color: red"),0):Te._JSPlayM4_ResetEnd(this.port)}},{key:"JSPlayM4_NeedReset",value:function(e,t,r){return this.hasWebWorker?null!=Fe[r][e].decodeWorker&&Fe[r][e].decodeWorker.postMessage({command:"needReset"}):this.pcVideoManager.needReset(),1}},{key:"JSPlayM4_SetAudioDisplayBuf",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAudioDisplayBuf","color: red"),0):Te._JSPlayM4_SetAudioDisplayBuf(this.port,e)}},{key:"JSPlayM4_Play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_Play 1 this.canvasID:"+this.canvasID+",this.supportSab:"+this.supportSab),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_Play","color: red"),0;if(this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_Play 2:"+this.decodeEngine),null!=e&&(this.canvasID=e,this.canvasWidth=document.getElementById(this.canvasID).width,this.canvasHeight=document.getElementById(this.canvasID).height),0===Ie&&5===this.codecType?(this.decodeEngine=0,console.info("%c2>there will decode 265 by softDecoder","color: green")):0!==Me||256!==this.codecType&&1!==this.codecType||(this.decodeEngine=0,console.info("%c2>there will decode 264 by softDecoder","color: green")),0==Me&&0==Ie&&(this.decodeEngine=0),!(this.supportSab&&this.supportOffscreen||0!==this.decodeEngine))return console.info("%c3>SharedArrayBuffer or Offscreen Error , does not support Soft Decdoe!!!!!","color: red"),this.jsplayer._switchV3ToV1(this.streamOpenMode,this.HIK40Head,this.HIKHeadSize,this.HIKPoolSize,!0),0;if(-1!=this.setHasThread&&(this.hasThread=this.setHasThread),Te._JSPlayM4_SetDecodeEngine(this.port,this.decodeEngine,this.hasThread),console.log("%cThe final decodeEngine is %d (0 is soft,1 is hard),codecType:%d","color: green",this.decodeEngine,this.codecType),0===this.decodeEngine&&t&&null!=this.canvasID){var r=document.getElementById(this.canvasID);r&&(this.clonedCanvas=r.cloneNode(!0),this.clonedCanvasParentNode=r.parentNode,this.clonedCanvasParentNode.replaceChild(this.clonedCanvas,r))}this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_Play 2 this.canvasID:"+this.canvasID+",this.supportSab:"+this.supportSab+",this.decodeEngine:"+this.decodeEngine);var i=1;if(1===this.decodeEngine){this.hasWebWorker?this.startWorker(this.canvasID,this):(this.canvasCnv=document.getElementById(this.canvasID),this.pcVideoManager.init(this.canvasCnv,this.streamOpenMode,this.supportSab,this.renderEngine),this.needSetDisplayBuf&&this.pcVideoManager.SetDisplayBuf(this.displayBuf)),Te._JSPlayM4_SetVideoRawDataCallBack(this.port,this.nUser);var a=Te.addFunction(this.JSPlayM4_NeedReset,"viii");Te._JSPlayM4_SetResetCallBack(this.port,a,this.nUser),Te._JSPlayM4_SetPrivateInfoCallBack(this.port,this.nUser),this.JSPlayM4_SetCanvasSize(this.canvasWidth,this.canvasHeight),1==(i=Te._JSPlayM4_Play(this.port,null))&&(this.curStatus=2)}else if(0===this.decodeEngine){if(""!=this.canvasID&&null!=this.canvasID){var n=this._stringToBytes("#"+this.canvasID),s=2*(this.canvasID.length+1);if(this.canvasIDData=Te._malloc(s),null===this.canvasIDData)return 0;var o=Te.HEAPU8.subarray(this.canvasIDData,this.canvasIDData+s),x=new Uint8Array(s);o.set(x,0),o.set(new Uint8Array(n)),o=null,x=null}this._HardToSoftNeedResetParam(),1==(i=Te._JSPlayM4_Play(this.port,this.canvasIDData))&&(this.curStatus=2)}return this.JSPlayM4_SetFrameInfoCallBack(1),i}},{key:"JSPlayM4_InputData",value:function(e,t){if(this.inputDataBufferSize<t&&(null!==this.inputDataBuffer&&(Te._free(this.inputDataBuffer),this.inputDataBuffer=null),this.inputDataBufferSize=t),null===this.inputDataBuffer&&(this.inputDataBuffer=Te._malloc(this.inputDataBufferSize)),null===this.inputDataBuffer)return console.log("inputdata malloc failed!!!"),0;if(1==this.needResetCanvasSize&&(this.JSPlayM4_SetCanvasSize(this.canvasWidth,this.canvasHeight+1),this.needResetCanvasSize=!1),this.enableCanvas){var r=this.JSPlayM4_GetFrameInfo(),i=r.width,a=r.height;i&&a&&(this.JSPlayM4_SetCanvasSize(this.canvasWidth,this.canvasHeight-1),this.enableCanvas=!1,this.needResetCanvasSize=!0)}var n=new Uint8Array(e.buffer);Te.writeArrayToMemory(n,this.inputDataBuffer);var s=Te._JSPlayM4_InputData(this.port,this.inputDataBuffer,t);return this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_InputData 2 res:"+s+",inputSize:"+t),s}},{key:"JSPlayM4_Stop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_Stop","color: red"),0;if(this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"stop"}):null!=this.pcVideoManager&&this.pcVideoManager.stop(),this.bWriteData&&this.iFrameNum>0){console.log("download"+this.iFrameNum+"Psdata");var t=new Uint8Array(this.aTotalBuffer);this._downloadFile(t,"RTPRaw.data"),this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.bWriteData=!1,this.iFrameNum=0,t=null}if(2==this.curStatus||5==this.curStatus){var r=Te._JSPlayM4_Stop(this.port);if(1==r&&(this.curStatus=4),1==r&&e){var i=document.getElementById(this.canvasID);if(i&&(this.clonedCanvas=i.cloneNode(!0),this.clonedCanvasParentNode=i.parentNode,this.clonedCanvasParentNode.replaceChild(this.clonedCanvas,i)),0!=this.FECcanvasIDArray.length)for(var a=0;a<this.FECcanvasIDArray.length;a++){var n=document.getElementById(this.FECcanvasIDArray[a]);n&&(this.clonedCanvas=n.cloneNode(!0),this.clonedCanvasParentNode=n.parentNode,this.clonedCanvasParentNode.replaceChild(this.clonedCanvas,n))}}return r}return 1}},{key:"JSPlayM4_CloseStream",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_CloseStream","color: red"),0):null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_FreePort","color: red"),0):(null!==this.inputDataBuffer&&(Te._free(this.inputDataBuffer),this.inputDataBuffer=null),null!==this.canvasIDData&&(Te._free(this.canvasIDData),this.canvasIDData=null,this.FirstFrame=!0),null!=this.pFECTotalCanvasIDData&&(Te._free(this.pFECTotalCanvasIDData),this.pFECTotalCanvasIDData=null),null!=this.pBmpData&&(Te._free(this.pBmpData),this.pBmpData=null),null!=this.pBmpSizeData&&(Te._free(this.pBmpSizeData),this.pBmpSizeData=null),null!=this.pJpegData&&(Te._free(this.pJpegData),this.pJpegData=null),null!=this.pJPEGSizeData&&(Te._free(this.pJPEGSizeData),this.pJPEGSizeData=null),this.bmpDataCallback=null,this.jpegDataCallback=null,this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.audioPCMBuffer.splice(0,this.audioPCMBuffer.length),this.width=0,this.height=0,this.curStatus=1,this.iZoomNum=0,this.rawDataFrameInfoBuffer=null,this.displayFrameInfo={},this.rawDataFrameInfo={},this.pcVideoManager=null,Te._JSPlayM4_CloseStream(this.port))}},{key:"JSPlayM4_FreePort",value:function(){return Te._JSPlayM4_FreePort(this.port)}},{key:"JSPlayM4_SetDecodeFrameType",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecodeFrameType","color: red"),0):(this.decodeFrameType=e,1===this.decodeEngine?(0==e&&1==this.decodeFrameType&&(this.switchDecodeFrame=!0),1==e&&(this.needWaitIFrame=!0),1):Te._JSPlayM4_SetDecodeFrameType(this.port,e))}},{key:"JSPlayM4_PlaySound",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_PlaySound","color: red"),0):(this.needPlaySound=!0,Te._JSPlayM4_PlaySound(this.port))}},{key:"resizedataURL",value:function(e,t,r){return new Promise((i=B().mark((function i(a,n){var s;return B().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:(s=document.createElement("img")).onload=function(){var e=document.createElement("canvas"),i=e.getContext("2d");e.width=t,e.height=r,i.drawImage(this,0,0,t,r);var n=e.toDataURL();a(n)},s.src=e;case 3:case"end":return i.stop()}}),i)})),a=function(){var e=this,t=arguments;return new Promise((function(r,a){var n=i.apply(e,t);function s(e){o(n,r,a,s,x,"next",e)}function x(e){o(n,r,a,s,x,"throw",e)}s(void 0)}))},function(e,t){return a.apply(this,arguments)}));var i,a}},{key:"_GetImage",value:function(e,t){if(1===this.decodeEngine&&e.width&&e.height){var r="image/"+t,i=document.createElement("canvas"),a=i.getContext("2d");i.width=e.width,i.height=e.height,a.drawImage(e,0,0,e.width,e.height),i.toBlob((function(i){console.log("blob:"+i);var n=window.URL.createObjectURL(i),s=document.createElement("a");s.download=(new Date).getTime()+"."+t,s.href=n,s.dataset.downloadurl=[r,s.download,s.href].join(":"),document.body.appendChild(s),s.click(),document.body.removeChild(s),e.close(),a=null}),r)}}},{key:"_GetImage2",value:function(e,t,r,i,a,n,s,o,x,f){var l=this;setTimeout((function(){if(0!=r&&0!=i){var h=Te._malloc(t);if(null===h)return;Te.writeArrayToMemory(new Uint8Array(e,0,t),h);var c;c=704!=r||288!=i&&240!=i?r*i*4+60:r*i*8+60;var u=Te._malloc(c),_=Te._malloc(4);if(null===u||null===_)return Te._free(h),h=null,null!=u&&(Te._free(u),u=null),void(null!=_&&(Te._free(_),_=null));Te.setValue(_,c,"i32");var d=2;"nv12"===n?d=2:"I420"===n&&(d=3),"jpeg"==a?Te._JSPlayM4_VideoDataToJpeg(l.port,h,t,u,_,r,i,d,s,o,x,f):"bmp"==a&&Te._JSPlayM4_VideoDataToBMP(l.port,h,t,u,_,r,i,d,s,o,x,f);var p=Te.getValue(_,"i32"),m=new Uint8Array(p);m.set(Te.HEAPU8.subarray(u,u+p)),0==s&&0==o&&0==x&&0==f?"jpeg"==a?(null!=l.jpegDataCallback&&l.jpegDataCallback(m,p),l.jpegDownloadFlag&&l._downloadFile(m,"GetImage."+a),l.jpegDataCallback=null,l.jpegDownloadFlag=!1):"bmp"==a&&(null!=l.bmpDataCallback&&l.bmpDataCallback(m,p),l.bmpDownloadFlag&&l._downloadFile(m,"GetImage."+a),l.bmpDataCallback=null,l.bmpDownloadFlag=!1):l._downloadFile(m,"GetCropImage."+a),m=null,null!=u&&(Te._free(u),u=null),null!=_&&(Te._free(_),_=null)}}),0)}},{key:"JSPlayM4_GetJPEG",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.jpegDataCallback=e,this.jpegDownloadFlag=t,1===this.decodeEngine)return this.hasWebWorker?this.decodeWorker.postMessage({command:"GetJPEG"}):null!=this.pcVideoManager&&this.pcVideoManager.GetJPEG(),1;if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetJPEG","color: red"),0;var r=Te._JSPlayM4_GetFrameInfo(this.port);if(this.width=Te.HEAP32[r+12>>2],this.height=Te.HEAP32[r+16>>2],0!=this.width&&0!=this.height){var i=this.width*this.height*4+60;if((null==this.pJpegData||this.nJPEGDataSize<i)&&(null!=this.pJpegData&&(Te._free(this.pJpegData),this.pJpegData=null),this.nJPEGDataSize=i,this.pJpegData=Te._malloc(this.nJPEGDataSize),null===this.pJpegData))return;null==this.pJPEGSizeData&&(this.pJPEGSizeData=Te._malloc(4));var a=Te._JSPlayM4_GetJPEG(this.port,this.pJpegData,this.nJPEGDataSize,this.pJPEGSizeData);if(1!=a){var n=Te._JSPlayM4_GetLastError(this.port);console.log("errorcode:"+n)}if(1==a){var s=Te.getValue(this.pJPEGSizeData,"i32"),o=new Uint8Array(s);o.set(Te.HEAPU8.subarray(this.pJpegData,this.pJpegData+s)),null!=e&&e(o,s),t&&this._downloadFile(o,"GetJPEG.jpeg"),o=null,this.jpegDataCallback=null,this.jpegDownloadFlag=!1}return a}return 0}},{key:"JSPlayM4_GetBMP",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.bmpDataCallback=e,this.bmpDownloadFlag=t,1===this.decodeEngine)return this.hasWebWorker?this.decodeWorker.postMessage({command:"GetBMP"}):null!=this.pcVideoManager&&this.pcVideoManager.GetBMP(),1;if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetBMP","color: red"),0;var r=Te._JSPlayM4_GetFrameInfo(this.port);if(this.width=Te.HEAP32[r+12>>2],this.height=Te.HEAP32[r+16>>2],0==this.width||0==this.height)return 0;var i;if(i=704!=this.width||288!=this.height&&240!=this.height?this.width*this.height*4+60:this.width*this.height*8+60,!(null==this.pBmpData||this.nBmpDataSize<i)||(null!=this.pBmpData&&(Te._free(this.pBmpData),this.pBmpData=null),this.nBmpDataSize=i,this.pBmpData=Te._malloc(this.nBmpDataSize),null!==this.pBmpData)){null==this.pBmpSizeData&&(this.pBmpSizeData=Te._malloc(4));var a=Te._JSPlayM4_GetBMP(this.port,this.pBmpData,this.nBmpDataSize,this.pBmpSizeData);if(1!=a){var n=Te._JSPlayM4_GetLastError(this.port);console.log("errorcode:"+n)}if(1==a){var s=Te.getValue(this.pBmpSizeData,"i32"),o=new Uint8Array(s);o.set(Te.HEAPU8.subarray(this.pBmpData,this.pBmpData+s)),null!=e&&e(o,s),t&&this._downloadFile(o,"GetBmp.bmp"),o=null,this.bmpDataCallback=null,this.bmpDownloadFlag=!1}return 1}}},{key:"JSPlayM4_GetCropJPEG",value:function(){if(1===this.decodeEngine)return this.hasWebWorker?this.decodeWorker.postMessage({command:"GetCropJPEG"}):null!=this.pcVideoManager&&this.pcVideoManager.GetCropJPEG(),1;if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetCropJPEG","color: red"),0;var e=Te._JSPlayM4_GetFrameInfo(this.port);if(this.width=Te.HEAP32[e+12>>2],this.height=Te.HEAP32[e+16>>2],0!=this.width&&0!=this.height){var t=this.width*this.height*4+60,r=Te._malloc(t),i=Te._malloc(4),a=this.SetDisRegionBottom,n=this.SetDisRegionLeft,s=this.SetDisRegionRight,o=this.SetDisRegionTop;if(null===r)return;var x=Te._JSPlayM4_GetCropJPEG(this.port,r,t,i,0,0,n,o,s,a);if(1!=x){var f=Te._JSPlayM4_GetLastError(this.port);console.log("errorcode:"+f)}if(1==x){var l=Te.getValue(i,"i32"),h=new Uint8Array(l);h.set(Te.HEAPU8.subarray(r,r+l)),this._downloadFile(h,"GetCropJPEG.jpeg"),h=null}return null!=r&&(Te._free(r),r=null),null!=i&&(Te._free(i),i=null),x}return 0}},{key:"JSPlayM4_GetCropBMP",value:function(){if(1===this.decodeEngine)return this.hasWebWorker?this.decodeWorker.postMessage({command:"GetCropBMP"}):null!=this.pcVideoManager&&this.pcVideoManager.GetCropBMP(),1;if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetCropBMP","color: red"),0;var e=Te._JSPlayM4_GetFrameInfo(this.port);if(this.width=Te.HEAP32[e+12>>2],this.height=Te.HEAP32[e+16>>2],0==this.width||0==this.height)return 0;var t=this.width*this.height*4+60,r=Te._malloc(t),i=Te._malloc(4),a=this.SetDisRegionBottom,n=this.SetDisRegionLeft,s=this.SetDisRegionRight,o=this.SetDisRegionTop;if(null!==r){var x=Te._JSPlayM4_GetCropBMP(this.port,r,t,i,0,0,n,o,s,a);if(1!=x){var f=Te._JSPlayM4_GetLastError(this.port);console.log("errorcode:"+f)}if(1==x){var l=Te.getValue(i,"i32"),h=new Uint8Array(l);h.set(Te.HEAPU8.subarray(r,r+l)),this._downloadFile(h,"GetCropBmp.bmp"),h=null}return null!=r&&(Te._free(r),r=null),null!=i&&(Te._free(i),i=null),1}}},{key:"JSPlayM4_GetCanvasCapture",value:function(e){return 1===this.decodeEngine?(this.hasWebWorker?this.decodeWorker.postMessage({command:"GetCanvasCapture",cbFun:e}):null!=this.pcVideoManager&&this.pcVideoManager.JSPlayM4_GetCanvasCapture(e),1):(console.info("%c SoftDecode not support canvas capture","color: red"),1)}},{key:"JSPlayM4_StopSound",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_StopSound","color: red"),0):(this.needPlaySound=!1,Te._JSPlayM4_StopSound())}},{key:"JSPlayM4_GetSDKVersion",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetSDKVersion","color: red"),0):Te._JSPlayM4_GetSDKVersion()}},{key:"JSPlayM4_GetBuildDate",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetBuildDate","color: red"),0):Te._JSPlayM4_GetBuildDate()}},{key:"JSPlayM4_GetLastError",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetLastError","color: red"),0):Te._JSPlayM4_GetLastError(this.port)}},{key:"JSPlayM4_Fast",value:function(){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_Fast","color: red"),0;if(0===this.streamOpenMode)return 1;if(1===this.decodeEngine)if(this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"fast"})}else null!=this.pcVideoManager&&this.pcVideoManager.fast();var e=Te._JSPlayM4_Fast(this.port);return 1==e&&(this.playSpeed=2*this.playSpeed),e}},{key:"JSPlayM4_Slow",value:function(){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_Slow","color: red"),0;if(0===this.streamOpenMode)return 1;if(1===this.decodeEngine)if(this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"slow"})}else null!=this.pcVideoManager&&this.pcVideoManager.slow();var e=Te._JSPlayM4_Slow(this.port);return 1==e&&(this.playSpeed=this.playSpeed/2),console.log("this.playSpeed:"+this.playSpeed),e}},{key:"JSPlayM4_SetIFrameDecInterval",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetIFrameDecInterval","color: red"),0):1===this.decodeEngine?1:(this.decInterval=e,Te._JSPlayM4_SetIFrameDecInterval(this.port,e))}},{key:"JSPlayM4_Pause",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_Pause","color: red"),0):0===this.streamOpenMode?1:(1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"Pause",value:e}):null!=this.pcVideoManager&&this.pcVideoManager.Pause(e)),Te._JSPlayM4_Pause(this.port,e))}},{key:"JSPlayM4_OneByOne",value:function(){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_OneByOne","color: red"),0;if(0===this.streamOpenMode)return 0;Ae.cmd="onebyone";var e=Te._JSPlayM4_GetSourceBufferRemain(this.port),t=Te._JSPlayM4_GetLastError(this.port);return e<1e3||31==t?(Ae.errorCode=31,Ae.status=!0,this.fn(Ae)):(e>this.HIKPoolSize-1e3||11==t)&&(Ae.errorCode=0,Ae.status=!1,this.fn(Ae)),this.curStatus=5,1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"OneByOne",value:1}):null!=this.pcVideoManager&&this.pcVideoManager.OneByOne(1)),Te._JSPlayM4_OneByOne(this.port)}},{key:"JSPlayM4_OneByOneResume",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_OneByOneResume","color: red"),0):(Ae.cmd="play",0===this.streamOpenMode?1:(this.curStatus=2,1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"OneByOne",value:0}):null!=this.pcVideoManager&&this.pcVideoManager.OneByOne(0)),Te._JSPlayM4_Play(this.port,this.canvasIDData)))}},{key:"JSPlayM4_SetVolume",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetVolume","color: red"),0):(this.volumeValue=e,Te._JSPlayM4_SetVolume(this.port,e))}},{key:"JSPlayM4_GetVolume",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetVolume","color: red"),0):Te._JSPlayM4_GetVolume(this.port)}},{key:"JSPlayM4_SetDisplayRegion",value:function(e,t,r,i,a){var n=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDisplayRegion","color: red"),0;var o=1,x=t,f=i,l=r,h=a;if("number"!=typeof t||"number"!=typeof i||"number"!=typeof r||"number"!=typeof a)return console.log("param is not number"),0;if(n)x=0,l=this.canvasWidth,f=0,h=this.canvasHeight,this.iZoomNum=0,this.iRatio_x=1,this.iRatio_y=1;else if(s){if(x<0||l<0||f<0||h<0)return 0;0!==this.iZoomNum&&(x=Math.round(x/this.iRatio_x)+this.stDisplayRect.left,f=Math.round(f/this.iRatio_y)+this.stDisplayRect.top,l=Math.round(l/this.iRatio_x)+this.stDisplayRect.left,h=Math.round(h/this.iRatio_y)+this.stDisplayRect.top)}if(this.stDisplayRect={top:f,left:x,right:l,bottom:h},l-x<16||h-f<16||l-x>this.canvasWidth||h-f>this.canvasHeight)return console.log(">>>JS left:"+t+",right:"+r+",top:"+i+",bottom:"+a+",bClose:"+n+",bZoomEnable:"+s+",iZoomNum:"+this.iZoomNum+",canvasWidth:"+this.canvasWidth+",canvasHeight:"+this.canvasHeight),0;if(1===this.decodeEngine)if(this.SetDisRegionBottom=h/this.canvasHeight*this.height,this.SetDisRegionLeft=x/this.canvasWidth*this.width,this.SetDisRegionRight=l/this.canvasWidth*this.width,this.SetDisRegionTop=f/this.canvasHeight*this.height,this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"SetDisplayRegion",sx:this.SetDisRegionLeft,sy:this.SetDisRegionTop,sw:this.SetDisRegionRight-this.SetDisRegionLeft,sh:this.SetDisRegionBottom-this.SetDisRegionTop})}else null!=this.pcVideoManager&&this.pcVideoManager.SetDisplayRegion(this.SetDisRegionLeft,this.SetDisRegionTop,this.SetDisRegionRight-this.SetDisRegionLeft,this.SetDisRegionBottom-this.SetDisRegionTop);else{var c=Te._JSPlayM4_GetFrameInfo(this.port);this.width=Te.HEAP32[c+12>>2],this.height=Te.HEAP32[c+16>>2],this.SetDisRegionBottom=h/this.canvasHeight*this.height,this.SetDisRegionLeft=x/this.canvasWidth*this.width,this.SetDisRegionRight=l/this.canvasWidth*this.width,this.SetDisRegionTop=f/this.canvasHeight*this.height,o=Te._JSPlayM4_SetDisplayRegion(this.port,this.canvasID,this.SetDisRegionLeft,this.SetDisRegionRight,this.SetDisRegionTop,this.SetDisRegionBottom)}return s&&(this.iRatio_x=this.canvasWidth/(l-x),this.iRatio_y=this.canvasHeight/(h-f),this.iZoomNum++),o}},{key:"JSPlayM4_SetPrintLogFlag",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetPrintLogFlag","color: red"),0):(this.printfFlag=Number(e),Te._JSPlayM4_SetPrintLogFlag(this.port,e))}},{key:"JSPlayM4_RenderPrivateData",value:function(e,t){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_RenderPrivateData","color: red"),0;if(this.renderPrivateInfo.set(e,t),1===this.decodeEngine)if(this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"RenderPrivateData",bTrue:t})}else null!=this.pcVideoManager&&this.pcVideoManager.RenderPrivateData(t);return Te._JSPlayM4_RenderPrivateData(this.port,e,t)}},{key:"JSPlayM4_RenderPrivateDataEx",value:function(e,t,r){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_RenderPrivateDataEx","color: red"),0):(this.renderIntelSubEx.set(e,t),this.renderIntelFlagEx.set(e,r),Te._JSPlayM4_RenderPrivateDataEx(this.port,e,t,r))}},{key:"JSPlayM4_SetCanvasSize",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetCanvasSize","color: red"),0;if(e<16||t<16||null===this.canvasID)return 0;if(this.canvasWidth=e,this.canvasHeight=t,1===this.decodeEngine)if(this.hasWebWorker){if(null==this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"SetCanvasSize",width:e,height:t})}else null!=this.pcVideoManager&&this.pcVideoManager.SetCanvasSize(e,t);return Te._JSPlayM4_SetCanvasSize(this.port,e,t,r)}},{key:"JSPlayM4_SetDisplayBuf",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDisplayBuf","color: red"),0):(this.displayBuf=e,this.needSetDisplayBuf=!0,1===this.decodeEngine&&(this.hasWebWorker?null===this.decodeWorker||this.decodeWorker.postMessage({command:"SetDisplayBuf",value:e}):null!=this.pcVideoManager&&this.pcVideoManager.SetDisplayBuf(e)),Te._JSPlayM4_SetDisplayBuf(this.port,e))}},{key:"JSPlayM4_GetSourceBufferRemain",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetSourceBufferRemain","color: red"),0):Te._JSPlayM4_GetSourceBufferRemain(this.port)}},{key:"JSPlayM4_GetBufferValue",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetBufferValue","color: red"),0):Te._JSPlayM4_GetBufferValue(this.port,e)}},{key:"JSPlayM4_ReversePlay",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_ReversePlay","color: red"),0):0===this.streamOpenMode?1:(this.reversePlay=!0,Te._JSPlayM4_ReversePlay(this.port))}},{key:"JSPlayM4_SetDecodeThreadNum",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecodeThreadNum","color: red"),0):(this.decodeThreadNum=e,Te._JSPlayM4_SetDecodeThreadNum(this.port,e))}},{key:"JSPlayM4_GetCanvasSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetCanvasSize","color: red"),0):1===this.decodeEngine?(this.hasWebWorker?this.decodeWorker.postMessage({command:"GetCanvasSize"}):null!=this.pcVideoManager&&this.pcVideoManager.GetCanvasSize(),1):Te._JSPlayM4_GetCanvasSize(this.port,e)}},{key:"JSPlayM4_DisplayLostFrames",value:function(e,t,r){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_DisplayLostFrames","color: red"),0):Te._JSPlayM4_DisplayLostFrames(this.port,e,t,r)}},{key:"JSPlayM4_SetANRParam",value:function(e,t){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetANRParam","color: red"),0):(this.anrParamFlag=e,this.anrParamLevel=t,Te._JSPlayM4_SetANRParam(this.port,e,t))}},{key:"JSPlayM4_SetResampleValue",value:function(e,t){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetResampleValue","color: red"),0):(this.resampleFlag=e,this.resampleRate=t,Te._JSPlayM4_SetResampleValue(this.port,e,t))}},{key:"JSPlayM4_SetAntialias",value:function(e){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAntialias","color: red"),0;var t=1;return this.antialiasFlag=e,1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"SetAntialias",value:e}):null!=this.pcVideoManager&&(t=this.pcVideoManager.SetAntialias(e)):t=Te._JSPlayM4_SetAntialias(this.port,e),t}},{key:"JSPlayM4_SyncToAudio",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SyncToAudio","color: red"),0):(this.syncToAudio=SyncToAudio,Te._JSPlayM4_SyncToAudio(this.port,e))}},{key:"JSPlayM4_SetAudioThreadModel",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAudioThreadModel","color: red"),0):(this.setAudioThreadModel=e,Te._JSPlayM4_SetAudioThreadModel(this.port,e))}},{key:"JSPlayM4_SetDecodeERC",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecodeERC","color: red"),0):(this.decodeERCLevel=e,Te._JSPlayM4_SetDecodeERC(this.port,e))}},{key:"JSPlayM4_SkipErrorData",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SkipErrorData","color: red"),0):(this.needSetSkipErrorData=!0,this.skipErrorData=e,Te._JSPlayM4_SkipErrorData(this.port,e))}},{key:"JSPlayM4_SetDemuxModel",value:function(e,t){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDemuxModel","color: red"),0):(this.needSetDemuxModel=!0,this.setDemuxModelType=e,this.setDemuxModelFlag=t,Te._JSPlayM4_SetDemuxModel(this.port,e,t))}},{key:"JSPlayM4_SetD3DPostProcess",value:function(e,t){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetD3DPostProcess","color: red"),0;var r=1;return this.d3dPostProcessType=e,this.d3dPostProcessValue=t,this.needSetD3DPostProcess=!0,1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"SetD3DPostProcess",ProcessType:e,ProcessValue:t}):null!=this.pcVideoManager&&(r=this.pcVideoManager.SetD3DPostProcess(e,t)):r=Te._JSPlayM4_SetD3DPostProcess(this.port,e,t),r}},{key:"JSPlayM4_SetFirstFrameCallBack",value:function(e,t){if(!(t&&"function"==typeof t||null===t))return 0;if(this.FFCallBackFun=t,this.FirstFrameCallBackflag=e,null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetFirstFrameCallBack","color: red"),0;var r=1;return 0===this.decodeEngine&&(r=Te._JSPlayM4_SetFirstFrameCallBack(this.port,e,this.nUser)),r}},{key:"JSPlayM4_SetDecCallBack",value:function(e,t){return t&&"function"==typeof t||null===t?(this.decCallBackFun=t,null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecCallBack","color: red"),0):Te._JSPlayM4_SetDecCallBack(this.port,e,this.nUser)):0}},{key:"JSPlayM4_SetDisplayCallBack",value:function(e,t){return t&&"function"==typeof t||null===t?(this.displayCallBackFun=t,null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDisplayCallBack","color: red"),0):Te._JSPlayM4_SetDisplayCallBack(this.port,e,this.nUser)):0}},{key:"JSPlayM4_SetFrameInfoCallBack",value:function(e){var t=this,r=1;if(1===this.decodeEngine)this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"SetFrameInfoCallBack",value:e}):null!=this.pcVideoManager&&(r=this.pcVideoManager.SetFrameInfoCallBack((function(e){t.displayFrameInfo.port=e.port,t.displayFrameInfo.codecType=e.codecType,t.displayFrameInfo.frameType=e.frameType,t.displayFrameInfo.frameSize=e.frameSize,t.displayFrameInfo.width=e.width,t.displayFrameInfo.height=e.height,t.displayFrameInfo.timeStamp=e.timeStamp,t.displayFrameInfo.frameRate=e.frameRate,t.displayFrameInfo.frameNum=e.frameNum,t.displayFrameInfo.interlace=e.interlace,t.displayFrameInfo.streamEnd=e.streamEnd,t.displayFrameInfo.cropLeft=e.cropLeft,t.displayFrameInfo.cropRight=e.cropRight,t.displayFrameInfo.cropTop=e.cropTop,t.displayFrameInfo.cropBottom=e.cropBottom,t.displayFrameInfo.year=e.year,t.displayFrameInfo.month=e.month,t.displayFrameInfo.week=e.week,t.displayFrameInfo.day=e.day,t.displayFrameInfo.hour=e.hour,t.displayFrameInfo.minute=e.minute,t.displayFrameInfo.second=e.second,t.displayFrameInfo.milliseconds=e.milliseconds}),e));else{if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetFrameInfoCallBack","color: red"),0;r=Te._JSPlayM4_SetFrameInfoCallBack(this.port,e)}return r}},{key:"JSPlayM4_SetDecCBStream",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecCBStream","color: red"),0):Te._JSPlayM4_SetDecCBStream(this.port,e)}},{key:"JSPlayM4_GetFrameInfo",value:function(){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetFrameInfo","color: red"),0;var e={};if(0==this.decodeEngine){var t=Te._JSPlayM4_GetFrameInfo(this.port);e.port=Te.HEAP32[t>>2],e.frameType=Te.HEAP32[t+4>>2],e.frameSize=Te.HEAP32[t+8>>2],e.width=Te.HEAP32[t+12>>2],e.height=Te.HEAP32[t+16>>2],e.timeStamp=Te.HEAP32[t+20>>2],e.frameRate=Te.HEAP32[t+24>>2],e.bitPerSample=Te.HEAP32[t+28>>2],e.samplesPerSec=Te.HEAP32[t+32>>2],e.channel=Te.HEAP32[t+36>>2],e.frameNum=Te.HEAP32[t+40>>2],e.cropLeft=Te.HEAP32[t+44>>2],e.cropRight=Te.HEAP32[t+48>>2],e.cropTop=Te.HEAP32[t+52>>2],e.cropBottom=Te.HEAP32[t+56>>2],e.year=Te.HEAP16[t+60>>1],e.month=Te.HEAP16[t+62>>1],e.week=Te.HEAP16[t+64>>1],e.day=Te.HEAP16[t+66>>1],e.hour=Te.HEAP16[t+68>>1],e.minute=Te.HEAP16[t+70>>1],e.second=Te.HEAP16[t+72>>1],e.milliseconds=Te.HEAP16[t+74>>1],this.width=e.width,this.height=e.height}else e=this.displayFrameInfo;return e}},{key:"JSPlayM4_GetAdditionData",value:function(){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetAdditionData","color: red"),0;var e=null,t=Te._JSPlayM4_GetAdditionData(this.port);return e.dataType=Te.HEAP32[t>>2],e.dataStrVersion=Te.HEAP32[t+4>>2],e.dataTimeStamp=Te.HEAP32[t+8>>2],e.dataLength=Te.HEAP32[t+12>>2],e.pData=Te.HEAP32[t+16>>2],e.additionDataBuffer=new Uint8Array(dataLength),additionDataBuffer.set(Te.HEAPU8.subarray(pData,pData+dataLength)),e}},{key:"JSPlayM4_SetAdditionDataCallBack",value:function(e,t,r){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAdditionDataCallBack","color: red"),0):r&&"function"==typeof r||null===r?(this.addtionCallBackFun=r,Te._JSPlayM4_SetAdditionDataCallBack(this.port,e,t,this.nUser)):0}},{key:"JSPlayM4_GetPlayedTimeEx",value:function(e){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetPlayedTimeEx","color: red"),0;if(!(e&&"function"==typeof e||null===e))return 0;if(this.getPlayTimeCallBackFun=e,1===this.decodeEngine){if(this.hasWebWorker)this.decodeWorker.postMessage({command:"GetPlayedTime"});else if(null!=this.pcVideoManager){var t=this.pcVideoManager.GetPlayedTime();this.getPlayTimeCallBackFun&&this.getPlayTimeCallBackFun(t-this.startTimeStamp)}}else{var r=Te._JSPlayM4_GetPlayedTimeEx(this.port);this.getPlayTimeCallBackFun(r)}}},{key:"JSPlayM4_GetFileTime",value:function(){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetFileTime","color: red"),0):Te._JSPlayM4_GetFileTime(this.port)}},{key:"JSPlayM4_GetMpOffset",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetMpOffset","color: red"),0):e>this.JSPlayM4_GetFileTime()?-1:(1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"needReset"}):null!=this.pcVideoManager&&this.pcVideoManager.needReset()),Te._JSPlayM4_GetMpOffset(this.port,e))}},{key:"JSPlayM4_ResetBuffer",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_ResetBuffer","color: red"),0):(this.resetBufferType=e,Te._JSPlayM4_ResetBuffer(this.port,e))}},{key:"JSPlayM4_SetGlobalBaseTime",value:function(e,t,r,i,a,n,s){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetGlobalBaseTime","color: red"),0):(this.globalBaseTime={year:e,month:t,day:r,hour:i,min:a,sec:n,ms:s},Te._JSPlayM4_SetGlobalBaseTime(this.port,e,t,r,i,a,n,s))}},{key:"JSPlayM4_SetSecretKey",value:function(e){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetSecretKey","color: red"),0;var t=this._stringToBytes(e),r=Te._malloc(128);if(null!==r){var i=Te.HEAPU8.subarray(r,r+128),a=new Uint8Array(128);i.set(a,0),i.set(new Uint8Array(t)),i=null,a=null;var n=Te._JSPlayM4_SetSecretKey(this.port,1,r,128);return null!==r&&(Te._free(r),r=null),1===n&&(this.needSetSecretKey=!0,this.SecretKeyData=e),n}}},{key:"JSPlayM4_SetRunTimeInfoCallBackEx",value:function(e,t){return t&&"function"==typeof t||null===t?(this.runtimeCBFun=t,this.runTimeModule=e,null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetRunTimeInfoCallBackEx","color: red"),0):Te._JSPlayM4_SetRunTimeInfoCallBackEx(this.port,e,this.nUser)):0}},{key:"JSPlayM4_SetPlayOrBackSwitchMode",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetPlayOrBackSwitchMode","color: red"),0):(this.playOrBackSwitchMode=e,0==this.decodeEngine?Te._JSPlayM4_SetPlayOrBackSwitchMode(this.port,e):0)}},{key:"JSPlayM4_SetStretchPlay",value:function(e,t){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetStretchPlay","color: red"),0):(this.setStretchPlayTime=e,this.setStretchPlaySpeed=t,0==this.decodeEngine?Te._JSPlayM4_SetStretchPlay(this.port,e,t):0)}},{key:"JSPlayM4_SetAutoSmoothPlay",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAutoSmoothPlay","color: red"),0):(this.autoSmoothPlayModel=e,0==this.decodeEngine?Te._JSPlayM4_SetAutoSmoothPlay(this.port,e):0)}},{key:"JSPlayM4_KeepPlaySpeed",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_KeepPlaySpeed","color: red"),0):(this.keepPlaySpeed=e,0==this.decodeEngine?Te._JSPlayM4_KeepPlaySpeed(this.port,e):0)}},{key:"JSPlayM4_IgnoreHeaderAudioDefine",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_IgnoreHeaderAudioDefine","color: red"),0):Te._JSPlayM4_IgnoreHeaderAudioDefine(this.port,e)}},{key:"JSPlayM4_SetSycGroup",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetSycGroup","color: red"),0):Te._JSPlayM4_SetSycGroup(this.port,e)}},{key:"JSPlayM4_FEC_SetCanvasID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetCanvasID","color: red"),0;this.FECCanvasID=e;var r=1;if(null!=e&&""!=e)if(this.FECcanvasIDArray=e.split(","),1===this.decodeEngine)this.hasWebWorker?this.decodeWorker.postMessage({command:"SetCanvasID"}):null!=this.pcVideoManager?r=this.pcVideoManager.FEC_SetCanvasID(e):console.info("%c JSPlayM4_FEC_SetCanvasID this.pcVideoManager is null","color: red");else{for(var i="",a=0;a<this.FECcanvasIDArray.length;a++)a==this.FECcanvasIDArray.length-1?i+="#"+this.FECcanvasIDArray[a]:i+="#"+this.FECcanvasIDArray[a]+",";if(0!=this.FECcanvasIDArray.length&&t)for(var n=0;n<this.FECcanvasIDArray.length;n++){var s=document.getElementById(this.FECcanvasIDArray[n]);if(s){var o=s.cloneNode(!0);s.parentNode.replaceChild(o,s)}}var x=this._stringToBytes(i),f=2*i.length;if(this.pFECTotalCanvasIDData=Te._malloc(f),null===this.pFECTotalCanvasIDData)return 0;var l=Te.HEAPU8.subarray(this.pFECTotalCanvasIDData,this.pFECTotalCanvasIDData+f),h=new Uint8Array(f);l.set(h,0),l.set(new Uint8Array(x)),l=null,h=null,r=Te._JSPlayM4_FEC_SetCanvasID(this.port,this.pFECTotalCanvasIDData)}else console.log(" JSPlayM4_FEC_SetCanvasID canvasID is null :"+e),r=0;return r}},{key:"JSPlayM4_FEC_ResetCorrectType",value:function(e,t,r){if(this.printfFlag&&console.log("JSPlayM4_FEC_ResetCorrectType 1 decodeEngine:"+this.decodeEngine+",hasWebWorker:"+this.hasWebWorker+",fishSubPort:"+e+",placeType:"+t+",correctType:"+r),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_ResetCorrectType","color: red"),0;this.FECPlaceType=t,this.FECCorrectType=r;var i=1;return 1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECResetCorrectType",fishSubPort:e,placeType:t,correctType:r}):i=0:i=null!=this.pcVideoManager?this.pcVideoManager.FEC_ResetCorrectType(e,t,r):0:i=Te._JSPlayM4_FEC_ResetCorrectType(this.port,e,t,r),i}},{key:"JSPlayM4_FEC_GetPort",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_GetPort this.decodeEngine："+this.decodeEngine+",placeType:"+e+",correctType:"+t),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetPort","color: red"),0;var i=-1;return this.FECGetPortCB=r,1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECGetPort",placeType:e,correctType:t}):i=-1:(null!=this.pcVideoManager?((i=this.pcVideoManager.FEC_GetPort(e,t))<1||i>31||null==i)&&(i=-1):i=-1,null!=this.FECGetPortCB&&this.FECGetPortCB(i)):(((i=Te._JSPlayM4_FEC_GetPort(this.port,e,t))<1||i>31||null==i)&&(i=-1),null!=this.FECGetPortCB&&this.FECGetPortCB(i)),i}},{key:"JSPlayM4_FEC_Enable",value:function(e){if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_Enable this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_Enable","color: red"),0;var t=1;return 0==e?console.log("fishPort is 0 ,main canvas doesn't need call FEC_Enable"):1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECEnable",fishSubPort:e}):t=0:t=null!=this.pcVideoManager?this.pcVideoManager.FEC_Enable(e):0:t=Te._JSPlayM4_FEC_Enable(this.port,e),t}},{key:"JSPlayM4_FEC_SetParam",value:function(e,t){if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_SetParam 1 this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",upDateType:"+t.upDateType+",param2d.fPTZParam.fPTZPositionX:"+t.fPTZParam.fPTZPositionX+",param2d.fPTZParam.fPTZPositionY:"+t.fPTZParam.fPTZPositionY),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetParam","color: red"),0;var r=1;if(1===this.decodeEngine)this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetParam",fishSubPort:e,param2d:t}):r=0:r=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetParam(e,t):0;else{var i=Te._JSPlayM4_GetFishEye2DParam();null!=t.upDateType&&(Te.HEAP32[i>>2]=t.upDateType),null!=t.fPTZParam&&null!=t.fPTZParam.fPTZPositionX&&null!=t.fPTZParam.fPTZPositionY&&(Te.HEAPF32[i+8>>2]=t.fPTZParam.fPTZPositionX,Te.HEAPF32[i+12>>2]=t.fPTZParam.fPTZPositionY),null!=t.fPTZParam&&(Te.HEAPF32[i+32>>2]=t.fPTZZoom),null!=t.fValue&&(Te.HEAPF32[i+36>>2]=t.fValue),r=Te._JSPlayM4_FEC_SetParam(this.port,e)}return r}},{key:"JSPlayM4_FEC_GetParam",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetParam","color: red"),0;var r={fRXLeft:0,fRXRight:0,fRYTop:0,fRYBottom:0,bBlack:0,bCut:0,nFishParamType:0,fAngle:0,fZoom:0,fPTZX:0,fPTZY:0,emCorrectType:0};if(this.FECParamCB=t,1===this.decodeEngine)this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"FECGetParam",fishSubPort:e}):null!=this.pcVideoManager&&(this.pcVideoManager.FEC_GetParam(e,r),null!=this.FECParamCB&&this.FECParamCB(r));else{var i=Te._JSPlayM4_FEC_GetParam(this.port,e);r.bBlack=0,r.fPTZX=Te.HEAPF32[i+8>>2],r.fPTZY=Te.HEAPF32[i+12>>2],r.fRXLeft=Te.HEAPF32[i+16>>2],r.fRXRight=Te.HEAPF32[i+20>>2],r.fRYTop=Te.HEAPF32[i+24>>2],r.fRYBottom=Te.HEAPF32[i+28>>2],r.fZoom=Te.HEAPF32[i+32>>2],r.fAngle=Te.HEAPF32[i+36>>2],r.bCut=Te.HEAPF32[i+63>>2],r.nFishParamType=Te.HEAPF32[i+67>>2],null!=this.FECParamCB&&this.FECParamCB(r)}return 1}},{key:"JSPlayM4_FEC_SetViewParam",value:function(e,t,r){if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_SetViewParam this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",upDateType:"+t+",fValue:"+r),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetViewParam","color: red"),0;var i=1;return 1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetViewParam",fishSubPort:e,upDateType:t,fValue:r}):i=0:i=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetViewParam(e,t,r):0:i=Te._JSPlayM4_FEC_SetViewParam(this.port,e,t,r),i}},{key:"JSPlayM4_FEC_GetViewParam",value:function(e,t,r){if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetViewParam","color: red"),0;var i=1;this.FECViewParamCB=r;var a={fValue:-1};if(1===this.decodeEngine)this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECGetViewParam",fishSubPort:e,upDateType:t}):i=0:null!=this.pcVideoManager?(i=this.pcVideoManager.FEC_GetViewParam(e,t,a),null!=this.FECViewParamCB&&this.FECViewParamCB(a)):i=0;else{var n=Te._JSPlayM4_GetViewParam(this.port,e,t);a.fValue=n,null!=this.FECViewParamCB&&this.FECViewParamCB(a)}return i}},{key:"JSPlayM4_FEC_SetWnd",value:function(e,t){if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_SetWnd this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",hWnd:"+t),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetWnd","color: red"),0;var r=1;if(0==e)console.log("fishPort is 0 ,main canvas doesn't need call FEC_SetWnd");else if(null!=t)if(1===this.decodeEngine){var i=document.getElementById(t);if(this.hasWebWorker){var a=i.transferControlToOffscreen();null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetWnd",fishSubPort:e,offscrrenCnv:a},[a]):r=0}else r=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetWnd(e,i):0}else{var n=null;if(null!=t){var s=this._stringToBytes("#"+t),o=2*(t.length+1);n=Te._malloc(o);var x=Te.HEAPU8.subarray(n,n+o),f=new Uint8Array(o);x.set(f,0),x.set(new Uint8Array(s)),x=null,f=null}r=Te._JSPlayM4_FEC_SetWnd(this.port,e,n),null!=n&&(Te._free(n),n=null)}else console.log(">>>JS JSPlayM4_FEC_SetWnd hwnd error this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",hWnd:"+t),r=0;return r}},{key:"JSPlayM4_FEC_Disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=1;return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_Disable","color: red"),0):(0==e?console.log("fishPort is 0 ,main canvas doesn't need call FEC_Disable"):1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECDisable",fishSubPort:e,clearFECCanvas:t,clearContext:r}):i=0:i=null!=this.pcVideoManager?this.pcVideoManager.FEC_Disable(e,t,r):0:i=Te._JSPlayM4_FEC_Disable(this.port,e,t,r),i)}},{key:"JSPlayM4_FEC_DelPort",value:function(e){if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_DelPort this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_DelPort","color: red"),0;var t=1;return 1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECDelPort",fishSubPort:e}):t=0:t=null!=this.pcVideoManager?this.pcVideoManager.FEC_DelPort(e):0:t=Te._JSPlayM4_FEC_DelPort(this.port,e),t}},{key:"JSPlayM4_FEC_SetDisplayRegion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,n=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_SetDisplayRegion this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",left:"+i.left+",right:"+i.right+",top:"+i.top+",bottom:"+i.bottom),null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetDisplayRegion","color: red"),0;var o=1,x=i.left,f=i.right,l=i.top,h=i.bottom;if("number"!=typeof x||"number"!=typeof f||"number"!=typeof h||"number"!=typeof l)return console.log("param is not number"),0;if(n){if(s){if(x<0||f<0||l<0||h<0)return 0;0!==this.iFECZoomNum&&(x=Math.round(x/this.iFECRatio_x)+this.stFECDisplayRect.left,l=Math.round(l/this.iFECRatio_y)+this.stFECDisplayRect.top,f=Math.round(f/this.iFECRatio_x)+this.stFECDisplayRect.left,h=Math.round(h/this.iFECRatio_y)+this.stFECDisplayRect.top)}}else x=0,f=this.canvasWidth,l=0,h=this.canvasHeight,this.iFECZoomNum=0,this.iFECRatio_x=1,this.iFECRatio_y=1;if(this.stFECDisplayRect={top:l,left:x,right:f,bottom:h},f-x<16||h-l<16||f-x>this.canvasWidth||h-l>this.canvasHeight)return 0;if(1===this.decodeEngine){var c=x/this.canvasWidth*this.width,u=f/this.canvasWidth*this.width,_=l/this.canvasHeight*this.height,d=h/this.canvasHeight*this.height;this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetDisplayRegion",fishSubPort:e,type:t,regionNum:r,sx:c,sy:_,sw:u-c,sh:d-_}):o=0:o=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetDisplayRegion(e,t,r,c,_,u-c,d-_):0}else if(null!==Te){var p=x/this.canvasWidth*1e3,m=f/this.canvasWidth*1e3,P=l/this.canvasHeight*1e3,y=h/this.canvasHeight*1e3;o=n?Te._JSPlayM4_FEC_SetDisplayRegion(this.port,e,t,r,p,m,P,y,a,n):Te._JSPlayM4_FEC_SetDisplayRegion(this.port,e,0,0,0,0,0,0,null,n)}else o=0;return s&&(this.iFECRatio_x=this.canvasWidth/(f-x),this.iFECRatio_y=this.canvasHeight/(h-l),this.iFECZoomNum++),o}},{key:"JSPlayM4_FEC_SetBackCilling",value:function(e,t){var r=1;return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetBackCilling","color: red"),0):(1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetBackCilling",fishSubPort:e,bValue:t}):r=0:r=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetBackCilling(e,t):0:r=Te._JSPlayM4_FEC_SetBackCilling(this.port,e,t),r)}},{key:"JSPlayM4_FEC_GetPTZPort",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null===Te)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetPTZPort","color: red"),0;var a=-1;return this.FECGetPTZPortCB=i,1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECGetPTZPort",fPositionX:e,fPositionY:t}):a=0:null!=this.pcVideoManager?(((a=this.pcVideoManager.FEC_GetPTZPort(r,e,t))<0||a>31||null==a)&&(a=-1),null!=this.FECGetPTZPortCB&&this.FECGetPTZPortCB(a)):a=-1:console.info("%c softDecoder not support JSPlayM4_FEC_GetPTZPort","color: red"),a}},{key:"JSPlayM4_FEC_SetPTZDisplayMode",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetPTZDisplayMode","color: red"),0):(1===this.decodeEngine&&(this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"FECSetPTZDisplayMode",ptzMode:e}):null!=this.pcVideoManager&&this.pcVideoManager.FEC_SetPTZDisplayMode(e)),1)}},{key:"JSPlayM4_FEC_PTZ2Window",value:function(e,t,r,i){return 1}},{key:"JSPlayM4_FEC_PTZ2Window2",value:function(e,t,r){return 1}},{key:"JSPlayM4_InputPrivateInfo",value:function(e,t,r){var i={};i.linesNum=Te.HEAP32[e>>2],i.absTimeStamp=Te.HEAP32[e+4>>2],i.stDrawLinesArray=[];for(var a=0;a<i.linesNum;a++){i.stDrawLinesArray[a]={},i.stDrawLinesArray[a].vertex_num=Te.HEAP32[e+8+112*a>>2],i.stDrawLinesArray[a].lineWidth=Te.HEAP32[e+12+112*a>>2],i.stDrawLinesArray[a].bFill=Te.HEAP32[e+16+112*a>>2],i.stDrawLinesArray[a].bLoop=Te.HEAP32[e+20+112*a>>2],i.stDrawLinesArray[a].color={},i.stDrawLinesArray[a].color.R=Te.HEAPF32[e+24+112*a>>2],i.stDrawLinesArray[a].color.G=Te.HEAPF32[e+28+112*a>>2],i.stDrawLinesArray[a].color.B=Te.HEAPF32[e+32+112*a>>2],i.stDrawLinesArray[a].color.A=Te.HEAPF32[e+36+112*a>>2],i.stDrawLinesArray[a].stPoint=[];for(var n=0;n<i.stDrawLinesArray[a].vertex_num;n++)i.stDrawLinesArray[a].stPoint[n]={},i.stDrawLinesArray[a].stPoint[n].x=Te.HEAPF32[e+40+112*a+8*n>>2],i.stDrawLinesArray[a].stPoint[n].y=Te.HEAPF32[e+44+112*a+8*n>>2]}var s={};s.nFontsNum=Te.HEAP32[t>>2],s.absTimeStamp=Te.HEAP32[t+4>>2],s.stDrawFontsArray=[];for(var o=0;o<s.nFontsNum;o++){s.stDrawFontsArray[o]={},s.stDrawFontsArray[o].nFontSizeW=Te.HEAP32[t+8+40*o>>2],s.stDrawFontsArray[o].nFontSizeH=Te.HEAP32[t+12+40*o>>2],s.stDrawFontsArray[o].color={},s.stDrawFontsArray[o].color.R=Te.HEAPF32[t+16+40*o>>2],s.stDrawFontsArray[o].color.G=Te.HEAPF32[t+20+40*o>>2],s.stDrawFontsArray[o].color.B=Te.HEAPF32[t+24+40*o>>2],s.stDrawFontsArray[o].color.A=Te.HEAPF32[t+28+40*o>>2],s.stDrawFontsArray[o].stPoint={},s.stDrawFontsArray[o].stPoint.x=Te.HEAPF32[t+32+40*o>>2],s.stDrawFontsArray[o].stPoint.y=Te.HEAPF32[t+36+40*o>>2];var x=Te.HEAP32[t+40+40*o>>2],f=Te.HEAP32[t+44+40*o>>2],l=new Uint8Array(f);l.set(Te.HEAP8.subarray(x,x+f));for(var h="",c=0;c<l.length;c++)0!==l[c]&&(h+=String.fromCharCode(l[c]));s.stDrawFontsArray[o].fontString=h}var u={};u.absTimeStamp=Te.HEAP32[r>>2],u.nWidth=Te.HEAP32[r+4>>2],u.nHeight=Te.HEAP32[r+8>>2],u.pstRect={},u.pstRect.fTop=Te.HEAPF32[r+12>>2],u.pstRect.fBottom=Te.HEAPF32[r+16>>2],u.pstRect.fLeft=Te.HEAPF32[r+20>>2],u.pstRect.fRight=Te.HEAPF32[r+24>>2],u.nPixelFormat=Te.HEAP32[r+28>>2],u.fAlpha=Te.HEAPF32[r+32>>2],u.nPixelFormat;var _=Te.HEAP32[r+36>>2],d=Te.HEAP32[r+40>>2],p=new Uint8Array(d);return p.set(Te.HEAPU8.subarray(_,_+d)),u.picImageData=p,1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"InputPrivateInfo",linesInfo:i,fontInfo:s,ImageInfo:u}):null!=this.pcVideoManager&&this.pcVideoManager.InputPrivateInfo(i,s,u)),1}},{key:"JSPlayM4_SetWaterMarkFont",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetWaterMarkFont","color: red"),0):(1===this.decodeEngine?this.hasWebWorker?this.decodeWorker.postMessage({command:"SetWaterMarkFont",fontParam:e}):null!=this.pcVideoManager&&this.pcVideoManager.SetWaterMarkFont(e):console.log("%c1>soft decode not support SetWaterMarkFont,","color: red"),1)}},{key:"JSPlayM4_SetWaterMarkImage",value:function(e){return null===Te?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetWaterMarkImage","color: red"),0):(1===this.decodeEngine?this.hasWebWorker?this.decodeWorker.postMessage({command:"SetWaterMarkImage",imageParam:e}):null!=this.pcVideoManager&&this.pcVideoManager.SetWaterMarkImage(e):console.log("%c1>soft decode not support SetWaterMarkImage,","color: red"),1)}},{key:"_stringToBytes",value:function(e){for(var t,r,i=[],a=0;a<e.length;a++){t=e.charCodeAt(a),r=[];do{r.push(255&t),t>>=8}while(t);i=i.concat(r.reverse())}return i}},{key:"_downloadFile",value:function(e,t){var r=e;s(e,Blob)||s(e,File)||(r=new Blob([e]));var i=window.URL.createObjectURL(r),a=window.document.createElement("a");a.href=i,a.download=t;var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0),a.dispatchEvent(n)}},{key:"downloadRTPData",value:function(e){if(this.bWriteData){var t=e,r=this.aTotalBuffer.length;console.log("totalLength:"+r);for(var i=0,a=t.length;i<a;i++)this.aTotalBuffer[r+i]=t[i];this.iFrameNum++,t=null,console.log("downloadRTPdata iFrameNum:"+this.iFrameNum)}if(this.bWriteData&&this.iFrameNum>=600){console.log("download600RawData");var n=new Uint8Array(this.aTotalBuffer);this._downloadFile(n,"Raw600.data"),this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.bWriteData=!1,this.iFrameNum=0,n=null}}},{key:"downloadAudioPCMData",value:function(e){if(this.bWriteAudioPCMData){for(var t=e,r=this.audioPCMBuffer.length,i=0,a=t.length;i<a;i++)this.audioPCMBuffer[r+i]=t[i];this.iAudioPCMFrameNum++,t=null,console.log("download ANR Decode AudioData FrameNum:"+this.iAudioPCMFrameNum)}if(this.bWriteAudioPCMData&&this.iAudioPCMFrameNum>=WRITE_PCM_NUM){console.log("download"+WRITE_PCM_NUM+"this.audioPCMBuffer");var n=new Uint8Array(this.audioPCMBuffer);this._downloadFile(n,"AudioANR.data"),this.audioPCMBuffer.splice(0,this.audioPCMBuffer.length),this.bWriteAudioPCMData=!1,this.iAudioPCMFrameNum=0,n=null}}}]),t}();window._getFExplore=function(){var e,t={},r=navigator.userAgent.toLowerCase();if((e=r.match(/rv:([\d.]+)\) like gecko/))||(e=r.match(/msie ([\d\.]+)/))?t.ie=e[1]:(e=r.match(/edge\/([\d\.]+)/))?t.edge=e[1]:(e=r.match(/firefox\/([\d\.]+)/))?t.firefox=e[1]:(e=r.match(/(?:opera|opr).([\d\.]+)/))?t.opera=e[1]:(e=r.match(/chrome\/([\d\.]+)/))?t.chrome=e[1]:(e=r.match(/version\/([\d\.]+).*safari/))&&(t.safari=e[1]),t.chrome){var i=t.chrome,a=i.indexOf(".");return Number(i.substring(0,a))}return t.ie?console.info("%c1>your browser is IE ,it does not support play without plugin","color: red"):t.safari?console.info("%c1>your browser is safari ,it does not support softV2.0 or hard decode","color: red"):t.firefox?console.info("%c1>your browser is Firefox ,it only support soft decode","color: red"):console.info("%c1>your browser does not support play without plugin","color: red"),-1},window.JSPlayM4_AdditionDataCBFun=function(e,t,r){if(null!=Fe[r][e]){var i={};i.dataType=Te.HEAP32[t>>2],i.dataStrVersion=Te.HEAP32[t+4>>2],i.dataTimeStamp=Te.HEAP32[t+8>>2],i.dataLength=Te.HEAP32[t+12>>2],i.pData=Te.HEAP32[t+16>>2],i.additionDataBuffer=new Uint8Array(i.dataLength),i.additionDataBuffer.set(Te.HEAPU8.subarray(i.pData,i.pData+i.dataLength)),Fe[r][e].hasOwnProperty("addtionCallBackFun")&&null!=Fe[r][e].addtionCallBackFun&&null!=Fe[r][e].addtionCallBackFun&&Fe[r][e].addtionCallBackFun(i)}},window.JSPlayM4_DisplayCallBack=function(e,t,r,i,a){if(null!=Fe[a][e]){var n={};n.yuvData=t,n.isize=r,n.timeStamp=i,Fe[a][e].hasOwnProperty("displayCallBackFun")&&null!=Fe[a][e].displayCallBackFun&&Fe[a][e].displayCallBackFun(n)}},window.JSPlayM4_DecCallBack=function(e,t,r,i,a,n){if(null!=Fe[n][e]){var s={};s.port=e,s.Data=t,s.isize=r,s.iDataType=i,s.SampleRate=a,Fe[n][e].hasOwnProperty("decCallBackFun")&&null!=Fe[n][e].decCallBackFun&&Fe[n][e].decCallBackFun(s)}},window.JSPlayM4_RunTimeInfoCallBack=function(e,t,r,i){if(null!=Fe[i][e]){var a=Te.HEAP32[t>>2],n=Te.HEAP32[t+4>>2],s=Te.HEAP32[t+8>>2],o=Te.HEAP32[t+12>>2],x=r;Fe[i][e].hasOwnProperty("runtimeCBFun")&&null!=Fe[i][e].runtimeCBFun&&Fe[i][e].runtimeCBFun(a,n,s,o,x)}},window.JSPlayM4_FirstFrameCallBack=function(e,t){null!=Fe[t][e]&&Fe[t][e].hasOwnProperty("FFCallBackFun")&&null!=Fe[t][e].FFCallBackFun&&null!=Fe[t][e].FFCallBackFun&&Fe[t][e].FFCallBackFun()},window.JSPlayM4_AudioPCMCallBack=function(e,t,r,i){null!=Fe[i][e]&&Fe[i][e].__proto__.hasOwnProperty("downloadAudioPCMData")&&Fe[i][e].downloadAudioPCMData(t)},window.JSPlayM4_RTPRawDataCallBack=function(e,t,r){null!=Fe[r][port]&&Fe[r][port].__proto__.hasOwnProperty("downloadRTPData")&&Fe[r][port].downloadRTPData(e)};var ke,Be=function(e){return"\n(function (event) {\n    const AUDIO_TYPE = 0;\t// 音频\n    const VIDEO_TYPE = 1;   // 视频\n    const PRIVT_TYPE = 2;  // 私有帧\n\n    const PLAYM4_AUDIO_FRAME = 100; // 音频帧\n    const PLAYM4_VIDEO_FRAME = 101; // 视频帧\n\n    const PLAYM4_OK = 1;\n    const PLAYM4_ORDER_ERROR = 2;\n    const PLAYM4_DECODE_ERROR = 44 \t// 解码失败\n    const PLAYM4_NOT_KEYFRAME = 48; \t// 非关键帧\n    const PLAYM4_NEED_MORE_DATA = 31;   // 需要更多数据才能解析\n    const PLAYM4_NEED_NEET_LOOP = 35; //丢帧需要下个循环\n    const PLAYM4_SYS_NOT_SUPPORT = 16; \t// 不支持\n\n    importScripts('".concat(e,'\');\n    Module.addOnPostRun(function () {\n        postMessage({ \'function\': "loaded" });\n    });\n\n    var iStreamMode = 0;  // 流模式\n\n    var bOpenMode = false;\n    var bOpenStream = false;\n\n    var funGetFrameData = null;\n    var funGetAudFrameData = null;\n\n    var bWorkerPrintLog = false;//worker层log开关\n\n    var g_nPort = -1;\n    var pInputData = null;\n    var inputBufferSize = 40960;\n\n    self.JSPlayM4_RunTimeInfoCallBack = function (nPort, pstRunTimeInfo, pUser) {\n        let port = nPort;\n        let user = pUser;\n        let nRunTimeModule = Module.HEAP32[pstRunTimeInfo >> 2];\n        let nStrVersion = Module.HEAP32[pstRunTimeInfo + 4 >> 2];\n        let nFrameTimeStamp = Module.HEAP32[pstRunTimeInfo + 8 >> 2];\n        let nFrameNum = Module.HEAP32[pstRunTimeInfo + 12 >> 2];\n        let nErrorCode = Module.HEAP32[pstRunTimeInfo + 16 >> 2];\n        // console.log("nRunTimeModule:"+nRunTimeModule+",nFrameNum:"+nFrameNum+",nErrorCode:"+nErrorCode);\n        postMessage({ \'function\': "RunTimeInfoCallBack", \'nRunTimeModule\': nRunTimeModule, \'nStrVersion\': nStrVersion, \'nFrameTimeStamp\': nFrameTimeStamp, \'nFrameNum\': nFrameNum, \'nErrorCode\': nErrorCode });\n    }\n\n    onmessage = function (event) {\n        var eventData = event.data;\n        var res = 0;\n        switch (eventData.command) {\n            case "printLog":\n                let downloadFlag = eventData.data;\n                if (downloadFlag === true) {\n                    bWorkerPrintLog = true;\n                    res = Module._SetPrintLogFlag(g_nPort, downloadFlag);\n                }\n                else {\n                    bWorkerPrintLog = false;\n                    res = Module._SetPrintLogFlag(g_nPort, downloadFlag);\n                }\n\n                if (res !== PLAYM4_OK) {\n                    console.log("DecodeWorker.js: PlayerSDK print log failed,res" + res);\n                    postMessage({ \'function\': "printLog", \'errorCode\': res });\n                }\n                break;\n            case "SetPlayPosition":\n                let nFrameNumOrTime = eventData.data;\n                let enPosType = eventData.type;\n                // res = Module._SetPlayPosition(nFrameNumOrTime,enPosType);\n                // if (res !== PLAYM4_OK)\n                // {\n                //     postMessage({\'function\': "SetPlayPosition", \'errorCode\': res});\n                //     return;\n                // }\n                // //有没有buffer需要清除\n\n                break;\n            case "SetStreamOpenMode":\n                //获取端口号\n                g_nPort = Module._GetPort();\n                //设置流打开模式\n                iStreamMode = eventData.data;\n                res = Module._SetStreamOpenMode(g_nPort, iStreamMode);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "SetStreamOpenMode", \'errorCode\': res });\n                    return;\n                }\n                bOpenMode = true;\n                break;\n\n            case "OpenStream":\n                // 接收到的数据\n                var iHeadLen = eventData.dataSize;\n                var pHead = Module._malloc(iHeadLen + 4);\n                if (pHead === null) {\n                    return;\n                }\n                var aHead = Module.HEAPU8.subarray(pHead, pHead + iHeadLen);\n                aHead.set(new Uint8Array(eventData.data));\n                res = Module._OpenStream(g_nPort, pHead, iHeadLen, eventData.bufPoolSize);\n                postMessage({ \'function\': "OpenStream", \'errorCode\': res });\n                if (res !== PLAYM4_OK) {\n                    //释放内存\n                    Module._free(pHead);\n                    pHead = null;\n                    return;\n                }\n                bOpenStream = true;\n                break;\n            case "Play":\n                let resP = Module._Play(g_nPort);\n                if (resP !== PLAYM4_OK) {\n                    return;\n                }\n                break;\n            case "InputData":\n                // 接收到的数据\n                var iLen = eventData.dataSize;\n                if (iLen > 0) {\n                    if (pInputData == null || iLen > inputBufferSize) {\n                        if (pInputData != null) {\n                            Module._free(pInputData);\n                            pInputData = null;\n                        }\n                        if (iLen > inputBufferSize) {\n                            inputBufferSize = iLen;\n                        }\n\n                        pInputData = Module._malloc(inputBufferSize);\n                        if (pInputData === null) {\n                            return;\n                        }\n                    }\n\n                    var inputData = new Uint8Array(eventData.data);\n                    // var aInputData = Module.HEAPU8.subarray(pInputData, pInputData + iLen);\n                    // aInputData.set(inputData);\n                    Module.writeArrayToMemory(inputData, pInputData);\n                    inputData = null;\n                    res = Module._InputData(g_nPort, pInputData, iLen);\n                    if (res !== PLAYM4_OK) {\n                        let errorCode = Module._GetLastError(g_nPort);\n                        let sourceRemain = Module._GetSourceBufferRemain(g_nPort);\n                        postMessage({ \'function\': "InputData", \'errorCode\': errorCode, "sourceRemain": sourceRemain });\n                    }\n                    //Module._free(pInputData);\n                    //pInputData = null;\n                } else {\n                    let sourceRemain = Module._GetSourceBufferRemain(g_nPort);\n                    if (sourceRemain == 0) {\n                        postMessage({ \'function\': "InputData", \'errorCode\': PLAYM4_NEED_MORE_DATA });\n                        return;\n                    }\n                }\n\n                /////////////////////\n                // if (funGetFrameData === null) {\n                //     funGetFrameData = Module.cwrap(\'GetFrameData\', \'number\');\n                // }\n\n                while (bOpenMode && bOpenStream) {\n\n                    var ret = getFrameData();\n                    // 直到获取视频帧或数据不足为止\n                    if (PLAYM4_VIDEO_FRAME === ret || PLAYM4_NEED_MORE_DATA === ret || PLAYM4_ORDER_ERROR === ret)//PLAYM4_VIDEO_FRAME === ret ||  || PLAYM4_NEED_NEET_LOOP === ret\n                    {\n                        break;\n                    }\n                }\n                break;\n\n            case "SetSecretKey":\n                var keyLen = eventData.nKeyLen;\n                var pKeyData = Module._malloc(keyLen);\n                if (pKeyData === null) {\n                    return;\n                }\n                var nKeySize = eventData.data.length\n                var bufData = stringToBytes(eventData.data);\n                var aKeyData = Module.HEAPU8.subarray(pKeyData, pKeyData + keyLen);\n                let u8array = new Uint8Array(keyLen);\n                aKeyData.set(u8array, 0);\n                aKeyData.set(new Uint8Array(bufData));\n                aKeyData = null;\n                u8array = null;\n\n                res = Module._SetSecretKey(g_nPort, eventData.nKeyType, pKeyData, keyLen);//, nKeySize\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "SetSecretKey", \'errorCode\': res });\n                    Module._free(pKeyData);\n                    pKeyData = null;\n                    return;\n                }\n\n                Module._free(pKeyData);\n                pKeyData = null;\n                break;\n\n            case "GetBMP":\n                var nBMPWidth = eventData.width;\n                var nBMPHeight = eventData.height;\n                var pYUVData = eventData.data;\n                var nYUVSize = nBMPWidth * nBMPHeight * 3 / 2;\n                var oBMPCropRect = eventData.rect;\n\n                var pDataYUV = Module._malloc(nYUVSize);\n                if (pDataYUV === null) {\n                    return;\n                }\n\n                Module.writeArrayToMemory(new Uint8Array(pYUVData, 0, nYUVSize), pDataYUV);\n\n                // 分配BMP空间\n                var nBmpSize = nBMPWidth * nBMPHeight * 4 + 60;\n                var pBmpData = Module._malloc(nBmpSize);\n                var pBmpSize = Module._malloc(4);\n                if (pBmpData === null || pBmpSize === null) {\n                    Module._free(pDataYUV);\n                    pDataYUV = null;\n\n                    if (pBmpData != null) {\n                        Module._free(pBmpData);\n                        pBmpData = null;\n                    }\n\n                    if (pBmpSize != null) {\n                        Module._free(pBmpSize);\n                        pBmpSize = null;\n                    }\n                    return;\n                }\n\n                //Module._memset(pBmpSize, nBmpSize, 4); // 防止bmp截图出现输入数据过大的错误码\n                Module.setValue(pBmpSize, nBmpSize, "i32");\n                res = Module._GetBMP(g_nPort, pDataYUV, nYUVSize, pBmpData, pBmpSize,\n                    oBMPCropRect.left, oBMPCropRect.top, oBMPCropRect.right, oBMPCropRect.bottom);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "GetBMP", \'errorCode\': res });\n                    Module._free(pDataYUV);\n                    pDataYUV = null;\n                    Module._free(pBmpData);\n                    pBmpData = null;\n                    Module._free(pBmpSize);\n                    pBmpSize = null;\n                    return;\n                }\n\n                // 获取BMP图片大小\n                var nBmpDataSize = Module.getValue(pBmpSize, "i32");\n\n                // 获取BMP图片数据\n                var aBmpData = new Uint8Array(nBmpDataSize);\n                aBmpData.set(Module.HEAPU8.subarray(pBmpData, pBmpData + nBmpDataSize));\n\n                postMessage({ \'function\': "GetBMP", \'data\': aBmpData, \'errorCode\': res }, [aBmpData.buffer]);\n                aBmpData = null;\n                if (pDataYUV != null) {\n                    Module._free(pDataYUV);\n                    pDataYUV = null;\n                }\n                if (pBmpData != null) {\n                    Module._free(pBmpData);\n                    pBmpData = null;\n                }\n                if (pBmpSize != null) {\n                    Module._free(pBmpSize);\n                    pBmpSize = null;\n                }\n                break;\n\n            case "GetJPEG":\n                var nJpegWidth = eventData.width;\n                var nJpegHeight = eventData.height;\n                var pYUVData1 = eventData.data;\n                var nYUVSize1 = nJpegWidth * nJpegHeight * 3 / 2;\n                var oJpegCropRect = eventData.rect;\n\n                var pDataYUV1 = Module._malloc(nYUVSize1);\n                if (pDataYUV1 === null) {\n                    return;\n                }\n\n                Module.writeArrayToMemory(new Uint8Array(pYUVData1, 0, nYUVSize1), pDataYUV1);\n\n                // 分配JPEG空间\n                var pJpegData = Module._malloc(nYUVSize1);\n                var pJpegSize = Module._malloc(4);\n                if (pJpegData === null || pJpegSize === null) {\n                    if (pJpegData != null) {\n                        Module._free(pJpegData);\n                        pJpegData = null;\n                    }\n\n                    if (pJpegSize != null) {\n                        Module._free(pJpegSize);\n                        pJpegSize = null;\n                    }\n\n                    if (pDataYUV1 != null) {\n                        Module._free(pDataYUV1);\n                        pDataYUV1 = null;\n                    }\n                    return;\n                }\n\n                Module.setValue(pJpegSize, nJpegWidth * nJpegHeight * 2, "i32");    // JPEG抓图，输入缓冲长度不小于当前帧YUV大小\n\n                res = Module._GetJPEG(g_nPort, pDataYUV1, nYUVSize1, pJpegData, pJpegSize,\n                    oJpegCropRect.left, oJpegCropRect.top, oJpegCropRect.right, oJpegCropRect.bottom);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "GetJPEG", \'errorCode\': res });\n                    if (pJpegData != null) {\n                        Module._free(pJpegData);\n                        pJpegData = null;\n                    }\n\n                    if (pJpegSize != null) {\n                        Module._free(pJpegSize);\n                        pJpegSize = null;\n                    }\n\n                    if (pDataYUV1 != null) {\n                        Module._free(pDataYUV1);\n                        pDataYUV1 = null;\n                    }\n                    return;\n                }\n\n                // 获取JPEG图片大小\n                var nJpegSize = Module.getValue(pJpegSize, "i32");\n\n                // 获取JPEG图片数据\n                var aJpegData = new Uint8Array(nJpegSize);\n                aJpegData.set(Module.HEAPU8.subarray(pJpegData, pJpegData + nJpegSize));\n\n                postMessage({ \'function\': "GetJPEG", \'data\': aJpegData, \'errorCode\': res }, [aJpegData.buffer]);\n\n                nJpegSize = null;\n                aJpegData = null;\n\n                if (pDataYUV1 != null) {\n                    Module._free(pDataYUV1);\n                    pDataYUV1 = null;\n                }\n                if (pJpegData != null) {\n                    Module._free(pJpegData);\n                    pJpegData = null;\n                }\n                if (pJpegSize != null) {\n                    Module._free(pJpegSize);\n                    pJpegSize = null;\n                }\n                break;\n\n            case "SetDecodeFrameType":\n                var nFrameType = eventData.data;\n                res = Module._SetDecodeFrameType(g_nPort, nFrameType);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "SetDecodeFrameType", \'errorCode\': res });\n                    return;\n                }\n                break;\n            case "CloseStream":\n                //stop\n                let resS = Module._Stop(g_nPort);\n                if (resS !== PLAYM4_OK) {\n                    postMessage({ \'function\': "Stop", \'errorCode\': res });\n                    return;\n                }\n                //closeStream\n                res = Module._CloseStream(g_nPort);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "CloseStream", \'errorCode\': res });\n                    return;\n                }\n                //freePort\n                let resF = Module._FreePort(g_nPort);\n                if (resF !== PLAYM4_OK) {\n                    postMessage({ \'function\': "FreePort", \'errorCode\': res });\n                    return;\n                }\n                if (pInputData != null) {\n                    Module._free(pInputData);\n                    pInputData = null;\n                }\n                break;\n            case "PlaySound":\n                let resPS = Module._PlaySound(g_nPort);\n                if (resPS !== PLAYM4_OK) {\n                    console.log("PlaySound failed");\n                    return;\n                }\n                break;\n            case "StopSound":\n                let resSS = Module._StopSound();\n                if (resSS !== PLAYM4_OK) {\n                    console.log("StopSound failed");\n                    return;\n                }\n                break;\n            case "SetVolume":\n                let resSV = Module._SetVolume(g_nPort, eventData.volume);\n                if (resSV !== PLAYM4_OK) {\n                    console.log("Audio SetVolume failed");\n                    return;\n                }\n                break;\n            case "GetVolume":\n                let volume = Module._GetVolume();\n                if (volume > 0) {\n                    postMessage({ \'function\': "GetVolume", \'volume\': volume });\n                }\n                else {\n                    console.log("Audio GetVolume failed");\n                    return;\n                }\n                break;\n            case "OnlyPlaySound":\n                let resOPS = Module._OnlyPlaySound(g_nPort);\n                if (resOPS !== PLAYM4_OK) {\n                    console.log("OnlyPlaySound failed");\n                    return;\n                }\n                break;\n            case "Pause":\n                let resPa = Module._Pause(g_nPort, eventData.bPlay);\n                if (resPa !== PLAYM4_OK) {\n                    console.log("Pause failed");\n                    return;\n                }\n            case "PlayRate":\n                Module._SetPlayRate(g_nPort, eventData.playRate);\n                break;\n            case "SetIFrameDecInterval":\n                Module._SetIFrameDecInterval(g_nPort, eventData.data);\n                break;\n            case "SetLostFrameMode":\n                Module._SetLostFrameMode(g_nPort, eventData.data, 0);\n                break;\n            case "SetDemuxModel":\n                let resSDM = Module._SetDemuxModel(g_nPort, eventData.nIdemuxType, eventData.bTrue);\n                break;\n            case "SkipErrorData":\n                Module._SkipErrorData(g_nPort, eventData.bSkip);\n                break;\n            case "SetDecodeERC":\n                Module._SetDecodeERC(g_nPort, eventData.nLevel);\n                break;\n            case "SetANRParam":\n                Module._SetANRParam(g_nPort, eventData.nEnable, eventData.nANRLevel);\n                break;\n            case "SetResampleValue":\n                Module._SetResampleValue(g_nPort, eventData.nEnable, eventData.resampleValue);\n                break;\n            case "GetLastError":\n                let errorCode = Module._GetLastError(g_nPort);\n                postMessage({ \'function\': "GetLastError", \'errorCode\': errorCode });\n                break;\n            case "SetGlobalBaseTime":\n                Module._SetGlobalBaseTime(g_nPort, eventData.year, eventData.month, eventData.day, eventData.hour, eventData.min, eventData.sec, eventData.ms);\n                break;\n            case "SetRunTimeInfoCB":\n                Module._SetRunTimeInfoCallBackEx(g_nPort, eventData.nModuleType, 0);\n                break;\n            default:\n                break;\n        }\n    };\n\n    function getOSDTime(oFrameInfo) {\n        var iYear = oFrameInfo.year;\n        var iMonth = oFrameInfo.month;\n        var iDay = oFrameInfo.day;\n        var iHour = oFrameInfo.hour;\n        var iMinute = oFrameInfo.minute;\n        var iSecond = oFrameInfo.second;\n        var iMiSecond = oFrameInfo.misecond\n\n        if (iMonth < 10) {\n            iMonth = "0" + iMonth;\n        }\n        if (iDay < 10) {\n            iDay = "0" + iDay;\n        }\n        if (iHour < 10) {\n            iHour = "0" + iHour;\n        }\n        if (iMinute < 10) {\n            iMinute = "0" + iMinute;\n        }\n        if (iSecond < 10) {\n            iSecond = "0" + iSecond;\n        }\n        let osdTime = {};\n\n        osdTime.year = iYear;\n        osdTime.month = iMonth;\n        osdTime.week = 0;\n        osdTime.day = iDay;\n        osdTime.hour = iHour;\n        osdTime.minute = iMinute;\n        osdTime.second = iSecond;\n        osdTime.milliseconds = iMiSecond;\n        return osdTime;\n        //return iYear + "-" + iMonth + "-" + iDay + " " + iHour + ":" + iMinute + ":" + iSecond;\n    }\n    // 获取帧数据\n    function getFrameData() {\n        // function getFrameData() {\n        // 获取帧数据\n        var res = Module._GetFrameData();\n        //var res = fun();\n        if (res === PLAYM4_OK) {\n            var iFrameInfo = Module._GetFrameInfo();\n            let oFrameInfo = {};\n            oFrameInfo.frameType = Module.HEAP32[iFrameInfo >> 2];\n            oFrameInfo.frameSize = Module.HEAP32[iFrameInfo + 4 >> 2];\n            oFrameInfo.width = Module.HEAP32[iFrameInfo + 8 >> 2];\n            oFrameInfo.height = Module.HEAP32[iFrameInfo + 12 >> 2];\n            oFrameInfo.timeStamp = Module.HEAP32[iFrameInfo + 16 >> 2];\n            oFrameInfo.frameRate = Module.HEAP32[iFrameInfo + 20 >> 2];\n            oFrameInfo.bitsPerSample = Module.HEAP32[iFrameInfo + 24 >> 2];\n            oFrameInfo.samplesPerSec = Module.HEAP32[iFrameInfo + 28 >> 2];\n            oFrameInfo.channels = Module.HEAP32[iFrameInfo + 32 >> 2];\n            oFrameInfo.frameNum = Module.HEAP32[iFrameInfo + 36 >> 2];\n\n            oFrameInfo.cropLeft = Module.HEAP32[iFrameInfo + 40 >> 2];\n            oFrameInfo.cropRight = Module.HEAP32[iFrameInfo + 44 >> 2];\n            oFrameInfo.cropTop = Module.HEAP32[iFrameInfo + 48 >> 2];\n            oFrameInfo.cropBottom = Module.HEAP32[iFrameInfo + 52 >> 2];\n\n            oFrameInfo.year = Module.HEAP16[iFrameInfo + 56 >> 1];\n            oFrameInfo.month = Module.HEAP16[iFrameInfo + 58 >> 1];\n            oFrameInfo.day = Module.HEAP16[iFrameInfo + 60 >> 1];\n            oFrameInfo.hour = Module.HEAP16[iFrameInfo + 62 >> 1];\n            oFrameInfo.minute = Module.HEAP16[iFrameInfo + 64 >> 1];\n            oFrameInfo.second = Module.HEAP16[iFrameInfo + 66 >> 1];\n            oFrameInfo.misecond = Module.HEAP16[iFrameInfo + 68 >> 1];\n            switch (oFrameInfo.frameType) {\n                case AUDIO_TYPE:\n                    var iSize = oFrameInfo.frameSize;\n                    if (0 === iSize) {\n                        return -1;\n                    }\n                    var pPCM = Module._GetFrameBuffer();\n                    // var audioBuf = new ArrayBuffer(iSize);\n                    var aPCMData = new Uint8Array(iSize);\n                    aPCMData.set(Module.HEAPU8.subarray(pPCM, pPCM + iSize));\n                    if (bWorkerPrintLog) {\n                        console.log("<<<Worker: audio media Info: nSise:" + oFrameInfo.frameSize + ",nSampleRate:" + oFrameInfo.samplesPerSec + \',channel:\' + oFrameInfo.channels + \',bitsPerSample:\' + oFrameInfo.bitsPerSample);\n                    }\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "audioType", \'data\': aPCMData.buffer,\n                        \'frameInfo\': oFrameInfo, \'errorCode\': res\n                    }, [aPCMData.buffer]);\n\n                    oFrameInfo = null;\n                    pPCM = null;\n                    aPCMData = null;\n                    return PLAYM4_AUDIO_FRAME;\n\n                case VIDEO_TYPE:\n                    var szOSDTime = getOSDTime(oFrameInfo);\n\n                    var iWidth = oFrameInfo.width;\n                    var iHeight = oFrameInfo.height;\n\n                    var iYUVSize = iWidth * iHeight * 3 / 2;\n                    if (0 === iYUVSize) {\n                        return -1;\n                    }\n\n                    var pYUV = Module._GetFrameBuffer();\n\n                    // 图像数据渲染后压回，若从主码流切到子码流，存在数组大小与图像大小不匹配现象\n                    var aYUVData = new Uint8Array(iYUVSize);\n                    aYUVData.set(Module.HEAPU8.subarray(pYUV, pYUV + iYUVSize));\n                    if (bWorkerPrintLog) {\n                        console.log("<<<Worker: video media Info: Width:" + oFrameInfo.width + ",Height:" + oFrameInfo.height + ",timeStamp:" + oFrameInfo.timeStamp);\n                    }\n\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "videoType", \'data\': aYUVData.buffer,\n                        \'dataLen\': aYUVData.length, \'osd\': szOSDTime, \'frameInfo\': oFrameInfo, \'errorCode\': res\n                    }, [aYUVData.buffer]);\n\n                    oFrameInfo = null;\n                    pYUV = null;\n                    aYUVData = null;\n                    return PLAYM4_VIDEO_FRAME;\n\n                case PRIVT_TYPE:\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "", \'data\': null,\n                        \'dataLen\': -1, \'osd\': 0, \'frameInfo\': null, \'errorCode\': PLAYM4_SYS_NOT_SUPPORT\n                    });\n                    return PLAYM4_SYS_NOT_SUPPORT;\n\n                default:\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "", \'data\': null,\n                        \'dataLen\': -1, \'osd\': 0, \'frameInfo\': null, \'errorCode\': PLAYM4_SYS_NOT_SUPPORT\n                    });\n                    return PLAYM4_SYS_NOT_SUPPORT;\n            }\n        }\n        else {\n            let errorCode = Module._GetLastError(g_nPort);\n            //解码失败返回裸数据\n            if (PLAYM4_DECODE_ERROR === errorCode) {\n                var rawInfo = Module._GetRawDataInfo();\n                var pRawData = Module._GetRawDataBuffer();\n                var aRawData = new Uint8Array(rawInfo.isize);\n                aRawData.set(Module.HEAPU8.subarray(pRawData, pRawData + rawInfo.isize));\n                postMessage({\n                    \'function\': "GetRawData", \'type\': "", \'data\': aRawData.buffer,\n                    \'rawDataLen\': rawInfo.isize, \'osd\': 0, \'frameInfo\': null, \'errorCode\': errorCode\n                });\n                rawInfo = null;\n                pRawData = null;\n                aRawData = null;\n            }\n            //需要更多数据\n            if (PLAYM4_NEED_MORE_DATA === errorCode || PLAYM4_SYS_NOT_SUPPORT === errorCode || PLAYM4_NEED_NEET_LOOP === errorCode) {\n                postMessage({\n                    \'function\': "GetFrameData", \'type\': "", \'data\': null,\n                    \'dataLen\': -1, \'osd\': 0, \'frameInfo\': null, \'errorCode\': errorCode\n                });\n            }\n            return errorCode;\n        }\n    }\n\n    // 开始计算时间\n    function startTime() {\n        return new Date().getTime();\n    }\n\n    // 结束计算时间\n    function endTime() {\n        return new Date().getTime();\n    }\n\n    // 字母字符串转byte数组\n    function stringToBytes(str) {\n        var ch, st, re = [];\n        for (var i = 0; i < str.length; i++) {\n            ch = str.charCodeAt(i);  // get char\n            st = [];                 // set up "stack"\n            do {\n                st.push(ch & 0xFF);  // push byte to stack\n                ch = ch >> 8;          // shift value down by 1 byte\n            }\n            while (ch);\n            // add stack contents to result\n            // done because chars have "wrong" endianness\n            re = re.concat(st.reverse());\n        }\n        // return an array of bytes\n        return re;\n    }\n})();\n')},Oe=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),He=(ke=void 0,function(e){return e&&(ke=e),ke}),Ne=function(){function e(){if(function(e,t){if(!s(e,t))throw new TypeError("Cannot call a class as a function")}(this,e),He())return He();if(void 0!==e.unique)return e.unique;e.unique=this,this.oAudioContext=null,this.currentVolume=80,this.bSetVolume=!1,this.gainNode=null,this.iWndNum=-1,this.mVolumes=new Map;var t=window.AudioContext||window.webkitAudioContext;this.oAudioContext=new t,this.writeString=function(e,t,r){for(var i=0;i<r.length;i++)e.setUint8(t+i,r.charCodeAt(i))},this.setBufferToDataview=function(e,t,r){for(var i=0;i<r.length;i++,t++)e.setUint8(t,r[i])},He(this)}return Oe(e,[{key:"Play",value:function(e,t,r){var i=new ArrayBuffer(44+t),a=new DataView(i),n=r.samplesPerSec,s=r.channels,o=r.bitsPerSample;this.writeString(a,0,"RIFF"),a.setUint32(4,32+2*t,!0),this.writeString(a,8,"WAVE"),this.writeString(a,12,"fmt "),a.setUint32(16,16,!0),a.setUint16(20,1,!0),a.setUint16(22,s,!0),a.setUint32(24,n,!0),a.setUint32(28,2*n,!0),a.setUint16(32,s*o/8,!0),a.setUint16(34,o,!0),this.writeString(a,36,"data"),a.setUint32(40,t,!0),this.setBufferToDataview(a,44,e);var x=this;return this.oAudioContext.decodeAudioData(a.buffer,(function(e){var t=x.oAudioContext.createBufferSource();if(null==t)return-1;t.buffer=e,t.start(0),(null==x.gainNode||x.bSetVolume)&&(x.gainNode=x.oAudioContext.createGain(),x.bSetVolume=!1),x.gainNode.gain.value=x.currentVolume/100,x.gainNode.connect(x.oAudioContext.destination),t.connect(x.gainNode)}),(function(e){return console.log("decode error"),-1})),0}},{key:"Stop",value:function(){return null!=this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),!0}},{key:"SetVolume",value:function(e){return this.bSetVolume=!0,this.currentVolume=e,this.mVolumes.set(this.iWndNum,this.currentVolume),!0}},{key:"SetWndNum",value:function(e){this.iWndNum=e;var t=this.mVolumes.get(e);return null==t&&(t=80),this.currentVolume=t,!0}},{key:"GetVolume",value:function(){var e=this.mVolumes.get(this.iWndNum);return null==e&&(e=80),e}}]),e}(),Ve=31,Ye=25,Ue=20480,Xe={width:0,height:0,frameNum:0,yuvData:null},We={width:0,height:0,frameNum:0,yuvData:null},Ge={sampleRate:0,channel:0,bitsPerSample:0,length:0,pcmData:null},Je={id:null,cmd:null,data:null,errorCode:0,status:null},Ze=function(){function t(r,i,a,n){if(e(this,t),this.jsplayer=r,null==i||void 0===i||"string"!=typeof i)return 0;if(this.szBasePath=i,!a||"function"!=typeof a)return 0;this.fnCallBack=a,this.decodeWorker=null,this.streamOpenMode=null,this.bOpenStream=!1,this.audioRenderer=null,this.aAudioBuffer=[],this.iAudioBufferSize=0,this.Volume=0,this.oSuperRender=null,this.aVideoFrameBuffer=[],this.YUVBufferSize=1,this.szOSDTime=null,this.bJSPrintLog=!1,this.bWriteYUVData=!1,this.iYUV10size=0,this.aVideoYUVBuffer=[],this.bWritePCMData=!1,this.iAudioBuffer500Size=0,this.aAudioPCMBuffer=[],this.bWriteRawData=!1,this.iRawDataSize=0,this.aRawDataBuffer=[],this.bWriteRTPData=!0,this.iRTPDataSize=0,this.aRTPDataBuffer=[],this.downloadRTP=!1,this.rtpNum=0,this.bPlaySound=!1,this.bPlay=!1,this.bPause=!1,this.bOnebyOne=!1,this.bPlayRateChange=!1,this.audioNum=0,this.videoNum=0,this.FrameForwardLen=1,this.bOnlyPlaySound=!1,this.bVideoCropInfo=!1,this.dataCallBackFun=null,this.YUVBufSizeCBFun=null,this.DecCallBackFun=null,this.DisplayCallBackFun=null,this.PCMCallBackFun=null,this.DecInfoYUV=Xe,this.DisplayInfoYUV=We,this.DecInfoPCM=Ge,this.displayFrameInfo={},this.frameInfoFlag=!0,this.startTimeStamp=0,this.nWidth=0,this.nHeight=0,this.nSPSCropLeft=0,this.nSPSCropRight=0,this.nSPSCropTop=0,this.nSPSCropBottom=0,this.decCBStream=0,this.sCanvasId=null,this.aDisplayBuf=null,this.bVisibility=!0,this.nDecFrameType=0,this.runtimeInfoCBFun=null,this.firstFrameCB=null,this.needFirstFrameCB=!1,this.iCanvasWidth=0,this.iCanvasHeight=0,this.iZoomNum=0,this.iRatio_x=1,this.iRatio_y=1,this.stDisplayRect={top:0,left:0,right:0,bottom:0},this.bDisRect=!1,this.stYUVRect={top:0,left:0,right:0,bottom:0},this.aInputDataLens=[],this.aInputDataBuffer=[],this.bIsGetYUV=!1,this.bIsFirstFrame=!0,this.iInputMaxBufSize=5242880,this.bIsInput=!1,this.bIsInputBufOver=!1,this.bIsInputBufWillOver=!1,this.iInputDataLen=Ue;var s=this;this.errorCode=1,this.loopNum=0,console.info("%c1>there will play by V1","color: green"),this.setCallBack=function(e,t,r,i,a){var s=Je;s.id=n,s.cmd=t,s.data=r,s.errorCode=i,s.status=a,e.errorCode=i,e.fnCallBack(s)},this.convertErrorCode=function(e){switch(e){case 1:return 1;case 98:return 0;default:return e}},this.arrayBufferCopy=function(e){var t=e.byteLength,r=new Uint8Array(t),i=new Uint8Array(e),a=0;for(a=0;a<t;a++)r[a]=i[a];return r},this.inputDataFun=function(){var e,t=0;if(s.bIsGetYUV=!1,s.bIsInputBufOver||s.bIsInputBufWillOver){e=new Uint8Array(1);var r={command:"InputData",data:new Uint8Array(e).buffer,dataSize:0};s.decodeWorker.postMessage(r,[r.data])}else if(s.bPlay&&(!s.bPause||s.bOnebyOne)||this.bOnlyPlaySound){for(;s.aInputDataLens.length>0&&!((t+=s.aInputDataLens.shift())>s.iInputDataLen););e=s.aInputDataBuffer.splice(0,t),r={command:"InputData",data:new Uint8Array(e).buffer,dataSize:t},s.decodeWorker.postMessage(r,[r.data])}e=null},this.getPic=function(e,t){if(null==this.decodeWorker||null==this.oSuperRender)return 2;if(!this.bPlay)return 2;if(!e||"function"!=typeof e)return 0;if(this.dataCallBackFun=e,0===this.iZoomNum)this.stYUVRect.left=0,this.stYUVRect.top=0,this.stYUVRect.right=0,this.stYUVRect.bottom=0;else{if(0===this.iCanvasWidth||0===this.iCanvasHeight)this.stYUVRect.left=0,this.stYUVRect.top=0,this.stYUVRect.right=0,this.stYUVRect.bottom=0;else{var r=this.nWidth/this.iCanvasWidth,i=this.nHeight/this.iCanvasHeight;this.stYUVRect.left=Math.round(this.stDisplayRect.left*r),this.stYUVRect.top=Math.round(this.stDisplayRect.top*i),this.stYUVRect.right=Math.round(this.stDisplayRect.right*r),this.stYUVRect.bottom=Math.round(this.stDisplayRect.bottom*i)}if(this.stYUVRect.right-this.stYUVRect.left<32||this.stYUVRect.bottom-this.stYUVRect.top<32)return 0}if(null==this.aDisplayBuf)return 2;var a={command:t,data:this.arrayBufferCopy(this.aDisplayBuf).buffer,width:this.nWidth,height:this.nHeight,rect:this.stYUVRect};return this.decodeWorker.postMessage(a,[a.data]),1},this.createWorker=function(e){if(window.Worker){if(null==e.decodeWorker){var t=new Blob([Be(e.szBasePath)]),r=URL.createObjectURL(t);if(this.decodeWorker=new Worker(r),e.bJSPrintLog&&console.log(">>>JSPlayV1.1 createWorker success!"),null==e.decodeWorker)return 60}e.decodeWorker.onmessage=function(t){var r=null,i=t.data;switch(e.errorCode=i.errorCode,i.function){case"printLog":console.log("print JSPlayerSDK log failed");break;case"loaded":r="loaded",console.log("V1 Decoder.js loaded path:"+e.szBasePath),e.setCallBack(e,"loaded",0,0,!0);break;case"SetStreamOpenMode":r="SetStreamOpenMode";break;case"OpenStream":if(r="OpenStream",1===i.errorCode)return void(s.bOpenStream=!0);break;case"InputData":r="InputData",11===i.errorCode&&(s.bIsInputBufOver=!0,console.log("yff inputBuffer over set key frame \n"),1!=s.nDecFrameType&&s.PlayM4_SetDecodeFrameType(1)),36===i.errorCode&&(s.bIsInputBufWillOver=!0),i.errorCode===Ve&&(s.bIsInputBufOver=!1,s.bIsInputBufWillOver=!1,s.aInputDataLens.length>0&&s.bIsInput?(s.inputDataFun(),s.bIsInput=!1):s.bIsGetYUV=!0);break;case"GetFrameData":if(r="GetFrameData",!s.bOnlyPlaySound){if(null!=i.data&&null!=i.frameInfo&&(i.frameInfo.width,i.frameInfo.height),!s.bPlay)return;if(s.errorCode=i.errorCode,!(s.bIsFirstFrame||i.errorCode!==Ve&&35!==i.errorCode)){i.errorCode===Ve&&(s.bIsInputBufOver=!1,s.bIsInputBufWillOver=!1),s.loopNum>5?(s.bIsGetYUV=!0,s.loopNum=0):(s.inputDataFun(),s.loopNum++);break}s.bIsInputBufOver||s.bIsInputBufWillOver?s.inputDataFun():"videoType"===i.type&&(s.aInputDataLens.length>0&&s.bIsInput?(s.inputDataFun(),s.bIsInput=!1):s.bIsGetYUV=!0,s.bIsFirstFrame=!1)}if(s.bVisibility&&1===i.errorCode)switch(i.type){case"videoType":if(null==i.data||null==i.frameInfo)return 0;null!=s.DecCallBackFun&&(s.DecInfoYUV.port=0,s.DecInfoYUV.iDataType=3,s.DecInfoYUV.height=i.frameInfo.height,s.DecInfoYUV.width=i.frameInfo.width,s.DecInfoYUV.isize=i.frameInfo.width*i.frameInfo.height*3/2,s.DecInfoYUV.Data=new Uint8Array(i.data),s.DecCallBackFun(s.DecInfoYUV)),s.bIsFirstFrame=!1,e.nWidth=i.frameInfo.width,e.nHeight=i.frameInfo.height,e.nSPSCropLeft=i.frameInfo.cropLeft,e.nSPSCropRight=i.frameInfo.cropRight,e.nSPSCropTop=i.frameInfo.cropTop,e.nSPSCropBottom=i.frameInfo.cropBottom,e.timeStamp=i.frameInfo.timeStamp;var a=new Object;if(a.data=i.data,a.osdTime=i.frameInfo,a.nWidth=i.frameInfo.width,a.nHeight=i.frameInfo.height,a.frameNum=i.frameInfo.frameNum,a.timeStamp=i.frameInfo.timeStamp,e.bWriteYUVData){for(var n=new Uint8Array(i.data),o=e.aVideoYUVBuffer.length,x=0,f=n.length;x<f;x++)e.aVideoYUVBuffer[o+x]=n[x];e.iYUV10size++,n=null}if(e.bWriteYUVData&&e.iYUV10size>=20){var l=new Uint8Array(e.aVideoYUVBuffer);e.downloadFile(l,"videoYUV.data"),e.aVideoYUVBuffer.splice(0,e.aVideoYUVBuffer.length),e.bWriteYUVData=!1,e.iYUV10size=0,l=null}if(e.aVideoFrameBuffer.push(a),a=null,e.aVideoFrameBuffer.length>5&&(e.bOnebyOne||e.aVideoFrameBuffer.splice(0,2)),e.bOnebyOne&&e.aVideoFrameBuffer.length>=15){e.setCallBack(e,"OnebyOne",0,0,!1),e.bIsFirstFrame=!0;break}break;case"audioType":if(e.bPlaySound&&!e.bPlayRateChange||s.bOnlyPlaySound){for(null!=s.PCMCallBackFun&&(s.DecInfoPCM.port=0,s.DecInfoPCM.SampleRate=i.frameInfo.samplesPerSec,s.DecInfoPCM.channel=i.frameInfo.channels,s.DecInfoPCM.bitsPerSample=i.frameInfo.bitsPerSample,s.DecInfoPCM.iDataType=101,s.DecInfoPCM.Data=new Uint8Array(i.data),s.DecInfoPCM.isize=s.DecInfoPCM.Data.length,s.PCMCallBackFun(s.DecInfoPCM)),n=new Uint8Array(i.data),o=e.aAudioBuffer.length,x=0,f=n.length;x<f;x++)e.aAudioBuffer[o+x]=n[x];if(e.iAudioBufferSize++,n=null,e.bWritePCMData){for(n=new Uint8Array(i.data),o=e.aAudioPCMBuffer.length,x=0,f=n.length;x<f;x++)e.aAudioPCMBuffer[o+x]=n[x];console.log("audio_type num:"+e.iAudioBuffer500Size+", len:"+n.length),e.iAudioBuffer500Size++,n=null}if(e.bWritePCMData&&e.iAudioBuffer500Size>=100){var h=new Uint8Array(e.aAudioPCMBuffer);e.downloadFile(h,"audioPCM.data"),e.aAudioPCMBuffer.splice(0,e.aAudioPCMBuffer.length),e.bWritePCMData=!1,e.iAudioBuffer500Size=0,h=null}e.iAudioBufferSize>=Ye&&(e.audioRenderer.Play(e.aAudioBuffer,e.aAudioBuffer.length,i.frameInfo),e.aAudioBuffer.splice(0,e.aAudioBuffer.length),e.aAudioBuffer.length=0,e.iAudioBufferSize=0)}}break;case"GetRawData":if(r="GetRawData",e.bWriteRawData){var c=new Uint8Array(i.data),u=e.aRawDataBuffer.length;for(x=0,f=c.length;x<f;x++)e.aRawDataBuffer[u+x]=c[x];e.iRawDataSize++,c=null}if(e.bWriteRawData&&e.iRawDataSize>=100){var _=new Uint8Array(e.aRawDataBuffer);e.downloadFile(_,"rawBuffer.data"),e.aRawDataBuffer.splice(0,e.aRawDataBuffer.length),e.bWriteRawData=!1,e.iRawDataSize=0,_=null}break;case"PlaySound":r="PlaySound";break;case"GetJPEG":if(r="GetJPEG",1!==i.errorCode)return void console.log("GetJPEG ErrorParam");var d=i.data;e.dataCallBackFun(d,d.length);break;case"GetBMP":if(r="GetBMP",1!==i.errorCode)return void console.log("GetBMP ErrorParam");var p=i.data;e.dataCallBackFun(p,p.length);break;case"RunTimeInfoCallBack":r="RunTimeInfoCallBack";var m=i.nRunTimeModule,P=i.nStrVersion,y=i.nFrameTimeStamp,g=i.nFrameNum,b=i.nErrorCode;null!=e.runtimeInfoCBFun&&e.runtimeInfoCBFun(m,P,y,g,b)}"GetFrameData"!==r&&"loaded"!==r?e.setCallBack(e,r,0,e.convertErrorCode(i.errorCode),!0):16!==i.errorCode&&101!==i.errorCode&&100!==i.errorCode&&48!==i.errorCode||e.setCallBack(e,r,0,e.convertErrorCode(i.errorCode),!0)}}},this.createWorker(s),this.draw=function(){if(s.bPlay){if(s.needFirstFrameCB&&null!=s.firstFrameCB&&(s.firstFrameCB(),s.needFirstFrameCB=!1),!s.bPause||s.bOnebyOne){requestAnimationFrame(s.draw);var e=s.aVideoFrameBuffer.length;if(null!=s.YUVBufSizeCBFun&&s.YUVBufSizeCBFun(e),s.bOnebyOne){if(e<=8&&s.setCallBack(s,"OnebyOne",0,Ve,!0),e<=s.FrameForwardLen+1)return void s.setCallBack(s,"OnebyOne",0,Ve,!0);for(var t=s.FrameForwardLen;t>1;)s.aVideoFrameBuffer.shift(),t--;s.bOnebyOne=!1}if(e>0){var r=s.aVideoFrameBuffer.shift(),i={};i.nCropLeft=s.nSPSCropLeft,i.nCropRight=s.nSPSCropRight,i.nCropTop=s.nSPSCropTop,i.nCropBottom=s.nSPSCropBottom,i.nCodeWidth=r.nWidth,i.nCodeHeight=r.nHeight,s.aDisplayBuf=r.data;var a=new Uint8Array(s.aDisplayBuf);s.bVideoCropInfo?s.oSuperRender.DisplayFrame(a,r.nWidth-s.nSPSCropLeft-s.nSPSCropRight,r.nHeight-s.nSPSCropTop-s.nSPSCropBottom,r.timeStamp,i,null):s.oSuperRender.DisplayFrame(a,r.nWidth,r.nHeight,r.timeStamp,i,null),null!=s.DisplayCallBackFun&&(s.DisplayInfoYUV.height=r.nHeight,s.DisplayInfoYUV.width=r.nWidth,s.DisplayInfoYUV.iSize=s.DisplayInfoYUV.height*s.DisplayInfoYUV.width*3/2,s.DisplayInfoYUV.frameNum=r.frameNum,s.DisplayInfoYUV.timeStamp=r.timeStamp,s.DisplayInfoYUV.yuvData=new Uint8Array(a),s.DisplayCallBackFun(s.DisplayInfoYUV)),s.frameInfoFlag&&(s.displayFrameInfo.codecType=0,s.displayFrameInfo.frameType=0,s.displayFrameInfo.frameSize=0,s.displayFrameInfo.width=r.nWidth,s.displayFrameInfo.height=r.nHeight,s.displayFrameInfo.timeStamp=r.timeStamp,s.displayFrameInfo.frameRate=0,s.displayFrameInfo.frameNum=r.frameNum,s.displayFrameInfo.interlace=0,s.displayFrameInfo.streamEnd=0,s.displayFrameInfo.cropLeft=s.nSPSCropLeft,s.displayFrameInfo.cropRight=s.nSPSCropRight,s.displayFrameInfo.cropTop=s.nSPSCropTop,s.displayFrameInfo.cropBottom=s.nSPSCropBottom,s.displayFrameInfo.year=r.osdTime.year,s.displayFrameInfo.month=r.osdTime.month,s.displayFrameInfo.week=0,s.displayFrameInfo.day=r.osdTime.day,s.displayFrameInfo.hour=r.osdTime.hour,s.displayFrameInfo.minute=r.osdTime.minute,s.displayFrameInfo.second=r.osdTime.second,s.displayFrameInfo.milliseconds=r.osdTime.misecond),0==s.startTimeStamp&&(s.startTimeStamp=r.timeStamp),a=null;var n=r.osdTime.year,o=r.osdTime.month,x=r.osdTime.day,f=r.osdTime.hour,l=r.osdTime.minute,h=r.osdTime.second;s.szOSDTime=n+"-"+o+"-"+x+" "+f+":"+l+":"+h,r=null}else s.setCallBack(s,"Play",0,Ve,!0)}}else s.bPlay||(s.aVideoFrameBuffer.splice(0,s.aVideoFrameBuffer.length),s.aAudioBuffer.splice(0,s.aAudioBuffer.length))}}return r(t,[{key:"PlayM4_SetCurrentFrameNum",value:function(e,t){return 16}},{key:"PlayM4_OpenPlayerSDKPrintLog",value:function(e){return!0===e?(this.bJSPrintLog=!0,this.decodeWorker.postMessage({command:"printLog",data:e})):(this.bJSPrintLog=!1,this.decodeWorker.postMessage({command:"printLog",data:e})),1}},{key:"PlayM4_DownloadYUVdata",value:function(){return this.bWriteYUVData=!0,1}},{key:"PlayM4_DownloadPCMdata",value:function(){return this.bWritePCMData=!0,1}},{key:"PlayM4_SetDecCallBack",value:function(e,t){return e?(1==this.decCBStream&&(this.DecCallBackFun=t),2==this.decCBStream&&(this.PCMCallBackFun=t),3==this.decCBStream&&(this.PCMCallBackFun=t,this.DecCallBackFun=t)):(1==this.decCBStream&&(this.DecCallBackFun=null),2==this.decCBStream&&(this.PCMCallBackFun=null),3==this.decCBStream&&(this.PCMCallBackFun=null,this.DecCallBackFun=null)),1}},{key:"PlayM4_SetDisplayCallBack",value:function(e){return e&&"function"==typeof e?(this.DisplayCallBackFun=e,1):0}},{key:"PlayM4_SetPCMCallBack",value:function(e){return e&&"function"==typeof e?(this.PCMCallBackFun=e,1):0}},{key:"PlayM4_SetStreamOpenMode",value:function(e){return null==e||void 0===e||0!==e&&1!==e?0:(this.streamOpenMode=e,1)}},{key:"PlayM4_DownloadRTPData",value:function(e){this.downloadRTP=e}},{key:"PlayM4_SetVideoCropInfo",value:function(e){return null==e||void 0===e||"boolean"!=typeof e?0:(this.bVideoCropInfo=e,1)}},{key:"PlayM4_OpenStream",value:function(e,t,r){return this.bJSPrintLog&&console.log(">>>JS PlayM4_OpenStream nSysTime:"+((new Date).getMonth()+1)+"-"+(new Date).getDate()+" "+(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds()),null==this.decodeWorker?2:null==e||t<=0||r<=0?0:(this.bPlay=!1,this.bPause=!1,this.bOnebyOne=!1,this.bIsFirstFrame=!0,this.bIsGetYUV=!1,this.bIsInput=!1,4===e[8]&&0===e[9]?this.streamOpenMode=0:this.streamOpenMode=1,this.decodeWorker.postMessage({command:"SetStreamOpenMode",data:this.streamOpenMode}),this.decodeWorker.postMessage({command:"OpenStream",data:e,dataSize:t,bufPoolSize:r}),this.bOpenStream=!0,1)}},{key:"PlayM4_CloseStream",value:function(){return null===this.decodeWorker?1:null===this.decodeWorker||!1===this.bOpenStream?2:(this.bOnlyPlaySound=!1,this.decodeWorker.postMessage({command:"CloseStream"}),null!==this.oSuperRender&&(this.oSuperRender.ReleaseDisplay(),this.oSuperRender=null),null!==this.audioRenderer&&(this.audioRenderer.Stop(),this.audioRenderer=null),this.aAudioBuffer.splice(0,this.aAudioBuffer.length),this.aVideoFrameBuffer.splice(0,this.aVideoFrameBuffer.length),this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length),this.aInputDataLens.splice(0,this.aInputDataLens.length),this.aVideoYUVBuffer.splice(0,this.aVideoYUVBuffer.length),this.aAudioPCMBuffer.splice(0,this.aAudioPCMBuffer.length),this.aRawDataBuffer.splice(0,this.aRawDataBuffer.length),this.bOpenStream=!1,this.iAudioBufferSize=0,this.szOSDTime=null,this.startTimeStamp,1)}},{key:"PlayM4_Destroy",value:function(){return null===this.decodeWorker||(this.PlayM4_CloseStream(),this.decodeWorker.terminate(),this.decodeWorker=null),1}},{key:"PlayM4_FreePort",value:function(){return this.decodeWorker.terminate(),this.decodeWorker=null,1}},{key:"PlayM4_InputData",value:function(e,t){var r=this.aInputDataBuffer.length;if(4===t){var i=new Uint8Array(e.buffer);if(1===i[0]&&2===i[1]&&3===i[2]&&4===i[3])return this.bIsFirstFrame||this.bIsGetYUV?this.inputDataFun():this.bIsInput=!0,i=null,1}if(r+t>this.iInputMaxBufSize)return console.log("input over"),this.bIsGetYUV?this.inputDataFun():this.bIsInput=!0,11;var a=null,n=t;switch(this.streamOpenMode){case 1:a=new Uint8Array(e.buffer),this.aInputDataLens.push(t);break;case 0:n=t+4;var s=new Uint32Array([t]),o=new Uint8Array(s.buffer);(a=new Uint8Array(n)).set(o,0),a.set(e,4),s=null,o=null,this.aInputDataLens.push(t+4);break;default:return 16}for(var x=0;x<n;x++)this.aInputDataBuffer[r+x]=a[x];return!this.bPlay&&!this.bOnlyPlaySound||null===this.decodeWorker||!1===this.bOpenStream||(a=null,this.bOnlyPlaySound||this.bIsFirstFrame||this.bIsGetYUV?this.inputDataFun():this.bIsInput=!0),1}},{key:"PlayM4_Play",value:function(e){if(null===this.decodeWorker)return 2;if(this.bJSPrintLog&&console.log(">>>JS PlayM4_Play canvasID: "+e),null===e)this.bOnlyPlaySound=!0,this.decodeWorker.postMessage({command:"OnlyPlaySound"}),this.sCanvasId=null;else{if("string"!=typeof e)return 0;if(this.bOnebyOne&&(this.bPlayRateChange=!1,this.bOnebyOne=!1,this.bPause=!1,this.draw()),this.bPlay)return 1;if(null==this.oSuperRender&&(this.canvasCnv=document.getElementById(e),this.oSuperRender=new ve,this.oSuperRender.InitDisplay(this.canvasCnv,"webgl",1),null==this.oSuperRender))return 61;this.sCanvasId=e,this.bPlay=!0,this.bPause=!1,this.bOnebyOne=!1,this.bPlayRateChange=!1,this.bOnlyPlaySound=!1,this.draw()}return null==this.audioRenderer&&(this.audioRenderer=new Ne,null==this.audioRenderer)?61:(this.decodeWorker.postMessage({command:"Play"}),1)}},{key:"PlayM4_Stop",value:function(e){if(!0===this.bJSPrintLog&&console.log(">>>>yff1020>>>>> V1 PlayM4_Stop"),null==this.decodeWorker||null==this.oSuperRender)return 2;if(!this.bPlay)return 2;this.bPlaySound&&(this.PlayM4_StopSound(),this.bPlaySound=!0),this.bPlay=!1,this.bOnebyOne=!1,this.bPause=!1,this.oSuperRender.SetDisplayRect(0,0,this.nWidth,this.nHeight),this.iZoomNum=0,this.bDisRect=!1;var t={};t.nCropLeft=this.nSPSCropLeft,t.nCropRight=this.nSPSCropRight,t.nCropTop=this.nSPSCropTop,t.nCropBottom=this.nSPSCropBottom,t.nCodeWidth=this.nWidth,t.nCodeHeight=this.nHeight,this.bVideoCropInfo?this.oSuperRender.DisplayFrame(null,this.nWidth-this.nSPSCropLeft-this.nSPSCropRight,this.nHeight-this.nSPSCropTop-this.nSPSCropBottom,this.timeStamp,t,null):this.oSuperRender.DisplayFrame(null,this.nWidth,this.nHeight,this.timeStamp,t,null);var r=document.getElementById(this.sCanvasId);return r&&(this.clonedCanvas=r.cloneNode(!0),this.clonedCanvasParentNode=r.parentNode,this.clonedCanvasParentNode.replaceChild(this.clonedCanvas,r)),1}},{key:"PlayM4_PlayRate",value:function(e){return null==this.decodeWorker?2:(this.bPlayRateChange=1!==e,e<1&&(e=1),this.iInputDataLen=e*Ue,this.decodeWorker.postMessage({command:"PlayRate",playRate:e}),1)}},{key:"PlayM4_Pause",value:function(e){return null==this.decodeWorker||null==this.oSuperRender?2:this.bPlay?this.bOnebyOne||this.bPause==e?2:(this.bPause=e,this.bIsFirstFrame=!0,e?this.bPlaySound&&(this.PlayM4_StopSound(),this.bPlaySound=!0):(this.bPlaySound&&this.PlayM4_PlaySound(),this.draw()),1):2}},{key:"PlayM4_OneByOne",value:function(e){return null==this.decodeWorker||null==this.oSuperRender?2:this.bPlay?e>10||e<=0?0:(e||(e=1),this.iInputDataLen=Ue,this.FrameForwardLen=e,this.bPause=!0,this.bOnebyOne=!0,this.bIsFirstFrame=!0,this.draw(),1):2}},{key:"PlayM4_PlaySound",value:function(e){return null===this.decodeWorker||!1===this.bOpenStream?2:e<0||e>16?0:null==this.audioRenderer&&(this.audioRenderer=new Ne,null==this.audioRenderer)?61:(this.decodeWorker.postMessage({command:"PlaySound"}),this.audioRenderer.SetWndNum(e),0!==this.Volume&&this.audioRenderer.SetVolume(this.Volume),this.audioRenderer.oAudioContext.resume(),this.bPlaySound=!0,1)}},{key:"PlayM4_StopSound",value:function(){return null==this.decodeWorker||null==this.audioRenderer?2:this.bPlaySound?(this.decodeWorker.postMessage({command:"StopSound"}),this.bPlaySound=!1,1):2}},{key:"PlayM4_SetDisplayBuf",value:function(e){return null==this.decodeWorker?2:e<=0?0:(this.YUVBufferSize=e,1)}},{key:"PlayM4_SetSecretKey",value:function(e,t,r){if(null==this.decodeWorker||!1===this.bOpenStream)return 2;if(null==t)return 0;if(1===e){if(128!==r)return 0;if(null==t||void 0===t)return 0}else if(0!==e)return 0;return this.decodeWorker.postMessage({command:"SetSecretKey",data:t,nKeyType:e,nKeyLen:r}),1}},{key:"PlayM4_SetDecodeFrameType",value:function(e){return console.log("PlayM4_SetDecodeFrameType nFrameType:"+e),null==this.decodeWorker||null==this.oSuperRender?2:0!==e&&1!==e?0:(this.bJSPrintLog&&console.log(">>>JS PlayM4_SetDecodeFrameType :"+e),this.nDecFrameType=e,this.decodeWorker.postMessage({command:"SetDecodeFrameType",data:e}),1)}},{key:"PlayM4_SetIFrameDecInterval",value:function(e){return 1!==this.nDecFrameType?2:e<0?0:(this.decodeWorker.postMessage({command:"SetIFrameDecInterval",data:e}),1)}},{key:"PlayM4_SetLostFrameMode",value:function(e){return e<0||e>1?0:(this.decodeWorker.postMessage({command:"SetLostFrameMode",data:e}),1)}},{key:"PlayM4_SetDisplayRegion",value:function(e,t,r){if(!0===this.bJSPrintLog&&console.log(">>>>yff1020>>>>> PlayM4_SetDisplayRegion left:"+e.left+",top:"+e.top+",right:"+e.right+",bottom:"+e.bottom),null===this.decodeWorker||!1===this.bPlay||null===this.oSuperRender)return 2;if(null===this.canvasId)return 2;if(!0===t){if(null==e)return 0;if("number"!=typeof e.left||"number"!=typeof e.top||"number"!=typeof e.right||"number"!=typeof e.bottom)return 0;if(e.right<0||e.left<0||e.top<0||e.bottom<0)return 0;var i=e.left,a=e.right,n=e.top,s=e.bottom,o=document.getElementById(this.sCanvasId).getBoundingClientRect();if(this.iCanvasWidth=o.width,this.iCanvasHeight=o.height,a-i<16||s-n<16||a-i>this.iCanvasWidth||s-n>this.iCanvasHeight)return 0;0!==this.iZoomNum&&(i=Math.round(i/this.iRatio_x)+this.stDisplayRect.left,n=Math.round(n/this.iRatio_y)+this.stDisplayRect.top,a=Math.round(a/this.iRatio_x)+this.stDisplayRect.left,s=Math.round(s/this.iRatio_y)+this.stDisplayRect.top),this.stDisplayRect={top:n,left:i,right:a,bottom:s};var x=s/this.iCanvasHeight*this.nHeight,f=i/this.iCanvasWidth*this.nWidth,l=a/this.iCanvasWidth*this.nWidth,h=n/this.iCanvasHeight*this.nHeight;this.oSuperRender.SetDisplayRect(f,h,l-f,x-h),this.bDisRect=!0;var c=a-i,u=s-n;this.iRatio_x=this.iCanvasWidth/c,this.iRatio_y=this.iCanvasHeight/u,r&&this.iZoomNum++}else this.oSuperRender.SetDisplayRect(0,0,this.nWidth,this.nHeight),this.iZoomNum=0,this.bDisRect=!1;if(this.bPause||this.bOnebyOne||this.bPlayRateChange){var _={};_.nCropLeft=this.nSPSCropLeft,_.nCropRight=this.nSPSCropRight,_.nCropTop=this.nSPSCropTop,_.nCropBottom=this.nSPSCropBottom,_.nCodeWidth=this.nWidth,_.nCodeHeight=this.nHeight,this.bVideoCropInfo?this.oSuperRender.DisplayFrame(new Uint8Array(this.aDisplayBuf),this.nWidth-this.nSPSCropLeft-this.nSPSCropRight,this.nHeight-this.nSPSCropTop-this.nSPSCropBottom,this.timeStamp,_,null):this.oSuperRender.DisplayFrame(new Uint8Array(this.aDisplayBuf),this.nWidth,this.nHeight,this.timeStamp,_,null)}return 1}},{key:"PlayM4_GetBMP",value:function(e){return this.getPic(e,"GetBMP")}},{key:"PlayM4_GetJPEG",value:function(e){return this.getPic(e,"GetJPEG")}},{key:"PlayM4_SetVolume",value:function(e){return null==this.decodeWorker||null==this.audioRenderer?2:e<0||e>100||""===e?0:(this.Volume=e,this.audioRenderer.SetVolume(e),1)}},{key:"PlayM4_GetVolume",value:function(e){if(null==this.decodeWorker)return 2;if(null==this.audioRenderer)return 2;if(e&&"function"==typeof e){var t=this.audioRenderer.GetVolume();return null===t?63:(e(t),1)}return 0}},{key:"PlayM4_GetOSDTime",value:function(e){return null==this.decodeWorker?2:this.bPlay?e&&"function"==typeof e?(e(this.szOSDTime),1):0:2}},{key:"PlayM4_SetFrameInfoCallBack",value:function(e){return this.frameInfoFlag=!!e,1}},{key:"PlayM4_GetFrameInfo",value:function(){return this.displayFrameInfo}},{key:"PlayM4_IsVisible",value:function(e){return this.bVisibility=e,1}},{key:"PlayM4_GetSdkVersion",value:function(){return"07040007"}},{key:"PlayM4_GetBuildDate",value:function(){return"20231219"}},{key:"PlayM4_GetInputBufSize",value:function(){return this.aInputDataBuffer.length}},{key:"PlayM4_SetInputBufSize",value:function(e){return e>0?(this.iInputMaxBufSize=e,console.log(">>JSBufferSize SetInputBufSize:"+this.iInputMaxBufSize),1):0}},{key:"PlayM4_GetYUVBufSize",value:function(){return this.aVideoFrameBuffer.length}},{key:"PlayM4_GetFrameResolution",value:function(e){return null==this.decodeWorker?2:e&&"function"==typeof e?(e(this.nWidth,this.nHeight),1):0}},{key:"PlayM4_RegisterYUVBufSizeCB",value:function(e){return e&&"function"==typeof e?(this.YUVBufSizeCBFun=e,1):0}},{key:"PlayM4_UnRegisterYUVBufSizeCB",value:function(){return null!=this.YUVBufSizeCBFun&&(this.YUVBufSizeCBFun=null),1}},{key:"PlayM4_ClearCanvas",value:function(){if(null==this.oSuperRender)return 2;var e={};return e.nCropLeft=this.nSPSCropLeft,e.nCropRight=this.nSPSCropRight,e.nCropTop=this.nSPSCropTop,e.nCropBottom=this.nSPSCropBottom,e.nCodeWidth=this.nWidth,e.nCodeHeight=this.nHeight,this.bVideoCropInfo?this.oSuperRender.DisplayFrame(null,this.nWidth-this.nSPSCropLeft-this.nSPSCropRight,this.nHeight-this.nSPSCropTop-this.nSPSCropBottom,this.timeStamp,e,null):this.oSuperRender.DisplayFrame(null,this.nWidth,this.nHeight,this.timeStamp,e,null),1}},{key:"PlayM4_ReleaseInputBuffer",value:function(){return null===this.aInputDataBuffer?2:(this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length),this.aInputDataLens.splice(0,this.aInputDataLens.length),1)}},{key:"PlayM4_GetDecodeFrameType",value:function(){return this.nDecFrameType}},{key:"PlayM4_SetRunTimeInfoCallBackEx",value:function(e,t){return this.runtimeInfoCBFun=t,null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetRunTimeInfoCB",nModuleType:e}),1)}},{key:"PlayM4_SetDemuxModel",value:function(e,t){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetDemuxModel",nIdemuxType:e,bTrue:t}),1)}},{key:"PlayM4_SkipErrorData",value:function(e){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SkipErrorData",bSkip:e}),1)}},{key:"PlayM4_SetDecodeERC",value:function(e){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetDecodeERC",nLevel:e}),1)}},{key:"PlayM4_SetANRParam",value:function(e,t){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetANRParam",nEnable:e,nANRLevel:t}),1)}},{key:"PlayM4_SetResampleValue",value:function(e,t){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetResampleValue",nEnable:e,resampleValue:t}),1)}},{key:"PlayM4_SetGlobalBaseTime",value:function(e,t,r,i,a,n,s){return null==this.decodeWorker?2:e<2e3||e>3e3||t<1||t>12||e<0||t<0||r<0||i<0||a<0||n<0||s<0?16:(this.decodeWorker.postMessage({command:"SetGlobalBaseTime",year:e,month:t,day:r,hour:i,min:a,sec:n,ms:s}),1)}},{key:"PlayM4_SetAudioDisplayBuf",value:function(e){return Ye=e,1}},{key:"PlayM4_GetCanvasCapture",value:function(e){return null!=this.oSuperRender?this.oSuperRender.GetCanvasData(e):1}},{key:"PlayM4_SetFirstFrameCallBack",value:function(e,t){return null!=t&&"function"!=typeof t?0:(e&&(this.firstFrameCB=t),this.needFirstFrameCB=!0,1)}},{key:"PlayM4_SetDecCBStream",value:function(e){return this.decCBStream=e,1}},{key:"PlayM4_SetCanvasSize",value:function(e,t){return null!=this.oSuperRender&&this.oSuperRender.SetCanvasSize(e,t)}},{key:"PlayM4_GetCanvasSize",value:function(){return null!=this.oSuperRender&&this.oSuperRender.GetCanvasSize()}},{key:"PlayM4_GetBufferValue",value:function(){return this.iInputMaxBufSize}},{key:"PlayM4_GetLastError",value:function(){return this.errorCode}},{key:"PlayM4_GetPlayedTimeEx",value:function(e){e(this.timeStamp-this.startTimeStamp)}},{key:"PlayM4_SetAntialias",value:function(e){return null!=this.oSuperRender&&this.oSuperRender.SetAntialias(e)}},{key:"PlayM4_SetWaterMarkFont",value:function(e){return null!=this.oSuperRender&&this.oSuperRender.SetWaterMarkFont(e)}},{key:"PlayM4_SetWaterMarkImage",value:function(e){return null!=this.oSuperRender&&this.oSuperRender.SetWaterMarkImage(e)}},{key:"PlayM4_SetD3DPostProcess",value:function(e,t){return null!=this.oSuperRender&&this.oSuperRender.SetD3DPostProcess(e,t)}},{key:"getScriptDirectory",value:function(){var e=self.location.href;return e.substr(0,e.lastIndexOf("/")+1)}},{key:"downloadFile",value:function(e,t){var r=e;s(e,Blob)||s(e,File)||(r=new Blob([e]));var i=window.URL.createObjectURL(r),a=window.document.createElement("a");a.href=i,a.download=t;var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0),a.dispatchEvent(n)}}]),t}(),je=n((function(){return function(e,t){var r,i,a,n,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function o(n){return function(o){return function(n){if(r)throw new TypeError("Generator is already executing.");for(;s;)try{if(r=1,i&&(a=2&n[0]?i.return:n[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,n[1])).done)return a;switch(i=0,a&&(n=[2&n[0],a.value]),n[0]){case 0:case 1:a=n;break;case 4:return s.label++,{value:n[1],done:!1};case 5:s.label++,i=n[1],n=[0];continue;case 7:n=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==n[0]&&2!==n[0])){s=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){s.label=n[1];break}if(6===n[0]&&s.label<a[1]){s.label=a[1],a=n;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(n);break}a[2]&&s.ops.pop(),s.trys.pop();continue}n=t.call(e,s)}catch(e){n=[6,e],i=0}finally{r=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}([n,o])}}}(this,(function(e){return[2,WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]))]}))})),ze={bSupHardOrSoft:!0,bSupHardDecAVC:!0,bSupHardDecHEVC:!0,cmd:null,errorCode:0,status:null},qe=function(){function t(r,i,a){var n=this,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"webgl",x=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1;if(e(this,t),console.log("%c>>>JSPlayerInterface wasmPathV3:%s, wasmPathV1:%s, chromeVersion:%d","color: red",r,i,_getFExplore()),this.szBasePathV3=r,this.szBasePathV1=i,this.fnCallBack=a,this.nUser=s,this.renderEngine=o,this.hasWebWorker=x,this.setHasThread=f,this.decodeEngine=1,this.streamOpenMode=0,this.printfFlag=!1,this.canvasID="",this.FECcanvasIDArray=[],this.aTotalBuffer=[],this.iFrameNum=0,this.bWriteData=!0,this.downloadInputDataFlag=!1,this.rtpDataNeedAdd4Size=!1,this.aInputDataBuffer=[],this.iInputMaxBufSize=2097152,this.audioDisplayBufSize=0,this.decodeFrameType=0,this.decInterval=-1,this.volume=0,this.displayBuf=0,this.anrParamLevel=0,this.anrParamFlag=0,this.resampleRate=0,this.resampleFlag=0,this.decodeERCLevel=0,this.skipErrorData=0,this.demuxModelType=0,this.demuxModeFlag=0,this.needResetBuffer=0,this.globalBaseTime={},this.globalBaseTime.year=0,this.inputBufSize=0,this.waterFontParam=null,this.waterImageParam=null,this.needSetFFCB=!1,this.FFCBFlag=0,this.firstFrameCB=null,this.needSetSecretKey=!1,this.keyData=null,this.runtimeModule=0,this.runtimeCBFun=null,this.needSetRunTimeInfoCB=!1,this.needPlaySound=!1,this.CanvasSubPortMap=new Map,this.oJSPlayerObj=null,this.supportWebCodecs=window._getFSupportWebCodecs(),this.supportSab=!!window.SharedArrayBuffer,this.offscreen=!!window.OffscreenCanvas,this.supportOffscreen=!1,this.offscreen){var l=new OffscreenCanvas(1,1),h=l.getContext("webgl");h&&(this.supportOffscreen=!0,h.getExtension("WEBGL_lose_context").loseContext()),l=null,h=null}this.securityContext=!0,"https:"===window.location.protocol||"localhost"===location.hostname?this.securityContext=!0:this.securityContext=!1;var c=this.JSPlayM4_GetSDKVersion(),u=this.JSPlayM4_GetBuildDate();console.log("%c wasmplayer.min.js version:%s,buildDate:%s","color: blue",c,u),this.supportSIMD=!1,this.callBackParameter=ze,this.jsplayerVersion=3,this.supportWebCodecs&&this.securityContext?this.jsplayerVersion=3:this.supportSab&&this.supportOffscreen?this.jsplayerVersion=2:this.jsplayerVersion=1,this.jsplayerVersion<3&&(this.callBackParameter.bSupHardDecAVC=!1,this.callBackParameter.bSupHardDecHEVC=!1,this.callBackParameter.bSupHardOrSoft=!1),null===this.szBasePathV3&&null!=this.szBasePathV1?this.jsplayerVersion=1:null!=this.szBasePathV3&&null===this.szBasePathV1?(console.info("%c>>>> szBasePathV1 is null ","color: red"),this.jsplayerVersion=3):null===this.szBasePathV3&&null===this.szBasePathV1&&(console.info("%c>>>> szBasePathV3 and szBasePathV1 are null ","color: red"),this.fnCallBack(this.callBackParameter)),je().then(function(e){e?(this.supportSIMD=!0,console.log("%c>>>>your browser protocol is %s, hostname:%s, WebCodecs:%s,Sab:%s,Offscreen:%s,SIMD:%s,jsplayerVersion:%d","color: red",window.location.protocol,location.hostname,this.supportWebCodecs,this.supportSab,this.supportOffscreen,this.supportSIMD,this.jsplayerVersion)):(this.supportSIMD=!1,console.log("%c>>>>your browser protocol is %s, hostname:%s, WebCodecs:%s,Sab:%s,Offscreen:%s,SIMD:%s,jsplayerVersion:%d","color: red",window.location.protocol,location.hostname,this.supportWebCodecs,this.supportSab,this.supportOffscreen,this.supportSIMD,this.jsplayerVersion))}.bind(this)),this.wasmloaded=!1,this.jsplayerVersion>1?this.oJSPlayerObj=new Le(this,this.szBasePathV3,(function(e){var t=e.bSupHardOrSoft,r=e.bSupHardDecAVC,i=e.bSupHardDecHEVC,a=e.cmd,s=e.errorCode,o=e.status;n.callBackParameter.bSupHardDecAVC=r,n.callBackParameter.bSupHardDecHEVC=i,n.callBackParameter.bSupHardOrSoft=t,n.callBackParameter.cmd=a,n.callBackParameter.errorCode=s,n.callBackParameter.status=o,n.wasmloaded=!0,n.fnCallBack(n.callBackParameter)}),this.nUser,this.renderEngine,this.hasWebWorker,this.setHasThread,this.jsplayerVersion):this.oJSPlayerObj=new Ze(this,this.szBasePathV1,(function(e){e.instance;var t=e.cmd,r=e.errorCode,i=e.status;n.callBackParameter.bSupHardDecAVC=!1,n.callBackParameter.bSupHardDecHEVC=!1,n.callBackParameter.bSupHardOrSoft=!1,n.callBackParameter.cmd=t,n.callBackParameter.errorCode=r,n.callBackParameter.status=i,n.wasmloaded=!0,n.fnCallBack(n.callBackParameter)}),0)}return r(t,[{key:"JSPlayM4_SetStreamEnd",value:function(){return 0}},{key:"JSPlayM4_GetPort",value:function(){return this.printfFlag&&console.log(">>>>>yff>>> JSPlayM4_GetPort 1"),null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetPort this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1&&this.oJSPlayerObj.JSPlayM4_GetPort(),1)}},{key:"JSPlayM4_SetStreamOpenMode",value:function(e){return this.printfFlag&&console.log(">>>>>yff20230817>>>>> JSPlayM4_SetStreamOpenMode 1 mode:"+e),this.streamOpenMode=e,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetStreamOpenMode this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetStreamOpenMode(e):this.oJSPlayerObj.PlayM4_SetStreamOpenMode(e),1)}},{key:"JSPlayM4_OpenStream",value:function(e,t,r){if(this.printfFlag&&console.log(">>>>>yff20230817>>>>> JSPlayM4_OpenStream 1 :"+e),40!==t&&console.info("%cJSPlayM4_OpenStream nSize is not 40","color: red"),4===e[8]&&0===e[9]&&(this.rtpDataNeedAdd4Size=!0),this.downloadInputDataFlag){var i=new Uint8Array(e.buffer);this.downloadRTPData(i),console.log("write 40 hik head")}var a=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_OpenStream this.oJSPlayerObj is null"),0):(a=this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_OpenStream(e,t,r):this.oJSPlayerObj.PlayM4_OpenStream(e,t,r),this.HIK40Head=e,this.HIKHeadSize=t,this.HIKPoolSize=r,16===a&&this._switchV3ToV1(this.streamOpenMode,e,t,r,this.needPlay),a)}},{key:"_switchV3ToV1",value:function(e,t,r,i,a){var n=this;console.log("%c5>switch V3 to V1","color: red"),this.jsplayerVersion=1,this.oJSPlayerObj.JSPlayM4_Stop(),this.oJSPlayerObj.JSPlayM4_CloseStream(),this.oJSPlayerObj.JSPlayM4_FreePort(),this.oJSPlayerObj=null;var s=new Ze(this,this.szBasePathV1,(function(o){o.instance;var x=o.cmd,f=o.errorCode,l=o.status;"loaded"===x&&(n.oJSPlayerObj=s,n.callBackParameter.cmd=x,n.callBackParameter.errorCode=f,n.callBackParameter.status=l,n.JSPlayM4_SetStreamOpenMode(e),n.JSPlayM4_OpenStream(t,r,i),(a||n.needPlay)&&n.JSPlayM4_Play(n.canvasID),n._switchV3ToV1ResetParam())}),0)}},{key:"_switchV3ToV1ResetParam",value:function(){return this.needSetSecretKey&&this.JSPlayM4_SetSecretKey(this.keyData),this.needSetFFCB&&this.JSPlayM4_SetFirstFrameCallBack(this.FFCBFlag,this.firstFrameCB),this.needSetRunTimeInfoCB&&this.JSPlayM4_SetRunTimeInfoCallBackEx(this.runtimeModule,this.runtimeCBFun),this.needPlaySound&&this.JSPlayM4_PlaySound(),0!=this.skipErrorData&&this.oJSPlayerObj.PlayM4_SkipErrorData(this.skipErrorData),0!=this.demuxModeFlag&&this.oJSPlayerObj.PlayM4_SetDemuxModel(this.demuxModelType,this.demuxModeFlag),0!=this.globalBaseTime.year&&this.oJSPlayerObj.PlayM4_SetGlobalBaseTime(this.globalBaseTime.year,this.globalBaseTime.month,this.globalBaseTime.day,this.globalBaseTime.hour,this.globalBaseTime.min,this.globalBaseTime.sec,this.globalBaseTime.ms),-1!=this.decInterval&&this.oJSPlayerObj.PlayM4_SetIFrameDecInterval(this.decInterval),0!=this.decodeERCLevel&&this.oJSPlayerObj.PlayM4_SetDecodeERC(this.decodeERCLevel),0!=this.volume&&this.JSPlayM4_SetVolume(this.volume),0!=this.anrParamFlag&&this.oJSPlayerObj.PlayM4_SetANRParam(this.anrParamFlag,this.anrParamLevel),0!=this.resampleFlag&&this.oJSPlayerObj.PlayM4_SetResampleValue(this.resampleFlag,this.resampleRate),0!=this.displayBuf&&this.oJSPlayerObj.PlayM4_SetDisplayBuf(this.displayBuf),null!=this.waterFontParam&&this.oJSPlayerObj.PlayM4_SetWaterMarkFont(this.waterFontParam),null!=this.waterImageParam&&this.oJSPlayerObj.PlayM4_SetWaterMarkImage(this.waterImageParam),0!=this.audioDisplayBufSize&&this.oJSPlayerObj.PlayM4_SetAudioDisplayBuf(this.audioDisplayBufSize),0!=this.decodeFrameType&&this.JSPlayM4_SetDecodeFrameType(this.decodeFrameType),0!=this.needResetBuffer&&this.oJSPlayerObj.PlayM4_ReleaseInputBuffer(),0!=this.inputBufSize&&this.oJSPlayerObj.PlayM4_SetInputBufSize(this.inputBufSize),1}},{key:"JSPlayM4_SetDecodeEngine",value:function(e){if(this.printfFlag&&console.log(">>>>>yff20230817>>>>> JSPlayM4_SetDecodeEngine 1:"+e),0!=e&&1!=e)return console.log("0 is V3softDecode, 1 is V3hardDecoder,decodeEngine:"+e),0;this.decodeEngine=e;var t=1;if(this.jsplayerVersion>1){if(!this.supportSab)return console.info("%c3>JSPlayM4_SetDecodeEngine(0 is soft,1 is hard):%d,SharedArrayBuffer Error , does not support Soft Decdoe!!!!!","color: red",e),0;t=this.oJSPlayerObj.JSPlayM4_SetDecodeEngine(this.decodeEngine)}return t}},{key:"JSPlayM4_DownloadData",value:function(){return this.downloadInputDataFlag=!0,1}},{key:"JSPlayM4_SetAudioDisplayBuf",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAudioDisplayBuf this.oJSPlayerObj is null"),0):(this.audioDisplayBufSize=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetAudioDisplayBuf(e):this.oJSPlayerObj.PlayM4_SetAudioDisplayBuf(e))}},{key:"JSPlayM4_Play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.canvasID=e;var t=1;return this.printfFlag&&console.log(">>>>>yff20230817>>>>> JSPlayM4_Play 1 this.supportSab:"+this.supportSab),null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_Play this.oJSPlayerObj is null"),this.needPlay=!0,0):(this.jsplayerVersion>1?(t=this.oJSPlayerObj.JSPlayM4_Play(e),0!=this.aInputDataBuffer.length&&(this.oJSPlayerObj.JSPlayM4_InputData(new Uint8Array(this.aInputDataBuffer),this.aInputDataBuffer.length),this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length))):(t=this.oJSPlayerObj.PlayM4_Play(e),0!=this.aInputDataBuffer.length&&(this.oJSPlayerObj.PlayM4_InputData(new Uint8Array(this.aInputDataBuffer),this.aInputDataBuffer.length),this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length))),t)}},{key:"JSPlayM4_InputData",value:function(e,t){var r;if(null===this.oJSPlayerObj||!this.wasmloaded){var i=this.aInputDataBuffer.length;if(i+t>this.iInputMaxBufSize)return console.log("WasmPlayer input over"),0;for(var a=0;a<t;a++)this.aInputDataBuffer[i+a]=e[a];return 0}if(r=this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_InputData(e,t):this.oJSPlayerObj.PlayM4_InputData(e,t),this.downloadInputDataFlag)if(this.rtpDataNeedAdd4Size){var n=null,s=t+4,o=new Uint32Array([t]),x=new Uint8Array(o.buffer);(n=new Uint8Array(s)).set(x,0),n.set(e,4),this.downloadRTPData(n),o=null,x=null,n=null}else this.downloadRTPData(e);return r}},{key:"JSPlayM4_Stop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_Stop this.oJSPlayerObj is null"),0;if(this.bWriteData&&this.iFrameNum>0){console.log("download"+this.iFrameNum+"Psdata");var t=new Uint8Array(this.aTotalBuffer);this._downloadFile(t,"RTPRaw.data"),this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.bWriteData=!1,this.iFrameNum=0,t=null}return this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_Stop(e):this.oJSPlayerObj.PlayM4_Stop(e)}},{key:"JSPlayM4_CloseStream",value:function(){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>>  JSPlayM4_CloseStream this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_CloseStream():this.oJSPlayerObj.PlayM4_CloseStream()}},{key:"JSPlayM4_FreePort",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FreePort this.oJSPlayerObj is null"),0):(e=this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FreePort():this.oJSPlayerObj.PlayM4_FreePort(),this.oJSPlayerObj=null,e)}},{key:"JSPlayM4_SetDecodeFrameType",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDecodeFrameType this.oJSPlayerObj is null"),0):(this.decodeFrameType=e,this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetDecodeFrameType(e):7==e?t=this.oJSPlayerObj.PlayM4_SetLostFrameMode(1):(t=this.oJSPlayerObj.PlayM4_SetLostFrameMode(0),t=this.oJSPlayerObj.PlayM4_SetDecodeFrameType(e)),t)}},{key:"JSPlayM4_PlaySound",value:function(){return this.needPlaySound=!0,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_PlaySound this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_PlaySound():this.oJSPlayerObj.PlayM4_PlaySound(0)}},{key:"JSPlayM4_GetJPEG",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetJPEG this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetJPEG(e,t):this.oJSPlayerObj.PlayM4_GetJPEG(e)}},{key:"JSPlayM4_GetBMP",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetBMP this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetBMP(e,t):this.oJSPlayerObj.PlayM4_GetBMP(e)}},{key:"JSPlayM4_GetCropJPEG",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetCropJPEG this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?e=this.oJSPlayerObj.JSPlayM4_GetCropJPEG():console.log("%c1>JSPlayerV1.X does not support GetCropJPEG","color: red"),e)}},{key:"JSPlayM4_GetCropBMP",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetCropBMP this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?e=this.oJSPlayerObj.JSPlayM4_GetCropBMP():console.log("%c1>JSPlayerV1.X does not support GetCropBMP","color: red"),e)}},{key:"JSPlayM4_GetCanvasCapture",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetCanvasCapture this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetCanvasCapture(e):this.oJSPlayerObj.PlayM4_GetCanvasCapture(e)}},{key:"JSPlayM4_StopSound",value:function(){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_StopSound this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_StopSound():this.oJSPlayerObj.PlayM4_StopSound()}},{key:"JSPlayM4_GetSDKVersion",value:function(){return"08010001"}},{key:"JSPlayM4_GetBuildDate",value:function(){return"2023220"}},{key:"JSPlayM4_GetLastError",value:function(){return null===this.oJSPlayerObj?0:this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetLastError():this.oJSPlayerObj.PlayM4_GetLastError()}},{key:"JSPlayM4_Fast",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_Fast this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1&&(e=this.oJSPlayerObj.JSPlayM4_Fast()),e)}},{key:"JSPlayM4_Slow",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_Slow this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1&&(e=this.oJSPlayerObj.JSPlayM4_Slow()),e)}},{key:"JSPlayM4_SetIFrameDecInterval",value:function(e){return this.decInterval=e,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetIFrameDecInterval this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetIFrameDecInterval(e):this.oJSPlayerObj.PlayM4_SetIFrameDecInterval(e)}},{key:"JSPlayM4_Pause",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_Pause this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_Pause(e):this.oJSPlayerObj.PlayM4_Pause(e)}},{key:"JSPlayM4_OneByOne",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_OneByOne this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_OneByOne():this.oJSPlayerObj.PlayM4_OneByOne(e)}},{key:"JSPlayM4_OneByOneResume",value:function(){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_OneByOneResume this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_OneByOneResume():this.oJSPlayerObj.PlayM4_Pause(!1)}},{key:"JSPlayM4_SetVolume",value:function(e){var t=1;if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_SetVolume this.oJSPlayerObj is null"),0;if(this.volume=e,this.jsplayerVersion>1)t=this.oJSPlayerObj.JSPlayM4_SetVolume(e);else{var r=e/65535*100;t=this.oJSPlayerObj.PlayM4_SetVolume(r)}return t}},{key:"JSPlayM4_GetVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetVolume this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?(t=this.oJSPlayerObj.JSPlayM4_GetVolume(),null!=e&&e(t)):t=this.oJSPlayerObj.PlayM4_GetVolume((function(t){null!=e&&e(t/100*65535)})),t)}},{key:"JSPlayM4_SetDisplayRegion",value:function(e,t,r,i,a){var n=arguments.length>5&&void 0!==arguments[5]&&arguments[5],s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],o=1;if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_SetDisplayRegion this.oJSPlayerObj is null"),0;if(this.jsplayerVersion>1)o=this.oJSPlayerObj.JSPlayM4_SetDisplayRegion(e,t,r,i,a,n,s);else{var x={};x.left=t,x.right=r,x.top=i,x.bottom=a,o=this.oJSPlayerObj.PlayM4_SetDisplayRegion(x,!n,s)}return o}},{key:"JSPlayM4_SetPrintLogFlag",value:function(e){return this.printfFlag=e,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetPrintLogFlag this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetPrintLogFlag(e):this.oJSPlayerObj.PlayM4_OpenPlayerSDKPrintLog(e)}},{key:"JSPlayM4_RenderPrivateData",value:function(e,t){var r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_RenderPrivateData this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_RenderPrivateData(e,t):console.log("%c1>JSPlayerV1.X does not support RenderPrivateData","color: red"),r)}},{key:"JSPlayM4_RenderPrivateDataEx",value:function(e,t,r){var i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_RenderPrivateDataEx this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_RenderPrivateDataEx(e,t,r):console.log("%c1>JSPlayerV1.X does not support RenderPrivateDataEx","color: red"),i)}},{key:"JSPlayM4_SetCanvasSize",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetCanvasSize this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetCanvasSize(e,t,r):this.oJSPlayerObj.PlayM4_SetCanvasSize(e,t)}},{key:"JSPlayM4_SetDisplayBuf",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDisplayBuf this.oJSPlayerObj is null"),0):(this.displayBuf=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDisplayBuf(e):this.oJSPlayerObj.PlayM4_SetDisplayBuf(e))}},{key:"JSPlayM4_GetSourceBufferRemain",value:function(){return null===this.oJSPlayerObj?0:this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetSourceBufferRemain():this.oJSPlayerObj.PlayM4_GetInputBufSize()}},{key:"JSPlayM4_GetBufferValue",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetBufferValue this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetBufferValue(e):this.oJSPlayerObj.PlayM4_GetBufferValue(e)}},{key:"JSPlayM4_ReversePlay",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_ReversePlay this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?e=this.oJSPlayerObj.JSPlayM4_ReversePlay():console.log("%c1>JSPlayerV1.X does not support ReversePlay","color: red"),e)}},{key:"JSPlayM4_SetDecodeThreadNum",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDecodeThreadNum this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetDecodeThreadNum(e):console.log("%c1>JSPlayerV1.X does not support SetDecodeThreadNum, V1.X decocde only 1 thread","color: red"),t)}},{key:"JSPlayM4_GetCanvasSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetCanvasSize this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetCanvasSize(e):this.oJSPlayerObj.PlayM4_GetCanvasSize()}},{key:"JSPlayM4_DisplayLostFrames",value:function(e,t,r){var i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_DisplayLostFrames this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_DisplayLostFrames(e,t,r):console.log("%c1>JSPlayerV1.X does not support DisplayLostFrames","color: red"),i)}},{key:"JSPlayM4_SetANRParam",value:function(e,t){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetANRParam this.oJSPlayerObj is null"),0):(this.anrParamLevel=t,this.anrParamFlag=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetANRParam(e,t):this.oJSPlayerObj.PlayM4_SetANRParam(e,t))}},{key:"JSPlayM4_SetResampleValue",value:function(e,t){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetResampleValue this.oJSPlayerObj is null"),0):(this.resampleRate=t,this.resampleFlag=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetResampleValue(e,t):this.oJSPlayerObj.PlayM4_SetResampleValue(e,t))}},{key:"JSPlayM4_SetAntialias",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAntialias this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetAntialias(e):console.log("%c1>JSPlayerV1.X does not support JSPlayM4_SetAntialias 20230922","color: red"),t)}},{key:"JSPlayM4_SyncToAudio",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SyncToAudio this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SyncToAudio(e):console.log("%c1>JSPlayerV1.X does not support SyncToAudio","color: red"),t)}},{key:"JSPlayM4_SetAudioThreadModel",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAudioThreadModel this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetAudioThreadModel(e):console.log("%c1>JSPlayerV1.X does not support SetAudioThreadModel","color: red"),t)}},{key:"JSPlayM4_SetDecodeERC",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDecodeERC this.oJSPlayerObj is null"),0):(this.decodeERCLevel=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDecodeERC(e):this.oJSPlayerObj.PlayM4_SetDecodeERC(e))}},{key:"JSPlayM4_SkipErrorData",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SkipErrorData this.oJSPlayerObj is null"),0):(this.skipErrorData=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SkipErrorData(e):this.oJSPlayerObj.PlayM4_SkipErrorData(e))}},{key:"JSPlayM4_SetDemuxModel",value:function(e,t){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDemuxModel this.oJSPlayerObj is null"),0):(this.demuxModelType=e,this.demuxModeFlag=t,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDemuxModel(e,t):this.oJSPlayerObj.PlayM4_SetDemuxModel(e,t))}},{key:"JSPlayM4_SetD3DPostProcess",value:function(e,t){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetD3DPostProcess this.oJSPlayerObj is null"),0):"number"!=typeof e||"number"!=typeof t?(console.log(">>>>>yff>>> JSPlayM4_SetD3DPostProcess nPostType or fValue is not number"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetD3DPostProcess(e,t):this.oJSPlayerObj.PlayM4_SetD3DPostProcess(e,t)}},{key:"JSPlayM4_SetFirstFrameCallBack",value:function(e,t){return this.needSetFFCB=!0,this.FFCBFlag=e,this.firstFrameCB=t,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetFirstFrameCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetFirstFrameCallBack(e,t):this.oJSPlayerObj.PlayM4_SetFirstFrameCallBack(e,t)}},{key:"JSPlayM4_SetDecCallBack",value:function(e,t){return null===this.oJSPlayerObj||"function"!=typeof t?(console.log(">>>>>yff>>> JSPlayM4_SetDecCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDecCallBack(e,t):this.oJSPlayerObj.PlayM4_SetDecCallBack(e,t)}},{key:"JSPlayM4_SetDisplayCallBack",value:function(e,t){return null===this.oJSPlayerObj||"function"!=typeof t?(console.log(">>>>>yff>>> JSPlayM4_SetDisplayCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDisplayCallBack(e,t):this.oJSPlayerObj.PlayM4_SetDisplayCallBack(t)}},{key:"JSPlayM4_SetFrameInfoCallBack",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetFrameInfoCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetFrameInfoCallBack(e):this.oJSPlayerObj.PlayM4_SetFrameInfoCallBack(e)}},{key:"JSPlayM4_SetDecCBStream",value:function(e){return null===this.oJSPlayerObj||e<1||e>3?(console.log(">>>>>yff>>> JSPlayM4_SetDecCBStream this.oJSPlayerObj is null stream:"+e),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDecCBStream(e):this.oJSPlayerObj.PlayM4_SetDecCBStream(e)}},{key:"JSPlayM4_GetFrameInfo",value:function(){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetFrameInfo this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetFrameInfo():this.oJSPlayerObj.PlayM4_GetFrameInfo()}},{key:"JSPlayM4_GetAdditionData",value:function(){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetAdditionData this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetAdditionData():(console.log("%c1>JSPlayerV1.X does not support GetAdditionData","color: red"),0)}},{key:"JSPlayM4_SetAdditionDataCallBack",value:function(e,t,r){var i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAdditionDataCallBack this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_SetAdditionDataCallBack(e,t,r):(console.log("%c1>JSPlayerV1.X does not support SetAdditionDataCallBack","color: red"),i=0),i)}},{key:"JSPlayM4_GetPlayedTimeEx",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetPlayedTimeEx this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetPlayedTimeEx(e):this.oJSPlayerObj.PlayM4_GetPlayedTimeEx(e)}},{key:"JSPlayM4_GetFileTime",value:function(){var e=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetFileTime this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?e=this.oJSPlayerObj.JSPlayM4_GetFileTime():console.log("%c1>JSPlayerV1.X does not support GetPlayedTimeEx","color: red"),1e3*e)}},{key:"JSPlayM4_GetMpOffset",value:function(e){var t=-1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetMpOffset this.oJSPlayerObj is null"),-1):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_GetMpOffset(e):console.log("%c1>JSPlayerV1.X does not support GetMpOffset","color: red"),t)}},{key:"JSPlayM4_ResetBuffer",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_ResetBuffer this.oJSPlayerObj is null"),0):(this.needResetBuffer=!0,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_ResetBuffer(e):this.oJSPlayerObj.PlayM4_ReleaseInputBuffer())}},{key:"JSPlayM4_SetGlobalBaseTime",value:function(e,t,r,i,a,n,s){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetGlobalBaseTime this.oJSPlayerObj is null"),0):(this.globalBaseTime={year:e,month:t,day:r,hour:i,min:a,sec:n,ms:s},this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetGlobalBaseTime(e,t,r,i,a,n,s):this.oJSPlayerObj.PlayM4_SetGlobalBaseTime(e,t,r,i,a,n,s))}},{key:"JSPlayM4_SetSecretKey",value:function(e){return this.needSetSecretKey=!0,this.keyData=e,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetSecretKey this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetSecretKey(e):this.oJSPlayerObj.PlayM4_SetSecretKey(1,e,128)}},{key:"JSPlayM4_SetRunTimeInfoCallBackEx",value:function(e,t){return this.runtimeModule=e,this.runtimeCBFun=t,this.needSetRunTimeInfoCB=!0,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetRunTimeInfoCallBackEx this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetRunTimeInfoCallBackEx(e,t):this.oJSPlayerObj.PlayM4_SetRunTimeInfoCallBackEx(e,t)}},{key:"JSPlayM4_SetPlayOrBackSwitchMode",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetPlayOrBackSwitchMode this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetPlayOrBackSwitchMode(e):console.log("%c1>JSPlayerV1.X does not support SetPlayOrBackSwitchMode","color: red"),t)}},{key:"JSPlayM4_SetStretchPlay",value:function(e,t){var r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetStretchPlay this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_SetStretchPlay(e,t):console.log("%c1>JSPlayerV1.X does not support SetStretchPlay","color: red"),r)}},{key:"JSPlayM4_SetAutoSmoothPlay",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAutoSmoothPlay this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetAutoSmoothPlay(e):console.log("%c1>JSPlayerV1.X does not support SetAutoSmoothPlay","color: red"),t)}},{key:"JSPlayM4_KeepPlaySpeed",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_KeepPlaySpeed this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_KeepPlaySpeed(e):console.log("%c1>JSPlayerV1.X does not support KeepPlaySpeed","color: red"),t)}},{key:"JSPlayM4_IgnoreHeaderAudioDefine",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_IgnoreHeaderAudioDefine this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_IgnoreHeaderAudioDefine(e):console.log("%c1>JSPlayerV1.X does not support IgnoreHeaderAudioDefine","color: red"),t)}},{key:"JSPlayM4_SetSycGroup",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetSycGroup this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetSycGroup(e):console.log("%c1>JSPlayerV1.X does not support SetSycGroup","color: red"),t)}},{key:"JSPlayM4_FEC_SetCanvasID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=1;return this.FECcanvasIDArray=e.split(","),null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetCanvasID this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_FEC_SetCanvasID(e):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),t)}},{key:"JSPlayM4_FEC_ResetCorrectType",value:function(e,t,r){var i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_ResetCorrectType this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_FEC_ResetCorrectType(e,t,r):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),i)}},{key:"JSPlayM4_FEC_GetPort",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_GetPort this.oJSPlayerObj is null"),-1):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FEC_GetPort(e,t,r):-1}},{key:"JSPlayM4_FEC_Enable",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_Enable this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_FEC_Enable(e):console.log("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),t)}},{key:"JSPlayM4_FEC_SetParam",value:function(e,t){var r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetParam this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_FEC_SetParam(e,t):console.log("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),r)}},{key:"JSPlayM4_FEC_GetParam",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_GetParam this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FEC_GetParam(e,t):(console.log("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),1)}},{key:"JSPlayM4_FEC_SetViewParam",value:function(e,t,r){var i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetViewParam this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_FEC_SetViewParam(e,t,r):console.log("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),i)}},{key:"JSPlayM4_FEC_GetViewParam",value:function(e,t,r){var i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_GetViewParam this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_FEC_GetViewParam(e,t,r):console.log("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),i)}},{key:"JSPlayM4_FEC_SetWnd",value:function(e,t){var r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetWnd this.oJSPlayerObj is null"),0):(this.CanvasSubPortMap.set(e,t),this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_FEC_SetWnd(e,t):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),r)}},{key:"JSPlayM4_FEC_Disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_Disable this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_FEC_Disable(e,t,r):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),i)}},{key:"JSPlayM4_FEC_DelPort",value:function(e){var t=1;if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_FEC_DelPort this.oJSPlayerObj is null"),0;var r=this.CanvasSubPortMap.get(e);this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_FEC_DelPort(e):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red");var i=document.getElementById(r);if(i){var a=i.cloneNode(!0);i.parentNode.replaceChild(a,i)}return this.CanvasSubPortMap.delete(e),t}},{key:"JSPlayM4_FEC_SetDisplayRegion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,n=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0,o=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetDisplayRegion this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?o=this.oJSPlayerObj.JSPlayM4_FEC_SetDisplayRegion(e,t,r,i,a,n,s):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),o)}},{key:"JSPlayM4_FEC_SetBackCilling",value:function(e,t){var r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetBackCilling this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_FEC_SetBackCilling(e,t):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),r)}},{key:"JSPlayM4_FEC_GetPTZPort",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=-1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_GetPTZPort this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?a=this.oJSPlayerObj.JSPlayM4_FEC_GetPTZPort(e,t,r,i):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),a)}},{key:"JSPlayM4_FEC_SetPTZDisplayMode",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetPTZDisplayMode this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_FEC_SetPTZDisplayMode(e):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),t)}},{key:"JSPlayM4_SetVideoCropInfo",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetVideoCropInfo this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support SetVideoCropInfo,","color: red"):t=this.oJSPlayerObj.PlayM4_SetVideoCropInfo(e),t)}},{key:"JSPlayM4_IsVisible",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_IsVisible this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support IsVisible,","color: red"):t=this.oJSPlayerObj.PlayM4_IsVisible(e),t)}},{key:"JSPlayM4_SetInputBufSize",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetInputBufSize this.oJSPlayerObj is null"),0):(this.inputBufSize=e,this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support SetInputBufSize,","color: red"):t=this.oJSPlayerObj.PlayM4_SetInputBufSize(e),t)}},{key:"JSPlayM4_GetYUVBufSize",value:function(){var e=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetYUVBufSize this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support GetYUVBufSize,","color: red"):e=this.oJSPlayerObj.PlayM4_GetYUVBufSize(),e)}},{key:"JSPlayM4_ClearCanvas",value:function(){var e=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_ClearCanvas this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support ClearCanvas,","color: red"):e=this.oJSPlayerObj.PlayM4_ClearCanvas(),e)}},{key:"JSPlayM4_ReleaseInputBuffer",value:function(){var e=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_ReleaseInputBuffer this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support ReleaseInputBuffer,","color: red"):e=this.oJSPlayerObj.PlayM4_ReleaseInputBuffer(),e)}},{key:"JSPlayM4_GetDecodeFrameType",value:function(){var e=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetDecodeFrameType this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support GetDecodeFrameType,","color: red"):e=this.oJSPlayerObj.PlayM4_GetDecodeFrameType(),e)}},{key:"JSPlayM4_SetWaterMarkFont",value:function(e){if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkFont this.oJSPlayerObj is null"),0;if(null!=e){if(void 0===e.pFontString||null==e.pstStartPos||null==e.pstFontColor||null==e.pstFontSize||null==e.pstFontRotate||null==e.pFontFamily||null==e.pstStartPos.fX||null==e.pstStartPos.fY||null==e.pstFontColor.fR||null==e.pstFontColor.fG||null==e.pstFontColor.fB||null==e.pstFontColor.fA||null==e.pstFontSize.nFontWidth||null==e.pstFontSize.nFontHeight||null==e.pstFontRotate.fRotateAngle||null==e.pstFontRotate.fFillFullScreen||null==e.pSpace)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkFont pFontParam undefined"),0;if(e.pstStartPos.fX>1||e.pstStartPos.fX<0||e.pstStartPos.fY>1||e.pstStartPos.fY<0||e.pstFontColor.fR>1||e.pstFontColor.fR<0||e.pstFontColor.fG>1||e.pstFontColor.fG<0||e.pstFontColor.fB>1||e.pstFontColor.fB<0||e.pstFontColor.fA>1||e.pstFontColor.fA<0)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkFont pFontParam f* is 0~1"),0;if(1!=e.pstFontRotate.fFillFullScreen&&0!=e.pstFontRotate.fFillFullScreen&&1!=e.pstFontRotate.fFillFullScreen&&0!=e.pstFontRotate.fFillFullScreen)return console.log(">>>>>yff>>> pFontParam.pstFontRotate.fFillFullScreen is true or false"),0;if(e.pstFontRotate.fFillFullScreen&&(e.pstFontNumber.nRowNumber<3||e.pstFontNumber.nColNumber<3||null==e.pstFontNumber.nRowNumber||null==e.pstFontNumber.nColNumber||e.pstFontNumber.nRowNumber>13||e.pstFontNumber.nColNumber>13))return console.log(">>>>>yff>>> pFontParam.pstFontNumber row/col num should be greater than 2 and les than 13"),0;if("string"!=typeof e.pFontFamily)return console.log(">>>>>yff>>> pFontParam.pFontFamily is not string"),0;if(!Array.isArray(e.pFontString))return console.log(">>>>>yff>>> pFontParam.pFontString is not array"),0;(e.pstFontSize.nFontHeight<=0||e.pstFontSize.nFontWidth<=0)&&(e=null),null!=e.nFontAlign&&null!=e.nFontAlign||(e.nFontAlign=0),null!=e.nColorAdapt&&null!=e.nColorAdapt||(e.nColorAdapt=0)}return this.waterFontParam=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetWaterMarkFont(e):this.oJSPlayerObj.PlayM4_SetWaterMarkFont(e)}},{key:"JSPlayM4_SetWaterMarkImage",value:function(e){if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkImage this.oJSPlayerObj is null"),0;if(!("ImageDecoder"in window))return console.log(">>>>>yff>>> window not support ImageDecoder"),16;if(null!=e){if(void 0===e.pImageData)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkImage pImageParam.pImageData undefined"),0;if(void 0===e.pImageType||"jpg"!=e.pImageType&&"jpeg"!=e.pImageType&&"png"!=e.pImageType&&"gif"!=e.pImageType&&"bmp"!=e.pImageType&&"webp"!=e.pImageType&&"avif"!=e.pImageType)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkImage pImageParam.pImageType:"+e.pImageType+" error"),0;(void 0===e.pstRectPos||e.fLeft<0||e.fLeft>1||e.fRight<0||e.fRight>1||e.fTop<0||e.fTop>1||e.fBottom<0||e.fBottom>1)&&(e.pstRectPos={fLeft:0,fRight:.1,fTop:0,fBottom:.1}),(void 0===e.fAlpha||e.fAlpha<0||e.fAlpha>1)&&(e.fAlpha=1)}return this.waterImageParam=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetWaterMarkImage(e):this.oJSPlayerObj.PlayM4_SetWaterMarkImage(e)}},{key:"_downloadFile",value:function(e,t){var r=e;s(e,Blob)||s(e,File)||(r=new Blob([e]));var i=window.URL.createObjectURL(r),a=window.document.createElement("a");a.href=i,a.download=t;var n=document.createEvent("MouseEvents");n.initEvent("click",!0,!0),a.dispatchEvent(n)}},{key:"downloadRTPData",value:function(e){if(this.bWriteData){var t=e,r=this.aTotalBuffer.length;console.log("totalLength:"+r);for(var i=0,a=t.length;i<a;i++)this.aTotalBuffer[r+i]=t[i];this.iFrameNum++,t=null,console.log("download200RTPdata iFrameNum:"+this.iFrameNum)}if(this.bWriteData&&this.iFrameNum>=100){console.log("download100RawData");var n=new Uint8Array(this.aTotalBuffer);this._downloadFile(n,"Raw100.data"),this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.bWriteData=!1,this.iFrameNum=0,n=null}}}]),t}();window._getFExplore=function(){var e,t={},r=navigator.userAgent.toLowerCase();if((e=r.match(/rv:([\d.]+)\) like gecko/))||(e=r.match(/msie ([\d\.]+)/))?t.ie=e[1]:(e=r.match(/edge\/([\d\.]+)/))?t.edge=e[1]:(e=r.match(/firefox\/([\d\.]+)/))?t.firefox=e[1]:(e=r.match(/(?:opera|opr).([\d\.]+)/))?t.opera=e[1]:(e=r.match(/chrome\/([\d\.]+)/))?t.chrome=e[1]:(e=r.match(/version\/([\d\.]+).*safari/))&&(t.safari=e[1]),t.chrome){var i=t.chrome,a=i.indexOf(".");return Number(i.substring(0,a))}return t.ie?console.info("%c1>your browser is IE ,it does not support play without plugin","color: red"):t.safari?console.info("%c1>your browser is safari","color: red"):t.firefox?console.info("%c1>your browser is Firefox","color: red"):console.info("%c1>your browser does not support play without plugin","color: red"),-1},window._getFSupportWebCodecs=function(){return"undefined"!=typeof MediaMetadata&&"undefined"!=typeof MediaRecorder&&"undefined"!=typeof VideoDecoder},window._getFSupportSIMD=function(){return new Promise((function(e,t){je().then((function(r){r?e():t()}))}))}}(),x}()}();var cu=hu.exports.JSPlayCtrl,uu=function(){var e=new Xx;if(null==e?void 0:e.getResult){var t,r,i=(null==e?void 0:e.getResult())||{};if(i.browser&&"Chrome"===i.browser.name&&(!["120","118"].includes(null==(t=i.browser)?void 0:t.major)||"macOS"!==(null==(r=i.os)?void 0:r.name)))return!0}return!1};function _u(e,t,r){return _u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var i=[null];i.push.apply(i,t);var a=new(Function.bind.apply(e,i));return r&&du(a,r.prototype),a},_u.apply(null,arguments)}function du(e,t){return du=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},du(e,t)}var pu="object"==("undefined"==typeof window?"undefined":r(window))&&window.window===window?window:"object"==("undefined"==typeof self?"undefined":r(self))&&self.self===self?self:"object"==("undefined"==typeof global?"undefined":r(global))&&global.global===global?global:void 0;function mu(e,t,r){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){bu(i.response,t,r)},i.onerror=function(){},i.send()}function Pu(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function yu(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var gu=pu.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),bu="object"!=("undefined"==typeof window?"undefined":r(window))||window!==pu?function(){}:"download"in HTMLAnchorElement.prototype&&!gu?function(e,t,r){var i=pu.URL||pu.webkitURL,a=document.createElementNS("http://www.w3.org/1999/xhtml","a");t=t||e.name||"download",a.download=t,a.rel="noopener","string"==typeof e?(a.href=e,a.origin!==location.origin?Pu(a.href)?mu(e,t,r):yu(a,a.target="_blank"):yu(a)):(a.href=i.createObjectURL(e),setTimeout((function(){i.revokeObjectURL(a.href)}),4e4),setTimeout((function(){yu(a)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,i){if(t=t||e.name||"download","string"==typeof e)if(Pu(e))mu(e,t,i);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){yu(a)}))}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=r(t)&&(t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,i),t)}:function(e,t,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return mu(e,t,r);var a="application/octet-stream"===e.type,n=/constructor/i.test(pu.HTMLElement)||pu.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||a&&n||gu)&&"undefined"!=typeof FileReader){var o=new FileReader;o.onloadend=function(){var e=o.result;e=s?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},o.readAsDataURL(e)}else{var x=pu.URL||pu.webkitURL,f=x.createObjectURL(e);i?i.location=f:location.href=f,i=null,setTimeout((function(){x.revokeObjectURL(f)}),4e4)}};function Su(e,t){bu(function(e){void 0===e&&(e="");for(var t=e.split(","),r=atob(t[1]),i=t[0].replace("data:","").replace(";base64",""),a=r.length,n=new Uint8Array(a);a--;)n[a]=r.charCodeAt(a);return new File([n],"file",{type:i})}(e),t)}var vu={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function i(){}function a(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function n(e,t,i,n,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new a(i,n||e,s),x=r?r+t:t;return e._events[x]?e._events[x].fn?e._events[x]=[e._events[x],o]:e._events[x].push(o):(e._events[x]=o,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),o.prototype.eventNames=function(){var e,i,a=[];if(0===this._eventsCount)return a;for(i in e=this._events)t.call(e,i)&&a.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(e)):a},o.prototype.listeners=function(e){var t=r?r+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var a=0,n=i.length,s=new Array(n);a<n;a++)s[a]=i[a].fn;return s},o.prototype.listenerCount=function(e){var t=r?r+e:e,i=this._events[t];return i?i.fn?1:i.length:0},o.prototype.emit=function(e,t,i,a,n,s){var o=r?r+e:e;if(!this._events[o])return!1;var x,f,l=this._events[o],h=arguments.length;if(l.fn){switch(l.once&&this.removeListener(e,l.fn,void 0,!0),h){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,t),!0;case 3:return l.fn.call(l.context,t,i),!0;case 4:return l.fn.call(l.context,t,i,a),!0;case 5:return l.fn.call(l.context,t,i,a,n),!0;case 6:return l.fn.call(l.context,t,i,a,n,s),!0}for(f=1,x=new Array(h-1);f<h;f++)x[f-1]=arguments[f];l.fn.apply(l.context,x)}else{var c,u=l.length;for(f=0;f<u;f++)switch(l[f].once&&this.removeListener(e,l[f].fn,void 0,!0),h){case 1:l[f].fn.call(l[f].context);break;case 2:l[f].fn.call(l[f].context,t);break;case 3:l[f].fn.call(l[f].context,t,i);break;case 4:l[f].fn.call(l[f].context,t,i,a);break;default:if(!x)for(c=1,x=new Array(h-1);c<h;c++)x[c-1]=arguments[c];l[f].fn.apply(l[f].context,x)}}return!0},o.prototype.on=function(e,t,r){return n(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return n(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,i,a){var n=r?r+e:e;if(!this._events[n])return this;if(!t)return s(this,n),this;var o=this._events[n];if(o.fn)o.fn!==t||a&&!o.once||i&&o.context!==i||s(this,n);else{for(var x=0,f=[],l=o.length;x<l;x++)(o[x].fn!==t||a&&!o[x].once||i&&o[x].context!==i)&&f.push(o[x]);f.length?this._events[n]=1===f.length?f[0]:f:s(this,n)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o}(vu);var Ru=Zx(vu.exports);Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?t[r]:("00"+t[r]).substr((""+t[r]).length)));return e};var Cu=function(e,t){var r=new RegExp("(\\?|#|&)"+e+"=(.*?)(#|&|$)"),i=(t||window.location.href).match(r);return decodeURIComponent(i?i[2]:"")},Eu=function(e,t){var r=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=t.match(r);return null!=i?unescape(i[2]):null};function Fu(){return Fu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Fu.apply(this,arguments)}function Tu(e,t,r){var i=e.reduce((function(e,t,r){return 0===r?(delete t.coverPic,e.push(Fu({},t)),e):(e[e.length-1].downloadPath===t.downloadPath?e[e.length-1].endTime=t.endTime:(delete t.coverPic,e.push(Fu({},t))),e)}),[]);return i.length>0&&(i[0].startTime=t.valueOf(),i[i.length-1].endTime=r.valueOf()),i}function Du(e){var t=e.wasmplayer;t&&t.JSPlayM4_CloseStream(),e.playing=!1}function Iu(e,t,r,i){var a,n,s,o,x,f=(o=(s=t).split("?")[0].replace("/live","").replace("/playback",""),(x=(s.includes("/live")?"/live?":s.includes("cloudplayback")?"/cloudplayback?":"/playback?")+s.split("?")[1]).includes("/playback")&&(x=x.replace("stream=2","stream=1")),{websocketConnectUrl:o,websocketStreamingParam:x});if(f.websocketConnectUrl){var l,h=null!=(l=null==(n=e._options)||null==(a=n.env)?void 0:a.wsUrl)?l:f.websocketConnectUrl;wu(e,h,{playURL:f.websocketStreamingParam}).then((function(){return r(0)}),(function(t){e.logger.error("play error: ",t),e.event.emit(Ah,Mh(t)),i(1)}))}}function Mu(e){var t=e._options.url;return e.service.getRealPlayUrl({ezopen:e._options.url}).then((function(r){var i=r.realUrl,a=Eu("checkCode",i);return a&&(e._validateCode=a),i.includes("playback")?function(e,t,r){var i,a=Yx(Eu("begin",t)||Eu("begin",r)||Yx().format("YYYY-MM-DD 00:00:00")),n=Yx(Eu("end",t)||Eu("end",r)||Yx().format("YYYY-MM-DD 23:59:59")),s=Eu("end",t)||Eu("end",r),o=+Cu("timeZone",r);o<24&&o>-24?o=Math.round(o):(o=0,e.logger.warn("timeZone时区参数错误，取值范围为-23~23"));var x=Yx(a).add(o,"hour"),f=s?Yx(n).add(o,"hour"):Yx(Yx(x).format("YYYYMMDD 23:59:59"));x>=f&&(f=Yx(Yx(x).format("YYYYMMDD 23:59:59")),e.logger.warn("End time greater than or equal to start time"));var l,h="YYYYMMDDTHHmmss";return t=(t=t.replace("&begin="+Cu("begin",t),""))+"&begin="+x.format(h)+"Z",function(e,t){var r=Yx(e).startOf("day"),i=Yx(t).startOf("day");return!r.isSame(i)}(x,f)&&"cloud"===e.urlInfo.recType&&(f=Yx(Yx(x).format("YYYYMMDD 23:59:59")),e.logger.warn("The start and end times have crossed days")),t=(t=t.replace("&end="+Cu("end",t),""))+"&end="+f.format(h)+"Z",Cu("stream",t)||(t=t.replace("stream","&stream")),"cloud"===e.urlInfo.recType&&"7"===(null==(i=e.urlInfo.searchParams)?void 0:i.busType)?function(e,t){return new Promise((function(r,i){e.service.getRecordCloudVideoByTime(t).then((function(t){e.event.emit(kh.NETWORK.videoFragmentFiles,Mh(t.data||[],"云录制录像信息查询","RecordCloud")),r(t)})).catch((function(t){e.event.emit(kh.NETWORK.error.error,Mh(t)),e.event.emit(kh.NETWORK.error.videoFragmentFiles,Mh(t)),i(t)}))}))}(e,{channelNo:e.urlInfo.channelNo,startTime:Yx(Yx(x).format("YYYY-MM-DD 00:00:00")).valueOf(),endTime:Yx(Yx(f).format("YYYY-MM-DD 23:59:59")).valueOf(),spaceId:null==(l=e.urlInfo.searchParams)?void 0:l.spaceId}).then((function(e){var r=f;e.data.length>0&&Yx(e.data[e.data.length-1].endTime)<Yx(f)&&(r=Yx(e.data[e.data.length-1].endTime));var i=JSON.stringify(Tu(e.data,x,r)).replace("\\","");return t+="&recSlice="+i.replace("\\","")+"&r="+Math.random()})):"cloud"===e.urlInfo.recType?Kc(e,{recType:1,channelNo:e.urlInfo.channelNo,startTime:Yx(Yx(x).format("YYYY-MM-DD 00:00:00")).valueOf(),endTime:Yx(Yx(f).format("YYYY-MM-DD 23:59:59")).valueOf()}).then((function(e){var r=f;e.data.length>0&&Yx(e.data[e.data.length-1].endTime)<Yx(f)&&(r=Yx(e.data[e.data.length-1].endTime));var i=JSON.stringify(Tu(e.data,x,r)).replace("\\","");return t+="&recSlice="+i.replace("\\","")+"&r="+Math.random()})):(Kc(e,{recType:2,channelNo:e.urlInfo.channelNo,startTime:Yx(Yx(x).format("YYYY-MM-DD 00:00:00")).valueOf(),endTime:Yx(Yx(f).format("YYYY-MM-DD 23:59:59")).valueOf()}),Promise.resolve(t))}(e,i,t):Promise.resolve(i)}))}var Au="";function wu(e,t,r,i){return e._playerWindow.reRenderCanvas(!0),e.playing=!1,e._wss_info={wssUrl:t,oParams:r},new Promise((function(t,r){Au="",e._oStreamClient.stopAll(),null===e._g_port&&(e._g_port=e.wasmplayer.JSPlayM4_GetPort(),e.logger.log("1.获取播放库端口号 g_port:"+e._g_port)),e.event.emit(wh,Mh({type:Lh.openStreamCallback,data:null})),Lu(e).then(t,r)}))}function Lu(e,t){var r=!0,i=!0;return new Promise((function(a,n){e._oStreamClient.openStream(e._wss_info.wssUrl,e._wss_info.oParams,(function(n){if(n.errorCode&&"1"!=n.errorCode&&(e.event.emit(wh,Mh({type:Lh.pluginErrorHandler,iWndIndex:0,code:n.errorCode,data:n})),e.event.emit(kh.SOCKET.autoClose)),null==n?void 0:n.bHead){var s;if(e.event.emit(wh,Mh({type:Lh.getStreamHeaderCallback})),"resume"!==t&&function(e,t){var r=e.wasmplayer,i=r.JSPlayM4_OpenStream(t,40,4194304);e.event.emit("PlayM4_openStream",Mh(t)),r.JSPlayM4_SetFirstFrameCallBack(1,(function(){e.event.emit("firstFrameCallBack",Mh(null))}));var a=0;e.event&&e.event.on("seek",(function(e){a=e.data.startTime.replace(/[TZ]/gi,"")})),r.JSPlayM4_SetRunTimeInfoCallBackEx(1,(function(t,r,i,n,s){if(e.event){var o,x=e.getOSDTime();a=a||(Number.isNaN(x)?0:1e3*x),e.event.emit(wh,Mh({type:Lh.setRunTimeInfoCallBack,data:{nRunTimeModule:t,nStrVersion:r,nFrameTimeStamp:i,nFrameNum:n,nErrorCode:s,errorTime:Yx(a||(null==(o=e.urlInfo.searchParams)?void 0:o.begin)||Yx().format("YYYYMMDD000000"))}})),a=0}})),e.logger.log("3.打开流 resO:"+i)}(e,null==n?void 0:n.buf),e._aHead=new Uint8Array(n.buf),"resume"===t&&((null==e||null==(s=e.urlInfo)?void 0:s.validateCode)?e.setSecretKey(e.urlInfo.validateCode):e._secretKey&&e.setSecretKey(e._secretKey)),"resume"!==t){var o;try{var x,f=function(e){return{year:parseInt(e.slice(0,4)),month:parseInt(e.slice(4,6)),day:parseInt(e.slice(6,8)),hour:parseInt(e.slice(9,11)),min:parseInt(e.slice(11,13)),second:parseInt(e.slice(13,15))+3}}(Cu("begin",null==(x=e._wss_info.oParams)?void 0:x.playURL));if(!isNaN(f.year)){var l=e.wasmplayer.JSPlayM4_SetGlobalBaseTime(f.year,f.month,f.day,f.hour,f.min,f.second,0);e.logger.log("设置OSD时间res:",l)}}catch(t){e.logger.error("JSPlayM4_SetGlobalBaseTime:",t)}if(e.playing=!0,1!=+e.wasmplayer.JSPlayM4_SetFrameInfoCallBack(1)){var h=e.wasmplayer.JSPlayM4_GetLastError();e.logger.error("resFrameInfoError:",h)}e.wasmplayer.JSPlayM4_RenderPrivateData(4,1),r=!0,i=!0,e.event.emit("JSPlayM4_Play_Before",Mh(void 0)),(null==e||null==(o=e.urlInfo)?void 0:o.validateCode)?e.setSecretKey(e.urlInfo.validateCode):e._secretKey&&e.setSecretKey(e._secretKey);var c=e.wasmplayer.JSPlayM4_Play(e._playerWindow.canvasId);e.event.emit("JSPlayM4_Play_After",Mh(void 0)),e.logger.log("4.开始播放 resP:"+c,e._playerWindow.canvasId),a(c)}}else{if(i&&n.buf&&(i=!1,e.event.emit(wh,Mh({type:Lh.getVideoStreamCallback}))),r&&n.buf){var u=e.getFrameInfo();(null==u?void 0:u.width)&&(e.event.emit(wh,Mh({type:Lh.appearFirstFrameCallback})),e.event.emit(wh,Mh({type:Lh.averageStreamSuccessCallback})),r=!1)}var _=new Uint8Array(n.buf);n.statusString?e.event.emit(wh,Mh({type:Lh.pluginErrorHandler,iWndIndex:0,code:1001,data:n})):n.type&&"exception"===n.type&&e.event.emit(wh,Mh({type:Lh.pluginErrorHandler,iWndIndex:0,code:1002,data:n})),e.wasmplayer.JSPlayM4_InputData(_,_.length),_=null}"resume"!==t&&(e.playing=!0),e.event.emit("recordInputData",Mh(n.buf))}),(function(t){Au===t&&e.event&&(e.event.emit(wh,Mh({type:Lh.pluginErrorHandler,iWndIndex:0,code:1003})),e.event.emit(kh.SOCKET.close)),e.playing=!1,n()})).then((function(r){Au=r,e._oStreamClient.startPlay().then((function(){if("resume"===t){var r=e.wasmplayer.JSPlayM4_Pause(0);r?(e.playing=!0,e._tempPauseDate=null,a(r)):(e.logger.error("startPlay pause error"),n())}else{var i=e.wasmplayer.JSPlayM4_SetStreamOpenMode(1);e.logger.log("2.设置流模式 resSSOM:"+i)}e.event.emit(kh.API.play)})).catch((function(t){e.playing=!1,e.logger.error("startPlay error:",t),n(t.oError)}))}),(function(t){e.playing=!1,e.logger.error("openStream error:",t),Du(e),n(t)}))}))}function ku(e){return(e=+e)<10&&(e="0"+e),e+""}var Bu={startPos:{fX:.1,fY:.1},fontColor:{fR:0,fG:0,fB:0,fA:1},fontSize:{nFontWidth:20,nFontHeight:20},fontRotate:{fRotateAngle:0,fFillFullScreen:!1},fontFamily:"Arial",fontNumber:{nRowNumber:5,nColNumber:5},space:1};function Ou(){return Ou=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ou.apply(this,arguments)}var Hu=function(){function e(e){var t,r;this.event=new Ru,this.initializing=!0,this.loading=!1,this.playbackRate=1,this.playing=!1,this.volume=0,this.destroyed=!1,this.deviceCapacity={},this.deviceInfo={},this.error=null,this._aHead=null,this._g_port=null,this._secretKey="",this._tempPauseDate=null,this._tempPauseTime="",this.__videoInfo={},this._waterMarkParams=null,this._decoderStatus={},this._wss_info={wssUrl:"",oParams:{playURL:""}},this.version="0.1.0-beta.1",this._setOptions(e),this._playerWindow=new lu(this._options.id,this._options.width,this._options.height),this._playerWindow.render(),this.esCanvas=new bf(this._options.id+"canvas_draw0"),r=(t=this).$container,zx(r).find("."+ou+"-container").children().each((function(){zx(this).bind("mouseenter",(function(){zx(r).find("."+ou+"-canvas-draw").css("pointer-events","all"),t.__b3DZoom?(t.esCanvas=null,zx(r).find("."+ou+"-canvas-draw").unbind(),t.esCanvas=new bf(t._options.id+"canvas_draw0"),t.esCanvas.setShapeType("Rect"),t.esCanvas.setDrawStyle("#ff0000","",0),t.esCanvas.setDrawStatus(!0,(function(e){"function"==typeof t.__fCallback&&t.__fCallback(e)}))):zx(r).find("."+ou+"-canvas-draw").css("pointer-events","none")})),zx(this).bind("mouseleave",(function(){zx(r).find("."+ou+"-canvas-draw").css("pointer-events","none")}))})),this._playerInit(),this._playerFullScreen=new su(this,this._options.fullScreenEle)}var t=e.prototype;return t._playerInit=function(){var e=this;return function(e){return e.logger.log("player engine start init"),function(e){var t,r,i;e.initializing=!0,e.event.emit(kh.initializing);var a=(null!=(i=null==(t=e._options.staticPath)?void 0:t.replace(/\/$/,""))?i:"")+"/PlayCtrlWasm",n=a+"/playCtrl3/hasWorker/HasSIMD/Decoder.js",s=a+"/playCtrl1/HasSIMD/Decoder.js";window.SharedArrayBuffer||(n=a+"/playCtrl3/noWorker/Decoder.js");var o=uu(),x=function(t,r,i,a){return void 0===t&&(t=0),void 0===r&&(r="webgl"),void 0===i&&(i=0),void 0===a&&(a=0),new Promise((function(x){var f=e._options.decoderType,l=[!Bx()&&o&&["auto","v3"].includes(f)?n:null,s];e.wasmplayer=_u(cu,[].concat(l,[function(t){"loaded"===t.cmd&&(e.logger.log("init wasm cmd:",t.cmd),window.JSPlayerModuleLoaded=!0,e.initializing=!1,e.event.emit(kh.initializing,Mh(t))),e._decoderStatus=t,x(t)},t,r,i,a])),window["wasmplayer-"+e._options.id]=e.wasmplayer}))};return null==(r=window)?void 0:r._getFSupportSIMD().then((function(){return x()}),(function(){return n=a+"/playCtrl3/hasWorker/NoSIMD/Decoder.js",s=a+"/playCtrl1/NoSIMD/Decoder.js",x()}))}(e).then((function(t){return e.logger.log("player engine init success"),t}))}(this).then((function(t){return e._wasmDecoderInfo=t,"loaded"===t.cmd&&e._options.autoPlay&&e.play(),t}))},t.play=function(e){var t=this;return this.loading=!0,this._destroyed(),e&&this._setOptions(null!=e?e:{}),new Promise((function(e,r){var i;(i=t,i._playerWindow.hide(),i.__videoInfo={},new Promise((function(e,t){i._options.accessToken&&vh(i._options.url)?i._oStreamClient._streamUUID?i.stop().then((function(){Mu(i).then((function(r){Iu(i,r,e,t)})).catch((function(e){i.logger.error("play error: ",e),i.event.emit(Ah,Mh(e)),t(e)}))})).catch((function(e){t(e)})):Mu(i).then((function(r){Iu(i,r,e,t)})).catch((function(e){i.logger.error("play error: ",e),i.event.emit(Ah,Mh(e)),t(e)})):t(1)}))).then((function(){t._options.audio&&setTimeout((function(){t.setVolume(.8)}),100),t.loading=!1,e(0)})).catch((function(){t.loading=!1,r(1)}))}))},t._wss_play=function(e,t,r){var i=this;return void 0===t&&(t={playURL:""}),this._destroyed(),new Promise((function(r,a){var n=setInterval((function(){window.JSPlayerModuleLoaded&&(clearInterval(n),wu(i,e,t).then((function(e){r(e)})).catch((function(e){a(e)})))}),50)}))},t.pause=function(e){return function(e,t,r){if(!e.playing)return e._tempPauseDate?Promise.resolve(Ih(new Date(e._tempPauseDate),0)):Promise.reject(Ih(void 0,-1,"当前不是播放状态，不需要暂停"));var i=e.getFrameInfo(),a=new Date(i.year+"/"+i.month+"/"+i.day+" "+i.hour+":"+i.minute+":"+i.second).getTime()/1e3,n=new Date(1e3*a);return e._tempPauseDate=n.valueOf(),e._tempPauseTime=""+i.year+ku(i.month)+ku(i.day)+ku(i.hour)+ku(i.minute)+ku(i.second),new Promise((function(r,i){t?e.stop().then((function(){r(Ih(n,0,"暂停成功"))})).catch((function(e){i(Ih(n,-1,"暂停失败"))})):(e._oStreamClient.stopAll(),1==+e.wasmplayer.JSPlayM4_Pause(1)?(e.playing=!1,r(Ih(n))):i(Ih(n,-1,"暂停失败"))),e.event.emit("pause",Mh(void 0))}))}(this,e)},t.resume=function(e){return this._destroyed(),function(e,t){var r=e._tempPauseTime,i=e._tempPauseDate,a=e._wss_info;if(e.playing)return Promise.resolve();var n=!1;return new Promise((function(s,o){var x,f,l;t&&(r?r=r.slice(0,14-t.length)+t:(n=!0,r=t)),(null==(x=a.oParams)?void 0:x.playURL.includes("playback"))&&(a.oParams.playURL=null==a||null==(f=a.oParams)?void 0:f.playURL.replace(/begin=[0-9]{8}T[0-9]{6}Z/gi,"begin="+r.slice(0,8)+"T"+r.slice(8,14)+"Z")),a.oParams.playURL.includes("cloudplayback")&&(a.oParams.playURL=null==a||null==(l=a.oParams)?void 0:l.playURL.replace(/"startTime":[0-9]{13}/gi,'"startTime":'+i)),e.event.emit(kh.API.resume,Mh(t)),t&&!n?e._wss_play(null==a?void 0:a.wssUrl,null==a?void 0:a.oParams).then((function(t){e._waterMarkParams&&e.setWaterMark(e._waterMarkParams),s(t)})).catch((function(e){o(e)})):Lu(e,"resume").then((function(t){e._waterMarkParams&&e.setWaterMark(e._waterMarkParams),s(t)})).catch((function(e){o(e)}))}))}(this,e)},t.destroy=function(){return(e=this)._oStreamClient&&(null==(t=e._oStreamClient)||t.destroy(),e._oStreamClient=null),Du(e),e.wasmplayer&&(e.wasmplayer.JSPlayM4_Stop(),e.wasmplayer.JSPlayM4_FreePort(),e.wasmplayer=null),e._g_port=null,e.pluginManager&&(e.pluginManager.destroy(),e.pluginManager=null),e._playerWindow&&(e._playerWindow.destroy(),e._playerWindow=null),setTimeout((function(){e.event&&(e.event.emit(kh.API.destroy),e.event=null)}),0),e.destroyed=!0,Promise.resolve();var e,t},t._destroyed=function(){return function(e){if(e.destroyed)throw new Error("player is destroyed!")}(this)},t.stop=function(){return t=(e=this).wasmplayer,e._playerWindow.hide(),new Promise((function(r,i){setTimeout((function(){e._oStreamClient&&e._oStreamClient.stopAll().then((function(){e.event.emit("stop",Mh(void 0)),e.event.emit("JSPlayM4_Stop",Mh(void 0));var i=t.JSPlayM4_Stop(!1);if(1===i)Du(e),r({resS:i});else{var a=t.JSPlayM4_GetLastError();if(35==+a)var n=setInterval((function(){i?clearInterval(n):1==+(i=t.JSPlayM4_Stop(!1))?(Du(e),r({resS:i})):(a=t.JSPlayM4_GetLastError(),e.logger.error("JSPlayM4_Stop error: ",a))}),50);else e.logger.error("stop - other error, still resolve: ",a),Du(e),r({resS:i,jsPluginErrorCode:a})}})).catch((function(r){Du(e);var a=t.JSPlayM4_GetLastError();e.logger.error("JSPlayM4_Stop error: ",a),i({jsPluginErrorCode:a})}))}),100)}));var e,t},t.snapshot=function(e,t,r,i){return void 0===t&&(t="jpeg"),function(e,t,r,i,a,n){var s;return void 0===r&&(r="jpeg"),void 0===n&&(n=!0),r="jpeg",t=(null!=(s=t)&&""!==s?t:(new Date).getTime())+"."+r,new Promise((function(i,s){var o=function(r){if(r){var s=function(e){for(var t=new Uint8Array(e),r="",i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return"data:image/jpeg;base64,"+window.btoa(r)}(r);a&&Su(s,t),n&&e.event.emit(kh.API.snapshot,Mh({fileName:t,base64:s})),i(Ih({fileName:t,base64:s}))}};1!=+e.wasmplayer.JSPlayM4_GetJPEG((function(e){o(e)}),!1)&&function(e,t,r,i,a){void 0===a&&(a=!0);var n=e.wasmplayer;return new Promise((function(s,o){1!==n.JSPlayM4_GetCanvasCapture((function(n,o,x){if(n&&o&&x){var f=new ImageData(o,x);f.data.set(n);var l="image/"+r,h=document.createElement("canvas"),c=h.getContext("2d");h.width=o,h.height=x,null==c||c.putImageData(f,0,0);var u=h.toDataURL(l,.7);i&&Su(u,t),a&&e.event.emit(kh.API.snapshot,Mh({fileName:t,base64:u})),s(Ih({fileName:t,base64:u}))}}))&&s(Ih(null,-1,"截图失败"))}))}(e,t,r,!!a,n).then((function(e){0===(null==e?void 0:e.code)?i(e):s(e)}))}))}(this,e,t,0,i)},t.fullScreen=function(e,t){return this._playerFullScreen.fullScreen(e,t)},t.exitScreen=function(){return this._playerFullScreen.exitScreen()},t.resize=function(e,t){return function(e,t,r){t=+t,r=+r;var i=au();if(isNaN(t)||isNaN(r)?(t=e._options.width,r=e._options.height):i||(e._options.width=t,e._options.height=r),t<16||r<16)return Promise.reject();if(e.$container.style.width=t+"px",e.$container.style.height=r+"px",e._playerWindow&&(e._playerWindow.resize(t,r),e.wasmplayer))try{0==+e.wasmplayer.JSPlayM4_SetCanvasSize(t,r)&&e.logger.error("canvas resize fail")}catch(t){e.logger.error("canvas resize fail: ",t)}return e.event&&e.event.emit("resize",Mh({width:t,height:r})),e.logger&&e.logger.log("resize: width: "+t+"  height: "+r),Promise.resolve({width:t,height:r})}(this,e,t)},t.setVolume=function(e){return function(e,t){var r=0;return t<0||t>1?(e.logger.warn("audio volume ("+t+") is invalid!"),0):(0===t?1===(r=e.wasmplayer.JSPlayM4_StopSound())&&(e.volume=0):1===(r=e.wasmplayer.JSPlayM4_PlaySound())&&(e.volume=t),e.event.emit(kh.volumeChange,Mh(t)),r)}(this,e)},t.use=function(e){this.pluginManager.use(e)},t.setFECCorrectType=function(e,t){return this.fECCorrect.setFECCorrectType(e,t)},t.setFEC2DParam=function(e,t){return this.fECCorrect.setFEC2DParam(e,t)},t.setFEC3DViewParam=function(e){return this.fECCorrect.setFEC3DViewParam(e)},t.get3DViewParam=function(e){return this.fECCorrect.get3DViewParam(e)},t.setPoster=function(e){},t.setPlaybackRate=function(e){!function(e,t){if(t=+t,Number.isNaN(t))throw new Error("rate is error, only support 0.5 | 1 | 2 | 4");if(![.5,1,2,4].includes(t))throw new Error("rate is error, only support  0.5 | 1 | 2 | 4");e._oStreamClient.setPlayRate(t);var r=e.playbackRate;if(r>t)for(var i=t;i<r;)i*=2,e.wasmplayer.JSPlayM4_Slow();else if(r<t)for(var a=r;a<t;)a*=2,e.wasmplayer.JSPlayM4_Fast();4==+t&&e.wasmplayer.JSPlayM4_SetDecodeThreadNum(4),e.event.emit(kh.API.rateChange,Mh(t)),e.playbackRate=t}(this,e)},t.seek=function(e,t){return function(e,t,r){return e.wasmplayer.JSPlayM4_ResetBuffer(1),e.event.emit(kh.API.seek,Mh({startTime:t,endTime:r})),e._oStreamClient.seek(t,r).then((function(t){e._waterMarkParams&&e.setWaterMark(e._waterMarkParams)})),Promise.resolve()}(this,e,t)},t._setOptions=function(e){!function(e,t){if(e.pluginManager||(e.pluginManager=new Dh(e)),(null==t?void 0:t.staticPath)?/^http[s]?:\/\//.test(t.staticPath)||(t.staticPath=location.origin+t.staticPath):t.staticPath=location.origin,e._options=dh({},Rh,e._options,t),!e._options.id)throw new Error("id is required");var r=au();if("string"!=typeof e._options.id)throw new Error("id is required and only support string");e.$container=document.getElementById(e._options.id),e._options.fullScreenEle||(e._options.fullScreenEle=e.$container);var i=r?window.screen.width:e._options.width,a=r?window.screen.height:e._options.height;if(e.$container.style.cssText+="display:inline-block;width:"+i+"px;height:"+a+"px;background:#000000;background-size:100% 100%;vertical-align:top;position: relative;",e._oStreamClient||(e._oStreamClient=new Jc(e)),e.logger||(e.logger=d(e._options.logger)),e.i18n||(e.i18n=new wx({en:bh,zh:Sh})),e.fECCorrect||(e.fECCorrect=new $c(e)),e._options.accessToken&&vh(e._options.url)){var n,s,o,x=null==(n=e.urlInfo)?void 0:n.deviceSerial;if(e.urlInfo=kx(e._options.url),!e.urlInfo.deviceSerial||!e._options.accessToken)throw new Error("deviceSerial is required!");e.service=new gh({deviceSerial:e.urlInfo.deviceSerial,accessToken:e._options.accessToken,domain:null==(o=e._options)||null==(s=o.env)?void 0:s.domain,extraParams:e._options.extraParams}),x!==e.urlInfo.deviceSerial&&(function(e){e.service.getDeviceCapacity().then((function(t){200==+t.code?(e.deviceCapacity=t.data,e.event.emit(kh.NETWORK.deviceCapacity,Mh(t.data))):e.logger.error("getDeviceCapacity error: ",t)})).catch((function(t){e.event.emit(kh.NETWORK.error.error,Mh(t)),e.event.emit(kh.NETWORK.error.deviceCapacity,Mh(t)),e.logger.error("getDeviceCapacity error: ",t)}))}(e),function(e){e.event.emit(kh.NETWORK.deviceInfo,Mh({})),e.service.getDeviceInfo().then((function(t){200==+t.code?(e.deviceInfo=t.data,e.event.emit(kh.NETWORK.deviceInfo,Mh(t.data))):e.logger.error("deviceInfo error: ",t)})).catch((function(t){e.event.emit(kh.NETWORK.error.error,Mh(t)),e.event.emit(kh.NETWORK.error.deviceInfo,Mh(t)),e.logger.error("deviceInfo error: ",t)}))}(e)),e.event&&x&&(e.logger.log("play url change "+e._options.url),e.event.emit(kh.urlChange,Mh(e._options.url)))}}(this,e)},t.enable3DZoom=function(e){return function(e,t){if(!e.playing)return-1;var r=e.wasmplayer,i=r.JSPlayM4_GetFrameInfo();return new Promise((function(t,a){t({code:0,data:r.JSPlayM4_SetDisplayRegion(e._playerWindow.canvasId,0,i.width,0,i.height,!1,!0)})})),zx("."+e._options.id+"draw-window").unbind(),e.__fCallback=t,e.esCanvas=new bf(e._options.id+"canvas_draw0"),e.esCanvas.setShapeType("Rect"),e.esCanvas.setDrawStyle("#ff0000","",0),e.esCanvas.setDrawStatus(!0,(function(e){"function"==typeof t&&t(e)})),e.__b3DZoom=!0,0}(this,e)},t.disable3DZoom=function(){return(e=this).playing?(e.esCanvas.setDrawStatus(!1),e.__fCallback=null,e.__b3DZoom=!1,0):-1;var e},t.getOSDTime=function(){var e=this.getFrameInfo();return new Date(e.year+"/"+e.month+"/"+e.day+" "+e.hour+":"+e.minute+":"+e.second).getTime()/1e3},t.getFrameInfo=function(){var e,t,r,i=this.wasmplayer.JSPlayM4_GetFrameInfo(),a=5===(null==i?void 0:i.codecType)?"H265":1===(null==i?void 0:i.codecType)||256===(null==i?void 0:i.codecType)?"H264":null==i?void 0:i.codecType;return i.codecType=a,i.codecType&&((null==(e=this.__videoInfo)?void 0:e.width)===(null==i?void 0:i.width)&&(null==(t=this.__videoInfo)?void 0:t.height)===(null==i?void 0:i.height)&&(null==(r=this.__videoInfo)?void 0:r.codecType)===(null==i?void 0:i.codecType)||(this.event.emit("videoInfo",Mh(i)),this.__videoInfo=Ou({},i),this.logger.log("[videoInfo] ",i))),i},t.setDisplayRegion=function(e,t,r,i,a,n){void 0===a&&(a=!0),void 0===n&&(n=!1);var s=function(e,t,r,i,a,n,s){void 0===n&&(n=!0),void 0===s&&(s=!1);var o=e.wasmplayer,x=e.getFrameInfo(),f=e._playerWindow.canvasId,l=document.getElementById(f);if(l){var h=function(e){return{width:(null==e?void 0:e.style.width)?+(null==e?void 0:e.style.width.replace("px","")):e.width||e.offsetWidth,height:(null==e?void 0:e.style.height)?+(null==e?void 0:e.style.height.replace("px","")):e.height||e.offsetHeight}}(l),c=h.width,u=h.height;return s&&(u=h.width,c=h.height),e.event.emit("setDisplayRegion",Mh({left:t,right:r,top:i,bottom:a,flag:n,isFullscreen:s})),o.JSPlayM4_SetDisplayRegion(f,c*t/x.width,c*r/x.width,u*i/x.height,u*a/x.height,!n,!1)}}(this,e,t,r,i,a,n);return 1===s},t.setSecretKey=function(e){if(null!=e&&""!==e){this._secretKey=e;var t=this.wasmplayer.JSPlayM4_SetSecretKey(e);return 1==+t?this.logger.log("set secretKey success, ",e):this.logger.error("set secretKey fail, ",e),t}},t.getOptions=function(){return this._options},t.setLogger=function(e){this._setOptions(Ou({},this._options,{logger:Object.assign({},this._options.logger,e)}))},t.getVersion=function(){var e=this.wasmplayer.JSPlayM4_GetSDKVersion();return{version:"0.1.0-beta.1",decoder:this._wasmDecoderInfo.bSupHardOrSoft?"V3":"V1",decoderVersion:e.toString(16)}},t.setWaterMark=function(e){return this._waterMarkParams=e,function(e,t){var r=e.wasmplayer;return t=Object.assign({},Bu,t),new Promise((function(e,i){var a;1===(a=t&&t.fontString?r.JSPlayM4_SetWaterMarkFont({pFontString:t.fontString,pstStartPos:t.startPos,pstFontColor:t.fontColor,pstFontSize:t.fontSize,pstFontRotate:t.fontRotate,pstFontNumber:t.fontNumber,pFontFamily:t.fontFamily,pSpace:t.space}):r.JSPlayM4_SetWaterMarkFont(null))?e({code:0,msg:"水印设置成功"}):i({code:-1,msg:a})}))}(this,e)},t.setMirrorFlip=function(e){return function(e,t){var r;return e.service.setMirrorFlip({command:t,channelNo:null==(r=e.urlInfo)?void 0:r.channelNo})}(this,e)},e}();Hu.EVENT_TYPE=kh;var Nu="object"==("undefined"==typeof global?"undefined":r(global))&&global&&global.Object===Object&&global,Vu="object"==("undefined"==typeof self?"undefined":r(self))&&self&&self.Object===Object&&self,Yu=Nu||Vu||Function("return this")(),Uu=Yu.Symbol,Xu=Object.prototype,Wu=Xu.hasOwnProperty,Gu=Xu.toString,Ju=Uu?Uu.toStringTag:void 0;var Zu=Object.prototype.toString;var ju="[object Null]",zu="[object Undefined]",qu=Uu?Uu.toStringTag:void 0;function $u(e){return null==e?void 0===e?zu:ju:qu&&qu in Object(e)?function(e){var t=Wu.call(e,Ju),r=e[Ju];try{e[Ju]=void 0;var i=!0}catch(e){}var a=Gu.call(e);return i&&(t?e[Ju]=r:delete e[Ju]),a}(e):function(e){return Zu.call(e)}(e)}function Ku(e){return null!=e&&"object"==r(e)}var Qu=Array.isArray;function e_(e){var t=r(e);return null!=e&&("object"==t||"function"==t)}function t_(e){return e}var r_="[object AsyncFunction]",i_="[object Function]",a_="[object GeneratorFunction]",n_="[object Proxy]";function s_(e){if(!e_(e))return!1;var t=$u(e);return t==i_||t==a_||t==r_||t==n_}var o_,x_=Yu["__core-js_shared__"],f_=(o_=/[^.]+$/.exec(x_&&x_.keys&&x_.keys.IE_PROTO||""))?"Symbol(src)_1."+o_:"";var l_=Function.prototype.toString;var h_=/^\[object .+?Constructor\]$/,c_=Function.prototype,u_=Object.prototype,__=c_.toString,d_=u_.hasOwnProperty,p_=RegExp("^"+__.call(d_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m_(e){return!(!e_(e)||(t=e,f_&&f_ in t))&&(s_(e)?p_:h_).test(function(e){if(null!=e){try{return l_.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function P_(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return m_(r)?r:void 0}var y_=Object.create,g_=function(){function e(){}return function(t){if(!e_(t))return{};if(y_)return y_(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();var b_=Date.now;var S_,v_,R_,C_=function(){try{var e=P_(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),E_=C_?function(e,t){return C_(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:t_,F_=(S_=E_,v_=0,R_=0,function(){var e=b_(),t=16-(e-R_);if(R_=e,t>0){if(++v_>=800)return arguments[0]}else v_=0;return S_.apply(void 0,arguments)}),T_=9007199254740991,D_=/^(?:0|[1-9]\d*)$/;function I_(e,t){var i=r(e);return!!(t=null==t?T_:t)&&("number"==i||"symbol"!=i&&D_.test(e))&&e>-1&&e%1==0&&e<t}function M_(e,t,r){"__proto__"==t&&C_?C_(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function A_(e,t){return e===t||e!=e&&t!=t}var w_=Object.prototype.hasOwnProperty;function L_(e,t,r){var i=e[t];w_.call(e,t)&&A_(i,r)&&(void 0!==r||t in e)||M_(e,t,r)}var k_=Math.max;function B_(e,t){return F_(function(e,t,r){return t=k_(void 0===t?e.length-1:t,0),function(){for(var i=arguments,a=-1,n=k_(i.length-t,0),s=Array(n);++a<n;)s[a]=i[t+a];a=-1;for(var o=Array(t+1);++a<t;)o[a]=i[a];return o[t]=r(s),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,o)}}(e,t,t_),e+"")}var O_=9007199254740991;function H_(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=O_}function N_(e){return null!=e&&H_(e.length)&&!s_(e)}var V_=Object.prototype;function Y_(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||V_)}function U_(e){return Ku(e)&&"[object Arguments]"==$u(e)}var X_=Object.prototype,W_=X_.hasOwnProperty,G_=X_.propertyIsEnumerable,J_=U_(function(){return arguments}())?U_:function(e){return Ku(e)&&W_.call(e,"callee")&&!G_.call(e,"callee")},Z_=J_;var j_="object"==("undefined"==typeof exports?"undefined":r(exports))&&exports&&!exports.nodeType&&exports,z_=j_&&"object"==("undefined"==typeof module?"undefined":r(module))&&module&&!module.nodeType&&module,q_=z_&&z_.exports===j_?Yu.Buffer:void 0,$_=(q_?q_.isBuffer:void 0)||function(){return!1},K_={};K_["[object Float32Array]"]=K_["[object Float64Array]"]=K_["[object Int8Array]"]=K_["[object Int16Array]"]=K_["[object Int32Array]"]=K_["[object Uint8Array]"]=K_["[object Uint8ClampedArray]"]=K_["[object Uint16Array]"]=K_["[object Uint32Array]"]=!0,K_["[object Arguments]"]=K_["[object Array]"]=K_["[object ArrayBuffer]"]=K_["[object Boolean]"]=K_["[object DataView]"]=K_["[object Date]"]=K_["[object Error]"]=K_["[object Function]"]=K_["[object Map]"]=K_["[object Number]"]=K_["[object Object]"]=K_["[object RegExp]"]=K_["[object Set]"]=K_["[object String]"]=K_["[object WeakMap]"]=!1;var Q_="object"==("undefined"==typeof exports?"undefined":r(exports))&&exports&&!exports.nodeType&&exports,ed=Q_&&"object"==("undefined"==typeof module?"undefined":r(module))&&module&&!module.nodeType&&module,td=ed&&ed.exports===Q_&&Nu.process,rd=function(){try{var e=ed&&ed.require&&ed.require("util").types;return e||td&&td.binding&&td.binding("util")}catch(e){}}(),id=rd&&rd.isTypedArray,ad=id?function(e){return function(t){return e(t)}}(id):function(e){return Ku(e)&&H_(e.length)&&!!K_[$u(e)]},nd=Object.prototype.hasOwnProperty;function sd(e,t){var r=Qu(e),i=!r&&Z_(e),a=!r&&!i&&$_(e),n=!r&&!i&&!a&&ad(e),s=r||i||a||n,o=s?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],x=o.length;for(var f in e)!t&&!nd.call(e,f)||s&&("length"==f||a&&("offset"==f||"parent"==f)||n&&("buffer"==f||"byteLength"==f||"byteOffset"==f)||I_(f,x))||o.push(f);return o}var od=Object.prototype.hasOwnProperty;function xd(e){if(!e_(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=Y_(e),r=[];for(var i in e)("constructor"!=i||!t&&od.call(e,i))&&r.push(i);return r}function fd(e){return N_(e)?sd(e,!0):xd(e)}var ld=P_(Object,"create");var hd=Object.prototype.hasOwnProperty;var cd=Object.prototype.hasOwnProperty;function ud(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function _d(e,t){for(var r=e.length;r--;)if(A_(e[r][0],t))return r;return-1}ud.prototype.clear=function(){this.__data__=ld?ld(null):{},this.size=0},ud.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ud.prototype.get=function(e){var t=this.__data__;if(ld){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return hd.call(t,e)?t[e]:void 0},ud.prototype.has=function(e){var t=this.__data__;return ld?void 0!==t[e]:cd.call(t,e)},ud.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=ld&&void 0===t?"__lodash_hash_undefined__":t,this};var dd=Array.prototype.splice;function pd(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}pd.prototype.clear=function(){this.__data__=[],this.size=0},pd.prototype.delete=function(e){var t=this.__data__,r=_d(t,e);return!(r<0)&&(r==t.length-1?t.pop():dd.call(t,r,1),--this.size,!0)},pd.prototype.get=function(e){var t=this.__data__,r=_d(t,e);return r<0?void 0:t[r][1]},pd.prototype.has=function(e){return _d(this.__data__,e)>-1},pd.prototype.set=function(e,t){var r=this.__data__,i=_d(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this};var md=P_(Yu,"Map");function Pd(e,t){var i,a,n=e.__data__;return("string"==(a=r(i=t))||"number"==a||"symbol"==a||"boolean"==a?"__proto__"!==i:null===i)?n["string"==typeof t?"string":"hash"]:n.map}function yd(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}yd.prototype.clear=function(){this.size=0,this.__data__={hash:new ud,map:new(md||pd),string:new ud}},yd.prototype.delete=function(e){var t=Pd(this,e).delete(e);return this.size-=t?1:0,t},yd.prototype.get=function(e){return Pd(this,e).get(e)},yd.prototype.has=function(e){return Pd(this,e).has(e)},yd.prototype.set=function(e,t){var r=Pd(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this};var gd=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object),bd="[object Object]",Sd=Function.prototype,vd=Object.prototype,Rd=Sd.toString,Cd=vd.hasOwnProperty,Ed=Rd.call(Object);function Fd(e){var t=this.__data__=new pd(e);this.size=t.size}Fd.prototype.clear=function(){this.__data__=new pd,this.size=0},Fd.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Fd.prototype.get=function(e){return this.__data__.get(e)},Fd.prototype.has=function(e){return this.__data__.has(e)},Fd.prototype.set=function(e,t){var r=this.__data__;if(r instanceof pd){var i=r.__data__;if(!md||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new yd(i)}return r.set(e,t),this.size=r.size,this};var Td="object"==("undefined"==typeof exports?"undefined":r(exports))&&exports&&!exports.nodeType&&exports,Dd=Td&&"object"==("undefined"==typeof module?"undefined":r(module))&&module&&!module.nodeType&&module,Id=Dd&&Dd.exports===Td?Yu.Buffer:void 0,Md=Id?Id.allocUnsafe:void 0;var Ad=Yu.Uint8Array;function wd(e,t){var r,i,a=t?(r=e.buffer,i=new r.constructor(r.byteLength),new Ad(i).set(new Ad(r)),i):e.buffer;return new e.constructor(a,e.byteOffset,e.length)}var Ld,kd=function(e,t,r){for(var i=-1,a=Object(e),n=r(e),s=n.length;s--;){var o=n[Ld?s:++i];if(!1===t(a[o],o,a))break}return e};function Bd(e,t,r){(void 0!==r&&!A_(e[t],r)||void 0===r&&!(t in e))&&M_(e,t,r)}function Od(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function Hd(e){return function(e,t,r,i){var a=!r;r||(r={});for(var n=-1,s=t.length;++n<s;){var o=t[n],x=i?i(r[o],e[o],o,r,e):void 0;void 0===x&&(x=e[o]),a?M_(r,o,x):L_(r,o,x)}return r}(e,fd(e))}function Nd(e,t,r,i,a,n,s){var o=Od(e,r),x=Od(t,r),f=s.get(x);if(f)Bd(e,r,f);else{var l,h=n?n(o,x,r+"",e,t,s):void 0,c=void 0===h;if(c){var u=Qu(x),_=!u&&$_(x),d=!u&&!_&&ad(x);h=x,u||_||d?Qu(o)?h=o:Ku(l=o)&&N_(l)?h=function(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}(o):_?(c=!1,h=function(e,t){if(t)return e.slice();var r=e.length,i=Md?Md(r):new e.constructor(r);return e.copy(i),i}(x,!0)):d?(c=!1,h=wd(x,!0)):h=[]:function(e){if(!Ku(e)||$u(e)!=bd)return!1;var t=gd(e);if(null===t)return!0;var r=Cd.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Rd.call(r)==Ed}(x)||Z_(x)?(h=o,Z_(o)?h=Hd(o):e_(o)&&!s_(o)||(h=function(e){return"function"!=typeof e.constructor||Y_(e)?{}:g_(gd(e))}(x))):c=!1}c&&(s.set(x,h),a(h,x,i,n,s),s.delete(x)),Bd(e,r,h)}}function Vd(e,t,r,i,a){e!==t&&kd(t,(function(n,s){if(a||(a=new Fd),e_(n))Nd(e,t,s,r,Vd,i,a);else{var o=i?i(Od(e,s),n,s+"",e,t,a):void 0;void 0===o&&(o=n),Bd(e,s,o)}}),fd)}var Yd,Ud=(Yd=function(e,t,r){Vd(e,t,r)},B_((function(e,t){var i=-1,a=t.length,n=a>1?t[a-1]:void 0,s=a>2?t[2]:void 0;for(n=Yd.length>3&&"function"==typeof n?(a--,n):void 0,s&&function(e,t,i){if(!e_(i))return!1;var a=r(t);return!!("number"==a?N_(i)&&I_(t,i.length):"string"==a&&t in i)&&A_(i[t],e)}(t[0],t[1],s)&&(n=a<3?void 0:n,a=1),e=Object(e);++i<a;){var o=t[i];o&&Yd(e,o,i,n)}return e})));function Xd(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===r&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}Xd(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-message{align-items:center;bottom:0;display:none;flex-direction:column;font-size:14px;justify-content:center;left:0;position:absolute;right:0;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:20}.ezui-message-show{display:flex}.ezui-message-hide{display:none}");
/*
  *
  * @ezuikit/utils-dom v1.0.1
  * Copyright (c) 2024-3-23 Ezviz-OpenBiz
  * Released under MIT the License.
  *
  */
var Wd="ezui";function Gd(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var a;e&&(r=r.filter((function(e){return e&&!!e.replace(/ /g,"")})),(a=e.classList).add.apply(a,[].concat(r)))}function Jd(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var a;e&&(a=e.classList).remove.apply(a,[].concat(r))}var Zd={errorWrapClassName:Wd+"-message-container"},jd=function(){function e(e,t){var r;this._prefixCls=Wd+"-message";var i,a=document.getElementById(e);this._options=Object.assign(Zd,null!=t?t:{}),this.$messageContainer=document.createElement("div"),Gd(this.$messageContainer,this._prefixCls,null!=(i=null==(r=this._options)?void 0:r.errorWrapClassName)?i:Zd.errorWrapClassName),a&&a.appendChild(this.$messageContainer)}var t=e.prototype;return t.show=function(e,t){var r=this;void 0===t&&(t=0),this.$messageContainer.innerHTML=e,this._show(),0!==t&&"number"==typeof t&&(this._timer=window.setTimeout((function(){r.hide(),r._timer=null}),t))},t.showError=function(e,t){void 0===t&&(t=0),e='<div style="color: red">'+e+"</div>",this.show(e,t)},t.hide=function(e){void 0===e&&(e=!1),e&&this.$messageContainer&&(this.$messageContainer.innerHTML=""),this._hide()},t.clear=function(){this.hide(!0)},t._show=function(){Jd(this.$messageContainer,this._prefixCls+"-hide"),Gd(this.$messageContainer,this._prefixCls+"-show"),this._timer&&(window.clearTimeout(this._timer),this._timer=null)},t._hide=function(){Jd(this.$messageContainer,this._prefixCls+"-show"),Gd(this.$messageContainer,this._prefixCls+"-hide"),this._timer&&(window.clearTimeout(this._timer),this._timer=null)},t.destroy=function(){var e;this._timer&&clearTimeout(this._timer),this.clear(),(null==(e=this.$messageContainer)?void 0:e.parentElement)&&this.$messageContainer.parentElement.removeChild(this.$messageContainer),this.$messageContainer=null},e}(),zd={stream:{1001:"vtm地址或端口非法",1002:"vtm生成文件描述符失败",1003:"vtm设置文件描述符非阻塞失败",1004:"vtm设置文件描述符阻塞失败",1005:"vtm解析服务器ip失败",1006:"vtm描述符select失败",1007:"vtm文件描述符不在可读中",1008:"vtm网络发生错误getsockopt",1009:"vtm描述符select超时",1101:"proxy地址或端口非法",1102:"proxy生成文件描述符失败",1103:"proxy设置文件描述符非阻塞失败",1104:"proxy设置文件描述符阻塞失败",1105:"proxy解析服务器ip失败",1106:"proxy描述符select失败",1107:"proxy文件描述符不在可读中",1108:"proxy网络发生错误getsockopt",1109:"proxy描述符select超时",1201:"vtdu地址或端口非法",1202:"vtdu生成文件描述符失败",1203:"vtdu设置文件描述符非阻塞失败",1204:"vtdu设置文件描述符阻塞失败",1205:"vtdu解析服务器ip失败",1206:"vtdu描述符select失败",1207:"vtdu文件描述符不在可读中",1208:"vtdu网络发生错误getsockopt",1209:"vtdu描述符select超时",5e3:"cas回复信令，发现内存已经释放（和设备之间异常断开）",5400:"私有化协议vtm检测私有化协议中码流类型小于0或者设备序列号为空等非法参数场景返回(app不重试取流)",5402:"回放找不到录像文件",5403:"操作码或信令密钥与设备不匹配",5404:"设备不在线",5405:"流媒体向设备发送或接受信令超时/cas响应超时",5406:"token失效",5407:"客户端的URL格式错误",5409:"预览开启隐私保护",5410:"设备达到最大连接数",5411:"token无权限",5412:"session不存在",5413:"验证token异常",5415:"设备通道错",5416:"设备资源受限",5451:"设备不支持的码流类型",5452:"设备链接流媒体服务器失败",5454:"流媒体中关于设备取流会话不存在",5455:"设备通道未关联",5456:"设备通道关联设备不在线",5457:"客户端不支持端到端加密",5458:"设备不支持当前并发ECDH密",5459:"VTDU 处理ECDH 加密失败",5460:"流媒体中关于设备取流会话不存在",5492:"设备不支持的命令",5500:"服务器处理失败",5501:"流媒体vtdu达到最大负载，请扩容",5503:"vtm返回分配vtdu失败",5504:"流媒体vtdu达到最大负载",5505:"vtm ecdh解密失败",5506:"vtm 返回IPC不支持取流",5530:"机房故障不可用",5544:"设备返回无视频源",5545:"视频分享时间已经结束",5546:"vtdu返回达到取流并发路数限制",5547:"vtdu返回开放平台用户并发限制",5556:"ticket校验失败",5557:"回放服务器等待流头超时",5558:"查找录像开始时间错误",5560:"群组分享取流二次验证失败",5561:"分享群组用户被锁住",5562:"群组分享用户权限变更",5563:"认证服务连接失败",5564:"认证超时",5566:"不在分享时间内预览",5567:"分享通道被锁定",5568:"未找到认证类型",5569:"认证返回的参数异常",5600:"分享设备不在分享时间内",5601:"群组分享用户没权限",5602:"群组分享权限变更",5610:"接收流头失败",5620:"心跳超时",5701:"cas信令返回格式错误",5702:"SPGW请求Cas、Status透传超时",5703:"SPGW请求http不通",6001:"客户端参数出错",6099:"客户端默认错误",6101:"不支持的命令",6102:"设备流头发送失败",6103:"cas/设备返回错误1",6104:"cas/设备返回错误-1",6105:"设备返回错误码3",6106:"设备返回错误码4",6107:"设备返回错误码5",6108:"cas信令回应重复",6109:"视频广场取消分享",6110:"设备信令默认错误",6501:"设备数据链路和实际链路不匹配",6502:"设备数据链路重复建立连接",6503:"设备数据链路端口不匹配",6504:"缓存设备数据链路失败(内存块不足)",6505:"设备发送确认头消息重复",6506:"设备数据先于确定头部到达",6508:"设备数据头部长度非法",6509:"索引找不到设备数据管理块",6510:"设备数据链路vtdu内存块协议状态不匹配",6511:"设备数据头部没有streamkey错误",6512:"设备数据头部非法",6513:"设备数据长度过小",6514:"设备老协议推流头部没有streamkey错误",6515:"设备老协议推流数据非法",6516:"设备老协议索引找不到内存管理块",6517:"设备老协议推流数据非法",6518:"设备数据包过大",6519:"设备推流链路网络不稳定",6520:"设备推流链路网络不稳定",6700:"异常数据",6701:"回放结束",7001:"与相应服务连接失败",7002:"与相应服务连接失败",7003:"与相应服务连接失败",7004:"与相应服务连接失败",7005:"VTDU连接失败，或VTDU侧断开连接",7006:"vtm断开连接",7007:"客户端发送缓冲区满（上行带宽太小）",9e3:"无效包，包过大",9001:"地址不合法",9002:"缺少端口",9048:"免费版并发数达到上限，请升级企业版使用多并发能力","0001":"通用错误返回","0002":"入参为空指针","0003":"入参值无效","0004":"信令消息解析非法","0005":"内存资源不足","0006":"协议格式不对或者消息体长度超过STREAM_MAX_MSGBODY_LEN","0007":"设备序列号长度不合法","0008":"取流url长度不合法","0009":"解析vtm返回vtdu地址不合法","0010":"解析vtm返回级联vtdu地址不合法","0011":"解析vtm返回会话标识长度不合法","0012":"vtdu返回流头长度不合法","0013":"vtdu会话长度非法","0014":"回调函数未注册","0015":"vtdu成功响应未携带会话标识","0016":"vtdu成功响应未携带流头","0017":"无数据流，尚未使用","0018":"信令消息体PB解析失败","0019":"信令消息体PB封装失败","0020":"申请系统内存资源失败","0021":"vtdu地址尚未获取到","0022":"客户端尚未支持","0023":"获取系统socket资源失败","0024":"上层填充的StreamSsnId不匹配","0025":"链接服务器失败","0026":"客户端请求未收到服务端应答","0027":"链路断开","0028":"没有取流链接","0029":"流成功停止","0030":"客户端防串流校验失败","0031":"应用层tcp粘包处理缓冲区满","0032":"无效状态迁移","0033":"无效客户端状态","0034":"向vtm取流流媒体信息请求超时","0035":"向代理取流请求超时","0036":"向代理保活取流请求超时","0037":"向vtdu取流请求超时","0038":"向vtdu保活取流请求超时"},server:{ptz:{start:{200:"",10001:"操作失败",10002:"账号异常，操作失败",10005:"账号异常，操作失败",20002:"设备不存在，请检查设备连接情况",20006:"操作失败，请检查设备网络情况",20007:"操作失败，请检查设备在线情况",20008:"操作过于频繁，稍后再试",20014:"操作失败",20032:"通道不存在请检查设备连接情况",49999:"操作失败，请重试",6e4:"操作失败，设备不支持该操作",60001:"操作失败，用户无权限",60002:"设备已旋转到上限位",60003:"设备已旋转到下限位",60004:"设备已旋转到左限位",60005:"设备已旋转到右限位",60006:"操作失败，请重试",60009:"设备正在操作中",60020:"操作失败"},stop:{200:"",10001:"操作失败",10002:"账号异常，操作失败",10005:"账号异常，操作失败",20002:"设备不存在，请检查设备连接情况",20006:"操作失败，请检查设备网络情况",20007:"操作失败，请检查设备在线情况",20008:"操作过于频繁，稍后再试",20014:"操作失败",20032:"通道不存在请检查设备连接情况",49999:"操作失败，请重试",6e4:"操作失败，设备不支持该操作",60001:"操作失败，用户无权限",60006:"操作失败，请重试",60009:"设备正在操作中",60020:"操作失败"}},talk:{200:"",10001:"播放失败",10002:"账号异常，操作失败",10031:"账号异常，操作失败",20002:"设备不存在请检查设备连接情况",60059:"播放失败"},time:{200:"",10001:"播放失败",10002:"账号异常，播放失败",10004:"账号异常，播放失败",10005:"账号异常，播放失败",10011:"播放失败",10013:"账号异常，播放失败",10030:"播放失败",20002:"设备不存在请检查设备连接情况",20014:"播放失败",20032:"设备不存在请检查设备连接情况",49999:"播放失败请重试",60024:"播放失败请重试"}},client:{default:{BTN_RETRY:"重试",BTN_RELOAD:"重新加载",LOADING:"加载中，请稍后",TIMEFORMAT_ERROR:"时间格式有误，请确认"},init:{USE_MULTITHREADING_WARING:"您当前浏览器可以开启谷歌实验室多线程特性，获取更好播放体验，避免浏览器卡顿及崩溃,详见",OPEN_INSTRUCTIONS:"开启说明",INIT_FINSHED:"初始化播放器完成",INIT_SUCCESS:"初始化播放器成功"},play:{GET_PLAYURL_FAILED:"获取播放地址失败",VIDEO_LOADING:"视频加载中",DISCONNECT:"连接断开，请重试",DEVICE_ENCRYPTED:"设备已加密",NO_RECORD:"未找到录像片段",PLAY_FAILED:"播放失败，请检查设备及客户端网络",PLAY_SUCCESS:"播放成功",STOP_SUCCESS:"停止成功",CHANGE_PLAYURL_SUCCESS:"切换播放地址成功",CHANGE_PLAYURL_FAILED:"切换播放地址失败",GET_OSD_TIME:"获取OSD时间",GET_OSD_TIME_FAILED:"获取OSD时间失败",SET_POSTER:"设置播放器封面",RESIZE:"调整播放器尺寸",SPEED:"倍速播放",GET_SPEED:"获取当前播放速率",MAX_SPEED_LIMIT:"播放速度最大为4倍速度",MIN_SPEED_LIMIT:"播放速度最小为1倍速度",SEEK_CANNOT_CROSS_DAYS:"seek时间不能跨日期",SEEK_TIMEFORMAT_ERROR:"seek时间格式错误",PAUSE:"暂停",PAUSE_FAILED:"暂停失败",RESUME:"恢复播放",RESUME_FAILED:"恢复播放失败"},call:{CALL_END:"通话已结束",USER_DO_NOT_OWN_DEVICE:"loadingSetTextWithBtn"},cloudRecord:{NO_CLOUD_RECORD:"该设备在当天没有云录制的录像"},videoLevel:{CHANGE_VIDEO_LEVEL:"切换清晰度",GET_VIDEO_LEVEL_LIST:"获取设备支持的清晰度列表",PLEASE_INPUT_RIGHT_VIDEO_LEVEL:"请输入正确的清度"},theme:{RESET_THEME:"重置主题",BTN_PLAY:"播放/结束播放",BTN_SOUND:"声音",BTN_RECORDVIDEO:"录屏",BTN_CAPTURE:"截图",BTN_TALK:"对讲",BTN_ZOOM:"电子放大",BTN_3D_ZOOM:"3D定位",BTN_PTZ:"云台控制",BTN_EXPEND:"全局全屏",BTN_WEBEXPEND:"网页全屏",BTN_HD:"画面清晰度",BTN_SPEED:"回放倍速",BTN_CLOUDREC:"云存储回放",BTN_CLOUDRECORD:"云录制",BTN_REC:"本地存储",DEVICE_NAME:"设备名称",DEVICE_ID:"设备序列号"},capture:{CAPTURE_SUCCESS:"截图成功",CAPTURE_FAILED:"截图失败"},record:{START_RECORD_SUCCESS:"开始录制成功",START_RECORD_FAILED:"开始录制失败",STOP_RECORD_SUCCESS:"停止录制成功",STOP_RECORD_FAILED:"停止录制失败"},sound:{OPEN_SOUND:"开启声音",CLOSE_SOUND:"关闭声音"},zoom:{ZOOM:"电子放大",START_ZOOM:"开启电子放大",CLOSE_ZOOM:"关闭电子放大","3D_ZOOM":"3D定位","3D_ZOOM_DISABLE":"未启用3D定位功能","3D_ZOOM_FAILED":"3D定位失败，请重试",START_3D_ZOOM:"开启3D定位",CLOSE_3D_ZOOM:"关闭3D定位",DEVICE_NOT_SUPPORT_3D_ZOOM:"当前设备不支持3D定位功能","3D_ZOOM_ACTIVED":"3D定位已处于开启状态","3D_ZOOM_NOT_ACTIVED":"未启用3D定位功能","3D_ZOOM_CLOSED":"3D定位已处于关闭状态",CHANGE_ZOOM_TYPE:"改变缩放模式"},fullscreen:{FULLSCREEN:"全局全屏",FULLSCREEN_EXIT:"退出全局全屏",GET_WEB_FULLSCREEN_STATUS:"获取浏览器网页全屏状态",WEB_FULLSCREEN:"开启网页全屏",WEB_FULLSCREEN_EXIT:"退出网页全屏"},destroy:{DESTROY:"销毁"},capacity:{GET_CAPACITY:"获取设备能力级",GET_CAPACITY_FAILED:"获取设备能力级失败"},ptz:{GET_PTZ_STATUS:"获取当前云台状态",GET_PTZ_STATUS_FAILED:"未加载Theme模块，无法获取云台状态",MOBILE_HIDE_PTZ:"移动端，非全屏状态不展示云台",OPTION_PTZ_FAILED:"未加载Theme模块，无法操作云台"},mirror:{MIRROR:"镜像翻转",MIRROR_TYPE_ERROR:"翻转参数类型错误"},FEC:{CHANGE_FEC_TYPE:"切换鱼眼矫正类型",DEVICE_NOT_SUPPORT:"设备不支持鱼眼模式",TYPE_NOT_SUPPORT:"鱼眼矫正类型暂时不支持",FEC_SUPPORT_VERSION:"当前只有V3软解支持鱼眼矫正",NO_CANVAS_ID:"鱼眼矫正类型需要分屏，但是没有传正确的分屏的canvas id",SET_FEC_PARAMS:"设置3D矫正视角参数",GET_FEC_PARAMS:"获取3D矫正视角参数",SET_FEC_PARAMS_FAILED:"该矫正类型不能设置3D矫正视角参数",GET_FEC_PARAMS_FAILED:"该矫正类型不能获取3D矫正视角参数",GET_FEC_PARAMS_SUPPORT_VERSION:"当前只有V3软解支持鱼眼矫正获取3D矫正视角参数"},watermark:{SET_WATERMARK:"设置水印"}}};Xd(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-loading{align-items:center;background-color:rgba(0,0,0,.2);bottom:0;color:#fff;display:flex;flex-direction:column;justify-content:center;left:0;position:absolute;right:0;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:50}.ezui-loading-icon{font-size:24px}.ezui-loading-icon .ezui-icon-loading{animation:antRotate 1s linear infinite}.ezui-loading-loading-text{color:var(--ezui-color,#fff);font-size:var(--ezui-font-size,14px);margin-top:3px}@keyframes antRotate{to{transform:rotate(1turn);transform-origin:50% 50%}}"),function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css","top"===r&&i.firstChild?i.insertBefore(a,i.firstChild):i.appendChild(a),a.styleSheet?a.styleSheet.cssText=e:a.appendChild(document.createTextNode(e))}}(".ezui-icon{align-items:center;color:inherit;display:inline-flex;font-style:normal;line-height:0;text-align:center;text-rendering:optimizeLegibility;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.ezui-icon svg{display:inline-block}");var qd=function(e){var t="loading";
/*
  *
  * @ezuikit/icons v0.1.0
  * Copyright (c) 2024-3-23 Ezviz-OpenBiz
  * Released under MIT the License.
  *
  */
return function(e){var t,r="".concat(Wd,"-icon"),i=document.createElement("span");return i.className="",Gd(i,"".concat(r),"".concat(r,"-").concat(e.name),null!==(t=null==e?void 0:e.className)&&void 0!==t?t:""),i.setAttribute("role","img"),i.innerHTML=e.svg,i}({name:t,svg:null!=e?e:'<svg\n        viewBox="0 0 1024 1024"\n        focusable="false"\n        data-icon="'.concat(t,'"\n        width="1em"\n        height="1em"\n        fill="currentColor"\n        aria-hidden="true"\n      >\n      <g>\n      <path d="m538.5344,266.4448a133.12,133.12 0 1 1 133.12,-133.12a133.4272,133.4272 0 0 1 -133.12,133.12zm-283.52,105.7536a121.6768,121.6768 0 1 1 121.6768,-121.6768a121.856,121.856 0 0 1 -121.6768,121.6768zm-120.2944,275.2256a107.3664,107.3664 0 1 1 107.3664,-107.264a107.52,107.52 0 0 1 -107.3664,107.264zm120.32,272.4608a90.9824,90.9824 0 1 1 90.9824,-90.9824a91.1616,91.1616 0 0 1 -90.9824,90.9824zm283.4944,104.1152a79.36,79.36 0 1 1 79.36,-79.36a79.36,79.36 0 0 1 -79.36,79.36zm287.6928,-134.144a64.1792,64.1792 0 1 1 64.1792,-64.1792a64.3584,64.3584 0 0 1 -64.1792,64.1792zm117.76,-296.704a52.6336,52.6336 0 1 1 52.6592,-52.6336a52.608,52.608 0 0 1 -52.6336,52.6336l-0.0256,0zm-158.72,-338.7136a40.96,40.96 0 1 1 12.0064,28.8512a40.5248,40.5248 0 0 1 -12.0064,-28.8512z"/>\n     </g>\n      </svg>')})};function $d(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var Kd=function(){function e(e,t){if(this._prefixCls=Wd+"-loading",this._loading=!1,this._$container=document.getElementById(e),this._options=Object.assign({},null!=t?t:{}),this.$loadingContainer=document.createElement("div"),this._$container){var r,i;if("string"==typeof this._options.customLoadingHtml)return this.$loadingContainer.innerHTML=this._options.customLoadingHtml,this.$loadingContainer=this.$loadingContainer.childNodes[0],void Gd(this.$loadingContainer,null!=(r=this._options.loadingClass)?r:"");Gd(this.$loadingContainer,this._prefixCls,null!=(i=this._options.loadingClass)?i:""),this.$loadingContainer.innerHTML=this._renderHtml(),this._loading=!1}}var t,r,i,a=e.prototype;return a.show=function(e){var t;this.$loadingContainer.innerHTML=this._renderHtml(null!=(t=null!=e?e:this._options.loadingText)?t:""),this._$container&&(this._$container.appendChild(this.$loadingContainer),this._loading=!0)},a.hide=function(){this._$container&&this.$loadingContainer&&this._loading&&(this._$container.removeChild(this.$loadingContainer),this._loading=!1)},a.destroy=function(){this.hide(),this.$loadingContainer=null,this._loading=!1},a._renderHtml=function(e){var t,r=null!=(t=null!=e?e:this._options.loadingText)?t:"Loading ...";return'<div class="'+this._prefixCls+'-icon">'+qd().outerHTML+"</div>\n            "+(null===this._options.loadingText?"":'<div class="class="'+this._prefixCls+'-loading-text"">'+r+"</div>")},t=e,(r=[{key:"loading",get:function(){return this._loading}}])&&$d(t.prototype,r),i&&$d(t,i),e}(),Qd={poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",loadingText:"加载中，请稍后",initText:"初始化播放器完成"};function ep(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function tp(){return tp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},tp.apply(this,arguments)}function rp(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return ep(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ep(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var ip=function(){function e(e){if(this.player=new Hu(tp({},e)),this._options=Ud({},this.player.getOptions(),Qd,e),this.urlInfo=kx(this._options.url),this.i18n=this.player.i18n,this.event=this.player.event,this.service=this.player.service,this.i18n.switchTranslation("zh"),this.i18n.appendTranslations({zh:zd}),this.logger=d({level:"INFO",showTime:!0,name:"SIMPLE"}),this.message=new jd(e.id,{customErrorHtml:e.customErrorDom}),this.loading=new Kd(e.id,Ox(this._options,["loadingText","customLoadingDom"])),this.loading.show(this._options.initText),"string"==typeof e.id&&(this.$container=document.getElementById(e.id)),!this.$container)throw new Error(e.id+" node does not exist");if("CANVAS"===this.$container.nodeName||"VIDEO"===this.$container.nodeName)throw new Error(e.id+" node is "+this.$container.nodeName);this._options.poster&&this.setPoster(this._options.poster),this._registerEvents_()}var t=e.prototype;return t.play=function(e){return(null==e?void 0:e.url)&&(this.urlInfo=kx(null==e?void 0:e.url)),e&&(this._options=Object.assign(this._options,e||{})),this.loading.show(),this.message.hide(),this.player.play(e)},t.pause=function(e){return this.player.pause(e)},t.resume=function(e){return this.player.resume(e)},t.stop=function(){return this.player.stop()},t.destroy=function(){return this.message.destroy(),this.loading.destroy(),this.player.destroy()},t.snapshot=function(e,t,r,i){return void 0===t&&(t="jpeg"),this.player.snapshot(e,t,r,i)},t.resize=function(e,t){return this.player.resize(e,t)},t.fullScreen=function(e,t){return this.player.fullScreen(null!=e?e:window.screen.width,null!=t?t:window.screen.height)},t.exitScreen=function(){return this.player.exitScreen()},t.setVolume=function(e){if(!(e<0||e>1))return this.player.setVolume(e);this.logger.error("The range of volume values is [0, 1], "+e+" value set error, ")},t.getFrameInfo=function(){return this.player.getFrameInfo()},t.setDisplayRegion=function(e,t,r,i,a,n){return void 0===a&&(a=!0),void 0===n&&(n=!1),this.player.setDisplayRegion(e,t,r,i,a,n)},t.getOSDTime=function(){return this.player.getOSDTime()},t.use=function(e){this.player.use(e)},t.setFECCorrectType=function(e,t){return this.player.setFECCorrectType(e,t)},t.setFEC2DParam=function(e,t){return this.player.setFEC2DParam(e,t)},t.setFEC3DViewParam=function(e){return this.player.setFEC3DViewParam(e)},t.get3DViewParam=function(e){return this.player.get3DViewParam(e)},t.setPoster=function(e){if(this.$container){var t=document.getElementById(this._options.id+"-player");this._options.poster=e,t.style.backgroundImage="url("+e+")",t.style.backgroundSize="cover",this.$container.style.backgroundSize="cover"}},t.setPlaybackRate=function(e){return this.player.setPlaybackRate(e)},t.seek=function(e,t){return this.message.hide(),this.player.seek(e,t)},t.getOptions=function(){return this._options},t.getVersion=function(){return"0.1.1-beta.1"},t.setWaterMarkFont=function(e){return this.player.setWaterMark(e)},t.setMirrorFlip=function(e){return this.player.setMirrorFlip(e)},t._registerEvents_=function(){var e=this,t=!1,r=!1;this.event&&this.loading&&(this.event.on("initializing",(function(t){t.data&&(e.loading.hide(),e._options.autoPlay&&e.loading.show())})),this.event.on("play",(function(){t=!1})),this.event.on("seek",(function(){t=!1})),this.event.on("network.videoFragmentFiles",(function(t){var r,i,a=t.data||[],n=Yx((null==(r=e.urlInfo.searchParams)?void 0:r.begin)||Yx().format("YYYY-MM-DD 00:00:00")),s=Yx((null==(i=e.urlInfo.searchParams)?void 0:i.end)||Yx(n).format("YYYY-MM-DD 23:59:59"));a.find((function(e){return Yx(e.endTime)>n&&Yx(e.startTime)<s}))||(e.message.showError("RecordCloud"===(null==t?void 0:t.source)?e.i18n.t("client.cloudRecord.NO_CLOUD_RECORD"):e.i18n.t("client.play.NO_RECORD")),e.loading.loading&&e.loading.hide())})),this.event.on("EVENT_CALLBACK",(function(i){"appearFirstFrameCallback"===i.data.type&&(e.loading.hide(),e.message.hide(),t=!1,r=!1,e.logger.log("[appearFirstFrameCallback]",i))}))),this.event.on("network.error",(function(t){var r,i,a,n;e.loading.loading&&e.loading.hide();var s=(null==t||null==(r=t.data)?void 0:r.msg)||(null==t||null==(i=t.data)?void 0:i.errorMsg),o=(null==t||null==(a=t.data)?void 0:a.code)||(null==t||null==(n=t.data)?void 0:n.errorCode),x=e.i18n.t("stream."+o);x==='[missing "'+e.i18n.getCurrentLocale()+".stream."+o+'" translation]'&&(x=""),(x||s)&&e.message.showError(x||s,3e3)})),this.event.on("EVENT_CALLBACK",(function(i){var a,n;if("setRunTimeInfoCallBack"===i.data.type)5!==(null==i||null==(n=i.data)||null==(a=n.data)?void 0:a.nErrorCode)||t||(e.loading.loading&&e.loading.hide(),e.message.showError("设备已加密"),e.logger.error("[setRunTimeInfoCallBack]",i),e.event.emit("deviceEncrypted",i.data),t=!0);else if("pluginErrorHandler"===i.data.type){var s,o=e.i18n.t("client.play.DISCONNECT");if(r)return;if(1003===i.data.code)e.player.playing&&e.message.showError(o);else if(1001===i.data.code);else if(5402===i.data.code);else if((null==i?void 0:i.data)&&1!==(null==i||null==(s=i.data)?void 0:s.code)){var x,f,l,h;e.loading.loading&&e.loading.hide();var c=(null==i?void 0:i.msg)||(null==i?void 0:i.errorMsg)||(null==i||null==(x=i.data)?void 0:x.msg)||(null==i||null==(f=i.data)?void 0:f.errorMsg),u=(null==i||null==(l=i.data)?void 0:l.code)||(null==i||null==(h=i.data)?void 0:h.errorCode),_=e.i18n.t("stream."+u);_==='[missing "'+e.i18n.getCurrentLocale()+".stream."+u+'" translation]'&&(_=""),e.message.showError(_||c||o),6701===i.data.code&&e.logger.log("回放结束")}else e.message.hide()}})),this.event.on("StreamClient.autoClose",(function(){r=!0,e.player.playing=!1}))},e.install=function(t,r){e.plugins.get(t),e.plugins.set(t,r)},e.installs=function(t){for(var r,i=rp(t);!(r=i()).done;){var a=r.value;e.install(a.name,a.plugin)}},e}();return ip.plugins=new Map,ip}));
