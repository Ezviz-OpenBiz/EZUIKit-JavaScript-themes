/*
*
* @ezuikit/theme-rec v0.1.0
* Copyright (c) 2024-3-26 Ezviz-OpenBiz
* Released under MIT the License.
*
*/
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).RecTheme=t()}(this,(function(){"use strict";function e(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}function t(){t=function(){return r};var e,r={},i=Object.prototype,n=i.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},s=o.iterator||"@@iterator",x=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function c(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,r){return e[t]=r}}function f(e,t,r,i){var n=t&&t.prototype instanceof g?t:g,o=Object.create(n.prototype),s=new I(i||[]);return a(o,"_invoke",{value:T(e,r,s)}),o}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}r.wrap=f;var u="suspendedStart",d="suspendedYield",_="executing",p="completed",m={};function g(){}function y(){}function b(){}var v={};c(v,s,(function(){return this}));var P=Object.getPrototypeOf,S=P&&P(P(w([])));S&&S!==i&&n.call(S,s)&&(v=S);var R=b.prototype=g.prototype=Object.create(v);function C(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function r(i,a,o,s){var x=h(e[i],e,a);if("throw"!==x.type){var l=x.arg,c=l.value;return c&&"object"==typeof c&&n.call(c,"__await")?t.resolve(c.__await).then((function(e){r("next",e,o,s)}),(function(e){r("throw",e,o,s)})):t.resolve(c).then((function(e){l.value=e,o(l)}),(function(e){return r("throw",e,o,s)}))}s(x.arg)}var i;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,i){r(e,n,t,i)}))}return i=i?i.then(a,a):a()}})}function T(t,r,i){var n=u;return function(a,o){if(n===_)throw new Error("Generator is already running");if(n===p){if("throw"===a)throw o;return{value:e,done:!0}}for(i.method=a,i.arg=o;;){var s=i.delegate;if(s){var x=F(s,i);if(x){if(x===m)continue;return x}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===u)throw n=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=_;var l=h(t,r,i);if("normal"===l.type){if(n=i.done?p:d,l.arg===m)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n=p,i.method="throw",i.arg=l.arg)}}}function F(t,r){var i=r.method,n=t.iterator[i];if(n===e)return r.delegate=null,"throw"===i&&t.iterator.return&&(r.method="return",r.arg=e,F(t,r),"throw"===r.method)||"return"!==i&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+i+"' method")),m;var a=h(n,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,m;var o=a.arg;return o?o.done?(r[t.resultName]=o.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):o:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function D(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function M(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(D,this),this.reset(!0)}function w(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function r(){for(;++i<t.length;)if(n.call(t,i))return r.value=t[i],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(typeof t+" is not iterable")}return y.prototype=b,a(R,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:y,configurable:!0}),y.displayName=c(b,l,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c(e,l,"GeneratorFunction")),e.prototype=Object.create(R),e},r.awrap=function(e){return{__await:e}},C(E.prototype),c(E.prototype,x,(function(){return this})),r.AsyncIterator=E,r.async=function(e,t,i,n,a){void 0===a&&(a=Promise);var o=new E(f(e,t,i,n),a);return r.isGeneratorFunction(t)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},C(R),c(R,l,"Generator"),c(R,s,(function(){return this})),c(R,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var i in t)r.push(i);return r.reverse(),function e(){for(;r.length;){var i=r.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},r.values=w,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(M),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function i(i,n){return s.type="throw",s.arg=t,r.next=i,n&&(r.method="next",r.arg=e),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var x=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(x&&l){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(x){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),M(r),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;M(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,i){return this.delegate={iterator:w(t),resultName:r,nextLoc:i},"next"===this.method&&(this.arg=e),m}},r}function r(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,t||"default");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,r(n.key),n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a,o,s=[],x=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;x=!1}else for(;!(x=(i=a.call(r)).done)&&(s.push(i.value),s.length!==t);x=!0);}catch(e){l=!0,n=e}finally{try{if(!x&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw n}}return s}}(e,t)||c(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}e(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}body,html{margin:0;padding:0}.ezui-rec-theme{--ezui-font-size:14px;--ezui-color:#fff;--ezui-background-color:#000;--ezui-active-color:#1890ff;--ezui-disable-color:gray;--ezui-button-color:var(--ezui-color,#fff);--ezui-button-border-color:var(--ezui-color,#fff);--ezui-footer-height:48px;--ezui-footer-icon-size:27px;--ezui-footer-color:var(--ezui-color,#fff);--ezui-footer-background-color:rgba(0,0,0,.5);--ezui-footer-active-color:var(--ezui-active-color,#1890ff);--ezui-header-height:var(--ezui-footer-height,48px);--ezui-header-icon-size:27px;--ezui-header-color:var(--ezui-footer-color);--ezui-header-background-color:#000;--ezui-header-active-color:var(--ezui-footer-active-color,#1890ff);--ezui-date-picker-header-height:34px;--ezui-date-picker-color:#595959;--ezui-date-picker-primary-color:#1890ff;--ezui-date-picker-font-size:14px;--ezui-date-picker-border-color:rgba(5,5,5,.06);--ezui-date-picker-disable-border-color:rgba(0,0,0,.2);--ezui-data-picker-scrollbar-width:8px;--ezui-data-picker-border-radius:2px}.ezui-theme-mobile{--ezui-footer-height:32px;--ezui-footer-icon-size:20px;--ezui-font-size:14px;--ezui-header-height:var(--ezui-footer-height)}.ezui-hidden{display:none!important}.ezui-active{color:var(--ezui-active-color,#1890ff)!important}.ezui-disable{color:gray!important;cursor:not-allowed!important}.ezui-btn{background-image:none;border:1px solid #fff;border-radius:4px;cursor:pointer;display:inline-block;font-weight:400;height:24px;line-height:24px;outline:none;padding:0 7px;position:relative;text-align:center;touch-action:manipulation;transition:all 2s cubic-bezier(.645,.045,.355,1);-webkit-user-select:none;-moz-user-select:none;user-select:none;white-space:nowrap}.ezui-btn,.ezui-btn-default{background:transparent;color:#fff}.ezui-btn-default{border-color:#fff;box-shadow:none}.ezui-btn-primary{background:#1890ff;border-color:#1890ff;box-shadow:none;color:#fff}");
/*
  *
  * @ezuikit/utils-logger v1.0.1
  * Copyright (c) 2024-3-23 Ezviz-OpenBiz
  * Released under MIT the License.
  *
  */
var h={info:"",log:"background: #4096ff; color: #FFF;",warn:"background: yellow; color: #FFF;",error:"background: red; color: #FFF;"},u=function(){function e(e){void 0===e&&(e={}),this._options={level:"INFO",showTime:!1},this._levelNum=3,this.info=this._loggerFactory("info",this._levelNum>=3),this.log=this._loggerFactory("log",this._levelNum>=2),this.warn=this._loggerFactory("warn",this._levelNum>=1),this.error=this._loggerFactory("error",this._levelNum>=0),this.setOptions(e)}var t=e.prototype;return t.setOptions=function(e){var t;this._options=Object.assign({},this._options,e),this._levelNum=this._matchLevel(null!=(t=this._options.level)?t:"INFO"),this.info=this._loggerFactory("info",this._levelNum>=3),this.log=this._loggerFactory("log",this._levelNum>=2),this.warn=this._loggerFactory("warn",this._levelNum>=1),this.error=this._loggerFactory("error",this._levelNum>=0)},t._matchLevel=function(e){var t=3;switch(e){case"INFO":t=3;break;case"LOG":t=2;break;case"WARN":t=1;break;case"ERROR":t=0}return t},t._loggerFactory=function(t,r){var i=console[t];if(r&&i){var n,a=this._options.name?"%c["+this._options.name+"]%c %c["+t.toUpperCase()+"]":"%c["+t.toUpperCase()+"]",o=[this._options.name?"background: green;color: #fff":null,this._options.name?"":null,h[t]].filter((function(e){return null!=e}));return(n=i).bind.apply(n,[].concat([console,a],o))}return e.noop},t.getOptions=function(){return this._options},t.getVersion=function(){return"1.0.1"},e}();function d(e){return(e=+e)<10&&(e="0"+e),e+""}u.noop=function(){};var _=["info","log","warn","error"];function p(e){var t=new u(e);return new Proxy(t,{get:function(e,t){if(_.includes(t)){var r;if(null==(r=e._options)?void 0:r.showTime){var i=(a=(n=new Date(Date.now())).getFullYear(),o=n.getMonth()+1,s=n.getDate(),x=n.getHours(),l=n.getMinutes(),c=n.getSeconds(),f=n.getMilliseconds(),a+"/"+d(o)+"/"+d(s)+" "+d(x)+":"+d(l)+":"+d(c)+":"+f);return e[t].bind(console,"["+i+"]")}return e[t].bind(console)}var n,a,o,s,x,l,c,f;return Reflect.get(e,t)}})}
/*
  *
  * @ezuikit/utils-i18n v1.0.1
  * Copyright (c) 2024-3-23 Ezviz-OpenBiz
  * Released under MIT the License.
  *
  */var m="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function g(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var y,b=Array.isArray,P="object"==n(m)&&m&&m.Object===Object&&m,S=P,R="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,C=S||R||Function("return this")(),E=C.Symbol,T=E,F=Object.prototype,D=F.hasOwnProperty,M=F.toString,I=T?T.toStringTag:void 0,w=Object.prototype.toString,A=function(e){var t=D.call(e,I),r=e[I];try{e[I]=void 0;var i=!0}catch(e){}var n=M.call(e);return i&&(t?e[I]=r:delete e[I]),n},k=E?E.toStringTag:void 0,L=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":k&&k in Object(e)?A(e):function(e){return w.call(e)}(e)},B=function(e){return null!=e&&"object"==n(e)},O=L,H=B,N=function(e){return"symbol"==n(e)||H(e)&&"[object Symbol]"==O(e)},V=b,Y=N,U=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,X=/^\w*$/,W=function(e,t){if(V(e))return!1;var r=n(e);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!Y(e))||X.test(e)||!U.test(e)||null!=t&&e in Object(t)},z=function(e){var t=n(e);return null!=e&&("object"==t||"function"==t)},G=L,J=z,Z=function(e){if(!J(e))return!1;var t=G(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},j=C["__core-js_shared__"],q=(y=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+y:"",$=Function.prototype.toString,K=function(e){if(null!=e){try{return $.call(e)}catch(e){}try{return e+""}catch(e){}}return""},Q=Z,ee=function(e){return!!q&&q in e},te=z,re=K,ie=/^\[object .+?Constructor\]$/,ne=Function.prototype,ae=Object.prototype,oe=ne.toString,se=ae.hasOwnProperty,xe=RegExp("^"+oe.call(se).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),le=function(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!te(e)||ee(e))&&(Q(e)?xe:ie).test(re(e))}(r)?r:void 0},ce=le(Object,"create"),fe=ce,he=ce,ue=Object.prototype.hasOwnProperty,de=ce,_e=Object.prototype.hasOwnProperty,pe=ce,me=function(){this.__data__=fe?fe(null):{},this.size=0},ge=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ye=function(e){var t=this.__data__;if(he){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return ue.call(t,e)?t[e]:void 0};function be(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}be.prototype.clear=me,be.prototype.delete=ge,be.prototype.get=ye,be.prototype.has=function(e){var t=this.__data__;return de?void 0!==t[e]:_e.call(t,e)},be.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=pe&&void 0===t?"__lodash_hash_undefined__":t,this};var ve=be,Pe=function(e,t){return e===t||e!=e&&t!=t},Se=Pe,Re=function(e,t){for(var r=e.length;r--;)if(Se(e[r][0],t))return r;return-1},Ce=Re,Ee=Array.prototype.splice,Te=Re,Fe=Re,De=Re,Me=function(){this.__data__=[],this.size=0};function Ie(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Ie.prototype.clear=Me,Ie.prototype.delete=function(e){var t=this.__data__,r=Ce(t,e);return!(r<0||(r==t.length-1?t.pop():Ee.call(t,r,1),--this.size,0))},Ie.prototype.get=function(e){var t=this.__data__,r=Te(t,e);return r<0?void 0:t[r][1]},Ie.prototype.has=function(e){return Fe(this.__data__,e)>-1},Ie.prototype.set=function(e,t){var r=this.__data__,i=De(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this};var we=Ie,Ae=le(C,"Map"),ke=ve,Le=we,Be=Ae,Oe=function(e,t){var r=e.__data__;return function(e){var t=n(e);return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?r["string"==typeof t?"string":"hash"]:r.map},He=Oe,Ne=Oe,Ve=Oe,Ye=Oe;function Ue(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Ue.prototype.clear=function(){this.size=0,this.__data__={hash:new ke,map:new(Be||Le),string:new ke}},Ue.prototype.delete=function(e){var t=He(this,e).delete(e);return this.size-=t?1:0,t},Ue.prototype.get=function(e){return Ne(this,e).get(e)},Ue.prototype.has=function(e){return Ve(this,e).has(e)},Ue.prototype.set=function(e,t){var r=Ye(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this};var Xe=Ue,We=Xe;function ze(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function r(){var i=arguments,n=t?t.apply(this,i):i[0],a=r.cache;if(a.has(n))return a.get(n);var o=e.apply(this,i);return r.cache=a.set(n,o)||a,o};return r.cache=new(ze.Cache||We),r}ze.Cache=We;var Ge=ze,Je=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ze=/\\(\\)?/g,je=function(e){var t=Ge((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Je,(function(e,r,i,n){t.push(i?n.replace(Ze,"$1"):r||e)})),t}),(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}(),qe=function(e,t){for(var r=-1,i=null==e?0:e.length,n=Array(i);++r<i;)n[r]=t(e[r],r,e);return n},$e=qe,Ke=b,Qe=N,et=E?E.prototype:void 0,tt=et?et.toString:void 0,rt=function e(t){if("string"==typeof t)return t;if(Ke(t))return $e(t,e)+"";if(Qe(t))return tt?tt.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},it=function(e){return null==e?"":rt(e)},nt=b,at=W,ot=je,st=it,xt=function(e,t){return nt(e)?e:at(e,t)?[e]:ot(st(e))},lt=N,ct=function(e){if("string"==typeof e||lt(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},ft=xt,ht=ct,ut=function(e,t){for(var r=0,i=(t=ft(t,e)).length;null!=e&&r<i;)e=e[ht(t[r++])];return r&&r==i?e:void 0},dt=ut,_t=function(e,t,r){var i=null==e?void 0:dt(e,t);return void 0===i?r:i},pt=g(_t),mt=Object.prototype.hasOwnProperty,gt=L,yt=B,bt=function(e){return yt(e)&&"[object Arguments]"==gt(e)},vt=B,Pt=Object.prototype,St=Pt.hasOwnProperty,Rt=Pt.propertyIsEnumerable,Ct=bt(function(){return arguments}())?bt:function(e){return vt(e)&&St.call(e,"callee")&&!Rt.call(e,"callee")},Et=/^(?:0|[1-9]\d*)$/,Tt=function(e,t){var r=n(e);return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&Et.test(e))&&e>-1&&e%1==0&&e<t},Ft=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},Dt=xt,Mt=Ct,It=b,wt=Tt,At=Ft,kt=ct,Lt=function(e,t,r){for(var i=-1,n=(t=Dt(t,e)).length,a=!1;++i<n;){var o=kt(t[i]);if(!(a=null!=e&&r(e,o)))break;e=e[o]}return a||++i!=n?a:!!(n=null==e?0:e.length)&&At(n)&&wt(o,n)&&(It(e)||Mt(e))},Bt=function(e,t){return null!=e&&mt.call(e,t)},Ot=Lt,Ht=g((function(e,t){return null!=e&&Ot(e,t,Bt)})),Nt=we,Vt=we,Yt=Ae,Ut=Xe,Xt=we;function Wt(e){var t=this.__data__=new Xt(e);this.size=t.size}Wt.prototype.clear=function(){this.__data__=new Nt,this.size=0},Wt.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Wt.prototype.get=function(e){return this.__data__.get(e)},Wt.prototype.has=function(e){return this.__data__.has(e)},Wt.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Vt){var i=r.__data__;if(!Yt||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Ut(i)}return r.set(e,t),this.size=r.size,this};var zt=Wt,Gt=le,Jt=function(){try{var e=Gt(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Zt=Jt,jt=function(e,t,r){"__proto__"==t&&Zt?Zt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r},qt=jt,$t=Pe,Kt=function(e,t,r){(void 0!==r&&!$t(e[t],r)||void 0===r&&!(t in e))&&qt(e,t,r)},Qt=function(e,t,r){for(var i=-1,n=Object(e),a=r(e),o=a.length;o--;){var s=a[++i];if(!1===t(n[s],s,n))break}return e},er={exports:{}};!function(e,t){var r=C,i=t&&!t.nodeType&&t,n=i&&e&&!e.nodeType&&e,a=n&&n.exports===i?r.Buffer:void 0,o=a?a.allocUnsafe:void 0;e.exports=function(e,t){if(t)return e.slice();var r=e.length,i=o?o(r):new e.constructor(r);return e.copy(i),i}}(er,er.exports);var tr=er.exports,rr=C.Uint8Array,ir=rr,nr=z,ar=Object.create,or=function(){function e(){}return function(t){if(!nr(t))return{};if(ar)return ar(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),sr=function(e,t){return function(r){return e(t(r))}},xr=sr(Object.getPrototypeOf,Object),lr=Object.prototype,cr=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||lr)},fr=or,hr=xr,ur=cr,dr=Z,_r=Ft,pr=function(e){return null!=e&&_r(e.length)&&!dr(e)},mr=pr,gr=B,yr={exports:{}},br=function(){return!1};!function(e,t){var r=C,i=br,n=t&&!t.nodeType&&t,a=n&&e&&!e.nodeType&&e,o=a&&a.exports===n?r.Buffer:void 0,s=(o?o.isBuffer:void 0)||i;e.exports=s}(yr,yr.exports);var vr=yr.exports,Pr=L,Sr=xr,Rr=B,Cr=Function.prototype,Er=Object.prototype,Tr=Cr.toString,Fr=Er.hasOwnProperty,Dr=Tr.call(Object),Mr=L,Ir=Ft,wr=B,Ar={};Ar["[object Float32Array]"]=Ar["[object Float64Array]"]=Ar["[object Int8Array]"]=Ar["[object Int16Array]"]=Ar["[object Int32Array]"]=Ar["[object Uint8Array]"]=Ar["[object Uint8ClampedArray]"]=Ar["[object Uint16Array]"]=Ar["[object Uint32Array]"]=!0,Ar["[object Arguments]"]=Ar["[object Array]"]=Ar["[object ArrayBuffer]"]=Ar["[object Boolean]"]=Ar["[object DataView]"]=Ar["[object Date]"]=Ar["[object Error]"]=Ar["[object Function]"]=Ar["[object Map]"]=Ar["[object Number]"]=Ar["[object Object]"]=Ar["[object RegExp]"]=Ar["[object Set]"]=Ar["[object String]"]=Ar["[object WeakMap]"]=!1;var kr=function(e){return function(t){return e(t)}},Lr={exports:{}};!function(e,t){var r=P,i=t&&!t.nodeType&&t,n=i&&e&&!e.nodeType&&e,a=n&&n.exports===i&&r.process,o=function(){try{return n&&n.require&&n.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=o}(Lr,Lr.exports);var Br=Lr.exports,Or=function(e){return wr(e)&&Ir(e.length)&&!!Ar[Mr(e)]},Hr=kr,Nr=Br&&Br.isTypedArray,Vr=Nr?Hr(Nr):Or,Yr=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},Ur=jt,Xr=Pe,Wr=Object.prototype.hasOwnProperty,zr=function(e,t,r){var i=e[t];Wr.call(e,t)&&Xr(i,r)&&(void 0!==r||t in e)||Ur(e,t,r)},Gr=zr,Jr=jt,Zr=Ct,jr=b,qr=vr,$r=Tt,Kr=Vr,Qr=Object.prototype.hasOwnProperty,ei=function(e,t){var r=jr(e),i=!r&&Zr(e),n=!r&&!i&&qr(e),a=!r&&!i&&!n&&Kr(e),o=r||i||n||a,s=o?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],x=s.length;for(var l in e)!t&&!Qr.call(e,l)||o&&("length"==l||n&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||$r(l,x))||s.push(l);return s},ti=z,ri=cr,ii=Object.prototype.hasOwnProperty,ni=ei,ai=function(e){if(!ti(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=ri(e),r=[];for(var i in e)("constructor"!=i||!t&&ii.call(e,i))&&r.push(i);return r},oi=pr,si=function(e){return oi(e)?ni(e,!0):ai(e)},xi=function(e,t,r,i){var n=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],x=i?i(r[s],e[s],s,r,e):void 0;void 0===x&&(x=e[s]),n?Jr(r,s,x):Gr(r,s,x)}return r},li=si,ci=Kt,fi=tr,hi=function(e,t){var r=t?function(e){var t=new e.constructor(e.byteLength);return new ir(t).set(new ir(e)),t}(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},ui=function(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t},di=function(e){return"function"!=typeof e.constructor||ur(e)?{}:fr(hr(e))},_i=Ct,pi=b,mi=function(e){return gr(e)&&mr(e)},gi=vr,yi=Z,bi=z,vi=function(e){if(!Rr(e)||"[object Object]"!=Pr(e))return!1;var t=Sr(e);if(null===t)return!0;var r=Fr.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Tr.call(r)==Dr},Pi=Vr,Si=Yr,Ri=zt,Ci=Kt,Ei=Qt,Ti=function(e,t,r,i,n,a,o){var s=Si(e,r),x=Si(t,r),l=o.get(x);if(l)ci(e,r,l);else{var c=a?a(s,x,r+"",e,t,o):void 0,f=void 0===c;if(f){var h=pi(x),u=!h&&gi(x),d=!h&&!u&&Pi(x);c=x,h||u||d?pi(s)?c=s:mi(s)?c=ui(s):u?(f=!1,c=fi(x,!0)):d?(f=!1,c=hi(x,!0)):c=[]:vi(x)||_i(x)?(c=s,_i(s)?c=function(e){return xi(e,li(e))}(s):bi(s)&&!yi(s)||(c=di(x))):f=!1}f&&(o.set(x,c),n(c,x,i,a,o),o.delete(x)),ci(e,r,c)}},Fi=z,Di=si,Mi=Yr,Ii=function(e){return e},wi=Math.max,Ai=function(e){return function(){return e}},ki=Jt,Li=ki?function(e,t){return ki(e,"toString",{configurable:!0,enumerable:!1,value:Ai(t),writable:!0})}:Ii,Bi=Date.now,Oi=function(e){var t=0,r=0;return function(){var i=Bi(),n=16-(i-r);if(r=i,n>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(Li),Hi=Ii,Ni=function(e,t,r){return t=wi(void 0===t?e.length-1:t,0),function(){for(var i=arguments,n=-1,a=wi(i.length-t,0),o=Array(a);++n<a;)o[n]=i[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=i[n];return s[t]=r(o),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,s)}},Vi=Oi,Yi=function(e,t){return Vi(Ni(e,t,Hi),e+"")},Ui=Pe,Xi=pr,Wi=Tt,zi=z,Gi=function(e,t,r){if(!zi(r))return!1;var i=n(t);return!!("number"==i?Xi(r)&&Wi(t,r.length):"string"==i&&t in r)&&Ui(r[t],e)},Ji=Yi,Zi=Gi,ji=function e(t,r,i,n,a){t!==r&&Ei(r,(function(o,s){if(a||(a=new Ri),Fi(o))Ti(t,r,s,i,e,n,a);else{var x=n?n(Mi(t,s),o,s+"",t,r,a):void 0;void 0===x&&(x=o),Ci(t,s,x)}}),Di)},qi=g(function(e){return Ji((function(t,r){var i=-1,n=r.length,a=n>1?r[n-1]:void 0,o=n>2?r[2]:void 0;for(a=e.length>3&&"function"==typeof a?(n--,a):void 0,o&&Zi(r[0],r[1],o)&&(a=n<3?void 0:a,n=1),t=Object(t);++i<n;){var s=r[i];s&&e(t,s,i)}return t}))}((function(e,t,r){ji(e,t,r)}))),$i=Xe;function Ki(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new $i;++t<r;)this.add(e[t])}Ki.prototype.add=Ki.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ki.prototype.has=function(e){return this.__data__.has(e)};var Qi=Ki,en=function(e){return e!=e},tn=function(e,t){return e.has(t)},rn=le(C,"Set"),nn=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r},an=rn,on=an&&1/nn(new an([,-0]))[1]==1/0?function(e){return new an(e)}:function(){},sn=Qi,xn=function(e,t){return!(null==e||!e.length)&&function(e,t,r){return t==t?function(e,t,r){for(var i=r-1,n=e.length;++i<n;)if(e[i]===t)return i;return-1}(e,t,r):function(e,t,r,i){for(var n=e.length,a=r+(i?1:-1);i?a--:++a<n;)if(t(e[a],a,e))return a;return-1}(e,en,r)}(e,t,0)>-1},ln=function(e,t,r){for(var i=-1,n=null==e?0:e.length;++i<n;)if(r(t,e[i]))return!0;return!1},cn=tn,fn=on,hn=nn,un=g((function(e){return e&&e.length?function(e,t,r){var i=-1,n=xn,a=e.length,o=!0,s=[],x=s;if(r)o=!1,n=ln;else if(a>=200){var l=t?null:fn(e);if(l)return hn(l);o=!1,n=cn,x=new sn}else x=t?[]:s;e:for(;++i<a;){var c=e[i],f=t?t(c):c;if(c=r||0!==c?c:0,o&&f==f){for(var h=x.length;h--;)if(x[h]===f)continue e;t&&x.push(f),s.push(c)}else n(x,f,r)||(x!==s&&x.push(f),s.push(c))}return s}(e):[]})),dn=function(e,t){var r=[],i=[];return r.push(t),t||r.push(e.locale),e.enableFallback&&r.push(e.defaultLocale),r.filter(Boolean).map((function(e){return e.toString()})).forEach((function(t){if(i.includes(t)||i.push(t),e.enableFallback){var r=t.split("-");3===r.length&&i.push("".concat(r[0],"-").concat(r[1])),i.push(r[0])}})),un(i)},_n=function(){function e(t){a(this,e),this.i18n=t,this.registry={},this.register("default",dn)}return s(e,[{key:"register",value:function(e,t){if("function"!=typeof t){var r=t;t=function(){return r}}this.registry[e]=t}},{key:"get",value:function(e){var t=this.registry[e]||this.registry[this.i18n.locale]||this.registry.default;return"function"==typeof t&&(t=t(this.i18n,e)),t instanceof Array||(t=[t]),t}}]),e}(),pn=function(e){var t=e.pluralizer,r=e.includeZero,i=void 0===r||r,n=e.ordinal,a=void 0!==n&&n;return function(e,r){return[i&&0===r?"zero":"",t(r,a)].filter(Boolean)}}({pluralizer:function(e,t){var r=String(e).split("."),i=!r[1],n=Number(r[0])==e,a=n&&r[0].slice(-1),o=n&&r[0].slice(-2);return t?1==a&&11!=o?"one":2==a&&12!=o?"two":3==a&&13!=o?"few":"other":1==e&&i?"one":"other"},includeZero:!0}),mn=function(){function e(t){a(this,e),this.i18n=t,this.registry={},this.register("default",pn)}return s(e,[{key:"register",value:function(e,t){this.registry[e]=t}},{key:"get",value:function(e){return this.registry[e]||this.registry[this.i18n.locale]||this.registry.default}}]),e}(),gn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),yn=function(e){return gn.test(e)},bn="\\ud800-\\udfff",vn="["+bn+"]",Pn="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Sn="\\ud83c[\\udffb-\\udfff]",Rn="[^"+bn+"]",Cn="(?:\\ud83c[\\udde6-\\uddff]){2}",En="[\\ud800-\\udbff][\\udc00-\\udfff]",Tn="(?:"+Pn+"|"+Sn+")?",Fn="[\\ufe0e\\ufe0f]?",Dn=Fn+Tn+"(?:\\u200d(?:"+[Rn,Cn,En].join("|")+")"+Fn+Tn+")*",Mn="(?:"+[Rn+Pn+"?",Pn,Cn,En,vn].join("|")+")",In=RegExp(Sn+"(?="+Sn+")|"+Mn+Dn,"g"),wn=function(e){return e.split("")},An=yn,kn=function(e,t,r){var i=e.length;return r=void 0===r?i:r,!t&&r>=i?e:function(e,t,r){var i=-1,n=e.length;t<0&&(t=-t>n?0:n+t),(r=r>n?n:r)<0&&(r+=n),n=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(n);++i<n;)a[i]=e[i+t];return a}(e,t,r)},Ln=yn,Bn=function(e){return An(e)?function(e){return e.match(In)||[]}(e):wn(e)},On=it,Hn=function(e){e=On(e);var t=Ln(e)?Bn(e):void 0,r=t?t[0]:e.charAt(0),i=t?kn(t,1).join(""):e.slice(1);return r.toUpperCase()+i},Nn=it,Vn=Hn,Yn=function(e){return function(t){return null==e?void 0:e[t]}}({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Un=it,Xn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Wn=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),zn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Gn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Jn="\\ud800-\\udfff",Zn="\\u2700-\\u27bf",jn="a-z\\xdf-\\xf6\\xf8-\\xff",qn="A-Z\\xc0-\\xd6\\xd8-\\xde",$n="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Kn="["+$n+"]",Qn="\\d+",ea="["+Zn+"]",ta="["+jn+"]",ra="[^"+Jn+$n+Qn+Zn+jn+qn+"]",ia="(?:\\ud83c[\\udde6-\\uddff]){2}",na="[\\ud800-\\udbff][\\udc00-\\udfff]",aa="["+qn+"]",oa="(?:"+ta+"|"+ra+")",sa="(?:"+aa+"|"+ra+")",xa="(?:['’](?:d|ll|m|re|s|t|ve))?",la="(?:['’](?:D|LL|M|RE|S|T|VE))?",ca="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",fa="[\\ufe0e\\ufe0f]?",ha=fa+ca+"(?:\\u200d(?:"+["[^"+Jn+"]",ia,na].join("|")+")"+fa+ca+")*",ua="(?:"+[ea,ia,na].join("|")+")"+ha,da=RegExp([aa+"?"+ta+"+"+xa+"(?="+[Kn,aa,"$"].join("|")+")",sa+"+"+la+"(?="+[Kn,aa+oa,"$"].join("|")+")",aa+"?"+oa+"+"+xa,aa+"+"+la,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Qn,ua].join("|"),"g"),_a=function(e){return e.match(zn)||[]},pa=function(e){return Gn.test(e)},ma=it,ga=function(e,t,r,i){var n=-1,a=null==e?0:e.length;for(i&&a&&(r=e[++n]);++n<a;)r=t(r,e[n],n,e);return r},ya=function(e){return(e=Un(e))&&e.replace(Xn,Yn).replace(Wn,"")},ba=function(e,t,r){return e=ma(e),void 0===(t=r?void 0:t)?pa(e)?function(e){return e.match(da)||[]}(e):_a(e):e.match(t)||[]},va=RegExp("['’]","g"),Pa=function(e){return Vn(Nn(e).toLowerCase())},Sa=g(function(e){return function(t){return ga(ba(ya(t).replace(va,"")),e,"")}}((function(e,t,r){return t=t.toLowerCase(),e+(r?Pa(t):t)})));function Ra(e){return e?Object.keys(e).reduce((function(t,r){return t[Sa(r)]=e[r],t}),{}):{}}function Ca(e){return null!=e}
/*
   *      bignumber.js v9.1.2
   *      A JavaScript library for arbitrary-precision arithmetic.
   *      https://github.com/MikeMcl/bignumber.js
   *      Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
   *      MIT Licensed.
   *
   *      BigNumber.prototype methods     |  BigNumber methods
   *                                      |
   *      absoluteValue            abs    |  clone
   *      comparedTo                      |  config               set
   *      decimalPlaces            dp     |      DECIMAL_PLACES
   *      dividedBy                div    |      ROUNDING_MODE
   *      dividedToIntegerBy       idiv   |      EXPONENTIAL_AT
   *      exponentiatedBy          pow    |      RANGE
   *      integerValue                    |      CRYPTO
   *      isEqualTo                eq     |      MODULO_MODE
   *      isFinite                        |      POW_PRECISION
   *      isGreaterThan            gt     |      FORMAT
   *      isGreaterThanOrEqualTo   gte    |      ALPHABET
   *      isInteger                       |  isBigNumber
   *      isLessThan               lt     |  maximum              max
   *      isLessThanOrEqualTo      lte    |  minimum              min
   *      isNaN                           |  random
   *      isNegative                      |  sum
   *      isPositive                      |
   *      isZero                          |
   *      minus                           |
   *      modulo                   mod    |
   *      multipliedBy             times  |
   *      negated                         |
   *      plus                            |
   *      precision                sd     |
   *      shiftedBy                       |
   *      squareRoot               sqrt   |
   *      toExponential                   |
   *      toFixed                         |
   *      toFormat                        |
   *      toFraction                      |
   *      toJSON                          |
   *      toNumber                        |
   *      toPrecision                     |
   *      toString                        |
   *      valueOf                         |
   *
   */var Ea=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,Ta=Math.ceil,Fa=Math.floor,Da="[BigNumber Error] ",Ma=Da+"Number primitive has more than 15 significant digits: ",Ia=1e14,wa=14,Aa=9007199254740991,ka=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],La=1e7,Ba=1e9;function Oa(e){var t=0|e;return e>0||e===t?t:t-1}function Ha(e){for(var t,r,i=1,n=e.length,a=e[0]+"";i<n;){for(t=e[i++]+"",r=wa-t.length;r--;t="0"+t);a+=t}for(n=a.length;48===a.charCodeAt(--n););return a.slice(0,n+1||1)}function Na(e,t){var r,i,n=e.c,a=t.c,o=e.s,s=t.s,x=e.e,l=t.e;if(!o||!s)return null;if(r=n&&!n[0],i=a&&!a[0],r||i)return r?i?0:-s:o;if(o!=s)return o;if(r=o<0,i=x==l,!n||!a)return i?0:!n^r?1:-1;if(!i)return x>l^r?1:-1;for(s=(x=n.length)<(l=a.length)?x:l,o=0;o<s;o++)if(n[o]!=a[o])return n[o]>a[o]^r?1:-1;return x==l?0:x>l^r?1:-1}function Va(e,t,r,i){if(e<t||e>r||e!==Fa(e))throw Error(Da+(i||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function Ya(e){var t=e.c.length-1;return Oa(e.e/wa)==t&&e.c[t]%2!=0}function Ua(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function Xa(e,t,r){var i,n;if(t<0){for(n=r+".";++t;n+=r);e=n+e}else if(++t>(i=e.length)){for(n=r,t-=i;--t;n+=r);e+=n}else t<i&&(e=e.slice(0,t)+"."+e.slice(t));return e}var Wa,za=function e(t){var r,i,a,o,s,x,l,c,f,h,u=T.prototype={constructor:T,toString:null,valueOf:null},d=new T(1),_=20,p=4,m=-7,g=21,y=-1e7,b=1e7,v=!1,P=1,S=0,R={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},C="0123456789abcdefghijklmnopqrstuvwxyz",E=!0;function T(e,t){var r,n,o,s,x,l,c,f,h=this;if(!(h instanceof T))return new T(e,t);if(null==t){if(e&&!0===e._isBigNumber)return h.s=e.s,void(!e.c||e.e>b?h.c=h.e=null:e.e<y?h.c=[h.e=0]:(h.e=e.e,h.c=e.c.slice()));if((l="number"==typeof e)&&0*e==0){if(h.s=1/e<0?(e=-e,-1):1,e===~~e){for(s=0,x=e;x>=10;x/=10,s++);return void(s>b?h.c=h.e=null:(h.e=s,h.c=[e]))}f=String(e)}else{if(!Ea.test(f=String(e)))return a(h,f,l);h.s=45==f.charCodeAt(0)?(f=f.slice(1),-1):1}(s=f.indexOf("."))>-1&&(f=f.replace(".","")),(x=f.search(/e/i))>0?(s<0&&(s=x),s+=+f.slice(x+1),f=f.substring(0,x)):s<0&&(s=f.length)}else{if(Va(t,2,C.length,"Base"),10==t&&E)return I(h=new T(e),_+h.e+1,p);if(f=String(e),l="number"==typeof e){if(0*e!=0)return a(h,f,l,t);if(h.s=1/e<0?(f=f.slice(1),-1):1,T.DEBUG&&f.replace(/^0\.0*|\./,"").length>15)throw Error(Ma+e)}else h.s=45===f.charCodeAt(0)?(f=f.slice(1),-1):1;for(r=C.slice(0,t),s=x=0,c=f.length;x<c;x++)if(r.indexOf(n=f.charAt(x))<0){if("."==n){if(x>s){s=c;continue}}else if(!o&&(f==f.toUpperCase()&&(f=f.toLowerCase())||f==f.toLowerCase()&&(f=f.toUpperCase()))){o=!0,x=-1,s=0;continue}return a(h,String(e),l,t)}l=!1,(s=(f=i(f,t,10,h.s)).indexOf("."))>-1?f=f.replace(".",""):s=f.length}for(x=0;48===f.charCodeAt(x);x++);for(c=f.length;48===f.charCodeAt(--c););if(f=f.slice(x,++c)){if(c-=x,l&&T.DEBUG&&c>15&&(e>Aa||e!==Fa(e)))throw Error(Ma+h.s*e);if((s=s-x-1)>b)h.c=h.e=null;else if(s<y)h.c=[h.e=0];else{if(h.e=s,h.c=[],x=(s+1)%wa,s<0&&(x+=wa),x<c){for(x&&h.c.push(+f.slice(0,x)),c-=wa;x<c;)h.c.push(+f.slice(x,x+=wa));x=wa-(f=f.slice(x)).length}else x-=c;for(;x--;f+="0");h.c.push(+f)}}else h.c=[h.e=0]}function F(e,t,r,i){var n,a,o,s,x;if(null==r?r=p:Va(r,0,8),!e.c)return e.toString();if(n=e.c[0],o=e.e,null==t)x=Ha(e.c),x=1==i||2==i&&(o<=m||o>=g)?Ua(x,o):Xa(x,o,"0");else if(a=(e=I(new T(e),t,r)).e,s=(x=Ha(e.c)).length,1==i||2==i&&(t<=a||a<=m)){for(;s<t;x+="0",s++);x=Ua(x,a)}else if(t-=o,x=Xa(x,a,"0"),a+1>s){if(--t>0)for(x+=".";t--;x+="0");}else if((t+=a-s)>0)for(a+1==s&&(x+=".");t--;x+="0");return e.s<0&&n?"-"+x:x}function D(e,t){for(var r,i,n=1,a=new T(e[0]);n<e.length;n++)(!(i=new T(e[n])).s||(r=Na(a,i))===t||0===r&&a.s===t)&&(a=i);return a}function M(e,t,r){for(var i=1,n=t.length;!t[--n];t.pop());for(n=t[0];n>=10;n/=10,i++);return(r=i+r*wa-1)>b?e.c=e.e=null:r<y?e.c=[e.e=0]:(e.e=r,e.c=t),e}function I(e,t,r,i){var n,a,o,s,x,l,c,f=e.c,h=ka;if(f){e:{for(n=1,s=f[0];s>=10;s/=10,n++);if((a=t-n)<0)a+=wa,o=t,x=f[l=0],c=Fa(x/h[n-o-1]%10);else if((l=Ta((a+1)/wa))>=f.length){if(!i)break e;for(;f.length<=l;f.push(0));x=c=0,n=1,o=(a%=wa)-wa+1}else{for(x=s=f[l],n=1;s>=10;s/=10,n++);c=(o=(a%=wa)-wa+n)<0?0:Fa(x/h[n-o-1]%10)}if(i=i||t<0||null!=f[l+1]||(o<0?x:x%h[n-o-1]),i=r<4?(c||i)&&(0==r||r==(e.s<0?3:2)):c>5||5==c&&(4==r||i||6==r&&(a>0?o>0?x/h[n-o]:0:f[l-1])%10&1||r==(e.s<0?8:7)),t<1||!f[0])return f.length=0,i?(t-=e.e+1,f[0]=h[(wa-t%wa)%wa],e.e=-t||0):f[0]=e.e=0,e;if(0==a?(f.length=l,s=1,l--):(f.length=l+1,s=h[wa-a],f[l]=o>0?Fa(x/h[n-o]%h[o])*s:0),i)for(;;){if(0==l){for(a=1,o=f[0];o>=10;o/=10,a++);for(o=f[0]+=s,s=1;o>=10;o/=10,s++);a!=s&&(e.e++,f[0]==Ia&&(f[0]=1));break}if(f[l]+=s,f[l]!=Ia)break;f[l--]=0,s=1}for(a=f.length;0===f[--a];f.pop());}e.e>b?e.c=e.e=null:e.e<y&&(e.c=[e.e=0])}return e}function w(e){var t,r=e.e;return null===r?e.toString():(t=Ha(e.c),t=r<=m||r>=g?Ua(t,r):Xa(t,r,"0"),e.s<0?"-"+t:t)}return T.clone=e,T.ROUND_UP=0,T.ROUND_DOWN=1,T.ROUND_CEIL=2,T.ROUND_FLOOR=3,T.ROUND_HALF_UP=4,T.ROUND_HALF_DOWN=5,T.ROUND_HALF_EVEN=6,T.ROUND_HALF_CEIL=7,T.ROUND_HALF_FLOOR=8,T.EUCLID=9,T.config=T.set=function(e){var t,r;if(null!=e){if("object"!=n(e))throw Error(Da+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(Va(r=e[t],0,Ba,t),_=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(Va(r=e[t],0,8,t),p=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(Va(r[0],-Ba,0,t),Va(r[1],0,Ba,t),m=r[0],g=r[1]):(Va(r,-Ba,Ba,t),m=-(g=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)Va(r[0],-Ba,-1,t),Va(r[1],1,Ba,t),y=r[0],b=r[1];else{if(Va(r,-Ba,Ba,t),!r)throw Error(Da+t+" cannot be zero: "+r);y=-(b=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(Da+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw v=!r,Error(Da+"crypto unavailable");v=r}else v=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(Va(r=e[t],0,9,t),P=r),e.hasOwnProperty(t="POW_PRECISION")&&(Va(r=e[t],0,Ba,t),S=r),e.hasOwnProperty(t="FORMAT")){if("object"!=n(r=e[t]))throw Error(Da+t+" not an object: "+r);R=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(Da+t+" invalid: "+r);E="0123456789"==r.slice(0,10),C=r}}return{DECIMAL_PLACES:_,ROUNDING_MODE:p,EXPONENTIAL_AT:[m,g],RANGE:[y,b],CRYPTO:v,MODULO_MODE:P,POW_PRECISION:S,FORMAT:R,ALPHABET:C}},T.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!T.DEBUG)return!0;var t,r,i=e.c,n=e.e,a=e.s;e:if("[object Array]"=={}.toString.call(i)){if((1===a||-1===a)&&n>=-Ba&&n<=Ba&&n===Fa(n)){if(0===i[0]){if(0===n&&1===i.length)return!0;break e}if((t=(n+1)%wa)<1&&(t+=wa),String(i[0]).length==t){for(t=0;t<i.length;t++)if((r=i[t])<0||r>=Ia||r!==Fa(r))break e;if(0!==r)return!0}}}else if(null===i&&null===n&&(null===a||1===a||-1===a))return!0;throw Error(Da+"Invalid BigNumber: "+e)},T.maximum=T.max=function(){return D(arguments,-1)},T.minimum=T.min=function(){return D(arguments,1)},T.random=(o=9007199254740992,s=Math.random()*o&2097151?function(){return Fa(Math.random()*o)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,i,n,a,o=0,x=[],l=new T(d);if(null==e?e=_:Va(e,0,Ba),n=Ta(e/wa),v)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(n*=2));o<n;)(a=131072*t[o]+(t[o+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[o]=r[0],t[o+1]=r[1]):(x.push(a%1e14),o+=2);o=n/2}else{if(!crypto.randomBytes)throw v=!1,Error(Da+"crypto unavailable");for(t=crypto.randomBytes(n*=7);o<n;)(a=281474976710656*(31&t[o])+1099511627776*t[o+1]+4294967296*t[o+2]+16777216*t[o+3]+(t[o+4]<<16)+(t[o+5]<<8)+t[o+6])>=9e15?crypto.randomBytes(7).copy(t,o):(x.push(a%1e14),o+=7);o=n/7}if(!v)for(;o<n;)(a=s())<9e15&&(x[o++]=a%1e14);for(n=x[--o],e%=wa,n&&e&&(a=ka[wa-e],x[o]=Fa(n/a)*a);0===x[o];x.pop(),o--);if(o<0)x=[i=0];else{for(i=-1;0===x[0];x.splice(0,1),i-=wa);for(o=1,a=x[0];a>=10;a/=10,o++);o<wa&&(i-=wa-o)}return l.e=i,l.c=x,l}),T.sum=function(){for(var e=1,t=arguments,r=new T(t[0]);e<t.length;)r=r.plus(t[e++]);return r},i=function(){var e="0123456789";function t(e,t,r,i){for(var n,a,o=[0],s=0,x=e.length;s<x;){for(a=o.length;a--;o[a]*=t);for(o[0]+=i.indexOf(e.charAt(s++)),n=0;n<o.length;n++)o[n]>r-1&&(null==o[n+1]&&(o[n+1]=0),o[n+1]+=o[n]/r|0,o[n]%=r)}return o.reverse()}return function(i,n,a,o,s){var x,l,c,f,h,u,d,m,g=i.indexOf("."),y=_,b=p;for(g>=0&&(f=S,S=0,i=i.replace(".",""),u=(m=new T(n)).pow(i.length-g),S=f,m.c=t(Xa(Ha(u.c),u.e,"0"),10,a,e),m.e=m.c.length),c=f=(d=t(i,n,a,s?(x=C,e):(x=e,C))).length;0==d[--f];d.pop());if(!d[0])return x.charAt(0);if(g<0?--c:(u.c=d,u.e=c,u.s=o,d=(u=r(u,m,y,b,a)).c,h=u.r,c=u.e),g=d[l=c+y+1],f=a/2,h=h||l<0||null!=d[l+1],h=b<4?(null!=g||h)&&(0==b||b==(u.s<0?3:2)):g>f||g==f&&(4==b||h||6==b&&1&d[l-1]||b==(u.s<0?8:7)),l<1||!d[0])i=h?Xa(x.charAt(1),-y,x.charAt(0)):x.charAt(0);else{if(d.length=l,h)for(--a;++d[--l]>a;)d[l]=0,l||(++c,d=[1].concat(d));for(f=d.length;!d[--f];);for(g=0,i="";g<=f;i+=x.charAt(d[g++]));i=Xa(i,c,x.charAt(0))}return i}}(),r=function(){function e(e,t,r){var i,n,a,o,s=0,x=e.length,l=t%La,c=t/La|0;for(e=e.slice();x--;)s=((n=l*(a=e[x]%La)+(i=c*a+(o=e[x]/La|0)*l)%La*La+s)/r|0)+(i/La|0)+c*o,e[x]=n%r;return s&&(e=[s].concat(e)),e}function t(e,t,r,i){var n,a;if(r!=i)a=r>i?1:-1;else for(n=a=0;n<r;n++)if(e[n]!=t[n]){a=e[n]>t[n]?1:-1;break}return a}function r(e,t,r,i){for(var n=0;r--;)e[r]-=n,n=e[r]<t[r]?1:0,e[r]=n*i+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(i,n,a,o,s){var x,l,c,f,h,u,d,_,p,m,g,y,b,v,P,S,R,C=i.s==n.s?1:-1,E=i.c,F=n.c;if(!(E&&E[0]&&F&&F[0]))return new T(i.s&&n.s&&(E?!F||E[0]!=F[0]:F)?E&&0==E[0]||!F?0*C:C/0:NaN);for(p=(_=new T(C)).c=[],C=a+(l=i.e-n.e)+1,s||(s=Ia,l=Oa(i.e/wa)-Oa(n.e/wa),C=C/wa|0),c=0;F[c]==(E[c]||0);c++);if(F[c]>(E[c]||0)&&l--,C<0)p.push(1),f=!0;else{for(v=E.length,S=F.length,c=0,C+=2,(h=Fa(s/(F[0]+1)))>1&&(F=e(F,h,s),E=e(E,h,s),S=F.length,v=E.length),b=S,g=(m=E.slice(0,S)).length;g<S;m[g++]=0);R=F.slice(),R=[0].concat(R),P=F[0],F[1]>=s/2&&P++;do{if(h=0,(x=t(F,m,S,g))<0){if(y=m[0],S!=g&&(y=y*s+(m[1]||0)),(h=Fa(y/P))>1)for(h>=s&&(h=s-1),d=(u=e(F,h,s)).length,g=m.length;1==t(u,m,d,g);)h--,r(u,S<d?R:F,d,s),d=u.length,x=1;else 0==h&&(x=h=1),d=(u=F.slice()).length;if(d<g&&(u=[0].concat(u)),r(m,u,g,s),g=m.length,-1==x)for(;t(F,m,S,g)<1;)h++,r(m,S<g?R:F,g,s),g=m.length}else 0===x&&(h++,m=[0]);p[c++]=h,m[0]?m[g++]=E[b]||0:(m=[E[b]],g=1)}while((b++<v||null!=m[0])&&C--);f=null!=m[0],p[0]||p.splice(0,1)}if(s==Ia){for(c=1,C=p[0];C>=10;C/=10,c++);I(_,a+(_.e=c+l*wa-1)+1,o,f)}else _.e=l,_.r=+f;return _}}(),x=/^(-?)0([xbo])(?=\w[\w.]*$)/i,l=/^([^.]+)\.$/,c=/^\.([^.]+)$/,f=/^-?(Infinity|NaN)$/,h=/^\s*\+(?=[\w.])|^\s+|\s+$/g,a=function(e,t,r,i){var n,a=r?t:t.replace(h,"");if(f.test(a))e.s=isNaN(a)?null:a<0?-1:1;else{if(!r&&(a=a.replace(x,(function(e,t,r){return n="x"==(r=r.toLowerCase())?16:"b"==r?2:8,i&&i!=n?e:t})),i&&(n=i,a=a.replace(l,"$1").replace(c,"0.$1")),t!=a))return new T(a,n);if(T.DEBUG)throw Error(Da+"Not a"+(i?" base "+i:"")+" number: "+t);e.s=null}e.c=e.e=null},u.absoluteValue=u.abs=function(){var e=new T(this);return e.s<0&&(e.s=1),e},u.comparedTo=function(e,t){return Na(this,new T(e,t))},u.decimalPlaces=u.dp=function(e,t){var r,i,n,a=this;if(null!=e)return Va(e,0,Ba),null==t?t=p:Va(t,0,8),I(new T(a),e+a.e+1,t);if(!(r=a.c))return null;if(i=((n=r.length-1)-Oa(this.e/wa))*wa,n=r[n])for(;n%10==0;n/=10,i--);return i<0&&(i=0),i},u.dividedBy=u.div=function(e,t){return r(this,new T(e,t),_,p)},u.dividedToIntegerBy=u.idiv=function(e,t){return r(this,new T(e,t),0,1)},u.exponentiatedBy=u.pow=function(e,t){var r,i,n,a,o,s,x,l,c=this;if((e=new T(e)).c&&!e.isInteger())throw Error(Da+"Exponent not an integer: "+w(e));if(null!=t&&(t=new T(t)),o=e.e>14,!c.c||!c.c[0]||1==c.c[0]&&!c.e&&1==c.c.length||!e.c||!e.c[0])return l=new T(Math.pow(+w(c),o?e.s*(2-Ya(e)):+w(e))),t?l.mod(t):l;if(s=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new T(NaN);(i=!s&&c.isInteger()&&t.isInteger())&&(c=c.mod(t))}else{if(e.e>9&&(c.e>0||c.e<-1||(0==c.e?c.c[0]>1||o&&c.c[1]>=24e7:c.c[0]<8e13||o&&c.c[0]<=9999975e7)))return a=c.s<0&&Ya(e)?-0:0,c.e>-1&&(a=1/a),new T(s?1/a:a);S&&(a=Ta(S/wa+2))}for(o?(r=new T(.5),s&&(e.s=1),x=Ya(e)):x=(n=Math.abs(+w(e)))%2,l=new T(d);;){if(x){if(!(l=l.times(c)).c)break;a?l.c.length>a&&(l.c.length=a):i&&(l=l.mod(t))}if(n){if(0===(n=Fa(n/2)))break;x=n%2}else if(I(e=e.times(r),e.e+1,1),e.e>14)x=Ya(e);else{if(0==(n=+w(e)))break;x=n%2}c=c.times(c),a?c.c&&c.c.length>a&&(c.c.length=a):i&&(c=c.mod(t))}return i?l:(s&&(l=d.div(l)),t?l.mod(t):a?I(l,S,p,void 0):l)},u.integerValue=function(e){var t=new T(this);return null==e?e=p:Va(e,0,8),I(t,t.e+1,e)},u.isEqualTo=u.eq=function(e,t){return 0===Na(this,new T(e,t))},u.isFinite=function(){return!!this.c},u.isGreaterThan=u.gt=function(e,t){return Na(this,new T(e,t))>0},u.isGreaterThanOrEqualTo=u.gte=function(e,t){return 1===(t=Na(this,new T(e,t)))||0===t},u.isInteger=function(){return!!this.c&&Oa(this.e/wa)>this.c.length-2},u.isLessThan=u.lt=function(e,t){return Na(this,new T(e,t))<0},u.isLessThanOrEqualTo=u.lte=function(e,t){return-1===(t=Na(this,new T(e,t)))||0===t},u.isNaN=function(){return!this.s},u.isNegative=function(){return this.s<0},u.isPositive=function(){return this.s>0},u.isZero=function(){return!!this.c&&0==this.c[0]},u.minus=function(e,t){var r,i,n,a,o=this,s=o.s;if(t=(e=new T(e,t)).s,!s||!t)return new T(NaN);if(s!=t)return e.s=-t,o.plus(e);var x=o.e/wa,l=e.e/wa,c=o.c,f=e.c;if(!x||!l){if(!c||!f)return c?(e.s=-t,e):new T(f?o:NaN);if(!c[0]||!f[0])return f[0]?(e.s=-t,e):new T(c[0]?o:3==p?-0:0)}if(x=Oa(x),l=Oa(l),c=c.slice(),s=x-l){for((a=s<0)?(s=-s,n=c):(l=x,n=f),n.reverse(),t=s;t--;n.push(0));n.reverse()}else for(i=(a=(s=c.length)<(t=f.length))?s:t,s=t=0;t<i;t++)if(c[t]!=f[t]){a=c[t]<f[t];break}if(a&&(n=c,c=f,f=n,e.s=-e.s),(t=(i=f.length)-(r=c.length))>0)for(;t--;c[r++]=0);for(t=Ia-1;i>s;){if(c[--i]<f[i]){for(r=i;r&&!c[--r];c[r]=t);--c[r],c[i]+=Ia}c[i]-=f[i]}for(;0==c[0];c.splice(0,1),--l);return c[0]?M(e,c,l):(e.s=3==p?-1:1,e.c=[e.e=0],e)},u.modulo=u.mod=function(e,t){var i,n,a=this;return e=new T(e,t),!a.c||!e.s||e.c&&!e.c[0]?new T(NaN):!e.c||a.c&&!a.c[0]?new T(a):(9==P?(n=e.s,e.s=1,i=r(a,e,0,3),e.s=n,i.s*=n):i=r(a,e,0,P),(e=a.minus(i.times(e))).c[0]||1!=P||(e.s=a.s),e)},u.multipliedBy=u.times=function(e,t){var r,i,n,a,o,s,x,l,c,f,h,u,d,_,p,m=this,g=m.c,y=(e=new T(e,t)).c;if(!(g&&y&&g[0]&&y[0]))return!m.s||!e.s||g&&!g[0]&&!y||y&&!y[0]&&!g?e.c=e.e=e.s=null:(e.s*=m.s,g&&y?(e.c=[0],e.e=0):e.c=e.e=null),e;for(i=Oa(m.e/wa)+Oa(e.e/wa),e.s*=m.s,(x=g.length)<(f=y.length)&&(d=g,g=y,y=d,n=x,x=f,f=n),n=x+f,d=[];n--;d.push(0));for(_=Ia,p=La,n=f;--n>=0;){for(r=0,h=y[n]%p,u=y[n]/p|0,a=n+(o=x);a>n;)r=((l=h*(l=g[--o]%p)+(s=u*l+(c=g[o]/p|0)*h)%p*p+d[a]+r)/_|0)+(s/p|0)+u*c,d[a--]=l%_;d[a]=r}return r?++i:d.splice(0,1),M(e,d,i)},u.negated=function(){var e=new T(this);return e.s=-e.s||null,e},u.plus=function(e,t){var r,i=this,n=i.s;if(t=(e=new T(e,t)).s,!n||!t)return new T(NaN);if(n!=t)return e.s=-t,i.minus(e);var a=i.e/wa,o=e.e/wa,s=i.c,x=e.c;if(!a||!o){if(!s||!x)return new T(n/0);if(!s[0]||!x[0])return x[0]?e:new T(s[0]?i:0*n)}if(a=Oa(a),o=Oa(o),s=s.slice(),n=a-o){for(n>0?(o=a,r=x):(n=-n,r=s),r.reverse();n--;r.push(0));r.reverse()}for((n=s.length)-(t=x.length)<0&&(r=x,x=s,s=r,t=n),n=0;t;)n=(s[--t]=s[t]+x[t]+n)/Ia|0,s[t]=Ia===s[t]?0:s[t]%Ia;return n&&(s=[n].concat(s),++o),M(e,s,o)},u.precision=u.sd=function(e,t){var r,i,n,a=this;if(null!=e&&e!==!!e)return Va(e,1,Ba),null==t?t=p:Va(t,0,8),I(new T(a),e,t);if(!(r=a.c))return null;if(i=(n=r.length-1)*wa+1,n=r[n]){for(;n%10==0;n/=10,i--);for(n=r[0];n>=10;n/=10,i++);}return e&&a.e+1>i&&(i=a.e+1),i},u.shiftedBy=function(e){return Va(e,-9007199254740991,Aa),this.times("1e"+e)},u.squareRoot=u.sqrt=function(){var e,t,i,n,a,o=this,s=o.c,x=o.s,l=o.e,c=_+4,f=new T("0.5");if(1!==x||!s||!s[0])return new T(!x||x<0&&(!s||s[0])?NaN:s?o:1/0);if(0==(x=Math.sqrt(+w(o)))||x==1/0?(((t=Ha(s)).length+l)%2==0&&(t+="0"),x=Math.sqrt(+t),l=Oa((l+1)/2)-(l<0||l%2),i=new T(t=x==1/0?"5e"+l:(t=x.toExponential()).slice(0,t.indexOf("e")+1)+l)):i=new T(x+""),i.c[0])for((x=(l=i.e)+c)<3&&(x=0);;)if(a=i,i=f.times(a.plus(r(o,a,c,1))),Ha(a.c).slice(0,x)===(t=Ha(i.c)).slice(0,x)){if(i.e<l&&--x,"9999"!=(t=t.slice(x-3,x+1))&&(n||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(I(i,i.e+_+2,1),e=!i.times(i).eq(o));break}if(!n&&(I(a,a.e+_+2,0),a.times(a).eq(o))){i=a;break}c+=4,x+=4,n=1}return I(i,i.e+_+1,p,e)},u.toExponential=function(e,t){return null!=e&&(Va(e,0,Ba),e++),F(this,e,t,1)},u.toFixed=function(e,t){return null!=e&&(Va(e,0,Ba),e=e+this.e+1),F(this,e,t)},u.toFormat=function(e,t,r){var i,a=this;if(null==r)null!=e&&t&&"object"==n(t)?(r=t,t=null):e&&"object"==n(e)?(r=e,e=t=null):r=R;else if("object"!=n(r))throw Error(Da+"Argument not an object: "+r);if(i=a.toFixed(e,t),a.c){var o,s=i.split("."),x=+r.groupSize,l=+r.secondaryGroupSize,c=r.groupSeparator||"",f=s[0],h=s[1],u=a.s<0,d=u?f.slice(1):f,_=d.length;if(l&&(o=x,x=l,l=o,_-=o),x>0&&_>0){for(o=_%x||x,f=d.substr(0,o);o<_;o+=x)f+=c+d.substr(o,x);l>0&&(f+=c+d.slice(o)),u&&(f="-"+f)}i=h?f+(r.decimalSeparator||"")+((l=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+l+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):f}return(r.prefix||"")+i+(r.suffix||"")},u.toFraction=function(e){var t,i,n,a,o,s,x,l,c,f,h,u,_=this,m=_.c;if(null!=e&&(!(x=new T(e)).isInteger()&&(x.c||1!==x.s)||x.lt(d)))throw Error(Da+"Argument "+(x.isInteger()?"out of range: ":"not an integer: ")+w(x));if(!m)return new T(_);for(t=new T(d),c=i=new T(d),n=l=new T(d),u=Ha(m),o=t.e=u.length-_.e-1,t.c[0]=ka[(s=o%wa)<0?wa+s:s],e=!e||x.comparedTo(t)>0?o>0?t:c:x,s=b,b=1/0,x=new T(u),l.c[0]=0;f=r(x,t,0,1),1!=(a=i.plus(f.times(n))).comparedTo(e);)i=n,n=a,c=l.plus(f.times(a=c)),l=a,t=x.minus(f.times(a=t)),x=a;return a=r(e.minus(i),n,0,1),l=l.plus(a.times(c)),i=i.plus(a.times(n)),l.s=c.s=_.s,h=r(c,n,o*=2,p).minus(_).abs().comparedTo(r(l,i,o,p).minus(_).abs())<1?[c,n]:[l,i],b=s,h},u.toNumber=function(){return+w(this)},u.toPrecision=function(e,t){return null!=e&&Va(e,1,Ba),F(this,e,t,2)},u.toString=function(e){var t,r=this,n=r.s,a=r.e;return null===a?n?(t="Infinity",n<0&&(t="-"+t)):t="NaN":(null==e?t=a<=m||a>=g?Ua(Ha(r.c),a):Xa(Ha(r.c),a,"0"):10===e&&E?t=Xa(Ha((r=I(new T(r),_+a+1,p)).c),r.e,"0"):(Va(e,2,C.length,"Base"),t=i(Xa(Ha(r.c),a,"0"),10,e,n,!0)),n<0&&r.c[0]&&(t="-"+t)),t},u.valueOf=u.toJSON=function(){return w(this)},u._isBigNumber=!0,u[Symbol.toStringTag]="BigNumber",u[Symbol.for("nodejs.util.inspect.custom")]=u.valueOf,null!=t&&T.set(t),T}();function Ga(e){var t;return null!==(t=Wa[e])&&void 0!==t?t:Wa.default}!function(e){e[e.up=za.ROUND_UP]="up",e[e.down=za.ROUND_DOWN]="down",e[e.truncate=za.ROUND_DOWN]="truncate",e[e.halfUp=za.ROUND_HALF_UP]="halfUp",e[e.default=za.ROUND_HALF_UP]="default",e[e.halfDown=za.ROUND_HALF_DOWN]="halfDown",e[e.halfEven=za.ROUND_HALF_EVEN]="halfEven",e[e.banker=za.ROUND_HALF_EVEN]="banker",e[e.ceiling=za.ROUND_CEIL]="ceiling",e[e.ceil=za.ROUND_CEIL]="ceil",e[e.floor=za.ROUND_FLOOR]="floor"}(Wa||(Wa={}));var Ja=Math.floor,Za=/\s/,ja=/^\s+/,qa=function(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&Za.test(e.charAt(t)););return t}(e)+1).replace(ja,""):e},$a=z,Ka=N,Qa=/^[-+]0x[0-9a-f]+$/i,eo=/^0b[01]+$/i,to=/^0o[0-7]+$/i,ro=parseInt,io=1/0,no=function(e){return e?(e=function(e){if("number"==typeof e)return e;if(Ka(e))return NaN;if($a(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=$a(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=qa(e);var r=eo.test(e);return r||to.test(e)?ro(e.slice(2),r?2:8):Qa.test(e)?NaN:+e}(e))===io||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0},ao=no,oo=Gi,so=it,xo=g((function(e,t,r){return t=(r?oo(e,t,r):void 0===t)?1:function(e){var t=ao(e),r=t%1;return t==t?r?t-r:t:0}(t),function(e,t){var r="";if(!e||t<1||t>9007199254740991)return r;do{t%2&&(r+=e),(t=Ja(t/2))&&(e+=e)}while(t);return r}(so(e),t)}));function lo(e,t){var r=function(e,t){var r=t.precision;return t.significant&&null!==r&&r>0?r-function(e){return e.isZero()?1:Math.floor(Math.log10(e.abs().toNumber())+1)}(e):r}(e,t);if(null===r)return e.toString();var i=Ga(t.roundMode);if(r>=0)return e.toFixed(r,i);var n=Math.pow(10,Math.abs(r));return(e=new za(e.div(n).toFixed(0,i)).times(n)).toString()}function co(e,t){var r,i,n,a=new za(e);if(t.raise&&!a.isFinite())throw new Error('"'.concat(e,'" is not a valid numeric value'));var o,s=lo(a,t),l=new za(s),c=l.lt(0),f=l.isZero(),h=x(s.split("."),2),u=h[0],d=h[1],_=[],p=null!==(r=t.format)&&void 0!==r?r:"%n",m=null!==(i=t.negativeFormat)&&void 0!==i?i:"-".concat(p),g=c&&!f?m:p;for(u=u.replace("-","");u.length>0;)_.unshift(u.substr(Math.max(0,u.length-3),3)),u=u.substr(0,u.length-3);return u=_.join(""),o=_.join(t.delimiter),d=t.significant?function(e){var t=e.significand,r=e.whole,i=e.precision;if("0"===r||null===i)return t;var n=Math.max(0,i-r.length);return(null!=t?t:"").substr(0,n)}({whole:u,significand:d,precision:t.precision}):null!=d?d:xo("0",null!==(n=t.precision)&&void 0!==n?n:0),t.stripInsignificantZeros&&d&&(d=d.replace(/0+$/,"")),a.isNaN()&&(o=e.toString()),d&&a.isFinite()&&(o+=(t.separator||".")+d),function(e,t){var r=t.formattedNumber,i=t.unit;return e.replace("%n",r).replace("%u",i)}(g,{formattedNumber:o,unit:t.unit})}function fo(e,t,r){var i="";return(t instanceof String||"string"==typeof t)&&(i=t),t instanceof Array&&(i=t.join(e.defaultSeparator)),r.scope&&(i=[r.scope,i].join(e.defaultSeparator)),i}function ho(e){var t,r;if(null===e)return"null";var i=n(e);return"object"!==i?i:(null===(r=null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)||void 0===r?void 0:r.toLowerCase())||"object"}function uo(e,t,r){r=Object.keys(r).reduce((function(t,i){return t[e.transformKey(i)]=r[i],t}),{});var i=t.match(e.placeholder);if(!i)return t;for(;i.length;){var n,a=i.shift(),o=a.replace(e.placeholder,"$1");n=Ca(r[o])?r[o].toString().replace(/\$/gm,"_#$#_"):o in r?e.nullPlaceholder(e,a,t,r):e.missingPlaceholder(e,a,t,r);var s=new RegExp(a.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}"));t=t.replace(s,n)}return t.replace(/_#\$#_/g,"$")}function _o(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="locale"in(r=Object.assign({},r))?r.locale:e.locale,a=ho(i),o=e.locales.get("string"===a?i:n(i)).slice(),s=fo(e,t,r).split(e.defaultSeparator).map((function(t){return e.transformKey(t)})),x=o.map((function(t){return s.reduce((function(e,t){return e&&e[t]}),e.translations[t])}));return x.push(r.defaultValue),x.find((function(e){return Ca(e)}))}var po=function(e,t){for(var r=-1,i=t.length,n=e.length;++r<i;)e[n+r]=t[r];return e},mo=Ct,go=b,yo=E?E.isConcatSpreadable:void 0,bo=po,vo=function(e){return go(e)||mo(e)||!!(yo&&e&&e[yo])},Po=Qi,So=function(e,t){for(var r=-1,i=null==e?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1},Ro=tn,Co=function(e,t,r,i,n,a){var o=1&r,s=e.length,x=t.length;if(s!=x&&!(o&&x>s))return!1;var l=a.get(e),c=a.get(t);if(l&&c)return l==t&&c==e;var f=-1,h=!0,u=2&r?new Po:void 0;for(a.set(e,t),a.set(t,e);++f<s;){var d=e[f],_=t[f];if(i)var p=o?i(_,d,f,t,e,a):i(d,_,f,e,t,a);if(void 0!==p){if(p)continue;h=!1;break}if(u){if(!So(t,(function(e,t){if(!Ro(u,t)&&(d===e||n(d,e,r,i,a)))return u.push(t)}))){h=!1;break}}else if(d!==_&&!n(d,_,r,i,a)){h=!1;break}}return a.delete(e),a.delete(t),h},Eo=rr,To=Pe,Fo=Co,Do=function(e){var t=-1,r=Array(e.size);return e.forEach((function(e,i){r[++t]=[i,e]})),r},Mo=nn,Io=E?E.prototype:void 0,wo=Io?Io.valueOf:void 0,Ao=po,ko=b,Lo=Object.prototype.propertyIsEnumerable,Bo=Object.getOwnPropertySymbols,Oo=Bo?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,i=null==e?0:e.length,n=0,a=[];++r<i;){var o=e[r];t(o,r,e)&&(a[n++]=o)}return a}(Bo(e),(function(t){return Lo.call(e,t)})))}:function(){return[]},Ho=sr(Object.keys,Object),No=cr,Vo=Ho,Yo=Object.prototype.hasOwnProperty,Uo=ei,Xo=pr,Wo=function(e){return Xo(e)?Uo(e):function(e){if(!No(e))return Vo(e);var t=[];for(var r in Object(e))Yo.call(e,r)&&"constructor"!=r&&t.push(r);return t}(e)},zo=function(e,t,r){var i=t(e);return ko(e)?i:Ao(i,r(e))},Go=Oo,Jo=Wo,Zo=function(e){return zo(e,Jo,Go)},jo=Object.prototype.hasOwnProperty,qo=le(C,"DataView"),$o=Ae,Ko=le(C,"Promise"),Qo=rn,es=le(C,"WeakMap"),ts=L,rs=K,is="[object Map]",ns="[object Promise]",as="[object Set]",os="[object WeakMap]",ss="[object DataView]",xs=rs(qo),ls=rs($o),cs=rs(Ko),fs=rs(Qo),hs=rs(es),us=ts;(qo&&us(new qo(new ArrayBuffer(1)))!=ss||$o&&us(new $o)!=is||Ko&&us(Ko.resolve())!=ns||Qo&&us(new Qo)!=as||es&&us(new es)!=os)&&(us=function(e){var t=ts(e),r="[object Object]"==t?e.constructor:void 0,i=r?rs(r):"";if(i)switch(i){case xs:return ss;case ls:return is;case cs:return ns;case fs:return as;case hs:return os}return t});var ds=zt,_s=Co,ps=function(e,t,r,i,n,a,o){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new Eo(e),new Eo(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return To(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var s=Do;case"[object Set]":var x=1&i;if(s||(s=Mo),e.size!=t.size&&!x)return!1;var l=o.get(e);if(l)return l==t;i|=2,o.set(e,t);var c=Fo(s(e),s(t),i,n,a,o);return o.delete(e),c;case"[object Symbol]":if(wo)return wo.call(e)==wo.call(t)}return!1},ms=function(e,t,r,i,n,a){var o=1&r,s=Zo(e),x=s.length;if(x!=Zo(t).length&&!o)return!1;for(var l=x;l--;){var c=s[l];if(!(o?c in t:jo.call(t,c)))return!1}var f=a.get(e),h=a.get(t);if(f&&h)return f==t&&h==e;var u=!0;a.set(e,t),a.set(t,e);for(var d=o;++l<x;){var _=e[c=s[l]],p=t[c];if(i)var m=o?i(p,_,c,t,e,a):i(_,p,c,e,t,a);if(!(void 0===m?_===p||n(_,p,r,i,a):m)){u=!1;break}d||(d="constructor"==c)}if(u&&!d){var g=e.constructor,y=t.constructor;g==y||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y||(u=!1)}return a.delete(e),a.delete(t),u},gs=us,ys=b,bs=vr,vs=Vr,Ps="[object Arguments]",Ss="[object Array]",Rs="[object Object]",Cs=Object.prototype.hasOwnProperty,Es=B,Ts=function e(t,r,i,n,a){return t===r||(null==t||null==r||!Es(t)&&!Es(r)?t!=t&&r!=r:function(e,t,r,i,n,a){var o=ys(e),s=ys(t),x=o?Ss:gs(e),l=s?Ss:gs(t),c=(x=x==Ps?Rs:x)==Rs,f=(l=l==Ps?Rs:l)==Rs,h=x==l;if(h&&bs(e)){if(!bs(t))return!1;o=!0,c=!1}if(h&&!c)return a||(a=new ds),o||vs(e)?_s(e,t,r,i,n,a):ps(e,t,x,r,i,n,a);if(!(1&r)){var u=c&&Cs.call(e,"__wrapped__"),d=f&&Cs.call(t,"__wrapped__");if(u||d){var _=u?e.value():e,p=d?t.value():t;return a||(a=new ds),n(_,p,r,i,a)}}return!!h&&(a||(a=new ds),ms(e,t,r,i,n,a))}(t,r,i,n,e,a))},Fs=zt,Ds=Ts,Ms=z,Is=function(e){return e==e&&!Ms(e)},ws=Is,As=Wo,ks=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}},Ls=ks,Bs=function(e,t){return null!=e&&t in Object(e)},Os=Lt,Hs=Ts,Ns=_t,Vs=W,Ys=Is,Us=ks,Xs=ct,Ws=ut,zs=W,Gs=ct,Js=function(e){var t=function(e){for(var t=As(e),r=t.length;r--;){var i=t[r],n=e[i];t[r]=[i,n,ws(n)]}return t}(e);return 1==t.length&&t[0][2]?Ls(t[0][0],t[0][1]):function(r){return r===e||function(e,t,r,i){var n=r.length,a=n,o=!i;if(null==e)return!a;for(e=Object(e);n--;){var s=r[n];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++n<a;){var x=(s=r[n])[0],l=e[x],c=s[1];if(o&&s[2]){if(void 0===l&&!(x in e))return!1}else{var f=new Fs;if(i)var h=i(l,c,x,e,t,f);if(!(void 0===h?Ds(c,l,3,i,f):h))return!1}}return!0}(r,e,t)}},Zs=function(e,t){return Vs(e)&&Ys(t)?Us(Xs(e),t):function(r){var i=Ns(r,e);return void 0===i&&i===t?function(e,t){return null!=e&&Os(e,t,Bs)}(r,e):Hs(t,i,3)}},js=Ii,qs=b,$s=function(e){return zs(e)?function(e){return function(t){return null==t?void 0:t[e]}}(Gs(e)):function(e){return function(t){return Ws(t,e)}}(e)},Ks=Qt,Qs=Wo,ex=pr,tx=function(e,t){if(null==e)return e;if(!ex(e))return function(e,t){return e&&Ks(e,t,Qs)}(e,t);for(var r=e.length,i=-1,n=Object(e);++i<r&&!1!==t(n[i],i,n););return e},rx=pr,ix=N,nx=function(e,t){if(e!==t){var r=void 0!==e,i=null===e,n=e==e,a=ix(e),o=void 0!==t,s=null===t,x=t==t,l=ix(t);if(!s&&!l&&!a&&e>t||a&&o&&x&&!s&&!l||i&&o&&x||!r&&x||!n)return 1;if(!i&&!a&&!l&&e<t||l&&r&&n&&!i&&!a||s&&r&&n||!o&&n||!x)return-1}return 0},ax=qe,ox=ut,sx=function(e){return"function"==typeof e?e:null==e?js:"object"==n(e)?qs(e)?Zs(e[0],e[1]):Js(e):$s(e)},xx=kr,lx=Ii,cx=b,fx=function e(t,r,i,n,a){var o=-1,s=t.length;for(i||(i=vo),a||(a=[]);++o<s;){var x=t[o];r>0&&i(x)?r>1?e(x,r-1,i,n,a):bo(a,x):n||(a[a.length]=x)}return a},hx=function(e,t,r){t=t.length?ax(t,(function(e){return cx(e)?function(t){return ox(t,1===e.length?e[0]:e)}:e})):[lx];var i=-1;t=ax(t,xx(sx));var n=function(e,t){var r=-1,i=rx(e)?Array(e.length):[];return tx(e,(function(e,n,a){i[++r]=t(e,n,a)})),i}(e,(function(e,r,n){return{criteria:ax(t,(function(t){return t(e)})),index:++i,value:e}}));return function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(n,(function(e,t){return function(e,t,r){for(var i=-1,n=e.criteria,a=t.criteria,o=n.length,s=r.length;++i<o;){var x=nx(n[i],a[i]);if(x)return i>=s?x:x*("desc"==r[i]?-1:1)}return e.index-t.index}(e,t,r)}))},ux=Gi,dx=g(Yi((function(e,t){if(null==e)return[];var r=t.length;return r>1&&ux(e,t[0],t[1])?t=[]:r>2&&ux(t[0],t[1],t[2])&&(t=[t[0]]),hx(e,fx(t,1),[])}))),_x=zr,px={0:"unit",1:"ten",2:"hundred",3:"thousand",6:"million",9:"billion",12:"trillion",15:"quadrillion","-1":"deci","-2":"centi","-3":"mili","-6":"micro","-9":"nano","-12":"pico","-15":"femto"},mx=g((function(e,t){return function(e,t,r){for(var i=-1,n=e.length,a=t.length,o={};++i<n;){var s=i<a?t[i]:void 0;r(o,e[i],s)}return o}(e||[],t||[],_x)}))(Object.values(px),Object.keys(px).map((function(e){return parseInt(e,10)})));var gx=["byte","kb","mb","gb","tb","pb","eb"];function yx(e){if(e instanceof Date)return e;if("number"==typeof e){var t=new Date;return t.setTime(e),t}var r=new String(e).match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})(?:[.,](\d{1,3}))?)?(Z|\+00:?00)?/);if(r){var i=r.slice(1,8).map((function(e){return parseInt(e,10)||0}));i[1]-=1;var n=x(i,7),a=n[0],o=n[1],s=n[2],l=n[3],c=n[4],f=n[5],h=n[6];return r[8]?new Date(Date.UTC(a,o,s,l,c,f,h)):new Date(a,o,s,l,c,f,h)}e.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)&&(new Date).setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" ")));var u=new Date;return u.setTime(Date.parse(e)),u}function bx(e){var t,r,i=e.i18n,a=e.count,o=e.scope,s=e.options,x=e.baseScope;if(s=Object.assign({},s),!(t="object"==n(o)&&o?o:_o(i,o,s)))return i.missingTranslation.get(o,s);for(var l=i.pluralization.get(s.locale)(i,a),c=[];l.length;){var f=l.shift();if(Ca(t[f])){r=t[f];break}c.push(f)}return Ca(r)?(s.count=a,i.interpolate(i,r,s)):i.missingTranslation.get(x.split(i.defaultSeparator).concat([c[0]]),s)}var vx={meridian:{am:"AM",pm:"PM"},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbrDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbrMonthNames:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]},Px=Math.ceil,Sx=Math.max,Rx=Gi,Cx=no,Ex=g((function(e,t,r){return r&&"number"!=typeof r&&Rx(e,t,r)&&(t=r=void 0),e=Cx(e),void 0===t?(t=e,e=0):t=Cx(t),function(e,t,r,i){for(var n=-1,a=Sx(Px((t-e)/(r||1)),0),o=Array(a);a--;)o[i?a:++n]=e,e+=r;return o}(e,t,r=void 0===r?e<t?1:-1:Cx(r),void 0)})),Tx=function(e,t,r){return r>=e&&r<=t},Fx=function(e,t){t instanceof Array&&(t=t.join(e.defaultSeparator));var r=t.split(e.defaultSeparator).slice(-1)[0];return e.missingTranslationPrefix+r.replace("_"," ").replace(/([a-z])([A-Z])/g,(function(e,t,r){return"".concat(t," ").concat(r.toLowerCase())}))},Dx=function(e,t,r){var i=fo(e,t,r),n="locale"in r?r.locale:e.locale,a=ho(n);return'[missing "'.concat(["string"==a?n:a,i].join(e.defaultSeparator),'" translation]')},Mx=function(e,t,r){var i=fo(e,t,r),n=[e.locale,i].join(e.defaultSeparator);throw new Error("Missing translation: ".concat(n))},Ix=function(){function e(t){a(this,e),this.i18n=t,this.registry={},this.register("guess",Fx),this.register("message",Dx),this.register("error",Mx)}return s(e,[{key:"register",value:function(e,t){this.registry[e]=t}},{key:"get",value:function(e,t){var r;return this.registry[null!==(r=t.missingBehavior)&&void 0!==r?r:this.i18n.missingBehavior](this.i18n,e,t)}}]),e}(),wx={defaultLocale:"en",availableLocales:["en"],locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,enableFallback:!1,missingBehavior:"message",missingTranslationPrefix:"",missingPlaceholder:function(e,t){return'[missing "'.concat(t,'" value]')},nullPlaceholder:function(e,t,r,i){return e.missingPlaceholder(e,t,r,i)},transformKey:function(e){return e}},Ax=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),this._locale=wx.locale,this._defaultLocale=wx.defaultLocale,this._version=0,this.onChangeHandlers=[],this.translations={},this.availableLocales=[],this.t=this.translate,this.p=this.pluralize,this.l=this.localize,this.distanceOfTimeInWords=this.timeAgoInWords;var i=Object.assign(Object.assign({},wx),r),n=i.locale,o=i.enableFallback,s=i.missingBehavior,x=i.missingTranslationPrefix,l=i.missingPlaceholder,c=i.nullPlaceholder,f=i.defaultLocale,h=i.defaultSeparator,u=i.placeholder,d=i.transformKey;this.locale=n,this.defaultLocale=f,this.defaultSeparator=h,this.enableFallback=o,this.locale=n,this.missingBehavior=s,this.missingTranslationPrefix=x,this.missingPlaceholder=l,this.nullPlaceholder=c,this.placeholder=u,this.pluralization=new mn(this),this.locales=new _n(this),this.missingTranslation=new Ix(this),this.transformKey=d,this.interpolate=uo,this.store(t)}return s(e,[{key:"store",value:function(e){qi(this.translations,e),this.hasChanged()}},{key:"locale",get:function(){return this._locale||this.defaultLocale||"en"},set:function(e){if("string"!=typeof e)throw new Error("Expected newLocale to be a string; got ".concat(ho(e)));var t=this._locale!==e;this._locale=e,t&&this.hasChanged()}},{key:"defaultLocale",get:function(){return this._defaultLocale||"en"},set:function(e){if("string"!=typeof e)throw new Error("Expected newLocale to be a string; got ".concat(ho(e)));var t=this._defaultLocale!==e;this._defaultLocale=e,t&&this.hasChanged()}},{key:"translate",value:function(e,t){var r,i=this,a=function(e,t,r){var i=[{scope:t}];if(Ca(r.defaults)&&(i=i.concat(r.defaults)),Ca(r.defaultValue)){var n="function"==typeof r.defaultValue?r.defaultValue(e,t,r):r.defaultValue;i.push({message:n}),delete r.defaultValue}return i}(this,e,t=Object.assign({},t));return a.some((function(e){return Ca(e.scope)?r=_o(i,e.scope,t):Ca(e.message)&&(r=e.message),null!=r}))?("string"==typeof r?r=this.interpolate(this,r,t):"object"==n(r)&&r&&Ca(t.count)&&(r=bx({i18n:this,count:t.count||0,scope:r,options:t,baseScope:fo(this,e,t)})),t&&r instanceof Array&&(r=r.map((function(e){return"string"==typeof e?uo(i,e,t):e}))),r):this.missingTranslation.get(e,t)}},{key:"pluralize",value:function(e,t,r){return bx({i18n:this,count:e,scope:t,options:Object.assign({},r),baseScope:fo(this,t,null!=r?r:{})})}},{key:"localize",value:function(e,t,r){if(r=Object.assign({},r),null==t)return"";switch(e){case"currency":return this.numberToCurrency(t);case"number":return co(t,Object.assign({delimiter:",",precision:3,separator:".",significant:!1,stripInsignificantZeros:!1},_o(this,"number.format")));case"percentage":return this.numberToPercentage(t);default:return uo(this,e.match(/^(date|time)/)?this.toTime(e,t):t.toString(),r)}}},{key:"toTime",value:function(e,t){var r=yx(t),i=_o(this,e);return r.toString().match(/invalid/i)?r.toString():i?this.strftime(r,i):r.toString()}},{key:"numberToCurrency",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return co(e,Object.assign(Object.assign(Object.assign({delimiter:",",format:"%u%n",precision:2,separator:".",significant:!1,stripInsignificantZeros:!1,unit:"$"},Ra(this.get("number.format"))),Ra(this.get("number.currency.format"))),t))}},{key:"numberToPercentage",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return co(e,Object.assign(Object.assign(Object.assign({delimiter:"",format:"%n%",precision:3,stripInsignificantZeros:!1,separator:".",significant:!1},Ra(this.get("number.format"))),Ra(this.get("number.percentage.format"))),t))}},{key:"numberToHumanSize",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t,r){var i,n=Ga(r.roundMode),a=1024,o=new za(t).abs(),s=o.lt(a),x=function(e,t){var r=gx.length-1,i=new za(Math.log(e.toNumber())).div(Math.log(a)).integerValue(za.ROUND_DOWN).toNumber();return Math.min(r,i)}(o);i=s?o.integerValue():new za(lo(o.div(Math.pow(a,x)),{significant:r.significant,precision:r.precision,roundMode:r.roundMode}));var l=e.translate("number.human.storage_units.format",{defaultValue:"%n %u"}),c=e.translate("number.human.storage_units.units.".concat(s?"byte":gx[x]),{count:o.integerValue().toNumber()}),f=i.toFixed(r.precision,n);return r.stripInsignificantZeros&&(f=f.replace(/(\..*?)0+$/,"$1").replace(/\.$/,"")),l.replace("%n",f).replace("%u",c)}(this,e,Object.assign(Object.assign(Object.assign({delimiter:"",precision:3,significant:!0,stripInsignificantZeros:!0,units:{billion:"Billion",million:"Million",quadrillion:"Quadrillion",thousand:"Thousand",trillion:"Trillion",unit:""}},Ra(this.get("number.human.format"))),Ra(this.get("number.human.storage_units"))),t))}},{key:"numberToHuman",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t,r){var i,n={roundMode:r.roundMode,precision:r.precision,significant:r.significant};if("string"===ho(r.units)){var a=r.units;if(!(i=_o(e,a)))throw new Error('The scope "'.concat(e.locale).concat(e.defaultSeparator).concat(fo(e,a,{}),"\" couldn't be found"))}else i=r.units;var o=lo(new za(t),n),s=function(e,t){var r=e.isZero()?0:Math.floor(Math.log10(e.abs().toNumber()));return function(e){return dx(Object.keys(e).map((function(e){return mx[e]})),(function(e){return-1*e}))}(t).find((function(e){return r>=e}))||0}(new za(o),i),l=function(e,t){return e[px[t.toString()]]||""}(i,s);if(o=lo(new za(o).div(Math.pow(10,s)),n),r.stripInsignificantZeros){var c=x(o.split("."),2),f=c[0],h=c[1];o=f,(h=(h||"").replace(/0+$/,""))&&(o+="".concat(r.separator).concat(h))}return r.format.replace("%n",o||"0").replace("%u",l).trim()}(this,e,Object.assign(Object.assign(Object.assign({delimiter:"",separator:".",precision:3,significant:!0,stripInsignificantZeros:!0,format:"%n %u",roundMode:"default",units:{billion:"Billion",million:"Million",quadrillion:"Quadrillion",thousand:"Thousand",trillion:"Trillion",unit:""}},Ra(this.get("number.human.format"))),Ra(this.get("number.human.decimal_units"))),t))}},{key:"numberToRounded",value:function(e,t){return co(e,Object.assign({unit:"",precision:3,significant:!1,separator:".",delimiter:"",stripInsignificantZeros:!1},t))}},{key:"numberToDelimited",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,t){var r=new za(e);if(!r.isFinite())return e.toString();if(!t.delimiterPattern.global)throw new Error("options.delimiterPattern must be a global regular expression; received ".concat(t.delimiterPattern));var i=x(r.toString().split("."),2),n=i[0],a=i[1];return n=n.replace(t.delimiterPattern,(function(e){return"".concat(e).concat(t.delimiter)})),[n,a].filter(Boolean).join(t.separator)}(e,Object.assign({delimiterPattern:/(\d)(?=(\d\d\d)+(?!\d))/g,delimiter:",",separator:"."},t))}},{key:"withLocale",value:function(e,r){return function(e,t,r,i){return new(r||(r=Promise))((function(n,a){function o(e){try{x(i.next(e))}catch(e){a(e)}}function s(e){try{x(i.throw(e))}catch(e){a(e)}}function x(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}x((i=i.apply(e,t||[])).next())}))}(this,void 0,void 0,t().mark((function i(){var n;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.locale,t.prev=1,this.locale=e,t.next=5,r();case 5:return t.prev=5,this.locale=n,t.finish(5);case 8:case"end":return t.stop()}}),i,this,[[1,,5,8]])})))}},{key:"strftime",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=Object.assign(Object.assign({},vx),r),n=i.abbrDayNames,a=i.dayNames,o=i.abbrMonthNames,s=i.monthNames,x=i.meridian;if(isNaN(e.getTime()))throw new Error("strftime() requires a valid date object, but received an invalid date.");var l=e.getDay(),c=e.getDate(),f=e.getFullYear(),h=e.getMonth()+1,u=e.getHours(),d=u,_=u>11?"pm":"am",p=e.getSeconds(),m=e.getMinutes(),g=e.getTimezoneOffset(),y=Math.floor(Math.abs(g/60)),b=Math.abs(g)-60*y,v=(g>0?"-":"+")+(y.toString().length<2?"0"+y:y)+(b.toString().length<2?"0"+b:b);return d>12?d-=12:0===d&&(d=12),(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=(t=t.replace("%a",n[l])).replace("%A",a[l])).replace("%b",o[h])).replace("%B",s[h])).replace("%d",c.toString().padStart(2,"0"))).replace("%e",c.toString())).replace("%-d",c.toString())).replace("%H",u.toString().padStart(2,"0"))).replace("%-H",u.toString())).replace("%k",u.toString())).replace("%I",d.toString().padStart(2,"0"))).replace("%-I",d.toString())).replace("%l",d.toString())).replace("%m",h.toString().padStart(2,"0"))).replace("%-m",h.toString())).replace("%M",m.toString().padStart(2,"0"))).replace("%-M",m.toString())).replace("%p",x[_])).replace("%P",x[_].toLowerCase())).replace("%S",p.toString().padStart(2,"0"))).replace("%-S",p.toString())).replace("%w",l.toString())).replace("%y",f.toString().padStart(2,"0").substr(-2))).replace("%-y",f.toString().padStart(2,"0").substr(-2).replace(/^0+/,""))).replace("%Y",f.toString())).replace(/%z/i,v)}(e,t,Object.assign(Object.assign(Object.assign({},Ra(_o(this,"date"))),{meridian:{am:_o(this,"time.am")||"AM",pm:_o(this,"time.pm")||"PM"}}),r))}},{key:"update",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{strict:!1};if(r.strict&&!Ht(this.translations,e))throw new Error('The path "'.concat(e,'" is not currently defined'));var i,n=pt(this.translations,e),a=ho(n),o=ho(t);if(r.strict&&a!==o)throw new Error('The current type for "'.concat(e,'" is "').concat(a,'", but you\'re trying to override it with "').concat(o,'"'));i="object"===o?Object.assign(Object.assign({},n),t):t;var s,x=e.split(this.defaultSeparator),l=x.pop(),f=this.translations,h=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=c(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}(x);try{for(h.s();!(s=h.n()).done;){var u=s.value;f[u]||(f[u]={}),f=f[u]}}catch(e){h.e(e)}finally{h.f()}f[l]=i,this.hasChanged()}},{key:"toSentence",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Object.assign(Object.assign({wordsConnector:", ",twoWordsConnector:" and ",lastWordConnector:", and "},Ra(_o(this,"support.array"))),t),i=r.wordsConnector,n=r.twoWordsConnector,a=r.lastWordConnector,o=e.length;switch(o){case 0:return"";case 1:return"".concat(e[0]);case 2:return e.join(n);default:return[e.slice(0,o-1).join(i),a,e[o-1]].join("")}}},{key:"timeAgoInWords",value:function(e,t){return function(e,t,r){var i,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=n.scope||"datetime.distance_in_words",o=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.t(t,{count:r,scope:a})};t=yx(t),r=yx(r);var s=t.getTime()/1e3,x=r.getTime()/1e3;s>x&&(t=(i=[r,t,x,s])[0],r=i[1],s=i[2],x=i[3]);var l=Math.round(x-s),c=Math.round((x-s)/60),f=c/60/24,h=Math.round(c/60),u=Math.round(f),d=Math.round(u/30);if(Tx(0,1,c))return n.includeSeconds?Tx(0,4,l)?o("less_than_x_seconds",5):Tx(5,9,l)?o("less_than_x_seconds",10):Tx(10,19,l)?o("less_than_x_seconds",20):Tx(20,39,l)?o("half_a_minute"):Tx(40,59,l)?o("less_than_x_minutes",1):o("x_minutes",1):0===c?o("less_than_x_minutes",1):o("x_minutes",c);if(Tx(2,44,c))return o("x_minutes",c);if(Tx(45,89,c))return o("about_x_hours",1);if(Tx(90,1439,c))return o("about_x_hours",h);if(Tx(1440,2519,c))return o("x_days",1);if(Tx(2520,43199,c))return o("x_days",u);if(Tx(43200,86399,c))return o("about_x_months",Math.round(c/43200));if(Tx(86400,525599,c))return o("x_months",d);var _=t.getFullYear();t.getMonth()+1>=3&&(_+=1);var p=r.getFullYear();r.getMonth()+1<3&&(p-=1);var m=525600,g=c-1440*(_>p?0:Ex(_,p).filter((function(e){return 1==new Date(e,1,29).getMonth()})).length),y=Math.trunc(g/m),b=parseFloat((g/m-y).toPrecision(3));return b<.25?o("about_x_years",y):b<.75?o("over_x_years",y):o("almost_x_years",y+1)}(this,e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{})}},{key:"onChange",value:function(e){var t=this;return this.onChangeHandlers.push(e),function(){t.onChangeHandlers.splice(t.onChangeHandlers.indexOf(e),1)}}},{key:"version",get:function(){return this._version}},{key:"formatNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return co(e,t=Object.assign(Object.assign({delimiter:",",precision:3,separator:".",unit:"",format:"%u%n",significant:!1,stripInsignificantZeros:!1},Ra(this.get("number.format"))),t))}},{key:"get",value:function(e){return _o(this,e)}},{key:"runCallbacks",value:function(){var e=this;this.onChangeHandlers.forEach((function(t){return t(e)}))}},{key:"hasChanged",value:function(){this._version+=1,this.runCallbacks()}}]),e}(),kx=function(){function e(e,t){this._i18n=new Ax(e,t)}var t=e.prototype;return t.t=function(e,t){return this._i18n.t(e,t)},t.appendTranslations=function(e){var t=this;Object.keys(e).forEach((function(r){t._i18n.translations[r]=Object.assign(t._i18n.translations[r]||{},e[r])}))},t.switchTranslation=function(e){this._i18n.locale=e},t.getCurrentLocale=function(){return this._i18n.locale},t.getCurrentTranslation=function(){return this._i18n.translations[this._i18n.locale]},t.getTranslations=function(){return this._i18n.translations},t.onChange=function(e){var t=this;return this._i18n.onChange((function(){return e(t)}))},t.getVersion=function(){return"1.0.1"},e}();"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;function Lx(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Bx={exports:{}};!function(e,t){e.exports=function(){var e=1e3,t=6e4,r=36e5,i="millisecond",a="second",o="minute",s="hour",x="day",l="week",c="month",f="quarter",h="year",u="date",d="Invalid Date",_=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,p=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var t=["th","st","nd","rd"],r=e%100;return"["+e+(t[(r-20)%10]||t[r]||t[0])+"]"}},g=function(e,t,r){var i=String(e);return!i||i.length>=t?e:""+Array(t+1-i.length).join(r)+e},y={s:g,z:function(e){var t=-e.utcOffset(),r=Math.abs(t),i=Math.floor(r/60),n=r%60;return(t<=0?"+":"-")+g(i,2,"0")+":"+g(n,2,"0")},m:function e(t,r){if(t.date()<r.date())return-e(r,t);var i=12*(r.year()-t.year())+(r.month()-t.month()),n=t.clone().add(i,c),a=r-n<0,o=t.clone().add(i+(a?-1:1),c);return+(-(i+(r-n)/(a?n-o:o-n))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:c,y:h,w:l,d:x,D:u,h:s,m:o,s:a,ms:i,Q:f}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return void 0===e}},b="en",v={};v[b]=m;var P="$isDayjsObject",S=function(e){return e instanceof T||!(!e||!e[P])},R=function e(t,r,i){var n;if(!t)return b;if("string"==typeof t){var a=t.toLowerCase();v[a]&&(n=a),r&&(v[a]=r,n=a);var o=t.split("-");if(!n&&o.length>1)return e(o[0])}else{var s=t.name;v[s]=t,n=s}return!i&&n&&(b=n),n||!i&&b},C=function(e,t){if(S(e))return e.clone();var r="object"==n(t)?t:{};return r.date=e,r.args=arguments,new T(r)},E=y;E.l=R,E.i=S,E.w=function(e,t){return C(e,{locale:t.$L,utc:t.$u,x:t.$x,$offset:t.$offset})};var T=function(){function n(e){this.$L=R(e.locale,null,!0),this.parse(e),this.$x=this.$x||e.x||{},this[P]=!0}var m=n.prototype;return m.parse=function(e){this.$d=function(e){var t=e.date,r=e.utc;if(null===t)return new Date(NaN);if(E.u(t))return new Date;if(t instanceof Date)return new Date(t);if("string"==typeof t&&!/Z$/i.test(t)){var i=t.match(_);if(i){var n=i[2]-1||0,a=(i[7]||"0").substring(0,3);return r?new Date(Date.UTC(i[1],n,i[3]||1,i[4]||0,i[5]||0,i[6]||0,a)):new Date(i[1],n,i[3]||1,i[4]||0,i[5]||0,i[6]||0,a)}}return new Date(t)}(e),this.init()},m.init=function(){var e=this.$d;this.$y=e.getFullYear(),this.$M=e.getMonth(),this.$D=e.getDate(),this.$W=e.getDay(),this.$H=e.getHours(),this.$m=e.getMinutes(),this.$s=e.getSeconds(),this.$ms=e.getMilliseconds()},m.$utils=function(){return E},m.isValid=function(){return!(this.$d.toString()===d)},m.isSame=function(e,t){var r=C(e);return this.startOf(t)<=r&&r<=this.endOf(t)},m.isAfter=function(e,t){return C(e)<this.startOf(t)},m.isBefore=function(e,t){return this.endOf(t)<C(e)},m.$g=function(e,t,r){return E.u(e)?this[t]:this.set(r,e)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(e,t){var r=this,i=!!E.u(t)||t,n=E.p(e),f=function(e,t){var n=E.w(r.$u?Date.UTC(r.$y,t,e):new Date(r.$y,t,e),r);return i?n:n.endOf(x)},d=function(e,t){return E.w(r.toDate()[e].apply(r.toDate("s"),(i?[0,0,0,0]:[23,59,59,999]).slice(t)),r)},_=this.$W,p=this.$M,m=this.$D,g="set"+(this.$u?"UTC":"");switch(n){case h:return i?f(1,0):f(31,11);case c:return i?f(1,p):f(0,p+1);case l:var y=this.$locale().weekStart||0,b=(_<y?_+7:_)-y;return f(i?m-b:m+(6-b),p);case x:case u:return d(g+"Hours",0);case s:return d(g+"Minutes",1);case o:return d(g+"Seconds",2);case a:return d(g+"Milliseconds",3);default:return this.clone()}},m.endOf=function(e){return this.startOf(e,!1)},m.$set=function(e,t){var r,n=E.p(e),l="set"+(this.$u?"UTC":""),f=(r={},r[x]=l+"Date",r[u]=l+"Date",r[c]=l+"Month",r[h]=l+"FullYear",r[s]=l+"Hours",r[o]=l+"Minutes",r[a]=l+"Seconds",r[i]=l+"Milliseconds",r)[n],d=n===x?this.$D+(t-this.$W):t;if(n===c||n===h){var _=this.clone().set(u,1);_.$d[f](d),_.init(),this.$d=_.set(u,Math.min(this.$D,_.daysInMonth())).$d}else f&&this.$d[f](d);return this.init(),this},m.set=function(e,t){return this.clone().$set(e,t)},m.get=function(e){return this[E.p(e)]()},m.add=function(i,n){var f,u=this;i=Number(i);var d=E.p(n),_=function(e){var t=C(u);return E.w(t.date(t.date()+Math.round(e*i)),u)};if(d===c)return this.set(c,this.$M+i);if(d===h)return this.set(h,this.$y+i);if(d===x)return _(1);if(d===l)return _(7);var p=(f={},f[o]=t,f[s]=r,f[a]=e,f)[d]||1,m=this.$d.getTime()+i*p;return E.w(m,this)},m.subtract=function(e,t){return this.add(-1*e,t)},m.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return r.invalidDate||d;var i=e||"YYYY-MM-DDTHH:mm:ssZ",n=E.z(this),a=this.$H,o=this.$m,s=this.$M,x=r.weekdays,l=r.months,c=r.meridiem,f=function(e,r,n,a){return e&&(e[r]||e(t,i))||n[r].slice(0,a)},h=function(e){return E.s(a%12||12,e,"0")},u=c||function(e,t,r){var i=e<12?"AM":"PM";return r?i.toLowerCase():i};return i.replace(p,(function(e,i){return i||function(e){switch(e){case"YY":return String(t.$y).slice(-2);case"YYYY":return E.s(t.$y,4,"0");case"M":return s+1;case"MM":return E.s(s+1,2,"0");case"MMM":return f(r.monthsShort,s,l,3);case"MMMM":return f(l,s);case"D":return t.$D;case"DD":return E.s(t.$D,2,"0");case"d":return String(t.$W);case"dd":return f(r.weekdaysMin,t.$W,x,2);case"ddd":return f(r.weekdaysShort,t.$W,x,3);case"dddd":return x[t.$W];case"H":return String(a);case"HH":return E.s(a,2,"0");case"h":return h(1);case"hh":return h(2);case"a":return u(a,o,!0);case"A":return u(a,o,!1);case"m":return String(o);case"mm":return E.s(o,2,"0");case"s":return String(t.$s);case"ss":return E.s(t.$s,2,"0");case"SSS":return E.s(t.$ms,3,"0");case"Z":return n}return null}(e)||n.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(i,n,u){var d,_=this,p=E.p(n),m=C(i),g=(m.utcOffset()-this.utcOffset())*t,y=this-m,b=function(){return E.m(_,m)};switch(p){case h:d=b()/12;break;case c:d=b();break;case f:d=b()/3;break;case l:d=(y-g)/6048e5;break;case x:d=(y-g)/864e5;break;case s:d=y/r;break;case o:d=y/t;break;case a:d=y/e;break;default:d=y}return u?d:E.a(d)},m.daysInMonth=function(){return this.endOf(c).$D},m.$locale=function(){return v[this.$L]},m.locale=function(e,t){if(!e)return this.$L;var r=this.clone(),i=R(e,t,!0);return i&&(r.$L=i),r},m.clone=function(){return E.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},n}(),F=T.prototype;return C.prototype=F,[["$ms",i],["$s",a],["$m",o],["$H",s],["$W",x],["$M",c],["$y",h],["$D",u]].forEach((function(e){F[e[1]]=function(t){return this.$g(t,e[0],e[1])}})),C.extend=function(e,t){return e.$i||(e(t,T,C),e.$i=!0),C},C.locale=R,C.isDayjs=S,C.unix=function(e){return C(1e3*e)},C.en=v[b],C.Ls=v,C.p={},C}()}(Bx);var Ox=Lx(Bx.exports),Hx="object"==("undefined"==typeof global?"undefined":n(global))&&global&&global.Object===Object&&global,Nx="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,Vx=Hx||Nx||Function("return this")(),Yx=Vx.Symbol,Ux=Object.prototype,Xx=Ux.hasOwnProperty,Wx=Ux.toString,zx=Yx?Yx.toStringTag:void 0;var Gx=Object.prototype.toString;var Jx="[object Null]",Zx="[object Undefined]",jx=Yx?Yx.toStringTag:void 0;function qx(e){return null==e?void 0===e?Zx:Jx:jx&&jx in Object(e)?function(e){var t=Xx.call(e,zx),r=e[zx];try{e[zx]=void 0;var i=!0}catch(e){}var n=Wx.call(e);return i&&(t?e[zx]=r:delete e[zx]),n}(e):function(e){return Gx.call(e)}(e)}function $x(e){return null!=e&&"object"==n(e)}var Kx="[object Symbol]";var Qx=Array.isArray,el=/\s/;var tl=/^\s+/;function rl(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&el.test(e.charAt(t)););return t}(e)+1).replace(tl,""):e}function il(e){var t=n(e);return null!=e&&("object"==t||"function"==t)}var nl=NaN,al=/^[-+]0x[0-9a-f]+$/i,ol=/^0b[01]+$/i,sl=/^0o[0-7]+$/i,xl=parseInt;function ll(e){if("number"==typeof e)return e;if(function(e){return"symbol"==n(e)||$x(e)&&qx(e)==Kx}(e))return nl;if(il(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=il(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=rl(e);var r=ol.test(e);return r||sl.test(e)?xl(e.slice(2),r?2:8):al.test(e)?nl:+e}function cl(e){return e}var fl="[object AsyncFunction]",hl="[object Function]",ul="[object GeneratorFunction]",dl="[object Proxy]";function _l(e){if(!il(e))return!1;var t=qx(e);return t==hl||t==ul||t==fl||t==dl}var pl,ml=Vx["__core-js_shared__"],gl=(pl=/[^.]+$/.exec(ml&&ml.keys&&ml.keys.IE_PROTO||""))?"Symbol(src)_1."+pl:"";var yl=Function.prototype.toString;var bl=/^\[object .+?Constructor\]$/,vl=Function.prototype,Pl=Object.prototype,Sl=vl.toString,Rl=Pl.hasOwnProperty,Cl=RegExp("^"+Sl.call(Rl).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function El(e){return!(!il(e)||(t=e,gl&&gl in t))&&(_l(e)?Cl:bl).test(function(e){if(null!=e){try{return yl.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function Tl(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return El(r)?r:void 0}var Fl=Object.create,Dl=function(){function e(){}return function(t){if(!il(t))return{};if(Fl)return Fl(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}();var Ml=Date.now;var Il,wl,Al,kl=function(){try{var e=Tl(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ll=kl?function(e,t){return kl(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:cl,Bl=(Il=Ll,wl=0,Al=0,function(){var e=Ml(),t=16-(e-Al);if(Al=e,t>0){if(++wl>=800)return arguments[0]}else wl=0;return Il.apply(void 0,arguments)}),Ol=9007199254740991,Hl=/^(?:0|[1-9]\d*)$/;function Nl(e,t){var r=n(e);return!!(t=null==t?Ol:t)&&("number"==r||"symbol"!=r&&Hl.test(e))&&e>-1&&e%1==0&&e<t}function Vl(e,t,r){"__proto__"==t&&kl?kl(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function Yl(e,t){return e===t||e!=e&&t!=t}var Ul=Object.prototype.hasOwnProperty;function Xl(e,t,r){var i=e[t];Ul.call(e,t)&&Yl(i,r)&&(void 0!==r||t in e)||Vl(e,t,r)}var Wl=Math.max;function zl(e,t){return Bl(function(e,t,r){return t=Wl(void 0===t?e.length-1:t,0),function(){for(var i=arguments,n=-1,a=Wl(i.length-t,0),o=Array(a);++n<a;)o[n]=i[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=i[n];return s[t]=r(o),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,s)}}(e,t,cl),e+"")}var Gl=9007199254740991;function Jl(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Gl}function Zl(e){return null!=e&&Jl(e.length)&&!_l(e)}var jl=Object.prototype;function ql(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||jl)}function $l(e){return $x(e)&&"[object Arguments]"==qx(e)}var Kl=Object.prototype,Ql=Kl.hasOwnProperty,ec=Kl.propertyIsEnumerable,tc=$l(function(){return arguments}())?$l:function(e){return $x(e)&&Ql.call(e,"callee")&&!ec.call(e,"callee")},rc=tc;var ic="object"==("undefined"==typeof exports?"undefined":n(exports))&&exports&&!exports.nodeType&&exports,nc=ic&&"object"==("undefined"==typeof module?"undefined":n(module))&&module&&!module.nodeType&&module,ac=nc&&nc.exports===ic?Vx.Buffer:void 0,oc=(ac?ac.isBuffer:void 0)||function(){return!1},sc={};sc["[object Float32Array]"]=sc["[object Float64Array]"]=sc["[object Int8Array]"]=sc["[object Int16Array]"]=sc["[object Int32Array]"]=sc["[object Uint8Array]"]=sc["[object Uint8ClampedArray]"]=sc["[object Uint16Array]"]=sc["[object Uint32Array]"]=!0,sc["[object Arguments]"]=sc["[object Array]"]=sc["[object ArrayBuffer]"]=sc["[object Boolean]"]=sc["[object DataView]"]=sc["[object Date]"]=sc["[object Error]"]=sc["[object Function]"]=sc["[object Map]"]=sc["[object Number]"]=sc["[object Object]"]=sc["[object RegExp]"]=sc["[object Set]"]=sc["[object String]"]=sc["[object WeakMap]"]=!1;var xc="object"==("undefined"==typeof exports?"undefined":n(exports))&&exports&&!exports.nodeType&&exports,lc=xc&&"object"==("undefined"==typeof module?"undefined":n(module))&&module&&!module.nodeType&&module,cc=lc&&lc.exports===xc&&Hx.process,fc=function(){try{var e=lc&&lc.require&&lc.require("util").types;return e||cc&&cc.binding&&cc.binding("util")}catch(e){}}(),hc=fc&&fc.isTypedArray,uc=hc?function(e){return function(t){return e(t)}}(hc):function(e){return $x(e)&&Jl(e.length)&&!!sc[qx(e)]},dc=Object.prototype.hasOwnProperty;function _c(e,t){var r=Qx(e),i=!r&&rc(e),n=!r&&!i&&oc(e),a=!r&&!i&&!n&&uc(e),o=r||i||n||a,s=o?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],x=s.length;for(var l in e)!t&&!dc.call(e,l)||o&&("length"==l||n&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Nl(l,x))||s.push(l);return s}var pc=Object.prototype.hasOwnProperty;function mc(e){if(!il(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=ql(e),r=[];for(var i in e)("constructor"!=i||!t&&pc.call(e,i))&&r.push(i);return r}function gc(e){return Zl(e)?_c(e,!0):mc(e)}var yc=Tl(Object,"create");var bc=Object.prototype.hasOwnProperty;var vc=Object.prototype.hasOwnProperty;function Pc(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function Sc(e,t){for(var r=e.length;r--;)if(Yl(e[r][0],t))return r;return-1}Pc.prototype.clear=function(){this.__data__=yc?yc(null):{},this.size=0},Pc.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Pc.prototype.get=function(e){var t=this.__data__;if(yc){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return bc.call(t,e)?t[e]:void 0},Pc.prototype.has=function(e){var t=this.__data__;return yc?void 0!==t[e]:vc.call(t,e)},Pc.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=yc&&void 0===t?"__lodash_hash_undefined__":t,this};var Rc=Array.prototype.splice;function Cc(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Cc.prototype.clear=function(){this.__data__=[],this.size=0},Cc.prototype.delete=function(e){var t=this.__data__,r=Sc(t,e);return!(r<0)&&(r==t.length-1?t.pop():Rc.call(t,r,1),--this.size,!0)},Cc.prototype.get=function(e){var t=this.__data__,r=Sc(t,e);return r<0?void 0:t[r][1]},Cc.prototype.has=function(e){return Sc(this.__data__,e)>-1},Cc.prototype.set=function(e,t){var r=this.__data__,i=Sc(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this};var Ec=Tl(Vx,"Map");function Tc(e,t){var r,i,a=e.__data__;return("string"==(i=n(r=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?a["string"==typeof t?"string":"hash"]:a.map}function Fc(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Fc.prototype.clear=function(){this.size=0,this.__data__={hash:new Pc,map:new(Ec||Cc),string:new Pc}},Fc.prototype.delete=function(e){var t=Tc(this,e).delete(e);return this.size-=t?1:0,t},Fc.prototype.get=function(e){return Tc(this,e).get(e)},Fc.prototype.has=function(e){return Tc(this,e).has(e)},Fc.prototype.set=function(e,t){var r=Tc(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this};var Dc=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object),Mc="[object Object]",Ic=Function.prototype,wc=Object.prototype,Ac=Ic.toString,kc=wc.hasOwnProperty,Lc=Ac.call(Object);function Bc(e){var t=this.__data__=new Cc(e);this.size=t.size}Bc.prototype.clear=function(){this.__data__=new Cc,this.size=0},Bc.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Bc.prototype.get=function(e){return this.__data__.get(e)},Bc.prototype.has=function(e){return this.__data__.has(e)},Bc.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Cc){var i=r.__data__;if(!Ec||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Fc(i)}return r.set(e,t),this.size=r.size,this};var Oc="object"==("undefined"==typeof exports?"undefined":n(exports))&&exports&&!exports.nodeType&&exports,Hc=Oc&&"object"==("undefined"==typeof module?"undefined":n(module))&&module&&!module.nodeType&&module,Nc=Hc&&Hc.exports===Oc?Vx.Buffer:void 0,Vc=Nc?Nc.allocUnsafe:void 0;var Yc=Vx.Uint8Array;function Uc(e,t){var r,i,n=t?(r=e.buffer,i=new r.constructor(r.byteLength),new Yc(i).set(new Yc(r)),i):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var Xc,Wc=function(e,t,r){for(var i=-1,n=Object(e),a=r(e),o=a.length;o--;){var s=a[Xc?o:++i];if(!1===t(n[s],s,n))break}return e},zc=function(){return Vx.Date.now()},Gc="Expected a function",Jc=Math.max,Zc=Math.min;function jc(e,t,r){var i,n,a,o,s,x,l=0,c=!1,f=!1,h=!0;if("function"!=typeof e)throw new TypeError(Gc);function u(t){var r=i,a=n;return i=n=void 0,l=t,o=e.apply(a,r)}function d(e){var r=e-x;return void 0===x||r>=t||r<0||f&&e-l>=a}function _(){var e=zc();if(d(e))return p(e);s=setTimeout(_,function(e){var r=t-(e-x);return f?Zc(r,a-(e-l)):r}(e))}function p(e){return s=void 0,h&&i?u(e):(i=n=void 0,o)}function m(){var e=zc(),r=d(e);if(i=arguments,n=this,x=e,r){if(void 0===s)return function(e){return l=e,s=setTimeout(_,t),c?u(e):o}(x);if(f)return clearTimeout(s),s=setTimeout(_,t),u(x)}return void 0===s&&(s=setTimeout(_,t)),o}return t=ll(t)||0,il(r)&&(c=!!r.leading,a=(f="maxWait"in r)?Jc(ll(r.maxWait)||0,t):a,h="trailing"in r?!!r.trailing:h),m.cancel=function(){void 0!==s&&clearTimeout(s),l=0,i=x=n=s=void 0},m.flush=function(){return void 0===s?o:p(zc())},m}function qc(e,t,r){(void 0!==r&&!Yl(e[t],r)||void 0===r&&!(t in e))&&Vl(e,t,r)}function $c(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function Kc(e){return function(e,t,r,i){var n=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],x=i?i(r[s],e[s],s,r,e):void 0;void 0===x&&(x=e[s]),n?Vl(r,s,x):Xl(r,s,x)}return r}(e,gc(e))}function Qc(e,t,r,i,n,a,o){var s=$c(e,r),x=$c(t,r),l=o.get(x);if(l)qc(e,r,l);else{var c,f=a?a(s,x,r+"",e,t,o):void 0,h=void 0===f;if(h){var u=Qx(x),d=!u&&oc(x),_=!u&&!d&&uc(x);f=x,u||d||_?Qx(s)?f=s:$x(c=s)&&Zl(c)?f=function(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}(s):d?(h=!1,f=function(e,t){if(t)return e.slice();var r=e.length,i=Vc?Vc(r):new e.constructor(r);return e.copy(i),i}(x,!0)):_?(h=!1,f=Uc(x,!0)):f=[]:function(e){if(!$x(e)||qx(e)!=Mc)return!1;var t=Dc(e);if(null===t)return!0;var r=kc.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Ac.call(r)==Lc}(x)||rc(x)?(f=s,rc(s)?f=Kc(s):il(s)&&!_l(s)||(f=function(e){return"function"!=typeof e.constructor||ql(e)?{}:Dl(Dc(e))}(x))):h=!1}h&&(o.set(x,f),n(f,x,i,a,o),o.delete(x)),qc(e,r,f)}}function ef(e,t,r,i,n){e!==t&&Wc(t,(function(a,o){if(n||(n=new Bc),il(a))Qc(e,t,o,r,ef,i,n);else{var s=i?i($c(e,o),a,o+"",e,t,n):void 0;void 0===s&&(s=a),qc(e,o,s)}}),gc)}var tf,rf=(tf=function(e,t,r){ef(e,t,r)},zl((function(e,t){var r=-1,i=t.length,a=i>1?t[i-1]:void 0,o=i>2?t[2]:void 0;for(a=tf.length>3&&"function"==typeof a?(i--,a):void 0,o&&function(e,t,r){if(!il(r))return!1;var i=n(t);return!!("number"==i?Zl(r)&&Nl(t,r.length):"string"==i&&t in r)&&Yl(r[t],e)}(t[0],t[1],o)&&(a=i<3?void 0:a,i=1),e=Object(e);++r<i;){var s=t[r];s&&tf(e,s,r,a)}return e}))),nf="Expected a function";function af(e,t,r){var i=!0,n=!0;if("function"!=typeof e)throw new TypeError(nf);return il(r)&&(i="leading"in r?!!r.leading:i,n="trailing"in r?!!r.trailing:n),jc(e,t,{leading:i,maxWait:t,trailing:n})}
/*
  *
  * @ezuikit/utils-dom v1.0.1
  * Copyright (c) 2024-3-23 Ezviz-OpenBiz
  * Released under MIT the License.
  *
  */var of="ezui";function sf(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var n;e&&(r=r.filter((function(e){return e&&!!e.replace(/ /g,"")})),(n=e.classList).add.apply(n,[].concat(r)))}function xf(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];var n;e&&(n=e.classList).remove.apply(n,[].concat(r))}function lf(e,t){Object.assign(e.style,t)}
/*
  *
  * @ezuikit/icons v0.1.0
  * Copyright (c) 2024-3-23 Ezviz-OpenBiz
  * Released under MIT the License.
  *
  */function cf(e){var t,r="".concat(of,"-icon"),i=document.createElement("span");return i.className="",sf(i,"".concat(r),"".concat(r,"-").concat(e.name),null!==(t=null==e?void 0:e.className)&&void 0!==t?t:""),i.setAttribute("role","img"),i.innerHTML=e.svg,i}!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}(".ezui-icon{align-items:center;color:inherit;display:inline-flex;font-style:normal;line-height:0;text-align:center;text-rendering:optimizeLegibility;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.ezui-icon svg{display:inline-block}");var ff=function(e){var t="cloud_record";return cf({name:t,svg:null!=e?e:'<svg\n      viewBox="0 0 48 49"\n      focusable="false"\n      data-icon="'.concat(t,'"\n      width="1em"\n      height="1em"\n      fill="currentColor"\n      aria-hidden="true"\n    >\n      <g transform="translate(3.000000, 10.000000)">\n        <g>\n          <path\n            d="M38.1,24.2c-0.8,0-1.6-0.2-2.3-0.6L31,20.9l1.5-2.6l4.8,2.7c0.3,0.1,0.5,0.2,0.8,0.2c1,0,1.8-0.8,1.8-1.8V9.6\n                c0-0.3-0.1-0.5-0.2-0.8c-0.2-0.4-0.6-0.8-1-0.9c-0.4-0.2-0.9-0.1-1.3,0.1l-5,2.4l-1.3-2.7l5-2.4c1.1-0.5,2.4-0.6,3.6-0.2\n                c1.2,0.4,2.2,1.3,2.7,2.5c0.3,0.6,0.4,1.3,0.4,2v9.8C42.8,22,40.7,24.2,38.1,24.2z"\n          />\n        </g>\n        <g>\n          <path\n            d="M27.7,30H4.9c-3.5,0-6.4-2.9-6.4-6.4V5.4C-1.5,1.9,1.4-1,4.9-1h22.8c3.5,0,6.4,2.9,6.4,6.4v18.1\n                C34.1,27.1,31.2,30,27.7,30z M4.9,2C3,2,1.5,3.5,1.5,5.4v18.1C1.5,25.5,3,27,4.9,27h22.8c1.9,0,3.4-1.5,3.4-3.4V5.4\n                c0-1.9-1.5-3.4-3.4-3.4H4.9z"\n          />\n        </g>\n        <g>\n          <path\n            d="M12.1,7.1c0.9,0,1.6,0.7,1.6,1.5c0,0.8-0.6,1.4-1.4,1.5l-0.2,0H8.9c-0.9,0-1.6-0.7-1.6-1.5\n                c0-0.8,0.6-1.4,1.4-1.5l0.2,0H12.1z"\n          />\n        </g>\n      </g>\n    </svg>')})},hf=function(e){var t="cloud";return cf({name:t,svg:null!=e?e:'<svg\n      viewBox="0 0 18 18"\n      focusable="false"\n      data-icon="'.concat(t,'"\n      width="1em"\n      height="1em"\n      fill="currentColor"\n      aria-hidden="true"\n    >\n    <path d="m9.05,12.2c-0.3,0 -0.5,-0.2 -0.5,-0.5l0,-3.8c0,-0.3 0.2,-0.5 0.5,-0.5s0.5,0.2 0.5,0.5l0,3.8c0,0.2 -0.2,0.5 -0.5,0.5z"/>\n    <path d="m7.15,9.7c-0.1,0 -0.3,-0.1 -0.4,-0.2c-0.2,-0.2 -0.2,-0.5 0.1,-0.7l1.9,-1.7c0.2,-0.2 0.5,-0.2 0.7,0l1.8,1.7c0.2,0.2 0.2,0.5 0,0.7c-0.2,0.2 -0.5,0.2 -0.7,0l-1.5,-1.3l-1.6,1.4c-0.1,0.1 -0.2,0.1 -0.3,0.1z"/>\n    <path d="m12.75,14.8l-7.6,0c-2.1,-0.1 -3.8,-1.8 -3.8,-3.9c0,-1.8 1.3,-3.4 3,-3.8c0.4,-2.2 2.3,-3.9 4.6,-3.9c2.3,0 4.2,1.7 4.6,3.8c1.8,0.4 3.1,1.9 3.1,3.8c0,2.2 -1.7,4 -3.9,4zm-7.6,-1l7.6,0c1.6,0 2.9,-1.3 2.9,-2.9c0,-1.5 -1.1,-2.7 -2.6,-2.9l-0.4,0l0,-0.4c-0.2,-1.9 -1.7,-3.3 -3.6,-3.3c-2,-0.1 -3.5,1.4 -3.7,3.3l0,0.4l-0.4,0c-1.4,0.2 -2.5,1.4 -2.5,2.9c-0.1,1.5 1.2,2.8 2.7,2.9z"/>\n    </svg>')})},uf=function(e){return cf({name:"sdk",svg:null!=e?e:'<svg\n        viewBox="0 0 18 18"\n        focusable="false"\n        data-icon="sdk"\n        width="1em"\n        height="1em"\n        fill="currentColor"\n        aria-hidden="true"\n        >\n        <path d="m13,16.3l-7.5,0c-1.1,0 -2,-0.9 -2,-2l0,-10.5c0,-1.1 0.9,-2 2,-2l5.4,0c0.5,0 1,0.2 1.4,0.6l2.1,2.1c0.4,0.3 0.6,0.8 0.6,1.4l0,8.4c0,1.1 -0.9,2 -2,2zm-7.5,-13.5c-0.6,0 -1,0.4 -1,1l0,10.5c0,0.6 0.4,1 1,1l7.5,0c0.6,0 1,-0.4 1,-1l0,-8.4c0,-0.3 -0.1,-0.5 -0.3,-0.7l-2.1,-2.2c-0.2,-0.2 -0.4,-0.3 -0.7,-0.3l-5.4,0l0,0.1z"/>\n        <path d="m6.3,7.3c-0.3,0 -0.5,-0.3 -0.5,-0.5l0,-2.3c0,-0.3 0.2,-0.5 0.5,-0.5s0.5,0.2 0.5,0.5l0,2.2c0,0.3 -0.2,0.6 -0.5,0.6z"/>\n        <path d="m8.5,7.3c-0.2,0 -0.5,-0.3 -0.5,-0.5l0,-2.3c0,-0.3 0.3,-0.5 0.5,-0.5s0.5,0.2 0.5,0.5l0,2.2c0,0.3 -0.2,0.6 -0.5,0.6z"/>\n        <path d="m10.8,7.3c-0.3,0 -0.5,-0.2 -0.5,-0.5l0,-2.3c0,-0.3 0.2,-0.5 0.5,-0.5s0.5,0.2 0.5,0.5l0,2.2c0,0.3 -0.2,0.6 -0.5,0.6z"/>\n        </svg>'})};function df(e){return df="function"==typeof Symbol&&"symbol"==n(Symbol.iterator)?function(e){return n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},df(e)}function _f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var i,n,a,o,s=[],x=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;x=!1}else for(;!(x=(i=a.call(r)).done)&&(s.push(i.value),s.length!==t);x=!0);}catch(e){l=!0,n=e}finally{try{if(!x&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw n}}return s}}(e,t)||pf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pf(e,t){if(e){if("string"==typeof e)return mf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mf(e,t):void 0}}function mf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function gf(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=pf(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}}
/*
  *
  * @ezuikit/utils-tools v1.0.1
  * Copyright (c) 2024-3-23 Ezviz-OpenBiz
  * Released under MIT the License.
  *
  */var yf=function(e){var t=e.split("?")[1],r={};if(t)for(var i=t.split("&"),n=0;n<i.length;n++){var a=i[n].split("=");r[a[0]]=decodeURIComponent(a[1])}return r};function bf(e){var t={};if(/^ezopen:\/\//.test(e)){if(e.includes("@")){var r=e.indexOf("@"),i=e.indexOf("//");t.validateCode=e.substring(i+2,r),e=e.replace(t.validateCode+"@","")}t.protocol=e.split("//")[0],t.search=e.split("?")[1]?"?"+e.split("?")[1]:"",t.hostname=e.split("/")[2],t.origin=t.protocol+"//"+t.hostname,t.pathname=e.split("?")[0].replace(t.origin,""),t.href=e;var n=t.pathname.split("/"),a=n[2].split(".");return t.deviceSerial=n[1],t.channelNo=a[0],t.type=a[a.length-1],"live"===t.type&&(t.definition=a.length>2?a[1]:"sd"),"rec"===t.type&&(t.recType=a.length>2?a[1]:""),t.searchParams=yf(e),t}return{}}function vf(e){var t,r;return!!((null!=e?e:null==(r=window)||null==(t=r.navigator)?void 0:t.userAgent)||"").match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)}function Pf(e,t){return Object.entries(e).reduce((function(e,r){var i=r[0],n=r[1];return t.includes(i)&&(e[i]=n),e}),{})}var Sf="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var Rf={exports:{}};!function(e,t){function r(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":df(e)}!function(i,n){var a="function",o="undefined",s="object",x="string",l="major",c="model",f="name",h="type",u="vendor",d="version",_="architecture",p="console",m="mobile",g="tablet",y="smarttv",b="wearable",v="embedded",P="Amazon",S="Apple",R="ASUS",C="BlackBerry",E="Browser",T="Chrome",F="Firefox",D="Google",M="Huawei",I="LG",w="Microsoft",A="Motorola",k="Opera",L="Samsung",B="Sharp",O="Sony",H="Xiaomi",N="Zebra",V="Facebook",Y="Chromium OS",U="Mac OS",X=function(e){for(var t={},r=0;r<e.length;r++)t[e[r].toUpperCase()]=e[r];return t},W=function(e,t){return(void 0===e?"undefined":r(e))===x&&-1!==z(t).indexOf(z(e))},z=function(e){return e.toLowerCase()},G=function(e,t){if((void 0===e?"undefined":r(e))===x)return e=e.replace(/^\s\s*/,""),(void 0===t?"undefined":r(t))===o?e:e.substring(0,500)},J=function(e,t){for(var i,o,x,l,c,f,h=0;h<t.length&&!c;){var u=t[h],d=t[h+1];for(i=o=0;i<u.length&&!c&&u[i];)if(c=u[i++].exec(e))for(x=0;x<d.length;x++)f=c[++o],(void 0===(l=d[x])?"undefined":r(l))===s&&l.length>0?2===l.length?r(l[1])==a?this[l[0]]=l[1].call(this,f):this[l[0]]=l[1]:3===l.length?r(l[1])!==a||l[1].exec&&l[1].test?this[l[0]]=f?f.replace(l[1],l[2]):n:this[l[0]]=f?l[1].call(this,f,l[2]):n:4===l.length&&(this[l[0]]=f?l[3].call(this,f.replace(l[1],l[2])):n):this[l]=f||n;h+=2}},Z=function(e,t){for(var i in t)if(r(t[i])===s&&t[i].length>0){for(var a=0;a<t[i].length;a++)if(W(t[i][a],e))return"?"===i?n:i}else if(W(t[i],e))return"?"===i?n:i;return e},j={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},q={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[d,[f,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[d,[f,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[f,d],[/opios[\/ ]+([\w\.]+)/i],[d,[f,k+" Mini"]],[/\bopr\/([\w\.]+)/i],[d,[f,k]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[d,[f,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[f,d],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[d,[f,"UC"+E]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[d,[f,"WeChat"]],[/konqueror\/([\w\.]+)/i],[d,[f,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[d,[f,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[d,[f,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[d,[f,"Smart Lenovo "+E]],[/(avast|avg)\/([\w\.]+)/i],[[f,/(.+)/,"$1 Secure "+E],d],[/\bfocus\/([\w\.]+)/i],[d,[f,F+" Focus"]],[/\bopt\/([\w\.]+)/i],[d,[f,k+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[d,[f,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[d,[f,"Dolphin"]],[/coast\/([\w\.]+)/i],[d,[f,k+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[d,[f,"MIUI "+E]],[/fxios\/([-\w\.]+)/i],[d,[f,F]],[/\bqihu|(qi?ho?o?|360)browser/i],[[f,"360 "+E]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[f,/(.+)/,"$1 "+E],d],[/samsungbrowser\/([\w\.]+)/i],[d,[f,L+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[f,/_/g," "],d],[/metasr[\/ ]?([\d\.]+)/i],[d,[f,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[f,"Sogou Mobile"],d],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[f,d],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[f],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[f,V],d],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[f,d],[/\bgsa\/([\w\.]+) .*safari\//i],[d,[f,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[d,[f,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[d,[f,T+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[f,T+" WebView"],d],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[d,[f,"Android "+E]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[f,d],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[d,[f,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[d,f],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[f,[d,Z,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[f,d],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[f,"Netscape"],d],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[d,[f,F+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[f,d],[/(cobalt)\/([\w\.]+)/i],[f,[d,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[_,"amd64"]],[/(ia32(?=;))/i],[[_,z]],[/((?:i[346]|x)86)[;\)]/i],[[_,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[_,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[_,"armhf"]],[/windows (ce|mobile); ppc;/i],[[_,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[_,/ower/,"",z]],[/(sun4\w)[;\)]/i],[[_,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[_,z]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[c,[u,L],[h,g]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[c,[u,L],[h,m]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[c,[u,S],[h,m]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[c,[u,S],[h,g]],[/(macintosh);/i],[c,[u,S]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[c,[u,B],[h,m]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[c,[u,M],[h,g]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[c,[u,M],[h,m]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[c,/_/g," "],[u,H],[h,m]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[c,/_/g," "],[u,H],[h,g]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[c,[u,"OPPO"],[h,m]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[c,[u,"Vivo"],[h,m]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[c,[u,"Realme"],[h,m]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[c,[u,A],[h,m]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[c,[u,A],[h,g]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[c,[u,I],[h,g]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[c,[u,I],[h,m]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[c,[u,"Lenovo"],[h,g]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[c,/_/g," "],[u,"Nokia"],[h,m]],[/(pixel c)\b/i],[c,[u,D],[h,g]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[c,[u,D],[h,m]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[u,O],[h,m]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[c,"Xperia Tablet"],[u,O],[h,g]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[c,[u,"OnePlus"],[h,m]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[c,[u,P],[h,g]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[c,/(.+)/g,"Fire Phone $1"],[u,P],[h,m]],[/(playbook);[-\w\),; ]+(rim)/i],[c,u,[h,g]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[c,[u,C],[h,m]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[c,[u,R],[h,g]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[c,[u,R],[h,m]],[/(nexus 9)/i],[c,[u,"HTC"],[h,g]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[u,[c,/_/g," "],[h,m]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[c,[u,"Acer"],[h,g]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[c,[u,"Meizu"],[h,m]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[c,[u,"Ulefone"],[h,m]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[u,c,[h,m]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[u,c,[h,g]],[/(surface duo)/i],[c,[u,w],[h,g]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[c,[u,"Fairphone"],[h,m]],[/(u304aa)/i],[c,[u,"AT&T"],[h,m]],[/\bsie-(\w*)/i],[c,[u,"Siemens"],[h,m]],[/\b(rct\w+) b/i],[c,[u,"RCA"],[h,g]],[/\b(venue[\d ]{2,7}) b/i],[c,[u,"Dell"],[h,g]],[/\b(q(?:mv|ta)\w+) b/i],[c,[u,"Verizon"],[h,g]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[c,[u,"Barnes & Noble"],[h,g]],[/\b(tm\d{3}\w+) b/i],[c,[u,"NuVision"],[h,g]],[/\b(k88) b/i],[c,[u,"ZTE"],[h,g]],[/\b(nx\d{3}j) b/i],[c,[u,"ZTE"],[h,m]],[/\b(gen\d{3}) b.+49h/i],[c,[u,"Swiss"],[h,m]],[/\b(zur\d{3}) b/i],[c,[u,"Swiss"],[h,g]],[/\b((zeki)?tb.*\b) b/i],[c,[u,"Zeki"],[h,g]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[u,"Dragon Touch"],c,[h,g]],[/\b(ns-?\w{0,9}) b/i],[c,[u,"Insignia"],[h,g]],[/\b((nxa|next)-?\w{0,9}) b/i],[c,[u,"NextBook"],[h,g]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[u,"Voice"],c,[h,m]],[/\b(lvtel\-)?(v1[12]) b/i],[[u,"LvTel"],c,[h,m]],[/\b(ph-1) /i],[c,[u,"Essential"],[h,m]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[c,[u,"Envizen"],[h,g]],[/\b(trio[-\w\. ]+) b/i],[c,[u,"MachSpeed"],[h,g]],[/\btu_(1491) b/i],[c,[u,"Rotor"],[h,g]],[/(shield[\w ]+) b/i],[c,[u,"Nvidia"],[h,g]],[/(sprint) (\w+)/i],[u,c,[h,m]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[u,w],[h,m]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[c,[u,N],[h,g]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[c,[u,N],[h,m]],[/smart-tv.+(samsung)/i],[u,[h,y]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[u,L],[h,y]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[u,I],[h,y]],[/(apple) ?tv/i],[u,[c,S+" TV"],[h,y]],[/crkey/i],[[c,T+"cast"],[u,D],[h,y]],[/droid.+aft(\w+)( bui|\))/i],[c,[u,P],[h,y]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[c,[u,B],[h,y]],[/(bravia[\w ]+)( bui|\))/i],[c,[u,O],[h,y]],[/(mitv-\w{5}) bui/i],[c,[u,H],[h,y]],[/Hbbtv.*(technisat) (.*);/i],[u,c,[h,y]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[u,G],[c,G],[h,y]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[h,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[u,c,[h,p]],[/droid.+; (shield) bui/i],[c,[u,"Nvidia"],[h,p]],[/(playstation [345portablevi]+)/i],[c,[u,O],[h,p]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[c,[u,w],[h,p]],[/((pebble))app/i],[u,c,[h,b]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[c,[u,S],[h,b]],[/droid.+; (glass) \d/i],[c,[u,D],[h,b]],[/droid.+; (wt63?0{2,3})\)/i],[c,[u,N],[h,b]],[/(quest( 2| pro)?)/i],[c,[u,V],[h,b]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[u,[h,v]],[/(aeobc)\b/i],[c,[u,P],[h,v]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[c,[h,m]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[c,[h,g]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[h,g]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[h,m]],[/(android[-\w\. ]{0,9});.+buil/i],[c,[u,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[d,[f,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[d,[f,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[f,d],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[d,f]],os:[[/microsoft (windows) (vista|xp)/i],[f,d],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[f,[d,Z,j]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[d,Z,j],[f,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[d,/_/g,"."],[f,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[f,U],[d,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[d,f],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[f,d],[/\(bb(10);/i],[d,[f,C]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[d,[f,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[d,[f,F+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[d,[f,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[d,[f,"watchOS"]],[/crkey\/([\d\.]+)/i],[d,[f,T+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[f,Y],d],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[f,d],[/(sunos) ?([\w\.\d]*)/i],[[f,"Solaris"],d],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[f,d]]},$=function e(t,p){if((void 0===t?"undefined":r(t))===s&&(p=t,t=n),this,!(null!=(y=e)&&"undefined"!=typeof Symbol&&y[Symbol.hasInstance]?y[Symbol.hasInstance](this):this instanceof y))return new e(t,p).getResult();var y,b=(void 0===i?"undefined":r(i))!==o&&i.navigator?i.navigator:n,v=t||(b&&b.userAgent?b.userAgent:""),P=b&&b.userAgentData?b.userAgentData:n,S=p?function(e,t){var r={};for(var i in e)t[i]&&t[i].length%2==0?r[i]=t[i].concat(e[i]):r[i]=e[i];return r}(q,p):q,R=b&&b.userAgent==v;return this.getBrowser=function(){var e,t={};return t[f]=n,t[d]=n,J.call(t,v,S.browser),t[l]=(void 0===(e=t[d])?"undefined":r(e))===x?e.replace(/[^\d\.]/g,"").split(".")[0]:n,R&&b&&b.brave&&r(b.brave.isBrave)==a&&(t[f]="Brave"),t},this.getCPU=function(){var e={};return e[_]=n,J.call(e,v,S.cpu),e},this.getDevice=function(){var e={};return e[u]=n,e[c]=n,e[h]=n,J.call(e,v,S.device),R&&!e[h]&&P&&P.mobile&&(e[h]=m),R&&"Macintosh"==e[c]&&b&&r(b.standalone)!==o&&b.maxTouchPoints&&b.maxTouchPoints>2&&(e[c]="iPad",e[h]=g),e},this.getEngine=function(){var e={};return e[f]=n,e[d]=n,J.call(e,v,S.engine),e},this.getOS=function(){var e={};return e[f]=n,e[d]=n,J.call(e,v,S.os),R&&!e[f]&&P&&"Unknown"!=P.platform&&(e[f]=P.platform.replace(/chrome os/i,Y).replace(/macos/i,U)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return v},this.setUA=function(e){return v=(void 0===e?"undefined":r(e))===x&&e.length>500?G(e,500):e,this},this.setUA(v),this};$.VERSION="1.0.37",$.BROWSER=X([f,d,l]),$.CPU=X([_]),$.DEVICE=X([c,u,h,p,m,y,g,b,v]),$.ENGINE=$.OS=X([f,d]),r(t)!==o?(r(e)!==o&&e.exports&&(t=e.exports=$),t.UAParser=$):(void 0===i?"undefined":r(i))!==o&&(i.UAParser=$);var K=(void 0===i?"undefined":r(i))!==o&&(i.jQuery||i.Zepto);if(K&&!K.ua){var Q=new $;K.ua=Q.getResult(),K.ua.get=function(){return Q.getUA()},K.ua.set=function(e){Q.setUA(e);var t=Q.getResult();for(var r in t)K.ua[r]=t[r]}}}("object"===("undefined"==typeof window?"undefined":df(window))?window:Sf)}(Rf,Rf.exports);var Cf=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(Rf.exports),Ef=["attribute vec4 vertexPos;","attribute vec2 texturePos;","varying vec2 textureCoord;","void main()","{","gl_Position = vertexPos;","textureCoord = texturePos;","}"].join("\n"),Tf=["precision highp float;","varying highp vec2 textureCoord;","uniform sampler2D ySampler;","uniform sampler2D uSampler;","uniform sampler2D vSampler;","const mat4 YUV2RGB = mat4","(","1.1643828125, 0, 1.59602734375, -.87078515625,","1.1643828125, -.39176171875, -.81296875, .52959375,","1.1643828125, 2.017234375, 0, -1.081390625,","0, 0, 0, 1",");","void main(void) {","highp float y = texture2D(ySampler,  textureCoord).r;","highp float u = texture2D(uSampler,  textureCoord).r;","highp float v = texture2D(vSampler,  textureCoord).r;","gl_FragColor = vec4(y, u, v, 1) * YUV2RGB;","}"].join("\n");window.SuperRender=function(){function e(e){this.canvasElement=document.getElementById(e),this.initContextGL(),this.contextGL&&(this.YUVProgram=this.initProgram(Ef,Tf),this.initBuffers(),this.initTextures())}return e.prototype.initContextGL=function(){var e=this.canvasElement,t=null;try{t=e.getContext("webgl")||e.getContext("experimental-webgl")}catch(e){t=null}t&&"function"==typeof t.getParameter||(t=null),this.contextGL=t},e.prototype.initProgram=function(e,t){var r=this.contextGL,i=r.createShader(r.VERTEX_SHADER);r.shaderSource(i,e),r.compileShader(i),r.getShaderParameter(i,r.COMPILE_STATUS);var n=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(n,t),r.compileShader(n),r.getShaderParameter(n,r.COMPILE_STATUS);var a=r.createProgram();return r.attachShader(a,i),r.attachShader(a,n),r.linkProgram(a),r.getProgramParameter(a,r.LINK_STATUS),r.deleteShader(i),r.deleteShader(n),a},e.prototype.initBuffers=function(){var e=this.contextGL,t=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,t),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,1,-1,1,1,-1,-1,-1]),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null);var r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([1,0,0,0,1,1,0,1]),e.DYNAMIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),this.vertexPosBuffer=t,this.texturePosBuffer=r},e.prototype.initTexture=function(){var e=this.contextGL,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.bindTexture(e.TEXTURE_2D,null),t},e.prototype.initTextures=function(){var e=this.contextGL,t=this.YUVProgram;e.useProgram(t);var r=this.initTexture(),i=e.getUniformLocation(t,"ySampler");e.uniform1i(i,0),this.yTextureRef=r;var n=this.initTexture(),a=e.getUniformLocation(t,"uSampler");e.uniform1i(a,1),this.uTextureRef=n;var o=this.initTexture(),s=e.getUniformLocation(t,"vSampler");e.uniform1i(s,2),this.vTextureRef=o,e.useProgram(null)},e.prototype.SR_DisplayFrameData=function(e,t,r,i,n){if(!(e<=0||t<=0)){var a=this.contextGL;if(null==r)return a.clearColor(0,0,0,0),void a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT);var o=this.canvasElement;this.nWindowWidth=o.width,this.nWindowHeight=o.height;var s=this.nWindowWidth,x=this.nWindowHeight;a.clearColor(.8,.8,1,1),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.viewport(0,0,s,x),this.updateFrameData(e,t,r,i,n);var l=this.YUVProgram;a.useProgram(l);var c=this.vertexPosBuffer;a.bindBuffer(a.ARRAY_BUFFER,c);var f=a.getAttribLocation(l,"vertexPos");a.enableVertexAttribArray(f),a.vertexAttribPointer(f,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,null);var h=this.texturePosBuffer;a.bindBuffer(a.ARRAY_BUFFER,h);var u=a.getAttribLocation(l,"texturePos");a.enableVertexAttribArray(u),a.vertexAttribPointer(u,2,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,null),a.drawArrays(a.TRIANGLE_STRIP,0,4),a.disableVertexAttribArray(f),a.disableVertexAttribArray(u),a.useProgram(null)}},e.prototype.updateFrameData=function(e,t,r,i,n){var a=this.contextGL,o=this.yTextureRef,s=this.uTextureRef,x=this.vTextureRef,l=r;if(e==i&&t==n){var c=e*t,f=l.subarray(0,c);a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,o),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,e,t,0,a.LUMINANCE,a.UNSIGNED_BYTE,f);var h=e/2*t/2,u=l.subarray(e*t,e*t+h);a.activeTexture(a.TEXTURE2),a.bindTexture(a.TEXTURE_2D,x),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,e/2,t/2,0,a.LUMINANCE,a.UNSIGNED_BYTE,u);var d=h,_=l.subarray(e*t+e*t/4,e*t+e*t/4+d);a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,s),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,e/2,t/2,0,a.LUMINANCE,a.UNSIGNED_BYTE,_)}else{c=i*n,f=new Uint8Array(c);for(var p=0;p<n;p++)for(var m=l.subarray(p*e,p*e+i),g=0;g<i;g++)f[p*i+g]=m[g];for(a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,o),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,i,n,0,a.LUMINANCE,a.UNSIGNED_BYTE,f),f=null,m=null,h=i/2*n/2,u=new Uint8Array(h),p=0;p<n/2;p++){var y=l.subarray(e*t+p*e/2,e*t+p*e/2+i/2);for(g=0;g<i/2;g++)u[p*i/2+g]=y[g]}for(a.activeTexture(a.TEXTURE2),a.bindTexture(a.TEXTURE_2D,x),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,i/2,n/2,0,a.LUMINANCE,a.UNSIGNED_BYTE,u),u=null,y=null,d=h,_=new Uint8Array(d),p=0;p<n/2;p++){var b=l.subarray(e*t*5/4+p*e/2,e*t*5/4+p*e/2+i/2);for(g=0;g<i/2;g++)_[p*i/2+g]=b[g]}a.activeTexture(a.TEXTURE1),a.bindTexture(a.TEXTURE_2D,s),a.texImage2D(a.TEXTURE_2D,0,a.LUMINANCE,i/2,n/2,0,a.LUMINANCE,a.UNSIGNED_BYTE,_),_=null,b=null}},e.prototype.SR_SetDisplayRect=function(e){var t=this.contextGL,r=this.nWindowWidth,i=this.nWindowHeight,n=null;if(e&&r>0&&i>0){var a=e.left/r,o=e.top/i,s=e.right/r,x=e.bottom/i;n=new Float32Array([s,o,a,o,s,x,a,x])}else n=new Float32Array([1,0,0,0,1,1,0,1]);var l=this.texturePosBuffer;t.bindBuffer(t.ARRAY_BUFFER,l),t.bufferSubData(t.ARRAY_BUFFER,0,n),t.bindBuffer(t.ARRAY_BUFFER,null)},e.prototype.SR_Destroy=function(){var e=this.contextGL,t=this.YUVProgram;e.deleteProgram(t);var r=this.vertexPosBuffer,i=this.texturePosBuffer;e.deleteBuffer(r),e.deleteBuffer(i);var n=this.yTextureRef,a=this.uTextureRef,o=this.vTextureRef;e.deleteTexture(n),e.deleteTexture(a),e.deleteTexture(o)},e}(),function(){var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),r=(e=void 0,function(t){return t&&(e=t),e});function i(){if(function(e,t){if(r=e,!(null!=(i=t)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](r):r instanceof i))throw new TypeError("Cannot call a class as a function");var r,i}(this,i),r())return r();if(void 0!==i.unique)return i.unique;i.unique=this,this.oAudioContext=null,this.currentVolume=80,this.bSetVolume=!1,this.gainNode=null,this.iWndNum=-1,this.mVolumes=new Map;var e=window.AudioContext||window.webkitAudioContext;this.oAudioContext=new e,this.writeString=function(e,t,r){for(var i=0;i<r.length;i++)e.setUint8(t+i,r.charCodeAt(i))},this.setBufferToDataview=function(e,t,r){for(var i=0;i<r.length;i++,t++)e.setUint8(t,r[i])},r(this)}t(i,[{key:"Play",value:function(e,t,r){var i=new ArrayBuffer(44+t),n=new DataView(i),a=r.samplesPerSec,o=r.channels,s=r.bitsPerSample;this.writeString(n,0,"RIFF"),n.setUint32(4,32+2*t,!0),this.writeString(n,8,"WAVE"),this.writeString(n,12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,o,!0),n.setUint32(24,a,!0),n.setUint32(28,2*a,!0),n.setUint16(32,o*s/8,!0),n.setUint16(34,s,!0),this.writeString(n,36,"data"),n.setUint32(40,t,!0),this.setBufferToDataview(n,44,e);var x=this;return this.oAudioContext.decodeAudioData(n.buffer,(function(e){var t=x.oAudioContext.createBufferSource();if(null==t)return-1;t.buffer=e,t.start(0),(null==x.gainNode||x.bSetVolume)&&(x.gainNode=x.oAudioContext.createGain(),x.bSetVolume=!1),x.gainNode.gain.value=x.currentVolume/100,x.gainNode.connect(x.oAudioContext.destination),t.connect(x.gainNode)}),(function(e){return-1})),0}},{key:"Stop",value:function(){return null!=this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),!0}},{key:"SetVolume",value:function(e){return this.bSetVolume=!0,this.currentVolume=e,this.mVolumes.set(this.iWndNum,this.currentVolume),!0}},{key:"SetWndNum",value:function(e){this.iWndNum=e;var t=this.mVolumes.get(e);return null==t&&(t=80),this.currentVolume=t,!0}},{key:"GetVolume",value:function(){var e=this.mVolumes.get(this.iWndNum);return null==e&&(e=80),e}}]),window.AudioRenderer=i}();var Ff="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function Df(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mf={exports:{}};!function(e){!function(t,r){e.exports=t.document?r(t,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return r(e)}}("undefined"!=typeof window?window:Ff,(function(e,t){var r=[],i=Object.getPrototypeOf,n=r.slice,a=r.flat?function(e){return r.flat.call(e)}:function(e){return r.concat.apply([],e)},o=r.push,s=r.indexOf,x={},l=x.toString,c=x.hasOwnProperty,f=c.toString,h=f.call(Object),u={},d=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},_=function(e){return null!=e&&e===e.window},p=e.document,m={type:!0,src:!0,nonce:!0,noModule:!0};function g(e,t,r){var i,n,a=(r=r||p).createElement("script");if(a.text=e,t)for(i in m)(n=t[i]||t.getAttribute&&t.getAttribute(i))&&a.setAttribute(i,n);r.head.appendChild(a).parentNode.removeChild(a)}function y(e){return null==e?e+"":"object"==df(e)||"function"==typeof e?x[l.call(e)]||"object":df(e)}var b="3.7.1",v=/HTML$/i,P=function e(t,r){return new e.fn.init(t,r)};function S(e){var t=!!e&&"length"in e&&e.length,r=y(e);return!d(e)&&!_(e)&&("array"===r||0===t||"number"==typeof t&&t>0&&t-1 in e)}function R(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}P.fn=P.prototype={jquery:b,constructor:P,length:0,toArray:function(){return n.call(this)},get:function(e){return null==e?n.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=P.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return P.each(this,e)},map:function(e){return this.pushStack(P.map(this,(function(t,r){return e.call(t,r,t)})))},slice:function(){return this.pushStack(n.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(P.grep(this,(function(e,t){return(t+1)%2})))},odd:function(){return this.pushStack(P.grep(this,(function(e,t){return t%2})))},eq:function(e){var t=this.length,r=+e+(e<0?t:0);return this.pushStack(r>=0&&r<t?[this[r]]:[])},end:function(){return this.prevObject||this.constructor()},push:o,sort:r.sort,splice:r.splice},P.extend=P.fn.extend=function(){var e,t,r,i,n,a,o=arguments[0]||{},s=1,x=arguments.length,l=!1;for("boolean"==typeof o&&(l=o,o=arguments[s]||{},s++),"object"==df(o)||d(o)||(o={}),s===x&&(o=this,s--);s<x;s++)if(null!=(e=arguments[s]))for(t in e)i=e[t],"__proto__"!==t&&o!==i&&(l&&i&&(P.isPlainObject(i)||(n=Array.isArray(i)))?(r=o[t],a=n&&!Array.isArray(r)?[]:n||P.isPlainObject(r)?r:{},n=!1,o[t]=P.extend(l,a,i)):void 0!==i&&(o[t]=i));return o},P.extend({expando:"jQuery"+(b+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,r;return!(!e||"[object Object]"!==l.call(e)||(t=i(e))&&("function"!=typeof(r=c.call(t,"constructor")&&t.constructor)||f.call(r)!==h))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,r){g(e,{nonce:t&&t.nonce},r)},each:function(e,t){var r,i=0;if(S(e))for(r=e.length;i<r&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},text:function(e){var t,r="",i=0,n=e.nodeType;if(!n)for(;t=e[i++];)r+=P.text(t);return 1===n||11===n?e.textContent:9===n?e.documentElement.textContent:3===n||4===n?e.nodeValue:r},makeArray:function(e,t){var r=t||[];return null!=e&&(S(Object(e))?P.merge(r,"string"==typeof e?[e]:e):o.call(r,e)),r},inArray:function(e,t,r){return null==t?-1:s.call(t,e,r)},isXMLDoc:function(e){var t=e&&e.namespaceURI,r=e&&(e.ownerDocument||e).documentElement;return!v.test(t||r&&r.nodeName||"HTML")},merge:function(e,t){for(var r=+t.length,i=0,n=e.length;i<r;i++)e[n++]=t[i];return e.length=n,e},grep:function(e,t,r){for(var i=[],n=0,a=e.length,o=!r;n<a;n++)!t(e[n],n)!==o&&i.push(e[n]);return i},map:function(e,t,r){var i,n,o=0,s=[];if(S(e))for(i=e.length;o<i;o++)null!=(n=t(e[o],o,r))&&s.push(n);else for(o in e)null!=(n=t(e[o],o,r))&&s.push(n);return a(s)},guid:1,support:u}),"function"==typeof Symbol&&(P.fn[Symbol.iterator]=r[Symbol.iterator]),P.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(e,t){x["[object "+t+"]"]=t.toLowerCase()}));var C=r.pop,E=r.sort,T=r.splice,F="[\\x20\\t\\r\\n\\f]",D=new RegExp("^"+F+"+|((?:^|[^\\\\])(?:\\\\.)*)"+F+"+$","g");P.contains=function(e,t){var r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(e.contains?e.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))};var M=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function I(e,t){return t?"\0"===e?"�":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e}P.escapeSelector=function(e){return(e+"").replace(M,I)};var w=p,A=o;!function(){var t,i,a,o,x,l,f,h,d,_,p=A,m=P.expando,g=0,y=0,b=ee(),v=ee(),S=ee(),M=ee(),I=function(e,t){return e===t&&(x=!0),0},k="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="(?:\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",B="\\["+F+"*("+L+")(?:"+F+"*([*^$|!~]?=)"+F+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+L+"))|)"+F+"*\\]",O=":("+L+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+B+")*)|.*)\\)|)",H=new RegExp(F+"+","g"),N=new RegExp("^"+F+"*,"+F+"*"),V=new RegExp("^"+F+"*([>+~]|"+F+")"+F+"*"),Y=new RegExp(F+"|>"),U=new RegExp(O),X=new RegExp("^"+L+"$"),W={ID:new RegExp("^#("+L+")"),CLASS:new RegExp("^\\.("+L+")"),TAG:new RegExp("^("+L+"|[*])"),ATTR:new RegExp("^"+B),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+F+"*(even|odd|(([+-]|)(\\d*)n|)"+F+"*(?:([+-]|)"+F+"*(\\d+)|))"+F+"*\\)|)","i"),bool:new RegExp("^(?:"+k+")$","i"),needsContext:new RegExp("^"+F+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+F+"*((?:-\\d)?\\d*)"+F+"*\\)|)(?=[^-]|$)","i")},z=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,j=new RegExp("\\\\[\\da-fA-F]{1,6}"+F+"?|\\\\([^\\r\\n\\f])","g"),q=function(e,t){var r="0x"+e.slice(1)-65536;return t||(r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320))},$=function(){xe()},K=he((function(e){return!0===e.disabled&&R(e,"fieldset")}),{dir:"parentNode",next:"legend"});try{p.apply(r=n.call(w.childNodes),w.childNodes),r[w.childNodes.length].nodeType}catch(e){p={apply:function(e,t){A.apply(e,n.call(t))},call:function(e){A.apply(e,n.call(arguments,1))}}}function Q(e,t,r,i){var n,a,o,s,x,c,f,_=t&&t.ownerDocument,g=t?t.nodeType:9;if(r=r||[],"string"!=typeof e||!e||1!==g&&9!==g&&11!==g)return r;if(!i&&(xe(t),t=t||l,h)){if(11!==g&&(x=J.exec(e)))if(n=x[1]){if(9===g){if(!(o=t.getElementById(n)))return r;if(o.id===n)return p.call(r,o),r}else if(_&&(o=_.getElementById(n))&&Q.contains(t,o)&&o.id===n)return p.call(r,o),r}else{if(x[2])return p.apply(r,t.getElementsByTagName(e)),r;if((n=x[3])&&t.getElementsByClassName)return p.apply(r,t.getElementsByClassName(n)),r}if(!(M[e+" "]||d&&d.test(e))){if(f=e,_=t,1===g&&(Y.test(e)||V.test(e))){for((_=Z.test(e)&&se(t.parentNode)||t)==t&&u.scope||((s=t.getAttribute("id"))?s=P.escapeSelector(s):t.setAttribute("id",s=m)),a=(c=ce(e)).length;a--;)c[a]=(s?"#"+s:":scope")+" "+fe(c[a]);f=c.join(",")}try{return p.apply(r,_.querySelectorAll(f)),r}catch(t){M(e,!0)}finally{s===m&&t.removeAttribute("id")}}}return ge(e.replace(D,"$1"),t,r,i)}function ee(){var e=[];return function t(r,n){return e.push(r+" ")>i.cacheLength&&delete t[e.shift()],t[r+" "]=n}}function te(e){return e[m]=!0,e}function re(e){var t=l.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ie(e){return function(t){return R(t,"input")&&t.type===e}}function ne(e){return function(t){return(R(t,"input")||R(t,"button"))&&t.type===e}}function ae(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&K(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function oe(e){return te((function(t){return t=+t,te((function(r,i){for(var n,a=e([],r.length,t),o=a.length;o--;)r[n=a[o]]&&(r[n]=!(i[n]=r[n]))}))}))}function se(e){return e&&void 0!==e.getElementsByTagName&&e}function xe(e){var t,r=e?e.ownerDocument||e:w;return r!=l&&9===r.nodeType&&r.documentElement?(f=(l=r).documentElement,h=!P.isXMLDoc(l),_=f.matches||f.webkitMatchesSelector||f.msMatchesSelector,f.msMatchesSelector&&w!=l&&(t=l.defaultView)&&t.top!==t&&t.addEventListener("unload",$),u.getById=re((function(e){return f.appendChild(e).id=P.expando,!l.getElementsByName||!l.getElementsByName(P.expando).length})),u.disconnectedMatch=re((function(e){return _.call(e,"*")})),u.scope=re((function(){return l.querySelectorAll(":scope")})),u.cssHas=re((function(){try{return l.querySelector(":has(*,:jqfake)"),!1}catch(e){return!0}})),u.getById?(i.filter.ID=function(e){var t=e.replace(j,q);return function(e){return e.getAttribute("id")===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var r=t.getElementById(e);return r?[r]:[]}}):(i.filter.ID=function(e){var t=e.replace(j,q);return function(e){var r=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return r&&r.value===t}},i.find.ID=function(e,t){if(void 0!==t.getElementById&&h){var r,i,n,a=t.getElementById(e);if(a){if((r=a.getAttributeNode("id"))&&r.value===e)return[a];for(n=t.getElementsByName(e),i=0;a=n[i++];)if((r=a.getAttributeNode("id"))&&r.value===e)return[a]}return[]}}),i.find.TAG=function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):t.querySelectorAll(e)},i.find.CLASS=function(e,t){if(void 0!==t.getElementsByClassName&&h)return t.getElementsByClassName(e)},d=[],re((function(e){var t;f.appendChild(e).innerHTML="<a id='"+m+"' href='' disabled='disabled'></a><select id='"+m+"-\r\\' disabled='disabled'><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+F+"*(?:value|"+k+")"),e.querySelectorAll("[id~="+m+"-]").length||d.push("~="),e.querySelectorAll("a#"+m+"+*").length||d.push(".#.+[+~]"),e.querySelectorAll(":checked").length||d.push(":checked"),(t=l.createElement("input")).setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),f.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(t=l.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||d.push("\\["+F+"*name"+F+"*="+F+"*(?:''|\"\")")})),u.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),I=function(e,t){if(e===t)return x=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(1&(r=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!u.sortDetached&&t.compareDocumentPosition(e)===r?e===l||e.ownerDocument==w&&Q.contains(w,e)?-1:t===l||t.ownerDocument==w&&Q.contains(w,t)?1:o?s.call(o,e)-s.call(o,t):0:4&r?-1:1)},l):l}for(t in Q.matches=function(e,t){return Q(e,null,null,t)},Q.matchesSelector=function(e,t){if(xe(e),h&&!M[t+" "]&&(!d||!d.test(t)))try{var r=_.call(e,t);if(r||u.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){M(t,!0)}return Q(t,l,null,[e]).length>0},Q.contains=function(e,t){return(e.ownerDocument||e)!=l&&xe(e),P.contains(e,t)},Q.attr=function(e,t){(e.ownerDocument||e)!=l&&xe(e);var r=i.attrHandle[t.toLowerCase()],n=r&&c.call(i.attrHandle,t.toLowerCase())?r(e,t,!h):void 0;return void 0!==n?n:e.getAttribute(t)},Q.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},P.uniqueSort=function(e){var t,r=[],i=0,a=0;if(x=!u.sortStable,o=!u.sortStable&&n.call(e,0),E.call(e,I),x){for(;t=e[a++];)t===e[a]&&(i=r.push(a));for(;i--;)T.call(e,r[i],1)}return o=null,e},P.fn.uniqueSort=function(){return this.pushStack(P.uniqueSort(n.apply(this)))},i=P.expr={cacheLength:50,createPseudo:te,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(j,q),e[3]=(e[3]||e[4]||e[5]||"").replace(j,q),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||Q.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&Q.error(e[0]),e},PSEUDO:function(e){var t,r=!e[6]&&e[2];return W.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":r&&U.test(r)&&(t=ce(r,!0))&&(t=r.indexOf(")",r.length-t)-r.length)&&(e[0]=e[0].slice(0,t),e[2]=r.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(j,q).toLowerCase();return"*"===e?function(){return!0}:function(e){return R(e,t)}},CLASS:function(e){var t=b[e+" "];return t||(t=new RegExp("(^|"+F+")"+e+"("+F+"|$)"))&&b(e,(function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")}))},ATTR:function(e,t,r){return function(i){var n=Q.attr(i,e);return null==n?"!="===t:!t||(n+="","="===t?n===r:"!="===t?n!==r:"^="===t?r&&0===n.indexOf(r):"*="===t?r&&n.indexOf(r)>-1:"$="===t?r&&n.slice(-r.length)===r:"~="===t?(" "+n.replace(H," ")+" ").indexOf(r)>-1:"|="===t&&(n===r||n.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,r,i,n){var a="nth"!==e.slice(0,3),o="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===n?function(e){return!!e.parentNode}:function(t,r,x){var l,c,f,h,u,d=a!==o?"nextSibling":"previousSibling",_=t.parentNode,p=s&&t.nodeName.toLowerCase(),y=!x&&!s,b=!1;if(_){if(a){for(;d;){for(f=t;f=f[d];)if(s?R(f,p):1===f.nodeType)return!1;u=d="only"===e&&!u&&"nextSibling"}return!0}if(u=[o?_.firstChild:_.lastChild],o&&y){for(b=(h=(l=(c=_[m]||(_[m]={}))[e]||[])[0]===g&&l[1])&&l[2],f=h&&_.childNodes[h];f=++h&&f&&f[d]||(b=h=0)||u.pop();)if(1===f.nodeType&&++b&&f===t){c[e]=[g,h,b];break}}else if(y&&(b=h=(l=(c=t[m]||(t[m]={}))[e]||[])[0]===g&&l[1]),!1===b)for(;(f=++h&&f&&f[d]||(b=h=0)||u.pop())&&(!(s?R(f,p):1===f.nodeType)||!++b||(y&&((c=f[m]||(f[m]={}))[e]=[g,b]),f!==t)););return(b-=n)===i||b%i==0&&b/i>=0}}},PSEUDO:function(e,t){var r,n=i.pseudos[e]||i.setFilters[e.toLowerCase()]||Q.error("unsupported pseudo: "+e);return n[m]?n(t):n.length>1?(r=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?te((function(e,r){for(var i,a=n(e,t),o=a.length;o--;)e[i=s.call(e,a[o])]=!(r[i]=a[o])})):function(e){return n(e,0,r)}):n}},pseudos:{not:te((function(e){var t=[],r=[],i=me(e.replace(D,"$1"));return i[m]?te((function(e,t,r,n){for(var a,o=i(e,null,n,[]),s=e.length;s--;)(a=o[s])&&(e[s]=!(t[s]=a))})):function(e,n,a){return t[0]=e,i(t,null,a,r),t[0]=null,!r.pop()}})),has:te((function(e){return function(t){return Q(e,t).length>0}})),contains:te((function(e){return e=e.replace(j,q),function(t){return(t.textContent||P.text(t)).indexOf(e)>-1}})),lang:te((function(e){return X.test(e||"")||Q.error("unsupported lang: "+e),e=e.replace(j,q).toLowerCase(),function(t){var r;do{if(r=h?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(r=r.toLowerCase())===e||0===r.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}})),target:function(t){var r=e.location&&e.location.hash;return r&&r.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===function(){try{return l.activeElement}catch(e){}}()&&l.hasFocus()&&!!(e.type||e.href||~e.tabIndex)},enabled:ae(!1),disabled:ae(!0),checked:function(e){return R(e,"input")&&!!e.checked||R(e,"option")&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return z.test(e.nodeName)},button:function(e){return R(e,"input")&&"button"===e.type||R(e,"button")},text:function(e){var t;return R(e,"input")&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:oe((function(){return[0]})),last:oe((function(e,t){return[t-1]})),eq:oe((function(e,t,r){return[r<0?r+t:r]})),even:oe((function(e,t){for(var r=0;r<t;r+=2)e.push(r);return e})),odd:oe((function(e,t){for(var r=1;r<t;r+=2)e.push(r);return e})),lt:oe((function(e,t,r){var i;for(i=r<0?r+t:r>t?t:r;--i>=0;)e.push(i);return e})),gt:oe((function(e,t,r){for(var i=r<0?r+t:r;++i<t;)e.push(i);return e}))}},i.pseudos.nth=i.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[t]=ie(t);for(t in{submit:!0,reset:!0})i.pseudos[t]=ne(t);function le(){}function ce(e,t){var r,n,a,o,s,x,l,c=v[e+" "];if(c)return t?0:c.slice(0);for(s=e,x=[],l=i.preFilter;s;){for(o in r&&!(n=N.exec(s))||(n&&(s=s.slice(n[0].length)||s),x.push(a=[])),r=!1,(n=V.exec(s))&&(r=n.shift(),a.push({value:r,type:n[0].replace(D," ")}),s=s.slice(r.length)),i.filter)!(n=W[o].exec(s))||l[o]&&!(n=l[o](n))||(r=n.shift(),a.push({value:r,type:o,matches:n}),s=s.slice(r.length));if(!r)break}return t?s.length:s?Q.error(e):v(e,x).slice(0)}function fe(e){for(var t=0,r=e.length,i="";t<r;t++)i+=e[t].value;return i}function he(e,t,r){var i=t.dir,n=t.next,a=n||i,o=r&&"parentNode"===a,s=y++;return t.first?function(t,r,n){for(;t=t[i];)if(1===t.nodeType||o)return e(t,r,n);return!1}:function(t,r,x){var l,c,f=[g,s];if(x){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,r,x))return!0}else for(;t=t[i];)if(1===t.nodeType||o)if(c=t[m]||(t[m]={}),n&&R(t,n))t=t[i]||t;else{if((l=c[a])&&l[0]===g&&l[1]===s)return f[2]=l[2];if(c[a]=f,f[2]=e(t,r,x))return!0}return!1}}function ue(e){return e.length>1?function(t,r,i){for(var n=e.length;n--;)if(!e[n](t,r,i))return!1;return!0}:e[0]}function de(e,t,r,i,n){for(var a,o=[],s=0,x=e.length,l=null!=t;s<x;s++)(a=e[s])&&(r&&!r(a,i,n)||(o.push(a),l&&t.push(s)));return o}function _e(e,t,r,i,n,a){return i&&!i[m]&&(i=_e(i)),n&&!n[m]&&(n=_e(n,a)),te((function(a,o,x,l){var c,f,h,u,d=[],_=[],m=o.length,g=a||function(e,t,r){for(var i=0,n=t.length;i<n;i++)Q(e,t[i],r);return r}(t||"*",x.nodeType?[x]:x,[]),y=!e||!a&&t?g:de(g,d,e,x,l);if(r?r(y,u=n||(a?e:m||i)?[]:o,x,l):u=y,i)for(c=de(u,_),i(c,[],x,l),f=c.length;f--;)(h=c[f])&&(u[_[f]]=!(y[_[f]]=h));if(a){if(n||e){if(n){for(c=[],f=u.length;f--;)(h=u[f])&&c.push(y[f]=h);n(null,u=[],c,l)}for(f=u.length;f--;)(h=u[f])&&(c=n?s.call(a,h):d[f])>-1&&(a[c]=!(o[c]=h))}}else u=de(u===o?u.splice(m,u.length):u),n?n(null,o,u,l):p.apply(o,u)}))}function pe(e){for(var t,r,n,o=e.length,x=i.relative[e[0].type],l=x||i.relative[" "],c=x?1:0,f=he((function(e){return e===t}),l,!0),h=he((function(e){return s.call(t,e)>-1}),l,!0),u=[function(e,r,i){var n=!x&&(i||r!=a)||((t=r).nodeType?f(e,r,i):h(e,r,i));return t=null,n}];c<o;c++)if(r=i.relative[e[c].type])u=[he(ue(u),r)];else{if((r=i.filter[e[c].type].apply(null,e[c].matches))[m]){for(n=++c;n<o&&!i.relative[e[n].type];n++);return _e(c>1&&ue(u),c>1&&fe(e.slice(0,c-1).concat({value:" "===e[c-2].type?"*":""})).replace(D,"$1"),r,c<n&&pe(e.slice(c,n)),n<o&&pe(e=e.slice(n)),n<o&&fe(e))}u.push(r)}return ue(u)}function me(e,t){var r,n=[],o=[],s=S[e+" "];if(!s){for(t||(t=ce(e)),r=t.length;r--;)(s=pe(t[r]))[m]?n.push(s):o.push(s);s=S(e,function(e,t){var r=t.length>0,n=e.length>0,o=function(o,s,x,c,f){var u,d,_,m=0,y="0",b=o&&[],v=[],S=a,R=o||n&&i.find.TAG("*",f),E=g+=null==S?1:Math.random()||.1,T=R.length;for(f&&(a=s==l||s||f);y!==T&&null!=(u=R[y]);y++){if(n&&u){for(d=0,s||u.ownerDocument==l||(xe(u),x=!h);_=e[d++];)if(_(u,s||l,x)){p.call(c,u);break}f&&(g=E)}r&&((u=!_&&u)&&m--,o&&b.push(u))}if(m+=y,r&&y!==m){for(d=0;_=t[d++];)_(b,v,s,x);if(o){if(m>0)for(;y--;)b[y]||v[y]||(v[y]=C.call(c));v=de(v)}p.apply(c,v),f&&!o&&v.length>0&&m+t.length>1&&P.uniqueSort(c)}return f&&(g=E,a=S),b};return r?te(o):o}(o,n)),s.selector=e}return s}function ge(e,t,r,n){var a,o,s,x,l,c="function"==typeof e&&e,f=!n&&ce(e=c.selector||e);if(r=r||[],1===f.length){if((o=f[0]=f[0].slice(0)).length>2&&"ID"===(s=o[0]).type&&9===t.nodeType&&h&&i.relative[o[1].type]){if(!(t=(i.find.ID(s.matches[0].replace(j,q),t)||[])[0]))return r;c&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(a=W.needsContext.test(e)?0:o.length;a--&&(s=o[a],!i.relative[x=s.type]);)if((l=i.find[x])&&(n=l(s.matches[0].replace(j,q),Z.test(o[0].type)&&se(t.parentNode)||t))){if(o.splice(a,1),!(e=n.length&&fe(o)))return p.apply(r,n),r;break}}return(c||me(e,f))(n,t,!h,r,!t||Z.test(e)&&se(t.parentNode)||t),r}le.prototype=i.filters=i.pseudos,i.setFilters=new le,u.sortStable=m.split("").sort(I).join("")===m,xe(),u.sortDetached=re((function(e){return 1&e.compareDocumentPosition(l.createElement("fieldset"))})),P.find=Q,P.expr[":"]=P.expr.pseudos,P.unique=P.uniqueSort,Q.compile=me,Q.select=ge,Q.setDocument=xe,Q.tokenize=ce,Q.escape=P.escapeSelector,Q.getText=P.text,Q.isXML=P.isXMLDoc,Q.selectors=P.expr,Q.support=P.support,Q.uniqueSort=P.uniqueSort}();var k=function(e,t,r){for(var i=[],n=void 0!==r;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(n&&P(e).is(r))break;i.push(e)}return i},L=function(e,t){for(var r=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&r.push(e);return r},B=P.expr.match.needsContext,O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function H(e,t,r){return d(t)?P.grep(e,(function(e,i){return!!t.call(e,i,e)!==r})):t.nodeType?P.grep(e,(function(e){return e===t!==r})):"string"!=typeof t?P.grep(e,(function(e){return s.call(t,e)>-1!==r})):P.filter(t,e,r)}P.filter=function(e,t,r){var i=t[0];return r&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?P.find.matchesSelector(i,e)?[i]:[]:P.find.matches(e,P.grep(t,(function(e){return 1===e.nodeType})))},P.fn.extend({find:function(e){var t,r,i=this.length,n=this;if("string"!=typeof e)return this.pushStack(P(e).filter((function(){for(t=0;t<i;t++)if(P.contains(n[t],this))return!0})));for(r=this.pushStack([]),t=0;t<i;t++)P.find(e,n[t],r);return i>1?P.uniqueSort(r):r},filter:function(e){return this.pushStack(H(this,e||[],!1))},not:function(e){return this.pushStack(H(this,e||[],!0))},is:function(e){return!!H(this,"string"==typeof e&&B.test(e)?P(e):e||[],!1).length}});var N,V=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,Y=P.fn.init=function(e,t,r){var i,n;if(!e)return this;if(r=r||N,"string"==typeof e){if(!(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:V.exec(e))||!i[1]&&t)return!t||t.jquery?(t||r).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof P?t[0]:t,P.merge(this,P.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:p,!0)),O.test(i[1])&&P.isPlainObject(t))for(i in t)d(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return(n=p.getElementById(i[2]))&&(this[0]=n,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):d(e)?void 0!==r.ready?r.ready(e):e(P):P.makeArray(e,this)};Y.prototype=P.fn,N=P(p);var U=/^(?:parents|prev(?:Until|All))/,X={children:!0,contents:!0,next:!0,prev:!0};function W(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}P.fn.extend({has:function(e){var t=P(e,this),r=t.length;return this.filter((function(){for(var e=0;e<r;e++)if(P.contains(this,t[e]))return!0}))},closest:function(e,t){var r,i=0,n=this.length,a=[],o="string"!=typeof e&&P(e);if(!B.test(e))for(;i<n;i++)for(r=this[i];r&&r!==t;r=r.parentNode)if(r.nodeType<11&&(o?o.index(r)>-1:1===r.nodeType&&P.find.matchesSelector(r,e))){a.push(r);break}return this.pushStack(a.length>1?P.uniqueSort(a):a)},index:function(e){return e?"string"==typeof e?s.call(P(e),this[0]):s.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(P.uniqueSort(P.merge(this.get(),P(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),P.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return k(e,"parentNode")},parentsUntil:function(e,t,r){return k(e,"parentNode",r)},next:function(e){return W(e,"nextSibling")},prev:function(e){return W(e,"previousSibling")},nextAll:function(e){return k(e,"nextSibling")},prevAll:function(e){return k(e,"previousSibling")},nextUntil:function(e,t,r){return k(e,"nextSibling",r)},prevUntil:function(e,t,r){return k(e,"previousSibling",r)},siblings:function(e){return L((e.parentNode||{}).firstChild,e)},children:function(e){return L(e.firstChild)},contents:function(e){return null!=e.contentDocument&&i(e.contentDocument)?e.contentDocument:(R(e,"template")&&(e=e.content||e),P.merge([],e.childNodes))}},(function(e,t){P.fn[e]=function(r,i){var n=P.map(this,t,r);return"Until"!==e.slice(-5)&&(i=r),i&&"string"==typeof i&&(n=P.filter(i,n)),this.length>1&&(X[e]||P.uniqueSort(n),U.test(e)&&n.reverse()),this.pushStack(n)}}));var z=/[^\x20\t\r\n\f]+/g;function G(e){return e}function J(e){throw e}function Z(e,t,r,i){var n;try{e&&d(n=e.promise)?n.call(e).done(t).fail(r):e&&d(n=e.then)?n.call(e,t,r):t.apply(void 0,[e].slice(i))}catch(e){r.apply(void 0,[e])}}P.Callbacks=function(e){e="string"==typeof e?function(e){var t={};return P.each(e.match(z)||[],(function(e,r){t[r]=!0})),t}(e):P.extend({},e);var t,r,i,n,a=[],o=[],s=-1,x=function(){for(n=n||e.once,i=t=!0;o.length;s=-1)for(r=o.shift();++s<a.length;)!1===a[s].apply(r[0],r[1])&&e.stopOnFalse&&(s=a.length,r=!1);e.memory||(r=!1),t=!1,n&&(a=r?[]:"")},l={add:function(){return a&&(r&&!t&&(s=a.length-1,o.push(r)),function t(r){P.each(r,(function(r,i){d(i)?e.unique&&l.has(i)||a.push(i):i&&i.length&&"string"!==y(i)&&t(i)}))}(arguments),r&&!t&&x()),this},remove:function(){return P.each(arguments,(function(e,t){for(var r;(r=P.inArray(t,a,r))>-1;)a.splice(r,1),r<=s&&s--})),this},has:function(e){return e?P.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return n=o=[],a=r="",this},disabled:function(){return!a},lock:function(){return n=o=[],r||t||(a=r=""),this},locked:function(){return!!n},fireWith:function(e,r){return n||(r=[e,(r=r||[]).slice?r.slice():r],o.push(r),t||x()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!i}};return l},P.extend({Deferred:function(t){var r=[["notify","progress",P.Callbacks("memory"),P.Callbacks("memory"),2],["resolve","done",P.Callbacks("once memory"),P.Callbacks("once memory"),0,"resolved"],["reject","fail",P.Callbacks("once memory"),P.Callbacks("once memory"),1,"rejected"]],i="pending",n={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},catch:function(e){return n.then(null,e)},pipe:function(){var e=arguments;return P.Deferred((function(t){P.each(r,(function(r,i){var n=d(e[i[4]])&&e[i[4]];a[i[1]]((function(){var e=n&&n.apply(this,arguments);e&&d(e.promise)?e.promise().progress(t.notify).done(t.resolve).fail(t.reject):t[i[0]+"With"](this,n?[e]:arguments)}))})),e=null})).promise()},then:function(t,i,n){var a=0;function o(t,r,i,n){return function(){var s=this,x=arguments,l=function(){var e,l;if(!(t<a)){if((e=i.apply(s,x))===r.promise())throw new TypeError("Thenable self-resolution");l=e&&("object"==df(e)||"function"==typeof e)&&e.then,d(l)?n?l.call(e,o(a,r,G,n),o(a,r,J,n)):(a++,l.call(e,o(a,r,G,n),o(a,r,J,n),o(a,r,G,r.notifyWith))):(i!==G&&(s=void 0,x=[e]),(n||r.resolveWith)(s,x))}},c=n?l:function(){try{l()}catch(e){P.Deferred.exceptionHook&&P.Deferred.exceptionHook(e,c.error),t+1>=a&&(i!==J&&(s=void 0,x=[e]),r.rejectWith(s,x))}};t?c():(P.Deferred.getErrorHook?c.error=P.Deferred.getErrorHook():P.Deferred.getStackHook&&(c.error=P.Deferred.getStackHook()),e.setTimeout(c))}}return P.Deferred((function(e){r[0][3].add(o(0,e,d(n)?n:G,e.notifyWith)),r[1][3].add(o(0,e,d(t)?t:G)),r[2][3].add(o(0,e,d(i)?i:J))})).promise()},promise:function(e){return null!=e?P.extend(e,n):n}},a={};return P.each(r,(function(e,t){var o=t[2],s=t[5];n[t[1]]=o.add,s&&o.add((function(){i=s}),r[3-e][2].disable,r[3-e][3].disable,r[0][2].lock,r[0][3].lock),o.add(t[3].fire),a[t[0]]=function(){return a[t[0]+"With"](this===a?void 0:this,arguments),this},a[t[0]+"With"]=o.fireWith})),n.promise(a),t&&t.call(a,a),a},when:function(e){var t=arguments.length,r=t,i=Array(r),a=n.call(arguments),o=P.Deferred(),s=function(e){return function(r){i[e]=this,a[e]=arguments.length>1?n.call(arguments):r,--t||o.resolveWith(i,a)}};if(t<=1&&(Z(e,o.done(s(r)).resolve,o.reject,!t),"pending"===o.state()||d(a[r]&&a[r].then)))return o.then();for(;r--;)Z(a[r],s(r),o.reject);return o.promise()}});var j=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;P.Deferred.exceptionHook=function(t,r){e.console&&e.console.warn&&t&&j.test(t.name)&&e.console.warn("jQuery.Deferred exception: "+t.message,t.stack,r)},P.readyException=function(t){e.setTimeout((function(){throw t}))};var q=P.Deferred();function $(){p.removeEventListener("DOMContentLoaded",$),e.removeEventListener("load",$),P.ready()}P.fn.ready=function(e){return q.then(e).catch((function(e){P.readyException(e)})),this},P.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--P.readyWait:P.isReady)||(P.isReady=!0,!0!==e&&--P.readyWait>0||q.resolveWith(p,[P]))}}),P.ready.then=q.then,"complete"===p.readyState||"loading"!==p.readyState&&!p.documentElement.doScroll?e.setTimeout(P.ready):(p.addEventListener("DOMContentLoaded",$),e.addEventListener("load",$));var K=function e(t,r,i,n,a,o,s){var x=0,l=t.length,c=null==i;if("object"===y(i))for(x in a=!0,i)e(t,r,x,i[x],!0,o,s);else if(void 0!==n&&(a=!0,d(n)||(s=!0),c&&(s?(r.call(t,n),r=null):(c=r,r=function(e){function t(t,r,i){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,r){return c.call(P(e),r)})))),r))for(;x<l;x++)r(t[x],i,s?n:n.call(t[x],x,r(t[x],i)));return a?t:c?r.call(t):l?r(t[0],i):o},Q=/^-ms-/,ee=/-([a-z])/g;function te(e,t){return t.toUpperCase()}function re(e){return e.replace(Q,"ms-").replace(ee,te)}var ie=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function ne(){this.expando=P.expando+ne.uid++}ne.uid=1,ne.prototype={cache:function(e){var t=e[this.expando];return t||(t={},ie(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,r){var i,n=this.cache(e);if("string"==typeof t)n[re(t)]=r;else for(i in t)n[re(i)]=t[i];return n},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][re(t)]},access:function(e,t,r){return void 0===t||t&&"string"==typeof t&&void 0===r?this.get(e,t):(this.set(e,t,r),void 0!==r?r:t)},remove:function(e,t){var r,i=e[this.expando];if(void 0!==i){if(void 0!==t){r=(t=Array.isArray(t)?t.map(re):(t=re(t))in i?[t]:t.match(z)||[]).length;for(;r--;)delete i[t[r]]}(void 0===t||P.isEmptyObject(i))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!P.isEmptyObject(t)}};var ae=new ne,oe=new ne,se=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,xe=/[A-Z]/g;function le(e,t,r){var i;if(void 0===r&&1===e.nodeType)if(i="data-"+t.replace(xe,"-$&").toLowerCase(),"string"==typeof(r=e.getAttribute(i))){try{r=function(e){return"true"===e||"false"!==e&&("null"===e?null:e===+e+""?+e:se.test(e)?JSON.parse(e):e)}(r)}catch(e){}oe.set(e,t,r)}else r=void 0;return r}P.extend({hasData:function(e){return oe.hasData(e)||ae.hasData(e)},data:function(e,t,r){return oe.access(e,t,r)},removeData:function(e,t){oe.remove(e,t)},_data:function(e,t,r){return ae.access(e,t,r)},_removeData:function(e,t){ae.remove(e,t)}}),P.fn.extend({data:function(e,t){var r,i,n,a=this[0],o=a&&a.attributes;if(void 0===e){if(this.length&&(n=oe.get(a),1===a.nodeType&&!ae.get(a,"hasDataAttrs"))){for(r=o.length;r--;)o[r]&&0===(i=o[r].name).indexOf("data-")&&(i=re(i.slice(5)),le(a,i,n[i]));ae.set(a,"hasDataAttrs",!0)}return n}return"object"==df(e)?this.each((function(){oe.set(this,e)})):K(this,(function(t){var r;if(a&&void 0===t)return void 0!==(r=oe.get(a,e))||void 0!==(r=le(a,e))?r:void 0;this.each((function(){oe.set(this,e,t)}))}),null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each((function(){oe.remove(this,e)}))}}),P.extend({queue:function(e,t,r){var i;if(e)return t=(t||"fx")+"queue",i=ae.get(e,t),r&&(!i||Array.isArray(r)?i=ae.access(e,t,P.makeArray(r)):i.push(r)),i||[]},dequeue:function(e,t){t=t||"fx";var r=P.queue(e,t),i=r.length,n=r.shift(),a=P._queueHooks(e,t);"inprogress"===n&&(n=r.shift(),i--),n&&("fx"===t&&r.unshift("inprogress"),delete a.stop,n.call(e,(function(){P.dequeue(e,t)}),a)),!i&&a&&a.empty.fire()},_queueHooks:function(e,t){var r=t+"queueHooks";return ae.get(e,r)||ae.access(e,r,{empty:P.Callbacks("once memory").add((function(){ae.remove(e,[t+"queue",r])}))})}}),P.fn.extend({queue:function(e,t){var r=2;return"string"!=typeof e&&(t=e,e="fx",r--),arguments.length<r?P.queue(this[0],e):void 0===t?this:this.each((function(){var r=P.queue(this,e,t);P._queueHooks(this,e),"fx"===e&&"inprogress"!==r[0]&&P.dequeue(this,e)}))},dequeue:function(e){return this.each((function(){P.dequeue(this,e)}))},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var r,i=1,n=P.Deferred(),a=this,o=this.length,s=function(){--i||n.resolveWith(a,[a])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";o--;)(r=ae.get(a[o],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(s));return s(),n.promise(t)}});var ce=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,fe=new RegExp("^(?:([+-])=|)("+ce+")([a-z%]*)$","i"),he=["Top","Right","Bottom","Left"],ue=p.documentElement,de=function(e){return P.contains(e.ownerDocument,e)},_e={composed:!0};ue.getRootNode&&(de=function(e){return P.contains(e.ownerDocument,e)||e.getRootNode(_e)===e.ownerDocument});var pe=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&de(e)&&"none"===P.css(e,"display")};function me(e,t,r,i){var n,a,o=20,s=i?function(){return i.cur()}:function(){return P.css(e,t,"")},x=s(),l=r&&r[3]||(P.cssNumber[t]?"":"px"),c=e.nodeType&&(P.cssNumber[t]||"px"!==l&&+x)&&fe.exec(P.css(e,t));if(c&&c[3]!==l){for(x/=2,l=l||c[3],c=+x||1;o--;)P.style(e,t,c+l),(1-a)*(1-(a=s()/x||.5))<=0&&(o=0),c/=a;c*=2,P.style(e,t,c+l),r=r||[]}return r&&(c=+c||+x||0,n=r[1]?c+(r[1]+1)*r[2]:+r[2],i&&(i.unit=l,i.start=c,i.end=n)),n}var ge={};function ye(e){var t,r=e.ownerDocument,i=e.nodeName,n=ge[i];return n||(t=r.body.appendChild(r.createElement(i)),n=P.css(t,"display"),t.parentNode.removeChild(t),"none"===n&&(n="block"),ge[i]=n,n)}function be(e,t){for(var r,i,n=[],a=0,o=e.length;a<o;a++)(i=e[a]).style&&(r=i.style.display,t?("none"===r&&(n[a]=ae.get(i,"display")||null,n[a]||(i.style.display="")),""===i.style.display&&pe(i)&&(n[a]=ye(i))):"none"!==r&&(n[a]="none",ae.set(i,"display",r)));for(a=0;a<o;a++)null!=n[a]&&(e[a].style.display=n[a]);return e}P.fn.extend({show:function(){return be(this,!0)},hide:function(){return be(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each((function(){pe(this)?P(this).show():P(this).hide()}))}});var ve,Pe,Se=/^(?:checkbox|radio)$/i,Re=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ce=/^$|^module$|\/(?:java|ecma)script/i;ve=p.createDocumentFragment().appendChild(p.createElement("div")),(Pe=p.createElement("input")).setAttribute("type","radio"),Pe.setAttribute("checked","checked"),Pe.setAttribute("name","t"),ve.appendChild(Pe),u.checkClone=ve.cloneNode(!0).cloneNode(!0).lastChild.checked,ve.innerHTML="<textarea>x</textarea>",u.noCloneChecked=!!ve.cloneNode(!0).lastChild.defaultValue,ve.innerHTML="<option></option>",u.option=!!ve.lastChild;var Ee={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Te(e,t){var r;return r=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&R(e,t)?P.merge([e],r):r}function Fe(e,t){for(var r=0,i=e.length;r<i;r++)ae.set(e[r],"globalEval",!t||ae.get(t[r],"globalEval"))}Ee.tbody=Ee.tfoot=Ee.colgroup=Ee.caption=Ee.thead,Ee.th=Ee.td,u.option||(Ee.optgroup=Ee.option=[1,"<select multiple='multiple'>","</select>"]);var De=/<|&#?\w+;/;function Me(e,t,r,i,n){for(var a,o,s,x,l,c,f=t.createDocumentFragment(),h=[],u=0,d=e.length;u<d;u++)if((a=e[u])||0===a)if("object"===y(a))P.merge(h,a.nodeType?[a]:a);else if(De.test(a)){for(o=o||f.appendChild(t.createElement("div")),s=(Re.exec(a)||["",""])[1].toLowerCase(),x=Ee[s]||Ee._default,o.innerHTML=x[1]+P.htmlPrefilter(a)+x[2],c=x[0];c--;)o=o.lastChild;P.merge(h,o.childNodes),(o=f.firstChild).textContent=""}else h.push(t.createTextNode(a));for(f.textContent="",u=0;a=h[u++];)if(i&&P.inArray(a,i)>-1)n&&n.push(a);else if(l=de(a),o=Te(f.appendChild(a),"script"),l&&Fe(o),r)for(c=0;a=o[c++];)Ce.test(a.type||"")&&r.push(a);return f}var Ie=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Ae(){return!1}function ke(e,t,r,i,n,a){var o,s;if("object"==df(t)){for(s in"string"!=typeof r&&(i=i||r,r=void 0),t)ke(e,s,r,i,t[s],a);return e}if(null==i&&null==n?(n=r,i=r=void 0):null==n&&("string"==typeof r?(n=i,i=void 0):(n=i,i=r,r=void 0)),!1===n)n=Ae;else if(!n)return e;return 1===a&&(o=n,n=function(e){return P().off(e),o.apply(this,arguments)},n.guid=o.guid||(o.guid=P.guid++)),e.each((function(){P.event.add(this,t,n,i,r)}))}function Le(e,t,r){r?(ae.set(e,t,!1),P.event.add(e,t,{namespace:!1,handler:function(e){var r,i=ae.get(this,t);if(1&e.isTrigger&&this[t]){if(i)(P.event.special[t]||{}).delegateType&&e.stopPropagation();else if(i=n.call(arguments),ae.set(this,t,i),this[t](),r=ae.get(this,t),ae.set(this,t,!1),i!==r)return e.stopImmediatePropagation(),e.preventDefault(),r}else i&&(ae.set(this,t,P.event.trigger(i[0],i.slice(1),this)),e.stopPropagation(),e.isImmediatePropagationStopped=we)}})):void 0===ae.get(e,t)&&P.event.add(e,t,we)}P.event={global:{},add:function(e,t,r,i,n){var a,o,s,x,l,c,f,h,u,d,_,p=ae.get(e);if(ie(e))for(r.handler&&(r=(a=r).handler,n=a.selector),n&&P.find.matchesSelector(ue,n),r.guid||(r.guid=P.guid++),(x=p.events)||(x=p.events=Object.create(null)),(o=p.handle)||(o=p.handle=function(t){return void 0!==P&&P.event.triggered!==t.type?P.event.dispatch.apply(e,arguments):void 0}),l=(t=(t||"").match(z)||[""]).length;l--;)u=_=(s=Ie.exec(t[l])||[])[1],d=(s[2]||"").split(".").sort(),u&&(f=P.event.special[u]||{},u=(n?f.delegateType:f.bindType)||u,f=P.event.special[u]||{},c=P.extend({type:u,origType:_,data:i,handler:r,guid:r.guid,selector:n,needsContext:n&&P.expr.match.needsContext.test(n),namespace:d.join(".")},a),(h=x[u])||((h=x[u]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(e,i,d,o)||e.addEventListener&&e.addEventListener(u,o)),f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=r.guid)),n?h.splice(h.delegateCount++,0,c):h.push(c),P.event.global[u]=!0)},remove:function(e,t,r,i,n){var a,o,s,x,l,c,f,h,u,d,_,p=ae.hasData(e)&&ae.get(e);if(p&&(x=p.events)){for(l=(t=(t||"").match(z)||[""]).length;l--;)if(u=_=(s=Ie.exec(t[l])||[])[1],d=(s[2]||"").split(".").sort(),u){for(f=P.event.special[u]||{},h=x[u=(i?f.delegateType:f.bindType)||u]||[],s=s[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=a=h.length;a--;)c=h[a],!n&&_!==c.origType||r&&r.guid!==c.guid||s&&!s.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(h.splice(a,1),c.selector&&h.delegateCount--,f.remove&&f.remove.call(e,c));o&&!h.length&&(f.teardown&&!1!==f.teardown.call(e,d,p.handle)||P.removeEvent(e,u,p.handle),delete x[u])}else for(u in x)P.event.remove(e,u+t[l],r,i,!0);P.isEmptyObject(x)&&ae.remove(e,"handle events")}},dispatch:function(e){var t,r,i,n,a,o,s=new Array(arguments.length),x=P.event.fix(e),l=(ae.get(this,"events")||Object.create(null))[x.type]||[],c=P.event.special[x.type]||{};for(s[0]=x,t=1;t<arguments.length;t++)s[t]=arguments[t];if(x.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,x)){for(o=P.event.handlers.call(this,x,l),t=0;(n=o[t++])&&!x.isPropagationStopped();)for(x.currentTarget=n.elem,r=0;(a=n.handlers[r++])&&!x.isImmediatePropagationStopped();)x.rnamespace&&!1!==a.namespace&&!x.rnamespace.test(a.namespace)||(x.handleObj=a,x.data=a.data,void 0!==(i=((P.event.special[a.origType]||{}).handle||a.handler).apply(n.elem,s))&&!1===(x.result=i)&&(x.preventDefault(),x.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,x),x.result}},handlers:function(e,t){var r,i,n,a,o,s=[],x=t.delegateCount,l=e.target;if(x&&l.nodeType&&!("click"===e.type&&e.button>=1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(a=[],o={},r=0;r<x;r++)void 0===o[n=(i=t[r]).selector+" "]&&(o[n]=i.needsContext?P(n,this).index(l)>-1:P.find(n,this,null,[l]).length),o[n]&&a.push(i);a.length&&s.push({elem:l,handlers:a})}return l=this,x<t.length&&s.push({elem:l,handlers:t.slice(x)}),s},addProp:function(e,t){Object.defineProperty(P.Event.prototype,e,{enumerable:!0,configurable:!0,get:d(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(e){return e[P.expando]?e:new P.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return Se.test(t.type)&&t.click&&R(t,"input")&&Le(t,"click",!0),!1},trigger:function(e){var t=this||e;return Se.test(t.type)&&t.click&&R(t,"input")&&Le(t,"click"),!0},_default:function(e){var t=e.target;return Se.test(t.type)&&t.click&&R(t,"input")&&ae.get(t,"click")||R(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},P.removeEvent=function(e,t,r){e.removeEventListener&&e.removeEventListener(t,r)},P.Event=function(e,t){if(!(this instanceof P.Event))return new P.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Ae,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&P.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[P.expando]=!0},P.Event.prototype={constructor:P.Event,isDefaultPrevented:Ae,isPropagationStopped:Ae,isImmediatePropagationStopped:Ae,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},P.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},P.event.addProp),P.each({focus:"focusin",blur:"focusout"},(function(e,t){function r(e){if(p.documentMode){var r=ae.get(this,"handle"),i=P.event.fix(e);i.type="focusin"===e.type?"focus":"blur",i.isSimulated=!0,r(e),i.target===i.currentTarget&&r(i)}else P.event.simulate(t,e.target,P.event.fix(e))}P.event.special[e]={setup:function(){var i;if(Le(this,e,!0),!p.documentMode)return!1;(i=ae.get(this,t))||this.addEventListener(t,r),ae.set(this,t,(i||0)+1)},trigger:function(){return Le(this,e),!0},teardown:function(){var e;if(!p.documentMode)return!1;(e=ae.get(this,t)-1)?ae.set(this,t,e):(this.removeEventListener(t,r),ae.remove(this,t))},_default:function(t){return ae.get(t.target,e)},delegateType:t},P.event.special[t]={setup:function(){var i=this.ownerDocument||this.document||this,n=p.documentMode?this:i,a=ae.get(n,t);a||(p.documentMode?this.addEventListener(t,r):i.addEventListener(e,r,!0)),ae.set(n,t,(a||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,n=p.documentMode?this:i,a=ae.get(n,t)-1;a?ae.set(n,t,a):(p.documentMode?this.removeEventListener(t,r):i.removeEventListener(e,r,!0),ae.remove(n,t))}}})),P.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(e,t){P.event.special[e]={delegateType:t,bindType:t,handle:function(e){var r,i=e.relatedTarget,n=e.handleObj;return i&&(i===this||P.contains(this,i))||(e.type=n.origType,r=n.handler.apply(this,arguments),e.type=t),r}}})),P.fn.extend({on:function(e,t,r,i){return ke(this,e,t,r,i)},one:function(e,t,r,i){return ke(this,e,t,r,i,1)},off:function(e,t,r){var i,n;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,P(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==df(e)){for(n in e)this.off(n,t,e[n]);return this}return!1!==t&&"function"!=typeof t||(r=t,t=void 0),!1===r&&(r=Ae),this.each((function(){P.event.remove(this,e,r,t)}))}});var Be=/<script|<style|<link/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,He=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ne(e,t){return R(e,"table")&&R(11!==t.nodeType?t:t.firstChild,"tr")&&P(e).children("tbody")[0]||e}function Ve(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function Ye(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Ue(e,t){var r,i,n,a,o,s;if(1===t.nodeType){if(ae.hasData(e)&&(s=ae.get(e).events))for(n in ae.remove(t,"handle events"),s)for(r=0,i=s[n].length;r<i;r++)P.event.add(t,n,s[n][r]);oe.hasData(e)&&(a=oe.access(e),o=P.extend({},a),oe.set(t,o))}}function Xe(e,t){var r=t.nodeName.toLowerCase();"input"===r&&Se.test(e.type)?t.checked=e.checked:"input"!==r&&"textarea"!==r||(t.defaultValue=e.defaultValue)}function We(e,t,r,i){t=a(t);var n,o,s,x,l,c,f=0,h=e.length,_=h-1,p=t[0],m=d(p);if(m||h>1&&"string"==typeof p&&!u.checkClone&&Oe.test(p))return e.each((function(n){var a=e.eq(n);m&&(t[0]=p.call(this,n,a.html())),We(a,t,r,i)}));if(h&&(o=(n=Me(t,e[0].ownerDocument,!1,e,i)).firstChild,1===n.childNodes.length&&(n=o),o||i)){for(x=(s=P.map(Te(n,"script"),Ve)).length;f<h;f++)l=n,f!==_&&(l=P.clone(l,!0,!0),x&&P.merge(s,Te(l,"script"))),r.call(e[f],l,f);if(x)for(c=s[s.length-1].ownerDocument,P.map(s,Ye),f=0;f<x;f++)l=s[f],Ce.test(l.type||"")&&!ae.access(l,"globalEval")&&P.contains(c,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?P._evalUrl&&!l.noModule&&P._evalUrl(l.src,{nonce:l.nonce||l.getAttribute("nonce")},c):g(l.textContent.replace(He,""),l,c))}return e}function ze(e,t,r){for(var i,n=t?P.filter(t,e):e,a=0;null!=(i=n[a]);a++)r||1!==i.nodeType||P.cleanData(Te(i)),i.parentNode&&(r&&de(i)&&Fe(Te(i,"script")),i.parentNode.removeChild(i));return e}P.extend({htmlPrefilter:function(e){return e},clone:function(e,t,r){var i,n,a,o,s=e.cloneNode(!0),x=de(e);if(!(u.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||P.isXMLDoc(e)))for(o=Te(s),i=0,n=(a=Te(e)).length;i<n;i++)Xe(a[i],o[i]);if(t)if(r)for(a=a||Te(e),o=o||Te(s),i=0,n=a.length;i<n;i++)Ue(a[i],o[i]);else Ue(e,s);return(o=Te(s,"script")).length>0&&Fe(o,!x&&Te(e,"script")),s},cleanData:function(e){for(var t,r,i,n=P.event.special,a=0;void 0!==(r=e[a]);a++)if(ie(r)){if(t=r[ae.expando]){if(t.events)for(i in t.events)n[i]?P.event.remove(r,i):P.removeEvent(r,i,t.handle);r[ae.expando]=void 0}r[oe.expando]&&(r[oe.expando]=void 0)}}}),P.fn.extend({detach:function(e){return ze(this,e,!0)},remove:function(e){return ze(this,e)},text:function(e){return K(this,(function(e){return void 0===e?P.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)}))}),null,e,arguments.length)},append:function(){return We(this,arguments,(function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Ne(this,e).appendChild(e)}))},prepend:function(){return We(this,arguments,(function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=Ne(this,e);t.insertBefore(e,t.firstChild)}}))},before:function(){return We(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this)}))},after:function(){return We(this,arguments,(function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)}))},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(P.cleanData(Te(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map((function(){return P.clone(this,e,t)}))},html:function(e){return K(this,(function(e){var t=this[0]||{},r=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Be.test(e)&&!Ee[(Re.exec(e)||["",""])[1].toLowerCase()]){e=P.htmlPrefilter(e);try{for(;r<i;r++)1===(t=this[r]||{}).nodeType&&(P.cleanData(Te(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)}),null,e,arguments.length)},replaceWith:function(){var e=[];return We(this,arguments,(function(t){var r=this.parentNode;P.inArray(this,e)<0&&(P.cleanData(Te(this)),r&&r.replaceChild(t,this))}),e)}}),P.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(e,t){P.fn[e]=function(e){for(var r,i=[],n=P(e),a=n.length-1,s=0;s<=a;s++)r=s===a?this:this.clone(!0),P(n[s])[t](r),o.apply(i,r.get());return this.pushStack(i)}}));var Ge=new RegExp("^("+ce+")(?!px)[a-z%]+$","i"),Je=/^--/,Ze=function(t){var r=t.ownerDocument.defaultView;return r&&r.opener||(r=e),r.getComputedStyle(t)},je=function(e,t,r){var i,n,a={};for(n in t)a[n]=e.style[n],e.style[n]=t[n];for(n in i=r.call(e),t)e.style[n]=a[n];return i},qe=new RegExp(he.join("|"),"i");function $e(e,t,r){var i,n,a,o,s=Je.test(t),x=e.style;return(r=r||Ze(e))&&(o=r.getPropertyValue(t)||r[t],s&&o&&(o=o.replace(D,"$1")||void 0),""!==o||de(e)||(o=P.style(e,t)),!u.pixelBoxStyles()&&Ge.test(o)&&qe.test(t)&&(i=x.width,n=x.minWidth,a=x.maxWidth,x.minWidth=x.maxWidth=x.width=o,o=r.width,x.width=i,x.minWidth=n,x.maxWidth=a)),void 0!==o?o+"":o}function Ke(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function t(){if(c){l.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",c.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ue.appendChild(l).appendChild(c);var t=e.getComputedStyle(c);i="1%"!==t.top,x=12===r(t.marginLeft),c.style.right="60%",o=36===r(t.right),n=36===r(t.width),c.style.position="absolute",a=12===r(c.offsetWidth/3),ue.removeChild(l),c=null}}function r(e){return Math.round(parseFloat(e))}var i,n,a,o,s,x,l=p.createElement("div"),c=p.createElement("div");c.style&&(c.style.backgroundClip="content-box",c.cloneNode(!0).style.backgroundClip="",u.clearCloneStyle="content-box"===c.style.backgroundClip,P.extend(u,{boxSizingReliable:function(){return t(),n},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),i},reliableMarginLeft:function(){return t(),x},scrollboxSize:function(){return t(),a},reliableTrDimensions:function(){var t,r,i,n;return null==s&&(t=p.createElement("table"),r=p.createElement("tr"),i=p.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",r.style.cssText="box-sizing:content-box;border:1px solid",r.style.height="1px",i.style.height="9px",i.style.display="block",ue.appendChild(t).appendChild(r).appendChild(i),n=e.getComputedStyle(r),s=parseInt(n.height,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10)===r.offsetHeight,ue.removeChild(t)),s}}))}();var Qe=["Webkit","Moz","ms"],et=p.createElement("div").style,tt={};function rt(e){return P.cssProps[e]||tt[e]||(e in et?e:tt[e]=function(e){for(var t=e[0].toUpperCase()+e.slice(1),r=Qe.length;r--;)if((e=Qe[r]+t)in et)return e}(e)||e)}var it=/^(none|table(?!-c[ea]).+)/,nt={position:"absolute",visibility:"hidden",display:"block"},at={letterSpacing:"0",fontWeight:"400"};function ot(e,t,r){var i=fe.exec(t);return i?Math.max(0,i[2]-(r||0))+(i[3]||"px"):t}function st(e,t,r,i,n,a){var o="width"===t?1:0,s=0,x=0,l=0;if(r===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===r&&(l+=P.css(e,r+he[o],!0,n)),i?("content"===r&&(x-=P.css(e,"padding"+he[o],!0,n)),"margin"!==r&&(x-=P.css(e,"border"+he[o]+"Width",!0,n))):(x+=P.css(e,"padding"+he[o],!0,n),"padding"!==r?x+=P.css(e,"border"+he[o]+"Width",!0,n):s+=P.css(e,"border"+he[o]+"Width",!0,n));return!i&&a>=0&&(x+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-a-x-s-.5))||0),x+l}function xt(e,t,r){var i=Ze(e),n=(!u.boxSizingReliable()||r)&&"border-box"===P.css(e,"boxSizing",!1,i),a=n,o=$e(e,t,i),s="offset"+t[0].toUpperCase()+t.slice(1);if(Ge.test(o)){if(!r)return o;o="auto"}return(!u.boxSizingReliable()&&n||!u.reliableTrDimensions()&&R(e,"tr")||"auto"===o||!parseFloat(o)&&"inline"===P.css(e,"display",!1,i))&&e.getClientRects().length&&(n="border-box"===P.css(e,"boxSizing",!1,i),(a=s in e)&&(o=e[s])),(o=parseFloat(o)||0)+st(e,t,r||(n?"border":"content"),a,i,o)+"px"}function lt(e,t,r,i,n){return new lt.prototype.init(e,t,r,i,n)}P.extend({cssHooks:{opacity:{get:function(e,t){if(t){var r=$e(e,"opacity");return""===r?"1":r}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(e,t,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var n,a,o,s=re(t),x=Je.test(t),l=e.style;if(x||(t=rt(s)),o=P.cssHooks[t]||P.cssHooks[s],void 0===r)return o&&"get"in o&&void 0!==(n=o.get(e,!1,i))?n:l[t];"string"===(a=df(r))&&(n=fe.exec(r))&&n[1]&&(r=me(e,t,n),a="number"),null!=r&&r==r&&("number"!==a||x||(r+=n&&n[3]||(P.cssNumber[s]?"":"px")),u.clearCloneStyle||""!==r||0!==t.indexOf("background")||(l[t]="inherit"),o&&"set"in o&&void 0===(r=o.set(e,r,i))||(x?l.setProperty(t,r):l[t]=r))}},css:function(e,t,r,i){var n,a,o,s=re(t);return Je.test(t)||(t=rt(s)),(o=P.cssHooks[t]||P.cssHooks[s])&&"get"in o&&(n=o.get(e,!0,r)),void 0===n&&(n=$e(e,t,i)),"normal"===n&&t in at&&(n=at[t]),""===r||r?(a=parseFloat(n),!0===r||isFinite(a)?a||0:n):n}}),P.each(["height","width"],(function(e,t){P.cssHooks[t]={get:function(e,r,i){if(r)return!it.test(P.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?xt(e,t,i):je(e,nt,(function(){return xt(e,t,i)}))},set:function(e,r,i){var n,a=Ze(e),o=!u.scrollboxSize()&&"absolute"===a.position,s=(o||i)&&"border-box"===P.css(e,"boxSizing",!1,a),x=i?st(e,t,i,s,a):0;return s&&o&&(x-=Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-parseFloat(a[t])-st(e,t,"border",!1,a)-.5)),x&&(n=fe.exec(r))&&"px"!==(n[3]||"px")&&(e.style[t]=r,r=P.css(e,t)),ot(0,r,x)}}})),P.cssHooks.marginLeft=Ke(u.reliableMarginLeft,(function(e,t){if(t)return(parseFloat($e(e,"marginLeft"))||e.getBoundingClientRect().left-je(e,{marginLeft:0},(function(){return e.getBoundingClientRect().left})))+"px"})),P.each({margin:"",padding:"",border:"Width"},(function(e,t){P.cssHooks[e+t]={expand:function(r){for(var i=0,n={},a="string"==typeof r?r.split(" "):[r];i<4;i++)n[e+he[i]+t]=a[i]||a[i-2]||a[0];return n}},"margin"!==e&&(P.cssHooks[e+t].set=ot)})),P.fn.extend({css:function(e,t){return K(this,(function(e,t,r){var i,n,a={},o=0;if(Array.isArray(t)){for(i=Ze(e),n=t.length;o<n;o++)a[t[o]]=P.css(e,t[o],!1,i);return a}return void 0!==r?P.style(e,t,r):P.css(e,t)}),e,t,arguments.length>1)}}),P.Tween=lt,lt.prototype={constructor:lt,init:function(e,t,r,i,n,a){this.elem=e,this.prop=r,this.easing=n||P.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=a||(P.cssNumber[r]?"":"px")},cur:function(){var e=lt.propHooks[this.prop];return e&&e.get?e.get(this):lt.propHooks._default.get(this)},run:function(e){var t,r=lt.propHooks[this.prop];return this.options.duration?this.pos=t=P.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),r&&r.set?r.set(this):lt.propHooks._default.set(this),this}},lt.prototype.init.prototype=lt.prototype,lt.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=P.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){P.fx.step[e.prop]?P.fx.step[e.prop](e):1!==e.elem.nodeType||!P.cssHooks[e.prop]&&null==e.elem.style[rt(e.prop)]?e.elem[e.prop]=e.now:P.style(e.elem,e.prop,e.now+e.unit)}}},lt.propHooks.scrollTop=lt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},P.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},P.fx=lt.prototype.init,P.fx.step={};var ct,ft,ht=/^(?:toggle|show|hide)$/,ut=/queueHooks$/;function dt(){ft&&(!1===p.hidden&&e.requestAnimationFrame?e.requestAnimationFrame(dt):e.setTimeout(dt,P.fx.interval),P.fx.tick())}function _t(){return e.setTimeout((function(){ct=void 0})),ct=Date.now()}function pt(e,t){var r,i=0,n={height:e};for(t=t?1:0;i<4;i+=2-t)n["margin"+(r=he[i])]=n["padding"+r]=e;return t&&(n.opacity=n.width=e),n}function mt(e,t,r){for(var i,n=(gt.tweeners[t]||[]).concat(gt.tweeners["*"]),a=0,o=n.length;a<o;a++)if(i=n[a].call(r,t,e))return i}function gt(e,t,r){var i,n,a=0,o=gt.prefilters.length,s=P.Deferred().always((function(){delete x.elem})),x=function(){if(n)return!1;for(var t=ct||_t(),r=Math.max(0,l.startTime+l.duration-t),i=1-(r/l.duration||0),a=0,o=l.tweens.length;a<o;a++)l.tweens[a].run(i);return s.notifyWith(e,[l,i,r]),i<1&&o?r:(o||s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:P.extend({},t),opts:P.extend(!0,{specialEasing:{},easing:P.easing._default},r),originalProperties:t,originalOptions:r,startTime:ct||_t(),duration:r.duration,tweens:[],createTween:function(t,r){var i=P.Tween(e,l.opts,t,r,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(i),i},stop:function(t){var r=0,i=t?l.tweens.length:0;if(n)return this;for(n=!0;r<i;r++)l.tweens[r].run(1);return t?(s.notifyWith(e,[l,1,0]),s.resolveWith(e,[l,t])):s.rejectWith(e,[l,t]),this}}),c=l.props;for(function(e,t){var r,i,n,a,o;for(r in e)if(n=t[i=re(r)],a=e[r],Array.isArray(a)&&(n=a[1],a=e[r]=a[0]),r!==i&&(e[i]=a,delete e[r]),(o=P.cssHooks[i])&&"expand"in o)for(r in a=o.expand(a),delete e[i],a)r in e||(e[r]=a[r],t[r]=n);else t[i]=n}(c,l.opts.specialEasing);a<o;a++)if(i=gt.prefilters[a].call(l,e,c,l.opts))return d(i.stop)&&(P._queueHooks(l.elem,l.opts.queue).stop=i.stop.bind(i)),i;return P.map(c,mt,l),d(l.opts.start)&&l.opts.start.call(e,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),P.fx.timer(P.extend(x,{elem:e,anim:l,queue:l.opts.queue})),l}P.Animation=P.extend(gt,{tweeners:{"*":[function(e,t){var r=this.createTween(e,t);return me(r.elem,e,fe.exec(t),r),r}]},tweener:function(e,t){d(e)?(t=e,e=["*"]):e=e.match(z);for(var r,i=0,n=e.length;i<n;i++)r=e[i],gt.tweeners[r]=gt.tweeners[r]||[],gt.tweeners[r].unshift(t)},prefilters:[function(e,t,r){var i,n,a,o,s,x,l,c,f="width"in t||"height"in t,h=this,u={},d=e.style,_=e.nodeType&&pe(e),p=ae.get(e,"fxshow");for(i in r.queue||(null==(o=P._queueHooks(e,"fx")).unqueued&&(o.unqueued=0,s=o.empty.fire,o.empty.fire=function(){o.unqueued||s()}),o.unqueued++,h.always((function(){h.always((function(){o.unqueued--,P.queue(e,"fx").length||o.empty.fire()}))}))),t)if(n=t[i],ht.test(n)){if(delete t[i],a=a||"toggle"===n,n===(_?"hide":"show")){if("show"!==n||!p||void 0===p[i])continue;_=!0}u[i]=p&&p[i]||P.style(e,i)}if((x=!P.isEmptyObject(t))||!P.isEmptyObject(u))for(i in f&&1===e.nodeType&&(r.overflow=[d.overflow,d.overflowX,d.overflowY],null==(l=p&&p.display)&&(l=ae.get(e,"display")),"none"===(c=P.css(e,"display"))&&(l?c=l:(be([e],!0),l=e.style.display||l,c=P.css(e,"display"),be([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===P.css(e,"float")&&(x||(h.done((function(){d.display=l})),null==l&&(c=d.display,l="none"===c?"":c)),d.display="inline-block")),r.overflow&&(d.overflow="hidden",h.always((function(){d.overflow=r.overflow[0],d.overflowX=r.overflow[1],d.overflowY=r.overflow[2]}))),x=!1,u)x||(p?"hidden"in p&&(_=p.hidden):p=ae.access(e,"fxshow",{display:l}),a&&(p.hidden=!_),_&&be([e],!0),h.done((function(){for(i in _||be([e]),ae.remove(e,"fxshow"),u)P.style(e,i,u[i])}))),x=mt(_?p[i]:0,i,h),i in p||(p[i]=x.start,_&&(x.end=x.start,x.start=0))}],prefilter:function(e,t){t?gt.prefilters.unshift(e):gt.prefilters.push(e)}}),P.speed=function(e,t,r){var i=e&&"object"==df(e)?P.extend({},e):{complete:r||!r&&t||d(e)&&e,duration:e,easing:r&&t||t&&!d(t)&&t};return P.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in P.fx.speeds?i.duration=P.fx.speeds[i.duration]:i.duration=P.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){d(i.old)&&i.old.call(this),i.queue&&P.dequeue(this,i.queue)},i},P.fn.extend({fadeTo:function(e,t,r,i){return this.filter(pe).css("opacity",0).show().end().animate({opacity:t},e,r,i)},animate:function(e,t,r,i){var n=P.isEmptyObject(e),a=P.speed(t,r,i),o=function(){var t=gt(this,P.extend({},e),a);(n||ae.get(this,"finish"))&&t.stop(!0)};return o.finish=o,n||!1===a.queue?this.each(o):this.queue(a.queue,o)},stop:function(e,t,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=t,t=e,e=void 0),t&&this.queue(e||"fx",[]),this.each((function(){var t=!0,n=null!=e&&e+"queueHooks",a=P.timers,o=ae.get(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&ut.test(n)&&i(o[n]);for(n=a.length;n--;)a[n].elem!==this||null!=e&&a[n].queue!==e||(a[n].anim.stop(r),t=!1,a.splice(n,1));!t&&r||P.dequeue(this,e)}))},finish:function(e){return!1!==e&&(e=e||"fx"),this.each((function(){var t,r=ae.get(this),i=r[e+"queue"],n=r[e+"queueHooks"],a=P.timers,o=i?i.length:0;for(r.finish=!0,P.queue(this,e,[]),n&&n.stop&&n.stop.call(this,!0),t=a.length;t--;)a[t].elem===this&&a[t].queue===e&&(a[t].anim.stop(!0),a.splice(t,1));for(t=0;t<o;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete r.finish}))}}),P.each(["toggle","show","hide"],(function(e,t){var r=P.fn[t];P.fn[t]=function(e,i,n){return null==e||"boolean"==typeof e?r.apply(this,arguments):this.animate(pt(t,!0),e,i,n)}})),P.each({slideDown:pt("show"),slideUp:pt("hide"),slideToggle:pt("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(e,t){P.fn[e]=function(e,r,i){return this.animate(t,e,r,i)}})),P.timers=[],P.fx.tick=function(){var e,t=0,r=P.timers;for(ct=Date.now();t<r.length;t++)(e=r[t])()||r[t]!==e||r.splice(t--,1);r.length||P.fx.stop(),ct=void 0},P.fx.timer=function(e){P.timers.push(e),P.fx.start()},P.fx.interval=13,P.fx.start=function(){ft||(ft=!0,dt())},P.fx.stop=function(){ft=null},P.fx.speeds={slow:600,fast:200,_default:400},P.fn.delay=function(t,r){return t=P.fx&&P.fx.speeds[t]||t,r=r||"fx",this.queue(r,(function(r,i){var n=e.setTimeout(r,t);i.stop=function(){e.clearTimeout(n)}}))},function(){var e=p.createElement("input"),t=p.createElement("select").appendChild(p.createElement("option"));e.type="checkbox",u.checkOn=""!==e.value,u.optSelected=t.selected,(e=p.createElement("input")).value="t",e.type="radio",u.radioValue="t"===e.value}();var yt,bt=P.expr.attrHandle;P.fn.extend({attr:function(e,t){return K(this,P.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each((function(){P.removeAttr(this,e)}))}}),P.extend({attr:function(e,t,r){var i,n,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return void 0===e.getAttribute?P.prop(e,t,r):(1===a&&P.isXMLDoc(e)||(n=P.attrHooks[t.toLowerCase()]||(P.expr.match.bool.test(t)?yt:void 0)),void 0!==r?null===r?void P.removeAttr(e,t):n&&"set"in n&&void 0!==(i=n.set(e,r,t))?i:(e.setAttribute(t,r+""),r):n&&"get"in n&&null!==(i=n.get(e,t))?i:null==(i=P.find.attr(e,t))?void 0:i)},attrHooks:{type:{set:function(e,t){if(!u.radioValue&&"radio"===t&&R(e,"input")){var r=e.value;return e.setAttribute("type",t),r&&(e.value=r),t}}}},removeAttr:function(e,t){var r,i=0,n=t&&t.match(z);if(n&&1===e.nodeType)for(;r=n[i++];)e.removeAttribute(r)}}),yt={set:function(e,t,r){return!1===t?P.removeAttr(e,r):e.setAttribute(r,r),r}},P.each(P.expr.match.bool.source.match(/\w+/g),(function(e,t){var r=bt[t]||P.find.attr;bt[t]=function(e,t,i){var n,a,o=t.toLowerCase();return i||(a=bt[o],bt[o]=n,n=null!=r(e,t,i)?o:null,bt[o]=a),n}}));var vt=/^(?:input|select|textarea|button)$/i,Pt=/^(?:a|area)$/i;function St(e){return(e.match(z)||[]).join(" ")}function Rt(e){return e.getAttribute&&e.getAttribute("class")||""}function Ct(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(z)||[]}P.fn.extend({prop:function(e,t){return K(this,P.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each((function(){delete this[P.propFix[e]||e]}))}}),P.extend({prop:function(e,t,r){var i,n,a=e.nodeType;if(3!==a&&8!==a&&2!==a)return 1===a&&P.isXMLDoc(e)||(t=P.propFix[t]||t,n=P.propHooks[t]),void 0!==r?n&&"set"in n&&void 0!==(i=n.set(e,r,t))?i:e[t]=r:n&&"get"in n&&null!==(i=n.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=P.find.attr(e,"tabindex");return t?parseInt(t,10):vt.test(e.nodeName)||Pt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),u.optSelected||(P.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),P.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){P.propFix[this.toLowerCase()]=this})),P.fn.extend({addClass:function(e){var t,r,i,n,a,o;return d(e)?this.each((function(t){P(this).addClass(e.call(this,t,Rt(this)))})):(t=Ct(e)).length?this.each((function(){if(i=Rt(this),r=1===this.nodeType&&" "+St(i)+" "){for(a=0;a<t.length;a++)n=t[a],r.indexOf(" "+n+" ")<0&&(r+=n+" ");o=St(r),i!==o&&this.setAttribute("class",o)}})):this},removeClass:function(e){var t,r,i,n,a,o;return d(e)?this.each((function(t){P(this).removeClass(e.call(this,t,Rt(this)))})):arguments.length?(t=Ct(e)).length?this.each((function(){if(i=Rt(this),r=1===this.nodeType&&" "+St(i)+" "){for(a=0;a<t.length;a++)for(n=t[a];r.indexOf(" "+n+" ")>-1;)r=r.replace(" "+n+" "," ");o=St(r),i!==o&&this.setAttribute("class",o)}})):this:this.attr("class","")},toggleClass:function(e,t){var r,i,n,a,o=df(e),s="string"===o||Array.isArray(e);return d(e)?this.each((function(r){P(this).toggleClass(e.call(this,r,Rt(this),t),t)})):"boolean"==typeof t&&s?t?this.addClass(e):this.removeClass(e):(r=Ct(e),this.each((function(){if(s)for(a=P(this),n=0;n<r.length;n++)i=r[n],a.hasClass(i)?a.removeClass(i):a.addClass(i);else void 0!==e&&"boolean"!==o||((i=Rt(this))&&ae.set(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||!1===e?"":ae.get(this,"__className__")||""))})))},hasClass:function(e){var t,r,i=0;for(t=" "+e+" ";r=this[i++];)if(1===r.nodeType&&(" "+St(Rt(r))+" ").indexOf(t)>-1)return!0;return!1}});var Et=/\r/g;P.fn.extend({val:function(e){var t,r,i,n=this[0];return arguments.length?(i=d(e),this.each((function(r){var n;1===this.nodeType&&(null==(n=i?e.call(this,r,P(this).val()):e)?n="":"number"==typeof n?n+="":Array.isArray(n)&&(n=P.map(n,(function(e){return null==e?"":e+""}))),(t=P.valHooks[this.type]||P.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,n,"value")||(this.value=n))}))):n?(t=P.valHooks[n.type]||P.valHooks[n.nodeName.toLowerCase()])&&"get"in t&&void 0!==(r=t.get(n,"value"))?r:"string"==typeof(r=n.value)?r.replace(Et,""):null==r?"":r:void 0}}),P.extend({valHooks:{option:{get:function(e){var t=P.find.attr(e,"value");return null!=t?t:St(P.text(e))}},select:{get:function(e){var t,r,i,n=e.options,a=e.selectedIndex,o="select-one"===e.type,s=o?null:[],x=o?a+1:n.length;for(i=a<0?x:o?a:0;i<x;i++)if(((r=n[i]).selected||i===a)&&!r.disabled&&(!r.parentNode.disabled||!R(r.parentNode,"optgroup"))){if(t=P(r).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var r,i,n=e.options,a=P.makeArray(t),o=n.length;o--;)((i=n[o]).selected=P.inArray(P.valHooks.option.get(i),a)>-1)&&(r=!0);return r||(e.selectedIndex=-1),a}}}}),P.each(["radio","checkbox"],(function(){P.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=P.inArray(P(e).val(),t)>-1}},u.checkOn||(P.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}));var Tt=e.location,Ft={guid:Date.now()},Dt=/\?/;P.parseXML=function(t){var r,i;if(!t||"string"!=typeof t)return null;try{r=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){}return i=r&&r.getElementsByTagName("parsererror")[0],r&&!i||P.error("Invalid XML: "+(i?P.map(i.childNodes,(function(e){return e.textContent})).join("\n"):t)),r};var Mt=/^(?:focusinfocus|focusoutblur)$/,It=function(e){e.stopPropagation()};P.extend(P.event,{trigger:function(t,r,i,n){var a,o,s,x,l,f,h,u,m=[i||p],g=c.call(t,"type")?t.type:t,y=c.call(t,"namespace")?t.namespace.split("."):[];if(o=u=s=i=i||p,3!==i.nodeType&&8!==i.nodeType&&!Mt.test(g+P.event.triggered)&&(g.indexOf(".")>-1&&(y=g.split("."),g=y.shift(),y.sort()),l=g.indexOf(":")<0&&"on"+g,(t=t[P.expando]?t:new P.Event(g,"object"==df(t)&&t)).isTrigger=n?2:3,t.namespace=y.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+y.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),r=null==r?[t]:P.makeArray(r,[t]),h=P.event.special[g]||{},n||!h.trigger||!1!==h.trigger.apply(i,r))){if(!n&&!h.noBubble&&!_(i)){for(x=h.delegateType||g,Mt.test(x+g)||(o=o.parentNode);o;o=o.parentNode)m.push(o),s=o;s===(i.ownerDocument||p)&&m.push(s.defaultView||s.parentWindow||e)}for(a=0;(o=m[a++])&&!t.isPropagationStopped();)u=o,t.type=a>1?x:h.bindType||g,(f=(ae.get(o,"events")||Object.create(null))[t.type]&&ae.get(o,"handle"))&&f.apply(o,r),(f=l&&o[l])&&f.apply&&ie(o)&&(t.result=f.apply(o,r),!1===t.result&&t.preventDefault());return t.type=g,n||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(m.pop(),r)||!ie(i)||l&&d(i[g])&&!_(i)&&((s=i[l])&&(i[l]=null),P.event.triggered=g,t.isPropagationStopped()&&u.addEventListener(g,It),i[g](),t.isPropagationStopped()&&u.removeEventListener(g,It),P.event.triggered=void 0,s&&(i[l]=s)),t.result}},simulate:function(e,t,r){var i=P.extend(new P.Event,r,{type:e,isSimulated:!0});P.event.trigger(i,null,t)}}),P.fn.extend({trigger:function(e,t){return this.each((function(){P.event.trigger(e,t,this)}))},triggerHandler:function(e,t){var r=this[0];if(r)return P.event.trigger(e,t,r,!0)}});var wt=/\[\]$/,At=/\r?\n/g,kt=/^(?:submit|button|image|reset|file)$/i,Lt=/^(?:input|select|textarea|keygen)/i;function Bt(e,t,r,i){var n;if(Array.isArray(t))P.each(t,(function(t,n){r||wt.test(e)?i(e,n):Bt(e+"["+("object"==df(n)&&null!=n?t:"")+"]",n,r,i)}));else if(r||"object"!==y(t))i(e,t);else for(n in t)Bt(e+"["+n+"]",t[n],r,i)}P.param=function(e,t){var r,i=[],n=function(e,t){var r=d(t)?t():t;i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==r?"":r)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!P.isPlainObject(e))P.each(e,(function(){n(this.name,this.value)}));else for(r in e)Bt(r,e[r],t,n);return i.join("&")},P.fn.extend({serialize:function(){return P.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var e=P.prop(this,"elements");return e?P.makeArray(e):this})).filter((function(){var e=this.type;return this.name&&!P(this).is(":disabled")&&Lt.test(this.nodeName)&&!kt.test(e)&&(this.checked||!Se.test(e))})).map((function(e,t){var r=P(this).val();return null==r?null:Array.isArray(r)?P.map(r,(function(e){return{name:t.name,value:e.replace(At,"\r\n")}})):{name:t.name,value:r.replace(At,"\r\n")}})).get()}});var Ot=/%20/g,Ht=/#.*$/,Nt=/([?&])_=[^&]*/,Vt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Yt=/^(?:GET|HEAD)$/,Ut=/^\/\//,Xt={},Wt={},zt="*/".concat("*"),Gt=p.createElement("a");function Jt(e){return function(t,r){"string"!=typeof t&&(r=t,t="*");var i,n=0,a=t.toLowerCase().match(z)||[];if(d(r))for(;i=a[n++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(r)):(e[i]=e[i]||[]).push(r)}}function Zt(e,t,r,i){var n={},a=e===Wt;function o(s){var x;return n[s]=!0,P.each(e[s]||[],(function(e,s){var l=s(t,r,i);return"string"!=typeof l||a||n[l]?a?!(x=l):void 0:(t.dataTypes.unshift(l),o(l),!1)})),x}return o(t.dataTypes[0])||!n["*"]&&o("*")}function jt(e,t){var r,i,n=P.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((n[r]?e:i||(i={}))[r]=t[r]);return i&&P.extend(!0,e,i),e}Gt.href=Tt.href,P.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Tt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Tt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":P.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?jt(jt(e,P.ajaxSettings),t):jt(P.ajaxSettings,e)},ajaxPrefilter:Jt(Xt),ajaxTransport:Jt(Wt),ajax:function(t,r){"object"==df(t)&&(r=t,t=void 0),r=r||{};var i,n,a,o,s,x,l,c,f,h,u=P.ajaxSetup({},r),d=u.context||u,_=u.context&&(d.nodeType||d.jquery)?P(d):P.event,m=P.Deferred(),g=P.Callbacks("once memory"),y=u.statusCode||{},b={},v={},S="canceled",R={readyState:0,getResponseHeader:function(e){var t;if(l){if(!o)for(o={};t=Vt.exec(a);)o[t[1].toLowerCase()+" "]=(o[t[1].toLowerCase()+" "]||[]).concat(t[2]);t=o[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return l?a:null},setRequestHeader:function(e,t){return null==l&&(e=v[e.toLowerCase()]=v[e.toLowerCase()]||e,b[e]=t),this},overrideMimeType:function(e){return null==l&&(u.mimeType=e),this},statusCode:function(e){var t;if(e)if(l)R.always(e[R.status]);else for(t in e)y[t]=[y[t],e[t]];return this},abort:function(e){var t=e||S;return i&&i.abort(t),C(0,t),this}};if(m.promise(R),u.url=((t||u.url||Tt.href)+"").replace(Ut,Tt.protocol+"//"),u.type=r.method||r.type||u.method||u.type,u.dataTypes=(u.dataType||"*").toLowerCase().match(z)||[""],null==u.crossDomain){x=p.createElement("a");try{x.href=u.url,x.href=x.href,u.crossDomain=Gt.protocol+"//"+Gt.host!=x.protocol+"//"+x.host}catch(e){u.crossDomain=!0}}if(u.data&&u.processData&&"string"!=typeof u.data&&(u.data=P.param(u.data,u.traditional)),Zt(Xt,u,r,R),l)return R;for(f in(c=P.event&&u.global)&&0==P.active++&&P.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!Yt.test(u.type),n=u.url.replace(Ht,""),u.hasContent?u.data&&u.processData&&0===(u.contentType||"").indexOf("application/x-www-form-urlencoded")&&(u.data=u.data.replace(Ot,"+")):(h=u.url.slice(n.length),u.data&&(u.processData||"string"==typeof u.data)&&(n+=(Dt.test(n)?"&":"?")+u.data,delete u.data),!1===u.cache&&(n=n.replace(Nt,"$1"),h=(Dt.test(n)?"&":"?")+"_="+Ft.guid+++h),u.url=n+h),u.ifModified&&(P.lastModified[n]&&R.setRequestHeader("If-Modified-Since",P.lastModified[n]),P.etag[n]&&R.setRequestHeader("If-None-Match",P.etag[n])),(u.data&&u.hasContent&&!1!==u.contentType||r.contentType)&&R.setRequestHeader("Content-Type",u.contentType),R.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+zt+"; q=0.01":""):u.accepts["*"]),u.headers)R.setRequestHeader(f,u.headers[f]);if(u.beforeSend&&(!1===u.beforeSend.call(d,R,u)||l))return R.abort();if(S="abort",g.add(u.complete),R.done(u.success),R.fail(u.error),i=Zt(Wt,u,r,R)){if(R.readyState=1,c&&_.trigger("ajaxSend",[R,u]),l)return R;u.async&&u.timeout>0&&(s=e.setTimeout((function(){R.abort("timeout")}),u.timeout));try{l=!1,i.send(b,C)}catch(e){if(l)throw e;C(-1,e)}}else C(-1,"No Transport");function C(t,r,o,x){var f,h,p,b,v,S=r;l||(l=!0,s&&e.clearTimeout(s),i=void 0,a=x||"",R.readyState=t>0?4:0,f=t>=200&&t<300||304===t,o&&(b=function(e,t,r){for(var i,n,a,o,s=e.contents,x=e.dataTypes;"*"===x[0];)x.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(n in s)if(s[n]&&s[n].test(i)){x.unshift(n);break}if(x[0]in r)a=x[0];else{for(n in r){if(!x[0]||e.converters[n+" "+x[0]]){a=n;break}o||(o=n)}a=a||o}if(a)return a!==x[0]&&x.unshift(a),r[a]}(u,R,o)),!f&&P.inArray("script",u.dataTypes)>-1&&P.inArray("json",u.dataTypes)<0&&(u.converters["text script"]=function(){}),b=function(e,t,r,i){var n,a,o,s,x,l={},c=e.dataTypes.slice();if(c[1])for(o in e.converters)l[o.toLowerCase()]=e.converters[o];for(a=c.shift();a;)if(e.responseFields[a]&&(r[e.responseFields[a]]=t),!x&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),x=a,a=c.shift())if("*"===a)a=x;else if("*"!==x&&x!==a){if(!(o=l[x+" "+a]||l["* "+a]))for(n in l)if((s=n.split(" "))[1]===a&&(o=l[x+" "+s[0]]||l["* "+s[0]])){!0===o?o=l[n]:!0!==l[n]&&(a=s[0],c.unshift(s[1]));break}if(!0!==o)if(o&&e.throws)t=o(t);else try{t=o(t)}catch(e){return{state:"parsererror",error:o?e:"No conversion from "+x+" to "+a}}}return{state:"success",data:t}}(u,b,R,f),f?(u.ifModified&&((v=R.getResponseHeader("Last-Modified"))&&(P.lastModified[n]=v),(v=R.getResponseHeader("etag"))&&(P.etag[n]=v)),204===t||"HEAD"===u.type?S="nocontent":304===t?S="notmodified":(S=b.state,h=b.data,f=!(p=b.error))):(p=S,!t&&S||(S="error",t<0&&(t=0))),R.status=t,R.statusText=(r||S)+"",f?m.resolveWith(d,[h,S,R]):m.rejectWith(d,[R,S,p]),R.statusCode(y),y=void 0,c&&_.trigger(f?"ajaxSuccess":"ajaxError",[R,u,f?h:p]),g.fireWith(d,[R,S]),c&&(_.trigger("ajaxComplete",[R,u]),--P.active||P.event.trigger("ajaxStop")))}return R},getJSON:function(e,t,r){return P.get(e,t,r,"json")},getScript:function(e,t){return P.get(e,void 0,t,"script")}}),P.each(["get","post"],(function(e,t){P[t]=function(e,r,i,n){return d(r)&&(n=n||i,i=r,r=void 0),P.ajax(P.extend({url:e,type:t,dataType:n,data:r,success:i},P.isPlainObject(e)&&e))}})),P.ajaxPrefilter((function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")})),P._evalUrl=function(e,t,r){return P.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){P.globalEval(e,t,r)}})},P.fn.extend({wrapAll:function(e){var t;return this[0]&&(d(e)&&(e=e.call(this[0])),t=P(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map((function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e})).append(this)),this},wrapInner:function(e){return d(e)?this.each((function(t){P(this).wrapInner(e.call(this,t))})):this.each((function(){var t=P(this),r=t.contents();r.length?r.wrapAll(e):t.append(e)}))},wrap:function(e){var t=d(e);return this.each((function(r){P(this).wrapAll(t?e.call(this,r):e)}))},unwrap:function(e){return this.parent(e).not("body").each((function(){P(this).replaceWith(this.childNodes)})),this}}),P.expr.pseudos.hidden=function(e){return!P.expr.pseudos.visible(e)},P.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},P.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var qt={0:200,1223:204},$t=P.ajaxSettings.xhr();u.cors=!!$t&&"withCredentials"in $t,u.ajax=$t=!!$t,P.ajaxTransport((function(t){var r,i;if(u.cors||$t&&!t.crossDomain)return{send:function(n,a){var o,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)s[o]=t.xhrFields[o];for(o in t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)s.setRequestHeader(o,n[o]);r=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return function(){r&&(r=i=s.onload=s.onerror=s.onabort=s.ontimeout=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?a(0,"error"):a(s.status,s.statusText):a(qt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}})),s.onload=r(),i=s.onerror=s.ontimeout=r("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout((function(){r&&i()}))},r=r("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(r)throw e}},abort:function(){r&&r()}}})),P.ajaxPrefilter((function(e){e.crossDomain&&(e.contents.script=!1)})),P.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return P.globalEval(e),e}}}),P.ajaxPrefilter("script",(function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")})),P.ajaxTransport("script",(function(e){var t,r;if(e.crossDomain||e.scriptAttrs)return{send:function(i,n){t=P("<script>").attr(e.scriptAttrs||{}).prop({charset:e.scriptCharset,src:e.url}).on("load error",r=function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){t.remove(),r=null,e&&n("error"===e.type?404:200,e.type)}))),p.head.appendChild(t[0])},abort:function(){r&&r()}}}));var Kt,Qt=[],er=/(=)\?(?=&|$)|\?\?/;P.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Qt.pop()||P.expando+"_"+Ft.guid++;return this[e]=!0,e}}),P.ajaxPrefilter("json jsonp",(function(t,r,i){var n,a,o,s=!1!==t.jsonp&&(er.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&er.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return n=t.jsonpCallback=d(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(er,"$1"+n):!1!==t.jsonp&&(t.url+=(Dt.test(t.url)?"&":"?")+t.jsonp+"="+n),t.converters["script json"]=function(){return o||P.error(n+" was not called"),o[0]},t.dataTypes[0]="json",a=e[n],e[n]=function(){o=arguments},i.always((function(){void 0===a?P(e).removeProp(n):e[n]=a,t[n]&&(t.jsonpCallback=r.jsonpCallback,Qt.push(n)),o&&d(a)&&a(o[0]),o=a=void 0})),"script"})),u.createHTMLDocument=((Kt=p.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===Kt.childNodes.length),P.parseHTML=function(e,t,r){return"string"!=typeof e?[]:("boolean"==typeof t&&(r=t,t=!1),t||(u.createHTMLDocument?((i=(t=p.implementation.createHTMLDocument("")).createElement("base")).href=p.location.href,t.head.appendChild(i)):t=p),a=!r&&[],(n=O.exec(e))?[t.createElement(n[1])]:(n=Me([e],t,a),a&&a.length&&P(a).remove(),P.merge([],n.childNodes)));var i,n,a},P.fn.load=function(e,t,r){var i,n,a,o=this,s=e.indexOf(" ");return s>-1&&(i=St(e.slice(s)),e=e.slice(0,s)),d(t)?(r=t,t=void 0):t&&"object"==df(t)&&(n="POST"),o.length>0&&P.ajax({url:e,type:n||"GET",dataType:"html",data:t}).done((function(e){a=arguments,o.html(i?P("<div>").append(P.parseHTML(e)).find(i):e)})).always(r&&function(e,t){o.each((function(){r.apply(this,a||[e.responseText,t,e])}))}),this},P.expr.pseudos.animated=function(e){return P.grep(P.timers,(function(t){return e===t.elem})).length},P.offset={setOffset:function(e,t,r){var i,n,a,o,s,x,l=P.css(e,"position"),c=P(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),a=P.css(e,"top"),x=P.css(e,"left"),("absolute"===l||"fixed"===l)&&(a+x).indexOf("auto")>-1?(o=(i=c.position()).top,n=i.left):(o=parseFloat(a)||0,n=parseFloat(x)||0),d(t)&&(t=t.call(e,r,P.extend({},s))),null!=t.top&&(f.top=t.top-s.top+o),null!=t.left&&(f.left=t.left-s.left+n),"using"in t?t.using.call(e,f):c.css(f)}},P.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each((function(t){P.offset.setOffset(this,e,t)}));var t,r,i=this[0];return i?i.getClientRects().length?(t=i.getBoundingClientRect(),r=i.ownerDocument.defaultView,{top:t.top+r.pageYOffset,left:t.left+r.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,r,i=this[0],n={top:0,left:0};if("fixed"===P.css(i,"position"))t=i.getBoundingClientRect();else{for(t=this.offset(),r=i.ownerDocument,e=i.offsetParent||r.documentElement;e&&(e===r.body||e===r.documentElement)&&"static"===P.css(e,"position");)e=e.parentNode;e&&e!==i&&1===e.nodeType&&((n=P(e).offset()).top+=P.css(e,"borderTopWidth",!0),n.left+=P.css(e,"borderLeftWidth",!0))}return{top:t.top-n.top-P.css(i,"marginTop",!0),left:t.left-n.left-P.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var e=this.offsetParent;e&&"static"===P.css(e,"position");)e=e.offsetParent;return e||ue}))}}),P.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(e,t){var r="pageYOffset"===t;P.fn[e]=function(i){return K(this,(function(e,i,n){var a;if(_(e)?a=e:9===e.nodeType&&(a=e.defaultView),void 0===n)return a?a[t]:e[i];a?a.scrollTo(r?a.pageXOffset:n,r?n:a.pageYOffset):e[i]=n}),e,i,arguments.length)}})),P.each(["top","left"],(function(e,t){P.cssHooks[t]=Ke(u.pixelPosition,(function(e,r){if(r)return r=$e(e,t),Ge.test(r)?P(e).position()[t]+"px":r}))})),P.each({Height:"height",Width:"width"},(function(e,t){P.each({padding:"inner"+e,content:t,"":"outer"+e},(function(r,i){P.fn[i]=function(n,a){var o=arguments.length&&(r||"boolean"!=typeof n),s=r||(!0===n||!0===a?"margin":"border");return K(this,(function(t,r,n){var a;return _(t)?0===i.indexOf("outer")?t["inner"+e]:t.document.documentElement["client"+e]:9===t.nodeType?(a=t.documentElement,Math.max(t.body["scroll"+e],a["scroll"+e],t.body["offset"+e],a["offset"+e],a["client"+e])):void 0===n?P.css(t,r,s):P.style(t,r,n,s)}),t,o?n:void 0,o)}}))})),P.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(e,t){P.fn[t]=function(e){return this.on(t,e)}})),P.fn.extend({bind:function(e,t,r){return this.on(e,null,t,r)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,r,i){return this.on(t,e,r,i)},undelegate:function(e,t,r){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)},hover:function(e,t){return this.on("mouseenter",e).on("mouseleave",t||e)}}),P.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(e,t){P.fn[t]=function(e,r){return arguments.length>0?this.on(t,null,e,r):this.trigger(t)}}));var tr=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;P.proxy=function(e,t){var r,i,a;if("string"==typeof t&&(r=e[t],t=e,e=r),d(e))return i=n.call(arguments,2),a=function(){return e.apply(t||this,i.concat(n.call(arguments)))},a.guid=e.guid=e.guid||P.guid++,a},P.holdReady=function(e){e?P.readyWait++:P.ready(!0)},P.isArray=Array.isArray,P.parseJSON=JSON.parse,P.nodeName=R,P.isFunction=d,P.isWindow=_,P.camelCase=re,P.type=y,P.now=Date.now,P.isNumeric=function(e){var t=P.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},P.trim=function(e){return null==e?"":(e+"").replace(tr,"$1")};var rr=e.jQuery,ir=e.$;return P.noConflict=function(t){return e.$===P&&(e.$=ir),t&&e.jQuery===P&&(e.jQuery=rr),P},void 0===t&&(e.jQuery=e.$=P),P}))}(Mf);var If=Df(Mf.exports);function wf(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Af(e,t)}function Af(e,t){return Af=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Af(e,t)}var kf=null,Lf=Symbol("CANVAS"),Bf=Symbol("CONTEXT"),Of=Symbol("SHAPES"),Hf=Symbol("DRAWSTATUS"),Nf=Symbol("SHAPETYPE"),Vf=Symbol("MAXSHAPENUMSUPPORT"),Yf=Symbol("SHAPESTYLE"),Uf=Symbol("POLYGONDRAWING"),Xf=Symbol("CURRENTSHAPEINFO"),Wf=Symbol("DRAWSHAPEMULTIONETIME"),zf=Symbol("EVENTCALLBACK");function Gf(){kf[Bf].clearRect(0,0,kf.m_iCanvasWidth,kf.m_iCanvasHeight);for(var e=0,t=kf[Of].length;e<t;e++)kf[Of][e].draw()}function Jf(e){kf[Of].length<kf[Vf]&&kf[Of].push(e)}function Zf(){var e=!1,t={},r=0,i=0,n=0,a=0,o=0,s=0,x="draw",l=null;function c(){for(var e=-1,t=0,r=kf[Of].length;t<r;t++)if(kf[Of][t].m_bChoosed){e=t;break}return e}kf[Lf][0].oncontextmenu=function(){return!1},kf[Lf][0].onselectstart=function(){return!1},kf[Lf].unbind(),kf[Lf].bind("mousedown",(function(t){if(2===t.button)kf[Uf]&&l&&l.m_aPoint.length>=l.m_iMinClosed&&(l.m_bClosed=!0,kf[Uf]=!1,l.setPointInfo(l.m_aPoint),Jf(l),Gf(),e=!1,kf[Wf]||(kf[Hf]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,l.m_szType,"onDrawEnd",l.m_szId));else if(0===t.button){if(e){if(Math.abs(t.offsetX-r)>2&&Math.abs(t.offsetY-i)>2&&(Jf(l),kf[Wf]||(kf[Hf]=!1)),kf[zf]){var n,a={startPos:[],endPos:[]};a.startPos=[r,i],a.endPos=[t.offsetX,t.offsetY],null==(n=kf[zf])||n.call(kf,a),kf.clearAllShape()}return l=null,void(e=!1)}if(r=t.offsetX,i=t.offsetY,x="draw",!kf[Uf]){var o=c();if(-1!==o&&kf[Of][o].inArc(t.offsetX,t.offsetY,5)&&(x="stretch"),"stretch"!==x)for(var s=0,f=kf[Of].length;s<f;s++)kf[Of][s].inShape(t.offsetX,t.offsetY)&&2!==kf[Of][s].m_iEditType?(kf[Of][s].m_bChoosed=!0,kf[Of][s].getMouseDownPoints(t.offsetX,t.offsetY),x="drag",null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,kf[Of][s].m_szType,"onChoose",kf[Of][s].m_szId)):kf[Of][s].m_bChoosed=!1;kf[Lf][0].style.cursor="drag"===x?"move":"default","draw"===x&&1===kf[Of].length&&1===kf[Of][0].m_iRedrawMode&&(kf.deleteRepeatPolyonById(kf[Of][0].m_szId),kf[Hf]=!0),kf[Hf]&&!kf[Wf]&&(x="draw")}if("draw"===x&&kf[Hf]){if(kf[Vf]<=kf[Of].length&&"Grid"!==kf[Nf]&&"Point"!==kf[Nf])return;"Rect"===kf[Nf]?(l=new qf).m_szTips=kf[Xf].szTips||"":"Grid"===kf[Nf]?0===kf[Of].length&&Jf(l=new Kf):"Polygon"===kf[Nf]?(kf[Uf]||(kf[Uf]=!0,(l=new eh).m_szId=kf[Xf].szId||"",l.m_szTips=kf[Xf].szTips||"",l.m_iMinClosed=kf[Xf].iMinClosed||3,l.m_iMaxPointNum=kf[Xf].iMaxPointNum||11,l.m_iPolygonType=kf[Xf].iPolygonType,l.m_szDrawColor=kf[Xf].szDrawColor,l.m_szFillColor=kf[Xf].szFillColor,l.m_iTranslucent=kf[Xf].iTranslucent,l.m_iRedrawMode=kf[Xf].iRedrawMode),1===l.m_iPolygonType&&(l.addPoint(r,i),l.m_aPoint.length===l.m_iMaxPointNum&&(l.m_bClosed=!0,kf[Uf]=!1,Jf(l),Gf(),e=!1,kf[Wf]||(kf[Hf]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,l.m_szType,"onDrawEnd",l.m_szId)))):"Point"===kf[Nf]&&(kf.clearShapeByType("Point"),(l=new th).m_szId=kf[Xf].szId||"",l.m_szDrawColor=kf[Xf].szDrawColor,l.setPointInfo([[r,i]]),Jf(l),Gf())}e=!0}})),kf[Lf].bind("mouseenter",(function(n){t={isIn:!0,offsetX:n.offsetX,offsetY:n.offsetY},kf[Hf]&&e&&("Rect"===kf[Nf]?l.move([[r,i],[n.offsetX,n.offsetY]]):"Grid"===kf[Nf]&&kf[Of][0].move(r,i,n.offsetX,n.offsetY))})),kf[Lf].bind("mouseleave",(function(e){t={isIn:!1,offsetX:e.offsetX,offsetY:e.offsetY}})),kf[Lf].bind("mousemove",(function(n){if(kf[Uf])kf[Hf]&&e&&("Polygon"===kf[Nf]&&0===l.m_iPolygonType&&(l.m_bClosed=!0),Gf(),l.move(n.offsetX,n.offsetY,r,i));else{var a=c();a>-1?e&&("drag"===x?(kf[Of][a].drag(n.offsetX,n.offsetY),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,kf[Of][a].m_szType,"onDrag",kf[Of][a].m_szId)):"stretch"===x&&(kf[Of][a].stretch(n.offsetX,n.offsetY),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,kf[Of][a].m_szType,"onStretch",kf[Of][a].m_szId))):kf[Hf]&&e&&t.isIn&&("Rect"===kf[Nf]?l.move([[r,i],[n.offsetX,n.offsetY]]):"Grid"===kf[Nf]&&kf[Of][0].move(r,i,n.offsetX,n.offsetY))}})),kf[Lf].bind("mouseup",(function(t){if(kf[Lf][0].style.cursor="default",null!=l&&"draw"===x)if("Rect"===kf[Nf]){if(Math.abs(t.offsetX-r)>2&&Math.abs(t.offsetY-i)>2&&(Jf(l),kf[Wf]||(kf[Hf]=!1)),kf[zf]){var n,a={startPos:[],endPos:[]};a.startPos=[r,i],a.endPos=[t.offsetX,t.offsetY],null==(n=kf[zf])||n.call(kf,a),kf.clearAllShape()}l=null}else"Polygon"===kf[Nf]&&0===l.m_iPolygonType&&kf[Uf]&&Math.abs(t.offsetX-r)>2&&Math.abs(t.offsetY-i)>2&&(Jf(l),kf[Uf]=!1,kf[Wf]||(kf[Hf]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,l.m_szType,"onDrawEnd",l.m_szId));e=!!kf[Uf],kf[Uf]||Gf()})),kf[Lf].bind("dblclick",(function(){kf[Hf]&&"Grid"===kf[Nf]&&(kf[Of][0].m_szGridMap="fffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffcfffffc",Gf())})),kf[Lf].bind("touchstart",(function(t){var r,i=t.target.getBoundingClientRect();if(null==(r=t.touches)?void 0:r[0]){if(n=parseInt(t.touches[0].clientX-i.x)>0?parseInt(t.touches[0].clientX-i.x):0,a=parseInt(t.touches[0].clientY-i.y)>0?parseInt(t.touches[0].clientY-i.y):0,x="draw",kf[Hf]){if(kf[Vf]<=kf[Of].length&&"Grid"!==kf[Nf]&&"Point"!==kf[Nf])return;"Rect"===kf[Nf]?(l=new qf).m_szTips=kf[Xf].szTips||"":"Grid"===kf[Nf]?0===kf[Of].length&&Jf(l=new Kf):"Polygon"===kf[Nf]?(kf[Uf]||(kf[Uf]=!0,(l=new eh).m_szId=kf[Xf].szId||"",l.m_szTips=kf[Xf].szTips||"",l.m_iMinClosed=kf[Xf].iMinClosed||3,l.m_iMaxPointNum=kf[Xf].iMaxPointNum||11,l.m_iPolygonType=kf[Xf].iPolygonType,l.m_szDrawColor=kf[Xf].szDrawColor,l.m_szFillColor=kf[Xf].szFillColor,l.m_iTranslucent=kf[Xf].iTranslucent,l.m_iRedrawMode=kf[Xf].iRedrawMode),1===l.m_iPolygonType&&(l.addPoint(n,a),l.m_aPoint.length===l.m_iMaxPointNum&&(l.m_bClosed=!0,kf[Uf]=!1,Jf(l),Gf(),e=!1,kf[Wf]||(kf[Hf]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,l.m_szType,"onDrawEnd",l.m_szId)))):"Point"===kf[Nf]&&(kf.clearShapeByType("Point"),(l=new th).m_szId=kf[Xf].szId||"",l.m_szDrawColor=kf[Xf].szDrawColor,l.setPointInfo([[n,a]]),Jf(l),Gf())}e=!0}})),kf[Lf].bind("touchmove",(function(t){var r,i=t.target.getBoundingClientRect();if(null==(r=t.touches)?void 0:r[0])if(o=parseInt(t.touches[0].clientX-i.x)>0?parseInt(t.touches[0].clientX-i.x):0,s=parseInt(t.touches[0].clientY-i.y)>0?parseInt(t.touches[0].clientY-i.y):0,kf[Uf])kf[Hf]&&e&&("Polygon"===kf[Nf]&&0===l.m_iPolygonType&&(l.m_bClosed=!0),Gf(),l.move(t.touches[0].offsetX,t.touches[0].offsetY,n,a));else{var f=c();f>-1?e&&("drag"===x?(kf[Of][f].drag(o,s),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,kf[Of][f].m_szType,"onDrag",kf[Of][f].m_szId)):"stretch"===x&&(kf[Of][f].stretch(o,s),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,kf[Of][f].m_szType,"onStretch",kf[Of][f].m_szId))):kf[Hf]&&e&&("Rect"===kf[Nf]?l.move([[2*n,2*a],[2*o,2*s]]):"Grid"===kf[Nf]&&kf[Of][0].move(n,a,o,s))}})),kf[Lf].bind("touchend",(function(t){if(n!=o||a!=s){if(kf[Lf][0].style.cursor="default",null!=l&&"draw"===x)if("Rect"===kf[Nf]){if(Math.abs(o-n)>2&&Math.abs(s-a)>2&&(Jf(l),kf[Wf]||(kf[Hf]=!1)),kf[zf]&&Math.abs(o-n)>15&&Math.abs(s-a)>15){var r,i={startPos:[],endPos:[]};i.startPos=[n,a],i.endPos=[o,s],null==(r=kf[zf])||r.call(kf,i)}kf.clearAllShape(),l=null}else"Polygon"===kf[Nf]&&0===l.m_iPolygonType&&kf[Uf]&&Math.abs(o-n)>2&&Math.abs(s-a)>2&&(Jf(l),kf[Uf]=!1,kf[Wf]||(kf[Hf]=!1),null==window.onDrawShapeEvent||window.onDrawShapeEvent.call(window,l.m_szType,"onDrawEnd",l.m_szId));e=!!kf[Uf],kf[Uf]||Gf()}}))}var jf=function(){function e(){this.m_szId="",this.m_aPoint=[],this.m_bChoosed=!1,this.m_szDrawColor=kf[Yf].szDrawColor,this.m_szFillColor=kf[Yf].szFillColor,this.m_iTranslucent=kf[Yf].iTranslucent,this.m_iIndexChoosePoint=-1,this.m_iDriftStartX=0,this.m_iDriftStartY=0,this.m_oEdgePoints={top:{x:0,y:0},left:{x:0,y:0},right:{x:0,y:0},bottom:{x:0,y:0}},this.m_szTips="",this.m_iEditType=0,this.m_iMinClosed=3,this.m_iMaxPointNum=11,this.m_bClosed=!1,this.m_iRedrawMode=0}var t=e.prototype;return t.draw=function(){},t.drag=function(e,t){if(2!==this.m_iEditType){var r=this.m_aPoint.length,i=0;for(i=0;i<r;i++)if(this.m_aPoint[i][0]+e-this.m_iDriftStartX>kf.m_iCanvasWidth||this.m_aPoint[i][1]+t-this.m_iDriftStartY>kf.m_iCanvasHeight||this.m_aPoint[i][0]+e-this.m_iDriftStartX<0||this.m_aPoint[i][1]+t-this.m_iDriftStartY<0)return this.m_iDriftStartX=e,void(this.m_iDriftStartY=t);for(i=0;i<r;i++)this.m_aPoint[i][0]=this.m_aPoint[i][0]+e-this.m_iDriftStartX,this.m_aPoint[i][1]=this.m_aPoint[i][1]+t-this.m_iDriftStartY;this.m_iDriftStartX=e,this.m_iDriftStartY=t,this.setPointInfo(this.m_aPoint),Gf()}},t.stretch=function(e,t){0===this.m_iEditType&&(-1!==this.m_iIndexChoosePoint&&(this.m_aPoint[this.m_iIndexChoosePoint][0]=e,this.m_aPoint[this.m_iIndexChoosePoint][1]=t),this.setPointInfo(this.m_aPoint),Gf())},t.inShape=function(e,t){for(var r=!1,i=this.m_aPoint.length,n=0,a=i-1;n<i;a=n++)this.m_aPoint[n][1]>t!=this.m_aPoint[a][1]>t&&e<(this.m_aPoint[a][0]-this.m_aPoint[n][0])*(t-this.m_aPoint[n][1])/(this.m_aPoint[a][1]-this.m_aPoint[n][1])+this.m_aPoint[n][0]&&(r=!r);return r},t.inArc=function(e,t,r){for(var i=!1,n=0,a=this.m_aPoint.length;n<a;n++)if(Math.sqrt((e-this.m_aPoint[n][0])*(e-this.m_aPoint[n][0])+(t-this.m_aPoint[n][1])*(t-this.m_aPoint[n][1]))<r){i=!0,this.m_iIndexChoosePoint=n;break}return i},t.getMouseDownPoints=function(e,t){this.m_iDriftStartX=e,this.m_iDriftStartY=t},t.getPointInfo=function(){return this.m_aPoint},t.setPointInfo=function(e){null!=e&&e.length>0&&(this.m_aPoint=e,this.setEdgePoints(e))},t.addPoint=function(e,t){this.m_aPoint.length<this.m_iMaxPointNum&&this.m_aPoint.push([e,t]),this.m_aPoint.length===this.m_iMaxPointNum&&this.setPointInfo(this.m_aPoint)},t.setEdgePoints=function(e){for(var t=0,r=e.length;t<r;t++)0===t?(this.m_oEdgePoints.top.x=e[t][0],this.m_oEdgePoints.top.y=e[t][1],this.m_oEdgePoints.left.x=e[t][0],this.m_oEdgePoints.left.y=e[t][1],this.m_oEdgePoints.right.x=e[t][0],this.m_oEdgePoints.right.y=e[t][1],this.m_oEdgePoints.bottom.x=e[t][0],this.m_oEdgePoints.bottom.y=e[t][1]):(e[t][1]<this.m_oEdgePoints.top.y&&(this.m_oEdgePoints.top.x=e[t][0],this.m_oEdgePoints.top.y=e[t][1]),e[t][0]>this.m_oEdgePoints.right.x&&(this.m_oEdgePoints.right.x=e[t][0],this.m_oEdgePoints.right.y=e[t][1]),e[t][1]>this.m_oEdgePoints.bottom.y&&(this.m_oEdgePoints.bottom.x=e[t][0],this.m_oEdgePoints.bottom.y=e[t][1]),e[t][0]<this.m_oEdgePoints.left.x&&(this.m_oEdgePoints.left.x=e[t][0],this.m_oEdgePoints.left.y=e[t][1]))},e}(),qf=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Rect",t}wf(t,e);var r=t.prototype;return r.setPointInfo=function(e){if(null!=e){for(var t=e[0][0],r=e[0][1],i=e[0][0],n=e[0][1],a=0,o=e.length;a<o;a++)t>e[a][0]&&(t=e[a][0]),r>e[a][1]&&(r=e[a][1]),i<e[a][0]&&(i=e[a][0]),n<e[a][1]&&(n=e[a][1]);this.m_aPoint=[[t,r],[i,r],[i,n],[t,n]]}},r.draw=function(){kf[Bf].fillStyle=this.m_szFillColor,kf[Bf].strokeStyle=this.m_szDrawColor;var e=this.m_aPoint[0][0],t=this.m_aPoint[0][1],r=this.m_aPoint[2][0]-e,i=this.m_aPoint[2][1]-t;if(kf[Bf].globalAlpha=this.m_iTranslucent,kf[Bf].fillRect(e,t,r,i),kf[Bf].globalAlpha=1,kf[Bf].fillText(this.m_szTips,(e+this.m_aPoint[2][0])/2,(t+this.m_aPoint[2][1])/2),this.m_bChoosed){var n=Math.round(r/2),a=Math.round(i/2);if(0===this.m_iEditType)for(var o=[e,e+n,e+r,e,e+r,e,e+n,e+r],s=[t,t,t,t+a,t+a,t+i,t+i,t+i],x=0;x<8;x++)kf[Bf].beginPath(),kf[Bf].arc(o[x],s[x],3,0,360,!1),kf[Bf].fillStyle=this.m_szDrawColor,kf[Bf].closePath(),kf[Bf].fill()}kf[Bf].strokeRect(e,t,r,i)},r.stretch=function(e,t){0===this.m_iEditType&&(0===this.m_iIndexChoosePoint?e<this.m_aPoint[2][0]&&t<this.m_aPoint[2][1]&&(this.m_aPoint[0][0]=e,this.m_aPoint[0][1]=t,this.m_aPoint[3][0]=e,this.m_aPoint[1][1]=t):1===this.m_iIndexChoosePoint?t<this.m_aPoint[2][1]&&(this.m_aPoint[0][1]=t,this.m_aPoint[1][1]=t):2===this.m_iIndexChoosePoint?e>this.m_aPoint[3][0]&&t<this.m_aPoint[3][1]&&(this.m_aPoint[1][0]=e,this.m_aPoint[1][1]=t,this.m_aPoint[2][0]=e,this.m_aPoint[0][1]=t):3===this.m_iIndexChoosePoint?e<this.m_aPoint[2][0]&&(this.m_aPoint[0][0]=e,this.m_aPoint[3][0]=e):4===this.m_iIndexChoosePoint?e>this.m_aPoint[0][0]&&(this.m_aPoint[1][0]=e,this.m_aPoint[2][0]=e):5===this.m_iIndexChoosePoint?e<this.m_aPoint[1][0]&&t>this.m_aPoint[1][1]&&(this.m_aPoint[3][0]=e,this.m_aPoint[3][1]=t,this.m_aPoint[0][0]=e,this.m_aPoint[2][1]=t):6===this.m_iIndexChoosePoint?t>this.m_aPoint[1][1]&&(this.m_aPoint[2][1]=t,this.m_aPoint[3][1]=t):7===this.m_iIndexChoosePoint&&e>this.m_aPoint[0][0]&&t>this.m_aPoint[0][1]&&(this.m_aPoint[2][0]=e,this.m_aPoint[2][1]=t,this.m_aPoint[1][0]=e,this.m_aPoint[3][1]=t),Gf())},r.move=function(e){Gf(),this.m_bChoosed=!0;var t=e[0][0],r=e[0][1],i=e[1][0],n=e[1][1];this.setPointInfo([[t,r],[i,r],[i,n],[t,n]]),this.draw()},r.inArc=function(e,t,r){for(var i=this.m_aPoint[0][0],n=this.m_aPoint[0][1],a=this.m_aPoint[2][0]-i,o=this.m_aPoint[2][1]-n,s=Math.round(a/2),x=Math.round(o/2),l=[i,i+s,i+a,i,i+a,i,i+s,i+a],c=[n,n,n,n+x,n+x,n+o,n+o,n+o],f=0;f<8;f++)if(Math.sqrt((e-l[f])*(e-l[f])+(t-c[f])*(t-c[f]))<r)return this.m_iIndexChoosePoint=f,!0;return!1},t}(jf),$f=function(e){function t(t,r){var i;return(i=e.call(this)||this).m_szType="RectOSD",i.m_szOSDType="overlay-date",i.m_szText=t||"",i.m_szEnabled=r||"",i.m_szDateStyle="",i.m_szClockType="",i.m_szDisplayWeek="",i.m_szId="",i.m_szAlignment="0",i}wf(t,e);var r=t.prototype;return r.draw=function(){if("true"===this.m_szEnabled){var e=this.m_aPoint[0][0],t=this.m_aPoint[0][1],r=this.m_aPoint[2][0]-e,i=this.m_aPoint[2][1]-t;kf[Bf].beginPath(),kf[Bf].strokeStyle=this.m_szDrawColor,kf[Bf].globalAlpha=1,kf[Bf].rect(e,t,r,i),kf[Bf].font="15px serif",kf[Bf].strokeText(this.m_szText,e,t+15),kf[Bf].stroke()}},r.drag=function(e,t){var r=this.m_aPoint.length,i=0;if("0"===this.m_szAlignment){for(i=0;i<r;i++)if(this.m_aPoint[i][1]+t-this.m_iDriftStartY>kf.m_iCanvasHeight||this.m_aPoint[i][0]+e-this.m_iDriftStartX<0||this.m_aPoint[i][1]+t-this.m_iDriftStartY<0)return this.m_iDriftStartX=e,void(this.m_iDriftStartY=t);for(i=0;i<r;i++)this.m_aPoint[i][0]=this.m_aPoint[i][0]+e-this.m_iDriftStartX,this.m_aPoint[i][1]=this.m_aPoint[i][1]+t-this.m_iDriftStartY}else if("1"===this.m_szAlignment||"2"===this.m_szAlignment){for(i=0;i<r;i++)if(this.m_aPoint[i][1]+t-this.m_iDriftStartY>kf.m_iCanvasHeight||this.m_aPoint[i][1]+t-this.m_iDriftStartY<0)return this.m_iDriftStartX=e,void(this.m_iDriftStartY=t);for(i=0;i<r;i++)this.m_aPoint[i][1]=this.m_aPoint[i][1]+t-this.m_iDriftStartY}this.m_iDriftStartX=e,this.m_iDriftStartY=t,this.setEdgePoints(this.m_aPoint),Gf()},r.stretch=function(){},t}(jf),Kf=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Grid",t.m_iGridColNum=22,t.m_iGridRowNum=18,t.m_szGridMap="",t.m_aAddGridMap=[],t}wf(t,e);var r=t.prototype;return r.draw=function(){for(var e=kf.m_iCanvasWidth/this.m_iGridColNum,t=kf.m_iCanvasHeight/this.m_iGridRowNum,r="",i=0;i<this.m_iGridRowNum;i++){for(var n=this.m_szGridMap.substring(6*i,6*i+6),a=parseInt("f"+n,16).toString(2).split("").slice(4),o="",s=0;s<this.m_iGridColNum;s++){var x="";"1"===a[s]?(kf[Bf].strokeStyle=this.m_szDrawColor,kf[Bf].globalAlpha=1,kf[Bf].strokeRect(e*s,t*i,e,t),x="1"):x="0",this.m_aAddGridMap.length&&1===this.m_aAddGridMap[i][s]&&(kf[Bf].strokeStyle=this.m_szDrawColor,kf[Bf].strokeRect(e*s,t*i,e,t),x="1"),o+=x}r+=parseInt("1111"+o+"00",2).toString(16).substring(1)}this.m_szGridMap=r},r.move=function(e,t,r,i){var n,a,o=kf.m_iCanvasWidth/this.m_iGridColNum,s=kf.m_iCanvasHeight/this.m_iGridRowNum,x=Math.floor(e/o),l=Math.floor(t/s),c=Math.floor(Math.abs(r-e)/o),f=Math.floor(Math.abs(i-t)/s);n=r-e>0?1:-1,a=i-t>0?1:-1;for(var h=[],u=0;u<this.m_iGridRowNum;u++){h[u]=[];for(var d=0;d<this.m_iGridColNum;d++)h[u][d]=1===n?1===a?u>=l&&u<=l+f&&d>=x&&d<=x+c?1:0:u<=l&&u>=l-f&&d>=x&&d<=x+c?1:0:1===a?u>=l&&u<=l+f&&d<=x&&d>=x-c?1:0:u<=l&&u>=l-f&&d<=x&&d>=x-c?1:0}this.m_aAddGridMap=h,this.draw()},t}(jf),Qf=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Line",t.m_iLineType=0,t.m_iDirection=0,t.m_iArrowType=0,t.m_aCrossArrowPoint=[],t}wf(t,e);var r=t.prototype;return r.draw=function(){0===this.m_iLineType?this.drawNormalLine():1===this.m_iLineType?this.drawArrowLine():3===this.m_iLineType?this.drawCrossLine():4===this.m_iLineType&&this.drawLineCount()},r.drawNormalLine=function(){if(kf[Bf].globalAlpha=1,this.m_aPoint.length>0){kf[Bf].beginPath(),kf[Bf].strokeStyle=this.m_szDrawColor,kf[Bf].lineWidth=2,kf[Bf].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]);for(var e=1,t=this.m_aPoint.length;e<t;e++)kf[Bf].lineTo(this.m_aPoint[e][0],this.m_aPoint[e][1]);if(kf[Bf].stroke(),this.m_bChoosed)for(var r=0,i=this.m_aPoint.length;r<i;r++)kf[Bf].beginPath(),kf[Bf].fillStyle=this.m_szDrawColor,kf[Bf].arc(this.m_aPoint[r][0],this.m_aPoint[r][1],3,0,2*Math.PI,!0),kf[Bf].closePath(),kf[Bf].fill();""!==this.m_szTips&&(kf[Bf].strokeStyle=this.m_szDrawColor,kf[Bf].fillText(this.m_szTips,this.m_aPoint[0][0]+10,this.m_aPoint[0][1]+4))}},r.drawArrowLine=function(e,t,r,i,n,a,o,s){a=void 0!==a?a:30,o=void 0!==o?o:10,s=void 0!==s?s:1;var x=180*Math.atan2(r-n,t-i)/Math.PI,l=(x+a)*Math.PI/180,c=(x-a)*Math.PI/180,f=o*Math.cos(l),h=o*Math.sin(l),u=o*Math.cos(c),d=o*Math.sin(c);kf[Bf].save(),kf[Bf].beginPath();var _=t-f,p=r-h;kf[Bf].moveTo(_,p),kf[Bf].lineTo(t,r),_=t-u,p=r-d,kf[Bf].lineTo(_,p),kf[Bf].moveTo(t,r),kf[Bf].lineTo(i,n),1===e&&(_=i+f,p=n+h,kf[Bf].moveTo(_,p),kf[Bf].lineTo(i,n),_=i+u,p=n+d,kf[Bf].lineTo(_,p)),kf[Bf].strokeStyle=this.m_szDrawColor,kf[Bf].lineWidth=s,kf[Bf].stroke(),kf[Bf].restore()},r.drawCrossLine=function(){this.drawNormalLine();var e=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2,t=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2,r=180*Math.atan2(t-this.m_aPoint[0][1],e-this.m_aPoint[0][0])/Math.PI,i=(r+90)*Math.PI/180,n=(r-90)*Math.PI/180,a=25*Math.cos(i),o=25*Math.sin(i),s=25*Math.cos(n),x=25*Math.sin(n),l=0,c=0;l=e-a,c=t-o;var f=0,h=0;0===this.m_iDirection?(f=-10,h=-15):1===this.m_iDirection?(f=10,h=10):(f=10,h=-15),0!==this.m_iDirection&&this.drawArrowLine(0,l,c,e,t),kf[Bf].strokeStyle=this.m_szDrawColor,kf[Bf].font="8px",kf[Bf].strokeText("A",l+f,c+4),l=e-s,c=t-x,1!==this.m_iDirection&&this.drawArrowLine(0,l,c,e,t),kf[Bf].strokeStyle=this.m_szDrawColor,kf[Bf].font="8px",kf[Bf].strokeText("B",l+h,c+4)},r.drawLineCount=function(){this.drawNormalLine();var e=(this.m_aPoint[0][0]+this.m_aPoint[1][0])/2,t=(this.m_aPoint[0][1]+this.m_aPoint[1][1])/2,r=180*Math.atan2(t-this.m_aPoint[0][1],e-this.m_aPoint[0][0])/Math.PI,i=(r+90)*Math.PI/180,n=(r-90)*Math.PI/180,a=25*Math.cos(i),o=25*Math.sin(i),s=25*Math.cos(n),x=25*Math.sin(n),l=0,c=0;l=e-a,c=t-o,1===this.m_iArrowType?(l=e-s,c=t-x,this.drawArrowLine(0,l,c,e,t)):0===this.m_iArrowType&&this.drawArrowLine(0,l,c,e,t),this.m_aCrossArrowPoint=[[e,t],[l,c]]},r.inShape=function(e,t){for(var r=!1,i=0,n=this.m_aPoint.length-1;i<n;i++){var a=Math.sqrt((this.m_aPoint[i+1][0]-this.m_aPoint[i][0])*(this.m_aPoint[i+1][0]-this.m_aPoint[i][0])+(this.m_aPoint[i+1][1]-this.m_aPoint[i][1])*(this.m_aPoint[i+1][1]-this.m_aPoint[i][1]));Math.sqrt((e-this.m_aPoint[i][0])*(e-this.m_aPoint[i][0])+(t-this.m_aPoint[i][1])*(t-this.m_aPoint[i][1]))+Math.sqrt((e-this.m_aPoint[i+1][0])*(e-this.m_aPoint[i+1][0])+(t-this.m_aPoint[i+1][1])*(t-this.m_aPoint[i+1][1]))-a<1&&(r=!0)}return r},t}(jf),eh=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Polygon",t.m_iPolygonType=1,t}wf(t,e);var r=t.prototype;return r.setPointInfo=function(e){if(null!=e){if(0===this.m_iPolygonType){for(var t=e[0][0],r=e[0][1],i=e[0][0],n=e[0][1],a=0,o=e.length;a<o;a++)t>e[a][0]&&(t=e[a][0]),r>e[a][1]&&(r=e[a][1]),i<e[a][0]&&(i=e[a][0]),n<e[a][1]&&(n=e[a][1]);this.m_aPoint=[[t,r],[i,r],[i,n],[t,n]]}else this.m_iPolygonType,this.m_aPoint=e;this.setEdgePoints(e)}},r.draw=function(){if(this.m_aPoint.length>0){kf[Bf].fillStyle=this.m_szFillColor,kf[Bf].strokeStyle=this.m_szDrawColor,kf[Bf].globalAlpha=1;var e=0,t=0;if(this.m_bChoosed)for(e=0,t=this.m_aPoint.length;e<t;e++)kf[Bf].beginPath(),kf[Bf].arc(this.m_aPoint[e][0],this.m_aPoint[e][1],3,0,360,!1),kf[Bf].fillStyle=this.m_szDrawColor,kf[Bf].closePath(),kf[Bf].fill();for(kf[Bf].beginPath(),kf[Bf].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]),e=0,t=this.m_aPoint.length;e<t;e++)0!==e&&kf[Bf].lineTo(this.m_aPoint[e][0],this.m_aPoint[e][1]);kf[Bf].stroke(),this.m_bClosed&&(kf[Bf].fillText(this.m_szTips,(this.m_oEdgePoints.left.x+this.m_oEdgePoints.right.x)/2,(this.m_oEdgePoints.top.y+this.m_oEdgePoints.bottom.y)/2),kf[Bf].closePath(),kf[Bf].stroke(),kf[Bf].globalAlpha=this.m_iTranslucent,kf[Bf].fill())}},r.move=function(e,t,r,i){if(1===this.m_iPolygonType){if(this.m_aPoint.length<this.m_iMaxPointNum&&this.m_aPoint.length>0){kf[Bf].fillStyle=this.m_szFillColor,kf[Bf].strokeStyle=this.m_szDrawColor,kf[Bf].globalAlpha=1;var n=0,a=0;for(n=0,a=this.m_aPoint.length;n<a;n++)kf[Bf].beginPath(),kf[Bf].arc(this.m_aPoint[n][0],this.m_aPoint[n][1],3,0,360,!1),kf[Bf].fillStyle=this.m_szDrawColor,kf[Bf].closePath(),kf[Bf].fill();for(kf[Bf].beginPath(),kf[Bf].moveTo(this.m_aPoint[0][0],this.m_aPoint[0][1]),n=0,a=this.m_aPoint.length;n<a;n++)0!==n&&kf[Bf].lineTo(this.m_aPoint[n][0],this.m_aPoint[n][1]);kf[Bf].lineTo(e,t),kf[Bf].closePath(),kf[Bf].stroke()}}else if(0===this.m_iPolygonType){this.m_bChoosed=!0;var o=r,s=i,x=e,l=t;this.setPointInfo([[o,s],[x,s],[x,l],[o,l]]),this.draw()}},r.stretch=function(e,t){0===this.m_iEditType&&(1===this.m_iPolygonType?-1!==this.m_iIndexChoosePoint&&(this.m_aPoint[this.m_iIndexChoosePoint][0]=e,this.m_aPoint[this.m_iIndexChoosePoint][1]=t):0===this.m_iIndexChoosePoint?e<this.m_aPoint[2][0]&&t<this.m_aPoint[2][1]&&(this.m_aPoint[0][0]=e,this.m_aPoint[0][1]=t,this.m_aPoint[3][0]=e,this.m_aPoint[1][1]=t):1===this.m_iIndexChoosePoint?e>this.m_aPoint[3][0]&&t<this.m_aPoint[3][1]&&(this.m_aPoint[1][0]=e,this.m_aPoint[1][1]=t,this.m_aPoint[2][0]=e,this.m_aPoint[0][1]=t):2===this.m_iIndexChoosePoint?e>this.m_aPoint[0][0]&&t>this.m_aPoint[0][1]&&(this.m_aPoint[2][0]=e,this.m_aPoint[2][1]=t,this.m_aPoint[1][0]=e,this.m_aPoint[3][1]=t):3===this.m_iIndexChoosePoint&&e<this.m_aPoint[1][0]&&t>this.m_aPoint[1][1]&&(this.m_aPoint[3][0]=e,this.m_aPoint[3][1]=t,this.m_aPoint[0][0]=e,this.m_aPoint[2][1]=t),this.setPointInfo(this.m_aPoint),Gf())},t}(jf),th=function(e){function t(){var t;return(t=e.call(this)||this).m_szType="Point",t.m_szId="",t}wf(t,e);var r=t.prototype;return r.draw=function(){kf[Bf].beginPath(),kf[Bf].fillStyle=this.m_szDrawColor,kf[Bf].globalAlpha=1,kf[Bf].arc(this.m_aPoint[0][0],this.m_aPoint[0][1],10,0,2*Math.PI,!0),kf[Bf].closePath(),kf[Bf].fill()},r.drag=function(){},r.stretch=function(){},t}(jf),rh=function(){function e(e){kf=this,this[Lf]=If("#"+e),this[Bf]=this[Lf][0].getContext("2d"),this[Of]=[],this[Hf]=!1,this[Nf]="Rect",this[Vf]=10,this[Wf]=!0,this[Xf]={},this[zf]=null,this[Yf]={szDrawColor:"#ff0000",szFillColor:"#343434",iTranslucent:.7},this[Uf]=!1,this.m_iCanvasWidth=this[Lf].width(),this.m_iCanvasHeight=this[Lf].height(),this.m_iHorizontalResolution=0,this.m_iVerticalResolution=0,this.m_szDisplayMode="",this.m_szVideoFormat="",Zf(),this[Of].length=0}var t=e.prototype;return t.setDrawMutiShapeOneTime=function(e){this[Wf]=e},t.setMaxShapeSupport=function(e){this[Vf]=e},t.getMaxShapeSupport=function(){return this[Vf]},t.setDrawStatus=function(e,t){this[Hf]=e,t&&e&&(this[zf]=t),e||(this[zf]=null)},t.setShapeType=function(e){this[Nf]=e,Gf()},t.setCurrentShapeInfo=function(e){this[Xf]=e||{szId:"",szTips:"",iMinClosed:3,iMaxPointNum:11,iPolygonType:1,iRedrawMode:0}},t.getShapeType=function(){return this[Nf]},t.getAllShapesInfo=function(){for(var e=[],t=0,r=this[Of].length;t<r;t++)"Grid"===this[Of][t].m_szType?e.push({szType:this[Of][t].m_szType,szGridMap:this[Of][t].m_szGridMap,iGridColNum:this[Of][t].m_iGridColNum,iGridRowNum:this[Of][t].m_iGridRowNum}):"RectOSD"===this[Of][t].m_szType?e.push({szType:this[Of][t].m_szType,szText:this[Of][t].m_szText,szEnabled:this[Of][t].m_szEnabled,szOSDType:this[Of][t].m_szOSDType,iPositionX:this[Of][t].m_aPoint[0][0],iPositionY:this[Of][t].m_aPoint[0][1],szDateStyle:this[Of][t].m_szDateStyle,szClockType:this[Of][t].m_szClockType,szDisplayWeek:this[Of][t].m_szDisplayWeek,szId:this[Of][t].m_szId,szAlignment:this[Of][t].m_szAlignment}):e.push({szType:this[Of][t].m_szType,aPoint:this[Of][t].m_aPoint,szId:this[Of][t].m_szId,bChoosed:this[Of][t].m_bChoosed});return e},t.deleteRepeatPolyonById=function(e){var t=this.getAllShapesInfo(),r=t.length;if(r>0)for(var i=0;i<r;i++)"Polygon"===t[i].szType&&t[i].szId===e&&this.deleteShape(i)},t.getShapesInfoByType=function(e){for(var t=[],r=0,i=this[Of].length;r<i;r++)this[Of][r].m_szType===e&&("Grid"===this[Of][r].m_szType?t.push({szType:this[Of][r].m_szType,szGridMap:this[Of][r].m_szGridMap,iGridColNum:this[Of][r].m_iGridColNum,iGridRowNum:this[Of][r].m_iGridRowNum}):"RectOSD"===this[Of][r].m_szType?t.push({szType:this[Of][r].m_szType,szText:this[Of][r].m_szText,szEnabled:this[Of][r].m_szEnabled,szOSDType:this[Of][r].m_szOSDType,iPositionX:this[Of][r].m_aPoint[0][0],iPositionY:this[Of][r].m_aPoint[0][1],szDateStyle:this[Of][r].m_szDateStyle,szClockType:this[Of][r].m_szClockType,szDisplayWeek:this[Of][r].m_szDisplayWeek,szId:this[Of][r].m_szId,szAlignment:this[Of][r].m_szAlignment}):"Polygon"===e?t.push({szType:this[Of][r].m_szType,szId:this[Of][r].m_szId,iPolygonType:this[Of][r].m_iPolygonType,iMinClosed:this[Of][r].m_iMinClosed,iMaxPointNum:this[Of][r].m_iMaxPointNum,iEditType:this[Of][r].m_iEditType,aPoint:this[Of][r].m_aPoint,bClosed:this[Of][r].m_bClosed,szTips:this[Of][r].m_szTips,szDrawColor:this[Of][r].m_szDrawColor,szFillColor:this[Of][r].m_szFillColor,iTranslucent:this[Of][r].m_iTranslucent}):"Line"===e?t.push({szType:this[Of][r].m_szType,szId:this[Of][r].m_szId,aPoint:this[Of][r].m_aPoint,szTips:this[Of][r].m_szTips,iLineType:this[Of][r].m_iLineType,iDirection:this[Of][r].m_iDirection,iArrowType:this[Of][r].m_iArrowType,szDrawColor:this[Of][r].m_szDrawColor,aCrossArrowPoint:this[Of][r].m_aCrossArrowPoint}):"Rect"===e?t.push({szType:this[Of][r].m_szType,iEditType:this[Of][r].m_iEditType,aPoint:this[Of][r].m_aPoint,szTips:this[Of][r].m_szTips,szDrawColor:this[Of][r].m_szDrawColor,szFillColor:this[Of][r].m_szFillColor,iTranslucent:this[Of][r].m_iTranslucent}):t.push({szType:this[Of][r].m_szType,aPoint:this[Of][r].m_aPoint}));return t},t.setShapesInfoByType=function(e,t){t||(t=[]);var r=null;if("Rect"===e||"Polygon"===e||"Line"===e||"Point"===e)for(var i=0,n=t.length;i<n;i++)"Rect"===e?((r=new qf).m_iEditType=t[i].iEditType,r.m_szTips=t[i].szTips||"",r.m_szDrawColor=t[i].szDrawColor,r.m_szFillColor=t[i].szFillColor,r.m_iTranslucent=t[i].iTranslucent,r.m_iRedrawMode=t[i].iRedrawMode):"Polygon"===e?(r=new eh,0===t[i].iPolygonType?r.m_bClosed=!0:r.m_bClosed=t[i].bClosed,r.m_szTips=t[i].szTips||"",r.m_szId=t[i].szId||"",r.m_iPolygonType=t[i].iPolygonType,r.m_iMinClosed=t[i].iMinClosed||3,r.m_iMaxPointNum=t[i].iMaxPointNum||11,r.m_iEditType=t[i].iEditType,r.m_szDrawColor=t[i].szDrawColor,r.m_szFillColor=t[i].szFillColor,r.m_iTranslucent=t[i].iTranslucent,r.m_iRedrawMode=t[i].iRedrawMode):"Line"===e?((r=new Qf).m_iLineType=t[i].iLineType,r.m_szTips=t[i].szTips||"",r.m_szId=t[i].szId,r.m_iDirection=t[i].iDirection,r.m_iArrowType=t[i].iArrowType,r.m_szDrawColor=t[i].szDrawColor,r.setPointInfo(t[i].aPoint)):"Point"===e&&((r=new th).m_szId=t[i].szId,r.m_szDrawColor=t[i].szDrawColor,r.setPointInfo(t[i].aPoint)),r.setPointInfo(t[i].aPoint),0===i&&(r.m_bChoosed=!0),Jf(r);else"Grid"===e&&((r=new Kf).m_szGridMap=t[0].szGridMap||"",r.m_iGridColNum=t[0].iGridColNum||22,r.m_iGridRowNum=t[0].iGridRowNum||18,Jf(r));Gf()},t.addOSDShape=function(e,t,r,i,n){r||i||(r=0,i=0),n||(n={});var a=new $f(e,t),o=10*e.replace(/[^x00-xff]/g,"rr").length;a.m_szOSDType=n.szOSDType||"",a.m_szDateStyle=n.szDateStyle||"",a.m_szClockType=n.szClockType||"",a.m_szDisplayWeek=n.szDisplayWeek||"",a.m_szId=n.szId||"",a.m_szAlignment=""+n.szAlignment||"0","0"===a.m_szAlignment?a.m_aPoint=[[r,i],[o+r,i],[o+r,i+20],[r,i+20]]:"1"===a.m_szAlignment?a.m_aPoint=[[0,i],[o,i],[o,i+20],[0,i+20]]:"2"===a.m_szAlignment?a.m_aPoint=[[this.m_iCanvasWidth-o,i],[this.m_iCanvasWidth,i],[this.m_iCanvasWidth,i+20],[this.m_iCanvasWidth-o,i+20]]:a.m_aPoint=[[r,i],[o+r,i],[o+r,i+20],[r,i+20]],Jf(a),Gf()},t.selectShapeById=function(e,t){for(var r=0,i=kf[Of].length;r<i;r++)e===kf[Of][r].m_szType&&(t===kf[Of][r].m_szId?kf[Of][r].m_bChoosed=!0:kf[Of][r].m_bChoosed=!1);Gf()},t.setCanvasSize=function(e,t){e>0&&t>0&&(this.m_iCanvasWidth=e,this.m_iCanvasHeight=t,Gf())},t.setDrawStyle=function(e,t,r){this[Yf]={szDrawColor:e,szFillColor:t,iTranslucent:r}},t.clearAllShape=function(){this[Of].length=0,kf[Uf]=!1,Gf()},t.clearShapeByType=function(e){for(var t=this[Of].length;t>0;t--)this[Of][t-1].m_szType===e&&("Grid"===e?(this[Of][t-1].m_szGridMap="",this[Of][t-1].m_aAddGridMap=[]):this[Of].splice(t-1,1));"Polygon"===e&&(kf[Uf]=!1),Gf()},t.deleteShape=function(e){this[Of].length>e&&this[Of].splice(e,1),Gf()},t.updateCanvas=function(e){this[Lf]=If("#"+e),this[Bf]=this[Lf][0].getContext("2d"),this.m_iCanvasWidth=this[Lf].width(),this.m_iCanvasHeight=this[Lf].height(),Zf()},t.resizeCanvas=function(){this.m_iCanvasWidth=this[Lf].width(),this.m_iCanvasHeight=this[Lf].height()},t.canvasRedraw=function(){Gf()},e}(),ih="object"==("undefined"==typeof global?"undefined":df(global))&&global&&global.Object===Object&&global,nh="object"==("undefined"==typeof self?"undefined":df(self))&&self&&self.Object===Object&&self,ah=ih||nh||Function("return this")(),oh=ah.Symbol,sh=Object.prototype,xh=sh.hasOwnProperty,lh=sh.toString,ch=oh?oh.toStringTag:void 0,fh=Object.prototype.toString,hh="[object Null]",uh="[object Undefined]",dh=oh?oh.toStringTag:void 0;function _h(e){return null==e?void 0===e?uh:hh:dh&&dh in Object(e)?function(e){var t=xh.call(e,ch),r=e[ch];try{e[ch]=void 0;var i=!0}catch(e){}var n=lh.call(e);return i&&(t?e[ch]=r:delete e[ch]),n}(e):function(e){return fh.call(e)}(e)}function ph(e){return null!=e&&"object"==df(e)}var mh=Array.isArray;function gh(e){var t=df(e);return null!=e&&("object"==t||"function"==t)}function yh(e){return e}var bh="[object AsyncFunction]",vh="[object Function]",Ph="[object GeneratorFunction]",Sh="[object Proxy]";function Rh(e){if(!gh(e))return!1;var t=_h(e);return t==vh||t==Ph||t==bh||t==Sh}var Ch,Eh=ah["__core-js_shared__"],Th=(Ch=/[^.]+$/.exec(Eh&&Eh.keys&&Eh.keys.IE_PROTO||""))?"Symbol(src)_1."+Ch:"",Fh=Function.prototype.toString,Dh=/^\[object .+?Constructor\]$/,Mh=Function.prototype,Ih=Object.prototype,wh=Mh.toString,Ah=Ih.hasOwnProperty,kh=RegExp("^"+wh.call(Ah).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Lh(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!gh(e)||(t=e,Th&&Th in t))&&(Rh(e)?kh:Dh).test(function(e){if(null!=e){try{return Fh.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}(r)?r:void 0}var Bh,Oh,Hh,Nh=Object.create,Vh=function(){function e(){}return function(t){if(!gh(t))return{};if(Nh)return Nh(t);e.prototype=t;var r=new e;return e.prototype=void 0,r}}(),Yh=Date.now,Uh=function(){try{var e=Lh(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Xh=Uh?function(e,t){return Uh(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:yh,Wh=(Bh=Xh,Oh=0,Hh=0,function(){var e=Yh(),t=16-(e-Hh);if(Hh=e,t>0){if(++Oh>=800)return arguments[0]}else Oh=0;return Bh.apply(void 0,arguments)}),zh=9007199254740991,Gh=/^(?:0|[1-9]\d*)$/;function Jh(e,t){var r=df(e);return!!(t=null==t?zh:t)&&("number"==r||"symbol"!=r&&Gh.test(e))&&e>-1&&e%1==0&&e<t}function Zh(e,t,r){"__proto__"==t&&Uh?Uh(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function jh(e,t){return e===t||e!=e&&t!=t}var qh=Object.prototype.hasOwnProperty;function $h(e,t,r){var i=e[t];qh.call(e,t)&&jh(i,r)&&(void 0!==r||t in e)||Zh(e,t,r)}var Kh=Math.max,Qh=9007199254740991;function eu(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Qh}function tu(e){return null!=e&&eu(e.length)&&!Rh(e)}var ru=Object.prototype;function iu(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ru)}function nu(e){return ph(e)&&"[object Arguments]"==_h(e)}var au=Object.prototype,ou=au.hasOwnProperty,su=au.propertyIsEnumerable,xu=nu(function(){return arguments}())?nu:function(e){return ph(e)&&ou.call(e,"callee")&&!su.call(e,"callee")},lu="object"==("undefined"==typeof exports?"undefined":df(exports))&&exports&&!exports.nodeType&&exports,cu=lu&&"object"==("undefined"==typeof module?"undefined":df(module))&&module&&!module.nodeType&&module,fu=cu&&cu.exports===lu?ah.Buffer:void 0,hu=(fu?fu.isBuffer:void 0)||function(){return!1},uu={};uu["[object Float32Array]"]=uu["[object Float64Array]"]=uu["[object Int8Array]"]=uu["[object Int16Array]"]=uu["[object Int32Array]"]=uu["[object Uint8Array]"]=uu["[object Uint8ClampedArray]"]=uu["[object Uint16Array]"]=uu["[object Uint32Array]"]=!0,uu["[object Arguments]"]=uu["[object Array]"]=uu["[object ArrayBuffer]"]=uu["[object Boolean]"]=uu["[object DataView]"]=uu["[object Date]"]=uu["[object Error]"]=uu["[object Function]"]=uu["[object Map]"]=uu["[object Number]"]=uu["[object Object]"]=uu["[object RegExp]"]=uu["[object Set]"]=uu["[object String]"]=uu["[object WeakMap]"]=!1;var du="object"==("undefined"==typeof exports?"undefined":df(exports))&&exports&&!exports.nodeType&&exports,_u=du&&"object"==("undefined"==typeof module?"undefined":df(module))&&module&&!module.nodeType&&module,pu=_u&&_u.exports===du&&ih.process,mu=function(){try{return _u&&_u.require&&_u.require("util").types||pu&&pu.binding&&pu.binding("util")}catch(e){}}(),gu=mu&&mu.isTypedArray,yu=gu?function(e){return function(t){return e(t)}}(gu):function(e){return ph(e)&&eu(e.length)&&!!uu[_h(e)]},bu=(Object.prototype.hasOwnProperty,Object.prototype.hasOwnProperty);function vu(e){return tu(e)?function(e,t){var r=mh(e),i=!r&&xu(e),n=!r&&!i&&hu(e),a=!r&&!i&&!n&&yu(e),o=r||i||n||a,s=o?function(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}(e.length,String):[],x=s.length;for(var l in e)o&&("length"==l||n&&("offset"==l||"parent"==l)||a&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Jh(l,x))||s.push(l);return s}(e):function(e){if(!gh(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=iu(e),r=[];for(var i in e)("constructor"!=i||!t&&bu.call(e,i))&&r.push(i);return r}(e)}var Pu=Lh(Object,"create"),Su=Object.prototype.hasOwnProperty,Ru=Object.prototype.hasOwnProperty;function Cu(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}function Eu(e,t){for(var r=e.length;r--;)if(jh(e[r][0],t))return r;return-1}Cu.prototype.clear=function(){this.__data__=Pu?Pu(null):{},this.size=0},Cu.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Cu.prototype.get=function(e){var t=this.__data__;if(Pu){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return Su.call(t,e)?t[e]:void 0},Cu.prototype.has=function(e){var t=this.__data__;return Pu?void 0!==t[e]:Ru.call(t,e)},Cu.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Pu&&void 0===t?"__lodash_hash_undefined__":t,this};var Tu=Array.prototype.splice;function Fu(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Fu.prototype.clear=function(){this.__data__=[],this.size=0},Fu.prototype.delete=function(e){var t=this.__data__,r=Eu(t,e);return!(r<0||(r==t.length-1?t.pop():Tu.call(t,r,1),--this.size,0))},Fu.prototype.get=function(e){var t=this.__data__,r=Eu(t,e);return r<0?void 0:t[r][1]},Fu.prototype.has=function(e){return Eu(this.__data__,e)>-1},Fu.prototype.set=function(e,t){var r=this.__data__,i=Eu(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this};var Du=Lh(ah,"Map");function Mu(e,t){var r,i,n=e.__data__;return("string"==(i=df(r=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==r:null===r)?n["string"==typeof t?"string":"hash"]:n.map}function Iu(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Iu.prototype.clear=function(){this.size=0,this.__data__={hash:new Cu,map:new(Du||Fu),string:new Cu}},Iu.prototype.delete=function(e){var t=Mu(this,e).delete(e);return this.size-=t?1:0,t},Iu.prototype.get=function(e){return Mu(this,e).get(e)},Iu.prototype.has=function(e){return Mu(this,e).has(e)},Iu.prototype.set=function(e,t){var r=Mu(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this};var wu=function(e,t){return function(r){return e(t(r))}}(Object.getPrototypeOf,Object),Au="[object Object]",ku=Function.prototype,Lu=Object.prototype,Bu=ku.toString,Ou=Lu.hasOwnProperty,Hu=Bu.call(Object);function Nu(e){var t=this.__data__=new Fu(e);this.size=t.size}Nu.prototype.clear=function(){this.__data__=new Fu,this.size=0},Nu.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Nu.prototype.get=function(e){return this.__data__.get(e)},Nu.prototype.has=function(e){return this.__data__.has(e)},Nu.prototype.set=function(e,t){var r=this.__data__;if(r instanceof Fu){var i=r.__data__;if(!Du||i.length<199)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new Iu(i)}return r.set(e,t),this.size=r.size,this};var Vu="object"==("undefined"==typeof exports?"undefined":df(exports))&&exports&&!exports.nodeType&&exports,Yu=Vu&&"object"==("undefined"==typeof module?"undefined":df(module))&&module&&!module.nodeType&&module,Uu=Yu&&Yu.exports===Vu?ah.Buffer:void 0,Xu=(Uu&&Uu.allocUnsafe,ah.Uint8Array);function Wu(e,t,r){(void 0!==r&&!jh(e[t],r)||void 0===r&&!(t in e))&&Zh(e,t,r)}function zu(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}function Gu(e,t,r,i,n){e!==t&&function(e,t,r){for(var i=-1,n=Object(e),a=r(e),o=a.length;o--;){var s=a[++i];if(!1===t(n[s],s))break}}(t,(function(a,o){if(n||(n=new Nu),gh(a))!function(e,t,r,i,n,a,o){var s=zu(e,r),x=zu(t,r),l=o.get(x);if(l)Wu(e,r,l);else{var c,f=a?a(s,x,r+"",e,t,o):void 0,h=void 0===f;if(h){var u=mh(x),d=!u&&hu(x),_=!u&&!d&&yu(x);f=x,u||d||_?mh(s)?f=s:ph(c=s)&&tu(c)?f=function(e,t){var r=-1,i=e.length;for(t||(t=Array(i));++r<i;)t[r]=e[r];return t}(s):d?(h=!1,f=function(e,t){return e.slice()}(x)):_?(h=!1,f=function(e,t){var r,i,n=(i=new(r=e.buffer).constructor(r.byteLength),new Xu(i).set(new Xu(r)),i);return new e.constructor(n,e.byteOffset,e.length)}(x)):f=[]:function(e){if(!ph(e)||_h(e)!=Au)return!1;var t=wu(e);if(null===t)return!0;var r=Ou.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Bu.call(r)==Hu}(x)||xu(x)?(f=s,xu(s)?f=function(e){return function(e,t,r,i){var n=!r;r||(r={});for(var a=-1,o=t.length;++a<o;){var s=t[a],x=void 0;void 0===x&&(x=e[s]),n?Zh(r,s,x):$h(r,s,x)}return r}(e,vu(e))}(s):gh(s)&&!Rh(s)||(f=function(e){return"function"!=typeof e.constructor||iu(e)?{}:Vh(wu(e))}(x))):h=!1}h&&(o.set(x,f),n(f,x,i,a,o),o.delete(x)),Wu(e,r,f)}}(e,t,o,r,Gu,i,n);else{var s=i?i(zu(e,o),a,o+"",e,t,n):void 0;void 0===s&&(s=a),Wu(e,o,s)}}),vu)}var Ju,Zu=(Ju=function(e,t,r){Gu(e,t,r)},function(e,t){return Wh(function(e,t,r){return t=Kh(void 0===t?e.length-1:t,0),function(){for(var i=arguments,n=-1,a=Kh(i.length-t,0),o=Array(a);++n<a;)o[n]=i[t+n];n=-1;for(var s=Array(t+1);++n<t;)s[n]=i[n];return s[t]=r(o),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,s)}}(e,void 0,yh),e+"")}((function(e,t){var r=-1,i=t.length,n=i>1?t[i-1]:void 0,a=i>2?t[2]:void 0;for(n=Ju.length>3&&"function"==typeof n?(i--,n):void 0,a&&function(e,t,r){if(!gh(r))return!1;var i=df(t);return!!("number"==i?tu(r)&&Jh(t,r.length):"string"==i&&t in r)&&jh(r[t],e)}(t[0],t[1],a)&&(n=i<3?void 0:n,i=1),e=Object(e);++r<i;){var o=t[r];o&&Ju(e,o,r)}return e}))),ju="https://open.ys7.com";
/*
  *
  * @ezuikit/utils-service v1.0.1
  * Copyright (c) 2024-3-23 Ezviz-OpenBiz
  * Released under MIT the License.
  *
  */function qu(e,t){return new Promise((function(r,i){fetch(e,t).then((function(e){return e.json()})).then((function(e){var t,n;if(200==+e.code||0==+(null==(t=e.meta)?void 0:t.code)||200==+(null==(n=e.meta)?void 0:n.code))r(e);else{if(e.meta)return e.meta.msg=e.meta.message,void i(e.meta);i(e)}})).catch((function(e){if(e.meta)return e.meta.msg=e.meta.message,void i(e.meta);i(e)}))}))}function $u(e,t,r,i,n,a,o){try{var s=e[a](o),x=s.value}catch(e){return void r(e)}s.done?t(x):Promise.resolve(x).then(i,n)}function Ku(e){var t=e.slice(0,4),r=e.slice(4,6),i=e.slice(6,8),n=e.slice(8,10),a=e.slice(10,12),o=e.slice(12,14);return new Date(t+"/"+r+"/"+i+" "+n+":"+a+":"+o)}var Qu=function(){function e(e){if(!e)throw new Error("options is required");var t;this._options=e,/^http[s]?:\/\//.test(null!=(t=null==e?void 0:e.domain)?t:"")||(this._options.domain=ju)}var t=e.prototype;return t.getDeviceCapacity=function(){return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var r=new FormData;Object.entries(e).forEach((function(e){var t=e[0],i=e[1];r.append(t,i)})),e=r}return qu((null!=t?t:ju)+"/api/lapp/device/capacity",{method:"POST",body:e})}(Pf(this._options,["accessToken","deviceSerial"]),this._options.domain)},t.getDeviceInfo=function(){return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var r=new FormData;Object.entries(e).forEach((function(e){var t=e[0],i=e[1];r.append(t,i)})),e=r}return qu((null!=t?t:ju)+"/api/lapp/device/info",{method:"POST",body:e})}(Pf(this._options,["accessToken","deviceSerial"]),this._options.domain)},t.getRealPlayUrl=function(e){var t,r,i=this,n=null==(r=this._options)||null==(t=r.extraParams)?void 0:t.ezopenParams;return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var r,i,n=new FormData;n.append("isFlv","false"),n.append("userAgent",null==(i=window)||null==(r=i.navigator)?void 0:r.userAgent),n.append("isHttp","false"),Object.entries(e).forEach((function(e){var t=e[0],r=e[1];n.append(t,r)})),e=n}return qu((null!=t?t:ju)+"/api/lapp/live/url/ezopen",{method:"POST",body:e})}(e=Object.assign({},Pf(this._options,["accessToken"]),e,"object"==df(n)?n:{}),this._options.domain).then((function(e){var t,r,n,a,o,s,x,l,c,f,h="",u="",d="";if((null==e||null==(t=e.ext)?void 0:t.token)?(u+=e.data,d=e.ext.token,h=e.data):(null==(r=e.data)?void 0:r.token)&&(u+=e.data.url,d=e.data.token,h=e.data.url),u=u.includes("live")?u+"&ssn="+d+"&auth=1&biz=4&cln=100":u+"&ssn="+d+"&auth=1&cln=100",null==(a=i._options)||null==(n=a.extraParams)?void 0:n.wsParams)if("string"==typeof(null==(s=i._options)||null==(o=s.extraParams)?void 0:o.wsParams))u+="&"+(null==(f=i._options)||null==(c=f.extraParams)?void 0:c.wsParams);else if("object"==df(null==(l=i._options)||null==(x=l.extraParams)?void 0:x.wsParams)){var _,p;for(var m in null==(p=i._options)||null==(_=p.extraParams)?void 0:_.wsParams){var g,y;u+="&"+m+"="+(null==(y=i._options)||null==(g=y.extraParams)?void 0:g.wsParams[m])}}return{playUrl:h,stream:d,realUrl:u}}))},t.getVideoByTime=function(e){return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var r,i=new FormData;Object.entries(e).forEach((function(e){var t=e[0],r=e[1];i.append(t,r)})),i.append("version",null!=(r=e.version)?r:"2.0"),e=i}return new Promise((function(r,i){var n=function(){return o.apply(this,arguments)},a=[];function o(){var s;return s=function(){var o,s,x,l;return function(e,t){var r,i,n,a,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&a[0]?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){o.label=a[1];break}if(6===a[0]&&o.label<n[1]){o.label=n[1],n=a;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(a);break}n[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{r=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(c){switch(c.label){case 0:return[4,qu((null!=t?t:ju)+"/api/lapp/video/by/time",{method:"POST",body:e})];case 1:return(s=c.sent()).data&&Array.isArray(s.data)?(a=a.concat(s.data),r({code:200,data:a,msg:""}),[2]):(!Array.isArray(s.data)&&(null==(o=s.data)?void 0:o.files)&&(a=a.concat(s.data.files),(null==(x=s.data)?void 0:x.isAll)?r({code:200,data:a,msg:""}):(null==(l=s.data)?void 0:l.nextFileTime)&&(e.append("startTime",s.data.nextFileTime),n().catch(i))),r({code:200,data:[],msg:""}),[2])}}))},o=function(){var e=this,t=arguments;return new Promise((function(r,i){var n=s.apply(e,t);function a(e){$u(n,r,i,a,o,"next",e)}function o(e){$u(n,r,i,a,o,"throw",e)}a(void 0)}))},o.apply(this,arguments)}n().catch(i)}))}(e=Object.assign({},Pf(this._options,["accessToken","deviceSerial"]),e),this._options.domain)},t.getRecordCloudVideoByTime=function(e){return function(e,t){var r,i,n={startTime:e.startTime?null==(r=Ox(e.startTime))?void 0:r.format("YYYY-MM-DD HH:mm:ss"):void 0,endTime:e.startTime?null==(i=Ox(e.endTime))?void 0:i.format("YYYY-MM-DD HH:mm:ss"):void 0,spaceId:e.spaceId},a=Object.keys(n).reduce((function(e,t){return null==n[t]?e:e+="&"+t+"="+encodeURIComponent(n[t])}),"").replace("&","");return qu((null!=t?t:ju)+"/api/service/cloudrecord/video/info/list?"+a,{method:"GET",headers:{accessToken:e.accessToken,deviceSerial:e.deviceSerial,localIndex:e.channelNo}}).then((function(e){return e.data=(e.data||[]).map((function(e){return e.endTime=Ku(e.stopTime).getTime(),e.startTime=Ku(e.startTime).getTime(),e.iStorageVersion=e.istorageVersion,e.busType=7,delete e.istorageVersion,e})),e}))}(e=Object.assign({},Pf(this._options,["accessToken","deviceSerial"]),e),this._options.domain)},t.getThemeDetailById=function(e){return t={accessToken:this._options.accessToken,id:e},qu((null!=(r=this._options.domain)?r:ju)+"/api/service/media/template/getDetail?accessToken="+t.accessToken+"&id="+t.id,{method:"GET"});var t,r},t.setMirrorFlip=function(e){return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var r=new FormData;Object.entries(e).forEach((function(e){var t=e[0],i=e[1];r.append(t,i)})),e=r}return qu((null!=t?t:ju)+"/api/lapp/device/ptz/mirror",{method:"POST",body:e})}(e=Object.assign({},Pf(this._options,["accessToken","deviceSerial"]),e),this._options.domain)},t.getVideoByID=function(e){return function(e,t){if(e&&"[object FormData]"!==Object.prototype.toString.call(e)){var r=new FormData;Object.entries(e).forEach((function(e){var t=e[0],i=e[1];r.append(t,i)})),e=r}return qu((null!=t?t:ju)+"/api/lapp/video/by/id",{method:"POST",body:e})}(e,this._options.domain)},t.getVersion=function(){return this.version},e}(),ed={title:"title",name:"name {{name}}"},td={title:"标题",name:"姓名 {{name}}"};function rd(e){return/^ezopen:\/\//.test(e)}var id={autoPlay:!0,width:600,height:400,decoderType:"auto",audio:!0,logger:{level:"INFO",name:"EZOPEN",showTime:!0}};function nd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function ad(e,t,r,i,n,a,o){try{var s=e[a](o),x=s.value}catch(e){return void r(e)}s.done?t(x):Promise.resolve(x).then(i,n)}function od(e){return function(){var t=this,r=arguments;return new Promise((function(i,n){var a=e.apply(t,r);function o(e){ad(a,i,n,o,s,"next",e)}function s(e){ad(a,i,n,o,s,"throw",e)}o(void 0)}))}}function sd(e,t){var r,i,n,a,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&a[0]?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){o.label=a[1];break}if(6===a[0]&&o.label<n[1]){o.label=n[1],n=a;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(a);break}n[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{r=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var xd=function(){function e(e){this.plugins=new Map,this.context=e}var t=e.prototype;return t.usePlugins=function(e){var t=this;return od((function(){var r,i,n;return sd(this,(function(a){switch(a.label){case 0:r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return nd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nd(e,t):void 0}}(e))){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(e),a.label=1;case 1:return(i=r()).done?[3,4]:(n=i.value,[4,t.use(n)]);case 2:a.sent(),a.label=3;case 3:return[3,1];case 4:return[2]}}))}))()},t.use=function(e){var t=this;return od((function(){var r;return sd(this,(function(i){switch(i.label){case 0:return e.name?("function"==typeof(null==e?void 0:e.init)&&(null==e||e.init()),r=!0,(null==e?void 0:e.beforeExec)?[4,e.beforeExec(t.context)]:[3,2]):[3,3];case 1:r=i.sent(),i.label=2;case 2:return r&&e.exec(t.context),"function"==typeof(null==e?void 0:e.afterExec)&&(null==e||e.afterExec(t.context)),t.plugins.set(e.name.toLowerCase(),e),[3,4];case 3:i.label=4;case 4:return[2]}}))}))()},t.destroyByName=function(e){var t=this.plugins.get(e.toLowerCase());t&&"function"==typeof(null==t?void 0:t.destroy)&&t.destroy(),this.plugins.delete(e)},t.destroy=function(){var e=this;(this.plugins||[]).forEach((function(t,r){e.destroyByName(r)})),this.plugins=null},e}();function ld(e,t,r){return{code:null!=t?t:0,data:e,msg:r}}function cd(e,t,r,i){return{data:e,msg:t,source:r,target:i}}var fd="playError",hd="EVENT_CALLBACK",ud={pluginErrorHandler:"pluginErrorHandler",getStreamHeaderCallback:"getStreamHeaderCallback",getVideoStreamCallback:"getVideoStreamCallback",appearFirstFrameCallback:"appearFirstFrameCallback",averageStreamSuccessCallback:"averageStreamSuccessCallback",setRunTimeInfoCallBack:"setRunTimeInfoCallBack",openStreamCallback:"openStreamCallback"},dd={initializing:"initializing",loadstart:"loadstart",abort:"abort",waiting:"waiting",canplay:"canplay",rateChange:"ratechange",volumeChange:"volumechange",debug:"debug",error:"error",videoInfo:"videoInfo",decoder:"decoder",urlChange:"urlChange",API:{play:"play",pause:"pause",rateChange:"ratechange",volumeChange:"volumechange",destroy:"destroy",snapshot:"snapshot",fullScreen:"fullScreen",exitScreen:"exitScreen",resize:"resize",seek:"seek",resume:"resume"},NETWORK:{deviceCapacity:"network.deviceCapacity",deviceInfo:"network.deviceInfo",videoFragmentFiles:"network.videoFragmentFiles",error:{error:"network.error",deviceCapacity:"network.error.deviceCapacity",deviceInfo:"network.error.deviceInfo",realPlayUrl:"network.error.realPlayUrl",videoFragmentFiles:"network.error.videoFragmentFiles"}},SOCKET:{autoClose:"StreamClient.autoClose",openStream:"StreamClient.openStream",startPlay:"StreamClient.startPlay",stopAll:"StreamClient.stopAll",setPlayRate:"StreamClient.setPlayRate",seek:"StreamClient.seek",close:"StreamClient.close"},CALLBACK:ud,FECCorrect:{setFEC2DParam:"setFEC2DParam"}},_d="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),pd=new Uint8Array(16);function md(){if(!_d)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return _d(pd)}for(var gd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,yd=[],bd=0;bd<256;++bd)yd.push((bd+256).toString(16).substr(1));function vd(e,t,r){var i=(e=e||{}).random||(e.rng||md)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){r=r||0;for(var n=0;n<16;++n)t[r+n]=i[n];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(yd[e[t+0]]+yd[e[t+1]]+yd[e[t+2]]+yd[e[t+3]]+"-"+yd[e[t+4]]+yd[e[t+5]]+"-"+yd[e[t+6]]+yd[e[t+7]]+"-"+yd[e[t+8]]+yd[e[t+9]]+"-"+yd[e[t+10]]+yd[e[t+11]]+yd[e[t+12]]+yd[e[t+13]]+yd[e[t+14]]+yd[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&gd.test(e)}(r))throw TypeError("Stringified UUID is invalid");return r}(i)}var Pd=function(){function e(){}var t=e.prototype;return t.createClientObject=function(e,t,r,i){return{socket:e,id:t,iCurChannel:r,iCurStream:i,resolve:null,reject:null}},t.zeroPlayCmd=function(e,t){return new Uint8Array([0,0,0,44,0,0,0,0,0,0,0,0,0,19,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e+1,0,0,0,t,0,0,4,0])},t.playCmd=function(e,t){return new Uint8Array([0,0,0,44,0,0,0,0,0,0,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,e,0,0,0,t,0,0,4,0])},t.playbackCmd=function(e,t,r,i){var n=e.split("T")[0],a=e.split("T")[1],o="0"+parseInt(n.substring(0,4),10).toString(16),s=parseInt(n.substring(4,6),10),x=parseInt(n.substring(6),10),l=parseInt(a.substring(0,2),10),c=parseInt(a.substring(2,4),10),f=parseInt(a.substring(4,6),10),h=t.split("T")[0],u=t.split("T")[1],d="0"+parseInt(h.substring(0,4),10).toString(16),_=parseInt(h.substring(4,6),10),p=parseInt(u.substring(0,2),10),m=parseInt(u.substring(2,4),10),g=parseInt(u.substring(4,6),10),y=[0,0,0,96,0,0,0,0,0,0,0,0,0,3,1,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,r,0,0,parseInt(o.substring(0,2),16),parseInt(o.substring(2,4),16),0,0,0,s,0,0,0,x,0,0,0,l,0,0,0,c,0,0,0,f,0,0,parseInt(d.substring(0,2),16),parseInt(d.substring(2,4),16),0,0,0,_,0,0,0,x,0,0,0,p,0,0,0,m,0,0,0,g,0,0,0,0,0,0,0,0,i,0,0,0];return new Uint8Array(y)},t.playRateCmd=function(e){for(var t=(parseInt(e,10)>>>0).toString(16).toLocaleUpperCase().toString(16),r=t.length;r<8;r++)t="0"+t;for(var i=[0,0,0,0],n=0,a=t.length;n<a;n+=2)i[Math.floor(n/2)]=parseInt(t.substring(n,n+2),16);var o=[0,0,0,36,0,0,0,0,0,0,0,0,0,3,1,47,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,i[0],i[1],i[2],i[3]];return new Uint8Array(o)},t.pauseCmd=function(){return new Uint8Array([0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,7,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])},t.resumeCmd=function(){return new Uint8Array([0,0,0,32,0,0,0,0,0,0,0,0,0,3,1,8,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])},e}(),Sd=function(){function e(){}var t=e.prototype;return t.createClientObject=function(e,t,r){return{socket:e,id:t,playURL:r,resolve:null,reject:null}},t.getMediaFromSdp=function(e){for(var t=e.indexOf("MEDIAINFO=")+10,r=e.slice(t,t+80),i=[],n=0,a=r.length/2;n<a;n++)i[n]=parseInt(r.slice(2*n,2*n+2),16);return new Uint8Array(i)},t.playCmd=function(e){var t={sequence:0,cmd:"realplay",url:e};return JSON.stringify(t)},t.playbackCmd=function(e,t,r){var i={sequence:0,cmd:"playback",url:r,startTime:e,endTime:t};return JSON.stringify(i)},t.playRateCmd=function(e){var t={sequence:0,cmd:"changespeed",speed:e};return JSON.stringify(t)},t.pauseCmd=function(){return JSON.stringify({sequence:0,cmd:"pause"})},t.resumeCmd=function(){return JSON.stringify({sequence:0,cmd:"resume"})},t.getError=function(e){var t=3001;return e&&(6===parseInt(e.statusCode,10)&&"streamLimit"===e.subStatusCode?t=3002:4===parseInt(e.statusCode,10)&&"badAuthorization"===e.subStatusCode&&(t=3003)),{iErrorNum:t,oError:e}},e}();function Rd(e,t,r){null!=e&&("number"==typeof e?this.fromNumber(e,t,r):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))}function Cd(){return new Rd(null)}Rd.prototype.am=function(e,t,r,i,n,a){var o=16383&t;for(t>>=14;--a>=0;){var s=16383&this[e],x=this[e++]>>14,l=t*s+x*o;n=((s=o*s+((16383&l)<<14)+r[i]+n)>>28)+(l>>14)+t*x,r[i++]=268435455&s}return n},Rd.prototype.DB=28,Rd.prototype.DM=268435455,Rd.prototype.DV=1<<28,Rd.prototype.FV=Math.pow(2,52),Rd.prototype.F1=24,Rd.prototype.F2=4;var Ed,Td,Fd=[];for(Ed="0".charCodeAt(0),Td=0;Td<=9;++Td)Fd[Ed++]=Td;for(Ed="a".charCodeAt(0),Td=10;Td<36;++Td)Fd[Ed++]=Td;for(Ed="A".charCodeAt(0),Td=10;Td<36;++Td)Fd[Ed++]=Td;function Dd(e){return"0123456789abcdefghijklmnopqrstuvwxyz".charAt(e)}function Md(e,t){var r=Fd[e.charCodeAt(t)];return null==r?-1:r}function Id(e){var t=Cd();return t.fromInt(e),t}function wd(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),!!(e>>1)&&(r+=1),r}function Ad(e){this.m=e}function kd(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function Ld(e,t){return e&t}function Bd(e,t){return e|t}function Od(e,t){return e^t}function Hd(e,t){return e&~t}function Nd(e){if(0==e)return-1;var t=0;return!(65535&e)&&(e>>=16,t+=16),!(255&e)&&(e>>=8,t+=8),!(15&e)&&(e>>=4,t+=4),!(3&e)&&(e>>=2,t+=2),!(1&e)&&++t,t}function Vd(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function Yd(){}function Ud(e){return e}function Xd(e){this.r2=Cd(),this.q3=Cd(),Rd.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}Ad.prototype.convert=function(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e},Ad.prototype.revert=function(e){return e},Ad.prototype.reduce=function(e){e.divRemTo(this.m,null,e)},Ad.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},Ad.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},kd.prototype.convert=function(e){var t=Cd();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(Rd.ZERO)>0&&this.m.subTo(t,t),t},kd.prototype.revert=function(e){var t=Cd();return e.copyTo(t),this.reduce(t),t},kd.prototype.reduce=function(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r,i=(r=32767&e[t])*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(e[r=t+this.m.t]+=this.m.am(0,i,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)},kd.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},kd.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)},Rd.prototype.copyTo=function(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s},Rd.prototype.fromInt=function(e){this.t=1,this.s=e<0?-1:0,e>0?this[0]=e:e<-1?this[0]=e+DV:this.t=0},Rd.prototype.fromString=function(e,t){var r;if(16==t)r=4;else if(8==t)r=3;else if(256==t)r=8;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return void this.fromRadix(e,t);r=2}this.s=this.t=0;for(var i=e.length,n=!1,a=0;--i>=0;){var o=8==r?255&e[i]:Md(e,i);o<0?"-"==e.charAt(i)&&(n=!0):(n=!1,0==a?this[this.t++]=o:a+r>this.DB?(this[this.t-1]|=(o&(1<<this.DB-a)-1)<<a,this[this.t++]=o>>this.DB-a):this[this.t-1]|=o<<a,(a+=r)>=this.DB&&(a-=this.DB))}8==r&&!!(128&e[0])&&(this.s=-1,a>0&&(this[this.t-1]|=(1<<this.DB-a)-1<<a)),this.clamp(),n&&Rd.ZERO.subTo(this,this)},Rd.prototype.clamp=function(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t},Rd.prototype.dlShiftTo=function(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s},Rd.prototype.drShiftTo=function(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s},Rd.prototype.lShiftTo=function(e,t){var r,i=e%this.DB,n=this.DB-i,a=(1<<n)-1,o=Math.floor(e/this.DB),s=this.s<<i&this.DM;for(r=this.t-1;r>=0;--r)t[r+o+1]=this[r]>>n|s,s=(this[r]&a)<<i;for(r=o-1;r>=0;--r)t[r]=0;t[o]=s,t.t=this.t+o+1,t.s=this.s,t.clamp()},Rd.prototype.rShiftTo=function(e,t){t.s=this.s;var r=Math.floor(e/this.DB);if(r>=this.t)t.t=0;else{var i=e%this.DB,n=this.DB-i,a=(1<<i)-1;t[0]=this[r]>>i;for(var o=r+1;o<this.t;++o)t[o-r-1]|=(this[o]&a)<<n,t[o-r]=this[o]>>i;i>0&&(t[this.t-r-1]|=(this.s&a)<<n),t.t=this.t-r,t.clamp()}},Rd.prototype.subTo=function(e,t){for(var r=0,i=0,n=Math.min(e.t,this.t);r<n;)i+=this[r]-e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i-=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i-=e[r],t[r++]=i&this.DM,i>>=this.DB;i-=e.s}t.s=i<0?-1:0,i<-1?t[r++]=this.DV+i:i>0&&(t[r++]=i),t.t=r,t.clamp()},Rd.prototype.multiplyTo=function(e,t){var r=this.abs(),i=e.abs(),n=r.t;for(t.t=n+i.t;--n>=0;)t[n]=0;for(n=0;n<i.t;++n)t[n+r.t]=r.am(0,i[n],t,n,0,r.t);t.s=0,t.clamp(),this.s!=e.s&&Rd.ZERO.subTo(t,t)},Rd.prototype.squareTo=function(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var i=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,i,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()},Rd.prototype.divRemTo=function(e,t,r){var i=e.abs();if(!(i.t<=0)){var n=this.abs();if(n.t<i.t)null!=t&&t.fromInt(0),null!=r&&this.copyTo(r);else{null==r&&(r=Cd());var a=Cd(),o=this.s,s=(e=e.s,this.DB-wd(i[i.t-1]));if(s>0?(i.lShiftTo(s,a),n.lShiftTo(s,r)):(i.copyTo(a),n.copyTo(r)),0!=(n=a[(i=a.t)-1])){var x=n*(1<<this.F1)+(i>1?a[i-2]>>this.F2:0),l=this.FV/x,c=(x=(1<<this.F1)/x,1<<this.F2),f=r.t,h=f-i,u=null==t?Cd():t;for(a.dlShiftTo(h,u),r.compareTo(u)>=0&&(r[r.t++]=1,r.subTo(u,r)),Rd.ONE.dlShiftTo(i,u),u.subTo(a,a);a.t<i;)a[a.t++]=0;for(;--h>=0;){var d=r[--f]==n?this.DM:Math.floor(r[f]*l+(r[f-1]+c)*x);if((r[f]+=a.am(0,d,r,h,0,i))<d)for(a.dlShiftTo(h,u),r.subTo(u,r);r[f]<--d;)r.subTo(u,r)}null!=t&&(r.drShiftTo(i,t),o!=e&&Rd.ZERO.subTo(t,t)),r.t=i,r.clamp(),s>0&&r.rShiftTo(s,r),o<0&&Rd.ZERO.subTo(r,r)}}}},Rd.prototype.invDigit=function(){if(this.t<1)return 0;var e,t=this[0];return 1&t?(e=(e=(e=(e=(e=3&t)*(2-(15&t)*e)&15)*(2-(255&t)*e)&255)*(2-((65535&t)*e&65535))&65535)*(2-t*e%this.DV)%this.DV)>0?this.DV-e:-e:0},Rd.prototype.isEven=function(){return 0==(this.t>0?1&this[0]:this.s)},Rd.prototype.exp=function(e,t){if(e>4294967295||e<1)return Rd.ONE;var r=Cd(),i=Cd(),n=t.convert(this),a=wd(e)-1;for(n.copyTo(r);--a>=0;)if(t.sqrTo(r,i),(e&1<<a)>0)t.mulTo(i,n,r);else{var o=r;r=i,i=o}return t.revert(r)},Rd.prototype.toString=function(e){if(this.s<0)return"-"+this.negate().toString(e);if(16==e)e=4;else if(8==e)e=3;else if(2==e)e=1;else if(32==e)e=5;else if(64==e)e=6;else{if(4!=e)return this.toRadix(e);e=2}var t,r=(1<<e)-1,i=!1,n="",a=this.t,o=this.DB-a*this.DB%e;if(a-- >0)for(o<this.DB&&(t=this[a]>>o)>0&&(i=!0,n=Dd(t));a>=0;)o<e?(t=(this[a]&(1<<o)-1)<<e-o,t|=this[--a]>>(o+=this.DB-e)):(t=this[a]>>(o-=e)&r,o<=0&&(o+=this.DB,--a)),t>0&&(i=!0),i&&(n+=Dd(t));return i?n:"0"},Rd.prototype.negate=function(){var e=Cd();return Rd.ZERO.subTo(this,e),e},Rd.prototype.abs=function(){return this.s<0?this.negate():this},Rd.prototype.compareTo=function(e){if(0!=(t=this.s-e.s))return t;var t,r=this.t;if(0!=(t=r-e.t))return t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0},Rd.prototype.bitLength=function(){return this.t<=0?0:this.DB*(this.t-1)+wd(this[this.t-1]^this.s&this.DM)},Rd.prototype.mod=function(e){var t=Cd();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(Rd.ZERO)>0&&e.subTo(t,t),t},Rd.prototype.modPowInt=function(e,t){var r;return r=e<256||t.isEven()?new Ad(t):new kd(t),this.exp(e,r)},Rd.ZERO=Id(0),Rd.ONE=Id(1),Yd.prototype.convert=Ud,Yd.prototype.revert=Ud,Yd.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r)},Yd.prototype.sqrTo=function(e,t){e.squareTo(t)},Xd.prototype.convert=function(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=Cd();return e.copyTo(t),this.reduce(t),t},Xd.prototype.revert=function(e){return e},Xd.prototype.reduce=function(e){for(e.drShiftTo(this.m.t-1,this.r2),e.t>this.m.t+1&&(e.t=this.m.t+1,e.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);e.compareTo(this.r2)<0;)e.dAddOffset(1,this.m.t+1);for(e.subTo(this.r2,e);e.compareTo(this.m)>=0;)e.subTo(this.m,e)},Xd.prototype.mulTo=function(e,t,r){e.multiplyTo(t,r),this.reduce(r)},Xd.prototype.sqrTo=function(e,t){e.squareTo(t),this.reduce(t)};var Wd=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],zd=67108864/Wd[Wd.length-1];function Gd(){}function Jd(){this.j=this.i=0,this.S=[]}Rd.prototype.chunkSize=function(e){return Math.floor(Math.LN2*this.DB/Math.log(e))},Rd.prototype.toRadix=function(e){if(null==e&&(e=10),0==this.signum()||e<2||e>36)return"0";var t=this.chunkSize(e),r=Id(t=Math.pow(e,t)),i=Cd(),n=Cd(),a="";for(this.divRemTo(r,i,n);i.signum()>0;)a=(t+n.intValue()).toString(e).substr(1)+a,i.divRemTo(r,i,n);return n.intValue().toString(e)+a},Rd.prototype.fromRadix=function(e,t){this.fromInt(0),null==t&&(t=10);for(var r=this.chunkSize(t),i=Math.pow(t,r),n=!1,a=0,o=0,s=0;s<e.length;++s){var x=Md(e,s);x<0?"-"==e.charAt(s)&&0==this.signum()&&(n=!0):(o=t*o+x,++a>=r&&(this.dMultiply(i),this.dAddOffset(o,0),o=a=0))}a>0&&(this.dMultiply(Math.pow(t,a)),this.dAddOffset(o,0)),n&&Rd.ZERO.subTo(this,this)},Rd.prototype.fromNumber=function(e,t,r){if("number"==typeof t)if(e<2)this.fromInt(1);else for(this.fromNumber(e,r),this.testBit(e-1)||this.bitwiseTo(Rd.ONE.shiftLeft(e-1),Bd,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(t);)this.dAddOffset(2,0),this.bitLength()>e&&this.subTo(Rd.ONE.shiftLeft(e-1),this);else{var i=7&e;(r=[]).length=1+(e>>3),t.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}},Rd.prototype.bitwiseTo=function(e,t,r){var i,n,a=Math.min(e.t,this.t);for(i=0;i<a;++i)r[i]=t(this[i],e[i]);if(e.t<this.t){for(n=e.s&this.DM,i=a;i<this.t;++i)r[i]=t(this[i],n);r.t=this.t}else{for(n=this.s&this.DM,i=a;i<e.t;++i)r[i]=t(n,e[i]);r.t=e.t}r.s=t(this.s,e.s),r.clamp()},Rd.prototype.changeBit=function(e,t){var r=Rd.ONE.shiftLeft(e);return this.bitwiseTo(r,t,r),r},Rd.prototype.addTo=function(e,t){for(var r=0,i=0,n=Math.min(e.t,this.t);r<n;)i+=this[r]+e[r],t[r++]=i&this.DM,i>>=this.DB;if(e.t<this.t){for(i+=e.s;r<this.t;)i+=this[r],t[r++]=i&this.DM,i>>=this.DB;i+=this.s}else{for(i+=this.s;r<e.t;)i+=e[r],t[r++]=i&this.DM,i>>=this.DB;i+=e.s}t.s=i<0?-1:0,i>0?t[r++]=i:i<-1&&(t[r++]=this.DV+i),t.t=r,t.clamp()},Rd.prototype.dMultiply=function(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()},Rd.prototype.dAddOffset=function(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}},Rd.prototype.multiplyLowerTo=function(e,t,r){var i,n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r[--n]=0;for(i=r.t-this.t;n<i;++n)r[n+this.t]=this.am(0,e[n],r,n,0,this.t);for(i=Math.min(e.t,t);n<i;++n)this.am(0,e[n],r,n,0,t-n);r.clamp()},Rd.prototype.multiplyUpperTo=function(e,t,r){--t;var i=r.t=this.t+e.t-t;for(r.s=0;--i>=0;)r[i]=0;for(i=Math.max(t-this.t,0);i<e.t;++i)r[this.t+i-t]=this.am(t-i,e[i],r,0,0,this.t+i-t);r.clamp(),r.drShiftTo(1,r)},Rd.prototype.modInt=function(e){if(e<=0)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var i=this.t-1;i>=0;--i)r=(t*r+this[i])%e;return r},Rd.prototype.millerRabin=function(e){var t=this.subtract(Rd.ONE),r=t.getLowestSetBit();if(r<=0)return!1;var i=t.shiftRight(r);(e=e+1>>1)>Wd.length&&(e=Wd.length);for(var n=Cd(),a=0;a<e;++a){n.fromInt(Wd[Math.floor(Math.random()*Wd.length)]);var o=n.modPow(i,this);if(0!=o.compareTo(Rd.ONE)&&0!=o.compareTo(t)){for(var s=1;s++<r&&0!=o.compareTo(t);)if(0==(o=o.modPowInt(2,this)).compareTo(Rd.ONE))return!1;if(0!=o.compareTo(t))return!1}}return!0},Rd.prototype.clone=function(){var e=Cd();return this.copyTo(e),e},Rd.prototype.intValue=function(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]},Rd.prototype.byteValue=function(){return 0==this.t?this.s:this[0]<<24>>24},Rd.prototype.shortValue=function(){return 0==this.t?this.s:this[0]<<16>>16},Rd.prototype.signum=function(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1},Rd.prototype.toByteArray=function(){var e=this.t,t=[];t[0]=this.s;var r,i=this.DB-e*this.DB%8,n=0;if(e-- >0)for(i<this.DB&&(r=this[e]>>i)!=(this.s&this.DM)>>i&&(t[n++]=r|this.s<<this.DB-i);e>=0;)i<8?(r=(this[e]&(1<<i)-1)<<8-i,r|=this[--e]>>(i+=this.DB-8)):(r=this[e]>>(i-=8)&255,i<=0&&(i+=this.DB,--e)),!!(128&r)&&(r|=-256),0==n&&(128&this.s)!=(128&r)&&++n,(n>0||r!=this.s)&&(t[n++]=r);return t},Rd.prototype.equals=function(e){return 0==this.compareTo(e)},Rd.prototype.min=function(e){return this.compareTo(e)<0?this:e},Rd.prototype.max=function(e){return this.compareTo(e)>0?this:e},Rd.prototype.and=function(e){var t=Cd();return this.bitwiseTo(e,Ld,t),t},Rd.prototype.or=function(e){var t=Cd();return this.bitwiseTo(e,Bd,t),t},Rd.prototype.xor=function(e){var t=Cd();return this.bitwiseTo(e,Od,t),t},Rd.prototype.andNot=function(e){var t=Cd();return this.bitwiseTo(e,Hd,t),t},Rd.prototype.not=function(){for(var e=Cd(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e},Rd.prototype.shiftLeft=function(e){var t=Cd();return e<0?this.rShiftTo(-e,t):this.lShiftTo(e,t),t},Rd.prototype.shiftRight=function(e){var t=Cd();return e<0?this.lShiftTo(-e,t):this.rShiftTo(e,t),t},Rd.prototype.getLowestSetBit=function(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+Nd(this[e]);return this.s<0?this.t*this.DB:-1},Rd.prototype.bitCount=function(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=Vd(this[r]^t);return e},Rd.prototype.testBit=function(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:!!(this[t]&1<<e%this.DB)},Rd.prototype.setBit=function(e){return this.changeBit(e,Bd)},Rd.prototype.clearBit=function(e){return this.changeBit(e,Hd)},Rd.prototype.flipBit=function(e){return this.changeBit(e,Od)},Rd.prototype.add=function(e){var t=Cd();return this.addTo(e,t),t},Rd.prototype.subtract=function(e){var t=Cd();return this.subTo(e,t),t},Rd.prototype.multiply=function(e){var t=Cd();return this.multiplyTo(e,t),t},Rd.prototype.divide=function(e){var t=Cd();return this.divRemTo(e,t,null),t},Rd.prototype.remainder=function(e){var t=Cd();return this.divRemTo(e,null,t),t},Rd.prototype.divideAndRemainder=function(e){var t=Cd(),r=Cd();return this.divRemTo(e,t,r),[t,r]},Rd.prototype.modPow=function(e,t){var r,i,n=e.bitLength(),a=Id(1);if(n<=0)return a;r=n<18?1:n<48?3:n<144?4:n<768?5:6,i=n<8?new Ad(t):t.isEven()?new Xd(t):new kd(t);var o=[],s=3,x=r-1,l=(1<<r)-1;if(o[1]=i.convert(this),r>1)for(n=Cd(),i.sqrTo(o[1],n);s<=l;)o[s]=Cd(),i.mulTo(n,o[s-2],o[s]),s+=2;var c,f=e.t-1,h=!0,u=Cd();for(n=wd(e[f])-1;f>=0;){for(n>=x?c=e[f]>>n-x&l:(c=(e[f]&(1<<n+1)-1)<<x-n,f>0&&(c|=e[f-1]>>this.DB+n-x)),s=r;!(1&c);)c>>=1,--s;if((n-=s)<0&&(n+=this.DB,--f),h)o[c].copyTo(a),h=!1;else{for(;s>1;)i.sqrTo(a,u),i.sqrTo(u,a),s-=2;s>0?i.sqrTo(a,u):(s=a,a=u,u=s),i.mulTo(u,o[c],a)}for(;f>=0&&!(e[f]&1<<n);)i.sqrTo(a,u),s=a,a=u,u=s,--n<0&&(n=this.DB-1,--f)}return i.revert(a)},Rd.prototype.modInverse=function(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return Rd.ZERO;for(var r=e.clone(),i=this.clone(),n=Id(1),a=Id(0),o=Id(0),s=Id(1);0!=r.signum();){for(;r.isEven();)r.rShiftTo(1,r),t?(n.isEven()&&a.isEven()||(n.addTo(this,n),a.subTo(e,a)),n.rShiftTo(1,n)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;i.isEven();)i.rShiftTo(1,i),t?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(e,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(e,s),s.rShiftTo(1,s);r.compareTo(i)>=0?(r.subTo(i,r),t&&n.subTo(o,n),a.subTo(s,a)):(i.subTo(r,i),t&&o.subTo(n,o),s.subTo(a,s))}return 0!=i.compareTo(Rd.ONE)?Rd.ZERO:s.compareTo(e)>=0?s.subtract(e):s.signum()<0?(s.addTo(e,s),s.signum()<0?s.add(e):s):s},Rd.prototype.pow=function(e){return this.exp(e,new Yd)},Rd.prototype.gcd=function(e){var t=this.s<0?this.negate():this.clone();if(e=e.s<0?e.negate():e.clone(),t.compareTo(e)<0){var r=t;t=e,e=r}r=t.getLowestSetBit();var i=e.getLowestSetBit();if(i<0)return t;for(r<i&&(i=r),i>0&&(t.rShiftTo(i,t),e.rShiftTo(i,e));t.signum()>0;)(r=t.getLowestSetBit())>0&&t.rShiftTo(r,t),(r=e.getLowestSetBit())>0&&e.rShiftTo(r,e),t.compareTo(e)>=0?(t.subTo(e,t),t.rShiftTo(1,t)):(e.subTo(t,e),e.rShiftTo(1,e));return i>0&&e.lShiftTo(i,e),e},Rd.prototype.isProbablePrime=function(e){var t,r=this.abs();if(1==r.t&&r[0]<=Wd[Wd.length-1]){for(t=0;t<Wd.length;++t)if(r[0]==Wd[t])return!0;return!1}if(r.isEven())return!1;for(t=1;t<Wd.length;){for(var i=Wd[t],n=t+1;n<Wd.length&&i<zd;)i*=Wd[n++];for(i=r.modInt(i);t<n;)if(i%Wd[t++]==0)return!1}return r.millerRabin(e)},Rd.prototype.square=function(){var e=Cd();return this.squareTo(e),e},function(e,t,r,i,n,a,o){function s(e){var t,i,n=this,a=e.length,o=0,s=n.i=n.j=n.m=0;for(n.S=[],n.c=[],a||(e=[a++]);o<r;)n.S[o]=o++;for(o=0;o<r;o++)s=s+(t=n.S[o])+e[o%a]&255,i=n.S[s],n.S[o]=i,n.S[s]=t;n.g=function(e){var t=n.S,i=n.i+1&255,a=t[i],o=n.j+a&255,s=t[o];t[i]=s,t[o]=a;for(var x=t[a+s&255];--e;)s=t[o=o+(a=t[i=i+1&255])&255],t[i]=s,t[o]=a,x=x*r+t[a+s&255];return n.i=i,n.j=o,x},n.g(r)}function x(e,t,r,i,n){var a;if(r=[],n=void 0===e?"undefined":(a=e)&&"undefined"!=typeof Symbol&&a.constructor===Symbol?"symbol":df(a),t&&"object"==n)for(i in e)if(i.indexOf("S")<5)try{r.push(x(e[i],t-1))}catch(e){}return r.length?r:e+("string"!=n?"\0":"")}function l(e,t,r,i){for(e+="",i=r=0;i<e.length;i++){var n=t,a=255&i,o=(r^=19*t[255&i])+e.charCodeAt(i);n[a]=255&o}for(i in e="",t)e+=String.fromCharCode(t[i]);return e}t.seedrandom=function(i,c){var f,h=[];return i=l(x(c?[i,e]:arguments.length?i:[(new Date).getTime(),e,window],3),h),l((f=new s(h)).S,e),t.random=function(){for(var e=f.g(6),t=o,i=0;e<n;)e=(e+i)*r,t*=r,i=f.g(1);for(;e>=a;)e/=2,t/=2,i>>>=1;return(e+i)/t},i},o=t.pow(r,6),n=t.pow(2,n),a=2*n,l(t.random(),e)}([],Math,256,0,52),Gd.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;t++)e[t]=Math.floor(256*Math.random())},Jd.prototype.init=function(e){var t,r,i;for(t=0;t<256;++t)this.S[t]=t;for(t=r=0;t<256;++t)r=r+this.S[t]+e[t%e.length]&255,i=this.S[t],this.S[t]=this.S[r],this.S[r]=i;this.j=this.i=0},Jd.prototype.next=function(){var e;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,e=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=e,this.S[e+this.S[this.i]&255]};var Zd,jd,qd,$d=256;function Kd(){!function(e){jd[qd++]^=255&e,jd[qd++]^=e>>8&255,jd[qd++]^=e>>16&255,jd[qd++]^=e>>24&255,qd>=$d&&(qd-=$d)}((new Date).getTime())}if(null==jd){var Qd;for(jd=[],qd=0;qd<$d;)Qd=Math.floor(65536*Math.random()),jd[qd++]=Qd>>>8,jd[qd++]=255&Qd;qd=0,Kd()}function e_(){if(null==Zd){for(Kd(),(Zd=new Jd).init(jd),qd=0;qd<jd.length;++qd)jd[qd]=0;qd=0}return Zd.next()}function t_(){}t_.prototype.nextBytes=function(e){var t;for(t=0;t<e.length;++t)e[t]=e_()};var r_=function(e){return function(e){function t(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function r(e,t){return e>>>t|e<<32-t}return e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t+=String.fromCharCode(i):(i>127&&i<2048?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t}(e),function(e){for(var t="",r=0;r<4*e.length;r++)t+="0123456789abcdef".charAt(e[r>>2]>>8*(3-r%4)+4&15)+"0123456789abcdef".charAt(e[r>>2]>>8*(3-r%4)&15);return t}(function(e,i){var n,a,o,s,x,l,c,f,h,u,d,_,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],m=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],g=Array(64);for(e[i>>5]|=128<<24-i%32,e[15+(i+64>>9<<4)]=i,h=0;h<e.length;h+=16){for(n=m[0],a=m[1],o=m[2],s=m[3],x=m[4],l=m[5],c=m[6],f=m[7],u=0;u<64;u++)g[u]=u<16?e[u+h]:t(t(t(r(g[u-2],17)^r(g[u-2],19)^g[u-2]>>>10,g[u-7]),r(g[u-15],7)^r(g[u-15],18)^g[u-15]>>>3),g[u-16]),d=t(t(t(t(f,r(x,6)^r(x,11)^r(x,25)),x&l^~x&c),p[u]),g[u]),_=t(r(n,2)^r(n,13)^r(n,22),n&a^n&o^a&o),f=c,c=l,l=x,x=t(s,d),s=o,o=a,a=n,n=t(d,_);m[0]=t(n,m[0]),m[1]=t(a,m[1]),m[2]=t(o,m[2]),m[3]=t(s,m[3]),m[4]=t(x,m[4]),m[5]=t(l,m[5]),m[6]=t(c,m[6]),m[7]=t(f,m[7])}return m}(function(e){for(var t=[],r=0;r<8*e.length;r+=8)t[r>>5]|=(255&e.charCodeAt(r/8))<<24-r%32;return t}(e),8*e.length))}(e)};function i_(e,t){return new Rd(e,t)}function n_(){this.n=null,this.e=0,this.coeff=this.dmq1=this.dmp1=this.q=this.p=this.d=null}n_.prototype.doPublic=function(e){return e.modPowInt(this.e,this.n)},n_.prototype.setPublic=function(e,t){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=i_(e,16),this.e=parseInt(t,16)):alert("Invalid RSA public key")},n_.prototype.encrypt=function(e){return null==(e=function(e,t){if(t<e.length+11)throw"Message too long for RSA (n="+t+", l="+e.length+")";for(var r=[],i=e.length-1;i>=0&&t>0;){var n=e.charCodeAt(i--);n<128?r[--t]=n:n>127&&n<2048?(r[--t]=63&n|128,r[--t]=n>>6|192):(r[--t]=63&n|128,r[--t]=n>>6&63|128,r[--t]=n>>12|224)}for(r[--t]=0,i=new t_,n=[];t>2;){for(n[0]=0;0==n[0];)i.nextBytes(n);r[--t]=n[0]}return r[--t]=2,r[--t]=0,new Rd(r)}(e,this.n.bitLength()+7>>3))||null==(e=this.doPublic(e))?null:1&(e=e.toString(16)).length?"0"+e:e},n_.prototype.doPrivate=function(e){if(null==this.p||null==this.q)return e.modPow(this.d,this.n);var t=e.mod(this.p).modPow(this.dmp1,this.p);for(e=e.mod(this.q).modPow(this.dmq1,this.q);t.compareTo(e)<0;)t=t.add(this.p);return t.subtract(e).multiply(this.coeff).mod(this.p).multiply(this.q).add(e)},n_.prototype.setPrivate=function(e,t,r){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=i_(e,16),this.e=parseInt(t,16),this.d=i_(r,16)):alert("Invalid RSA private key")},n_.prototype.setPrivateEx=function(e,t,r,i,n,a,o,s){null!=e&&null!=t&&e.length>0&&t.length>0?(this.n=i_(e,16),this.e=parseInt(t,16),this.d=i_(r,16),this.p=i_(i,16),this.q=i_(n,16),this.dmp1=i_(a,16),this.dmq1=i_(o,16),this.coeff=i_(s,16)):alert("Invalid RSA private key")},n_.prototype.generate=function(e,t){var r=new Gd,i=e>>1;this.e=parseInt(t,16);for(var n=new Rd(t,16);;){for(;this.p=new Rd(e-i,1,r),0!=this.p.subtract(Rd.ONE).gcd(n).compareTo(Rd.ONE)||!this.p.isProbablePrime(10););for(;this.q=new Rd(i,1,r),0!=this.q.subtract(Rd.ONE).gcd(n).compareTo(Rd.ONE)||!this.q.isProbablePrime(10););if(this.p.compareTo(this.q)<=0){var a=this.p;this.p=this.q,this.q=a}a=this.p.subtract(Rd.ONE);var o=this.q.subtract(Rd.ONE),s=a.multiply(o);if(0==s.gcd(n).compareTo(Rd.ONE)){this.n=this.p.multiply(this.q),this.d=n.modInverse(s),this.dmp1=this.d.mod(a),this.dmq1=this.d.mod(o),this.coeff=this.q.modInverse(this.p);break}}},n_.prototype.decrypt=function(e){return null==(e=this.doPrivate(i_(e,16)))?null:function(e,t){for(var r=e.toByteArray(),i=0;i<r.length&&0==r[i];)++i;if(r.length-i!=t-1||2!=r[i])return null;for(++i;0!=r[i];)if(++i>=r.length)return null;for(var n="";++i<r.length;){var a=255&r[i];a<128?n+=String.fromCharCode(a):a>191&&a<224?(n+=String.fromCharCode((31&a)<<6|63&r[i+1]),++i):(n+=String.fromCharCode((15&a)<<12|(63&r[i+1])<<6|63&r[i+2]),i+=2)}return n}(e,this.n.bitLength()+7>>3)};var a_=[];a_.sha1="3021300906052b0e03021a05000414",a_.sha256="3031300d060960864801650304020105000420";var o_=[];function s_(e,t,r){t/=4,e=(0,o_[r])(e),r="00"+a_[r]+e,e="",t=t-4-r.length;for(var i=0;i<t;i+=2)e+="ff";return sPaddedMessageHex="0001"+e+r}function x_(e){for(var t in a_){var r=a_[t],i=r.length;if(e.substring(0,i)==r)return[t,e.substring(i)]}return[]}o_.sha1=function(e){return function(e){function t(e,t){return e<<t|e>>>32-t}function r(e){var t,r="";for(t=7;t>=0;t--)r+=(e>>>4*t&15).toString(16);return r}var i,n,a,o,s,x,l,c=Array(80),f=1732584193,h=4023233417,u=2562383102,d=271733878,_=3285377520;e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t+=String.fromCharCode(i):(i>127&&i<2048?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t}(e),a=e.length;var p=[];for(i=0;i<a-3;i+=4)n=e.charCodeAt(i)<<24|e.charCodeAt(i+1)<<16|e.charCodeAt(i+2)<<8|e.charCodeAt(i+3),p.push(n);switch(a%4){case 0:i=2147483648;break;case 1:i=e.charCodeAt(a-1)<<24|8388608;break;case 2:i=e.charCodeAt(a-2)<<24|e.charCodeAt(a-1)<<16|32768;break;case 3:i=e.charCodeAt(a-3)<<24|e.charCodeAt(a-2)<<16|e.charCodeAt(a-1)<<8|128}for(p.push(i);p.length%16!=14;)p.push(0);for(p.push(a>>>29),p.push(a<<3&4294967295),e=0;e<p.length;e+=16){for(i=0;i<16;i++)c[i]=p[e+i];for(i=16;i<=79;i++)c[i]=t(c[i-3]^c[i-8]^c[i-14]^c[i-16],1);for(n=f,a=h,o=u,s=d,x=_,i=0;i<=19;i++)l=t(n,5)+(a&o|~a&s)+x+c[i]+1518500249&4294967295,x=s,s=o,o=t(a,30),a=n,n=l;for(i=20;i<=39;i++)l=t(n,5)+(a^o^s)+x+c[i]+1859775393&4294967295,x=s,s=o,o=t(a,30),a=n,n=l;for(i=40;i<=59;i++)l=t(n,5)+(a&o|a&s|o&s)+x+c[i]+2400959708&4294967295,x=s,s=o,o=t(a,30),a=n,n=l;for(i=60;i<=79;i++)l=t(n,5)+(a^o^s)+x+c[i]+3395469782&4294967295,x=s,s=o,o=t(a,30),a=n,n=l;f=f+n&4294967295,h=h+a&4294967295,u=u+o&4294967295,d=d+s&4294967295,_=_+x&4294967295}return(l=r(f)+r(h)+r(u)+r(d)+r(_)).toLowerCase()}(e)},o_.sha256=r_,n_.prototype.signString=function(e,t){var r=s_(e,this.n.bitLength(),t);return this.doPrivate(i_(r,16)).toString(16)},n_.prototype.signStringWithSHA1=function(e){return e=s_(e,this.n.bitLength(),"sha1"),this.doPrivate(i_(e,16)).toString(16)},n_.prototype.signStringWithSHA256=function(e){return e=s_(e,this.n.bitLength(),"sha256"),this.doPrivate(i_(e,16)).toString(16)},n_.prototype.verifyString=function(e,t){t=t.replace(/[ \n]+/g,"");var r=this.doPublic(i_(t,16)).toString(16).replace(/^1f+00/,""),i=x_(r);return 0!=i.length&&(r=i[1])==(0,o_[i[0]])(e)},n_.prototype.verifyHexSignatureForMessage=function(e,t){return function(e,t,r,i){return 0!=(r=x_(t=function(e,t,r){return function(e,t,r){var i=new n_;return i.setPublic(t,r),i.doPublic(e)}(e,t,r).toString(16).replace(/^1f+00/,"")}(t,r,i))).length&&(t=r[1])==(0,o_[r[0]])(e)}(t,i_(e,16),this.n.toString(16),this.e.toString(16))};var l_,c_,f_=function(){var e={Sbox:[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22],ShiftRowTab:[0,5,10,15,4,9,14,3,8,13,2,7,12,1,6,11],Init:function(){e.Sbox_Inv=Array(256);for(var t=0;t<256;t++)e.Sbox_Inv[e.Sbox[t]]=t;for(e.ShiftRowTab_Inv=Array(16),t=0;t<16;t++)e.ShiftRowTab_Inv[e.ShiftRowTab[t]]=t;for(e.xtime=Array(256),t=0;t<128;t++)e.xtime[t]=t<<1,e.xtime[128+t]=t<<1^27},Done:function(){delete e.Sbox_Inv,delete e.ShiftRowTab_Inv,delete e.xtime},ExpandKey:function(t){var r,i=t.length,n=1;switch(i){case 16:r=176;break;case 24:r=208;break;case 32:r=240;break;default:alert("my.ExpandKey: Only key lengths of 16, 24 or 32 bytes allowed!")}for(var a=i;a<r;a+=4){var o=t.slice(a-4,a);a%i==0?(o=[e.Sbox[o[1]]^n,e.Sbox[o[2]],e.Sbox[o[3]],e.Sbox[o[0]]],(n<<=1)>=256&&(n^=283)):i>24&&a%i==16&&(o=[e.Sbox[o[0]],e.Sbox[o[1]],e.Sbox[o[2]],e.Sbox[o[3]]]);for(var s=0;s<4;s++)t[a+s]=t[a+s-i]^o[s]}},Encrypt:function(t,r){var i=r.length;e.AddRoundKey(t,r.slice(0,16));for(var n=16;n<i-16;n+=16)e.SubBytes(t,e.Sbox),e.ShiftRows(t,e.ShiftRowTab),e.MixColumns(t),e.AddRoundKey(t,r.slice(n,n+16));e.SubBytes(t,e.Sbox),e.ShiftRows(t,e.ShiftRowTab),e.AddRoundKey(t,r.slice(n,i))},Decrypt:function(t,r){var i=r.length;for(e.AddRoundKey(t,r.slice(i-16,i)),e.ShiftRows(t,e.ShiftRowTab_Inv),e.SubBytes(t,e.Sbox_Inv),i-=32;i>=16;i-=16)e.AddRoundKey(t,r.slice(i,i+16)),e.MixColumns_Inv(t),e.ShiftRows(t,e.ShiftRowTab_Inv),e.SubBytes(t,e.Sbox_Inv);e.AddRoundKey(t,r.slice(0,16))},SubBytes:function(e,t){for(var r=0;r<16;r++)e[r]=t[e[r]]},AddRoundKey:function(e,t){for(var r=0;r<16;r++)e[r]^=t[r]},ShiftRows:function(e,t){for(var r=[].concat(e),i=0;i<16;i++)e[i]=r[t[i]]},MixColumns:function(t){for(var r=0;r<16;r+=4){var i=t[r+0],n=t[r+1],a=t[r+2],o=t[r+3],s=i^n^a^o;t[r+0]^=s^e.xtime[i^n],t[r+1]^=s^e.xtime[n^a],t[r+2]^=s^e.xtime[a^o],t[r+3]^=s^e.xtime[o^i]}},MixColumns_Inv:function(t){for(var r=0;r<16;r+=4){var i=t[r+0],n=t[r+1],a=t[r+2],o=t[r+3],s=i^n^a^o,x=e.xtime[s],l=e.xtime[e.xtime[x^i^a]]^s;s^=e.xtime[e.xtime[x^n^o]],t[r+0]^=l^e.xtime[i^n],t[r+1]^=s^e.xtime[n^a],t[r+2]^=l^e.xtime[a^o],t[r+3]^=s^e.xtime[o^i]}}};return e}(),h_=function(){var e={};return f_.Init(),e.b256to64=function(e){var t,r,i,n="",a=0,o=e.length;for(i=0;i<o;i++)r=e.charCodeAt(i),0==a?(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>2&63),t=(3&r)<<4):1==a?(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t|r>>4&15),t=(15&r)<<2):2==a&&(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t|r>>6&3),n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&r)),3==(a+=1)&&(a=0);return a>0&&(n+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(t),n+="="),1==a&&(n+="="),n},e.b64to256=function(e){var t,r,i="",n=0,a=0,o=e.length;for(r=0;r<o;r++)(t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(r)))>=0&&(n&&(i+=String.fromCharCode(a|t>>6-n&255)),a=t<<(n=n+2&7)&255);return i},e.b16to64=function(e){var t,r,i="";for(e.length%2==1&&(e="0"+e),t=0;t+3<=e.length;t+=3)r=parseInt(e.substring(t,t+3),16),i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>6)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(63&r);for(t+1==e.length?(r=parseInt(e.substring(t,t+1),16),i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r<<2)):t+2==e.length&&(r=parseInt(e.substring(t,t+2),16),i+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(r>>2)+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt((3&r)<<4));(3&i.length)>0;)i+="=";return i},e.b64to16=function(e){var t,r,i="",n=0;for(t=0;t<e.length&&"="!=e.charAt(t);++t)v="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(e.charAt(t)),v<0||(0==n?(i+=Dd(v>>2),r=3&v,n=1):1==n?(i+=Dd(r<<2|v>>4),r=15&v,n=2):2==n?(i+=Dd(r),i+=Dd(v>>2),r=3&v,n=3):(i+=Dd(r<<2|v>>4),i+=Dd(15&v),n=0));return 1==n&&(i+=Dd(r<<2)),i},e.string2bytes=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e.charCodeAt(r));return t},e.bytes2string=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},e.blockXOR=function(e,t){for(var r=Array(16),i=0;i<16;i++)r[i]=e[i]^t[i];return r},e.blockIV=function(){var e=new t_,t=Array(16);return e.nextBytes(t),t},e.pad16=function(e){var t=e.slice(0),r=(16-e.length%16)%16;for(i=e.length;i<e.length+r;i++)t.push(0);return t},e.depad=function(e){for(e=e.slice(0);0==e[e.length-1];)e=e.slice(0,e.length-1);return e},e.encryptAESCBC=function(t,r){var i=r.slice(0);f_.ExpandKey(i);for(var n=e.string2bytes(t),a=(n=e.pad16(n),e.blockIV()),o=0;o<n.length/16;o++){var s=n.slice(16*o,16*o+16),x=a.slice(16*o,16*o+16);s=e.blockXOR(x,s),f_.Encrypt(s,i),a=a.concat(s)}return i=e.bytes2string(a),e.b256to64(i)},e.decryptAESCBC=function(t,r){var i=r.slice(0);f_.ExpandKey(i),t=e.b64to256(t);for(var n=e.string2bytes(t),a=[],o=1;o<n.length/16;o++){var s=n.slice(16*o,16*o+16),x=n.slice(16*(o-1),16*(o-1)+16);f_.Decrypt(s,i),s=e.blockXOR(x,s),a=a.concat(s)}return a=e.depad(a),e.bytes2string(a)},e.wrap60=function(e){for(var t="",r=0;r<e.length;r++)r%60==0&&0!=r&&(t+="\n"),t+=e[r];return t},e.generateAESKey=function(){var e=Array(16);return(new t_).nextBytes(e),e},e.generateRSAKey=function(e,t){Math.seedrandom(r_(e));var r=new n_;return r.generate(t,"10001"),r},e.publicKeyString=function(e){return pubkey=e.n.toString(16)},e.publicKeyID=function(e){return function(e){function t(e,t){var r,i,n,a,o;return n=2147483648&e,a=2147483648&t,o=(1073741823&e)+(1073741823&t),(r=1073741824&e)&(i=1073741824&t)?2147483648^o^n^a:r|i?1073741824&o?3221225472^o^n^a:1073741824^o^n^a:o^n^a}function r(e,r,i,n,a,o,s){return e=t(e,t(t(r&i|~r&n,a),s)),t(e<<o|e>>>32-o,r)}function i(e,r,i,n,a,o,s){return e=t(e,t(t(r&n|i&~n,a),s)),t(e<<o|e>>>32-o,r)}function n(e,r,i,n,a,o,s){return e=t(e,t(t(r^i^n,a),s)),t(e<<o|e>>>32-o,r)}function a(e,r,i,n,a,o,s){return e=t(e,t(t(i^(r|~n),a),s)),t(e<<o|e>>>32-o,r)}function o(e){var t,r="",i="";for(t=0;t<=3;t++)r+=(i="0"+(i=e>>>8*t&255).toString(16)).substr(i.length-2,2);return r}var s,x,l,c,f,h,u,d,_=function(e){for(var t,r=e.length,i=16*(((t=r+8)-t%64)/64+1),n=Array(i-1),a=0,o=0;o<r;)a=o%4*8,n[t=(o-o%4)/4]|=e.charCodeAt(o)<<a,o++;return n[(o-o%4)/4]|=128<<o%4*8,n[i-2]=r<<3,n[i-1]=r>>>29,n}(e=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t+=String.fromCharCode(i):(i>127&&i<2048?t+=String.fromCharCode(i>>6|192):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128)),t+=String.fromCharCode(63&i|128))}return t}(e));for(f=1732584193,h=4023233417,u=2562383102,d=271733878,e=0;e<_.length;e+=16)s=f,x=h,l=u,c=d,f=r(f,h,u,d,_[e+0],7,3614090360),d=r(d,f,h,u,_[e+1],12,3905402710),u=r(u,d,f,h,_[e+2],17,606105819),h=r(h,u,d,f,_[e+3],22,3250441966),f=r(f,h,u,d,_[e+4],7,4118548399),d=r(d,f,h,u,_[e+5],12,1200080426),u=r(u,d,f,h,_[e+6],17,2821735955),h=r(h,u,d,f,_[e+7],22,4249261313),f=r(f,h,u,d,_[e+8],7,1770035416),d=r(d,f,h,u,_[e+9],12,2336552879),u=r(u,d,f,h,_[e+10],17,4294925233),h=r(h,u,d,f,_[e+11],22,2304563134),f=r(f,h,u,d,_[e+12],7,1804603682),d=r(d,f,h,u,_[e+13],12,4254626195),u=r(u,d,f,h,_[e+14],17,2792965006),f=i(f,h=r(h,u,d,f,_[e+15],22,1236535329),u,d,_[e+1],5,4129170786),d=i(d,f,h,u,_[e+6],9,3225465664),u=i(u,d,f,h,_[e+11],14,643717713),h=i(h,u,d,f,_[e+0],20,3921069994),f=i(f,h,u,d,_[e+5],5,3593408605),d=i(d,f,h,u,_[e+10],9,38016083),u=i(u,d,f,h,_[e+15],14,3634488961),h=i(h,u,d,f,_[e+4],20,3889429448),f=i(f,h,u,d,_[e+9],5,568446438),d=i(d,f,h,u,_[e+14],9,3275163606),u=i(u,d,f,h,_[e+3],14,4107603335),h=i(h,u,d,f,_[e+8],20,1163531501),f=i(f,h,u,d,_[e+13],5,2850285829),d=i(d,f,h,u,_[e+2],9,4243563512),u=i(u,d,f,h,_[e+7],14,1735328473),f=n(f,h=i(h,u,d,f,_[e+12],20,2368359562),u,d,_[e+5],4,4294588738),d=n(d,f,h,u,_[e+8],11,2272392833),u=n(u,d,f,h,_[e+11],16,1839030562),h=n(h,u,d,f,_[e+14],23,4259657740),f=n(f,h,u,d,_[e+1],4,2763975236),d=n(d,f,h,u,_[e+4],11,1272893353),u=n(u,d,f,h,_[e+7],16,4139469664),h=n(h,u,d,f,_[e+10],23,3200236656),f=n(f,h,u,d,_[e+13],4,681279174),d=n(d,f,h,u,_[e+0],11,3936430074),u=n(u,d,f,h,_[e+3],16,3572445317),h=n(h,u,d,f,_[e+6],23,76029189),f=n(f,h,u,d,_[e+9],4,3654602809),d=n(d,f,h,u,_[e+12],11,3873151461),u=n(u,d,f,h,_[e+15],16,530742520),f=a(f,h=n(h,u,d,f,_[e+2],23,3299628645),u,d,_[e+0],6,4096336452),d=a(d,f,h,u,_[e+7],10,1126891415),u=a(u,d,f,h,_[e+14],15,2878612391),h=a(h,u,d,f,_[e+5],21,4237533241),f=a(f,h,u,d,_[e+12],6,1700485571),d=a(d,f,h,u,_[e+3],10,2399980690),u=a(u,d,f,h,_[e+10],15,4293915773),h=a(h,u,d,f,_[e+1],21,2240044497),f=a(f,h,u,d,_[e+8],6,1873313359),d=a(d,f,h,u,_[e+15],10,4264355552),u=a(u,d,f,h,_[e+6],15,2734768916),h=a(h,u,d,f,_[e+13],21,1309151649),f=a(f,h,u,d,_[e+4],6,4149444226),d=a(d,f,h,u,_[e+11],10,3174756917),u=a(u,d,f,h,_[e+2],15,718787259),h=a(h,u,d,f,_[e+9],21,3951481745),f=t(f,s),h=t(h,x),u=t(u,l),d=t(d,c);return(o(f)+o(h)+o(u)+o(d)).toLowerCase()}(e)},e.publicKeyFromString=function(e){e=e.split("|")[0];var t=new n_;return t.setPublic(e,"10001"),t},e.encrypt=function(t,r,i){var n="";try{n+=e.publicKeyFromString(r).encrypt(t)+"?"}catch(e){return{status:"Invalid public key"}}return{status:"success",cipher:n}},e.decrypt=function(e,t){var r=e.split("?");return{status:"success",plaintext:t.decrypt(r[0]),signature:"unsigned"}},e}(),u_=u_||function(e,t){var r={},i=r.lib={},n=function(){},a=i.Base={extend:function(e){n.prototype=this;var t=new n;return e&&t.mixIn(e),t.hasOwnProperty("init")||(t.init=function(){t.$super.init.apply(this,arguments)}),t.init.prototype=t,t.$super=this,t},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}},o=i.WordArray=a.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||x).stringify(this)},concat:function(e){var t=this.words,r=e.words,i=this.sigBytes;if(e=e.sigBytes,this.clamp(),i%4)for(var n=0;n<e;n++)t[i+n>>>2]|=(r[n>>>2]>>>24-n%4*8&255)<<24-(i+n)%4*8;else if(65535<r.length)for(n=0;n<e;n+=4)t[i+n>>>2]=r[n>>>2];else t.push.apply(t,r);return this.sigBytes+=e,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=a.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r=[],i=0;i<t;i+=4)r.push(4294967296*e.random()|0);return new o.init(r,t)}}),s=r.enc={},x=s.Hex={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],i=0;i<e;i++){var n=t[i>>>2]>>>24-i%4*8&255;r.push((n>>>4).toString(16)),r.push((15&n).toString(16))}return r.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i+=2)r[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return new o.init(r,t/2)}},l=s.Latin1={stringify:function(e){var t=e.words;e=e.sigBytes;for(var r=[],i=0;i<e;i++)r.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return r.join("")},parse:function(e){for(var t=e.length,r=[],i=0;i<t;i++)r[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return new o.init(r,t)}},c=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},f=i.BufferedBlockAlgorithm=a.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,i=r.words,n=r.sigBytes,a=this.blockSize,s=n/(4*a);if(t=(s=t?e.ceil(s):e.max((0|s)-this._minBufferSize,0))*a,n=e.min(4*t,n),t){for(var x=0;x<t;x+=a)this._doProcessBlock(i,x);x=i.splice(0,t),r.sigBytes-=n}return new o.init(x,n)},clone:function(){var e=a.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=f.extend({cfg:a.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize()},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new h.HMAC.init(e,r).finalize(t)}}});var h=r.algo={};return r}(Math);c_=(l_=u_).lib.WordArray,l_.enc.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,i=this._map;e.clamp(),e=[];for(var n=0;n<r;n+=3)for(var a=(t[n>>>2]>>>24-n%4*8&255)<<16|(t[n+1>>>2]>>>24-(n+1)%4*8&255)<<8|t[n+2>>>2]>>>24-(n+2)%4*8&255,o=0;4>o&&n+.75*o<r;o++)e.push(i.charAt(a>>>6*(3-o)&63));if(t=i.charAt(64))for(;e.length%4;)e.push(t);return e.join("")},parse:function(e){var t=e.length,r=this._map;(i=r.charAt(64))&&-1!=(i=e.indexOf(i))&&(t=i);for(var i=[],n=0,a=0;a<t;a++)if(a%4){var o=r.indexOf(e.charAt(a-1))<<a%4*2,s=r.indexOf(e.charAt(a))>>>6-a%4*2;i[n>>>2]|=(o|s)<<24-n%4*8,n++}return c_.create(i,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},function(e){function t(e,t,r,i,n,a,o){return((e=e+(t&r|~t&i)+n+o)<<a|e>>>32-a)+t}function r(e,t,r,i,n,a,o){return((e=e+(t&i|r&~i)+n+o)<<a|e>>>32-a)+t}function i(e,t,r,i,n,a,o){return((e=e+(t^r^i)+n+o)<<a|e>>>32-a)+t}function n(e,t,r,i,n,a,o){return((e=e+(r^(t|~i))+n+o)<<a|e>>>32-a)+t}for(var a=u_,o=(x=a.lib).WordArray,s=x.Hasher,x=a.algo,l=[],c=0;64>c;c++)l[c]=4294967296*e.abs(e.sin(c+1))|0;x=x.MD5=s.extend({_doReset:function(){this._hash=new o.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,a){for(var o=0;16>o;o++){var s=e[x=a+o];e[x]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}o=this._hash.words;var x=e[a+0],c=(s=e[a+1],e[a+2]),f=e[a+3],h=e[a+4],u=e[a+5],d=e[a+6],_=e[a+7],p=e[a+8],m=e[a+9],g=e[a+10],y=e[a+11],b=e[a+12],v=e[a+13],P=e[a+14],S=e[a+15],R=t(R=o[0],T=o[1],E=o[2],C=o[3],x,7,l[0]),C=t(C,R,T,E,s,12,l[1]),E=t(E,C,R,T,c,17,l[2]),T=t(T,E,C,R,f,22,l[3]);R=t(R,T,E,C,h,7,l[4]),C=t(C,R,T,E,u,12,l[5]),E=t(E,C,R,T,d,17,l[6]),T=t(T,E,C,R,_,22,l[7]),R=t(R,T,E,C,p,7,l[8]),C=t(C,R,T,E,m,12,l[9]),E=t(E,C,R,T,g,17,l[10]),T=t(T,E,C,R,y,22,l[11]),R=t(R,T,E,C,b,7,l[12]),C=t(C,R,T,E,v,12,l[13]),E=t(E,C,R,T,P,17,l[14]),R=r(R,T=t(T,E,C,R,S,22,l[15]),E,C,s,5,l[16]),C=r(C,R,T,E,d,9,l[17]),E=r(E,C,R,T,y,14,l[18]),T=r(T,E,C,R,x,20,l[19]),R=r(R,T,E,C,u,5,l[20]),C=r(C,R,T,E,g,9,l[21]),E=r(E,C,R,T,S,14,l[22]),T=r(T,E,C,R,h,20,l[23]),R=r(R,T,E,C,m,5,l[24]),C=r(C,R,T,E,P,9,l[25]),E=r(E,C,R,T,f,14,l[26]),T=r(T,E,C,R,p,20,l[27]),R=r(R,T,E,C,v,5,l[28]),C=r(C,R,T,E,c,9,l[29]),E=r(E,C,R,T,_,14,l[30]),R=i(R,T=r(T,E,C,R,b,20,l[31]),E,C,u,4,l[32]),C=i(C,R,T,E,p,11,l[33]),E=i(E,C,R,T,y,16,l[34]),T=i(T,E,C,R,P,23,l[35]),R=i(R,T,E,C,s,4,l[36]),C=i(C,R,T,E,h,11,l[37]),E=i(E,C,R,T,_,16,l[38]),T=i(T,E,C,R,g,23,l[39]),R=i(R,T,E,C,v,4,l[40]),C=i(C,R,T,E,x,11,l[41]),E=i(E,C,R,T,f,16,l[42]),T=i(T,E,C,R,d,23,l[43]),R=i(R,T,E,C,m,4,l[44]),C=i(C,R,T,E,b,11,l[45]),E=i(E,C,R,T,S,16,l[46]),R=n(R,T=i(T,E,C,R,c,23,l[47]),E,C,x,6,l[48]),C=n(C,R,T,E,_,10,l[49]),E=n(E,C,R,T,P,15,l[50]),T=n(T,E,C,R,u,21,l[51]),R=n(R,T,E,C,b,6,l[52]),C=n(C,R,T,E,f,10,l[53]),E=n(E,C,R,T,g,15,l[54]),T=n(T,E,C,R,s,21,l[55]),R=n(R,T,E,C,p,6,l[56]),C=n(C,R,T,E,S,10,l[57]),E=n(E,C,R,T,d,15,l[58]),T=n(T,E,C,R,v,21,l[59]),R=n(R,T,E,C,h,6,l[60]),C=n(C,R,T,E,y,10,l[61]),E=n(E,C,R,T,c,15,l[62]),T=n(T,E,C,R,m,21,l[63]),o[0]=o[0]+R|0,o[1]=o[1]+T|0,o[2]=o[2]+E|0,o[3]=o[3]+C|0},_doFinalize:function(){var t=this._data,r=t.words,i=8*this._nDataBytes,n=8*t.sigBytes;r[n>>>5]|=128<<24-n%32;var a=e.floor(i/4294967296);for(r[15+(n+64>>>9<<4)]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),r[14+(n+64>>>9<<4)]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8),t.sigBytes=4*(r.length+1),this._process(),r=(t=this._hash).words,i=0;4>i;i++)n=r[i],r[i]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8);return t},clone:function(){var e=s.clone.call(this);return e._hash=this._hash.clone(),e}}),a.MD5=s._createHelper(x),a.HmacMD5=s._createHmacHelper(x)}(Math),function(){var e,t=u_,r=(e=t.lib).Base,i=e.WordArray,n=(e=t.algo).EvpKDF=r.extend({cfg:r.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=(s=this.cfg).hasher.create(),n=i.create(),a=n.words,o=s.keySize,s=s.iterations;a.length<o;){x&&r.update(x);var x=r.update(e).finalize(t);r.reset();for(var l=1;l<s;l++)x=r.finalize(x),r.reset();n.concat(x)}return n.sigBytes=4*o,n}});t.EvpKDF=function(e,t,r){return n.create(r).compute(e,t)}}(),u_.lib.Cipher||function(e){var t=(u=u_).lib,r=t.Base,i=t.WordArray,n=t.BufferedBlockAlgorithm,a=u.enc.Base64,o=u.algo.EvpKDF,s=t.Cipher=n.extend({cfg:r.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){n.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(e){return{encrypt:function(t,r,i){return("string"==typeof r?d:h).encrypt(e,t,r,i)},decrypt:function(t,r,i){return("string"==typeof r?d:h).decrypt(e,t,r,i)}}}});t.StreamCipher=s.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var x=u.mode={},l=function(e,t,r){var i=this._iv;i?this._iv=void 0:i=this._prevBlock;for(var n=0;n<r;n++)e[t+n]^=i[n]},c=(t.BlockCipherMode=r.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}})).extend();c.Encryptor=c.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize;l.call(this,e,t,i),r.encryptBlock(e,t),this._prevBlock=e.slice(t,t+i)}}),c.Decryptor=c.extend({processBlock:function(e,t){var r=this._cipher,i=r.blockSize,n=e.slice(t,t+i);r.decryptBlock(e,t),l.call(this,e,t,i),this._prevBlock=n}}),x=x.CBC=c,c=(u.pad={}).Pkcs7={pad:function(e,t){for(var r,n=(r=(r=4*t)-e.sigBytes%r)<<24|r<<16|r<<8|r,a=[],o=0;o<r;o+=4)a.push(n);r=i.create(a,r),e.concat(r)},unpad:function(e){e.sigBytes-=255&e.words[e.sigBytes-1>>>2]}},t.BlockCipher=s.extend({cfg:s.cfg.extend({mode:x,padding:c}),reset:function(){s.reset.call(this);var e=(t=this.cfg).iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var r=t.createEncryptor;else r=t.createDecryptor,this._minBufferSize=1;this._mode=r.call(t,this,e&&e.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else t=this._process(!0),e.unpad(t);return t},blockSize:4});var f=t.CipherParams=r.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}}),h=(x=(u.format={}).OpenSSL={stringify:function(e){var t=e.ciphertext;return((e=e.salt)?i.create([1398893684,1701076831]).concat(e).concat(t):t).toString(a)},parse:function(e){var t=(e=a.parse(e)).words;if(1398893684==t[0]&&1701076831==t[1]){var r=i.create(t.slice(2,4));t.splice(0,4),e.sigBytes-=16}return f.create({ciphertext:e,salt:r})}},t.SerializableCipher=r.extend({cfg:r.extend({format:x}),encrypt:function(e,t,r,i){i=this.cfg.extend(i);var n=e.createEncryptor(r,i);return t=n.finalize(t),n=n.cfg,f.create({ciphertext:t,key:r,iv:n.iv,algorithm:e,mode:n.mode,padding:n.padding,blockSize:e.blockSize,formatter:i.format})},decrypt:function(e,t,r,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),e.createDecryptor(r,i).finalize(t.ciphertext)},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}})),u=(u.kdf={}).OpenSSL={execute:function(e,t,r,n){return n||(n=i.random(8)),e=o.create({keySize:t+r}).compute(e,n),r=i.create(e.words.slice(t),4*r),e.sigBytes=4*t,f.create({key:e,iv:r,salt:n})}},d=t.PasswordBasedCipher=h.extend({cfg:h.cfg.extend({kdf:u}),encrypt:function(e,t,r,i){return r=(i=this.cfg.extend(i)).kdf.execute(r,e.keySize,e.ivSize),i.iv=r.iv,(e=h.encrypt.call(this,e,t,r.key,i)).mixIn(r),e},decrypt:function(e,t,r,i){return i=this.cfg.extend(i),t=this._parse(t,i.format),r=i.kdf.execute(r,e.keySize,e.ivSize,t.salt),i.iv=r.iv,h.decrypt.call(this,e,t,r.key,i)}})}(),function(){for(var e=u_,t=e.lib.BlockCipher,r=e.algo,i=[],n=[],a=[],o=[],s=[],x=[],l=[],c=[],f=[],h=[],u=[],d=0;256>d;d++)u[d]=128>d?d<<1:d<<1^283;var _=0,p=0;for(d=0;256>d;d++){var m=(m=p^p<<1^p<<2^p<<3^p<<4)>>>8^255&m^99;i[_]=m,n[m]=_;var g=u[_],y=u[g],b=u[y],v=257*u[m]^16843008*m;a[_]=v<<24|v>>>8,o[_]=v<<16|v>>>16,s[_]=v<<8|v>>>24,x[_]=v,v=16843009*b^65537*y^257*g^16843008*_,l[m]=v<<24|v>>>8,c[m]=v<<16|v>>>16,f[m]=v<<8|v>>>24,h[m]=v,_?(_=g^u[u[u[b^g]]],p^=u[u[p]]):_=p=1}var P=[0,1,2,4,8,16,32,64,128,27,54];r=r.AES=t.extend({_doReset:function(){for(var e=(r=this._key).words,t=r.sigBytes/4,r=4*((this._nRounds=t+6)+1),n=this._keySchedule=[],a=0;a<r;a++)if(a<t)n[a]=e[a];else{var o=n[a-1];a%t?6<t&&4==a%t&&(o=i[o>>>24]<<24|i[o>>>16&255]<<16|i[o>>>8&255]<<8|i[255&o]):(o=i[(o=o<<8|o>>>24)>>>24]<<24|i[o>>>16&255]<<16|i[o>>>8&255]<<8|i[255&o],o^=P[a/t|0]<<24),n[a]=n[a-t]^o}for(e=this._invKeySchedule=[],t=0;t<r;t++)a=r-t,o=t%4?n[a]:n[a-4],e[t]=4>t||4>=a?o:l[i[o>>>24]]^c[i[o>>>16&255]]^f[i[o>>>8&255]]^h[i[255&o]]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,a,o,s,x,i)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,l,c,f,h,n),r=e[t+1],e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,i,n,a,o,s){for(var x=this._nRounds,l=e[t]^r[0],c=e[t+1]^r[1],f=e[t+2]^r[2],h=e[t+3]^r[3],u=4,d=1;d<x;d++){var _=i[l>>>24]^n[c>>>16&255]^a[f>>>8&255]^o[255&h]^r[u++],p=i[c>>>24]^n[f>>>16&255]^a[h>>>8&255]^o[255&l]^r[u++],m=i[f>>>24]^n[h>>>16&255]^a[l>>>8&255]^o[255&c]^r[u++];h=i[h>>>24]^n[l>>>16&255]^a[c>>>8&255]^o[255&f]^r[u++],l=_,c=p,f=m}_=(s[l>>>24]<<24|s[c>>>16&255]<<16|s[f>>>8&255]<<8|s[255&h])^r[u++],p=(s[c>>>24]<<24|s[f>>>16&255]<<16|s[h>>>8&255]<<8|s[255&l])^r[u++],m=(s[f>>>24]<<24|s[h>>>16&255]<<16|s[l>>>8&255]<<8|s[255&c])^r[u++],h=(s[h>>>24]<<24|s[l>>>16&255]<<16|s[c>>>8&255]<<8|s[255&f])^r[u++],e[t]=_,e[t+1]=p,e[t+2]=m,e[t+3]=h},keySize:8}),e.AES=t._createHelper(r)}();var d_=function(){function e(){}var t=e.prototype;return t.createClientObject=function(e,t,r,i,n){var a=u_.AES.encrypt((new Date).getTime().toString(),u_.enc.Hex.parse("1234567891234567123456789123456712345678912345671234567891234567"),{mode:u_.mode.CBC,iv:u_.enc.Hex.parse("12345678912345671234567891234567"),padding:u_.pad.Pkcs7}).ciphertext.toString();a.length<64&&(a+=a);var o=u_.AES.encrypt((new Date).getTime().toString(),u_.enc.Hex.parse("12345678912345671234567891234567"),{mode:u_.mode.CBC,iv:u_.enc.Hex.parse("12345678912345671234567891234567"),padding:u_.pad.Pkcs7}).ciphertext.toString();return{socket:e,id:t,PKD:r,rand:i,playURL:n.playURL||"",auth:n.auth||"",token:n.token||"",key:a,iv:o,resolve:null,reject:null}},t.playCmd=function(e){var t={sequence:0,cmd:"realplay",url:e.playURL,key:h_.encrypt(e.iv+":"+e.key,e.PKD).cipher.split("?")[0],authorization:u_.AES.encrypt(e.rand+":"+e.auth,u_.enc.Hex.parse(e.key),{mode:u_.mode.CBC,iv:u_.enc.Hex.parse(e.iv),padding:u_.pad.Pkcs7}).ciphertext.toString(),token:u_.AES.encrypt(e.token,u_.enc.Hex.parse(e.key),{mode:u_.mode.CBC,iv:u_.enc.Hex.parse(e.iv),padding:u_.pad.Pkcs7}).ciphertext.toString()};return JSON.stringify(t)},t.playbackCmd=function(e,t,r){var i={sequence:0,cmd:"playback",url:e.playURL,key:h_.encrypt(e.iv+":"+e.key,e.PKD).cipher.split("?")[0],authorization:u_.AES.encrypt(e.rand+":"+e.auth,u_.enc.Hex.parse(e.key),{mode:u_.mode.CBC,iv:u_.enc.Hex.parse(e.iv),padding:u_.pad.Pkcs7}).ciphertext.toString(),token:u_.AES.encrypt(e.token,u_.enc.Hex.parse(e.key),{mode:u_.mode.CBC,iv:u_.enc.Hex.parse(e.iv),padding:u_.pad.Pkcs7}).ciphertext.toString(),startTime:t,endTime:r};return JSON.stringify(i)},t.seekCmd=function(e,t){var r={sequence:0,cmd:"seek",startTime:e,endTime:t};return JSON.stringify(r)},e}(),__=function(){function e(){}var t=e.prototype;return t.createClientObject=function(e,t,r,i){return{socket:e,id:t,playURL:r,deviceSerial:i.deviceSerial||"",verificationCode:i.verificationCode||"",resolve:null,reject:null}},t.playCmd=function(e){var t={sequence:0,cmd:"realplay",deviceSerial:e.deviceSerial,verificationCode:e.verificationCode,url:e.playURL};return JSON.stringify(t)},t.playbackCmd=function(e,t,r){var i={sequence:0,cmd:"playback",deviceSerial:e.deviceSerial,verificationCode:e.verificationCode,url:e.playURL,startTime:t,endTime:r};return JSON.stringify(i)},e}(),p_=Symbol("WEBSOCKET"),m_=Symbol("GETINDEX"),g_=Symbol("PROTOCOLVERSION"),y_=Symbol("CIPHERSUITES"),b_=new Pd,v_=new Sd,P_=new d_,S_=new __,R_=function(){function e(){this[g_]="0.1",this[y_]=0,this[p_]=[],this.ERRORS={},this[m_]=function(e){for(var t=-1,r=0,i=this[p_].length;r<i;r++)if(this[p_][r].id===e){t=r;break}return t}}var t=e.prototype;return t.openStream=function(e,t,r,i){var n=!1;e.indexOf("[")>-1&&(n=!0);var a=this,o=e.split("://"),s=o[0],x="",l=7681,c=1,f=0,h=!1;if(n)x=o[1].split("]:")[0]+"]",l=Math.floor(o[1].split("]:")[1].split("/")[0]),c=Math.floor(o[1].split("]:")[1].split("/")[1]/100),f=Math.floor(o[1].split("]:")[1].split("/")[1]%100)-1;else{x=o[1].split(":")[0],l=Math.floor(o[1].split(":")[1].split("/")[0]),c=Math.floor(o[1].split(":")[1].split("/")[1]/100),f=Math.floor(o[1].split(":")[1].split("/")[1]%100)-1;var u=o[1].split(":")[1].split("/")[2];""!==u&&"webSocketVideoCtrlProxy"===u&&(h=!0)}0===c&&(f=0);var d="&sessionID=";(t=t||{}).token&&!t.playURL&&(d="&token=");var _=t.sessionID||t.session||(t.playURL?"":t.token)||"",p=new window.WebSocket(s+"://"+x+":"+l+(t.mode?"/"+t.mode:"")+(h?"/webSocketVideoCtrlProxy":"")+"?version="+a[g_]+"&cipherSuites="+a[y_]+d+_+(t.proxy?"&proxy="+t.proxy:""));p.binaryType="arraybuffer";var m=vd(),g=-1;return new Promise((function(e,n){p.onopen=function(){t.playURL||t.sessionID||t.deviceSerial||t.token||(a[p_].push(b_.createClientObject(p,m,c,f)),e(m))},p.onmessage=function(i){if("string"==typeof i.data){var o=JSON.parse(i.data),s=a[m_](m);if(o&&o.version&&o.cipherSuite){if(a[g_]=o.version,a[y_]=parseInt(o.cipherSuite,10),o&&o.PKD&&o.rand)a[p_].push(P_.createClientObject(p,m,o.PKD,o.rand,t));else{var h="live://"+x+":"+l+"/"+c+"/"+f;-1===a[y_]?a[p_].push(S_.createClientObject(p,m,h,t)):a[p_].push(v_.createClientObject(p,m,h))}return void e(m)}if(o&&o.sdp){var u=v_.getMediaFromSdp(o.sdp);r({bHead:!0,buf:u})}if(o&&o.cmd&&"end"===o.cmd&&r({type:"exception",cmd:o.cmd}),o&&o.statusString&&("ok"===o.statusString.toLowerCase()&&a[p_][s].resolve&&a[p_][s].resolve(o),"ok"!==o.statusString.toLowerCase())){var d=v_.getError(o);s>-1?a[p_][s].reject&&a[p_][s].reject(d):n(d)}o&&o.errorCode&&r(o)}else{var _={},y=new Uint8Array(i.data);if(g++,64===y.byteLength||40===y.byteLength){for(var b=-1,v=y.byteLength,P=0;P<v;P++)if(73===y[P]&&77===y[P+1]&&75===y[P+2]&&72===y[P+3]){b=P;break}_=-1!==b?{bHead:!0,buf:y.slice(b,b+40)}:{bHead:!1,buf:y},r(_)}else g>0&&r(_={bHead:!1,buf:y});y=null,_=null,i=null}},p.onclose=function(){for(var e=0,t=a[p_].length;e<t;e++)if(a[p_][e].id===m){a[p_][e].resolve(),a[p_].splice(e,1),setTimeout((function(){i(m)}),200);break}n()}}))},t.startPlay=function(e,t,r){var i=this,n=this[m_](e);return t&&r&&"0.1"===i[g_]&&(t=t.replace(/-/g,"").replace(/:/g,""),r=r.replace(/-/g,"").replace(/:/g,"")),new Promise((function(e,a){if(n>-1){i[p_][n].resolve=e,i[p_][n].reject=a;var o=null;t&&r?"0.1"!==i[g_]?0===i[y_]?o=P_.playbackCmd(i[p_][n],t,r):1===i[y_]?o=v_.playbackCmd(t,r,i[p_][n].playURL):-1===i[y_]&&(o=S_.playbackCmd(i[p_][n],t,r)):o=b_.playbackCmd(t,r,i[p_][n].iCurChannel,i[p_][n].iCurStream):0===i[p_][n].iCurChannel&&"0.1"===i[g_]?o=b_.zeroPlayCmd(i[p_][n].iCurChannel,i[p_][n].iCurStream):"0.1"!==i[g_]?0===i[y_]?o=P_.playCmd(i[p_][n]):1===i[y_]?o=v_.playCmd(i[p_][n].playURL):-1===i[y_]&&(o=S_.playCmd(i[p_][n])):o=b_.playCmd(i[p_][n].iCurChannel,i[p_][n].iCurStream),i[p_][n].socket.send(o),"0.1"===i[g_]&&e()}else"0.1"===i[g_]&&a()}))},t.singleFrame=function(){},t.setPlayRate=function(e,t){var r=this;return new Promise((function(i,n){for(var a=0,o=r[p_].length;a<o;a++)if(r[p_][a].id===e){if("0.1"===r[g_]){var s=b_.playRateCmd(t);r[p_][a].socket.send(s),i();break}r[p_][a].resolve=i,r[p_][a].reject=n;var x=v_.playRateCmd(t);r[p_][a].socket.send(x)}}))},t.seek=function(e,t,r){var i=this;return new Promise((function(n,a){for(var o=0,s=i[p_].length;o<s;o++)if(i[p_][o].id===e){i[p_][o].resolve=n,i[p_][o].reject=a;var x=P_.seekCmd(t,r);i[p_][o].socket.send(x)}}))},t.pause=function(e){var t=this;return new Promise((function(r,i){for(var n=0,a=t[p_].length;n<a;n++)if(t[p_][n].id===e){if("0.1"===t[g_]){var o=b_.pauseCmd();t[p_][n].socket.send(o),r();break}t[p_][n].resolve=r,t[p_][n].reject=i;var s=v_.pauseCmd();t[p_][n].socket.send(s)}}))},t.transmission=function(e,t){var r=this;return new Promise((function(i,n){for(var a=0,o=r[p_].length;a<o;a++)r[p_][a].id===e&&(r[p_][a].resolve=i,r[p_][a].reject=n,r[p_][a].socket.send(t))}))},t.resume=function(e){var t=this;return new Promise((function(r,i){for(var n=0,a=t[p_].length;n<a;n++)if(t[p_][n].id===e){if("0.1"===t[g_]){var o=b_.resumeCmd();t[p_][n].socket.send(o),r();break}t[p_][n].resolve=r,t[p_][n].reject=i;var s=v_.resumeCmd();t[p_][n].socket.send(s)}}))},t.stop=function(e){var t=this;return new Promise((function(r,i){if(e){for(var n=-1,a=0,o=t[p_].length;a<o;a++)if(t[p_][a].id===e){n=a,t[p_][a].resolve=r,t[p_][a].socket.close(1e3,"CLOSE");break}-1===n&&i()}else i()}))},t.stopAll=function(){var e=this;return new Promise((function(t,r){for(var i=0,n=e[p_].length;i<n;i++)e[p_][i].socket.close(1e3,"CLOSE");t()}))},e}(),C_=function(){function e(e){this._streamUUID=null,this._player=e,this._streamClient=new R_}var t=e.prototype;return t.openStream=function(e,t,r,i){var n=this;return this._streamClient.openStream(e,t,r,i).then((function(r){return n._streamUUID=r,n._player.logger.log("["+dd.SOCKET.openStream+"] url: ",e,"oParams: ",t),n._player.event.emit(""+dd.SOCKET.openStream,cd(r)),r}))},t.startPlay=function(e){var t=this;return e=null!=e?e:this._streamUUID,this._streamClient.startPlay(e).then((function(){t._player.logger.log("["+dd.SOCKET.startPlay+"] StreamUUID: ",e),t._player.event.emit(""+dd.SOCKET.startPlay,cd(e))}))},t.setPlayRate=function(e,t){var r=this;return t=null!=t?t:this._streamUUID,this._streamClient.setPlayRate(t,e).then((function(){r._player.logger.log("["+dd.SOCKET.setPlayRate+"] StreamUUID: ",t," rate: ",e),r._player.event.emit(""+dd.SOCKET.startPlay,cd({id:t,rate:e}))}))},t.seek=function(e,t,r){var i=this;return r=null!=r?r:this._streamUUID,this._streamClient.seek(r,e,t).then((function(){i._player.logger.log("["+dd.SOCKET.seek+"] StreamUUID: ",r," startTime: ",e," stopTime:",t),i._player.event.emit(""+dd.SOCKET.seek,cd({id:r,startTime:e,stopTime:t}))}))},t.stopAll=function(){var e=this;return this._streamClient.stopAll().then((function(){e._player.logger.log("["+dd.SOCKET.stopAll+"]"),e._player.event.emit(dd.SOCKET.stopAll,cd(void 0)),e._streamUUID=null}))},t.destroy=function(){var e=this;this.stopAll().then((function(){e._streamUUID=null,e._streamClient=null}))},e}();function E_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function T_(){return T_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},T_.apply(this,arguments)}var F_=768,D_={port:0,start:{x:0,y:0},total:{x:0,y:0},diff:{x:0,y:0},startPTZPosition:{x:0,y:0},lastCorrdsY:0,param2d:{upDateType:4,fValue:0,fPTZParam:{fPTZPositionX:0,fPTZPositionY:0},fPTZZoom:0}},M_=function(){function e(e){this._canvasFECSubPort=new Map,this._correctType=null,this._player=e,this.init()}var t=e.prototype;return t._supportFEC=function(){return this._player._decoderStatus.bSupHardOrSoft},t.init=function(){var e=this;this._player.logger.log("FECSplitIds.init"),this._player.event.on("JSPlayM4_Play_Before",(function(){e._player.logger.log("JSPlayM4_Play_Before event: _FECSplitIds =  ",e._FECSplitIds),e._FECSplitIds&&e._supportFEC()&&e._player.wasmplayer.JSPlayM4_FEC_SetCanvasID(e._FECSplitIds)})),this._player.event.on("JSPlayM4_Play_After",(function(){e._player.logger.log("JSPlayM4_Play_After event: _FECSplitIds =  ",e._FECSplitIds),e._FECSplitIds&&e._supportFEC()&&e._canvasFECSubPort.set(e._player._playerWindow.canvasId,T_({},D_))})),this._player.event.on("PlayM4_openStream",(function(){e._FECSplitIds&&e._supportFEC()&&e._player.wasmplayer.JSPlayM4_SetDecodeEngine(0)})),this._player.event.on("JSPlayM4_Stop",(function(){e._closeFECAllSubWnd()})),this._player.event.on(dd.API.destroy,(function(){e._closeFECAllSubWnd()})),this._player.logger.log("FECCorrect init")},t.setFECCorrectType=function(e,t){var r=this;return this._supportFEC()?(this._FECSplitIds=t,this._correctType=e,new Promise((function(i,n){var a=r._createSplitCanvas(e,t),o=a.find((function(e){return-1===e.code}));r._player.event.emit("FECCorrect.setFECCorrectType",cd({type:e,ids:t})),o||0===a.length?n(a):i(a)}))):Promise.reject()},t.setFEC2DParam=function(e,t){if(this._supportFEC())return this._player.event.emit("FECCorrect.setFEC2DParam",cd({port:e,param2d:t})),this._player.wasmplayer.JSPlayM4_FEC_SetParam(e,t)},t.setFEC3DViewParam=function(e){if(!this._supportFEC())return Promise.reject(!1);var t=this._player.wasmplayer;if(this._FECSplitIds&&this._canvasFECSubPort&&this._correctType){var r=t.JSPlayM4_FEC_SetViewParam(e.port,e.upDateType,e.fValue);return this._player.event.emit("FECCorrect.setFEC3DViewParam",cd({param:e})),1===r?Promise.resolve(!0):Promise.reject(!1)}return Promise.reject(void 0)},t.get3DViewParam=function(e){var t=this;if(!this._supportFEC())return Promise.reject(!1);var r=this._player.wasmplayer;return new Promise((function(i,n){return t._FECSplitIds&&t._canvasFECSubPort&&t._correctType&&1!==r.JSPlayM4_FEC_GetViewParam(e.port,e.upDateType,(function(r){t._player.event.emit("FECCorrect.get3DViewParam",cd({param:e})),i(r)}))?n(!1):n(void 0)}))},t.getFECSubPortMap=function(){var e=this._canvasFECSubPort;return this._player.event.emit("FECCorrect.getFECSubPortMap",cd(e)),e},t._createSplitCanvas=function(e,t){var r=this._player._playerWindow.canvasId,i=(t=r+t?","+this._FECSplitIds:"")?t.split(","):[],n=this._player.wasmplayer,a=[],o=this;if(e.correctList&&e.correctList.length>0){for(var s=0;s<e.correctList.length;s++)if(0!==s||!e.correctList[s].hidden)if(0!==s){var x=document.getElementById(i[s]);if(!i[s]||!x||"CANVAS"!==x.nodeName)return this._player.logger.error("Canvas element is null"),[];var l=n.JSPlayM4_FEC_GetPort(e.place,e.correctList[s].correctType),c=n.JSPlayM4_FEC_Enable(l),f=n.JSPlayM4_FEC_SetWnd(l,i[s]),h={upDateType:this._matchUpDateType(e.correctList[s].correctType),fValue:0,fPTZParam:{fPTZPositionX:e.correctList[s].x||0,fPTZPositionY:e.correctList[s].y||0},fPTZZoom:1e-5};this.setFEC2DParam(l,h),0===c||0===f?a.push({code:-1,msg:"失败",port:l,id:i[s]}):(a.push({code:0,msg:"成功",port:l,id:i[s]}),this._canvasFECSubPort.set(i[s],T_({},D_,{port:l,param2d:h,startPTZPosition:{x:h.fPTZParam.fPTZPositionX,y:h.fPTZParam.fPTZPositionY}})),x.setAttribute("data-port",l),this._spliceCanvasMouseEvents(i[s],e.correctList[s]))}else u(e.correctList[0])}else u(e);function u(t){var i={upDateType:o._matchUpDateType(t.correctType),fValue:0,fPTZParam:{fPTZPositionX:t.x||0,fPTZPositionY:t.y||0},fPTZZoom:1e-5},s=o._canvasFECSubPort.get(r).port;if(void 0===s)return a;1===n.JSPlayM4_FEC_ResetCorrectType(s,e.place,t.correctType)?(a.push({code:0,msg:"成功",port:s,id:r}),t.correctType<=F_?o.setFEC2DParam(s,i):t.viewParam&&setTimeout((function(){"number"==typeof t.viewParam.x&&"number"==typeof t.viewParam.y&&(n.JSPlayM4_FEC_SetViewParam(s,2,t.viewParam.x),n.JSPlayM4_FEC_SetViewParam(s,1,t.viewParam.y)),"number"==typeof t.viewParam.zoom&&n.JSPlayM4_FEC_SetViewParam(s,3,t.viewParam.zoom)}),200),o._canvasFECSubPort.set(r,T_({},D_,{port:s,param2d:i,startPTZPosition:{x:i.fPTZParam.fPTZPositionX,y:i.fPTZParam.fPTZPositionY}})),o._spliceCanvasMouseEvents(r,t)):a.push({code:-1,msg:"失败",port:s,id:r})}return a},t._matchUpDateType=function(e){switch(e){case F_:return 4;case 256:return 8}return 2},t._spliceCanvasMouseEvents=function(e,t){if(void 0!==e){var r=document.getElementById(e);if(null!==r){var i=this._player.wasmplayer,n=r.getAttribute("id"),a=this._canvasFECSubPort.get(n);if(void 0!==a.port){var o=r.width,s=r.height,x=function(e){};r.addEventListener("mousedown",(function(e){a.start.x=e.pageX,a.start.y=e.pageY,a.lastCorrdsY=e.pageY,x=function(e){!function(e){var r=[e.clientX,e.clientY];a.diff.y=r[1]-a.start.y;var n=(a.total.y+a.diff.y)/s*2*Math.PI,x=(r[1]-a.lastCorrdsY)/(2*s),l=Math.atan2(a.startPTZPosition.y-.5,a.startPTZPosition.x-.5),c=a.startPTZPosition.x+x*Math.cos(l),f=a.startPTZPosition.y+x*Math.sin(l);a.diff.x=r[0]-a.start.x;var h=(a.total.x+a.diff.x)/o*2*Math.PI,u=Math.sqrt(Math.pow(c-.5,2)+Math.pow(f-.5,2)),d=-h,_=.5+u*Math.cos(d),p=.5+u*Math.sin(d);if(t.correctType<=F_){switch(t.correctType){case F_:case 512:a.param2d.upDateType=4;break;case 256:if(a.param2d.upDateType=8,Math.sqrt(Math.pow(_-.5,2)+Math.pow(p-.5,2))>.4)return}a.param2d.fValue=h,a.param2d.fPTZParam.fPTZPositionX=_,a.param2d.fPTZParam.fPTZPositionY=p,i.JSPlayM4_FEC_SetParam(a.port,a.param2d)}else 1536===t.correctType&&(i.JSPlayM4_FEC_SetViewParam(a.port,2,h),i.JSPlayM4_FEC_SetViewParam(a.port,1,n))}(e)},r.addEventListener("mousemove",x)}));var l=function(){null!==x&&(r.removeEventListener("mousemove",x),x=null,a.total.x+=a.diff.x,a.total.y+=a.diff.y)};r.addEventListener("mouseup",l),r.addEventListener("mouseleave",l),r.addEventListener("mouseout",l)}}}},t._closeFECAllSubWnd=function(){if(this._FECSplitIds&&this._canvasFECSubPort&&this._supportFEC())for(var e,t=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return E_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E_(e,t):void 0}}(e))){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(this._FECSplitIds.split(","));!(e=t()).done;){var r=e.value;if(r){var i=this._canvasFECSubPort.get(r);if(void 0===i||void 0===i.port)continue;this._canvasFECSubPort.delete(r);var n=this._player.wasmplayer;n.JSPlayM4_FEC_Disable(i.port,!0),n.JSPlayM4_FEC_DelPort(i.port)}}},e}();function I_(e,t){return new Promise((function(r,i){e.service.getVideoByTime(t).then((function(i){e.event.emit(dd.NETWORK.videoFragmentFiles,cd(i.data||[],"根据时间获取存储文件信息",t.recType+"")),r(i)})).catch((function(t){e.event.emit(dd.NETWORK.error.error,cd(t)),e.event.emit(dd.NETWORK.error.videoFragmentFiles,cd(t)),i(t)}))}))}var w_=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],A_=function(){if("undefined"==typeof document)return!1;for(var e=w_[0],t={},r=0,i=w_;r<i.length;r++){var n=i[r];if((null==n?void 0:n[1])in document){var a,o=gf(n.entries());try{for(o.s();!(a=o.n()).done;){var s=_f(a.value,2),x=s[0],l=s[1];t[e[x]]=l}}catch(e){o.e(e)}finally{o.f()}return t}}return!1}(),k_={change:A_.fullscreenchange,error:A_.fullscreenerror},L_={request:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.documentElement,t=arguments.length>1?arguments[1]:void 0;return new Promise((function(r,i){var n=function e(){L_.off("change",e),r()};L_.on("change",n);var a=e[A_.requestFullscreen](t);a instanceof Promise&&a.then(n).catch(i)}))},exit:function(){return new Promise((function(e,t){if(L_.isFullscreen){var r=function t(){L_.off("change",t),e()};L_.on("change",r);var i=document[A_.exitFullscreen]();i instanceof Promise&&i.then(r).catch(t)}else e()}))},toggle:function(e,t){return L_.isFullscreen?L_.exit():L_.request(e,t)},onchange:function(e){L_.on("change",e)},onerror:function(e){L_.on("error",e)},on:function(e,t){var r=k_[e];r&&document.addEventListener(r,t,!1)},off:function(e,t){var r=k_[e];r&&document.removeEventListener(r,t,!1)},raw:A_};Object.defineProperties(L_,{isFullscreen:{get:function(){return Boolean(document[A_.fullscreenElement])}},element:{enumerable:!0,get:function(){var e;return null!==(e=document[A_.fullscreenElement])&&void 0!==e?e:void 0}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[A_.fullscreenEnabled])}}}),A_||(L_={isEnabled:!1});var B_=L_;function O_(){return!!(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen)}var H_=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange"],N_=function(){function e(e,t){this._fullscreenchangeEvent=null,this.player=e,this.target=null!=t?t:e.$container,this._fullscreenChange(),this._registerEvent()}var t=e.prototype;return t.fullScreen=function(e,t){var r=this;return this.target?B_.request(this.target).then((function(){e&&t&&r.player.resize(e,t)})):Promise.reject()},t.exitScreen=function(){return O_()?B_.exit():Promise.resolve()},t.destroy=function(){var e=this;H_.forEach((function(t){e.target&&e._fullscreenchangeEvent&&e.target.removeEventListener(t,e._fullscreenchangeEvent)}))},t._registerEvent=function(){var e=this;this.player.event.on("exitScreen",(function(){e.player.resize()}))},t._fullscreenChange=function(){var e=this,t=this;this._fullscreenchangeEvent=function(){O_()?t.player.event.emit("fullScreen"):t.player.event.emit("exitScreen")},H_.forEach((function(t){e.target&&e.target.addEventListener(t,e._fullscreenchangeEvent)})),this.player&&this.player.event.on(dd.API.destroy,(function(){e.destroy()}))},e}();var V_="ezui-player";function Y_(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var U_={borderSelect:"#FFCC00",border:"none",background:"#000000"},X_=function(){function e(e,t,r,i){void 0===i&&(i={}),this.id=e,this.canvasId=e+"-player",this.width=t,this.height=r,this.style=Object.assign({},U_,i),this.$playerWnd=document.createElement("div")}var t=e.prototype;return t.render=function(){var e;this.$playerWnd&&(this.$playerWnd.innerHTML="");var t=""+V_,r=this.width,i=this.height,n=this.width-r,a=this.height-i;this.$playerWnd.classList.add(this.id+"parent-wnd",t+"-wrapper"),this.$playerWnd.style.overflow="hidden",this.$playerWnd.style.width="100%",this.$playerWnd.style.height="100%",this.$playerWnd.style.position="relative";for(var o="",s=0;s<1;s++){var x=n+(s%1==0?r:0),l=a+(s+1>=Math.pow(1,2)?i:0);o+='<div id="'+this.id+"-container-"+s+'" class="'+t+"-container "+t+"-container-"+s+'" style="width:'+x+"px; height: "+l+'px;">\n                  <canvas id="'+this.id+"canvas_draw"+s+'" class="'+this.id+"draw-window "+t+'-canvas-draw" style="position:absolute; top:0; left:0;" wid="'+s+'" width="'+this.width+"\" height='"+this.height+"'></canvas>\n                  <canvas id=\""+this.canvasId+'" class="'+this.id+"play-window "+t+'-canvas" wid="'+s+'" width="'+x+'" height="'+l+'"></canvas>\n                </div>'}this.$playerWnd.innerHTML=o,null==(e=document.getElementById(this.id))||e.appendChild(this.$playerWnd)},t.hide=function(){var e=document.getElementById(this.canvasId);e&&(e.style.display="none")},t.destroy=function(){var e=document.getElementById(this.id);e&&e.removeChild(this.$playerWnd),this.$playerWnd=null,this.width=0,this.height=0},t.resize=function(e,t){if(this.$playerWnd){this.width=e,this.height=t;for(var r,i=document.getElementById(this.id+"-container-0"),n=document.getElementById(this.id+"canvas_draw0"),a=document.getElementById(this.canvasId),o=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Y_(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Y_(e,t):void 0}}(e))){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}([this.$playerWnd,i,a,n]);!(r=o()).done;){var s=r.value;s&&(s.style.width=e+"px",s.style.height=t+"px")}}},t.reRenderCanvas=function(e){var t,r=document.getElementById(this.canvasId),i=null==(t=this.$playerWnd)?void 0:t.children[0];if(r){if(!e)return;null==i||i.removeChild(r)}var n=document.createElement("canvas");n.id=this.canvasId,i&&i.appendChild(n),n.width=this.width,n.height=this.height},e}(),W_={exports:{}};!function(e,t){function r(e,t,r,i,n,a,o){try{var s=e[a](o),x=s.value}catch(e){return void r(e)}s.done?t(x):Promise.resolve(x).then(i,n)}function n(e){return function(){var t=this,i=arguments;return new Promise((function(n,a){var o=e.apply(t,i);function s(e){r(o,n,a,s,x,"next",e)}function x(e){r(o,n,a,s,x,"throw",e)}s(void 0)}))}}function a(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function o(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":df(e)}W_.exports=function(){var e={477:function(e){e.exports=function(e,t,r,i){var n=self||window;try{try{var a;try{a=new n.Blob([e])}catch(t){(a=new(n.BlobBuilder||n.WebKitBlobBuilder||n.MozBlobBuilder||n.MSBlobBuilder)).append(e),a=a.getBlob()}var o=n.URL||n.webkitURL,s=o.createObjectURL(a),x=new n[t](s,r);return o.revokeObjectURL(s),x}catch(i){return new n[t]("data:application/javascript,".concat(encodeURIComponent(e)),r)}}catch(e){if(!i)throw Error("Inline worker is not supported");return new n[t](i,r)}}},61:function(e,t,r){var i=r(698).default;function n(){e.exports=n=function(){return t},e.exports.__esModule=!0,e.exports.default=e.exports;var t={},r=Object.prototype,o=r.hasOwnProperty,s="function"==typeof Symbol?Symbol:{},x=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",c=s.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function h(e,t,r,i){var n,o,s,x,l=t&&a(t.prototype,_)?t:_,c=Object.create(l.prototype),f=new T(i||[]);return c._invoke=(n=e,o=r,s=f,x="suspendedStart",function(e,t){if("executing"===x)throw new Error("Generator is already running");if("completed"===x){if("throw"===e)throw t;return{value:void 0,done:!0}}for(s.method=e,s.arg=t;;){var r=s.delegate;if(r){var i=R(r,s);if(i){if(i===d)continue;return i}}if("next"===s.method)s.sent=s._sent=s.arg;else if("throw"===s.method){if("suspendedStart"===x)throw x="completed",s.arg;s.dispatchException(s.arg)}else"return"===s.method&&s.abrupt("return",s.arg);x="executing";var a=u(n,o,s);if("normal"===a.type){if(x=s.done?"completed":"suspendedYield",a.arg===d)continue;return{value:a.arg,done:s.done}}"throw"===a.type&&(x="completed",s.method="throw",s.arg=a.arg)}}),c}function u(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var d={};function _(){}function p(){}function m(){}var g={};f(g,x,(function(){return this}));var y=Object.getPrototypeOf,b=y&&y(y(F([])));b&&b!==r&&o.call(b,x)&&(g=b);var v=m.prototype=_.prototype=Object.create(g);function P(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(n,a,s,x){var l=u(e[n],e,a);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==i(f)&&o.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,s,x)}),(function(e){r("throw",e,s,x)})):t.resolve(f).then((function(e){c.value=e,s(c)}),(function(e){return r("throw",e,s,x)}))}x(l.arg)}var n;this._invoke=function(e,i){function a(){return new t((function(t,n){r(e,i,t,n)}))}return n=n?n.then(a,a):a()}}function R(e,t){var r=e.iterator[t.method];if(void 0===r){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,R(e,t),"throw"===t.method))return d;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return d}var i=u(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var n=i.arg;return n?n.done?(t[e.resultName]=n.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):n:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function F(e){if(e){var t=e[x];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(o.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:D}}function D(){return{value:void 0,done:!0}}return p.prototype=m,f(v,"constructor",m),f(m,"constructor",p),p.displayName=f(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,f(e,c,"GeneratorFunction")),e.prototype=Object.create(v),e},t.awrap=function(e){return{__await:e}},P(S.prototype),f(S.prototype,l,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,i,n,a){void 0===a&&(a=Promise);var o=new S(h(e,r,i,n),a);return t.isGeneratorFunction(r)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},P(v),f(v,c,"Generator"),f(v,x,(function(){return this})),f(v,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function r(){for(;t.length;){var i=t.pop();if(i in e)return r.value=i,r.done=!1,r}return r.done=!0,r}},t.values=F,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&o.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,i){return a.type="throw",a.arg=e,t.next=r,i&&(t.method="next",t.arg=void 0),!!i}for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i],a=n.completion;if("root"===n.tryLoc)return r("end");if(n.tryLoc<=this.prev){var s=o.call(n,"catchLoc"),x=o.call(n,"finallyLoc");if(s&&x){if(this.prev<n.catchLoc)return r(n.catchLoc,!0);if(this.prev<n.finallyLoc)return r(n.finallyLoc)}else if(s){if(this.prev<n.catchLoc)return r(n.catchLoc,!0)}else{if(!x)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return r(n.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&o.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var n=i;break}}n&&("break"===e||"continue"===e)&&n.tryLoc<=t&&t<=n.finallyLoc&&(n=null);var a=n?n.completion:{};return a.type=e,a.arg=t,n?(this.method="next",this.next=n.finallyLoc,d):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var i=r.completion;if("throw"===i.type){var n=i.arg;E(r)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:F(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},t}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports},698:function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==o(Symbol.iterator)?function(e){return void 0===e?"undefined":o(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":o(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},687:function(e,t,r){var i=r(61)();e.exports=i;try{regeneratorRuntime=i}catch(e){"object"==("undefined"==typeof globalThis?"undefined":df(globalThis))?globalThis.regeneratorRuntime=i:Function("r","regeneratorRuntime = r")(i)}}},t={};function r(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={exports:{}};return e[i](a,a.exports,r),a.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var s={};return function(){var e=function(e,t){if(!a(e,t))throw new TypeError("Cannot call a class as a function")},t=function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}},o=function(e,r,i){return r&&t(e.prototype,r),i&&t(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e},x=function(e,t,r,i,n,a,o){try{var s=e[a](o),x=s.value}catch(e){return void r(e)}s.done?t(x):Promise.resolve(x).then(i,n)},l=function(){return Y()("((()=>{'use strict';function _0x54580d(_0x2b6bad,_0x2d533c){if(!(_0x2b6bad instanceof _0x2d533c))throw new TypeError('Cannot\\x20call\\x20a\\x20class\\x20as\\x20a\\x20function');}function _0xae16d8(_0x51512e,_0x306019){for(var _0x585d8=0x0;_0x585d8<_0x306019['length'];_0x585d8++){var _0x34aa33=_0x306019[_0x585d8];_0x34aa33['enumerable']=_0x34aa33['enumerable']||!0x1,_0x34aa33['configurable']=!0x0,'value'in _0x34aa33&&(_0x34aa33['writable']=!0x0),Object['defineProperty'](_0x51512e,_0x34aa33['key'],_0x34aa33);}}function _0x4fd085(_0xfb685a,_0x3f4464,_0xc28cb1){return _0x3f4464&&_0xae16d8(_0xfb685a['prototype'],_0x3f4464),_0xc28cb1&&_0xae16d8(_0xfb685a,_0xc28cb1),Object['defineProperty'](_0xfb685a,'prototype',{'writable':!0x1}),_0xfb685a;}var _0x599b74=0x501,_0x4b57a2=0x502,_0xa88cb3=0x505,_0x1ee0b0=0x507,_0x31d5c8=0x508,_0x13beae=0x509,_0x41c932=0x512,_0x633153=0x516,_0x2aea6b=0x1,_0x240c92=0x2,_0x1e68ea=0x3,_0x4fbb93=0x0,_0x54a990=0x100,_0x2cb8a2=0x200,_0x4e5968=0x300,_0x30e952=0x400,_0x1837a3=0x500,_0x20b7ae=0x600,_0x443c47=0x700,_0x30ecd9=0x800,_0x39b0d3=0x900,_0x2a01ec=0xa00,_0x16ee77=0x1,_0x3ff4c5=0x2,_0x353221=0x4,_0x2b1528=0x8,_0x1f2582=0x10,_0x160732=0x20,_0x285caf=(function(){function _0x3a5d6f(_0x464baf,_0x1e0a98,_0x5183ee){_0x54580d(this,_0x3a5d6f),this['width']=0x0,this['height']=0x0,this['decoderObj']=null,this['FirstFrame']=!0x0,this['ready_frames']=[],this['underflow']=!0x0,this['sab']=_0x464baf,this['frameRate']=0x1e,this['needSetPreSoft']=!0x1,this['decoderCurStatus']=0x2,this['decoderOutSuccess']=!0x1,this['decoderObjNeedReset']=!0x1,this['oVideoRenderHandle']=_0x1e0a98,this['output']=this['output']['bind'](this),this['reportError']=this['reportError']['bind'](this),this['player']=null,null!=_0x5183ee&&(this['player']=_0x5183ee),this['curFrame']=null;}return _0x4fd085(_0x3a5d6f,[{'key':'initDecoder','value':function(){if(null==this['decoderObj']){var _0x2d79fc={'output':this['output'],'error':this['reportError']};this['decoderObj']=new VideoDecoder(_0x2d79fc);}this['underflow']&&(this['underflow']=!0x1,setTimeout(this['oVideoRenderHandle']['RenderFrame'](),0x0),this['oVideoRenderHandle']['displayRunning']=!0x0),this['decoderCurStatus']=0x2,this['FirstFrame']=!0x0;}},{'key':'inputData','value':function(_0x14a132,_0x2702c6){null!=this['decoderObj']&&('configured'==this['decoderObj']['state']||this['FirstFrame'])&&this['decodeProcess'](_0x14a132,_0x2702c6),_0x2702c6['nStreamEnd']&&this['SetStreamEnd']();}},{'key':'concatenate','value':function(_0x5e99ee){for(var _0x1d99af=0x0,_0x224806=arguments['length'],_0x2c0fc3=new Array(_0x224806>0x1?_0x224806-0x1:0x0),_0xe5bc19=0x1;_0xe5bc19<_0x224806;_0xe5bc19++)_0x2c0fc3[_0xe5bc19-0x1]=arguments[_0xe5bc19];for(var _0x2e36e3=0x0,_0x4839aa=_0x2c0fc3;_0x2e36e3<_0x4839aa['length'];_0x2e36e3++){var _0x5b5797=_0x4839aa[_0x2e36e3];_0x1d99af+=_0x5b5797['length'];}for(var _0xd7b863=new _0x5e99ee(_0x1d99af),_0x34342b=0x0,_0x467991=0x0,_0x454adf=_0x2c0fc3;_0x467991<_0x454adf['length'];_0x467991++){var _0x1d9c81=_0x454adf[_0x467991];_0xd7b863['set'](_0x1d9c81,_0x34342b),_0x34342b+=_0x1d9c81['length'];}return _0xd7b863;}},{'key':'processData','value':function(_0x3e77b2){for(var _0x24d282=null,_0x199354=null,_0x7aab92=null,_0x3c4951=!0x1,_0x2f2bac=!0x1,_0x4e9e0c=0x0,_0x7feff9=0x0;_0x7feff9<_0x3e77b2['length']-0x4;_0x7feff9++){if(0x0!=_0x3e77b2[_0x7feff9]||0x0!=_0x3e77b2[_0x7feff9+0x1]||0x0!=_0x3e77b2[_0x7feff9+0x2]||0x1!=_0x3e77b2[_0x7feff9+0x3]||0x67!=_0x3e77b2[_0x7feff9+0x4]&&0x27!=_0x3e77b2[_0x7feff9+0x4]||(0x0!=_0x7feff9?(_0x2f2bac=!0x0,_0x24d282=_0x3e77b2['slice'](_0x7feff9),_0x4e9e0c=_0x7feff9):_0x24d282=_0x3e77b2),0x0==_0x3e77b2[_0x7feff9]&&0x0==_0x3e77b2[_0x7feff9+0x1]&&0x0==_0x3e77b2[_0x7feff9+0x2]&&0x1==_0x3e77b2[_0x7feff9+0x3]&&(0x9==_0x3e77b2[_0x7feff9+0x4]||0x6==_0x3e77b2[_0x7feff9+0x4])){if(null==_0x24d282)continue;null==_0x199354&&(_0x199354=_0x3e77b2['slice'](_0x4e9e0c,_0x7feff9),_0x3c4951=!0x0);}if(0x0==_0x3e77b2[_0x7feff9]&&0x0==_0x3e77b2[_0x7feff9+0x1]&&0x0==_0x3e77b2[_0x7feff9+0x2]&&0x1==_0x3e77b2[_0x7feff9+0x3]&&(0x65==_0x3e77b2[_0x7feff9+0x4]||0x25==_0x3e77b2[_0x7feff9+0x4])){_0x3c4951&&(_0x7aab92=_0x3e77b2['slice'](_0x7feff9));break;}}return _0x3c4951?this['concatenate'](Uint8Array,_0x199354,_0x7aab92):_0x2f2bac?_0x24d282:_0x3e77b2;}},{'key':'processData1','value':function(_0x16bcc1){return 0x0!=_0x16bcc1[0x0]||0x0!=_0x16bcc1[0x1]||0x0!=_0x16bcc1[0x2]||0x1!=_0x16bcc1[0x3]||0x9!=_0x16bcc1[0x4]&&0x6!=_0x16bcc1[0x4]?_0x16bcc1:_0x16bcc1['slice'](0x5);}},{'key':'formatVideoDecoderConfigure','value':function(_0x54ce8e,_0x196d31,_0x5a1ba3,_0x50f43f){var _0x1ffc78='';if(0x5==_0x196d31)_0x1ffc78='hvc1.1.6.L123.00',console['log']('265\\x20hard\\x20decoder');else{if(0x100==_0x196d31){for(var _0x1ccde6=0x0;_0x1ccde6<_0x54ce8e['length'];_0x1ccde6++)if(0x67===_0x54ce8e[_0x1ccde6]||0x27===_0x54ce8e[_0x1ccde6]){var _0x3cd7eb=_0x54ce8e['subarray'](_0x1ccde6+0x1,_0x1ccde6+0x4);_0x1ffc78='avc1.';for(var _0x34c212=0x0;_0x34c212<0x3;_0x34c212++){var _0x1ce113=_0x3cd7eb[_0x34c212]['toString'](0x10);_0x1ce113['length']<0x2&&(_0x1ce113='0'+_0x1ce113),_0x1ffc78+=_0x1ce113;}break;}console['log']('264\\x20hard\\x20decoder');}else console['log']('Support\\x20Error:\\x20hard\\x20decoder\\x20only\\x20support\\x20264\\x20and\\x20265\\x20!!!');}var _0x34eea1={'codec':_0x1ffc78,'hardwareAcceleration':'prefer-hardware','optimizeForLatency':0x1};return 0x5!=_0x196d31&&this['needSetPreSoft']&&(_0x34eea1['hardwareAcceleration']='prefer-software'),_0x34eea1;}},{'key':'decodeProcess','value':function(_0x39207c,_0x2e1195){var _0x4f64b2=this;this['frameRate']!=_0x2e1195['frameRate']&&(this['frameRate']=_0x2e1195['frameRate']),this['width']!=_0x2e1195['width']&&(this['width']=_0x2e1195['width']),this['height']!=_0x2e1195['height']&&(this['height']=_0x2e1195['height']),_0x2e1195['needSetPreSoft']&&(this['needSetPreSoft']=_0x2e1195['needSetPreSoft']);var _0x1e93e7=_0x39207c;if(0x4!=this['decoderCurStatus']&&null!=this['decoderObj']){if('configured'==this['decoderObj']['state']){var _0x38e22c=new EncodedVideoChunk({'data':_0x1e93e7,'timestamp':_0x2e1195['timeStamp'],'type':_0x2e1195['isKeyFrame']?'key':'delta'});this['decoderObj']['decode'](_0x38e22c),_0x1e93e7=null,_0x39207c=null,_0x38e22c=null,_0x2e1195['frameType'];}else{if(_0x2e1195['isKeyFrame']&&'unconfigured'==this['decoderObj']['state']){var _0x158e69=this['formatVideoDecoderConfigure'](_0x39207c,_0x2e1195['codecType'],_0x2e1195['width'],_0x2e1195['height']);if(''==_0x158e69['codec'])return-0x1;VideoDecoder['isConfigSupported'](_0x158e69)['then'](function(_0x5e7fa4){if(_0x5e7fa4['supported']){_0x4f64b2['decoderObj']['configure'](_0x158e69),_0x1e93e7=_0x4f64b2['processData'](_0x39207c),_0x4f64b2['FirstFrame']=!0x1;var _0x3f5221=new EncodedVideoChunk({'data':_0x1e93e7,'timestamp':_0x2e1195['timeStamp'],'type':_0x2e1195['isKeyFrame']?'key':'delta'});_0x4f64b2['decoderObj']['decode'](_0x3f5221),_0x158e69=null,_0x1e93e7=null,_0x39207c=null;}else console['log']('%c4>HardDecoder\\x20ConfigSupported\\x20error,switch\\x20hard\\x20to\\x20soft','color:\\x20red'),_0x4f64b2['oVideoRenderHandle']['HardDecodeError']();})['catch'](function(){console['log']('VideoDecoder.js\\x20isConfigSupported\\x20error\\x20switch\\x20hard\\x20to\\x20soft\\x20'),_0x4f64b2['oVideoRenderHandle']['HardDecodeError']();});}}}}},{'key':'output','value':function(_0x206cf6){if('configured'==this['decoderObj']['state'])_0x206cf6['format'],_0x206cf6['codedWidth'],_0x206cf6['codedHeight'],_0x206cf6['displayWidth'],_0x206cf6['displayHeight'],_0x206cf6['duration'],_0x206cf6['timestamp'],(this['ready_frames']['push'](_0x206cf6),this['decoderOutSuccess']||(this['decoderOutSuccess']=!0x0),this['decoderObj']['decodeQueueSize']<=0x1&&(this['player']?this['player']['JSPlayM4_GetRawData']():postMessage({'function':'GetRawData'})));else _0x206cf6['close']();}},{'key':'output2','value':function(_0x4be35d){var _0x3a3570=this;_0x4be35d['timestamp'],createImageBitmap(_0x4be35d)['then'](function(_0x3adf18){_0x4be35d['close'](),_0x3a3570['ready_frames']['push'](_0x3adf18);});}},{'key':'reportError','value':function(_0x16c406){this['decoderOutSuccess']?this['decoderObjNeedReset']=!0x0:(this['oVideoRenderHandle']['HardDecodeError'](),console['log']('%cswitch\\x20hardVideoDecoder\\x20to\\x20softVideoDecoder','color:\\x20red'));}},{'key':'destroyDecoder','value':function(){var _0x450263=this;return new Promise(function(_0x200299,_0x1c35a9){_0x450263['clearDecoderObjBuffer']()['then'](function(){null!=_0x450263['decoderObj']&&('closed'!=_0x450263['decoderObj']['state']&&_0x450263['decoderObj']['close'](),console['log']('>>>JS\\x2001\\x20destroy\\x20decoderObj'),_0x450263['decoderObj']=null),_0x450263['decoderCurStatus']=0x4,_0x450263['decoderOutSuccess']=!0x1,_0x450263['FirstFrame']=!0x0,_0x450263['underflow']=!0x0,_0x450263['needSetPreSoft']=!0x1,_0x450263['decoderObjNeedReset']=!0x1,_0x200299();},function(){_0x1c35a9();});});}},{'key':'resetDecoder','value':function(){var _0x1c7703=this;return new Promise(function(_0x240094,_0x2effac){_0x1c7703['destroyDecoder']()['then'](function(){_0x1c7703['initDecoder'](),console['log']('%c\\x20reset\\x20hard\\x20decoder','color:red'),_0x240094();},function(){_0x2effac();});});}},{'key':'clearDecoderObjBuffer','value':function(){var _0x27b4db=this;return new Promise(function(_0xdf8f82,_0x28479a){for(var _0x5d26a1=_0x27b4db['ready_frames']['length'],_0x2e9d24=0x0;_0x2e9d24<_0x5d26a1;_0x2e9d24++){_0x27b4db['ready_frames']['shift']()['close']();}_0x27b4db['ready_frames']['splice'](0x0,_0x27b4db['ready_frames']['length']),null!=_0x27b4db['decoderObj']&&'configured'==_0x27b4db['decoderObj']['state']&&_0x27b4db['decoderObj']['reset'](),_0xdf8f82();});}},{'key':'SetStreamEnd','value':function(){return 0x0==this['decoderObj']['decodeQueueSize']&&0x0==this['ready_frames']['length']&&(this['decoderObj']['flush'](),console['log']('flush')),0x1;}},{'key':'GetFrame','value':function(){var _0x5f11c6=this;return new Promise(function(_0x2ac610,_0x3d6f62){if(null!=_0x5f11c6['curFrame']){var _0x4417cc=_0x5f11c6['ready_frames']['shift']();_0x4417cc['close'](),_0x4417cc=null,_0x5f11c6['curFrame']=null;}0x0!=_0x5f11c6['ready_frames']['length']?(_0x5f11c6['curFrame']=_0x5f11c6['ready_frames'][0x0],_0x2ac610(_0x5f11c6['curFrame'])):(_0x5f11c6['curFrame']=null,_0x2ac610(null));});}},{'key':'GetFrameBufferLength','value':function(){return this['ready_frames']['length'];}},{'key':'GetImageYUV','value':function(){var _0x58efa4=this;return new Promise(function(_0x80d209,_0x5c516d){var _0x32f011=null;if(null!=_0x58efa4['curFrame']?_0x32f011=_0x58efa4['curFrame']:0x0!=_0x58efa4['ready_frames']['length']&&(_0x32f011=_0x58efa4['ready_frames'][0x0]),null!=_0x32f011){var _0x586862=_0x32f011['displayWidth'],_0x9b681b=_0x32f011['displayHeight'],_0x3f3636=_0x586862*_0x9b681b*0x3/0x2,_0x331745=new Uint8Array(_0x3f3636),_0x37d16e=_0x32f011['format'];_0x32f011['copyTo'](_0x331745)['then'](function(){console['log']('2\\x20yuvLength:'+_0x3f3636+',displayWidth:'+_0x586862),_0x80d209({'yuvFrameBuffer':_0x331745,'yuvLength':_0x3f3636,'displayWidth':_0x586862,'displayHeight':_0x9b681b,'yuvType':_0x37d16e});});}else _0x80d209({'yuvFrameBuffer':-0x1,'yuvLength':-0x1,'displayWidth':-0x1,'displayHeight':-0x1,'yuvType':-0x1});});}}]),_0x3a5d6f;}()),_0xa87ede=0x1,_0x86aef9=0x80000001,_0x3d12cf=0x80000003,_0x520965=0x80000004,_0x31ddcf=0x80000005,_0x13126c=0x8000000a,_0x4d26c0=0x8000000d,_0x4fea1b=0x8000000e,_0xe9e464=0x1,_0x206403=0x2,_0x186ff9={'SR_DE_NULL':0x0,'SR_DE_FISH_ORIGINAL':0x1,'SR_DE_FISH_PTZ_CEILING':0x2,'SR_DE_FISH_PTZ_FLOOR':0x3,'SR_DE_FISH_PTZ_WALL':0x4,'SR_DE_FISH_PANORAMA_CEILING_360':0x5,'SR_DE_FISH_PANORAMA_CEILING_180':0x6,'SR_DE_FISH_PANORAMA_FLOOR_360':0x7,'SR_DE_FISH_PANORAMA_FLOOR_180':0x8,'SR_DE_FISH_PANORAMA_WALL':0x9,'SR_DE_FISH_SEMISPHERE':0xa,'SR_DE_EAGLEEYE_SEMISPHERE':0xb,'SR_DE_EAGLEEYE_PLANE':0xc,'SR_DE_FISH_CYLINDER_CEILING':0xd,'SR_DE_FISH_CYLINDER_FLOOR':0xe,'SR_DE_FISH_CYLINDER_SPLIT_CEILING':0xf,'SR_DE_FISH_CYLINDER_SPLIT_FLOOR':0x10,'SR_DE_FISH_PLANET':0x11,'SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL':0x12,'SR_DE_FISH_ARCSPHERE_VERTICAL_WALL':0x13,'SR_DE_FISH_ANIMATION_SWITCH_CEILING':0x14,'SR_DE_FISH_ANIMATION_SWITCH_FLOOR':0x15,'SR_DE_PANORAMA_SPHERE':0x16,'SR_DE_PANORAMA_PLANET':0x17},_0x343a24=0x0,_0x58bd8b=0x1,_0x532920=0x2,_0x264b64=0x3,_0x2818bf=0x4,_0x3b8155=0x5,_0x3840be=0x6,_0xa01ff6=0x100,_0x392c27=0x1,_0x5ca12e=0x2,_0x378a81=0x3,_0x3be196=0x4,_0x569e7f=0x0,_0x150ab7=0x1,_0x495db0=0x2,_0x394973=0x1,_0x42f4b3=0x2,_0x339c63=0x3,_0x444649=0x0,_0x4f7368=0x1,_0x11cf81=0x1,_0x57ef5a=0x2,_0x46c7b3=0x1,_0x2d33eb=0x2,_0x199c31=0x3,_0x414976=0x4,_0xe529b7=0x5,_0x1f462c='\\x0aattribute\\x20vec3\\x20xy;\\x0aattribute\\x20vec2\\x20uv;\\x0auniform\\x20int\\x20bCapture;\\x20\\x0a\\x0avarying\\x20highp\\x20vec2\\x20v_uv;\\x0a\\x0avoid\\x20main(void)\\x20{\\x0a\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(xy.x,\\x20-xy.y,\\x20xy.z,\\x201.0);\\x0a\\x20\\x20}\\x0a\\x20\\x20else\\x0a\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(xy,\\x201.0);\\x0a\\x20\\x20}\\x0a\\x20\\x20v_uv\\x20=\\x20uv;\\x0a}\\x0a',_0x48a033='\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec3\\x20position;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20\\x20color;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20\\x20float\\x20\\x20pp;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20\\x20vec4\\x20\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(position.x,\\x20-position.y,\\x200.0,\\x201.0);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20vec4(position.x,\\x20position.y,\\x200.0,\\x201.0);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20position.z;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20colorOut\\x20=\\x20color;\\x0a\\x20\\x20\\x20\\x20}\\x0a',_0x283927='\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20mediump\\x20float\\x20pp;\\x0a\\x20\\x20\\x20\\x20varying\\x20\\x20lowp\\x20vec4\\x20\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20colorOut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20mediump\\x20float\\x20fx\\x20=\\x20abs(pp);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(fx\\x20>\\x200.2)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20=\\x20colorOut.a*(1.25\\x20-\\x201.25*fx);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',_0x2a3c39='\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20position;\\x20\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20\\x20\\x20mat4\\x20\\x20\\x20matRotate;\\x20\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x20\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20position;\\x20//*\\x20matRotate;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20=\\x20\\x20-position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',_0x350ff5='\\x0a\\x20\\x20\\x20\\x20precision\\x20mediump\\x20float;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAlpha;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20pp.st);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20*=\\x20fAlpha;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',_0x379995=0x20,_0x4b88be=0x400,_0x466865=0.05,_0x4a23c6=0.000001,_0x530a52=3.1415926,_0x49aaae=0.02,_0x26dab3=0x3e8,_0x13b181=0.78539815,_0x40743d=0x28,_0x3cf544=-0x1,_0x44d661=_0x530a52/0x12,_0x5affea=_0x530a52/0x3,_0x438d57=_0x530a52/0x6,_0x2506c4=_0x530a52/0x9,_0x2fd873=0.000001,_0x1d1f9f='undefined'!=typeof Float32Array?Float32Array:Array;Math['random'],Math['PI'],Math['hypot']||(Math['hypot']=function(){for(var _0x1528a6=0x0,_0xb5940b=arguments['length'];_0xb5940b--;)_0x1528a6+=arguments[_0xb5940b]*arguments[_0xb5940b];return Math['sqrt'](_0x1528a6);});function _0x5d7ee2(){var _0x2c8471=new _0x1d1f9f(0x10);return _0x1d1f9f!=Float32Array&&(_0x2c8471[0x1]=0x0,_0x2c8471[0x2]=0x0,_0x2c8471[0x3]=0x0,_0x2c8471[0x4]=0x0,_0x2c8471[0x6]=0x0,_0x2c8471[0x7]=0x0,_0x2c8471[0x8]=0x0,_0x2c8471[0x9]=0x0,_0x2c8471[0xb]=0x0,_0x2c8471[0xc]=0x0,_0x2c8471[0xd]=0x0,_0x2c8471[0xe]=0x0),_0x2c8471[0x0]=0x1,_0x2c8471[0x5]=0x1,_0x2c8471[0xa]=0x1,_0x2c8471[0xf]=0x1,_0x2c8471;}function _0x5ec25a(_0x3bc3fc,_0x205ca0,_0x1e9eea){var _0x331936=_0x205ca0[0x0],_0x40c3da=_0x205ca0[0x1],_0x37c4cb=_0x205ca0[0x2],_0xa889b6=_0x205ca0[0x3],_0x4c0dbb=_0x205ca0[0x4],_0x52301a=_0x205ca0[0x5],_0x17f559=_0x205ca0[0x6],_0x2c8144=_0x205ca0[0x7],_0x48eb8a=_0x205ca0[0x8],_0x4d2bbd=_0x205ca0[0x9],_0x5a4141=_0x205ca0[0xa],_0x480471=_0x205ca0[0xb],_0x2d955c=_0x205ca0[0xc],_0x5b4064=_0x205ca0[0xd],_0x2f8b5f=_0x205ca0[0xe],_0x227864=_0x205ca0[0xf],_0x5af42b=_0x1e9eea[0x0],_0x2f83a3=_0x1e9eea[0x1],_0x50ee36=_0x1e9eea[0x2],_0xf7a7ad=_0x1e9eea[0x3];return _0x3bc3fc[0x0]=_0x5af42b*_0x331936+_0x2f83a3*_0x4c0dbb+_0x50ee36*_0x48eb8a+_0xf7a7ad*_0x2d955c,_0x3bc3fc[0x1]=_0x5af42b*_0x40c3da+_0x2f83a3*_0x52301a+_0x50ee36*_0x4d2bbd+_0xf7a7ad*_0x5b4064,_0x3bc3fc[0x2]=_0x5af42b*_0x37c4cb+_0x2f83a3*_0x17f559+_0x50ee36*_0x5a4141+_0xf7a7ad*_0x2f8b5f,_0x3bc3fc[0x3]=_0x5af42b*_0xa889b6+_0x2f83a3*_0x2c8144+_0x50ee36*_0x480471+_0xf7a7ad*_0x227864,_0x5af42b=_0x1e9eea[0x4],_0x2f83a3=_0x1e9eea[0x5],_0x50ee36=_0x1e9eea[0x6],_0xf7a7ad=_0x1e9eea[0x7],_0x3bc3fc[0x4]=_0x5af42b*_0x331936+_0x2f83a3*_0x4c0dbb+_0x50ee36*_0x48eb8a+_0xf7a7ad*_0x2d955c,_0x3bc3fc[0x5]=_0x5af42b*_0x40c3da+_0x2f83a3*_0x52301a+_0x50ee36*_0x4d2bbd+_0xf7a7ad*_0x5b4064,_0x3bc3fc[0x6]=_0x5af42b*_0x37c4cb+_0x2f83a3*_0x17f559+_0x50ee36*_0x5a4141+_0xf7a7ad*_0x2f8b5f,_0x3bc3fc[0x7]=_0x5af42b*_0xa889b6+_0x2f83a3*_0x2c8144+_0x50ee36*_0x480471+_0xf7a7ad*_0x227864,_0x5af42b=_0x1e9eea[0x8],_0x2f83a3=_0x1e9eea[0x9],_0x50ee36=_0x1e9eea[0xa],_0xf7a7ad=_0x1e9eea[0xb],_0x3bc3fc[0x8]=_0x5af42b*_0x331936+_0x2f83a3*_0x4c0dbb+_0x50ee36*_0x48eb8a+_0xf7a7ad*_0x2d955c,_0x3bc3fc[0x9]=_0x5af42b*_0x40c3da+_0x2f83a3*_0x52301a+_0x50ee36*_0x4d2bbd+_0xf7a7ad*_0x5b4064,_0x3bc3fc[0xa]=_0x5af42b*_0x37c4cb+_0x2f83a3*_0x17f559+_0x50ee36*_0x5a4141+_0xf7a7ad*_0x2f8b5f,_0x3bc3fc[0xb]=_0x5af42b*_0xa889b6+_0x2f83a3*_0x2c8144+_0x50ee36*_0x480471+_0xf7a7ad*_0x227864,_0x5af42b=_0x1e9eea[0xc],_0x2f83a3=_0x1e9eea[0xd],_0x50ee36=_0x1e9eea[0xe],_0xf7a7ad=_0x1e9eea[0xf],_0x3bc3fc[0xc]=_0x5af42b*_0x331936+_0x2f83a3*_0x4c0dbb+_0x50ee36*_0x48eb8a+_0xf7a7ad*_0x2d955c,_0x3bc3fc[0xd]=_0x5af42b*_0x40c3da+_0x2f83a3*_0x52301a+_0x50ee36*_0x4d2bbd+_0xf7a7ad*_0x5b4064,_0x3bc3fc[0xe]=_0x5af42b*_0x37c4cb+_0x2f83a3*_0x17f559+_0x50ee36*_0x5a4141+_0xf7a7ad*_0x2f8b5f,_0x3bc3fc[0xf]=_0x5af42b*_0xa889b6+_0x2f83a3*_0x2c8144+_0x50ee36*_0x480471+_0xf7a7ad*_0x227864,_0x3bc3fc;}function _0x3405d1(_0xe0081f,_0x1b674b,_0x4ce0fb,_0x151c92){var _0xa104c9,_0x46ae43,_0x26d557,_0x237e66,_0x40ab05,_0x5fd26e,_0x5ae90f,_0x4f396b,_0x5b9f89,_0x1d5853,_0x5beaee,_0xc07032,_0x391691,_0xb7a629,_0x5861cc,_0x3b1ef3,_0x7394b2,_0x2b731b,_0x41f62d,_0x3cc106,_0x3890ac,_0x29cdd9,_0x496a78,_0x197fb4,_0x12c2f9=_0x151c92[0x0],_0x16ab04=_0x151c92[0x1],_0x1fb873=_0x151c92[0x2],_0x4b6fb0=Math['hypot'](_0x12c2f9,_0x16ab04,_0x1fb873);return _0x4b6fb0<_0x2fd873?null:(_0x12c2f9*=_0x4b6fb0=0x1/_0x4b6fb0,_0x16ab04*=_0x4b6fb0,_0x1fb873*=_0x4b6fb0,_0xa104c9=Math['sin'](_0x4ce0fb),_0x26d557=0x1-(_0x46ae43=Math['cos'](_0x4ce0fb)),_0x237e66=_0x1b674b[0x0],_0x40ab05=_0x1b674b[0x1],_0x5fd26e=_0x1b674b[0x2],_0x5ae90f=_0x1b674b[0x3],_0x4f396b=_0x1b674b[0x4],_0x5b9f89=_0x1b674b[0x5],_0x1d5853=_0x1b674b[0x6],_0x5beaee=_0x1b674b[0x7],_0xc07032=_0x1b674b[0x8],_0x391691=_0x1b674b[0x9],_0xb7a629=_0x1b674b[0xa],_0x5861cc=_0x1b674b[0xb],_0x3b1ef3=_0x12c2f9*_0x12c2f9*_0x26d557+_0x46ae43,_0x7394b2=_0x16ab04*_0x12c2f9*_0x26d557+_0x1fb873*_0xa104c9,_0x2b731b=_0x1fb873*_0x12c2f9*_0x26d557-_0x16ab04*_0xa104c9,_0x41f62d=_0x12c2f9*_0x16ab04*_0x26d557-_0x1fb873*_0xa104c9,_0x3cc106=_0x16ab04*_0x16ab04*_0x26d557+_0x46ae43,_0x3890ac=_0x1fb873*_0x16ab04*_0x26d557+_0x12c2f9*_0xa104c9,_0x29cdd9=_0x12c2f9*_0x1fb873*_0x26d557+_0x16ab04*_0xa104c9,_0x496a78=_0x16ab04*_0x1fb873*_0x26d557-_0x12c2f9*_0xa104c9,_0x197fb4=_0x1fb873*_0x1fb873*_0x26d557+_0x46ae43,_0xe0081f[0x0]=_0x237e66*_0x3b1ef3+_0x4f396b*_0x7394b2+_0xc07032*_0x2b731b,_0xe0081f[0x1]=_0x40ab05*_0x3b1ef3+_0x5b9f89*_0x7394b2+_0x391691*_0x2b731b,_0xe0081f[0x2]=_0x5fd26e*_0x3b1ef3+_0x1d5853*_0x7394b2+_0xb7a629*_0x2b731b,_0xe0081f[0x3]=_0x5ae90f*_0x3b1ef3+_0x5beaee*_0x7394b2+_0x5861cc*_0x2b731b,_0xe0081f[0x4]=_0x237e66*_0x41f62d+_0x4f396b*_0x3cc106+_0xc07032*_0x3890ac,_0xe0081f[0x5]=_0x40ab05*_0x41f62d+_0x5b9f89*_0x3cc106+_0x391691*_0x3890ac,_0xe0081f[0x6]=_0x5fd26e*_0x41f62d+_0x1d5853*_0x3cc106+_0xb7a629*_0x3890ac,_0xe0081f[0x7]=_0x5ae90f*_0x41f62d+_0x5beaee*_0x3cc106+_0x5861cc*_0x3890ac,_0xe0081f[0x8]=_0x237e66*_0x29cdd9+_0x4f396b*_0x496a78+_0xc07032*_0x197fb4,_0xe0081f[0x9]=_0x40ab05*_0x29cdd9+_0x5b9f89*_0x496a78+_0x391691*_0x197fb4,_0xe0081f[0xa]=_0x5fd26e*_0x29cdd9+_0x1d5853*_0x496a78+_0xb7a629*_0x197fb4,_0xe0081f[0xb]=_0x5ae90f*_0x29cdd9+_0x5beaee*_0x496a78+_0x5861cc*_0x197fb4,_0x1b674b!==_0xe0081f&&(_0xe0081f[0xc]=_0x1b674b[0xc],_0xe0081f[0xd]=_0x1b674b[0xd],_0xe0081f[0xe]=_0x1b674b[0xe],_0xe0081f[0xf]=_0x1b674b[0xf]),_0xe0081f);}var _0x4ceff8=function(_0x302553,_0xab7b4e,_0x299e09,_0x38ab7f,_0x237322){var _0x3eec8b=0x1/Math['tan'](_0xab7b4e/0x2);if(_0x302553[0x0]=_0x3eec8b/_0x299e09,_0x302553[0x1]=0x0,_0x302553[0x2]=0x0,_0x302553[0x3]=0x0,_0x302553[0x4]=0x0,_0x302553[0x5]=_0x3eec8b,_0x302553[0x6]=0x0,_0x302553[0x7]=0x0,_0x302553[0x8]=0x0,_0x302553[0x9]=0x0,_0x302553[0xb]=-0x1,_0x302553[0xc]=0x0,_0x302553[0xd]=0x0,_0x302553[0xf]=0x0,null!=_0x237322&&_0x237322!==0x1/0x0){var _0x2642b3=0x1/(_0x38ab7f-_0x237322);_0x302553[0xa]=(_0x237322+_0x38ab7f)*_0x2642b3,_0x302553[0xe]=0x2*_0x237322*_0x38ab7f*_0x2642b3;}else _0x302553[0xa]=-0x1,_0x302553[0xe]=-0x2*_0x38ab7f;return _0x302553;},_0x504680=function(_0x23342e,_0x5bb1cc,_0x473ea1,_0x29c6e7,_0x5528a9,_0x3833eb,_0x35e8e6){var _0x445103=0x1/(_0x5bb1cc-_0x473ea1),_0x1b3a48=0x1/(_0x29c6e7-_0x5528a9),_0x19b6f6=0x1/(_0x3833eb-_0x35e8e6);return _0x23342e[0x0]=-0x2*_0x445103,_0x23342e[0x1]=0x0,_0x23342e[0x2]=0x0,_0x23342e[0x3]=0x0,_0x23342e[0x4]=0x0,_0x23342e[0x5]=-0x2*_0x1b3a48,_0x23342e[0x6]=0x0,_0x23342e[0x7]=0x0,_0x23342e[0x8]=0x0,_0x23342e[0x9]=0x0,_0x23342e[0xa]=0x2*_0x19b6f6,_0x23342e[0xb]=0x0,_0x23342e[0xc]=(_0x5bb1cc+_0x473ea1)*_0x445103,_0x23342e[0xd]=(_0x5528a9+_0x29c6e7)*_0x1b3a48,_0x23342e[0xe]=(_0x35e8e6+_0x3833eb)*_0x19b6f6,_0x23342e[0xf]=0x1,_0x23342e;};function _0x4d7c69(){var _0x295eb7=new _0x1d1f9f(0x3);return _0x1d1f9f!=Float32Array&&(_0x295eb7[0x0]=0x0,_0x295eb7[0x1]=0x0,_0x295eb7[0x2]=0x0),_0x295eb7;}function _0x21a3b9(_0x558408,_0x34df78,_0x527718){var _0x15b0f4=new _0x1d1f9f(0x3);return _0x15b0f4[0x0]=_0x558408,_0x15b0f4[0x1]=_0x34df78,_0x15b0f4[0x2]=_0x527718,_0x15b0f4;}function _0x1a3314(_0x378744,_0xbd9ba4){return _0x378744[0x0]*_0xbd9ba4[0x0]+_0x378744[0x1]*_0xbd9ba4[0x1]+_0x378744[0x2]*_0xbd9ba4[0x2];}function _0x3d4060(_0x17fee6,_0x4a9566,_0x713dfe){var _0x3fee8d=_0x4a9566[0x0],_0x8cebec=_0x4a9566[0x1],_0x28e065=_0x4a9566[0x2],_0x38339=_0x713dfe[0x0],_0x22f745=_0x713dfe[0x1],_0x5a41a6=_0x713dfe[0x2];return _0x17fee6[0x0]=_0x8cebec*_0x5a41a6-_0x28e065*_0x22f745,_0x17fee6[0x1]=_0x28e065*_0x38339-_0x3fee8d*_0x5a41a6,_0x17fee6[0x2]=_0x3fee8d*_0x22f745-_0x8cebec*_0x38339,_0x17fee6;}var _0x3e3a1f,_0x395623=function(_0x388fd0){var _0x5b9529=_0x388fd0[0x0],_0xd338a0=_0x388fd0[0x1],_0x2aad30=_0x388fd0[0x2];return Math['hypot'](_0x5b9529,_0xd338a0,_0x2aad30);};_0x3e3a1f=_0x4d7c69(),!(function(){var _0x582aae,_0x79f026=(_0x582aae=new _0x1d1f9f(0x4),_0x1d1f9f!=Float32Array&&(_0x582aae[0x0]=0x0,_0x582aae[0x1]=0x0,_0x582aae[0x2]=0x0,_0x582aae[0x3]=0x0),_0x582aae);}());function _0x5b294c(){var _0x2c9a14=new _0x1d1f9f(0x4);return _0x1d1f9f!=Float32Array&&(_0x2c9a14[0x0]=0x0,_0x2c9a14[0x1]=0x0,_0x2c9a14[0x2]=0x0),_0x2c9a14[0x3]=0x1,_0x2c9a14;}function _0x600e23(_0x1ab4b1,_0x205eec,_0x3e3ad5,_0x5d3c36){var _0x13db1a,_0x48838a,_0x37104f,_0x20dc1e,_0x32d1b7,_0x11e631=_0x205eec[0x0],_0x41b90d=_0x205eec[0x1],_0x1ba7cf=_0x205eec[0x2],_0x4f337e=_0x205eec[0x3],_0x55bad6=_0x3e3ad5[0x0],_0x5b458b=_0x3e3ad5[0x1],_0x28612f=_0x3e3ad5[0x2],_0x1a2451=_0x3e3ad5[0x3];return(_0x48838a=_0x11e631*_0x55bad6+_0x41b90d*_0x5b458b+_0x1ba7cf*_0x28612f+_0x4f337e*_0x1a2451)<0x0&&(_0x48838a=-_0x48838a,_0x55bad6=-_0x55bad6,_0x5b458b=-_0x5b458b,_0x28612f=-_0x28612f,_0x1a2451=-_0x1a2451),0x1-_0x48838a>_0x2fd873?(_0x13db1a=Math['acos'](_0x48838a),_0x37104f=Math['sin'](_0x13db1a),_0x20dc1e=Math['sin']((0x1-_0x5d3c36)*_0x13db1a)/_0x37104f,_0x32d1b7=Math['sin'](_0x5d3c36*_0x13db1a)/_0x37104f):(_0x20dc1e=0x1-_0x5d3c36,_0x32d1b7=_0x5d3c36),_0x1ab4b1[0x0]=_0x20dc1e*_0x11e631+_0x32d1b7*_0x55bad6,_0x1ab4b1[0x1]=_0x20dc1e*_0x41b90d+_0x32d1b7*_0x5b458b,_0x1ab4b1[0x2]=_0x20dc1e*_0x1ba7cf+_0x32d1b7*_0x28612f,_0x1ab4b1[0x3]=_0x20dc1e*_0x4f337e+_0x32d1b7*_0x1a2451,_0x1ab4b1;}var _0xb87275=function(_0x3b20b1,_0x83271c){var _0x26a808=_0x83271c[0x0],_0x4ed1e4=_0x83271c[0x1],_0x3e9207=_0x83271c[0x2],_0x423be1=_0x83271c[0x3],_0x48404d=_0x26a808*_0x26a808+_0x4ed1e4*_0x4ed1e4+_0x3e9207*_0x3e9207+_0x423be1*_0x423be1;return _0x48404d>0x0&&(_0x48404d=0x1/Math['sqrt'](_0x48404d)),_0x3b20b1[0x0]=_0x26a808*_0x48404d,_0x3b20b1[0x1]=_0x4ed1e4*_0x48404d,_0x3b20b1[0x2]=_0x3e9207*_0x48404d,_0x3b20b1[0x3]=_0x423be1*_0x48404d,_0x3b20b1;},_0x45cf39,_0x4265e3,_0x42ab8a,_0x37c073,_0x27f373,_0x464119,_0x1db24d;_0x45cf39=_0x4d7c69(),_0x4265e3=_0x21a3b9(0x1,0x0,0x0),_0x42ab8a=_0x21a3b9(0x0,0x1,0x0),_0x37c073=_0x5b294c(),_0x27f373=_0x5b294c(),_0x464119=new _0x1d1f9f(0x9),_0x1d1f9f!=Float32Array&&(_0x464119[0x1]=0x0,_0x464119[0x2]=0x0,_0x464119[0x3]=0x0,_0x464119[0x5]=0x0,_0x464119[0x6]=0x0,_0x464119[0x7]=0x0),_0x464119[0x0]=0x1,_0x464119[0x4]=0x1,_0x464119[0x8]=0x1,_0x1db24d=_0x464119,!(function(){var _0x5e96d8=(function(){var _0x1f208b=new _0x1d1f9f(0x2);return _0x1d1f9f!=Float32Array&&(_0x1f208b[0x0]=0x0,_0x1f208b[0x1]=0x0),_0x1f208b;}());}());var _0x2e6310,_0x3b657c=(function(){function _0x5ee987(){_0x54580d(this,_0x5ee987),this['fFov']=0.785,this['fAspect']=0x1,this['fNear']=0.02,this['fFar']=0x3e8,this['fTheta']=0x0,this['fAlpha']=0x0,this['fBeta']=0x0,this['fScale']=0x1,this['bOrtho']=!0x1,this['matView']=_0x5d7ee2(),this['matProj']=_0x5d7ee2(),this['vecEye']=_0x21a3b9(0x0,0x0,0x0),this['vecCenter']=_0x21a3b9(0x0,0x0,0x64),this['vecUp']=_0x21a3b9(0x0,0x1,0x0);}return _0x4fd085(_0x5ee987,[{'key':'SetYaw','value':function(_0x1b1db8){this['fTheta']=_0x1b1db8;}},{'key':'GetYaw','value':function(){return this['fTheta'];}},{'key':'SetPitch','value':function(_0x23bed8){this['fAlpha']=_0x23bed8;}},{'key':'GetPitch','value':function(){return this['fAlpha'];}},{'key':'SetRoll','value':function(_0x483c88){this['fBeta']=_0x483c88;}},{'key':'GetRoll','value':function(){return this['fBeta'];}},{'key':'SetScale','value':function(_0x49b3da){this['fScale']=_0x49b3da;}},{'key':'GetScale','value':function(){return this['fScale'];}},{'key':'SetFov','value':function(_0x51f792){this['fFov']=_0x51f792;}},{'key':'SetAspect','value':function(_0x5abf13){this['fAspect']=_0x5abf13;}},{'key':'SetNear','value':function(_0x54349a){this['fNear']=_0x54349a;}},{'key':'SetFar','value':function(_0x1e3429){this['fFar']=_0x1e3429;}},{'key':'SetOrtho','value':function(_0x5f483d){this['bOrtho']=_0x5f483d;}},{'key':'UpdateCamera','value':function(_0x1bda20,_0x2990c0){if(!(_0x1bda20<=0x0||_0x2990c0<=0x0)){if(0x1==this['bOrtho'])_0x504680(this['matProj'],0x0,_0x1bda20,_0x2990c0,0x0,this['fNear'],this['fFar']);else{var _0x2fa5f4=this['fFov']/_0x530a52*0xb4;_0x4ceff8(this['matProj'],_0x2fa5f4,_0x1bda20/_0x2990c0,this['fNear'],this['fFar']);}this['vecEye']=_0x21a3b9(0x0,0x0,this['fScale']),this['vecCenter']=_0x21a3b9(0x0,0x0,0x0),this['vecUp']=_0x21a3b9(0x0,0x1,0x0);var _0x5b2a20=_0x21a3b9(0x1,0x0,0x0),_0x2cf9bf=_0x21a3b9(0x0,0x1,0x0),_0x4e957e=_0x21a3b9(0x0,0x0,0x1),_0x48156e=_0x5d7ee2();!function(_0x25ec01,_0x40b862,_0x56ef8c,_0x12ba71){var _0x50ab75,_0x19e466,_0x34f9a4,_0x215482,_0x31dc54,_0x21c876,_0x5e5bc4,_0x5c7e59,_0x573ea3,_0x47e710,_0x5bc565=_0x40b862[0x0],_0x398682=_0x40b862[0x1],_0x2390fd=_0x40b862[0x2],_0x2dc34a=_0x12ba71[0x0],_0x3d1e14=_0x12ba71[0x1],_0x21f20c=_0x12ba71[0x2],_0x9b62d=_0x56ef8c[0x0],_0x420fd0=_0x56ef8c[0x1],_0x3cc1aa=_0x56ef8c[0x2];Math['abs'](_0x5bc565-_0x9b62d)<_0x2fd873&&Math['abs'](_0x398682-_0x420fd0)<_0x2fd873&&Math['abs'](_0x2390fd-_0x3cc1aa)<_0x2fd873?function(_0x26b1cc){_0x26b1cc[0x0]=0x1,_0x26b1cc[0x1]=0x0,_0x26b1cc[0x2]=0x0,_0x26b1cc[0x3]=0x0,_0x26b1cc[0x4]=0x0,_0x26b1cc[0x5]=0x1,_0x26b1cc[0x6]=0x0,_0x26b1cc[0x7]=0x0,_0x26b1cc[0x8]=0x0,_0x26b1cc[0x9]=0x0,_0x26b1cc[0xa]=0x1,_0x26b1cc[0xb]=0x0,_0x26b1cc[0xc]=0x0,_0x26b1cc[0xd]=0x0,_0x26b1cc[0xe]=0x0,_0x26b1cc[0xf]=0x1;}(_0x25ec01):(_0x5e5bc4=_0x5bc565-_0x9b62d,_0x5c7e59=_0x398682-_0x420fd0,_0x573ea3=_0x2390fd-_0x3cc1aa,_0x50ab75=_0x3d1e14*(_0x573ea3*=_0x47e710=0x1/Math['hypot'](_0x5e5bc4,_0x5c7e59,_0x573ea3))-_0x21f20c*(_0x5c7e59*=_0x47e710),_0x19e466=_0x21f20c*(_0x5e5bc4*=_0x47e710)-_0x2dc34a*_0x573ea3,_0x34f9a4=_0x2dc34a*_0x5c7e59-_0x3d1e14*_0x5e5bc4,(_0x47e710=Math['hypot'](_0x50ab75,_0x19e466,_0x34f9a4))?(_0x50ab75*=_0x47e710=0x1/_0x47e710,_0x19e466*=_0x47e710,_0x34f9a4*=_0x47e710):(_0x50ab75=0x0,_0x19e466=0x0,_0x34f9a4=0x0),_0x215482=_0x5c7e59*_0x34f9a4-_0x573ea3*_0x19e466,_0x31dc54=_0x573ea3*_0x50ab75-_0x5e5bc4*_0x34f9a4,_0x21c876=_0x5e5bc4*_0x19e466-_0x5c7e59*_0x50ab75,(_0x47e710=Math['hypot'](_0x215482,_0x31dc54,_0x21c876))?(_0x215482*=_0x47e710=0x1/_0x47e710,_0x31dc54*=_0x47e710,_0x21c876*=_0x47e710):(_0x215482=0x0,_0x31dc54=0x0,_0x21c876=0x0),_0x25ec01[0x0]=_0x50ab75,_0x25ec01[0x1]=_0x215482,_0x25ec01[0x2]=_0x5e5bc4,_0x25ec01[0x3]=0x0,_0x25ec01[0x4]=_0x19e466,_0x25ec01[0x5]=_0x31dc54,_0x25ec01[0x6]=_0x5c7e59,_0x25ec01[0x7]=0x0,_0x25ec01[0x8]=_0x34f9a4,_0x25ec01[0x9]=_0x21c876,_0x25ec01[0xa]=_0x573ea3,_0x25ec01[0xb]=0x0,_0x25ec01[0xc]=-(_0x50ab75*_0x5bc565+_0x19e466*_0x398682+_0x34f9a4*_0x2390fd),_0x25ec01[0xd]=-(_0x215482*_0x5bc565+_0x31dc54*_0x398682+_0x21c876*_0x2390fd),_0x25ec01[0xe]=-(_0x5e5bc4*_0x5bc565+_0x5c7e59*_0x398682+_0x573ea3*_0x2390fd),_0x25ec01[0xf]=0x1);}(_0x48156e,this['vecEye'],this['vecCenter'],this['vecUp']);var _0x14046d=_0x5d7ee2(),_0x18395f=_0x5d7ee2(),_0x549d74=_0x5d7ee2(),_0x15744a=_0x5d7ee2();_0x3405d1(_0x18395f,_0x14046d,-this['fAlpha'],_0x5b2a20),_0x3405d1(_0x549d74,_0x18395f,-this['fTheta'],_0x2cf9bf),_0x3405d1(_0x15744a,_0x549d74,-this['fBeta'],_0x4e957e),_0x5ec25a(this['matView'],_0x48156e,_0x15744a);}}},{'key':'GetView','value':function(){return this['matView'];}},{'key':'GetProj','value':function(){return this['matProj'];}}]),_0x5ee987;}()),_0x453e55=(function(){function _0x2425ba(){_0x54580d(this,_0x2425ba),this['canvas']=null,this['ctx']=null,this['videoShaderProgram']=0x0,this['vertexPosBuffer']=0x0,this['texturePosBuffer']=0x0,this['pFrameData']=null,this['frameDisplayWidth']=0x0,this['frameDisplayHeight']=0x0,this['onlySupportedWebGL1']=!0x1,this['bAntialias']=!0x1,this['bRecreateTex']=!0x0,this['nSurfaceTexture']=[],this['nMaxPointNum']=0x0,this['pLinePosVertices']=null,this['pLineClrVertices']=null,this['glLinePosBuffer']=0x0,this['glLineClrBuffer']=0x0,this['nLineTriangleNum']=0x0,this['nLineShaderProgram']=0x0,this['pFillBlockPosVertices']=null,this['pFillBlockClrVertices']=null,this['nMaxFillBlockTriNum']=0x0,this['glBlockPosBuffer']=0x0,this['glBlockClrBuffer']=0x0,this['nBlockShaderProgram']=0x0,this['nDrawFontWidth']=0x0,this['nDrawFontHeight']=0x0,this['nFontColorTexture']=0x0,this['pFontColorBuffer']=0x0,this['nFontShaderProgram']=0x0,this['nFontBGNum']=0x0,this['pstFontBGLines']=[],this['nImageShaderProgram']=0x0,this['pImagePosVertices']=null,this['pImageClrVertices']=null,this['glImagePosBuffer']=0x0,this['glImageClrBuffer']=0x0,this['nImageColorTexture']=null,this['nDrawImageWidth']=0x0,this['nDrawImageHeight']=0x0,this['nImageColorTextures']=[],this['pFishParamManager']=null,this['enDisplayEffect']=_0x186ff9['SR_DE_NULL'],this['nFECPort']=_0x3cf544,this['bIsCapturing']=!0x1,this['pSemiSpherePos']=null,this['pSemiSphereTex']=null,this['nSemiSpherePosNum']=0x0,this['nSemiSpherePosSize']=0x0,this['nSemiSphereTexSize']=0x0,this['pCylinderPos']=null,this['pCylinderTex']=null,this['nCylinderPosNum']=0x0,this['nCylinderPosSize']=0x0,this['nCylinderTexSize']=0x0,this['fCylinderHeight']=0x0,this['fCylinderRadius']=0x0,this['pArcSpherePos']=null,this['pArcSphereTex']=null,this['nArcSpherePosNum']=0x0,this['nArcSpherePosSize']=0x0,this['nArcSphereTexSize']=0x0,this['fImageWidth']=0x1,this['fImageHeight']=0x1,this['fTexCenterX']=0.5,this['fTexCenterY']=0.5,this['fTexRadius']=0.5,this['b3DPort']=!0x1,this['pCamera']=null,this['fRotateX']=0x0,this['fRotateY']=0x0,this['fScale']=0x0,this['fRotateLimitX']=0x0,this['fRotateLimitY']=0x0,this['pfuncCBIn']=null,this['pfuncCBOut']=null,this['pUserIn']=null,this['pUserOut']=null,this['bCullBack']=!0x1,this['fSrcUseLeft']=0x0,this['fSrcUseRight']=0x1,this['fSrcUseTop']=0x0,this['fSrcUseBottom']=0x1,this['fDstUseLeft']=0x0,this['fDstUseRight']=0x1,this['fDstUseTop']=0x0,this['fDstUseBottom']=0x1,this['enPixelFormat']=_0x343a24,this['nTextureNum']=0x0,this['textCanvas']=null,this['textCanvasCtx']=null,this['nCaptureWidth']=0x0,this['nCaptureHeight']=0x0,this['nCaptureRTTex']=0x0,this['nCaptureFBO']=0x0,this['nCaptureFBOWidth']=0x0,this['nCaptureFBOHeight']=0x0,this['nCaptureDepthbuffer']=0x0,this['bCaptureResInit']=!0x1,this['fBrightness']=0x0,this['fHue']=0x0,this['fSaturation']=0x0,this['fContrast']=0x0,this['fSharpness']=0x0,this['nPostProc']=0x0;}return _0x4fd085(_0x2425ba,[{'key':'CompileProgram','value':function(_0x298713,_0xb12ba2){var _0x593a9b=this['ctx'];if(null==_0x593a9b||null==_0x298713||null==_0xb12ba2)return-0x1;var _0x240e10=_0x593a9b['createShader'](_0x593a9b['VERTEX_SHADER']);if(_0x593a9b['shaderSource'](_0x240e10,_0x298713),_0x593a9b['compileShader'](_0x240e10),!_0x593a9b['getShaderParameter'](_0x240e10,_0x593a9b['COMPILE_STATUS']))return console['log']('Vertex\\x20shader\\x20failed\\x20to\\x20compile:\\x20'+_0x593a9b['getShaderInfoLog'](_0x240e10)),-0x1;var _0x4a47df=_0x593a9b['createShader'](_0x593a9b['FRAGMENT_SHADER']);if(_0x593a9b['shaderSource'](_0x4a47df,_0xb12ba2),_0x593a9b['compileShader'](_0x4a47df),!_0x593a9b['getShaderParameter'](_0x4a47df,_0x593a9b['COMPILE_STATUS']))return console['log']('Fragment\\x20shader\\x20failed\\x20to\\x20compile:\\x20'+_0x593a9b['getShaderInfoLog'](_0x4a47df)),-0x1;var _0x213125=_0x593a9b['createProgram']();return _0x593a9b['attachShader'](_0x213125,_0x240e10),_0x593a9b['attachShader'](_0x213125,_0x4a47df),_0x593a9b['linkProgram'](_0x213125),_0x593a9b['getProgramParameter'](_0x213125,_0x593a9b['LINK_STATUS'])?(_0x593a9b['deleteShader'](_0x240e10),_0x593a9b['deleteShader'](_0x4a47df),_0x213125):(console['log']('Program\\x20failed\\x20to\\x20compile:\\x20'+_0x593a9b['getProgramInfoLog'](_0x213125)),-0x1);}},{'key':'SR_Init','value':function(_0x446426,_0x117296){if(null==_0x446426)return _0x31ddcf;if(this['canvas']=_0x446426,this['ctx']=this['canvas']['getContext']('webgl2'),this['ctx']||(this['ctx']=this['canvas']['getContext']('webgl')||this['canvas']['getContext']('experimental-webgl'),this['onlySupportedWebGL1']=!0x0,console['log']('only\\x20support\\x20webgl1')),!this['ctx'])return console['log']('your\\x20browser\\x20does\\x20not\\x20support\\x20WebGL'),_0x4fea1b;if(_0x117296==_0x532920||_0x117296==_0x3840be)return _0x86aef9;switch(_0x117296){case _0x58bd8b:case _0x264b64:this['nTextureNum']=0x3;break;case _0x532920:case _0x3840be:this['nTextureNum']=0x2;break;case _0xa01ff6:this['nTextureNum']=0x1;break;default:return _0x86aef9;}return this['enPixelFormat']=_0x117296,_0xa87ede;}},{'key':'SR_Draw','value':function(_0x1eea6a,_0x54c230,_0x533ad6,_0x39828b,_0x130cba){if(null==this['ctx'])return _0x520965;var _0x196b60=this['nTextureNum'];if(null==_0x1eea6a||_0x54c230<=0x0||_0x533ad6<=0x0)return _0x31ddcf;if(0x0==this['videoShaderProgram']||0x0==this['vertexPosBuffer']||0x0==this['texturePosBuffer'])return _0x520965;var _0x570392=_0xa87ede;if(_0xa01ff6==this['enPixelFormat'])this['frameDisplayWidth']=_0x54c230,this['frameDisplayHeight']=_0x533ad6;else{if(_0x570392=this['_ResizeFrameData'](_0x1eea6a,_0x54c230,_0x533ad6,_0x39828b),_0xa87ede!=_0x570392)return _0x570392;}if(this['ctx']['useProgram'](this['videoShaderProgram']),0x1==this['bRecreateTex']){if(this['enPixelFormat']==_0xa01ff6){if(0x0!=this['nSurfaceTexture'][0x0]){var _0x307c8c=this['nSurfaceTexture'][0x0];this['ctx']['deleteTexture'](_0x307c8c),this['nSurfaceTexture'][0x0]=0x0;}var _0xfa0c54=this['ctx']['createTexture']();if(_0xfa0c54<=0x0)return _0x4d26c0;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],_0xfa0c54),0x1==this['bAntialias']?this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR_MIPMAP_NEAREST']):this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),this['nSurfaceTexture'][0x0]=_0xfa0c54;}else{if(this['enPixelFormat']==_0x58bd8b||this['enPixelFormat']==_0x264b64)for(var _0x3d8d4b=0x0;_0x3d8d4b<_0x196b60;_0x3d8d4b++){if(0x0!=this['nSurfaceTexture'][_0x3d8d4b]){var _0xe89fbf=this['nSurfaceTexture'][_0x3d8d4b];this['ctx']['deleteTexture'](_0xe89fbf),this['nSurfaceTexture'][_0x3d8d4b]=0x0;}var _0x44ac7b=this['ctx']['createTexture']();if(_0x44ac7b<=0x0)return _0x4d26c0;if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],_0x44ac7b),0x1==this['bAntialias']?this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR_MIPMAP_NEAREST']):this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),0x0==_0x3d8d4b){var _0xef5d37=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Ytexture');this['ctx']['uniform1i'](_0xef5d37,0x0);}else{if(0x1==_0x3d8d4b){var _0x5d982f=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Utexture');this['ctx']['uniform1i'](_0x5d982f,0x1);}else{if(0x2==_0x3d8d4b){var _0x3ed5dc=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'Vtexture');this['ctx']['uniform1i'](_0x3ed5dc,0x2);}}}this['nSurfaceTexture'][_0x3d8d4b]=_0x44ac7b,this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],null);}}this['bRecreateTex']=!0x1;}this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x1b8d0c=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'xy');if(_0x1b8d0c<0x0)return _0x4d26c0;this['ctx']['vertexAttribPointer'](_0x1b8d0c,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x1b8d0c),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x16bf1a=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'uv');if(_0x16bf1a<0x0)return _0x4d26c0;this['ctx']['vertexAttribPointer'](_0x16bf1a,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x16bf1a),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null);var _0x2a1b79=this['enDisplayEffect'],_0x5377d3=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCapture');if(_0x5377d3<=0x0)return _0x4d26c0;this['ctx']['uniform1i'](_0x5377d3,0x0);var _0x24e3f9=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'nPostProc');switch(this['ctx']['uniform1i'](_0x24e3f9,this['nPostProc']),0x1==this['nPostProc']&&(_0x570392=this['_SetImagePostProcess']()),_0x2a1b79){case _0x186ff9['SR_DE_NULL']:break;case _0x186ff9['SR_DE_FISH_ORIGINAL']:case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:case _0x186ff9['SR_DE_FISH_PTZ_WALL']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:if(null==this['pFishParamManager'])return _0x520965;var _0x2bdc46={};if(_0x570392=this['pFishParamManager']['GetRenderParam'](this['nFECPort'],_0x2bdc46),_0xa87ede!=_0x570392)return _0x570392;if(_0x186ff9['SR_DE_FISH_ORIGINAL']==_0x2a1b79){var _0x5156fb=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bBlack');if(_0x5156fb<=0x0)return _0x4d26c0;this['ctx']['uniform1i'](_0x5156fb,_0x2bdc46['bBlack']);var _0x314d35=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCut');if(_0x314d35<=0x0)return _0x4d26c0;this['ctx']['uniform1i'](_0x314d35,_0x2bdc46['bCut']);}if(_0x186ff9['SR_DE_FISH_PTZ_CEILING']==_0x2a1b79||_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==_0x2a1b79||_0x186ff9['SR_DE_FISH_PTZ_WALL']==_0x2a1b79){var _0x124160=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleCos');if(_0x124160<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x124160,_0x2bdc46['fCosH']);var _0x306b85=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleSin');if(_0x306b85<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x306b85,_0x2bdc46['fSinH']);var _0x1bc35c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleCos');if(_0x1bc35c<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x1bc35c,_0x2bdc46['fCosV']);var _0x4c60dc=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleSin');if(_0x4c60dc<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x4c60dc,_0x2bdc46['fSinV']);var _0x136f7b=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fZoom');if(_0x136f7b<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x136f7b,_0x2bdc46['fZoom']);}if(_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']==_0x2a1b79||_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']==_0x2a1b79||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']==_0x2a1b79||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']==_0x2a1b79){var _0x517882=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fAngle');if(_0x517882<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x517882,_0x2bdc46['fAngle']);}var _0x3d42d7=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX1');if(_0x3d42d7<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x3d42d7,_0x2bdc46['fRXLeft']);var _0x5b37ec=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX2');if(_0x5b37ec<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x5b37ec,_0x2bdc46['fRXRight']);var _0x407ff2=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY1');if(_0x407ff2<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x407ff2,_0x2bdc46['fRYTop']);var _0x1c8e20=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY2');if(_0x1c8e20<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x1c8e20,_0x2bdc46['fRYBottom']);break;case _0x186ff9['SR_DE_FISH_SEMISPHERE']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](3.14-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['canvas']['width'],this['canvas']['height']);var _0x489295=this['pCamera']['GetView'](),_0xac09cc=this['pCamera']['GetProj'](),_0x5a6fea=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x5a6fea<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x5a6fea,!0x1,_0x489295);var _0x37770e=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x37770e<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x37770e,!0x1,_0xac09cc);break;case _0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['canvas']['width'],this['canvas']['height']);var _0x4082e3=this['pCamera']['GetView'](),_0x24ca6f=this['pCamera']['GetProj'](),_0x3b3b00=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x3b3b00<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x3b3b00,!0x1,_0x4082e3);var _0x87ffb2=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x87ffb2<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x87ffb2,!0x1,_0x24ca6f);break;default:return _0x86aef9;}if(this['canvas']['width']<=0x0||this['canvas']['height']<=0x0)return _0x4fea1b;if(null!=_0x130cba&&(_0x570392=this['SR_SetDisplayRect'](_0x130cba['fx'],_0x130cba['fy'],_0x130cba['width'],_0x130cba['height'],_0x206403))!=_0xa87ede)return _0x570392;if(null!=_0x130cba?this['ctx']['viewport'](this['canvas']['width']*this['fDstUseLeft'],this['canvas']['height']*this['fDstUseTop'],this['canvas']['width']*this['fDstUseRight'],this['canvas']['height']*this['fDstUseBottom']):(this['ctx']['viewport'](0x0,0x0,this['canvas']['width'],this['canvas']['height']),this['ctx']['clearColor'](0x0,0x0,0x0,0x1),this['ctx']['clear'](this['ctx']['COLOR_BUFFER_BIT']|this['ctx']['DEPTH_BUFFER_BIT'])),this['b3DPort']&&(this['ctx']['enable'](this['ctx']['DEPTH_TEST']),this['ctx']['depthFunc'](this['ctx']['LESS']),this['ctx']['depthMask'](!0x0),0x1==this['bCullBack']?this['ctx']['enable'](this['ctx']['CULL_FACE']):this['ctx']['disable'](this['ctx']['CULL_FACE'])),this['enPixelFormat']==_0xa01ff6)this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],_0x54c230,_0x533ad6,0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x1eea6a),0x1==this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']);else{if(this['enPixelFormat']==_0x58bd8b){var _0x166fc9=this['pFrameData']['subarray'](0x0,_0x54c230*_0x533ad6);this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x54c230,_0x533ad6,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x166fc9);var _0x3b1a83=this['pFrameData']['subarray'](_0x54c230*_0x533ad6+_0x54c230/0x2*_0x533ad6/0x2,_0x54c230*_0x533ad6+_0x54c230/0x2*_0x533ad6/0x2+_0x54c230/0x2*_0x533ad6/0x2);this['ctx']['activeTexture'](this['ctx']['TEXTURE1']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x1]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x54c230/0x2,_0x533ad6/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x3b1a83);var _0x402c77=this['pFrameData']['subarray'](_0x54c230*_0x533ad6,_0x54c230*_0x533ad6+_0x54c230/0x2*_0x533ad6/0x2);this['ctx']['activeTexture'](this['ctx']['TEXTURE2']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x2]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x54c230/0x2,_0x533ad6/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x402c77),0x1==this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']),_0x166fc9=null,_0x3b1a83=null,_0x402c77=null;}else this['enPixelFormat']==_0x264b64&&(_0x166fc9=this['pFrameData']['subarray'](0x0,_0x54c230*_0x533ad6),(this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x54c230,_0x533ad6,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x166fc9)),_0x3b1a83=this['pFrameData']['subarray'](_0x54c230*_0x533ad6,_0x54c230*_0x533ad6+_0x54c230/0x2*_0x533ad6/0x2),(this['ctx']['activeTexture'](this['ctx']['TEXTURE1']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x1]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x54c230/0x2,_0x533ad6/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x3b1a83)),_0x402c77=this['pFrameData']['subarray'](_0x54c230*_0x533ad6+_0x54c230/0x2*_0x533ad6/0x2,_0x54c230*_0x533ad6+_0x54c230/0x2*_0x533ad6/0x2+_0x54c230/0x2*_0x533ad6/0x2),(this['ctx']['activeTexture'](this['ctx']['TEXTURE2']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x2]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],_0x54c230/0x2,_0x533ad6/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x402c77),0x1==this['bAntialias']&&this['ctx']['generateMipmap'](this['ctx']['TEXTURE_2D']),_0x166fc9=null,_0x3b1a83=null,_0x402c77=null));}if(this['onlySupportedWebGL1']||this['ctx']['clearBufferfi'](this['ctx']['DEPTH_STENCIL'],0x0,0x1,0x0),0x0==this['b3DPort'])this['ctx']['drawArrays'](this['ctx']['TRIANGLE_FAN'],0x0,0x4);else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_SEMISPHERE']){if(this['nSemiSpherePosNum']<=0x0)return _0x520965;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nSemiSpherePosNum']);}else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']){if(this['nCylinderPosNum']<=0x0)return _0x520965;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nCylinderPosNum']);}else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){if(this['nArcSpherePosNum']<=0x0)return _0x520965;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nArcSpherePosNum']);}}}}if(this['ctx']['useProgram'](null),null!=this['pFishParamManager']){var _0x2c1465=this['pFishParamManager']['GetWndPort']();_0x2c1465!=_0x3cf544&&_0x2c1465==this['nFECPort']&&this['DrawPTZLines']();}return null!=this['pfuncCBIn']&&this['pfuncCBIn'](this['pUserIn']),null!=this['pfuncCBOut']&&this['pfuncCBOut'](this['pUserOut']),_0xa87ede;}},{'key':'DrawPTZLines','value':function(){if(null==this['pFishParamManager'])return _0x520965;var _0xfb6bfe=this['pFishParamManager']['GetPTZDisplayMode']();if(_0xfb6bfe==_0x495db0||_0xfb6bfe==_0x150ab7){for(var _0x33b298=0x0,_0x4499b9={'fR':0x0,'fG':0x0,'fB':0x0,'fA':0x0},_0x594c33=_0xa87ede,_0x4b01f7=0x0;_0x4b01f7<_0x379995;++_0x4b01f7)if(0x0!=this['pFishParamManager']['IsPortAllocated'](_0x4b01f7)&&(_0x33b298=0x2,_0x594c33=this['pFishParamManager']['GetPTZColor'](_0x4b01f7,_0x4499b9),_0xa87ede==_0x594c33)){0x1==this['pFishParamManager']['IsPTZSelected'](_0x4b01f7)&&(_0x33b298+=0x1);var _0x23fea9=this['pFishParamManager']['GetWndPort']();if(_0x4b01f7!=_0x23fea9&&_0x495db0==_0xfb6bfe){if(_0x186ff9['SR_DE_FISH_ORIGINAL']==this['pFishParamManager']['GetDisplayEffect'](_0x23fea9)){var _0x327590={};if(_0x594c33=this['pFishParamManager']['GetPTZPoints'](_0x4b01f7,_0x327590,_0x495db0),_0xa87ede!=_0x594c33)continue;if(null!=_0x327590['pstPoints']&&0x0!=_0x327590['nPointNum']&&(_0x594c33=this['SR_DrawLines'](_0x327590['pstPoints'],_0x327590['nPointNum'],!0x0,_0x4499b9,_0x33b298,!0x1),_0xa87ede!=_0x594c33))continue;}else{var _0x19796d;if((_0x19796d=this['pFishParamManager']['GetPTZFragmentNum'](_0x4b01f7))<=0x0)continue;for(var _0x3eeec2=0x0;_0x3eeec2<_0x19796d;_0x3eeec2++){var _0x4ab5d3={};this['pFishParamManager']['GetPTZFragmentPoints'](_0x4b01f7,_0x4ab5d3,_0x3eeec2),null!=_0x4ab5d3['pstPoints']&&0x0!=_0x4ab5d3['nPointNum']&&this['SR_DrawLines'](_0x4ab5d3['pstPoints'],_0x4ab5d3['nPointNum'],!0x1,_0x4499b9,_0x33b298,!0x1);}}}else{if(_0x4b01f7!=_0x23fea9&&_0x150ab7==_0xfb6bfe){var _0x50bab0={};if(_0x594c33=this['pFishParamManager']['GetPTZPoints'](_0x4b01f7,_0x50bab0,_0x150ab7),_0xa87ede!=_0x594c33)continue;if(null!=_0x50bab0['pstPoints']&&0x0!=_0x50bab0['nPointNum']&&(_0x594c33=this['SR_DrawLines'](_0x50bab0['pstPoints'],_0x50bab0['nPointNum'],!0x0,_0x4499b9,_0x33b298,!0x1),_0xa87ede!=_0x594c33))continue;}}}}return _0xa87ede;}},{'key':'DrawFillBlock','value':function(_0x5db47d,_0x17ee38,_0x3a5c7f){if(null==this['ctx'])return _0x520965;if(null==_0x5db47d||_0x17ee38<0x1||_0x3a5c7f<0x2)return _0x31ddcf;for(var _0x3175a2=0x0,_0xb41871=0x0;_0xb41871<_0x17ee38;++_0xb41871){if(null==_0x5db47d[_0xb41871]['pstPoints']||_0x5db47d[_0xb41871]['nPointNum']<0x3||!0x0!==_0x5db47d[_0xb41871]['bLoop']||null==_0x5db47d[_0xb41871]['pstColor'])return _0x31ddcf;_0x3175a2+=_0x5db47d[_0xb41871]['nPointNum'];}if(_0x3175a2!==_0x3a5c7f)return _0x31ddcf;var _0x55a3ec=_0x3a5c7f-0x2*_0x17ee38;if(_0x55a3ec>this['nMaxFillBlockTriNum']&&(this['pFillBlockPosVertices']=null,this['pFillBlockClrVertices']=null,this['nMaxFillBlockTriNum']=_0x55a3ec),0x0==this['glBlockPosBuffer']&&(this['glBlockPosBuffer']=this['ctx']['createBuffer'](),0x0==this['glBlockPosBuffer']))return _0x4d26c0;if(0x0==this['glBlockClrBuffer']&&(this['glBlockClrBuffer']=this['ctx']['createBuffer'](),0x0==this['glBlockClrBuffer']))return _0x4d26c0;if(null==this['pFillBlockPosVertices']){var _0x5a946e=this['nMaxFillBlockTriNum'];if(this['pFillBlockPosVertices']=new Float32Array(0x3*_0x5a946e*0x3),null==this['pFillBlockPosVertices'])return _0x3d12cf;}if(this['pFillBlockPosVertices']['fill'](0x0),null==this['pFillBlockClrVertices']){var _0x11b260=this['nMaxFillBlockTriNum'];if(this['pFillBlockClrVertices']=new Float32Array(0x4*_0x11b260*0x3),null==this['pFillBlockClrVertices'])return _0x3d12cf;}this['pFillBlockClrVertices']['fill'](0x0);for(var _0x5c54b8=0x0,_0x419f68=0x0,_0x513399=0x0,_0xa7cd13=null,_0x2758c4=null,_0x490836={},_0x5f517a={},_0xabaeff={},_0x5b4ff3=0x0;_0x5b4ff3<_0x17ee38;++_0x5b4ff3){_0x513399=_0x5db47d[_0x5b4ff3]['nPointNum'],_0xa7cd13=_0x5db47d[_0x5b4ff3]['pstPoints'],_0x2758c4=_0x5db47d[_0x5b4ff3]['pstColor'],_0x490836['fX']=(_0xa7cd13[0x0]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x490836['fX']=this['fDstUseLeft']+_0x490836['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0x490836['fX']=0x2*_0x490836['fX']-0x1,_0x490836['fY']=(_0xa7cd13[0x0]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x490836['fY']=this['fDstUseTop']+_0x490836['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0x490836['fY']=0x1-0x2*_0x490836['fY'];for(var _0x5c8d08=0x1;_0x5c8d08<_0x513399-0x1;_0x5c8d08++)_0x5f517a['fX']=(_0xa7cd13[_0x5c8d08]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x5f517a['fX']=this['fDstUseLeft']+_0x5f517a['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0x5f517a['fX']=0x2*_0x5f517a['fX']-0x1,_0x5f517a['fY']=(_0xa7cd13[_0x5c8d08]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x5f517a['fY']=this['fDstUseTop']+_0x5f517a['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0x5f517a['fY']=0x1-0x2*_0x5f517a['fY'],_0xabaeff['fX']=(_0xa7cd13[_0x5c8d08+0x1]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0xabaeff['fX']=this['fDstUseLeft']+_0xabaeff['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0xabaeff['fX']=0x2*_0xabaeff['fX']-0x1,_0xabaeff['fY']=(_0xa7cd13[_0x5c8d08+0x1]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0xabaeff['fY']=this['fDstUseTop']+_0xabaeff['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0xabaeff['fY']=0x1-0x2*_0xabaeff['fY'],this['pFillBlockPosVertices'][_0x5c54b8++]=_0x490836['fX'],this['pFillBlockPosVertices'][_0x5c54b8++]=_0x490836['fY'],this['pFillBlockPosVertices'][_0x5c54b8++]=0x0,this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fR'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fG'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fB'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fA'],this['pFillBlockPosVertices'][_0x5c54b8++]=_0x5f517a['fX'],this['pFillBlockPosVertices'][_0x5c54b8++]=_0x5f517a['fY'],this['pFillBlockPosVertices'][_0x5c54b8++]=0x0,this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fR'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fG'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fB'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fA'],this['pFillBlockPosVertices'][_0x5c54b8++]=_0xabaeff['fX'],this['pFillBlockPosVertices'][_0x5c54b8++]=_0xabaeff['fY'],this['pFillBlockPosVertices'][_0x5c54b8++]=0x0,this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fR'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fG'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fB'],this['pFillBlockClrVertices'][_0x419f68++]=_0x2758c4['fA'];}if(0x0==this['nBlockShaderProgram']&&(this['nBlockShaderProgram']=this['CompileProgram'](_0x48a033,_0x283927),this['nBlockShaderProgram']<=0x0))return _0x4d26c0;this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFunc'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockPosBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pFillBlockPosVertices'],this['ctx']['STATIC_DRAW']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockClrBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pFillBlockClrVertices'],this['ctx']['STATIC_DRAW']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['useProgram'](this['nBlockShaderProgram']);var _0x55229f=this['ctx']['getUniformLocation'](this['nLineShaderProgram'],'bCapture');if(_0x55229f<=0x0)return _0x4d26c0;0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x55229f,0x1):this['ctx']['uniform1i'](_0x55229f,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockPosBuffer']);var _0x5d25b6=this['ctx']['getAttribLocation'](this['nBlockShaderProgram'],'position');this['ctx']['enableVertexAttribArray'](_0x5d25b6),this['ctx']['vertexAttribPointer'](_0x5d25b6,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glBlockClrBuffer']);var _0x59f897=this['ctx']['getAttribLocation'](this['nBlockShaderProgram'],'color');return this['ctx']['enableVertexAttribArray'](_0x59f897),this['ctx']['vertexAttribPointer'](_0x59f897,0x4,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,0x3*_0x55a3ec),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),_0xa87ede;}},{'key':'ComputeLinePoint','value':function(_0x511066,_0x1d3b6f){if(null==_0x511066||_0x1d3b6f<0x1)return _0x31ddcf;if(null==this['pLinePosVertices']||null==this['pLineClrVertices'])return _0x520965;var _0xea88ad=0x0,_0x574a97=0x0;0x1==this['bIsCapturing']?(_0xea88ad=(this['fDstUseRight']-this['fDstUseLeft'])*this['nCaptureWidth'],_0x574a97=(this['fDstUseBottom']-this['fDstUseTop'])*this['nCaptureHeight']):(_0xea88ad=(this['fDstUseRight']-this['fDstUseLeft'])*this['canvas']['width'],_0x574a97=(this['fDstUseBottom']-this['fDstUseTop'])*this['canvas']['height']);for(var _0x347d33=0x0,_0x2b608b=0x0,_0x47870b=0x0,_0x278ab8=0x0,_0x28d930=0x0,_0x4592f5=0x0,_0x3b9b4c=0x0,_0xd4ce8f=0x0,_0xdb8723=0x0,_0xd5d75a=0x0,_0x3cc192=0x0,_0x59d8e0=0x0;_0x59d8e0<_0x1d3b6f;++_0x59d8e0){var _0x3e11c9=[];if(!((_0x3cc192=_0x511066[_0x59d8e0]['nPointNum'])<=0x0)){for(var _0x247d88=0x0;_0x247d88<_0x3cc192;++_0x247d88){var _0x3d4d29={};_0x3d4d29['fX']=(_0x511066[_0x59d8e0]['pstPoints'][_0x247d88]['fX']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x3d4d29['fX']=this['fDstUseLeft']+_0x3d4d29['fX']*(this['fDstUseRight']-this['fDstUseLeft']),_0x3d4d29['fX']=0x2*_0x3d4d29['fX']-0x1,_0x3d4d29['fY']=(_0x511066[_0x59d8e0]['pstPoints'][_0x247d88]['fY']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x3d4d29['fY']=this['fDstUseTop']+_0x3d4d29['fY']*(this['fDstUseBottom']-this['fDstUseTop']),_0x3d4d29['fY']=0x1-0x2*_0x3d4d29['fY'],_0x3e11c9['push'](_0x3d4d29);}if(this['canvas']['width']<=0x0||this['canvas']['height']<=0x0)return _0x4fea1b;if(_0x4592f5=3.5*_0x511066[_0x59d8e0]['nLineWidth']/_0xea88ad,_0x3b9b4c=3.5*_0x511066[_0x59d8e0]['nLineWidth']/_0x574a97,_0x4592f5<=0x0||_0x3b9b4c<=0x0)return _0x31ddcf;var _0x419dfa=_0x511066[_0x59d8e0]['pstColor'];if(null==_0x419dfa||null==_0x419dfa)return _0x31ddcf;for(var _0x2ae122=0x0;_0x2ae122<_0x3cc192-0x1;++_0x2ae122)_0x2b608b=_0x3e11c9[_0x2ae122+0x1]['fX']-_0x3e11c9[_0x2ae122]['fX'],_0x47870b=_0x3e11c9[_0x2ae122+0x1]['fY']-_0x3e11c9[_0x2ae122]['fY'],_0x347d33=Math['sqrt'](_0x2b608b*_0x2b608b+_0x47870b*_0x47870b),Math['abs'](_0x347d33-0x0)<0.000001||(_0x278ab8=-_0x4592f5*_0x47870b/_0x347d33/0x2,_0x28d930=_0x3b9b4c*_0x2b608b/_0x347d33/0x2,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122]['fX']+_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122]['fY']+_0x28d930,this['pLinePosVertices'][_0xdb8723++]=-0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122+0x1]['fX']-_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122+0x1]['fY']-_0x28d930,this['pLinePosVertices'][_0xdb8723++]=0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122]['fX']-_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122]['fY']-_0x28d930,this['pLinePosVertices'][_0xdb8723++]=0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122]['fX']+_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122]['fY']+_0x28d930,this['pLinePosVertices'][_0xdb8723++]=-0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122+0x1]['fX']+_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122+0x1]['fY']+_0x28d930,this['pLinePosVertices'][_0xdb8723++]=-0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122+0x1]['fX']-_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x2ae122+0x1]['fY']-_0x28d930,this['pLinePosVertices'][_0xdb8723++]=0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],_0xd4ce8f+=0x2);0x1==_0x511066[_0x59d8e0]['bLoop']&&0x2<_0x3cc192&&(_0x2b608b=_0x3e11c9[_0x3cc192-0x1]['fX']-_0x3e11c9[0x0]['fX'],_0x47870b=_0x3e11c9[_0x3cc192-0x1]['fY']-_0x3e11c9[0x0]['fY'],_0x347d33=Math['sqrt'](_0x2b608b*_0x2b608b+_0x47870b*_0x47870b),Math['abs'](_0x347d33-0x0)>0.000001&&(_0x278ab8=-_0x4592f5*_0x47870b/_0x347d33/0x2,_0x28d930=_0x3b9b4c*_0x2b608b/_0x347d33/0x2,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[0x0]['fX']+_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[0x0]['fY']+_0x28d930,this['pLinePosVertices'][_0xdb8723++]=-0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x3cc192-0x1]['fX']-_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x3cc192-0x1]['fY']-_0x28d930,this['pLinePosVertices'][_0xdb8723++]=0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[0x0]['fX']-_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[0x0]['fY']-_0x28d930,this['pLinePosVertices'][_0xdb8723++]=0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[0x0]['fX']+_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[0x0]['fY']+_0x28d930,this['pLinePosVertices'][_0xdb8723++]=-0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x3cc192-0x1]['fX']+_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x3cc192-0x1]['fY']+_0x28d930,this['pLinePosVertices'][_0xdb8723++]=-0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x3cc192-0x1]['fX']-_0x278ab8,this['pLinePosVertices'][_0xdb8723++]=_0x3e11c9[_0x3cc192-0x1]['fY']-_0x28d930,this['pLinePosVertices'][_0xdb8723++]=0x1,this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fR'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fG'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fB'],this['pLineClrVertices'][_0xd5d75a++]=_0x419dfa['fA'],_0xd4ce8f+=0x2));}}return 0x0==_0xd4ce8f?_0x31ddcf:(this['nLineTriangleNum']=_0xd4ce8f,_0xa87ede);}},{'key':'SR_DrawLines','value':function(_0xc257fa,_0x5e3a45,_0x5782f2,_0x385965,_0x4f81fe,_0x20842c){var _0x34f8e7=[],_0x36c991={};return _0x36c991['pstPoints']=_0xc257fa,_0x36c991['nPointNum']=_0x5e3a45,_0x36c991['bLoop']=_0x5782f2,_0x36c991['pstColor']=_0x385965,_0x36c991['nLineWidth']=_0x4f81fe,_0x34f8e7['push'](_0x36c991),this['SR_DrawLinesEx'](_0x34f8e7,0x1,_0x5e3a45,_0x20842c);}},{'key':'SR_DrawLinesEx','value':function(_0x5a7518,_0x168ef4,_0x387f93,_0x2a560f){if(null==this['ctx'])return _0x520965;if(null==_0x5a7518||_0x168ef4<0x1||_0x387f93<0x2)return _0x31ddcf;if(0x0==this['nLineShaderProgram']){var _0x2c6b24=this['CompileProgram'](_0x48a033,_0x283927);if(_0x2c6b24<=0x0)return _0x4d26c0;this['nLineShaderProgram']=_0x2c6b24;}if(0x1==_0x2a560f)return this['DrawFillBlock'](_0x5a7518,_0x168ef4,_0x387f93);for(var _0x3b9fda=0x0,_0x20df99=0x0;_0x20df99<_0x168ef4;++_0x20df99){if(null==_0x5a7518[_0x20df99]['pstPoints']||_0x5a7518[_0x20df99]['nPointNum']<=0x1||_0x5a7518[_0x20df99]['nPointNum']>=0x400||_0x5a7518[_0x20df99]['nLineWidth']<=0x0||null==_0x5a7518[_0x20df99]['pstColor'])return _0x31ddcf;_0x3b9fda+=_0x5a7518[_0x20df99]['nPointNum'];}if(_0x3b9fda!=_0x387f93)return _0x31ddcf;if((_0x3b9fda+=_0x168ef4)>this['nMaxPointNum']&&(this['nMaxPointNum']=_0x3b9fda,this['pLinePosVertices']=null,this['pLineClrVertices']=null),null==this['pLinePosVertices']&&(this['pLinePosVertices']=new Float32Array(0x6*this['nMaxPointNum']*0x3),null==this['pLinePosVertices']))return _0x3d12cf;if(this['pLinePosVertices']['fill'](0x0),null==this['pLineClrVertices']&&(this['pLineClrVertices']=new Float32Array(0x6*this['nMaxPointNum']*0x4),null==this['pLineClrVertices']))return _0x3d12cf;if(this['pLineClrVertices']['fill'](0x0),0x0==this['glLinePosBuffer']&&(this['glLinePosBuffer']=this['ctx']['createBuffer'](),0x0==this['glLinePosBuffer']))return _0x4d26c0;if(0x0==this['glLineClrBuffer']&&(this['glLineClrBuffer']=this['ctx']['createBuffer'](),0x0==this['glLineClrBuffer']))return _0x4d26c0;var _0x2729ac=this['ComputeLinePoint'](_0x5a7518,_0x168ef4);if(_0xa87ede!=_0x2729ac)return _0x2729ac;this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFunc'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA']);var _0x539ebb=this['nLineShaderProgram'];this['ctx']['useProgram'](_0x539ebb);var _0x45c49a=this['ctx']['getUniformLocation'](this['nLineShaderProgram'],'bCapture');if(_0x45c49a<=0x0)return _0x4d26c0;0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x45c49a,0x1):this['ctx']['uniform1i'](_0x45c49a,0x0);var _0x3da9fb=this['glLinePosBuffer'],_0x53c565=this['glLineClrBuffer'],_0x5a1957=this['nLineTriangleNum'],_0x3ce2a8=this['pLinePosVertices'],_0x20734b=this['pLineClrVertices'];this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0x3da9fb),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x3ce2a8,this['ctx']['STATIC_DRAW']);var _0x5a578b=this['ctx']['getAttribLocation'](_0x539ebb,'position');this['ctx']['enableVertexAttribArray'](_0x5a578b),this['ctx']['vertexAttribPointer'](_0x5a578b,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0x53c565),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x20734b,this['ctx']['STATIC_DRAW']);var _0x3afb19=this['ctx']['getAttribLocation'](_0x539ebb,'color');return this['ctx']['enableVertexAttribArray'](_0x3afb19),this['ctx']['vertexAttribPointer'](_0x3afb19,0x4,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),0x1==this['bIsCapturing']?this['ctx']['viewport'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight']):this['ctx']['viewport'](0x0,0x0,this['canvas']['width'],this['canvas']['height']),this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,0x3*_0x5a1957),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),_0xa87ede;}},{'key':'SR_DrawFont','value':function(_0x6eab1a,_0x4143dd,_0x2bbea7,_0x2279ac,_0x152461,_0x2b681e,_0xbd83ec,_0x33f12d,_0x5f236b,_0xf708b7,_0x233741){if(null==_0x6eab1a||null==_0x4143dd||null==_0x2bbea7||_0x2279ac<=0x1||_0x152461<=0x1)return _0x31ddcf;if(0x1==_0x2b681e&&null==_0xbd83ec)return _0x31ddcf;var _0x3b9af0=[],_0x35b6ae={};return _0x35b6ae['bBackground']=_0x2b681e,_0x35b6ae['nFontWidth']=_0x2279ac,_0x35b6ae['nFontHeight']=_0x152461,_0x35b6ae['pstBGColor']=_0xbd83ec,_0x35b6ae['pstFontColor']=_0x2bbea7,_0x35b6ae['pString']=_0x6eab1a,_0x35b6ae['pstStartPos']=_0x4143dd,_0x35b6ae['fRotateAngle']=_0x33f12d,_0x35b6ae['pFontFamily']=_0x5f236b,_0x35b6ae['textAlign']=_0xf708b7,_0x35b6ae['textBaseline']=_0x233741,_0x3b9af0['push'](_0x35b6ae),this['SR_DrawFontEx'](_0x3b9af0,0x1);}},{'key':'SR_DrawFontEx','value':function(_0x1ac011,_0x304601){if(null==this['ctx'])return _0x520965;if(0x0>_0x304601||null==_0x1ac011)return _0x31ddcf;var _0x1a5d2f,_0x3f4f85,_0x5cc926=0x0,_0x1efaee=0x0;if(0x1==this['bIsCapturing']){if(0x0==this['nCaptureWidth']||0x0==this['nCaptureHeight'])return _0x520965;_0x5cc926=Math['round']((this['fDstUseRight']-this['fDstUseLeft'])*this['nCaptureWidth']),_0x1efaee=Math['round']((this['fDstUseBottom']-this['fDstUseTop'])*this['nCaptureHeight']);}else _0x5cc926=Math['round']((this['fDstUseRight']-this['fDstUseLeft'])*this['canvas']['width']),_0x1efaee=Math['round']((this['fDstUseBottom']-this['fDstUseTop'])*this['canvas']['height']);if(_0x5cc926=_0x5cc926+0x4-_0x5cc926%0x4,_0x1efaee=_0x1efaee+0x4-_0x1efaee%0x4,this['nDrawFontWidth']==_0x5cc926&&this['nDrawFontHeight']==_0x1efaee||(this['pFontColorBuffer']=null,this['nFontColorTexture']=0x0,this['nDrawFontWidth']=_0x5cc926,this['nDrawFontHeight']=_0x1efaee,null!=this['textCanvas']&&(this['textCanvas']['remove'](),this['textCanvas']=null,this['textCanvasCtx']=null)),0x0==this['nFontColorTexture']){if(this['nFontColorTexture']=this['ctx']['createTexture'](),0x0==this['nFontColorTexture'])return _0x4d26c0;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nFontColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}if(null==this['textCanvas']){if(this['textCanvas']=document['createElement']('canvas'),null==this['textCanvas'])return _0x13126c;if(this['textCanvasCtx']=this['textCanvas']['getContext']('2d'),null==this['textCanvasCtx'])return _0x13126c;this['textCanvasCtx']['canvas']['width']=this['nDrawFontWidth'],this['textCanvasCtx']['canvas']['height']=this['nDrawFontHeight'];}this['textCanvasCtx']['clearRect'](0x0,0x0,this['nDrawFontWidth'],this['nDrawFontHeight']);for(var _0x29913c=0x0;_0x29913c<_0x304601;++_0x29913c){var _0x597442=_0x1ac011[_0x29913c]['nFontWidth'],_0x51713c=_0x1ac011[_0x29913c]['nFontHeight'];0x1==this['bIsCapturing']&&(_0x597442=Math['round'](0.7*this['nCaptureWidth']/this['canvas']['width']*_0x597442),_0x51713c=Math['round'](0.7*this['nCaptureHeight']/this['canvas']['height']*_0x51713c));var _0x20deee=_0x597442<_0x51713c?_0x597442:_0x51713c;this['textCanvasCtx']['font']=_0x20deee['toString']()+'px\\x20'+_0x1ac011[_0x29913c]['pFontFamily'],null==_0x1ac011[_0x29913c]['textAlign']||null==_0x1ac011[_0x29913c]['textAlign']?this['textCanvasCtx']['textAlign']='left':this['textCanvasCtx']['textAlign']=_0x1ac011[_0x29913c]['textAlign'],null==_0x1ac011[_0x29913c]['textBaseline']||null==_0x1ac011[_0x29913c]['textBaseline']?this['textCanvasCtx']['textBaseline']='top':this['textCanvasCtx']['textBaseline']=_0x1ac011[_0x29913c]['textBaseline'];var _0x5823b0=parseInt(0xff*_0x1ac011[_0x29913c]['pstFontColor']['fR']),_0x6ef32b=parseInt(0xff*_0x1ac011[_0x29913c]['pstFontColor']['fG']),_0x398c18=parseInt(0xff*_0x1ac011[_0x29913c]['pstFontColor']['fB']),_0x2437c7=_0x5823b0<0x10?'0'+_0x5823b0['toString'](0x10):_0x5823b0['toString'](0x10),_0x5becf5=_0x6ef32b<0x10?'0'+_0x6ef32b['toString'](0x10):_0x6ef32b['toString'](0x10),_0x1ea421=_0x398c18<0x10?'0'+_0x398c18['toString'](0x10):_0x398c18['toString'](0x10);this['textCanvasCtx']['fillStyle']='#'+_0x2437c7+_0x5becf5+_0x1ea421,this['textCanvasCtx']['globalAlpha']=_0x1ac011[_0x29913c]['pstFontColor']['fA'];var _0x4eff32=_0x1ac011[_0x29913c]['pstStartPos']['fX']*this['nDrawFontWidth'],_0x11c46b=_0x1ac011[_0x29913c]['pstStartPos']['fY']*this['nDrawFontHeight'];this['textCanvasCtx']['save'](),this['textCanvasCtx']['translate'](_0x4eff32,_0x11c46b),this['textCanvasCtx']['rotate'](_0x1ac011[_0x29913c]['fRotateAngle']*Math['PI']/0xb4),this['textCanvasCtx']['fillText'](_0x1ac011[_0x29913c]['pString'],0x0,0x0),this['textCanvasCtx']['restore']();}if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nFontColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],this['textCanvasCtx']['canvas']),0x0==this['nFontShaderProgram']&&(this['nFontShaderProgram']=this['CompileProgram']('\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20position;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20\\x20texCoord;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec4\\x20\\x20pp;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.x\\x20\\x20=\\x20position.x;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20\\x20=\\x20position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.y\\x20=\\x20-position.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.z\\x20\\x20=\\x200.1;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position.w\\x20\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20pp\\x20=\\x20texCoord;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a','\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20pp.st);\\x0a\\x20\\x20\\x20\\x20}\\x0a'),this['nFontShaderProgram']<=0x0))return _0x4d26c0;0x1==this['bIsCapturing']?(_0x1a5d2f=this['nCaptureWidth']+0x4-this['nCaptureWidth']%0x4,_0x3f4f85=this['nCaptureHeight']+0x4-this['nCaptureHeight']%0x4):(_0x1a5d2f=this['canvas']['width']+0x4-this['canvas']['width']%0x4,_0x3f4f85=this['canvas']['height']+0x4-this['canvas']['height']%0x4),this['ctx']['viewport'](0x0,0x0,_0x1a5d2f,_0x3f4f85),this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFunc'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA']),this['ctx']['useProgram'](this['nFontShaderProgram']);var _0x2103fe=this['ctx']['getUniformLocation'](this['nFontShaderProgram'],'bCapture');if(_0x2103fe<=0x0)return _0x4d26c0;0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x2103fe,0x1):this['ctx']['uniform1i'](_0x2103fe,0x0),this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nFontColorTexture']);var _0x352925=this['ctx']['getUniformLocation'](this['nFontShaderProgram'],'texture');this['ctx']['uniform1i'](_0x352925,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x2cf17b=this['ctx']['getAttribLocation'](this['nFontShaderProgram'],'position');this['ctx']['enableVertexAttribArray'](_0x2cf17b),this['ctx']['vertexAttribPointer'](_0x2cf17b,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x58c4a5=this['ctx']['getAttribLocation'](this['nFontShaderProgram'],'texCoord');return this['ctx']['enableVertexAttribArray'](_0x58c4a5),this['ctx']['vertexAttribPointer'](_0x58c4a5,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['drawArrays'](this['ctx']['TRIANGLE_FAN'],0x0,0x4),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],null),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),_0xa87ede;}},{'key':'SR_DrawImage','value':function(_0x1c393e,_0x3cb83a,_0x19a57a,_0x2b70fe,_0x384884,_0x562e06){if(null==this['ctx'])return _0x520965;if(null==_0x1c393e||_0x3cb83a<=0x0||_0x19a57a<=0x0||null==_0x2b70fe||_0x562e06<0x0||_0x562e06>0x1)return _0x31ddcf;if(this['nDrawImageWidth']=_0x3cb83a,this['nDrawImageHeight']=_0x19a57a,0x0==this['glImagePosBuffer']&&(this['glImagePosBuffer']=this['ctx']['createBuffer'](),0x0==this['glImagePosBuffer']))return _0x4d26c0;if(0x0==this['glImageClrBuffer']&&(this['glImageClrBuffer']=this['ctx']['createBuffer'](),0x0==this['glImageClrBuffer']))return _0x4d26c0;if(null==this['pImageClrVertices']){if(this['pImageClrVertices']=new Float32Array(0xc),null==this['pImageClrVertices'])return _0x3d12cf;this['pImageClrVertices'][0x0]=0x0,this['pImageClrVertices'][0x1]=0x0,this['pImageClrVertices'][0x2]=0x0,this['pImageClrVertices'][0x3]=0x1,this['pImageClrVertices'][0x4]=0x1,this['pImageClrVertices'][0x5]=0x0,this['pImageClrVertices'][0x6]=0x1,this['pImageClrVertices'][0x7]=0x0,this['pImageClrVertices'][0x8]=0x0,this['pImageClrVertices'][0x9]=0x1,this['pImageClrVertices'][0xa]=0x1,this['pImageClrVertices'][0xb]=0x1;}var _0x24a466={},_0x254ae9={};if(_0x24a466['fLeft']=(_0x2b70fe['fLeft']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x24a466['fRight']=(_0x2b70fe['fRight']-this['fSrcUseLeft'])/(this['fSrcUseRight']-this['fSrcUseLeft']),_0x24a466['fTop']=(_0x2b70fe['fTop']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x24a466['fBottom']=(_0x2b70fe['fBottom']-this['fSrcUseTop'])/(this['fSrcUseBottom']-this['fSrcUseTop']),_0x254ae9['fLeft']=this['fDstUseLeft']+_0x24a466['fLeft']*(this['fDstUseRight']-this['fDstUseLeft']),_0x254ae9['fRight']=this['fDstUseLeft']+_0x24a466['fRight']*(this['fDstUseRight']-this['fDstUseLeft']),_0x254ae9['fTop']=this['fDstUseTop']+_0x24a466['fTop']*(this['fDstUseBottom']-this['fDstUseTop']),_0x254ae9['fBottom']=this['fDstUseTop']+_0x24a466['fBottom']*(this['fDstUseBottom']-this['fDstUseTop']),null==this['pImagePosVertices']&&(this['pImagePosVertices']=new Float32Array(0xc),null==this['pImagePosVertices']))return _0x3d12cf;switch(this['pImagePosVertices']['fill'](0x0),this['pImagePosVertices'][0x0]=0x2*_0x254ae9['fLeft']-0x1,this['pImagePosVertices'][0x1]=0x1-0x2*_0x254ae9['fTop'],this['pImagePosVertices'][0x2]=0x2*_0x254ae9['fLeft']-0x1,this['pImagePosVertices'][0x3]=0x1-0x2*_0x254ae9['fBottom'],this['pImagePosVertices'][0x4]=0x2*_0x254ae9['fRight']-0x1,this['pImagePosVertices'][0x5]=0x1-0x2*_0x254ae9['fTop'],this['pImagePosVertices'][0x6]=0x2*_0x254ae9['fRight']-0x1,this['pImagePosVertices'][0x7]=0x1-0x2*_0x254ae9['fTop'],this['pImagePosVertices'][0x8]=0x2*_0x254ae9['fLeft']-0x1,this['pImagePosVertices'][0x9]=0x1-0x2*_0x254ae9['fBottom'],this['pImagePosVertices'][0xa]=0x2*_0x254ae9['fRight']-0x1,this['pImagePosVertices'][0xb]=0x1-0x2*_0x254ae9['fBottom'],0x1==this['bIsCapturing']?this['ctx']['viewport'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight']):this['ctx']['viewport'](0x0,0x0,this['canvas']['width'],this['canvas']['height']),this['ctx']['enable'](this['ctx']['BLEND']),this['ctx']['blendFunc'](this['ctx']['SRC_ALPHA'],this['ctx']['ONE_MINUS_SRC_ALPHA']),_0x384884){case _0x3b8155:if(null==this['nImageColorTexture']){if(this['nImageColorTexture']=this['ctx']['createTexture'](),0x0==this['nImageColorTexture'])return _0x4d26c0;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['nDrawImageWidth'],this['nDrawImageHeight'],0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x1c393e),0x0==this['nImageShaderProgram']){var _0x39f044=this['CompileProgram'](_0x2a3c39,_0x350ff5);if(_0x39f044<=0x0)return _0x4d26c0;this['nImageShaderProgram']=_0x39f044;}break;case _0x2818bf:if(null==this['nImageColorTexture']){if(this['nImageColorTexture']=this['ctx']['createTexture'](),0x0==this['nImageColorTexture'])return _0x4d26c0;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGB'],this['nDrawImageWidth'],this['nDrawImageHeight'],0x0,this['ctx']['RGB'],this['ctx']['UNSIGNED_SHORT_5_6_5'],_0x1c393e),0x0==this['nImageShaderProgram']){var _0x42c057=this['CompileProgram'](_0x2a3c39,'\\x0a\\x20\\x20\\x20\\x20precision\\x20mediump\\x20float;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x20\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAlpha;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20\\x0a\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20pp.st);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor.a\\x20*=\\x20fAlpha;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a');if(_0x42c057<=0x0)return _0x4d26c0;this['nImageShaderProgram']=_0x42c057;}break;case _0x58bd8b:for(var _0x22b758=0x0;_0x22b758<0x3;_0x22b758++){if(this['nImageColorTextures'][_0x22b758]=this['ctx']['createTexture'](),0x0==this['nImageColorTextures'][_0x22b758])return _0x4d26c0;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTextures'][_0x22b758]),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTextures'][0x0]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],this['nDrawImageWidth'],this['nDrawImageHeight'],0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x1c393e),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTextures'][0x1]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],this['nDrawImageWidth']/0x2,this['nDrawImageHeight']/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x1c393e+this['nDrawImageWidth']*this['nDrawImageHeight']*0x5/0x4),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTextures'][0x2]),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['LUMINANCE'],this['nDrawImageWidth']/0x2,this['nDrawImageHeight']/0x2,0x0,this['ctx']['LUMINANCE'],this['ctx']['UNSIGNED_BYTE'],_0x1c393e+this['nDrawImageWidth']*this['nDrawImageHeight']),0x0==this['nImageShaderProgram']){var _0x826ac7=this['CompileProgram'](_0x2a3c39,'\\x0a\\x20\\x20\\x20\\x20precision\\x20mediump\\x20float;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Ytexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Utexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20Vtexture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAlpha;\\x0a\\x20\\x20\\x20\\x20varying\\x20lowp\\x20vec4\\x20pp;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,\\x20g,\\x20b,\\x20y,\\x20u,\\x20v;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y\\x20=\\x20texture2D(Ytexture,\\x20pp.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u\\x20=\\x20texture2D(Utexture,\\x20pp.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v\\x20=\\x20texture2D(Vtexture,\\x20pp.st).r;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20y\\x20=\\x201.1643\\x20*\\x20(y\\x20-\\x200.0625);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20u\\x20=\\x20u\\x20-\\x200.5;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v\\x20=\\x20v\\x20-\\x200.5;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20y\\x20+\\x201.5958\\x20*\\x20v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20y\\x20-\\x200.39173\\x20*\\x20u\\x20-\\x200.81290\\x20*\\x20v;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20y\\x20+\\x202.017\\x20*\\x20u;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r,\\x20g,\\x20b,\\x20fAlpha);\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a');if(_0x826ac7<=0x0)return _0x4d26c0;this['nImageShaderProgram']=_0x826ac7;}break;case _0xa01ff6:if(null==this['nImageColorTexture']){if(this['nImageColorTexture']=this['ctx']['createTexture'](),0x0==this['nImageColorTexture'])return _0x4d26c0;this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']);}this['ctx']['useProgram'](this['videoShaderProgram']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x23716d=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'xy');if(_0x23716d<0x0)return _0x4d26c0;this['ctx']['vertexAttribPointer'](_0x23716d,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x23716d),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x47a4a9=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'uv');if(_0x47a4a9<0x0)return _0x4d26c0;if(this['ctx']['vertexAttribPointer'](_0x47a4a9,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x47a4a9),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['useProgram'](null),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['nDrawImageWidth'],this['nDrawImageHeight'],0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x1c393e),0x0==this['nImageShaderProgram']){var _0x1889b9=this['CompileProgram'](_0x2a3c39,_0x350ff5);if(_0x1889b9<=0x0)return _0x4d26c0;this['nImageShaderProgram']=_0x1889b9;}break;default:return _0x86aef9;}var _0x39944f=this['nImageShaderProgram'];this['ctx']['useProgram'](_0x39944f);var _0x35df32=this['ctx']['getUniformLocation'](this['nImageShaderProgram'],'bCapture');if(_0x35df32<=0x0)return _0x4d26c0;0x1==this['bIsCapturing']?this['ctx']['uniform1i'](_0x35df32,0x1):this['ctx']['uniform1i'](_0x35df32,0x0),this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nImageColorTexture']);var _0x370d63=this['ctx']['getUniformLocation'](this['nImageShaderProgram'],'texture');this['ctx']['uniform1i'](_0x370d63,0x0),_0x370d63=this['ctx']['getUniformLocation'](this['nImageShaderProgram'],'fAlpha'),this['ctx']['uniform1f'](_0x370d63,_0x562e06),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glImagePosBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pImagePosVertices'],this['ctx']['STATIC_DRAW']);var _0x3daade=this['ctx']['getAttribLocation'](this['nImageShaderProgram'],'position');this['ctx']['enableVertexAttribArray'](_0x3daade),this['ctx']['vertexAttribPointer'](_0x3daade,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['glImageClrBuffer']),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],this['pImageClrVertices'],this['ctx']['STATIC_DRAW']);var _0x44ee1a=this['ctx']['getAttribLocation'](this['nImageShaderProgram'],'texCoord');return this['ctx']['enableVertexAttribArray'](_0x44ee1a),this['ctx']['vertexAttribPointer'](_0x44ee1a,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,0x6),this['ctx']['useProgram'](null),this['ctx']['disable'](this['ctx']['BLEND']),_0xa87ede;}},{'key':'SR_AddSubPort','value':function(_0x1c4dff){var _0x29f273,_0x1303a3,_0x30143d=_0x3cf544;if(null==this['ctx'])return _0x30143d;if(null!=this['pFishParamManager']?_0x30143d=this['pFishParamManager']['GetFECPort'](_0x1c4dff):_0x1c4dff==_0x186ff9['SR_DE_NULL']&&(_0x30143d=0x0),_0x30143d==_0x3cf544)return _0x3cf544;switch(this['nFECPort']=_0x30143d,_0x1c4dff){case _0x186ff9['SR_DE_NULL']:_0x29f273=_0x1f462c,this['enPixelFormat']==_0xa01ff6?_0x1303a3='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20highp\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fWndWidth;\\x0auniform\\x20float\\x20fWndHeight;\\x0auniform\\x20float\\x20fBrightness;\\x0auniform\\x20float\\x20fHue;\\x0auniform\\x20float\\x20fSaturation;\\x0auniform\\x20float\\x20fContrast;\\x0auniform\\x20float\\x20fSharpness;\\x0auniform\\x20int\\x20nPostProc;\\x0avec3\\x20rgb2hsv(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20K\\x20=\\x20vec4(0.0,\\x20-1.0\\x20/\\x203.0,\\x202.0\\x20/\\x203.0,\\x20-1.0);\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20p\\x20=\\x20c.g\\x20<\\x20c.b\\x20?\\x20vec4(c.bg,\\x20K.wz)\\x20:\\x20vec4(c.gb,\\x20K.xy);\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20q\\x20=\\x20c.r\\x20<\\x20p.x\\x20?\\x20vec4(p.xyw,\\x20c.r)\\x20:\\x20vec4(c.r,\\x20p.yzx);\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20q.x\\x20-\\x20min(q.w,\\x20q.y);\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20e\\x20=\\x201.0e-10;\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20vec3(abs(q.z\\x20+\\x20(q.w\\x20-\\x20q.y)\\x20/\\x20(6.0\\x20*\\x20d\\x20+\\x20e)),\\x20d\\x20/\\x20(q.x\\x20+\\x20e),\\x20q.x);\\x20\\x0a}\\x20\\x0avec3\\x20hsv2rgb(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20K\\x20=\\x20vec4(1.0,\\x202.0\\x20/\\x203.0,\\x201.0\\x20/\\x203.0,\\x203.0);\\x20\\x0a\\x20\\x20\\x20\\x20vec3\\x20p\\x20=\\x20abs(fract(c.xxx\\x20+\\x20K.xyz)\\x20*\\x206.0\\x20-\\x20K.www);\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20c.z\\x20*\\x20mix(K.xxx,\\x20clamp(p\\x20-\\x20K.xxx,\\x200.0,\\x201.0),\\x20c.y);\\x20\\x0a}\\x20\\x0avec3\\x20sharpen()\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec3\\x20sharpenColor;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20offWidth\\x20=\\x201.0\\x20/\\x20fWndWidth;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20offHeight\\x20=\\x201.0\\x20/\\x20fWndHeight;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20tempSharpness\\x20=\\x20fSharpness\\x20*\\x20100.0;\\x20\\x0a\\x20\\x20\\x20\\x20vec2\\x20uv\\x20\\x20\\x20\\x20\\x20=\\x20v_uv;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20\\x20=\\x20(1.0\\x20+\\x204.0\\x20*\\x20tempSharpness)\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(-offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(0,\\x20offHeight);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(0,\\x20-offHeight);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20texture2D(texture,\\x20uv).rgb;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20return\\x20sharpenColor;\\x20\\x0a}\\x20\\x0avoid\\x20main(void)\\x20\\x0a{\\x0a\\x20\\x20\\x20\\x20if(1\\x20==\\x20nPostProc)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec3\\x20fragRGB\\x20=\\x20sharpen();\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//sharpen\\x20锐度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec3\\x20fragHSV\\x20=\\x20rgb2hsv(fragRGB);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragHSV.x\\x20=\\x20fragHSV.x\\x20+\\x20fHue;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//hue\\x20色度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragHSV.y\\x20=\\x20fragHSV.y\\x20*\\x20(fSaturation\\x20+\\x201.0);\\x20\\x20\\x20\\x20//saturation\\x20饱和度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20hsv2rgb(fragHSV);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(fBrightness\\x20>\\x200.0)\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//brightness\\x20亮度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20fragRGB\\x20+\\x20(1.0\\x20-\\x20fragRGB)\\x20*\\x20fBrightness;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20fragRGB\\x20+\\x20fragRGB\\x20*\\x20fBrightness;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tempContrast\\x20=\\x20fContrast\\x20>\\x200.0\\x20?\\x20fContrast\\x20*\\x2010.0\\x20:\\x20fContrast;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20((fragRGB\\x20-\\x200.5)\\x20*\\x20max(tempContrast\\x20+\\x201.0,\\x200.0))\\x20+\\x200.5;\\x20\\x20\\x20\\x20\\x20\\x20//contrast\\x20对比度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(fragRGB,\\x201.0);\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20v_uv);\\x0a\\x20\\x20\\x20\\x20}\\x0a}\\x0a':this['enPixelFormat']!=_0x58bd8b&&this['enPixelFormat']!=_0x264b64||(_0x1303a3='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20highp\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20Ytexture;\\x0auniform\\x20sampler2D\\x20Utexture;\\x0auniform\\x20sampler2D\\x20Vtexture;\\x0auniform\\x20float\\x20fWndWidth;\\x0auniform\\x20float\\x20fWndHeight;\\x0auniform\\x20float\\x20fBrightness;\\x0auniform\\x20float\\x20fHue;\\x0auniform\\x20float\\x20fSaturation;\\x0auniform\\x20float\\x20fContrast;\\x0auniform\\x20float\\x20fSharpness;\\x0auniform\\x20int\\x20nPostProc;\\x0avec3\\x20rgb;\\x0avec3\\x20yuv2rgb(float\\x20y,\\x20float\\x20u,\\x20float\\x20v)\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x0a\\x20\\x20\\x20\\x20y\\x20=\\x201.1643\\x20*\\x20(y\\x20-\\x200.0625);\\x20\\x0a\\x20\\x20\\x20\\x20u\\x20=\\x20u\\x20-\\x200.5;\\x20\\x0a\\x20\\x20\\x20\\x20v\\x20=\\x20v\\x20-\\x200.5;\\x20\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20y\\x20+\\x201.5958\\x20*\\x20v;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20y\\x20-\\x200.39173\\x20*\\x20u\\x20-\\x200.81290\\x20*\\x20v;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20y\\x20+\\x202.017\\x20*\\x20u;\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20vec3(r,\\x20g,\\x20b);\\x0a}\\x0avec3\\x20rgb2hsv(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20K\\x20=\\x20vec4(0.0,\\x20-1.0\\x20/\\x203.0,\\x202.0\\x20/\\x203.0,\\x20-1.0);\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20p\\x20=\\x20c.g\\x20<\\x20c.b\\x20?\\x20vec4(c.bg,\\x20K.wz)\\x20:\\x20vec4(c.gb,\\x20K.xy);\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20q\\x20=\\x20c.r\\x20<\\x20p.x\\x20?\\x20vec4(p.xyw,\\x20c.r)\\x20:\\x20vec4(c.r,\\x20p.yzx);\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20q.x\\x20-\\x20min(q.w,\\x20q.y);\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20e\\x20=\\x201.0e-10;\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20vec3(abs(q.z\\x20+\\x20(q.w\\x20-\\x20q.y)\\x20/\\x20(6.0\\x20*\\x20d\\x20+\\x20e)),\\x20d\\x20/\\x20(q.x\\x20+\\x20e),\\x20q.x);\\x20\\x0a}\\x20\\x0a\\x0avec3\\x20hsv2rgb(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec4\\x20K\\x20=\\x20vec4(1.0,\\x202.0\\x20/\\x203.0,\\x201.0\\x20/\\x203.0,\\x203.0);\\x20\\x0a\\x20\\x20\\x20\\x20vec3\\x20p\\x20=\\x20abs(fract(c.xxx\\x20+\\x20K.xyz)\\x20*\\x206.0\\x20-\\x20K.www);\\x20\\x0a\\x20\\x20\\x20\\x20return\\x20c.z\\x20*\\x20mix(K.xxx,\\x20clamp(p\\x20-\\x20K.xxx,\\x200.0,\\x201.0),\\x20c.y);\\x20\\x0a}\\x20\\x0a\\x0avec3\\x20sharpen(vec3\\x20c)\\x20\\x0a{\\x20\\x0a\\x20\\x20\\x20\\x20vec3\\x20sharpenColor;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20sharpenColorY;\\x0a\\x20\\x20\\x20\\x20float\\x20sharpenColorU;\\x0a\\x20\\x20\\x20\\x20float\\x20sharpenColorV;\\x0a\\x20\\x20\\x20\\x20float\\x20offWidth\\x20\\x20=\\x201.0\\x20/\\x20fWndWidth;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20offHeight\\x20=\\x201.0\\x20/\\x20fWndHeight;\\x20\\x0a\\x20\\x20\\x20\\x20float\\x20tempSharpness\\x20=\\x20fSharpness\\x20*\\x20100.0;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20=\\x20(1.0\\x20+\\x204.0\\x20*\\x20tempSharpness)\\x20*\\x20c;\\x0a\\x0a\\x20\\x20\\x20\\x20vec2\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(-offWidth,\\x200);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x0a\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(0,\\x20offHeight);\\x0a\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x0a\\x20\\x20\\x20\\x20uv\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20=\\x20v_uv\\x20+\\x20vec2(0,\\x20-offHeight);\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorY\\x20=\\x20texture2D(Ytexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorU\\x20=\\x20texture2D(Utexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColorV\\x20=\\x20texture2D(Vtexture,\\x20uv).r;\\x20\\x0a\\x20\\x20\\x20\\x20sharpenColor\\x20-=\\x20tempSharpness\\x20*\\x20\\x20yuv2rgb(sharpenColorY,\\x20sharpenColorU,\\x20sharpenColorV);\\x0a\\x0a\\x20\\x20\\x20\\x20return\\x20sharpenColor;\\x20\\x0a}\\x20\\x0avoid\\x20main(void)\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20y,\\x20u,\\x20v;\\x0a\\x20\\x20\\x20\\x20y\\x20=\\x20texture2D(Ytexture,\\x20v_uv).r;\\x0a\\x20\\x20\\x20\\x20u\\x20=\\x20texture2D(Utexture,\\x20v_uv).r;\\x0a\\x20\\x20\\x20\\x20v\\x20=\\x20texture2D(Vtexture,\\x20v_uv).r;\\x0a\\x20\\x20\\x20\\x20rgb\\x20=\\x20yuv2rgb(y,\\x20u,\\x20v);\\x0a\\x20\\x20\\x20\\x20if(1\\x20==\\x20nPostProc)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec3\\x20fragRGB\\x20=\\x20sharpen(rgb);\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//sharpen\\x20锐度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec3\\x20fragHSV\\x20=\\x20rgb2hsv(fragRGB);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragHSV.x\\x20=\\x20fragHSV.x\\x20+\\x20fHue;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//hue\\x20色度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragHSV.y\\x20=\\x20fragHSV.y\\x20*\\x20(fSaturation\\x20+\\x201.0);\\x20\\x20\\x20\\x20//saturation\\x20饱和度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20hsv2rgb(fragHSV);\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(fBrightness\\x20>\\x200.0)\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20//brightness\\x20亮度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20fragRGB\\x20+\\x20(1.0\\x20-\\x20fragRGB)\\x20*\\x20fBrightness;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20fragRGB\\x20+\\x20fragRGB\\x20*\\x20fBrightness;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tempContrast\\x20=\\x20fContrast\\x20>\\x200.0\\x20?\\x20fContrast\\x20*\\x2010.0\\x20:\\x20fContrast;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fragRGB\\x20=\\x20((fragRGB\\x20-\\x200.5)\\x20*\\x20max(tempContrast\\x20+\\x201.0,\\x200.0))\\x20+\\x200.5;\\x20\\x20\\x20\\x20\\x20\\x20//contrast\\x20对比度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(fragRGB,\\x201.0);\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(rgb,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a}\\x0a'),this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_ORIGINAL']:_0x29f273=_0x1f462c,_0x1303a3='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fRX1;\\x0auniform\\x20float\\x20fRX2;\\x0auniform\\x20float\\x20fRY1;\\x0auniform\\x20float\\x20fRY2;\\x0auniform\\x20int\\x20bBlack;\\x20\\x0auniform\\x20int\\x20bCut;\\x0a\\x0avoid\\x20main()\\x0a{\\x20\\x0a\\x09float\\x20r,g,b;\\x0a\\x09vec4\\x20origin;\\x0a\\x0a\\x09float\\x20\\x20w;\\x0a\\x09float\\x20\\x20h;\\x0a\\x09float\\x20\\x20fCenterX;\\x0a\\x09float\\x20\\x20fCenterY;\\x0a\\x09float\\x20\\x20fRadius;\\x0a\\x09w\\x20=\\x201.0;\\x0a\\x09h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x09fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x09fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x09fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x09float\\x20\\x20leftCut\\x20=\\x200.0;\\x0a\\x09float\\x20\\x20rightCut\\x20=\\x201.0;\\x0a\\x09float\\x20\\x20topCut\\x20=\\x200.0;\\x0a\\x09float\\x20\\x20bottomCut\\x20=\\x201.0;\\x0a\\x09if(bCut\\x20==\\x201)\\x0a\\x09{\\x0a\\x09\\x09if(fRX1\\x20>\\x200.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09leftCut\\x20=\\x20fRX1;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRX2\\x20<\\x201.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09rightCut\\x20=\\x20fRX2;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRY1\\x20>\\x200.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09topCut\\x20=\\x20fRY1;\\x0a\\x09\\x09}\\x0a\\x09\\x09if(fRY2\\x20<\\x201.0)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09bottomCut\\x20=\\x20fRY2;\\x0a\\x09\\x09}\\x0a\\x09}\\x0a\\x09origin.s\\x20=\\x20v_uv.s\\x20*\\x20(rightCut-leftCut)\\x20+\\x20leftCut;\\x0a\\x09origin.t\\x20=\\x20v_uv.t\\x20*\\x20(bottomCut-topCut)\\x20+\\x20topCut;\\x0a\\x0a\\x09r\\x20=\\x20texture2D(texture,\\x20origin.st).r;\\x20\\x0a\\x09g\\x20=\\x20texture2D(texture,\\x20origin.st).g;\\x20\\x0a\\x09b\\x20=\\x20texture2D(texture,\\x20origin.st).b;\\x20\\x0a\\x0a\\x09if(bBlack\\x20==\\x201)\\x0a\\x09{\\x0a\\x09\\x09float\\x20tmpX,\\x20tmpY;\\x0a\\x09\\x09tmpX\\x20=\\x20origin.s\\x20*\\x20w;\\x20\\x0a\\x09\\x09tmpY\\x20=\\x20origin.t\\x20*\\x20h;\\x20\\x0a\\x09\\x09float\\x20d2\\x20=\\x20(tmpX-fCenterX)*(tmpX-fCenterX)\\x20+\\x20(tmpY-fCenterY)*(tmpY-fCenterY);\\x0a\\x09\\x09if(d2\\x20>\\x20fRadius*fRadius)\\x0a\\x09\\x09{\\x0a\\x09\\x09\\x09r\\x20=\\x200.0;\\x20\\x0a\\x09\\x09\\x09g\\x20=\\x200.0;\\x20\\x0a\\x09\\x09\\x09b\\x20=\\x200.0;\\x20\\x0a\\x09\\x09}\\x0a\\x09}\\x0a\\x0a\\x09gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:_0x29f273=_0x1f462c,_0x1303a3='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fHAngleCos;\\x0auniform\\x20float\\x20fHAngleSin;\\x0auniform\\x20float\\x20fVAngleCos;\\x0auniform\\x20float\\x20fVAngleSin;\\x0auniform\\x20float\\x20fZoom;\\x0a\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20v_uv.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x200.5\\x20-\\x20v_uv.t;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t\\x20+\\x20z2*z2);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20tmp*origin2.s\\x20/\\x20dnew\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20tmp*origin2.t\\x20/\\x20dnew\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20((origin2.s*fHAngleCos\\x20-\\x20origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20(-(origin2.s*fHAngleSin\\x20+\\x20origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:_0x29f273=_0x1f462c,_0x1303a3='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x20\\x20\\x0auniform\\x20float\\x20fHAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fHAngleSin;\\x20\\x0auniform\\x20float\\x20fVAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fZoom;\\x0a\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<Բ��ʵ������\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<�뾶ʵ�ʳ���\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20v_uv.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x20v_uv.t\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin2.s*origin2.s\\x20+\\x20origin2.t*origin2.t\\x20+\\x20z2*z2);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20tmp*origin2.s\\x20/\\x20dnew\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20tmp*origin2.t\\x20/\\x20dnew\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20((origin2.s*fHAngleCos\\x20-\\x20origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20((origin2.s*fHAngleSin\\x20+\\x20origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PTZ_WALL']:_0x29f273=_0x1f462c,_0x1303a3='\\x0aprecision\\x20mediump\\x20float;\\x0avarying\\x20vec2\\x20v_uv;\\x0auniform\\x20sampler2D\\x20texture;\\x0auniform\\x20float\\x20fHAngleCos;\\x0auniform\\x20float\\x20fHAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleCos;\\x20\\x20\\x0auniform\\x20float\\x20fVAngleSin;\\x20\\x20\\x0auniform\\x20float\\x20fZoom;\\x0a\\x0auniform\\x20float\\x20fRX1;\\x20\\x0auniform\\x20float\\x20fRX2;\\x20\\x0auniform\\x20float\\x20fRY1;\\x20\\x0auniform\\x20float\\x20fRY2;\\x20\\x0a\\x0avoid\\x20main()\\x0a{\\x0a\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin1;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin2;\\x0a\\x20\\x20\\x20\\x20vec4\\x20origin3;\\x0a\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z1;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z2;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20z3;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20dnew;\\x0a\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<Բ��ʵ������\\x0a\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<�뾶ʵ�ʳ���\\x0a\\x0a\\x20\\x20\\x20\\x20origin1.s\\x20=\\x20v_uv.s\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20origin1.t\\x20=\\x20v_uv.t\\x20-\\x200.5;\\x0a\\x20\\x20\\x20\\x20z1\\x20=\\x20fZoom\\x20;\\x0a\\x0a\\x20\\x20\\x20\\x20origin2.s\\x20=\\x20origin1.s\\x20;\\x0a\\x20\\x20\\x20\\x20origin2.t\\x20=\\x20(origin1.t*fVAngleCos\\x20+\\x20z1*fVAngleSin);\\x0a\\x20\\x20\\x20\\x20z2\\x20=\\x20z1*fVAngleCos\\x20-\\x20origin1.t*fVAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20origin3.s\\x20=\\x20origin2.s*fHAngleCos\\x20+\\x20z2*fHAngleSin\\x20;\\x0a\\x20\\x20\\x20\\x20origin3.t\\x20=\\x20origin2.y;\\x0a\\x20\\x20\\x20\\x20z3\\x20=\\x20z2*fHAngleCos\\x20-\\x20origin2.x*fHAngleSin;\\x0a\\x0a\\x20\\x20\\x20\\x20dnew\\x20=\\x20sqrt(origin3.s*origin3.s\\x20+\\x20origin3.t*origin3.t)\\x20;\\x0a\\x20\\x20\\x20\\x20float\\x20d\\x20=\\x20sqrt(origin3.s*origin3.s\\x20+\\x20origin3.t*origin3.t\\x20+\\x20z3*z3);\\x0a\\x20\\x20\\x20\\x20float\\x20theta\\x20=\\x20asin(dnew/d);\\x0a\\x20\\x20\\x20\\x20float\\x20tmp\\x20=\\x20theta\\x20/\\x201.5707963\\x20*\\x200.5;\\x0a\\x20\\x20\\x20\\x20result.s\\x20=\\x20(tmp*origin3.s\\x20/\\x20dnew\\x20*\\x20fRadius\\x20*\\x202.0\\x20+\\x20fCenterX)/w;\\x0a\\x20\\x20\\x20\\x20result.t\\x20=\\x20(tmp*origin3.t\\x20/\\x20dnew\\x20*\\x20fRadius\\x20*\\x202.0\\x20+\\x20fCenterY)/h;\\x0a\\x0a\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a}\\x20\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:_0x29f273=_0x1f462c,_0x1303a3='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x20v_uv.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20v_uv.t\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r,\\x20g,\\x20b,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:_0x29f273=_0x1f462c,_0x1303a3='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20newpp;\\x20\\x20///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(v_uv.t\\x20\\x20<=\\x200.5)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0\\x20+\\x200.5;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20v_uv.t\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20(v_uv.t\\x20-\\x200.5)\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x20newpp.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20newpp.t\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:_0x29f273=_0x1f462c,_0x1303a3='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x201.0\\x20-\\x20v_uv.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20(1.0\\x20-\\x20v_uv.t)\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']:_0x29f273=_0x1f462c,_0x1303a3='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x0a\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20thetabase;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20newpp;\\x20\\x20///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if\\x20(v_uv.t\\x20\\x20<=\\x200.5)\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20v_uv.t\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.s\\x20=\\x20\\x20v_uv.s\\x20/\\x202.0\\x20+\\x200.5;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20newpp.t\\x20=\\x20\\x20(v_uv.t\\x20-\\x200.5)\\x20*\\x202.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20fMax\\x20=\\x200.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0\\x20||\\x20fRY2\\x20>\\x201.0\\x20||\\x20fRX1\\x20<\\x200.0\\x20||\\x20fRY1\\x20<\\x200.0)\\x20///<如果不是一个完整的圆\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20fMax)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fMax\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20topCut\\x20=\\x20fMax\\x20/\\x20fRadius;\\x20\\x20\\x20///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20bottomCut\\x20=\\x200.8;\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20///<为矫正效果,最终矫正图固定切掉下面一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x201.0\\x20-\\x20newpp.s;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20(bottomCut\\x20-\\x20topCut)\\x20*\\x20(1.0\\x20-\\x20newpp.t)\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20thetabase\\x20=\\x206.2831853\\x20*\\x20origin.s\\x20+\\x20fAngle;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20fRadius\\x20*\\x20(1.0\\x20-\\x20origin.t);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20(fCenterX\\x20-\\x20d*sin(thetabase))\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20(fCenterY\\x20+\\x20d*cos(thetabase))\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x20\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:_0x29f273=_0x1f462c,_0x1303a3='\\x0a\\x20\\x20\\x20\\x20precision\\x20highp\\x20float;\\x0a\\x20\\x20\\x20\\x20varying\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX1;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRX2;\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY1;\\x20\\x0a\\x20\\x20\\x20\\x20uniform\\x20float\\x20fRY2;\\x20\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20void\\x20main()\\x0a\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20r,g,b;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20origin;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20vec4\\x20result;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20d;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterX;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fCenterY;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20w\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20h\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x20(fRY2\\x20-\\x20fRY1);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterX\\x20=\\x20(fRX1\\x20+\\x20fRX2)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<圆心实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fCenterY\\x20=\\x20(fRY1\\x20+\\x20fRY2)\\x20/\\x202.0\\x20*\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20fRadius\\x20=\\x20(fRX2\\x20-\\x20fRX1)\\x20/\\x202.0\\x20*\\x20w;\\x20\\x20\\x20\\x20\\x20///<半径实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20defaultTopCut\\x20=\\x200.1;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20defaultBottomCut\\x20=\\x200.9;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20leftCut\\x20=\\x200.0;\\x20\\x20\\x20\\x20///<当图像中圆不完整时需要切掉无图像部分,即使图像完整,为了效果,也要切掉上下固定的一部分\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20rightCut\\x20=\\x201.0;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20topCut\\x20=\\x20defaultTopCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20\\x20bottomCut\\x20=\\x20defaultBottomCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRX1\\x20*\\x20w;\\x20///<左边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20leftCut\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRX2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRX2\\x20-\\x201.0)\\x20*\\x20w;\\x20///<右边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20rightCut\\x20=\\x201.0\\x20-\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY1\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20-fRY1\\x20*\\x20h;\\x20///<上边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x20defaultTopCut)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20topCut\\x20=\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20topCut\\x20=\\x20defaultTopCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(fRY2\\x20>\\x201.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20(fRY2\\x20-\\x201.0)\\x20*\\x20h;\\x20///<下边超出图像部分最大实际长度\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20tmp\\x20=\\x20tmp\\x20/\\x20(2.0*fRadius);\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(tmp\\x20>\\x201.0\\x20-\\x20defaultBottomCut)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20bottomCut\\x20=\\x201.0\\x20-\\x20tmp;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20else\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20bottomCut\\x20=\\x20defaultBottomCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.s\\x20=\\x20v_uv.s\\x20*\\x20(rightCut-leftCut)\\x20+\\x20leftCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20origin.t\\x20=\\x20v_uv.t\\x20*\\x20(bottomCut-topCut)\\x20+\\x20topCut;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmpx\\x20=\\x20origin.s\\x20*\\x202.0\\x20*\\x20fRadius\\x20+\\x20fCenterX\\x20-\\x20fRadius;\\x20///<纹理坐标转化为原图上的实际坐标\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20float\\x20tmpy\\x20=\\x20origin.t\\x20*\\x202.0\\x20*\\x20fRadius\\x20+\\x20fCenterY\\x20-\\x20fRadius;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20d\\x20=\\x20sqrt(fRadius*fRadius\\x20-\\x20(tmpy-fCenterY)*(tmpy-fCenterY));\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.s\\x20=\\x20((tmpx-fCenterX)\\x20*\\x20d\\x20/\\x20fRadius\\x20+\\x20fCenterX)\\x20/\\x20w;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20result.t\\x20=\\x20tmpy\\x20/\\x20h;\\x0a\\x20\\x20\\x20\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x20texture2D(texture,\\x20result.st).r;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x20texture2D(texture,\\x20result.st).g;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x20texture2D(texture,\\x20result.st).b;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(result.s\\x20>\\x201.0\\x20||\\x20result.t\\x20>\\x201.0\\x20||\\x20result.s\\x20<\\x200.0\\x20||\\x20result.t\\x20<\\x200.0)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20r\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20g\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20b\\x20=\\x200.0;\\x20\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20vec4(r\\x20,g\\x20,b\\x20,\\x201.0);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x1;break;case _0x186ff9['SR_DE_FISH_SEMISPHERE']:case _0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:_0x1c4dff==_0x186ff9['SR_DE_FISH_SEMISPHERE']&&(this['bCullBack']=!0x0),_0x29f273='\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec4\\x20xy;\\x0a\\x20\\x20\\x20\\x20attribute\\x20vec2\\x20uv;\\x0a\\x20\\x20\\x20\\x20varying\\x20highp\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20int\\x20bCapture;\\x0a\\x0a\\x20\\x20\\x20\\x20uniform\\x20mat4\\x20matProj;\\x0a\\x20\\x20\\x20\\x20uniform\\x20mat4\\x20matView;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_Position\\x20=\\x20matProj\\x20*\\x20matView\\x20*\\x20xy;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v_uv\\x20=\\x20uv;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20if(bCapture\\x20==\\x201)\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20v_uv.y\\x20=\\x201.0\\x20-\\x20uv.y;\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20}\\x0a\\x20\\x20\\x20\\x20}\\x0a',_0x1303a3='\\x0a\\x20\\x20\\x20\\x20varying\\x20highp\\x20vec2\\x20v_uv;\\x0a\\x20\\x20\\x20\\x20uniform\\x20sampler2D\\x20texture;\\x0a\\x20\\x20\\x20\\x20void\\x20main(void)\\x20{\\x0a\\x20\\x20\\x20\\x20\\x20\\x20\\x20\\x20gl_FragColor\\x20=\\x20texture2D(texture,\\x20v_uv);\\x0a\\x20\\x20\\x20\\x20}\\x0a',this['b3DPort']=!0x0;break;default:return _0x86aef9;}var _0x4822c4=this['CompileProgram'](_0x29f273,_0x1303a3);if(_0x4822c4<=0x0)return _0x4d26c0;this['videoShaderProgram']=_0x4822c4;var _0x2e497f=null,_0x2f9f99=null,_0x2e0613=_0xa87ede;if(0x0==this['b3DPort'])_0x2e497f=new Float32Array([-0x1,-0x1,0x0,-0x1,0x1,0x0,0x1,0x1,0x0,0x1,-0x1,0x0]),_0x2f9f99=new Float32Array([0x0,0x1,0x0,0x0,0x1,0x0,0x1,0x1]);else{var _0x21dd60={},_0x8748d5=!0x1;if(null==this['pFishParamManager'])return _0x520965;for(var _0x3c7177=0x0;_0x3c7177<_0x379995;++_0x3c7177)if(_0x3c7177!=_0x30143d&&_0xa87ede==this['pFishParamManager']['GetRenderParam'](_0x3c7177,_0x21dd60)){_0x8748d5=!0x0;break;}var _0x15cab7=0x0,_0x19ebf4=0x1,_0x2e5f56=0x0,_0x4e7ce6=0x1;if(0x1==_0x8748d5&&(_0x15cab7=_0x21dd60['fRXLeft'],_0x19ebf4=_0x21dd60['fRXRight'],_0x2e5f56=_0x21dd60['fRYTop'],_0x4e7ce6=_0x21dd60['fRYBottom']),_0x1c4dff==_0x186ff9['SR_DE_FISH_SEMISPHERE'])_0x2e0613=this['_CreateSemiSphere'](_0x15cab7,_0x19ebf4,_0x2e5f56,_0x4e7ce6),_0x2e497f=this['pSemiSpherePos'],_0x2f9f99=this['pSemiSphereTex'];else{if(_0x1c4dff==_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']||_0x1c4dff==_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR'])_0x2e0613=this['_CreateCylinder'](_0x1c4dff,_0x15cab7,_0x19ebf4,_0x2e5f56,_0x4e7ce6,0x2,0x2),_0x2e497f=this['pCylinderPos'],_0x2f9f99=this['pCylinderTex'];else{if(_0x1c4dff!=_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']&&_0x1c4dff!=_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])return _0x86aef9;0x0==_0x8748d5?_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0x1c4dff?(_0x15cab7=0.05,_0x19ebf4=0.95,_0x2e5f56=-0.3,_0x4e7ce6=1.3):_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==_0x1c4dff&&(_0x15cab7=-0.16,_0x19ebf4=1.16,_0x2e5f56=0.005,_0x4e7ce6=0.995):_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0x1c4dff?(_0x21dd60['fRYTop']>0x0||_0x21dd60['fRYBottom']<0x1)&&(_0x15cab7=0.05,_0x19ebf4=0.95,_0x2e5f56=-0.3,_0x4e7ce6=1.3):_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==_0x1c4dff&&(_0x21dd60['fRXLeft']>0x0||_0x21dd60['fRXRight']<0x1)&&(_0x15cab7=-0.16,_0x19ebf4=1.16,_0x2e5f56=0.005,_0x4e7ce6=0.995),_0x2e0613=this['_CreateArcSphere'](_0x1c4dff,_0x15cab7,_0x19ebf4,_0x2e5f56,_0x4e7ce6),_0x2e497f=this['pArcSpherePos'],_0x2f9f99=this['pArcSphereTex'];}}if(_0x2e0613!=_0xa87ede)return _0x2e0613;var _0x20506b={};if((_0x2e0613=this['pFishParamManager']['GetFishParam'](this['nFECPort'],_0x20506b))!=_0xa87ede)return _0x2e0613;if(_0x20506b['nFishParamType']=_0x392c27,_0x20506b['fRXLeft']=_0x15cab7,_0x20506b['fRXRight']=_0x19ebf4,_0x20506b['fRYTop']=_0x2e5f56,_0x20506b['fRYBottom']=_0x4e7ce6,this['pFishParamManager']['SetFishParam'](this['nFECPort'],_0x20506b),_0x2e0613!=_0xa87ede)return _0x2e0613;}if(null==_0x2e497f||null==_0x2f9f99)return _0x86aef9;var _0xc42bb=this['ctx']['createBuffer']();this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0xc42bb),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x2e497f,this['ctx']['STATIC_DRAW']),this['vertexPosBuffer']=_0xc42bb;var _0x116e2e=this['ctx']['createBuffer']();return this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],_0x116e2e),this['ctx']['bufferData'](this['ctx']['ARRAY_BUFFER'],_0x2f9f99,this['ctx']['STATIC_DRAW']),this['texturePosBuffer']=_0x116e2e,this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),0x0==this['b3DPort']&&(_0x2e497f=null,_0x2f9f99=null),_0x2e0613=this['InitCamera'](_0x1c4dff),_0xa87ede!=_0x2e0613?_0x2e0613:(this['enDisplayEffect']=_0x1c4dff,this['nFECPort']);}},{'key':'SR_DelSubPort','value':function(_0x431502){return null==this['ctx']?_0x520965:(null!=this['pFishParamManager']&&this['nFECPort']==_0x431502&&this['pFishParamManager']['FreeFECPort'](this['nFECPort']),this['enDisplayEffect']=_0x186ff9['SR_DE_NULL'],0x0!=this['videoShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['videoShaderProgram']),this['videoShaderProgram']=0x0),0x0!=this['vertexPosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['vertexPosBuffer']),this['vertexPosBuffer']=0x0),0x0!=this['texturePosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['texturePosBuffer']),this['texturePosBuffer']=0x0),this['nMaxPointNum']=0x0,this['pLinePosVertices']=null,this['pLineClrVertices']=null,0x0!=this['glLinePosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glLinePosBuffer']),this['glLinePosBuffer']=0x0),0x0!=this['glLineTexBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glLineTexBuffer']),this['glLineTexBuffer']=0x0),this['nLineTriangleNum']=0x0,0x0!=this['nLineShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['nLineShaderProgram']),this['nLineShaderProgram']=0x0),this['pFillBlockPosVertices']=null,this['pFillBlockClrVertices']=null,this['nMaxFillBlockTriNum']=0x0,0x0!=this['glBlockPosBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glBlockPosBuffer']),this['glBlockPosBuffer']=0x0),0x0!=this['glBlockClrBuffer']&&null!=this['ctx']&&(this['ctx']['deleteBuffer'](this['glBlockClrBuffer']),this['glBlockClrBuffer']=0x0),0x0!=this['nBlockShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['nBlockShaderProgram']),this['nBlockShaderProgram']=0x0),this['nDrawFontWidth']=0x0,this['nDrawFontHeight']=0x0,0x0!=this['nFontColorTexture']&&null!=this['ctx']&&(this['ctx']['deleteTexture'](this['nFontColorTexture']),this['nFontColorTexture']=0x0),this['pFontColorBuffer']=0x0,0x0!=this['nFontShaderProgram']&&null!=this['ctx']&&(this['ctx']['deleteProgram'](this['nFontShaderProgram']),this['nFontShaderProgram']=0x0),0x0!=this['nCaptureRTTex']&&(this['ctx']['deleteTexture'](this['nCaptureRTTex']),this['nCaptureRTTex']=0x0),0x0!=this['nCaptureFBO']&&(this['ctx']['deleteFramebuffer'](this['nCaptureFBO']),this['nCaptureFBO']=0x0),0x0!=this['nCaptureDepthbuffer']&&(this['ctx']['deleteRenderbuffer'](this['nCaptureDepthbuffer']),this['nCaptureDepthbuffer']=0x0),this['bCaptureResInit']=!0x1,this['pSemiSpherePos']=null,this['pSemiSphereTex']=null,this['nSemiSpherePosNum']=0x0,this['nSemiSpherePosSize']=0x0,this['nSemiSphereTexSize']=0x0,this['pCylinderPos']=null,this['pCylinderTex']=null,this['nCylinderPosNum']=0x0,this['nCylinderPosSize']=0x0,this['nCylinderTexSize']=0x0,this['fCylinderHeight']=0x0,this['fCylinderRadius']=0x0,this['pArcSpherePos']=null,this['pArcSphereTex']=null,this['nArcSpherePosNum']=0x0,this['nArcSpherePosSize']=0x0,this['nArcSphereTexSize']=0x0,this['b3DPort']=!0x1,this['pCamera']=null,this['fRotateX']=0x0,this['fRotateY']=0x0,this['fScale']=0x0,this['pfuncCBIn']=null,this['pfuncCBOut']=null,this['pUserIn']=null,this['pUserOut']=null,this['ctx']['disable'](this['ctx']['CULL_FACE']),this['ctx']['disable'](this['ctx']['DEPTH_TEST']),_0xa87ede);}},{'key':'SR_GetFishParam','value':function(_0x5ba2c1){return null==_0x5ba2c1?_0x31ddcf:null==this['pFishParamManager']?_0x520965:this['pFishParamManager']['GetFishParam'](this['nFECPort'],_0x5ba2c1);}},{'key':'SR_SetFishParam','value':function(_0x231728){return null==_0x231728?_0x31ddcf:null==this['pFishParamManager']?_0x520965:this['pFishParamManager']['SetFishParam'](this['nFECPort'],_0x231728);}},{'key':'SR_SetDisplayRect','value':function(_0x55eb5a,_0x1c555c,_0x1e932c,_0x799fda,_0x1b6d8f){if(null==this['ctx'])return _0x520965;var _0x41f710=_0x55eb5a,_0x5590bb=_0x1c555c,_0x536b65=_0x55eb5a+_0x1e932c,_0x1e96da=_0x1c555c+_0x799fda,_0x5d50c7=null,_0x135ea7=null;switch(_0x1b6d8f){case _0xe9e464:if(this['frameDisplayWidth']>0x0&&this['frameDisplayHeight']>0x0){if(this['fSrcUseLeft']=_0x41f710/this['frameDisplayWidth'],this['fSrcUseLeft']<0x0?this['fSrcUseLeft']=0x0:this['fSrcUseLeft']>0x1&&(this['fSrcUseLeft']=0x1),this['fSrcUseTop']=_0x5590bb/this['frameDisplayHeight'],this['fSrcUseTop']<0x0?this['fSrcUseTop']=0x0:this['fSrcUseTop']>0x1&&(this['fSrcUseTop']=0x1),this['fSrcUseRight']=_0x536b65/this['frameDisplayWidth'],this['fSrcUseRight']<0x0?this['fSrcUseRight']=0x0:this['fSrcUseRight']>0x1&&(this['fSrcUseRight']=0x1),this['fSrcUseBottom']=_0x1e96da/this['frameDisplayHeight'],this['fSrcUseBottom']<0x0?this['fSrcUseBottom']=0x0:this['fSrcUseBottom']>0x1&&(this['fSrcUseBottom']=0x1),this['fSrcUseLeft']>=this['fSrcUseRight']||this['fSrcUseTop']>=this['fSrcUseBottom'])return _0x31ddcf;_0x5d50c7=new Float32Array([this['fSrcUseLeft'],this['fSrcUseBottom'],this['fSrcUseLeft'],this['fSrcUseTop'],this['fSrcUseRight'],this['fSrcUseTop'],this['fSrcUseRight'],this['fSrcUseBottom']]);}else _0x5d50c7=new Float32Array([0x0,0x1,0x0,0x0,0x1,0x0,0x1,0x1]);this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']),this['ctx']['bufferSubData'](this['ctx']['ARRAY_BUFFER'],0x0,_0x5d50c7),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),_0x5d50c7=null;break;case _0x206403:if(this['frameDisplayWidth']>0x0&&this['frameDisplayHeight']>0x0){if(this['fDstUseLeft']=_0x41f710/this['frameDisplayWidth'],this['fDstUseLeft']<0x0?this['fDstUseLeft']=0x0:this['fDstUseLeft']>0x1&&(this['fDstUseLeft']=0x1),this['fDstUseTop']=_0x5590bb/this['frameDisplayHeight'],this['fDstUseTop']<0x0?this['fDstUseTop']=0x0:this['fDstUseTop']>0x1&&(this['fDstUseTop']=0x1),this['fDstUseRight']=_0x536b65/this['frameDisplayWidth'],this['fDstUseRight']<0x0?this['fDstUseRight']=0x0:this['fDstUseRight']>0x1&&(this['fDstUseRight']=0x1),this['fDstUseBottom']=_0x1e96da/this['frameDisplayHeight'],this['fDstUseBottom']<0x0?this['fDstUseBottom']=0x0:this['fDstUseBottom']>0x1&&(this['fDstUseBottom']=0x1),this['fDstUseLeft']>=this['fDstUseRight']||this['fDstUseTop']>=this['fDstUseBottom'])return _0x31ddcf;(_0x135ea7=new Float32Array(0xc))[0x0]=0x2*this['fDstUseLeft']-0x1,_0x135ea7[0x1]=0x1-0x2*this['fDstUseBottom'],_0x135ea7[0x2]=0x0,_0x135ea7[0x3]=0x2*this['fDstUseLeft']-0x1,_0x135ea7[0x4]=0x1-0x2*this['fDstUseTop'],_0x135ea7[0x5]=0x0,_0x135ea7[0x6]=0x2*this['fDstUseRight']-0x1,_0x135ea7[0x7]=0x1-0x2*this['fDstUseTop'],_0x135ea7[0x8]=0x0,_0x135ea7[0x9]=0x2*this['fDstUseRight']-0x1,_0x135ea7[0xa]=0x1-0x2*this['fDstUseBottom'],_0x135ea7[0xb]=0x0,this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']),this['ctx']['bufferSubData'](this['ctx']['ARRAY_BUFFER'],0x0,_0x135ea7),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null),_0x135ea7=null;}break;default:return _0x86aef9;}return _0xa87ede;}},{'key':'SR_Destroy','value':function(){if(null==this['ctx'])return _0x520965;this['frameDisplayWidth']=0x0,this['frameDisplayHeight']=0x0,this['pFrameData']=null;for(var _0x45dbcd=0x0;_0x45dbcd<this['nTextureNum'];_0x45dbcd++)0x0!=this['nSurfaceTexture'][_0x45dbcd]&&null!=this['ctx']&&(this['ctx']['deleteTexture'](this['nSurfaceTexture'][_0x45dbcd]),this['nSurfaceTexture'][_0x45dbcd]=0x0);return this['SR_DelSubPort'](this['nFECPort']),this['ctx']['getExtension']('WEBGL_lose_context')['loseContext'](),this['ctx']=null,this['onlySupportedWebGL1']=!0x1,this['bAntialias']=!0x1,this['bRecreateTex']=!0x0,this['pFishParamManager']=null,_0xa87ede;}},{'key':'SR_SetCanvasSize','value':function(_0x270c96,_0x520a5b){return this['canvas']['width']=_0x270c96,this['canvas']['height']=_0x520a5b,_0xa87ede;}},{'key':'SR_GetCanvasSize','value':function(){return console['log']('canvas\\x20width:'+this['canvas']['width']+',height:'+this['canvas']['height']),_0xa87ede;}},{'key':'SR_SetAntialias','value':function(_0x3f93ac){return 0x1==this['onlySupportedWebGL1']?_0x86aef9:(this['bAntialias']!=_0x3f93ac&&(this['bRecreateTex']=!0x0,this['bAntialias']=_0x3f93ac),_0xa87ede);}},{'key':'SR_SetPTZDisplayMode','value':function(_0x56d449){return null==this['pFishParamManager']?_0x520965:this['pFishParamManager']['SetPTZDisplayMode'](_0x56d449);}},{'key':'SR_SetFishParamManager','value':function(_0x52f915){return null!=this['pFishParamManager']?_0x86aef9:(this['pFishParamManager']=_0x52f915,_0xa87ede);}},{'key':'_CreateSemiSphere','value':function(_0x13c3d3,_0x3c0eef,_0xfcb7c8,_0x4b4979){if(null!=this['pSemiSpherePos']||null!=this['pSemiSphereTex'])return _0x520965;this['pSemiSpherePos']=new Float32Array(0xa8c0),this['pSemiSphereTex']=new Float32Array(0x7080);for(var _0x306be6=(_0x3c0eef-_0x13c3d3)/(_0x4b4979-_0xfcb7c8),_0x115894=(_0x3c0eef-_0x13c3d3)/0x2*0x1,_0x18964f=6.2831852/0x3c,_0x399e01=0.0392699075,_0x29408f=0x0,_0xa1b95a=0x0,_0x190a15=0x0,_0x2823ad=0x0;_0x2823ad<0x3c;++_0x2823ad)for(var _0x305025=0x0;_0x305025<0x28;++_0x305025){var _0x55b496=_0x2823ad*_0x18964f;0x0==_0x2823ad&&(_0x29408f=_0x55b496);var _0x163c07=0x3b==_0x2823ad?_0x29408f:(_0x2823ad+0x1)*_0x18964f,_0x38fa2b=-_0x305025*_0x399e01,_0x33daa7=-(_0x305025+0x1)*_0x399e01,_0x461f11=void 0x0,_0x4105f8=void 0x0;this['pSemiSpherePos'][_0xa1b95a]=-0x1*Math['cos'](_0x38fa2b)*Math['cos'](_0x55b496),this['pSemiSpherePos'][_0xa1b95a+0x1]=0x1*Math['sin'](_0x38fa2b),this['pSemiSpherePos'][_0xa1b95a+0x2]=-0x1*Math['cos'](_0x38fa2b)*Math['sin'](_0x55b496),_0x4105f8=0.5-0.5*(0x1+_0x38fa2b/1.5707963)*Math['sin'](_0x55b496),_0x461f11=0.5-0.5*(0x1+_0x38fa2b/1.5707963)*Math['cos'](_0x55b496),this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x461f11*_0x115894+0x1*_0x13c3d3)/0x1,this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x4105f8*_0x115894+_0xfcb7c8*_0x306be6)/_0x306be6,_0xa1b95a+=0x3,this['pSemiSpherePos'][_0xa1b95a]=-0x1*Math['cos'](_0x33daa7)*Math['cos'](_0x55b496),this['pSemiSpherePos'][_0xa1b95a+0x1]=0x1*Math['sin'](_0x33daa7),this['pSemiSpherePos'][_0xa1b95a+0x2]=-0x1*Math['cos'](_0x33daa7)*Math['sin'](_0x55b496),_0x4105f8=0.5-0.5*(0x1+_0x33daa7/1.5707963)*Math['sin'](_0x55b496),_0x461f11=0.5-0.5*(0x1+_0x33daa7/1.5707963)*Math['cos'](_0x55b496),this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x461f11*_0x115894+0x1*_0x13c3d3)/0x1,this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x4105f8*_0x115894+_0xfcb7c8*_0x306be6)/_0x306be6,_0xa1b95a+=0x3,this['pSemiSpherePos'][_0xa1b95a]=-0x1*Math['cos'](_0x38fa2b)*Math['cos'](_0x163c07),this['pSemiSpherePos'][_0xa1b95a+0x1]=0x1*Math['sin'](_0x38fa2b),this['pSemiSpherePos'][_0xa1b95a+0x2]=-0x1*Math['cos'](_0x38fa2b)*Math['sin'](_0x163c07),_0x4105f8=0.5-0.5*(0x1+_0x38fa2b/1.5707963)*Math['sin'](_0x163c07),_0x461f11=0.5-0.5*(0x1+_0x38fa2b/1.5707963)*Math['cos'](_0x163c07),this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x461f11*_0x115894+0x1*_0x13c3d3)/0x1,this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x4105f8*_0x115894+_0xfcb7c8*_0x306be6)/_0x306be6,_0xa1b95a+=0x3,this['pSemiSpherePos'][_0xa1b95a]=-0x1*Math['cos'](_0x38fa2b)*Math['cos'](_0x163c07),this['pSemiSpherePos'][_0xa1b95a+0x1]=0x1*Math['sin'](_0x38fa2b),this['pSemiSpherePos'][_0xa1b95a+0x2]=-0x1*Math['cos'](_0x38fa2b)*Math['sin'](_0x163c07),_0x4105f8=0.5-0.5*(0x1+_0x38fa2b/1.5707963)*Math['sin'](_0x163c07),_0x461f11=0.5-0.5*(0x1+_0x38fa2b/1.5707963)*Math['cos'](_0x163c07),this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x461f11*_0x115894+0x1*_0x13c3d3)/0x1,this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x4105f8*_0x115894+_0xfcb7c8*_0x306be6)/_0x306be6,_0xa1b95a+=0x3,this['pSemiSpherePos'][_0xa1b95a]=-0x1*Math['cos'](_0x33daa7)*Math['cos'](_0x55b496),this['pSemiSpherePos'][_0xa1b95a+0x1]=0x1*Math['sin'](_0x33daa7),this['pSemiSpherePos'][_0xa1b95a+0x2]=-0x1*Math['cos'](_0x33daa7)*Math['sin'](_0x55b496),_0x4105f8=0.5-0.5*(0x1+_0x33daa7/1.5707963)*Math['sin'](_0x55b496),_0x461f11=0.5-0.5*(0x1+_0x33daa7/1.5707963)*Math['cos'](_0x55b496),this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x461f11*_0x115894+0x1*_0x13c3d3)/0x1,this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x4105f8*_0x115894+_0xfcb7c8*_0x306be6)/_0x306be6,_0xa1b95a+=0x3,this['pSemiSpherePos'][_0xa1b95a]=-0x1*Math['cos'](_0x33daa7)*Math['cos'](_0x163c07),this['pSemiSpherePos'][_0xa1b95a+0x1]=0x1*Math['sin'](_0x33daa7),this['pSemiSpherePos'][_0xa1b95a+0x2]=-0x1*Math['cos'](_0x33daa7)*Math['sin'](_0x163c07),_0x4105f8=0.5-0.5*(0x1+_0x33daa7/1.5707963)*Math['sin'](_0x163c07),_0x461f11=0.5-0.5*(0x1+_0x33daa7/1.5707963)*Math['cos'](_0x163c07),this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x461f11*_0x115894+0x1*_0x13c3d3)/0x1,this['pSemiSphereTex'][_0x190a15++]=(0x2*_0x4105f8*_0x115894+_0xfcb7c8*_0x306be6)/_0x306be6,_0xa1b95a+=0x3;}return this['nSemiSpherePosNum']=_0xa1b95a/0x3,this['nSemiSpherePosSize']=0x3,this['nSemiSphereTexSize']=0x2,_0xa87ede;}},{'key':'_CreateCylinder','value':function(_0x44cf2d,_0x21ffe7,_0x381786,_0x4528b6,_0x2f5aa3,_0x739606,_0x3b790c){if(null!=this['pCylinderPos']||null!=this['pCylinderTex'])return _0x520965;if(Math['abs'](_0x739606-0x0)<_0x4a23c6)this['fCylinderHeight']=0x2;else{if(_0x739606<0.5||_0x739606>0x6)return _0x31ddcf;this['fCylinderHeight']=_0x739606;}if(Math['abs'](_0x3b790c-0x0)<_0x4a23c6)this['fCylinderRadius']=_0x44cf2d==_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']||_0x44cf2d==_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']?0x2:0x1;else{if(_0x3b790c<0.5||_0x3b790c>0x4)return _0x31ddcf;this['fCylinderRadius']=_0x3b790c;}if(this['pCylinderPos']=new Float32Array(0xa8c0),this['pCylinderTex']=new Float32Array(0x7080),null==this['pCylinderPos']||null==this['pCylinderTex'])return this['pCylinderPos']=null,this['pCylinderTex']=null,_0x3d12cf;for(var _0xcbf3c9=(_0x381786-_0x21ffe7)/(_0x2f5aa3-_0x4528b6),_0x48eb5f=(_0x381786-_0x21ffe7)/0x2*0x1,_0x5485a5=6.2831852/0x3c,_0x26550d=this['fCylinderHeight']/_0x40743d,_0xc19360=0x0,_0xcec4ef=0x0,_0x48d549=0x0;_0x48d549<0x3c;++_0x48d549)for(var _0x481b39=0x0;_0x481b39<_0x40743d;++_0x481b39){var _0x4f2b3f=_0x48d549*_0x5485a5,_0x788b55=(_0x48d549+0x1)*_0x5485a5,_0x23966a=void 0x0,_0xda562b=void 0x0;this['pCylinderPos'][_0xc19360]=-this['fCylinderRadius']*Math['sin'](_0x4f2b3f),this['pCylinderPos'][_0xc19360+0x1]=this['fCylinderHeight']/0x2-_0x481b39*_0x26550d,this['pCylinderPos'][_0xc19360+0x2]=-this['fCylinderRadius']*Math['cos'](_0x4f2b3f),_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==_0x44cf2d||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x44cf2d?(_0x23966a=0.5+(0.1+0.01*_0x481b39)*Math['sin'](_0x4f2b3f),_0xda562b=0.5+(0.1+0.01*_0x481b39)*Math['cos'](_0x4f2b3f)):(_0x23966a=0.5-(0.5-0.01*_0x481b39)*Math['sin'](_0x4f2b3f),_0xda562b=0.5+(0.5-0.01*_0x481b39)*Math['cos'](_0x4f2b3f)),this['pCylinderTex'][_0xcec4ef++]=(0x2*_0x23966a*_0x48eb5f+0x1*_0x21ffe7)/0x1,this['pCylinderTex'][_0xcec4ef++]=(0x2*_0xda562b*_0x48eb5f+_0x4528b6*_0xcbf3c9)/_0xcbf3c9,_0xc19360+=0x3,this['pCylinderPos'][_0xc19360]=-this['fCylinderRadius']*Math['sin'](_0x4f2b3f),this['pCylinderPos'][_0xc19360+0x1]=this['fCylinderHeight']/0x2-(_0x481b39+0x1)*_0x26550d,this['pCylinderPos'][_0xc19360+0x2]=-this['fCylinderRadius']*Math['cos'](_0x4f2b3f),_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==_0x44cf2d||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x44cf2d?(_0x23966a=0.5+(0.1+0.01*(_0x481b39+0x1))*Math['sin'](_0x4f2b3f),_0xda562b=0.5+(0.1+0.01*(_0x481b39+0x1))*Math['cos'](_0x4f2b3f)):(_0x23966a=0.5-(0.5-0.01*(_0x481b39+0x1))*Math['sin'](_0x4f2b3f),_0xda562b=0.5+(0.5-0.01*(_0x481b39+0x1))*Math['cos'](_0x4f2b3f)),this['pCylinderTex'][_0xcec4ef++]=(0x2*_0x23966a*_0x48eb5f+0x1*_0x21ffe7)/0x1,this['pCylinderTex'][_0xcec4ef++]=(0x2*_0xda562b*_0x48eb5f+_0x4528b6*_0xcbf3c9)/_0xcbf3c9,_0xc19360+=0x3,this['pCylinderPos'][_0xc19360]=-this['fCylinderRadius']*Math['sin'](_0x788b55),this['pCylinderPos'][_0xc19360+0x1]=this['fCylinderHeight']/0x2-_0x481b39*_0x26550d,this['pCylinderPos'][_0xc19360+0x2]=-this['fCylinderRadius']*Math['cos'](_0x788b55),_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==_0x44cf2d||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x44cf2d?(_0x23966a=0.5+(0.1+0.01*_0x481b39)*Math['sin'](_0x788b55),_0xda562b=0.5+(0.1+0.01*_0x481b39)*Math['cos'](_0x788b55)):(_0x23966a=0.5-(0.5-0.01*_0x481b39)*Math['sin'](_0x788b55),_0xda562b=0.5+(0.5-0.01*_0x481b39)*Math['cos'](_0x788b55)),this['pCylinderTex'][_0xcec4ef++]=(0x2*_0x23966a*_0x48eb5f+0x1*_0x21ffe7)/0x1,this['pCylinderTex'][_0xcec4ef++]=(0x2*_0xda562b*_0x48eb5f+_0x4528b6*_0xcbf3c9)/_0xcbf3c9,_0xc19360+=0x3,this['pCylinderPos'][_0xc19360]=-this['fCylinderRadius']*Math['sin'](_0x788b55),this['pCylinderPos'][_0xc19360+0x1]=this['fCylinderHeight']/0x2-_0x481b39*_0x26550d,this['pCylinderPos'][_0xc19360+0x2]=-this['fCylinderRadius']*Math['cos'](_0x788b55),_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==_0x44cf2d||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x44cf2d?(_0x23966a=0.5+(0.1+0.01*_0x481b39)*Math['sin'](_0x788b55),_0xda562b=0.5+(0.1+0.01*_0x481b39)*Math['cos'](_0x788b55)):(_0x23966a=0.5-(0.5-0.01*_0x481b39)*Math['sin'](_0x788b55),_0xda562b=0.5+(0.5-0.01*_0x481b39)*Math['cos'](_0x788b55)),this['pCylinderTex'][_0xcec4ef++]=(0x2*_0x23966a*_0x48eb5f+0x1*_0x21ffe7)/0x1,this['pCylinderTex'][_0xcec4ef++]=(0x2*_0xda562b*_0x48eb5f+_0x4528b6*_0xcbf3c9)/_0xcbf3c9,_0xc19360+=0x3,this['pCylinderPos'][_0xc19360]=-this['fCylinderRadius']*Math['sin'](_0x4f2b3f),this['pCylinderPos'][_0xc19360+0x1]=this['fCylinderHeight']/0x2-(_0x481b39+0x1)*_0x26550d,this['pCylinderPos'][_0xc19360+0x2]=-this['fCylinderRadius']*Math['cos'](_0x4f2b3f),_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==_0x44cf2d||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x44cf2d?(_0x23966a=0.5+(0.1+0.01*(_0x481b39+0x1))*Math['sin'](_0x4f2b3f),_0xda562b=0.5+(0.1+0.01*(_0x481b39+0x1))*Math['cos'](_0x4f2b3f)):(_0x23966a=0.5-(0.5-0.01*(_0x481b39+0x1))*Math['sin'](_0x4f2b3f),_0xda562b=0.5+(0.5-0.01*(_0x481b39+0x1))*Math['cos'](_0x4f2b3f)),this['pCylinderTex'][_0xcec4ef++]=(0x2*_0x23966a*_0x48eb5f+0x1*_0x21ffe7)/0x1,this['pCylinderTex'][_0xcec4ef++]=(0x2*_0xda562b*_0x48eb5f+_0x4528b6*_0xcbf3c9)/_0xcbf3c9,_0xc19360+=0x3,this['pCylinderPos'][_0xc19360]=-this['fCylinderRadius']*Math['sin'](_0x788b55),this['pCylinderPos'][_0xc19360+0x1]=this['fCylinderHeight']/0x2-(_0x481b39+0x1)*_0x26550d,this['pCylinderPos'][_0xc19360+0x2]=-this['fCylinderRadius']*Math['cos'](_0x788b55),_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==_0x44cf2d||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==_0x44cf2d?(_0x23966a=0.5+(0.1+0.01*(_0x481b39+0x1))*Math['sin'](_0x788b55),_0xda562b=0.5+(0.1+0.01*(_0x481b39+0x1))*Math['cos'](_0x788b55)):(_0x23966a=0.5-(0.5-0.01*(_0x481b39+0x1))*Math['sin'](_0x788b55),_0xda562b=0.5+(0.5-0.01*(_0x481b39+0x1))*Math['cos'](_0x788b55)),this['pCylinderTex'][_0xcec4ef++]=(0x2*_0x23966a*_0x48eb5f+0x1*_0x21ffe7)/0x1,this['pCylinderTex'][_0xcec4ef++]=(0x2*_0xda562b*_0x48eb5f+_0x4528b6*_0xcbf3c9)/_0xcbf3c9,_0xc19360+=0x3;}return this['nCylinderPosNum']=_0xc19360/0x3,this['nCylinderPosSize']=0x3,this['nCylinderTexSize']=0x2,_0xa87ede;}},{'key':'_CreateArcSphere','value':function(_0x17b8f4,_0x5a4278,_0x5e025d,_0x4a61b7,_0x3a8181){if(null!=this['pArcSpherePos']||null!=this['pArcSphereTex'])return _0x520965;if(_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']){if(_0x4a61b7>0x0||_0x3a8181<0x1)return SR_ERR_PARAM;}else{if(_0x17b8f4!=_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])return _0x86aef9;if(_0x5a4278>0x0||_0x5e025d<0x1)return SR_ERR_PARAM;}this['fImageWidth']=0x1,this['fImageHeight']=(_0x5e025d-_0x5a4278)/(_0x3a8181-_0x4a61b7),this['fTexCenterX']=(_0x5a4278+_0x5e025d)/0x2*this['fImageWidth'],this['fTexCenterY']=(_0x4a61b7+_0x3a8181)/0x2*this['fImageHeight'],this['fTexRadius']=(_0x5e025d-_0x5a4278)/0x2*this['fImageWidth'];var _0x32c935=0x19;if(null==this['pArcSphereTex']&&(this['pArcSphereTex']=new Float32Array(0x3960),null==this['pArcSphereTex']))return _0x3d12cf;if(null==this['pArcSpherePos']&&(this['pArcSpherePos']=new Float32Array(0x5610),null==this['pArcSpherePos']))return _0x3d12cf;var _0x9aa956=new Float32Array(0x40);if(null==_0x9aa956)return _0x3d12cf;var _0x16db8c=_0xa87ede;if(_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?_0x16db8c=this['_ComputeLatitudeHorizontal'](_0x9aa956,_0x32c935,0x28,0x1):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&(_0x16db8c=this['_ComputeLatitudeVertical'](_0x9aa956,_0x32c935,0x28,0x1)),_0xa87ede!=_0x16db8c)return this['pArcSpherePos']=null,this['pArcSphereTex']=null,_0x16db8c;this['fFirstLatitude']=_0x9aa956[0xc],this['fLastLatitude']=_0x9aa956[0x33];var _0x57502c=0x0,_0x5595c4=0x0,_0x5f4e16=new Float32Array(0x5);if(null==_0x5f4e16)return this['pArcSpherePos']=null,this['pArcSphereTex']=null,_0x3d12cf;for(var _0x2de16a=_0x530a52/0x18,_0x4431c2=-0xc;_0x4431c2<0xc;++_0x4431c2)for(var _0x27ba1b=_0x4431c2<0x0?-_0x4431c2:_0x4431c2,_0x2ade6b=_0x4431c2<0x0?_0x27ba1b:_0x27ba1b+0x1,_0x495f79=_0x4431c2<0x0?0x40-0x2*(_0x27ba1b-0x1)-0x2:0x40-0x2*_0x27ba1b-0x2,_0x123bfe=0x0;_0x123bfe<_0x495f79;++_0x123bfe,++_0x2ade6b)_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b],_0x5f4e16),this['pArcSpherePos'][_0x57502c]=_0x5f4e16[0x0],this['pArcSpherePos'][_0x57502c+0x1]=_0x5f4e16[0x1],this['pArcSpherePos'][_0x57502c+0x2]=_0x5f4e16[0x2],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x3],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x4],_0x57502c+=0x3,_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b],_0x5f4e16),this['pArcSpherePos'][_0x57502c]=_0x5f4e16[0x0],this['pArcSpherePos'][_0x57502c+0x1]=_0x5f4e16[0x1],this['pArcSpherePos'][_0x57502c+0x2]=_0x5f4e16[0x2],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x3],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x4],_0x57502c+=0x3,_0x4431c2>=0x0&&0x0==_0x123bfe?_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b-0x1],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b-0x1],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b-0x1],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b-0x1],_0x5f4e16),this['pArcSpherePos'][_0x57502c]=_0x5f4e16[0x0],this['pArcSpherePos'][_0x57502c+0x1]=_0x5f4e16[0x1],this['pArcSpherePos'][_0x57502c+0x2]=_0x5f4e16[0x2],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x3],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x4],_0x57502c+=0x3,_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b],_0x5f4e16),this['pArcSpherePos'][_0x57502c]=_0x5f4e16[0x0],this['pArcSpherePos'][_0x57502c+0x1]=_0x5f4e16[0x1],this['pArcSpherePos'][_0x57502c+0x2]=_0x5f4e16[0x2],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x3],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x4],_0x57502c+=0x3,_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b],_0x5f4e16),this['pArcSpherePos'][_0x57502c]=_0x5f4e16[0x0],this['pArcSpherePos'][_0x57502c+0x1]=_0x5f4e16[0x1],this['pArcSpherePos'][_0x57502c+0x2]=_0x5f4e16[0x2],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x3],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x4],_0x57502c+=0x3,_0x4431c2<0x0&&_0x123bfe==_0x495f79-0x1?_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b+0x1],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*(_0x4431c2+0x1),_0x9aa956[_0x2ade6b+0x1],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?this['_ComputeVertexAndTexturePosHorizontal'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b+0x1],_0x5f4e16):_0x17b8f4==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']&&this['_ComputeVertexAndTexturePosVertical'](0x1,1.5707963-_0x2de16a*_0x4431c2,_0x9aa956[_0x2ade6b+0x1],_0x5f4e16),this['pArcSpherePos'][_0x57502c]=_0x5f4e16[0x0],this['pArcSpherePos'][_0x57502c+0x1]=_0x5f4e16[0x1],this['pArcSpherePos'][_0x57502c+0x2]=_0x5f4e16[0x2],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x3],this['pArcSphereTex'][_0x5595c4++]=_0x5f4e16[0x4],_0x57502c+=0x3;return this['nArcSpherePosNum']=_0x57502c/0x3,this['nArcSpherePosSize']=0x3,this['nArcSphereTexSize']=0x2,_0x9aa956=null,_0x5f4e16=null,_0xa87ede;}},{'key':'_ComputeIntersectionOfPlaneAndLongtitude','value':function(_0x45fd53,_0x47d03e,_0x217c54){if(null==_0x45fd53)return _0x31ddcf;var _0x2976b1,_0x4374a3=_0x45fd53[0x1]*_0x217c54,_0x1eff9b=_0x45fd53[0x2]*_0x217c54*Math['sin'](_0x47d03e),_0x68ac01=-_0x45fd53[0x3],_0x257e8f=0x0,_0x4a835b=0x0;if(_0x45fd53[0x1]>0x0){var _0x375aae=_0x4374a3*_0x4374a3*_0x68ac01*_0x68ac01-(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b)*(_0x68ac01*_0x68ac01-_0x1eff9b*_0x1eff9b);_0x257e8f=(-_0x4374a3*_0x68ac01-Math['sqrt'](_0x375aae))/(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b),_0x375aae=_0x1eff9b*_0x1eff9b*_0x68ac01*_0x68ac01-(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b)*(_0x68ac01*_0x68ac01-_0x4374a3*_0x4374a3),_0x4a835b=(-_0x1eff9b*_0x68ac01+Math['sqrt'](_0x375aae))/(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b);}if(_0x45fd53[0x1]<0x0){var _0x4908e2=_0x4374a3*_0x4374a3*_0x68ac01*_0x68ac01-(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b)*(_0x68ac01*_0x68ac01-_0x1eff9b*_0x1eff9b);_0x257e8f=(-_0x4374a3*_0x68ac01+Math['sqrt'](_0x4908e2))/(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b),_0x4908e2=_0x1eff9b*_0x1eff9b*_0x68ac01*_0x68ac01-(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b)*(_0x68ac01*_0x68ac01-_0x4374a3*_0x4374a3),_0x4a835b=(-_0x1eff9b*_0x68ac01+Math['sqrt'](_0x4908e2))/(_0x4374a3*_0x4374a3+_0x1eff9b*_0x1eff9b);}return _0x217c54*Math['cos'](_0x47d03e)*_0x4a835b,_0x2976b1=-_0x217c54*_0x257e8f,-_0x217c54*Math['sin'](_0x47d03e)*_0x4a835b,Math['asin'](_0x2976b1/_0x217c54);}},{'key':'_ComputeLatitudeHorizontal','value':function(_0x1d9035,_0x4201d9,_0x55cdcb,_0x17ff34){if(null==_0x1d9035)return _0x31ddcf;var _0x28b004=0x0,_0x96e209=(this['fTexCenterY'],_0x530a52/(_0x4201d9-0x1)),_0x563232=_0x530a52*this['fTexCenterY']/(0x2*this['fTexRadius']),_0x295ce4=Math['asin'](this['fTexCenterY']/this['fTexRadius']),_0x1c880c=Math['atan'](Math['cos'](_0x563232)/(Math['sin'](_0x563232)-Math['sin'](_0x295ce4))),_0x456365=new Float32Array(0x4);_0x456365[0x0]=0x0,_0x456365[0x1]=Math['sin'](_0x1c880c),_0x456365[0x2]=Math['cos'](_0x1c880c),_0x456365[0x3]=-_0x17ff34*Math['sin'](_0x1c880c)*Math['sin'](_0x295ce4),_0x1d9035[_0x28b004++]=_0x563232;for(var _0x27acbc=0x1;_0x27acbc<=(_0x4201d9-0x3)/0x2;++_0x27acbc){var _0x3d819d=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0x456365,1.5707963-_0x96e209*_0x27acbc,_0x17ff34);_0x1d9035[_0x28b004++]=_0x3d819d;}for(var _0x416567=-Math['asin']((this['fImageHeight']-this['fTexCenterY'])/this['fTexRadius']),_0xfbeb74=_0x295ce4,_0x757933=(_0xfbeb74-_0x416567)/(_0x55cdcb-0x1),_0x2194fe=0x0;_0x2194fe<_0x55cdcb;++_0x2194fe)_0x1d9035[_0x28b004++]=_0xfbeb74-_0x2194fe*_0x757933;var _0x9de884=_0x416567,_0x950ea=_0x530a52*(this['fTexCenterY']-this['fImageHeight'])/(0x2*this['fTexRadius']);_0x1c880c=Math['atan'](Math['cos'](_0x950ea)/(Math['sin'](_0x9de884)-Math['sin'](_0x950ea)));var _0x5db530=new Float32Array(0x4);_0x5db530[0x0]=0x0,_0x5db530[0x1]=-Math['sin'](_0x1c880c),_0x5db530[0x2]=Math['cos'](_0x1c880c),_0x5db530[0x3]=_0x17ff34*Math['sin'](_0x1c880c)*Math['sin'](_0x9de884);for(var _0x4faffc=0x1;_0x4faffc<=(_0x4201d9-0x3)/0x2;++_0x4faffc){var _0x4d8954=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0x5db530,_0x96e209*_0x4faffc,_0x17ff34);_0x1d9035[_0x28b004++]=_0x4d8954;}return _0x1d9035[_0x28b004++]=_0x950ea,_0x456365=null,_0x5db530=null,_0xa87ede;}},{'key':'_ComputeVertexAndTexturePosHorizontal','value':function(_0x237ede,_0x4d0778,_0x13a528,_0x4db42c){if(null==_0x4db42c)return _0x31ddcf;_0x4db42c[0x2]=-_0x237ede*Math['cos'](_0x13a528)*Math['sin'](_0x4d0778),_0x4db42c[0x0]=_0x237ede*Math['cos'](_0x13a528)*Math['cos'](_0x4d0778),_0x4db42c[0x1]=_0x237ede*Math['sin'](_0x13a528);var _0x202bd0,_0x2a92e7=-Math['asin'](-_0x4db42c[0x2]/_0x237ede)/_0x530a52;_0x202bd0=_0x13a528>=0x0?Math['acos'](_0x4db42c[0x0]/Math['sqrt'](_0x4db42c[0x0]*_0x4db42c[0x0]+_0x4db42c[0x1]*_0x4db42c[0x1])):6.2831852-Math['acos'](_0x4db42c[0x0]/Math['sqrt'](_0x4db42c[0x0]*_0x4db42c[0x0]+_0x4db42c[0x1]*_0x4db42c[0x1]));var _0x41db05=this['fTexCenterX']-this['fTexRadius'],_0x53c029=this['fTexRadius']-this['fTexCenterY'];return _0x4db42c[0x3]=(Math['cos'](_0x202bd0)*this['fTexRadius']*(0x1+0x2*_0x2a92e7)+this['fTexRadius']+_0x41db05)/this['fImageWidth'],_0x4db42c[0x4]=(Math['sin'](_0x202bd0)*this['fTexRadius']*(-0x1-0x2*_0x2a92e7)+this['fTexRadius']-_0x53c029)/this['fImageHeight'],_0xa87ede;}},{'key':'_ComputeLatitudeVertical','value':function(_0x34484c,_0xb0c36,_0x2a9bf2,_0x46e820){if(null==_0x34484c)return SR_ERR_PARAM;var _0x59bfbe=0x0,_0x328331=_0x530a52/(_0xb0c36-0x1),_0x44937f=_0x530a52*this['fTexCenterX']/(0x2*this['fTexRadius']),_0x5ed7ac=Math['asin'](this['fTexCenterX']/this['fTexRadius']),_0x5524c3=Math['atan'](Math['cos'](_0x44937f)/(Math['sin'](_0x44937f)-Math['sin'](_0x5ed7ac))),_0x1969e8=new Float32Array(0x4);_0x1969e8[0x0]=0x0,_0x1969e8[0x1]=Math['sin'](_0x5524c3),_0x1969e8[0x2]=Math['cos'](_0x5524c3),_0x1969e8[0x3]=-_0x46e820*Math['sin'](_0x5524c3)*Math['sin'](_0x5ed7ac),_0x34484c[_0x59bfbe++]=_0x44937f;for(var _0x20ee3e=0x1;_0x20ee3e<=(_0xb0c36-0x3)/0x2;++_0x20ee3e){var _0x2386b2=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0x1969e8,1.5707963-_0x328331*_0x20ee3e,_0x46e820);_0x34484c[_0x59bfbe++]=_0x2386b2;}for(var _0x2c3055=-Math['asin']((this['fImageWidth']-this['fTexCenterX'])/this['fTexRadius']),_0x40c0b8=_0x5ed7ac,_0x39678a=(_0x40c0b8-_0x2c3055)/(_0x2a9bf2-0x1),_0x44e4ac=0x0;_0x44e4ac<_0x2a9bf2;++_0x44e4ac)_0x34484c[_0x59bfbe++]=_0x40c0b8-_0x44e4ac*_0x39678a;var _0x49fb50=_0x2c3055,_0x654a8=_0x530a52*(this['fTexCenterX']-this['fImageWidth'])/(0x2*this['fTexRadius']);_0x5524c3=Math['atan'](Math['cos'](_0x654a8)/(Math['sin'](_0x49fb50)-Math['sin'](_0x654a8)));var _0xae5f17=new Float32Array(0x4);_0xae5f17[0x0]=0x0,_0xae5f17[0x1]=-Math['sin'](_0x5524c3),_0xae5f17[0x2]=Math['cos'](_0x5524c3),_0xae5f17[0x3]=_0x46e820*Math['sin'](_0x5524c3)*Math['sin'](_0x49fb50);for(var _0x2349b8=0x1;_0x2349b8<=(_0xb0c36-0x3)/0x2;++_0x2349b8){var _0x3b0f29=this['_ComputeIntersectionOfPlaneAndLongtitude'](_0xae5f17,_0x328331*_0x2349b8,_0x46e820);_0x34484c[_0x59bfbe++]=_0x3b0f29;}return _0x34484c[_0x59bfbe++]=_0x654a8,_0x1969e8=null,_0xae5f17=null,_0xa87ede;}},{'key':'_ComputeVertexAndTexturePosVertical','value':function(_0x534f39,_0x159869,_0xc2a7c8,_0x17e0da){if(null==_0x17e0da)return SR_ERR_PARAM;_0x17e0da[0x2]=-_0x534f39*Math['cos'](_0xc2a7c8)*Math['sin'](_0x159869),_0x17e0da[0x1]=_0x534f39*Math['cos'](_0xc2a7c8)*Math['cos'](_0x159869),_0x17e0da[0x0]=-_0x534f39*Math['sin'](_0xc2a7c8);var _0xa5e24d,_0x10e2f0=-Math['asin'](-_0x17e0da[0x2]/_0x534f39)/_0x530a52;_0xa5e24d=_0x159869<=1.5707963?Math['acos'](_0x17e0da[0x0]/Math['sqrt'](_0x17e0da[0x0]*_0x17e0da[0x0]+_0x17e0da[0x1]*_0x17e0da[0x1])):6.2831852-Math['acos'](_0x17e0da[0x0]/Math['sqrt'](_0x17e0da[0x0]*_0x17e0da[0x0]+_0x17e0da[0x1]*_0x17e0da[0x1]));var _0x4f865f=this['fTexCenterX']-this['fTexRadius'],_0x10dbcb=this['fTexRadius']-this['fTexCenterY'];return _0x17e0da[0x3]=(Math['cos'](_0xa5e24d)*this['fTexRadius']*(0x1+0x2*_0x10e2f0)+this['fTexRadius']+_0x4f865f)/this['fImageWidth'],_0x17e0da[0x4]=(Math['sin'](_0xa5e24d)*this['fTexRadius']*(-0x1-0x2*_0x10e2f0)+this['fTexRadius']-_0x10dbcb)/this['fImageHeight'],_0xa87ede;}},{'key':'InitCamera','value':function(_0xcc10d5){if(null!=this['pCamera'])return SR_ERR_CALL_ORDER;switch(_0xcc10d5){case _0x186ff9['SR_DE_NULL']:case _0x186ff9['SR_DE_FISH_ORIGINAL']:case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:case _0x186ff9['SR_DE_FISH_PTZ_WALL']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:return _0xa87ede;case _0x186ff9['SR_DE_FISH_SEMISPHERE']:if(this['pCamera']=new _0x3b657c(),null==this['pCamera'])return _0x3d12cf;this['pCamera']['SetFov'](_0x13b181),this['pCamera']['SetNear'](_0x49aaae),this['pCamera']['SetFar'](_0x26dab3),this['fRotateX']=1.57,this['pCamera']['SetPitch'](3.14-this['fRotateX']),this['fScale']=0x3,this['pCamera']['SetScale'](this['fScale']);break;case _0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:if(this['pCamera']=new _0x3b657c(),null==this['pCamera'])return _0x3d12cf;this['pCamera']['SetFov'](_0x13b181),this['pCamera']['SetNear'](_0x49aaae),this['pCamera']['SetFar'](_0x26dab3),this['fRotateX']=0.785,this['pCamera']['SetPitch'](-this['fRotateX']),this['fScale']=0x6,this['pCamera']['SetScale'](this['fScale']);break;case _0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:if(this['pCamera']=new _0x3b657c(),null==this['pCamera'])return _0x3d12cf;this['pCamera']['SetOrtho'](!0x0),this['pCamera']['SetNear'](_0x49aaae),this['pCamera']['SetFar'](_0x26dab3),this['fScale']=0x3,this['pCamera']['SetScale'](this['fScale']);break;case _0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:if(this['pCamera']=new _0x3b657c(),null==this['pCamera'])return _0x3d12cf;this['pCamera']['SetFov'](_0x13b181),this['pCamera']['SetNear'](_0x49aaae),this['pCamera']['SetFar'](_0x26dab3),this['fScale']=0x2,this['pCamera']['SetScale'](this['fScale']),_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0xcc10d5?(this['fRotateLimitX']=_0x44d661,this['fRotateLimitY']=_0x5affea):(this['fRotateLimitX']=_0x438d57,this['fRotateLimitY']=_0x2506c4);break;default:return _0x86aef9;}return _0xa87ede;}},{'key':'SR_SetViewParam','value':function(_0x46d073,_0x6189a7){if(!this['b3DPort'])return _0x86aef9;switch(_0x46d073){case _0x394973:if((this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])&&(_0x6189a7>this['fRotateLimitX']||_0x6189a7<-this['fRotateLimitX']))return _0x31ddcf;this['fRotateX']=_0x6189a7;break;case _0x42f4b3:if((this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL'])&&(_0x6189a7>this['fRotateLimitY']||_0x6189a7<-this['fRotateLimitY']))return _0x31ddcf;this['fRotateY']=_0x6189a7;break;case _0x339c63:if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_SEMISPHERE']){if(_0x6189a7<-0.8||_0x6189a7>0x384)return _0x31ddcf;}else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']){if(_0x6189a7<0x0||_0x6189a7>0x384)return _0x31ddcf;}else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){if(_0x6189a7<-0.3||_0x6189a7>0x5)return _0x31ddcf;this['_ComputeRotateLimits']();}}}this['fScale']=_0x6189a7;break;default:return _0x86aef9;}return _0xa87ede;}},{'key':'SR_GetViewParam','value':function(_0x52c4fa,_0x205d9b){if(!this['b3DPort'])return _0x520965;var _0x50830b=0x0;switch(_0x52c4fa){case _0x394973:_0x50830b=this['fRotateX'];break;case _0x42f4b3:_0x50830b=this['fRotateY'];break;case _0x339c63:_0x50830b=this['fScale'];break;default:return _0x86aef9;}return _0x205d9b['fValue']=_0x50830b,_0xa87ede;}},{'key':'SR_SetCallBack','value':function(_0x5da1bd,_0x2bbf0b,_0x3e50e3){switch(_0x3e50e3){case _0x444649:this['pfuncCBIn']=_0x5da1bd,this['pUserIn']=_0x2bbf0b;break;case _0x4f7368:this['pfuncCBOut']=_0x5da1bd,this['pUserOut']=_0x2bbf0b;break;default:return _0x86aef9;}return _0xa87ede;}},{'key':'SR_SetRenderState','value':function(_0x2206d5,_0x3e7889){switch(_0x2206d5){case _0x11cf81:if(this['b3DPort'])return _0x86aef9;break;case _0x57ef5a:if(!this['b3DPort'])return _0x86aef9;Math['abs'](_0x3e7889-0x0)<_0x4a23c6?this['bCullBack']=!0x1:this['bCullBack']=!0x0;break;default:return _0x86aef9;}return _0xa87ede;}},{'key':'SR_SetPTZColor','value':function(_0x22a340,_0x2d7345){return null==this['pFishParamManager']?_0x520965:this['pFishParamManager']['SetPTZColor'](_0x22a340,_0x2d7345);}},{'key':'SR_GetPTZColor','value':function(_0xaeb36f,_0x463679){return null==this['pFishParamManager']?_0x520965:this['pFishParamManager']['GetPTZColor'](_0xaeb36f,_0x463679);}},{'key':'SR_SetPTZPort','value':function(_0x5c99b6){return null==this['pFishParamManager']?_0x520965:this['pFishParamManager']['SetPTZPort'](_0x5c99b6);}},{'key':'SR_GetPTZPort','value':function(_0x1d4d34,_0x29e620,_0x25da3e){return null==this['pFishParamManager']?_0x520965:null==_0x25da3e?_0x31ddcf:this['pFishParamManager']['GetPTZPort'](_0x1d4d34,_0x29e620,_0x25da3e);}},{'key':'SR_GetCaptureSize','value':function(_0x3d6a1f){if(null==_0x3d6a1f)return _0x31ddcf;if(null==this['ctx'])return _0x520965;if(null==_0x3d6a1f['nWidth']||null==_0x3d6a1f['nWidth']||null==_0x3d6a1f['nHeight']||null==_0x3d6a1f['nHeight'])return _0x31ddcf;var _0x3077f0=0x0,_0x2f261a=0x0;if(0x0==_0x3d6a1f['nWidth']&&0x0==_0x3d6a1f['nHeight'])switch(this['enDisplayEffect']){case _0x186ff9['SR_DE_FISH_PTZ_WALL']:case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:_0x3077f0=Math['round'](0x5*this['frameDisplayHeight']/0x8),_0x2f261a=Math['round'](0x3*_0x3077f0/0x4);break;case _0x186ff9['SR_DE_NULL']:_0x3077f0=Math['round']((this['fSrcUseRight']-this['fSrcUseLeft'])*this['frameDisplayWidth']),_0x2f261a=Math['round']((this['fSrcUseBottom']-this['fSrcUseTop'])*this['frameDisplayHeight']);break;case _0x186ff9['SR_DE_FISH_ORIGINAL']:case _0x186ff9['SR_DE_FISH_SEMISPHERE']:case _0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:_0x3077f0=Math['round'](this['frameDisplayWidth']),_0x2f261a=Math['round'](this['frameDisplayHeight']);break;case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:this['frameDisplayHeight']>=0x800?(_0x3077f0=0x1800,_0x2f261a=0x360):this['frameDisplayHeight']>=0x600&&0x800>this['frameDisplayHeight']?(_0x3077f0=0x1000,_0x2f261a=0x240):(_0x3077f0=Math['round'](3.14*this['frameDisplayHeight']/1.6),_0x2f261a=Math['round'](0x9*this['frameDisplayWidth']/0x10),_0x3077f0=Math['round'](0x2*_0x3077f0),_0x2f261a=Math['round'](_0x2f261a/0x2));break;case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:this['frameDisplayHeight']>=0xc00?(_0x3077f0=0x1000,_0x2f261a=0x900):this['frameDisplayHeight']>=0x800&&0xc00>this['frameDisplayHeight']?(_0x3077f0=0xc00,_0x2f261a=0x6c0):this['frameDisplayHeight']>=0x600&&0x800>this['frameDisplayHeight']?(_0x3077f0=0x800,_0x2f261a=0x480):(_0x3077f0=Math['round'](3.14*this['frameDisplayHeight']/1.6),_0x2f261a=Math['round'](0x9*_0x3077f0/0x10));break;case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:_0x3077f0=Math['round'](this['frameDisplayHeight']),_0x2f261a=Math['round'](0x9*_0x3077f0/0x10);break;default:return _0x31ddcf;}else _0x3077f0=Math['round'](_0x3d6a1f['nWidth']),_0x2f261a=Math['round'](_0x3d6a1f['nHeight']);return _0x3077f0<0x10||_0x2f261a<0x10?_0x31ddcf:(this['nCaptureWidth']=0x4*Math['round'](_0x3077f0/0x4),this['nCaptureHeight']=Math['round'](_0x2f261a),_0x3d6a1f['nWidth']=this['nCaptureWidth'],_0x3d6a1f['nHeight']=this['nCaptureHeight'],_0x3d6a1f['nBufferLen']=this['nCaptureWidth']*this['nCaptureHeight']*0x4,_0xa87ede);}},{'key':'SR_CaptureScreen','value':function(_0x182ed1){var _0x2c8855=_0xa87ede;if(_0x2c8855=this['_BeginCapture'](),_0xa87ede!=_0x2c8855)return _0x2c8855;if(0x0==this['videoShaderProgram']||0x0==this['vertexPosBuffer']||0x0==this['texturePosBuffer'])return _0x520965;this['ctx']['useProgram'](this['videoShaderProgram']),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['vertexPosBuffer']);var _0x517ee9=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'xy');if(_0x517ee9<0x0)return _0x4d26c0;this['ctx']['vertexAttribPointer'](_0x517ee9,0x3,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x517ee9),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],this['texturePosBuffer']);var _0x14700d=this['ctx']['getAttribLocation'](this['videoShaderProgram'],'uv');if(_0x14700d<0x0)return _0x4d26c0;this['ctx']['vertexAttribPointer'](_0x14700d,0x2,this['ctx']['FLOAT'],!0x1,0x0,0x0),this['ctx']['enableVertexAttribArray'](_0x14700d),this['ctx']['bindBuffer'](this['ctx']['ARRAY_BUFFER'],null);var _0x51a1ec=this['enDisplayEffect'],_0x34fe9c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCapture');if(_0x34fe9c<=0x0)return _0x4d26c0;switch(this['ctx']['uniform1i'](_0x34fe9c,0x1),_0x51a1ec){case _0x186ff9['SR_DE_NULL']:break;case _0x186ff9['SR_DE_FISH_ORIGINAL']:case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:case _0x186ff9['SR_DE_FISH_PTZ_WALL']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']:case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:if(null==this['pFishParamManager'])return _0x520965;var _0x1fd457={};if(_0x2c8855=this['pFishParamManager']['GetRenderParam'](this['nFECPort'],_0x1fd457),_0xa87ede!=_0x2c8855)return _0x2c8855;if(_0x186ff9['SR_DE_FISH_ORIGINAL']==_0x51a1ec){var _0x5ed42b=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bBlack');if(_0x5ed42b<=0x0)return _0x4d26c0;this['ctx']['uniform1i'](_0x5ed42b,_0x1fd457['bBlack']);var _0x22c412=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'bCut');if(_0x22c412<=0x0)return _0x4d26c0;this['ctx']['uniform1i'](_0x22c412,_0x1fd457['bCut']);}if(_0x186ff9['SR_DE_FISH_PTZ_CEILING']==_0x51a1ec||_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==_0x51a1ec||_0x186ff9['SR_DE_FISH_PTZ_WALL']==_0x51a1ec){var _0x1be46e=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleCos');if(_0x1be46e<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x1be46e,_0x1fd457['fCosH']);var _0x4cee7f=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHAngleSin');if(_0x4cee7f<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x4cee7f,_0x1fd457['fSinH']);var _0x34ae1c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleCos');if(_0x34ae1c<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x34ae1c,_0x1fd457['fCosV']);var _0x300454=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fVAngleSin');if(_0x300454<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x300454,_0x1fd457['fSinV']);var _0x2862f4=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fZoom');if(_0x2862f4<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x2862f4,_0x1fd457['fZoom']);}if(_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']==_0x51a1ec||_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']==_0x51a1ec||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']==_0x51a1ec||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']==_0x51a1ec){var _0x11460a=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fAngle');if(_0x11460a<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x11460a,_0x1fd457['fAngle']);}var _0x25ff1c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX1');if(_0x25ff1c<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x25ff1c,_0x1fd457['fRXLeft']);var _0x558e2c=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRX2');if(_0x558e2c<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x558e2c,_0x1fd457['fRXRight']);var _0x1f7592=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY1');if(_0x1f7592<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x1f7592,_0x1fd457['fRYTop']);var _0x4966fe=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fRY2');if(_0x4966fe<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x4966fe,_0x1fd457['fRYBottom']);break;case _0x186ff9['SR_DE_FISH_SEMISPHERE']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](3.14-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['canvas']['width'],this['canvas']['height']);var _0x5e2a11=this['pCamera']['GetView'](),_0xf45b1a=this['pCamera']['GetProj'](),_0x3aaee2=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x3aaee2<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x3aaee2,!0x1,_0x5e2a11);var _0x51d4ee=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x51d4ee<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x51d4ee,!0x1,_0xf45b1a);break;case _0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:this['pCamera']['SetScale'](this['fScale']),this['pCamera']['SetPitch'](-this['fRotateX']),this['pCamera']['SetYaw'](-this['fRotateY']),this['pCamera']['UpdateCamera'](this['canvas']['width'],this['canvas']['height']);var _0x4ad072=this['pCamera']['GetView'](),_0x3a7e99=this['pCamera']['GetProj'](),_0x8e98a2=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matView');if(_0x8e98a2<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x8e98a2,!0x1,_0x4ad072);var _0x5b3983=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'matProj');if(_0x5b3983<=0x0)return _0x4d26c0;this['ctx']['uniformMatrix4fv'](_0x5b3983,!0x1,_0x3a7e99);break;default:return _0x86aef9;}if(this['nCaptureWidth']<=0x0||this['nCaptureHeight']<=0x0)return _0x4fea1b;if(this['ctx']['viewport'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight']),this['ctx']['clearColor'](0x0,0x0,0x0,0x1),this['ctx']['clear'](this['ctx']['COLOR_BUFFER_BIT']|this['ctx']['DEPTH_BUFFER_BIT']),this['b3DPort']&&(this['ctx']['enable'](this['ctx']['DEPTH_TEST']),this['ctx']['depthFunc'](this['ctx']['LESS']),this['ctx']['depthMask'](!0x0),0x1==this['bCullBack']?this['ctx']['enable'](this['ctx']['CULL_FACE']):this['ctx']['disable'](this['ctx']['CULL_FACE'])),this['enPixelFormat']==_0xa01ff6?this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]):(this['enPixelFormat']==_0x58bd8b||this['enPixelFormat']==_0x264b64)&&(this['ctx']['activeTexture'](this['ctx']['TEXTURE0']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x0]),this['ctx']['activeTexture'](this['ctx']['TEXTURE1']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x1]),this['ctx']['activeTexture'](this['ctx']['TEXTURE2']),this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nSurfaceTexture'][0x2])),this['onlySupportedWebGL1']||this['ctx']['clearBufferfi'](this['ctx']['DEPTH_STENCIL'],0x0,0x1,0x0),0x0==this['b3DPort'])this['ctx']['drawArrays'](this['ctx']['TRIANGLE_FAN'],0x0,0x4);else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_SEMISPHERE']){if(this['nSemiSpherePosNum']<=0x0)return _0x520965;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nSemiSpherePosNum']);}else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']){if(this['nCylinderPosNum']<=0x0)return _0x520965;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nCylinderPosNum']);}else{if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){if(this['nArcSpherePosNum']<=0x0)return _0x520965;this['ctx']['drawArrays'](this['ctx']['TRIANGLES'],0x0,this['nArcSpherePosNum']);}}}}return this['ctx']['useProgram'](null),null!=this['pfuncCBIn']&&this['pfuncCBIn'](this['pUserIn']),null!=this['pfuncCBOut']&&this['pfuncCBOut'](this['pUserOut']),_0x2c8855=this['_EndCapture'](_0x182ed1),_0xa87ede!=_0x2c8855?_0x2c8855:_0xa87ede;}},{'key':'SR_SetImagePostProcess','value':function(_0x2048cc,_0x1ac4fe){if(null==this['ctx'])return _0x520965;if(_0xe529b7==_0x2048cc||_0x2d33eb==_0x2048cc){if(0x0-_0x1ac4fe>_0x4a23c6||_0x1ac4fe-0x1>_0x4a23c6)return _0x31ddcf;}else{if((_0x46c7b3==_0x2048cc||_0x199c31==_0x2048cc||_0x414976==_0x2048cc)&&(-0x1-_0x1ac4fe>_0x4a23c6||_0x1ac4fe-0x1>_0x4a23c6))return _0x31ddcf;}switch(_0x2048cc){case _0x46c7b3:this['fBrightness']=_0x1ac4fe;break;case _0x2d33eb:this['fHue']=_0x1ac4fe;break;case _0x199c31:this['fSaturation']=_0x1ac4fe;break;case _0x414976:this['fContrast']=_0x1ac4fe;break;case _0xe529b7:this['fSharpness']=_0x1ac4fe;break;default:return _0x86aef9;}return Math['abs'](this['fBrightness']-0x0)<_0x4a23c6&&Math['abs'](this['fHue']-0x0)<_0x4a23c6&&Math['abs'](this['fSaturation']-0x0)<_0x4a23c6&&Math['abs'](this['fContrast']-0x0)<_0x4a23c6&&Math['abs'](this['fSharpness']-0x0)<_0x4a23c6?this['nPostProc']=0x0:this['nPostProc']=0x1,_0xa87ede;}},{'key':'_BeginCapture','value':function(){var _0x594b67=_0xa87ede;return 0x0==this['bCaptureResInit']&&(_0x594b67=this['_InitRenderTarget'](this['nCaptureWidth'],this['nCaptureHeight'],!0x1,!0x0),_0xa87ede!=_0x594b67)?_0x594b67:(_0x594b67=this['_Resize'](this['nCaptureWidth'],this['nCaptureHeight'],!0x1,!0x0),_0xa87ede!=_0x594b67?_0x594b67:(this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],this['nCaptureFBO']),this['bIsCapturing']=!0x0,_0xa87ede));}},{'key':'_InitRenderTarget','value':function(_0x5a333c,_0x43881f,_0x249770,_0x2948c0){if(0x0!=this['nCaptureRTTex']||0x0!=this['nCaptureFBO'])return _0x520965;if(_0x5a333c<=0x0||_0x43881f<=0x0)return _0x31ddcf;if(this['nCaptureRTTex']=this['ctx']['createTexture'](),this['nCaptureRTTex']<=0x0)return _0x4d26c0;if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nCaptureRTTex']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],_0x5a333c,_0x43881f,0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],null),0x0==this['nCaptureFBO']&&(this['nCaptureFBO']=this['ctx']['createFramebuffer'](),this['nCaptureFBO']<=0x0))return _0x4d26c0;if(this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],this['nCaptureFBO']),this['ctx']['framebufferTexture2D'](this['ctx']['FRAMEBUFFER'],this['ctx']['COLOR_ATTACHMENT0'],this['ctx']['TEXTURE_2D'],this['nCaptureRTTex'],0x0),0x1==_0x2948c0&&0x0==this['nCaptureDepthbuffer']){if(this['nCaptureDepthbuffer']=this['ctx']['createRenderbuffer'](),this['nCaptureDepthbuffer']<=0x0)return _0x4d26c0;this['ctx']['bindRenderbuffer'](this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']),this['ctx']['renderbufferStorage'](this['ctx']['RENDERBUFFER'],this['ctx']['DEPTH_COMPONENT16'],_0x5a333c,_0x43881f),this['ctx']['framebufferRenderbuffer'](this['ctx']['FRAMEBUFFER'],this['ctx']['DEPTH_ATTACHMENT'],this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']);}return this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),this['nCaptureFBOWidth']=_0x5a333c,this['nCaptureFBOHeight']=_0x43881f,this['bCaptureResInit']=!0x0,_0xa87ede;}},{'key':'_Resize','value':function(_0xcfe8c4,_0x52f7d1,_0x42dc08,_0x357e6b){if(this['nCaptureFBOWidth']!=_0xcfe8c4||this['nCaptureFBOHeight']!=_0x52f7d1){if(this['nCaptureFBOWidth']=_0xcfe8c4,this['nCaptureFBOHeight']=_0x52f7d1,0x0!=this['nCaptureRTTex']&&(this['ctx']['deleteTexture'](this['nCaptureRTTex']),this['nCaptureRTTex']=0x0),0x0!=this['nCaptureDepthbuffer']&&(this['ctx']['deleteRenderbuffer'](this['nCaptureDepthbuffer']),this['nCaptureDepthbuffer']=0x0),0x0==this['nCaptureRTTex']&&(this['nCaptureRTTex']=this['ctx']['createTexture'](),this['nCaptureRTTex']<=0x0))return _0x4d26c0;if(this['ctx']['bindTexture'](this['ctx']['TEXTURE_2D'],this['nCaptureRTTex']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MAG_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_MIN_FILTER'],this['ctx']['LINEAR']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_S'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texParameteri'](this['ctx']['TEXTURE_2D'],this['ctx']['TEXTURE_WRAP_T'],this['ctx']['CLAMP_TO_EDGE']),this['ctx']['texImage2D'](this['ctx']['TEXTURE_2D'],0x0,this['ctx']['RGBA'],this['nCaptureFBOWidth'],this['nCaptureFBOHeight'],0x0,this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],null),this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],this['nCaptureFBO']),this['ctx']['framebufferTexture2D'](this['ctx']['FRAMEBUFFER'],this['ctx']['COLOR_ATTACHMENT0'],this['ctx']['TEXTURE_2D'],this['nCaptureRTTex'],0x0),0x1==_0x357e6b&&0x0==this['nCaptureDepthbuffer']){if(this['nCaptureDepthbuffer']=this['ctx']['createRenderbuffer'](),this['nCaptureDepthbuffer']<=0x0)return _0x4d26c0;this['ctx']['bindRenderbuffer'](this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']),this['ctx']['renderbufferStorage'](this['ctx']['RENDERBUFFER'],this['ctx']['DEPTH_COMPONENT16'],_0xcfe8c4,_0x52f7d1),this['ctx']['framebufferRenderbuffer'](this['ctx']['FRAMEBUFFER'],this['ctx']['DEPTH_ATTACHMENT'],this['ctx']['RENDERBUFFER'],this['nCaptureDepthbuffer']);}this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null);}return _0xa87ede;}},{'key':'_EndCapture','value':function(_0x4c1472){return null==this['ctx']?_0x520965:null==_0x4c1472['pBuffer']||null==_0x4c1472['pBuffer']?_0x31ddcf:(this['ctx']['readPixels'](0x0,0x0,this['nCaptureWidth'],this['nCaptureHeight'],this['ctx']['RGBA'],this['ctx']['UNSIGNED_BYTE'],_0x4c1472['pBuffer']),this['ctx']['bindFramebuffer'](this['ctx']['FRAMEBUFFER'],null),this['bIsCapturing']=!0x1,_0xa87ede);}},{'key':'_ResizeFrameData','value':function(_0x5bdf2c,_0xb05249,_0x32fafb,_0x14166a){if(0x0==_0xb05249%0x8&&null==_0x14166a)return this['frameDisplayWidth']=Math['round'](_0xb05249),this['frameDisplayHeight']=Math['round'](_0x32fafb),this['pFrameData']=_0x5bdf2c,_0xa87ede;if(null!=_0x14166a&&0x0==_0x14166a['nCropBottom']&&0x0==_0x14166a['nCropLeft']&&0x0==_0x14166a['nCropRight']&&0x0==_0x14166a['nCropTop']&&0x0==_0xb05249%0x8)return this['frameDisplayWidth']=Math['round'](_0xb05249),this['frameDisplayHeight']=Math['round'](_0x32fafb),this['pFrameData']=_0x5bdf2c,_0xa87ede;if((null==this['pFrameData']||this['frameDisplayWidth']!=_0xb05249/0x8*0x8||this['frameDisplayHeight']!=_0x32fafb)&&(this['frameDisplayWidth']=0x8*Math['round'](_0xb05249/0x8),this['frameDisplayHeight']=Math['round'](_0x32fafb),this['pFrameData']=null,this['pFrameData']=new Uint8Array(this['frameDisplayWidth']*this['frameDisplayHeight']*0x3/0x2),null==this['pFrameData']))return _0x3d12cf;var _0x28d502=0x0,_0x14e706=0x0,_0x5dba3f=Math['round'](_0x14166a['nCodeWidth']),_0x529996=Math['round'](_0x14166a['nCodeHeight']),_0x51b8fc=0x0;if(_0x58bd8b==this['enPixelFormat']||_0x264b64==this['enPixelFormat']){var _0x267b16,_0x2b423f,_0x3428fd;null!=_0x14166a?(_0x28d502=Math['round'](_0x14166a['nCropLeft']),_0x14e706=Math['round'](_0x14166a['nCropTop']),_0x267b16=_0x5bdf2c['subarray'](_0x28d502*_0x5dba3f+_0x14e706,_0x5dba3f*_0x529996),_0x2b423f=_0x5bdf2c['subarray'](_0x5dba3f*_0x529996+_0x14e706*_0x5dba3f/0x4+_0x28d502/0x2,_0x5dba3f*_0x529996*0x5/0x4),_0x3428fd=_0x5bdf2c['subarray'](_0x5dba3f*_0x529996*0x5/0x4+_0x14e706*_0x5dba3f/0x4+_0x28d502/0x2,_0x5dba3f*_0x529996*0x3/0x2),_0x51b8fc=_0x5dba3f):(_0x267b16=_0x5bdf2c['subarray'](0x0,_0xb05249*_0x32fafb),_0x2b423f=_0x5bdf2c['subarray'](_0xb05249*_0x32fafb,_0xb05249*_0x32fafb*0x5/0x4),_0x3428fd=_0x5bdf2c['subarray'](_0xb05249*_0x32fafb*0x5/0x4,_0xb05249*_0x32fafb*0x3/0x2),_0x51b8fc=this['frameDisplayWidth']);for(var _0x13336c=null,_0x4b9afa=0x0;_0x4b9afa<this['frameDisplayHeight'];++_0x4b9afa){var _0x3781f7=Math['round'](_0x4b9afa*_0x51b8fc),_0x327116=Math['round'](_0x4b9afa*_0x51b8fc+this['frameDisplayWidth']);_0x13336c=_0x267b16['slice'](_0x3781f7,_0x327116);var _0x141fa6=Math['round'](_0x4b9afa*this['frameDisplayWidth']);this['pFrameData']['set'](_0x13336c,_0x141fa6);}for(var _0x477bdd=0x0;_0x477bdd<this['frameDisplayHeight']/0x2;++_0x477bdd){var _0x50edd6=Math['round'](_0x477bdd*_0x51b8fc/0x2),_0x503319=Math['round'](_0x477bdd*_0x51b8fc/0x2+this['frameDisplayWidth']/0x2);_0x13336c=_0x2b423f['slice'](_0x50edd6,_0x503319);var _0x22f9fb=Math['round'](this['frameDisplayWidth']*this['frameDisplayHeight']+_0x477bdd*this['frameDisplayWidth']/0x2);this['pFrameData']['set'](_0x13336c,_0x22f9fb);}for(var _0xb58ce5=0x0;_0xb58ce5<this['frameDisplayHeight']/0x2;++_0xb58ce5){var _0x47cd2f=Math['round'](_0xb58ce5*_0x51b8fc/0x2),_0x1244ce=Math['round'](_0xb58ce5*_0x51b8fc/0x2+this['frameDisplayWidth']/0x2);_0x13336c=_0x3428fd['slice'](_0x47cd2f,_0x1244ce);var _0x25a663=Math['round'](this['frameDisplayWidth']*this['frameDisplayHeight']*0x5/0x4+_0xb58ce5*this['frameDisplayWidth']/0x2);this['pFrameData']['set'](_0x13336c,_0x25a663);}_0x267b16=null,_0x2b423f=null,_0x3428fd=null,_0x13336c=null;}else{if(_0x532920==this['enPixelFormat']){var _0x372b86,_0x4951e3,_0x174e12;null!=_0x14166a?(_0x28d502=Math['round'](_0x14166a['nCropLeft']),_0x14e706=Math['round'](_0x14166a['nCropTop']),_0x372b86=_0x5bdf2c['subarray'](_0x14e706*_0x5dba3f+_0x28d502,_0x5dba3f*_0x529996),_0x4951e3=_0x5bdf2c['subarray'](_0x5dba3f*_0x529996+_0x14e706*_0x5dba3f/0x4+_0x28d502/0x2,_0x5dba3f*_0x529996*0x3/0x2),_0x51b8fc=Math['round'](_0x14166a['nCodeWidth'])):(_0x372b86=_0x5bdf2c['subarray'](0x0,_0x5dba3f*_0x529996),_0x4951e3=_0x5bdf2c['subarray'](_0x5dba3f*_0x529996,_0x5dba3f*_0x529996*0x3/0x2),_0x51b8fc=this['frameDisplayWidth']);for(var _0x2c9864=0x0;_0x2c9864<this['frameDisplayHeight'];++_0x2c9864){var _0x337f86=Math['round'](_0x2c9864*_0x51b8fc),_0x50a9ce=Math['round'](_0x2c9864*_0x51b8fc+this['frameDisplayWidth']);_0x174e12=_0x372b86['slice'](_0x337f86,_0x50a9ce);var _0x638927=Math['round'](_0x2c9864*this['frameDisplayWidth']);this['pFrameData']['set'](_0x174e12,_0x638927);}for(var _0x29fc18=0x0;_0x29fc18<this['frameDisplayHeight']/0x2;++_0x29fc18){var _0x214b42=Math['round'](_0x29fc18*_0x51b8fc),_0x3b1a87=Math['round'](_0x29fc18*_0x51b8fc+this['frameDisplayWidth']);_0x174e12=_0x4951e3['slice'](_0x214b42,_0x3b1a87);var _0x2c17e5=Math['round'](this['frameDisplayWidth']*this['frameDisplayHeight']+_0x29fc18*this['frameDisplayWidth']);this['pFrameData']['set'](_0x174e12,_0x2c17e5);}_0x372b86=null,_0x4951e3=null,_0x174e12=null;}}return _0xa87ede;}},{'key':'_SetImagePostProcess','value':function(){var _0x30cf7b=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fBrightness');if(_0x30cf7b<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x30cf7b,this['fBrightness']);var _0x5553d2=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fHue');if(_0x5553d2<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x5553d2,this['fHue']);var _0x42c592=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fSaturation');if(_0x42c592<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x42c592,this['fSaturation']);var _0x3629e8=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fContrast');if(_0x3629e8<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x3629e8,this['fContrast']);var _0x1c53e9=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fSharpness');if(_0x1c53e9<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x1c53e9,this['fSharpness']);var _0x5733f8=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fWndWidth');if(_0x5733f8<=0x0)return _0x4d26c0;this['ctx']['uniform1f'](_0x5733f8,this['frameDisplayWidth']);var _0x2dad49=this['ctx']['getUniformLocation'](this['videoShaderProgram'],'fWndHeight');return _0x2dad49<=0x0?_0x4d26c0:(this['ctx']['uniform1f'](_0x2dad49,this['frameDisplayHeight']),_0xa87ede);}},{'key':'_ComputeRotateLimits','value':function(){if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']||this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']){var _0x31467d,_0x35837a;if(this['enDisplayEffect']==_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']?(_0x31467d=_0x44d661,_0x35837a=_0x5affea):(_0x31467d=_0x438d57,_0x35837a=_0x2506c4),0x0==this['canvas']['width']||0x0==this['canvas']['height'])this['fRotateLimitX']=_0x31467d,this['fRotateLimitY']=_0x35837a;else{var _0x4a5e79=Math['tan'](2.748893525);if(Math['abs'](_0x4a5e79*this['fScale'])<0x1){var _0x50f721=_0x4a5e79*_0x4a5e79+0x1,_0x185702=-0x2*_0x4a5e79*_0x4a5e79*this['fScale'],_0x571130=_0x4a5e79*_0x4a5e79*this['fScale']*this['fScale']-0x1,_0x3fa40c=(-_0x185702-Math['sqrt'](_0x185702*_0x185702-0x4*_0x50f721*_0x571130))/(0x2*_0x50f721),_0x429003=_0x4a5e79*(_0x3fa40c-this['fScale']);this['fRotateLimitX']=Math['acos'](_0x429003/Math['sqrt'](_0x3fa40c*_0x3fa40c+_0x429003*_0x429003)),this['fRotateLimitX']<_0x31467d&&(this['fRotateLimitX']=_0x31467d);}else this['fRotateLimitX']=_0x31467d;var _0x536723=Math['atan'](this['canvas']['width']/this['canvas']['height']*Math['tan'](_0x13b181/0x2));if(_0x4a5e79=Math['tan'](_0x530a52-_0x536723),Math['abs'](_0x4a5e79*this['fScale'])<0x1){var _0x3a1ac0=_0x4a5e79*_0x4a5e79+0x1,_0x2c4813=-0x2*_0x4a5e79*_0x4a5e79*this['fScale'],_0x2b2259=_0x4a5e79*_0x4a5e79*this['fScale']*this['fScale']-0x1,_0x1484df=(-_0x2c4813-Math['sqrt'](_0x2c4813*_0x2c4813-0x4*_0x3a1ac0*_0x2b2259))/(0x2*_0x3a1ac0),_0x2c89d0=_0x4a5e79*(_0x1484df-this['fScale']);this['fRotateLimitY']=Math['acos'](_0x2c89d0/Math['sqrt'](_0x1484df*_0x1484df+_0x2c89d0*_0x2c89d0)),this['fRotateLimitY']<_0x35837a&&(this['fRotateLimitY']=_0x35837a);}else this['fRotateLimitY']=_0x35837a;}this['fRotateX']>this['fRotateLimitX']&&(this['fRotateX']=this['fRotateLimitX']),this['fRotateX']<-this['fRotateLimitX']&&(this['fRotateX']=-this['fRotateLimitX']),this['fRotateY']>this['fRotateLimitY']&&(this['fRotateY']=this['fRotateLimitX']),this['fRotateY']<-this['fRotateLimitX']&&(this['fRotateY']=-this['fRotateLimitX']);}return _0xa87ede;}}]),_0x2425ba;}()),_0x47e209=(function(){function _0x142b4f(){_0x54580d(this,_0x142b4f),this['canvas']=null,this['ctx']=null,this['regionSx']=0x0,this['regionSy']=0x0,this['regionSw']=0x0,this['regionSh']=0x0,this['needRect']=!0x1,this['bAntialias']=!0x1,this['bRecreateAntia']=!0x1,this['pfuncCBIn']=null,this['pUserIn']=null,this['pfuncCBOut']=null,this['pUserOut']=null;}return _0x4fd085(_0x142b4f,[{'key':'SR_Init','value':function(_0x5ecf9e){this['canvas']=_0x5ecf9e,this['ctx']=this['canvas']['getContext']('2d'),this['ctx']||console['log']('your\\x20browser\\x20does\\x20not\\x20support\\x202d\\x20render');}},{'key':'SR_Draw','value':function(_0x2b71ee){return this['needRect']?this['ctx']['drawImage'](_0x2b71ee,this['regionSx'],this['regionSy'],this['regionSw'],this['regionSh'],0x0,0x0,this['canvas']['width'],this['canvas']['height']):this['ctx']['drawImage'](_0x2b71ee,0x0,0x0,_0x2b71ee['displayWidth'],_0x2b71ee['displayHeight'],0x0,0x0,this['canvas']['width'],this['canvas']['height']),null!=this['pfuncCBIn']&&this['pfuncCBIn'](this['pUserIn']),0x1;}},{'key':'GetCanvasData','value':function(_0x25230b){console['log']('%c\\x20start\\x20time:'+new Date()['getMinutes']()+':'+new Date()['getSeconds']()+'.'+new Date()['getMilliseconds'](),'color:\\x20blue');var _0x574217=this['ctx']['getImageData'](0x0,0x0,this['canvas']['width'],this['canvas']['height']);console['log']('%c\\x202\\x20time:'+new Date()['getMinutes']()+':'+new Date()['getSeconds']()+'.'+new Date()['getMilliseconds'](),'color:\\x20blue');var _0x2d10bb='jpeg',_0x5a684e='image/jpeg',_0x6b5089=document['createElement']('canvas'),_0x5315a3=_0x6b5089['getContext']('2d');_0x6b5089['width']=this['canvas']['width'],_0x6b5089['height']=this['canvas']['height'],_0x5315a3['putImageData'](_0x574217,0x0,0x0);var _0x24024d=_0x6b5089['toDataURL'](),_0x26efe5=document['createElement']('a');_0x26efe5['download']=new Date()['getTime']()+'.'+_0x2d10bb,_0x26efe5['href']=_0x24024d,_0x26efe5['dataset']['downloadurl']=[_0x5a684e,_0x26efe5['download'],_0x26efe5['href']]['join'](':'),document['body']['appendChild'](_0x26efe5),_0x26efe5['click'](),document['body']['removeChild'](_0x26efe5),console['log']('%c\\x20end\\x20time:'+new Date()['getMinutes']()+':'+new Date()['getSeconds']()+'.'+new Date()['getMilliseconds'](),'color:\\x20blue');}},{'key':'SR_DelSubPort','value':function(_0x57fda8){return 0x0;}},{'key':'SR_AddSubPort','value':function(_0x36c54a){return 0x0;}},{'key':'SR_SetDisplayRect','value':function(_0x115279,_0xd4deec,_0x5a44bc,_0x341c14){this['regionSx']=_0x115279,this['regionSy']=_0xd4deec,this['regionSw']=_0x5a44bc,this['regionSh']=_0x341c14,this['needRect']=!0x0;}},{'key':'SR_Destroy','value':function(){this['canvas']=null,this['ctx']=null,this['regionSx']=0x0,this['regionSy']=0x0,this['regionSw']=0x0,this['regionSh']=0x0,this['needRect']=!0x1;}},{'key':'SR_SetCanvasSize','value':function(_0x585c32,_0x3f5351){this['canvas']['width']=_0x585c32,this['canvas']['height']=_0x3f5351;}},{'key':'SR_GetCanvasSize','value':function(){console['log']('canvas\\x20width:'+this['canvas']['width']+',height:'+this['canvas']['height']);}},{'key':'SR_SetAntialias','value':function(_0x41dd55){return _0x41dd55!=this['bAntialias']?(this['bAntialias']=_0x41dd55,this['bRecreateAntia']=!0x0):this['bRecreateAntia']=!0x1,this['bRecreateAntia']&&(this['bAntialias']?(this['canvas']['width']=0x5*this['canvas']['width'],this['canvas']['height']=0x5*this['canvas']['height'],this['canvas']['style']['transform']='scale(0.2)',this['canvas']['style']['transformOrigin']='0\\x200'):(this['canvas']['width']=this['canvas']['width']/0x5,this['canvas']['height']=this['canvas']['height']/0x5,this['canvas']['style']['transform']='scale(1)',this['canvas']['style']['transformOrigin']='0\\x200')),0x1;}},{'key':'SR_SetCallBack','value':function(_0x4d1e6d,_0x1f07ee,_0x3d33ea){switch(_0x3d33ea){case _0x444649:this['pfuncCBIn']=_0x4d1e6d,this['pUserIn']=_0x1f07ee;break;case _0x4f7368:this['pfuncCBOut']=_0x4d1e6d,this['pUserOut']=_0x1f07ee;break;default:return 0x0;}return 0x1;}},{'key':'SR_DrawFont','value':function(_0x2963cc,_0x4b046e,_0x516b83,_0x38303f,_0x31842a,_0x353830,_0x1a9008,_0x36e714,_0x39a389){var _0x27d4e5=[],_0x15ef3d={};return _0x15ef3d['bBackground']=_0x353830,_0x15ef3d['nFontWidth']=_0x38303f,_0x15ef3d['nFontHeight']=_0x31842a,_0x15ef3d['pstBGColor']=_0x1a9008,_0x15ef3d['pstFontColor']=_0x516b83,_0x15ef3d['pString']=_0x2963cc,_0x15ef3d['pstStartPos']=_0x4b046e,_0x15ef3d['fRotateAngle']=_0x36e714,_0x15ef3d['pFontFamily']=_0x39a389,_0x27d4e5['push'](_0x15ef3d),this['SR_DrawFontEx'](_0x27d4e5,0x1),0x1;}},{'key':'SR_DrawFontEx','value':function(_0x57d469,_0x12c5ae){for(var _0x2b5ed6=0x0;_0x2b5ed6<_0x12c5ae;_0x2b5ed6++){this['ctx']['textBaseline']='top';var _0x350f8f=_0x57d469[_0x2b5ed6]['nFontWidth'],_0x46fd6d=_0x57d469[_0x2b5ed6]['nFontHeight'],_0x2d8f2f=(_0x350f8f=Math['round'](_0x350f8f))<(_0x46fd6d=Math['round'](_0x46fd6d))?_0x350f8f:_0x46fd6d;this['ctx']['font']=_0x2d8f2f['toString']()+'px\\x20'+_0x57d469[_0x2b5ed6]['pFontFamily'];var _0x3e589a=parseInt(0xff*_0x57d469[_0x2b5ed6]['pstFontColor']['fR']),_0x4fd711=parseInt(0xff*_0x57d469[_0x2b5ed6]['pstFontColor']['fG']),_0x4755ae=parseInt(0xff*_0x57d469[_0x2b5ed6]['pstFontColor']['fB']),_0x43ec1f=_0x3e589a<0x10?'0'+_0x3e589a['toString'](0x10):_0x3e589a['toString'](0x10),_0x25bbfd=_0x4fd711<0x10?'0'+_0x4fd711['toString'](0x10):_0x4fd711['toString'](0x10),_0x1dead4=_0x4755ae<0x10?'0'+_0x4755ae['toString'](0x10):_0x4755ae['toString'](0x10);this['ctx']['fillStyle']='#'+_0x43ec1f+_0x25bbfd+_0x1dead4,this['ctx']['globalAlpha']=_0x57d469[_0x2b5ed6]['pstFontColor']['fA'],this['ctx']['fillText'](_0x57d469[_0x2b5ed6]['pString'],_0x57d469[_0x2b5ed6]['pstStartPos']['fX']*this['canvas']['width'],_0x57d469[_0x2b5ed6]['pstStartPos']['fY']*this['canvas']['height']);}return 0x1;}},{'key':'SR_DrawImage','value':function(_0x5e1584,_0x4fe178,_0x4811b5,_0xa8f872,_0x15dd02,_0x226fc5){return 0x1;}},{'key':'SR_DrawLinesEx','value':function(_0x564439,_0x1a98fd,_0x33d077,_0xaa2fdd){return 0x1;}}]),_0x142b4f;}()),_0x30cc90=(function(){function _0x132b86(){_0x54580d(this,_0x132b86),this['bPortAllocated']=[],this['pRenderParam']=[],this['pFishParam']=[],this['stPTZColor']=[],this['pPTZSetColor']=null,this['nBasePTZPointNum']=[],this['nOriPTZPointNum']=[],this['nPanoPTZPointNum']=[],this['nPTZFragmentNum']=[],this['pBasePTZPoints']=[],this['pPanoPTZPoints']=[],this['pRectPoints']=[],this['nPTZRectNum']=[],this['nPTZDisplayMode']=_0x569e7f,this['fRX1']=0x0,this['fRX2']=0x1,this['fRY1']=0x0,this['fRY2']=0x1,this['bBlack']=!0x1,this['pOriPTZPoints']=[],this['nWndPort']=_0x3cf544,this['nPlaceType']=0x0,this['nPTZFragmentNode']=[],this['bPTZSelected']=[],this['nPTZDisplayMode']=_0x495db0;for(var _0x26ae66=0x0;_0x26ae66<_0x379995;++_0x26ae66){this['bPortAllocated'][_0x26ae66]=!0x1,this['bPTZSelected'][_0x26ae66]=!0x1,this['pRenderParam'][_0x26ae66]=null,this['pFishParam'][_0x26ae66]=null,this['stPTZColor'][_0x26ae66]={},this['stPTZColor'][_0x26ae66]['fR']=0x0,this['stPTZColor'][_0x26ae66]['fG']=0x0,this['stPTZColor'][_0x26ae66]['fB']=0x0,this['stPTZColor'][_0x26ae66]['fA']=0x0,this['nBasePTZPointNum'][_0x26ae66]=0x0,this['nOriPTZPointNum'][_0x26ae66]=0x0,this['nPanoPTZPointNum'][_0x26ae66]=0x0,this['nPTZRectNum'][_0x26ae66]=0x0,this['pPanoPTZPoints'][_0x26ae66]=[],this['pRectPoints'][_0x26ae66]=[],this['pBasePTZPoints'][_0x26ae66]=[],this['pOriPTZPoints'][_0x26ae66]=[];for(var _0x4e780f=0x0;_0x4e780f<0x4;++_0x4e780f)this['pRectPoints'][_0x26ae66][_0x4e780f]={},this['pRectPoints'][_0x26ae66][_0x4e780f]['fX']=0x0,this['pRectPoints'][_0x26ae66][_0x4e780f]['fY']=0x0;for(var _0x1fa045=0x0;_0x1fa045<_0x4b88be;++_0x1fa045)this['pBasePTZPoints'][_0x26ae66][_0x1fa045]={},this['pBasePTZPoints'][_0x26ae66][_0x1fa045]['fX']=0x0,this['pBasePTZPoints'][_0x26ae66][_0x1fa045]['fY']=0x0,this['pOriPTZPoints'][_0x26ae66][_0x1fa045]={},this['pOriPTZPoints'][_0x26ae66][_0x1fa045]['fX']=0x0,this['pOriPTZPoints'][_0x26ae66][_0x1fa045]['fY']=0x0,this['pPanoPTZPoints'][_0x26ae66][_0x1fa045]={},this['pPanoPTZPoints'][_0x26ae66][_0x1fa045]['fX']=0x0,this['pPanoPTZPoints'][_0x26ae66][_0x1fa045]['fY']=0x0;this['nPTZFragmentNum'][_0x26ae66]=0x0,this['nPTZFragmentNode'][_0x26ae66]=[];for(var _0x5716c7=0x0;_0x5716c7<0x64;++_0x5716c7)this['nPTZFragmentNode'][_0x26ae66][_0x5716c7]=0x0;}this['InitColorList']();}return _0x4fd085(_0x132b86,[{'key':'GetFECPort','value':function(_0x422de9){for(var _0xeda2cb=_0x3cf544,_0x5a74b9=0x0;_0x5a74b9<_0x379995;++_0x5a74b9)if(0x0==this['bPortAllocated'][_0x5a74b9]){_0xeda2cb=_0x5a74b9;break;}if(_0xeda2cb==_0x3cf544)return _0xeda2cb;if(_0x422de9==_0x186ff9['SR_DE_NULL'])return _0xeda2cb;var _0xb974d1=this['JudgeDisplayEffect'](_0x422de9);if(_0xa87ede!=_0xb974d1)return this['FreeFECPort'](_0xeda2cb),_0xeda2cb=_0x3cf544;if(_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']==_0x422de9||_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']==_0x422de9||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']==_0x422de9||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']==_0x422de9||_0x186ff9['SR_DE_FISH_PANORAMA_WALL']==_0x422de9||_0x186ff9['SR_DE_FISH_ORIGINAL']==_0x422de9){if(_0x3cf544!=this['nWndPort'])return this['FreeFECPort'](_0xeda2cb),_0xeda2cb=_0x3cf544;this['nWndPort']=_0xeda2cb;}if(!(_0x186ff9['SR_DE_FISH_PTZ_CEILING']!=_0x422de9&&_0x186ff9['SR_DE_FISH_PTZ_FLOOR']!=_0x422de9&&_0x186ff9['SR_DE_FISH_PTZ_WALL']!=_0x422de9||_0x3cf544==this['nWndPort']||null==this['pRenderParam'][this['nWndPort']]||_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']!=this['pRenderParam'][this['nWndPort']]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']!=this['pRenderParam'][this['nWndPort']]['nDisplayEffect']))return this['FreeFECPort'](_0xeda2cb),_0xeda2cb=_0x3cf544;if(_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']==_0x422de9||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']==_0x422de9){for(var _0x183f86=0x0;_0x183f86<_0x379995;++_0x183f86)if(null!=this['pRenderParam'][_0x183f86]&&(_0x186ff9['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x183f86]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x183f86]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x183f86]['nDisplayEffect']))return this['FreeFECPort'](_0xeda2cb),_0xeda2cb=_0x3cf544;}if(_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==_0x422de9){for(var _0xde2840=0x0;_0xde2840<_0x379995;++_0xde2840)if(null!=this['pRenderParam'][_0xde2840]&&_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==this['pRenderParam'][_0xde2840]['nDisplayEffect'])return this['FreeFECPort'](_0xeda2cb),_0xeda2cb=_0x3cf544;}if(_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==_0x422de9){for(var _0x2ddcba=0x0;_0x2ddcba<_0x379995;++_0x2ddcba)if(null!=this['pRenderParam'][_0x2ddcba]&&_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==this['pRenderParam'][_0x2ddcba]['nDisplayEffect'])return this['FreeFECPort'](_0xeda2cb),_0xeda2cb=_0x3cf544;}return this['pRenderParam'][_0xeda2cb]={},this['pRenderParam'][_0xeda2cb]['fCosH']=0x1,this['pRenderParam'][_0xeda2cb]['fSinH']=0x0,this['pRenderParam'][_0xeda2cb]['fCosV']=0x1,this['pRenderParam'][_0xeda2cb]['fSinV']=0x0,this['pRenderParam'][_0xeda2cb]['fAngle']=0x0,this['pRenderParam'][_0xeda2cb]['fRX1']=this['fRX1'],this['pRenderParam'][_0xeda2cb]['fRX2']=this['fRX2'],this['pRenderParam'][_0xeda2cb]['fRY1']=this['fRY1'],this['pRenderParam'][_0xeda2cb]['fRY2']=this['fRY2'],this['pRenderParam'][_0xeda2cb]['bBlack']=this['bBlack'],this['pRenderParam'][_0xeda2cb]['fZoom']=0.035+0.8,this['pRenderParam'][_0xeda2cb]['nDisplayEffect']=_0x422de9,this['pRenderParam'][_0xeda2cb]['bBlack']=!0x1,this['pRenderParam'][_0xeda2cb]['bCut']=!0x1,this['pFishParam'][_0xeda2cb]={},this['pFishParam'][_0xeda2cb]['nFishParamType']=0x0,this['pFishParam'][_0xeda2cb]['bCut']=!0x1,this['pFishParam'][_0xeda2cb]['fAngle']=this['pRenderParam'][_0xeda2cb]['fAngle'],this['pFishParam'][_0xeda2cb]['fPTZX']=0.5,this['pFishParam'][_0xeda2cb]['fPTZY']=0.5,this['pFishParam'][_0xeda2cb]['fRXLeft']=this['pRenderParam'][_0xeda2cb]['fRX1'],this['pFishParam'][_0xeda2cb]['fRXRight']=this['pRenderParam'][_0xeda2cb]['fRX2'],this['pFishParam'][_0xeda2cb]['fRYTop']=this['pRenderParam'][_0xeda2cb]['fRY1'],this['pFishParam'][_0xeda2cb]['fRYBottom']=this['pRenderParam'][_0xeda2cb]['fRY2'],this['pFishParam'][_0xeda2cb]['bBlack']=this['pRenderParam'][_0xeda2cb]['bBlack'],this['pFishParam'][_0xeda2cb]['fZoom']=(this['pRenderParam'][_0xeda2cb]['fZoom']-0.8)/0x7,this['bPortAllocated'][_0xeda2cb]=!0x0,_0xeda2cb;}},{'key':'FreeFECPort','value':function(_0x450324){if(_0x450324<0x0||_0x450324>=_0x379995)return _0x31ddcf;this['nWndPort']==_0x450324&&(this['nWndPort']=_0x3cf544),null!=this['pRenderParam'][_0x450324]&&(this['pRenderParam'][_0x450324]['fCosH']=0x1,this['pRenderParam'][_0x450324]['fSinH']=0x0,this['pRenderParam'][_0x450324]['fCosV']=0x1,this['pRenderParam'][_0x450324]['fSinV']=0x0,this['pRenderParam'][_0x450324]['fAngle']=0x0,this['pRenderParam'][_0x450324]['fZoom']=0x0,this['pRenderParam'][_0x450324]['fRX1']=0x0,this['pRenderParam'][_0x450324]['fRX2']=0x1,this['pRenderParam'][_0x450324]['fRY1']=0x0,this['pRenderParam'][_0x450324]['fRY2']=0x1,this['pRenderParam'][_0x450324]['nDisplayEffect']=0x0,this['pRenderParam'][_0x450324]['bBlack']=!0x1,this['pRenderParam'][_0x450324]['bCut']=!0x1),null!=this['pFishParam'][_0x450324]&&(this['pFishParam'][_0x450324]['nFishParamType']=0x0,this['pFishParam'][_0x450324]['fRXLeft']=0x0,this['pFishParam'][_0x450324]['fRXRight']=0x1,this['pFishParam'][_0x450324]['fRYTop']=0x0,this['pFishParam'][_0x450324]['fRYBottom']=0x1,this['pFishParam'][_0x450324]['bBlack']=!0x1,this['pFishParam'][_0x450324]['bCut']=!0x1,this['pFishParam'][_0x450324]['fAngle']=0x0,this['pFishParam'][_0x450324]['fZoom']=0x0,this['pFishParam'][_0x450324]['fPTZX']=0.5,this['pFishParam'][_0x450324]['fPTZY']=0.5),this['nBasePTZPointNum'][_0x450324]=0x0,this['nOriPTZPointNum'][_0x450324]=0x0,this['nPanoPTZPointNum'][_0x450324]=0x0,this['nPTZRectNum'][_0x450324]=0x0;for(var _0x5851aa=0x0;_0x5851aa<0x4;++_0x5851aa)this['pRectPoints'][_0x450324][_0x5851aa]['fX']=0x0,this['pRectPoints'][_0x450324][_0x5851aa]['fY']=0x0;for(var _0x509c4c=0x0;_0x509c4c<_0x4b88be;++_0x509c4c)this['pBasePTZPoints'][_0x450324][_0x509c4c]['fX']=0x0,this['pBasePTZPoints'][_0x450324][_0x509c4c]['fY']=0x0,this['pOriPTZPoints'][_0x450324][_0x509c4c]['fX']=0x0,this['pOriPTZPoints'][_0x450324][_0x509c4c]['fY']=0x0,this['pPanoPTZPoints'][_0x450324][_0x509c4c]['fX']=0x0,this['pPanoPTZPoints'][_0x450324][_0x509c4c]['fY']=0x0;if(null!=this['pPTZSetColor']&&(this['pPTZSetColor'][_0x450324]['fA']=0x0,this['pPTZSetColor'][_0x450324]['fR']=0x0,this['pPTZSetColor'][_0x450324]['fG']=0x0,this['pPTZSetColor'][_0x450324]['fB']=0x0),this['bPTZSelected'][_0x450324]=!0x1,0x0!=this['nPlaceType']){var _0x46235e=!0x1;if(null!=this['pRenderParam'][i]){for(var _0x61e3ec=0x0;_0x61e3ec<_0x379995;++_0x61e3ec)if(null!=this['pRenderParam'][_0x61e3ec]&&(_0x186ff9['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PANORAMA_WALL']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_CEILING']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']==this['pRenderParam'][_0x61e3ec]['nDisplayEffect'])){_0x46235e=!0x0;break;}}_0x46235e||(this['nPlaceType']=0x0);}for(var _0x308bbb=!0x1,_0x30bc0d=0x0;_0x30bc0d<_0x379995;++_0x30bc0d)if(null!=this['pRenderParam'][_0x30bc0d]){_0x308bbb=!0x0;break;}_0x308bbb||(this['fRX1']=0x0,this['fRX2']=0x1,this['fRY1']=0x0,this['fRY2']=0x1,this['bBlack']=!0x1),this['nPTZFragmentNum'][_0x450324]=0x0;for(var _0x59d008=0x0;_0x59d008<0x64;++_0x59d008)this['nPTZFragmentNode'][_0x450324][_0x59d008]=0x0;return this['bPortAllocated'][_0x450324]=!0x1,_0xa87ede;}},{'key':'DeInit','value':function(){for(var _0x2a6913=0x0;_0x2a6913<_0x379995;++_0x2a6913){for(var _0x5c283e=0x0;_0x5c283e<0x4;++_0x5c283e)this['pRectPoints'][_0x2a6913][_0x5c283e]=null;for(var _0x164210=0x0;_0x164210<_0x4b88be;++_0x164210)this['pBasePTZPoints'][_0x2a6913][_0x164210]=null,this['pOriPTZPoints'][_0x2a6913][_0x164210]=null,this['pPanoPTZPoints'][_0x2a6913][_0x164210]=null;this['nPTZFragmentNum'][_0x2a6913]=0x0,this['nPTZFragmentNode'][_0x2a6913]=null,this['bPortAllocated'][_0x2a6913]=!0x1,this['bPTZSelected'][_0x2a6913]=!0x1,this['pRenderParam'][_0x2a6913]=null,this['pFishParam'][_0x2a6913]=null,this['stPTZColor'][_0x2a6913]=null,this['nBasePTZPointNum'][_0x2a6913]=0x0,this['nOriPTZPointNum'][_0x2a6913]=0x0,this['nPanoPTZPointNum'][_0x2a6913]=0x0,this['nPTZRectNum'][_0x2a6913]=0x0,this['pPanoPTZPoints'][_0x2a6913]=null,this['pRectPoints'][_0x2a6913]=null,this['pBasePTZPoints'][_0x2a6913]=null,this['pOriPTZPoints'][_0x2a6913]=null;}return this['bPortAllocated']=null,this['pRenderParam']=null,this['pFishParam']=null,this['stPTZColor']=null,this['pPTZSetColor']=null,this['nBasePTZPointNum']=null,this['nOriPTZPointNum']=null,this['nPanoPTZPointNum']=null,this['nPTZFragmentNum']=null,this['pBasePTZPoints']=null,this['pPanoPTZPoints']=null,this['pRectPoints']=null,this['nPTZRectNum']=null,this['nPTZDisplayMode']=_0x569e7f,this['fRX1']=0x0,this['fRX2']=0x1,this['fRY1']=0x0,this['fRY2']=0x1,this['bBlack']=!0x1,this['pOriPTZPoints']=null,this['pBasePTZPoints']=null,this['nWndPort']=_0x3cf544,this['nPlaceType']=0x0,this['nPTZFragmentNode']=null,this['bPTZSelected']=null,this['nPTZDisplayMode']=_0x495db0,_0xa87ede;}},{'key':'InitColorList','value':function(){this['stPTZColor'][0x0]['fR']=0.5,this['stPTZColor'][0x0]['fG']=0.5,this['stPTZColor'][0x0]['fB']=0x0,this['stPTZColor'][0x0]['fA']=0x1,this['stPTZColor'][0x1]['fR']=0x1,this['stPTZColor'][0x1]['fG']=0x0,this['stPTZColor'][0x1]['fB']=0x0,this['stPTZColor'][0x1]['fA']=0x1,this['stPTZColor'][0x2]['fR']=0x0,this['stPTZColor'][0x2]['fG']=0x1,this['stPTZColor'][0x2]['fB']=0x0,this['stPTZColor'][0x2]['fA']=0x1,this['stPTZColor'][0x3]['fR']=0x0,this['stPTZColor'][0x3]['fG']=0x0,this['stPTZColor'][0x3]['fB']=0x1,this['stPTZColor'][0x3]['fA']=0x1,this['stPTZColor'][0x4]['fR']=0x1,this['stPTZColor'][0x4]['fG']=0x1,this['stPTZColor'][0x4]['fB']=0x0,this['stPTZColor'][0x4]['fA']=0x1,this['stPTZColor'][0x5]['fR']=0.5,this['stPTZColor'][0x5]['fG']=0x0,this['stPTZColor'][0x5]['fB']=0x1,this['stPTZColor'][0x5]['fA']=0x1,this['stPTZColor'][0x6]['fR']=0x0,this['stPTZColor'][0x6]['fG']=0x1,this['stPTZColor'][0x6]['fB']=0x1,this['stPTZColor'][0x6]['fA']=0x1,this['stPTZColor'][0x7]['fR']=0x1,this['stPTZColor'][0x7]['fG']=0.5,this['stPTZColor'][0x7]['fB']=0x0,this['stPTZColor'][0x7]['fA']=0x1,this['stPTZColor'][0x8]['fR']=0x0,this['stPTZColor'][0x8]['fG']=0.5,this['stPTZColor'][0x8]['fB']=0.5,this['stPTZColor'][0x8]['fA']=0x1;for(var _0x4a606d=0x9;_0x4a606d<_0x379995;_0x4a606d++)this['stPTZColor'][_0x4a606d]['fR']=0x1*_0x4a606d/_0x379995,this['stPTZColor'][_0x4a606d]['fG']=0x1*_0x4a606d/_0x379995,this['stPTZColor'][_0x4a606d]['fB']=0x1*_0x4a606d/_0x379995,this['stPTZColor'][_0x4a606d]['fA']=0x1;return _0xa87ede;}},{'key':'GetRangePoints','value':function(_0x25d84b){if(_0x25d84b<0x0||_0x25d84b>=_0x379995)return _0x31ddcf;if(null==this['pRenderParam'][_0x25d84b])return _0x520965;var _0x547759=0x0,_0x13094f=0x0;switch(this['nOriPTZPointNum'][_0x25d84b]=0x0,this['nBasePTZPointNum'][_0x25d84b]=0x0,this['pRenderParam'][_0x25d84b]['nDisplayEffect']){case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:for(_0x13094f=0x0;_0x13094f<0x1;_0x13094f+=0.01)this['GetFishPTZCeiling'](_0x547759,_0x13094f,_0x25d84b);for(_0x13094f=0.9995,_0x547759=0x0;_0x547759<0x1;_0x547759+=0.02)this['GetFishPTZCeiling'](_0x547759,_0x13094f,_0x25d84b);for(_0x547759=0.999,_0x13094f=0.9995;_0x13094f>=0x0;_0x13094f-=0.01)this['GetFishPTZCeiling'](_0x547759,_0x13094f,_0x25d84b);for(_0x13094f=0x0,_0x547759=0.999;_0x547759>=0x0;_0x547759-=0.02)this['GetFishPTZCeiling'](_0x547759,_0x13094f,_0x25d84b);break;case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:for(_0x13094f=0x0;_0x13094f<0x1;_0x13094f+=0.01)this['GetFishPTZFloor'](_0x547759,_0x13094f,_0x25d84b);for(_0x13094f=0.9995,_0x547759=0x0;_0x547759<0x1;_0x547759+=0.02)this['GetFishPTZFloor'](_0x547759,_0x13094f,_0x25d84b);for(_0x547759=0.999,_0x13094f=0.9995;_0x13094f>=0x0;_0x13094f-=0.01)this['GetFishPTZFloor'](_0x547759,_0x13094f,_0x25d84b);for(_0x13094f=0x0,_0x547759=0.999;_0x547759>=0x0;_0x547759-=0.02)this['GetFishPTZFloor'](_0x547759,_0x13094f,_0x25d84b);break;case _0x186ff9['SR_DE_FISH_PTZ_WALL']:for(_0x13094f=0x0;_0x13094f<0x1;_0x13094f+=0.01)this['GetFishPTZWALL'](_0x547759,_0x13094f,_0x25d84b);for(_0x13094f=0.9995,_0x547759=0x0;_0x547759<0x1;_0x547759+=0.02)this['GetFishPTZWALL'](_0x547759,_0x13094f,_0x25d84b);for(_0x547759=0.999,_0x13094f=0.9995;_0x13094f>=0x0;_0x13094f-=0.01)this['GetFishPTZWALL'](_0x547759,_0x13094f,_0x25d84b);for(_0x13094f=0x0,_0x547759=0.999;_0x547759>=0x0;_0x547759-=0.02)this['GetFishPTZWALL'](_0x547759,_0x13094f,_0x25d84b);break;default:return _0x86aef9;}return _0xa87ede;}},{'key':'TransformPTZRangePoints','value':function(_0x2f3cac){if(_0x3cf544==this['nWndPort'])return _0x520965;if(null==this['pBasePTZPoints'][_0x2f3cac]||null==this['pRenderParam'][this['nWndPort']])return _0x520965;this['nPanoPTZPointNum'][_0x2f3cac]=0x0;var _0x3c706a=_0xa87ede,_0x2be664=this['nWndPort'];switch(this['pRenderParam'][_0x2be664]['nDisplayEffect']){case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:if(_0x3c706a=this['GetPanoPTZWall'](_0x2f3cac),_0xa87ede!=_0x3c706a)return _0x3c706a;break;case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:if(_0x3c706a=this['GetPanoPTZFloor'](_0x2f3cac),_0xa87ede!=_0x3c706a)return _0x3c706a;break;case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:if(_0x3c706a=this['GetPanoPTZCeiling'](_0x2f3cac),_0xa87ede!=_0x3c706a)return _0x3c706a;}return this['CalcPTZFragmentPoints'](_0x2f3cac),_0xa87ede;}},{'key':'GetRectPoints','value':function(_0x5e6c1c){if(_0x5e6c1c<0x0||_0x5e6c1c>=_0x379995)return _0x31ddcf;if(this['nWndPort']==_0x3cf544)return _0x520965;if(null==this['pRenderParam'][this['nWndPort']]||null==this['pFishParam'][_0x5e6c1c])return _0x520965;var _0x1f9178=this['pRenderParam'][this['nWndPort']]['nDisplayEffect'],_0x392ce2=_0xa87ede,_0x399f52={'fX':0x0,'fY':0x0};switch(_0x1f9178){case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:if(_0x392ce2=this['GetPointFish2PanoWall'](_0x399f52,this['pFishParam'][_0x5e6c1c]['fPTZX'],this['pFishParam'][_0x5e6c1c]['fPTZY']),_0xa87ede!=_0x392ce2)return _0x392ce2;break;case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:if(_0x392ce2=this['GetPointFish2PanoFloor'](_0x399f52,this['pFishParam'][_0x5e6c1c]['fPTZX'],this['pFishParam'][_0x5e6c1c]['fPTZY']),_0xa87ede!=_0x392ce2)return _0x86aef9==_0x392ce2&&(this['pRectPoints'][_0x5e6c1c]=null),_0x392ce2;break;case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:if(_0x392ce2=this['GetPointFish2PanoCeiling'](_0x399f52,this['pFishParam'][_0x5e6c1c]['fPTZX'],this['pFishParam'][_0x5e6c1c]['fPTZY']),_0xa87ede!=_0x392ce2)return _0x86aef9==_0x392ce2&&(this['pRectPoints'][_0x5e6c1c]=null),_0x392ce2;break;case _0x186ff9['SR_DE_FISH_ORIGINAL']:_0x399f52['fX']=this['pFishParam'][_0x5e6c1c]['fPTZX'],_0x399f52['fY']=this['pFishParam'][_0x5e6c1c]['fPTZY'];}if(null==this['pRectPoints'][_0x5e6c1c]){this['pRectPoints'][_0x5e6c1c]=[];for(var _0x1698af=0x0;_0x1698af<0x4;++_0x1698af)this['pRectPoints'][_0x5e6c1c][_0x1698af]={},this['pRectPoints'][_0x5e6c1c][_0x1698af]['fX']=0x0,this['pRectPoints'][_0x5e6c1c][_0x1698af]['fY']=0x0;}return this['pRectPoints'][_0x5e6c1c][0x0]['fX']=_0x399f52['fX']-_0x466865,this['pRectPoints'][_0x5e6c1c][0x0]['fY']=_0x399f52['fY']-_0x466865,this['pRectPoints'][_0x5e6c1c][0x1]['fX']=_0x399f52['fX']+_0x466865,this['pRectPoints'][_0x5e6c1c][0x1]['fY']=_0x399f52['fY']-_0x466865,this['pRectPoints'][_0x5e6c1c][0x2]['fX']=_0x399f52['fX']+_0x466865,this['pRectPoints'][_0x5e6c1c][0x2]['fY']=_0x399f52['fY']+_0x466865,this['pRectPoints'][_0x5e6c1c][0x3]['fX']=_0x399f52['fX']-_0x466865,this['pRectPoints'][_0x5e6c1c][0x3]['fY']=_0x399f52['fY']+_0x466865,this['nPTZRectNum'][_0x5e6c1c]=0x4,_0xa87ede;}},{'key':'GetFishPTZCeiling','value':function(_0x517b14,_0x2ce55a,_0x2434b6){var _0xf3955c,_0x3a92e4,_0x1cd7f2,_0x198938,_0x2f97b3,_0x108ac4,_0x49eb1e,_0x36d97d={'fX':0x0,'fY':0x0},_0x22b255={'fX':0x0,'fY':0x0},_0x5daa5e={'fX':0x0,'fY':0x0},_0x4af31d={};_0x198938=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x2f97b3=(this['fRX1']+this['fRX2'])/0x2*0x1,_0x108ac4=(this['fRY1']+this['fRY2'])/0x2*_0x198938,_0x49eb1e=(this['fRX2']-this['fRX1'])/0x2*0x1,_0x36d97d['fX']=_0x2ce55a-0.5,_0x36d97d['fY']=0.5-_0x517b14,_0xf3955c=this['pRenderParam'][_0x2434b6]['fZoom'],_0x22b255['fX']=_0x36d97d['fX'],_0x22b255['fY']=_0x36d97d['fY']*this['pRenderParam'][_0x2434b6]['fCosV']+_0xf3955c*this['pRenderParam'][_0x2434b6]['fSinV'],_0x3a92e4=_0xf3955c*this['pRenderParam'][_0x2434b6]['fCosV']-_0x36d97d['fY']*this['pRenderParam'][_0x2434b6]['fSinV'],_0x1cd7f2=Math['sqrt'](_0x22b255['fX']*_0x22b255['fX']+_0x22b255['fY']*_0x22b255['fY']);var _0x1ce234=Math['sqrt'](_0x22b255['fX']*_0x22b255['fX']+_0x22b255['fY']*_0x22b255['fY']+_0x3a92e4*_0x3a92e4),_0x1e49ba=Math['asin'](_0x1cd7f2/_0x1ce234)/1.5707963*0.5;_0x22b255['fX']=_0x1e49ba*_0x22b255['fX']/_0x1cd7f2,_0x22b255['fY']=_0x1e49ba*_0x22b255['fY']/_0x1cd7f2,_0x5daa5e['fX']=_0x22b255['fX']*this['pRenderParam'][_0x2434b6]['fCosH']-_0x22b255['fY']*this['pRenderParam'][_0x2434b6]['fSinH'],_0x5daa5e['fY']=_0x22b255['fX']*this['pRenderParam'][_0x2434b6]['fSinH']+_0x22b255['fY']*this['pRenderParam'][_0x2434b6]['fCosH'],_0x4af31d['fX']=0x2*_0x5daa5e['fX']*_0x49eb1e+_0x2f97b3,_0x4af31d['fY']=0x2*-_0x5daa5e['fY']*_0x49eb1e+_0x108ac4;var _0x2433b8=this['nBasePTZPointNum'][_0x2434b6];this['pBasePTZPoints'][_0x2434b6][_0x2433b8]['fX']=_0x5daa5e['fX']+0.5,this['pBasePTZPoints'][_0x2434b6][_0x2433b8]['fY']=0.5-_0x5daa5e['fY'],this['nBasePTZPointNum'][_0x2434b6]=this['nBasePTZPointNum'][_0x2434b6]+0x1;var _0x308ac9=this['fRX1']<=0x0?0x0:0x1*this['fRX1'],_0x4efb75=this['fRY1']<=0x0?0x0:this['fRY1']*_0x198938,_0x17a5c7=this['fRX2']>=0x1?0x1-_0x308ac9:0x1*this['fRX2']-_0x308ac9,_0x5f1e62=this['fRY2']>=0x1?_0x198938-_0x4efb75:this['fRY2']*_0x198938-_0x4efb75;if(_0x4af31d['fX']=(_0x4af31d['fX']-_0x308ac9)/_0x17a5c7,_0x4af31d['fY']=(_0x4af31d['fY']-_0x4efb75)/_0x5f1e62,_0x4af31d['fX']<=0x1&&_0x4af31d['fY']<=0x1&&_0x4af31d['fX']>=0x0&&_0x4af31d['fY']>=0x0){var _0x37b5f2=this['nOriPTZPointNum'][_0x2434b6];this['pOriPTZPoints'][_0x2434b6][_0x37b5f2]['fX']=_0x4af31d['fX'],this['pOriPTZPoints'][_0x2434b6][_0x37b5f2]['fY']=_0x4af31d['fY'],this['nOriPTZPointNum'][_0x2434b6]=this['nOriPTZPointNum'][_0x2434b6]+0x1;}return _0xa87ede;}},{'key':'GetFishPTZFloor','value':function(_0x5d64c8,_0x230377,_0x20b682){var _0x2402ff,_0x2bb293,_0x51bf0f,_0x1f4a36,_0x11cb3a,_0x7fb709,_0x1491eb,_0x598378={'fX':0x0,'fY':0x0},_0x737f5e={'fX':0x0,'fY':0x0},_0x185f6e={'fX':0x0,'fY':0x0},_0x243ac0={};_0x1f4a36=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x11cb3a=(this['fRX1']+this['fRX2'])/0x2*0x1,_0x7fb709=(this['fRY1']+this['fRY2'])/0x2*_0x1f4a36,_0x1491eb=(this['fRX2']-this['fRX1'])/0x2*0x1,_0x598378['fX']=_0x5d64c8-0.5,_0x598378['fY']=_0x230377-0.5,_0x2402ff=this['pRenderParam'][_0x20b682]['fZoom'],_0x737f5e['fX']=_0x598378['fX'],_0x737f5e['fY']=_0x598378['fY']*this['pRenderParam'][_0x20b682]['fCosV']+_0x2402ff*this['pRenderParam'][_0x20b682]['fSinV'],_0x2bb293=_0x2402ff*this['pRenderParam'][_0x20b682]['fCosV']-_0x598378['fY']*this['pRenderParam'][_0x20b682]['fSinV'],_0x51bf0f=Math['sqrt'](_0x737f5e['fX']*_0x737f5e['fX']+_0x737f5e['fY']*_0x737f5e['fY']);var _0x441996=Math['sqrt'](_0x737f5e['fX']*_0x737f5e['fX']+_0x737f5e['fY']*_0x737f5e['fY']+_0x2bb293*_0x2bb293),_0x3be58c=Math['asin'](_0x51bf0f/_0x441996)/1.5707963*0.5;_0x737f5e['fX']=_0x3be58c*_0x737f5e['fX']/_0x51bf0f,_0x737f5e['fY']=_0x3be58c*_0x737f5e['fY']/_0x51bf0f,_0x185f6e['fX']=_0x737f5e['fX']*this['pRenderParam'][_0x20b682]['fCosH']-_0x737f5e['fY']*this['pRenderParam'][_0x20b682]['fSinH'],_0x185f6e['fY']=_0x737f5e['fX']*this['pRenderParam'][_0x20b682]['fSinH']+_0x737f5e['fY']*this['pRenderParam'][_0x20b682]['fCosH'],_0x243ac0['fX']=0x2*_0x185f6e['fX']*_0x1491eb+_0x11cb3a,_0x243ac0['fY']=0x2*_0x185f6e['fY']*_0x1491eb+_0x7fb709;var _0x15bcf5=this['nBasePTZPointNum'][_0x20b682];this['pBasePTZPoints'][_0x20b682][_0x15bcf5]['fX']=_0x185f6e['fX']+0.5,this['pBasePTZPoints'][_0x20b682][_0x15bcf5]['fY']=_0x185f6e['fY']+0.5,this['nBasePTZPointNum'][_0x20b682]=this['nBasePTZPointNum'][_0x20b682]+0x1;var _0x1e561a=this['fRX1']<=0x0?0x0:0x1*this['fRX1'],_0x19a04e=this['fRY1']<=0x0?0x0:this['fRY1']*_0x1f4a36,_0x470745=this['fRX2']>=0x1?0x1-_0x1e561a:0x1*this['fRX2']-_0x1e561a,_0x3ffe59=this['fRY2']>=0x1?_0x1f4a36-_0x19a04e:this['fRY2']*_0x1f4a36-_0x19a04e;if(_0x243ac0['fX']=(_0x243ac0['fX']-_0x1e561a)/_0x470745,_0x243ac0['fY']=(_0x243ac0['fY']-_0x19a04e)/_0x3ffe59,_0x243ac0['fX']<=0x1&&_0x243ac0['fY']<=0x1&&_0x243ac0['fX']>=0x0&&_0x243ac0['fY']>=0x0){var _0xf69c5b=this['nOriPTZPointNum'][_0x20b682];this['pOriPTZPoints'][_0x20b682][_0xf69c5b]['fX']=_0x243ac0['fX'],this['pOriPTZPoints'][_0x20b682][_0xf69c5b]['fY']=_0x243ac0['fY'],this['nOriPTZPointNum'][_0x20b682]=this['nOriPTZPointNum'][_0x20b682]+0x1;}return _0xa87ede;}},{'key':'GetFishPTZWALL','value':function(_0x38c74c,_0x5d9e53,_0x98f087){var _0x596ea3,_0x51bf3e,_0x5780c4,_0x3e49f7,_0x30dad9,_0x10ea85,_0x27a63e,_0x51e487,_0x31152b={'fX':0x0,'fY':0x0},_0x4df952={'fX':0x0,'fY':0x0},_0x5e7e33={'fX':0x0,'fY':0x0},_0x44bf25={};_0x30dad9=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x10ea85=(this['fRX1']+this['fRX2'])/0x2*0x1,_0x27a63e=(this['fRY1']+this['fRY2'])/0x2*_0x30dad9,_0x51e487=(this['fRX2']-this['fRX1'])/0x2*0x1,_0x31152b['fX']=_0x5d9e53-0.5,_0x31152b['fY']=_0x38c74c-0.5,_0x596ea3=this['pRenderParam'][_0x98f087]['fZoom'],_0x4df952['fX']=_0x31152b['fX'],_0x4df952['fY']=_0x31152b['fY']*this['pRenderParam'][_0x98f087]['fCosV']+_0x596ea3*this['pRenderParam'][_0x98f087]['fSinV'],_0x51bf3e=_0x596ea3*this['pRenderParam'][_0x98f087]['fCosV']-_0x31152b['fY']*this['pRenderParam'][_0x98f087]['fSinV'],_0x5e7e33['fX']=_0x4df952['fX']*this['pRenderParam'][_0x98f087]['fCosH']+_0x51bf3e*this['pRenderParam'][_0x98f087]['fSinH'],_0x5e7e33['fY']=_0x4df952['fY'],_0x5780c4=_0x51bf3e*this['pRenderParam'][_0x98f087]['fCosH']-_0x4df952['fX']*this['pRenderParam'][_0x98f087]['fSinH'],_0x3e49f7=Math['sqrt'](_0x5e7e33['fX']*_0x5e7e33['fX']+_0x5e7e33['fY']*_0x5e7e33['fY']);var _0x9e123=Math['sqrt'](_0x5e7e33['fX']*_0x5e7e33['fX']+_0x5e7e33['fY']*_0x5e7e33['fY']+_0x5780c4*_0x5780c4),_0x14461f=Math['asin'](_0x3e49f7/_0x9e123)/1.5707963*0.5;_0x44bf25['fX']=_0x14461f*_0x5e7e33['fX']/_0x3e49f7*_0x51e487*0x2+_0x10ea85,_0x44bf25['fY']=_0x14461f*_0x5e7e33['fY']/_0x3e49f7*_0x51e487*0x2+_0x27a63e;var _0x18649b=this['nBasePTZPointNum'][_0x98f087];this['pBasePTZPoints'][_0x98f087][_0x18649b]['fX']=_0x14461f*_0x5e7e33['fX']/_0x3e49f7+0.5,this['pBasePTZPoints'][_0x98f087][_0x18649b]['fY']=_0x14461f*_0x5e7e33['fY']/_0x3e49f7+0.5,this['nBasePTZPointNum'][_0x98f087]=this['nBasePTZPointNum'][_0x98f087]+0x1;var _0x240ce4=this['fRX1']<=0x0?0x0:0x1*this['fRX1'],_0x5017ea=this['fRY1']<=0x0?0x0:this['fRY1']*_0x30dad9,_0x22234a=this['fRX2']>=0x1?0x1-_0x240ce4:0x1*this['fRX2']-_0x240ce4,_0x1a56a0=this['fRY2']>=0x1?_0x30dad9-_0x5017ea:this['fRY2']*_0x30dad9-_0x5017ea;if(_0x44bf25['fX']=(_0x44bf25['fX']-_0x240ce4)/_0x22234a,_0x44bf25['fY']=(_0x44bf25['fY']-_0x5017ea)/_0x1a56a0,_0x44bf25['fX']<=0x1&&_0x44bf25['fY']<=0x1&&_0x44bf25['fX']>=0x0&&_0x44bf25['fY']>=0x0){var _0x19cc2f=this['nOriPTZPointNum'][_0x98f087];this['pOriPTZPoints'][_0x98f087][_0x19cc2f]['fX']=_0x44bf25['fX'],this['pOriPTZPoints'][_0x98f087][_0x19cc2f]['fY']=_0x44bf25['fY'],this['nOriPTZPointNum'][_0x98f087]=this['nOriPTZPointNum'][_0x98f087]+0x1;}return _0xa87ede;}},{'key':'GetPanoPTZCeiling','value':function(_0x263f7b){if(null==this['pRenderParam'][_0x263f7b]||null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==this['pBasePTZPoints'][_0x263f7b])return _0x520965;var _0x22ec24,_0x2ebe10,_0x186506=this['nBasePTZPointNum'][_0x263f7b];_0x22ec24=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x2ebe10=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x22da37,_0x18297c=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRY1']<0x0||this['fRX1']<0x0)&&(this['fRX1']<0x0&&(_0x22da37=0x1*-this['fRX1'])>_0x18297c&&(_0x18297c=_0x22da37),this['fRX2']>0x1&&(_0x22da37=0x1*(this['fRX2']-0x1))>_0x18297c&&(_0x18297c=_0x22da37),this['fRY1']<0x0&&(_0x22da37=-this['fRY1']*_0x22ec24)>_0x18297c&&(_0x18297c=_0x22da37),this['fRY2']>0x1&&(_0x22da37=(this['fRY2']-0x1)*_0x22ec24)>_0x18297c&&(_0x18297c=_0x22da37));for(var _0xf6789b,_0x579bb=_0x18297c/_0x2ebe10,_0x1304b7={'fX':0x0,'fY':0x0},_0x16843f={'fX':0x0,'fY':0x0},_0x581f36=0x0;_0x581f36<_0x186506;++_0x581f36)if(_0x16843f['fX']=this['pBasePTZPoints'][_0x263f7b][_0x581f36]['fX'],_0x16843f['fY']=this['pBasePTZPoints'][_0x263f7b][_0x581f36]['fY'],!(Math['abs'](_0x16843f['fX']-0.5)<_0x4a23c6&&Math['abs'](_0x16843f['fY']-0.5)<_0x4a23c6)){var _0x27e377={'fX':0x0,'fY':0x0},_0x542b58={'fX':0x0,'fY':0x0};_0x27e377['fX']=_0x16843f['fX']-0.5,_0x27e377['fY']=_0x16843f['fY']-0.5,_0x542b58['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x542b58['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0x30de9a=Math['sqrt'](_0x27e377['fX']*_0x27e377['fX']+_0x27e377['fY']*_0x27e377['fY']),_0x3fb02f=Math['sqrt'](_0x542b58['fX']*_0x542b58['fX']+_0x542b58['fY']*_0x542b58['fY']);if(_0xf6789b=Math['acos']((_0x27e377['fX']*_0x542b58['fX']+_0x27e377['fY']*_0x542b58['fY'])/(_0x30de9a*_0x3fb02f)),_0x27e377['fX']*_0x542b58['fY']-_0x27e377['fY']*_0x542b58['fX']>0x0&&(_0xf6789b=6.2831852-_0xf6789b),_0x1304b7['fX']=_0xf6789b/6.2831853,_0x1304b7['fY']=(0x2*(0.5-_0x30de9a)-_0x579bb)/(0.8-_0x579bb),_0x1304b7['fY']>=0x0&&_0x1304b7['fX']>=0x0&&_0x1304b7['fY']<=0x1&&_0x1304b7['fX']<=0x1){var _0x2a305c=this['nPanoPTZPointNum'][_0x263f7b];this['pPanoPTZPoints'][_0x263f7b][_0x2a305c]['fX']=_0x1304b7['fX'],this['pPanoPTZPoints'][_0x263f7b][_0x2a305c]['fY']=_0x1304b7['fY'],this['nPanoPTZPointNum'][_0x263f7b]=this['nPanoPTZPointNum'][_0x263f7b]+0x1;}}return _0xa87ede;}},{'key':'GetPanoPTZFloor','value':function(_0x5d0fc0){if(null==this['pRenderParam'][_0x5d0fc0]||null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==this['pBasePTZPoints'][_0x5d0fc0])return _0x520965;var _0x100b2a,_0x18120b,_0x19ec44=this['nBasePTZPointNum'][_0x5d0fc0];_0x100b2a=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x18120b=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x543faf,_0x261275=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRY1']<0x0||this['fRX1']<0x0)&&(this['fRX1']<0x0&&(_0x543faf=0x1*-this['fRX1'])>_0x261275&&(_0x261275=_0x543faf),this['fRX2']>0x1&&(_0x543faf=0x1*(this['fRX2']-0x1))>_0x261275&&(_0x261275=_0x543faf),this['fRY1']<0x0&&(_0x543faf=-this['fRY1']*_0x100b2a)>_0x261275&&(_0x261275=_0x543faf),this['fRY2']>0x1&&(_0x543faf=(this['fRY2']-0x1)*_0x100b2a)>_0x261275&&(_0x261275=_0x543faf));for(var _0x2f2b37,_0x27bd4a=_0x261275/_0x18120b,_0x2a79e7={'fX':0x0,'fY':0x0},_0x10ed1b={'fX':0x0,'fY':0x0},_0x54ae89=0x0;_0x54ae89<_0x19ec44;++_0x54ae89)if(_0x10ed1b['fX']=this['pBasePTZPoints'][_0x5d0fc0][_0x54ae89]['fX'],_0x10ed1b['fY']=this['pBasePTZPoints'][_0x5d0fc0][_0x54ae89]['fY'],!(Math['abs'](_0x10ed1b['fX']-0.5)<_0x4a23c6&&Math['abs'](_0x10ed1b['fY']-0.5)<_0x4a23c6)){var _0x2ecec4={'fX':0x0,'fY':0x0},_0x2f6c97={'fX':0x0,'fY':0x0};_0x2ecec4['fX']=_0x10ed1b['fX']-0.5,_0x2ecec4['fY']=_0x10ed1b['fY']-0.5,_0x2f6c97['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x2f6c97['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0x4e4dea=Math['sqrt'](_0x2ecec4['fX']*_0x2ecec4['fX']+_0x2ecec4['fY']*_0x2ecec4['fY']),_0x186af7=Math['sqrt'](_0x2f6c97['fX']*_0x2f6c97['fX']+_0x2f6c97['fY']*_0x2f6c97['fY']);if(_0x2f2b37=Math['acos']((_0x2ecec4['fX']*_0x2f6c97['fX']+_0x2ecec4['fY']*_0x2f6c97['fY'])/(_0x4e4dea*_0x186af7)),_0x2ecec4['fX']*_0x2f6c97['fY']-_0x2ecec4['fY']*_0x2f6c97['fX']>0x0&&(_0x2f2b37=6.2831852-_0x2f2b37),_0x2a79e7['fX']=0x1-_0x2f2b37/6.2831853,_0x2a79e7['fY']=0x1-(0x2*(0.5-_0x4e4dea)-_0x27bd4a)/(0.8-_0x27bd4a),_0x2a79e7['fY']>=0x0&&_0x2a79e7['fX']>=0x0&&_0x2a79e7['fY']<=0x1&&_0x2a79e7['fX']<=0x1){var _0x16ff25=this['nPanoPTZPointNum'][_0x5d0fc0];this['pPanoPTZPoints'][_0x5d0fc0][_0x16ff25]['fX']=_0x2a79e7['fX'],this['pPanoPTZPoints'][_0x5d0fc0][_0x16ff25]['fY']=_0x2a79e7['fY'],this['nPanoPTZPointNum'][_0x5d0fc0]=this['nPanoPTZPointNum'][_0x5d0fc0]+0x1;}}return _0xa87ede;}},{'key':'GetPanoPTZWall','value':function(_0x42a7bd){if(null==this['pRenderParam'][_0x42a7bd]||null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==this['pBasePTZPoints'][_0x42a7bd])return _0x520965;var _0x564e3d,_0x3e602d,_0x423c9f=this['nBasePTZPointNum'][_0x42a7bd];_0x564e3d=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x3e602d=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x56aaa5,_0x1f4537,_0x54b6be,_0xb5f14d,_0x49fdb6,_0x2fb7bb=0x0,_0xf39383=0x1,_0x5125ea=0.1,_0x2b07de=0.9;this['fRX1']<0x0&&(_0x56aaa5=0x1*-this['fRX1'],_0x2fb7bb=_0x56aaa5/=0x2*_0x3e602d),this['fRX2']>0x1&&(_0x1f4537=0x1*(this['fRX2']-0x1),_0xf39383=0x1-(_0x1f4537/=0x2*_0x3e602d)),this['fRY1']<0x0&&(_0x54b6be=-this['fRY1']*_0x564e3d,_0x5125ea=(_0x54b6be/=0x2*_0x3e602d)>0.1?_0x54b6be:0.1),this['fRY2']>0x1&&(_0xb5f14d=(this['fRY2']-0x1)*_0x564e3d,_0x2b07de=(_0xb5f14d/=0x2*_0x3e602d)>0x1-0.9?0x1-_0xb5f14d:0.9);for(var _0x51c7d7={'fX':0x0,'fY':0x0},_0x15cbb7={'fX':0x0,'fY':0x0},_0x211521=0x0;_0x211521<_0x423c9f;++_0x211521){_0x15cbb7['fX']=this['pBasePTZPoints'][_0x42a7bd][_0x211521]['fX'],_0x15cbb7['fY']=this['pBasePTZPoints'][_0x42a7bd][_0x211521]['fY'];var _0x8074a7=0x2*_0x15cbb7['fX']*_0x3e602d,_0x445fec=0x2*_0x15cbb7['fY']*_0x3e602d;if(_0x49fdb6=Math['sqrt'](_0x3e602d*_0x3e602d-(_0x445fec-_0x3e602d)*(_0x445fec-_0x3e602d)),!(Math['abs'](_0x49fdb6)<_0x4a23c6)&&(_0x15cbb7['fX']=_0x3e602d*(_0x8074a7-_0x3e602d)/_0x49fdb6+_0x3e602d,_0x15cbb7['fY']=_0x445fec,_0x51c7d7['fX']=(_0x15cbb7['fX']-0x2*_0x2fb7bb*_0x3e602d)/(0x2*(_0xf39383-_0x2fb7bb)*_0x3e602d),_0x51c7d7['fY']=(_0x15cbb7['fY']-0x2*_0x5125ea*_0x3e602d)/(0x2*(_0x2b07de-_0x5125ea)*_0x3e602d),_0x51c7d7['fY']>=0x0&&_0x51c7d7['fX']>=0x0&&_0x51c7d7['fY']<=0x1&&_0x51c7d7['fX']<=0x1)){var _0x4f41e4=this['nPanoPTZPointNum'][_0x42a7bd];this['pPanoPTZPoints'][_0x42a7bd][_0x4f41e4]['fX']=_0x51c7d7['fX'],this['pPanoPTZPoints'][_0x42a7bd][_0x4f41e4]['fY']=_0x51c7d7['fY'],this['nPanoPTZPointNum'][_0x42a7bd]=this['nPanoPTZPointNum'][_0x42a7bd]+0x1;}}return _0xa87ede;}},{'key':'GetPointPano2FishCeiling','value':function(_0x2f3dd8,_0x7b3d9e,_0x3c003f){if(null==_0x2f3dd8||null==this['pRenderParam'][this['nWndPort']])return _0x520965;var _0x1ca50d,_0x4730c9;_0x1ca50d=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x4730c9=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x1f6f27,_0x49d370=0x0,_0x4968e2=0x1,_0x30c450=0x0,_0x4aba84=0x1,_0xfcab6e=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&((_0x1f6f27=0x1*-this['fRX1'])>_0xfcab6e&&(_0xfcab6e=_0x1f6f27),_0x49d370=_0x1f6f27/=0x2*_0x4730c9),this['fRX2']>0x1&&((_0x1f6f27=0x1*(this['fRX2']-0x1))>_0xfcab6e&&(_0xfcab6e=_0x1f6f27),_0x4968e2=0x1-(_0x1f6f27/=0x2*_0x4730c9)),this['fRY1']<0x0&&((_0x1f6f27=-this['fRY1']*_0x1ca50d)>_0xfcab6e&&(_0xfcab6e=_0x1f6f27),_0x30c450=_0x1f6f27/=0x2*_0x4730c9),this['fRY2']>0x1&&((_0x1f6f27=(this['fRY2']-0x1)*_0x1ca50d)>_0xfcab6e&&(_0xfcab6e=_0x1f6f27),_0x4aba84=0x1-(_0x1f6f27/=0x2*_0x4730c9)));var _0x236287,_0x1b3214,_0x39bc45=_0xfcab6e/_0x4730c9,_0x59c55c={},_0x1adaf={};return _0x59c55c['fX']=_0x7b3d9e,_0x59c55c['fY']=(0.8-_0x39bc45)*_0x3c003f+_0x39bc45,_0x236287=6.2831853*_0x59c55c['fX']+this['pRenderParam'][this['nWndPort']]['fAngle'],_0x1b3214=0.5*(0x1-_0x59c55c['fY']),_0x1adaf['fX']=0.5-_0x1b3214*Math['sin'](_0x236287),_0x1adaf['fY']=0.5+_0x1b3214*Math['cos'](_0x236287),_0x1adaf['fX']=(_0x1adaf['fX']-_0x49d370)/(_0x4968e2-_0x49d370),_0x1adaf['fY']=(_0x1adaf['fY']-_0x30c450)/(_0x4aba84-_0x30c450),_0x2f3dd8['fX']=_0x1adaf['fX'],_0x2f3dd8['fY']=_0x1adaf['fY'],_0xa87ede;}},{'key':'GetPointPano2FishFloor','value':function(_0x307474,_0xee954,_0x3a3359){if(null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==_0x307474)return _0x31ddcf;var _0x311c35,_0x29e646;_0x311c35=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x29e646=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x42c110,_0x530bbd=0x0,_0x45eecf=0x1,_0x12cd4a=0x0,_0x405165=0x1,_0x5a35b9=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&((_0x42c110=0x1*-this['fRX1'])>_0x5a35b9&&(_0x5a35b9=_0x42c110),_0x530bbd=_0x42c110/=0x2*_0x29e646),this['fRX2']>0x1&&((_0x42c110=0x1*(this['fRX2']-0x1))>_0x5a35b9&&(_0x5a35b9=_0x42c110),_0x45eecf=0x1-(_0x42c110/=0x2*_0x29e646)),this['fRY1']<0x0&&((_0x42c110=-this['fRY1']*_0x311c35)>_0x5a35b9&&(_0x5a35b9=_0x42c110),_0x12cd4a=_0x42c110/=0x2*_0x29e646),this['fRY2']>0x1&&((_0x42c110=(this['fRY2']-0x1)*_0x311c35)>_0x5a35b9&&(_0x5a35b9=_0x42c110),_0x405165=0x1-(_0x42c110/=0x2*_0x29e646)));var _0x1ce7ff,_0x30ab48,_0x21a80b=_0x5a35b9/_0x29e646,_0x38a985={},_0x3a7f13={};return _0x38a985['fX']=0x1-_0xee954,_0x38a985['fY']=(0.8-_0x21a80b)*(0x1-_0x3a3359)+_0x21a80b,_0x1ce7ff=6.2831853*_0x38a985['fX']+this['pRenderParam'][this['nWndPort']]['fAngle'],_0x30ab48=0.5*(0x1-_0x38a985['fY']),_0x3a7f13['fX']=0.5-_0x30ab48*Math['sin'](_0x1ce7ff),_0x3a7f13['fY']=0.5+_0x30ab48*Math['cos'](_0x1ce7ff),_0x3a7f13['fX']=(_0x3a7f13['fX']-_0x530bbd)/(_0x45eecf-_0x530bbd),_0x3a7f13['fY']=(_0x3a7f13['fY']-_0x12cd4a)/(_0x405165-_0x12cd4a),_0x307474['fX']=_0x3a7f13['fX'],_0x307474['fY']=_0x3a7f13['fY'],_0xa87ede;}},{'key':'GetPointPano2FishWall','value':function(_0x48426c,_0x191ed4,_0x4abadc){if(null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==_0x48426c)return _0x31ddcf;var _0xb24078,_0x4bdf86;_0xb24078=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x4bdf86=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x42a26f,_0x12f390,_0x4672e7,_0x31bf4b,_0x215ccf=0x0,_0x42b094=0x1,_0x6ef8c2=0.1,_0x31cf8e=0.9,_0xb08d5e=0x0,_0x33e210=0x1,_0x34cc54=0x0,_0x490ecc=0x1;this['fRX1']<0x0&&(_0x42a26f=0x1*-this['fRX1'],_0x215ccf=_0x42a26f/=0x2*_0x4bdf86,_0xb08d5e=_0x42a26f),this['fRX2']>0x1&&(_0x12f390=0x1*(this['fRX2']-0x1),_0x42b094=0x1-(_0x12f390/=0x2*_0x4bdf86),_0x33e210=0x1-_0x12f390),this['fRY1']<0x0&&(_0x4672e7=-this['fRY1']*_0xb24078,_0x6ef8c2=(_0x4672e7/=0x2*_0x4bdf86)>0.1?_0x4672e7:0.1,_0x34cc54=_0x4672e7),this['fRY2']>0x1&&(_0x31bf4b=(this['fRY2']-0x1)*_0xb24078,_0x31cf8e=(_0x31bf4b/=0x2*_0x4bdf86)>0x1-0.9?0x1-_0x31bf4b:0.9,_0x490ecc=0x1-_0x31bf4b);var _0x41527b={},_0xcbadff={};_0x41527b['fX']=_0x191ed4*(_0x42b094-_0x215ccf)+_0x215ccf,_0x41527b['fY']=_0x4abadc*(_0x31cf8e-_0x6ef8c2)+_0x6ef8c2;var _0x4dc2a0=Math['sqrt'](0.25-(_0x41527b['fY']-0.5)*(_0x41527b['fY']-0.5));return _0xcbadff['fX']=(_0x41527b['fX']-0.5)*_0x4dc2a0/0.5+0.5,_0xcbadff['fY']=_0x41527b['fY'],_0xcbadff['fX']=(_0xcbadff['fX']-_0xb08d5e)/(_0x33e210-_0xb08d5e),_0xcbadff['fY']=(_0xcbadff['fY']-_0x34cc54)/(_0x490ecc-_0x34cc54),_0x48426c['fX']=_0xcbadff['fX'],_0x48426c['fY']=_0xcbadff['fY'],_0xa87ede;}},{'key':'UpdatePTZPosition','value':function(_0x2da374,_0x47dd34,_0x416e91){if(null==this['pRenderParam'][_0x2da374])return _0x520965;var _0x3368ab={'fHAngleSin':0x0,'fHAngleCos':0x0,'fVAngleSin':0x0,'fVAngleCos':0x0},_0x22c4dc=_0xa87ede;if(_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x2da374]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x2da374]['nDisplayEffect']){if((_0x22c4dc=this['ComputeAngleVertical'](_0x47dd34,_0x416e91,_0x3368ab,this['pRenderParam'][_0x2da374]['nDisplayEffect']))!=_0xa87ede)return _0x22c4dc;}else{if(_0x186ff9['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x2da374]['nDisplayEffect'])return _0x86aef9;if((_0x22c4dc=this['ComputeAngleHorizontal'](_0x47dd34,_0x416e91,_0x3368ab))!=_0xa87ede)return _0x22c4dc;}return 0x0==this['IsInImage'](this['fRX1'],this['fRX2'],this['fRY1'],this['fRY2'],_0x3368ab,this['pRenderParam'][_0x2da374]['fZoom'],this['pRenderParam'][_0x2da374]['nDisplayEffect'])?_0x31ddcf:(this['pRenderParam'][_0x2da374]['fCosH']=_0x3368ab['fHAngleCos'],this['pRenderParam'][_0x2da374]['fSinH']=_0x3368ab['fHAngleSin'],this['pRenderParam'][_0x2da374]['fCosV']=_0x3368ab['fVAngleCos'],this['pRenderParam'][_0x2da374]['fSinV']=_0x3368ab['fVAngleSin'],_0xa87ede);}},{'key':'JudgeDisplayEffect','value':function(_0x1c7058){var _0x4ea6e2=0x0;switch(_0x4ea6e2){case 0x0:return _0x4ea6e2=this['GetPlaceType'](_0x1c7058),0x4==this['nPlaceType']&&(this['nPlaceType']=0x0),_0xa87ede;case 0x3:return(_0x4ea6e2=this['GetPlaceType'](_0x1c7058))==this['nPlaceType']||0x4==this['nPlaceType']?_0xa87ede:_0x86aef9;case 0x2:case 0x1:return(_0x4ea6e2=this['GetPlaceType'](_0x1c7058))==this['nPlaceType']||0x4==_0x4ea6e2?_0xa87ede:_0x86aef9;default:return _0x86aef9;}return _0x86aef9;}},{'key':'GetPlaceType','value':function(_0x28fcf9){switch(_0x28fcf9){case _0x186ff9['SR_DE_FISH_PTZ_CEILING']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:case _0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:case _0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_CEILING']:return 0x3;case _0x186ff9['SR_DE_FISH_PTZ_FLOOR']:case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:case _0x186ff9['SR_DE_FISH_PANARAMA_FLOOR_180']:case _0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:case _0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:return 0x2;case _0x186ff9['SR_DE_FISH_PTZ_WALL']:case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:case _0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:return 0x1;case _0x186ff9['SR_DE_FISH_SEMISPHERE']:case _0x186ff9['SR_DE_FISH_ORIGINAL']:case _0x186ff9['SR_DE_FISH_PLANET']:case _0x186ff9['SR_DE_FISH_SPHERE']:case _0x186ff9['SR_DE_FISH_PLANET']:return 0x4;default:return 0x0;}return 0x0;}},{'key':'SetFishParam','value':function(_0x1f35b5,_0x43d6c5){if(_0x1f35b5<0x0||_0x1f35b5>=_0x379995)return _0x31ddcf;if(null==_0x43d6c5)return _0x31ddcf;if(null==this['pRenderParam'][_0x1f35b5])return _0x520965;var _0x144707=_0xa87ede;switch(_0x43d6c5['nFishParamType']){case _0x392c27:if((_0x144707=this['UpdateCircyeParam'](_0x43d6c5['fRXLeft'],_0x43d6c5['fRXRight'],_0x43d6c5['fRYTop'],_0x43d6c5['fRYBottom']))!=_0xa87ede)return _0x144707;this['pRenderParam'][_0x1f35b5]['bCut']=_0x43d6c5['bCut'],this['bBlack']=_0x43d6c5['bBlack'];break;case _0x5ca12e:if(_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect'])return _0x86aef9;if((_0x144707=this['UpdateWideScanAngle'](_0x1f35b5,_0x43d6c5['fAngle']))!=_0xa87ede)return _0x144707;this['pFishParam'][_0x1f35b5]['fAngle']=_0x43d6c5['fAngle'];break;case _0x378a81:if(_0x186ff9['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PTZ_CEILING']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PTZ_FLOOR']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect'])return _0x86aef9;if((_0x144707=this['UpdateRangeParam'](_0x1f35b5,_0x43d6c5['fZoom']))!=_0xa87ede)return _0x144707;this['pFishParam'][_0x1f35b5]['fZoom']=_0x43d6c5['fZoom'];break;case _0x3be196:if(_0x186ff9['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PTZ_CEILING']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PTZ_FLOOR']!=this['pRenderParam'][_0x1f35b5]['nDisplayEffect'])return _0x86aef9;if((_0x144707=this['UpdatePTZPosition'](_0x1f35b5,_0x43d6c5['fPTZX'],_0x43d6c5['fPTZY'],this['pRenderParam'][_0x1f35b5]['fZoom'],!0x0))!=_0xa87ede)return _0x144707;this['pFishParam'][_0x1f35b5]['fPTZX']=_0x43d6c5['fPTZX'],this['pFishParam'][_0x1f35b5]['fPTZY']=_0x43d6c5['fPTZY'];break;default:return _0x86aef9;}return _0x144707=this['ComputePTZPoints']();}},{'key':'GetFishParam','value':function(_0x2cc8ea,_0x26ceb1){return _0x2cc8ea<0x0||_0x2cc8ea>=_0x379995||null==_0x26ceb1||null==this['pFishParam'][_0x2cc8ea]?_0x31ddcf:(_0x26ceb1['fRXLeft']=this['fRX1'],_0x26ceb1['fRXRight']=this['fRX2'],_0x26ceb1['fRYTop']=this['fRY1'],_0x26ceb1['fRYBottom']=this['fRY2'],_0x26ceb1['bBlack']=this['bBlack'],_0x26ceb1['bCut']=this['pRenderParam'][_0x2cc8ea]['bCut'],_0x26ceb1['nFishParamType']=this['pFishParam'][_0x2cc8ea]['nFishParamType'],_0x26ceb1['fAngle']=this['pFishParam'][_0x2cc8ea]['fAngle'],_0x26ceb1['fZoom']=this['pFishParam'][_0x2cc8ea]['fZoom'],_0x26ceb1['fPTZX']=this['pFishParam'][_0x2cc8ea]['fPTZX'],_0x26ceb1['fPTZY']=this['pFishParam'][_0x2cc8ea]['fPTZY'],_0xa87ede);}},{'key':'GetRenderParam','value':function(_0x357f40,_0x215a6a){return _0x357f40<0x0||_0x357f40>=_0x379995||null==_0x215a6a||null==this['pRenderParam'][_0x357f40]?_0x31ddcf:(_0x215a6a['fRXLeft']=this['fRX1'],_0x215a6a['fRXRight']=this['fRX2'],_0x215a6a['fRYTop']=this['fRY1'],_0x215a6a['fRYBottom']=this['fRY2'],_0x215a6a['bBlack']=this['bBlack'],_0x215a6a['fCosH']=this['pRenderParam'][_0x357f40]['fCosH'],_0x215a6a['fSinH']=this['pRenderParam'][_0x357f40]['fSinH'],_0x215a6a['fCosV']=this['pRenderParam'][_0x357f40]['fCosV'],_0x215a6a['fSinV']=this['pRenderParam'][_0x357f40]['fSinV'],_0x215a6a['fAngle']=this['pRenderParam'][_0x357f40]['fAngle'],_0x215a6a['fZoom']=this['pRenderParam'][_0x357f40]['fZoom'],_0x215a6a['nDisplayEffect']=this['pRenderParam'][_0x357f40]['nDisplayEffect'],_0x215a6a['bCut']=this['pRenderParam'][_0x357f40]['bCut'],_0xa87ede);}},{'key':'UpdateCircyeParam','value':function(_0x3c2410,_0x304e26,_0x834a20,_0x344cab){if(_0x3c2410<=-0.5||_0x3c2410>=0.4||_0x304e26<=0.6||_0x304e26>=1.5||_0x834a20<=-0.5||_0x834a20>=0.4||_0x344cab<=0.6||_0x344cab>=1.5||_0x3c2410+_0x304e26<=0.8||_0x3c2410+_0x304e26>=1.2||_0x834a20+_0x344cab<=0.8||_0x834a20+_0x344cab>=1.2)return _0x31ddcf;if(_0x3c2410<0x0||_0x304e26>0x1||_0x834a20<0x0||_0x344cab>0x1){for(var _0x49ed0d=0x0;_0x49ed0d<_0x379995;++_0x49ed0d)if(null!=this['pRenderParam'][_0x49ed0d]&&(_0x186ff9['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x49ed0d]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x49ed0d]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x49ed0d]['nDisplayEffect'])){var _0xd74afc={};if(_0xd74afc['fHAngleCos']=this['pRenderParam'][_0x49ed0d]['fCosH'],_0xd74afc['fHAngleSin']=this['pRenderParam'][_0x49ed0d]['fSinH'],_0xd74afc['fVAngleCos']=this['pRenderParam'][_0x49ed0d]['fCosV'],_0xd74afc['fVAngleSin']=this['pRenderParam'][_0x49ed0d]['fSinV'],0x0==this['IsInImage'](_0x3c2410,_0x304e26,_0x834a20,_0x344cab,_0xd74afc,this['pRenderParam'][_0x49ed0d]['fZoom'],this['pRenderParam'][_0x49ed0d]['nDisplayEffect']))return _0x31ddcf;}}return this['fRX1']=_0x3c2410,this['fRX2']=_0x304e26,this['fRY1']=_0x834a20,this['fRY2']=_0x344cab,_0xa87ede;}},{'key':'UpdateWideScanAngle','value':function(_0x1a368e,_0x3c704b){return null==this['pRenderParam'][_0x1a368e]?_0x520965:(_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']==this['pRenderParam'][_0x1a368e]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']==this['pRenderParam'][_0x1a368e]['nDisplayEffect']?this['pRenderParam'][_0x1a368e]['fAngle']=_0x3c704b:_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']!=this['pRenderParam'][_0x1a368e]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']!=this['pRenderParam'][_0x1a368e]['nDisplayEffect']||(this['pRenderParam'][_0x1a368e]['fAngle']=-_0x3c704b),_0xa87ede);}},{'key':'ComputeAngleVertical','value':function(_0x44631d,_0x3f14f5,_0xa133ad,_0x428ea9){var _0x5db699=_0x44631d,_0x3501fe=_0x3f14f5,_0xd2137a=Math['sqrt']((_0x3501fe-0.5)*(_0x3501fe-0.5)+(_0x5db699-0.5)*(_0x5db699-0.5));if(_0xd2137a>0.5)return _0x31ddcf;if(_0xd2137a<0.001)return _0xa133ad['fVAngleCos']=0x1,_0xa133ad['fVAngleSin']=0x0,_0xa133ad['fHAngleCos']=0x1,_0xa133ad['fHAngleSin']=0x0,_0xa87ede;if(_0x428ea9==_0x186ff9['SR_DE_FISH_PTZ_CEILING']){_0xa133ad['fHAngleCos']=(0.5-_0x3501fe)/_0xd2137a,_0xa133ad['fHAngleSin']=(0.5-_0x5db699)/_0xd2137a;var _0x4cbe61=_0xd2137a*_0x530a52;_0xa133ad['fVAngleCos']=Math['cos'](_0x4cbe61),_0xa133ad['fVAngleSin']=Math['sin'](_0x4cbe61);}else{if(_0x428ea9!=_0x186ff9['SR_DE_FISH_PTZ_FLOOR'])return _0x31ddcf;_0xa133ad['fHAngleCos']=(_0x3501fe-0.5)/_0xd2137a,_0xa133ad['fHAngleSin']=(0.5-_0x5db699)/_0xd2137a;var _0x3a4040=_0xd2137a*_0x530a52;_0xa133ad['fVAngleCos']=Math['cos'](_0x3a4040),_0xa133ad['fVAngleSin']=Math['sin'](_0x3a4040);}return _0xa87ede;}},{'key':'ComputeAngleHorizontal','value':function(_0x29818c,_0x5b806c,_0x317efc){var _0x37f326,_0x10f5ae,_0xf18d33,_0x551c74,_0x45cf44,_0x384585,_0x530308,_0x578f2e=_0x29818c;return(_0x5b806c-(_0x45cf44=0.5))*(_0x5b806c-_0x45cf44)+(_0x578f2e-_0x45cf44)*(_0x578f2e-_0x45cf44)>0.25?_0x31ddcf:(_0x384585=(_0x5b806c-_0x45cf44)/_0x45cf44*_0x530a52/0x2,_0x37f326=Math['cos'](_0x384585),_0x10f5ae=Math['sin'](_0x384585),(_0x578f2e-_0x45cf44)/_0x45cf44/_0x37f326>0x1||(_0x578f2e-_0x45cf44)/_0x45cf44/_0x37f326<-0x1?_0x31ddcf:(_0x530308=(_0x578f2e-_0x45cf44)/_0x45cf44/_0x37f326*_0x530a52/0x2,_0xf18d33=Math['cos'](_0x530308),_0x551c74=Math['sin'](_0x530308),_0x317efc['fVAngleCos']=_0x37f326,_0x317efc['fVAngleSin']=_0x10f5ae,_0x317efc['fHAngleCos']=_0xf18d33,_0x317efc['fHAngleSin']=_0x551c74,_0xa87ede));}},{'key':'IsInImage','value':function(_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e,_0x34b532,_0x5075bd){return 0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0x1,0.5,_0x5075bd)&&(0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0x0,0.5,_0x5075bd)&&(0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0.5,0x1,_0x5075bd)&&(0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0.5,0x0,_0x5075bd)&&(0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0x0,0x0,_0x5075bd)&&(0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0x0,0x1,_0x5075bd)&&(0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0x1,0x1,_0x5075bd)&&0x1!=this['IsOutofImage'](_0x1ec9a6,_0x18b1ec,_0x1ff219,_0x4c0d56,_0x3d507e['fHAngleCos'],_0x3d507e['fHAngleSin'],_0x3d507e['fVAngleCos'],_0x3d507e['fVAngleSin'],_0x34b532,0x1,0x0,_0x5075bd)))))));}},{'key':'IsOutofImage','value':function(_0x55554,_0x5cba81,_0x39725d,_0x4b39ef,_0x173db4,_0x33d145,_0x4dd928,_0x4b8cf0,_0x571801,_0x55c4c5,_0x2d5629,_0x302c59){var _0x1a12f8,_0x40381b,_0x33acd8,_0x1be963,_0x4569de,_0x87404c,_0x41254e,_0x42ce74,_0x9f0377,_0x186da2,_0x3b320a,_0x37f2f4,_0xff0b8f;if(0x1,_0x3b320a=(_0x55554+_0x5cba81)/0x2*0x1,_0x37f2f4=(_0x39725d+_0x4b39ef)/0x2*(_0x186da2=(_0x5cba81-_0x55554)/(_0x4b39ef-_0x39725d)),_0xff0b8f=(_0x5cba81-_0x55554)/0x2*0x1,_0x302c59==_0x186ff9['SR_DE_FISH_PTZ_CEILING']){if(_0x40381b=_0x55c4c5-0.5,_0x33acd8=(_0x1a12f8=0.5-_0x2d5629)*_0x4dd928+(_0x87404c=_0x571801)*_0x4b8cf0,(_0x41254e=_0x87404c*_0x4dd928-_0x1a12f8*_0x4b8cf0)<=0x0)return!0x0;_0x9f0377=Math['sqrt'](_0x40381b*_0x40381b+_0x33acd8*_0x33acd8);var _0x23e843=Math['sqrt'](_0x40381b*_0x40381b+_0x33acd8*_0x33acd8+_0x41254e*_0x41254e),_0x3db894=Math['asin'](_0x9f0377/_0x23e843)/1.5707963*0.5;if(_0x4569de=(-((_0x40381b=_0x3db894*_0x40381b/_0x9f0377)*_0x33d145+(_0x33acd8=_0x3db894*_0x33acd8/_0x9f0377)*_0x173db4)*_0xff0b8f*0x2+_0x37f2f4)/_0x186da2,(_0x1be963=((_0x40381b*_0x173db4-_0x33acd8*_0x33d145)*_0xff0b8f*0x2+_0x3b320a)/0x1)<0x0||_0x1be963>0x1||_0x4569de<0x0||_0x4569de>0x1)return!0x0;}if(_0x302c59==_0x186ff9['SR_DE_FISH_PTZ_FLOOR']){if(_0x40381b=_0x55c4c5-0.5,_0x33acd8=(_0x1a12f8=_0x2d5629-0.5)*_0x4dd928+(_0x87404c=_0x571801)*_0x4b8cf0,(_0x41254e=_0x87404c*_0x4dd928-_0x1a12f8*_0x4b8cf0)<=0x0)return!0x0;_0x9f0377=Math['sqrt'](_0x40381b*_0x40381b+_0x33acd8*_0x33acd8);var _0x283f42=Math['sqrt'](_0x40381b*_0x40381b+_0x33acd8*_0x33acd8+_0x41254e*_0x41254e),_0xaf09b9=Math['asin'](_0x9f0377/_0x283f42)/1.5707963*0.5;if(_0x4569de=(((_0x40381b=_0xaf09b9*_0x40381b/_0x9f0377)*_0x33d145+(_0x33acd8=_0xaf09b9*_0x33acd8/_0x9f0377)*_0x173db4)*_0xff0b8f*0x2+_0x37f2f4)/_0x186da2,(_0x1be963=((_0x40381b*_0x173db4-_0x33acd8*_0x33d145)*_0xff0b8f*0x2+_0x3b320a)/0x1)<0x0||_0x1be963>0x1||_0x4569de<0x0||_0x4569de>0x1)return!0x0;}if(_0x302c59==_0x186ff9['SR_DE_FISH_PTZ_WALL']){if(_0x1be963=(_0x40381b=_0x55c4c5-0.5)*_0x173db4+(_0x41254e=(_0x87404c=_0x571801)*_0x4dd928-(_0x1a12f8=_0x2d5629-0.5)*_0x4b8cf0)*_0x33d145,_0x4569de=_0x33acd8=_0x1a12f8*_0x4dd928+_0x87404c*_0x4b8cf0,(_0x42ce74=_0x41254e*_0x173db4-_0x40381b*_0x33d145)<=0x0)return!0x0;_0x9f0377=Math['sqrt'](_0x1be963*_0x1be963+_0x4569de*_0x4569de);var _0x19d8a7=Math['sqrt'](_0x1be963*_0x1be963+_0x4569de*_0x4569de+_0x42ce74*_0x42ce74),_0xfca511=Math['asin'](_0x9f0377/_0x19d8a7)/1.5707963*0.5;if(_0x4569de=(_0xfca511*_0x4569de/_0x9f0377*_0xff0b8f*0x2+_0x37f2f4)/_0x186da2,(_0x1be963=(_0xfca511*_0x1be963/_0x9f0377*_0xff0b8f*0x2+_0x3b320a)/0x1)<0x0||_0x1be963>0x1||_0x4569de<0x0||_0x4569de>0x1)return!0x0;}return!0x1;}},{'key':'ComputePTZPoints','value':function(){if(_0x3cf544==this['nWndPort'])return _0x520965;for(var _0x58c912=0x0;_0x58c912<_0x379995;++_0x58c912)if(null!=this['pRenderParam'][_0x58c912]&&(_0x186ff9['SR_DE_FISH_PTZ_CEILING']==this['pRenderParam'][_0x58c912]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_FLOOR']==this['pRenderParam'][_0x58c912]['nDisplayEffect']||_0x186ff9['SR_DE_FISH_PTZ_WALL']==this['pRenderParam'][_0x58c912]['nDisplayEffect'])){var _0x242d80=_0xa87ede;if(this['nPTZDisplayMode']==_0x495db0){if(_0x242d80=this['GetRangePoints'](_0x58c912),_0xa87ede!=_0x242d80)continue;if(_0x242d80=this['TransformPTZRangePoints'](_0x58c912),_0xa87ede!=_0x242d80)continue;}else{if(this['nPTZDisplayMode']==_0x150ab7&&(_0x242d80=this['GetRectPoints'](_0x58c912),_0xa87ede!=_0x242d80))continue;}}return _0xa87ede;}},{'key':'GetWndPort','value':function(){return this['nWndPort'];}},{'key':'GetPTZDisplayMode','value':function(){return this['nPTZDisplayMode'];}},{'key':'GetPTZColor','value':function(_0x50ee0b,_0x3dbb47){return _0x50ee0b<0x0||_0x50ee0b>=_0x379995||null==_0x3dbb47?_0x31ddcf:(_0x3dbb47['fA']=this['stPTZColor'][_0x50ee0b]['fA'],_0x3dbb47['fR']=this['stPTZColor'][_0x50ee0b]['fR'],_0x3dbb47['fG']=this['stPTZColor'][_0x50ee0b]['fG'],_0x3dbb47['fB']=this['stPTZColor'][_0x50ee0b]['fB'],null!=this['pPTZSetColor']&&(Math['abs'](this['pPTZSetColor'][_0x50ee0b]['fA'])<_0x4a23c6||Math['abs'](this['pPTZSetColor'][_0x50ee0b]['fR'])<_0x4a23c6||Math['abs'](this['pPTZSetColor'][_0x50ee0b]['fG'])<_0x4a23c6||Math['abs'](this['pPTZSetColor'][_0x50ee0b]['fB'])<_0x4a23c6)&&(_0x3dbb47['fA']=this['pPTZSetColor'][_0x50ee0b]['fA'],_0x3dbb47['fR']=this['pPTZSetColor'][_0x50ee0b]['fR'],_0x3dbb47['fG']=this['pPTZSetColor'][_0x50ee0b]['fG'],_0x3dbb47['fB']=this['pPTZSetColor'][_0x50ee0b]['fB']),_0xa87ede);}},{'key':'SetPTZColor','value':function(_0x5e498c,_0x1b4ad4){if(_0x5e498c<0x0||_0x5e498c>=_0x379995)return _0x31ddcf;if(null==_0x1b4ad4)return _0x31ddcf;if(null==this['pPTZSetColor']){this['pPTZSetColor']=[];for(var _0x533551=0x0;_0x533551<_0x379995;++_0x533551)this['pPTZSetColor'][_0x533551]={},this['pPTZSetColor'][_0x533551]['fR']=0x0,this['pPTZSetColor'][_0x533551]['fG']=0x0,this['pPTZSetColor'][_0x533551]['fB']=0x0,this['pPTZSetColor'][_0x533551]['fA']=0x1;}return this['pPTZSetColor'][_0x5e498c]['fR']=_0x1b4ad4['fR'],this['pPTZSetColor'][_0x5e498c]['fG']=_0x1b4ad4['fG'],this['pPTZSetColor'][_0x5e498c]['fB']=_0x1b4ad4['fB'],this['pPTZSetColor'][_0x5e498c]['fA']=_0x1b4ad4['fA'],_0xa87ede;}},{'key':'IsPTZSelected','value':function(_0x3173db){return!(_0x3173db<0x0||_0x3173db>=_0x379995)&&this['bPTZSelected'][_0x3173db];}},{'key':'GetPTZPort','value':function(_0x2294b2,_0xb0dbfe,_0xa80085){if(this['nWndPort']==_0x3cf544)return _0x520965;if(null==this['pRenderParam'][this['nWndPort']])return _0x520965;var _0x15d626=_0x379995,_0x16f17c={};_0x16f17c['fX']=_0x2294b2,_0x16f17c['fY']=_0xb0dbfe;for(var _0x2c3539=0x0;_0x2c3539<_0x379995;++_0x2c3539)this['bPTZSelected'][_0x2c3539]=!0x1;if(this['nPTZDisplayMode']==_0x495db0){switch(this['pRenderParam'][this['nWndPort']]['nDisplayEffect']){case _0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:this['GetPointPano2FishFloor'](_0x16f17c,_0x2294b2,_0xb0dbfe);break;case _0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:this['GetPointPano2FishCeiling'](_0x16f17c,_0x2294b2,_0xb0dbfe);break;case _0x186ff9['SR_DE_FISH_PANORAMA_WALL']:this['GetPointPano2FishWall'](_0x16f17c,_0x2294b2,_0xb0dbfe);}for(var _0x398890=0x0;_0x398890<_0x379995;++_0x398890)if(0x0!=this['nOriPTZPointNum'][_0x398890]){var _0x2c092e={};_0x2c092e['fX']=this['pOriPTZPoints'][_0x398890][0x0]['fX'],_0x2c092e['fY']=this['pOriPTZPoints'][_0x398890][0x0]['fY'];var _0x6358e2={};_0x6358e2['fX']=this['pOriPTZPoints'][_0x398890][0x0]['fX'],_0x6358e2['fY']=this['pOriPTZPoints'][_0x398890][0x0]['fY'];for(var _0x1bdca0=0x1;_0x1bdca0<this['nOriPTZPointNum'][_0x398890];++_0x1bdca0)this['GetPTZRectange'](_0x2c092e,_0x6358e2,this['pOriPTZPoints'][_0x398890][_0x1bdca0]);if(_0x16f17c['fX']<=_0x2c092e['fX']&&_0x16f17c['fX']>=_0x6358e2['fX']&&_0x16f17c['fY']>=_0x6358e2['fY']&&_0x16f17c['fY']<=_0x2c092e['fY']){_0x15d626=_0x398890;break;}}}else{if(this['nPTZDisplayMode']!=_0x150ab7)return _0x86aef9;for(var _0x200f11=0x0;_0x200f11<_0x379995;++_0x200f11)if(_0x16f17c['fX']<=this['pRectPoints'][_0x200f11][0x2]['fX']&&_0x16f17c['fX']>=this['pRectPoints'][_0x200f11][0x0]['fX']&&_0x16f17c['fY']>=this['pRectPoints'][_0x200f11][0x0]['fY']&&_0x16f17c['fY']<=this['pRectPoints'][_0x200f11][0x2]['fY']){_0x15d626=_0x200f11;break;}}return _0x15d626<_0x379995?(this['bPTZSelected'][_0x15d626]=!0x0,_0xa80085['nPTZPort']=_0x15d626,_0xa87ede):_0x86aef9;}},{'key':'SetPTZPort','value':function(_0x54100c){if(_0x54100c<0x0||_0x54100c>=_0x379995)return _0x31ddcf;for(var _0xba5ecb=0x0;_0xba5ecb<_0x379995;++_0xba5ecb)this['bPTZSelected'][_0xba5ecb]=!0x1;if(this['nPTZDisplayMode']==_0x495db0){if(0x0==this['nOriPTZPointNum'][_0x54100c])return _0x31ddcf;this['bPTZSelected'][_0x54100c]=!0x0;}else{if(0x0==this['nPTZRectNum'][_0x54100c])return _0x31ddcf;this['bPTZSelected'][_0x54100c]=!0x0;}return _0xa87ede;}},{'key':'GetPTZRectange','value':function(_0x2a6656,_0x54d29e,_0x1b0a20){return _0x1b0a20['fX']<_0x54d29e['fX']&&(_0x54d29e['fX']=_0x1b0a20['fX']),_0x1b0a20['fY']<_0x54d29e['fY']&&(_0x54d29e['fY']=_0x1b0a20['fY']),_0x1b0a20['fX']>_0x2a6656['fX']&&(_0x2a6656['fX']=_0x1b0a20['fX']),_0x1b0a20['fY']>_0x2a6656['fY']&&(_0x2a6656['fY']=_0x1b0a20['fY']),_0xa87ede;}},{'key':'GetPTZPoints','value':function(_0x4bfd20,_0x581c46,_0x1cb85a){return _0x4bfd20<0x0||_0x4bfd20>=_0x379995?_0x31ddcf:null==this['pRenderParam'][this['nWndPort']]?_0x520965:(_0x495db0==_0x1cb85a?null!=this['pOriPTZPoints'][_0x4bfd20]&&0x0!=this['nOriPTZPointNum'][_0x4bfd20]&&(_0x581c46['pstPoints']=this['pOriPTZPoints'][_0x4bfd20],_0x581c46['nPointNum']=this['nOriPTZPointNum'][_0x4bfd20]):_0x150ab7==_0x1cb85a&&null!=this['pRectPoints'][_0x4bfd20]&&(_0x581c46['pstPoints']=this['pRectPoints'][_0x4bfd20],_0x581c46['nPointNum']=0x4),_0xa87ede);}},{'key':'SetPTZDisplayMode','value':function(_0x236fa7){return this['nPTZDisplayMode']=_0x236fa7,this['ComputePTZPoints']();}},{'key':'GetDisplayEffect','value':function(_0x18e72c){return _0x18e72c<0x0||_0x18e72c>=_0x379995||null==this['pRenderParam']?_0x186ff9['SR_DE_NULL']:this['pRenderParam'][_0x18e72c]['nDisplayEffect'];}},{'key':'GetPTZFragmentPoints','value':function(_0x42473d,_0x24b5a4,_0x3e8a32){if(_0x42473d<0x0||_0x42473d>=_0x379995)return _0x31ddcf;if(null==this['pPanoPTZPoints'][_0x42473d]||0x0==this['nPanoPTZPointNum'][_0x42473d])return _0x31ddcf;var _0x392470=this['nPTZFragmentNode'][_0x42473d][_0x3e8a32];if(_0x24b5a4['nPointNum']=this['nPTZFragmentNode'][_0x42473d][_0x3e8a32+0x1]-this['nPTZFragmentNode'][_0x42473d][_0x3e8a32],_0x24b5a4['nPointNum']<0x0)return _0x520965;_0x24b5a4['pstPoints']=[];for(var _0x3505dd=0x0;_0x3505dd<_0x24b5a4['nPointNum'];++_0x3505dd){var _0x1ae379={};_0x1ae379['fX']=this['pPanoPTZPoints'][_0x42473d][_0x392470+_0x3505dd]['fX'],_0x1ae379['fY']=this['pPanoPTZPoints'][_0x42473d][_0x392470+_0x3505dd]['fY'],_0x24b5a4['pstPoints']['push'](_0x1ae379);}return _0xa87ede;}},{'key':'GetPTZFragmentNum','value':function(_0x4d18ad){return _0x4d18ad<0x0||_0x4d18ad>=_0x379995||0x0==this['nPTZFragmentNum'][_0x4d18ad]?0x0:this['nPTZFragmentNum'][_0x4d18ad];}},{'key':'CalcPTZFragmentPoints','value':function(_0x220257){if(_0x220257<0x0||_0x220257>=_0x379995)return _0x31ddcf;if(null==this['pPanoPTZPoints'][_0x220257]||0x0==this['nPanoPTZPointNum'][_0x220257])return _0x520965;this['nPTZFragmentNode'][_0x220257][0x0]=0x0,this['nPTZFragmentNum'][_0x220257]=0x1;for(var _0x39fb1c=0x0,_0x29453d=0x0;_0x29453d<this['nPanoPTZPointNum'][_0x220257]-0x1;_0x29453d++)Math['abs'](this['pPanoPTZPoints'][_0x220257][_0x29453d+0x1]['fX']-this['pPanoPTZPoints'][_0x220257][_0x29453d]['fX'])>0.5&&(_0x39fb1c=this['nPTZFragmentNum'][_0x220257],this['nPTZFragmentNode'][_0x220257][_0x39fb1c]=_0x29453d+0x1,this['nPTZFragmentNum'][_0x220257]=this['nPTZFragmentNum'][_0x220257]+0x1);var _0x99788e=this['nPanoPTZPointNum'][_0x220257];return Math['abs'](this['pPanoPTZPoints'][_0x220257][0x0]['fX']-this['pPanoPTZPoints'][_0x220257][_0x99788e-0x1]['fX'])<0.5&&(this['pPanoPTZPoints'][_0x220257][_0x99788e]['fX']=this['pPanoPTZPoints'][_0x220257][0x0]['fX'],this['pPanoPTZPoints'][_0x220257][_0x99788e]['fY']=this['pPanoPTZPoints'][_0x220257][0x0]['fY'],this['nPanoPTZPointNum'][_0x220257]=this['nPanoPTZPointNum'][_0x220257]+0x1),_0x39fb1c=this['nPTZFragmentNum'][_0x220257],this['nPTZFragmentNode'][_0x220257][_0x39fb1c]=this['nPanoPTZPointNum'][_0x220257],_0xa87ede;}},{'key':'IsPortAllocated','value':function(_0x57f699){return this['bPortAllocated'][_0x57f699];}},{'key':'GetPointFish2PanoCeiling','value':function(_0x4d4650,_0x33309b,_0x5302ff){if(null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==_0x4d4650)return _0x31ddcf;var _0x50af1a,_0x33bc1d;_0x50af1a=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x33bc1d=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0xd61f47,_0x31cd33=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&(_0xd61f47=0x1*-this['fRX1'])>_0x31cd33&&(_0x31cd33=_0xd61f47),this['fRX2']>0x1&&(_0xd61f47=0x1*(this['fRX2']-0x1))>_0x31cd33&&(_0x31cd33=_0xd61f47),this['fRY1']<0x0&&(_0xd61f47=-this['fRY1']*_0x50af1a)>_0x31cd33&&(_0x31cd33=_0xd61f47),this['fRY2']>0x1&&(_0xd61f47=(this['fRY2']-0x1)*_0x50af1a)>_0x31cd33&&(_0x31cd33=_0xd61f47));var _0x1b5642,_0x157591=_0x31cd33/_0x33bc1d,_0x21e458={};if(_0x21e458['fX']=0x0,_0x21e458['fY']=0x0,Math['abs'](_0x33309b-0.5)<_0x4a23c6&&Math['abs'](_0x5302ff-0.5)<_0x4a23c6)return _0x86aef9;var _0x2e80fa={},_0x54a6d2={};_0x2e80fa['fX']=_0x33309b-0.5,_0x2e80fa['fY']=_0x5302ff-0.5,_0x54a6d2['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x54a6d2['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0x1aead2=Math['sqrt'](_0x2e80fa['fX']*_0x2e80fa['fX']+_0x2e80fa['fY']*_0x2e80fa['fY']),_0x5cec6b=Math['sqrt'](_0x54a6d2['fX']*_0x54a6d2['fX']+_0x54a6d2['fY']*_0x54a6d2['fY']);return _0x1b5642=Math['acos']((_0x2e80fa['fX']*_0x54a6d2['fX']+_0x2e80fa['fY']*_0x54a6d2['fY'])/(_0x1aead2*_0x5cec6b)),_0x2e80fa['fX']*_0x54a6d2['fY']-_0x2e80fa['fY']*_0x54a6d2['fX']>0x0&&(_0x1b5642=6.2831852-_0x1b5642),_0x21e458['fX']=_0x1b5642/6.2831853,_0x21e458['fY']=(0x2*(0.5-_0x1aead2)-_0x157591)/(0.8-_0x157591),_0x21e458['fY']>=0x0&&_0x21e458['fX']>=0x0&&_0x21e458['fY']<=0x1&&_0x21e458['fX']<=0x1?(_0x4d4650['fX']=_0x21e458['fX'],_0x4d4650['fY']=_0x21e458['fY'],_0xa87ede):_0x31ddcf;}},{'key':'GetPointFish2PanoFloor','value':function(_0x3190e8,_0x1ae5c7,_0x3e57c9){if(null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==_0x3190e8)return _0x31ddcf;var _0xb389b3,_0x4f9e7b;_0xb389b3=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x4f9e7b=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x3d1cb8,_0x193c42=0x0;(this['fRX2']>0x1||this['fRY2']>0x1||this['fRX1']<0x0||this['fRY1']<0x0)&&(this['fRX1']<0x0&&(_0x3d1cb8=0x1*-this['fRX1'])>_0x193c42&&(_0x193c42=_0x3d1cb8),this['fRX2']>0x1&&(_0x3d1cb8=0x1*(this['fRX2']-0x1))>_0x193c42&&(_0x193c42=_0x3d1cb8),this['fRY1']<0x0&&(_0x3d1cb8=-this['fRY1']*_0xb389b3)>_0x193c42&&(_0x193c42=_0x3d1cb8),this['fRY2']>0x1&&(_0x3d1cb8=(this['fRY2']-0x1)*_0xb389b3)>_0x193c42&&(_0x193c42=_0x3d1cb8));var _0x59f56c,_0x474b44=_0x193c42/_0x4f9e7b,_0x1f06df={'fX':0x0,'fY':0x0};if(Math['abs'](_0x1ae5c7-0.5)<_0x4a23c6&&Math['abs'](_0x3e57c9-0.5)<_0x4a23c6)return _0x86aef9;var _0x4e227e={},_0x47ca01={};_0x4e227e['fX']=_0x1ae5c7-0.5,_0x4e227e['fY']=_0x3e57c9-0.5,_0x47ca01['fX']=-0.5*Math['sin'](this['pRenderParam'][this['nWndPort']]['fAngle']),_0x47ca01['fY']=0.5*Math['cos'](this['pRenderParam'][this['nWndPort']]['fAngle']);var _0x2765a4=Math['sqrt'](_0x4e227e['fX']*_0x4e227e['fX']+_0x4e227e['fY']*_0x4e227e['fY']),_0xf458cb=Math['sqrt'](_0x47ca01['fX']*_0x47ca01['fX']+_0x47ca01['fY']*_0x47ca01['fY']);return _0x59f56c=Math['acos']((_0x4e227e['fX']*_0x47ca01['fX']+_0x4e227e['fY']*_0x47ca01['fY'])/(_0x2765a4*_0xf458cb)),_0x4e227e['fX']*_0x47ca01['fY']-_0x4e227e['fY']*_0x47ca01['fX']>0x0&&(_0x59f56c=6.2831852-_0x59f56c),_0x1f06df['fX']=0x1-_0x59f56c/6.2831853,_0x1f06df['fY']=0x1-(0x2*(0.5-_0x2765a4)-_0x474b44)/(0.8-_0x474b44),_0x1f06df['fY']>=0x0&&_0x1f06df['fX']>=0x0&&_0x1f06df['fY']<=0x1&&_0x1f06df['fX']<=0x1?(_0x3190e8['fX']=_0x1f06df['fX'],_0x3190e8['fY']=_0x1f06df['fY'],_0xa87ede):_0x31ddcf;}},{'key':'GetPointFish2PanoWall','value':function(_0x32e9fb,_0x333161,_0x265730){if(null==this['pRenderParam'][this['nWndPort']])return _0x520965;if(null==_0x32e9fb)return _0x31ddcf;var _0x4ff303,_0x33b439;_0x4ff303=(this['fRX2']-this['fRX1'])/(this['fRY2']-this['fRY1']),_0x33b439=(this['fRX2']-this['fRX1'])/0x2*0x1;var _0x224936,_0xc43223,_0x4e65e4,_0x51a192,_0x6331f0,_0x1bbea8=0x0,_0x2283ca=0x1,_0x2966c4=0.1,_0x59ba23=0.9;this['fRX1']<0x0&&(_0x224936=0x1*-this['fRX1'],_0x1bbea8=_0x224936/=0x2*_0x33b439),this['fRX2']>0x1&&(_0xc43223=0x1*(this['fRX2']-0x1),_0x2283ca=0x1-(_0xc43223/=0x2*_0x33b439)),this['fRY1']<0x0&&(_0x4e65e4=-this['fRY1']*_0x4ff303,_0x2966c4=(_0x4e65e4/=0x2*_0x33b439)>0.1?_0x4e65e4:0.1),this['fRY2']>0x1&&(_0x51a192=(this['fRY2']-0x1)*_0x4ff303,_0x59ba23=(_0x51a192/=0x2*_0x33b439)>0x1-0.9?0x1-_0x51a192:0.9);var _0x266343={'fX':0x0,'fY':0x0},_0x219b0f=0x2*_0x333161*_0x33b439,_0xdf73cf=0x2*_0x265730*_0x33b439;return _0x6331f0=Math['sqrt'](_0x33b439*_0x33b439-(_0xdf73cf-_0x33b439)*(_0xdf73cf-_0x33b439)),Math['abs'](_0x6331f0)<_0x4a23c6?SR_ERR_PARAM:(_0x333161=_0x33b439*(_0x219b0f-_0x33b439)/_0x6331f0+_0x33b439,_0x265730=_0xdf73cf,_0x266343['fX']=(_0x333161-0x2*_0x1bbea8*_0x33b439)/(0x2*(_0x2283ca-_0x1bbea8)*_0x33b439),_0x266343['fY']=(_0x265730-0x2*_0x2966c4*_0x33b439)/(0x2*(_0x59ba23-_0x2966c4)*_0x33b439),_0x266343['fY']>=0x0&&_0x266343['fX']>=0x0&&_0x266343['fY']<=0x1&&_0x266343['fX']<=0x1?(_0x32e9fb['fX']=_0x266343['fX'],_0x32e9fb['fY']=_0x266343['fY'],_0xa87ede):_0x31ddcf);}},{'key':'UpdateRangeParam','value':function(_0x6c8fa1,_0x32a255){if(null==this['pRenderParam'][_0x6c8fa1])return _0x520965;if(_0x32a255<0.00001||_0x32a255>0.6)return _0x31ddcf;var _0x3c870d=0x0;return _0x186ff9['SR_DE_FISH_PTZ_WALL']!=this['pRenderParam'][_0x6c8fa1]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PTZ_CEILING']!=this['pRenderParam'][_0x6c8fa1]['nDisplayEffect']&&_0x186ff9['SR_DE_FISH_PTZ_FLOOR']!=this['pRenderParam'][_0x6c8fa1]['nDisplayEffect']||(_0x3c870d=0x7*_0x32a255+0.8,this['IsInImage'](this['fRX1'],this['fRX2'],this['fRY1'],this['fRY2'],this['pRenderParam'][_0x6c8fa1]['fCosH'],this['pRenderParam'][_0x6c8fa1]['fSinH'],this['pRenderParam'][_0x6c8fa1]['fCosV'],this['pRenderParam'][_0x6c8fa1]['fSinV'],_0x3c870d,this['pRenderParam'][_0x6c8fa1]['nDisplayEffect']))?(this['pRenderParam'][_0x6c8fa1]['fZoom']=_0x3c870d,_0xa87ede):_0x31ddcf;}}]),_0x132b86;}()),_0x5440d6=0x20,_0x4ae543=(function(){function _0x48881e(){_0x54580d(this,_0x48881e),this['renderEngine']='webgl',this['oVideoHandle']=null,this['mainCanvasID']=null,this['curTimestamp']=0x0,this['mainSubPort']=0x0,this['mainVaildSubPort']=0x0,this['mainFECCorrect']=_0x186ff9['SR_DE_NULL'],this['FECErrorCode']=0x0,this['subPortNum']=0x0,this['FECShowMode']=_0x495db0,this['pFishParamManager']=null,this['InitFECParam'](),this['privateLinesInfo']=[],this['privateFontsInfo']=[],this['privateImageInfo']=[],this['bSRCallBackFlag']=!0x1,this['curLinesInfo']=null,this['curFontsInfo']=null,this['curImagesInfo']=null,this['maxPrivateLineTimeStamp']=0x0,this['hasSetFECParamManager']=!0x1,this['pWaterFontParam']=[],this['pWaterImageParam']=[],this['waterMarkImageIndex']=0x0,this['waterMarkImageMax']=0x1,this['aPOSAdaptBuf']=[];}return _0x4fd085(_0x48881e,[{'key':'InitDisplay','value':function(_0x41b975,_0xaf9fa6,_0xbaa2d7){return this['renderEngine']=_0xaf9fa6,this['mainCanvasID']=_0x41b975,'2d'===this['renderEngine']||'2D'===this['renderEngine']?(this['oVideoHandle']=new _0x47e209(),console['log']('2d\\x20render')):(this['oVideoHandle']=new _0x453e55(),this['mainFECCorrect']!=_0x186ff9['SR_DE_NULL']&&(null==this['pFishParamManager']&&(this['pFishParamManager']=new _0x30cc90()),this['oVideoHandle']['SR_SetFishParamManager'](this['pFishParamManager']),this['hasSetFECParamManager']=!0x0),console['log']('webgl\\x20render')),this['oVideoHandle']['SR_Init'](_0x41b975,_0xbaa2d7),this['mainVaildSubPort']=this['oVideoHandle']['SR_AddSubPort'](this['mainFECCorrect']),-0x1==this['mainVaildSubPort']?(console['info']('%c\\x20InitDisplay\\x20SR_AddSubPort\\x20error\\x20subport:%d','color:\\x20red',this['mainVaildSubPort']),0x0):(null==this['stFishEyeManager'][0x0]['pRender']&&this['mainFECCorrect']!==_0x186ff9['SR_DE_NULL']&&(this['stFishEyeManager'][0x0]['pRender']=this['oVideoHandle'],this['stFishEyeManager'][0x0]['nSubPort']=0x0,this['stFishEyeManager'][0x0]['sCanvasID']=this['mainCanvasID'],this['stFishEyeManager'][0x0]['bUsed']=0x1,this['stFishEyeManager'][0x0]['bInited']=0x1,this['stFishEyeManager'][0x0]['nValidSubPort']=this['mainVaildSubPort']),0x1);}},{'key':'ReleaseDisplay','value':function(){if(null!=this['oVideoHandle']&&(this['oVideoHandle']['SR_DelSubPort'](this['mainVaildSubPort']),this['oVideoHandle']['SR_Destroy'](),this['oVideoHandle']=null),this['subPortNum']>0x0){for(var _0x94556=0x1;_0x94556<_0x5440d6;_0x94556++)0x0!=this['stFishEyeManager'][_0x94556]['nSubPort']&&null!=this['stFishEyeManager'][_0x94556]['sCanvasID']&&0x0!=this['stFishEyeManager'][_0x94556]['bInited']&&(this['FEC_Disable'](_0x94556),this['FEC_DelPort'](_0x94556));}for(var _0x4ea93c=0x0;_0x4ea93c<_0x5440d6;_0x4ea93c++)this['stFishEyeManager'][_0x4ea93c]['pRender']=null;return this['stFishEyeManager']['splice'](0x0,this['stFishEyeManager']['length']),this['stFishParam']['splice'](0x0,this['stFishParam']['length']),null!=this['pFishParamManager']&&(this['pFishParamManager']['DeInit'](),this['pFishParamManager']=null),this['FECShowMode']=_0x495db0,this['DeInitPrivateParam'](),0x1;}},{'key':'DeInitPrivateParam','value':function(){this['privateLinesInfo']['splice'](0x0,this['privateLinesInfo']['length']),this['privateFontsInfo']['splice'](0x0,this['privateFontsInfo']['length']),this['privateImageInfo']['splice'](0x0,this['privateImageInfo']['length']),this['pWaterFontParam']['splice'](0x0,this['pWaterFontParam']['length']),this['pWaterImageParam']['splice'](0x0,this['pWaterImageParam']['length']),this['bSRCallBackFlag']=!0x1,this['curLinesInfo']=null;}},{'key':'DisplayFrame','value':function(_0x241257,_0x381b91,_0x5e3b07,_0x5d210c,_0x2bf64a,_0x244c7e){var _0x396b03=this;return new Promise(function(_0x3130e8){var _0x805485=-0x1;if(null!=_0x241257&&(_0x805485=_0x5d210c),_0x396b03['bSRCallBackFlag']||(null!=_0x396b03['oVideoHandle']&&_0x396b03['oVideoHandle']['SR_SetCallBack'](_0x396b03['WebGLDisplayCallBack'],_0x396b03,_0x444649),_0x396b03['bSRCallBackFlag']=!0x0),null!=_0x241257&&(0x0==_0x396b03['privateLinesInfo']['length']&&0x0==_0x396b03['privateFontsInfo']['length']&&0x0==_0x396b03['privateImageInfo']['length']||(_0x396b03['curTimestamp']=_0x805485,_0x396b03['FindIntelNodefromList'](_0x396b03['curTimestamp'])),null!=_0x396b03['oVideoHandle']&&_0x396b03['oVideoHandle']['SR_Draw'](_0x241257,_0x381b91,_0x5e3b07,_0x2bf64a,_0x244c7e),_0x396b03['subPortNum']>0x0)){for(var _0x14a6d1=0x1;_0x14a6d1<_0x5440d6;_0x14a6d1++)0x0!=_0x396b03['stFishEyeManager'][_0x14a6d1]['nSubPort']&&null!=_0x396b03['stFishEyeManager'][_0x14a6d1]['sCanvasID']&&0x0!=_0x396b03['stFishEyeManager'][_0x14a6d1]['bInited']&&null!=_0x396b03['stFishEyeManager'][_0x14a6d1]['pRender']&&_0x396b03['stFishEyeManager'][_0x14a6d1]['pRender']['SR_Draw'](_0x241257,_0x381b91,_0x5e3b07,null,null);}_0x3130e8(_0x805485);});}},{'key':'SetDisplayRect','value':function(_0x154492,_0x4d7bf2,_0x1a0b43,_0xfa552d){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_SetDisplayRect'](_0x154492,_0x4d7bf2,_0x1a0b43,_0xfa552d,_0xe9e464):0x0;}},{'key':'SetCanvasSize','value':function(_0x3e6288,_0x186bd2){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_SetCanvasSize'](_0x3e6288,_0x186bd2):0x0;}},{'key':'GetCanvasSize','value':function(){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_GetCanvasSize']():0x0;}},{'key':'SetAntialias','value':function(_0x3c0ac9){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_SetAntialias'](_0x3c0ac9):0x0;}},{'key':'SetD3DPostProcess','value':function(_0x2321b2,_0x3465f0){return null!=this['oVideoHandle']?this['oVideoHandle']['SR_SetImagePostProcess'](_0x2321b2,_0x3465f0):0x0;}},{'key':'InitFECParam','value':function(){this['stFishEyeManager']=[];for(var _0x599cf5=0x0;_0x599cf5<_0x5440d6;_0x599cf5++)this['stFishEyeManager'][_0x599cf5]={},this['stFishEyeManager'][_0x599cf5]['pRender']=null,this['stFishEyeManager'][_0x599cf5]['nSubPort']=0x0,this['stFishEyeManager'][_0x599cf5]['sCanvasID']=null,this['stFishEyeManager'][_0x599cf5]['bUsed']=0x0,this['stFishEyeManager'][_0x599cf5]['bInit']=0x0,this['stFishEyeManager'][_0x599cf5]['nValidSubPort']=0x0,this['stFishEyeManager'][_0x599cf5]['emPlaceType']=_0x1e68ea,this['stFishEyeManager'][_0x599cf5]['emCorrectType']=_0x4fbb93,this['stFishEyeManager'][_0x599cf5]['emEffect']=_0x186ff9['SR_DE_FISH_ORIGINAL'];this['stFishParam']=[];for(var _0x5bb5bd=0x0;_0x5bb5bd<_0x5440d6;_0x5bb5bd++)this['stFishParam'][_0x5bb5bd]={},this['stFishParam'][_0x5bb5bd]['nUpDateType']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZParam']={},this['stFishParam'][_0x5bb5bd]['stPTZParam']['fPTZPositionX']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZParam']['fPTZPositionY']=0x0,this['stFishParam'][_0x5bb5bd]['stCycleParam']={},this['stFishParam'][_0x5bb5bd]['stCycleParam']['fRadiusLeft']=0x0,this['stFishParam'][_0x5bb5bd]['stCycleParam']['fRadiusRight']=0x0,this['stFishParam'][_0x5bb5bd]['stCycleParam']['fRadiusTop']=0x0,this['stFishParam'][_0x5bb5bd]['stCycleParam']['fRadiusBottom']=0x0,this['stFishParam'][_0x5bb5bd]['fZoom']=0x0,this['stFishParam'][_0x5bb5bd]['fWideScanOffset']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZColor']={},this['stFishParam'][_0x5bb5bd]['stPTZColor']['nR']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZColor']['nG']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZColor']['nB']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZColor']['nAlpha']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZSelect']={},this['stFishParam'][_0x5bb5bd]['stPTZSelect']['fTop']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZSelect']['fBottom']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZSelect']['fLeft']=0x0,this['stFishParam'][_0x5bb5bd]['stPTZSelect']['fRight']=0x0,this['stFishParam'][_0x5bb5bd]['nCut']=0x0;}},{'key':'FEC_SetCanvasID','value':function(_0x461e15){return this['mainFECCorrect']=_0x186ff9['SR_DE_FISH_ORIGINAL'],0x1;}},{'key':'FEC_ResetCorrectType','value':function(_0x524c38,_0x41579d,_0x34714a){if(!0x1===this['hasSetFECParamManager']&&(null==this['pFishParamManager']&&(this['pFishParamManager']=new _0x30cc90()),this['oVideoHandle']['SR_SetFishParamManager'](this['pFishParamManager']),this['hasSetFECParamManager']=!0x0),_0x34714a!=_0x4fbb93&&_0x34714a!=_0x2cb8a2&&_0x34714a!=_0x4e5968&&_0x34714a!=_0x1837a3&&_0x34714a!=_0x54a990&&_0x34714a!=_0x30e952&&_0x34714a!=_0x20b7ae&&_0x34714a!=_0x39b0d3&&_0x34714a!=_0x2a01ec)return console['log']('%c\\x2020231122\\x20hardDecoder\\x20not\\x20support\\x20correctType:%d','color:red',_0x34714a),this['FECErrorCode']=0x10,0x0;if(0x1!=this['FECParamJudge'](_0x524c38,_0x41579d,_0x34714a))return 0x0;var _0x204106;if(_0x204106=this['_ConvertDisplayEffect'](_0x41579d,_0x34714a),0x0==_0x524c38&&null==this['stFishEyeManager'][_0x524c38]['pRender']&&(this['stFishEyeManager'][_0x524c38]['pRender']=this['oVideoHandle'],this['stFishEyeManager'][_0x524c38]['nSubPort']=_0x524c38,this['stFishEyeManager'][_0x524c38]['sCanvasID']=this['mainCanvasID'],this['stFishEyeManager'][_0x524c38]['bUsed']=0x1,this['stFishEyeManager'][_0x524c38]['bInited']=0x1,this['stFishEyeManager'][_0x524c38]['nValidSubPort']=this['mainVaildSubPort'],this['stFishEyeManager'][_0x524c38]['emPlaceType']=_0x41579d,this['stFishEyeManager'][_0x524c38]['emCorrectType']=_0x34714a,this['stFishEyeManager'][_0x524c38]['emEffect']=_0x204106,this['mainFECCorrect']=_0x204106),null!=this['stFishEyeManager'][_0x524c38]['pRender']){this['stFishEyeManager'][_0x524c38]['pRender']['SR_DelSubPort'](this['stFishEyeManager'][_0x524c38]['nValidSubPort']);var _0x3379b4=this['stFishEyeManager'][_0x524c38]['pRender']['SR_AddSubPort'](_0x204106);if(-0x1==_0x3379b4)return console['info']('%c\\x20FEC_ResetCorrectType\\x20SR_AddSubPort\\x20error\\x20subport:%d','color:\\x20red',_0x3379b4),0x0;if(this['stFishEyeManager'][_0x524c38]['nValidSubPort']=_0x3379b4,this['stFishEyeManager'][_0x524c38]['emPlaceType']=_0x41579d,this['stFishEyeManager'][_0x524c38]['emCorrectType']=_0x34714a,this['stFishEyeManager'][_0x524c38]['emEffect']=_0x204106,_0x1837a3<=this['stFishEyeManager'][_0x524c38]['emCorrectType']){var _0x5ac827=this['stFishEyeManager'][_0x524c38]['pRender']['SR_SetRenderState'](_0x57ef5a,0x0);_0xa87ede!=_0x5ac827&&console['log']('>>>VideoRender.js\\x20SR_SetRenderState\\x20failed\\x20ret：%08x\\x0a',_0x5ac827);}}return this['FECShowMode']>0x0&&null!=this['stFishEyeManager'][_0x524c38]['pRender']&&this['stFishEyeManager'][_0x524c38]['pRender']['SR_SetPTZDisplayMode'](this['FECShowMode']),0x0==_0x524c38&&(this['mainVaildSubPort']=this['stFishEyeManager'][_0x524c38]['nValidSubPort']),0x1;}},{'key':'FEC_GetPort','value':function(_0x4edce7,_0x16fe01){if(_0x16fe01!=_0x4fbb93&&_0x16fe01!=_0x2cb8a2&&_0x16fe01!=_0x4e5968&&_0x16fe01!=_0x1837a3&&_0x16fe01!=_0x54a990&&_0x16fe01!=_0x30e952&&_0x16fe01!=_0x20b7ae&&_0x16fe01!=_0x39b0d3&&_0x16fe01!=_0x2a01ec)return console['log']('%c\\x2020231112\\x20hardDecoder\\x20not\\x20support\\x20emCorrectType:%d','color:red',_0x16fe01),this['FECErrorCode']=0x10,-0x1;var _0x427cfe;if(0x1!=this['FECParamJudge'](-0x1,_0x4edce7,_0x16fe01))return-0x1;var _0x3df02b=0x0;for(_0x427cfe=0x1;_0x427cfe<_0x5440d6;_0x427cfe++)if(0x0==this['stFishEyeManager'][_0x427cfe]['nSubPort']&&0x0==this['stFishEyeManager'][_0x427cfe]['bUsed']){this['stFishEyeManager'][_0x427cfe]['nSubPort']=_0x427cfe,this['stFishEyeManager'][_0x427cfe]['nValidSubPort']=-0x1,this['stFishEyeManager'][_0x427cfe]['bUsed']=0x1,this['stFishEyeManager'][_0x427cfe]['emPlaceType']=_0x4edce7,this['stFishEyeManager'][_0x427cfe]['emCorrectType']=_0x16fe01,_0x3df02b=_0x427cfe;break;}if(_0x5440d6==_0x427cfe)return console['info']('%c\\x20FEC_GetPort-12\\x20fish\\x20subport\\x20max','color:\\x20red'),this['FECErrorCode']=0x504,-0x1;var _0x36ac05;return _0x36ac05=this['_ConvertDisplayEffect'](this['stFishEyeManager'][_0x3df02b]['emPlaceType'],this['stFishEyeManager'][_0x3df02b]['emCorrectType']),_0x186ff9['SR_DE_FISH_ORIGINAL']!=_0x36ac05?(0x0==this['stFishEyeManager'][_0x3df02b]['bInited']&&(this['stFishEyeManager'][_0x3df02b]['emEffect']=_0x36ac05,this['stFishEyeManager'][_0x3df02b]['bInited']=0x0,this['stFishParam'][_0x3df02b]['fZoom']=0.005,this['stFishParam'][_0x3df02b]['stPTZParam']['fPTZPositionX']=0.5,this['stFishParam'][_0x3df02b]['stPTZParam']['fPTZPositionY']=0.5,this['stFishParam'][_0x3df02b]['fWideScanOffset']=0x0),this['FECErrorCode']=0x0,this['subPortNum']++,_0x3df02b):_0x3df02b<_0x5440d6&&0x0==this['stFishEyeManager'][_0x3df02b]['bInited']?(this['stFishEyeManager'][_0x3df02b]['emEffect']=_0x36ac05,this['stFishEyeManager'][_0x3df02b]['bInited']=0x0,this['stFishParam'][_0x3df02b]['fZoom']=0x0,this['stFishParam'][_0x3df02b]['stPTZParam']['fPTZPositionX']=0x0,this['stFishParam'][_0x3df02b]['stPTZParam']['fPTZPositionY']=0x0,this['stFishParam'][_0x3df02b]['fWideScanOffset']=0x0,this['FECErrorCode']=0x0,this['subPortNum']++,_0x3df02b):(this['stFishEyeManager'][_0x427cfe]['pRender']=null,this['stFishEyeManager'][_0x427cfe]['nSubPort']=0x0,this['stFishEyeManager'][_0x427cfe]['sCanvasID']=null,this['stFishEyeManager'][_0x427cfe]['bUsed']=0x0,this['stFishEyeManager'][_0x427cfe]['bInited']=0x0,this['stFishEyeManager'][_0x427cfe]['nValidSubPort']=0x0,this['stFishEyeManager'][_0x427cfe]['emPlaceType']=_0x1e68ea,this['stFishEyeManager'][_0x427cfe]['emCorrectType']=_0x4fbb93,this['stFishEyeManager'][_0x427cfe]['emEffect']=_0x186ff9['SR_DE_FISH_ORIGINAL'],this['FECErrorCode']=_0xa88cb3,-0x1);}},{'key':'FECParamJudge','value':function(_0xd98f83,_0x19e843,_0x440875){if((_0x240c92==_0x19e843||_0x1e68ea==_0x19e843)&&_0x30e952==_0x440875)return console['info']('%c\\x20FEC_GetPort-1\\x20floor\\x20and\\x20ceiling\\x20not\\x20support\\x20lat','color:\\x20red'),this['FECErrorCode']=_0xa88cb3,0x0;if(_0x2aea6b==_0x19e843&&_0x20b7ae==_0x440875)return console['info']('%c\\x20FEC_GetPort-2\\x20wall\\x20not\\x20support\\x20cylinger','color:\\x20red'),this['FECErrorCode']=_0xa88cb3,0x0;if(_0x2aea6b==_0x19e843&&_0x443c47==_0x440875)return console['info']('%c\\x20FEC_GetPort-3\\x20wall\\x20not\\x20support\\x20split\\x20cylinger','color:\\x20red'),this['FECErrorCode']=_0xa88cb3,0x0;if((_0x240c92==_0x19e843||_0x1e68ea==_0x19e843)&&_0x39b0d3==_0x440875)return console['info']('%c\\x20FEC_GetPort-4\\x20floor\\x20and\\x20ceiling\\x20not\\x20support\\x20horizontal','color:\\x20red'),this['FECErrorCode']=_0xa88cb3,0x0;if((_0x240c92==_0x19e843||_0x1e68ea==_0x19e843)&&_0x2a01ec==_0x440875)return console['info']('%c\\x20FEC_GetPort-5\\x20floor\\x20and\\x20ceiling\\x20not\\x20support\\x20vertical','color:\\x20red'),this['FECErrorCode']=_0xa88cb3,0x0;if(_0x2aea6b!=_0x19e843&&_0x240c92!=_0x19e843&&_0x1e68ea!=_0x19e843)return console['info']('%c\\x20FEC_GetPort-6\\x20emPlaceType\\x20only\\x20support\\x20floor,\\x20ceiling\\x20and\\x20wall','color:\\x20red'),this['FECErrorCode']=MP_E_SUPPORT,0x0;if(0x0!=_0x440875&&_0x440875!=_0x54a990&&_0x440875!=_0x2cb8a2&&_0x440875!=_0x4e5968&&_0x440875!=_0x30e952&&_0x440875!=_0x1837a3&&_0x440875!=_0x20b7ae&&_0x440875!=_0x443c47&&_0x440875!=_0x30ecd9&&_0x440875!=_0x39b0d3&&_0x440875!=_0x2a01ec)return console['info']('%c\\x20FEC_GetPort-7\\x20emCorrectType\\x20error','color:\\x20red'),this['FECErrorCode']=MP_E_SUPPORT,0x0;for(var _0x4c6d6b=0x0;_0x4c6d6b<_0x5440d6;_0x4c6d6b++)if(_0x4c6d6b!=_0xd98f83){if(this['stFishEyeManager'][_0x4c6d6b]['bUsed']&&this['stFishEyeManager'][_0x4c6d6b]['emPlaceType']!=_0x19e843)return console['info']('%c\\x20FEC_GetPort-8\\x20emPlaceType\\x20changed','color:\\x20red'),this['FECErrorCode']=0x517,0x0;if(this['stFishEyeManager'][_0x4c6d6b]['bUsed']&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x54a990&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x1837a3&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x20b7ae&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x443c47&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x30ecd9&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x39b0d3&&this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']!=_0x2a01ec&&_0x440875!=_0x54a990&&_0x440875!=_0x1837a3&&_0x440875!=_0x20b7ae&&_0x440875!=_0x443c47&&_0x440875!=_0x30ecd9&&_0x440875!=_0x39b0d3&&_0x440875!=_0x2a01ec)return console['info']('%c\\x20FEC_GetPort-9\\x20origin/180/360/lat\\x20only\\x20display\\x20one\\x20port','color:\\x20red'),this['FECErrorCode']=0x518,0x0;if(this['stFishEyeManager'][_0x4c6d6b]['bUsed']&&(this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']==_0x54a990&&_0x440875==_0x2cb8a2||this['stFishEyeManager'][_0x4c6d6b]['emCorrectType']==_0x2cb8a2&&_0x440875==_0x54a990))return console['info']('%c\\x20FEC_GetPort-10\\x20180\\x20cannot\\x20support\\x20ptz','color:\\x20red'),this['FECErrorCode']=0x518,0x0;}return 0x1;}},{'key':'FEC_Enable','value':function(_0x38de61){return _0x38de61<0x1||_0x38de61>0x1f||null==_0x38de61?(console['info']('%c\\x20FEC_Enable-1\\x20nSubPort:%d','color:\\x20red',_0x38de61),this['FECErrorCode']=_0x41c932,0x0):null!==this['stFishEyeManager'][_0x38de61]['pRender']?(console['info']('%c\\x20FEC_Enable-2\\x20nSubPort:%d','color:\\x20red',_0x38de61),this['FECErrorCode']=0x515,0x0):(null==this['stFishEyeManager'][_0x38de61]['pRender']&&(this['stFishEyeManager'][_0x38de61]['pRender']=new _0x453e55(),null==this['pFishParamManager']&&(this['pFishParamManager']=new _0x30cc90()),this['stFishEyeManager'][_0x38de61]['pRender']['SR_SetFishParamManager'](this['pFishParamManager'])),0x1);}},{'key':'FEC_SetWnd','value':function(_0xb663fd,_0x1038c6){if(_0xb663fd<0x1||_0xb663fd>0x1f||null==_0xb663fd)return console['info']('%c\\x20FEC_SetWnd-1\\x20nSubPort:%d','color:\\x20red',_0xb663fd),this['FECErrorCode']=_0x41c932,0x0;if(null==this['stFishEyeManager'][_0xb663fd]['pRender'])return console['info']('%c\\x20FEC_SetWnd-2\\x20nSubPort:%d\\x20pRender\\x20is\\x20null','color:\\x20red',_0xb663fd),this['FECErrorCode']=_0x599b74,0x0;if(0x0==this['stFishEyeManager'][_0xb663fd]['bUsed'])return console['info']('%c\\x20FEC_SetWnd-3\\x20nSubPort:%d\\x20bUsed:%d','color:\\x20red',_0xb663fd,this['stFishEyeManager'][_0xb663fd]['bUsed']),this['FECErrorCode']=_0x4b57a2,0x0;if(null==_0x1038c6)return console['info']('%c\\x20FEC_SetWnd-4\\x20nSubPort:%d\\x20sCanvasID:%s','color:\\x20red',_0xb663fd,_0x1038c6),this['FECErrorCode']=0x519,0x0;if(0x0!=this['stFishEyeManager'][_0xb663fd]['nSubPort']&&0x0!=this['stFishEyeManager'][_0xb663fd]['bUsed']){if(0x0!=this['stFishEyeManager'][_0xb663fd]['bInited']&&null!=this['stFishEyeManager'][_0xb663fd]['sCanvasID'])return _0x1038c6!=this['stFishEyeManager'][_0xb663fd]['sCanvasID']?(console['info']('%c\\x20FEC_SetWnd-5\\x20nSubPort:%d\\x20sCanvasID:%s\\x20already\\x20init','color:\\x20red',_0xb663fd,_0x1038c6),this['FECErrorCode']=0x506,0x0):0x1;var _0x49e36c;_0x49e36c=this['_ConvertDisplayEffect'](this['stFishEyeManager'][_0xb663fd]['emPlaceType'],this['stFishEyeManager'][_0xb663fd]['emCorrectType']);var _0x4577b8=this['stFishEyeManager'][_0xb663fd]['pRender']['SR_Init'](_0x1038c6,_0xa01ff6),_0x552ae2=this['stFishEyeManager'][_0xb663fd]['pRender']['SR_AddSubPort'](_0x49e36c);if(-0x1==_0x552ae2)return console['info']('%c\\x20FEC_SetWnd\\x20SR_AddSubPort\\x20error\\x20subport:%d','color:\\x20red',_0xb663fd),0x0;if(this['stFishEyeManager'][_0xb663fd]['nValidSubPort']=_0x552ae2,_0xa87ede!=_0x4577b8)return this['stFishEyeManager'][_0xb663fd]['bInited']=0x0,this['stFishEyeManager'][_0xb663fd]['sCanvasID']=null,this['FECErrorCode']=_0x4b57a2,0x0;if(this['stFishEyeManager'][_0xb663fd]['bInited']=0x1,this['stFishEyeManager'][_0xb663fd]['sCanvasID']=_0x1038c6,_0x1837a3<=this['stFishEyeManager'][_0xb663fd]['emCorrectType']){var _0x303aaf=this['stFishEyeManager'][_0xb663fd]['pRender']['SR_SetRenderState'](_0x57ef5a,0x0);_0xa87ede!=_0x303aaf&&console['log']('>>>VideoRender.js\\x20SR_SetRenderState\\x20failed\\x20ret：%08x\\x0a',_0x303aaf);}return this['FECShowMode']>0x0&&this['stFishEyeManager'][_0xb663fd]['pRender']['SR_SetPTZDisplayMode'](this['FECShowMode']),0x1;}return this['FECErrorCode']=_0x4b57a2,0x0;}},{'key':'FEC_Disable','value':function(_0x21074f,_0x145f67,_0x183cf1){if(_0x21074f<0x1||_0x21074f>0x1f||null==_0x21074f)return console['info']('%c\\x20FEC_Disable-1\\x20nSubPort:%d','color:\\x20red',_0x21074f),this['FECErrorCode']=_0x41c932,0x0;if(0x1==this['stFishEyeManager'][_0x21074f]['bInited']&&null!=this['stFishEyeManager'][_0x21074f]['pRender']){if(_0xa87ede!=this['stFishEyeManager'][_0x21074f]['pRender']['SR_DelSubPort'](this['stFishEyeManager'][_0x21074f]['nValidSubPort']))return console['info']('%c\\x20FEC_Disable-2\\x20SR_DelSubPort\\x20error\\x20nSubPort:%d','color:\\x20red',_0x21074f),0x0;this['stFishEyeManager'][_0x21074f]['bInited']=0x0,this['stFishEyeManager'][_0x21074f]['nValidSubPort']=-0x1,this['stFishEyeManager'][_0x21074f]['pRender']['SR_Destroy'](),this['stFishEyeManager'][_0x21074f]['pRender']=null;}return 0x1;}},{'key':'FEC_DelPort','value':function(_0x439d0b){return _0x439d0b<0x1||_0x439d0b>0x1f||null==_0x439d0b?(console['info']('%c\\x20FEC_DelPort-1\\x20nSubPort:%d','color:\\x20red',_0x439d0b),this['FECErrorCode']=_0x41c932,0x0):0x0==this['stFishEyeManager'][_0x439d0b]['bUsed']?(console['info']('%c\\x20FEC_DelPort-2\\x20nSubPort:%d\\x20bUsed：%d','color:\\x20red',_0x439d0b,this['stFishEyeManager'][_0x439d0b]['bUsed']),this['FECErrorCode']=_0x4b57a2,0x0):(this['stFishEyeManager'][_0x439d0b]['nSubPort']=0x0,this['stFishEyeManager'][_0x439d0b]['sCanvasID']=null,this['stFishEyeManager'][_0x439d0b]['bUsed']=0x0,this['stFishEyeManager'][_0x439d0b]['bInited']=0x0,this['stFishEyeManager'][_0x439d0b]['nValidSubPort']=0x0,this['stFishEyeManager'][_0x439d0b]['emPlaceType']=_0x1e68ea,this['stFishEyeManager'][_0x439d0b]['emCorrectType']=_0x4fbb93,this['stFishEyeManager'][_0x439d0b]['emEffect']=_0x186ff9['SR_DE_FISH_ORIGINAL'],this['stFishParam'][_0x439d0b]['stCycleParam']['fRadiusLeft']=0x0,this['stFishParam'][_0x439d0b]['stCycleParam']['fRadiusRight']=0x1,this['stFishParam'][_0x439d0b]['stCycleParam']['fRadiusTop']=0x0,this['stFishParam'][_0x439d0b]['stCycleParam']['fRadiusBottom']=0x1,this['subPortNum']>0x0&&this['subPortNum']--,0x1);}},{'key':'FEC_SetParam','value':function(_0x237226,_0x485f7d){if(this['FECErrorCode']=0x0,_0x237226<0x0||_0x237226>0x1f||null==_0x237226)return console['info']('%c\\x20FEC_SetParam-1\\x20nSubPort:%d','color:\\x20red',_0x237226),this['FECErrorCode']=_0x41c932,0x0;if(null==this['stFishEyeManager'][_0x237226]['pRender'])return console['info']('%c\\x20FEC_SetParam-2\\x20nSubPort:%d\\x20pRender:%d','color:\\x20red',_0x237226,this['stFishEyeManager'][_0x237226]['pRender']),this['FECErrorCode']=_0x599b74,0x0;if(0x0==this['stFishEyeManager'][_0x237226]['bUsed'])return console['info']('%c\\x20FEC_SetParam-3\\x20nSubPort:%d\\x20bUsed:%d','color:\\x20red',_0x237226,this['stFishEyeManager'][_0x237226]['bUsed']),this['FECErrorCode']=_0x4b57a2,0x0;if(this['stFishEyeManager'][_0x237226]['emCorrectType']>=_0x1837a3&&this['stFishEyeManager'][_0x237226]['emCorrectType']<=_0x2a01ec&&0x1e&_0x485f7d['upDateType'])return console['info']('%c\\x20FEC_SetParam-4\\x20nSubPort:%d\\x20not\\x203D','color:\\x20red',_0x237226),this['FECErrorCode']=_0x13beae,0x0;if(_0x16ee77&_0x485f7d['upDateType']){if(null==_0x485f7d['stCycleParam'])return this['FECErrorCode']=_0x31d5c8,0x0;for(var _0x43b2cb=0x1;_0x43b2cb<_0x5440d6;_0x43b2cb++){if(this['stFishEyeManager'][_0x43b2cb]['bUsed']&&this['stFishEyeManager'][_0x43b2cb]['nSubPort']&&_0x39b0d3==this['stFishEyeManager'][_0x43b2cb]['emCorrectType']&&(_0x485f7d['stCycleParam']['fRadiusLeft']<=-0.5||_0x485f7d['stCycleParam']['fRadiusLeft']>=0.4||_0x485f7d['stCycleParam']['fRadiusRight']<=0.6||_0x485f7d['stCycleParam']['fRadiusRight']>=1.5||_0x485f7d['stCycleParam']['fRadiusTop']<=-0.5||_0x485f7d['stCycleParam']['fRadiusTop']>0x0||_0x485f7d['stCycleParam']['fRadiusBottom']<0x1||_0x485f7d['stCycleParam']['fRadiusBottom']>=1.5||_0x485f7d['stCycleParam']['fRadiusLeft']+_0x485f7d['stCycleParam']['fRadiusRight']<=0.8||_0x485f7d['stCycleParam']['fRadiusLeft']+_0x485f7d['stCycleParam']['fRadiusRight']>=1.2||_0x485f7d['stCycleParam']['fRadiusTop']+_0x485f7d['stCycleParam']['fRadiusBottom']<=0.8||_0x485f7d['stCycleParam']['fRadiusTop']+_0x485f7d['stCycleParam']['fRadiusBottom']>=1.2))return this['FECErrorCode']=_0x31d5c8,0x0;if(this['stFishEyeManager'][_0x43b2cb]['bUsed']&&this['stFishEyeManager'][_0x43b2cb]['nSubPort']&&_0x2a01ec==this['stFishEyeManager'][_0x43b2cb]['emCorrectType']&&(_0x485f7d['stCycleParam']['fRadiusLeft']<=-0.5||_0x485f7d['stCycleParam']['fRadiusLeft']>0x0||_0x485f7d['stCycleParam']['fRadiusRight']<0x1||_0x485f7d['stCycleParam']['fRadiusRight']>=1.5||_0x485f7d['stCycleParam']['fRadiusTop']<=-0.5||_0x485f7d['stCycleParam']['fRadiusTop']>=0.4||_0x485f7d['stCycleParam']['fRadiusBottom']<=0.6||_0x485f7d['stCycleParam']['fRadiusBottom']>=1.5||_0x485f7d['stCycleParam']['fRadiusLeft']+_0x485f7d['stCycleParam']['fRadiusRight']<=0.8||_0x485f7d['stCycleParam']['fRadiusLeft']+_0x485f7d['stCycleParam']['fRadiusRight']>=1.2||_0x485f7d['stCycleParam']['fRadiusTop']+_0x485f7d['stCycleParam']['fRadiusBottom']<=0.8||_0x485f7d['stCycleParam']['fRadiusTop']+_0x485f7d['stCycleParam']['fRadiusBottom']>=1.2))return this['FECErrorCode']=_0x31d5c8,0x0;}}if(0x0==this['stFishEyeManager'][_0x237226]['bInited']){if(_0x353221&_0x485f7d['upDateType']){if(_0x2cb8a2!=this['stFishEyeManager'][_0x237226]['emCorrectType']&&_0x4e5968!=this['stFishEyeManager'][_0x237226]['emCorrectType']||_0x2aea6b==this['stFishEyeManager'][_0x237226]['emPlaceType'])return this['FECErrorCode']=_0x13beae,0x0;for(var _0x1db10f=0x1;_0x1db10f<_0x5440d6;_0x1db10f++)if(this['stFishEyeManager'][_0x1db10f]['nSubPort']&&this['stFishEyeManager'][_0x1db10f]['bUsed']&&this['stFishEyeManager'][_0x1db10f]['emCorrectType']==_0x54a990)return this['FECErrorCode']=_0x1ee0b0,0x0;this['stFishParam'][_0x237226]['fWideScanOffset']=_0x485f7d['fValue'];}if(_0x1f2582&_0x485f7d['upDateType']){if(null==_0x485f7d['stPTZColor'])return this['FECErrorCode']=_0x31d5c8,0x0;if(_0x485f7d['stPTZColor']['nR']>0xff||_0x485f7d['stPTZColor']['nG']>0xff||_0x485f7d['stPTZColor']['nB']>0xff||_0x485f7d['stPTZColor']['nAlpha']>0xff)return this['FECErrorCode']=_0x13beae,0x0;this['stFishParam'][_0x237226]['stPTZColor']['nR']=_0x485f7d['stPTZColor']['nR'],this['stFishParam'][_0x237226]['stPTZColor']['nG']=_0x485f7d['stPTZColor']['nG'],this['stFishParam'][_0x237226]['stPTZColor']['nB']=_0x485f7d['stPTZColor']['nB'],this['stFishParam'][_0x237226]['stPTZColor']['nAlpha']=_0x485f7d['stPTZColor']['nAlpha'];}if(_0x2b1528&_0x485f7d['upDateType']){if(_0x54a990!=this['stFishEyeManager'][_0x237226]['emCorrectType'])return this['FECErrorCode']=_0x13beae,0x0;this['stFishParam'][_0x237226]['stPTZParam']['fPTZPositionX']=_0x485f7d['fPTZParam']['fPTZPositionX'],this['stFishParam'][_0x237226]['stPTZParam']['fPTZPositionY']=_0x485f7d['fPTZParam']['fPTZPositionY'];}if(_0x3ff4c5&_0x485f7d['upDateType']){if(_0x54a990!=this['stFishEyeManager'][_0x237226]['emCorrectType'])return this['FECErrorCode']=_0x13beae,0x0;this['stFishParam'][_0x237226]['fZoom']=_0x485f7d['fPTZZoom'];}if(_0x160732&_0x485f7d['upDateType']){if(null==this['stFishParam']['stPTZSelect'])return 0x0;if(_0x54a990!=this['stFishEyeManager'][_0x237226]['emCorrectType'])return this['FECErrorCode']=_0x13beae,0x0;this['stFishParam']['stPTZSelect']['fTop']=_0x485f7d['stPTZSelect']['fTop'],this['stFishParam']['stPTZSelect']['fBottom']=_0x485f7d['stPTZSelect']['fBottom'],this['stFishParam']['stPTZSelect']['fLeft']=_0x485f7d['stPTZSelect']['fLeft'],this['stFishParam']['stPTZSelect']['fRight']=_0x485f7d['stPTZSelect']['fRight'];}if(_0x16ee77&_0x485f7d['upDateType']){if(null==_0x485f7d['stCycleParam'])return this['FECErrorCode']=_0x31d5c8,0x0;if(0x0==this['_IsValidRadiusParam'](_0x485f7d['stCycleParam']))return this['FECErrorCode']=_0x31d5c8,0x0;this['stFishParam'][0x0]['stCycleParam']['fRadiusLeft']=_0x485f7d['stCycleParam']['fRadiusLeft'],this['stFishParam'][0x0]['stCycleParam']['fRadiusRight']=_0x485f7d['stCycleParam']['fRadiusRight'],this['stFishParam'][0x0]['stCycleParam']['fRadiusTop']=_0x485f7d['stCycleParam']['fRadiusTop'],this['stFishParam'][0x0]['stCycleParam']['fRadiusBottom']=_0x485f7d['stCycleParam']['fRadiusBottom'];}return 0x1;}if(_0x353221&_0x485f7d['upDateType']){if(_0x2cb8a2!=this['stFishEyeManager'][_0x237226]['emCorrectType']&&_0x4e5968!=this['stFishEyeManager'][_0x237226]['emCorrectType']||_0x2aea6b==this['stFishEyeManager'][_0x237226]['emPlaceType'])return this['FECErrorCode']=_0x13beae,0x0;for(var _0x605b6d=0x1;_0x605b6d<_0x5440d6;_0x605b6d++)if(this['stFishEyeManager'][_0x605b6d]['nSubPort']&&this['stFishEyeManager'][_0x605b6d]['bUsed']&&this['stFishEyeManager'][_0x605b6d]['emCorrectType']==_0x54a990)return this['FECErrorCode']=_0x1ee0b0,0x0;var _0x2745e8={};if(_0x2745e8['nFishParamType']=_0x5ca12e,_0x2745e8['bBlack']=0x0,_0x2745e8['fAngle']=_0x485f7d['fValue'],_0xa87ede!=this['stFishEyeManager'][_0x237226]['pRender']['SR_SetFishParam'](_0x2745e8))return this['FECErrorCode']=_0x1ee0b0,0x0;this['stFishParam'][_0x237226]['fWideScanOffset']=_0x485f7d['fValue'];}if(_0x1f2582&_0x485f7d['upDateType']){if(null==_0x485f7d['stPTZColor'])return this['FECErrorCode']=_0x13beae,0x0;if(_0x485f7d['stPTZColor']['nR']>0xff||_0x485f7d['stPTZColor']['nG']>0xff||_0x485f7d['stPTZColor']['nB']>0xff||_0x485f7d['stPTZColor']['nAlpha']>0xff)return this['FECErrorCode']=_0x13beae,0x0;var _0x226925={};_0x226925['fR']=float(_0x485f7d['stPTZColor']['nR']/0xff),_0x226925['fG']=float(_0x485f7d['stPTZColor']['nG']/0xff),_0x226925['fB']=float(_0x485f7d['stPTZColor']['nB']/0xff),_0x226925['fA']=float(_0x485f7d['stPTZColor']['nAlpha']/0xff),this['stFishParam'][_0x237226]['stPTZColor']['nR']=_0x485f7d['stPTZColor']['nR'],this['stFishParam'][_0x237226]['stPTZColor']['nG']=_0x485f7d['stPTZColor']['nG'],this['stFishParam'][_0x237226]['stPTZColor']['nB']=_0x485f7d['stPTZColor']['nB'],this['stFishParam'][_0x237226]['stPTZColor']['nAlpha']=_0x485f7d['stPTZColor']['nAlpha'];}if(_0x2b1528&_0x485f7d['upDateType']){if(_0x54a990!=this['stFishEyeManager'][_0x237226]['emCorrectType'])return this['FECErrorCode']=_0x13beae,0x0;var _0x179a25={};_0x179a25['nFishParamType']=_0x3be196,_0x179a25['bBlack']=0x0,_0x179a25['fPTZX']=_0x485f7d['fPTZParam']['fPTZPositionX'],_0x179a25['fPTZY']=_0x485f7d['fPTZParam']['fPTZPositionY'];var _0x2080ac=this['stFishEyeManager'][_0x237226]['pRender']['SR_SetFishParam'](_0x179a25);if(_0xa87ede!=_0x2080ac)return this['FECErrorCode']=_0x1ee0b0,0x0;this['stFishParam'][_0x237226]['stPTZParam']['fPTZPositionX']=_0x485f7d['fPTZParam']['fPTZPositionX'],this['stFishParam'][_0x237226]['stPTZParam']['fPTZPositionY']=_0x485f7d['fPTZParam']['fPTZPositionY'];}if(_0x3ff4c5&_0x485f7d['upDateType']){if(_0x54a990!=this['stFishEyeManager'][_0x237226]['emCorrectType'])return this['FECErrorCode']=_0x13beae,0x0;var _0x3a5d9f={};if(_0x3a5d9f['nFishParamType']=_0x378a81,_0x3a5d9f['bBlack']=0x0,_0x3a5d9f['fZoom']=_0x485f7d['fPTZZoom'],_0xa87ede!=this['stFishEyeManager'][_0x237226]['pRender']['SR_SetFishParam'](_0x3a5d9f))return this['FECErrorCode']=_0x1ee0b0,0x0;this['stFishParam'][_0x237226]['fZoom']=_0x485f7d['fPTZZoom'];}if(_0x16ee77&_0x485f7d['upDateType']){if(0x0==this['_IsValidRadiusParam'](_0x485f7d['stCycleParam']))return this['FECErrorCode']=_0x31d5c8,0x0;var _0x5b29fe={};if(_0x5b29fe['nFishParamType']=_0x392c27,_0x5b29fe['bBlack']=0x1,_0x5b29fe['fRXLeft']=_0x485f7d['stCycleParam']['fRadiusLeft'],_0x5b29fe['fRXRight']=_0x485f7d['stCycleParam']['fRadiusRight'],_0x5b29fe['fRYTop']=_0x485f7d['stCycleParam']['fRadiusTop'],_0x5b29fe['fRYBottom']=_0x485f7d['stCycleParam']['fRadiusBottom'],_0xa87ede!=this['stFishEyeManager'][_0x237226]['pRender']['SR_SetFishParam'](this['stFishEyeManager'][_0x237226]['nValidSubPort'],_0x5b29fe))return this['FECErrorCode']=_0x31d5c8,0x0;this['stFishParam'][0x0]['stCycleParam']['fRadiusLeft']=_0x485f7d['stCycleParam']['fRadiusLeft'],this['stFishParam'][0x0]['stCycleParam']['fRadiusRight']=_0x485f7d['stCycleParam']['fRadiusRight'],this['stFishParam'][0x0]['stCycleParam']['fRadiusTop']=_0x485f7d['stCycleParam']['fRadiusTop'],this['stFishParam'][0x0]['stCycleParam']['fRadiusBottom']=_0x485f7d['stCycleParam']['fRadiusBottom'];}return _0x160732&_0x485f7d['upDateType']&&_0x54a990==this['stFishEyeManager'][_0x237226]['emCorrectType']&&_0xa87ede!=this['stFishEyeManager'][_0x237226]['pRender']['SR_SetFishParam'](this['stFishEyeManager'][_0x237226]['stPTZSelect'])?(this['FECErrorCode']=0x513,0x0):0x1;}},{'key':'FEC_GetParam','value':function(_0x23d898,_0x5da795){return _0x23d898<0x0||_0x23d898>0x1f||null==_0x23d898?(console['info']('%c\\x20FEC_GetParam-1\\x20nSubPort:%d','color:\\x20red',_0x23d898),this['FECErrorCode']=_0x41c932,0x0):null==this['stFishEyeManager'][_0x23d898]['pRender']?(console['info']('%c\\x20FEC_GetParam-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0x23d898]['pRender']),this['FECErrorCode']=_0x599b74,0x0):(this['stFishEyeManager'][_0x23d898]['pRender']['SR_GetFishParam'](_0x5da795),_0x5da795['emCorrectType']=this['stFishEyeManager'][_0x23d898]['emCorrectType'],0x1);}},{'key':'_IsValidRadiusParam','value':function(_0x40fd77){return _0x40fd77['fRadiusBottom']<=_0x40fd77['fRadiusTop']||_0x40fd77['fRadiusRight']<=_0x40fd77['fRadiusLeft']?0x0:0x1;}},{'key':'FEC_SetViewParam','value':function(_0x4a0fcd,_0x6d5dc9,_0x40e4db){return _0x4a0fcd<0x0||_0x4a0fcd>0x1f||null==_0x4a0fcd?(console['info']('%c\\x20FEC_SetViewParam-1\\x20nSubPort:%d','color:\\x20red',_0x4a0fcd),this['FECErrorCode']=_0x41c932,0x0):null==this['stFishEyeManager'][_0x4a0fcd]['pRender']?(console['info']('%c\\x20FEC_SetViewParam-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0x4a0fcd]['pRender']),this['FECErrorCode']=_0x599b74,0x0):_0x6d5dc9<_0x394973||_0x6d5dc9>_0x339c63?(this['FECErrorCode']=_0x633153,0x0):(this['FECErrorCode']=0x0,0x0==this['stFishEyeManager'][_0x4a0fcd]['bInited']?(this['FECErrorCode']=_0x4b57a2,0x0):_0x1837a3<=this['stFishEyeManager'][_0x4a0fcd]['emCorrectType']?_0xa87ede!=this['stFishEyeManager'][_0x4a0fcd]['pRender']['SR_SetViewParam'](_0x6d5dc9,_0x40e4db)?(this['FECErrorCode']=_0x633153,0x0):0x1:(this['FECErrorCode']=_0x13beae,0x0));}},{'key':'FEC_GetViewParam','value':function(_0xcd7f54,_0x5891ca,_0x5f1437){if(_0x5f1437['fValue']=-0x1,_0xcd7f54<0x0||_0xcd7f54>0x1f||null==_0xcd7f54)return console['info']('%c\\x20FEC_GetViewParam-1\\x20nSubPort:%d','color:\\x20red',_0xcd7f54),this['FECErrorCode']=_0x41c932,0x0;if(null==this['stFishEyeManager'][_0xcd7f54]['pRender'])return console['info']('%c\\x20FEC_GetViewParam-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0xcd7f54]['pRender']),this['FECErrorCode']=_0x599b74,0x0;if(_0x5891ca<0x1||_0x5891ca>0x3||0x0==this['stFishEyeManager'][_0xcd7f54]['bInited'])return 0x0;if(_0x1837a3<=this['stFishEyeManager'][_0xcd7f54]['emCorrectType'])this['stFishEyeManager'][_0xcd7f54]['pRender']['SR_GetViewParam'](_0x5891ca,_0x5f1437);return 0x1;}},{'key':'FEC_SetDisplayRegion','value':function(_0x3d509f,_0x79e701,_0x3db710,_0x11fb5e,_0x5d386a,_0x384723,_0x377cbb){return _0x3d509f<0x0||_0x3d509f>0x1f||null==_0x3d509f?(console['info']('%c\\x20FEC_SetDisplayRegion-1\\x20nSubPort:%d','color:\\x20red',_0x3d509f),this['FECErrorCode']=_0x41c932,0x0):null==this['stFishEyeManager'][_0x3d509f]['pRender']?(console['info']('%c\\x20FEC_SetDisplayRegion-2\\x20pRender:%d','color:\\x20red',this['stFishEyeManager'][_0x3d509f]['pRender']),this['FECErrorCode']=_0x599b74,0x0):0x0!=_0x79e701||0x0!=_0x3db710?(this['FECErrorCode']=_0x633153,0x0):this['stFishEyeManager'][_0x3d509f]['emCorrectType']!=_0x4fbb93&&this['stFishEyeManager'][_0x3d509f]['emCorrectType']!=_0x2cb8a2&&this['stFishEyeManager'][_0x3d509f]['emCorrectType']!=_0x4e5968&&this['stFishEyeManager'][_0x3d509f]['emCorrectType']!=_0x30e952?(this['FECErrorCode']=_0xa88cb3,0x0):0x0==this['stFishEyeManager'][_0x3d509f]['bInited']?(this['FECErrorCode']=_0x4b57a2,0x0):_0x11fb5e<0x0||_0x5d386a<0x0||_0x384723<0x0||_0x377cbb<0x0?(this['FECErrorCode']=_0x633153,0x0):_0xa87ede!=this['stFishEyeManager'][_0x3d509f]['pRender']['SR_SetDisplayRect'](_0x11fb5e,_0x5d386a,_0x384723,_0x377cbb,_0xe9e464)?(this['FECErrorCode']=0x511,0x0):0x1;}},{'key':'FEC_SetBackCilling','value':function(_0xbc4cf3,_0x201397){return _0xbc4cf3<0x0||_0xbc4cf3>0x1f||null==_0xbc4cf3?(this['FECErrorCode']=_0x41c932,0x0):null==this['stFishEyeManager'][_0xbc4cf3]['pRender']?(this['FECErrorCode']=_0x599b74,0x0):0x0==this['stFishEyeManager'][_0xbc4cf3]['bInited']?(this['FECErrorCode']=_0x4b57a2,0x0):_0xa87ede!=this['stFishEyeManager'][_0xbc4cf3]['pRender']['SR_SetRenderState'](_0x57ef5a,_0x201397)?(this['FECErrorCode']=0x511,0x0):0x1;}},{'key':'FEC_GetPTZPort','value':function(_0x4fe218,_0x7d79a,_0x4703e2){if(null!=this['stFishEyeManager'][_0x4fe218]['pRender']){var _0x47f9ac={'nPTZPort':-0x1};if(this['stFishEyeManager'][_0x4fe218]['pRender']['SR_GetPTZPort'](_0x7d79a,_0x4703e2,_0x47f9ac)==_0xa87ede)return _0x47f9ac['nPTZPort'];}return-0x1;}},{'key':'FEC_SetPTZDisplayMode','value':function(_0x5168d7){return _0x5168d7>=0x0&&_0x5168d7<=0x2?(null!=this['stFishEyeManager'][0x0]['pRender']&&this['stFishEyeManager'][0x0]['pRender']['SR_SetPTZDisplayMode'](_0x5168d7),this['FECShowMode']=_0x5168d7,0x1):(console['info']('%c\\x20FEC_SetPTZDisplayMode\\x20ptzMode:%d','color:\\x20red',_0x5168d7),0x0);}},{'key':'CheckFrameRGB','value':function(_0x400c17,_0x548d6f,_0x2d4a2b,_0x429d43,_0x85a7c0,_0x75707d){if(null==_0x400c17)return 0x0;for(var _0x1abe54=_0x400c17['width']/(_0x429d43-0x1),_0x597f03=_0x400c17['height']/(_0x2d4a2b-0x1),_0x5de9dd=0x0,_0x42fb15=0x0,_0x5e4ee7=[],_0x370864=0x0;_0x370864<_0x2d4a2b*_0x429d43;_0x370864++)_0x5e4ee7[_0x370864]=0x0,this['aPOSAdaptBuf'][_0x370864]=0x0;if(_0x548d6f){for(var _0x3e2865=0x0,_0x5c702f=0x0;_0x5c702f<_0x400c17['height'];_0x5c702f++)for(var _0x10ae9f=0x0;_0x10ae9f<_0x400c17['width'];_0x10ae9f++){_0x5de9dd=(_0x5de9dd=Math['round'](_0x10ae9f/(_0x1abe54/0x2)/0x2))<_0x429d43?_0x5de9dd:_0x429d43-0x1,_0x42fb15=(_0x42fb15=Math['round'](_0x5c702f/(_0x597f03/0x2)/0x2))<_0x2d4a2b?_0x42fb15:_0x2d4a2b-0x1;var _0x336a7e=_0x400c17['pBuffer'][_0x3e2865],_0x24b367=_0x400c17['pBuffer'][_0x3e2865+0x1],_0x36ee90=_0x400c17['pBuffer'][_0x3e2865+0x2],_0x22e317=Math['round'](0.299*_0x336a7e+0.587*_0x24b367+0.114*_0x36ee90);this['aPOSAdaptBuf'][_0x5de9dd+_0x42fb15*_0x429d43]+=_0x22e317,_0x5e4ee7[_0x5de9dd+_0x42fb15*_0x429d43]++,_0x3e2865+=0x4;}for(var _0x401fa2=0x0,_0x5bb257=0x0;_0x5bb257<_0x2d4a2b*_0x429d43;_0x5bb257++)_0x401fa2=this['aPOSAdaptBuf'][_0x5bb257]/_0x5e4ee7[_0x5bb257],this['aPOSAdaptBuf'][_0x5bb257]=_0x401fa2>0x80?0x0:0x1;}else{for(var _0x3562ea=Math['round'](_0x85a7c0*_0x400c17['width']),_0x1174dc=Math['round'](_0x75707d*_0x400c17['height']),_0x55c743=_0x1174dc-0x2;_0x55c743<_0x1174dc+0x2;_0x55c743++)for(var _0xb2203=_0x3562ea-0x2;_0xb2203<_0x3562ea+0x2;_0xb2203++){var _0x5add96=0x4*Math['floor']((0x4*_0xb2203+_0x55c743*_0x400c17['width']*0x4)/0x4),_0x1f54e5=_0x400c17['pBuffer'][_0x5add96],_0x2a4e1c=_0x400c17['pBuffer'][_0x5add96+0x1],_0x49d1c6=_0x400c17['pBuffer'][_0x5add96+0x2],_0x2aa3f7=Math['round'](0.299*_0x1f54e5+0.587*_0x2a4e1c+0.114*_0x49d1c6);this['aPOSAdaptBuf'][0x0]+=_0x2aa3f7,_0x5e4ee7[0x0]++;}this['aPOSAdaptBuf'][0x0]=this['aPOSAdaptBuf'][0x0]/_0x5e4ee7[0x0]>0x80?0x0:0x1;}return 0x1;}},{'key':'GetWaterFontParam','value':function(_0x2b0736){var _0x4f4c87=_0x2b0736['pFontString']['length'],_0x1ea0c5=_0x2b0736['pstFontRotate']['fRotateAngle']%0x168/0x168*0x2*Math['PI'],_0x4bcf18=Math['min'](_0x2b0736['pstFontSize']['nFontWidth'],_0x2b0736['pstFontSize']['nFontHeight']),_0x353469=_0x4bcf18/this['mainCanvasID']['width'],_0x5c3214=_0x4bcf18/this['mainCanvasID']['height'],_0xf815fd=_0x353469*Math['cos'](Math['PI']/0x2-_0x1ea0c5)*_0x2b0736['pSpace'],_0x55e462=_0x5c3214*Math['sin'](Math['PI']/0x2-_0x1ea0c5)*_0x2b0736['pSpace'],_0x59715c=[],_0x34cae1=[],_0x7da49d=[];if(_0x2b0736['nFontAlign']){for(var _0x1169c4=0x0;_0x1169c4<_0x4f4c87;_0x1169c4++)_0x59715c[_0x1169c4]=_0x2b0736['pFontString'][0x0]['length']*_0x353469/0x6,_0x34cae1[_0x1169c4]=Math['atan2'](_0x59715c[0x0],_0x55e462),_0x7da49d[_0x1169c4]=Math['sqrt'](_0x59715c[0x0]*_0x59715c[0x0],_0x55e462*_0x55e462);}else{for(var _0x2fc8f2=0x0;_0x2fc8f2<_0x4f4c87;_0x2fc8f2++)_0x59715c[_0x2fc8f2]=0x0,_0x34cae1[_0x2fc8f2]=0x0,_0x7da49d[_0x2fc8f2]=0x0;}var _0x2555f3=Math['floor'](_0x2b0736['pstFontNumber']['nRowNumber']),_0x3d982a=Math['floor'](_0x2b0736['pstFontNumber']['nColNumber']),_0x55fbab=_0x2555f3*_0x3d982a;if(_0x2b0736['pstFontRotate']['fFillFullScreen']){for(var _0x2a16f3=[],_0x3d058c=[],_0x14f147=0x1/(_0x2555f3-0x1),_0x54aad3=0x0;_0x54aad3<_0x2555f3;_0x54aad3++)_0x2a16f3[_0x54aad3]=_0x14f147*_0x54aad3-_0x55e462*((_0x4f4c87-0x1)/0x2);for(var _0x207291=0x1/(_0x3d982a-0x1),_0x38e523=0x0;_0x38e523<_0x3d982a;_0x38e523++)_0x3d058c[_0x38e523]=_0x207291*_0x38e523+_0xf815fd*((_0x4f4c87-0x1)/0x2);for(var _0x29c684=0x0;_0x29c684<_0x55fbab;++_0x29c684)for(var _0x3e40a4=0x0;_0x3e40a4<_0x4f4c87;_0x3e40a4++){this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]={},this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pString']=_0x2b0736['pFontString'][_0x3e40a4],this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['nFontWidth']=_0x4bcf18,this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['nFontHeight']=_0x4bcf18,this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstStartPos']={};var _0x268e69=_0x29c684%_0x3d982a,_0x3739c2=Math['floor'](_0x29c684/_0x3d982a),_0x42d794=Math['PI']/0x2-_0x1ea0c5+_0x34cae1[_0x3e40a4];this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstStartPos']['fX']=_0x3d058c[_0x268e69]-_0x3e40a4*_0xf815fd+_0x7da49d[_0x3e40a4]*Math['cos'](_0x42d794),this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstStartPos']['fY']=_0x2a16f3[_0x3739c2]+_0x3e40a4*_0x55e462-_0x7da49d[_0x3e40a4]*Math['sin'](_0x42d794),_0x2b0736['nColorAdapt']?(this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstFontColor']={},this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstFontColor']['fR']=this['aPOSAdaptBuf'][_0x29c684],this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstFontColor']['fG']=this['aPOSAdaptBuf'][_0x29c684],this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstFontColor']['fB']=this['aPOSAdaptBuf'][_0x29c684],this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstFontColor']['fA']=_0x2b0736['pstFontColor']['fA']):this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstFontColor']=_0x2b0736['pstFontColor'],this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['bBackGround']=!0x1,this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pstBGColor']=null,this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['fRotateAngle']=_0x2b0736['pstFontRotate']['fRotateAngle'],this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['pFontFamily']=_0x2b0736['pFontFamily'],_0x2b0736['nFontAlign']?(this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['textAlign']='left',this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['textBaseline']='top'):(this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['textAlign']='center',this['pWaterFontParam'][_0x4f4c87*_0x29c684+_0x3e40a4]['textBaseline']='middle');}}else{for(var _0x177df4=0x0;_0x177df4<_0x2b0736['pFontString']['length'];_0x177df4++)this['pWaterFontParam'][_0x177df4]={},this['pWaterFontParam'][_0x177df4]['pString']=_0x2b0736['pFontString'][_0x177df4],this['pWaterFontParam'][_0x177df4]['nFontWidth']=_0x4bcf18,this['pWaterFontParam'][_0x177df4]['nFontHeight']=_0x4bcf18,this['pWaterFontParam'][_0x177df4]['pstStartPos']={},this['pWaterFontParam'][_0x177df4]['pstStartPos']['fX']=_0x2b0736['pstStartPos']['fX']-_0x177df4*_0xf815fd,this['pWaterFontParam'][_0x177df4]['pstStartPos']['fY']=_0x2b0736['pstStartPos']['fY']+_0x177df4*_0x55e462,_0x2b0736['nColorAdapt']?(this['pWaterFontParam'][_0x177df4]['pstFontColor']={},this['pWaterFontParam'][_0x177df4]['pstFontColor']['fR']=this['aPOSAdaptBuf'][0x0],this['pWaterFontParam'][_0x177df4]['pstFontColor']['fG']=this['aPOSAdaptBuf'][0x0],this['pWaterFontParam'][_0x177df4]['pstFontColor']['fB']=this['aPOSAdaptBuf'][0x0],this['pWaterFontParam'][_0x177df4]['pstFontColor']['fA']=_0x2b0736['pstFontColor']['fA']):this['pWaterFontParam'][_0x177df4]['pstFontColor']=_0x2b0736['pstFontColor'],this['pWaterFontParam'][_0x177df4]['bBackGround']=!0x1,this['pWaterFontParam'][_0x177df4]['pstBGColor']=null,this['pWaterFontParam'][_0x177df4]['fRotateAngle']=_0x2b0736['pstFontRotate']['fRotateAngle'],this['pWaterFontParam'][_0x177df4]['pFontFamily']=_0x2b0736['pFontFamily'],_0x2b0736['nFontAlign']?(this['pWaterFontParam'][_0x177df4]['textAlign']='left',this['pWaterFontParam'][_0x177df4]['textBaseline']='top'):(this['pWaterFontParam'][_0x177df4]['textAlign']='center',this['pWaterFontParam'][_0x177df4]['textBaseline']='middle');}return 0x1;}},{'key':'SetWaterMarkFont','value':function(_0x1caf95,_0x5cfbb1){if(this['pWaterFontParam']['splice'](0x0,this['pWaterFontParam']['length']),null===_0x1caf95)return 0x1;if(_0x1caf95['nColorAdapt']){var _0x30b2aa={'nWidth':0x10,'nHeight':0x10,'nBufferLen':0x0},_0x45f96a=this['oVideoHandle']['SR_GetCaptureSize'](_0x30b2aa);if(_0xa87ede==_0x45f96a){var _0x24b57b=new Uint8Array(_0x30b2aa['nBufferLen']),_0x498d3b={};if(_0x498d3b['pBuffer']=_0x24b57b,this['oVideoHandle']['SR_CaptureScreen'](_0x498d3b),_0x498d3b['width']=_0x30b2aa['nWidth'],_0x498d3b['height']=_0x30b2aa['nHeight'],_0x1caf95['pstFontRotate']['fFillFullScreen']){var _0x3dc164=Math['floor'](_0x1caf95['pstFontNumber']['nRowNumber']),_0x5ec18c=Math['floor'](_0x1caf95['pstFontNumber']['nColNumber']);this['CheckFrameRGB'](_0x498d3b,0x1,_0x3dc164,_0x5ec18c,0x0,0x0);}else this['CheckFrameRGB'](_0x498d3b,0x0,0x1,0x1,_0x1caf95['pstStartPos']['fX'],_0x1caf95['pstStartPos']['fY']);_0x24b57b=null;}}return this['GetWaterFontParam'](_0x1caf95),0x1;}},{'key':'ImageDecoder','value':function(_0x5a3da3,_0x1c5c5e,_0xbe633){var _0x5e9ab7=this;_0x5a3da3['decode']({'frameIndex':_0xbe633})['then'](function(_0xfaa340){_0x5e9ab7['pWaterImageParam'][_0xbe633]={},_0x5e9ab7['pWaterImageParam'][_0xbe633]['videoStream']=_0xfaa340['image'],_0x5e9ab7['pWaterImageParam'][_0xbe633]['nImageWidth']=_0xfaa340['image']['displayWidth'],_0x5e9ab7['pWaterImageParam'][_0xbe633]['nImageHeight']=_0xfaa340['image']['displayHeight'],null!=_0x1c5c5e['pstRectPos']?_0x5e9ab7['pWaterImageParam'][_0xbe633]['pstRectPos']=_0x1c5c5e['pstRectPos']:_0x5e9ab7['pWaterImageParam'][_0xbe633]['pstRectPos']={'fLeft':0x0,'fRight':0.1,'fTop':0x0,'fBottom':0.1},null!=_0x1c5c5e['fAlpha']&&_0x1c5c5e['fAlpha']<=0x1&&_0x1c5c5e['fAlpha']>=0x0?_0x5e9ab7['pWaterImageParam'][_0xbe633]['fAlpha']=_0x1c5c5e['fAlpha']:_0x5e9ab7['pWaterImageParam'][_0xbe633]['fAlpha']=0x1,_0x5e9ab7['waterMarkImageMax']=_0x5a3da3['tracks']['selectedTrack']['frameCount'],_0xbe633<_0x5a3da3['tracks']['selectedTrack']['frameCount']-0x1&&_0x5e9ab7['ImageDecoder'](_0x5a3da3,_0x1c5c5e,_0xbe633+0x1);});}},{'key':'SetWaterMarkImage','value':function(_0x4e2929){if(this['pWaterImageParam']['splice'](0x0,this['pWaterImageParam']['length']),null===_0x4e2929)return 0x1;if(null!=_0x4e2929['pImageData']){var _0xb20ecb=new ImageDecoder({'data':_0x4e2929['pImageData'],'type':'image/'+_0x4e2929['pImageType']});_0xb20ecb['tracks']['ready']['then'](function(){}),this['ImageDecoder'](_0xb20ecb,_0x4e2929,0x0);}return this['waterMarkImageIndex']=0x0,0x1;}},{'key':'_ConvertDisplayEffect','value':function(_0x4ea039,_0x46ff13){switch(_0x4ea039){case _0x2aea6b:return _0x54a990==_0x46ff13?_0x186ff9['SR_DE_FISH_PTZ_WALL']:_0x4e5968==_0x46ff13||_0x30e952==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_WALL']:_0x1837a3==_0x46ff13?_0x186ff9['SR_DE_FISH_SEMISPHERE']:_0x30ecd9==_0x46ff13?_0x186ff9['SR_DE_FISH_PLANET']:_0x39b0d3==_0x46ff13?_0x186ff9['SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL']:_0x2a01ec==_0x46ff13?_0x186ff9['SR_DE_FISH_ARCSPHERE_VERTICAL_WALL']:_0x186ff9['SR_DE_FISH_ORIGINAL'];case _0x240c92:return _0x54a990==_0x46ff13?_0x186ff9['SR_DE_FISH_PTZ_FLOOR']:_0x4e5968==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_360']:_0x2cb8a2==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_FLOOR_180']:_0x30e952==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_WALL']:_0x1837a3==_0x46ff13?_0x186ff9['SR_DE_FISH_SEMISPHERE']:_0x20b7ae==_0x46ff13?_0x186ff9['SR_DE_FISH_CYLINDER_FLOOR']:_0x443c47==_0x46ff13?_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_FLOOR']:_0x30ecd9==_0x46ff13?_0x186ff9['SR_DE_FISH_PLANET']:_0x186ff9['SR_DE_FISH_ORIGINAL'];case _0x1e68ea:return _0x54a990==_0x46ff13?_0x186ff9['SR_DE_FISH_PTZ_CEILING']:_0x4e5968==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_360']:_0x2cb8a2==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_CEILING_180']:_0x30e952==_0x46ff13?_0x186ff9['SR_DE_FISH_PANORAMA_WALL']:_0x1837a3==_0x46ff13?_0x186ff9['SR_DE_FISH_SEMISPHERE']:_0x20b7ae==_0x46ff13?_0x186ff9['SR_DE_FISH_CYLINDER_CEILING']:_0x443c47==_0x46ff13?_0x186ff9['SR_DE_FISH_CYLINDER_SPLIT_CEILING']:_0x30ecd9==_0x46ff13?_0x186ff9['SR_DE_FISH_PLANET']:_0x186ff9['SR_DE_FISH_ORIGINAL'];default:return _0x186ff9['SR_DE_FISH_ORIGINAL'];}return _0x186ff9['SR_DE_FISH_ORIGINAL'];}},{'key':'GetCanvasData','value':function(_0x168b52){var _0x4cbc60={'nWidth':0x0,'nHeight':0x0,'nBufferLen':0x0},_0x2f0ef5=this['oVideoHandle']['SR_GetCaptureSize'](_0x4cbc60);(_0xa87ede!=_0x2f0ef5||_0x4cbc60['nBufferLen']<=0x0)&&_0x168b52(null);var _0x58ab1e=new Uint8Array(_0x4cbc60['nBufferLen']);null==_0x58ab1e&&_0x168b52(null);var _0x40363f={};_0x40363f['pBuffer']=_0x58ab1e,this['oVideoHandle']['SR_CaptureScreen'](_0x40363f),_0x168b52(_0x58ab1e,_0x4cbc60['nWidth'],_0x4cbc60['nHeight']);}},{'key':'FindIntelNodefromList','value':function(_0xff0932){if(0x0!=this['privateLinesInfo']['length']){var _0x11e4ab=this['privateLinesInfo'][0x0]['absTimeStamp'];if(_0x11e4ab<=_0xff0932+0x64&&_0x11e4ab>_0xff0932-0x64)this['curLinesInfo']=this['privateLinesInfo']['shift']();else{if(_0x11e4ab>_0xff0932+0x7d0||_0x11e4ab<_0xff0932-0x7d0)for(this['curLinesInfo']=this['privateLinesInfo']['shift']();this['privateLinesInfo']['length']>0x0;){var _0x2d684a=this['privateLinesInfo'][0x0]['absTimeStamp'];if(!(_0x2d684a>_0xff0932+0x7d0||_0x2d684a<_0xff0932-0x7d0))break;this['curLinesInfo']=this['privateLinesInfo']['shift']();}}}if(0x0!=this['privateFontsInfo']['length']){var _0x588728=this['privateFontsInfo'][0x0]['absTimeStamp'];if(_0x588728<=_0xff0932+0x3e8&&_0x588728>_0xff0932-0x3e8)this['curFontsInfo']=this['privateFontsInfo']['shift']();else{if(_0x588728>_0xff0932+0x7d0||_0x588728<_0xff0932-0x7d0)for(this['curFontsInfo']=this['privateFontsInfo']['shift']();this['privateFontsInfo']['length']>0x0;){var _0xe2c5d7=this['privateFontsInfo'][0x0]['absTimeStamp'];if(!(_0xe2c5d7>_0xff0932+0x7d0||_0xe2c5d7<_0xff0932-0x7d0))break;this['curFontsInfo']=this['privateFontsInfo']['shift']();}}}if(0x0!=this['privateImageInfo']['length']){var _0x258d83=this['privateImageInfo'][0x0]['absTimeStamp'];if(_0x258d83<=_0xff0932+0x3e8&&_0x258d83>_0xff0932-0x3e8)this['curImagesInfo']=this['privateImageInfo']['shift']();else{if(_0x258d83>_0xff0932+0x7d0||_0x258d83<_0xff0932-0x7d0)for(this['curImagesInfo']=this['privateImageInfo']['shift']();this['privateImageInfo']['length']>0x0;){var _0x5a81bc=this['privateImageInfo'][0x0]['absTimeStamp'];if(!(_0x5a81bc>_0xff0932+0x7d0||_0x5a81bc<_0xff0932-0x7d0))break;this['curImagesInfo']=this['privateImageInfo']['shift']();}}}return 0x1;}},{'key':'RenderPrivateData','value':function(_0x1231e6){return 0x0!=this['privateLinesInfo']['length']||_0x1231e6||(this['curLinesInfo']=null),0x1;}},{'key':'InputPrivateInfo','value':function(_0x4714d3,_0x175777,_0x56d599){var _0x1f7229=!0x1,_0x186733=0x0;if(_0x4714d3['linesNum']>0x0){if(_0x4714d3['absTimeStamp']<=this['maxPrivateLineTimeStamp']){var _0x1673f8=0x0;for(_0x1673f8=0x0;_0x1673f8<this['privateLinesInfo']['length'];_0x1673f8++)if(this['privateLinesInfo'][_0x1673f8]['absTimeStamp']==_0x4714d3['absTimeStamp']){_0x1f7229=!0x0,_0x186733=_0x1673f8;break;}}if(_0x1f7229){var _0x2798dd=this['privateLinesInfo'][_0x186733]['linesNum'];this['privateLinesInfo'][_0x186733]['linesNum']=_0x2798dd+_0x4714d3['linesNum'];for(var _0x271036=0x0;_0x271036<_0x4714d3['linesNum'];_0x271036++){this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]={},this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['vertex_num']=_0x4714d3['stDrawLinesArray'][_0x271036]['vertex_num'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['lineWidth']=_0x4714d3['stDrawLinesArray'][_0x271036]['lineWidth'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['bFill']=_0x4714d3['stDrawLinesArray'][_0x271036]['bFill'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['bLoop']=_0x4714d3['stDrawLinesArray'][_0x271036]['bLoop'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['color']={},this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['color']['R']=_0x4714d3['stDrawLinesArray'][_0x271036]['color']['R'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['color']['G']=_0x4714d3['stDrawLinesArray'][_0x271036]['color']['G'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['color']['B']=_0x4714d3['stDrawLinesArray'][_0x271036]['color']['B'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['color']['A']=_0x4714d3['stDrawLinesArray'][_0x271036]['color']['A'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['stPoint']=[];for(var _0x23d852=0x0;_0x23d852<_0x4714d3['stDrawLinesArray'][_0x271036]['vertex_num'];_0x23d852++)this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['stPoint'][_0x23d852]={},this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['stPoint'][_0x23d852]['x']=_0x4714d3['stDrawLinesArray'][_0x271036]['stPoint'][_0x23d852]['x'],this['privateLinesInfo'][_0x186733]['stDrawLinesArray'][_0x271036+_0x2798dd]['stPoint'][_0x23d852]['y']=_0x4714d3['stDrawLinesArray'][_0x271036]['stPoint'][_0x23d852]['y'];}}else{this['maxPrivateLineTimeStamp']<_0x4714d3['absTimeStamp']&&(this['maxPrivateLineTimeStamp']=_0x4714d3['absTimeStamp']);var _0x134d36={};_0x134d36['linesNum']=_0x4714d3['linesNum'],_0x134d36['absTimeStamp']=_0x4714d3['absTimeStamp'],_0x134d36['stDrawLinesArray']=[];for(var _0x4bcab2=0x0;_0x4bcab2<_0x4714d3['linesNum'];_0x4bcab2++){_0x134d36['stDrawLinesArray'][_0x4bcab2]={},_0x134d36['stDrawLinesArray'][_0x4bcab2]['vertex_num']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['vertex_num'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['lineWidth']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['lineWidth'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['bFill']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['bFill'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['bLoop']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['bLoop'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['color']={},_0x134d36['stDrawLinesArray'][_0x4bcab2]['color']['R']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['color']['R'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['color']['G']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['color']['G'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['color']['B']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['color']['B'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['color']['A']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['color']['A'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['stPoint']=[];for(var _0x19e95f=0x0;_0x19e95f<_0x4714d3['stDrawLinesArray'][_0x4bcab2]['vertex_num'];_0x19e95f++)_0x134d36['stDrawLinesArray'][_0x4bcab2]['stPoint'][_0x19e95f]={},_0x134d36['stDrawLinesArray'][_0x4bcab2]['stPoint'][_0x19e95f]['x']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['stPoint'][_0x19e95f]['x'],_0x134d36['stDrawLinesArray'][_0x4bcab2]['stPoint'][_0x19e95f]['y']=_0x4714d3['stDrawLinesArray'][_0x4bcab2]['stPoint'][_0x19e95f]['y'];}this['privateLinesInfo']['push'](_0x134d36);}}if(_0x175777['nFontsNum']>0x0){if(_0x175777['absTimeStamp']<=this['maxPrivateLineTimeStamp']){var _0x5026f8=0x0;for(_0x5026f8=0x0;_0x5026f8<this['privateFontsInfo']['length'];_0x5026f8++)if(this['privateFontsInfo'][_0x5026f8]['absTimeStamp']==_0x175777['absTimeStamp']){_0x1f7229=!0x0,_0x186733=_0x5026f8;break;}}if(_0x1f7229);else{this['maxPrivateLineTimeStamp']<_0x175777['absTimeStamp']&&(this['maxPrivateLineTimeStamp']=_0x175777['absTimeStamp']);var _0x4876a6={};_0x4876a6['nFontsNum']=_0x175777['nFontsNum'],_0x4876a6['absTimeStamp']=_0x175777['absTimeStamp'],_0x4876a6['stDrawFontsArray']=[];for(var _0x52496a=0x0;_0x52496a<_0x175777['nFontsNum'];_0x52496a++)_0x4876a6['stDrawFontsArray'][_0x52496a]={},_0x4876a6['stDrawFontsArray'][_0x52496a]['nFontSizeW']=_0x175777['stDrawFontsArray'][_0x52496a]['nFontSizeW'],_0x4876a6['stDrawFontsArray'][_0x52496a]['nFontSizeH']=_0x175777['stDrawFontsArray'][_0x52496a]['nFontSizeH'],_0x4876a6['stDrawFontsArray'][_0x52496a]['color']={},_0x4876a6['stDrawFontsArray'][_0x52496a]['color']['R']=_0x175777['stDrawFontsArray'][_0x52496a]['color']['R'],_0x4876a6['stDrawFontsArray'][_0x52496a]['color']['G']=_0x175777['stDrawFontsArray'][_0x52496a]['color']['G'],_0x4876a6['stDrawFontsArray'][_0x52496a]['color']['B']=_0x175777['stDrawFontsArray'][_0x52496a]['color']['B'],_0x4876a6['stDrawFontsArray'][_0x52496a]['color']['A']=_0x175777['stDrawFontsArray'][_0x52496a]['color']['A'],_0x4876a6['stDrawFontsArray'][_0x52496a]['stPoint']={},_0x4876a6['stDrawFontsArray'][_0x52496a]['stPoint']['x']=_0x175777['stDrawFontsArray'][_0x52496a]['stPoint']['x'],_0x4876a6['stDrawFontsArray'][_0x52496a]['stPoint']['y']=_0x175777['stDrawFontsArray'][_0x52496a]['stPoint']['y'],_0x4876a6['stDrawFontsArray'][_0x52496a]['fontstring']=_0x175777['stDrawFontsArray'][_0x52496a]['fontString'];this['privateFontsInfo']['push'](_0x4876a6);}}if(_0x56d599['nPixelFormat']>0x0){if(_0x56d599['absTimeStamp']<=this['maxPrivateLineTimeStamp']){var _0x33e36e=0x0;for(_0x33e36e=0x0;_0x33e36e<this['privateImageInfo']['length'];_0x33e36e++)if(this['privateImageInfo'][_0x33e36e]['absTimeStamp']==_0x56d599['absTimeStamp']){_0x1f7229=!0x0,_0x186733=_0x33e36e;break;}}if(_0x1f7229);else{this['maxPrivateLineTimeStamp']<_0x56d599['absTimeStamp']&&(this['maxPrivateLineTimeStamp']=_0x56d599['absTimeStamp']);var _0x271b09={};_0x271b09['absTimeStamp']=_0x56d599['absTimeStamp'],_0x271b09['nWidth']=_0x56d599['nWidth'],_0x271b09['nHeight']=_0x56d599['nHeight'],_0x271b09['pstRect']={},_0x271b09['pstRect']['fTop']=_0x56d599['pstRect']['fTop'],_0x271b09['pstRect']['fBottom']=_0x56d599['pstRect']['fBottom'],_0x271b09['pstRect']['fLeft']=_0x56d599['pstRect']['fLeft'],_0x271b09['pstRect']['fRight']=_0x56d599['pstRect']['fRight'],_0x271b09['nPixelFormat']=_0x56d599['nPixelFormat'],_0x271b09['fAlpha']=_0x56d599['fAlpha'],_0x271b09['picImageData']=_0x56d599['picImageData'],this['privateImageInfo']['push'](_0x271b09);}}return 0x1;}},{'key':'WebGLDisplayCallBack','value':function(_0x273e95){if(0x0!=_0x273e95['privateLinesInfo']['length']||null!=_0x273e95['curLinesInfo']){if(null!=_0x273e95['curLinesInfo']){for(var _0x152c9d=[],_0x3b3ffc=0x0,_0x4ea37c=0x1,_0xae4f9b=0x0;_0xae4f9b<_0x273e95['curLinesInfo']['linesNum'];_0xae4f9b++){_0x152c9d[_0xae4f9b]={},_0x152c9d[_0xae4f9b]['nPointNum']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['vertex_num'],_0x152c9d[_0xae4f9b]['nLineWidth']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['lineWidth'],_0x4ea37c=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['bFill'],_0x152c9d[_0xae4f9b]['bLoop']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['bLoop'],_0x152c9d[_0xae4f9b]['pstColor']={},_0x152c9d[_0xae4f9b]['pstColor']['fR']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['color']['R'],_0x152c9d[_0xae4f9b]['pstColor']['fG']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['color']['G'],_0x152c9d[_0xae4f9b]['pstColor']['fB']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['color']['B'],_0x152c9d[_0xae4f9b]['pstColor']['fA']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['color']['A'],_0x152c9d[_0xae4f9b]['pstPoints']=[];for(var _0x19d608=0x0;_0x19d608<_0x152c9d[_0xae4f9b]['nPointNum'];_0x19d608++)_0x152c9d[_0xae4f9b]['pstPoints'][_0x19d608]={},_0x152c9d[_0xae4f9b]['pstPoints'][_0x19d608]['fX']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['stPoint'][_0x19d608]['x'],_0x152c9d[_0xae4f9b]['pstPoints'][_0x19d608]['fY']=_0x273e95['curLinesInfo']['stDrawLinesArray'][_0xae4f9b]['stPoint'][_0x19d608]['y'];_0x3b3ffc+=_0x152c9d[_0xae4f9b]['nPointNum'];}_0x273e95['oVideoHandle']['SR_DrawLinesEx'](_0x152c9d,_0x273e95['curLinesInfo']['linesNum'],_0x3b3ffc,_0x4ea37c);}_0x273e95['curLinesInfo']=null;}if((0x0!=_0x273e95['privateFontsInfo']['length']||null!=_0x273e95['curFontsInfo'])&&null!=_0x273e95['curFontsInfo']&&0x0!=_0x273e95['curFontsInfo']['nFontsNum']){for(var _0x318203=[],_0x238209=0x0;_0x238209<_0x273e95['curFontsInfo']['nFontsNum'];_0x238209++){var _0x3ac5ed={},_0x431a46=_0x273e95['curFontsInfo']['stDrawFontsArray'][_0x238209]['fontstring'],_0x3a1ba2={};_0x3a1ba2['fX']=_0x273e95['curFontsInfo']['stDrawFontsArray'][_0x238209]['stPoint']['x'],_0x3a1ba2['fY']=_0x273e95['curFontsInfo']['stDrawFontsArray'][_0x238209]['stPoint']['y'];var _0x1f2cce={'fR':0x1,'fG':0x0,'fB':0x0};_0x1f2cce['fA']=_0x273e95['curFontsInfo']['stDrawFontsArray'][_0x238209]['color']['A'];var _0x5074eb=_0x273e95['curFontsInfo']['stDrawFontsArray'][_0x238209]['nFontSizeW'],_0x441f96=_0x273e95['curFontsInfo']['stDrawFontsArray'][_0x238209]['nFontSizeH'];_0x3ac5ed['pString']=_0x431a46,_0x3ac5ed['pstStartPos']=_0x3a1ba2,_0x3ac5ed['nFontWidth']=_0x5074eb,_0x3ac5ed['nFontHeight']=_0x441f96,_0x3ac5ed['pstFontColor']=_0x1f2cce,_0x3ac5ed['bBackGround']=!0x1,_0x3ac5ed['pstBGColor']=null,_0x3ac5ed['fRotateAngle']=0x0,_0x3ac5ed['pFontFamily']='sans-serif',_0x318203['push'](_0x3ac5ed);}_0x273e95['oVideoHandle']['SR_DrawFontEx'](_0x318203,_0x273e95['curFontsInfo']['nFontsNum']);}if(0x0!=_0x273e95['privateImageInfo']['length']||null!=_0x273e95['curImagesInfo']){var _0x2481ef=null;null!=_0x273e95['curImagesInfo']&&null!=_0x273e95['curImagesInfo']&&null!=_0x273e95['curImagesInfo']['picImageData']&&null!=_0x273e95['curImagesInfo']['picImageData']&&(_0x2481ef=new Uint16Array(_0x273e95['curImagesInfo']['picImageData']['buffer'])),null!=_0x273e95['curImagesInfo']&&_0x273e95['curImagesInfo']['nPixelFormat']>0x0&&_0x273e95['oVideoHandle']['SR_DrawImage'](_0x2481ef,_0x273e95['curImagesInfo']['nWidth'],_0x273e95['curImagesInfo']['nHeight'],_0x273e95['curImagesInfo']['pstRect'],_0x273e95['curImagesInfo']['nPixelFormat'],_0x273e95['curImagesInfo']['fAlpha']);}if(0x0!==_0x273e95['pWaterFontParam']['length']&&_0x273e95['oVideoHandle']['SR_DrawFontEx'](_0x273e95['pWaterFontParam'],_0x273e95['pWaterFontParam']['length']),0x0!==_0x273e95['pWaterImageParam']['length']){_0x273e95['waterMarkImageIndex']>=_0x273e95['waterMarkImageMax']&&(_0x273e95['waterMarkImageIndex']=0x0);var _0x1b3126=_0x273e95['waterMarkImageIndex'];_0x273e95['oVideoHandle']['SR_DrawImage'](_0x273e95['pWaterImageParam'][_0x1b3126]['videoStream'],_0x273e95['pWaterImageParam'][_0x1b3126]['nImageWidth'],_0x273e95['pWaterImageParam'][_0x1b3126]['nImageHeight'],_0x273e95['pWaterImageParam'][_0x1b3126]['pstRectPos'],_0xa01ff6,_0x273e95['pWaterImageParam'][_0x1b3126]['fAlpha']),_0x273e95['waterMarkImageIndex']++;}}}]),_0x48881e;}()),_0x5111f0=(function(){function _0x231541(){_0x54580d(this,_0x231541),this['startTime']=0x0,this['curTime']=0x0,this['timeWalk']=0x0,this['lastDate']=0x0,this['preTimerStamp']=0x0;}return _0x4fd085(_0x231541,[{'key':'Init','value':function(){this['startTime']=this['GetCurTime']();}},{'key':'GetCurTime','value':function(){return this['curTime']=0x3c*new Date()['getHours']()*0x3c*0x3e8+0x3c*new Date()['getMinutes']()*0x3e8+0x3e8*new Date()['getSeconds']()+new Date()['getMilliseconds'](),this['lastDate']=new Date()['getDate'](),this['curTime'];}},{'key':'GetTimerWalk','value':function(){var _0x2e0b9c=this['GetCurTime']()-this['startTime'];return this['lastDate']!==new Date()['getDate']()&&(_0x2e0b9c+=0x18*(new Date()['getDate']()-this['lastDate'])*0x3c*0x3c*0x3e8),_0x2e0b9c;}},{'key':'timerReset','value':function(){this['startTime']=0x0,this['curTime']=0x0,this['timeWalk']=0x0,this['lastDate']=0x0,this['preTimerStamp']=0x0;}}]),_0x231541;}()),_0x436cae=(function(){function _0x2bfe2e(){var _0xc5035a=arguments['length']>0x0&&void 0x0!==arguments[0x0]?arguments[0x0]:null;_0x54580d(this,_0x2bfe2e),this['canvas']=null,this['streamOpenMode']=0x0,this['context']=null,this['oVideoDecoder']=null,this['frameBuffers']=[],this['initTimer']=!0x1,this['preTimeStamp']=0x0,this['baseTimeStamp']=0x0,this['resetTimer']=!0x0,this['RenderFrame']=this['RenderFrame']['bind'](this),this['renderCurStatus']=0x2,this['playSpeed']=0x1,this['nplaySpeed']=0x1,this['displayBuf']=0xe,this['needForward']=!0x1,this['firstFrame']=!0x0,this['LatcyTime']=0x0,this['displayFrameInfoCB']=null,this['displayFrameInfo']=[],this['curFrameInfo']={},this['curFrameInfo']['timeStamp']=0x0,this['sx']=0x0,this['sy']=0x0,this['sw']=0x0,this['sh']=0x0,this['displayRunning']=!0x1,this['oRenderTimer']=null,this['waitIFrameTimestamp']=0x0,this['curFrame']=null,this['player']=null,null!=_0xc5035a&&(this['player']=_0xc5035a),this['renderEngine']='webgl',this['oVideoRender']=null,this['FECCanvasID']='',this['oVideoRender']=new _0x4ae543();}return _0x4fd085(_0x2bfe2e,[{'key':'init','value':function(_0x2b4de0,_0x2c8a8e,_0x250db0,_0x3f5d69){this['canvas']=_0x2b4de0,this['streamOpenMode']=_0x2c8a8e,this['renderEngine']=_0x3f5d69,this['SetCurStatus'](0x2),null==this['oVideoDecoder']&&(this['oVideoDecoder']=new _0x285caf(_0x250db0,this,this['player']),null!==this['oVideoDecoder']&&this['oVideoDecoder']['initDecoder']()),this['frameBuffers']=this['oVideoDecoder']['ready_frames'],null!=this['oVideoRender']&&this['oVideoRender']['InitDisplay'](this['canvas'],this['renderEngine'],0x100),null==this['oRenderTimer']&&(this['oRenderTimer']=new _0x5111f0());}},{'key':'HardDecodeError','value':function(){return this['player']['_switchHardToSoft'](),0x1;}},{'key':'inputData','value':function(_0x2ca1dd,_0x429b37){var _0x3a0a86={};_0x3a0a86['port']=_0x429b37['port'],_0x3a0a86['codecType']=_0x429b37['codecType'],_0x3a0a86['frameType']=_0x429b37['frameType'],_0x3a0a86['frameSize']=_0x429b37['frameSize'],_0x3a0a86['width']=_0x429b37['width'],_0x3a0a86['height']=_0x429b37['height'],_0x3a0a86['timeStamp']=_0x429b37['timeStamp'],_0x3a0a86['frameRate']=_0x429b37['frameRate'],_0x3a0a86['frameNum']=_0x429b37['frameNum'],_0x3a0a86['interlace']=_0x429b37['interlace'],_0x3a0a86['streamEnd']=_0x429b37['streamEnd'],_0x3a0a86['cropLeft']=_0x429b37['cropLeft'],_0x3a0a86['cropRight']=_0x429b37['cropRight'],_0x3a0a86['cropTop']=_0x429b37['cropTop'],_0x3a0a86['cropBottom']=_0x429b37['cropBottom'],_0x3a0a86['year']=_0x429b37['year'],_0x3a0a86['month']=_0x429b37['month'],_0x3a0a86['week']=_0x429b37['week'],_0x3a0a86['day']=_0x429b37['day'],_0x3a0a86['hour']=_0x429b37['hour'],_0x3a0a86['minute']=_0x429b37['minute'],_0x3a0a86['second']=_0x429b37['second'],_0x3a0a86['milliseconds']=_0x429b37['milliseconds'],this['displayFrameInfo']['push'](_0x3a0a86),this['oVideoDecoder']['inputData'](_0x2ca1dd,_0x429b37);}},{'key':'_resetDecoder','value':function(){var _0x1b030e=this;return new Promise(function(_0x4d081d,_0x553412){_0x1b030e['oVideoDecoder']['resetDecoder']()['then'](function(){_0x1b030e['displayFrameInfo']['splice'](0x0,_0x1b030e['displayFrameInfo']['length']),_0x1b030e['curFrameInfo']={},_0x1b030e['oVideoRender']['DeInitPrivateParam'](),_0x1b030e['renderCurStatus']=0x2,_0x1b030e['player']?_0x1b030e['player']['JSPlayM4_ResetEnd']():postMessage({'function':'resetEnd'}),_0x4d081d();},function(){_0x553412();});});}},{'key':'_resetRenderTimer','value':function(){this['initTimer']=!0x1,this['preTimeStamp']=0x0,this['baseTimeStamp']=0x0,this['resetTimer']=!0x0,null!=this['oRenderTimer']&&this['oRenderTimer']['timerReset'](),this['RenderFrame']=this['RenderFrame']['bind'](this),this['renderCurStatus']=0x2,this['curTimeStamp']=0x0,this['getImageJPEG']=!0x1,this['getImageBMP']=!0x1,this['getCropImageJPEG']=!0x1,this['getCropImageBMP']=!0x1,this['displayFrameInfoCB']=null,this['displayFrameInfo']['splice'](0x0,this['displayFrameInfo']['length']),this['curFrameInfo']={};}},{'key':'_destroyPlayCtrl','value':function(){var _0x3ce15e=this;this['oVideoDecoder']['destroyDecoder']()['then'](function(){_0x3ce15e['oVideoDecoder']=null,null!=_0x3ce15e['oVideoRender']&&(_0x3ce15e['oVideoRender']['ReleaseDisplay'](),_0x3ce15e['oVideoRender']=null),_0x3ce15e['_resetRenderTimer'](),_0x3ce15e['oRenderTimer']=null,_0x3ce15e['displayRunning']=!0x1,console['log']('>>>JS\\x2002\\x20destroy\\x20oVideoDecoder/oVideoRender');},function(){console['log']('stop\\x20failed\\x20');});}},{'key':'RenderFrame','value':function(){var _0x409278=this;switch(this['renderCurStatus']){case 0x0:this['_resetRenderTimer'](),this['_resetDecoder']()['then'](function(){var _0x24c4ed=setTimeout(function(){_0x409278['RenderFrame'](),clearTimeout(_0x24c4ed);},0x1);},function(){});break;case 0x2:if(this['displayRunning'])this['chooseFrame']()['then'](function(_0x57f524){if(_0x409278['curFrame']=_0x57f524,-0x1==_0x409278['displayBuf']||0x0==_0x409278['streamOpenMode']&&0x0==_0x409278['LatcyTime'])null!=_0x409278['curFrame']&&(_0x409278['curTimeStamp']=_0x409278['curFrame']['timestamp'],_0x409278['paint'](_0x409278['curFrame'])),requestAnimationFrame(_0x409278['RenderFrame']);else{if(null!=_0x409278['curFrame']){_0x409278['initTimer']&&!_0x409278['resetTimer']||(_0x409278['oRenderTimer']['Init'](),_0x409278['initTimer']=!0x0,_0x409278['resetTimer']=!0x1,_0x409278['preTimeStamp']=_0x409278['curFrame']['timestamp'],_0x409278['baseTimeStamp']=_0x409278['curFrame']['timestamp'],0x1==_0x409278['streamOpenMode']&&(_0x409278['LatcyTime']=0x0)),_0x409278['curTimeStamp']=_0x409278['curFrame']['timestamp'];var _0x49eb0b=_0x409278['curTimeStamp']-_0x409278['preTimeStamp'],_0x30b6b7=_0x409278['curTimeStamp']-_0x409278['baseTimeStamp'];(_0x49eb0b>0x1388||_0x49eb0b<0x0||_0x30b6b7<0x0)&&(_0x409278['oRenderTimer']['Init'](),_0x409278['preTimeStamp']=_0x409278['curFrame']['timestamp'],_0x409278['baseTimeStamp']=_0x409278['curTimeStamp']);var _0x4b1144=(_0x409278['curTimeStamp']-_0x409278['baseTimeStamp']+_0x409278['LatcyTime'])/_0x409278['playSpeed']-_0x409278['oRenderTimer']['GetTimerWalk']();if(_0x4b1144<0xf&&_0x4b1144>-0xf)_0x409278['paint'](_0x409278['curFrame']),_0x409278['preTimeStamp']=_0x409278['curTimeStamp'],_0x409278['RenderFrame']();else{if(_0x4b1144<0x0)_0x409278['paint'](_0x409278['curFrame']),_0x409278['preTimeStamp']=_0x409278['curTimeStamp'],_0x409278['RenderFrame']();else var _0x263c52=setTimeout(function(){0x2==_0x409278['renderCurStatus']?(_0x409278['paint'](_0x409278['curFrame']),_0x409278['preTimeStamp']=_0x409278['curTimeStamp'],_0x409278['RenderFrame']()):_0x409278['RenderFrame'](),clearTimeout(_0x263c52);},_0x4b1144-0x5);}}else{_0x409278['playSpeed']>0x2&&0x1;var _0x1fce2d=setTimeout(function(){_0x409278['RenderFrame'](),clearTimeout(_0x1fce2d);},0x0);}}});else var _0x13bfbc=setTimeout(function(){_0x409278['RenderFrame'](),clearTimeout(_0x13bfbc);},0x5);break;case 0x3:var _0x2afd32=setTimeout(function(){_0x409278['_refresh'](),_0x409278['RenderFrame'](),clearTimeout(_0x2afd32);},0x5);break;case 0x5:if(this['needForward'])this['chooseFrame']()['then'](function(_0x4c6555){_0x409278['curFrame']=_0x4c6555;var _0x4e05c4=setTimeout(function(){null!=_0x409278['curFrame']&&(_0x409278['paint'](_0x409278['curFrame']),_0x409278['needForward']=!0x1),_0x409278['RenderFrame'](),clearTimeout(_0x4e05c4);},0x1);});else var _0x570dc5=setTimeout(function(){_0x409278['_refresh'](),_0x409278['RenderFrame'](),clearTimeout(_0x570dc5);},0x5);break;case 0x4:return void this['_destroyPlayCtrl']();default:return;}}},{'key':'paint','value':function(_0x2382b9){var _0x10ce19=this;return new Promise(function(_0x184257,_0x3369ae){if(0x4==_0x10ce19['curstatus']||null==_0x2382b9||null==_0x10ce19['oVideoRender'])_0x184257();else{_0x10ce19['waitIFrameTimestamp']===_0x2382b9['timestamp']&&(_0x10ce19['resetTimer']=!0x0);var _0x43dc93={'nCropLeft':0x0,'nCropRight':0x0,'nCropTop':0x0,'nCropBottom':0x0};_0x43dc93['nCodeWidth']=_0x2382b9['displayWidth'],_0x43dc93['nCodeHeight']=_0x2382b9['displayHeight'];var _0x420bde={'x':0x0,'y':0x0};_0x420bde['width']=_0x2382b9['displayWidth'],_0x420bde['height']=_0x2382b9['displayHeight'],_0x10ce19['oVideoRender']['DisplayFrame'](_0x2382b9,_0x2382b9['displayWidth'],_0x2382b9['displayHeight'],_0x2382b9['timestamp'],_0x43dc93,null)['then'](function(_0x4d63d0){null!==_0x10ce19['displayFrameInfoCB']&&_0x10ce19['respondFrameInfoCB'](_0x4d63d0),_0x10ce19['firstFrame']&&(null!=_0x10ce19['player']?null!=_0x10ce19['player']['FFCallBackFun']&&_0x10ce19['player']['FFCallBackFun']():postMessage({'function':'firstFrameCB','value':!0x0}),_0x10ce19['firstFrame']=!0x1),_0x184257();});}});}},{'key':'respondFrameInfoCB','value':function(_0x2eec20){if(0x0!=this['displayFrameInfo']['length']&&this['curFrameInfo']['timeStamp']!==_0x2eec20){for(var _0x5cda6c={},_0x54c3ca=0x0;_0x54c3ca<this['displayFrameInfo']['length']&&(_0x5cda6c=this['displayFrameInfo']['shift']())['timeStamp']!=_0x2eec20;_0x54c3ca++);this['curFrameInfo']['port']=_0x5cda6c['port'],this['curFrameInfo']['codecType']=_0x5cda6c['codecType'],this['curFrameInfo']['frameType']=_0x5cda6c['frameType'],this['curFrameInfo']['frameSize']=_0x5cda6c['frameSize'],this['curFrameInfo']['width']=_0x5cda6c['width'],this['curFrameInfo']['height']=_0x5cda6c['height'],this['curFrameInfo']['timeStamp']=_0x5cda6c['timeStamp'],this['curFrameInfo']['frameRate']=_0x5cda6c['frameRate'],this['curFrameInfo']['frameNum']=_0x5cda6c['frameNum'],this['curFrameInfo']['interlace']=_0x5cda6c['interlace'],this['curFrameInfo']['streamEnd']=_0x5cda6c['streamEnd'],this['curFrameInfo']['cropLeft']=_0x5cda6c['cropLeft'],this['curFrameInfo']['cropRight']=_0x5cda6c['cropRight'],this['curFrameInfo']['cropTop']=_0x5cda6c['cropTop'],this['curFrameInfo']['cropBottom']=_0x5cda6c['cropBottom'],this['curFrameInfo']['year']=_0x5cda6c['year'],this['curFrameInfo']['month']=_0x5cda6c['month'],this['curFrameInfo']['week']=_0x5cda6c['week'],this['curFrameInfo']['day']=_0x5cda6c['day'],this['curFrameInfo']['hour']=_0x5cda6c['hour'],this['curFrameInfo']['minute']=_0x5cda6c['minute'],this['curFrameInfo']['second']=_0x5cda6c['second'],this['curFrameInfo']['milliseconds']=_0x5cda6c['milliseconds'],this['displayFrameInfoCB'](this['curFrameInfo']);}}},{'key':'postImageData','value':function(_0x23da09,_0x181d56,_0x2ca6fa,_0x54b505,_0x3f5f6c){this['player']?(this['getImageJPEG']&&(this['getImageJPEG']=!0x1,this['player']['_GetImage2'](_0x23da09,_0x181d56,_0x2ca6fa,_0x54b505,'jpeg',_0x3f5f6c,0x0,0x0,0x0,0x0)),this['getImageBMP']&&(this['getImageBMP']=!0x1,this['player']['_GetImage2'](_0x23da09,_0x181d56,_0x2ca6fa,_0x54b505,'bmp',_0x3f5f6c,0x0,0x0,0x0,0x0)),this['getCropImageJPEG']&&(this['getCropImageJPEG']=!0x1,this['player']['_GetImage2'](_0x23da09,_0x181d56,_0x2ca6fa,_0x54b505,'jpeg',_0x3f5f6c,this['sx'],this['sy'],this['sw'],this['sh'])),this['getCropImageBMP']&&(this['getCropImageBMP']=!0x1,this['player']['_GetImage2'](_0x23da09,_0x181d56,_0x2ca6fa,_0x54b505,'bmp',_0x3f5f6c,this['sx'],this['sy'],this['sw'],this['sh']))):(this['getImageJPEG']&&(this['getImageJPEG']=!0x1,postMessage({'function':'imageYUV','value':_0x23da09['buffer'],'size':_0x181d56,'width':_0x2ca6fa,'height':_0x54b505,'type':'jpeg','yuvType':_0x3f5f6c,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x23da09['buffer']])),this['getImageBMP']&&(this['getImageBMP']=!0x1,postMessage({'function':'imageYUV','value':_0x23da09['buffer'],'size':_0x181d56,'width':_0x2ca6fa,'height':_0x54b505,'type':'bmp','yuvType':_0x3f5f6c,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x23da09['buffer']])),this['getCropImageJPEG']&&(this['getCropImageJPEG']=!0x1,postMessage({'function':'imageYUV','value':_0x23da09['buffer'],'size':_0x181d56,'width':_0x2ca6fa,'height':_0x54b505,'type':'jpeg','yuvType':_0x3f5f6c,'sx':this['sx'],'sy':this['sy'],'sw':this['sw'],'sh':this['sh']},[_0x23da09['buffer']])),this['getCropImageBMP']&&(this['getCropImageBMP']=!0x1,postMessage({'function':'imageYUV','value':_0x23da09['buffer'],'size':_0x181d56,'width':_0x2ca6fa,'height':_0x54b505,'type':'bmp','yuvType':_0x3f5f6c,'sx':this['sx'],'sy':this['sy'],'sw':this['sw'],'sh':this['sh']},[_0x23da09['buffer']])));}},{'key':'chooseFrame','value':function(){var _0x45f677=this;return new Promise(function(_0x318d43,_0xf2cda4){if(null==_0x45f677['oVideoRender']||null==_0x45f677['oVideoDecoder'])_0x318d43(null);else{if(_0x45f677['oVideoDecoder']['decoderObjNeedReset'])_0x45f677['oVideoDecoder']['resetDecoder']()['then'](function(){_0x45f677['oVideoDecoder']['decoderObjNeedReset']=!0x1,_0x318d43(null);},function(){_0xf2cda4();});else{var _0x333c9e=_0x45f677['oVideoDecoder']['GetFrameBufferLength']();0x1==_0x45f677['streamOpenMode']&&_0x333c9e<0x3?_0x318d43(null):_0x45f677['oVideoDecoder']['GetFrame']()['then'](function(_0x93c594){_0x318d43(_0x93c594);},function(){});}}});}},{'key':'SetDisplayRegion','value':function(_0x528461,_0x69e80a,_0x1ed1c5,_0x31af05){return null==this['oVideoRender']?0x0:(this['sx']=_0x528461,this['sy']=_0x69e80a,this['sw']=_0x1ed1c5,this['sh']=_0x31af05,this['oVideoRender']['SetDisplayRect'](_0x528461,_0x69e80a,_0x1ed1c5,_0x31af05));}},{'key':'SetCurStatus','value':function(_0x4d3bc4){return this['renderCurStatus']=_0x4d3bc4,0x1;}},{'key':'fast','value':function(){var _0x4114f6=this['_GetFastSpeed'](this['nplaySpeed']);return this['_SetPlaySpeed'](_0x4114f6);}},{'key':'slow','value':function(){var _0x424dc2=this['_GetSlowSpeed'](this['nplaySpeed']);return this['_SetPlaySpeed'](_0x424dc2);}},{'key':'Pause','value':function(_0x26d476){if(_0x26d476)this['SetCurStatus'](0x3);else{if(0x3!==this['renderCurStatus'])return-0x1;this['SetCurStatus'](0x2),this['resetTimer']=!0x0;}return 0x1;}},{'key':'_refresh','value':function(){0x0!=this['frameBuffers']['length']&&this['paint'](this['frameBuffers'][0x0]);}},{'key':'OneByOne','value':function(_0xed1311){if(_0xed1311)this['SetCurStatus'](0x5),this['needForward']=!0x0;else{if(0x5!==this['renderCurStatus'])return-0x1;this['SetCurStatus'](0x2),this['resetTimer']=!0x0,this['needForward']=!0x1,this['_SetPlaySpeed'](0x1);}return 0x1;}},{'key':'SetCanvasSize','value':function(_0x2099f6,_0x5edbf8){return null!=this['oVideoRender']&&this['oVideoRender']['SetCanvasSize'](_0x2099f6,_0x5edbf8);}},{'key':'GetCanvasSize','value':function(){return null!=this['oVideoRender']&&this['oVideoRender']['GetCanvasSize']();}},{'key':'GetPlayedTime','value':function(){return this['curTimeStamp'];}},{'key':'_SetPlaySpeed','value':function(_0x3fe8a4){switch(_0x3fe8a4){case-0x10:case-0x8:case-0x4:case-0x2:case 0x1:case 0x2:case 0x4:case 0x8:case 0x10:case 0x20:case 0x40:break;default:return-0x1;}return _0x3fe8a4===this['nplaySpeed']||(this['nplaySpeed']=_0x3fe8a4,this['playSpeed']=_0x3fe8a4>0x0?_0x3fe8a4:-0x1/_0x3fe8a4,console['log']('playSpeed:'+this['playSpeed']),this['resetTimer']=!0x0,this['needForward']=!0x1,0x2!=this['renderCurStatus']&&this['SetCurStatus'](0x2)),0x1;}},{'key':'_GetFastSpeed','value':function(_0x56131f){var _0x3a8976=0x0;switch(_0x56131f){case-0x10:_0x3a8976=-0x8;break;case-0x8:_0x3a8976=-0x4;break;case-0x4:_0x3a8976=-0x2;break;case-0x2:_0x3a8976=0x1;break;case 0x1:_0x3a8976=0x2;break;case 0x2:_0x3a8976=0x4;break;case 0x4:_0x3a8976=0x8;break;case 0x8:_0x3a8976=0x10;break;case 0x10:_0x3a8976=0x20;break;case 0x20:_0x3a8976=0x40;break;default:_0x3a8976=0x0;}return _0x3a8976;}},{'key':'_GetSlowSpeed','value':function(_0x45b3b7){var _0x3856b0=0x0;switch(_0x45b3b7){case-0x8:_0x3856b0=-0x10;break;case-0x4:_0x3856b0=-0x8;break;case-0x2:_0x3856b0=-0x4;break;case 0x1:_0x3856b0=-0x2;break;case 0x2:_0x3856b0=0x1;break;case 0x4:_0x3856b0=0x2;break;case 0x8:_0x3856b0=0x4;break;case 0x10:_0x3856b0=0x8;break;case 0x20:_0x3856b0=0x10;break;case 0x40:_0x3856b0=0x20;break;default:_0x3856b0=0x0;}return _0x3856b0;}},{'key':'SetDisplayBuf','value':function(_0x106ca3){return this['displayBuf']=_0x106ca3,this['LatcyTime']=0x1==_0x106ca3?0x0:0xf==_0x106ca3?0x2bc:0x2d==_0x106ca3?0x76c:_0x106ca3>0x6&&_0x106ca3<0x2d?0x28*_0x106ca3+0x64:-0x1==_0x106ca3?0x0:0x32,0x1;}},{'key':'GetJPEG','value':function(){var _0x250f6c=this;this['oVideoDecoder']['GetImageYUV']()['then'](function(_0x5c4ac6){var _0x204c0f=_0x5c4ac6['yuvFrameBuffer'],_0x13cae3=_0x5c4ac6['yuvLength'],_0x5692f0=_0x5c4ac6['displayWidth'],_0x138c37=_0x5c4ac6['displayHeight'],_0x2b67ff=_0x5c4ac6['yuvType'];-0x1!=_0x204c0f&&(_0x250f6c['player']?_0x250f6c['player']['_GetImage2'](_0x204c0f,_0x13cae3,_0x5692f0,_0x138c37,'jpeg',_0x2b67ff,0x0,0x0,0x0,0x0):postMessage({'function':'imageYUV','value':_0x204c0f['buffer'],'size':_0x13cae3,'width':_0x5692f0,'height':_0x138c37,'type':'jpeg','yuvType':_0x2b67ff,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x204c0f['buffer']]));},function(){});}},{'key':'GetBMP','value':function(){var _0x40df8b=this;this['oVideoDecoder']['GetImageYUV']()['then'](function(_0x783b6f){var _0x11b41c=_0x783b6f['yuvFrameBuffer'],_0x2648e7=_0x783b6f['yuvLength'],_0x2875d9=_0x783b6f['displayWidth'],_0x1d5f92=_0x783b6f['displayHeight'],_0x1d4ea2=_0x783b6f['yuvType'];-0x1!=_0x11b41c&&(_0x40df8b['player']?_0x40df8b['player']['_GetImage2'](_0x11b41c,_0x2648e7,_0x2875d9,_0x1d5f92,'bmp',_0x1d4ea2,0x0,0x0,0x0,0x0):postMessage({'function':'imageYUV','value':_0x11b41c['buffer'],'size':_0x2648e7,'width':_0x2875d9,'height':_0x1d5f92,'type':'bmp','yuvType':_0x1d4ea2,'sx':0x0,'sy':0x0,'sw':0x0,'sh':0x0},[_0x11b41c['buffer']]));},function(){});}},{'key':'GetCropJPEG','value':function(){var _0x19dfc0=this;this['oVideoDecoder']['GetImageYUV']()['then'](function(_0x3af1e4){var _0x2a2139=_0x3af1e4['yuvFrameBuffer'],_0x5be45e=_0x3af1e4['yuvLength'],_0x3fad91=_0x3af1e4['displayWidth'],_0x579157=_0x3af1e4['displayHeight'],_0x43e814=_0x3af1e4['yuvType'];-0x1!=_0x2a2139&&(_0x19dfc0['player']?_0x19dfc0['player']['_GetImage2'](_0x2a2139,_0x5be45e,_0x3fad91,_0x579157,'jpeg',_0x43e814,_0x19dfc0['sx'],_0x19dfc0['sy'],_0x19dfc0['sw'],_0x19dfc0['sh']):postMessage({'function':'imageYUV','value':_0x2a2139['buffer'],'size':_0x5be45e,'width':_0x3fad91,'height':_0x579157,'type':'jpeg','yuvType':_0x43e814,'sx':_0x19dfc0['sx'],'sy':_0x19dfc0['sy'],'sw':_0x19dfc0['sw'],'sh':_0x19dfc0['sh']},[_0x2a2139['buffer']]));},function(){});}},{'key':'GetCropBMP','value':function(){var _0x2e57e5=this;this['oVideoDecoder']['GetImageYUV']()['then'](function(_0x39ea05){var _0x312376=_0x39ea05['yuvFrameBuffer'],_0x1e6e7b=_0x39ea05['yuvLength'],_0x531810=_0x39ea05['displayWidth'],_0x39d2d4=_0x39ea05['displayHeight'],_0x118eb9=_0x39ea05['yuvType'];-0x1!=_0x312376&&(_0x2e57e5['player']?_0x2e57e5['player']['_GetImage2'](_0x312376,_0x1e6e7b,_0x531810,_0x39d2d4,'bmp',_0x118eb9,_0x2e57e5['sx'],_0x2e57e5['sy'],_0x2e57e5['sw'],_0x2e57e5['sh']):postMessage({'function':'imageYUV','value':_0x312376['buffer'],'size':_0x1e6e7b,'width':_0x531810,'height':_0x39d2d4,'type':'bmp','yuvType':_0x118eb9,'sx':_0x2e57e5['sx'],'sy':_0x2e57e5['sy'],'sw':_0x2e57e5['sw'],'sh':_0x2e57e5['sh']},[_0x312376['buffer']]));},function(){});}},{'key':'GetCanvasCapture','value':function(_0x5274f0){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20GetCanvasCapture','color:red'),0x0):(this['oVideoRender']['GetCanvasData'](_0x5274f0),0x1);}},{'key':'SetDecodeFrameType','value':function(_0xafe902){return this['waitIFrameTimestamp']=_0xafe902,0x1;}},{'key':'SetStreamEnd','value':function(){return this['oVideoDecoder']['SetStreamEnd'](),0x1;}},{'key':'SetAntialias','value':function(_0x4cb309){return null!=this['oVideoRender']?this['oVideoRender']['SetAntialias'](_0x4cb309):0x0;}},{'key':'SetFrameInfoCallBack','value':function(_0x193a6f,_0xfa0899){return this['displayFrameInfoCB']=_0xfa0899?_0x193a6f:null,0x1;}},{'key':'FEC_SetCanvasID','value':function(_0x5e972f){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetCanvasID'](_0x5e972f):(this['FECCanvasID']=_0x5e972f,0x0);}},{'key':'FEC_ResetCorrectType','value':function(_0x1c4eb6,_0x3befb7,_0x1bc68a){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_ResetCorrectType'](_0x1c4eb6,_0x3befb7,_0x1bc68a):0x0;}},{'key':'FEC_GetPort','value':function(_0x4bc99e,_0x1d761d){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),-0x1):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetPort'](_0x4bc99e,_0x1d761d):-0x1;}},{'key':'FEC_Enable','value':function(_0x24c814){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_Enable'](_0x24c814):0x0;}},{'key':'FEC_SetParam','value':function(_0x4b47cc,_0x45ac68){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetParam'](_0x4b47cc,_0x45ac68):0x0;}},{'key':'FEC_GetParam','value':function(_0x262555,_0x597461){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetParam'](_0x262555,_0x597461):0x0;}},{'key':'FEC_SetViewParam','value':function(_0x1da199,_0x16b82f,_0x414559){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetViewParam'](_0x1da199,_0x16b82f,_0x414559):0x0;}},{'key':'FEC_GetViewParam','value':function(_0x5a0af3,_0x3a1b00,_0x59130e){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetViewParam'](_0x5a0af3,_0x3a1b00,_0x59130e):0x0;}},{'key':'FEC_SetWnd','value':function(_0xa8e05,_0x2eb965){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetWnd'](_0xa8e05,_0x2eb965):0x0;}},{'key':'FEC_Disable','value':function(_0x3906d4,_0x22cb26,_0x385acc){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_Disable'](_0x3906d4,_0x22cb26,_0x385acc):0x0;}},{'key':'FEC_DelPort','value':function(_0x1eac9f){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_DelPort'](_0x1eac9f):0x0;}},{'key':'FEC_SetDisplayRegion','value':function(_0x56017d,_0x464808,_0x52ea86,_0x5e218a,_0x40d1eb,_0x2e645c,_0x13d4de){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetDisplayRegion'](_0x56017d,_0x464808,_0x52ea86,_0x5e218a,_0x40d1eb,_0x2e645c,_0x13d4de):0x0;}},{'key':'FEC_SetBackCilling','value':function(_0x453651,_0x19c072){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetBackCilling'](_0x453651,_0x19c072):0x0;}},{'key':'FEC_GetPTZPort','value':function(_0x267004,_0x22cae9,_0x35fdab){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),-0x1):null!=this['oVideoRender']?this['oVideoRender']['FEC_GetPTZPort'](_0x267004,_0x22cae9,_0x35fdab):-0x1;}},{'key':'FEC_SetPTZDisplayMode','value':function(_0x44ab29){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20FEC\\x20correct','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['FEC_SetPTZDisplayMode'](_0x44ab29):0x0;}},{'key':'InputPrivateInfo','value':function(_0x59722d,_0x11ebaf,_0xf48ace){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20PrivateInfo','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['InputPrivateInfo'](_0x59722d,_0x11ebaf,_0xf48ace):0x1;}},{'key':'RenderPrivateData','value':function(_0x20408a){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20PrivateInfo','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['RenderPrivateData'](_0x20408a):0x1;}},{'key':'SetWaterMarkFont','value':function(_0x45d8a7){return'2d'===this['renderEngine']||'2D'===this['renderEngine']||null==this['oVideoRender']?(console['log']('%c\\x20param\\x20error\\x20this.renderEngine:%d,this.oVideoRender:%d','color:red',this['renderEngine'],this['oVideoRender']),0x0):(null!=this['oVideoRender']&&this['oVideoRender']['SetWaterMarkFont'](_0x45d8a7,{'yuvFrameBuffer':-0x1,'yuvLength':-0x1,'displayWidth':-0x1,'displayHeight':-0x1,'yuvType':-0x1}),0x1);}},{'key':'SetWaterMarkImage','value':function(_0x48982c){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20SetWaterMarkImage','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['SetWaterMarkImage'](_0x48982c):0x1;}},{'key':'SetD3DPostProcess','value':function(_0x105551,_0x2dcd9b){return'2d'===this['renderEngine']||'2D'===this['renderEngine']?(console['log']('%c\\x202D\\x20render\\x20not\\x20support\\x20SetD3DPostProcess','color:red'),0x0):null!=this['oVideoRender']?this['oVideoRender']['SetD3DPostProcess'](_0x105551,_0x2dcd9b):0x1;}}]),_0x2bfe2e;}());_0x2e6310=new _0x436cae(),self['onmessage']=function(_0x336e5d){let _0x3b3e97=_0x336e5d['data'];switch(_0x3b3e97['command']){case'init':_0x2e6310['init'](_0x3b3e97['canvas'],_0x3b3e97['streamOpenMode'],_0x3b3e97['sab'],_0x3b3e97['renderEngine']);break;case'inputData':let _0x380e6b=new Uint8Array(_0x3b3e97['rawData']),_0x590bb2=_0x3b3e97['rawDataFrameInfo'];_0x2e6310['inputData'](_0x380e6b,_0x590bb2),_0x380e6b=null;break;case'SetDisplayRegion':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),_0x2e6310['SetDisplayRegion'](_0x3b3e97['sx'],_0x3b3e97['sy'],_0x3b3e97['sw'],_0x3b3e97['sh']);break;case'stop':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),_0x2e6310['SetCurStatus'](0x4);let _0x2622f7=setInterval(()=>{_0x2e6310['displayRunning']||(_0x2e6310=null,self['postMessage']({'function':'stop'}),clearInterval(_0x2622f7),_0x2622f7=null,self['close'](),console['log']('>>>JS\\x2003\\x20destroy\\x20oVideoPlayCtrl\\x20and\\x20worker'));},0x2);break;case'fast':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['fast']()&&self['postMessage']({'function':'paraError'});break;case'slow':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['slow']()&&self['postMessage']({'function':'paraError'});break;case'SetDisplayBuf':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['SetDisplayBuf'](_0x3b3e97['value'])&&self['postMessage']({'function':'paraError'});break;case'Pause':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['Pause'](_0x3b3e97['value'])&&self['postMessage']({'function':'paraError'});break;case'OneByOne':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['OneByOne'](_0x3b3e97['value'])&&self['postMessage']({'function':'paraError'});break;case'SetCanvasSize':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['SetCanvasSize'](_0x3b3e97['width'],_0x3b3e97['height'])&&self['postMessage']({'function':'paraError'});break;case'GetCanvasSize':null===_0x2e6310&&self['postMessage']({'function':'OrderError'}),0x1!==_0x2e6310['GetCanvasSize']()&&self['postMessage']({'function':'paraError'});break;case'GetPlayedTime':null===_0x2e6310&&self['postMessage']({'function':'OrderError'});let _0x1b5e3d=_0x2e6310['GetPlayedTime']();0x0!==_0x1b5e3d&&self['postMessage']({'function':'GetPlayedTime','value':_0x1b5e3d});break;case'needReset':_0x2e6310['SetCurStatus'](0x0);break;case'GetJPEG':_0x2e6310['GetJPEG']();break;case'GetBMP':_0x2e6310['GetBMP']();break;case'GetCropJPEG':_0x2e6310['GetCropJPEG']();break;case'GetCropBMP':_0x2e6310['GetCropBMP']();break;case'SetDecodeFrameType':_0x2e6310['SetDecodeFrameType'](_0x3b3e97['timestamp']);break;case'streamEnd':_0x2e6310['SetStreamEnd']();break;case'SetAntialias':_0x2e6310['SetAntialias'](_0x3b3e97['value']);break;case'SetFrameInfoCallBack':_0x2e6310['SetFrameInfoCallBack'](_0x26f608=>{self['postMessage']({'function':'SetFrameInfoCallBack','curFrameInfo':_0x26f608});},_0x3b3e97['value']);break;case'FEC_SetCanvasID':_0x2e6310['FEC_SetCanvasID'](_0x3b3e97['canvasID']);break;case'FECResetCorrectType':_0x2e6310['FEC_ResetCorrectType'](_0x3b3e97['fishSubPort'],_0x3b3e97['placeType'],_0x3b3e97['correctType']);break;case'FECGetPort':let _0xc3af92=_0x2e6310['FEC_GetPort'](_0x3b3e97['placeType'],_0x3b3e97['correctType']);(_0xc3af92<0x1||_0xc3af92>0x1f||null==_0xc3af92)&&(_0xc3af92=-0x1),self['postMessage']({'function':'FECGetPort','fishSubPort':_0xc3af92});break;case'FECEnable':_0x2e6310['FEC_Enable'](_0x3b3e97['fishSubPort']);break;case'FECSetParam':_0x2e6310['FEC_SetParam'](_0x3b3e97['fishSubPort'],_0x3b3e97['param2d']);break;case'FECGetParam':let _0x28b110={};_0x2e6310['FEC_GetParam'](_0x3b3e97['fishSubPort'],_0x28b110),self['postMessage']({'function':'FECGetParam','param2d':_0x28b110});break;case'FECSetViewParam':_0x2e6310['FEC_SetViewParam'](_0x3b3e97['fishSubPort'],_0x3b3e97['upDateType'],_0x3b3e97['fValue']);break;case'FECGetViewParam':let _0x3712f4={};_0x2e6310['FEC_GetViewParam'](_0x3b3e97['fishSubPort'],_0x3b3e97['upDateType'],_0x3712f4),self['postMessage']({'function':'FECGetViewParam','Param3D':Param});break;case'FECSetWnd':_0x2e6310['FEC_SetWnd'](_0x3b3e97['fishSubPort'],_0x3b3e97['offscrrenCnv']);break;case'FECDisable':_0x2e6310['FEC_Disable'](_0x3b3e97['fishSubPort'],_0x3b3e97['clearFECCanvas'],_0x3b3e97['clearContext']);break;case'FECDelPort':_0x2e6310['FEC_DelPort'](_0x3b3e97['fishSubPort']);break;case'FECSetDisplayRegion':_0x2e6310['FEC_SetDisplayRegion'](_0x3b3e97['fishSubPort'],_0x3b3e97['type'],_0x3b3e97['regionNum'],_0x3b3e97['sx'],_0x3b3e97['sy'],_0x3b3e97['sw'],_0x3b3e97['sh']);break;case'FECSetBackCilling':_0x2e6310['FEC_SetBackCilling'](_0x3b3e97['fishSubPort'],_0x3b3e97['bValue']);break;case'FECGetPTZPort':let _0x1b036c=_0x2e6310['FEC_GetPTZPort'](_0x3b3e97['fPositionX'],_0x3b3e97['fPositionY']);(_0x1b036c<0x1||_0x1b036c>0x1f||null==_0x1b036c)&&(_0x1b036c=-0x1,console['info']('%c\\x20hardDecoderWorker\\x20FECGetPTZPort\\x20error\\x20','color:\\x20red')),self['postMessage']({'function':'FECGetPTZPort','fishSubPort':_0x1b036c});break;case'FECSetPTZDisplayMode':_0x2e6310['FEC_SetPTZDisplayMode'](_0x3b3e97['ptzMode']);break;case'RenderPrivateData':_0x2e6310['RenderPrivateData'](_0x3b3e97['bTrue']);break;case'InputPrivateInfo':_0x2e6310['InputPrivateInfo'](_0x3b3e97['linesInfo'],_0x3b3e97['fontInfo'],_0x3b3e97['ImageInfo']);break;case'GetCanvasCapture':_0x2e6310['GetCanvasCapture'](_0x3b3e97['cbFun']);break;case'SetWaterMarkFont':_0x2e6310['SetWaterMarkFont'](_0x3b3e97['fontParam']);break;case'SetWaterMarkImage':_0x2e6310['SetWaterMarkImage'](_0x3b3e97['imageParam']);break;case'SetD3DPostProcess':_0x2e6310['SetD3DPostProcess'](_0x3b3e97['ProcessType'],_0x3b3e97['ProcessValue']);}};})());","Worker",void 0,void 0)},c=function(){var e=new me(16);return me!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e},f=function(e,t,r,i){var n,a,o,s,x,l,c,f,h,u,d,_,p,m,g,y,b,v,P,S,R,C,E,T,F=i[0],D=i[1],M=i[2],I=Math.hypot(F,D,M);return I<pe?null:(F*=I=1/I,D*=I,M*=I,n=Math.sin(r),o=1-(a=Math.cos(r)),s=t[0],x=t[1],l=t[2],c=t[3],f=t[4],h=t[5],u=t[6],d=t[7],_=t[8],p=t[9],m=t[10],g=t[11],y=F*F*o+a,b=D*F*o+M*n,v=M*F*o-D*n,P=F*D*o-M*n,S=D*D*o+a,R=M*D*o+F*n,C=F*M*o+D*n,E=D*M*o-F*n,T=M*M*o+a,e[0]=s*y+f*b+_*v,e[1]=x*y+h*b+p*v,e[2]=l*y+u*b+m*v,e[3]=c*y+d*b+g*v,e[4]=s*P+f*S+_*R,e[5]=x*P+h*S+p*R,e[6]=l*P+u*S+m*R,e[7]=c*P+d*S+g*R,e[8]=s*C+f*E+_*T,e[9]=x*C+h*E+p*T,e[10]=l*C+u*E+m*T,e[11]=c*C+d*E+g*T,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)},h=function(){var e=new me(3);return me!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e},u=function(e,t,r){var i=new me(3);return i[0]=e,i[1]=t,i[2]=r,i},d=function(){var e=new me(4);return me!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e},_=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return p(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?p(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw a}}}},p=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i};r.r(s),r.d(s,{JSPlayCtrl:function(){return qe}});var m,g,y,b=1281,v=1282,P=1285,S=1287,R=1288,C=1289,E=1298,T=1302,F=256,D=512,M=768,I=1024,w=1280,A=1536,k=1792,L=2048,B=2304,O=2560,H=r(687),N=r.n(H),V=r(477),Y=r.n(V),U=function(){function t(r,i,n){e(this,t),this.width=0,this.height=0,this.decoderObj=null,this.FirstFrame=!0,this.ready_frames=[],this.underflow=!0,this.sab=r,this.frameRate=30,this.needSetPreSoft=!1,this.decoderCurStatus=2,this.decoderOutSuccess=!1,this.decoderObjNeedReset=!1,this.oVideoRenderHandle=i,this.output=this.output.bind(this),this.reportError=this.reportError.bind(this),this.player=null,null!=n&&(this.player=n),this.curFrame=null}return o(t,[{key:"initDecoder",value:function(){if(null==this.decoderObj){var e={output:this.output,error:this.reportError};this.decoderObj=new VideoDecoder(e)}this.underflow&&(this.underflow=!1,setTimeout(this.oVideoRenderHandle.RenderFrame(),0),this.oVideoRenderHandle.displayRunning=!0),this.decoderCurStatus=2,this.FirstFrame=!0}},{key:"inputData",value:function(e,t){null!=this.decoderObj&&("configured"==this.decoderObj.state||this.FirstFrame)&&this.decodeProcess(e,t),t.nStreamEnd&&this.SetStreamEnd()}},{key:"concatenate",value:function(e){for(var t=0,r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];for(var a=0,o=i;a<o.length;a++)t+=o[a].length;for(var s=new e(t),x=0,l=0,c=i;l<c.length;l++){var f=c[l];s.set(f,x),x+=f.length}return s}},{key:"processData",value:function(e){for(var t=null,r=null,i=null,n=!1,a=!1,o=0,s=0;s<e.length-4;s++){if(0!=e[s]||0!=e[s+1]||0!=e[s+2]||1!=e[s+3]||103!=e[s+4]&&39!=e[s+4]||(0!=s?(a=!0,t=e.slice(s),o=s):t=e),0==e[s]&&0==e[s+1]&&0==e[s+2]&&1==e[s+3]&&(9==e[s+4]||6==e[s+4])){if(null==t)continue;null==r&&(r=e.slice(o,s),n=!0)}if(0==e[s]&&0==e[s+1]&&0==e[s+2]&&1==e[s+3]&&(101==e[s+4]||37==e[s+4])){n&&(i=e.slice(s));break}}return n?this.concatenate(Uint8Array,r,i):a?t:e}},{key:"processData1",value:function(e){return 0!=e[0]||0!=e[1]||0!=e[2]||1!=e[3]||9!=e[4]&&6!=e[4]?e:e.slice(5)}},{key:"formatVideoDecoderConfigure",value:function(e,t,r,i){var n="";if(5==t)n="hvc1.1.6.L123.00",console.log("265 hard decoder");else if(256==t){for(var a=0;a<e.length;a++)if(103===e[a]||39===e[a]){var o=e.subarray(a+1,a+4);n="avc1.";for(var s=0;s<3;s++){var x=o[s].toString(16);x.length<2&&(x="0"+x),n+=x}break}console.log("264 hard decoder")}else console.log("Support Error: hard decoder only support 264 and 265 !!!");var l={codec:n,hardwareAcceleration:"prefer-hardware",optimizeForLatency:1};return 5!=t&&this.needSetPreSoft&&(l.hardwareAcceleration="prefer-software"),l}},{key:"decodeProcess",value:function(e,t){var r=this;this.frameRate!=t.frameRate&&(this.frameRate=t.frameRate),this.width!=t.width&&(this.width=t.width),this.height!=t.height&&(this.height=t.height),t.needSetPreSoft&&(this.needSetPreSoft=t.needSetPreSoft);var i=e;if(4!=this.decoderCurStatus&&null!=this.decoderObj)if("configured"==this.decoderObj.state){var n=new EncodedVideoChunk({data:i,timestamp:t.timeStamp,type:t.isKeyFrame?"key":"delta"});this.decoderObj.decode(n),i=null,e=null,n=null,t.frameType}else if(t.isKeyFrame&&"unconfigured"==this.decoderObj.state){var a=this.formatVideoDecoderConfigure(e,t.codecType,t.width,t.height);if(""==a.codec)return-1;VideoDecoder.isConfigSupported(a).then((function(n){if(n.supported){r.decoderObj.configure(a),i=r.processData(e),r.FirstFrame=!1;var o=new EncodedVideoChunk({data:i,timestamp:t.timeStamp,type:t.isKeyFrame?"key":"delta"});r.decoderObj.decode(o),a=null,i=null,e=null}else console.log("%c4>HardDecoder ConfigSupported error,switch hard to soft","color: red"),r.oVideoRenderHandle.HardDecodeError()})).catch((function(){console.log("VideoDecoder.js isConfigSupported error switch hard to soft "),r.oVideoRenderHandle.HardDecodeError()}))}}},{key:"output",value:function(e){"configured"==this.decoderObj.state?(e.format,e.codedWidth,e.codedHeight,e.displayWidth,e.displayHeight,e.duration,e.timestamp,this.ready_frames.push(e),this.decoderOutSuccess||(this.decoderOutSuccess=!0),this.decoderObj.decodeQueueSize<=1&&(this.player?this.player.JSPlayM4_GetRawData():postMessage({function:"GetRawData"}))):e.close()}},{key:"output2",value:function(e){var t=this;e.timestamp,createImageBitmap(e).then((function(r){e.close(),t.ready_frames.push(r)}))}},{key:"reportError",value:function(e){this.decoderOutSuccess?this.decoderObjNeedReset=!0:(this.oVideoRenderHandle.HardDecodeError(),console.log("%cswitch hardVideoDecoder to softVideoDecoder","color: red"))}},{key:"destroyDecoder",value:function(){var e=this;return new Promise((function(t,r){e.clearDecoderObjBuffer().then((function(){null!=e.decoderObj&&("closed"!=e.decoderObj.state&&e.decoderObj.close(),console.log(">>>JS 01 destroy decoderObj"),e.decoderObj=null),e.decoderCurStatus=4,e.decoderOutSuccess=!1,e.FirstFrame=!0,e.underflow=!0,e.needSetPreSoft=!1,e.decoderObjNeedReset=!1,t()}),(function(){r()}))}))}},{key:"resetDecoder",value:function(){var e=this;return new Promise((function(t,r){e.destroyDecoder().then((function(){e.initDecoder(),console.log("%c reset hard decoder","color:red"),t()}),(function(){r()}))}))}},{key:"clearDecoderObjBuffer",value:function(){var e=this;return new Promise((function(t,r){for(var i=e.ready_frames.length,n=0;n<i;n++)e.ready_frames.shift().close();e.ready_frames.splice(0,e.ready_frames.length),null!=e.decoderObj&&"configured"==e.decoderObj.state&&e.decoderObj.reset(),t()}))}},{key:"SetStreamEnd",value:function(){return 0==this.decoderObj.decodeQueueSize&&0==this.ready_frames.length&&(this.decoderObj.flush(),console.log("flush")),1}},{key:"GetFrame",value:function(){var e=this;return new Promise((function(t,r){if(null!=e.curFrame){var i=e.ready_frames.shift();i.close(),i=null,e.curFrame=null}0!=e.ready_frames.length?(e.curFrame=e.ready_frames[0],t(e.curFrame)):(e.curFrame=null,t(null))}))}},{key:"GetFrameBufferLength",value:function(){return this.ready_frames.length}},{key:"GetImageYUV",value:function(){var e=this;return new Promise((function(t,r){var i=null;if(null!=e.curFrame?i=e.curFrame:0!=e.ready_frames.length&&(i=e.ready_frames[0]),null!=i){var n=i.displayWidth,a=i.displayHeight,o=n*a*3/2,s=new Uint8Array(o),x=i.format;i.copyTo(s).then((function(){console.log("2 yuvLength:"+o+",displayWidth:"+n),t({yuvFrameBuffer:s,yuvLength:o,displayWidth:n,displayHeight:a,yuvType:x})}))}else t({yuvFrameBuffer:-1,yuvLength:-1,displayWidth:-1,displayHeight:-1,yuvType:-1})}))}}]),t}(),X=2147483649,W=2147483651,z=2147483652,G=2147483653,J=2147483658,Z=2147483661,j=2147483662,q={SR_DE_NULL:0,SR_DE_FISH_ORIGINAL:1,SR_DE_FISH_PTZ_CEILING:2,SR_DE_FISH_PTZ_FLOOR:3,SR_DE_FISH_PTZ_WALL:4,SR_DE_FISH_PANORAMA_CEILING_360:5,SR_DE_FISH_PANORAMA_CEILING_180:6,SR_DE_FISH_PANORAMA_FLOOR_360:7,SR_DE_FISH_PANORAMA_FLOOR_180:8,SR_DE_FISH_PANORAMA_WALL:9,SR_DE_FISH_SEMISPHERE:10,SR_DE_EAGLEEYE_SEMISPHERE:11,SR_DE_EAGLEEYE_PLANE:12,SR_DE_FISH_CYLINDER_CEILING:13,SR_DE_FISH_CYLINDER_FLOOR:14,SR_DE_FISH_CYLINDER_SPLIT_CEILING:15,SR_DE_FISH_CYLINDER_SPLIT_FLOOR:16,SR_DE_FISH_PLANET:17,SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:18,SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:19,SR_DE_FISH_ANIMATION_SWITCH_CEILING:20,SR_DE_FISH_ANIMATION_SWITCH_FLOOR:21,SR_DE_PANORAMA_SPHERE:22,SR_DE_PANORAMA_PLANET:23},$=256,K="\nattribute vec3 xy;\nattribute vec2 uv;\nuniform int bCapture; \n\nvarying highp vec2 v_uv;\n\nvoid main(void) {\n  if(bCapture == 1)\n  {\n    gl_Position = vec4(xy.x, -xy.y, xy.z, 1.0);\n  }\n  else\n  {\n    gl_Position = vec4(xy, 1.0);\n  }\n  v_uv = uv;\n}\n",Q="\n    attribute vec3 position;\n    attribute vec4   color;\n    varying   float  pp;\n    varying   vec4  colorOut;\n    uniform int bCapture; \n\n    void main()\n    {\n        if(bCapture == 1)\n        {\n            gl_Position = vec4(position.x, -position.y, 0.0, 1.0);\n        }\n        else\n        {\n            gl_Position = vec4(position.x, position.y, 0.0, 1.0);\n        }\n        pp = position.z;\n        colorOut = color;\n    }\n",ee="\n    varying  mediump float pp;\n    varying  lowp vec4  colorOut;\n    void main()\n    {\n        gl_FragColor = colorOut;\n        mediump float fx = abs(pp);\n        if (fx > 0.2)\n        { \n            gl_FragColor.a = colorOut.a*(1.25 - 1.25*fx);\n        } \n    } \n",te="\n    attribute vec4 position; \n    attribute vec4 texCoord; \n    uniform   mat4   matRotate; \n    varying vec4 pp; \n    uniform int bCapture;\n\n    void main() \n    { \n        gl_Position = position; //* matRotate; \n        if(bCapture == 1)\n        {\n           gl_Position.y =  -position.y;\n        }\n        pp = texCoord; \n    } \n",re="\n    precision mediump float; \n    uniform sampler2D texture;\n    varying lowp vec4 pp; \n    uniform float fAlpha;\n    void main(void) \n    { \n        gl_FragColor = texture2D(texture, pp.st); \n        gl_FragColor.a *= fAlpha; \n    } \n",ie=32,ne=1024,ae=.05,oe=1e-6,se=3.1415926,xe=.02,le=1e3,ce=.78539815,fe=-1,he=se/18,ue=se/3,de=se/6,_e=se/9,pe=1e-6,me="undefined"!=typeof Float32Array?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),h(),m=new me(4),me!=Float32Array&&(m[0]=0,m[1]=0,m[2]=0,m[3]=0),h(),u(1,0,0),u(0,1,0),d(),d(),g=new me(9),me!=Float32Array&&(g[1]=0,g[2]=0,g[3]=0,g[5]=0,g[6]=0,g[7]=0),g[0]=1,g[4]=1,g[8]=1,y=new me(2),me!=Float32Array&&(y[0]=0,y[1]=0);var ge=function(){function t(){e(this,t),this.fFov=.785,this.fAspect=1,this.fNear=.02,this.fFar=1e3,this.fTheta=0,this.fAlpha=0,this.fBeta=0,this.fScale=1,this.bOrtho=!1,this.matView=c(),this.matProj=c(),this.vecEye=u(0,0,0),this.vecCenter=u(0,0,100),this.vecUp=u(0,1,0)}return o(t,[{key:"SetYaw",value:function(e){this.fTheta=e}},{key:"GetYaw",value:function(){return this.fTheta}},{key:"SetPitch",value:function(e){this.fAlpha=e}},{key:"GetPitch",value:function(){return this.fAlpha}},{key:"SetRoll",value:function(e){this.fBeta=e}},{key:"GetRoll",value:function(){return this.fBeta}},{key:"SetScale",value:function(e){this.fScale=e}},{key:"GetScale",value:function(){return this.fScale}},{key:"SetFov",value:function(e){this.fFov=e}},{key:"SetAspect",value:function(e){this.fAspect=e}},{key:"SetNear",value:function(e){this.fNear=e}},{key:"SetFar",value:function(e){this.fFar=e}},{key:"SetOrtho",value:function(e){this.bOrtho=e}},{key:"UpdateCamera",value:function(e,t){if(!(e<=0||t<=0)){if(1==this.bOrtho)!function(e,t,r,i,n,a,o){var s=1/(0-r),x=1/(i-0),l=1/(a-o);e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*x,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*l,e[11]=0,e[12]=(0+r)*s,e[13]=(0+i)*x,e[14]=(o+a)*l,e[15]=1}(this.matProj,0,e,t,0,this.fNear,this.fFar);else{var r=this.fFov/se*180;!function(e,t,r,i,n){var a=1/Math.tan(t/2);if(e[0]=a/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0){var o=1/(i-n);e[10]=(n+i)*o,e[14]=2*n*i*o}else e[10]=-1,e[14]=-2*i}(this.matProj,r,e/t,this.fNear,this.fFar)}this.vecEye=u(0,0,this.fScale),this.vecCenter=u(0,0,0),this.vecUp=u(0,1,0);var i=u(1,0,0),n=u(0,1,0),a=u(0,0,1),o=c();d=o,_=this.vecEye,p=this.vecCenter,m=this.vecUp,D=_[0],M=_[1],I=_[2],w=m[0],A=m[1],k=m[2],L=p[0],B=p[1],O=p[2],Math.abs(D-L)<pe&&Math.abs(M-B)<pe&&Math.abs(I-O)<pe?((F=d)[0]=1,F[1]=0,F[2]=0,F[3]=0,F[4]=0,F[5]=1,F[6]=0,F[7]=0,F[8]=0,F[9]=0,F[10]=1,F[11]=0,F[12]=0,F[13]=0,F[14]=0,F[15]=1):(R=D-L,C=M-B,E=I-O,g=A*(E*=T=1/Math.hypot(R,C,E))-k*(C*=T),y=k*(R*=T)-w*E,b=w*C-A*R,(T=Math.hypot(g,y,b))?(g*=T=1/T,y*=T,b*=T):(g=0,y=0,b=0),v=C*b-E*y,P=E*g-R*b,S=R*y-C*g,(T=Math.hypot(v,P,S))?(v*=T=1/T,P*=T,S*=T):(v=0,P=0,S=0),d[0]=g,d[1]=v,d[2]=R,d[3]=0,d[4]=y,d[5]=P,d[6]=C,d[7]=0,d[8]=b,d[9]=S,d[10]=E,d[11]=0,d[12]=-(g*D+y*M+b*I),d[13]=-(v*D+P*M+S*I),d[14]=-(R*D+C*M+E*I),d[15]=1);var s=c(),x=c(),l=c(),h=c();f(x,s,-this.fAlpha,i),f(l,x,-this.fTheta,n),f(h,l,-this.fBeta,a),function(e,t,r){var i=t[0],n=t[1],a=t[2],o=t[3],s=t[4],x=t[5],l=t[6],c=t[7],f=t[8],h=t[9],u=t[10],d=t[11],_=t[12],p=t[13],m=t[14],g=t[15],y=r[0],b=r[1],v=r[2],P=r[3];e[0]=y*i+b*s+v*f+P*_,e[1]=y*n+b*x+v*h+P*p,e[2]=y*a+b*l+v*u+P*m,e[3]=y*o+b*c+v*d+P*g,y=r[4],b=r[5],v=r[6],P=r[7],e[4]=y*i+b*s+v*f+P*_,e[5]=y*n+b*x+v*h+P*p,e[6]=y*a+b*l+v*u+P*m,e[7]=y*o+b*c+v*d+P*g,y=r[8],b=r[9],v=r[10],P=r[11],e[8]=y*i+b*s+v*f+P*_,e[9]=y*n+b*x+v*h+P*p,e[10]=y*a+b*l+v*u+P*m,e[11]=y*o+b*c+v*d+P*g,y=r[12],b=r[13],v=r[14],P=r[15],e[12]=y*i+b*s+v*f+P*_,e[13]=y*n+b*x+v*h+P*p,e[14]=y*a+b*l+v*u+P*m,e[15]=y*o+b*c+v*d+P*g}(this.matView,o,h)}var d,_,p,m,g,y,b,v,P,S,R,C,E,T,F,D,M,I,w,A,k,L,B,O}},{key:"GetView",value:function(){return this.matView}},{key:"GetProj",value:function(){return this.matProj}}]),t}(),ye=function(){function t(){e(this,t),this.canvas=null,this.ctx=null,this.videoShaderProgram=0,this.vertexPosBuffer=0,this.texturePosBuffer=0,this.pFrameData=null,this.frameDisplayWidth=0,this.frameDisplayHeight=0,this.onlySupportedWebGL1=!1,this.bAntialias=!1,this.bRecreateTex=!0,this.nSurfaceTexture=[],this.nMaxPointNum=0,this.pLinePosVertices=null,this.pLineClrVertices=null,this.glLinePosBuffer=0,this.glLineClrBuffer=0,this.nLineTriangleNum=0,this.nLineShaderProgram=0,this.pFillBlockPosVertices=null,this.pFillBlockClrVertices=null,this.nMaxFillBlockTriNum=0,this.glBlockPosBuffer=0,this.glBlockClrBuffer=0,this.nBlockShaderProgram=0,this.nDrawFontWidth=0,this.nDrawFontHeight=0,this.nFontColorTexture=0,this.pFontColorBuffer=0,this.nFontShaderProgram=0,this.nFontBGNum=0,this.pstFontBGLines=[],this.nImageShaderProgram=0,this.pImagePosVertices=null,this.pImageClrVertices=null,this.glImagePosBuffer=0,this.glImageClrBuffer=0,this.nImageColorTexture=null,this.nDrawImageWidth=0,this.nDrawImageHeight=0,this.nImageColorTextures=[],this.pFishParamManager=null,this.enDisplayEffect=q.SR_DE_NULL,this.nFECPort=fe,this.bIsCapturing=!1,this.pSemiSpherePos=null,this.pSemiSphereTex=null,this.nSemiSpherePosNum=0,this.nSemiSpherePosSize=0,this.nSemiSphereTexSize=0,this.pCylinderPos=null,this.pCylinderTex=null,this.nCylinderPosNum=0,this.nCylinderPosSize=0,this.nCylinderTexSize=0,this.fCylinderHeight=0,this.fCylinderRadius=0,this.pArcSpherePos=null,this.pArcSphereTex=null,this.nArcSpherePosNum=0,this.nArcSpherePosSize=0,this.nArcSphereTexSize=0,this.fImageWidth=1,this.fImageHeight=1,this.fTexCenterX=.5,this.fTexCenterY=.5,this.fTexRadius=.5,this.b3DPort=!1,this.pCamera=null,this.fRotateX=0,this.fRotateY=0,this.fScale=0,this.fRotateLimitX=0,this.fRotateLimitY=0,this.pfuncCBIn=null,this.pfuncCBOut=null,this.pUserIn=null,this.pUserOut=null,this.bCullBack=!1,this.fSrcUseLeft=0,this.fSrcUseRight=1,this.fSrcUseTop=0,this.fSrcUseBottom=1,this.fDstUseLeft=0,this.fDstUseRight=1,this.fDstUseTop=0,this.fDstUseBottom=1,this.enPixelFormat=0,this.nTextureNum=0,this.textCanvas=null,this.textCanvasCtx=null,this.nCaptureWidth=0,this.nCaptureHeight=0,this.nCaptureRTTex=0,this.nCaptureFBO=0,this.nCaptureFBOWidth=0,this.nCaptureFBOHeight=0,this.nCaptureDepthbuffer=0,this.bCaptureResInit=!1,this.fBrightness=0,this.fHue=0,this.fSaturation=0,this.fContrast=0,this.fSharpness=0,this.nPostProc=0}return o(t,[{key:"CompileProgram",value:function(e,t){var r=this.ctx;if(null==r||null==e||null==t)return-1;var i=r.createShader(r.VERTEX_SHADER);if(r.shaderSource(i,e),r.compileShader(i),!r.getShaderParameter(i,r.COMPILE_STATUS))return console.log("Vertex shader failed to compile: "+r.getShaderInfoLog(i)),-1;var n=r.createShader(r.FRAGMENT_SHADER);if(r.shaderSource(n,t),r.compileShader(n),!r.getShaderParameter(n,r.COMPILE_STATUS))return console.log("Fragment shader failed to compile: "+r.getShaderInfoLog(n)),-1;var a=r.createProgram();return r.attachShader(a,i),r.attachShader(a,n),r.linkProgram(a),r.getProgramParameter(a,r.LINK_STATUS)?(r.deleteShader(i),r.deleteShader(n),a):(console.log("Program failed to compile: "+r.getProgramInfoLog(a)),-1)}},{key:"SR_Init",value:function(e,t){if(null==e)return G;if(this.canvas=e,this.ctx=this.canvas.getContext("webgl2"),this.ctx||(this.ctx=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl"),this.onlySupportedWebGL1=!0,console.log("only support webgl1")),!this.ctx)return console.log("your browser does not support WebGL"),j;if(2==t||6==t)return X;switch(t){case 1:case 3:this.nTextureNum=3;break;case 2:case 6:this.nTextureNum=2;break;case $:this.nTextureNum=1;break;default:return X}return this.enPixelFormat=t,1}},{key:"SR_Draw",value:function(e,t,r,i,n){if(null==this.ctx)return z;var a=this.nTextureNum;if(null==e||t<=0||r<=0)return G;if(0==this.videoShaderProgram||0==this.vertexPosBuffer||0==this.texturePosBuffer)return z;var o=1;if($==this.enPixelFormat)this.frameDisplayWidth=t,this.frameDisplayHeight=r;else if(1!=(o=this._ResizeFrameData(e,t,r,i)))return o;if(this.ctx.useProgram(this.videoShaderProgram),1==this.bRecreateTex){if(this.enPixelFormat==$){if(0!=this.nSurfaceTexture[0]){var s=this.nSurfaceTexture[0];this.ctx.deleteTexture(s),this.nSurfaceTexture[0]=0}var x=this.ctx.createTexture();if(x<=0)return Z;this.ctx.bindTexture(this.ctx.TEXTURE_2D,x),1==this.bAntialias?this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR_MIPMAP_NEAREST):this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE),this.nSurfaceTexture[0]=x}else if(1==this.enPixelFormat||3==this.enPixelFormat)for(var l=0;l<a;l++){if(0!=this.nSurfaceTexture[l]){var c=this.nSurfaceTexture[l];this.ctx.deleteTexture(c),this.nSurfaceTexture[l]=0}var f=this.ctx.createTexture();if(f<=0)return Z;if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,f),1==this.bAntialias?this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR_MIPMAP_NEAREST):this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE),0==l){var h=this.ctx.getUniformLocation(this.videoShaderProgram,"Ytexture");this.ctx.uniform1i(h,0)}else if(1==l){var u=this.ctx.getUniformLocation(this.videoShaderProgram,"Utexture");this.ctx.uniform1i(u,1)}else if(2==l){var d=this.ctx.getUniformLocation(this.videoShaderProgram,"Vtexture");this.ctx.uniform1i(d,2)}this.nSurfaceTexture[l]=f,this.ctx.bindTexture(this.ctx.TEXTURE_2D,null)}this.bRecreateTex=!1}this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer);var _=this.ctx.getAttribLocation(this.videoShaderProgram,"xy");if(_<0)return Z;this.ctx.vertexAttribPointer(_,3,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(_),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer);var p=this.ctx.getAttribLocation(this.videoShaderProgram,"uv");if(p<0)return Z;this.ctx.vertexAttribPointer(p,2,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(p),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null);var m=this.enDisplayEffect,g=this.ctx.getUniformLocation(this.videoShaderProgram,"bCapture");if(g<=0)return Z;this.ctx.uniform1i(g,0);var y=this.ctx.getUniformLocation(this.videoShaderProgram,"nPostProc");switch(this.ctx.uniform1i(y,this.nPostProc),1==this.nPostProc&&(o=this._SetImagePostProcess()),m){case q.SR_DE_NULL:break;case q.SR_DE_FISH_ORIGINAL:case q.SR_DE_FISH_PTZ_CEILING:case q.SR_DE_FISH_PTZ_FLOOR:case q.SR_DE_FISH_PTZ_WALL:case q.SR_DE_FISH_PANORAMA_CEILING_360:case q.SR_DE_FISH_PANORAMA_CEILING_180:case q.SR_DE_FISH_PANORAMA_FLOOR_360:case q.SR_DE_FISH_PANORAMA_FLOOR_180:case q.SR_DE_FISH_PANORAMA_WALL:if(null==this.pFishParamManager)return z;var b={};if(1!=(o=this.pFishParamManager.GetRenderParam(this.nFECPort,b)))return o;if(q.SR_DE_FISH_ORIGINAL==m){var v=this.ctx.getUniformLocation(this.videoShaderProgram,"bBlack");if(v<=0)return Z;this.ctx.uniform1i(v,b.bBlack);var P=this.ctx.getUniformLocation(this.videoShaderProgram,"bCut");if(P<=0)return Z;this.ctx.uniform1i(P,b.bCut)}if(q.SR_DE_FISH_PTZ_CEILING==m||q.SR_DE_FISH_PTZ_FLOOR==m||q.SR_DE_FISH_PTZ_WALL==m){var S=this.ctx.getUniformLocation(this.videoShaderProgram,"fHAngleCos");if(S<=0)return Z;this.ctx.uniform1f(S,b.fCosH);var R=this.ctx.getUniformLocation(this.videoShaderProgram,"fHAngleSin");if(R<=0)return Z;this.ctx.uniform1f(R,b.fSinH);var C=this.ctx.getUniformLocation(this.videoShaderProgram,"fVAngleCos");if(C<=0)return Z;this.ctx.uniform1f(C,b.fCosV);var E=this.ctx.getUniformLocation(this.videoShaderProgram,"fVAngleSin");if(E<=0)return Z;this.ctx.uniform1f(E,b.fSinV);var T=this.ctx.getUniformLocation(this.videoShaderProgram,"fZoom");if(T<=0)return Z;this.ctx.uniform1f(T,b.fZoom)}if(q.SR_DE_FISH_PANORAMA_CEILING_360==m||q.SR_DE_FISH_PANORAMA_CEILING_180==m||q.SR_DE_FISH_PANORAMA_FLOOR_360==m||q.SR_DE_FISH_PANORAMA_FLOOR_180==m){var F=this.ctx.getUniformLocation(this.videoShaderProgram,"fAngle");if(F<=0)return Z;this.ctx.uniform1f(F,b.fAngle)}var D=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX1");if(D<=0)return Z;this.ctx.uniform1f(D,b.fRXLeft);var M=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX2");if(M<=0)return Z;this.ctx.uniform1f(M,b.fRXRight);var I=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY1");if(I<=0)return Z;this.ctx.uniform1f(I,b.fRYTop);var w=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY2");if(w<=0)return Z;this.ctx.uniform1f(w,b.fRYBottom);break;case q.SR_DE_FISH_SEMISPHERE:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(3.14-this.fRotateX),this.pCamera.SetYaw(-this.fRotateY),this.pCamera.UpdateCamera(this.canvas.width,this.canvas.height);var A=this.pCamera.GetView(),k=this.pCamera.GetProj(),L=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(L<=0)return Z;this.ctx.uniformMatrix4fv(L,!1,A);var B=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(B<=0)return Z;this.ctx.uniformMatrix4fv(B,!1,k);break;case q.SR_DE_FISH_CYLINDER_CEILING:case q.SR_DE_FISH_CYLINDER_FLOOR:case q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(-this.fRotateX),this.pCamera.SetYaw(-this.fRotateY),this.pCamera.UpdateCamera(this.canvas.width,this.canvas.height);var O=this.pCamera.GetView(),H=this.pCamera.GetProj(),N=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(N<=0)return Z;this.ctx.uniformMatrix4fv(N,!1,O);var V=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(V<=0)return Z;this.ctx.uniformMatrix4fv(V,!1,H);break;default:return X}if(this.canvas.width<=0||this.canvas.height<=0)return j;if(null!=n&&1!=(o=this.SR_SetDisplayRect(n.fx,n.fy,n.width,n.height,2)))return o;if(null!=n?this.ctx.viewport(this.canvas.width*this.fDstUseLeft,this.canvas.height*this.fDstUseTop,this.canvas.width*this.fDstUseRight,this.canvas.height*this.fDstUseBottom):(this.ctx.viewport(0,0,this.canvas.width,this.canvas.height),this.ctx.clearColor(0,0,0,1),this.ctx.clear(this.ctx.COLOR_BUFFER_BIT|this.ctx.DEPTH_BUFFER_BIT)),this.b3DPort&&(this.ctx.enable(this.ctx.DEPTH_TEST),this.ctx.depthFunc(this.ctx.LESS),this.ctx.depthMask(!0),1==this.bCullBack?this.ctx.enable(this.ctx.CULL_FACE):this.ctx.disable(this.ctx.CULL_FACE)),this.enPixelFormat==$)this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,t,r,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,e),1==this.bAntialias&&this.ctx.generateMipmap(this.ctx.TEXTURE_2D);else if(1==this.enPixelFormat){var Y=this.pFrameData.subarray(0,t*r);this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t,r,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,Y);var U=this.pFrameData.subarray(t*r+t/2*r/2,t*r+t/2*r/2+t/2*r/2);this.ctx.activeTexture(this.ctx.TEXTURE1),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[1]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t/2,r/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,U);var W=this.pFrameData.subarray(t*r,t*r+t/2*r/2);this.ctx.activeTexture(this.ctx.TEXTURE2),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[2]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t/2,r/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,W),1==this.bAntialias&&this.ctx.generateMipmap(this.ctx.TEXTURE_2D),Y=null,U=null,W=null}else 3==this.enPixelFormat&&(Y=this.pFrameData.subarray(0,t*r),this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t,r,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,Y),U=this.pFrameData.subarray(t*r,t*r+t/2*r/2),this.ctx.activeTexture(this.ctx.TEXTURE1),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[1]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t/2,r/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,U),W=this.pFrameData.subarray(t*r+t/2*r/2,t*r+t/2*r/2+t/2*r/2),this.ctx.activeTexture(this.ctx.TEXTURE2),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[2]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,t/2,r/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,W),1==this.bAntialias&&this.ctx.generateMipmap(this.ctx.TEXTURE_2D),Y=null,U=null,W=null);if(this.onlySupportedWebGL1||this.ctx.clearBufferfi(this.ctx.DEPTH_STENCIL,0,1,0),0==this.b3DPort)this.ctx.drawArrays(this.ctx.TRIANGLE_FAN,0,4);else if(this.enDisplayEffect==q.SR_DE_FISH_SEMISPHERE){if(this.nSemiSpherePosNum<=0)return z;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nSemiSpherePosNum)}else if(this.enDisplayEffect==q.SR_DE_FISH_CYLINDER_CEILING||this.enDisplayEffect==q.SR_DE_FISH_CYLINDER_FLOOR){if(this.nCylinderPosNum<=0)return z;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nCylinderPosNum)}else if(this.enDisplayEffect==q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL){if(this.nArcSpherePosNum<=0)return z;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nArcSpherePosNum)}if(this.ctx.useProgram(null),null!=this.pFishParamManager){var J=this.pFishParamManager.GetWndPort();J!=fe&&J==this.nFECPort&&this.DrawPTZLines()}return null!=this.pfuncCBIn&&this.pfuncCBIn(this.pUserIn),null!=this.pfuncCBOut&&this.pfuncCBOut(this.pUserOut),1}},{key:"DrawPTZLines",value:function(){if(null==this.pFishParamManager)return z;var e=this.pFishParamManager.GetPTZDisplayMode();if(2==e||1==e)for(var t=0,r={fR:0,fG:0,fB:0,fA:0},i=0;i<ie;++i)if(0!=this.pFishParamManager.IsPortAllocated(i)&&(t=2,1==this.pFishParamManager.GetPTZColor(i,r))){1==this.pFishParamManager.IsPTZSelected(i)&&(t+=1);var n=this.pFishParamManager.GetWndPort();if(i!=n&&2==e)if(q.SR_DE_FISH_ORIGINAL==this.pFishParamManager.GetDisplayEffect(n)){var a={};if(1!=this.pFishParamManager.GetPTZPoints(i,a,2))continue;if(null!=a.pstPoints&&0!=a.nPointNum&&1!=this.SR_DrawLines(a.pstPoints,a.nPointNum,!0,r,t,!1))continue}else{var o;if((o=this.pFishParamManager.GetPTZFragmentNum(i))<=0)continue;for(var s=0;s<o;s++){var x={};this.pFishParamManager.GetPTZFragmentPoints(i,x,s),null!=x.pstPoints&&0!=x.nPointNum&&this.SR_DrawLines(x.pstPoints,x.nPointNum,!1,r,t,!1)}}else if(i!=n&&1==e){var l={};if(1!=this.pFishParamManager.GetPTZPoints(i,l,1))continue;if(null!=l.pstPoints&&0!=l.nPointNum&&1!=this.SR_DrawLines(l.pstPoints,l.nPointNum,!0,r,t,!1))continue}}return 1}},{key:"DrawFillBlock",value:function(e,t,r){if(null==this.ctx)return z;if(null==e||t<1||r<2)return G;for(var i=0,n=0;n<t;++n){if(null==e[n].pstPoints||e[n].nPointNum<3||!0!==e[n].bLoop||null==e[n].pstColor)return G;i+=e[n].nPointNum}if(i!==r)return G;var a=r-2*t;if(a>this.nMaxFillBlockTriNum&&(this.pFillBlockPosVertices=null,this.pFillBlockClrVertices=null,this.nMaxFillBlockTriNum=a),0==this.glBlockPosBuffer&&(this.glBlockPosBuffer=this.ctx.createBuffer(),0==this.glBlockPosBuffer))return Z;if(0==this.glBlockClrBuffer&&(this.glBlockClrBuffer=this.ctx.createBuffer(),0==this.glBlockClrBuffer))return Z;if(null==this.pFillBlockPosVertices){var o=this.nMaxFillBlockTriNum;if(this.pFillBlockPosVertices=new Float32Array(3*o*3),null==this.pFillBlockPosVertices)return W}if(this.pFillBlockPosVertices.fill(0),null==this.pFillBlockClrVertices){var s=this.nMaxFillBlockTriNum;if(this.pFillBlockClrVertices=new Float32Array(4*s*3),null==this.pFillBlockClrVertices)return W}this.pFillBlockClrVertices.fill(0);for(var x=0,l=0,c=0,f=null,h=null,u={},d={},_={},p=0;p<t;++p){c=e[p].nPointNum,f=e[p].pstPoints,h=e[p].pstColor,u.fX=(f[0].fX-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),u.fX=this.fDstUseLeft+u.fX*(this.fDstUseRight-this.fDstUseLeft),u.fX=2*u.fX-1,u.fY=(f[0].fY-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),u.fY=this.fDstUseTop+u.fY*(this.fDstUseBottom-this.fDstUseTop),u.fY=1-2*u.fY;for(var m=1;m<c-1;m++)d.fX=(f[m].fX-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),d.fX=this.fDstUseLeft+d.fX*(this.fDstUseRight-this.fDstUseLeft),d.fX=2*d.fX-1,d.fY=(f[m].fY-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),d.fY=this.fDstUseTop+d.fY*(this.fDstUseBottom-this.fDstUseTop),d.fY=1-2*d.fY,_.fX=(f[m+1].fX-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),_.fX=this.fDstUseLeft+_.fX*(this.fDstUseRight-this.fDstUseLeft),_.fX=2*_.fX-1,_.fY=(f[m+1].fY-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),_.fY=this.fDstUseTop+_.fY*(this.fDstUseBottom-this.fDstUseTop),_.fY=1-2*_.fY,this.pFillBlockPosVertices[x++]=u.fX,this.pFillBlockPosVertices[x++]=u.fY,this.pFillBlockPosVertices[x++]=0,this.pFillBlockClrVertices[l++]=h.fR,this.pFillBlockClrVertices[l++]=h.fG,this.pFillBlockClrVertices[l++]=h.fB,this.pFillBlockClrVertices[l++]=h.fA,this.pFillBlockPosVertices[x++]=d.fX,this.pFillBlockPosVertices[x++]=d.fY,this.pFillBlockPosVertices[x++]=0,this.pFillBlockClrVertices[l++]=h.fR,this.pFillBlockClrVertices[l++]=h.fG,this.pFillBlockClrVertices[l++]=h.fB,this.pFillBlockClrVertices[l++]=h.fA,this.pFillBlockPosVertices[x++]=_.fX,this.pFillBlockPosVertices[x++]=_.fY,this.pFillBlockPosVertices[x++]=0,this.pFillBlockClrVertices[l++]=h.fR,this.pFillBlockClrVertices[l++]=h.fG,this.pFillBlockClrVertices[l++]=h.fB,this.pFillBlockClrVertices[l++]=h.fA}if(0==this.nBlockShaderProgram&&(this.nBlockShaderProgram=this.CompileProgram(Q,ee),this.nBlockShaderProgram<=0))return Z;this.ctx.enable(this.ctx.BLEND),this.ctx.blendFunc(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glBlockPosBuffer),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,this.pFillBlockPosVertices,this.ctx.STATIC_DRAW),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glBlockClrBuffer),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,this.pFillBlockClrVertices,this.ctx.STATIC_DRAW),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.useProgram(this.nBlockShaderProgram);var g=this.ctx.getUniformLocation(this.nLineShaderProgram,"bCapture");if(g<=0)return Z;1==this.bIsCapturing?this.ctx.uniform1i(g,1):this.ctx.uniform1i(g,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glBlockPosBuffer);var y=this.ctx.getAttribLocation(this.nBlockShaderProgram,"position");this.ctx.enableVertexAttribArray(y),this.ctx.vertexAttribPointer(y,3,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glBlockClrBuffer);var b=this.ctx.getAttribLocation(this.nBlockShaderProgram,"color");return this.ctx.enableVertexAttribArray(b),this.ctx.vertexAttribPointer(b,4,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.drawArrays(this.ctx.TRIANGLES,0,3*a),this.ctx.useProgram(null),this.ctx.disable(this.ctx.BLEND),1}},{key:"ComputeLinePoint",value:function(e,t){if(null==e||t<1)return G;if(null==this.pLinePosVertices||null==this.pLineClrVertices)return z;var r=0,i=0;1==this.bIsCapturing?(r=(this.fDstUseRight-this.fDstUseLeft)*this.nCaptureWidth,i=(this.fDstUseBottom-this.fDstUseTop)*this.nCaptureHeight):(r=(this.fDstUseRight-this.fDstUseLeft)*this.canvas.width,i=(this.fDstUseBottom-this.fDstUseTop)*this.canvas.height);for(var n=0,a=0,o=0,s=0,x=0,l=0,c=0,f=0,h=0,u=0,d=0,_=0;_<t;++_){var p=[];if(!((d=e[_].nPointNum)<=0)){for(var m=0;m<d;++m){var g={};g.fX=(e[_].pstPoints[m].fX-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),g.fX=this.fDstUseLeft+g.fX*(this.fDstUseRight-this.fDstUseLeft),g.fX=2*g.fX-1,g.fY=(e[_].pstPoints[m].fY-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),g.fY=this.fDstUseTop+g.fY*(this.fDstUseBottom-this.fDstUseTop),g.fY=1-2*g.fY,p.push(g)}if(this.canvas.width<=0||this.canvas.height<=0)return j;if(l=3.5*e[_].nLineWidth/r,c=3.5*e[_].nLineWidth/i,l<=0||c<=0)return G;var y=e[_].pstColor;if(null==y||null==y)return G;for(var b=0;b<d-1;++b)a=p[b+1].fX-p[b].fX,o=p[b+1].fY-p[b].fY,n=Math.sqrt(a*a+o*o),Math.abs(n-0)<1e-6||(s=-l*o/n/2,x=c*a/n/2,this.pLinePosVertices[h++]=p[b].fX+s,this.pLinePosVertices[h++]=p[b].fY+x,this.pLinePosVertices[h++]=-1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[h++]=p[b+1].fX-s,this.pLinePosVertices[h++]=p[b+1].fY-x,this.pLinePosVertices[h++]=1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[h++]=p[b].fX-s,this.pLinePosVertices[h++]=p[b].fY-x,this.pLinePosVertices[h++]=1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[h++]=p[b].fX+s,this.pLinePosVertices[h++]=p[b].fY+x,this.pLinePosVertices[h++]=-1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[h++]=p[b+1].fX+s,this.pLinePosVertices[h++]=p[b+1].fY+x,this.pLinePosVertices[h++]=-1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[h++]=p[b+1].fX-s,this.pLinePosVertices[h++]=p[b+1].fY-x,this.pLinePosVertices[h++]=1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,f+=2);1==e[_].bLoop&&2<d&&(a=p[d-1].fX-p[0].fX,o=p[d-1].fY-p[0].fY,n=Math.sqrt(a*a+o*o),Math.abs(n-0)>1e-6&&(s=-l*o/n/2,x=c*a/n/2,this.pLinePosVertices[h++]=p[0].fX+s,this.pLinePosVertices[h++]=p[0].fY+x,this.pLinePosVertices[h++]=-1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[h++]=p[d-1].fX-s,this.pLinePosVertices[h++]=p[d-1].fY-x,this.pLinePosVertices[h++]=1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[h++]=p[0].fX-s,this.pLinePosVertices[h++]=p[0].fY-x,this.pLinePosVertices[h++]=1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[h++]=p[0].fX+s,this.pLinePosVertices[h++]=p[0].fY+x,this.pLinePosVertices[h++]=-1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[h++]=p[d-1].fX+s,this.pLinePosVertices[h++]=p[d-1].fY+x,this.pLinePosVertices[h++]=-1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,this.pLinePosVertices[h++]=p[d-1].fX-s,this.pLinePosVertices[h++]=p[d-1].fY-x,this.pLinePosVertices[h++]=1,this.pLineClrVertices[u++]=y.fR,this.pLineClrVertices[u++]=y.fG,this.pLineClrVertices[u++]=y.fB,this.pLineClrVertices[u++]=y.fA,f+=2))}}return 0==f?G:(this.nLineTriangleNum=f,1)}},{key:"SR_DrawLines",value:function(e,t,r,i,n,a){var o=[],s={};return s.pstPoints=e,s.nPointNum=t,s.bLoop=r,s.pstColor=i,s.nLineWidth=n,o.push(s),this.SR_DrawLinesEx(o,1,t,a)}},{key:"SR_DrawLinesEx",value:function(e,t,r,i){if(null==this.ctx)return z;if(null==e||t<1||r<2)return G;if(0==this.nLineShaderProgram){var n=this.CompileProgram(Q,ee);if(n<=0)return Z;this.nLineShaderProgram=n}if(1==i)return this.DrawFillBlock(e,t,r);for(var a=0,o=0;o<t;++o){if(null==e[o].pstPoints||e[o].nPointNum<=1||e[o].nPointNum>=1024||e[o].nLineWidth<=0||null==e[o].pstColor)return G;a+=e[o].nPointNum}if(a!=r)return G;if((a+=t)>this.nMaxPointNum&&(this.nMaxPointNum=a,this.pLinePosVertices=null,this.pLineClrVertices=null),null==this.pLinePosVertices&&(this.pLinePosVertices=new Float32Array(6*this.nMaxPointNum*3),null==this.pLinePosVertices))return W;if(this.pLinePosVertices.fill(0),null==this.pLineClrVertices&&(this.pLineClrVertices=new Float32Array(6*this.nMaxPointNum*4),null==this.pLineClrVertices))return W;if(this.pLineClrVertices.fill(0),0==this.glLinePosBuffer&&(this.glLinePosBuffer=this.ctx.createBuffer(),0==this.glLinePosBuffer))return Z;if(0==this.glLineClrBuffer&&(this.glLineClrBuffer=this.ctx.createBuffer(),0==this.glLineClrBuffer))return Z;var s=this.ComputeLinePoint(e,t);if(1!=s)return s;this.ctx.enable(this.ctx.BLEND),this.ctx.blendFunc(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA);var x=this.nLineShaderProgram;this.ctx.useProgram(x);var l=this.ctx.getUniformLocation(this.nLineShaderProgram,"bCapture");if(l<=0)return Z;1==this.bIsCapturing?this.ctx.uniform1i(l,1):this.ctx.uniform1i(l,0);var c=this.glLinePosBuffer,f=this.glLineClrBuffer,h=this.nLineTriangleNum,u=this.pLinePosVertices,d=this.pLineClrVertices;this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,c),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,u,this.ctx.STATIC_DRAW);var _=this.ctx.getAttribLocation(x,"position");this.ctx.enableVertexAttribArray(_),this.ctx.vertexAttribPointer(_,3,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,f),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,d,this.ctx.STATIC_DRAW);var p=this.ctx.getAttribLocation(x,"color");return this.ctx.enableVertexAttribArray(p),this.ctx.vertexAttribPointer(p,4,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),1==this.bIsCapturing?this.ctx.viewport(0,0,this.nCaptureWidth,this.nCaptureHeight):this.ctx.viewport(0,0,this.canvas.width,this.canvas.height),this.ctx.drawArrays(this.ctx.TRIANGLES,0,3*h),this.ctx.useProgram(null),this.ctx.disable(this.ctx.BLEND),1}},{key:"SR_DrawFont",value:function(e,t,r,i,n,a,o,s,x,l,c){if(null==e||null==t||null==r||i<=1||n<=1)return G;if(1==a&&null==o)return G;var f=[],h={};return h.bBackground=a,h.nFontWidth=i,h.nFontHeight=n,h.pstBGColor=o,h.pstFontColor=r,h.pString=e,h.pstStartPos=t,h.fRotateAngle=s,h.pFontFamily=x,h.textAlign=l,h.textBaseline=c,f.push(h),this.SR_DrawFontEx(f,1)}},{key:"SR_DrawFontEx",value:function(e,t){if(null==this.ctx)return z;if(0>t||null==e)return G;var r,i,n=0,a=0;if(1==this.bIsCapturing){if(0==this.nCaptureWidth||0==this.nCaptureHeight)return z;n=Math.round((this.fDstUseRight-this.fDstUseLeft)*this.nCaptureWidth),a=Math.round((this.fDstUseBottom-this.fDstUseTop)*this.nCaptureHeight)}else n=Math.round((this.fDstUseRight-this.fDstUseLeft)*this.canvas.width),a=Math.round((this.fDstUseBottom-this.fDstUseTop)*this.canvas.height);if(n=n+4-n%4,a=a+4-a%4,this.nDrawFontWidth==n&&this.nDrawFontHeight==a||(this.pFontColorBuffer=null,this.nFontColorTexture=0,this.nDrawFontWidth=n,this.nDrawFontHeight=a,null!=this.textCanvas&&(this.textCanvas.remove(),this.textCanvas=null,this.textCanvasCtx=null)),0==this.nFontColorTexture){if(this.nFontColorTexture=this.ctx.createTexture(),0==this.nFontColorTexture)return Z;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nFontColorTexture),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE)}if(null==this.textCanvas){if(this.textCanvas=document.createElement("canvas"),null==this.textCanvas)return J;if(this.textCanvasCtx=this.textCanvas.getContext("2d"),null==this.textCanvasCtx)return J;this.textCanvasCtx.canvas.width=this.nDrawFontWidth,this.textCanvasCtx.canvas.height=this.nDrawFontHeight}this.textCanvasCtx.clearRect(0,0,this.nDrawFontWidth,this.nDrawFontHeight);for(var o=0;o<t;++o){var s=e[o].nFontWidth,x=e[o].nFontHeight;1==this.bIsCapturing&&(s=Math.round(.7*this.nCaptureWidth/this.canvas.width*s),x=Math.round(.7*this.nCaptureHeight/this.canvas.height*x));var l=s<x?s:x;this.textCanvasCtx.font=l.toString()+"px "+e[o].pFontFamily,null==e[o].textAlign||null==e[o].textAlign?this.textCanvasCtx.textAlign="left":this.textCanvasCtx.textAlign=e[o].textAlign,null==e[o].textBaseline||null==e[o].textBaseline?this.textCanvasCtx.textBaseline="top":this.textCanvasCtx.textBaseline=e[o].textBaseline;var c=parseInt(255*e[o].pstFontColor.fR),f=parseInt(255*e[o].pstFontColor.fG),h=parseInt(255*e[o].pstFontColor.fB),u=c<16?"0"+c.toString(16):c.toString(16),d=f<16?"0"+f.toString(16):f.toString(16),_=h<16?"0"+h.toString(16):h.toString(16);this.textCanvasCtx.fillStyle="#"+u+d+_,this.textCanvasCtx.globalAlpha=e[o].pstFontColor.fA;var p=e[o].pstStartPos.fX*this.nDrawFontWidth,m=e[o].pstStartPos.fY*this.nDrawFontHeight;this.textCanvasCtx.save(),this.textCanvasCtx.translate(p,m),this.textCanvasCtx.rotate(e[o].fRotateAngle*Math.PI/180),this.textCanvasCtx.fillText(e[o].pString,0,0),this.textCanvasCtx.restore()}if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nFontColorTexture),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,this.textCanvasCtx.canvas),0==this.nFontShaderProgram&&(this.nFontShaderProgram=this.CompileProgram("\n    attribute vec4  position;\n    attribute vec4  texCoord;\n    varying vec4  pp; \n    uniform int bCapture;\n\n    void main()\n    { \n        gl_Position.x  = position.x;\n        gl_Position.y  = position.y;\n        if(bCapture == 1)\n        {\n            gl_Position.y = -position.y;\n        }\n        gl_Position.z  = 0.1;\n        gl_Position.w  = 1.0;\n        pp = texCoord; \n    }\n","\n    varying lowp vec4 pp;\n    uniform sampler2D texture;\n\n    void main(void)\n    {\n        gl_FragColor = texture2D(texture, pp.st);\n    }\n"),this.nFontShaderProgram<=0))return Z;1==this.bIsCapturing?(r=this.nCaptureWidth+4-this.nCaptureWidth%4,i=this.nCaptureHeight+4-this.nCaptureHeight%4):(r=this.canvas.width+4-this.canvas.width%4,i=this.canvas.height+4-this.canvas.height%4),this.ctx.viewport(0,0,r,i),this.ctx.enable(this.ctx.BLEND),this.ctx.blendFunc(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA),this.ctx.useProgram(this.nFontShaderProgram);var g=this.ctx.getUniformLocation(this.nFontShaderProgram,"bCapture");if(g<=0)return Z;1==this.bIsCapturing?this.ctx.uniform1i(g,1):this.ctx.uniform1i(g,0),this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nFontColorTexture);var y=this.ctx.getUniformLocation(this.nFontShaderProgram,"texture");this.ctx.uniform1i(y,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer);var b=this.ctx.getAttribLocation(this.nFontShaderProgram,"position");this.ctx.enableVertexAttribArray(b),this.ctx.vertexAttribPointer(b,3,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer);var v=this.ctx.getAttribLocation(this.nFontShaderProgram,"texCoord");return this.ctx.enableVertexAttribArray(v),this.ctx.vertexAttribPointer(v,2,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.drawArrays(this.ctx.TRIANGLE_FAN,0,4),this.ctx.bindTexture(this.ctx.TEXTURE_2D,null),this.ctx.useProgram(null),this.ctx.disable(this.ctx.BLEND),1}},{key:"SR_DrawImage",value:function(e,t,r,i,n,a){if(null==this.ctx)return z;if(null==e||t<=0||r<=0||null==i||a<0||a>1)return G;if(this.nDrawImageWidth=t,this.nDrawImageHeight=r,0==this.glImagePosBuffer&&(this.glImagePosBuffer=this.ctx.createBuffer(),0==this.glImagePosBuffer))return Z;if(0==this.glImageClrBuffer&&(this.glImageClrBuffer=this.ctx.createBuffer(),0==this.glImageClrBuffer))return Z;if(null==this.pImageClrVertices){if(this.pImageClrVertices=new Float32Array(12),null==this.pImageClrVertices)return W;this.pImageClrVertices[0]=0,this.pImageClrVertices[1]=0,this.pImageClrVertices[2]=0,this.pImageClrVertices[3]=1,this.pImageClrVertices[4]=1,this.pImageClrVertices[5]=0,this.pImageClrVertices[6]=1,this.pImageClrVertices[7]=0,this.pImageClrVertices[8]=0,this.pImageClrVertices[9]=1,this.pImageClrVertices[10]=1,this.pImageClrVertices[11]=1}var o={},s={};if(o.fLeft=(i.fLeft-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),o.fRight=(i.fRight-this.fSrcUseLeft)/(this.fSrcUseRight-this.fSrcUseLeft),o.fTop=(i.fTop-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),o.fBottom=(i.fBottom-this.fSrcUseTop)/(this.fSrcUseBottom-this.fSrcUseTop),s.fLeft=this.fDstUseLeft+o.fLeft*(this.fDstUseRight-this.fDstUseLeft),s.fRight=this.fDstUseLeft+o.fRight*(this.fDstUseRight-this.fDstUseLeft),s.fTop=this.fDstUseTop+o.fTop*(this.fDstUseBottom-this.fDstUseTop),s.fBottom=this.fDstUseTop+o.fBottom*(this.fDstUseBottom-this.fDstUseTop),null==this.pImagePosVertices&&(this.pImagePosVertices=new Float32Array(12),null==this.pImagePosVertices))return W;switch(this.pImagePosVertices.fill(0),this.pImagePosVertices[0]=2*s.fLeft-1,this.pImagePosVertices[1]=1-2*s.fTop,this.pImagePosVertices[2]=2*s.fLeft-1,this.pImagePosVertices[3]=1-2*s.fBottom,this.pImagePosVertices[4]=2*s.fRight-1,this.pImagePosVertices[5]=1-2*s.fTop,this.pImagePosVertices[6]=2*s.fRight-1,this.pImagePosVertices[7]=1-2*s.fTop,this.pImagePosVertices[8]=2*s.fLeft-1,this.pImagePosVertices[9]=1-2*s.fBottom,this.pImagePosVertices[10]=2*s.fRight-1,this.pImagePosVertices[11]=1-2*s.fBottom,1==this.bIsCapturing?this.ctx.viewport(0,0,this.nCaptureWidth,this.nCaptureHeight):this.ctx.viewport(0,0,this.canvas.width,this.canvas.height),this.ctx.enable(this.ctx.BLEND),this.ctx.blendFunc(this.ctx.SRC_ALPHA,this.ctx.ONE_MINUS_SRC_ALPHA),n){case 5:if(null==this.nImageColorTexture){if(this.nImageColorTexture=this.ctx.createTexture(),0==this.nImageColorTexture)return Z;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE)}if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,this.nDrawImageWidth,this.nDrawImageHeight,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,e),0==this.nImageShaderProgram){var x=this.CompileProgram(te,re);if(x<=0)return Z;this.nImageShaderProgram=x}break;case 4:if(null==this.nImageColorTexture){if(this.nImageColorTexture=this.ctx.createTexture(),0==this.nImageColorTexture)return Z;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE)}if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGB,this.nDrawImageWidth,this.nDrawImageHeight,0,this.ctx.RGB,this.ctx.UNSIGNED_SHORT_5_6_5,e),0==this.nImageShaderProgram){var l=this.CompileProgram(te,"\n    precision mediump float; \n    uniform sampler2D texture; \n    varying lowp vec4 pp;\n    uniform float fAlpha;\n    void main(void) \n    { \n        gl_FragColor = texture2D(texture, pp.st); \n        gl_FragColor.a *= fAlpha; \n    } \n");if(l<=0)return Z;this.nImageShaderProgram=l}break;case 1:for(var c=0;c<3;c++){if(this.nImageColorTextures[c]=this.ctx.createTexture(),0==this.nImageColorTextures[c])return Z;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTextures[c]),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE)}if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTextures[0]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,this.nDrawImageWidth,this.nDrawImageHeight,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,e),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTextures[1]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,this.nDrawImageWidth/2,this.nDrawImageHeight/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,e+this.nDrawImageWidth*this.nDrawImageHeight*5/4),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTextures[2]),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.LUMINANCE,this.nDrawImageWidth/2,this.nDrawImageHeight/2,0,this.ctx.LUMINANCE,this.ctx.UNSIGNED_BYTE,e+this.nDrawImageWidth*this.nDrawImageHeight),0==this.nImageShaderProgram){var f=this.CompileProgram(te,"\n    precision mediump float;\n    uniform sampler2D Ytexture;\n    uniform sampler2D Utexture;\n    uniform sampler2D Vtexture;\n    uniform float fAlpha;\n    varying lowp vec4 pp;\n\n    void main(void)\n    {\n        float r, g, b, y, u, v; \n\n        y = texture2D(Ytexture, pp.st).r; \n        u = texture2D(Utexture, pp.st).r; \n        v = texture2D(Vtexture, pp.st).r; \n\n        y = 1.1643 * (y - 0.0625); \n        u = u - 0.5; \n        v = v - 0.5; \n\n        r = y + 1.5958 * v; \n        g = y - 0.39173 * u - 0.81290 * v; \n        b = y + 2.017 * u; \n\n        gl_FragColor = vec4(r, g, b, fAlpha); \n    }\n");if(f<=0)return Z;this.nImageShaderProgram=f}break;case $:if(null==this.nImageColorTexture){if(this.nImageColorTexture=this.ctx.createTexture(),0==this.nImageColorTexture)return Z;this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE)}this.ctx.useProgram(this.videoShaderProgram),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer);var h=this.ctx.getAttribLocation(this.videoShaderProgram,"xy");if(h<0)return Z;this.ctx.vertexAttribPointer(h,3,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(h),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer);var u=this.ctx.getAttribLocation(this.videoShaderProgram,"uv");if(u<0)return Z;if(this.ctx.vertexAttribPointer(u,2,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(u),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.useProgram(null),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,this.nDrawImageWidth,this.nDrawImageHeight,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,e),0==this.nImageShaderProgram){var d=this.CompileProgram(te,re);if(d<=0)return Z;this.nImageShaderProgram=d}break;default:return X}var _=this.nImageShaderProgram;this.ctx.useProgram(_);var p=this.ctx.getUniformLocation(this.nImageShaderProgram,"bCapture");if(p<=0)return Z;1==this.bIsCapturing?this.ctx.uniform1i(p,1):this.ctx.uniform1i(p,0),this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nImageColorTexture);var m=this.ctx.getUniformLocation(this.nImageShaderProgram,"texture");this.ctx.uniform1i(m,0),m=this.ctx.getUniformLocation(this.nImageShaderProgram,"fAlpha"),this.ctx.uniform1f(m,a),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glImagePosBuffer),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,this.pImagePosVertices,this.ctx.STATIC_DRAW);var g=this.ctx.getAttribLocation(this.nImageShaderProgram,"position");this.ctx.enableVertexAttribArray(g),this.ctx.vertexAttribPointer(g,2,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.glImageClrBuffer),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,this.pImageClrVertices,this.ctx.STATIC_DRAW);var y=this.ctx.getAttribLocation(this.nImageShaderProgram,"texCoord");return this.ctx.enableVertexAttribArray(y),this.ctx.vertexAttribPointer(y,2,this.ctx.FLOAT,!1,0,0),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),this.ctx.drawArrays(this.ctx.TRIANGLES,0,6),this.ctx.useProgram(null),this.ctx.disable(this.ctx.BLEND),1}},{key:"SR_AddSubPort",value:function(e){var t,r,i=fe;if(null==this.ctx)return i;if(null!=this.pFishParamManager?i=this.pFishParamManager.GetFECPort(e):e==q.SR_DE_NULL&&(i=0),i==fe)return fe;switch(this.nFECPort=i,e){case q.SR_DE_NULL:t=K,this.enPixelFormat==$?r="\nprecision mediump float;\nvarying highp vec2 v_uv;\nuniform sampler2D texture;\nuniform float fWndWidth;\nuniform float fWndHeight;\nuniform float fBrightness;\nuniform float fHue;\nuniform float fSaturation;\nuniform float fContrast;\nuniform float fSharpness;\nuniform int nPostProc;\nvec3 rgb2hsv(vec3 c) \n{ \n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0); \n    vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy); \n    vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx); \n    float d = q.x - min(q.w, q.y); \n    float e = 1.0e-10; \n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x); \n} \nvec3 hsv2rgb(vec3 c) \n{ \n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0); \n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www); \n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y); \n} \nvec3 sharpen() \n{ \n    vec3 sharpenColor; \n    float offWidth = 1.0 / fWndWidth; \n    float offHeight = 1.0 / fWndHeight; \n    float tempSharpness = fSharpness * 100.0; \n    vec2 uv     = v_uv; \n    sharpenColor  = (1.0 + 4.0 * tempSharpness) * texture2D(texture, uv).rgb; \n\n    uv            = v_uv + vec2(offWidth, 0); \n    sharpenColor -= tempSharpness * texture2D(texture, uv).rgb; \n\n    uv            = v_uv + vec2(-offWidth, 0); \n    sharpenColor -= tempSharpness * texture2D(texture, uv).rgb; \n\n    uv            = v_uv + vec2(0, offHeight); \n    sharpenColor -= tempSharpness * texture2D(texture, uv).rgb; \n\n    uv            = v_uv + vec2(0, -offHeight); \n    sharpenColor -= tempSharpness * texture2D(texture, uv).rgb; \n\n    return sharpenColor; \n} \nvoid main(void) \n{\n    if(1 == nPostProc)\n    {\n        vec3 fragRGB = sharpen();                    //sharpen 锐度\n        vec3 fragHSV = rgb2hsv(fragRGB); \n        fragHSV.x = fragHSV.x + fHue;                   //hue 色度\n        fragHSV.y = fragHSV.y * (fSaturation + 1.0);    //saturation 饱和度\n        fragRGB = hsv2rgb(fragHSV); \n        if (fBrightness > 0.0)                          //brightness 亮度\n        { \n            fragRGB = fragRGB + (1.0 - fragRGB) * fBrightness; \n        } \n        else \n        { \n            fragRGB = fragRGB + fragRGB * fBrightness; \n        } \n        float tempContrast = fContrast > 0.0 ? fContrast * 10.0 : fContrast; \n        fragRGB = ((fragRGB - 0.5) * max(tempContrast + 1.0, 0.0)) + 0.5;      //contrast 对比度\n        gl_FragColor = vec4(fragRGB, 1.0); \n    }\n    else\n    {\n        gl_FragColor = texture2D(texture, v_uv);\n    }\n}\n":1!=this.enPixelFormat&&3!=this.enPixelFormat||(r="\nprecision mediump float;\nvarying highp vec2 v_uv;\nuniform sampler2D Ytexture;\nuniform sampler2D Utexture;\nuniform sampler2D Vtexture;\nuniform float fWndWidth;\nuniform float fWndHeight;\nuniform float fBrightness;\nuniform float fHue;\nuniform float fSaturation;\nuniform float fContrast;\nuniform float fSharpness;\nuniform int nPostProc;\nvec3 rgb;\nvec3 yuv2rgb(float y, float u, float v)\n{\n    float r,g,b; \n    y = 1.1643 * (y - 0.0625); \n    u = u - 0.5; \n    v = v - 0.5; \n    r = y + 1.5958 * v; \n    g = y - 0.39173 * u - 0.81290 * v; \n    b = y + 2.017 * u; \n    return vec3(r, g, b);\n}\nvec3 rgb2hsv(vec3 c) \n{ \n    vec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0); \n    vec4 p = c.g < c.b ? vec4(c.bg, K.wz) : vec4(c.gb, K.xy); \n    vec4 q = c.r < p.x ? vec4(p.xyw, c.r) : vec4(c.r, p.yzx); \n\n    float d = q.x - min(q.w, q.y); \n    float e = 1.0e-10; \n    return vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x); \n} \n\nvec3 hsv2rgb(vec3 c) \n{ \n    vec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0); \n    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www); \n    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y); \n} \n\nvec3 sharpen(vec3 c) \n{ \n    vec3 sharpenColor; \n    float sharpenColorY;\n    float sharpenColorU;\n    float sharpenColorV;\n    float offWidth  = 1.0 / fWndWidth; \n    float offHeight = 1.0 / fWndHeight; \n    float tempSharpness = fSharpness * 100.0; \n\n    sharpenColor = (1.0 + 4.0 * tempSharpness) * c;\n\n    vec2 uv       = v_uv + vec2(offWidth, 0); \n    sharpenColorY = texture2D(Ytexture, uv).r; \n    sharpenColorU = texture2D(Utexture, uv).r; \n    sharpenColorV = texture2D(Vtexture, uv).r; \n    sharpenColor -= tempSharpness *  yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n\n    uv            = v_uv + vec2(-offWidth, 0); \n    sharpenColorY = texture2D(Ytexture, uv).r;\n    sharpenColorU = texture2D(Utexture, uv).r; \n    sharpenColorV = texture2D(Vtexture, uv).r; \n    sharpenColor -= tempSharpness *  yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n\n    uv            = v_uv + vec2(0, offHeight);\n    sharpenColorY = texture2D(Ytexture, uv).r; \n    sharpenColorU = texture2D(Utexture, uv).r; \n    sharpenColorV = texture2D(Vtexture, uv).r; \n    sharpenColor -= tempSharpness * yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n\n    uv            = v_uv + vec2(0, -offHeight); \n    sharpenColorY = texture2D(Ytexture, uv).r; \n    sharpenColorU = texture2D(Utexture, uv).r; \n    sharpenColorV = texture2D(Vtexture, uv).r; \n    sharpenColor -= tempSharpness *  yuv2rgb(sharpenColorY, sharpenColorU, sharpenColorV);\n\n    return sharpenColor; \n} \nvoid main(void)\n{\n    float y, u, v;\n    y = texture2D(Ytexture, v_uv).r;\n    u = texture2D(Utexture, v_uv).r;\n    v = texture2D(Vtexture, v_uv).r;\n    rgb = yuv2rgb(y, u, v);\n    if(1 == nPostProc)\n    {\n        vec3 fragRGB = sharpen(rgb);                    //sharpen 锐度\n        vec3 fragHSV = rgb2hsv(fragRGB); \n        fragHSV.x = fragHSV.x + fHue;                   //hue 色度\n        fragHSV.y = fragHSV.y * (fSaturation + 1.0);    //saturation 饱和度\n        fragRGB = hsv2rgb(fragHSV); \n        if (fBrightness > 0.0)                        //brightness 亮度\n        { \n            fragRGB = fragRGB + (1.0 - fragRGB) * fBrightness; \n        } \n        else \n        { \n            fragRGB = fragRGB + fragRGB * fBrightness; \n        } \n\n        float tempContrast = fContrast > 0.0 ? fContrast * 10.0 : fContrast; \n        fragRGB = ((fragRGB - 0.5) * max(tempContrast + 1.0, 0.0)) + 0.5;      //contrast 对比度\n        gl_FragColor = vec4(fragRGB, 1.0); \n    }\n    else\n    {\n        gl_FragColor = vec4(rgb, 1.0);\n    }\n}\n"),this.b3DPort=!1;break;case q.SR_DE_FISH_ORIGINAL:t=K,r="\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;\nuniform float fRX1;\nuniform float fRX2;\nuniform float fRY1;\nuniform float fRY2;\nuniform int bBlack; \nuniform int bCut;\n\nvoid main()\n{ \n\tfloat r,g,b;\n\tvec4 origin;\n\n\tfloat  w;\n\tfloat  h;\n\tfloat  fCenterX;\n\tfloat  fCenterY;\n\tfloat  fRadius;\n\tw = 1.0;\n\th = (fRX2 - fRX1) / (fRY2 - fRY1);\n\tfCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n\tfCenterY = (fRY1 + fRY2) / 2.0 * h;\n\tfRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n\tfloat  leftCut = 0.0;\n\tfloat  rightCut = 1.0;\n\tfloat  topCut = 0.0;\n\tfloat  bottomCut = 1.0;\n\tif(bCut == 1)\n\t{\n\t\tif(fRX1 > 0.0)\n\t\t{\n\t\t\tleftCut = fRX1;\n\t\t}\n\t\tif(fRX2 < 1.0)\n\t\t{\n\t\t\trightCut = fRX2;\n\t\t}\n\t\tif(fRY1 > 0.0)\n\t\t{\n\t\t\ttopCut = fRY1;\n\t\t}\n\t\tif(fRY2 < 1.0)\n\t\t{\n\t\t\tbottomCut = fRY2;\n\t\t}\n\t}\n\torigin.s = v_uv.s * (rightCut-leftCut) + leftCut;\n\torigin.t = v_uv.t * (bottomCut-topCut) + topCut;\n\n\tr = texture2D(texture, origin.st).r; \n\tg = texture2D(texture, origin.st).g; \n\tb = texture2D(texture, origin.st).b; \n\n\tif(bBlack == 1)\n\t{\n\t\tfloat tmpX, tmpY;\n\t\ttmpX = origin.s * w; \n\t\ttmpY = origin.t * h; \n\t\tfloat d2 = (tmpX-fCenterX)*(tmpX-fCenterX) + (tmpY-fCenterY)*(tmpY-fCenterY);\n\t\tif(d2 > fRadius*fRadius)\n\t\t{\n\t\t\tr = 0.0; \n\t\t\tg = 0.0; \n\t\t\tb = 0.0; \n\t\t}\n\t}\n\n\tgl_FragColor = vec4(r ,g ,b , 1.0);\n}\n",this.b3DPort=!1;break;case q.SR_DE_FISH_PTZ_CEILING:t=K,r="\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;\nuniform float fHAngleCos;\nuniform float fHAngleSin;\nuniform float fVAngleCos;\nuniform float fVAngleSin;\nuniform float fZoom;\n\nuniform float fRX1; \nuniform float fRX2; \nuniform float fRY1; \nuniform float fRY2; \n\nvoid main()\n{\n    float r,g,b;  \n\n    vec4 origin1;\n    vec4 origin2;\n    vec4 result;\n    float  z1;\n    float  z2;\n    float  dnew;\n\n    float  w;\n    float  h;\n    float  fCenterX;\n    float  fCenterY;\n    float  fRadius;\n    w = 1.0;\n    h = (fRX2 - fRX1) / (fRY2 - fRY1);\n    fCenterX = (fRX1 + fRX2) / 2.0 * w;    \n    fCenterY = (fRY1 + fRY2) / 2.0 * h;\n    fRadius = (fRX2 - fRX1) / 2.0 * w; \n\n    origin1.s = v_uv.s - 0.5;\n    origin1.t = 0.5 - v_uv.t;\n    z1 = fZoom ;\n\n    origin2.s = origin1.s ;\n    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);\n    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;\n\n    dnew = sqrt(origin2.s*origin2.s + origin2.t*origin2.t) ;\n    float d = sqrt(origin2.s*origin2.s + origin2.t*origin2.t + z2*z2);\n    float theta = asin(dnew/d);\n    float tmp = theta / 1.5707963 * 0.5;\n    origin2.s = tmp*origin2.s / dnew ;\n    origin2.t = tmp*origin2.t / dnew ;\n\n    result.s = ((origin2.s*fHAngleCos - origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\n    result.t = (-(origin2.s*fHAngleSin + origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\n\n    r = texture2D(texture, result.st).r; \n    g = texture2D(texture, result.st).g; \n    b = texture2D(texture, result.st).b; \n    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n    {\n        r = 0.0; \n        g = 0.0; \n        b = 0.0; \n    }\n    gl_FragColor = vec4(r ,g ,b , 1.0);\n} \n",this.b3DPort=!1;break;case q.SR_DE_FISH_PTZ_FLOOR:t=K,r="\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;  \nuniform float fHAngleCos;  \nuniform float fHAngleSin; \nuniform float fVAngleCos;  \nuniform float fVAngleSin;  \nuniform float fZoom;\n\nuniform float fRX1; \nuniform float fRX2; \nuniform float fRY1; \nuniform float fRY2; \n\nvoid main()\n{\n    float r,g,b;\n\n    vec4 origin1;\n    vec4 origin2;\n    vec4 result;\n    float  z1;\n    float  z2;\n    float  dnew;\n\n    float  w;\n    float  h;\n    float  fCenterX;\n    float  fCenterY;\n    float  fRadius;\n    w = 1.0;\n    h = (fRX2 - fRX1) / (fRY2 - fRY1);\n    fCenterX = (fRX1 + fRX2) / 2.0 * w;     ///<Բ��ʵ������\n    fCenterY = (fRY1 + fRY2) / 2.0 * h;\n    fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<�뾶ʵ�ʳ���\n    origin1.s = v_uv.s - 0.5;\n    origin1.t = v_uv.t - 0.5;\n    z1 = fZoom ;\n\n    origin2.s = origin1.s ;\n    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);\n    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;\n\n    dnew = sqrt(origin2.s*origin2.s + origin2.t*origin2.t) ;\n    float d = sqrt(origin2.s*origin2.s + origin2.t*origin2.t + z2*z2);\n    float theta = asin(dnew/d);\n    float tmp = theta / 1.5707963 * 0.5;\n    origin2.s = tmp*origin2.s / dnew ;\n    origin2.t = tmp*origin2.t / dnew ;\n\n    result.s = ((origin2.s*fHAngleCos - origin2.t*fHAngleSin)*fRadius*2.0+fCenterX)/w;\n    result.t = ((origin2.s*fHAngleSin + origin2.t*fHAngleCos)*fRadius*2.0+fCenterY)/h;\n\n    r = texture2D(texture, result.st).r; \n    g = texture2D(texture, result.st).g; \n    b = texture2D(texture, result.st).b; \n    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n    {\n        r = 0.0;\n        g = 0.0; \n        b = 0.0; \n    }\n    gl_FragColor = vec4(r ,g ,b , 1.0);\n} \n",this.b3DPort=!1;break;case q.SR_DE_FISH_PTZ_WALL:t=K,r="\nprecision mediump float;\nvarying vec2 v_uv;\nuniform sampler2D texture;\nuniform float fHAngleCos;\nuniform float fHAngleSin;  \nuniform float fVAngleCos;  \nuniform float fVAngleSin;  \nuniform float fZoom;\n\nuniform float fRX1; \nuniform float fRX2; \nuniform float fRY1; \nuniform float fRY2; \n\nvoid main()\n{\n    float r,g,b;  \n\n    vec4 origin1;\n    vec4 origin2;\n    vec4 origin3;\n    vec4 result;\n    float  z1;\n    float  z2;\n    float  z3;\n    float  dnew;\n\n    float  w;\n    float  h;\n    float  fCenterX;\n    float  fCenterY;\n    float  fRadius;\n    w = 1.0;\n    h = (fRX2 - fRX1) / (fRY2 - fRY1);\n    fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<Բ��ʵ������\n    fCenterY = (fRY1 + fRY2) / 2.0 * h;\n    fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<�뾶ʵ�ʳ���\n\n    origin1.s = v_uv.s - 0.5;\n    origin1.t = v_uv.t - 0.5;\n    z1 = fZoom ;\n\n    origin2.s = origin1.s ;\n    origin2.t = (origin1.t*fVAngleCos + z1*fVAngleSin);\n    z2 = z1*fVAngleCos - origin1.t*fVAngleSin;\n\n    origin3.s = origin2.s*fHAngleCos + z2*fHAngleSin ;\n    origin3.t = origin2.y;\n    z3 = z2*fHAngleCos - origin2.x*fHAngleSin;\n\n    dnew = sqrt(origin3.s*origin3.s + origin3.t*origin3.t) ;\n    float d = sqrt(origin3.s*origin3.s + origin3.t*origin3.t + z3*z3);\n    float theta = asin(dnew/d);\n    float tmp = theta / 1.5707963 * 0.5;\n    result.s = (tmp*origin3.s / dnew * fRadius * 2.0 + fCenterX)/w;\n    result.t = (tmp*origin3.t / dnew * fRadius * 2.0 + fCenterY)/h;\n\n    r = texture2D(texture, result.st).r; \n    g = texture2D(texture, result.st).g; \n    b = texture2D(texture, result.st).b; \n    if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n    {\n        r = 0.0; \n        g = 0.0; \n        b = 0.0; \n    }\n    gl_FragColor = vec4(r ,g ,b , 1.0);\n} \n",this.b3DPort=!1;break;case q.SR_DE_FISH_PANORAMA_CEILING_360:t=K,r="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1;\n    uniform float fRY2;\n    \n    void main()\n    {\n    \n        float r,g,b; \n    \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n            float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;  ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = v_uv.s;\n        origin.t = (bottomCut - topCut) * v_uv.t + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r;\n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0;\n        }\n        gl_FragColor = vec4(r, g, b, 1.0);\n    }\n",this.b3DPort=!1;break;case q.SR_DE_FISH_PANORAMA_CEILING_180:t=K,r="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1; \n    uniform float fRX2; \n    uniform float fRY1; \n    uniform float fRY2; \n    \n    void main()\n    {\n        float r,g,b;  \n    \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        vec4 newpp;  ///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\n        if (v_uv.t  <= 0.5)\n        {\n            newpp.s =  v_uv.s / 2.0 + 0.5;\n            newpp.t =  v_uv.t * 2.0;\n        }\n        else\n        {\n            newpp.s =  v_uv.s / 2.0;\n            newpp.t =  (v_uv.t - 0.5) * 2.0;\n        }\n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;     ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n            float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = newpp.s;\n        origin.t = (bottomCut - topCut) * newpp.t + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r;\n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0;\n            g = 0.0;\n            b = 0.0;\n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    }\n",this.b3DPort=!1;break;case q.SR_DE_FISH_PANORAMA_FLOOR_360:t=K,r="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1;\n    uniform float fRY2;\n    \n    void main()\n    {\n        float r,g,b;  \n    \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;    ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n            float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                   fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = 1.0 - v_uv.s;\n        origin.t = (bottomCut - topCut) * (1.0 - v_uv.t) + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r;\n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0; \n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    }\n",this.b3DPort=!1;break;case q.SR_DE_FISH_PANORAMA_FLOOR_180:t=K,r="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fAngle;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1;\n    uniform float fRY2;\n\n    void main()\n    {\n        float r,g,b;  \n        vec4 origin;\n        vec4 result;\n        float  thetabase;\n        float  d;\n    \n        vec4 newpp;  ///<180矫正pp纹理坐标的点对应360矫正newpp纹理坐标对应的点\n        if (v_uv.t  <= 0.5) \n        {\n            newpp.s =  v_uv.s / 2.0;\n            newpp.t =  v_uv.t * 2.0;\n        }\n        else\n        {\n            newpp.s =  v_uv.s / 2.0 + 0.5;\n            newpp.t =  (v_uv.t - 0.5) * 2.0;\n        }\n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;    ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n        float fMax = 0.0;\n        if(fRX2 > 1.0 || fRY2 > 1.0 || fRX1 < 0.0 || fRY1 < 0.0) ///<如果不是一个完整的圆\n        {\n             float tmp;\n            if(fRX1 < 0.0)\n            {\n                tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRX2 > 1.0)\n            {\n                tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY1 < 0.0)\n            {\n                tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n            if(fRY2 > 1.0)\n            {\n                tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n                if(tmp > fMax)\n                    fMax = tmp;\n            }\n        }\n        float topCut = fMax / fRadius;   ///<如果不是一个完整的圆,最终矫正图需要切掉上面无图像部分,否则无需切\n        float bottomCut = 0.8;           ///<为矫正效果,最终矫正图固定切掉下面一部分\n        origin.s = 1.0 - newpp.s;\n        origin.t = (bottomCut - topCut) * (1.0 - newpp.t) + topCut;\n        thetabase = 6.2831853 * origin.s + fAngle;\n        d = fRadius * (1.0 - origin.t);\n        result.s = (fCenterX - d*sin(thetabase)) / w;\n        result.t = (fCenterY + d*cos(thetabase)) / h;\n    \n        r = texture2D(texture, result.st).r; \n        g = texture2D(texture, result.st).g;\n        b = texture2D(texture, result.st).b;\n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0; \n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    } \n",this.b3DPort=!1;break;case q.SR_DE_FISH_PANORAMA_WALL:t=K,r="\n    precision highp float;\n    varying vec2 v_uv;\n    uniform sampler2D texture;\n    uniform float fRX1;\n    uniform float fRX2;\n    uniform float fRY1; \n    uniform float fRY2; \n    \n    void main()\n    {\n        float r,g,b;\n    \n        vec4 origin;\n        vec4 result;\n        float  d;\n        float  w;\n        float  h;\n        float  fCenterX;\n        float  fCenterY;\n        float  fRadius;\n        w = 1.0;\n        h = (fRX2 - fRX1) / (fRY2 - fRY1);\n        fCenterX = (fRX1 + fRX2) / 2.0 * w;     ///<圆心实际坐标\n        fCenterY = (fRY1 + fRY2) / 2.0 * h;\n        fRadius = (fRX2 - fRX1) / 2.0 * w;     ///<半径实际长度\n        float  defaultTopCut = 0.1;\n        float  defaultBottomCut = 0.9;\n        float  leftCut = 0.0;    ///<当图像中圆不完整时需要切掉无图像部分,即使图像完整,为了效果,也要切掉上下固定的一部分\n        float  rightCut = 1.0;\n        float  topCut = defaultTopCut;\n        float  bottomCut = defaultBottomCut;\n        if(fRX1 < 0.0)\n        {\n            float tmp;\n            tmp = -fRX1 * w; ///<左边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            leftCut = tmp;\n        }\n        if(fRX2 > 1.0)\n        {\n            float tmp;\n            tmp = (fRX2 - 1.0) * w; ///<右边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            rightCut = 1.0 - tmp;\n        }\n        if(fRY1 < 0.0)\n        {\n            float tmp;\n            tmp = -fRY1 * h; ///<上边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            if(tmp > defaultTopCut)\n                topCut = tmp;\n            else\n                topCut = defaultTopCut;\n        }\n        if(fRY2 > 1.0)\n        {\n            float tmp;\n            tmp = (fRY2 - 1.0) * h; ///<下边超出图像部分最大实际长度\n            tmp = tmp / (2.0*fRadius);\n            if(tmp > 1.0 - defaultBottomCut)\n                bottomCut = 1.0 - tmp;\n            else\n                bottomCut = defaultBottomCut;\n        }\n        origin.s = v_uv.s * (rightCut-leftCut) + leftCut;\n        origin.t = v_uv.t * (bottomCut-topCut) + topCut;\n        float tmpx = origin.s * 2.0 * fRadius + fCenterX - fRadius; ///<纹理坐标转化为原图上的实际坐标\n        float tmpy = origin.t * 2.0 * fRadius + fCenterY - fRadius;\n        d = sqrt(fRadius*fRadius - (tmpy-fCenterY)*(tmpy-fCenterY));\n        result.s = ((tmpx-fCenterX) * d / fRadius + fCenterX) / w;\n        result.t = tmpy / h;\n    \n        r = texture2D(texture, result.st).r; \n        g = texture2D(texture, result.st).g; \n        b = texture2D(texture, result.st).b; \n        if(result.s > 1.0 || result.t > 1.0 || result.s < 0.0 || result.t < 0.0)\n        {\n            r = 0.0; \n            g = 0.0; \n            b = 0.0; \n        }\n        gl_FragColor = vec4(r ,g ,b , 1.0);\n    }\n",this.b3DPort=!1;break;case q.SR_DE_FISH_SEMISPHERE:case q.SR_DE_FISH_CYLINDER_CEILING:case q.SR_DE_FISH_CYLINDER_FLOOR:case q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:e==q.SR_DE_FISH_SEMISPHERE&&(this.bCullBack=!0),t="\n    attribute vec4 xy;\n    attribute vec2 uv;\n    varying highp vec2 v_uv;\n    uniform int bCapture;\n\n    uniform mat4 matProj;\n    uniform mat4 matView;\n    void main(void) {\n        gl_Position = matProj * matView * xy;\n        v_uv = uv;\n        if(bCapture == 1)\n        {\n          v_uv.y = 1.0 - uv.y;\n        }\n    }\n",r="\n    varying highp vec2 v_uv;\n    uniform sampler2D texture;\n    void main(void) {\n        gl_FragColor = texture2D(texture, v_uv);\n    }\n",this.b3DPort=!0;break;default:return X}var n=this.CompileProgram(t,r);if(n<=0)return Z;this.videoShaderProgram=n;var a=null,o=null,s=1;if(0==this.b3DPort)a=new Float32Array([-1,-1,0,-1,1,0,1,1,0,1,-1,0]),o=new Float32Array([0,1,0,0,1,0,1,1]);else{var x={},l=!1;if(null==this.pFishParamManager)return z;for(var c=0;c<ie;++c)if(c!=i&&1==this.pFishParamManager.GetRenderParam(c,x)){l=!0;break}var f=0,h=1,u=0,d=1;if(1==l&&(f=x.fRXLeft,h=x.fRXRight,u=x.fRYTop,d=x.fRYBottom),e==q.SR_DE_FISH_SEMISPHERE)s=this._CreateSemiSphere(f,h,u,d),a=this.pSemiSpherePos,o=this.pSemiSphereTex;else if(e==q.SR_DE_FISH_CYLINDER_CEILING||e==q.SR_DE_FISH_CYLINDER_FLOOR)s=this._CreateCylinder(e,f,h,u,d,2,2),a=this.pCylinderPos,o=this.pCylinderTex;else{if(e!=q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL&&e!=q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL)return X;0==l?q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==e?(f=.05,h=.95,u=-.3,d=1.3):q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL==e&&(f=-.16,h=1.16,u=.005,d=.995):q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==e?(x.fRYTop>0||x.fRYBottom<1)&&(f=.05,h=.95,u=-.3,d=1.3):q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL==e&&(x.fRXLeft>0||x.fRXRight<1)&&(f=-.16,h=1.16,u=.005,d=.995),s=this._CreateArcSphere(e,f,h,u,d),a=this.pArcSpherePos,o=this.pArcSphereTex}if(1!=s)return s;var _={};if(1!=(s=this.pFishParamManager.GetFishParam(this.nFECPort,_)))return s;if(_.nFishParamType=1,_.fRXLeft=f,_.fRXRight=h,_.fRYTop=u,_.fRYBottom=d,this.pFishParamManager.SetFishParam(this.nFECPort,_),1!=s)return s}if(null==a||null==o)return X;var p=this.ctx.createBuffer();this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,p),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,a,this.ctx.STATIC_DRAW),this.vertexPosBuffer=p;var m=this.ctx.createBuffer();return this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,m),this.ctx.bufferData(this.ctx.ARRAY_BUFFER,o,this.ctx.STATIC_DRAW),this.texturePosBuffer=m,this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),0==this.b3DPort&&(a=null,o=null),1!=(s=this.InitCamera(e))?s:(this.enDisplayEffect=e,this.nFECPort)}},{key:"SR_DelSubPort",value:function(e){return null==this.ctx?z:(null!=this.pFishParamManager&&this.nFECPort==e&&this.pFishParamManager.FreeFECPort(this.nFECPort),this.enDisplayEffect=q.SR_DE_NULL,0!=this.videoShaderProgram&&null!=this.ctx&&(this.ctx.deleteProgram(this.videoShaderProgram),this.videoShaderProgram=0),0!=this.vertexPosBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.vertexPosBuffer),this.vertexPosBuffer=0),0!=this.texturePosBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.texturePosBuffer),this.texturePosBuffer=0),this.nMaxPointNum=0,this.pLinePosVertices=null,this.pLineClrVertices=null,0!=this.glLinePosBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.glLinePosBuffer),this.glLinePosBuffer=0),0!=this.glLineTexBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.glLineTexBuffer),this.glLineTexBuffer=0),this.nLineTriangleNum=0,0!=this.nLineShaderProgram&&null!=this.ctx&&(this.ctx.deleteProgram(this.nLineShaderProgram),this.nLineShaderProgram=0),this.pFillBlockPosVertices=null,this.pFillBlockClrVertices=null,this.nMaxFillBlockTriNum=0,0!=this.glBlockPosBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.glBlockPosBuffer),this.glBlockPosBuffer=0),0!=this.glBlockClrBuffer&&null!=this.ctx&&(this.ctx.deleteBuffer(this.glBlockClrBuffer),this.glBlockClrBuffer=0),0!=this.nBlockShaderProgram&&null!=this.ctx&&(this.ctx.deleteProgram(this.nBlockShaderProgram),this.nBlockShaderProgram=0),this.nDrawFontWidth=0,this.nDrawFontHeight=0,0!=this.nFontColorTexture&&null!=this.ctx&&(this.ctx.deleteTexture(this.nFontColorTexture),this.nFontColorTexture=0),this.pFontColorBuffer=0,0!=this.nFontShaderProgram&&null!=this.ctx&&(this.ctx.deleteProgram(this.nFontShaderProgram),this.nFontShaderProgram=0),0!=this.nCaptureRTTex&&(this.ctx.deleteTexture(this.nCaptureRTTex),this.nCaptureRTTex=0),0!=this.nCaptureFBO&&(this.ctx.deleteFramebuffer(this.nCaptureFBO),this.nCaptureFBO=0),0!=this.nCaptureDepthbuffer&&(this.ctx.deleteRenderbuffer(this.nCaptureDepthbuffer),this.nCaptureDepthbuffer=0),this.bCaptureResInit=!1,this.pSemiSpherePos=null,this.pSemiSphereTex=null,this.nSemiSpherePosNum=0,this.nSemiSpherePosSize=0,this.nSemiSphereTexSize=0,this.pCylinderPos=null,this.pCylinderTex=null,this.nCylinderPosNum=0,this.nCylinderPosSize=0,this.nCylinderTexSize=0,this.fCylinderHeight=0,this.fCylinderRadius=0,this.pArcSpherePos=null,this.pArcSphereTex=null,this.nArcSpherePosNum=0,this.nArcSpherePosSize=0,this.nArcSphereTexSize=0,this.b3DPort=!1,this.pCamera=null,this.fRotateX=0,this.fRotateY=0,this.fScale=0,this.pfuncCBIn=null,this.pfuncCBOut=null,this.pUserIn=null,this.pUserOut=null,this.ctx.disable(this.ctx.CULL_FACE),this.ctx.disable(this.ctx.DEPTH_TEST),1)}},{key:"SR_GetFishParam",value:function(e){return null==e?G:null==this.pFishParamManager?z:this.pFishParamManager.GetFishParam(this.nFECPort,e)}},{key:"SR_SetFishParam",value:function(e){return null==e?G:null==this.pFishParamManager?z:this.pFishParamManager.SetFishParam(this.nFECPort,e)}},{key:"SR_SetDisplayRect",value:function(e,t,r,i,n){if(null==this.ctx)return z;var a=e,o=t,s=e+r,x=t+i,l=null,c=null;switch(n){case 1:if(this.frameDisplayWidth>0&&this.frameDisplayHeight>0){if(this.fSrcUseLeft=a/this.frameDisplayWidth,this.fSrcUseLeft<0?this.fSrcUseLeft=0:this.fSrcUseLeft>1&&(this.fSrcUseLeft=1),this.fSrcUseTop=o/this.frameDisplayHeight,this.fSrcUseTop<0?this.fSrcUseTop=0:this.fSrcUseTop>1&&(this.fSrcUseTop=1),this.fSrcUseRight=s/this.frameDisplayWidth,this.fSrcUseRight<0?this.fSrcUseRight=0:this.fSrcUseRight>1&&(this.fSrcUseRight=1),this.fSrcUseBottom=x/this.frameDisplayHeight,this.fSrcUseBottom<0?this.fSrcUseBottom=0:this.fSrcUseBottom>1&&(this.fSrcUseBottom=1),this.fSrcUseLeft>=this.fSrcUseRight||this.fSrcUseTop>=this.fSrcUseBottom)return G;l=new Float32Array([this.fSrcUseLeft,this.fSrcUseBottom,this.fSrcUseLeft,this.fSrcUseTop,this.fSrcUseRight,this.fSrcUseTop,this.fSrcUseRight,this.fSrcUseBottom])}else l=new Float32Array([0,1,0,0,1,0,1,1]);this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer),this.ctx.bufferSubData(this.ctx.ARRAY_BUFFER,0,l),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),l=null;break;case 2:if(this.frameDisplayWidth>0&&this.frameDisplayHeight>0){if(this.fDstUseLeft=a/this.frameDisplayWidth,this.fDstUseLeft<0?this.fDstUseLeft=0:this.fDstUseLeft>1&&(this.fDstUseLeft=1),this.fDstUseTop=o/this.frameDisplayHeight,this.fDstUseTop<0?this.fDstUseTop=0:this.fDstUseTop>1&&(this.fDstUseTop=1),this.fDstUseRight=s/this.frameDisplayWidth,this.fDstUseRight<0?this.fDstUseRight=0:this.fDstUseRight>1&&(this.fDstUseRight=1),this.fDstUseBottom=x/this.frameDisplayHeight,this.fDstUseBottom<0?this.fDstUseBottom=0:this.fDstUseBottom>1&&(this.fDstUseBottom=1),this.fDstUseLeft>=this.fDstUseRight||this.fDstUseTop>=this.fDstUseBottom)return G;(c=new Float32Array(12))[0]=2*this.fDstUseLeft-1,c[1]=1-2*this.fDstUseBottom,c[2]=0,c[3]=2*this.fDstUseLeft-1,c[4]=1-2*this.fDstUseTop,c[5]=0,c[6]=2*this.fDstUseRight-1,c[7]=1-2*this.fDstUseTop,c[8]=0,c[9]=2*this.fDstUseRight-1,c[10]=1-2*this.fDstUseBottom,c[11]=0,this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer),this.ctx.bufferSubData(this.ctx.ARRAY_BUFFER,0,c),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null),c=null}break;default:return X}return 1}},{key:"SR_Destroy",value:function(){if(null==this.ctx)return z;this.frameDisplayWidth=0,this.frameDisplayHeight=0,this.pFrameData=null;for(var e=0;e<this.nTextureNum;e++)0!=this.nSurfaceTexture[e]&&null!=this.ctx&&(this.ctx.deleteTexture(this.nSurfaceTexture[e]),this.nSurfaceTexture[e]=0);return this.SR_DelSubPort(this.nFECPort),this.ctx.getExtension("WEBGL_lose_context").loseContext(),this.ctx=null,this.onlySupportedWebGL1=!1,this.bAntialias=!1,this.bRecreateTex=!0,this.pFishParamManager=null,1}},{key:"SR_SetCanvasSize",value:function(e,t){return this.canvas.width=e,this.canvas.height=t,1}},{key:"SR_GetCanvasSize",value:function(){return console.log("canvas width:"+this.canvas.width+",height:"+this.canvas.height),1}},{key:"SR_SetAntialias",value:function(e){return 1==this.onlySupportedWebGL1?X:(this.bAntialias!=e&&(this.bRecreateTex=!0,this.bAntialias=e),1)}},{key:"SR_SetPTZDisplayMode",value:function(e){return null==this.pFishParamManager?z:this.pFishParamManager.SetPTZDisplayMode(e)}},{key:"SR_SetFishParamManager",value:function(e){return null!=this.pFishParamManager?X:(this.pFishParamManager=e,1)}},{key:"_CreateSemiSphere",value:function(e,t,r,i){if(null!=this.pSemiSpherePos||null!=this.pSemiSphereTex)return z;this.pSemiSpherePos=new Float32Array(43200),this.pSemiSphereTex=new Float32Array(28800);for(var n=(t-e)/(i-r),a=(t-e)/2*1,o=6.2831852/60,s=.0392699075,x=0,l=0,c=0,f=0;f<60;++f)for(var h=0;h<40;++h){var u=f*o;0==f&&(x=u);var d=59==f?x:(f+1)*o,_=-h*s,p=-(h+1)*s,m=void 0,g=void 0;this.pSemiSpherePos[l]=-1*Math.cos(_)*Math.cos(u),this.pSemiSpherePos[l+1]=1*Math.sin(_),this.pSemiSpherePos[l+2]=-1*Math.cos(_)*Math.sin(u),g=.5-.5*(1+_/1.5707963)*Math.sin(u),m=.5-.5*(1+_/1.5707963)*Math.cos(u),this.pSemiSphereTex[c++]=(2*m*a+1*e)/1,this.pSemiSphereTex[c++]=(2*g*a+r*n)/n,l+=3,this.pSemiSpherePos[l]=-1*Math.cos(p)*Math.cos(u),this.pSemiSpherePos[l+1]=1*Math.sin(p),this.pSemiSpherePos[l+2]=-1*Math.cos(p)*Math.sin(u),g=.5-.5*(1+p/1.5707963)*Math.sin(u),m=.5-.5*(1+p/1.5707963)*Math.cos(u),this.pSemiSphereTex[c++]=(2*m*a+1*e)/1,this.pSemiSphereTex[c++]=(2*g*a+r*n)/n,l+=3,this.pSemiSpherePos[l]=-1*Math.cos(_)*Math.cos(d),this.pSemiSpherePos[l+1]=1*Math.sin(_),this.pSemiSpherePos[l+2]=-1*Math.cos(_)*Math.sin(d),g=.5-.5*(1+_/1.5707963)*Math.sin(d),m=.5-.5*(1+_/1.5707963)*Math.cos(d),this.pSemiSphereTex[c++]=(2*m*a+1*e)/1,this.pSemiSphereTex[c++]=(2*g*a+r*n)/n,l+=3,this.pSemiSpherePos[l]=-1*Math.cos(_)*Math.cos(d),this.pSemiSpherePos[l+1]=1*Math.sin(_),this.pSemiSpherePos[l+2]=-1*Math.cos(_)*Math.sin(d),g=.5-.5*(1+_/1.5707963)*Math.sin(d),m=.5-.5*(1+_/1.5707963)*Math.cos(d),this.pSemiSphereTex[c++]=(2*m*a+1*e)/1,this.pSemiSphereTex[c++]=(2*g*a+r*n)/n,l+=3,this.pSemiSpherePos[l]=-1*Math.cos(p)*Math.cos(u),this.pSemiSpherePos[l+1]=1*Math.sin(p),this.pSemiSpherePos[l+2]=-1*Math.cos(p)*Math.sin(u),g=.5-.5*(1+p/1.5707963)*Math.sin(u),m=.5-.5*(1+p/1.5707963)*Math.cos(u),this.pSemiSphereTex[c++]=(2*m*a+1*e)/1,this.pSemiSphereTex[c++]=(2*g*a+r*n)/n,l+=3,this.pSemiSpherePos[l]=-1*Math.cos(p)*Math.cos(d),this.pSemiSpherePos[l+1]=1*Math.sin(p),this.pSemiSpherePos[l+2]=-1*Math.cos(p)*Math.sin(d),g=.5-.5*(1+p/1.5707963)*Math.sin(d),m=.5-.5*(1+p/1.5707963)*Math.cos(d),this.pSemiSphereTex[c++]=(2*m*a+1*e)/1,this.pSemiSphereTex[c++]=(2*g*a+r*n)/n,l+=3}return this.nSemiSpherePosNum=l/3,this.nSemiSpherePosSize=3,this.nSemiSphereTexSize=2,1}},{key:"_CreateCylinder",value:function(e,t,r,i,n,a,o){if(null!=this.pCylinderPos||null!=this.pCylinderTex)return z;if(Math.abs(a-0)<oe)this.fCylinderHeight=2;else{if(a<.5||a>6)return G;this.fCylinderHeight=a}if(Math.abs(o-0)<oe)this.fCylinderRadius=e==q.SR_DE_FISH_CYLINDER_FLOOR||e==q.SR_DE_FISH_CYLINDER_CEILING?2:1;else{if(o<.5||o>4)return G;this.fCylinderRadius=o}if(this.pCylinderPos=new Float32Array(43200),this.pCylinderTex=new Float32Array(28800),null==this.pCylinderPos||null==this.pCylinderTex)return this.pCylinderPos=null,this.pCylinderTex=null,W;for(var s=(r-t)/(n-i),x=(r-t)/2*1,l=6.2831852/60,c=this.fCylinderHeight/40,f=0,h=0,u=0;u<60;++u)for(var d=0;d<40;++d){var _=u*l,p=(u+1)*l,m=void 0,g=void 0;this.pCylinderPos[f]=-this.fCylinderRadius*Math.sin(_),this.pCylinderPos[f+1]=this.fCylinderHeight/2-d*c,this.pCylinderPos[f+2]=-this.fCylinderRadius*Math.cos(_),q.SR_DE_FISH_CYLINDER_FLOOR==e||q.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*d)*Math.sin(_),g=.5+(.1+.01*d)*Math.cos(_)):(m=.5-(.5-.01*d)*Math.sin(_),g=.5+(.5-.01*d)*Math.cos(_)),this.pCylinderTex[h++]=(2*m*x+1*t)/1,this.pCylinderTex[h++]=(2*g*x+i*s)/s,f+=3,this.pCylinderPos[f]=-this.fCylinderRadius*Math.sin(_),this.pCylinderPos[f+1]=this.fCylinderHeight/2-(d+1)*c,this.pCylinderPos[f+2]=-this.fCylinderRadius*Math.cos(_),q.SR_DE_FISH_CYLINDER_FLOOR==e||q.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*(d+1))*Math.sin(_),g=.5+(.1+.01*(d+1))*Math.cos(_)):(m=.5-(.5-.01*(d+1))*Math.sin(_),g=.5+(.5-.01*(d+1))*Math.cos(_)),this.pCylinderTex[h++]=(2*m*x+1*t)/1,this.pCylinderTex[h++]=(2*g*x+i*s)/s,f+=3,this.pCylinderPos[f]=-this.fCylinderRadius*Math.sin(p),this.pCylinderPos[f+1]=this.fCylinderHeight/2-d*c,this.pCylinderPos[f+2]=-this.fCylinderRadius*Math.cos(p),q.SR_DE_FISH_CYLINDER_FLOOR==e||q.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*d)*Math.sin(p),g=.5+(.1+.01*d)*Math.cos(p)):(m=.5-(.5-.01*d)*Math.sin(p),g=.5+(.5-.01*d)*Math.cos(p)),this.pCylinderTex[h++]=(2*m*x+1*t)/1,this.pCylinderTex[h++]=(2*g*x+i*s)/s,f+=3,this.pCylinderPos[f]=-this.fCylinderRadius*Math.sin(p),this.pCylinderPos[f+1]=this.fCylinderHeight/2-d*c,this.pCylinderPos[f+2]=-this.fCylinderRadius*Math.cos(p),q.SR_DE_FISH_CYLINDER_FLOOR==e||q.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*d)*Math.sin(p),g=.5+(.1+.01*d)*Math.cos(p)):(m=.5-(.5-.01*d)*Math.sin(p),g=.5+(.5-.01*d)*Math.cos(p)),this.pCylinderTex[h++]=(2*m*x+1*t)/1,this.pCylinderTex[h++]=(2*g*x+i*s)/s,f+=3,this.pCylinderPos[f]=-this.fCylinderRadius*Math.sin(_),this.pCylinderPos[f+1]=this.fCylinderHeight/2-(d+1)*c,this.pCylinderPos[f+2]=-this.fCylinderRadius*Math.cos(_),q.SR_DE_FISH_CYLINDER_FLOOR==e||q.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*(d+1))*Math.sin(_),g=.5+(.1+.01*(d+1))*Math.cos(_)):(m=.5-(.5-.01*(d+1))*Math.sin(_),g=.5+(.5-.01*(d+1))*Math.cos(_)),this.pCylinderTex[h++]=(2*m*x+1*t)/1,this.pCylinderTex[h++]=(2*g*x+i*s)/s,f+=3,this.pCylinderPos[f]=-this.fCylinderRadius*Math.sin(p),this.pCylinderPos[f+1]=this.fCylinderHeight/2-(d+1)*c,this.pCylinderPos[f+2]=-this.fCylinderRadius*Math.cos(p),q.SR_DE_FISH_CYLINDER_FLOOR==e||q.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==e?(m=.5+(.1+.01*(d+1))*Math.sin(p),g=.5+(.1+.01*(d+1))*Math.cos(p)):(m=.5-(.5-.01*(d+1))*Math.sin(p),g=.5+(.5-.01*(d+1))*Math.cos(p)),this.pCylinderTex[h++]=(2*m*x+1*t)/1,this.pCylinderTex[h++]=(2*g*x+i*s)/s,f+=3}return this.nCylinderPosNum=f/3,this.nCylinderPosSize=3,this.nCylinderTexSize=2,1}},{key:"_CreateArcSphere",value:function(e,t,r,i,n){if(null!=this.pArcSpherePos||null!=this.pArcSphereTex)return z;if(e==q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL){if(i>0||n<1)return SR_ERR_PARAM}else{if(e!=q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL)return X;if(t>0||r<1)return SR_ERR_PARAM}if(this.fImageWidth=1,this.fImageHeight=(r-t)/(n-i),this.fTexCenterX=(t+r)/2*this.fImageWidth,this.fTexCenterY=(i+n)/2*this.fImageHeight,this.fTexRadius=(r-t)/2*this.fImageWidth,null==this.pArcSphereTex&&(this.pArcSphereTex=new Float32Array(14688),null==this.pArcSphereTex))return W;if(null==this.pArcSpherePos&&(this.pArcSpherePos=new Float32Array(22032),null==this.pArcSpherePos))return W;var a=new Float32Array(64);if(null==a)return W;var o=1;if(e==q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?o=this._ComputeLatitudeHorizontal(a,25,40,1):e==q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&(o=this._ComputeLatitudeVertical(a,25,40,1)),1!=o)return this.pArcSpherePos=null,this.pArcSphereTex=null,o;this.fFirstLatitude=a[12],this.fLastLatitude=a[51];var s=0,x=0,l=new Float32Array(5);if(null==l)return this.pArcSpherePos=null,this.pArcSphereTex=null,W;for(var c=se/24,f=-12;f<12;++f)for(var h=f<0?-f:f,u=f<0?h:h+1,d=f<0?64-2*(h-1)-2:64-2*h-2,_=0;_<d;++_,++u)e==q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-c*f,a[u],l):e==q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-c*f,a[u],l),this.pArcSpherePos[s]=l[0],this.pArcSpherePos[s+1]=l[1],this.pArcSpherePos[s+2]=l[2],this.pArcSphereTex[x++]=l[3],this.pArcSphereTex[x++]=l[4],s+=3,e==q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-c*(f+1),a[u],l):e==q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-c*(f+1),a[u],l),this.pArcSpherePos[s]=l[0],this.pArcSpherePos[s+1]=l[1],this.pArcSpherePos[s+2]=l[2],this.pArcSphereTex[x++]=l[3],this.pArcSphereTex[x++]=l[4],s+=3,f>=0&&0==_?e==q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-c*f,a[u-1],l):e==q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-c*f,a[u-1],l):e==q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-c*(f+1),a[u-1],l):e==q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-c*(f+1),a[u-1],l),this.pArcSpherePos[s]=l[0],this.pArcSpherePos[s+1]=l[1],this.pArcSpherePos[s+2]=l[2],this.pArcSphereTex[x++]=l[3],this.pArcSphereTex[x++]=l[4],s+=3,e==q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-c*(f+1),a[u],l):e==q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-c*(f+1),a[u],l),this.pArcSpherePos[s]=l[0],this.pArcSpherePos[s+1]=l[1],this.pArcSpherePos[s+2]=l[2],this.pArcSphereTex[x++]=l[3],this.pArcSphereTex[x++]=l[4],s+=3,e==q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-c*f,a[u],l):e==q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-c*f,a[u],l),this.pArcSpherePos[s]=l[0],this.pArcSpherePos[s+1]=l[1],this.pArcSpherePos[s+2]=l[2],this.pArcSphereTex[x++]=l[3],this.pArcSphereTex[x++]=l[4],s+=3,f<0&&_==d-1?e==q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-c*(f+1),a[u+1],l):e==q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-c*(f+1),a[u+1],l):e==q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?this._ComputeVertexAndTexturePosHorizontal(1,1.5707963-c*f,a[u+1],l):e==q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL&&this._ComputeVertexAndTexturePosVertical(1,1.5707963-c*f,a[u+1],l),this.pArcSpherePos[s]=l[0],this.pArcSpherePos[s+1]=l[1],this.pArcSpherePos[s+2]=l[2],this.pArcSphereTex[x++]=l[3],this.pArcSphereTex[x++]=l[4],s+=3;return this.nArcSpherePosNum=s/3,this.nArcSpherePosSize=3,this.nArcSphereTexSize=2,a=null,l=null,1}},{key:"_ComputeIntersectionOfPlaneAndLongtitude",value:function(e,t,r){if(null==e)return G;var i,n=e[1]*r,a=e[2]*r*Math.sin(t),o=-e[3],s=0;if(e[1]>0){var x=n*n*o*o-(n*n+a*a)*(o*o-a*a);s=(-n*o-Math.sqrt(x))/(n*n+a*a),x=a*a*o*o-(n*n+a*a)*(o*o-n*n)}if(e[1]<0){var l=n*n*o*o-(n*n+a*a)*(o*o-a*a);s=(-n*o+Math.sqrt(l))/(n*n+a*a),l=a*a*o*o-(n*n+a*a)*(o*o-n*n)}return i=-r*s,Math.asin(i/r)}},{key:"_ComputeLatitudeHorizontal",value:function(e,t,r,i){if(null==e)return G;var n=0,a=(this.fTexCenterY,se/(t-1)),o=se*this.fTexCenterY/(2*this.fTexRadius),s=Math.asin(this.fTexCenterY/this.fTexRadius),x=Math.atan(Math.cos(o)/(Math.sin(o)-Math.sin(s))),l=new Float32Array(4);l[0]=0,l[1]=Math.sin(x),l[2]=Math.cos(x),l[3]=-i*Math.sin(x)*Math.sin(s),e[n++]=o;for(var c=1;c<=(t-3)/2;++c){var f=this._ComputeIntersectionOfPlaneAndLongtitude(l,1.5707963-a*c,i);e[n++]=f}for(var h=-Math.asin((this.fImageHeight-this.fTexCenterY)/this.fTexRadius),u=s,d=(u-h)/(r-1),_=0;_<r;++_)e[n++]=u-_*d;var p=h,m=se*(this.fTexCenterY-this.fImageHeight)/(2*this.fTexRadius);x=Math.atan(Math.cos(m)/(Math.sin(p)-Math.sin(m)));var g=new Float32Array(4);g[0]=0,g[1]=-Math.sin(x),g[2]=Math.cos(x),g[3]=i*Math.sin(x)*Math.sin(p);for(var y=1;y<=(t-3)/2;++y){var b=this._ComputeIntersectionOfPlaneAndLongtitude(g,a*y,i);e[n++]=b}return e[n++]=m,l=null,g=null,1}},{key:"_ComputeVertexAndTexturePosHorizontal",value:function(e,t,r,i){if(null==i)return G;i[2]=-e*Math.cos(r)*Math.sin(t),i[0]=e*Math.cos(r)*Math.cos(t),i[1]=e*Math.sin(r);var n,a=-Math.asin(-i[2]/e)/se;n=r>=0?Math.acos(i[0]/Math.sqrt(i[0]*i[0]+i[1]*i[1])):6.2831852-Math.acos(i[0]/Math.sqrt(i[0]*i[0]+i[1]*i[1]));var o=this.fTexCenterX-this.fTexRadius,s=this.fTexRadius-this.fTexCenterY;return i[3]=(Math.cos(n)*this.fTexRadius*(1+2*a)+this.fTexRadius+o)/this.fImageWidth,i[4]=(Math.sin(n)*this.fTexRadius*(-1-2*a)+this.fTexRadius-s)/this.fImageHeight,1}},{key:"_ComputeLatitudeVertical",value:function(e,t,r,i){if(null==e)return SR_ERR_PARAM;var n=0,a=se/(t-1),o=se*this.fTexCenterX/(2*this.fTexRadius),s=Math.asin(this.fTexCenterX/this.fTexRadius),x=Math.atan(Math.cos(o)/(Math.sin(o)-Math.sin(s))),l=new Float32Array(4);l[0]=0,l[1]=Math.sin(x),l[2]=Math.cos(x),l[3]=-i*Math.sin(x)*Math.sin(s),e[n++]=o;for(var c=1;c<=(t-3)/2;++c){var f=this._ComputeIntersectionOfPlaneAndLongtitude(l,1.5707963-a*c,i);e[n++]=f}for(var h=-Math.asin((this.fImageWidth-this.fTexCenterX)/this.fTexRadius),u=s,d=(u-h)/(r-1),_=0;_<r;++_)e[n++]=u-_*d;var p=h,m=se*(this.fTexCenterX-this.fImageWidth)/(2*this.fTexRadius);x=Math.atan(Math.cos(m)/(Math.sin(p)-Math.sin(m)));var g=new Float32Array(4);g[0]=0,g[1]=-Math.sin(x),g[2]=Math.cos(x),g[3]=i*Math.sin(x)*Math.sin(p);for(var y=1;y<=(t-3)/2;++y){var b=this._ComputeIntersectionOfPlaneAndLongtitude(g,a*y,i);e[n++]=b}return e[n++]=m,l=null,g=null,1}},{key:"_ComputeVertexAndTexturePosVertical",value:function(e,t,r,i){if(null==i)return SR_ERR_PARAM;i[2]=-e*Math.cos(r)*Math.sin(t),i[1]=e*Math.cos(r)*Math.cos(t),i[0]=-e*Math.sin(r);var n,a=-Math.asin(-i[2]/e)/se;n=t<=1.5707963?Math.acos(i[0]/Math.sqrt(i[0]*i[0]+i[1]*i[1])):6.2831852-Math.acos(i[0]/Math.sqrt(i[0]*i[0]+i[1]*i[1]));var o=this.fTexCenterX-this.fTexRadius,s=this.fTexRadius-this.fTexCenterY;return i[3]=(Math.cos(n)*this.fTexRadius*(1+2*a)+this.fTexRadius+o)/this.fImageWidth,i[4]=(Math.sin(n)*this.fTexRadius*(-1-2*a)+this.fTexRadius-s)/this.fImageHeight,1}},{key:"InitCamera",value:function(e){if(null!=this.pCamera)return SR_ERR_CALL_ORDER;switch(e){case q.SR_DE_NULL:case q.SR_DE_FISH_ORIGINAL:case q.SR_DE_FISH_PTZ_CEILING:case q.SR_DE_FISH_PTZ_FLOOR:case q.SR_DE_FISH_PTZ_WALL:case q.SR_DE_FISH_PANORAMA_CEILING_360:case q.SR_DE_FISH_PANORAMA_CEILING_180:case q.SR_DE_FISH_PANORAMA_FLOOR_360:case q.SR_DE_FISH_PANORAMA_FLOOR_180:case q.SR_DE_FISH_PANORAMA_WALL:return 1;case q.SR_DE_FISH_SEMISPHERE:if(this.pCamera=new ge,null==this.pCamera)return W;this.pCamera.SetFov(ce),this.pCamera.SetNear(xe),this.pCamera.SetFar(le),this.fRotateX=1.57,this.pCamera.SetPitch(3.14-this.fRotateX),this.fScale=3,this.pCamera.SetScale(this.fScale);break;case q.SR_DE_FISH_CYLINDER_CEILING:case q.SR_DE_FISH_CYLINDER_FLOOR:if(this.pCamera=new ge,null==this.pCamera)return W;this.pCamera.SetFov(ce),this.pCamera.SetNear(xe),this.pCamera.SetFar(le),this.fRotateX=.785,this.pCamera.SetPitch(-this.fRotateX),this.fScale=6,this.pCamera.SetScale(this.fScale);break;case q.SR_DE_FISH_CYLINDER_SPLIT_CEILING:case q.SR_DE_FISH_CYLINDER_SPLIT_FLOOR:if(this.pCamera=new ge,null==this.pCamera)return W;this.pCamera.SetOrtho(!0),this.pCamera.SetNear(xe),this.pCamera.SetFar(le),this.fScale=3,this.pCamera.SetScale(this.fScale);break;case q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:if(this.pCamera=new ge,null==this.pCamera)return W;this.pCamera.SetFov(ce),this.pCamera.SetNear(xe),this.pCamera.SetFar(le),this.fScale=2,this.pCamera.SetScale(this.fScale),q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==e?(this.fRotateLimitX=he,this.fRotateLimitY=ue):(this.fRotateLimitX=de,this.fRotateLimitY=_e);break;default:return X}return 1}},{key:"SR_SetViewParam",value:function(e,t){if(!this.b3DPort)return X;switch(e){case 1:if((this.enDisplayEffect==q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL)&&(t>this.fRotateLimitX||t<-this.fRotateLimitX))return G;this.fRotateX=t;break;case 2:if((this.enDisplayEffect==q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL)&&(t>this.fRotateLimitY||t<-this.fRotateLimitY))return G;this.fRotateY=t;break;case 3:if(this.enDisplayEffect==q.SR_DE_FISH_SEMISPHERE){if(t<-.8||t>900)return G}else if(this.enDisplayEffect==q.SR_DE_FISH_CYLINDER_FLOOR||this.enDisplayEffect==q.SR_DE_FISH_CYLINDER_CEILING){if(t<0||t>900)return G}else if(this.enDisplayEffect==q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL){if(t<-.3||t>5)return G;this._ComputeRotateLimits()}this.fScale=t;break;default:return X}return 1}},{key:"SR_GetViewParam",value:function(e,t){if(!this.b3DPort)return z;var r=0;switch(e){case 1:r=this.fRotateX;break;case 2:r=this.fRotateY;break;case 3:r=this.fScale;break;default:return X}return t.fValue=r,1}},{key:"SR_SetCallBack",value:function(e,t,r){switch(r){case 0:this.pfuncCBIn=e,this.pUserIn=t;break;case 1:this.pfuncCBOut=e,this.pUserOut=t;break;default:return X}return 1}},{key:"SR_SetRenderState",value:function(e,t){switch(e){case 1:if(this.b3DPort)return X;break;case 2:if(!this.b3DPort)return X;Math.abs(t-0)<oe?this.bCullBack=!1:this.bCullBack=!0;break;default:return X}return 1}},{key:"SR_SetPTZColor",value:function(e,t){return null==this.pFishParamManager?z:this.pFishParamManager.SetPTZColor(e,t)}},{key:"SR_GetPTZColor",value:function(e,t){return null==this.pFishParamManager?z:this.pFishParamManager.GetPTZColor(e,t)}},{key:"SR_SetPTZPort",value:function(e){return null==this.pFishParamManager?z:this.pFishParamManager.SetPTZPort(e)}},{key:"SR_GetPTZPort",value:function(e,t,r){return null==this.pFishParamManager?z:null==r?G:this.pFishParamManager.GetPTZPort(e,t,r)}},{key:"SR_GetCaptureSize",value:function(e){if(null==e)return G;if(null==this.ctx)return z;if(null==e.nWidth||null==e.nWidth||null==e.nHeight||null==e.nHeight)return G;var t=0,r=0;if(0==e.nWidth&&0==e.nHeight)switch(this.enDisplayEffect){case q.SR_DE_FISH_PTZ_WALL:case q.SR_DE_FISH_PTZ_CEILING:case q.SR_DE_FISH_PTZ_FLOOR:t=Math.round(5*this.frameDisplayHeight/8),r=Math.round(3*t/4);break;case q.SR_DE_NULL:t=Math.round((this.fSrcUseRight-this.fSrcUseLeft)*this.frameDisplayWidth),r=Math.round((this.fSrcUseBottom-this.fSrcUseTop)*this.frameDisplayHeight);break;case q.SR_DE_FISH_ORIGINAL:case q.SR_DE_FISH_SEMISPHERE:case q.SR_DE_FISH_CYLINDER_CEILING:case q.SR_DE_FISH_CYLINDER_FLOOR:case q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:t=Math.round(this.frameDisplayWidth),r=Math.round(this.frameDisplayHeight);break;case q.SR_DE_FISH_PANORAMA_FLOOR_360:case q.SR_DE_FISH_PANORAMA_CEILING_360:this.frameDisplayHeight>=2048?(t=6144,r=864):this.frameDisplayHeight>=1536&&2048>this.frameDisplayHeight?(t=4096,r=576):(t=Math.round(3.14*this.frameDisplayHeight/1.6),r=Math.round(9*this.frameDisplayWidth/16),t=Math.round(2*t),r=Math.round(r/2));break;case q.SR_DE_FISH_PANORAMA_FLOOR_180:case q.SR_DE_FISH_PANORAMA_CEILING_180:this.frameDisplayHeight>=3072?(t=4096,r=2304):this.frameDisplayHeight>=2048&&3072>this.frameDisplayHeight?(t=3072,r=1728):this.frameDisplayHeight>=1536&&2048>this.frameDisplayHeight?(t=2048,r=1152):(t=Math.round(3.14*this.frameDisplayHeight/1.6),r=Math.round(9*t/16));break;case q.SR_DE_FISH_PANORAMA_WALL:t=Math.round(this.frameDisplayHeight),r=Math.round(9*t/16);break;default:return G}else t=Math.round(e.nWidth),r=Math.round(e.nHeight);return t<16||r<16?G:(this.nCaptureWidth=4*Math.round(t/4),this.nCaptureHeight=Math.round(r),e.nWidth=this.nCaptureWidth,e.nHeight=this.nCaptureHeight,e.nBufferLen=this.nCaptureWidth*this.nCaptureHeight*4,1)}},{key:"SR_CaptureScreen",value:function(e){var t=1;if(1!=(t=this._BeginCapture()))return t;if(0==this.videoShaderProgram||0==this.vertexPosBuffer||0==this.texturePosBuffer)return z;this.ctx.useProgram(this.videoShaderProgram),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.vertexPosBuffer);var r=this.ctx.getAttribLocation(this.videoShaderProgram,"xy");if(r<0)return Z;this.ctx.vertexAttribPointer(r,3,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(r),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,this.texturePosBuffer);var i=this.ctx.getAttribLocation(this.videoShaderProgram,"uv");if(i<0)return Z;this.ctx.vertexAttribPointer(i,2,this.ctx.FLOAT,!1,0,0),this.ctx.enableVertexAttribArray(i),this.ctx.bindBuffer(this.ctx.ARRAY_BUFFER,null);var n=this.enDisplayEffect,a=this.ctx.getUniformLocation(this.videoShaderProgram,"bCapture");if(a<=0)return Z;switch(this.ctx.uniform1i(a,1),n){case q.SR_DE_NULL:break;case q.SR_DE_FISH_ORIGINAL:case q.SR_DE_FISH_PTZ_CEILING:case q.SR_DE_FISH_PTZ_FLOOR:case q.SR_DE_FISH_PTZ_WALL:case q.SR_DE_FISH_PANORAMA_CEILING_360:case q.SR_DE_FISH_PANORAMA_CEILING_180:case q.SR_DE_FISH_PANORAMA_FLOOR_360:case q.SR_DE_FISH_PANORAMA_FLOOR_180:case q.SR_DE_FISH_PANORAMA_WALL:if(null==this.pFishParamManager)return z;var o={};if(1!=(t=this.pFishParamManager.GetRenderParam(this.nFECPort,o)))return t;if(q.SR_DE_FISH_ORIGINAL==n){var s=this.ctx.getUniformLocation(this.videoShaderProgram,"bBlack");if(s<=0)return Z;this.ctx.uniform1i(s,o.bBlack);var x=this.ctx.getUniformLocation(this.videoShaderProgram,"bCut");if(x<=0)return Z;this.ctx.uniform1i(x,o.bCut)}if(q.SR_DE_FISH_PTZ_CEILING==n||q.SR_DE_FISH_PTZ_FLOOR==n||q.SR_DE_FISH_PTZ_WALL==n){var l=this.ctx.getUniformLocation(this.videoShaderProgram,"fHAngleCos");if(l<=0)return Z;this.ctx.uniform1f(l,o.fCosH);var c=this.ctx.getUniformLocation(this.videoShaderProgram,"fHAngleSin");if(c<=0)return Z;this.ctx.uniform1f(c,o.fSinH);var f=this.ctx.getUniformLocation(this.videoShaderProgram,"fVAngleCos");if(f<=0)return Z;this.ctx.uniform1f(f,o.fCosV);var h=this.ctx.getUniformLocation(this.videoShaderProgram,"fVAngleSin");if(h<=0)return Z;this.ctx.uniform1f(h,o.fSinV);var u=this.ctx.getUniformLocation(this.videoShaderProgram,"fZoom");if(u<=0)return Z;this.ctx.uniform1f(u,o.fZoom)}if(q.SR_DE_FISH_PANORAMA_CEILING_360==n||q.SR_DE_FISH_PANORAMA_CEILING_180==n||q.SR_DE_FISH_PANORAMA_FLOOR_360==n||q.SR_DE_FISH_PANORAMA_FLOOR_180==n){var d=this.ctx.getUniformLocation(this.videoShaderProgram,"fAngle");if(d<=0)return Z;this.ctx.uniform1f(d,o.fAngle)}var _=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX1");if(_<=0)return Z;this.ctx.uniform1f(_,o.fRXLeft);var p=this.ctx.getUniformLocation(this.videoShaderProgram,"fRX2");if(p<=0)return Z;this.ctx.uniform1f(p,o.fRXRight);var m=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY1");if(m<=0)return Z;this.ctx.uniform1f(m,o.fRYTop);var g=this.ctx.getUniformLocation(this.videoShaderProgram,"fRY2");if(g<=0)return Z;this.ctx.uniform1f(g,o.fRYBottom);break;case q.SR_DE_FISH_SEMISPHERE:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(3.14-this.fRotateX),this.pCamera.SetYaw(-this.fRotateY),this.pCamera.UpdateCamera(this.canvas.width,this.canvas.height);var y=this.pCamera.GetView(),b=this.pCamera.GetProj(),v=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(v<=0)return Z;this.ctx.uniformMatrix4fv(v,!1,y);var P=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(P<=0)return Z;this.ctx.uniformMatrix4fv(P,!1,b);break;case q.SR_DE_FISH_CYLINDER_CEILING:case q.SR_DE_FISH_CYLINDER_FLOOR:case q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:this.pCamera.SetScale(this.fScale),this.pCamera.SetPitch(-this.fRotateX),this.pCamera.SetYaw(-this.fRotateY),this.pCamera.UpdateCamera(this.canvas.width,this.canvas.height);var S=this.pCamera.GetView(),R=this.pCamera.GetProj(),C=this.ctx.getUniformLocation(this.videoShaderProgram,"matView");if(C<=0)return Z;this.ctx.uniformMatrix4fv(C,!1,S);var E=this.ctx.getUniformLocation(this.videoShaderProgram,"matProj");if(E<=0)return Z;this.ctx.uniformMatrix4fv(E,!1,R);break;default:return X}if(this.nCaptureWidth<=0||this.nCaptureHeight<=0)return j;if(this.ctx.viewport(0,0,this.nCaptureWidth,this.nCaptureHeight),this.ctx.clearColor(0,0,0,1),this.ctx.clear(this.ctx.COLOR_BUFFER_BIT|this.ctx.DEPTH_BUFFER_BIT),this.b3DPort&&(this.ctx.enable(this.ctx.DEPTH_TEST),this.ctx.depthFunc(this.ctx.LESS),this.ctx.depthMask(!0),1==this.bCullBack?this.ctx.enable(this.ctx.CULL_FACE):this.ctx.disable(this.ctx.CULL_FACE)),this.enPixelFormat==$?this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]):(1==this.enPixelFormat||3==this.enPixelFormat)&&(this.ctx.activeTexture(this.ctx.TEXTURE0),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[0]),this.ctx.activeTexture(this.ctx.TEXTURE1),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[1]),this.ctx.activeTexture(this.ctx.TEXTURE2),this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nSurfaceTexture[2])),this.onlySupportedWebGL1||this.ctx.clearBufferfi(this.ctx.DEPTH_STENCIL,0,1,0),0==this.b3DPort)this.ctx.drawArrays(this.ctx.TRIANGLE_FAN,0,4);else if(this.enDisplayEffect==q.SR_DE_FISH_SEMISPHERE){if(this.nSemiSpherePosNum<=0)return z;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nSemiSpherePosNum)}else if(this.enDisplayEffect==q.SR_DE_FISH_CYLINDER_CEILING||this.enDisplayEffect==q.SR_DE_FISH_CYLINDER_FLOOR){if(this.nCylinderPosNum<=0)return z;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nCylinderPosNum)}else if(this.enDisplayEffect==q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL){if(this.nArcSpherePosNum<=0)return z;this.ctx.drawArrays(this.ctx.TRIANGLES,0,this.nArcSpherePosNum)}return this.ctx.useProgram(null),null!=this.pfuncCBIn&&this.pfuncCBIn(this.pUserIn),null!=this.pfuncCBOut&&this.pfuncCBOut(this.pUserOut),1!=(t=this._EndCapture(e))?t:1}},{key:"SR_SetImagePostProcess",value:function(e,t){if(null==this.ctx)return z;if(5==e||2==e){if(0-t>oe||t-1>oe)return G}else if((1==e||3==e||4==e)&&(-1-t>oe||t-1>oe))return G;switch(e){case 1:this.fBrightness=t;break;case 2:this.fHue=t;break;case 3:this.fSaturation=t;break;case 4:this.fContrast=t;break;case 5:this.fSharpness=t;break;default:return X}return Math.abs(this.fBrightness-0)<oe&&Math.abs(this.fHue-0)<oe&&Math.abs(this.fSaturation-0)<oe&&Math.abs(this.fContrast-0)<oe&&Math.abs(this.fSharpness-0)<oe?this.nPostProc=0:this.nPostProc=1,1}},{key:"_BeginCapture",value:function(){var e=1;return 0==this.bCaptureResInit&&1!=(e=this._InitRenderTarget(this.nCaptureWidth,this.nCaptureHeight,!1,!0))||1!=(e=this._Resize(this.nCaptureWidth,this.nCaptureHeight,!1,!0))?e:(this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,this.nCaptureFBO),this.bIsCapturing=!0,1)}},{key:"_InitRenderTarget",value:function(e,t,r,i){if(0!=this.nCaptureRTTex||0!=this.nCaptureFBO)return z;if(e<=0||t<=0)return G;if(this.nCaptureRTTex=this.ctx.createTexture(),this.nCaptureRTTex<=0)return Z;if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nCaptureRTTex),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,e,t,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,null),0==this.nCaptureFBO&&(this.nCaptureFBO=this.ctx.createFramebuffer(),this.nCaptureFBO<=0))return Z;if(this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,this.nCaptureFBO),this.ctx.framebufferTexture2D(this.ctx.FRAMEBUFFER,this.ctx.COLOR_ATTACHMENT0,this.ctx.TEXTURE_2D,this.nCaptureRTTex,0),1==i&&0==this.nCaptureDepthbuffer){if(this.nCaptureDepthbuffer=this.ctx.createRenderbuffer(),this.nCaptureDepthbuffer<=0)return Z;this.ctx.bindRenderbuffer(this.ctx.RENDERBUFFER,this.nCaptureDepthbuffer),this.ctx.renderbufferStorage(this.ctx.RENDERBUFFER,this.ctx.DEPTH_COMPONENT16,e,t),this.ctx.framebufferRenderbuffer(this.ctx.FRAMEBUFFER,this.ctx.DEPTH_ATTACHMENT,this.ctx.RENDERBUFFER,this.nCaptureDepthbuffer)}return this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),this.nCaptureFBOWidth=e,this.nCaptureFBOHeight=t,this.bCaptureResInit=!0,1}},{key:"_Resize",value:function(e,t,r,i){if(this.nCaptureFBOWidth!=e||this.nCaptureFBOHeight!=t){if(this.nCaptureFBOWidth=e,this.nCaptureFBOHeight=t,0!=this.nCaptureRTTex&&(this.ctx.deleteTexture(this.nCaptureRTTex),this.nCaptureRTTex=0),0!=this.nCaptureDepthbuffer&&(this.ctx.deleteRenderbuffer(this.nCaptureDepthbuffer),this.nCaptureDepthbuffer=0),0==this.nCaptureRTTex&&(this.nCaptureRTTex=this.ctx.createTexture(),this.nCaptureRTTex<=0))return Z;if(this.ctx.bindTexture(this.ctx.TEXTURE_2D,this.nCaptureRTTex),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MAG_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_MIN_FILTER,this.ctx.LINEAR),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_S,this.ctx.CLAMP_TO_EDGE),this.ctx.texParameteri(this.ctx.TEXTURE_2D,this.ctx.TEXTURE_WRAP_T,this.ctx.CLAMP_TO_EDGE),this.ctx.texImage2D(this.ctx.TEXTURE_2D,0,this.ctx.RGBA,this.nCaptureFBOWidth,this.nCaptureFBOHeight,0,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,null),this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,this.nCaptureFBO),this.ctx.framebufferTexture2D(this.ctx.FRAMEBUFFER,this.ctx.COLOR_ATTACHMENT0,this.ctx.TEXTURE_2D,this.nCaptureRTTex,0),1==i&&0==this.nCaptureDepthbuffer){if(this.nCaptureDepthbuffer=this.ctx.createRenderbuffer(),this.nCaptureDepthbuffer<=0)return Z;this.ctx.bindRenderbuffer(this.ctx.RENDERBUFFER,this.nCaptureDepthbuffer),this.ctx.renderbufferStorage(this.ctx.RENDERBUFFER,this.ctx.DEPTH_COMPONENT16,e,t),this.ctx.framebufferRenderbuffer(this.ctx.FRAMEBUFFER,this.ctx.DEPTH_ATTACHMENT,this.ctx.RENDERBUFFER,this.nCaptureDepthbuffer)}this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null)}return 1}},{key:"_EndCapture",value:function(e){return null==this.ctx?z:null==e.pBuffer||null==e.pBuffer?G:(this.ctx.readPixels(0,0,this.nCaptureWidth,this.nCaptureHeight,this.ctx.RGBA,this.ctx.UNSIGNED_BYTE,e.pBuffer),this.ctx.bindFramebuffer(this.ctx.FRAMEBUFFER,null),this.bIsCapturing=!1,1)}},{key:"_ResizeFrameData",value:function(e,t,r,i){if(0==t%8&&null==i)return this.frameDisplayWidth=Math.round(t),this.frameDisplayHeight=Math.round(r),this.pFrameData=e,1;if(null!=i&&0==i.nCropBottom&&0==i.nCropLeft&&0==i.nCropRight&&0==i.nCropTop&&0==t%8)return this.frameDisplayWidth=Math.round(t),this.frameDisplayHeight=Math.round(r),this.pFrameData=e,1;if((null==this.pFrameData||this.frameDisplayWidth!=t/8*8||this.frameDisplayHeight!=r)&&(this.frameDisplayWidth=8*Math.round(t/8),this.frameDisplayHeight=Math.round(r),this.pFrameData=null,this.pFrameData=new Uint8Array(this.frameDisplayWidth*this.frameDisplayHeight*3/2),null==this.pFrameData))return W;var n=0,a=0,o=Math.round(i.nCodeWidth),s=Math.round(i.nCodeHeight),x=0;if(1==this.enPixelFormat||3==this.enPixelFormat){var l,c,f;null!=i?(n=Math.round(i.nCropLeft),a=Math.round(i.nCropTop),l=e.subarray(n*o+a,o*s),c=e.subarray(o*s+a*o/4+n/2,o*s*5/4),f=e.subarray(o*s*5/4+a*o/4+n/2,o*s*3/2),x=o):(l=e.subarray(0,t*r),c=e.subarray(t*r,t*r*5/4),f=e.subarray(t*r*5/4,t*r*3/2),x=this.frameDisplayWidth);for(var h=null,u=0;u<this.frameDisplayHeight;++u){var d=Math.round(u*x),_=Math.round(u*x+this.frameDisplayWidth);h=l.slice(d,_);var p=Math.round(u*this.frameDisplayWidth);this.pFrameData.set(h,p)}for(var m=0;m<this.frameDisplayHeight/2;++m){var g=Math.round(m*x/2),y=Math.round(m*x/2+this.frameDisplayWidth/2);h=c.slice(g,y);var b=Math.round(this.frameDisplayWidth*this.frameDisplayHeight+m*this.frameDisplayWidth/2);this.pFrameData.set(h,b)}for(var v=0;v<this.frameDisplayHeight/2;++v){var P=Math.round(v*x/2),S=Math.round(v*x/2+this.frameDisplayWidth/2);h=f.slice(P,S);var R=Math.round(this.frameDisplayWidth*this.frameDisplayHeight*5/4+v*this.frameDisplayWidth/2);this.pFrameData.set(h,R)}l=null,c=null,f=null,h=null}else if(2==this.enPixelFormat){var C,E,T;null!=i?(n=Math.round(i.nCropLeft),a=Math.round(i.nCropTop),C=e.subarray(a*o+n,o*s),E=e.subarray(o*s+a*o/4+n/2,o*s*3/2),x=Math.round(i.nCodeWidth)):(C=e.subarray(0,o*s),E=e.subarray(o*s,o*s*3/2),x=this.frameDisplayWidth);for(var F=0;F<this.frameDisplayHeight;++F){var D=Math.round(F*x),M=Math.round(F*x+this.frameDisplayWidth);T=C.slice(D,M);var I=Math.round(F*this.frameDisplayWidth);this.pFrameData.set(T,I)}for(var w=0;w<this.frameDisplayHeight/2;++w){var A=Math.round(w*x),k=Math.round(w*x+this.frameDisplayWidth);T=E.slice(A,k);var L=Math.round(this.frameDisplayWidth*this.frameDisplayHeight+w*this.frameDisplayWidth);this.pFrameData.set(T,L)}C=null,E=null,T=null}return 1}},{key:"_SetImagePostProcess",value:function(){var e=this.ctx.getUniformLocation(this.videoShaderProgram,"fBrightness");if(e<=0)return Z;this.ctx.uniform1f(e,this.fBrightness);var t=this.ctx.getUniformLocation(this.videoShaderProgram,"fHue");if(t<=0)return Z;this.ctx.uniform1f(t,this.fHue);var r=this.ctx.getUniformLocation(this.videoShaderProgram,"fSaturation");if(r<=0)return Z;this.ctx.uniform1f(r,this.fSaturation);var i=this.ctx.getUniformLocation(this.videoShaderProgram,"fContrast");if(i<=0)return Z;this.ctx.uniform1f(i,this.fContrast);var n=this.ctx.getUniformLocation(this.videoShaderProgram,"fSharpness");if(n<=0)return Z;this.ctx.uniform1f(n,this.fSharpness);var a=this.ctx.getUniformLocation(this.videoShaderProgram,"fWndWidth");if(a<=0)return Z;this.ctx.uniform1f(a,this.frameDisplayWidth);var o=this.ctx.getUniformLocation(this.videoShaderProgram,"fWndHeight");return o<=0?Z:(this.ctx.uniform1f(o,this.frameDisplayHeight),1)}},{key:"_ComputeRotateLimits",value:function(){if(this.enDisplayEffect==q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL||this.enDisplayEffect==q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL){var e,t;if(this.enDisplayEffect==q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL?(e=he,t=ue):(e=de,t=_e),0==this.canvas.width||0==this.canvas.height)this.fRotateLimitX=e,this.fRotateLimitY=t;else{var r=Math.tan(2.748893525);if(Math.abs(r*this.fScale)<1){var i=r*r+1,n=-2*r*r*this.fScale,a=r*r*this.fScale*this.fScale-1,o=(-n-Math.sqrt(n*n-4*i*a))/(2*i),s=r*(o-this.fScale);this.fRotateLimitX=Math.acos(s/Math.sqrt(o*o+s*s)),this.fRotateLimitX<e&&(this.fRotateLimitX=e)}else this.fRotateLimitX=e;var x=Math.atan(this.canvas.width/this.canvas.height*Math.tan(ce/2));if(r=Math.tan(se-x),Math.abs(r*this.fScale)<1){var l=r*r+1,c=-2*r*r*this.fScale,f=r*r*this.fScale*this.fScale-1,h=(-c-Math.sqrt(c*c-4*l*f))/(2*l),u=r*(h-this.fScale);this.fRotateLimitY=Math.acos(u/Math.sqrt(h*h+u*u)),this.fRotateLimitY<t&&(this.fRotateLimitY=t)}else this.fRotateLimitY=t}this.fRotateX>this.fRotateLimitX&&(this.fRotateX=this.fRotateLimitX),this.fRotateX<-this.fRotateLimitX&&(this.fRotateX=-this.fRotateLimitX),this.fRotateY>this.fRotateLimitY&&(this.fRotateY=this.fRotateLimitX),this.fRotateY<-this.fRotateLimitX&&(this.fRotateY=-this.fRotateLimitX)}return 1}}]),t}(),be=function(){function t(){e(this,t),this.canvas=null,this.ctx=null,this.regionSx=0,this.regionSy=0,this.regionSw=0,this.regionSh=0,this.needRect=!1,this.bAntialias=!1,this.bRecreateAntia=!1,this.pfuncCBIn=null,this.pUserIn=null,this.pfuncCBOut=null,this.pUserOut=null}return o(t,[{key:"SR_Init",value:function(e){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.ctx||console.log("your browser does not support 2d render")}},{key:"SR_Draw",value:function(e){return this.needRect?this.ctx.drawImage(e,this.regionSx,this.regionSy,this.regionSw,this.regionSh,0,0,this.canvas.width,this.canvas.height):this.ctx.drawImage(e,0,0,e.displayWidth,e.displayHeight,0,0,this.canvas.width,this.canvas.height),null!=this.pfuncCBIn&&this.pfuncCBIn(this.pUserIn),1}},{key:"GetCanvasData",value:function(e){console.log("%c start time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds(),"color: blue");var t=this.ctx.getImageData(0,0,this.canvas.width,this.canvas.height);console.log("%c 2 time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds(),"color: blue");var r=document.createElement("canvas"),i=r.getContext("2d");r.width=this.canvas.width,r.height=this.canvas.height,i.putImageData(t,0,0);var n=r.toDataURL(),a=document.createElement("a");a.download=(new Date).getTime()+".jpeg",a.href=n,a.dataset.downloadurl=["image/jpeg",a.download,a.href].join(":"),document.body.appendChild(a),a.click(),document.body.removeChild(a),console.log("%c end time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds(),"color: blue")}},{key:"SR_DelSubPort",value:function(e){return 0}},{key:"SR_AddSubPort",value:function(e){return 0}},{key:"SR_SetDisplayRect",value:function(e,t,r,i){this.regionSx=e,this.regionSy=t,this.regionSw=r,this.regionSh=i,this.needRect=!0}},{key:"SR_Destroy",value:function(){this.canvas=null,this.ctx=null,this.regionSx=0,this.regionSy=0,this.regionSw=0,this.regionSh=0,this.needRect=!1}},{key:"SR_SetCanvasSize",value:function(e,t){this.canvas.width=e,this.canvas.height=t}},{key:"SR_GetCanvasSize",value:function(){console.log("canvas width:"+this.canvas.width+",height:"+this.canvas.height)}},{key:"SR_SetAntialias",value:function(e){return e!=this.bAntialias?(this.bAntialias=e,this.bRecreateAntia=!0):this.bRecreateAntia=!1,this.bRecreateAntia&&(this.bAntialias?(this.canvas.width=5*this.canvas.width,this.canvas.height=5*this.canvas.height,this.canvas.style.transform="scale(0.2)",this.canvas.style.transformOrigin="0 0"):(this.canvas.width=this.canvas.width/5,this.canvas.height=this.canvas.height/5,this.canvas.style.transform="scale(1)",this.canvas.style.transformOrigin="0 0")),1}},{key:"SR_SetCallBack",value:function(e,t,r){switch(r){case 0:this.pfuncCBIn=e,this.pUserIn=t;break;case 1:this.pfuncCBOut=e,this.pUserOut=t;break;default:return 0}return 1}},{key:"SR_DrawFont",value:function(e,t,r,i,n,a,o,s,x){var l=[],c={};return c.bBackground=a,c.nFontWidth=i,c.nFontHeight=n,c.pstBGColor=o,c.pstFontColor=r,c.pString=e,c.pstStartPos=t,c.fRotateAngle=s,c.pFontFamily=x,l.push(c),this.SR_DrawFontEx(l,1),1}},{key:"SR_DrawFontEx",value:function(e,t){for(var r=0;r<t;r++){this.ctx.textBaseline="top";var i=e[r].nFontWidth,n=e[r].nFontHeight,a=(i=Math.round(i))<(n=Math.round(n))?i:n;this.ctx.font=a.toString()+"px "+e[r].pFontFamily;var o=parseInt(255*e[r].pstFontColor.fR),s=parseInt(255*e[r].pstFontColor.fG),x=parseInt(255*e[r].pstFontColor.fB),l=o<16?"0"+o.toString(16):o.toString(16),c=s<16?"0"+s.toString(16):s.toString(16),f=x<16?"0"+x.toString(16):x.toString(16);this.ctx.fillStyle="#"+l+c+f,this.ctx.globalAlpha=e[r].pstFontColor.fA,this.ctx.fillText(e[r].pString,e[r].pstStartPos.fX*this.canvas.width,e[r].pstStartPos.fY*this.canvas.height)}return 1}},{key:"SR_DrawImage",value:function(e,t,r,i,n,a){return 1}},{key:"SR_DrawLinesEx",value:function(e,t,r,i){return 1}}]),t}(),ve=function(){function t(){e(this,t),this.bPortAllocated=[],this.pRenderParam=[],this.pFishParam=[],this.stPTZColor=[],this.pPTZSetColor=null,this.nBasePTZPointNum=[],this.nOriPTZPointNum=[],this.nPanoPTZPointNum=[],this.nPTZFragmentNum=[],this.pBasePTZPoints=[],this.pPanoPTZPoints=[],this.pRectPoints=[],this.nPTZRectNum=[],this.nPTZDisplayMode=0,this.fRX1=0,this.fRX2=1,this.fRY1=0,this.fRY2=1,this.bBlack=!1,this.pOriPTZPoints=[],this.nWndPort=fe,this.nPlaceType=0,this.nPTZFragmentNode=[],this.bPTZSelected=[],this.nPTZDisplayMode=2;for(var r=0;r<ie;++r){this.bPortAllocated[r]=!1,this.bPTZSelected[r]=!1,this.pRenderParam[r]=null,this.pFishParam[r]=null,this.stPTZColor[r]={},this.stPTZColor[r].fR=0,this.stPTZColor[r].fG=0,this.stPTZColor[r].fB=0,this.stPTZColor[r].fA=0,this.nBasePTZPointNum[r]=0,this.nOriPTZPointNum[r]=0,this.nPanoPTZPointNum[r]=0,this.nPTZRectNum[r]=0,this.pPanoPTZPoints[r]=[],this.pRectPoints[r]=[],this.pBasePTZPoints[r]=[],this.pOriPTZPoints[r]=[];for(var i=0;i<4;++i)this.pRectPoints[r][i]={},this.pRectPoints[r][i].fX=0,this.pRectPoints[r][i].fY=0;for(var n=0;n<ne;++n)this.pBasePTZPoints[r][n]={},this.pBasePTZPoints[r][n].fX=0,this.pBasePTZPoints[r][n].fY=0,this.pOriPTZPoints[r][n]={},this.pOriPTZPoints[r][n].fX=0,this.pOriPTZPoints[r][n].fY=0,this.pPanoPTZPoints[r][n]={},this.pPanoPTZPoints[r][n].fX=0,this.pPanoPTZPoints[r][n].fY=0;this.nPTZFragmentNum[r]=0,this.nPTZFragmentNode[r]=[];for(var a=0;a<100;++a)this.nPTZFragmentNode[r][a]=0}this.InitColorList()}return o(t,[{key:"GetFECPort",value:function(e){for(var t=fe,r=0;r<ie;++r)if(0==this.bPortAllocated[r]){t=r;break}if(t==fe)return t;if(e==q.SR_DE_NULL)return t;if(1!=this.JudgeDisplayEffect(e))return this.FreeFECPort(t),fe;if(q.SR_DE_FISH_PANORAMA_CEILING_360==e||q.SR_DE_FISH_PANORAMA_CEILING_180==e||q.SR_DE_FISH_PANORAMA_FLOOR_360==e||q.SR_DE_FISH_PANORAMA_FLOOR_180==e||q.SR_DE_FISH_PANORAMA_WALL==e||q.SR_DE_FISH_ORIGINAL==e){if(fe!=this.nWndPort)return this.FreeFECPort(t),fe;this.nWndPort=t}if(!(q.SR_DE_FISH_PTZ_CEILING!=e&&q.SR_DE_FISH_PTZ_FLOOR!=e&&q.SR_DE_FISH_PTZ_WALL!=e||fe==this.nWndPort||null==this.pRenderParam[this.nWndPort]||q.SR_DE_FISH_PANORAMA_CEILING_180!=this.pRenderParam[this.nWndPort].nDisplayEffect&&q.SR_DE_FISH_PANORAMA_FLOOR_180!=this.pRenderParam[this.nWndPort].nDisplayEffect))return this.FreeFECPort(t),fe;if(q.SR_DE_FISH_PANORAMA_CEILING_180==e||q.SR_DE_FISH_PANORAMA_FLOOR_180==e)for(var i=0;i<ie;++i)if(null!=this.pRenderParam[i]&&(q.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[i].nDisplayEffect||q.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[i].nDisplayEffect||q.SR_DE_FISH_PTZ_WALL==this.pRenderParam[i].nDisplayEffect))return this.FreeFECPort(t),fe;if(q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==e)for(var n=0;n<ie;++n)if(null!=this.pRenderParam[n]&&q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL==this.pRenderParam[n].nDisplayEffect)return this.FreeFECPort(t),fe;if(q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL==e)for(var a=0;a<ie;++a)if(null!=this.pRenderParam[a]&&q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==this.pRenderParam[a].nDisplayEffect)return this.FreeFECPort(t),fe;return this.pRenderParam[t]={},this.pRenderParam[t].fCosH=1,this.pRenderParam[t].fSinH=0,this.pRenderParam[t].fCosV=1,this.pRenderParam[t].fSinV=0,this.pRenderParam[t].fAngle=0,this.pRenderParam[t].fRX1=this.fRX1,this.pRenderParam[t].fRX2=this.fRX2,this.pRenderParam[t].fRY1=this.fRY1,this.pRenderParam[t].fRY2=this.fRY2,this.pRenderParam[t].bBlack=this.bBlack,this.pRenderParam[t].fZoom=.035+.8,this.pRenderParam[t].nDisplayEffect=e,this.pRenderParam[t].bBlack=!1,this.pRenderParam[t].bCut=!1,this.pFishParam[t]={},this.pFishParam[t].nFishParamType=0,this.pFishParam[t].bCut=!1,this.pFishParam[t].fAngle=this.pRenderParam[t].fAngle,this.pFishParam[t].fPTZX=.5,this.pFishParam[t].fPTZY=.5,this.pFishParam[t].fRXLeft=this.pRenderParam[t].fRX1,this.pFishParam[t].fRXRight=this.pRenderParam[t].fRX2,this.pFishParam[t].fRYTop=this.pRenderParam[t].fRY1,this.pFishParam[t].fRYBottom=this.pRenderParam[t].fRY2,this.pFishParam[t].bBlack=this.pRenderParam[t].bBlack,this.pFishParam[t].fZoom=(this.pRenderParam[t].fZoom-.8)/7,this.bPortAllocated[t]=!0,t}},{key:"FreeFECPort",value:function(e){if(e<0||e>=ie)return G;this.nWndPort==e&&(this.nWndPort=fe),null!=this.pRenderParam[e]&&(this.pRenderParam[e].fCosH=1,this.pRenderParam[e].fSinH=0,this.pRenderParam[e].fCosV=1,this.pRenderParam[e].fSinV=0,this.pRenderParam[e].fAngle=0,this.pRenderParam[e].fZoom=0,this.pRenderParam[e].fRX1=0,this.pRenderParam[e].fRX2=1,this.pRenderParam[e].fRY1=0,this.pRenderParam[e].fRY2=1,this.pRenderParam[e].nDisplayEffect=0,this.pRenderParam[e].bBlack=!1,this.pRenderParam[e].bCut=!1),null!=this.pFishParam[e]&&(this.pFishParam[e].nFishParamType=0,this.pFishParam[e].fRXLeft=0,this.pFishParam[e].fRXRight=1,this.pFishParam[e].fRYTop=0,this.pFishParam[e].fRYBottom=1,this.pFishParam[e].bBlack=!1,this.pFishParam[e].bCut=!1,this.pFishParam[e].fAngle=0,this.pFishParam[e].fZoom=0,this.pFishParam[e].fPTZX=.5,this.pFishParam[e].fPTZY=.5),this.nBasePTZPointNum[e]=0,this.nOriPTZPointNum[e]=0,this.nPanoPTZPointNum[e]=0,this.nPTZRectNum[e]=0;for(var t=0;t<4;++t)this.pRectPoints[e][t].fX=0,this.pRectPoints[e][t].fY=0;for(var r=0;r<ne;++r)this.pBasePTZPoints[e][r].fX=0,this.pBasePTZPoints[e][r].fY=0,this.pOriPTZPoints[e][r].fX=0,this.pOriPTZPoints[e][r].fY=0,this.pPanoPTZPoints[e][r].fX=0,this.pPanoPTZPoints[e][r].fY=0;if(null!=this.pPTZSetColor&&(this.pPTZSetColor[e].fA=0,this.pPTZSetColor[e].fR=0,this.pPTZSetColor[e].fG=0,this.pPTZSetColor[e].fB=0),this.bPTZSelected[e]=!1,0!=this.nPlaceType){var n=!1;if(null!=this.pRenderParam[i])for(var a=0;a<ie;++a)if(null!=this.pRenderParam[a]&&(q.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[a].nDisplayEffect||q.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[a].nDisplayEffect||q.SR_DE_FISH_PTZ_WALL==this.pRenderParam[a].nDisplayEffect||q.SR_DE_FISH_PANORAMA_CEILING_360==this.pRenderParam[a].nDisplayEffect||q.SR_DE_FISH_PANORAMA_CEILING_180==this.pRenderParam[a].nDisplayEffect||q.SR_DE_FISH_PANORAMA_FLOOR_360==this.pRenderParam[a].nDisplayEffect||q.SR_DE_FISH_PANORAMA_FLOOR_180==this.pRenderParam[a].nDisplayEffect||q.SR_DE_FISH_PANORAMA_WALL==this.pRenderParam[a].nDisplayEffect||q.SR_DE_FISH_CYLINDER_CEILING==this.pRenderParam[a].nDisplayEffect||q.SR_DE_FISH_CYLINDER_FLOOR==this.pRenderParam[a].nDisplayEffect||q.SR_DE_FISH_CYLINDER_SPLIT_CEILING==this.pRenderParam[a].nDisplayEffect||q.SR_DE_FISH_CYLINDER_SPLIT_FLOOR==this.pRenderParam[a].nDisplayEffect||q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL==this.pRenderParam[a].nDisplayEffect||q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL==this.pRenderParam[a].nDisplayEffect)){n=!0;break}n||(this.nPlaceType=0)}for(var o=!1,s=0;s<ie;++s)if(null!=this.pRenderParam[s]){o=!0;break}o||(this.fRX1=0,this.fRX2=1,this.fRY1=0,this.fRY2=1,this.bBlack=!1),this.nPTZFragmentNum[e]=0;for(var x=0;x<100;++x)this.nPTZFragmentNode[e][x]=0;return this.bPortAllocated[e]=!1,1}},{key:"DeInit",value:function(){for(var e=0;e<ie;++e){for(var t=0;t<4;++t)this.pRectPoints[e][t]=null;for(var r=0;r<ne;++r)this.pBasePTZPoints[e][r]=null,this.pOriPTZPoints[e][r]=null,this.pPanoPTZPoints[e][r]=null;this.nPTZFragmentNum[e]=0,this.nPTZFragmentNode[e]=null,this.bPortAllocated[e]=!1,this.bPTZSelected[e]=!1,this.pRenderParam[e]=null,this.pFishParam[e]=null,this.stPTZColor[e]=null,this.nBasePTZPointNum[e]=0,this.nOriPTZPointNum[e]=0,this.nPanoPTZPointNum[e]=0,this.nPTZRectNum[e]=0,this.pPanoPTZPoints[e]=null,this.pRectPoints[e]=null,this.pBasePTZPoints[e]=null,this.pOriPTZPoints[e]=null}return this.bPortAllocated=null,this.pRenderParam=null,this.pFishParam=null,this.stPTZColor=null,this.pPTZSetColor=null,this.nBasePTZPointNum=null,this.nOriPTZPointNum=null,this.nPanoPTZPointNum=null,this.nPTZFragmentNum=null,this.pBasePTZPoints=null,this.pPanoPTZPoints=null,this.pRectPoints=null,this.nPTZRectNum=null,this.nPTZDisplayMode=0,this.fRX1=0,this.fRX2=1,this.fRY1=0,this.fRY2=1,this.bBlack=!1,this.pOriPTZPoints=null,this.pBasePTZPoints=null,this.nWndPort=fe,this.nPlaceType=0,this.nPTZFragmentNode=null,this.bPTZSelected=null,this.nPTZDisplayMode=2,1}},{key:"InitColorList",value:function(){this.stPTZColor[0].fR=.5,this.stPTZColor[0].fG=.5,this.stPTZColor[0].fB=0,this.stPTZColor[0].fA=1,this.stPTZColor[1].fR=1,this.stPTZColor[1].fG=0,this.stPTZColor[1].fB=0,this.stPTZColor[1].fA=1,this.stPTZColor[2].fR=0,this.stPTZColor[2].fG=1,this.stPTZColor[2].fB=0,this.stPTZColor[2].fA=1,this.stPTZColor[3].fR=0,this.stPTZColor[3].fG=0,this.stPTZColor[3].fB=1,this.stPTZColor[3].fA=1,this.stPTZColor[4].fR=1,this.stPTZColor[4].fG=1,this.stPTZColor[4].fB=0,this.stPTZColor[4].fA=1,this.stPTZColor[5].fR=.5,this.stPTZColor[5].fG=0,this.stPTZColor[5].fB=1,this.stPTZColor[5].fA=1,this.stPTZColor[6].fR=0,this.stPTZColor[6].fG=1,this.stPTZColor[6].fB=1,this.stPTZColor[6].fA=1,this.stPTZColor[7].fR=1,this.stPTZColor[7].fG=.5,this.stPTZColor[7].fB=0,this.stPTZColor[7].fA=1,this.stPTZColor[8].fR=0,this.stPTZColor[8].fG=.5,this.stPTZColor[8].fB=.5,this.stPTZColor[8].fA=1;for(var e=9;e<ie;e++)this.stPTZColor[e].fR=1*e/ie,this.stPTZColor[e].fG=1*e/ie,this.stPTZColor[e].fB=1*e/ie,this.stPTZColor[e].fA=1;return 1}},{key:"GetRangePoints",value:function(e){if(e<0||e>=ie)return G;if(null==this.pRenderParam[e])return z;var t=0,r=0;switch(this.nOriPTZPointNum[e]=0,this.nBasePTZPointNum[e]=0,this.pRenderParam[e].nDisplayEffect){case q.SR_DE_FISH_PTZ_CEILING:for(r=0;r<1;r+=.01)this.GetFishPTZCeiling(t,r,e);for(r=.9995,t=0;t<1;t+=.02)this.GetFishPTZCeiling(t,r,e);for(t=.999,r=.9995;r>=0;r-=.01)this.GetFishPTZCeiling(t,r,e);for(r=0,t=.999;t>=0;t-=.02)this.GetFishPTZCeiling(t,r,e);break;case q.SR_DE_FISH_PTZ_FLOOR:for(r=0;r<1;r+=.01)this.GetFishPTZFloor(t,r,e);for(r=.9995,t=0;t<1;t+=.02)this.GetFishPTZFloor(t,r,e);for(t=.999,r=.9995;r>=0;r-=.01)this.GetFishPTZFloor(t,r,e);for(r=0,t=.999;t>=0;t-=.02)this.GetFishPTZFloor(t,r,e);break;case q.SR_DE_FISH_PTZ_WALL:for(r=0;r<1;r+=.01)this.GetFishPTZWALL(t,r,e);for(r=.9995,t=0;t<1;t+=.02)this.GetFishPTZWALL(t,r,e);for(t=.999,r=.9995;r>=0;r-=.01)this.GetFishPTZWALL(t,r,e);for(r=0,t=.999;t>=0;t-=.02)this.GetFishPTZWALL(t,r,e);break;default:return X}return 1}},{key:"TransformPTZRangePoints",value:function(e){if(fe==this.nWndPort)return z;if(null==this.pBasePTZPoints[e]||null==this.pRenderParam[this.nWndPort])return z;this.nPanoPTZPointNum[e]=0;var t=1,r=this.nWndPort;switch(this.pRenderParam[r].nDisplayEffect){case q.SR_DE_FISH_PANORAMA_WALL:if(1!=(t=this.GetPanoPTZWall(e)))return t;break;case q.SR_DE_FISH_PANORAMA_FLOOR_360:if(1!=(t=this.GetPanoPTZFloor(e)))return t;break;case q.SR_DE_FISH_PANORAMA_CEILING_360:if(1!=(t=this.GetPanoPTZCeiling(e)))return t}return this.CalcPTZFragmentPoints(e),1}},{key:"GetRectPoints",value:function(e){if(e<0||e>=ie)return G;if(this.nWndPort==fe)return z;if(null==this.pRenderParam[this.nWndPort]||null==this.pFishParam[e])return z;var t=1,r={fX:0,fY:0};switch(this.pRenderParam[this.nWndPort].nDisplayEffect){case q.SR_DE_FISH_PANORAMA_WALL:if(1!=(t=this.GetPointFish2PanoWall(r,this.pFishParam[e].fPTZX,this.pFishParam[e].fPTZY)))return t;break;case q.SR_DE_FISH_PANORAMA_FLOOR_360:if(1!=(t=this.GetPointFish2PanoFloor(r,this.pFishParam[e].fPTZX,this.pFishParam[e].fPTZY)))return X==t&&(this.pRectPoints[e]=null),t;break;case q.SR_DE_FISH_PANORAMA_CEILING_360:if(1!=(t=this.GetPointFish2PanoCeiling(r,this.pFishParam[e].fPTZX,this.pFishParam[e].fPTZY)))return X==t&&(this.pRectPoints[e]=null),t;break;case q.SR_DE_FISH_ORIGINAL:r.fX=this.pFishParam[e].fPTZX,r.fY=this.pFishParam[e].fPTZY}if(null==this.pRectPoints[e]){this.pRectPoints[e]=[];for(var i=0;i<4;++i)this.pRectPoints[e][i]={},this.pRectPoints[e][i].fX=0,this.pRectPoints[e][i].fY=0}return this.pRectPoints[e][0].fX=r.fX-ae,this.pRectPoints[e][0].fY=r.fY-ae,this.pRectPoints[e][1].fX=r.fX+ae,this.pRectPoints[e][1].fY=r.fY-ae,this.pRectPoints[e][2].fX=r.fX+ae,this.pRectPoints[e][2].fY=r.fY+ae,this.pRectPoints[e][3].fX=r.fX-ae,this.pRectPoints[e][3].fY=r.fY+ae,this.nPTZRectNum[e]=4,1}},{key:"GetFishPTZCeiling",value:function(e,t,r){var i,n,a,o,s,x,l,c={fX:0,fY:0},f={fX:0,fY:0},h={fX:0,fY:0},u={};o=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),s=(this.fRX1+this.fRX2)/2*1,x=(this.fRY1+this.fRY2)/2*o,l=(this.fRX2-this.fRX1)/2*1,c.fX=t-.5,c.fY=.5-e,i=this.pRenderParam[r].fZoom,f.fX=c.fX,f.fY=c.fY*this.pRenderParam[r].fCosV+i*this.pRenderParam[r].fSinV,n=i*this.pRenderParam[r].fCosV-c.fY*this.pRenderParam[r].fSinV,a=Math.sqrt(f.fX*f.fX+f.fY*f.fY);var d=Math.sqrt(f.fX*f.fX+f.fY*f.fY+n*n),_=Math.asin(a/d)/1.5707963*.5;f.fX=_*f.fX/a,f.fY=_*f.fY/a,h.fX=f.fX*this.pRenderParam[r].fCosH-f.fY*this.pRenderParam[r].fSinH,h.fY=f.fX*this.pRenderParam[r].fSinH+f.fY*this.pRenderParam[r].fCosH,u.fX=2*h.fX*l+s,u.fY=2*-h.fY*l+x;var p=this.nBasePTZPointNum[r];this.pBasePTZPoints[r][p].fX=h.fX+.5,this.pBasePTZPoints[r][p].fY=.5-h.fY,this.nBasePTZPointNum[r]=this.nBasePTZPointNum[r]+1;var m=this.fRX1<=0?0:1*this.fRX1,g=this.fRY1<=0?0:this.fRY1*o,y=this.fRX2>=1?1-m:1*this.fRX2-m,b=this.fRY2>=1?o-g:this.fRY2*o-g;if(u.fX=(u.fX-m)/y,u.fY=(u.fY-g)/b,u.fX<=1&&u.fY<=1&&u.fX>=0&&u.fY>=0){var v=this.nOriPTZPointNum[r];this.pOriPTZPoints[r][v].fX=u.fX,this.pOriPTZPoints[r][v].fY=u.fY,this.nOriPTZPointNum[r]=this.nOriPTZPointNum[r]+1}return 1}},{key:"GetFishPTZFloor",value:function(e,t,r){var i,n,a,o,s,x,l,c={fX:0,fY:0},f={fX:0,fY:0},h={fX:0,fY:0},u={};o=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),s=(this.fRX1+this.fRX2)/2*1,x=(this.fRY1+this.fRY2)/2*o,l=(this.fRX2-this.fRX1)/2*1,c.fX=e-.5,c.fY=t-.5,i=this.pRenderParam[r].fZoom,f.fX=c.fX,f.fY=c.fY*this.pRenderParam[r].fCosV+i*this.pRenderParam[r].fSinV,n=i*this.pRenderParam[r].fCosV-c.fY*this.pRenderParam[r].fSinV,a=Math.sqrt(f.fX*f.fX+f.fY*f.fY);var d=Math.sqrt(f.fX*f.fX+f.fY*f.fY+n*n),_=Math.asin(a/d)/1.5707963*.5;f.fX=_*f.fX/a,f.fY=_*f.fY/a,h.fX=f.fX*this.pRenderParam[r].fCosH-f.fY*this.pRenderParam[r].fSinH,h.fY=f.fX*this.pRenderParam[r].fSinH+f.fY*this.pRenderParam[r].fCosH,u.fX=2*h.fX*l+s,u.fY=2*h.fY*l+x;var p=this.nBasePTZPointNum[r];this.pBasePTZPoints[r][p].fX=h.fX+.5,this.pBasePTZPoints[r][p].fY=h.fY+.5,this.nBasePTZPointNum[r]=this.nBasePTZPointNum[r]+1;var m=this.fRX1<=0?0:1*this.fRX1,g=this.fRY1<=0?0:this.fRY1*o,y=this.fRX2>=1?1-m:1*this.fRX2-m,b=this.fRY2>=1?o-g:this.fRY2*o-g;if(u.fX=(u.fX-m)/y,u.fY=(u.fY-g)/b,u.fX<=1&&u.fY<=1&&u.fX>=0&&u.fY>=0){var v=this.nOriPTZPointNum[r];this.pOriPTZPoints[r][v].fX=u.fX,this.pOriPTZPoints[r][v].fY=u.fY,this.nOriPTZPointNum[r]=this.nOriPTZPointNum[r]+1}return 1}},{key:"GetFishPTZWALL",value:function(e,t,r){var i,n,a,o,s,x,l,c,f={fX:0,fY:0},h={fX:0,fY:0},u={fX:0,fY:0},d={};s=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),x=(this.fRX1+this.fRX2)/2*1,l=(this.fRY1+this.fRY2)/2*s,c=(this.fRX2-this.fRX1)/2*1,f.fX=t-.5,f.fY=e-.5,i=this.pRenderParam[r].fZoom,h.fX=f.fX,h.fY=f.fY*this.pRenderParam[r].fCosV+i*this.pRenderParam[r].fSinV,n=i*this.pRenderParam[r].fCosV-f.fY*this.pRenderParam[r].fSinV,u.fX=h.fX*this.pRenderParam[r].fCosH+n*this.pRenderParam[r].fSinH,u.fY=h.fY,a=n*this.pRenderParam[r].fCosH-h.fX*this.pRenderParam[r].fSinH,o=Math.sqrt(u.fX*u.fX+u.fY*u.fY);var _=Math.sqrt(u.fX*u.fX+u.fY*u.fY+a*a),p=Math.asin(o/_)/1.5707963*.5;d.fX=p*u.fX/o*c*2+x,d.fY=p*u.fY/o*c*2+l;var m=this.nBasePTZPointNum[r];this.pBasePTZPoints[r][m].fX=p*u.fX/o+.5,this.pBasePTZPoints[r][m].fY=p*u.fY/o+.5,this.nBasePTZPointNum[r]=this.nBasePTZPointNum[r]+1;var g=this.fRX1<=0?0:1*this.fRX1,y=this.fRY1<=0?0:this.fRY1*s,b=this.fRX2>=1?1-g:1*this.fRX2-g,v=this.fRY2>=1?s-y:this.fRY2*s-y;if(d.fX=(d.fX-g)/b,d.fY=(d.fY-y)/v,d.fX<=1&&d.fY<=1&&d.fX>=0&&d.fY>=0){var P=this.nOriPTZPointNum[r];this.pOriPTZPoints[r][P].fX=d.fX,this.pOriPTZPoints[r][P].fY=d.fY,this.nOriPTZPointNum[r]=this.nOriPTZPointNum[r]+1}return 1}},{key:"GetPanoPTZCeiling",value:function(e){if(null==this.pRenderParam[e]||null==this.pRenderParam[this.nWndPort])return z;if(null==this.pBasePTZPoints[e])return z;var t,r,i=this.nBasePTZPointNum[e];t=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),r=(this.fRX2-this.fRX1)/2*1;var n,a=0;(this.fRX2>1||this.fRY2>1||this.fRY1<0||this.fRX1<0)&&(this.fRX1<0&&(n=1*-this.fRX1)>a&&(a=n),this.fRX2>1&&(n=1*(this.fRX2-1))>a&&(a=n),this.fRY1<0&&(n=-this.fRY1*t)>a&&(a=n),this.fRY2>1&&(n=(this.fRY2-1)*t)>a&&(a=n));for(var o,s=a/r,x={fX:0,fY:0},l={fX:0,fY:0},c=0;c<i;++c)if(l.fX=this.pBasePTZPoints[e][c].fX,l.fY=this.pBasePTZPoints[e][c].fY,!(Math.abs(l.fX-.5)<oe&&Math.abs(l.fY-.5)<oe)){var f={fX:0,fY:0},h={fX:0,fY:0};f.fX=l.fX-.5,f.fY=l.fY-.5,h.fX=-.5*Math.sin(this.pRenderParam[this.nWndPort].fAngle),h.fY=.5*Math.cos(this.pRenderParam[this.nWndPort].fAngle);var u=Math.sqrt(f.fX*f.fX+f.fY*f.fY),d=Math.sqrt(h.fX*h.fX+h.fY*h.fY);if(o=Math.acos((f.fX*h.fX+f.fY*h.fY)/(u*d)),f.fX*h.fY-f.fY*h.fX>0&&(o=6.2831852-o),x.fX=o/6.2831853,x.fY=(2*(.5-u)-s)/(.8-s),x.fY>=0&&x.fX>=0&&x.fY<=1&&x.fX<=1){var _=this.nPanoPTZPointNum[e];this.pPanoPTZPoints[e][_].fX=x.fX,this.pPanoPTZPoints[e][_].fY=x.fY,this.nPanoPTZPointNum[e]=this.nPanoPTZPointNum[e]+1}}return 1}},{key:"GetPanoPTZFloor",value:function(e){if(null==this.pRenderParam[e]||null==this.pRenderParam[this.nWndPort])return z;if(null==this.pBasePTZPoints[e])return z;var t,r,i=this.nBasePTZPointNum[e];t=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),r=(this.fRX2-this.fRX1)/2*1;var n,a=0;(this.fRX2>1||this.fRY2>1||this.fRY1<0||this.fRX1<0)&&(this.fRX1<0&&(n=1*-this.fRX1)>a&&(a=n),this.fRX2>1&&(n=1*(this.fRX2-1))>a&&(a=n),this.fRY1<0&&(n=-this.fRY1*t)>a&&(a=n),this.fRY2>1&&(n=(this.fRY2-1)*t)>a&&(a=n));for(var o,s=a/r,x={fX:0,fY:0},l={fX:0,fY:0},c=0;c<i;++c)if(l.fX=this.pBasePTZPoints[e][c].fX,l.fY=this.pBasePTZPoints[e][c].fY,!(Math.abs(l.fX-.5)<oe&&Math.abs(l.fY-.5)<oe)){var f={fX:0,fY:0},h={fX:0,fY:0};f.fX=l.fX-.5,f.fY=l.fY-.5,h.fX=-.5*Math.sin(this.pRenderParam[this.nWndPort].fAngle),h.fY=.5*Math.cos(this.pRenderParam[this.nWndPort].fAngle);var u=Math.sqrt(f.fX*f.fX+f.fY*f.fY),d=Math.sqrt(h.fX*h.fX+h.fY*h.fY);if(o=Math.acos((f.fX*h.fX+f.fY*h.fY)/(u*d)),f.fX*h.fY-f.fY*h.fX>0&&(o=6.2831852-o),x.fX=1-o/6.2831853,x.fY=1-(2*(.5-u)-s)/(.8-s),x.fY>=0&&x.fX>=0&&x.fY<=1&&x.fX<=1){var _=this.nPanoPTZPointNum[e];this.pPanoPTZPoints[e][_].fX=x.fX,this.pPanoPTZPoints[e][_].fY=x.fY,this.nPanoPTZPointNum[e]=this.nPanoPTZPointNum[e]+1}}return 1}},{key:"GetPanoPTZWall",value:function(e){if(null==this.pRenderParam[e]||null==this.pRenderParam[this.nWndPort])return z;if(null==this.pBasePTZPoints[e])return z;var t,r,i=this.nBasePTZPointNum[e];t=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),r=(this.fRX2-this.fRX1)/2*1;var n,a,o,s,x,l=0,c=1,f=.1,h=.9;this.fRX1<0&&(n=1*-this.fRX1,l=n/=2*r),this.fRX2>1&&(a=1*(this.fRX2-1),c=1-(a/=2*r)),this.fRY1<0&&(o=-this.fRY1*t,f=(o/=2*r)>.1?o:.1),this.fRY2>1&&(s=(this.fRY2-1)*t,h=(s/=2*r)>1-.9?1-s:.9);for(var u={fX:0,fY:0},d={fX:0,fY:0},_=0;_<i;++_){d.fX=this.pBasePTZPoints[e][_].fX,d.fY=this.pBasePTZPoints[e][_].fY;var p=2*d.fX*r,m=2*d.fY*r;if(x=Math.sqrt(r*r-(m-r)*(m-r)),!(Math.abs(x)<oe)&&(d.fX=r*(p-r)/x+r,d.fY=m,u.fX=(d.fX-2*l*r)/(2*(c-l)*r),u.fY=(d.fY-2*f*r)/(2*(h-f)*r),u.fY>=0&&u.fX>=0&&u.fY<=1&&u.fX<=1)){var g=this.nPanoPTZPointNum[e];this.pPanoPTZPoints[e][g].fX=u.fX,this.pPanoPTZPoints[e][g].fY=u.fY,this.nPanoPTZPointNum[e]=this.nPanoPTZPointNum[e]+1}}return 1}},{key:"GetPointPano2FishCeiling",value:function(e,t,r){if(null==e||null==this.pRenderParam[this.nWndPort])return z;var i,n;i=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),n=(this.fRX2-this.fRX1)/2*1;var a,o=0,s=1,x=0,l=1,c=0;(this.fRX2>1||this.fRY2>1||this.fRX1<0||this.fRY1<0)&&(this.fRX1<0&&((a=1*-this.fRX1)>c&&(c=a),o=a/=2*n),this.fRX2>1&&((a=1*(this.fRX2-1))>c&&(c=a),s=1-(a/=2*n)),this.fRY1<0&&((a=-this.fRY1*i)>c&&(c=a),x=a/=2*n),this.fRY2>1&&((a=(this.fRY2-1)*i)>c&&(c=a),l=1-(a/=2*n)));var f,h,u=c/n,d={},_={};return d.fX=t,d.fY=(.8-u)*r+u,f=6.2831853*d.fX+this.pRenderParam[this.nWndPort].fAngle,h=.5*(1-d.fY),_.fX=.5-h*Math.sin(f),_.fY=.5+h*Math.cos(f),_.fX=(_.fX-o)/(s-o),_.fY=(_.fY-x)/(l-x),e.fX=_.fX,e.fY=_.fY,1}},{key:"GetPointPano2FishFloor",value:function(e,t,r){if(null==this.pRenderParam[this.nWndPort])return z;if(null==e)return G;var i,n;i=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),n=(this.fRX2-this.fRX1)/2*1;var a,o=0,s=1,x=0,l=1,c=0;(this.fRX2>1||this.fRY2>1||this.fRX1<0||this.fRY1<0)&&(this.fRX1<0&&((a=1*-this.fRX1)>c&&(c=a),o=a/=2*n),this.fRX2>1&&((a=1*(this.fRX2-1))>c&&(c=a),s=1-(a/=2*n)),this.fRY1<0&&((a=-this.fRY1*i)>c&&(c=a),x=a/=2*n),this.fRY2>1&&((a=(this.fRY2-1)*i)>c&&(c=a),l=1-(a/=2*n)));var f,h,u=c/n,d={},_={};return d.fX=1-t,d.fY=(.8-u)*(1-r)+u,f=6.2831853*d.fX+this.pRenderParam[this.nWndPort].fAngle,h=.5*(1-d.fY),_.fX=.5-h*Math.sin(f),_.fY=.5+h*Math.cos(f),_.fX=(_.fX-o)/(s-o),_.fY=(_.fY-x)/(l-x),e.fX=_.fX,e.fY=_.fY,1}},{key:"GetPointPano2FishWall",value:function(e,t,r){if(null==this.pRenderParam[this.nWndPort])return z;if(null==e)return G;var i,n;i=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),n=(this.fRX2-this.fRX1)/2*1;var a,o,s,x,l=0,c=1,f=.1,h=.9,u=0,d=1,_=0,p=1;this.fRX1<0&&(a=1*-this.fRX1,l=a/=2*n,u=a),this.fRX2>1&&(o=1*(this.fRX2-1),c=1-(o/=2*n),d=1-o),this.fRY1<0&&(s=-this.fRY1*i,f=(s/=2*n)>.1?s:.1,_=s),this.fRY2>1&&(x=(this.fRY2-1)*i,h=(x/=2*n)>1-.9?1-x:.9,p=1-x);var m={},g={};m.fX=t*(c-l)+l,m.fY=r*(h-f)+f;var y=Math.sqrt(.25-(m.fY-.5)*(m.fY-.5));return g.fX=(m.fX-.5)*y/.5+.5,g.fY=m.fY,g.fX=(g.fX-u)/(d-u),g.fY=(g.fY-_)/(p-_),e.fX=g.fX,e.fY=g.fY,1}},{key:"UpdatePTZPosition",value:function(e,t,r){if(null==this.pRenderParam[e])return z;var i={fHAngleSin:0,fHAngleCos:0,fVAngleSin:0,fVAngleCos:0},n=1;if(q.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[e].nDisplayEffect||q.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[e].nDisplayEffect){if(1!=(n=this.ComputeAngleVertical(t,r,i,this.pRenderParam[e].nDisplayEffect)))return n}else{if(q.SR_DE_FISH_PTZ_WALL!=this.pRenderParam[e].nDisplayEffect)return X;if(1!=(n=this.ComputeAngleHorizontal(t,r,i)))return n}return 0==this.IsInImage(this.fRX1,this.fRX2,this.fRY1,this.fRY2,i,this.pRenderParam[e].fZoom,this.pRenderParam[e].nDisplayEffect)?G:(this.pRenderParam[e].fCosH=i.fHAngleCos,this.pRenderParam[e].fSinH=i.fHAngleSin,this.pRenderParam[e].fCosV=i.fVAngleCos,this.pRenderParam[e].fSinV=i.fVAngleSin,1)}},{key:"JudgeDisplayEffect",value:function(e){var t=0;switch(t){case 0:return t=this.GetPlaceType(e),4==this.nPlaceType&&(this.nPlaceType=0),1;case 3:return(t=this.GetPlaceType(e))==this.nPlaceType||4==this.nPlaceType?1:X;case 2:case 1:return(t=this.GetPlaceType(e))==this.nPlaceType||4==t?1:X;default:return X}return X}},{key:"GetPlaceType",value:function(e){switch(e){case q.SR_DE_FISH_PTZ_CEILING:case q.SR_DE_FISH_PANORAMA_CEILING_360:case q.SR_DE_FISH_PANORAMA_CEILING_180:case q.SR_DE_FISH_CYLINDER_CEILING:case q.SR_DE_FISH_CYLINDER_SPLIT_CEILING:return 3;case q.SR_DE_FISH_PTZ_FLOOR:case q.SR_DE_FISH_PANORAMA_FLOOR_360:case q.SR_DE_FISH_PANARAMA_FLOOR_180:case q.SR_DE_FISH_CYLINDER_FLOOR:case q.SR_DE_FISH_CYLINDER_SPLIT_FLOOR:return 2;case q.SR_DE_FISH_PTZ_WALL:case q.SR_DE_FISH_PANORAMA_WALL:case q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:case q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:return 1;case q.SR_DE_FISH_SEMISPHERE:case q.SR_DE_FISH_ORIGINAL:case q.SR_DE_FISH_PLANET:case q.SR_DE_FISH_SPHERE:case q.SR_DE_FISH_PLANET:return 4;default:return 0}return 0}},{key:"SetFishParam",value:function(e,t){if(e<0||e>=ie)return G;if(null==t)return G;if(null==this.pRenderParam[e])return z;var r=1;switch(t.nFishParamType){case 1:if(1!=(r=this.UpdateCircyeParam(t.fRXLeft,t.fRXRight,t.fRYTop,t.fRYBottom)))return r;this.pRenderParam[e].bCut=t.bCut,this.bBlack=t.bBlack;break;case 2:if(q.SR_DE_FISH_PANORAMA_CEILING_360!=this.pRenderParam[e].nDisplayEffect&&q.SR_DE_FISH_PANORAMA_CEILING_180!=this.pRenderParam[e].nDisplayEffect&&q.SR_DE_FISH_PANORAMA_FLOOR_360!=this.pRenderParam[e].nDisplayEffect&&q.SR_DE_FISH_PANORAMA_FLOOR_180!=this.pRenderParam[e].nDisplayEffect)return X;if(1!=(r=this.UpdateWideScanAngle(e,t.fAngle)))return r;this.pFishParam[e].fAngle=t.fAngle;break;case 3:if(q.SR_DE_FISH_PTZ_WALL!=this.pRenderParam[e].nDisplayEffect&&q.SR_DE_FISH_PTZ_CEILING!=this.pRenderParam[e].nDisplayEffect&&q.SR_DE_FISH_PTZ_FLOOR!=this.pRenderParam[e].nDisplayEffect)return X;if(1!=(r=this.UpdateRangeParam(e,t.fZoom)))return r;this.pFishParam[e].fZoom=t.fZoom;break;case 4:if(q.SR_DE_FISH_PTZ_WALL!=this.pRenderParam[e].nDisplayEffect&&q.SR_DE_FISH_PTZ_CEILING!=this.pRenderParam[e].nDisplayEffect&&q.SR_DE_FISH_PTZ_FLOOR!=this.pRenderParam[e].nDisplayEffect)return X;if(1!=(r=this.UpdatePTZPosition(e,t.fPTZX,t.fPTZY,this.pRenderParam[e].fZoom,!0)))return r;this.pFishParam[e].fPTZX=t.fPTZX,this.pFishParam[e].fPTZY=t.fPTZY;break;default:return X}return this.ComputePTZPoints()}},{key:"GetFishParam",value:function(e,t){return e<0||e>=ie||null==t||null==this.pFishParam[e]?G:(t.fRXLeft=this.fRX1,t.fRXRight=this.fRX2,t.fRYTop=this.fRY1,t.fRYBottom=this.fRY2,t.bBlack=this.bBlack,t.bCut=this.pRenderParam[e].bCut,t.nFishParamType=this.pFishParam[e].nFishParamType,t.fAngle=this.pFishParam[e].fAngle,t.fZoom=this.pFishParam[e].fZoom,t.fPTZX=this.pFishParam[e].fPTZX,t.fPTZY=this.pFishParam[e].fPTZY,1)}},{key:"GetRenderParam",value:function(e,t){return e<0||e>=ie||null==t||null==this.pRenderParam[e]?G:(t.fRXLeft=this.fRX1,t.fRXRight=this.fRX2,t.fRYTop=this.fRY1,t.fRYBottom=this.fRY2,t.bBlack=this.bBlack,t.fCosH=this.pRenderParam[e].fCosH,t.fSinH=this.pRenderParam[e].fSinH,t.fCosV=this.pRenderParam[e].fCosV,t.fSinV=this.pRenderParam[e].fSinV,t.fAngle=this.pRenderParam[e].fAngle,t.fZoom=this.pRenderParam[e].fZoom,t.nDisplayEffect=this.pRenderParam[e].nDisplayEffect,t.bCut=this.pRenderParam[e].bCut,1)}},{key:"UpdateCircyeParam",value:function(e,t,r,i){if(e<=-.5||e>=.4||t<=.6||t>=1.5||r<=-.5||r>=.4||i<=.6||i>=1.5||e+t<=.8||e+t>=1.2||r+i<=.8||r+i>=1.2)return G;if(e<0||t>1||r<0||i>1)for(var n=0;n<ie;++n)if(null!=this.pRenderParam[n]&&(q.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[n].nDisplayEffect||q.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[n].nDisplayEffect||q.SR_DE_FISH_PTZ_WALL==this.pRenderParam[n].nDisplayEffect)){var a={};if(a.fHAngleCos=this.pRenderParam[n].fCosH,a.fHAngleSin=this.pRenderParam[n].fSinH,a.fVAngleCos=this.pRenderParam[n].fCosV,a.fVAngleSin=this.pRenderParam[n].fSinV,0==this.IsInImage(e,t,r,i,a,this.pRenderParam[n].fZoom,this.pRenderParam[n].nDisplayEffect))return G}return this.fRX1=e,this.fRX2=t,this.fRY1=r,this.fRY2=i,1}},{key:"UpdateWideScanAngle",value:function(e,t){return null==this.pRenderParam[e]?z:(q.SR_DE_FISH_PANORAMA_FLOOR_360==this.pRenderParam[e].nDisplayEffect||q.SR_DE_FISH_PANORAMA_FLOOR_180==this.pRenderParam[e].nDisplayEffect?this.pRenderParam[e].fAngle=t:q.SR_DE_FISH_PANORAMA_CEILING_360!=this.pRenderParam[e].nDisplayEffect&&q.SR_DE_FISH_PANORAMA_CEILING_180!=this.pRenderParam[e].nDisplayEffect||(this.pRenderParam[e].fAngle=-t),1)}},{key:"ComputeAngleVertical",value:function(e,t,r,i){var n=e,a=t,o=Math.sqrt((a-.5)*(a-.5)+(n-.5)*(n-.5));if(o>.5)return G;if(o<.001)return r.fVAngleCos=1,r.fVAngleSin=0,r.fHAngleCos=1,r.fHAngleSin=0,1;if(i==q.SR_DE_FISH_PTZ_CEILING){r.fHAngleCos=(.5-a)/o,r.fHAngleSin=(.5-n)/o;var s=o*se;r.fVAngleCos=Math.cos(s),r.fVAngleSin=Math.sin(s)}else{if(i!=q.SR_DE_FISH_PTZ_FLOOR)return G;r.fHAngleCos=(a-.5)/o,r.fHAngleSin=(.5-n)/o;var x=o*se;r.fVAngleCos=Math.cos(x),r.fVAngleSin=Math.sin(x)}return 1}},{key:"ComputeAngleHorizontal",value:function(e,t,r){var i,n,a,o,s,x,l,c=e;return(t-(s=.5))*(t-s)+(c-s)*(c-s)>.25?G:(x=(t-s)/s*se/2,i=Math.cos(x),n=Math.sin(x),(c-s)/s/i>1||(c-s)/s/i<-1?G:(l=(c-s)/s/i*se/2,a=Math.cos(l),o=Math.sin(l),r.fVAngleCos=i,r.fVAngleSin=n,r.fHAngleCos=a,r.fHAngleSin=o,1))}},{key:"IsInImage",value:function(e,t,r,i,n,a,o){return 1!=this.IsOutofImage(e,t,r,i,n.fHAngleCos,n.fHAngleSin,n.fVAngleCos,n.fVAngleSin,a,1,.5,o)&&1!=this.IsOutofImage(e,t,r,i,n.fHAngleCos,n.fHAngleSin,n.fVAngleCos,n.fVAngleSin,a,0,.5,o)&&1!=this.IsOutofImage(e,t,r,i,n.fHAngleCos,n.fHAngleSin,n.fVAngleCos,n.fVAngleSin,a,.5,1,o)&&1!=this.IsOutofImage(e,t,r,i,n.fHAngleCos,n.fHAngleSin,n.fVAngleCos,n.fVAngleSin,a,.5,0,o)&&1!=this.IsOutofImage(e,t,r,i,n.fHAngleCos,n.fHAngleSin,n.fVAngleCos,n.fVAngleSin,a,0,0,o)&&1!=this.IsOutofImage(e,t,r,i,n.fHAngleCos,n.fHAngleSin,n.fVAngleCos,n.fVAngleSin,a,0,1,o)&&1!=this.IsOutofImage(e,t,r,i,n.fHAngleCos,n.fHAngleSin,n.fVAngleCos,n.fVAngleSin,a,1,1,o)&&1!=this.IsOutofImage(e,t,r,i,n.fHAngleCos,n.fHAngleSin,n.fVAngleCos,n.fVAngleSin,a,1,0,o)}},{key:"IsOutofImage",value:function(e,t,r,i,n,a,o,s,x,l,c,f){var h,u,d,_,p,m,g,y,b,v,P,S,R;if(P=(e+t)/2*1,S=(r+i)/2*(v=(t-e)/(i-r)),R=(t-e)/2*1,f==q.SR_DE_FISH_PTZ_CEILING){if(u=l-.5,d=(h=.5-c)*o+(m=x)*s,(g=m*o-h*s)<=0)return!0;b=Math.sqrt(u*u+d*d);var C=Math.sqrt(u*u+d*d+g*g),E=Math.asin(b/C)/1.5707963*.5;if(p=(-((u=E*u/b)*a+(d=E*d/b)*n)*R*2+S)/v,(_=((u*n-d*a)*R*2+P)/1)<0||_>1||p<0||p>1)return!0}if(f==q.SR_DE_FISH_PTZ_FLOOR){if(u=l-.5,d=(h=c-.5)*o+(m=x)*s,(g=m*o-h*s)<=0)return!0;b=Math.sqrt(u*u+d*d);var T=Math.sqrt(u*u+d*d+g*g),F=Math.asin(b/T)/1.5707963*.5;if(p=(((u=F*u/b)*a+(d=F*d/b)*n)*R*2+S)/v,(_=((u*n-d*a)*R*2+P)/1)<0||_>1||p<0||p>1)return!0}if(f==q.SR_DE_FISH_PTZ_WALL){if(_=(u=l-.5)*n+(g=(m=x)*o-(h=c-.5)*s)*a,p=d=h*o+m*s,(y=g*n-u*a)<=0)return!0;b=Math.sqrt(_*_+p*p);var D=Math.sqrt(_*_+p*p+y*y),M=Math.asin(b/D)/1.5707963*.5;if(p=(M*p/b*R*2+S)/v,(_=(M*_/b*R*2+P)/1)<0||_>1||p<0||p>1)return!0}return!1}},{key:"ComputePTZPoints",value:function(){if(fe==this.nWndPort)return z;for(var e=0;e<ie;++e)if(null!=this.pRenderParam[e]&&(q.SR_DE_FISH_PTZ_CEILING==this.pRenderParam[e].nDisplayEffect||q.SR_DE_FISH_PTZ_FLOOR==this.pRenderParam[e].nDisplayEffect||q.SR_DE_FISH_PTZ_WALL==this.pRenderParam[e].nDisplayEffect))if(2==this.nPTZDisplayMode){if(1!=this.GetRangePoints(e))continue;if(1!=this.TransformPTZRangePoints(e))continue}else if(1==this.nPTZDisplayMode&&1!=this.GetRectPoints(e))continue;return 1}},{key:"GetWndPort",value:function(){return this.nWndPort}},{key:"GetPTZDisplayMode",value:function(){return this.nPTZDisplayMode}},{key:"GetPTZColor",value:function(e,t){return e<0||e>=ie||null==t?G:(t.fA=this.stPTZColor[e].fA,t.fR=this.stPTZColor[e].fR,t.fG=this.stPTZColor[e].fG,t.fB=this.stPTZColor[e].fB,null!=this.pPTZSetColor&&(Math.abs(this.pPTZSetColor[e].fA)<oe||Math.abs(this.pPTZSetColor[e].fR)<oe||Math.abs(this.pPTZSetColor[e].fG)<oe||Math.abs(this.pPTZSetColor[e].fB)<oe)&&(t.fA=this.pPTZSetColor[e].fA,t.fR=this.pPTZSetColor[e].fR,t.fG=this.pPTZSetColor[e].fG,t.fB=this.pPTZSetColor[e].fB),1)}},{key:"SetPTZColor",value:function(e,t){if(e<0||e>=ie)return G;if(null==t)return G;if(null==this.pPTZSetColor){this.pPTZSetColor=[];for(var r=0;r<ie;++r)this.pPTZSetColor[r]={},this.pPTZSetColor[r].fR=0,this.pPTZSetColor[r].fG=0,this.pPTZSetColor[r].fB=0,this.pPTZSetColor[r].fA=1}return this.pPTZSetColor[e].fR=t.fR,this.pPTZSetColor[e].fG=t.fG,this.pPTZSetColor[e].fB=t.fB,this.pPTZSetColor[e].fA=t.fA,1}},{key:"IsPTZSelected",value:function(e){return!(e<0||e>=ie)&&this.bPTZSelected[e]}},{key:"GetPTZPort",value:function(e,t,r){if(this.nWndPort==fe)return z;if(null==this.pRenderParam[this.nWndPort])return z;var i=ie,n={};n.fX=e,n.fY=t;for(var a=0;a<ie;++a)this.bPTZSelected[a]=!1;if(2==this.nPTZDisplayMode){switch(this.pRenderParam[this.nWndPort].nDisplayEffect){case q.SR_DE_FISH_PANORAMA_FLOOR_360:this.GetPointPano2FishFloor(n,e,t);break;case q.SR_DE_FISH_PANORAMA_CEILING_360:this.GetPointPano2FishCeiling(n,e,t);break;case q.SR_DE_FISH_PANORAMA_WALL:this.GetPointPano2FishWall(n,e,t)}for(var o=0;o<ie;++o)if(0!=this.nOriPTZPointNum[o]){var s={};s.fX=this.pOriPTZPoints[o][0].fX,s.fY=this.pOriPTZPoints[o][0].fY;var x={};x.fX=this.pOriPTZPoints[o][0].fX,x.fY=this.pOriPTZPoints[o][0].fY;for(var l=1;l<this.nOriPTZPointNum[o];++l)this.GetPTZRectange(s,x,this.pOriPTZPoints[o][l]);if(n.fX<=s.fX&&n.fX>=x.fX&&n.fY>=x.fY&&n.fY<=s.fY){i=o;break}}}else{if(1!=this.nPTZDisplayMode)return X;for(var c=0;c<ie;++c)if(n.fX<=this.pRectPoints[c][2].fX&&n.fX>=this.pRectPoints[c][0].fX&&n.fY>=this.pRectPoints[c][0].fY&&n.fY<=this.pRectPoints[c][2].fY){i=c;break}}return i<ie?(this.bPTZSelected[i]=!0,r.nPTZPort=i,1):X}},{key:"SetPTZPort",value:function(e){if(e<0||e>=ie)return G;for(var t=0;t<ie;++t)this.bPTZSelected[t]=!1;if(2==this.nPTZDisplayMode){if(0==this.nOriPTZPointNum[e])return G;this.bPTZSelected[e]=!0}else{if(0==this.nPTZRectNum[e])return G;this.bPTZSelected[e]=!0}return 1}},{key:"GetPTZRectange",value:function(e,t,r){return r.fX<t.fX&&(t.fX=r.fX),r.fY<t.fY&&(t.fY=r.fY),r.fX>e.fX&&(e.fX=r.fX),r.fY>e.fY&&(e.fY=r.fY),1}},{key:"GetPTZPoints",value:function(e,t,r){return e<0||e>=ie?G:null==this.pRenderParam[this.nWndPort]?z:(2==r?null!=this.pOriPTZPoints[e]&&0!=this.nOriPTZPointNum[e]&&(t.pstPoints=this.pOriPTZPoints[e],t.nPointNum=this.nOriPTZPointNum[e]):1==r&&null!=this.pRectPoints[e]&&(t.pstPoints=this.pRectPoints[e],t.nPointNum=4),1)}},{key:"SetPTZDisplayMode",value:function(e){return this.nPTZDisplayMode=e,this.ComputePTZPoints()}},{key:"GetDisplayEffect",value:function(e){return e<0||e>=ie||null==this.pRenderParam?q.SR_DE_NULL:this.pRenderParam[e].nDisplayEffect}},{key:"GetPTZFragmentPoints",value:function(e,t,r){if(e<0||e>=ie)return G;if(null==this.pPanoPTZPoints[e]||0==this.nPanoPTZPointNum[e])return G;var i=this.nPTZFragmentNode[e][r];if(t.nPointNum=this.nPTZFragmentNode[e][r+1]-this.nPTZFragmentNode[e][r],t.nPointNum<0)return z;t.pstPoints=[];for(var n=0;n<t.nPointNum;++n){var a={};a.fX=this.pPanoPTZPoints[e][i+n].fX,a.fY=this.pPanoPTZPoints[e][i+n].fY,t.pstPoints.push(a)}return 1}},{key:"GetPTZFragmentNum",value:function(e){return e<0||e>=ie||0==this.nPTZFragmentNum[e]?0:this.nPTZFragmentNum[e]}},{key:"CalcPTZFragmentPoints",value:function(e){if(e<0||e>=ie)return G;if(null==this.pPanoPTZPoints[e]||0==this.nPanoPTZPointNum[e])return z;this.nPTZFragmentNode[e][0]=0,this.nPTZFragmentNum[e]=1;for(var t=0,r=0;r<this.nPanoPTZPointNum[e]-1;r++)Math.abs(this.pPanoPTZPoints[e][r+1].fX-this.pPanoPTZPoints[e][r].fX)>.5&&(t=this.nPTZFragmentNum[e],this.nPTZFragmentNode[e][t]=r+1,this.nPTZFragmentNum[e]=this.nPTZFragmentNum[e]+1);var i=this.nPanoPTZPointNum[e];return Math.abs(this.pPanoPTZPoints[e][0].fX-this.pPanoPTZPoints[e][i-1].fX)<.5&&(this.pPanoPTZPoints[e][i].fX=this.pPanoPTZPoints[e][0].fX,this.pPanoPTZPoints[e][i].fY=this.pPanoPTZPoints[e][0].fY,this.nPanoPTZPointNum[e]=this.nPanoPTZPointNum[e]+1),t=this.nPTZFragmentNum[e],this.nPTZFragmentNode[e][t]=this.nPanoPTZPointNum[e],1}},{key:"IsPortAllocated",value:function(e){return this.bPortAllocated[e]}},{key:"GetPointFish2PanoCeiling",value:function(e,t,r){if(null==this.pRenderParam[this.nWndPort])return z;if(null==e)return G;var i,n;i=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),n=(this.fRX2-this.fRX1)/2*1;var a,o=0;(this.fRX2>1||this.fRY2>1||this.fRX1<0||this.fRY1<0)&&(this.fRX1<0&&(a=1*-this.fRX1)>o&&(o=a),this.fRX2>1&&(a=1*(this.fRX2-1))>o&&(o=a),this.fRY1<0&&(a=-this.fRY1*i)>o&&(o=a),this.fRY2>1&&(a=(this.fRY2-1)*i)>o&&(o=a));var s,x=o/n,l={fX:0,fY:0};if(Math.abs(t-.5)<oe&&Math.abs(r-.5)<oe)return X;var c={},f={};c.fX=t-.5,c.fY=r-.5,f.fX=-.5*Math.sin(this.pRenderParam[this.nWndPort].fAngle),f.fY=.5*Math.cos(this.pRenderParam[this.nWndPort].fAngle);var h=Math.sqrt(c.fX*c.fX+c.fY*c.fY),u=Math.sqrt(f.fX*f.fX+f.fY*f.fY);return s=Math.acos((c.fX*f.fX+c.fY*f.fY)/(h*u)),c.fX*f.fY-c.fY*f.fX>0&&(s=6.2831852-s),l.fX=s/6.2831853,l.fY=(2*(.5-h)-x)/(.8-x),l.fY>=0&&l.fX>=0&&l.fY<=1&&l.fX<=1?(e.fX=l.fX,e.fY=l.fY,1):G}},{key:"GetPointFish2PanoFloor",value:function(e,t,r){if(null==this.pRenderParam[this.nWndPort])return z;if(null==e)return G;var i,n;i=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),n=(this.fRX2-this.fRX1)/2*1;var a,o=0;(this.fRX2>1||this.fRY2>1||this.fRX1<0||this.fRY1<0)&&(this.fRX1<0&&(a=1*-this.fRX1)>o&&(o=a),this.fRX2>1&&(a=1*(this.fRX2-1))>o&&(o=a),this.fRY1<0&&(a=-this.fRY1*i)>o&&(o=a),this.fRY2>1&&(a=(this.fRY2-1)*i)>o&&(o=a));var s,x=o/n,l={fX:0,fY:0};if(Math.abs(t-.5)<oe&&Math.abs(r-.5)<oe)return X;var c={},f={};c.fX=t-.5,c.fY=r-.5,f.fX=-.5*Math.sin(this.pRenderParam[this.nWndPort].fAngle),f.fY=.5*Math.cos(this.pRenderParam[this.nWndPort].fAngle);var h=Math.sqrt(c.fX*c.fX+c.fY*c.fY),u=Math.sqrt(f.fX*f.fX+f.fY*f.fY);return s=Math.acos((c.fX*f.fX+c.fY*f.fY)/(h*u)),c.fX*f.fY-c.fY*f.fX>0&&(s=6.2831852-s),l.fX=1-s/6.2831853,l.fY=1-(2*(.5-h)-x)/(.8-x),l.fY>=0&&l.fX>=0&&l.fY<=1&&l.fX<=1?(e.fX=l.fX,e.fY=l.fY,1):G}},{key:"GetPointFish2PanoWall",value:function(e,t,r){if(null==this.pRenderParam[this.nWndPort])return z;if(null==e)return G;var i,n;i=(this.fRX2-this.fRX1)/(this.fRY2-this.fRY1),n=(this.fRX2-this.fRX1)/2*1;var a,o,s,x,l,c=0,f=1,h=.1,u=.9;this.fRX1<0&&(a=1*-this.fRX1,c=a/=2*n),this.fRX2>1&&(o=1*(this.fRX2-1),f=1-(o/=2*n)),this.fRY1<0&&(s=-this.fRY1*i,h=(s/=2*n)>.1?s:.1),this.fRY2>1&&(x=(this.fRY2-1)*i,u=(x/=2*n)>1-.9?1-x:.9);var d={fX:0,fY:0},_=2*t*n,p=2*r*n;return l=Math.sqrt(n*n-(p-n)*(p-n)),Math.abs(l)<oe?SR_ERR_PARAM:(t=n*(_-n)/l+n,r=p,d.fX=(t-2*c*n)/(2*(f-c)*n),d.fY=(r-2*h*n)/(2*(u-h)*n),d.fY>=0&&d.fX>=0&&d.fY<=1&&d.fX<=1?(e.fX=d.fX,e.fY=d.fY,1):G)}},{key:"UpdateRangeParam",value:function(e,t){if(null==this.pRenderParam[e])return z;if(t<1e-5||t>.6)return G;var r=0;return q.SR_DE_FISH_PTZ_WALL!=this.pRenderParam[e].nDisplayEffect&&q.SR_DE_FISH_PTZ_CEILING!=this.pRenderParam[e].nDisplayEffect&&q.SR_DE_FISH_PTZ_FLOOR!=this.pRenderParam[e].nDisplayEffect||(r=7*t+.8,this.IsInImage(this.fRX1,this.fRX2,this.fRY1,this.fRY2,this.pRenderParam[e].fCosH,this.pRenderParam[e].fSinH,this.pRenderParam[e].fCosV,this.pRenderParam[e].fSinV,r,this.pRenderParam[e].nDisplayEffect))?(this.pRenderParam[e].fZoom=r,1):G}}]),t}(),Pe=32,Se=function(){function t(){e(this,t),this.renderEngine="webgl",this.oVideoHandle=null,this.mainCanvasID=null,this.curTimestamp=0,this.mainSubPort=0,this.mainVaildSubPort=0,this.mainFECCorrect=q.SR_DE_NULL,this.FECErrorCode=0,this.subPortNum=0,this.FECShowMode=2,this.pFishParamManager=null,this.InitFECParam(),this.privateLinesInfo=[],this.privateFontsInfo=[],this.privateImageInfo=[],this.bSRCallBackFlag=!1,this.curLinesInfo=null,this.curFontsInfo=null,this.curImagesInfo=null,this.maxPrivateLineTimeStamp=0,this.hasSetFECParamManager=!1,this.pWaterFontParam=[],this.pWaterImageParam=[],this.waterMarkImageIndex=0,this.waterMarkImageMax=1,this.aPOSAdaptBuf=[]}return o(t,[{key:"InitDisplay",value:function(e,t,r){return this.renderEngine=t,this.mainCanvasID=e,"2d"===this.renderEngine||"2D"===this.renderEngine?(this.oVideoHandle=new be,console.log("2d render")):(this.oVideoHandle=new ye,this.mainFECCorrect!=q.SR_DE_NULL&&(null==this.pFishParamManager&&(this.pFishParamManager=new ve),this.oVideoHandle.SR_SetFishParamManager(this.pFishParamManager),this.hasSetFECParamManager=!0),console.log("webgl render")),this.oVideoHandle.SR_Init(e,r),this.mainVaildSubPort=this.oVideoHandle.SR_AddSubPort(this.mainFECCorrect),-1==this.mainVaildSubPort?(console.info("%c InitDisplay SR_AddSubPort error subport:%d","color: red",this.mainVaildSubPort),0):(null==this.stFishEyeManager[0].pRender&&this.mainFECCorrect!==q.SR_DE_NULL&&(this.stFishEyeManager[0].pRender=this.oVideoHandle,this.stFishEyeManager[0].nSubPort=0,this.stFishEyeManager[0].sCanvasID=this.mainCanvasID,this.stFishEyeManager[0].bUsed=1,this.stFishEyeManager[0].bInited=1,this.stFishEyeManager[0].nValidSubPort=this.mainVaildSubPort),1)}},{key:"ReleaseDisplay",value:function(){if(null!=this.oVideoHandle&&(this.oVideoHandle.SR_DelSubPort(this.mainVaildSubPort),this.oVideoHandle.SR_Destroy(),this.oVideoHandle=null),this.subPortNum>0)for(var e=1;e<Pe;e++)0!=this.stFishEyeManager[e].nSubPort&&null!=this.stFishEyeManager[e].sCanvasID&&0!=this.stFishEyeManager[e].bInited&&(this.FEC_Disable(e),this.FEC_DelPort(e));for(var t=0;t<Pe;t++)this.stFishEyeManager[t].pRender=null;return this.stFishEyeManager.splice(0,this.stFishEyeManager.length),this.stFishParam.splice(0,this.stFishParam.length),null!=this.pFishParamManager&&(this.pFishParamManager.DeInit(),this.pFishParamManager=null),this.FECShowMode=2,this.DeInitPrivateParam(),1}},{key:"DeInitPrivateParam",value:function(){this.privateLinesInfo.splice(0,this.privateLinesInfo.length),this.privateFontsInfo.splice(0,this.privateFontsInfo.length),this.privateImageInfo.splice(0,this.privateImageInfo.length),this.pWaterFontParam.splice(0,this.pWaterFontParam.length),this.pWaterImageParam.splice(0,this.pWaterImageParam.length),this.bSRCallBackFlag=!1,this.curLinesInfo=null}},{key:"DisplayFrame",value:function(e,t,r,i,n,a){var o=this;return new Promise((function(s){var x=-1;if(null!=e&&(x=i),o.bSRCallBackFlag||(null!=o.oVideoHandle&&o.oVideoHandle.SR_SetCallBack(o.WebGLDisplayCallBack,o,0),o.bSRCallBackFlag=!0),null!=e&&(0==o.privateLinesInfo.length&&0==o.privateFontsInfo.length&&0==o.privateImageInfo.length||(o.curTimestamp=x,o.FindIntelNodefromList(o.curTimestamp)),null!=o.oVideoHandle&&o.oVideoHandle.SR_Draw(e,t,r,n,a),o.subPortNum>0))for(var l=1;l<Pe;l++)0!=o.stFishEyeManager[l].nSubPort&&null!=o.stFishEyeManager[l].sCanvasID&&0!=o.stFishEyeManager[l].bInited&&null!=o.stFishEyeManager[l].pRender&&o.stFishEyeManager[l].pRender.SR_Draw(e,t,r,null,null);s(x)}))}},{key:"SetDisplayRect",value:function(e,t,r,i){return null!=this.oVideoHandle?this.oVideoHandle.SR_SetDisplayRect(e,t,r,i,1):0}},{key:"SetCanvasSize",value:function(e,t){return null!=this.oVideoHandle?this.oVideoHandle.SR_SetCanvasSize(e,t):0}},{key:"GetCanvasSize",value:function(){return null!=this.oVideoHandle?this.oVideoHandle.SR_GetCanvasSize():0}},{key:"SetAntialias",value:function(e){return null!=this.oVideoHandle?this.oVideoHandle.SR_SetAntialias(e):0}},{key:"SetD3DPostProcess",value:function(e,t){return null!=this.oVideoHandle?this.oVideoHandle.SR_SetImagePostProcess(e,t):0}},{key:"InitFECParam",value:function(){this.stFishEyeManager=[];for(var e=0;e<Pe;e++)this.stFishEyeManager[e]={},this.stFishEyeManager[e].pRender=null,this.stFishEyeManager[e].nSubPort=0,this.stFishEyeManager[e].sCanvasID=null,this.stFishEyeManager[e].bUsed=0,this.stFishEyeManager[e].bInit=0,this.stFishEyeManager[e].nValidSubPort=0,this.stFishEyeManager[e].emPlaceType=3,this.stFishEyeManager[e].emCorrectType=0,this.stFishEyeManager[e].emEffect=q.SR_DE_FISH_ORIGINAL;this.stFishParam=[];for(var t=0;t<Pe;t++)this.stFishParam[t]={},this.stFishParam[t].nUpDateType=0,this.stFishParam[t].stPTZParam={},this.stFishParam[t].stPTZParam.fPTZPositionX=0,this.stFishParam[t].stPTZParam.fPTZPositionY=0,this.stFishParam[t].stCycleParam={},this.stFishParam[t].stCycleParam.fRadiusLeft=0,this.stFishParam[t].stCycleParam.fRadiusRight=0,this.stFishParam[t].stCycleParam.fRadiusTop=0,this.stFishParam[t].stCycleParam.fRadiusBottom=0,this.stFishParam[t].fZoom=0,this.stFishParam[t].fWideScanOffset=0,this.stFishParam[t].stPTZColor={},this.stFishParam[t].stPTZColor.nR=0,this.stFishParam[t].stPTZColor.nG=0,this.stFishParam[t].stPTZColor.nB=0,this.stFishParam[t].stPTZColor.nAlpha=0,this.stFishParam[t].stPTZSelect={},this.stFishParam[t].stPTZSelect.fTop=0,this.stFishParam[t].stPTZSelect.fBottom=0,this.stFishParam[t].stPTZSelect.fLeft=0,this.stFishParam[t].stPTZSelect.fRight=0,this.stFishParam[t].nCut=0}},{key:"FEC_SetCanvasID",value:function(e){return this.mainFECCorrect=q.SR_DE_FISH_ORIGINAL,1}},{key:"FEC_ResetCorrectType",value:function(e,t,r){if(!1===this.hasSetFECParamManager&&(null==this.pFishParamManager&&(this.pFishParamManager=new ve),this.oVideoHandle.SR_SetFishParamManager(this.pFishParamManager),this.hasSetFECParamManager=!0),0!=r&&r!=D&&r!=M&&r!=w&&r!=F&&r!=I&&r!=A&&r!=B&&r!=O)return console.log("%c 20231122 hardDecoder not support correctType:%d","color:red",r),this.FECErrorCode=16,0;if(1!=this.FECParamJudge(e,t,r))return 0;var i;if(i=this._ConvertDisplayEffect(t,r),0==e&&null==this.stFishEyeManager[e].pRender&&(this.stFishEyeManager[e].pRender=this.oVideoHandle,this.stFishEyeManager[e].nSubPort=e,this.stFishEyeManager[e].sCanvasID=this.mainCanvasID,this.stFishEyeManager[e].bUsed=1,this.stFishEyeManager[e].bInited=1,this.stFishEyeManager[e].nValidSubPort=this.mainVaildSubPort,this.stFishEyeManager[e].emPlaceType=t,this.stFishEyeManager[e].emCorrectType=r,this.stFishEyeManager[e].emEffect=i,this.mainFECCorrect=i),null!=this.stFishEyeManager[e].pRender){this.stFishEyeManager[e].pRender.SR_DelSubPort(this.stFishEyeManager[e].nValidSubPort);var n=this.stFishEyeManager[e].pRender.SR_AddSubPort(i);if(-1==n)return console.info("%c FEC_ResetCorrectType SR_AddSubPort error subport:%d","color: red",n),0;if(this.stFishEyeManager[e].nValidSubPort=n,this.stFishEyeManager[e].emPlaceType=t,this.stFishEyeManager[e].emCorrectType=r,this.stFishEyeManager[e].emEffect=i,w<=this.stFishEyeManager[e].emCorrectType){var a=this.stFishEyeManager[e].pRender.SR_SetRenderState(2,0);1!=a&&console.log(">>>VideoRender.js SR_SetRenderState failed ret：%08x\n",a)}}return this.FECShowMode>0&&null!=this.stFishEyeManager[e].pRender&&this.stFishEyeManager[e].pRender.SR_SetPTZDisplayMode(this.FECShowMode),0==e&&(this.mainVaildSubPort=this.stFishEyeManager[e].nValidSubPort),1}},{key:"FEC_GetPort",value:function(e,t){if(0!=t&&t!=D&&t!=M&&t!=w&&t!=F&&t!=I&&t!=A&&t!=B&&t!=O)return console.log("%c 20231112 hardDecoder not support emCorrectType:%d","color:red",t),this.FECErrorCode=16,-1;var r;if(1!=this.FECParamJudge(-1,e,t))return-1;var i,n=0;for(r=1;r<Pe;r++)if(0==this.stFishEyeManager[r].nSubPort&&0==this.stFishEyeManager[r].bUsed){this.stFishEyeManager[r].nSubPort=r,this.stFishEyeManager[r].nValidSubPort=-1,this.stFishEyeManager[r].bUsed=1,this.stFishEyeManager[r].emPlaceType=e,this.stFishEyeManager[r].emCorrectType=t,n=r;break}return Pe==r?(console.info("%c FEC_GetPort-12 fish subport max","color: red"),this.FECErrorCode=1284,-1):(i=this._ConvertDisplayEffect(this.stFishEyeManager[n].emPlaceType,this.stFishEyeManager[n].emCorrectType),q.SR_DE_FISH_ORIGINAL!=i?(0==this.stFishEyeManager[n].bInited&&(this.stFishEyeManager[n].emEffect=i,this.stFishEyeManager[n].bInited=0,this.stFishParam[n].fZoom=.005,this.stFishParam[n].stPTZParam.fPTZPositionX=.5,this.stFishParam[n].stPTZParam.fPTZPositionY=.5,this.stFishParam[n].fWideScanOffset=0),this.FECErrorCode=0,this.subPortNum++,n):n<Pe&&0==this.stFishEyeManager[n].bInited?(this.stFishEyeManager[n].emEffect=i,this.stFishEyeManager[n].bInited=0,this.stFishParam[n].fZoom=0,this.stFishParam[n].stPTZParam.fPTZPositionX=0,this.stFishParam[n].stPTZParam.fPTZPositionY=0,this.stFishParam[n].fWideScanOffset=0,this.FECErrorCode=0,this.subPortNum++,n):(this.stFishEyeManager[r].pRender=null,this.stFishEyeManager[r].nSubPort=0,this.stFishEyeManager[r].sCanvasID=null,this.stFishEyeManager[r].bUsed=0,this.stFishEyeManager[r].bInited=0,this.stFishEyeManager[r].nValidSubPort=0,this.stFishEyeManager[r].emPlaceType=3,this.stFishEyeManager[r].emCorrectType=0,this.stFishEyeManager[r].emEffect=q.SR_DE_FISH_ORIGINAL,this.FECErrorCode=P,-1))}},{key:"FECParamJudge",value:function(e,t,r){if((2==t||3==t)&&I==r)return console.info("%c FEC_GetPort-1 floor and ceiling not support lat","color: red"),this.FECErrorCode=P,0;if(1==t&&A==r)return console.info("%c FEC_GetPort-2 wall not support cylinger","color: red"),this.FECErrorCode=P,0;if(1==t&&k==r)return console.info("%c FEC_GetPort-3 wall not support split cylinger","color: red"),this.FECErrorCode=P,0;if((2==t||3==t)&&B==r)return console.info("%c FEC_GetPort-4 floor and ceiling not support horizontal","color: red"),this.FECErrorCode=P,0;if((2==t||3==t)&&O==r)return console.info("%c FEC_GetPort-5 floor and ceiling not support vertical","color: red"),this.FECErrorCode=P,0;if(1!=t&&2!=t&&3!=t)return console.info("%c FEC_GetPort-6 emPlaceType only support floor, ceiling and wall","color: red"),this.FECErrorCode=MP_E_SUPPORT,0;if(0!=r&&r!=F&&r!=D&&r!=M&&r!=I&&r!=w&&r!=A&&r!=k&&r!=L&&r!=B&&r!=O)return console.info("%c FEC_GetPort-7 emCorrectType error","color: red"),this.FECErrorCode=MP_E_SUPPORT,0;for(var i=0;i<Pe;i++)if(i!=e){if(this.stFishEyeManager[i].bUsed&&this.stFishEyeManager[i].emPlaceType!=t)return console.info("%c FEC_GetPort-8 emPlaceType changed","color: red"),this.FECErrorCode=1303,0;if(this.stFishEyeManager[i].bUsed&&this.stFishEyeManager[i].emCorrectType!=F&&this.stFishEyeManager[i].emCorrectType!=w&&this.stFishEyeManager[i].emCorrectType!=A&&this.stFishEyeManager[i].emCorrectType!=k&&this.stFishEyeManager[i].emCorrectType!=L&&this.stFishEyeManager[i].emCorrectType!=B&&this.stFishEyeManager[i].emCorrectType!=O&&r!=F&&r!=w&&r!=A&&r!=k&&r!=L&&r!=B&&r!=O)return console.info("%c FEC_GetPort-9 origin/180/360/lat only display one port","color: red"),this.FECErrorCode=1304,0;if(this.stFishEyeManager[i].bUsed&&(this.stFishEyeManager[i].emCorrectType==F&&r==D||this.stFishEyeManager[i].emCorrectType==D&&r==F))return console.info("%c FEC_GetPort-10 180 cannot support ptz","color: red"),this.FECErrorCode=1304,0}return 1}},{key:"FEC_Enable",value:function(e){return e<1||e>31||null==e?(console.info("%c FEC_Enable-1 nSubPort:%d","color: red",e),this.FECErrorCode=E,0):null!==this.stFishEyeManager[e].pRender?(console.info("%c FEC_Enable-2 nSubPort:%d","color: red",e),this.FECErrorCode=1301,0):(null==this.stFishEyeManager[e].pRender&&(this.stFishEyeManager[e].pRender=new ye,null==this.pFishParamManager&&(this.pFishParamManager=new ve),this.stFishEyeManager[e].pRender.SR_SetFishParamManager(this.pFishParamManager)),1)}},{key:"FEC_SetWnd",value:function(e,t){if(e<1||e>31||null==e)return console.info("%c FEC_SetWnd-1 nSubPort:%d","color: red",e),this.FECErrorCode=E,0;if(null==this.stFishEyeManager[e].pRender)return console.info("%c FEC_SetWnd-2 nSubPort:%d pRender is null","color: red",e),this.FECErrorCode=b,0;if(0==this.stFishEyeManager[e].bUsed)return console.info("%c FEC_SetWnd-3 nSubPort:%d bUsed:%d","color: red",e,this.stFishEyeManager[e].bUsed),this.FECErrorCode=v,0;if(null==t)return console.info("%c FEC_SetWnd-4 nSubPort:%d sCanvasID:%s","color: red",e,t),this.FECErrorCode=1305,0;if(0!=this.stFishEyeManager[e].nSubPort&&0!=this.stFishEyeManager[e].bUsed){if(0!=this.stFishEyeManager[e].bInited&&null!=this.stFishEyeManager[e].sCanvasID)return t!=this.stFishEyeManager[e].sCanvasID?(console.info("%c FEC_SetWnd-5 nSubPort:%d sCanvasID:%s already init","color: red",e,t),this.FECErrorCode=1286,0):1;var r;r=this._ConvertDisplayEffect(this.stFishEyeManager[e].emPlaceType,this.stFishEyeManager[e].emCorrectType);var i=this.stFishEyeManager[e].pRender.SR_Init(t,$),n=this.stFishEyeManager[e].pRender.SR_AddSubPort(r);if(-1==n)return console.info("%c FEC_SetWnd SR_AddSubPort error subport:%d","color: red",e),0;if(this.stFishEyeManager[e].nValidSubPort=n,1!=i)return this.stFishEyeManager[e].bInited=0,this.stFishEyeManager[e].sCanvasID=null,this.FECErrorCode=v,0;if(this.stFishEyeManager[e].bInited=1,this.stFishEyeManager[e].sCanvasID=t,w<=this.stFishEyeManager[e].emCorrectType){var a=this.stFishEyeManager[e].pRender.SR_SetRenderState(2,0);1!=a&&console.log(">>>VideoRender.js SR_SetRenderState failed ret：%08x\n",a)}return this.FECShowMode>0&&this.stFishEyeManager[e].pRender.SR_SetPTZDisplayMode(this.FECShowMode),1}return this.FECErrorCode=v,0}},{key:"FEC_Disable",value:function(e,t,r){if(e<1||e>31||null==e)return console.info("%c FEC_Disable-1 nSubPort:%d","color: red",e),this.FECErrorCode=E,0;if(1==this.stFishEyeManager[e].bInited&&null!=this.stFishEyeManager[e].pRender){if(1!=this.stFishEyeManager[e].pRender.SR_DelSubPort(this.stFishEyeManager[e].nValidSubPort))return console.info("%c FEC_Disable-2 SR_DelSubPort error nSubPort:%d","color: red",e),0;this.stFishEyeManager[e].bInited=0,this.stFishEyeManager[e].nValidSubPort=-1,this.stFishEyeManager[e].pRender.SR_Destroy(),this.stFishEyeManager[e].pRender=null}return 1}},{key:"FEC_DelPort",value:function(e){return e<1||e>31||null==e?(console.info("%c FEC_DelPort-1 nSubPort:%d","color: red",e),this.FECErrorCode=E,0):0==this.stFishEyeManager[e].bUsed?(console.info("%c FEC_DelPort-2 nSubPort:%d bUsed：%d","color: red",e,this.stFishEyeManager[e].bUsed),this.FECErrorCode=v,0):(this.stFishEyeManager[e].nSubPort=0,this.stFishEyeManager[e].sCanvasID=null,this.stFishEyeManager[e].bUsed=0,this.stFishEyeManager[e].bInited=0,this.stFishEyeManager[e].nValidSubPort=0,this.stFishEyeManager[e].emPlaceType=3,this.stFishEyeManager[e].emCorrectType=0,this.stFishEyeManager[e].emEffect=q.SR_DE_FISH_ORIGINAL,this.stFishParam[e].stCycleParam.fRadiusLeft=0,this.stFishParam[e].stCycleParam.fRadiusRight=1,this.stFishParam[e].stCycleParam.fRadiusTop=0,this.stFishParam[e].stCycleParam.fRadiusBottom=1,this.subPortNum>0&&this.subPortNum--,1)}},{key:"FEC_SetParam",value:function(e,t){if(this.FECErrorCode=0,e<0||e>31||null==e)return console.info("%c FEC_SetParam-1 nSubPort:%d","color: red",e),this.FECErrorCode=E,0;if(null==this.stFishEyeManager[e].pRender)return console.info("%c FEC_SetParam-2 nSubPort:%d pRender:%d","color: red",e,this.stFishEyeManager[e].pRender),this.FECErrorCode=b,0;if(0==this.stFishEyeManager[e].bUsed)return console.info("%c FEC_SetParam-3 nSubPort:%d bUsed:%d","color: red",e,this.stFishEyeManager[e].bUsed),this.FECErrorCode=v,0;if(this.stFishEyeManager[e].emCorrectType>=w&&this.stFishEyeManager[e].emCorrectType<=O&&30&t.upDateType)return console.info("%c FEC_SetParam-4 nSubPort:%d not 3D","color: red",e),this.FECErrorCode=C,0;if(1&t.upDateType){if(null==t.stCycleParam)return this.FECErrorCode=R,0;for(var r=1;r<Pe;r++){if(this.stFishEyeManager[r].bUsed&&this.stFishEyeManager[r].nSubPort&&B==this.stFishEyeManager[r].emCorrectType&&(t.stCycleParam.fRadiusLeft<=-.5||t.stCycleParam.fRadiusLeft>=.4||t.stCycleParam.fRadiusRight<=.6||t.stCycleParam.fRadiusRight>=1.5||t.stCycleParam.fRadiusTop<=-.5||t.stCycleParam.fRadiusTop>0||t.stCycleParam.fRadiusBottom<1||t.stCycleParam.fRadiusBottom>=1.5||t.stCycleParam.fRadiusLeft+t.stCycleParam.fRadiusRight<=.8||t.stCycleParam.fRadiusLeft+t.stCycleParam.fRadiusRight>=1.2||t.stCycleParam.fRadiusTop+t.stCycleParam.fRadiusBottom<=.8||t.stCycleParam.fRadiusTop+t.stCycleParam.fRadiusBottom>=1.2))return this.FECErrorCode=R,0;if(this.stFishEyeManager[r].bUsed&&this.stFishEyeManager[r].nSubPort&&O==this.stFishEyeManager[r].emCorrectType&&(t.stCycleParam.fRadiusLeft<=-.5||t.stCycleParam.fRadiusLeft>0||t.stCycleParam.fRadiusRight<1||t.stCycleParam.fRadiusRight>=1.5||t.stCycleParam.fRadiusTop<=-.5||t.stCycleParam.fRadiusTop>=.4||t.stCycleParam.fRadiusBottom<=.6||t.stCycleParam.fRadiusBottom>=1.5||t.stCycleParam.fRadiusLeft+t.stCycleParam.fRadiusRight<=.8||t.stCycleParam.fRadiusLeft+t.stCycleParam.fRadiusRight>=1.2||t.stCycleParam.fRadiusTop+t.stCycleParam.fRadiusBottom<=.8||t.stCycleParam.fRadiusTop+t.stCycleParam.fRadiusBottom>=1.2))return this.FECErrorCode=R,0}}if(0==this.stFishEyeManager[e].bInited){if(4&t.upDateType){if(D!=this.stFishEyeManager[e].emCorrectType&&M!=this.stFishEyeManager[e].emCorrectType||1==this.stFishEyeManager[e].emPlaceType)return this.FECErrorCode=C,0;for(var i=1;i<Pe;i++)if(this.stFishEyeManager[i].nSubPort&&this.stFishEyeManager[i].bUsed&&this.stFishEyeManager[i].emCorrectType==F)return this.FECErrorCode=S,0;this.stFishParam[e].fWideScanOffset=t.fValue}if(16&t.upDateType){if(null==t.stPTZColor)return this.FECErrorCode=R,0;if(t.stPTZColor.nR>255||t.stPTZColor.nG>255||t.stPTZColor.nB>255||t.stPTZColor.nAlpha>255)return this.FECErrorCode=C,0;this.stFishParam[e].stPTZColor.nR=t.stPTZColor.nR,this.stFishParam[e].stPTZColor.nG=t.stPTZColor.nG,this.stFishParam[e].stPTZColor.nB=t.stPTZColor.nB,this.stFishParam[e].stPTZColor.nAlpha=t.stPTZColor.nAlpha}if(8&t.upDateType){if(F!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=C,0;this.stFishParam[e].stPTZParam.fPTZPositionX=t.fPTZParam.fPTZPositionX,this.stFishParam[e].stPTZParam.fPTZPositionY=t.fPTZParam.fPTZPositionY}if(2&t.upDateType){if(F!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=C,0;this.stFishParam[e].fZoom=t.fPTZZoom}if(32&t.upDateType){if(null==this.stFishParam.stPTZSelect)return 0;if(F!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=C,0;this.stFishParam.stPTZSelect.fTop=t.stPTZSelect.fTop,this.stFishParam.stPTZSelect.fBottom=t.stPTZSelect.fBottom,this.stFishParam.stPTZSelect.fLeft=t.stPTZSelect.fLeft,this.stFishParam.stPTZSelect.fRight=t.stPTZSelect.fRight}if(1&t.upDateType){if(null==t.stCycleParam)return this.FECErrorCode=R,0;if(0==this._IsValidRadiusParam(t.stCycleParam))return this.FECErrorCode=R,0;this.stFishParam[0].stCycleParam.fRadiusLeft=t.stCycleParam.fRadiusLeft,this.stFishParam[0].stCycleParam.fRadiusRight=t.stCycleParam.fRadiusRight,this.stFishParam[0].stCycleParam.fRadiusTop=t.stCycleParam.fRadiusTop,this.stFishParam[0].stCycleParam.fRadiusBottom=t.stCycleParam.fRadiusBottom}return 1}if(4&t.upDateType){if(D!=this.stFishEyeManager[e].emCorrectType&&M!=this.stFishEyeManager[e].emCorrectType||1==this.stFishEyeManager[e].emPlaceType)return this.FECErrorCode=C,0;for(var n=1;n<Pe;n++)if(this.stFishEyeManager[n].nSubPort&&this.stFishEyeManager[n].bUsed&&this.stFishEyeManager[n].emCorrectType==F)return this.FECErrorCode=S,0;var a={nFishParamType:2,bBlack:0};if(a.fAngle=t.fValue,1!=this.stFishEyeManager[e].pRender.SR_SetFishParam(a))return this.FECErrorCode=S,0;this.stFishParam[e].fWideScanOffset=t.fValue}if(16&t.upDateType){if(null==t.stPTZColor)return this.FECErrorCode=C,0;if(t.stPTZColor.nR>255||t.stPTZColor.nG>255||t.stPTZColor.nB>255||t.stPTZColor.nAlpha>255)return this.FECErrorCode=C,0;var o={};o.fR=float(t.stPTZColor.nR/255),o.fG=float(t.stPTZColor.nG/255),o.fB=float(t.stPTZColor.nB/255),o.fA=float(t.stPTZColor.nAlpha/255),this.stFishParam[e].stPTZColor.nR=t.stPTZColor.nR,this.stFishParam[e].stPTZColor.nG=t.stPTZColor.nG,this.stFishParam[e].stPTZColor.nB=t.stPTZColor.nB,this.stFishParam[e].stPTZColor.nAlpha=t.stPTZColor.nAlpha}if(8&t.upDateType){if(F!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=C,0;var s={nFishParamType:4,bBlack:0};if(s.fPTZX=t.fPTZParam.fPTZPositionX,s.fPTZY=t.fPTZParam.fPTZPositionY,1!=this.stFishEyeManager[e].pRender.SR_SetFishParam(s))return this.FECErrorCode=S,0;this.stFishParam[e].stPTZParam.fPTZPositionX=t.fPTZParam.fPTZPositionX,this.stFishParam[e].stPTZParam.fPTZPositionY=t.fPTZParam.fPTZPositionY}if(2&t.upDateType){if(F!=this.stFishEyeManager[e].emCorrectType)return this.FECErrorCode=C,0;var x={nFishParamType:3,bBlack:0};if(x.fZoom=t.fPTZZoom,1!=this.stFishEyeManager[e].pRender.SR_SetFishParam(x))return this.FECErrorCode=S,0;this.stFishParam[e].fZoom=t.fPTZZoom}if(1&t.upDateType){if(0==this._IsValidRadiusParam(t.stCycleParam))return this.FECErrorCode=R,0;var l={nFishParamType:1,bBlack:1};if(l.fRXLeft=t.stCycleParam.fRadiusLeft,l.fRXRight=t.stCycleParam.fRadiusRight,l.fRYTop=t.stCycleParam.fRadiusTop,l.fRYBottom=t.stCycleParam.fRadiusBottom,1!=this.stFishEyeManager[e].pRender.SR_SetFishParam(this.stFishEyeManager[e].nValidSubPort,l))return this.FECErrorCode=R,0;this.stFishParam[0].stCycleParam.fRadiusLeft=t.stCycleParam.fRadiusLeft,this.stFishParam[0].stCycleParam.fRadiusRight=t.stCycleParam.fRadiusRight,this.stFishParam[0].stCycleParam.fRadiusTop=t.stCycleParam.fRadiusTop,this.stFishParam[0].stCycleParam.fRadiusBottom=t.stCycleParam.fRadiusBottom}return 32&t.upDateType&&F==this.stFishEyeManager[e].emCorrectType&&1!=this.stFishEyeManager[e].pRender.SR_SetFishParam(this.stFishEyeManager[e].stPTZSelect)?(this.FECErrorCode=1299,0):1}},{key:"FEC_GetParam",value:function(e,t){return e<0||e>31||null==e?(console.info("%c FEC_GetParam-1 nSubPort:%d","color: red",e),this.FECErrorCode=E,0):null==this.stFishEyeManager[e].pRender?(console.info("%c FEC_GetParam-2 pRender:%d","color: red",this.stFishEyeManager[e].pRender),this.FECErrorCode=b,0):(this.stFishEyeManager[e].pRender.SR_GetFishParam(t),t.emCorrectType=this.stFishEyeManager[e].emCorrectType,1)}},{key:"_IsValidRadiusParam",value:function(e){return e.fRadiusBottom<=e.fRadiusTop||e.fRadiusRight<=e.fRadiusLeft?0:1}},{key:"FEC_SetViewParam",value:function(e,t,r){return e<0||e>31||null==e?(console.info("%c FEC_SetViewParam-1 nSubPort:%d","color: red",e),this.FECErrorCode=E,0):null==this.stFishEyeManager[e].pRender?(console.info("%c FEC_SetViewParam-2 pRender:%d","color: red",this.stFishEyeManager[e].pRender),this.FECErrorCode=b,0):t<1||t>3?(this.FECErrorCode=T,0):(this.FECErrorCode=0,0==this.stFishEyeManager[e].bInited?(this.FECErrorCode=v,0):w<=this.stFishEyeManager[e].emCorrectType?1!=this.stFishEyeManager[e].pRender.SR_SetViewParam(t,r)?(this.FECErrorCode=T,0):1:(this.FECErrorCode=C,0))}},{key:"FEC_GetViewParam",value:function(e,t,r){return r.fValue=-1,e<0||e>31||null==e?(console.info("%c FEC_GetViewParam-1 nSubPort:%d","color: red",e),this.FECErrorCode=E,0):null==this.stFishEyeManager[e].pRender?(console.info("%c FEC_GetViewParam-2 pRender:%d","color: red",this.stFishEyeManager[e].pRender),this.FECErrorCode=b,0):t<1||t>3||0==this.stFishEyeManager[e].bInited?0:(w<=this.stFishEyeManager[e].emCorrectType&&this.stFishEyeManager[e].pRender.SR_GetViewParam(t,r),1)}},{key:"FEC_SetDisplayRegion",value:function(e,t,r,i,n,a,o){return e<0||e>31||null==e?(console.info("%c FEC_SetDisplayRegion-1 nSubPort:%d","color: red",e),this.FECErrorCode=E,0):null==this.stFishEyeManager[e].pRender?(console.info("%c FEC_SetDisplayRegion-2 pRender:%d","color: red",this.stFishEyeManager[e].pRender),this.FECErrorCode=b,0):0!=t||0!=r?(this.FECErrorCode=T,0):0!=this.stFishEyeManager[e].emCorrectType&&this.stFishEyeManager[e].emCorrectType!=D&&this.stFishEyeManager[e].emCorrectType!=M&&this.stFishEyeManager[e].emCorrectType!=I?(this.FECErrorCode=P,0):0==this.stFishEyeManager[e].bInited?(this.FECErrorCode=v,0):i<0||n<0||a<0||o<0?(this.FECErrorCode=T,0):1!=this.stFishEyeManager[e].pRender.SR_SetDisplayRect(i,n,a,o,1)?(this.FECErrorCode=1297,0):1}},{key:"FEC_SetBackCilling",value:function(e,t){return e<0||e>31||null==e?(this.FECErrorCode=E,0):null==this.stFishEyeManager[e].pRender?(this.FECErrorCode=b,0):0==this.stFishEyeManager[e].bInited?(this.FECErrorCode=v,0):1!=this.stFishEyeManager[e].pRender.SR_SetRenderState(2,t)?(this.FECErrorCode=1297,0):1}},{key:"FEC_GetPTZPort",value:function(e,t,r){if(null!=this.stFishEyeManager[e].pRender){var i={nPTZPort:-1};if(1==this.stFishEyeManager[e].pRender.SR_GetPTZPort(t,r,i))return i.nPTZPort}return-1}},{key:"FEC_SetPTZDisplayMode",value:function(e){return e>=0&&e<=2?(null!=this.stFishEyeManager[0].pRender&&this.stFishEyeManager[0].pRender.SR_SetPTZDisplayMode(e),this.FECShowMode=e,1):(console.info("%c FEC_SetPTZDisplayMode ptzMode:%d","color: red",e),0)}},{key:"CheckFrameRGB",value:function(e,t,r,i,n,a){if(null==e)return 0;for(var o=e.width/(i-1),s=e.height/(r-1),x=0,l=0,c=[],f=0;f<r*i;f++)c[f]=0,this.aPOSAdaptBuf[f]=0;if(t){for(var h=0,u=0;u<e.height;u++)for(var d=0;d<e.width;d++){x=(x=Math.round(d/(o/2)/2))<i?x:i-1,l=(l=Math.round(u/(s/2)/2))<r?l:r-1;var _=e.pBuffer[h],p=e.pBuffer[h+1],m=e.pBuffer[h+2],g=Math.round(.299*_+.587*p+.114*m);this.aPOSAdaptBuf[x+l*i]+=g,c[x+l*i]++,h+=4}for(var y=0,b=0;b<r*i;b++)y=this.aPOSAdaptBuf[b]/c[b],this.aPOSAdaptBuf[b]=y>128?0:1}else{for(var v=Math.round(n*e.width),P=Math.round(a*e.height),S=P-2;S<P+2;S++)for(var R=v-2;R<v+2;R++){var C=4*Math.floor((4*R+S*e.width*4)/4),E=e.pBuffer[C],T=e.pBuffer[C+1],F=e.pBuffer[C+2],D=Math.round(.299*E+.587*T+.114*F);this.aPOSAdaptBuf[0]+=D,c[0]++}this.aPOSAdaptBuf[0]=this.aPOSAdaptBuf[0]/c[0]>128?0:1}return 1}},{key:"GetWaterFontParam",value:function(e){var t=e.pFontString.length,r=e.pstFontRotate.fRotateAngle%360/360*2*Math.PI,i=Math.min(e.pstFontSize.nFontWidth,e.pstFontSize.nFontHeight),n=i/this.mainCanvasID.width,a=i/this.mainCanvasID.height,o=n*Math.cos(Math.PI/2-r)*e.pSpace,s=a*Math.sin(Math.PI/2-r)*e.pSpace,x=[],l=[],c=[];if(e.nFontAlign)for(var f=0;f<t;f++)x[f]=e.pFontString[0].length*n/6,l[f]=Math.atan2(x[0],s),c[f]=Math.sqrt(x[0]*x[0],s*s);else for(var h=0;h<t;h++)x[h]=0,l[h]=0,c[h]=0;var u=Math.floor(e.pstFontNumber.nRowNumber),d=Math.floor(e.pstFontNumber.nColNumber),_=u*d;if(e.pstFontRotate.fFillFullScreen){for(var p=[],m=[],g=1/(u-1),y=0;y<u;y++)p[y]=g*y-s*((t-1)/2);for(var b=1/(d-1),v=0;v<d;v++)m[v]=b*v+o*((t-1)/2);for(var P=0;P<_;++P)for(var S=0;S<t;S++){this.pWaterFontParam[t*P+S]={},this.pWaterFontParam[t*P+S].pString=e.pFontString[S],this.pWaterFontParam[t*P+S].nFontWidth=i,this.pWaterFontParam[t*P+S].nFontHeight=i,this.pWaterFontParam[t*P+S].pstStartPos={};var R=P%d,C=Math.floor(P/d),E=Math.PI/2-r+l[S];this.pWaterFontParam[t*P+S].pstStartPos.fX=m[R]-S*o+c[S]*Math.cos(E),this.pWaterFontParam[t*P+S].pstStartPos.fY=p[C]+S*s-c[S]*Math.sin(E),e.nColorAdapt?(this.pWaterFontParam[t*P+S].pstFontColor={},this.pWaterFontParam[t*P+S].pstFontColor.fR=this.aPOSAdaptBuf[P],this.pWaterFontParam[t*P+S].pstFontColor.fG=this.aPOSAdaptBuf[P],this.pWaterFontParam[t*P+S].pstFontColor.fB=this.aPOSAdaptBuf[P],this.pWaterFontParam[t*P+S].pstFontColor.fA=e.pstFontColor.fA):this.pWaterFontParam[t*P+S].pstFontColor=e.pstFontColor,this.pWaterFontParam[t*P+S].bBackGround=!1,this.pWaterFontParam[t*P+S].pstBGColor=null,this.pWaterFontParam[t*P+S].fRotateAngle=e.pstFontRotate.fRotateAngle,this.pWaterFontParam[t*P+S].pFontFamily=e.pFontFamily,e.nFontAlign?(this.pWaterFontParam[t*P+S].textAlign="left",this.pWaterFontParam[t*P+S].textBaseline="top"):(this.pWaterFontParam[t*P+S].textAlign="center",this.pWaterFontParam[t*P+S].textBaseline="middle")}}else for(var T=0;T<e.pFontString.length;T++)this.pWaterFontParam[T]={},this.pWaterFontParam[T].pString=e.pFontString[T],this.pWaterFontParam[T].nFontWidth=i,this.pWaterFontParam[T].nFontHeight=i,this.pWaterFontParam[T].pstStartPos={},this.pWaterFontParam[T].pstStartPos.fX=e.pstStartPos.fX-T*o,this.pWaterFontParam[T].pstStartPos.fY=e.pstStartPos.fY+T*s,e.nColorAdapt?(this.pWaterFontParam[T].pstFontColor={},this.pWaterFontParam[T].pstFontColor.fR=this.aPOSAdaptBuf[0],this.pWaterFontParam[T].pstFontColor.fG=this.aPOSAdaptBuf[0],this.pWaterFontParam[T].pstFontColor.fB=this.aPOSAdaptBuf[0],this.pWaterFontParam[T].pstFontColor.fA=e.pstFontColor.fA):this.pWaterFontParam[T].pstFontColor=e.pstFontColor,this.pWaterFontParam[T].bBackGround=!1,this.pWaterFontParam[T].pstBGColor=null,this.pWaterFontParam[T].fRotateAngle=e.pstFontRotate.fRotateAngle,this.pWaterFontParam[T].pFontFamily=e.pFontFamily,e.nFontAlign?(this.pWaterFontParam[T].textAlign="left",this.pWaterFontParam[T].textBaseline="top"):(this.pWaterFontParam[T].textAlign="center",this.pWaterFontParam[T].textBaseline="middle");return 1}},{key:"SetWaterMarkFont",value:function(e,t){if(this.pWaterFontParam.splice(0,this.pWaterFontParam.length),null===e)return 1;if(e.nColorAdapt){var r={nWidth:16,nHeight:16,nBufferLen:0};if(1==this.oVideoHandle.SR_GetCaptureSize(r)){var i=new Uint8Array(r.nBufferLen),n={};if(n.pBuffer=i,this.oVideoHandle.SR_CaptureScreen(n),n.width=r.nWidth,n.height=r.nHeight,e.pstFontRotate.fFillFullScreen){var a=Math.floor(e.pstFontNumber.nRowNumber),o=Math.floor(e.pstFontNumber.nColNumber);this.CheckFrameRGB(n,1,a,o,0,0)}else this.CheckFrameRGB(n,0,1,1,e.pstStartPos.fX,e.pstStartPos.fY);i=null}}return this.GetWaterFontParam(e),1}},{key:"ImageDecoder",value:function(e,t,r){var i=this;e.decode({frameIndex:r}).then((function(n){i.pWaterImageParam[r]={},i.pWaterImageParam[r].videoStream=n.image,i.pWaterImageParam[r].nImageWidth=n.image.displayWidth,i.pWaterImageParam[r].nImageHeight=n.image.displayHeight,null!=t.pstRectPos?i.pWaterImageParam[r].pstRectPos=t.pstRectPos:i.pWaterImageParam[r].pstRectPos={fLeft:0,fRight:.1,fTop:0,fBottom:.1},null!=t.fAlpha&&t.fAlpha<=1&&t.fAlpha>=0?i.pWaterImageParam[r].fAlpha=t.fAlpha:i.pWaterImageParam[r].fAlpha=1,i.waterMarkImageMax=e.tracks.selectedTrack.frameCount,r<e.tracks.selectedTrack.frameCount-1&&i.ImageDecoder(e,t,r+1)}))}},{key:"SetWaterMarkImage",value:function(e){if(this.pWaterImageParam.splice(0,this.pWaterImageParam.length),null===e)return 1;if(null!=e.pImageData){var t=new ImageDecoder({data:e.pImageData,type:"image/"+e.pImageType});t.tracks.ready.then((function(){})),this.ImageDecoder(t,e,0)}return this.waterMarkImageIndex=0,1}},{key:"_ConvertDisplayEffect",value:function(e,t){switch(e){case 1:return F==t?q.SR_DE_FISH_PTZ_WALL:M==t||I==t?q.SR_DE_FISH_PANORAMA_WALL:w==t?q.SR_DE_FISH_SEMISPHERE:L==t?q.SR_DE_FISH_PLANET:B==t?q.SR_DE_FISH_ARCSPHERE_HORIZONTAL_WALL:O==t?q.SR_DE_FISH_ARCSPHERE_VERTICAL_WALL:q.SR_DE_FISH_ORIGINAL;case 2:return F==t?q.SR_DE_FISH_PTZ_FLOOR:M==t?q.SR_DE_FISH_PANORAMA_FLOOR_360:D==t?q.SR_DE_FISH_PANORAMA_FLOOR_180:I==t?q.SR_DE_FISH_PANORAMA_WALL:w==t?q.SR_DE_FISH_SEMISPHERE:A==t?q.SR_DE_FISH_CYLINDER_FLOOR:k==t?q.SR_DE_FISH_CYLINDER_SPLIT_FLOOR:L==t?q.SR_DE_FISH_PLANET:q.SR_DE_FISH_ORIGINAL;case 3:return F==t?q.SR_DE_FISH_PTZ_CEILING:M==t?q.SR_DE_FISH_PANORAMA_CEILING_360:D==t?q.SR_DE_FISH_PANORAMA_CEILING_180:I==t?q.SR_DE_FISH_PANORAMA_WALL:w==t?q.SR_DE_FISH_SEMISPHERE:A==t?q.SR_DE_FISH_CYLINDER_CEILING:k==t?q.SR_DE_FISH_CYLINDER_SPLIT_CEILING:L==t?q.SR_DE_FISH_PLANET:q.SR_DE_FISH_ORIGINAL;default:return q.SR_DE_FISH_ORIGINAL}}},{key:"GetCanvasData",value:function(e){var t={nWidth:0,nHeight:0,nBufferLen:0};(1!=this.oVideoHandle.SR_GetCaptureSize(t)||t.nBufferLen<=0)&&e(null);var r=new Uint8Array(t.nBufferLen);null==r&&e(null);var i={};i.pBuffer=r,this.oVideoHandle.SR_CaptureScreen(i),e(r,t.nWidth,t.nHeight)}},{key:"FindIntelNodefromList",value:function(e){if(0!=this.privateLinesInfo.length){var t=this.privateLinesInfo[0].absTimeStamp;if(t<=e+100&&t>e-100)this.curLinesInfo=this.privateLinesInfo.shift();else if(t>e+2e3||t<e-2e3)for(this.curLinesInfo=this.privateLinesInfo.shift();this.privateLinesInfo.length>0;){var r=this.privateLinesInfo[0].absTimeStamp;if(!(r>e+2e3||r<e-2e3))break;this.curLinesInfo=this.privateLinesInfo.shift()}}if(0!=this.privateFontsInfo.length){var i=this.privateFontsInfo[0].absTimeStamp;if(i<=e+1e3&&i>e-1e3)this.curFontsInfo=this.privateFontsInfo.shift();else if(i>e+2e3||i<e-2e3)for(this.curFontsInfo=this.privateFontsInfo.shift();this.privateFontsInfo.length>0;){var n=this.privateFontsInfo[0].absTimeStamp;if(!(n>e+2e3||n<e-2e3))break;this.curFontsInfo=this.privateFontsInfo.shift()}}if(0!=this.privateImageInfo.length){var a=this.privateImageInfo[0].absTimeStamp;if(a<=e+1e3&&a>e-1e3)this.curImagesInfo=this.privateImageInfo.shift();else if(a>e+2e3||a<e-2e3)for(this.curImagesInfo=this.privateImageInfo.shift();this.privateImageInfo.length>0;){var o=this.privateImageInfo[0].absTimeStamp;if(!(o>e+2e3||o<e-2e3))break;this.curImagesInfo=this.privateImageInfo.shift()}}return 1}},{key:"RenderPrivateData",value:function(e){return 0!=this.privateLinesInfo.length||e||(this.curLinesInfo=null),1}},{key:"InputPrivateInfo",value:function(e,t,r){var i=!1,n=0;if(e.linesNum>0){if(e.absTimeStamp<=this.maxPrivateLineTimeStamp){var a=0;for(a=0;a<this.privateLinesInfo.length;a++)if(this.privateLinesInfo[a].absTimeStamp==e.absTimeStamp){i=!0,n=a;break}}if(i){var o=this.privateLinesInfo[n].linesNum;this.privateLinesInfo[n].linesNum=o+e.linesNum;for(var s=0;s<e.linesNum;s++){this.privateLinesInfo[n].stDrawLinesArray[s+o]={},this.privateLinesInfo[n].stDrawLinesArray[s+o].vertex_num=e.stDrawLinesArray[s].vertex_num,this.privateLinesInfo[n].stDrawLinesArray[s+o].lineWidth=e.stDrawLinesArray[s].lineWidth,this.privateLinesInfo[n].stDrawLinesArray[s+o].bFill=e.stDrawLinesArray[s].bFill,this.privateLinesInfo[n].stDrawLinesArray[s+o].bLoop=e.stDrawLinesArray[s].bLoop,this.privateLinesInfo[n].stDrawLinesArray[s+o].color={},this.privateLinesInfo[n].stDrawLinesArray[s+o].color.R=e.stDrawLinesArray[s].color.R,this.privateLinesInfo[n].stDrawLinesArray[s+o].color.G=e.stDrawLinesArray[s].color.G,this.privateLinesInfo[n].stDrawLinesArray[s+o].color.B=e.stDrawLinesArray[s].color.B,this.privateLinesInfo[n].stDrawLinesArray[s+o].color.A=e.stDrawLinesArray[s].color.A,this.privateLinesInfo[n].stDrawLinesArray[s+o].stPoint=[];for(var x=0;x<e.stDrawLinesArray[s].vertex_num;x++)this.privateLinesInfo[n].stDrawLinesArray[s+o].stPoint[x]={},this.privateLinesInfo[n].stDrawLinesArray[s+o].stPoint[x].x=e.stDrawLinesArray[s].stPoint[x].x,this.privateLinesInfo[n].stDrawLinesArray[s+o].stPoint[x].y=e.stDrawLinesArray[s].stPoint[x].y}}else{this.maxPrivateLineTimeStamp<e.absTimeStamp&&(this.maxPrivateLineTimeStamp=e.absTimeStamp);var l={};l.linesNum=e.linesNum,l.absTimeStamp=e.absTimeStamp,l.stDrawLinesArray=[];for(var c=0;c<e.linesNum;c++){l.stDrawLinesArray[c]={},l.stDrawLinesArray[c].vertex_num=e.stDrawLinesArray[c].vertex_num,l.stDrawLinesArray[c].lineWidth=e.stDrawLinesArray[c].lineWidth,l.stDrawLinesArray[c].bFill=e.stDrawLinesArray[c].bFill,l.stDrawLinesArray[c].bLoop=e.stDrawLinesArray[c].bLoop,l.stDrawLinesArray[c].color={},l.stDrawLinesArray[c].color.R=e.stDrawLinesArray[c].color.R,l.stDrawLinesArray[c].color.G=e.stDrawLinesArray[c].color.G,l.stDrawLinesArray[c].color.B=e.stDrawLinesArray[c].color.B,l.stDrawLinesArray[c].color.A=e.stDrawLinesArray[c].color.A,l.stDrawLinesArray[c].stPoint=[];for(var f=0;f<e.stDrawLinesArray[c].vertex_num;f++)l.stDrawLinesArray[c].stPoint[f]={},l.stDrawLinesArray[c].stPoint[f].x=e.stDrawLinesArray[c].stPoint[f].x,l.stDrawLinesArray[c].stPoint[f].y=e.stDrawLinesArray[c].stPoint[f].y}this.privateLinesInfo.push(l)}}if(t.nFontsNum>0){if(t.absTimeStamp<=this.maxPrivateLineTimeStamp){var h=0;for(h=0;h<this.privateFontsInfo.length;h++)if(this.privateFontsInfo[h].absTimeStamp==t.absTimeStamp){i=!0,n=h;break}}if(i);else{this.maxPrivateLineTimeStamp<t.absTimeStamp&&(this.maxPrivateLineTimeStamp=t.absTimeStamp);var u={};u.nFontsNum=t.nFontsNum,u.absTimeStamp=t.absTimeStamp,u.stDrawFontsArray=[];for(var d=0;d<t.nFontsNum;d++)u.stDrawFontsArray[d]={},u.stDrawFontsArray[d].nFontSizeW=t.stDrawFontsArray[d].nFontSizeW,u.stDrawFontsArray[d].nFontSizeH=t.stDrawFontsArray[d].nFontSizeH,u.stDrawFontsArray[d].color={},u.stDrawFontsArray[d].color.R=t.stDrawFontsArray[d].color.R,u.stDrawFontsArray[d].color.G=t.stDrawFontsArray[d].color.G,u.stDrawFontsArray[d].color.B=t.stDrawFontsArray[d].color.B,u.stDrawFontsArray[d].color.A=t.stDrawFontsArray[d].color.A,u.stDrawFontsArray[d].stPoint={},u.stDrawFontsArray[d].stPoint.x=t.stDrawFontsArray[d].stPoint.x,u.stDrawFontsArray[d].stPoint.y=t.stDrawFontsArray[d].stPoint.y,u.stDrawFontsArray[d].fontstring=t.stDrawFontsArray[d].fontString;this.privateFontsInfo.push(u)}}if(r.nPixelFormat>0){if(r.absTimeStamp<=this.maxPrivateLineTimeStamp){var _=0;for(_=0;_<this.privateImageInfo.length;_++)if(this.privateImageInfo[_].absTimeStamp==r.absTimeStamp){i=!0,n=_;break}}if(i);else{this.maxPrivateLineTimeStamp<r.absTimeStamp&&(this.maxPrivateLineTimeStamp=r.absTimeStamp);var p={};p.absTimeStamp=r.absTimeStamp,p.nWidth=r.nWidth,p.nHeight=r.nHeight,p.pstRect={},p.pstRect.fTop=r.pstRect.fTop,p.pstRect.fBottom=r.pstRect.fBottom,p.pstRect.fLeft=r.pstRect.fLeft,p.pstRect.fRight=r.pstRect.fRight,p.nPixelFormat=r.nPixelFormat,p.fAlpha=r.fAlpha,p.picImageData=r.picImageData,this.privateImageInfo.push(p)}}return 1}},{key:"WebGLDisplayCallBack",value:function(e){if(0!=e.privateLinesInfo.length||null!=e.curLinesInfo){if(null!=e.curLinesInfo){for(var t=[],r=0,i=1,n=0;n<e.curLinesInfo.linesNum;n++){t[n]={},t[n].nPointNum=e.curLinesInfo.stDrawLinesArray[n].vertex_num,t[n].nLineWidth=e.curLinesInfo.stDrawLinesArray[n].lineWidth,i=e.curLinesInfo.stDrawLinesArray[n].bFill,t[n].bLoop=e.curLinesInfo.stDrawLinesArray[n].bLoop,t[n].pstColor={},t[n].pstColor.fR=e.curLinesInfo.stDrawLinesArray[n].color.R,t[n].pstColor.fG=e.curLinesInfo.stDrawLinesArray[n].color.G,t[n].pstColor.fB=e.curLinesInfo.stDrawLinesArray[n].color.B,t[n].pstColor.fA=e.curLinesInfo.stDrawLinesArray[n].color.A,t[n].pstPoints=[];for(var a=0;a<t[n].nPointNum;a++)t[n].pstPoints[a]={},t[n].pstPoints[a].fX=e.curLinesInfo.stDrawLinesArray[n].stPoint[a].x,t[n].pstPoints[a].fY=e.curLinesInfo.stDrawLinesArray[n].stPoint[a].y;r+=t[n].nPointNum}e.oVideoHandle.SR_DrawLinesEx(t,e.curLinesInfo.linesNum,r,i)}e.curLinesInfo=null}if((0!=e.privateFontsInfo.length||null!=e.curFontsInfo)&&null!=e.curFontsInfo&&0!=e.curFontsInfo.nFontsNum){for(var o=[],s=0;s<e.curFontsInfo.nFontsNum;s++){var x={},l=e.curFontsInfo.stDrawFontsArray[s].fontstring,c={};c.fX=e.curFontsInfo.stDrawFontsArray[s].stPoint.x,c.fY=e.curFontsInfo.stDrawFontsArray[s].stPoint.y;var f={fR:1,fG:0,fB:0};f.fA=e.curFontsInfo.stDrawFontsArray[s].color.A;var h=e.curFontsInfo.stDrawFontsArray[s].nFontSizeW,u=e.curFontsInfo.stDrawFontsArray[s].nFontSizeH;x.pString=l,x.pstStartPos=c,x.nFontWidth=h,x.nFontHeight=u,x.pstFontColor=f,x.bBackGround=!1,x.pstBGColor=null,x.fRotateAngle=0,x.pFontFamily="sans-serif",o.push(x)}e.oVideoHandle.SR_DrawFontEx(o,e.curFontsInfo.nFontsNum)}if(0!=e.privateImageInfo.length||null!=e.curImagesInfo){var d=null;null!=e.curImagesInfo&&null!=e.curImagesInfo&&null!=e.curImagesInfo.picImageData&&null!=e.curImagesInfo.picImageData&&(d=new Uint16Array(e.curImagesInfo.picImageData.buffer)),null!=e.curImagesInfo&&e.curImagesInfo.nPixelFormat>0&&e.oVideoHandle.SR_DrawImage(d,e.curImagesInfo.nWidth,e.curImagesInfo.nHeight,e.curImagesInfo.pstRect,e.curImagesInfo.nPixelFormat,e.curImagesInfo.fAlpha)}if(0!==e.pWaterFontParam.length&&e.oVideoHandle.SR_DrawFontEx(e.pWaterFontParam,e.pWaterFontParam.length),0!==e.pWaterImageParam.length){e.waterMarkImageIndex>=e.waterMarkImageMax&&(e.waterMarkImageIndex=0);var _=e.waterMarkImageIndex;e.oVideoHandle.SR_DrawImage(e.pWaterImageParam[_].videoStream,e.pWaterImageParam[_].nImageWidth,e.pWaterImageParam[_].nImageHeight,e.pWaterImageParam[_].pstRectPos,$,e.pWaterImageParam[_].fAlpha),e.waterMarkImageIndex++}}}]),t}(),Re=function(){function t(){e(this,t),this.startTime=0,this.curTime=0,this.timeWalk=0,this.lastDate=0,this.preTimerStamp=0}return o(t,[{key:"Init",value:function(){this.startTime=this.GetCurTime()}},{key:"GetCurTime",value:function(){return this.curTime=60*(new Date).getHours()*60*1e3+60*(new Date).getMinutes()*1e3+1e3*(new Date).getSeconds()+(new Date).getMilliseconds(),this.lastDate=(new Date).getDate(),this.curTime}},{key:"GetTimerWalk",value:function(){var e=this.GetCurTime()-this.startTime;return this.lastDate!==(new Date).getDate()&&(e+=24*((new Date).getDate()-this.lastDate)*60*60*1e3),e}},{key:"timerReset",value:function(){this.startTime=0,this.curTime=0,this.timeWalk=0,this.lastDate=0,this.preTimerStamp=0}}]),t}(),Ce=function(){function t(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e(this,t),this.canvas=null,this.streamOpenMode=0,this.context=null,this.oVideoDecoder=null,this.frameBuffers=[],this.initTimer=!1,this.preTimeStamp=0,this.baseTimeStamp=0,this.resetTimer=!0,this.RenderFrame=this.RenderFrame.bind(this),this.renderCurStatus=2,this.playSpeed=1,this.nplaySpeed=1,this.displayBuf=14,this.needForward=!1,this.firstFrame=!0,this.LatcyTime=0,this.displayFrameInfoCB=null,this.displayFrameInfo=[],this.curFrameInfo={},this.curFrameInfo.timeStamp=0,this.sx=0,this.sy=0,this.sw=0,this.sh=0,this.displayRunning=!1,this.oRenderTimer=null,this.waitIFrameTimestamp=0,this.curFrame=null,this.player=null,null!=r&&(this.player=r),this.renderEngine="webgl",this.oVideoRender=null,this.FECCanvasID="",this.oVideoRender=new Se}return o(t,[{key:"init",value:function(e,t,r,i){this.canvas=e,this.streamOpenMode=t,this.renderEngine=i,this.SetCurStatus(2),null==this.oVideoDecoder&&(this.oVideoDecoder=new U(r,this,this.player),null!==this.oVideoDecoder&&this.oVideoDecoder.initDecoder()),this.frameBuffers=this.oVideoDecoder.ready_frames,null!=this.oVideoRender&&this.oVideoRender.InitDisplay(this.canvas,this.renderEngine,256),null==this.oRenderTimer&&(this.oRenderTimer=new Re)}},{key:"HardDecodeError",value:function(){return this.player._switchHardToSoft(),1}},{key:"inputData",value:function(e,t){var r={};r.port=t.port,r.codecType=t.codecType,r.frameType=t.frameType,r.frameSize=t.frameSize,r.width=t.width,r.height=t.height,r.timeStamp=t.timeStamp,r.frameRate=t.frameRate,r.frameNum=t.frameNum,r.interlace=t.interlace,r.streamEnd=t.streamEnd,r.cropLeft=t.cropLeft,r.cropRight=t.cropRight,r.cropTop=t.cropTop,r.cropBottom=t.cropBottom,r.year=t.year,r.month=t.month,r.week=t.week,r.day=t.day,r.hour=t.hour,r.minute=t.minute,r.second=t.second,r.milliseconds=t.milliseconds,this.displayFrameInfo.push(r),this.oVideoDecoder.inputData(e,t)}},{key:"_resetDecoder",value:function(){var e=this;return new Promise((function(t,r){e.oVideoDecoder.resetDecoder().then((function(){e.displayFrameInfo.splice(0,e.displayFrameInfo.length),e.curFrameInfo={},e.oVideoRender.DeInitPrivateParam(),e.renderCurStatus=2,e.player?e.player.JSPlayM4_ResetEnd():postMessage({function:"resetEnd"}),t()}),(function(){r()}))}))}},{key:"_resetRenderTimer",value:function(){this.initTimer=!1,this.preTimeStamp=0,this.baseTimeStamp=0,this.resetTimer=!0,null!=this.oRenderTimer&&this.oRenderTimer.timerReset(),this.RenderFrame=this.RenderFrame.bind(this),this.renderCurStatus=2,this.curTimeStamp=0,this.getImageJPEG=!1,this.getImageBMP=!1,this.getCropImageJPEG=!1,this.getCropImageBMP=!1,this.displayFrameInfoCB=null,this.displayFrameInfo.splice(0,this.displayFrameInfo.length),this.curFrameInfo={}}},{key:"_destroyPlayCtrl",value:function(){var e=this;this.oVideoDecoder.destroyDecoder().then((function(){e.oVideoDecoder=null,null!=e.oVideoRender&&(e.oVideoRender.ReleaseDisplay(),e.oVideoRender=null),e._resetRenderTimer(),e.oRenderTimer=null,e.displayRunning=!1,console.log(">>>JS 02 destroy oVideoDecoder/oVideoRender")}),(function(){console.log("stop failed ")}))}},{key:"RenderFrame",value:function(){var e=this;switch(this.renderCurStatus){case 0:this._resetRenderTimer(),this._resetDecoder().then((function(){var t=setTimeout((function(){e.RenderFrame(),clearTimeout(t)}),1)}),(function(){}));break;case 2:if(this.displayRunning)this.chooseFrame().then((function(t){if(e.curFrame=t,-1==e.displayBuf||0==e.streamOpenMode&&0==e.LatcyTime)null!=e.curFrame&&(e.curTimeStamp=e.curFrame.timestamp,e.paint(e.curFrame)),requestAnimationFrame(e.RenderFrame);else if(null!=e.curFrame){e.initTimer&&!e.resetTimer||(e.oRenderTimer.Init(),e.initTimer=!0,e.resetTimer=!1,e.preTimeStamp=e.curFrame.timestamp,e.baseTimeStamp=e.curFrame.timestamp,1==e.streamOpenMode&&(e.LatcyTime=0)),e.curTimeStamp=e.curFrame.timestamp;var r=e.curTimeStamp-e.preTimeStamp,i=e.curTimeStamp-e.baseTimeStamp;(r>5e3||r<0||i<0)&&(e.oRenderTimer.Init(),e.preTimeStamp=e.curFrame.timestamp,e.baseTimeStamp=e.curTimeStamp);var n=(e.curTimeStamp-e.baseTimeStamp+e.LatcyTime)/e.playSpeed-e.oRenderTimer.GetTimerWalk();if(n<15&&n>-15)e.paint(e.curFrame),e.preTimeStamp=e.curTimeStamp,e.RenderFrame();else if(n<0)e.paint(e.curFrame),e.preTimeStamp=e.curTimeStamp,e.RenderFrame();else var a=setTimeout((function(){2==e.renderCurStatus?(e.paint(e.curFrame),e.preTimeStamp=e.curTimeStamp,e.RenderFrame()):e.RenderFrame(),clearTimeout(a)}),n-5)}else{e.playSpeed;var o=setTimeout((function(){e.RenderFrame(),clearTimeout(o)}),0)}}));else var t=setTimeout((function(){e.RenderFrame(),clearTimeout(t)}),5);break;case 3:var r=setTimeout((function(){e._refresh(),e.RenderFrame(),clearTimeout(r)}),5);break;case 5:if(this.needForward)this.chooseFrame().then((function(t){e.curFrame=t;var r=setTimeout((function(){null!=e.curFrame&&(e.paint(e.curFrame),e.needForward=!1),e.RenderFrame(),clearTimeout(r)}),1)}));else var i=setTimeout((function(){e._refresh(),e.RenderFrame(),clearTimeout(i)}),5);break;case 4:return void this._destroyPlayCtrl();default:return}}},{key:"paint",value:function(e){var t=this;return new Promise((function(r,i){if(4==t.curstatus||null==e||null==t.oVideoRender)r();else{t.waitIFrameTimestamp===e.timestamp&&(t.resetTimer=!0);var n={nCropLeft:0,nCropRight:0,nCropTop:0,nCropBottom:0};n.nCodeWidth=e.displayWidth,n.nCodeHeight=e.displayHeight;var a={x:0,y:0};a.width=e.displayWidth,a.height=e.displayHeight,t.oVideoRender.DisplayFrame(e,e.displayWidth,e.displayHeight,e.timestamp,n,null).then((function(e){null!==t.displayFrameInfoCB&&t.respondFrameInfoCB(e),t.firstFrame&&(null!=t.player?null!=t.player.FFCallBackFun&&t.player.FFCallBackFun():postMessage({function:"firstFrameCB",value:!0}),t.firstFrame=!1),r()}))}}))}},{key:"respondFrameInfoCB",value:function(e){if(0!=this.displayFrameInfo.length&&this.curFrameInfo.timeStamp!==e){for(var t={},r=0;r<this.displayFrameInfo.length&&(t=this.displayFrameInfo.shift()).timeStamp!=e;r++);this.curFrameInfo.port=t.port,this.curFrameInfo.codecType=t.codecType,this.curFrameInfo.frameType=t.frameType,this.curFrameInfo.frameSize=t.frameSize,this.curFrameInfo.width=t.width,this.curFrameInfo.height=t.height,this.curFrameInfo.timeStamp=t.timeStamp,this.curFrameInfo.frameRate=t.frameRate,this.curFrameInfo.frameNum=t.frameNum,this.curFrameInfo.interlace=t.interlace,this.curFrameInfo.streamEnd=t.streamEnd,this.curFrameInfo.cropLeft=t.cropLeft,this.curFrameInfo.cropRight=t.cropRight,this.curFrameInfo.cropTop=t.cropTop,this.curFrameInfo.cropBottom=t.cropBottom,this.curFrameInfo.year=t.year,this.curFrameInfo.month=t.month,this.curFrameInfo.week=t.week,this.curFrameInfo.day=t.day,this.curFrameInfo.hour=t.hour,this.curFrameInfo.minute=t.minute,this.curFrameInfo.second=t.second,this.curFrameInfo.milliseconds=t.milliseconds,this.displayFrameInfoCB(this.curFrameInfo)}}},{key:"postImageData",value:function(e,t,r,i,n){this.player?(this.getImageJPEG&&(this.getImageJPEG=!1,this.player._GetImage2(e,t,r,i,"jpeg",n,0,0,0,0)),this.getImageBMP&&(this.getImageBMP=!1,this.player._GetImage2(e,t,r,i,"bmp",n,0,0,0,0)),this.getCropImageJPEG&&(this.getCropImageJPEG=!1,this.player._GetImage2(e,t,r,i,"jpeg",n,this.sx,this.sy,this.sw,this.sh)),this.getCropImageBMP&&(this.getCropImageBMP=!1,this.player._GetImage2(e,t,r,i,"bmp",n,this.sx,this.sy,this.sw,this.sh))):(this.getImageJPEG&&(this.getImageJPEG=!1,postMessage({function:"imageYUV",value:e.buffer,size:t,width:r,height:i,type:"jpeg",yuvType:n,sx:0,sy:0,sw:0,sh:0},[e.buffer])),this.getImageBMP&&(this.getImageBMP=!1,postMessage({function:"imageYUV",value:e.buffer,size:t,width:r,height:i,type:"bmp",yuvType:n,sx:0,sy:0,sw:0,sh:0},[e.buffer])),this.getCropImageJPEG&&(this.getCropImageJPEG=!1,postMessage({function:"imageYUV",value:e.buffer,size:t,width:r,height:i,type:"jpeg",yuvType:n,sx:this.sx,sy:this.sy,sw:this.sw,sh:this.sh},[e.buffer])),this.getCropImageBMP&&(this.getCropImageBMP=!1,postMessage({function:"imageYUV",value:e.buffer,size:t,width:r,height:i,type:"bmp",yuvType:n,sx:this.sx,sy:this.sy,sw:this.sw,sh:this.sh},[e.buffer])))}},{key:"chooseFrame",value:function(){var e=this;return new Promise((function(t,r){if(null==e.oVideoRender||null==e.oVideoDecoder)t(null);else if(e.oVideoDecoder.decoderObjNeedReset)e.oVideoDecoder.resetDecoder().then((function(){e.oVideoDecoder.decoderObjNeedReset=!1,t(null)}),(function(){r()}));else{var i=e.oVideoDecoder.GetFrameBufferLength();1==e.streamOpenMode&&i<3?t(null):e.oVideoDecoder.GetFrame().then((function(e){t(e)}),(function(){}))}}))}},{key:"SetDisplayRegion",value:function(e,t,r,i){return null==this.oVideoRender?0:(this.sx=e,this.sy=t,this.sw=r,this.sh=i,this.oVideoRender.SetDisplayRect(e,t,r,i))}},{key:"SetCurStatus",value:function(e){return this.renderCurStatus=e,1}},{key:"fast",value:function(){var e=this._GetFastSpeed(this.nplaySpeed);return this._SetPlaySpeed(e)}},{key:"slow",value:function(){var e=this._GetSlowSpeed(this.nplaySpeed);return this._SetPlaySpeed(e)}},{key:"Pause",value:function(e){if(e)this.SetCurStatus(3);else{if(3!==this.renderCurStatus)return-1;this.SetCurStatus(2),this.resetTimer=!0}return 1}},{key:"_refresh",value:function(){0!=this.frameBuffers.length&&this.paint(this.frameBuffers[0])}},{key:"OneByOne",value:function(e){if(e)this.SetCurStatus(5),this.needForward=!0;else{if(5!==this.renderCurStatus)return-1;this.SetCurStatus(2),this.resetTimer=!0,this.needForward=!1,this._SetPlaySpeed(1)}return 1}},{key:"SetCanvasSize",value:function(e,t){return null!=this.oVideoRender&&this.oVideoRender.SetCanvasSize(e,t)}},{key:"GetCanvasSize",value:function(){return null!=this.oVideoRender&&this.oVideoRender.GetCanvasSize()}},{key:"GetPlayedTime",value:function(){return this.curTimeStamp}},{key:"_SetPlaySpeed",value:function(e){switch(e){case-16:case-8:case-4:case-2:case 1:case 2:case 4:case 8:case 16:case 32:case 64:break;default:return-1}return e===this.nplaySpeed||(this.nplaySpeed=e,this.playSpeed=e>0?e:-1/e,console.log("playSpeed:"+this.playSpeed),this.resetTimer=!0,this.needForward=!1,2!=this.renderCurStatus&&this.SetCurStatus(2)),1}},{key:"_GetFastSpeed",value:function(e){var t=0;switch(e){case-16:t=-8;break;case-8:t=-4;break;case-4:t=-2;break;case-2:t=1;break;case 1:t=2;break;case 2:t=4;break;case 4:t=8;break;case 8:t=16;break;case 16:t=32;break;case 32:t=64;break;default:t=0}return t}},{key:"_GetSlowSpeed",value:function(e){var t=0;switch(e){case-8:t=-16;break;case-4:t=-8;break;case-2:t=-4;break;case 1:t=-2;break;case 2:t=1;break;case 4:t=2;break;case 8:t=4;break;case 16:t=8;break;case 32:t=16;break;case 64:t=32;break;default:t=0}return t}},{key:"SetDisplayBuf",value:function(e){return this.displayBuf=e,this.LatcyTime=1==e?0:15==e?700:45==e?1900:e>6&&e<45?40*e+100:-1==e?0:50,1}},{key:"GetJPEG",value:function(){var e=this;this.oVideoDecoder.GetImageYUV().then((function(t){var r=t.yuvFrameBuffer,i=t.yuvLength,n=t.displayWidth,a=t.displayHeight,o=t.yuvType;-1!=r&&(e.player?e.player._GetImage2(r,i,n,a,"jpeg",o,0,0,0,0):postMessage({function:"imageYUV",value:r.buffer,size:i,width:n,height:a,type:"jpeg",yuvType:o,sx:0,sy:0,sw:0,sh:0},[r.buffer]))}),(function(){}))}},{key:"GetBMP",value:function(){var e=this;this.oVideoDecoder.GetImageYUV().then((function(t){var r=t.yuvFrameBuffer,i=t.yuvLength,n=t.displayWidth,a=t.displayHeight,o=t.yuvType;-1!=r&&(e.player?e.player._GetImage2(r,i,n,a,"bmp",o,0,0,0,0):postMessage({function:"imageYUV",value:r.buffer,size:i,width:n,height:a,type:"bmp",yuvType:o,sx:0,sy:0,sw:0,sh:0},[r.buffer]))}),(function(){}))}},{key:"GetCropJPEG",value:function(){var e=this;this.oVideoDecoder.GetImageYUV().then((function(t){var r=t.yuvFrameBuffer,i=t.yuvLength,n=t.displayWidth,a=t.displayHeight,o=t.yuvType;-1!=r&&(e.player?e.player._GetImage2(r,i,n,a,"jpeg",o,e.sx,e.sy,e.sw,e.sh):postMessage({function:"imageYUV",value:r.buffer,size:i,width:n,height:a,type:"jpeg",yuvType:o,sx:e.sx,sy:e.sy,sw:e.sw,sh:e.sh},[r.buffer]))}),(function(){}))}},{key:"GetCropBMP",value:function(){var e=this;this.oVideoDecoder.GetImageYUV().then((function(t){var r=t.yuvFrameBuffer,i=t.yuvLength,n=t.displayWidth,a=t.displayHeight,o=t.yuvType;-1!=r&&(e.player?e.player._GetImage2(r,i,n,a,"bmp",o,e.sx,e.sy,e.sw,e.sh):postMessage({function:"imageYUV",value:r.buffer,size:i,width:n,height:a,type:"bmp",yuvType:o,sx:e.sx,sy:e.sy,sw:e.sw,sh:e.sh},[r.buffer]))}),(function(){}))}},{key:"GetCanvasCapture",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support GetCanvasCapture","color:red"),0):(this.oVideoRender.GetCanvasData(e),1)}},{key:"SetDecodeFrameType",value:function(e){return this.waitIFrameTimestamp=e,1}},{key:"SetStreamEnd",value:function(){return this.oVideoDecoder.SetStreamEnd(),1}},{key:"SetAntialias",value:function(e){return null!=this.oVideoRender?this.oVideoRender.SetAntialias(e):0}},{key:"SetFrameInfoCallBack",value:function(e,t){return this.displayFrameInfoCB=t?e:null,1}},{key:"FEC_SetCanvasID",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetCanvasID(e):(this.FECCanvasID=e,0)}},{key:"FEC_ResetCorrectType",value:function(e,t,r){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_ResetCorrectType(e,t,r):0}},{key:"FEC_GetPort",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),-1):null!=this.oVideoRender?this.oVideoRender.FEC_GetPort(e,t):-1}},{key:"FEC_Enable",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_Enable(e):0}},{key:"FEC_SetParam",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetParam(e,t):0}},{key:"FEC_GetParam",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_GetParam(e,t):0}},{key:"FEC_SetViewParam",value:function(e,t,r){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetViewParam(e,t,r):0}},{key:"FEC_GetViewParam",value:function(e,t,r){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_GetViewParam(e,t,r):0}},{key:"FEC_SetWnd",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetWnd(e,t):0}},{key:"FEC_Disable",value:function(e,t,r){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_Disable(e,t,r):0}},{key:"FEC_DelPort",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_DelPort(e):0}},{key:"FEC_SetDisplayRegion",value:function(e,t,r,i,n,a,o){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetDisplayRegion(e,t,r,i,n,a,o):0}},{key:"FEC_SetBackCilling",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetBackCilling(e,t):0}},{key:"FEC_GetPTZPort",value:function(e,t,r){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),-1):null!=this.oVideoRender?this.oVideoRender.FEC_GetPTZPort(e,t,r):-1}},{key:"FEC_SetPTZDisplayMode",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support FEC correct","color:red"),0):null!=this.oVideoRender?this.oVideoRender.FEC_SetPTZDisplayMode(e):0}},{key:"InputPrivateInfo",value:function(e,t,r){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support PrivateInfo","color:red"),0):null!=this.oVideoRender?this.oVideoRender.InputPrivateInfo(e,t,r):1}},{key:"RenderPrivateData",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support PrivateInfo","color:red"),0):null!=this.oVideoRender?this.oVideoRender.RenderPrivateData(e):1}},{key:"SetWaterMarkFont",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine||null==this.oVideoRender?(console.log("%c param error this.renderEngine:%d,this.oVideoRender:%d","color:red",this.renderEngine,this.oVideoRender),0):(null!=this.oVideoRender&&this.oVideoRender.SetWaterMarkFont(e,{yuvFrameBuffer:-1,yuvLength:-1,displayWidth:-1,displayHeight:-1,yuvType:-1}),1)}},{key:"SetWaterMarkImage",value:function(e){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support SetWaterMarkImage","color:red"),0):null!=this.oVideoRender?this.oVideoRender.SetWaterMarkImage(e):1}},{key:"SetD3DPostProcess",value:function(e,t){return"2d"===this.renderEngine||"2D"===this.renderEngine?(console.log("%c 2D render not support SetD3DPostProcess","color:red"),0):null!=this.oVideoRender?this.oVideoRender.SetD3DPostProcess(e,t):1}}]),t}(),Ee=function(){function t(r){e(this,t),this.player=r,this.oVideoPlayCtrl=new Ce(r)}return o(t,[{key:"init",value:function(e,t,r,i){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.init(e,t,r,i)}},{key:"inputData",value:function(e,t){null!=this.oVideoPlayCtrl&&this.oVideoPlayCtrl.inputData(e,t)}},{key:"SetDisplayRegion",value:function(e,t,r,i){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.SetDisplayRegion(e,t,r,i)}},{key:"stop",value:function(){if(null===this.oVideoPlayCtrl)return 0;this.oVideoPlayCtrl.SetCurStatus(4),this.oVideoPlayCtrl=null,console.log(">>>JS 03 destroy oVideoPlayCtrl")}},{key:"fast",value:function(){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.fast()?0:void 0}},{key:"slow",value:function(){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.slow()?0:void 0}},{key:"SetDisplayBuf",value:function(e){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.SetDisplayBuf(e)?0:void 0}},{key:"Pause",value:function(e){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.Pause(e)?0:void 0}},{key:"OneByOne",value:function(e){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.OneByOne(e)?0:void 0}},{key:"SetCanvasSize",value:function(e,t){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.SetCanvasSize(e,t)?0:void 0}},{key:"GetCanvasSize",value:function(){return null===this.oVideoPlayCtrl||1!==this.oVideoPlayCtrl.GetCanvasSize()?0:void 0}},{key:"GetPlayedTime",value:function(){return null===this.oVideoPlayCtrl?0:this.oVideoPlayCtrl.GetPlayedTime()}},{key:"needReset",value:function(){this.oVideoPlayCtrl.SetCurStatus(0)}},{key:"GetJPEG",value:function(){this.oVideoPlayCtrl.GetJPEG()}},{key:"GetBMP",value:function(){this.oVideoPlayCtrl.GetBMP()}},{key:"GetCropJPEG",value:function(){this.oVideoPlayCtrl.GetCropJPEG()}},{key:"GetCropBMP",value:function(){this.oVideoPlayCtrl.GetCropBMP()}},{key:"JSPlayM4_GetCanvasCapture",value:function(e){this.oVideoPlayCtrl.GetCanvasCapture(e)}},{key:"SetDecodeFrameType",value:function(e){this.oVideoPlayCtrl.SetDecodeFrameType(e)}},{key:"streamEnd",value:function(){this.oVideoPlayCtrl.SetStreamEnd()}},{key:"SetAntialias",value:function(e){return this.oVideoPlayCtrl.SetAntialias(e)}},{key:"SetFrameInfoCallBack",value:function(e,t){return this.oVideoPlayCtrl.SetFrameInfoCallBack(e,t)}},{key:"FEC_SetCanvasID",value:function(e){return this.oVideoPlayCtrl.FEC_SetCanvasID(e)}},{key:"FEC_ResetCorrectType",value:function(e,t,r){return this.oVideoPlayCtrl.FEC_ResetCorrectType(e,t,r)}},{key:"FEC_GetPort",value:function(e,t){return this.oVideoPlayCtrl.FEC_GetPort(e,t)}},{key:"FEC_Enable",value:function(e){return this.oVideoPlayCtrl.FEC_Enable(e)}},{key:"FEC_SetParam",value:function(e,t){return this.oVideoPlayCtrl.FEC_SetParam(e,t)}},{key:"FEC_GetParam",value:function(e,t){return this.oVideoPlayCtrl.FEC_GetParam(e,t)}},{key:"FEC_SetViewParam",value:function(e,t,r){return this.oVideoPlayCtrl.FEC_SetViewParam(e,t,r)}},{key:"FEC_GetViewParam",value:function(e,t,r){return this.oVideoPlayCtrl.FEC_GetViewParam(e,t,r)}},{key:"FEC_SetWnd",value:function(e,t){return this.oVideoPlayCtrl.FEC_SetWnd(e,t)}},{key:"FEC_Disable",value:function(e,t,r){return this.oVideoPlayCtrl.FEC_Disable(e,t,r)}},{key:"FEC_DelPort",value:function(e){return this.oVideoPlayCtrl.FEC_DelPort(e)}},{key:"FEC_SetDisplayRegion",value:function(e,t,r,i,n,a,o){return this.oVideoPlayCtrl.FEC_SetDisplayRegion(e,t,r,i,n,a,o)}},{key:"FEC_SetBackCilling",value:function(e,t){return this.oVideoPlayCtrl.FEC_SetBackCilling(e,t)}},{key:"FEC_GetPTZPort",value:function(e,t,r){return this.oVideoPlayCtrl.FEC_GetPTZPort(e,t,r)}},{key:"FEC_SetPTZDisplayMode",value:function(e){return this.oVideoPlayCtrl.FEC_SetPTZDisplayMode(e)}},{key:"InputPrivateInfo",value:function(e,t,r){return this.oVideoPlayCtrl.InputPrivateInfo(e,t,r)}},{key:"RenderPrivateData",value:function(e){return this.oVideoPlayCtrl.RenderPrivateData(e)}},{key:"SetWaterMarkFont",value:function(e){return this.oVideoPlayCtrl.SetWaterMarkFont(e)}},{key:"SetWaterMarkImage",value:function(e){return this.oVideoPlayCtrl.SetWaterMarkImage(e)}},{key:"SetD3DPostProcess",value:function(e,t){return this.oVideoPlayCtrl.SetD3DPostProcess(e,t)}}]),t}(),Te=[];!function(){for(var e=0;e<8;e++){Te[e]=[];for(var t=0;t<64;t++)Te[e][t]=null}}();var Fe=null,De=!1,Me=1,Ie=1,we={bSupHardOrSoft:!0,bSupHardDecAVC:!0,bSupHardDecHEVC:!0,cmd:"unloaded",errorCode:0,status:0},Ae=-1;window.JSPlayM4_RawDataCallBack=function(e,t,r,i){null!=Te[i][e]&&Te[i][e].__proto__.hasOwnProperty("JSPlayM4_InputRawData")&&Te[i][e].JSPlayM4_InputRawData(e,t,r)},window.JSPlayM4_PrivateInfoCallBack=function(e,t,r,i,n){null!=Te[n][e]&&Te[n][e].__proto__.hasOwnProperty("JSPlayM4_InputPrivateInfo")&&Te[n][e].JSPlayM4_InputPrivateInfo(t,r,i)};var ke=function(){function t(r,i,n){var a=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"webgl",x=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1;if(e(this,t),this.jsplayer=r,this.szBasePath=i,this.fn=n,this.nUser=o,this.renderEngine=s,this.hasWebWorker=x,this.setHasThread=l,this.oJSPlayerObj=this,this.port=-1,this.pcVideoManager=null,this.decodeWorker=null,this.offscreen=null,this.canvasID="",this.canvasCnv=null,this.rtpType=0,this.decodeEngine=1,this.FirstFrameCallBackflag=!1,this.inputDataBuffer=null,this.inputDataBufferSize=204800,this.canvasIDData=null,this._decoderLoaded=!1,this.streamOpenMode=0,this.width=0,this.height=0,this.rawDataFrameInfoBuffer=null,this.rawDataFrameInfo={},this.displayFrameInfo={},this.startTimeStamp=0,this.decodeFrameType=0,this.switchDecodeFrame=!1,this.displayBuf=0,this.needSetDisplayBuf=!1,this.FirstFrame=!0,this.codecType=0,this.curStatus=0,this.playSpeed=1,this.needWaitIFrame=!1,this.printfFlag=!1,this.SetDisRegionBottom=0,this.SetDisRegionLeft=0,this.SetDisRegionRight=0,this.SetDisRegionTop=0,this.cropBottom=0,this.cropLeft=0,this.cropRight=0,this.cropTop=0,this.canvasWidth=960,this.canvasHeight=480,this.enableCanvas=!0,this.needResetCanvasSize=!1,this.hasThread=0,this.aTotalBuffer=[],this.iFrameNum=0,this.bWriteData=!0,this.downloadFlag=!1,this.bWriteAudioPCMData=!0,this.audioPCMBuffer=[],this.iAudioPCMFrameNum=0,this.pBmpData=null,this.nBmpDataSize=0,this.pBmpSizeData=null,this.bmpDataCallback=null,this.bmpDownloadFlag=!1,this.pJpegData=null,this.nJpegDataSize=0,this.pJPEGSizeData=null,this.jpegDataCallback=null,this.jpegDownloadFlag=!1,this.stDisplayRect={top:0,left:0,right:0,bottom:0},this.iZoomNum=0,this.iRatio_x=1,this.iRatio_y=1,this.pFECTotalCanvasIDData=null,this.iFECCanvasIDLen=0,this.iFECZoomNum=0,this.iFECRatio_x=1,this.iFECRatio_y=1,this.stFECDisplayRect={top:0,left:0,right:0,bottom:0},this.FECcanvasIDArray=[],this.FECGetPortCB=null,this.FECGetPTZPortCB=null,this.FECParamCB=null,this.FECViewParamCB=null,this.FFCallBackFun=null,this.addtionCallBackFun=null,this.displayCallBackFun=null,this.decCallBackFun=null,this.getPlayTimeCallBackFun=null,this.runtimeCBFun=null,this.callbackFlag=!1,this.runTimeModule=0,this.needSetSecretKey=!1,this.SecretKeyData=null,this.needPlaySound=!1,this.decInterval=-1,this.volumeValue=-1,this.renderPrivateInfo=new Map,this.renderIntelSubEx=new Map,this.renderIntelFlagEx=new Map,this.reversePlay=!1,this.decodeThreadNum=0,this.antialiasFlag=-1,this.decodeERCLevel=0,this.d3dPostProcessType=0,this.d3dPostProcessValue=0,this.needSetD3DPostProcess=!1,this.resetBufferType=-1,this.playOrBackSwitchMode=0,this.setStretchPlayTime=0,this.setStretchPlaySpeed=0,this.autoSmoothPlayModel=-1,this.keepPlaySpeed=-1,this.FECCanvasID="",this.FECPlaceType=0,this.FECCorrectType=0,this.anrParamFlag=!1,this.anrParamLevel=-1,this.resampleFlag=!1,this.resampleRate=48e3,this.globalBaseTime=null,this.needSetSkipErrorData=!1,this.skipErrorData=-1,this.needSetDemuxModel=!1,this.setDemuxModelType=-1,this.setDemuxModelFlag=!1,this.setAudioThreadModel=-1,this.syncToAudio=-1,this.HIK40Head=[],this.HIKHeadSize=40,this.HIKPoolSize=2097152,this.supportWebCodecs=_getFSupportWebCodecs(),this.supportSab=!!window.SharedArrayBuffer,this.offscreen=!!window.OffscreenCanvas,this.supportOffscreen=!1,this.offscreen){var c=new OffscreenCanvas(1,1),f=c.getContext("webgl");f&&(this.supportOffscreen=!0,f.getExtension("WEBGL_lose_context").loseContext()),c=null,f=null}if(console.log("%cstart load Decoder.js time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds(),"color: blue"),null!=Fe||De)new Promise((function(e,t){e()})).then((function(){if(null===Fe)var e=setInterval((function(){null!==Fe&&(clearInterval(e),e=null,a.fn(we))}),10);else a.fn(we)}));else if(De=!0,Ae=_getFExplore(),this.supportWebCodecs?-1<Ae&&Ae<94?(console.info("%c1>your chrome version %d does not support 264/265 hard Decoder,please update the latest version above chromeV107","color: red",Ae),Ie=0,Me=0,we.bSupHardDecAVC=!1,we.bSupHardDecHEVC=!1,this.supportSab?we.bSupHardOrSoft=!0:we.bSupHardOrSoft=!1):94<=Ae&&Ae<107?(console.info("%c1>your chrome version %d does not support 265 hard Decoder,please update the latest version above chromeV107","color: red",Ae),Me=0,we.bSupHardDecAVC=!0,we.bSupHardDecHEVC=!1,we.bSupHardOrSoft=!0):(we.bSupHardDecAVC=!0,we.bSupHardDecHEVC=!1,we.bSupHardOrSoft=!0):(console.info("%c1>your browser does not support hard Decoder ","color: red"),Ie=0,Me=0,we.bSupHardDecAVC=!1,we.bSupHardDecHEVC=!1,this.supportSab?we.bSupHardOrSoft=!0:we.bSupHardOrSoft=!1),we.bSupHardOrSoft){var h=this.szBasePath,u=document.createElement("script");u.type="text/javascript",u.src=h,console.info("%c>>>>The Decoder.js path:%s","color: green",h),u.onload=function(){window.JSPlayerModule().then((function(e){Fe=e,a._decoderLoaded=!0,we.cmd="loaded";var t=Fe._JSPlayM4_GetSDKVersion(),r=Fe._JSPlayM4_GetBuildDate();console.log("%cEnd load Decoder.js time:"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds()+",version:"+t.toString(16)+",buildDate:"+r.toString(16),"color: blue"),a.supportWebCodecs?VideoDecoder.isConfigSupported({codec:"hvc1.1.6.L123.00",hardwareAcceleration:"prefer-hardware"}).then((function(e){e.supported?(we.bSupHardDecHEVC=!0,console.info("%c1>your browser support 264/265 hard Decoder","color: green")):(console.warn("%c1>your PC does not support 265 hard Decoder, if you want to hard decode 265 ,try to update the GPU driver","color: red"),Me=0),a.callbackFlag||(a.fn(we),a.callbackFlag=!0)})).catch((function(){Me=0,we.bSupHardDecHEVC=!1,console.log("%c2>hevc supported error","color: red"),a.callbackFlag||(a.fn(we),a.callbackFlag=!0)})):a.fn(we)}))},document.body.appendChild(u)}else console.log("%c not support hard or soft","color:red"),new Promise((function(e,t){e()})).then((function(){a.fn(we)}))}return o(t,[{key:"startWorker",value:function(e){function t(t,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){if(window.Worker){if(null==t.decodeWorker){if(t.decodeWorker=new l,null==t.decodeWorker)return 0;console.log("decodeWorker create success!")}t.canvasCnv=document.getElementById(e),t.offscreen=t.canvasCnv.transferControlToOffscreen(),t.decodeWorker.postMessage({command:"init",streamOpenMode:t.streamOpenMode,canvas:t.offscreen,sab:t.supportSab,renderEngine:t.renderEngine},[t.offscreen]),0!=t.displayBuf&&t.decodeWorker.postMessage({command:"SetDisplayBuf",value:t.displayBuf}),t.decodeWorker.onmessage=function(e){var r=e.data;switch(r.function){case"error":startWorker(t.canvasID,t);break;case"GetFrameData":var i=new Uint8Array(r.data);t.downloadRTPData(i);break;case"GetRawData":t.JSPlayM4_GetRawData();break;case"OrderError":console.log(">>>JS OrderError");break;case"GetPlayedTime":var n=r.value;t.getPlayTimeCallBackFun&&t.getPlayTimeCallBackFun(n-t.startTimeStamp);break;case"resetEnd":t.JSPlayM4_ResetEnd();break;case"bitmap":var a=r.value,o=r.type;t._GetImage(a,o);break;case"imageYUV":var s=new Uint8Array(r.value),x=r.size,l=new Uint8Array(s),c=r.type,f=r.width,h=r.height,u=r.yuvType,d=r.sx,_=r.sy,p=r.sw,m=r.sh;t._GetImage2(l,x,f,h,c,u,d,_,p,m),s=null,l=null,r.value=null;break;case"stop":t.decodeWorker=null,console.log("HardWorker is null");break;case"firstFrameCB":null!=t.FFCallBackFun&&t.FFCallBackFun();break;case"SetFrameInfoCallBack":t.displayFrameInfo.port=r.curFrameInfo.port,t.displayFrameInfo.codecType=r.curFrameInfo.codecType,t.displayFrameInfo.frameType=r.curFrameInfo.frameType,t.displayFrameInfo.frameSize=r.curFrameInfo.frameSize,t.displayFrameInfo.width=r.curFrameInfo.width,t.displayFrameInfo.height=r.curFrameInfo.height,t.displayFrameInfo.timeStamp=r.curFrameInfo.timeStamp,t.displayFrameInfo.frameRate=r.curFrameInfo.frameRate,t.displayFrameInfo.frameNum=r.curFrameInfo.frameNum,t.displayFrameInfo.interlace=r.curFrameInfo.interlace,t.displayFrameInfo.streamEnd=r.curFrameInfo.streamEnd,t.displayFrameInfo.cropLeft=r.curFrameInfo.cropLeft,t.displayFrameInfo.cropRight=r.curFrameInfo.cropRight,t.displayFrameInfo.cropTop=r.curFrameInfo.cropTop,t.displayFrameInfo.cropBottom=r.curFrameInfo.cropBottom,t.displayFrameInfo.year=r.curFrameInfo.year,t.displayFrameInfo.month=r.curFrameInfo.month,t.displayFrameInfo.week=r.curFrameInfo.week,t.displayFrameInfo.day=r.curFrameInfo.day,t.displayFrameInfo.hour=r.curFrameInfo.hour,t.displayFrameInfo.minute=r.curFrameInfo.minute,t.displayFrameInfo.second=r.curFrameInfo.second,t.displayFrameInfo.milliseconds=r.curFrameInfo.milliseconds;break;case"FECGetViewParam":null!=t.FECViewParamCB&&t.FECViewParamCB(r.Param3D);break;case"FECGetParam":null!=t.FECParamCB&&t.FECParamCB(r.param2d);break;case"FECGetPort":null!=t.FECGetPortCB&&t.FECGetPortCB(r.fishSubPort);break;case"FECGetPTZPort":null!=t.FECGetPTZPortCB&&t.FECGetPTZPortCB(r.fishSubPort)}},t.decodeWorker.addEventListener("error",(function(e){console.error(e)}))}}))},{key:"JSPlayM4_SetStreamEnd",value:function(){return 0}},{key:"JSPlayM4_GetPort",value:function(){return this.printfFlag&&console.log(">>>>>yff>>> JSPlayM4_GetPort 1"),null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetPort","color: red"),0):(this.port=Fe._JSPlayM4_GetPort(),Te[this.nUser][this.port]=this.oJSPlayerObj,this.printfFlag&&console.log(">>>>>yff>>> JSPlayM4_GetPort 2"),1)}},{key:"JSPlayM4_SetStreamOpenMode",value:function(e){return this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_SetStreamOpenMode 1 mode:"+e),null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetStreamOpenMode","color: red"),0):(this.streamOpenMode=e,this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_SetStreamOpenMode 2  mode:"+e),null==this.pcVideoManager&&(this.pcVideoManager=new Ee(this)),Fe._JSPlayM4_SetStreamOpenMode(this.port,e))}},{key:"JSPlayM4_OpenStream",value:function(e,t,r){if(this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_OpenStream 1 :"+e+",this.port:"+this.port),null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_OpenStream","color: red"),0;var i=Fe._malloc(t);if(null===i)return console.log("hikHeadBuffer malloc failed"),0;var n=new Uint8Array(e.buffer);if(5==e[10]&&0==e[11]){if(this.codecType=5,!we.bSupHardDecHEVC&&!this.supportSab)return console.info("%c3>The codecType is VIDEO_AVC265,not support SharedArrayBuffer","color: red"),16}else 1==e[10]&&0==e[11]?this.codecType=1:0==e[10]&&1==e[11]?this.codecType=256:this.codecType=0;Fe.writeArrayToMemory(n,i);var a=Fe._JSPlayM4_OpenStream(this.port,i,t,r);return null!==i&&(Fe._free(i),i=null),n=null,this.HIK40Head=new Uint8Array(e),this.HIKHeadSize=t,this.HIKPoolSize=r,a}},{key:"JSPlayM4_SetDecodeEngine",value:function(e){return this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_SetDecodeEngine 1:"+e),0!=e&&1!=e?(console.log("0 is softDecode, 1 is hardDecoder,decodeEngine:"+e),0):0!==e||this.supportSab&&this.supportOffscreen?(this.decodeEngine=e,1):(this.jsplayer._switchV3ToV1(this.streamOpenMode,this.HIK40Head,this.HIKHeadSize,this.HIKPoolSize,!0),0)}},{key:"_switchHardToSoft",value:function(){return this.JSPlayM4_Stop(!0),this.JSPlayM4_CloseStream(),this.JSPlayM4_FreePort(),this.supportSab&&this.supportOffscreen?(this.JSPlayM4_SetDecodeEngine(0)&&(console.log("V3 switchHardToSoft this.szBasePath:"+this.szBasePath),this.JSPlayM4_GetPort(),this.JSPlayM4_SetStreamOpenMode(this.streamOpenMode),this.JSPlayM4_OpenStream(this.HIK40Head,this.HIKHeadSize,this.HIKPoolSize),this.JSPlayM4_Play(null,!0)),1):(this.jsplayer._switchV3ToV1(this.streamOpenMode,this.HIK40Head,this.HIKHeadSize,this.HIKPoolSize,!0),0)}},{key:"_HardToSoftNeedResetParam",value:function(){null!=this.FFCallBackFun&&Fe._JSPlayM4_SetFirstFrameCallBack(this.port,this.FirstFrameCallBackflag,this.nUser),this.needSetSecretKey&&this.JSPlayM4_SetSecretKey(this.SecretKeyData),null!=this.globalBaseTime&&this.globalBaseTime.month>0&&this.globalBaseTime.month<13&&this.JSPlayM4_SetGlobalBaseTime(this.globalBaseTime.year,this.globalBaseTime.month,this.globalBaseTime.day,this.globalBaseTime.hour,this.globalBaseTime.min,this.globalBaseTime.sec,this.globalBaseTime.ms),this.needSetSkipErrorData&&this.JSPlayM4_SkipErrorData(this.skipErrorData),this.needSetDemuxModel&&this.JSPlayM4_SetDemuxModel(this.setDemuxModelType,this.setDemuxModelFlag),this.JSPlayM4_SetDecodeFrameType(this.decodeFrameType),-1!=this.decInterval&&Fe._JSPlayM4_SetIFrameDecInterval(this.port,nInterval),0!=this.decodeThreadNum&&Fe._JSPlayM4_SetDecodeThreadNum(this.port,this.decodeThreadNum),0!=this.decodeERCLevel&&Fe._JSPlayM4_SetDecodeERC(this.port,this.decodeERCLevel),-1!=this.resetBufferType&&Fe._JSPlayM4_ResetBuffer(this.port,this.resetBufferType),this.needPlaySound&&this.JSPlayM4_PlaySound(),-1!=this.setAudioThreadModel&&this.JSPlayM4_SetAudioThreadModel(this.setAudioThreadModel),-1!=this.syncToAudio&&this.JSPlayM4_SyncToAudio(this.syncToAudio),this.anrParamFlag&&-1!=this.anrParamLevel&&this.JSPlayM4_SetANRParam(this.anrParamFlag,this.anrParamLevel),this.resampleFlag&&this.JSPlayM4_SetResampleValue(this.resampleFlag,this.resampleRate),-1!=this.volumeValue&&this.JSPlayM4_SetVolume(this.volumeValue),null!=this.runtimeCBFun&&Fe._JSPlayM4_SetRunTimeInfoCallBackEx(this.port,this.runTimeModule,this.nUser),0!=this.playOrBackSwitchMode&&Fe._JSPlayM4_SetPlayOrBackSwitchMode(this.port,this.playOrBackSwitchMode);var e,t=_(this.renderPrivateInfo.keys());try{for(t.s();!(e=t.n()).done;){var r=e.value,i=this.renderPrivateInfo.get(r);Fe._JSPlayM4_RenderPrivateData(this.port,r,i)}}catch(e){t.e(e)}finally{t.f()}var n,a=_(this.renderIntelSubEx.keys());try{for(a.s();!(n=a.n()).done;){var o=n.value,s=this.renderIntelSubEx.get(o),x=this.renderIntelFlagEx.get(o);Fe._JSPlayM4_RenderPrivateDataEx(this.port,o,s,x)}}catch(e){a.e(e)}finally{a.f()}return this.needSetDisplayBuf&&Fe._JSPlayM4_SetDisplayBuf(this.port,this.displayBuf),-1!=this.antialiasFlag&&Fe._JSPlayM4_SetAntialias(this.port,this.antialiasFlag),this.needSetD3DPostProcess&&Fe._JSPlayM4_SetD3DPostProcess(this.port,this.d3dPostProcessType,this.d3dPostProcessValue),0!=this.setStretchPlaySpeed&&Fe._JSPlayM4_SetStretchPlay(this.port,this.setStretchPlayTime,this.setStretchPlaySpeed),-1!=this.autoSmoothPlayModel&&Fe._JSPlayM4_SetAutoSmoothPlay(this.port,this.autoSmoothPlayModel),-1!=this.keepPlaySpeed&&Fe._JSPlayM4_KeepPlaySpeed(this.port,this.keepPlaySpeed),0!=this.printfFlag&&this.JSPlayM4_SetPrintLogFlag(this.printfFlag),""!=this.FECCanvasID&&this.JSPlayM4_FEC_SetCanvasID(this.FECCanvasID,!0),0!=this.FECPlaceType&&Fe._JSPlayM4_FEC_ResetCorrectType(this.port,0,this.FECPlaceType,this.FECCorrectType),1}},{key:"JSPlayM4_DownloadRawData",value:function(){return this.downloadFlag=!0,1}},{key:"JSPlayM4_InputRawData",value:function(e,t,r){if(this.rawDataFrameInfoBuffer=r,this.rawDataFrameInfo.port=e,this.rawDataFrameInfo.codecType=Fe.HEAP32[this.rawDataFrameInfoBuffer+4>>2],this.rawDataFrameInfo.frameType=Fe.HEAP32[this.rawDataFrameInfoBuffer+12>>2],this.rawDataFrameInfo.frameSize=Fe.HEAP32[this.rawDataFrameInfoBuffer+16>>2],this.rawDataFrameInfo.width=Fe.HEAP32[this.rawDataFrameInfoBuffer+20>>2],this.rawDataFrameInfo.height=Fe.HEAP32[this.rawDataFrameInfoBuffer+24>>2],this.rawDataFrameInfo.timeStamp=Fe.HEAP32[this.rawDataFrameInfoBuffer+28>>2],this.rawDataFrameInfo.frameRate=Fe.HEAP32[this.rawDataFrameInfoBuffer+32>>2],this.rawDataFrameInfo.frameNum=Fe.HEAP32[this.rawDataFrameInfoBuffer+36>>2],this.rawDataFrameInfo.isKeyFrame=Fe.HEAP32[this.rawDataFrameInfoBuffer+40>>2],this.rawDataFrameInfo.interlace=Fe.HEAP32[this.rawDataFrameInfoBuffer+44>>2],this.rawDataFrameInfo.streamEnd=Fe.HEAP32[this.rawDataFrameInfoBuffer+48>>2],this.rawDataFrameInfo.cropLeft=Fe.HEAP32[this.rawDataFrameInfoBuffer+52>>2],this.rawDataFrameInfo.cropRight=Fe.HEAP32[this.rawDataFrameInfoBuffer+56>>2],this.rawDataFrameInfo.cropTop=Fe.HEAP32[this.rawDataFrameInfoBuffer+60>>2],this.rawDataFrameInfo.cropBottom=Fe.HEAP32[this.rawDataFrameInfoBuffer+64>>2],this.rawDataFrameInfo.year=Fe.HEAP16[this.rawDataFrameInfoBuffer+68>>1],this.rawDataFrameInfo.month=Fe.HEAP16[this.rawDataFrameInfoBuffer+70>>1],this.rawDataFrameInfo.week=Fe.HEAP16[this.rawDataFrameInfoBuffer+72>>1],this.rawDataFrameInfo.day=Fe.HEAP16[this.rawDataFrameInfoBuffer+74>>1],this.rawDataFrameInfo.hour=Fe.HEAP16[this.rawDataFrameInfoBuffer+76>>1],this.rawDataFrameInfo.minute=Fe.HEAP16[this.rawDataFrameInfoBuffer+78>>1],this.rawDataFrameInfo.second=Fe.HEAP16[this.rawDataFrameInfoBuffer+80>>1],this.rawDataFrameInfo.milliseconds=Fe.HEAP16[this.rawDataFrameInfoBuffer+82>>1],this.rawDataFrameInfo.needSetPreSoft=!1,(this.rawDataFrameInfo.frameRate<1||1==this.rawDataFrameInfo.interlace)&&(this.rawDataFrameInfo.needSetPreSoft=!0),5==this.rawDataFrameInfo.codecType&&Ae<107&&console.info("%c1>your browser does not support hard 265 Decoder,please update chrome,sab:%d","color: red",this.sab),0!=this.width&&0!=this.height||(this.width=this.rawDataFrameInfo.width,this.height=this.rawDataFrameInfo.height,this.startTimeStamp=this.rawDataFrameInfo.timeStamp,this.FirstFrame=!1),0==this.rawDataFrameInfo.cropLeft&&0==this.rawDataFrameInfo.cropRight&&0==this.rawDataFrameInfo.cropTop&&0==this.rawDataFrameInfo.cropBottom||(this.cropBottom=this.rawDataFrameInfo.cropBottom,this.cropLeft=this.rawDataFrameInfo.cropLeft,this.cropRight=this.rawDataFrameInfo.cropRight,this.cropTop=this.rawDataFrameInfo.cropTop),1==this.decodeFrameType){if(1!==this.rawDataFrameInfo.isKeyFrame)return 1;this.needWaitIFrame&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"SetDecodeFrameType",timestamp:this.rawDataFrameInfo.timeStamp}):this.pcVideoManager.SetDecodeFrameType(this.rawDataFrameInfo.timeStamp),this.needWaitIFrame=!1)}if(0==this.decodeFrameType&&1==this.switchDecodeFrame){if(1!==this.rawDataFrameInfo.isKeyFrame)return 1;this.switchDecodeFrame=!1}if(this.downloadFlag&&this.downloadRTPData(t),this.hasWebWorker){if(null===this.decodeWorker)return t=null,0;this.decodeWorker.postMessage({command:"inputData",rawData:t.buffer,rawDataFrameInfo:this.rawDataFrameInfo},[t.buffer])}else null!==this.pcVideoManager&&this.pcVideoManager.inputData(t,this.rawDataFrameInfo)}},{key:"JSPlayM4_GetRawData",value:function(){if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetRawData","color: red"),0;Fe._JSPlayM4_GetRawData(this.port)}},{key:"JSPlayM4_ResetEnd",value:function(){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_ResetEnd","color: red"),0):Fe._JSPlayM4_ResetEnd(this.port)}},{key:"JSPlayM4_NeedReset",value:function(e,t,r){return this.hasWebWorker?null!=Te[r][e].decodeWorker&&Te[r][e].decodeWorker.postMessage({command:"needReset"}):this.pcVideoManager.needReset(),1}},{key:"JSPlayM4_SetAudioDisplayBuf",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAudioDisplayBuf","color: red"),0):Fe._JSPlayM4_SetAudioDisplayBuf(this.port,e)}},{key:"JSPlayM4_Play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_Play 1 this.canvasID:"+this.canvasID+",this.supportSab:"+this.supportSab),null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_Play","color: red"),0;if(this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_Play 2:"+this.decodeEngine),null!=e&&(this.canvasID=e,this.canvasWidth=document.getElementById(this.canvasID).width,this.canvasHeight=document.getElementById(this.canvasID).height),0===Me&&5===this.codecType?(this.decodeEngine=0,console.info("%c2>there will decode 265 by softDecoder","color: green")):0!==Ie||256!==this.codecType&&1!==this.codecType||(this.decodeEngine=0,console.info("%c2>there will decode 264 by softDecoder","color: green")),0==Ie&&0==Me&&(this.decodeEngine=0),!(this.supportSab&&this.supportOffscreen||0!==this.decodeEngine))return console.info("%c3>SharedArrayBuffer or Offscreen Error , does not support Soft Decdoe!!!!!","color: red"),this.jsplayer._switchV3ToV1(this.streamOpenMode,this.HIK40Head,this.HIKHeadSize,this.HIKPoolSize,!0),0;if(-1!=this.setHasThread&&(this.hasThread=this.setHasThread),Fe._JSPlayM4_SetDecodeEngine(this.port,this.decodeEngine,this.hasThread),console.log("%cThe final decodeEngine is %d (0 is soft,1 is hard),codecType:%d","color: green",this.decodeEngine,this.codecType),0===this.decodeEngine&&t&&null!=this.canvasID){var r=document.getElementById(this.canvasID);r&&(this.clonedCanvas=r.cloneNode(!0),this.clonedCanvasParentNode=r.parentNode,this.clonedCanvasParentNode.replaceChild(this.clonedCanvas,r))}this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_Play 2 this.canvasID:"+this.canvasID+",this.supportSab:"+this.supportSab+",this.decodeEngine:"+this.decodeEngine);var i=1;if(1===this.decodeEngine){this.hasWebWorker?this.startWorker(this.canvasID,this):(this.canvasCnv=document.getElementById(this.canvasID),this.pcVideoManager.init(this.canvasCnv,this.streamOpenMode,this.supportSab,this.renderEngine),this.needSetDisplayBuf&&this.pcVideoManager.SetDisplayBuf(this.displayBuf)),Fe._JSPlayM4_SetVideoRawDataCallBack(this.port,this.nUser);var n=Fe.addFunction(this.JSPlayM4_NeedReset,"viii");Fe._JSPlayM4_SetResetCallBack(this.port,n,this.nUser),Fe._JSPlayM4_SetPrivateInfoCallBack(this.port,this.nUser),this.JSPlayM4_SetCanvasSize(this.canvasWidth,this.canvasHeight),1==(i=Fe._JSPlayM4_Play(this.port,null))&&(this.curStatus=2)}else if(0===this.decodeEngine){if(""!=this.canvasID&&null!=this.canvasID){var a=this._stringToBytes("#"+this.canvasID),o=2*(this.canvasID.length+1);if(this.canvasIDData=Fe._malloc(o),null===this.canvasIDData)return 0;var s=Fe.HEAPU8.subarray(this.canvasIDData,this.canvasIDData+o),x=new Uint8Array(o);s.set(x,0),s.set(new Uint8Array(a)),s=null,x=null}this._HardToSoftNeedResetParam(),1==(i=Fe._JSPlayM4_Play(this.port,this.canvasIDData))&&(this.curStatus=2)}return this.JSPlayM4_SetFrameInfoCallBack(1),i}},{key:"JSPlayM4_InputData",value:function(e,t){if(this.inputDataBufferSize<t&&(null!==this.inputDataBuffer&&(Fe._free(this.inputDataBuffer),this.inputDataBuffer=null),this.inputDataBufferSize=t),null===this.inputDataBuffer&&(this.inputDataBuffer=Fe._malloc(this.inputDataBufferSize)),null===this.inputDataBuffer)return console.log("inputdata malloc failed!!!"),0;if(1==this.needResetCanvasSize&&(this.JSPlayM4_SetCanvasSize(this.canvasWidth,this.canvasHeight+1),this.needResetCanvasSize=!1),this.enableCanvas){var r=this.JSPlayM4_GetFrameInfo(),i=r.width,n=r.height;i&&n&&(this.JSPlayM4_SetCanvasSize(this.canvasWidth,this.canvasHeight-1),this.enableCanvas=!1,this.needResetCanvasSize=!0)}var a=new Uint8Array(e.buffer);Fe.writeArrayToMemory(a,this.inputDataBuffer);var o=Fe._JSPlayM4_InputData(this.port,this.inputDataBuffer,t);return this.printfFlag&&console.log(">>>>>yff>>>>> JSPlayM4_InputData 2 res:"+o+",inputSize:"+t),o}},{key:"JSPlayM4_Stop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_Stop","color: red"),0;if(this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"stop"}):null!=this.pcVideoManager&&this.pcVideoManager.stop(),this.bWriteData&&this.iFrameNum>0){console.log("download"+this.iFrameNum+"Psdata");var t=new Uint8Array(this.aTotalBuffer);this._downloadFile(t,"RTPRaw.data"),this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.bWriteData=!1,this.iFrameNum=0,t=null}if(2==this.curStatus||5==this.curStatus){var r=Fe._JSPlayM4_Stop(this.port);if(1==r&&(this.curStatus=4),1==r&&e){var i=document.getElementById(this.canvasID);if(i&&(this.clonedCanvas=i.cloneNode(!0),this.clonedCanvasParentNode=i.parentNode,this.clonedCanvasParentNode.replaceChild(this.clonedCanvas,i)),0!=this.FECcanvasIDArray.length)for(var n=0;n<this.FECcanvasIDArray.length;n++){var a=document.getElementById(this.FECcanvasIDArray[n]);a&&(this.clonedCanvas=a.cloneNode(!0),this.clonedCanvasParentNode=a.parentNode,this.clonedCanvasParentNode.replaceChild(this.clonedCanvas,a))}}return r}return 1}},{key:"JSPlayM4_CloseStream",value:function(){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_CloseStream","color: red"),0):null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_FreePort","color: red"),0):(null!==this.inputDataBuffer&&(Fe._free(this.inputDataBuffer),this.inputDataBuffer=null),null!==this.canvasIDData&&(Fe._free(this.canvasIDData),this.canvasIDData=null,this.FirstFrame=!0),null!=this.pFECTotalCanvasIDData&&(Fe._free(this.pFECTotalCanvasIDData),this.pFECTotalCanvasIDData=null),null!=this.pBmpData&&(Fe._free(this.pBmpData),this.pBmpData=null),null!=this.pBmpSizeData&&(Fe._free(this.pBmpSizeData),this.pBmpSizeData=null),null!=this.pJpegData&&(Fe._free(this.pJpegData),this.pJpegData=null),null!=this.pJPEGSizeData&&(Fe._free(this.pJPEGSizeData),this.pJPEGSizeData=null),this.bmpDataCallback=null,this.jpegDataCallback=null,this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.audioPCMBuffer.splice(0,this.audioPCMBuffer.length),this.width=0,this.height=0,this.curStatus=1,this.iZoomNum=0,this.rawDataFrameInfoBuffer=null,this.displayFrameInfo={},this.rawDataFrameInfo={},this.pcVideoManager=null,Fe._JSPlayM4_CloseStream(this.port))}},{key:"JSPlayM4_FreePort",value:function(){return Fe._JSPlayM4_FreePort(this.port)}},{key:"JSPlayM4_SetDecodeFrameType",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecodeFrameType","color: red"),0):(this.decodeFrameType=e,1===this.decodeEngine?(0==e&&1==this.decodeFrameType&&(this.switchDecodeFrame=!0),1==e&&(this.needWaitIFrame=!0),1):Fe._JSPlayM4_SetDecodeFrameType(this.port,e))}},{key:"JSPlayM4_PlaySound",value:function(){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_PlaySound","color: red"),0):(this.needPlaySound=!0,Fe._JSPlayM4_PlaySound(this.port))}},{key:"resizedataURL",value:function(e,t,r){return new Promise((i=N().mark((function i(n,a){var o;return N().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:(o=document.createElement("img")).onload=function(){var e=document.createElement("canvas"),i=e.getContext("2d");e.width=t,e.height=r,i.drawImage(this,0,0,t,r);var a=e.toDataURL();n(a)},o.src=e;case 3:case"end":return i.stop()}}),i)})),n=function(){var e=this,t=arguments;return new Promise((function(r,n){var a=i.apply(e,t);function o(e){x(a,r,n,o,s,"next",e)}function s(e){x(a,r,n,o,s,"throw",e)}o(void 0)}))},function(e,t){return n.apply(this,arguments)}));var i,n}},{key:"_GetImage",value:function(e,t){if(1===this.decodeEngine&&e.width&&e.height){var r="image/"+t,i=document.createElement("canvas"),n=i.getContext("2d");i.width=e.width,i.height=e.height,n.drawImage(e,0,0,e.width,e.height),i.toBlob((function(i){console.log("blob:"+i);var a=window.URL.createObjectURL(i),o=document.createElement("a");o.download=(new Date).getTime()+"."+t,o.href=a,o.dataset.downloadurl=[r,o.download,o.href].join(":"),document.body.appendChild(o),o.click(),document.body.removeChild(o),e.close(),n=null}),r)}}},{key:"_GetImage2",value:function(e,t,r,i,n,a,o,s,x,l){var c=this;setTimeout((function(){if(0!=r&&0!=i){var f,h=Fe._malloc(t);if(null===h)return;Fe.writeArrayToMemory(new Uint8Array(e,0,t),h),f=704!=r||288!=i&&240!=i?r*i*4+60:r*i*8+60;var u=Fe._malloc(f),d=Fe._malloc(4);if(null===u||null===d)return Fe._free(h),h=null,null!=u&&(Fe._free(u),u=null),void(null!=d&&(Fe._free(d),d=null));Fe.setValue(d,f,"i32");var _=2;"nv12"===a?_=2:"I420"===a&&(_=3),"jpeg"==n?Fe._JSPlayM4_VideoDataToJpeg(c.port,h,t,u,d,r,i,_,o,s,x,l):"bmp"==n&&Fe._JSPlayM4_VideoDataToBMP(c.port,h,t,u,d,r,i,_,o,s,x,l);var p=Fe.getValue(d,"i32"),m=new Uint8Array(p);m.set(Fe.HEAPU8.subarray(u,u+p)),0==o&&0==s&&0==x&&0==l?"jpeg"==n?(null!=c.jpegDataCallback&&c.jpegDataCallback(m,p),c.jpegDownloadFlag&&c._downloadFile(m,"GetImage."+n),c.jpegDataCallback=null,c.jpegDownloadFlag=!1):"bmp"==n&&(null!=c.bmpDataCallback&&c.bmpDataCallback(m,p),c.bmpDownloadFlag&&c._downloadFile(m,"GetImage."+n),c.bmpDataCallback=null,c.bmpDownloadFlag=!1):c._downloadFile(m,"GetCropImage."+n),m=null,null!=u&&(Fe._free(u),u=null),null!=d&&(Fe._free(d),d=null)}}),0)}},{key:"JSPlayM4_GetJPEG",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.jpegDataCallback=e,this.jpegDownloadFlag=t,1===this.decodeEngine)return this.hasWebWorker?this.decodeWorker.postMessage({command:"GetJPEG"}):null!=this.pcVideoManager&&this.pcVideoManager.GetJPEG(),1;if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetJPEG","color: red"),0;var r=Fe._JSPlayM4_GetFrameInfo(this.port);if(this.width=Fe.HEAP32[r+12>>2],this.height=Fe.HEAP32[r+16>>2],0!=this.width&&0!=this.height){var i=this.width*this.height*4+60;if((null==this.pJpegData||this.nJPEGDataSize<i)&&(null!=this.pJpegData&&(Fe._free(this.pJpegData),this.pJpegData=null),this.nJPEGDataSize=i,this.pJpegData=Fe._malloc(this.nJPEGDataSize),null===this.pJpegData))return;null==this.pJPEGSizeData&&(this.pJPEGSizeData=Fe._malloc(4));var n=Fe._JSPlayM4_GetJPEG(this.port,this.pJpegData,this.nJPEGDataSize,this.pJPEGSizeData);if(1!=n){var a=Fe._JSPlayM4_GetLastError(this.port);console.log("errorcode:"+a)}if(1==n){var o=Fe.getValue(this.pJPEGSizeData,"i32"),s=new Uint8Array(o);s.set(Fe.HEAPU8.subarray(this.pJpegData,this.pJpegData+o)),null!=e&&e(s,o),t&&this._downloadFile(s,"GetJPEG.jpeg"),s=null,this.jpegDataCallback=null,this.jpegDownloadFlag=!1}return n}return 0}},{key:"JSPlayM4_GetBMP",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.bmpDataCallback=e,this.bmpDownloadFlag=t,1===this.decodeEngine)return this.hasWebWorker?this.decodeWorker.postMessage({command:"GetBMP"}):null!=this.pcVideoManager&&this.pcVideoManager.GetBMP(),1;if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetBMP","color: red"),0;var r,i=Fe._JSPlayM4_GetFrameInfo(this.port);if(this.width=Fe.HEAP32[i+12>>2],this.height=Fe.HEAP32[i+16>>2],0==this.width||0==this.height)return 0;if(r=704!=this.width||288!=this.height&&240!=this.height?this.width*this.height*4+60:this.width*this.height*8+60,!(null==this.pBmpData||this.nBmpDataSize<r)||(null!=this.pBmpData&&(Fe._free(this.pBmpData),this.pBmpData=null),this.nBmpDataSize=r,this.pBmpData=Fe._malloc(this.nBmpDataSize),null!==this.pBmpData)){null==this.pBmpSizeData&&(this.pBmpSizeData=Fe._malloc(4));var n=Fe._JSPlayM4_GetBMP(this.port,this.pBmpData,this.nBmpDataSize,this.pBmpSizeData);if(1!=n){var a=Fe._JSPlayM4_GetLastError(this.port);console.log("errorcode:"+a)}if(1==n){var o=Fe.getValue(this.pBmpSizeData,"i32"),s=new Uint8Array(o);s.set(Fe.HEAPU8.subarray(this.pBmpData,this.pBmpData+o)),null!=e&&e(s,o),t&&this._downloadFile(s,"GetBmp.bmp"),s=null,this.bmpDataCallback=null,this.bmpDownloadFlag=!1}return 1}}},{key:"JSPlayM4_GetCropJPEG",value:function(){if(1===this.decodeEngine)return this.hasWebWorker?this.decodeWorker.postMessage({command:"GetCropJPEG"}):null!=this.pcVideoManager&&this.pcVideoManager.GetCropJPEG(),1;if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetCropJPEG","color: red"),0;var e=Fe._JSPlayM4_GetFrameInfo(this.port);if(this.width=Fe.HEAP32[e+12>>2],this.height=Fe.HEAP32[e+16>>2],0!=this.width&&0!=this.height){var t=this.width*this.height*4+60,r=Fe._malloc(t),i=Fe._malloc(4),n=this.SetDisRegionBottom,a=this.SetDisRegionLeft,o=this.SetDisRegionRight,s=this.SetDisRegionTop;if(null===r)return;var x=Fe._JSPlayM4_GetCropJPEG(this.port,r,t,i,0,0,a,s,o,n);if(1!=x){var l=Fe._JSPlayM4_GetLastError(this.port);console.log("errorcode:"+l)}if(1==x){var c=Fe.getValue(i,"i32"),f=new Uint8Array(c);f.set(Fe.HEAPU8.subarray(r,r+c)),this._downloadFile(f,"GetCropJPEG.jpeg"),f=null}return null!=r&&(Fe._free(r),r=null),null!=i&&(Fe._free(i),i=null),x}return 0}},{key:"JSPlayM4_GetCropBMP",value:function(){if(1===this.decodeEngine)return this.hasWebWorker?this.decodeWorker.postMessage({command:"GetCropBMP"}):null!=this.pcVideoManager&&this.pcVideoManager.GetCropBMP(),1;if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetCropBMP","color: red"),0;var e=Fe._JSPlayM4_GetFrameInfo(this.port);if(this.width=Fe.HEAP32[e+12>>2],this.height=Fe.HEAP32[e+16>>2],0==this.width||0==this.height)return 0;var t=this.width*this.height*4+60,r=Fe._malloc(t),i=Fe._malloc(4),n=this.SetDisRegionBottom,a=this.SetDisRegionLeft,o=this.SetDisRegionRight,s=this.SetDisRegionTop;if(null!==r){var x=Fe._JSPlayM4_GetCropBMP(this.port,r,t,i,0,0,a,s,o,n);if(1!=x){var l=Fe._JSPlayM4_GetLastError(this.port);console.log("errorcode:"+l)}if(1==x){var c=Fe.getValue(i,"i32"),f=new Uint8Array(c);f.set(Fe.HEAPU8.subarray(r,r+c)),this._downloadFile(f,"GetCropBmp.bmp"),f=null}return null!=r&&(Fe._free(r),r=null),null!=i&&(Fe._free(i),i=null),1}}},{key:"JSPlayM4_GetCanvasCapture",value:function(e){return 1===this.decodeEngine?(this.hasWebWorker?this.decodeWorker.postMessage({command:"GetCanvasCapture",cbFun:e}):null!=this.pcVideoManager&&this.pcVideoManager.JSPlayM4_GetCanvasCapture(e),1):(console.info("%c SoftDecode not support canvas capture","color: red"),1)}},{key:"JSPlayM4_StopSound",value:function(){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_StopSound","color: red"),0):(this.needPlaySound=!1,Fe._JSPlayM4_StopSound())}},{key:"JSPlayM4_GetSDKVersion",value:function(){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetSDKVersion","color: red"),0):Fe._JSPlayM4_GetSDKVersion()}},{key:"JSPlayM4_GetBuildDate",value:function(){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetBuildDate","color: red"),0):Fe._JSPlayM4_GetBuildDate()}},{key:"JSPlayM4_GetLastError",value:function(){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetLastError","color: red"),0):Fe._JSPlayM4_GetLastError(this.port)}},{key:"JSPlayM4_Fast",value:function(){if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_Fast","color: red"),0;if(0===this.streamOpenMode)return 1;if(1===this.decodeEngine)if(this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"fast"})}else null!=this.pcVideoManager&&this.pcVideoManager.fast();var e=Fe._JSPlayM4_Fast(this.port);return 1==e&&(this.playSpeed=2*this.playSpeed),e}},{key:"JSPlayM4_Slow",value:function(){if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_Slow","color: red"),0;if(0===this.streamOpenMode)return 1;if(1===this.decodeEngine)if(this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"slow"})}else null!=this.pcVideoManager&&this.pcVideoManager.slow();var e=Fe._JSPlayM4_Slow(this.port);return 1==e&&(this.playSpeed=this.playSpeed/2),console.log("this.playSpeed:"+this.playSpeed),e}},{key:"JSPlayM4_SetIFrameDecInterval",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetIFrameDecInterval","color: red"),0):1===this.decodeEngine?1:(this.decInterval=e,Fe._JSPlayM4_SetIFrameDecInterval(this.port,e))}},{key:"JSPlayM4_Pause",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_Pause","color: red"),0):0===this.streamOpenMode?1:(1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"Pause",value:e}):null!=this.pcVideoManager&&this.pcVideoManager.Pause(e)),Fe._JSPlayM4_Pause(this.port,e))}},{key:"JSPlayM4_OneByOne",value:function(){if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_OneByOne","color: red"),0;if(0===this.streamOpenMode)return 0;we.cmd="onebyone";var e=Fe._JSPlayM4_GetSourceBufferRemain(this.port),t=Fe._JSPlayM4_GetLastError(this.port);return e<1e3||31==t?(we.errorCode=31,we.status=!0,this.fn(we)):(e>this.HIKPoolSize-1e3||11==t)&&(we.errorCode=0,we.status=!1,this.fn(we)),this.curStatus=5,1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"OneByOne",value:1}):null!=this.pcVideoManager&&this.pcVideoManager.OneByOne(1)),Fe._JSPlayM4_OneByOne(this.port)}},{key:"JSPlayM4_OneByOneResume",value:function(){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_OneByOneResume","color: red"),0):(we.cmd="play",0===this.streamOpenMode?1:(this.curStatus=2,1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"OneByOne",value:0}):null!=this.pcVideoManager&&this.pcVideoManager.OneByOne(0)),Fe._JSPlayM4_Play(this.port,this.canvasIDData)))}},{key:"JSPlayM4_SetVolume",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetVolume","color: red"),0):(this.volumeValue=e,Fe._JSPlayM4_SetVolume(this.port,e))}},{key:"JSPlayM4_GetVolume",value:function(){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetVolume","color: red"),0):Fe._JSPlayM4_GetVolume(this.port)}},{key:"JSPlayM4_SetDisplayRegion",value:function(e,t,r,i,n){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDisplayRegion","color: red"),0;var s=1,x=t,l=i,c=r,f=n;if("number"!=typeof t||"number"!=typeof i||"number"!=typeof r||"number"!=typeof n)return console.log("param is not number"),0;if(a)x=0,c=this.canvasWidth,l=0,f=this.canvasHeight,this.iZoomNum=0,this.iRatio_x=1,this.iRatio_y=1;else if(o){if(x<0||c<0||l<0||f<0)return 0;0!==this.iZoomNum&&(x=Math.round(x/this.iRatio_x)+this.stDisplayRect.left,l=Math.round(l/this.iRatio_y)+this.stDisplayRect.top,c=Math.round(c/this.iRatio_x)+this.stDisplayRect.left,f=Math.round(f/this.iRatio_y)+this.stDisplayRect.top)}if(this.stDisplayRect={top:l,left:x,right:c,bottom:f},c-x<16||f-l<16||c-x>this.canvasWidth||f-l>this.canvasHeight)return console.log(">>>JS left:"+t+",right:"+r+",top:"+i+",bottom:"+n+",bClose:"+a+",bZoomEnable:"+o+",iZoomNum:"+this.iZoomNum+",canvasWidth:"+this.canvasWidth+",canvasHeight:"+this.canvasHeight),0;if(1===this.decodeEngine)if(this.SetDisRegionBottom=f/this.canvasHeight*this.height,this.SetDisRegionLeft=x/this.canvasWidth*this.width,this.SetDisRegionRight=c/this.canvasWidth*this.width,this.SetDisRegionTop=l/this.canvasHeight*this.height,this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"SetDisplayRegion",sx:this.SetDisRegionLeft,sy:this.SetDisRegionTop,sw:this.SetDisRegionRight-this.SetDisRegionLeft,sh:this.SetDisRegionBottom-this.SetDisRegionTop})}else null!=this.pcVideoManager&&this.pcVideoManager.SetDisplayRegion(this.SetDisRegionLeft,this.SetDisRegionTop,this.SetDisRegionRight-this.SetDisRegionLeft,this.SetDisRegionBottom-this.SetDisRegionTop);else{var h=Fe._JSPlayM4_GetFrameInfo(this.port);this.width=Fe.HEAP32[h+12>>2],this.height=Fe.HEAP32[h+16>>2],this.SetDisRegionBottom=f/this.canvasHeight*this.height,this.SetDisRegionLeft=x/this.canvasWidth*this.width,this.SetDisRegionRight=c/this.canvasWidth*this.width,this.SetDisRegionTop=l/this.canvasHeight*this.height,s=Fe._JSPlayM4_SetDisplayRegion(this.port,this.canvasID,this.SetDisRegionLeft,this.SetDisRegionRight,this.SetDisRegionTop,this.SetDisRegionBottom)}return o&&(this.iRatio_x=this.canvasWidth/(c-x),this.iRatio_y=this.canvasHeight/(f-l),this.iZoomNum++),s}},{key:"JSPlayM4_SetPrintLogFlag",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetPrintLogFlag","color: red"),0):(this.printfFlag=Number(e),Fe._JSPlayM4_SetPrintLogFlag(this.port,e))}},{key:"JSPlayM4_RenderPrivateData",value:function(e,t){if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_RenderPrivateData","color: red"),0;if(this.renderPrivateInfo.set(e,t),1===this.decodeEngine)if(this.hasWebWorker){if(null===this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"RenderPrivateData",bTrue:t})}else null!=this.pcVideoManager&&this.pcVideoManager.RenderPrivateData(t);return Fe._JSPlayM4_RenderPrivateData(this.port,e,t)}},{key:"JSPlayM4_RenderPrivateDataEx",value:function(e,t,r){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_RenderPrivateDataEx","color: red"),0):(this.renderIntelSubEx.set(e,t),this.renderIntelFlagEx.set(e,r),Fe._JSPlayM4_RenderPrivateDataEx(this.port,e,t,r))}},{key:"JSPlayM4_SetCanvasSize",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetCanvasSize","color: red"),0;if(e<16||t<16||null===this.canvasID)return 0;if(this.canvasWidth=e,this.canvasHeight=t,1===this.decodeEngine)if(this.hasWebWorker){if(null==this.decodeWorker)return 0;this.decodeWorker.postMessage({command:"SetCanvasSize",width:e,height:t})}else null!=this.pcVideoManager&&this.pcVideoManager.SetCanvasSize(e,t);return Fe._JSPlayM4_SetCanvasSize(this.port,e,t,r)}},{key:"JSPlayM4_SetDisplayBuf",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDisplayBuf","color: red"),0):(this.displayBuf=e,this.needSetDisplayBuf=!0,1===this.decodeEngine&&(this.hasWebWorker?null===this.decodeWorker||this.decodeWorker.postMessage({command:"SetDisplayBuf",value:e}):null!=this.pcVideoManager&&this.pcVideoManager.SetDisplayBuf(e)),Fe._JSPlayM4_SetDisplayBuf(this.port,e))}},{key:"JSPlayM4_GetSourceBufferRemain",value:function(){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetSourceBufferRemain","color: red"),0):Fe._JSPlayM4_GetSourceBufferRemain(this.port)}},{key:"JSPlayM4_GetBufferValue",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetBufferValue","color: red"),0):Fe._JSPlayM4_GetBufferValue(this.port,e)}},{key:"JSPlayM4_ReversePlay",value:function(){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_ReversePlay","color: red"),0):0===this.streamOpenMode?1:(this.reversePlay=!0,Fe._JSPlayM4_ReversePlay(this.port))}},{key:"JSPlayM4_SetDecodeThreadNum",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecodeThreadNum","color: red"),0):(this.decodeThreadNum=e,Fe._JSPlayM4_SetDecodeThreadNum(this.port,e))}},{key:"JSPlayM4_GetCanvasSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetCanvasSize","color: red"),0):1===this.decodeEngine?(this.hasWebWorker?this.decodeWorker.postMessage({command:"GetCanvasSize"}):null!=this.pcVideoManager&&this.pcVideoManager.GetCanvasSize(),1):Fe._JSPlayM4_GetCanvasSize(this.port,e)}},{key:"JSPlayM4_DisplayLostFrames",value:function(e,t,r){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_DisplayLostFrames","color: red"),0):Fe._JSPlayM4_DisplayLostFrames(this.port,e,t,r)}},{key:"JSPlayM4_SetANRParam",value:function(e,t){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetANRParam","color: red"),0):(this.anrParamFlag=e,this.anrParamLevel=t,Fe._JSPlayM4_SetANRParam(this.port,e,t))}},{key:"JSPlayM4_SetResampleValue",value:function(e,t){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetResampleValue","color: red"),0):(this.resampleFlag=e,this.resampleRate=t,Fe._JSPlayM4_SetResampleValue(this.port,e,t))}},{key:"JSPlayM4_SetAntialias",value:function(e){if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAntialias","color: red"),0;var t=1;return this.antialiasFlag=e,1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"SetAntialias",value:e}):null!=this.pcVideoManager&&(t=this.pcVideoManager.SetAntialias(e)):t=Fe._JSPlayM4_SetAntialias(this.port,e),t}},{key:"JSPlayM4_SyncToAudio",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SyncToAudio","color: red"),0):(this.syncToAudio=SyncToAudio,Fe._JSPlayM4_SyncToAudio(this.port,e))}},{key:"JSPlayM4_SetAudioThreadModel",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAudioThreadModel","color: red"),0):(this.setAudioThreadModel=e,Fe._JSPlayM4_SetAudioThreadModel(this.port,e))}},{key:"JSPlayM4_SetDecodeERC",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecodeERC","color: red"),0):(this.decodeERCLevel=e,Fe._JSPlayM4_SetDecodeERC(this.port,e))}},{key:"JSPlayM4_SkipErrorData",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SkipErrorData","color: red"),0):(this.needSetSkipErrorData=!0,this.skipErrorData=e,Fe._JSPlayM4_SkipErrorData(this.port,e))}},{key:"JSPlayM4_SetDemuxModel",value:function(e,t){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDemuxModel","color: red"),0):(this.needSetDemuxModel=!0,this.setDemuxModelType=e,this.setDemuxModelFlag=t,Fe._JSPlayM4_SetDemuxModel(this.port,e,t))}},{key:"JSPlayM4_SetD3DPostProcess",value:function(e,t){if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetD3DPostProcess","color: red"),0;var r=1;return this.d3dPostProcessType=e,this.d3dPostProcessValue=t,this.needSetD3DPostProcess=!0,1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"SetD3DPostProcess",ProcessType:e,ProcessValue:t}):null!=this.pcVideoManager&&(r=this.pcVideoManager.SetD3DPostProcess(e,t)):r=Fe._JSPlayM4_SetD3DPostProcess(this.port,e,t),r}},{key:"JSPlayM4_SetFirstFrameCallBack",value:function(e,t){if(!(t&&"function"==typeof t||null===t))return 0;if(this.FFCallBackFun=t,this.FirstFrameCallBackflag=e,null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetFirstFrameCallBack","color: red"),0;var r=1;return 0===this.decodeEngine&&(r=Fe._JSPlayM4_SetFirstFrameCallBack(this.port,e,this.nUser)),r}},{key:"JSPlayM4_SetDecCallBack",value:function(e,t){return t&&"function"==typeof t||null===t?(this.decCallBackFun=t,null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecCallBack","color: red"),0):Fe._JSPlayM4_SetDecCallBack(this.port,e,this.nUser)):0}},{key:"JSPlayM4_SetDisplayCallBack",value:function(e,t){return t&&"function"==typeof t||null===t?(this.displayCallBackFun=t,null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDisplayCallBack","color: red"),0):Fe._JSPlayM4_SetDisplayCallBack(this.port,e,this.nUser)):0}},{key:"JSPlayM4_SetFrameInfoCallBack",value:function(e){var t=this,r=1;if(1===this.decodeEngine)this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"SetFrameInfoCallBack",value:e}):null!=this.pcVideoManager&&(r=this.pcVideoManager.SetFrameInfoCallBack((function(e){t.displayFrameInfo.port=e.port,t.displayFrameInfo.codecType=e.codecType,t.displayFrameInfo.frameType=e.frameType,t.displayFrameInfo.frameSize=e.frameSize,t.displayFrameInfo.width=e.width,t.displayFrameInfo.height=e.height,t.displayFrameInfo.timeStamp=e.timeStamp,t.displayFrameInfo.frameRate=e.frameRate,t.displayFrameInfo.frameNum=e.frameNum,t.displayFrameInfo.interlace=e.interlace,t.displayFrameInfo.streamEnd=e.streamEnd,t.displayFrameInfo.cropLeft=e.cropLeft,t.displayFrameInfo.cropRight=e.cropRight,t.displayFrameInfo.cropTop=e.cropTop,t.displayFrameInfo.cropBottom=e.cropBottom,t.displayFrameInfo.year=e.year,t.displayFrameInfo.month=e.month,t.displayFrameInfo.week=e.week,t.displayFrameInfo.day=e.day,t.displayFrameInfo.hour=e.hour,t.displayFrameInfo.minute=e.minute,t.displayFrameInfo.second=e.second,t.displayFrameInfo.milliseconds=e.milliseconds}),e));else{if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetFrameInfoCallBack","color: red"),0;r=Fe._JSPlayM4_SetFrameInfoCallBack(this.port,e)}return r}},{key:"JSPlayM4_SetDecCBStream",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetDecCBStream","color: red"),0):Fe._JSPlayM4_SetDecCBStream(this.port,e)}},{key:"JSPlayM4_GetFrameInfo",value:function(){if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetFrameInfo","color: red"),0;var e={};if(0==this.decodeEngine){var t=Fe._JSPlayM4_GetFrameInfo(this.port);e.port=Fe.HEAP32[t>>2],e.frameType=Fe.HEAP32[t+4>>2],e.frameSize=Fe.HEAP32[t+8>>2],e.width=Fe.HEAP32[t+12>>2],e.height=Fe.HEAP32[t+16>>2],e.timeStamp=Fe.HEAP32[t+20>>2],e.frameRate=Fe.HEAP32[t+24>>2],e.bitPerSample=Fe.HEAP32[t+28>>2],e.samplesPerSec=Fe.HEAP32[t+32>>2],e.channel=Fe.HEAP32[t+36>>2],e.frameNum=Fe.HEAP32[t+40>>2],e.cropLeft=Fe.HEAP32[t+44>>2],e.cropRight=Fe.HEAP32[t+48>>2],e.cropTop=Fe.HEAP32[t+52>>2],e.cropBottom=Fe.HEAP32[t+56>>2],e.year=Fe.HEAP16[t+60>>1],e.month=Fe.HEAP16[t+62>>1],e.week=Fe.HEAP16[t+64>>1],e.day=Fe.HEAP16[t+66>>1],e.hour=Fe.HEAP16[t+68>>1],e.minute=Fe.HEAP16[t+70>>1],e.second=Fe.HEAP16[t+72>>1],e.milliseconds=Fe.HEAP16[t+74>>1],this.width=e.width,this.height=e.height}else e=this.displayFrameInfo;return e}},{key:"JSPlayM4_GetAdditionData",value:function(){if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetAdditionData","color: red"),0;var e=null,t=Fe._JSPlayM4_GetAdditionData(this.port);return e.dataType=Fe.HEAP32[t>>2],e.dataStrVersion=Fe.HEAP32[t+4>>2],e.dataTimeStamp=Fe.HEAP32[t+8>>2],e.dataLength=Fe.HEAP32[t+12>>2],e.pData=Fe.HEAP32[t+16>>2],e.additionDataBuffer=new Uint8Array(dataLength),additionDataBuffer.set(Fe.HEAPU8.subarray(pData,pData+dataLength)),e}},{key:"JSPlayM4_SetAdditionDataCallBack",value:function(e,t,r){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAdditionDataCallBack","color: red"),0):r&&"function"==typeof r||null===r?(this.addtionCallBackFun=r,Fe._JSPlayM4_SetAdditionDataCallBack(this.port,e,t,this.nUser)):0}},{key:"JSPlayM4_GetPlayedTimeEx",value:function(e){if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetPlayedTimeEx","color: red"),0;if(!(e&&"function"==typeof e||null===e))return 0;if(this.getPlayTimeCallBackFun=e,1===this.decodeEngine){if(this.hasWebWorker)this.decodeWorker.postMessage({command:"GetPlayedTime"});else if(null!=this.pcVideoManager){var t=this.pcVideoManager.GetPlayedTime();this.getPlayTimeCallBackFun&&this.getPlayTimeCallBackFun(t-this.startTimeStamp)}}else{var r=Fe._JSPlayM4_GetPlayedTimeEx(this.port);this.getPlayTimeCallBackFun(r)}}},{key:"JSPlayM4_GetFileTime",value:function(){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetFileTime","color: red"),0):Fe._JSPlayM4_GetFileTime(this.port)}},{key:"JSPlayM4_GetMpOffset",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_GetMpOffset","color: red"),0):e>this.JSPlayM4_GetFileTime()?-1:(1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"needReset"}):null!=this.pcVideoManager&&this.pcVideoManager.needReset()),Fe._JSPlayM4_GetMpOffset(this.port,e))}},{key:"JSPlayM4_ResetBuffer",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_ResetBuffer","color: red"),0):(this.resetBufferType=e,Fe._JSPlayM4_ResetBuffer(this.port,e))}},{key:"JSPlayM4_SetGlobalBaseTime",value:function(e,t,r,i,n,a,o){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetGlobalBaseTime","color: red"),0):(this.globalBaseTime={year:e,month:t,day:r,hour:i,min:n,sec:a,ms:o},Fe._JSPlayM4_SetGlobalBaseTime(this.port,e,t,r,i,n,a,o))}},{key:"JSPlayM4_SetSecretKey",value:function(e){if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetSecretKey","color: red"),0;var t=this._stringToBytes(e),r=Fe._malloc(128);if(null!==r){var i=Fe.HEAPU8.subarray(r,r+128),n=new Uint8Array(128);i.set(n,0),i.set(new Uint8Array(t)),i=null,n=null;var a=Fe._JSPlayM4_SetSecretKey(this.port,1,r,128);return null!==r&&(Fe._free(r),r=null),1===a&&(this.needSetSecretKey=!0,this.SecretKeyData=e),a}}},{key:"JSPlayM4_SetRunTimeInfoCallBackEx",value:function(e,t){return t&&"function"==typeof t||null===t?(this.runtimeCBFun=t,this.runTimeModule=e,null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetRunTimeInfoCallBackEx","color: red"),0):Fe._JSPlayM4_SetRunTimeInfoCallBackEx(this.port,e,this.nUser)):0}},{key:"JSPlayM4_SetPlayOrBackSwitchMode",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetPlayOrBackSwitchMode","color: red"),0):(this.playOrBackSwitchMode=e,0==this.decodeEngine?Fe._JSPlayM4_SetPlayOrBackSwitchMode(this.port,e):0)}},{key:"JSPlayM4_SetStretchPlay",value:function(e,t){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetStretchPlay","color: red"),0):(this.setStretchPlayTime=e,this.setStretchPlaySpeed=t,0==this.decodeEngine?Fe._JSPlayM4_SetStretchPlay(this.port,e,t):0)}},{key:"JSPlayM4_SetAutoSmoothPlay",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetAutoSmoothPlay","color: red"),0):(this.autoSmoothPlayModel=e,0==this.decodeEngine?Fe._JSPlayM4_SetAutoSmoothPlay(this.port,e):0)}},{key:"JSPlayM4_KeepPlaySpeed",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_KeepPlaySpeed","color: red"),0):(this.keepPlaySpeed=e,0==this.decodeEngine?Fe._JSPlayM4_KeepPlaySpeed(this.port,e):0)}},{key:"JSPlayM4_IgnoreHeaderAudioDefine",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_IgnoreHeaderAudioDefine","color: red"),0):Fe._JSPlayM4_IgnoreHeaderAudioDefine(this.port,e)}},{key:"JSPlayM4_SetSycGroup",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetSycGroup","color: red"),0):Fe._JSPlayM4_SetSycGroup(this.port,e)}},{key:"JSPlayM4_FEC_SetCanvasID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetCanvasID","color: red"),0;this.FECCanvasID=e;var r=1;if(null!=e&&""!=e)if(this.FECcanvasIDArray=e.split(","),1===this.decodeEngine)this.hasWebWorker?this.decodeWorker.postMessage({command:"SetCanvasID"}):null!=this.pcVideoManager?r=this.pcVideoManager.FEC_SetCanvasID(e):console.info("%c JSPlayM4_FEC_SetCanvasID this.pcVideoManager is null","color: red");else{for(var i="",n=0;n<this.FECcanvasIDArray.length;n++)n==this.FECcanvasIDArray.length-1?i+="#"+this.FECcanvasIDArray[n]:i+="#"+this.FECcanvasIDArray[n]+",";if(0!=this.FECcanvasIDArray.length&&t)for(var a=0;a<this.FECcanvasIDArray.length;a++){var o=document.getElementById(this.FECcanvasIDArray[a]);if(o){var s=o.cloneNode(!0);o.parentNode.replaceChild(s,o)}}var x=this._stringToBytes(i),l=2*i.length;if(this.pFECTotalCanvasIDData=Fe._malloc(l),null===this.pFECTotalCanvasIDData)return 0;var c=Fe.HEAPU8.subarray(this.pFECTotalCanvasIDData,this.pFECTotalCanvasIDData+l),f=new Uint8Array(l);c.set(f,0),c.set(new Uint8Array(x)),c=null,f=null,r=Fe._JSPlayM4_FEC_SetCanvasID(this.port,this.pFECTotalCanvasIDData)}else console.log(" JSPlayM4_FEC_SetCanvasID canvasID is null :"+e),r=0;return r}},{key:"JSPlayM4_FEC_ResetCorrectType",value:function(e,t,r){if(this.printfFlag&&console.log("JSPlayM4_FEC_ResetCorrectType 1 decodeEngine:"+this.decodeEngine+",hasWebWorker:"+this.hasWebWorker+",fishSubPort:"+e+",placeType:"+t+",correctType:"+r),null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_ResetCorrectType","color: red"),0;this.FECPlaceType=t,this.FECCorrectType=r;var i=1;return 1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECResetCorrectType",fishSubPort:e,placeType:t,correctType:r}):i=0:i=null!=this.pcVideoManager?this.pcVideoManager.FEC_ResetCorrectType(e,t,r):0:i=Fe._JSPlayM4_FEC_ResetCorrectType(this.port,e,t,r),i}},{key:"JSPlayM4_FEC_GetPort",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_GetPort this.decodeEngine："+this.decodeEngine+",placeType:"+e+",correctType:"+t),null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetPort","color: red"),0;var i=-1;return this.FECGetPortCB=r,1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECGetPort",placeType:e,correctType:t}):i=-1:(null!=this.pcVideoManager?((i=this.pcVideoManager.FEC_GetPort(e,t))<1||i>31||null==i)&&(i=-1):i=-1,null!=this.FECGetPortCB&&this.FECGetPortCB(i)):(((i=Fe._JSPlayM4_FEC_GetPort(this.port,e,t))<1||i>31||null==i)&&(i=-1),null!=this.FECGetPortCB&&this.FECGetPortCB(i)),i}},{key:"JSPlayM4_FEC_Enable",value:function(e){if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_Enable this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e),null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_Enable","color: red"),0;var t=1;return 0==e?console.log("fishPort is 0 ,main canvas doesn't need call FEC_Enable"):1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECEnable",fishSubPort:e}):t=0:t=null!=this.pcVideoManager?this.pcVideoManager.FEC_Enable(e):0:t=Fe._JSPlayM4_FEC_Enable(this.port,e),t}},{key:"JSPlayM4_FEC_SetParam",value:function(e,t){if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_SetParam 1 this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",upDateType:"+t.upDateType+",param2d.fPTZParam.fPTZPositionX:"+t.fPTZParam.fPTZPositionX+",param2d.fPTZParam.fPTZPositionY:"+t.fPTZParam.fPTZPositionY),null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetParam","color: red"),0;var r=1;if(1===this.decodeEngine)this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetParam",fishSubPort:e,param2d:t}):r=0:r=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetParam(e,t):0;else{var i=Fe._JSPlayM4_GetFishEye2DParam();null!=t.upDateType&&(Fe.HEAP32[i>>2]=t.upDateType),null!=t.fPTZParam&&null!=t.fPTZParam.fPTZPositionX&&null!=t.fPTZParam.fPTZPositionY&&(Fe.HEAPF32[i+8>>2]=t.fPTZParam.fPTZPositionX,Fe.HEAPF32[i+12>>2]=t.fPTZParam.fPTZPositionY),null!=t.fPTZParam&&(Fe.HEAPF32[i+32>>2]=t.fPTZZoom),null!=t.fValue&&(Fe.HEAPF32[i+36>>2]=t.fValue),r=Fe._JSPlayM4_FEC_SetParam(this.port,e)}return r}},{key:"JSPlayM4_FEC_GetParam",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetParam","color: red"),0;var r={fRXLeft:0,fRXRight:0,fRYTop:0,fRYBottom:0,bBlack:0,bCut:0,nFishParamType:0,fAngle:0,fZoom:0,fPTZX:0,fPTZY:0,emCorrectType:0};if(this.FECParamCB=t,1===this.decodeEngine)this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"FECGetParam",fishSubPort:e}):null!=this.pcVideoManager&&(this.pcVideoManager.FEC_GetParam(e,r),null!=this.FECParamCB&&this.FECParamCB(r));else{var i=Fe._JSPlayM4_FEC_GetParam(this.port,e);r.bBlack=0,r.fPTZX=Fe.HEAPF32[i+8>>2],r.fPTZY=Fe.HEAPF32[i+12>>2],r.fRXLeft=Fe.HEAPF32[i+16>>2],r.fRXRight=Fe.HEAPF32[i+20>>2],r.fRYTop=Fe.HEAPF32[i+24>>2],r.fRYBottom=Fe.HEAPF32[i+28>>2],r.fZoom=Fe.HEAPF32[i+32>>2],r.fAngle=Fe.HEAPF32[i+36>>2],r.bCut=Fe.HEAPF32[i+63>>2],r.nFishParamType=Fe.HEAPF32[i+67>>2],null!=this.FECParamCB&&this.FECParamCB(r)}return 1}},{key:"JSPlayM4_FEC_SetViewParam",value:function(e,t,r){if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_SetViewParam this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",upDateType:"+t+",fValue:"+r),null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetViewParam","color: red"),0;var i=1;return 1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetViewParam",fishSubPort:e,upDateType:t,fValue:r}):i=0:i=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetViewParam(e,t,r):0:i=Fe._JSPlayM4_FEC_SetViewParam(this.port,e,t,r),i}},{key:"JSPlayM4_FEC_GetViewParam",value:function(e,t,r){if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetViewParam","color: red"),0;var i=1;this.FECViewParamCB=r;var n={fValue:-1};if(1===this.decodeEngine)this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECGetViewParam",fishSubPort:e,upDateType:t}):i=0:null!=this.pcVideoManager?(i=this.pcVideoManager.FEC_GetViewParam(e,t,n),null!=this.FECViewParamCB&&this.FECViewParamCB(n)):i=0;else{var a=Fe._JSPlayM4_GetViewParam(this.port,e,t);n.fValue=a,null!=this.FECViewParamCB&&this.FECViewParamCB(n)}return i}},{key:"JSPlayM4_FEC_SetWnd",value:function(e,t){if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_SetWnd this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",hWnd:"+t),null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetWnd","color: red"),0;var r=1;if(0==e)console.log("fishPort is 0 ,main canvas doesn't need call FEC_SetWnd");else if(null!=t)if(1===this.decodeEngine){var i=document.getElementById(t);if(this.hasWebWorker){var n=i.transferControlToOffscreen();null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetWnd",fishSubPort:e,offscrrenCnv:n},[n]):r=0}else r=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetWnd(e,i):0}else{var a=null;if(null!=t){var o=this._stringToBytes("#"+t),s=2*(t.length+1);a=Fe._malloc(s);var x=Fe.HEAPU8.subarray(a,a+s),l=new Uint8Array(s);x.set(l,0),x.set(new Uint8Array(o)),x=null,l=null}r=Fe._JSPlayM4_FEC_SetWnd(this.port,e,a),null!=a&&(Fe._free(a),a=null)}else console.log(">>>JS JSPlayM4_FEC_SetWnd hwnd error this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",hWnd:"+t),r=0;return r}},{key:"JSPlayM4_FEC_Disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=1;return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_Disable","color: red"),0):(0==e?console.log("fishPort is 0 ,main canvas doesn't need call FEC_Disable"):1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECDisable",fishSubPort:e,clearFECCanvas:t,clearContext:r}):i=0:i=null!=this.pcVideoManager?this.pcVideoManager.FEC_Disable(e,t,r):0:i=Fe._JSPlayM4_FEC_Disable(this.port,e,t,r),i)}},{key:"JSPlayM4_FEC_DelPort",value:function(e){if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_DelPort this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e),null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_DelPort","color: red"),0;var t=1;return 1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECDelPort",fishSubPort:e}):t=0:t=null!=this.pcVideoManager?this.pcVideoManager.FEC_DelPort(e):0:t=Fe._JSPlayM4_FEC_DelPort(this.port,e),t}},{key:"JSPlayM4_FEC_SetDisplayRegion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0;if(this.printfFlag&&console.log(">>>JS JSPlayM4_FEC_SetDisplayRegion this.decodeEngine："+this.decodeEngine+",fishSubPort:"+e+",left:"+i.left+",right:"+i.right+",top:"+i.top+",bottom:"+i.bottom),null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetDisplayRegion","color: red"),0;var s=1,x=i.left,l=i.right,c=i.top,f=i.bottom;if("number"!=typeof x||"number"!=typeof l||"number"!=typeof f||"number"!=typeof c)return console.log("param is not number"),0;if(a){if(o){if(x<0||l<0||c<0||f<0)return 0;0!==this.iFECZoomNum&&(x=Math.round(x/this.iFECRatio_x)+this.stFECDisplayRect.left,c=Math.round(c/this.iFECRatio_y)+this.stFECDisplayRect.top,l=Math.round(l/this.iFECRatio_x)+this.stFECDisplayRect.left,f=Math.round(f/this.iFECRatio_y)+this.stFECDisplayRect.top)}}else x=0,l=this.canvasWidth,c=0,f=this.canvasHeight,this.iFECZoomNum=0,this.iFECRatio_x=1,this.iFECRatio_y=1;if(this.stFECDisplayRect={top:c,left:x,right:l,bottom:f},l-x<16||f-c<16||l-x>this.canvasWidth||f-c>this.canvasHeight)return 0;if(1===this.decodeEngine){var h=x/this.canvasWidth*this.width,u=l/this.canvasWidth*this.width,d=c/this.canvasHeight*this.height,_=f/this.canvasHeight*this.height;this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetDisplayRegion",fishSubPort:e,type:t,regionNum:r,sx:h,sy:d,sw:u-h,sh:_-d}):s=0:s=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetDisplayRegion(e,t,r,h,d,u-h,_-d):0}else if(null!==Fe){var p=x/this.canvasWidth*1e3,m=l/this.canvasWidth*1e3,g=c/this.canvasHeight*1e3,y=f/this.canvasHeight*1e3;s=a?Fe._JSPlayM4_FEC_SetDisplayRegion(this.port,e,t,r,p,m,g,y,n,a):Fe._JSPlayM4_FEC_SetDisplayRegion(this.port,e,0,0,0,0,0,0,null,a)}else s=0;return o&&(this.iFECRatio_x=this.canvasWidth/(l-x),this.iFECRatio_y=this.canvasHeight/(f-c),this.iFECZoomNum++),s}},{key:"JSPlayM4_FEC_SetBackCilling",value:function(e,t){var r=1;return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetBackCilling","color: red"),0):(1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECSetBackCilling",fishSubPort:e,bValue:t}):r=0:r=null!=this.pcVideoManager?this.pcVideoManager.FEC_SetBackCilling(e,t):0:r=Fe._JSPlayM4_FEC_SetBackCilling(this.port,e,t),r)}},{key:"JSPlayM4_FEC_GetPTZPort",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null===Fe)return console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_GetPTZPort","color: red"),0;var n=-1;return this.FECGetPTZPortCB=i,1===this.decodeEngine?this.hasWebWorker?null!=this.decodeWorker?this.decodeWorker.postMessage({command:"FECGetPTZPort",fPositionX:e,fPositionY:t}):n=0:null!=this.pcVideoManager?(((n=this.pcVideoManager.FEC_GetPTZPort(r,e,t))<0||n>31||null==n)&&(n=-1),null!=this.FECGetPTZPortCB&&this.FECGetPTZPortCB(n)):n=-1:console.info("%c softDecoder not support JSPlayM4_FEC_GetPTZPort","color: red"),n}},{key:"JSPlayM4_FEC_SetPTZDisplayMode",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_FEC_SetPTZDisplayMode","color: red"),0):(1===this.decodeEngine&&(this.hasWebWorker?null!=this.decodeWorker&&this.decodeWorker.postMessage({command:"FECSetPTZDisplayMode",ptzMode:e}):null!=this.pcVideoManager&&this.pcVideoManager.FEC_SetPTZDisplayMode(e)),1)}},{key:"JSPlayM4_FEC_PTZ2Window",value:function(e,t,r,i){return 1}},{key:"JSPlayM4_FEC_PTZ2Window2",value:function(e,t,r){return 1}},{key:"JSPlayM4_InputPrivateInfo",value:function(e,t,r){var i={};i.linesNum=Fe.HEAP32[e>>2],i.absTimeStamp=Fe.HEAP32[e+4>>2],i.stDrawLinesArray=[];for(var n=0;n<i.linesNum;n++){i.stDrawLinesArray[n]={},i.stDrawLinesArray[n].vertex_num=Fe.HEAP32[e+8+112*n>>2],i.stDrawLinesArray[n].lineWidth=Fe.HEAP32[e+12+112*n>>2],i.stDrawLinesArray[n].bFill=Fe.HEAP32[e+16+112*n>>2],i.stDrawLinesArray[n].bLoop=Fe.HEAP32[e+20+112*n>>2],i.stDrawLinesArray[n].color={},i.stDrawLinesArray[n].color.R=Fe.HEAPF32[e+24+112*n>>2],i.stDrawLinesArray[n].color.G=Fe.HEAPF32[e+28+112*n>>2],i.stDrawLinesArray[n].color.B=Fe.HEAPF32[e+32+112*n>>2],i.stDrawLinesArray[n].color.A=Fe.HEAPF32[e+36+112*n>>2],i.stDrawLinesArray[n].stPoint=[];for(var a=0;a<i.stDrawLinesArray[n].vertex_num;a++)i.stDrawLinesArray[n].stPoint[a]={},i.stDrawLinesArray[n].stPoint[a].x=Fe.HEAPF32[e+40+112*n+8*a>>2],i.stDrawLinesArray[n].stPoint[a].y=Fe.HEAPF32[e+44+112*n+8*a>>2]}var o={};o.nFontsNum=Fe.HEAP32[t>>2],o.absTimeStamp=Fe.HEAP32[t+4>>2],o.stDrawFontsArray=[];for(var s=0;s<o.nFontsNum;s++){o.stDrawFontsArray[s]={},o.stDrawFontsArray[s].nFontSizeW=Fe.HEAP32[t+8+40*s>>2],o.stDrawFontsArray[s].nFontSizeH=Fe.HEAP32[t+12+40*s>>2],o.stDrawFontsArray[s].color={},o.stDrawFontsArray[s].color.R=Fe.HEAPF32[t+16+40*s>>2],o.stDrawFontsArray[s].color.G=Fe.HEAPF32[t+20+40*s>>2],o.stDrawFontsArray[s].color.B=Fe.HEAPF32[t+24+40*s>>2],o.stDrawFontsArray[s].color.A=Fe.HEAPF32[t+28+40*s>>2],o.stDrawFontsArray[s].stPoint={},o.stDrawFontsArray[s].stPoint.x=Fe.HEAPF32[t+32+40*s>>2],o.stDrawFontsArray[s].stPoint.y=Fe.HEAPF32[t+36+40*s>>2];var x=Fe.HEAP32[t+40+40*s>>2],l=Fe.HEAP32[t+44+40*s>>2],c=new Uint8Array(l);c.set(Fe.HEAP8.subarray(x,x+l));for(var f="",h=0;h<c.length;h++)0!==c[h]&&(f+=String.fromCharCode(c[h]));o.stDrawFontsArray[s].fontString=f}var u={};u.absTimeStamp=Fe.HEAP32[r>>2],u.nWidth=Fe.HEAP32[r+4>>2],u.nHeight=Fe.HEAP32[r+8>>2],u.pstRect={},u.pstRect.fTop=Fe.HEAPF32[r+12>>2],u.pstRect.fBottom=Fe.HEAPF32[r+16>>2],u.pstRect.fLeft=Fe.HEAPF32[r+20>>2],u.pstRect.fRight=Fe.HEAPF32[r+24>>2],u.nPixelFormat=Fe.HEAP32[r+28>>2],u.fAlpha=Fe.HEAPF32[r+32>>2],u.nPixelFormat;var d=Fe.HEAP32[r+36>>2],_=Fe.HEAP32[r+40>>2],p=new Uint8Array(_);return p.set(Fe.HEAPU8.subarray(d,d+_)),u.picImageData=p,1===this.decodeEngine&&(this.hasWebWorker?this.decodeWorker.postMessage({command:"InputPrivateInfo",linesInfo:i,fontInfo:o,ImageInfo:u}):null!=this.pcVideoManager&&this.pcVideoManager.InputPrivateInfo(i,o,u)),1}},{key:"JSPlayM4_SetWaterMarkFont",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetWaterMarkFont","color: red"),0):(1===this.decodeEngine?this.hasWebWorker?this.decodeWorker.postMessage({command:"SetWaterMarkFont",fontParam:e}):null!=this.pcVideoManager&&this.pcVideoManager.SetWaterMarkFont(e):console.log("%c1>soft decode not support SetWaterMarkFont,","color: red"),1)}},{key:"JSPlayM4_SetWaterMarkImage",value:function(e){return null===Fe?(console.info("%coJSPlayerWasm is null,can't JSPlayM4_SetWaterMarkImage","color: red"),0):(1===this.decodeEngine?this.hasWebWorker?this.decodeWorker.postMessage({command:"SetWaterMarkImage",imageParam:e}):null!=this.pcVideoManager&&this.pcVideoManager.SetWaterMarkImage(e):console.log("%c1>soft decode not support SetWaterMarkImage,","color: red"),1)}},{key:"_stringToBytes",value:function(e){for(var t,r,i=[],n=0;n<e.length;n++){t=e.charCodeAt(n),r=[];do{r.push(255&t),t>>=8}while(t);i=i.concat(r.reverse())}return i}},{key:"_downloadFile",value:function(e,t){var r=e;a(e,Blob)||a(e,File)||(r=new Blob([e]));var i=window.URL.createObjectURL(r),n=window.document.createElement("a");n.href=i,n.download=t;var o=document.createEvent("MouseEvents");o.initEvent("click",!0,!0),n.dispatchEvent(o)}},{key:"downloadRTPData",value:function(e){if(this.bWriteData){var t=e,r=this.aTotalBuffer.length;console.log("totalLength:"+r);for(var i=0,n=t.length;i<n;i++)this.aTotalBuffer[r+i]=t[i];this.iFrameNum++,t=null,console.log("downloadRTPdata iFrameNum:"+this.iFrameNum)}if(this.bWriteData&&this.iFrameNum>=600){console.log("download600RawData");var a=new Uint8Array(this.aTotalBuffer);this._downloadFile(a,"Raw600.data"),this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.bWriteData=!1,this.iFrameNum=0,a=null}}},{key:"downloadAudioPCMData",value:function(e){if(this.bWriteAudioPCMData){for(var t=e,r=this.audioPCMBuffer.length,i=0,n=t.length;i<n;i++)this.audioPCMBuffer[r+i]=t[i];this.iAudioPCMFrameNum++,t=null,console.log("download ANR Decode AudioData FrameNum:"+this.iAudioPCMFrameNum)}if(this.bWriteAudioPCMData&&this.iAudioPCMFrameNum>=WRITE_PCM_NUM){console.log("download"+WRITE_PCM_NUM+"this.audioPCMBuffer");var a=new Uint8Array(this.audioPCMBuffer);this._downloadFile(a,"AudioANR.data"),this.audioPCMBuffer.splice(0,this.audioPCMBuffer.length),this.bWriteAudioPCMData=!1,this.iAudioPCMFrameNum=0,a=null}}}]),t}();window._getFExplore=function(){var e,t={},r=navigator.userAgent.toLowerCase();if((e=r.match(/rv:([\d.]+)\) like gecko/))||(e=r.match(/msie ([\d\.]+)/))?t.ie=e[1]:(e=r.match(/edge\/([\d\.]+)/))?t.edge=e[1]:(e=r.match(/firefox\/([\d\.]+)/))?t.firefox=e[1]:(e=r.match(/(?:opera|opr).([\d\.]+)/))?t.opera=e[1]:(e=r.match(/chrome\/([\d\.]+)/))?t.chrome=e[1]:(e=r.match(/version\/([\d\.]+).*safari/))&&(t.safari=e[1]),t.chrome){var i=t.chrome,n=i.indexOf(".");return Number(i.substring(0,n))}return t.ie?console.info("%c1>your browser is IE ,it does not support play without plugin","color: red"):t.safari?console.info("%c1>your browser is safari ,it does not support softV2.0 or hard decode","color: red"):t.firefox?console.info("%c1>your browser is Firefox ,it only support soft decode","color: red"):console.info("%c1>your browser does not support play without plugin","color: red"),-1},window.JSPlayM4_AdditionDataCBFun=function(e,t,r){if(null!=Te[r][e]){var i={};i.dataType=Fe.HEAP32[t>>2],i.dataStrVersion=Fe.HEAP32[t+4>>2],i.dataTimeStamp=Fe.HEAP32[t+8>>2],i.dataLength=Fe.HEAP32[t+12>>2],i.pData=Fe.HEAP32[t+16>>2],i.additionDataBuffer=new Uint8Array(i.dataLength),i.additionDataBuffer.set(Fe.HEAPU8.subarray(i.pData,i.pData+i.dataLength)),Te[r][e].hasOwnProperty("addtionCallBackFun")&&null!=Te[r][e].addtionCallBackFun&&null!=Te[r][e].addtionCallBackFun&&Te[r][e].addtionCallBackFun(i)}},window.JSPlayM4_DisplayCallBack=function(e,t,r,i,n){if(null!=Te[n][e]){var a={};a.yuvData=t,a.isize=r,a.timeStamp=i,Te[n][e].hasOwnProperty("displayCallBackFun")&&null!=Te[n][e].displayCallBackFun&&Te[n][e].displayCallBackFun(a)}},window.JSPlayM4_DecCallBack=function(e,t,r,i,n,a){if(null!=Te[a][e]){var o={};o.port=e,o.Data=t,o.isize=r,o.iDataType=i,o.SampleRate=n,Te[a][e].hasOwnProperty("decCallBackFun")&&null!=Te[a][e].decCallBackFun&&Te[a][e].decCallBackFun(o)}},window.JSPlayM4_RunTimeInfoCallBack=function(e,t,r,i){if(null!=Te[i][e]){var n=Fe.HEAP32[t>>2],a=Fe.HEAP32[t+4>>2],o=Fe.HEAP32[t+8>>2],s=Fe.HEAP32[t+12>>2],x=r;Te[i][e].hasOwnProperty("runtimeCBFun")&&null!=Te[i][e].runtimeCBFun&&Te[i][e].runtimeCBFun(n,a,o,s,x)}},window.JSPlayM4_FirstFrameCallBack=function(e,t){null!=Te[t][e]&&Te[t][e].hasOwnProperty("FFCallBackFun")&&null!=Te[t][e].FFCallBackFun&&null!=Te[t][e].FFCallBackFun&&Te[t][e].FFCallBackFun()},window.JSPlayM4_AudioPCMCallBack=function(e,t,r,i){null!=Te[i][e]&&Te[i][e].__proto__.hasOwnProperty("downloadAudioPCMData")&&Te[i][e].downloadAudioPCMData(t)},window.JSPlayM4_RTPRawDataCallBack=function(e,t,r){null!=Te[r][port]&&Te[r][port].__proto__.hasOwnProperty("downloadRTPData")&&Te[r][port].downloadRTPData(e)};var Le,Be=function(e){return"\n(function (event) {\n    const AUDIO_TYPE = 0;\t// 音频\n    const VIDEO_TYPE = 1;   // 视频\n    const PRIVT_TYPE = 2;  // 私有帧\n\n    const PLAYM4_AUDIO_FRAME = 100; // 音频帧\n    const PLAYM4_VIDEO_FRAME = 101; // 视频帧\n\n    const PLAYM4_OK = 1;\n    const PLAYM4_ORDER_ERROR = 2;\n    const PLAYM4_DECODE_ERROR = 44 \t// 解码失败\n    const PLAYM4_NOT_KEYFRAME = 48; \t// 非关键帧\n    const PLAYM4_NEED_MORE_DATA = 31;   // 需要更多数据才能解析\n    const PLAYM4_NEED_NEET_LOOP = 35; //丢帧需要下个循环\n    const PLAYM4_SYS_NOT_SUPPORT = 16; \t// 不支持\n\n    importScripts('".concat(e,'\');\n    Module.addOnPostRun(function () {\n        postMessage({ \'function\': "loaded" });\n    });\n\n    var iStreamMode = 0;  // 流模式\n\n    var bOpenMode = false;\n    var bOpenStream = false;\n\n    var funGetFrameData = null;\n    var funGetAudFrameData = null;\n\n    var bWorkerPrintLog = false;//worker层log开关\n\n    var g_nPort = -1;\n    var pInputData = null;\n    var inputBufferSize = 40960;\n\n    self.JSPlayM4_RunTimeInfoCallBack = function (nPort, pstRunTimeInfo, pUser) {\n        let port = nPort;\n        let user = pUser;\n        let nRunTimeModule = Module.HEAP32[pstRunTimeInfo >> 2];\n        let nStrVersion = Module.HEAP32[pstRunTimeInfo + 4 >> 2];\n        let nFrameTimeStamp = Module.HEAP32[pstRunTimeInfo + 8 >> 2];\n        let nFrameNum = Module.HEAP32[pstRunTimeInfo + 12 >> 2];\n        let nErrorCode = Module.HEAP32[pstRunTimeInfo + 16 >> 2];\n        // console.log("nRunTimeModule:"+nRunTimeModule+",nFrameNum:"+nFrameNum+",nErrorCode:"+nErrorCode);\n        postMessage({ \'function\': "RunTimeInfoCallBack", \'nRunTimeModule\': nRunTimeModule, \'nStrVersion\': nStrVersion, \'nFrameTimeStamp\': nFrameTimeStamp, \'nFrameNum\': nFrameNum, \'nErrorCode\': nErrorCode });\n    }\n\n    onmessage = function (event) {\n        var eventData = event.data;\n        var res = 0;\n        switch (eventData.command) {\n            case "printLog":\n                let downloadFlag = eventData.data;\n                if (downloadFlag === true) {\n                    bWorkerPrintLog = true;\n                    res = Module._SetPrintLogFlag(g_nPort, downloadFlag);\n                }\n                else {\n                    bWorkerPrintLog = false;\n                    res = Module._SetPrintLogFlag(g_nPort, downloadFlag);\n                }\n\n                if (res !== PLAYM4_OK) {\n                    console.log("DecodeWorker.js: PlayerSDK print log failed,res" + res);\n                    postMessage({ \'function\': "printLog", \'errorCode\': res });\n                }\n                break;\n            case "SetPlayPosition":\n                let nFrameNumOrTime = eventData.data;\n                let enPosType = eventData.type;\n                // res = Module._SetPlayPosition(nFrameNumOrTime,enPosType);\n                // if (res !== PLAYM4_OK)\n                // {\n                //     postMessage({\'function\': "SetPlayPosition", \'errorCode\': res});\n                //     return;\n                // }\n                // //有没有buffer需要清除\n\n                break;\n            case "SetStreamOpenMode":\n                //获取端口号\n                g_nPort = Module._GetPort();\n                //设置流打开模式\n                iStreamMode = eventData.data;\n                res = Module._SetStreamOpenMode(g_nPort, iStreamMode);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "SetStreamOpenMode", \'errorCode\': res });\n                    return;\n                }\n                bOpenMode = true;\n                break;\n\n            case "OpenStream":\n                // 接收到的数据\n                var iHeadLen = eventData.dataSize;\n                var pHead = Module._malloc(iHeadLen + 4);\n                if (pHead === null) {\n                    return;\n                }\n                var aHead = Module.HEAPU8.subarray(pHead, pHead + iHeadLen);\n                aHead.set(new Uint8Array(eventData.data));\n                res = Module._OpenStream(g_nPort, pHead, iHeadLen, eventData.bufPoolSize);\n                postMessage({ \'function\': "OpenStream", \'errorCode\': res });\n                if (res !== PLAYM4_OK) {\n                    //释放内存\n                    Module._free(pHead);\n                    pHead = null;\n                    return;\n                }\n                bOpenStream = true;\n                break;\n            case "Play":\n                let resP = Module._Play(g_nPort);\n                if (resP !== PLAYM4_OK) {\n                    return;\n                }\n                break;\n            case "InputData":\n                // 接收到的数据\n                var iLen = eventData.dataSize;\n                if (iLen > 0) {\n                    if (pInputData == null || iLen > inputBufferSize) {\n                        if (pInputData != null) {\n                            Module._free(pInputData);\n                            pInputData = null;\n                        }\n                        if (iLen > inputBufferSize) {\n                            inputBufferSize = iLen;\n                        }\n\n                        pInputData = Module._malloc(inputBufferSize);\n                        if (pInputData === null) {\n                            return;\n                        }\n                    }\n\n                    var inputData = new Uint8Array(eventData.data);\n                    // var aInputData = Module.HEAPU8.subarray(pInputData, pInputData + iLen);\n                    // aInputData.set(inputData);\n                    Module.writeArrayToMemory(inputData, pInputData);\n                    inputData = null;\n                    res = Module._InputData(g_nPort, pInputData, iLen);\n                    if (res !== PLAYM4_OK) {\n                        let errorCode = Module._GetLastError(g_nPort);\n                        let sourceRemain = Module._GetSourceBufferRemain(g_nPort);\n                        postMessage({ \'function\': "InputData", \'errorCode\': errorCode, "sourceRemain": sourceRemain });\n                    }\n                    //Module._free(pInputData);\n                    //pInputData = null;\n                } else {\n                    let sourceRemain = Module._GetSourceBufferRemain(g_nPort);\n                    if (sourceRemain == 0) {\n                        postMessage({ \'function\': "InputData", \'errorCode\': PLAYM4_NEED_MORE_DATA });\n                        return;\n                    }\n                }\n\n                /////////////////////\n                // if (funGetFrameData === null) {\n                //     funGetFrameData = Module.cwrap(\'GetFrameData\', \'number\');\n                // }\n\n                while (bOpenMode && bOpenStream) {\n\n                    var ret = getFrameData();\n                    // 直到获取视频帧或数据不足为止\n                    if (PLAYM4_VIDEO_FRAME === ret || PLAYM4_NEED_MORE_DATA === ret || PLAYM4_ORDER_ERROR === ret)//PLAYM4_VIDEO_FRAME === ret ||  || PLAYM4_NEED_NEET_LOOP === ret\n                    {\n                        break;\n                    }\n                }\n                break;\n\n            case "SetSecretKey":\n                var keyLen = eventData.nKeyLen;\n                var pKeyData = Module._malloc(keyLen);\n                if (pKeyData === null) {\n                    return;\n                }\n                var nKeySize = eventData.data.length\n                var bufData = stringToBytes(eventData.data);\n                var aKeyData = Module.HEAPU8.subarray(pKeyData, pKeyData + keyLen);\n                let u8array = new Uint8Array(keyLen);\n                aKeyData.set(u8array, 0);\n                aKeyData.set(new Uint8Array(bufData));\n                aKeyData = null;\n                u8array = null;\n\n                res = Module._SetSecretKey(g_nPort, eventData.nKeyType, pKeyData, keyLen);//, nKeySize\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "SetSecretKey", \'errorCode\': res });\n                    Module._free(pKeyData);\n                    pKeyData = null;\n                    return;\n                }\n\n                Module._free(pKeyData);\n                pKeyData = null;\n                break;\n\n            case "GetBMP":\n                var nBMPWidth = eventData.width;\n                var nBMPHeight = eventData.height;\n                var pYUVData = eventData.data;\n                var nYUVSize = nBMPWidth * nBMPHeight * 3 / 2;\n                var oBMPCropRect = eventData.rect;\n\n                var pDataYUV = Module._malloc(nYUVSize);\n                if (pDataYUV === null) {\n                    return;\n                }\n\n                Module.writeArrayToMemory(new Uint8Array(pYUVData, 0, nYUVSize), pDataYUV);\n\n                // 分配BMP空间\n                var nBmpSize = nBMPWidth * nBMPHeight * 4 + 60;\n                var pBmpData = Module._malloc(nBmpSize);\n                var pBmpSize = Module._malloc(4);\n                if (pBmpData === null || pBmpSize === null) {\n                    Module._free(pDataYUV);\n                    pDataYUV = null;\n\n                    if (pBmpData != null) {\n                        Module._free(pBmpData);\n                        pBmpData = null;\n                    }\n\n                    if (pBmpSize != null) {\n                        Module._free(pBmpSize);\n                        pBmpSize = null;\n                    }\n                    return;\n                }\n\n                //Module._memset(pBmpSize, nBmpSize, 4); // 防止bmp截图出现输入数据过大的错误码\n                Module.setValue(pBmpSize, nBmpSize, "i32");\n                res = Module._GetBMP(g_nPort, pDataYUV, nYUVSize, pBmpData, pBmpSize,\n                    oBMPCropRect.left, oBMPCropRect.top, oBMPCropRect.right, oBMPCropRect.bottom);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "GetBMP", \'errorCode\': res });\n                    Module._free(pDataYUV);\n                    pDataYUV = null;\n                    Module._free(pBmpData);\n                    pBmpData = null;\n                    Module._free(pBmpSize);\n                    pBmpSize = null;\n                    return;\n                }\n\n                // 获取BMP图片大小\n                var nBmpDataSize = Module.getValue(pBmpSize, "i32");\n\n                // 获取BMP图片数据\n                var aBmpData = new Uint8Array(nBmpDataSize);\n                aBmpData.set(Module.HEAPU8.subarray(pBmpData, pBmpData + nBmpDataSize));\n\n                postMessage({ \'function\': "GetBMP", \'data\': aBmpData, \'errorCode\': res }, [aBmpData.buffer]);\n                aBmpData = null;\n                if (pDataYUV != null) {\n                    Module._free(pDataYUV);\n                    pDataYUV = null;\n                }\n                if (pBmpData != null) {\n                    Module._free(pBmpData);\n                    pBmpData = null;\n                }\n                if (pBmpSize != null) {\n                    Module._free(pBmpSize);\n                    pBmpSize = null;\n                }\n                break;\n\n            case "GetJPEG":\n                var nJpegWidth = eventData.width;\n                var nJpegHeight = eventData.height;\n                var pYUVData1 = eventData.data;\n                var nYUVSize1 = nJpegWidth * nJpegHeight * 3 / 2;\n                var oJpegCropRect = eventData.rect;\n\n                var pDataYUV1 = Module._malloc(nYUVSize1);\n                if (pDataYUV1 === null) {\n                    return;\n                }\n\n                Module.writeArrayToMemory(new Uint8Array(pYUVData1, 0, nYUVSize1), pDataYUV1);\n\n                // 分配JPEG空间\n                var pJpegData = Module._malloc(nYUVSize1);\n                var pJpegSize = Module._malloc(4);\n                if (pJpegData === null || pJpegSize === null) {\n                    if (pJpegData != null) {\n                        Module._free(pJpegData);\n                        pJpegData = null;\n                    }\n\n                    if (pJpegSize != null) {\n                        Module._free(pJpegSize);\n                        pJpegSize = null;\n                    }\n\n                    if (pDataYUV1 != null) {\n                        Module._free(pDataYUV1);\n                        pDataYUV1 = null;\n                    }\n                    return;\n                }\n\n                Module.setValue(pJpegSize, nJpegWidth * nJpegHeight * 2, "i32");    // JPEG抓图，输入缓冲长度不小于当前帧YUV大小\n\n                res = Module._GetJPEG(g_nPort, pDataYUV1, nYUVSize1, pJpegData, pJpegSize,\n                    oJpegCropRect.left, oJpegCropRect.top, oJpegCropRect.right, oJpegCropRect.bottom);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "GetJPEG", \'errorCode\': res });\n                    if (pJpegData != null) {\n                        Module._free(pJpegData);\n                        pJpegData = null;\n                    }\n\n                    if (pJpegSize != null) {\n                        Module._free(pJpegSize);\n                        pJpegSize = null;\n                    }\n\n                    if (pDataYUV1 != null) {\n                        Module._free(pDataYUV1);\n                        pDataYUV1 = null;\n                    }\n                    return;\n                }\n\n                // 获取JPEG图片大小\n                var nJpegSize = Module.getValue(pJpegSize, "i32");\n\n                // 获取JPEG图片数据\n                var aJpegData = new Uint8Array(nJpegSize);\n                aJpegData.set(Module.HEAPU8.subarray(pJpegData, pJpegData + nJpegSize));\n\n                postMessage({ \'function\': "GetJPEG", \'data\': aJpegData, \'errorCode\': res }, [aJpegData.buffer]);\n\n                nJpegSize = null;\n                aJpegData = null;\n\n                if (pDataYUV1 != null) {\n                    Module._free(pDataYUV1);\n                    pDataYUV1 = null;\n                }\n                if (pJpegData != null) {\n                    Module._free(pJpegData);\n                    pJpegData = null;\n                }\n                if (pJpegSize != null) {\n                    Module._free(pJpegSize);\n                    pJpegSize = null;\n                }\n                break;\n\n            case "SetDecodeFrameType":\n                var nFrameType = eventData.data;\n                res = Module._SetDecodeFrameType(g_nPort, nFrameType);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "SetDecodeFrameType", \'errorCode\': res });\n                    return;\n                }\n                break;\n            case "CloseStream":\n                //stop\n                let resS = Module._Stop(g_nPort);\n                if (resS !== PLAYM4_OK) {\n                    postMessage({ \'function\': "Stop", \'errorCode\': res });\n                    return;\n                }\n                //closeStream\n                res = Module._CloseStream(g_nPort);\n                if (res !== PLAYM4_OK) {\n                    postMessage({ \'function\': "CloseStream", \'errorCode\': res });\n                    return;\n                }\n                //freePort\n                let resF = Module._FreePort(g_nPort);\n                if (resF !== PLAYM4_OK) {\n                    postMessage({ \'function\': "FreePort", \'errorCode\': res });\n                    return;\n                }\n                if (pInputData != null) {\n                    Module._free(pInputData);\n                    pInputData = null;\n                }\n                break;\n            case "PlaySound":\n                let resPS = Module._PlaySound(g_nPort);\n                if (resPS !== PLAYM4_OK) {\n                    console.log("PlaySound failed");\n                    return;\n                }\n                break;\n            case "StopSound":\n                let resSS = Module._StopSound();\n                if (resSS !== PLAYM4_OK) {\n                    console.log("StopSound failed");\n                    return;\n                }\n                break;\n            case "SetVolume":\n                let resSV = Module._SetVolume(g_nPort, eventData.volume);\n                if (resSV !== PLAYM4_OK) {\n                    console.log("Audio SetVolume failed");\n                    return;\n                }\n                break;\n            case "GetVolume":\n                let volume = Module._GetVolume();\n                if (volume > 0) {\n                    postMessage({ \'function\': "GetVolume", \'volume\': volume });\n                }\n                else {\n                    console.log("Audio GetVolume failed");\n                    return;\n                }\n                break;\n            case "OnlyPlaySound":\n                let resOPS = Module._OnlyPlaySound(g_nPort);\n                if (resOPS !== PLAYM4_OK) {\n                    console.log("OnlyPlaySound failed");\n                    return;\n                }\n                break;\n            case "Pause":\n                let resPa = Module._Pause(g_nPort, eventData.bPlay);\n                if (resPa !== PLAYM4_OK) {\n                    console.log("Pause failed");\n                    return;\n                }\n            case "PlayRate":\n                Module._SetPlayRate(g_nPort, eventData.playRate);\n                break;\n            case "SetIFrameDecInterval":\n                Module._SetIFrameDecInterval(g_nPort, eventData.data);\n                break;\n            case "SetLostFrameMode":\n                Module._SetLostFrameMode(g_nPort, eventData.data, 0);\n                break;\n            case "SetDemuxModel":\n                let resSDM = Module._SetDemuxModel(g_nPort, eventData.nIdemuxType, eventData.bTrue);\n                break;\n            case "SkipErrorData":\n                Module._SkipErrorData(g_nPort, eventData.bSkip);\n                break;\n            case "SetDecodeERC":\n                Module._SetDecodeERC(g_nPort, eventData.nLevel);\n                break;\n            case "SetANRParam":\n                Module._SetANRParam(g_nPort, eventData.nEnable, eventData.nANRLevel);\n                break;\n            case "SetResampleValue":\n                Module._SetResampleValue(g_nPort, eventData.nEnable, eventData.resampleValue);\n                break;\n            case "GetLastError":\n                let errorCode = Module._GetLastError(g_nPort);\n                postMessage({ \'function\': "GetLastError", \'errorCode\': errorCode });\n                break;\n            case "SetGlobalBaseTime":\n                Module._SetGlobalBaseTime(g_nPort, eventData.year, eventData.month, eventData.day, eventData.hour, eventData.min, eventData.sec, eventData.ms);\n                break;\n            case "SetRunTimeInfoCB":\n                Module._SetRunTimeInfoCallBackEx(g_nPort, eventData.nModuleType, 0);\n                break;\n            default:\n                break;\n        }\n    };\n\n    function getOSDTime(oFrameInfo) {\n        var iYear = oFrameInfo.year;\n        var iMonth = oFrameInfo.month;\n        var iDay = oFrameInfo.day;\n        var iHour = oFrameInfo.hour;\n        var iMinute = oFrameInfo.minute;\n        var iSecond = oFrameInfo.second;\n        var iMiSecond = oFrameInfo.misecond\n\n        if (iMonth < 10) {\n            iMonth = "0" + iMonth;\n        }\n        if (iDay < 10) {\n            iDay = "0" + iDay;\n        }\n        if (iHour < 10) {\n            iHour = "0" + iHour;\n        }\n        if (iMinute < 10) {\n            iMinute = "0" + iMinute;\n        }\n        if (iSecond < 10) {\n            iSecond = "0" + iSecond;\n        }\n        let osdTime = {};\n\n        osdTime.year = iYear;\n        osdTime.month = iMonth;\n        osdTime.week = 0;\n        osdTime.day = iDay;\n        osdTime.hour = iHour;\n        osdTime.minute = iMinute;\n        osdTime.second = iSecond;\n        osdTime.milliseconds = iMiSecond;\n        return osdTime;\n        //return iYear + "-" + iMonth + "-" + iDay + " " + iHour + ":" + iMinute + ":" + iSecond;\n    }\n    // 获取帧数据\n    function getFrameData() {\n        // function getFrameData() {\n        // 获取帧数据\n        var res = Module._GetFrameData();\n        //var res = fun();\n        if (res === PLAYM4_OK) {\n            var iFrameInfo = Module._GetFrameInfo();\n            let oFrameInfo = {};\n            oFrameInfo.frameType = Module.HEAP32[iFrameInfo >> 2];\n            oFrameInfo.frameSize = Module.HEAP32[iFrameInfo + 4 >> 2];\n            oFrameInfo.width = Module.HEAP32[iFrameInfo + 8 >> 2];\n            oFrameInfo.height = Module.HEAP32[iFrameInfo + 12 >> 2];\n            oFrameInfo.timeStamp = Module.HEAP32[iFrameInfo + 16 >> 2];\n            oFrameInfo.frameRate = Module.HEAP32[iFrameInfo + 20 >> 2];\n            oFrameInfo.bitsPerSample = Module.HEAP32[iFrameInfo + 24 >> 2];\n            oFrameInfo.samplesPerSec = Module.HEAP32[iFrameInfo + 28 >> 2];\n            oFrameInfo.channels = Module.HEAP32[iFrameInfo + 32 >> 2];\n            oFrameInfo.frameNum = Module.HEAP32[iFrameInfo + 36 >> 2];\n\n            oFrameInfo.cropLeft = Module.HEAP32[iFrameInfo + 40 >> 2];\n            oFrameInfo.cropRight = Module.HEAP32[iFrameInfo + 44 >> 2];\n            oFrameInfo.cropTop = Module.HEAP32[iFrameInfo + 48 >> 2];\n            oFrameInfo.cropBottom = Module.HEAP32[iFrameInfo + 52 >> 2];\n\n            oFrameInfo.year = Module.HEAP16[iFrameInfo + 56 >> 1];\n            oFrameInfo.month = Module.HEAP16[iFrameInfo + 58 >> 1];\n            oFrameInfo.day = Module.HEAP16[iFrameInfo + 60 >> 1];\n            oFrameInfo.hour = Module.HEAP16[iFrameInfo + 62 >> 1];\n            oFrameInfo.minute = Module.HEAP16[iFrameInfo + 64 >> 1];\n            oFrameInfo.second = Module.HEAP16[iFrameInfo + 66 >> 1];\n            oFrameInfo.misecond = Module.HEAP16[iFrameInfo + 68 >> 1];\n            switch (oFrameInfo.frameType) {\n                case AUDIO_TYPE:\n                    var iSize = oFrameInfo.frameSize;\n                    if (0 === iSize) {\n                        return -1;\n                    }\n                    var pPCM = Module._GetFrameBuffer();\n                    // var audioBuf = new ArrayBuffer(iSize);\n                    var aPCMData = new Uint8Array(iSize);\n                    aPCMData.set(Module.HEAPU8.subarray(pPCM, pPCM + iSize));\n                    if (bWorkerPrintLog) {\n                        console.log("<<<Worker: audio media Info: nSise:" + oFrameInfo.frameSize + ",nSampleRate:" + oFrameInfo.samplesPerSec + \',channel:\' + oFrameInfo.channels + \',bitsPerSample:\' + oFrameInfo.bitsPerSample);\n                    }\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "audioType", \'data\': aPCMData.buffer,\n                        \'frameInfo\': oFrameInfo, \'errorCode\': res\n                    }, [aPCMData.buffer]);\n\n                    oFrameInfo = null;\n                    pPCM = null;\n                    aPCMData = null;\n                    return PLAYM4_AUDIO_FRAME;\n\n                case VIDEO_TYPE:\n                    var szOSDTime = getOSDTime(oFrameInfo);\n\n                    var iWidth = oFrameInfo.width;\n                    var iHeight = oFrameInfo.height;\n\n                    var iYUVSize = iWidth * iHeight * 3 / 2;\n                    if (0 === iYUVSize) {\n                        return -1;\n                    }\n\n                    var pYUV = Module._GetFrameBuffer();\n\n                    // 图像数据渲染后压回，若从主码流切到子码流，存在数组大小与图像大小不匹配现象\n                    var aYUVData = new Uint8Array(iYUVSize);\n                    aYUVData.set(Module.HEAPU8.subarray(pYUV, pYUV + iYUVSize));\n                    if (bWorkerPrintLog) {\n                        console.log("<<<Worker: video media Info: Width:" + oFrameInfo.width + ",Height:" + oFrameInfo.height + ",timeStamp:" + oFrameInfo.timeStamp);\n                    }\n\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "videoType", \'data\': aYUVData.buffer,\n                        \'dataLen\': aYUVData.length, \'osd\': szOSDTime, \'frameInfo\': oFrameInfo, \'errorCode\': res\n                    }, [aYUVData.buffer]);\n\n                    oFrameInfo = null;\n                    pYUV = null;\n                    aYUVData = null;\n                    return PLAYM4_VIDEO_FRAME;\n\n                case PRIVT_TYPE:\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "", \'data\': null,\n                        \'dataLen\': -1, \'osd\': 0, \'frameInfo\': null, \'errorCode\': PLAYM4_SYS_NOT_SUPPORT\n                    });\n                    return PLAYM4_SYS_NOT_SUPPORT;\n\n                default:\n                    postMessage({\n                        \'function\': "GetFrameData", \'type\': "", \'data\': null,\n                        \'dataLen\': -1, \'osd\': 0, \'frameInfo\': null, \'errorCode\': PLAYM4_SYS_NOT_SUPPORT\n                    });\n                    return PLAYM4_SYS_NOT_SUPPORT;\n            }\n        }\n        else {\n            let errorCode = Module._GetLastError(g_nPort);\n            //解码失败返回裸数据\n            if (PLAYM4_DECODE_ERROR === errorCode) {\n                var rawInfo = Module._GetRawDataInfo();\n                var pRawData = Module._GetRawDataBuffer();\n                var aRawData = new Uint8Array(rawInfo.isize);\n                aRawData.set(Module.HEAPU8.subarray(pRawData, pRawData + rawInfo.isize));\n                postMessage({\n                    \'function\': "GetRawData", \'type\': "", \'data\': aRawData.buffer,\n                    \'rawDataLen\': rawInfo.isize, \'osd\': 0, \'frameInfo\': null, \'errorCode\': errorCode\n                });\n                rawInfo = null;\n                pRawData = null;\n                aRawData = null;\n            }\n            //需要更多数据\n            if (PLAYM4_NEED_MORE_DATA === errorCode || PLAYM4_SYS_NOT_SUPPORT === errorCode || PLAYM4_NEED_NEET_LOOP === errorCode) {\n                postMessage({\n                    \'function\': "GetFrameData", \'type\': "", \'data\': null,\n                    \'dataLen\': -1, \'osd\': 0, \'frameInfo\': null, \'errorCode\': errorCode\n                });\n            }\n            return errorCode;\n        }\n    }\n\n    // 开始计算时间\n    function startTime() {\n        return new Date().getTime();\n    }\n\n    // 结束计算时间\n    function endTime() {\n        return new Date().getTime();\n    }\n\n    // 字母字符串转byte数组\n    function stringToBytes(str) {\n        var ch, st, re = [];\n        for (var i = 0; i < str.length; i++) {\n            ch = str.charCodeAt(i);  // get char\n            st = [];                 // set up "stack"\n            do {\n                st.push(ch & 0xFF);  // push byte to stack\n                ch = ch >> 8;          // shift value down by 1 byte\n            }\n            while (ch);\n            // add stack contents to result\n            // done because chars have "wrong" endianness\n            re = re.concat(st.reverse());\n        }\n        // return an array of bytes\n        return re;\n    }\n})();\n')},Oe=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),He=(Le=void 0,function(e){return e&&(Le=e),Le}),Ne=function(){function e(){if(function(e,t){if(!a(e,t))throw new TypeError("Cannot call a class as a function")}(this,e),He())return He();if(void 0!==e.unique)return e.unique;e.unique=this,this.oAudioContext=null,this.currentVolume=80,this.bSetVolume=!1,this.gainNode=null,this.iWndNum=-1,this.mVolumes=new Map;var t=window.AudioContext||window.webkitAudioContext;this.oAudioContext=new t,this.writeString=function(e,t,r){for(var i=0;i<r.length;i++)e.setUint8(t+i,r.charCodeAt(i))},this.setBufferToDataview=function(e,t,r){for(var i=0;i<r.length;i++,t++)e.setUint8(t,r[i])},He(this)}return Oe(e,[{key:"Play",value:function(e,t,r){var i=new ArrayBuffer(44+t),n=new DataView(i),a=r.samplesPerSec,o=r.channels,s=r.bitsPerSample;this.writeString(n,0,"RIFF"),n.setUint32(4,32+2*t,!0),this.writeString(n,8,"WAVE"),this.writeString(n,12,"fmt "),n.setUint32(16,16,!0),n.setUint16(20,1,!0),n.setUint16(22,o,!0),n.setUint32(24,a,!0),n.setUint32(28,2*a,!0),n.setUint16(32,o*s/8,!0),n.setUint16(34,s,!0),this.writeString(n,36,"data"),n.setUint32(40,t,!0),this.setBufferToDataview(n,44,e);var x=this;return this.oAudioContext.decodeAudioData(n.buffer,(function(e){var t=x.oAudioContext.createBufferSource();if(null==t)return-1;t.buffer=e,t.start(0),(null==x.gainNode||x.bSetVolume)&&(x.gainNode=x.oAudioContext.createGain(),x.bSetVolume=!1),x.gainNode.gain.value=x.currentVolume/100,x.gainNode.connect(x.oAudioContext.destination),t.connect(x.gainNode)}),(function(e){return console.log("decode error"),-1})),0}},{key:"Stop",value:function(){return null!=this.gainNode&&(this.gainNode.disconnect(),this.gainNode=null),!0}},{key:"SetVolume",value:function(e){return this.bSetVolume=!0,this.currentVolume=e,this.mVolumes.set(this.iWndNum,this.currentVolume),!0}},{key:"SetWndNum",value:function(e){this.iWndNum=e;var t=this.mVolumes.get(e);return null==t&&(t=80),this.currentVolume=t,!0}},{key:"GetVolume",value:function(){var e=this.mVolumes.get(this.iWndNum);return null==e&&(e=80),e}}]),e}(),Ve=31,Ye=25,Ue=20480,Xe={width:0,height:0,frameNum:0,yuvData:null},We={width:0,height:0,frameNum:0,yuvData:null},ze={sampleRate:0,channel:0,bitsPerSample:0,length:0,pcmData:null},Ge={id:null,cmd:null,data:null,errorCode:0,status:null},Je=function(){function t(r,i,n,a){if(e(this,t),this.jsplayer=r,null==i||void 0===i||"string"!=typeof i)return 0;if(this.szBasePath=i,!n||"function"!=typeof n)return 0;this.fnCallBack=n,this.decodeWorker=null,this.streamOpenMode=null,this.bOpenStream=!1,this.audioRenderer=null,this.aAudioBuffer=[],this.iAudioBufferSize=0,this.Volume=0,this.oSuperRender=null,this.aVideoFrameBuffer=[],this.YUVBufferSize=1,this.szOSDTime=null,this.bJSPrintLog=!1,this.bWriteYUVData=!1,this.iYUV10size=0,this.aVideoYUVBuffer=[],this.bWritePCMData=!1,this.iAudioBuffer500Size=0,this.aAudioPCMBuffer=[],this.bWriteRawData=!1,this.iRawDataSize=0,this.aRawDataBuffer=[],this.bWriteRTPData=!0,this.iRTPDataSize=0,this.aRTPDataBuffer=[],this.downloadRTP=!1,this.rtpNum=0,this.bPlaySound=!1,this.bPlay=!1,this.bPause=!1,this.bOnebyOne=!1,this.bPlayRateChange=!1,this.audioNum=0,this.videoNum=0,this.FrameForwardLen=1,this.bOnlyPlaySound=!1,this.bVideoCropInfo=!1,this.dataCallBackFun=null,this.YUVBufSizeCBFun=null,this.DecCallBackFun=null,this.DisplayCallBackFun=null,this.PCMCallBackFun=null,this.DecInfoYUV=Xe,this.DisplayInfoYUV=We,this.DecInfoPCM=ze,this.displayFrameInfo={},this.frameInfoFlag=!0,this.startTimeStamp=0,this.nWidth=0,this.nHeight=0,this.nSPSCropLeft=0,this.nSPSCropRight=0,this.nSPSCropTop=0,this.nSPSCropBottom=0,this.decCBStream=0,this.sCanvasId=null,this.aDisplayBuf=null,this.bVisibility=!0,this.nDecFrameType=0,this.runtimeInfoCBFun=null,this.firstFrameCB=null,this.needFirstFrameCB=!1,this.iCanvasWidth=0,this.iCanvasHeight=0,this.iZoomNum=0,this.iRatio_x=1,this.iRatio_y=1,this.stDisplayRect={top:0,left:0,right:0,bottom:0},this.bDisRect=!1,this.stYUVRect={top:0,left:0,right:0,bottom:0},this.aInputDataLens=[],this.aInputDataBuffer=[],this.bIsGetYUV=!1,this.bIsFirstFrame=!0,this.iInputMaxBufSize=5242880,this.bIsInput=!1,this.bIsInputBufOver=!1,this.bIsInputBufWillOver=!1,this.iInputDataLen=Ue;var o=this;this.errorCode=1,this.loopNum=0,console.info("%c1>there will play by V1","color: green"),this.setCallBack=function(e,t,r,i,n){var o=Ge;o.id=a,o.cmd=t,o.data=r,o.errorCode=i,o.status=n,e.errorCode=i,e.fnCallBack(o)},this.convertErrorCode=function(e){switch(e){case 1:return 1;case 98:return 0;default:return e}},this.arrayBufferCopy=function(e){var t=e.byteLength,r=new Uint8Array(t),i=new Uint8Array(e),n=0;for(n=0;n<t;n++)r[n]=i[n];return r},this.inputDataFun=function(){var e,t=0;if(o.bIsGetYUV=!1,o.bIsInputBufOver||o.bIsInputBufWillOver){e=new Uint8Array(1);var r={command:"InputData",data:new Uint8Array(e).buffer,dataSize:0};o.decodeWorker.postMessage(r,[r.data])}else if(o.bPlay&&(!o.bPause||o.bOnebyOne)||this.bOnlyPlaySound){for(;o.aInputDataLens.length>0&&!((t+=o.aInputDataLens.shift())>o.iInputDataLen););e=o.aInputDataBuffer.splice(0,t),r={command:"InputData",data:new Uint8Array(e).buffer,dataSize:t},o.decodeWorker.postMessage(r,[r.data])}e=null},this.getPic=function(e,t){if(null==this.decodeWorker||null==this.oSuperRender)return 2;if(!this.bPlay)return 2;if(!e||"function"!=typeof e)return 0;if(this.dataCallBackFun=e,0===this.iZoomNum)this.stYUVRect.left=0,this.stYUVRect.top=0,this.stYUVRect.right=0,this.stYUVRect.bottom=0;else{if(0===this.iCanvasWidth||0===this.iCanvasHeight)this.stYUVRect.left=0,this.stYUVRect.top=0,this.stYUVRect.right=0,this.stYUVRect.bottom=0;else{var r=this.nWidth/this.iCanvasWidth,i=this.nHeight/this.iCanvasHeight;this.stYUVRect.left=Math.round(this.stDisplayRect.left*r),this.stYUVRect.top=Math.round(this.stDisplayRect.top*i),this.stYUVRect.right=Math.round(this.stDisplayRect.right*r),this.stYUVRect.bottom=Math.round(this.stDisplayRect.bottom*i)}if(this.stYUVRect.right-this.stYUVRect.left<32||this.stYUVRect.bottom-this.stYUVRect.top<32)return 0}if(null==this.aDisplayBuf)return 2;var n={command:t,data:this.arrayBufferCopy(this.aDisplayBuf).buffer,width:this.nWidth,height:this.nHeight,rect:this.stYUVRect};return this.decodeWorker.postMessage(n,[n.data]),1},this.createWorker=function(e){if(window.Worker){if(null==e.decodeWorker){var t=new Blob([Be(e.szBasePath)]),r=URL.createObjectURL(t);if(this.decodeWorker=new Worker(r),e.bJSPrintLog&&console.log(">>>JSPlayV1.1 createWorker success!"),null==e.decodeWorker)return 60}e.decodeWorker.onmessage=function(t){var r=null,i=t.data;switch(e.errorCode=i.errorCode,i.function){case"printLog":console.log("print JSPlayerSDK log failed");break;case"loaded":r="loaded",console.log("V1 Decoder.js loaded path:"+e.szBasePath),e.setCallBack(e,"loaded",0,0,!0);break;case"SetStreamOpenMode":r="SetStreamOpenMode";break;case"OpenStream":if(r="OpenStream",1===i.errorCode)return void(o.bOpenStream=!0);break;case"InputData":r="InputData",11===i.errorCode&&(o.bIsInputBufOver=!0,console.log("yff inputBuffer over set key frame \n"),1!=o.nDecFrameType&&o.PlayM4_SetDecodeFrameType(1)),36===i.errorCode&&(o.bIsInputBufWillOver=!0),i.errorCode===Ve&&(o.bIsInputBufOver=!1,o.bIsInputBufWillOver=!1,o.aInputDataLens.length>0&&o.bIsInput?(o.inputDataFun(),o.bIsInput=!1):o.bIsGetYUV=!0);break;case"GetFrameData":if(r="GetFrameData",!o.bOnlyPlaySound){if(null!=i.data&&null!=i.frameInfo&&(i.frameInfo.width,i.frameInfo.height),!o.bPlay)return;if(o.errorCode=i.errorCode,!(o.bIsFirstFrame||i.errorCode!==Ve&&35!==i.errorCode)){i.errorCode===Ve&&(o.bIsInputBufOver=!1,o.bIsInputBufWillOver=!1),o.loopNum>5?(o.bIsGetYUV=!0,o.loopNum=0):(o.inputDataFun(),o.loopNum++);break}o.bIsInputBufOver||o.bIsInputBufWillOver?o.inputDataFun():"videoType"===i.type&&(o.aInputDataLens.length>0&&o.bIsInput?(o.inputDataFun(),o.bIsInput=!1):o.bIsGetYUV=!0,o.bIsFirstFrame=!1)}if(o.bVisibility&&1===i.errorCode)switch(i.type){case"videoType":if(null==i.data||null==i.frameInfo)return 0;null!=o.DecCallBackFun&&(o.DecInfoYUV.port=0,o.DecInfoYUV.iDataType=3,o.DecInfoYUV.height=i.frameInfo.height,o.DecInfoYUV.width=i.frameInfo.width,o.DecInfoYUV.isize=i.frameInfo.width*i.frameInfo.height*3/2,o.DecInfoYUV.Data=new Uint8Array(i.data),o.DecCallBackFun(o.DecInfoYUV)),o.bIsFirstFrame=!1,e.nWidth=i.frameInfo.width,e.nHeight=i.frameInfo.height,e.nSPSCropLeft=i.frameInfo.cropLeft,e.nSPSCropRight=i.frameInfo.cropRight,e.nSPSCropTop=i.frameInfo.cropTop,e.nSPSCropBottom=i.frameInfo.cropBottom,e.timeStamp=i.frameInfo.timeStamp;var n=new Object;if(n.data=i.data,n.osdTime=i.frameInfo,n.nWidth=i.frameInfo.width,n.nHeight=i.frameInfo.height,n.frameNum=i.frameInfo.frameNum,n.timeStamp=i.frameInfo.timeStamp,e.bWriteYUVData){for(var a=new Uint8Array(i.data),s=e.aVideoYUVBuffer.length,x=0,l=a.length;x<l;x++)e.aVideoYUVBuffer[s+x]=a[x];e.iYUV10size++,a=null}if(e.bWriteYUVData&&e.iYUV10size>=20){var c=new Uint8Array(e.aVideoYUVBuffer);e.downloadFile(c,"videoYUV.data"),e.aVideoYUVBuffer.splice(0,e.aVideoYUVBuffer.length),e.bWriteYUVData=!1,e.iYUV10size=0,c=null}if(e.aVideoFrameBuffer.push(n),n=null,e.aVideoFrameBuffer.length>5&&(e.bOnebyOne||e.aVideoFrameBuffer.splice(0,2)),e.bOnebyOne&&e.aVideoFrameBuffer.length>=15){e.setCallBack(e,"OnebyOne",0,0,!1),e.bIsFirstFrame=!0;break}break;case"audioType":if(e.bPlaySound&&!e.bPlayRateChange||o.bOnlyPlaySound){for(null!=o.PCMCallBackFun&&(o.DecInfoPCM.port=0,o.DecInfoPCM.SampleRate=i.frameInfo.samplesPerSec,o.DecInfoPCM.channel=i.frameInfo.channels,o.DecInfoPCM.bitsPerSample=i.frameInfo.bitsPerSample,o.DecInfoPCM.iDataType=101,o.DecInfoPCM.Data=new Uint8Array(i.data),o.DecInfoPCM.isize=o.DecInfoPCM.Data.length,o.PCMCallBackFun(o.DecInfoPCM)),a=new Uint8Array(i.data),s=e.aAudioBuffer.length,x=0,l=a.length;x<l;x++)e.aAudioBuffer[s+x]=a[x];if(e.iAudioBufferSize++,a=null,e.bWritePCMData){for(a=new Uint8Array(i.data),s=e.aAudioPCMBuffer.length,x=0,l=a.length;x<l;x++)e.aAudioPCMBuffer[s+x]=a[x];console.log("audio_type num:"+e.iAudioBuffer500Size+", len:"+a.length),e.iAudioBuffer500Size++,a=null}if(e.bWritePCMData&&e.iAudioBuffer500Size>=100){var f=new Uint8Array(e.aAudioPCMBuffer);e.downloadFile(f,"audioPCM.data"),e.aAudioPCMBuffer.splice(0,e.aAudioPCMBuffer.length),e.bWritePCMData=!1,e.iAudioBuffer500Size=0,f=null}e.iAudioBufferSize>=Ye&&(e.audioRenderer.Play(e.aAudioBuffer,e.aAudioBuffer.length,i.frameInfo),e.aAudioBuffer.splice(0,e.aAudioBuffer.length),e.aAudioBuffer.length=0,e.iAudioBufferSize=0)}}break;case"GetRawData":if(r="GetRawData",e.bWriteRawData){var h=new Uint8Array(i.data),u=e.aRawDataBuffer.length;for(x=0,l=h.length;x<l;x++)e.aRawDataBuffer[u+x]=h[x];e.iRawDataSize++,h=null}if(e.bWriteRawData&&e.iRawDataSize>=100){var d=new Uint8Array(e.aRawDataBuffer);e.downloadFile(d,"rawBuffer.data"),e.aRawDataBuffer.splice(0,e.aRawDataBuffer.length),e.bWriteRawData=!1,e.iRawDataSize=0,d=null}break;case"PlaySound":r="PlaySound";break;case"GetJPEG":if(r="GetJPEG",1!==i.errorCode)return void console.log("GetJPEG ErrorParam");var _=i.data;e.dataCallBackFun(_,_.length);break;case"GetBMP":if(r="GetBMP",1!==i.errorCode)return void console.log("GetBMP ErrorParam");var p=i.data;e.dataCallBackFun(p,p.length);break;case"RunTimeInfoCallBack":r="RunTimeInfoCallBack";var m=i.nRunTimeModule,g=i.nStrVersion,y=i.nFrameTimeStamp,b=i.nFrameNum,v=i.nErrorCode;null!=e.runtimeInfoCBFun&&e.runtimeInfoCBFun(m,g,y,b,v)}"GetFrameData"!==r&&"loaded"!==r?e.setCallBack(e,r,0,e.convertErrorCode(i.errorCode),!0):16!==i.errorCode&&101!==i.errorCode&&100!==i.errorCode&&48!==i.errorCode||e.setCallBack(e,r,0,e.convertErrorCode(i.errorCode),!0)}}},this.createWorker(o),this.draw=function(){if(o.bPlay){if(o.needFirstFrameCB&&null!=o.firstFrameCB&&(o.firstFrameCB(),o.needFirstFrameCB=!1),!o.bPause||o.bOnebyOne){requestAnimationFrame(o.draw);var e=o.aVideoFrameBuffer.length;if(null!=o.YUVBufSizeCBFun&&o.YUVBufSizeCBFun(e),o.bOnebyOne){if(e<=8&&o.setCallBack(o,"OnebyOne",0,Ve,!0),e<=o.FrameForwardLen+1)return void o.setCallBack(o,"OnebyOne",0,Ve,!0);for(var t=o.FrameForwardLen;t>1;)o.aVideoFrameBuffer.shift(),t--;o.bOnebyOne=!1}if(e>0){var r=o.aVideoFrameBuffer.shift(),i={};i.nCropLeft=o.nSPSCropLeft,i.nCropRight=o.nSPSCropRight,i.nCropTop=o.nSPSCropTop,i.nCropBottom=o.nSPSCropBottom,i.nCodeWidth=r.nWidth,i.nCodeHeight=r.nHeight,o.aDisplayBuf=r.data;var n=new Uint8Array(o.aDisplayBuf);o.bVideoCropInfo?o.oSuperRender.DisplayFrame(n,r.nWidth-o.nSPSCropLeft-o.nSPSCropRight,r.nHeight-o.nSPSCropTop-o.nSPSCropBottom,r.timeStamp,i,null):o.oSuperRender.DisplayFrame(n,r.nWidth,r.nHeight,r.timeStamp,i,null),null!=o.DisplayCallBackFun&&(o.DisplayInfoYUV.height=r.nHeight,o.DisplayInfoYUV.width=r.nWidth,o.DisplayInfoYUV.iSize=o.DisplayInfoYUV.height*o.DisplayInfoYUV.width*3/2,o.DisplayInfoYUV.frameNum=r.frameNum,o.DisplayInfoYUV.timeStamp=r.timeStamp,o.DisplayInfoYUV.yuvData=new Uint8Array(n),o.DisplayCallBackFun(o.DisplayInfoYUV)),o.frameInfoFlag&&(o.displayFrameInfo.codecType=0,o.displayFrameInfo.frameType=0,o.displayFrameInfo.frameSize=0,o.displayFrameInfo.width=r.nWidth,o.displayFrameInfo.height=r.nHeight,o.displayFrameInfo.timeStamp=r.timeStamp,o.displayFrameInfo.frameRate=0,o.displayFrameInfo.frameNum=r.frameNum,o.displayFrameInfo.interlace=0,o.displayFrameInfo.streamEnd=0,o.displayFrameInfo.cropLeft=o.nSPSCropLeft,o.displayFrameInfo.cropRight=o.nSPSCropRight,o.displayFrameInfo.cropTop=o.nSPSCropTop,o.displayFrameInfo.cropBottom=o.nSPSCropBottom,o.displayFrameInfo.year=r.osdTime.year,o.displayFrameInfo.month=r.osdTime.month,o.displayFrameInfo.week=0,o.displayFrameInfo.day=r.osdTime.day,o.displayFrameInfo.hour=r.osdTime.hour,o.displayFrameInfo.minute=r.osdTime.minute,o.displayFrameInfo.second=r.osdTime.second,o.displayFrameInfo.milliseconds=r.osdTime.misecond),0==o.startTimeStamp&&(o.startTimeStamp=r.timeStamp),n=null;var a=r.osdTime.year,s=r.osdTime.month,x=r.osdTime.day,l=r.osdTime.hour,c=r.osdTime.minute,f=r.osdTime.second;o.szOSDTime=a+"-"+s+"-"+x+" "+l+":"+c+":"+f,r=null}else o.setCallBack(o,"Play",0,Ve,!0)}}else o.bPlay||(o.aVideoFrameBuffer.splice(0,o.aVideoFrameBuffer.length),o.aAudioBuffer.splice(0,o.aAudioBuffer.length))}}return o(t,[{key:"PlayM4_SetCurrentFrameNum",value:function(e,t){return 16}},{key:"PlayM4_OpenPlayerSDKPrintLog",value:function(e){return!0===e?(this.bJSPrintLog=!0,this.decodeWorker.postMessage({command:"printLog",data:e})):(this.bJSPrintLog=!1,this.decodeWorker.postMessage({command:"printLog",data:e})),1}},{key:"PlayM4_DownloadYUVdata",value:function(){return this.bWriteYUVData=!0,1}},{key:"PlayM4_DownloadPCMdata",value:function(){return this.bWritePCMData=!0,1}},{key:"PlayM4_SetDecCallBack",value:function(e,t){return e?(1==this.decCBStream&&(this.DecCallBackFun=t),2==this.decCBStream&&(this.PCMCallBackFun=t),3==this.decCBStream&&(this.PCMCallBackFun=t,this.DecCallBackFun=t)):(1==this.decCBStream&&(this.DecCallBackFun=null),2==this.decCBStream&&(this.PCMCallBackFun=null),3==this.decCBStream&&(this.PCMCallBackFun=null,this.DecCallBackFun=null)),1}},{key:"PlayM4_SetDisplayCallBack",value:function(e){return e&&"function"==typeof e?(this.DisplayCallBackFun=e,1):0}},{key:"PlayM4_SetPCMCallBack",value:function(e){return e&&"function"==typeof e?(this.PCMCallBackFun=e,1):0}},{key:"PlayM4_SetStreamOpenMode",value:function(e){return null==e||void 0===e||0!==e&&1!==e?0:(this.streamOpenMode=e,1)}},{key:"PlayM4_DownloadRTPData",value:function(e){this.downloadRTP=e}},{key:"PlayM4_SetVideoCropInfo",value:function(e){return null==e||void 0===e||"boolean"!=typeof e?0:(this.bVideoCropInfo=e,1)}},{key:"PlayM4_OpenStream",value:function(e,t,r){return this.bJSPrintLog&&console.log(">>>JS PlayM4_OpenStream nSysTime:"+((new Date).getMonth()+1)+"-"+(new Date).getDate()+" "+(new Date).getHours()+":"+(new Date).getMinutes()+":"+(new Date).getSeconds()+"."+(new Date).getMilliseconds()),null==this.decodeWorker?2:null==e||t<=0||r<=0?0:(this.bPlay=!1,this.bPause=!1,this.bOnebyOne=!1,this.bIsFirstFrame=!0,this.bIsGetYUV=!1,this.bIsInput=!1,4===e[8]&&0===e[9]?this.streamOpenMode=0:this.streamOpenMode=1,this.decodeWorker.postMessage({command:"SetStreamOpenMode",data:this.streamOpenMode}),this.decodeWorker.postMessage({command:"OpenStream",data:e,dataSize:t,bufPoolSize:r}),this.bOpenStream=!0,1)}},{key:"PlayM4_CloseStream",value:function(){return null===this.decodeWorker?1:null===this.decodeWorker||!1===this.bOpenStream?2:(this.bOnlyPlaySound=!1,this.decodeWorker.postMessage({command:"CloseStream"}),null!==this.oSuperRender&&(this.oSuperRender.ReleaseDisplay(),this.oSuperRender=null),null!==this.audioRenderer&&(this.audioRenderer.Stop(),this.audioRenderer=null),this.aAudioBuffer.splice(0,this.aAudioBuffer.length),this.aVideoFrameBuffer.splice(0,this.aVideoFrameBuffer.length),this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length),this.aInputDataLens.splice(0,this.aInputDataLens.length),this.aVideoYUVBuffer.splice(0,this.aVideoYUVBuffer.length),this.aAudioPCMBuffer.splice(0,this.aAudioPCMBuffer.length),this.aRawDataBuffer.splice(0,this.aRawDataBuffer.length),this.bOpenStream=!1,this.iAudioBufferSize=0,this.szOSDTime=null,this.startTimeStamp,1)}},{key:"PlayM4_Destroy",value:function(){return null===this.decodeWorker||(this.PlayM4_CloseStream(),this.decodeWorker.terminate(),this.decodeWorker=null),1}},{key:"PlayM4_FreePort",value:function(){return this.decodeWorker.terminate(),this.decodeWorker=null,1}},{key:"PlayM4_InputData",value:function(e,t){var r=this.aInputDataBuffer.length;if(4===t){var i=new Uint8Array(e.buffer);if(1===i[0]&&2===i[1]&&3===i[2]&&4===i[3])return this.bIsFirstFrame||this.bIsGetYUV?this.inputDataFun():this.bIsInput=!0,i=null,1}if(r+t>this.iInputMaxBufSize)return console.log("input over"),this.bIsGetYUV?this.inputDataFun():this.bIsInput=!0,11;var n=null,a=t;switch(this.streamOpenMode){case 1:n=new Uint8Array(e.buffer),this.aInputDataLens.push(t);break;case 0:a=t+4;var o=new Uint32Array([t]),s=new Uint8Array(o.buffer);(n=new Uint8Array(a)).set(s,0),n.set(e,4),o=null,s=null,this.aInputDataLens.push(t+4);break;default:return 16}for(var x=0;x<a;x++)this.aInputDataBuffer[r+x]=n[x];return!this.bPlay&&!this.bOnlyPlaySound||null===this.decodeWorker||!1===this.bOpenStream||(n=null,this.bOnlyPlaySound||this.bIsFirstFrame||this.bIsGetYUV?this.inputDataFun():this.bIsInput=!0),1}},{key:"PlayM4_Play",value:function(e){if(null===this.decodeWorker)return 2;if(this.bJSPrintLog&&console.log(">>>JS PlayM4_Play canvasID: "+e),null===e)this.bOnlyPlaySound=!0,this.decodeWorker.postMessage({command:"OnlyPlaySound"}),this.sCanvasId=null;else{if("string"!=typeof e)return 0;if(this.bOnebyOne&&(this.bPlayRateChange=!1,this.bOnebyOne=!1,this.bPause=!1,this.draw()),this.bPlay)return 1;if(null==this.oSuperRender&&(this.canvasCnv=document.getElementById(e),this.oSuperRender=new Se,this.oSuperRender.InitDisplay(this.canvasCnv,"webgl",1),null==this.oSuperRender))return 61;this.sCanvasId=e,this.bPlay=!0,this.bPause=!1,this.bOnebyOne=!1,this.bPlayRateChange=!1,this.bOnlyPlaySound=!1,this.draw()}return null==this.audioRenderer&&(this.audioRenderer=new Ne,null==this.audioRenderer)?61:(this.decodeWorker.postMessage({command:"Play"}),1)}},{key:"PlayM4_Stop",value:function(e){if(!0===this.bJSPrintLog&&console.log(">>>>yff1020>>>>> V1 PlayM4_Stop"),null==this.decodeWorker||null==this.oSuperRender)return 2;if(!this.bPlay)return 2;this.bPlaySound&&(this.PlayM4_StopSound(),this.bPlaySound=!0),this.bPlay=!1,this.bOnebyOne=!1,this.bPause=!1,this.oSuperRender.SetDisplayRect(0,0,this.nWidth,this.nHeight),this.iZoomNum=0,this.bDisRect=!1;var t={};t.nCropLeft=this.nSPSCropLeft,t.nCropRight=this.nSPSCropRight,t.nCropTop=this.nSPSCropTop,t.nCropBottom=this.nSPSCropBottom,t.nCodeWidth=this.nWidth,t.nCodeHeight=this.nHeight,this.bVideoCropInfo?this.oSuperRender.DisplayFrame(null,this.nWidth-this.nSPSCropLeft-this.nSPSCropRight,this.nHeight-this.nSPSCropTop-this.nSPSCropBottom,this.timeStamp,t,null):this.oSuperRender.DisplayFrame(null,this.nWidth,this.nHeight,this.timeStamp,t,null);var r=document.getElementById(this.sCanvasId);return r&&(this.clonedCanvas=r.cloneNode(!0),this.clonedCanvasParentNode=r.parentNode,this.clonedCanvasParentNode.replaceChild(this.clonedCanvas,r)),1}},{key:"PlayM4_PlayRate",value:function(e){return null==this.decodeWorker?2:(this.bPlayRateChange=1!==e,e<1&&(e=1),this.iInputDataLen=e*Ue,this.decodeWorker.postMessage({command:"PlayRate",playRate:e}),1)}},{key:"PlayM4_Pause",value:function(e){return null==this.decodeWorker||null==this.oSuperRender?2:this.bPlay?this.bOnebyOne||this.bPause==e?2:(this.bPause=e,this.bIsFirstFrame=!0,e?this.bPlaySound&&(this.PlayM4_StopSound(),this.bPlaySound=!0):(this.bPlaySound&&this.PlayM4_PlaySound(),this.draw()),1):2}},{key:"PlayM4_OneByOne",value:function(e){return null==this.decodeWorker||null==this.oSuperRender?2:this.bPlay?e>10||e<=0?0:(e||(e=1),this.iInputDataLen=Ue,this.FrameForwardLen=e,this.bPause=!0,this.bOnebyOne=!0,this.bIsFirstFrame=!0,this.draw(),1):2}},{key:"PlayM4_PlaySound",value:function(e){return null===this.decodeWorker||!1===this.bOpenStream?2:e<0||e>16?0:null==this.audioRenderer&&(this.audioRenderer=new Ne,null==this.audioRenderer)?61:(this.decodeWorker.postMessage({command:"PlaySound"}),this.audioRenderer.SetWndNum(e),0!==this.Volume&&this.audioRenderer.SetVolume(this.Volume),this.audioRenderer.oAudioContext.resume(),this.bPlaySound=!0,1)}},{key:"PlayM4_StopSound",value:function(){return null==this.decodeWorker||null==this.audioRenderer?2:this.bPlaySound?(this.decodeWorker.postMessage({command:"StopSound"}),this.bPlaySound=!1,1):2}},{key:"PlayM4_SetDisplayBuf",value:function(e){return null==this.decodeWorker?2:e<=0?0:(this.YUVBufferSize=e,1)}},{key:"PlayM4_SetSecretKey",value:function(e,t,r){if(null==this.decodeWorker||!1===this.bOpenStream)return 2;if(null==t)return 0;if(1===e){if(128!==r)return 0;if(null==t||void 0===t)return 0}else if(0!==e)return 0;return this.decodeWorker.postMessage({command:"SetSecretKey",data:t,nKeyType:e,nKeyLen:r}),1}},{key:"PlayM4_SetDecodeFrameType",value:function(e){return console.log("PlayM4_SetDecodeFrameType nFrameType:"+e),null==this.decodeWorker||null==this.oSuperRender?2:0!==e&&1!==e?0:(this.bJSPrintLog&&console.log(">>>JS PlayM4_SetDecodeFrameType :"+e),this.nDecFrameType=e,this.decodeWorker.postMessage({command:"SetDecodeFrameType",data:e}),1)}},{key:"PlayM4_SetIFrameDecInterval",value:function(e){return 1!==this.nDecFrameType?2:e<0?0:(this.decodeWorker.postMessage({command:"SetIFrameDecInterval",data:e}),1)}},{key:"PlayM4_SetLostFrameMode",value:function(e){return e<0||e>1?0:(this.decodeWorker.postMessage({command:"SetLostFrameMode",data:e}),1)}},{key:"PlayM4_SetDisplayRegion",value:function(e,t,r){if(!0===this.bJSPrintLog&&console.log(">>>>yff1020>>>>> PlayM4_SetDisplayRegion left:"+e.left+",top:"+e.top+",right:"+e.right+",bottom:"+e.bottom),null===this.decodeWorker||!1===this.bPlay||null===this.oSuperRender)return 2;if(null===this.canvasId)return 2;if(!0===t){if(null==e)return 0;if("number"!=typeof e.left||"number"!=typeof e.top||"number"!=typeof e.right||"number"!=typeof e.bottom)return 0;if(e.right<0||e.left<0||e.top<0||e.bottom<0)return 0;var i=e.left,n=e.right,a=e.top,o=e.bottom,s=document.getElementById(this.sCanvasId).getBoundingClientRect();if(this.iCanvasWidth=s.width,this.iCanvasHeight=s.height,n-i<16||o-a<16||n-i>this.iCanvasWidth||o-a>this.iCanvasHeight)return 0;0!==this.iZoomNum&&(i=Math.round(i/this.iRatio_x)+this.stDisplayRect.left,a=Math.round(a/this.iRatio_y)+this.stDisplayRect.top,n=Math.round(n/this.iRatio_x)+this.stDisplayRect.left,o=Math.round(o/this.iRatio_y)+this.stDisplayRect.top),this.stDisplayRect={top:a,left:i,right:n,bottom:o};var x=o/this.iCanvasHeight*this.nHeight,l=i/this.iCanvasWidth*this.nWidth,c=n/this.iCanvasWidth*this.nWidth,f=a/this.iCanvasHeight*this.nHeight;this.oSuperRender.SetDisplayRect(l,f,c-l,x-f),this.bDisRect=!0;var h=n-i,u=o-a;this.iRatio_x=this.iCanvasWidth/h,this.iRatio_y=this.iCanvasHeight/u,r&&this.iZoomNum++}else this.oSuperRender.SetDisplayRect(0,0,this.nWidth,this.nHeight),this.iZoomNum=0,this.bDisRect=!1;if(this.bPause||this.bOnebyOne||this.bPlayRateChange){var d={};d.nCropLeft=this.nSPSCropLeft,d.nCropRight=this.nSPSCropRight,d.nCropTop=this.nSPSCropTop,d.nCropBottom=this.nSPSCropBottom,d.nCodeWidth=this.nWidth,d.nCodeHeight=this.nHeight,this.bVideoCropInfo?this.oSuperRender.DisplayFrame(new Uint8Array(this.aDisplayBuf),this.nWidth-this.nSPSCropLeft-this.nSPSCropRight,this.nHeight-this.nSPSCropTop-this.nSPSCropBottom,this.timeStamp,d,null):this.oSuperRender.DisplayFrame(new Uint8Array(this.aDisplayBuf),this.nWidth,this.nHeight,this.timeStamp,d,null)}return 1}},{key:"PlayM4_GetBMP",value:function(e){return this.getPic(e,"GetBMP")}},{key:"PlayM4_GetJPEG",value:function(e){return this.getPic(e,"GetJPEG")}},{key:"PlayM4_SetVolume",value:function(e){return null==this.decodeWorker||null==this.audioRenderer?2:e<0||e>100||""===e?0:(this.Volume=e,this.audioRenderer.SetVolume(e),1)}},{key:"PlayM4_GetVolume",value:function(e){if(null==this.decodeWorker)return 2;if(null==this.audioRenderer)return 2;if(e&&"function"==typeof e){var t=this.audioRenderer.GetVolume();return null===t?63:(e(t),1)}return 0}},{key:"PlayM4_GetOSDTime",value:function(e){return null==this.decodeWorker?2:this.bPlay?e&&"function"==typeof e?(e(this.szOSDTime),1):0:2}},{key:"PlayM4_SetFrameInfoCallBack",value:function(e){return this.frameInfoFlag=!!e,1}},{key:"PlayM4_GetFrameInfo",value:function(){return this.displayFrameInfo}},{key:"PlayM4_IsVisible",value:function(e){return this.bVisibility=e,1}},{key:"PlayM4_GetSdkVersion",value:function(){return"07040007"}},{key:"PlayM4_GetBuildDate",value:function(){return"20231219"}},{key:"PlayM4_GetInputBufSize",value:function(){return this.aInputDataBuffer.length}},{key:"PlayM4_SetInputBufSize",value:function(e){return e>0?(this.iInputMaxBufSize=e,console.log(">>JSBufferSize SetInputBufSize:"+this.iInputMaxBufSize),1):0}},{key:"PlayM4_GetYUVBufSize",value:function(){return this.aVideoFrameBuffer.length}},{key:"PlayM4_GetFrameResolution",value:function(e){return null==this.decodeWorker?2:e&&"function"==typeof e?(e(this.nWidth,this.nHeight),1):0}},{key:"PlayM4_RegisterYUVBufSizeCB",value:function(e){return e&&"function"==typeof e?(this.YUVBufSizeCBFun=e,1):0}},{key:"PlayM4_UnRegisterYUVBufSizeCB",value:function(){return null!=this.YUVBufSizeCBFun&&(this.YUVBufSizeCBFun=null),1}},{key:"PlayM4_ClearCanvas",value:function(){if(null==this.oSuperRender)return 2;var e={};return e.nCropLeft=this.nSPSCropLeft,e.nCropRight=this.nSPSCropRight,e.nCropTop=this.nSPSCropTop,e.nCropBottom=this.nSPSCropBottom,e.nCodeWidth=this.nWidth,e.nCodeHeight=this.nHeight,this.bVideoCropInfo?this.oSuperRender.DisplayFrame(null,this.nWidth-this.nSPSCropLeft-this.nSPSCropRight,this.nHeight-this.nSPSCropTop-this.nSPSCropBottom,this.timeStamp,e,null):this.oSuperRender.DisplayFrame(null,this.nWidth,this.nHeight,this.timeStamp,e,null),1}},{key:"PlayM4_ReleaseInputBuffer",value:function(){return null===this.aInputDataBuffer?2:(this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length),this.aInputDataLens.splice(0,this.aInputDataLens.length),1)}},{key:"PlayM4_GetDecodeFrameType",value:function(){return this.nDecFrameType}},{key:"PlayM4_SetRunTimeInfoCallBackEx",value:function(e,t){return this.runtimeInfoCBFun=t,null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetRunTimeInfoCB",nModuleType:e}),1)}},{key:"PlayM4_SetDemuxModel",value:function(e,t){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetDemuxModel",nIdemuxType:e,bTrue:t}),1)}},{key:"PlayM4_SkipErrorData",value:function(e){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SkipErrorData",bSkip:e}),1)}},{key:"PlayM4_SetDecodeERC",value:function(e){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetDecodeERC",nLevel:e}),1)}},{key:"PlayM4_SetANRParam",value:function(e,t){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetANRParam",nEnable:e,nANRLevel:t}),1)}},{key:"PlayM4_SetResampleValue",value:function(e,t){return null==this.decodeWorker?2:(this.decodeWorker.postMessage({command:"SetResampleValue",nEnable:e,resampleValue:t}),1)}},{key:"PlayM4_SetGlobalBaseTime",value:function(e,t,r,i,n,a,o){return null==this.decodeWorker?2:e<2e3||e>3e3||t<1||t>12||e<0||t<0||r<0||i<0||n<0||a<0||o<0?16:(this.decodeWorker.postMessage({command:"SetGlobalBaseTime",year:e,month:t,day:r,hour:i,min:n,sec:a,ms:o}),1)}},{key:"PlayM4_SetAudioDisplayBuf",value:function(e){return Ye=e,1}},{key:"PlayM4_GetCanvasCapture",value:function(e){return null!=this.oSuperRender?this.oSuperRender.GetCanvasData(e):1}},{key:"PlayM4_SetFirstFrameCallBack",value:function(e,t){return null!=t&&"function"!=typeof t?0:(e&&(this.firstFrameCB=t),this.needFirstFrameCB=!0,1)}},{key:"PlayM4_SetDecCBStream",value:function(e){return this.decCBStream=e,1}},{key:"PlayM4_SetCanvasSize",value:function(e,t){return null!=this.oSuperRender&&this.oSuperRender.SetCanvasSize(e,t)}},{key:"PlayM4_GetCanvasSize",value:function(){return null!=this.oSuperRender&&this.oSuperRender.GetCanvasSize()}},{key:"PlayM4_GetBufferValue",value:function(){return this.iInputMaxBufSize}},{key:"PlayM4_GetLastError",value:function(){return this.errorCode}},{key:"PlayM4_GetPlayedTimeEx",value:function(e){e(this.timeStamp-this.startTimeStamp)}},{key:"PlayM4_SetAntialias",value:function(e){return null!=this.oSuperRender&&this.oSuperRender.SetAntialias(e)}},{key:"PlayM4_SetWaterMarkFont",value:function(e){return null!=this.oSuperRender&&this.oSuperRender.SetWaterMarkFont(e)}},{key:"PlayM4_SetWaterMarkImage",value:function(e){return null!=this.oSuperRender&&this.oSuperRender.SetWaterMarkImage(e)}},{key:"PlayM4_SetD3DPostProcess",value:function(e,t){return null!=this.oSuperRender&&this.oSuperRender.SetD3DPostProcess(e,t)}},{key:"getScriptDirectory",value:function(){var e=self.location.href;return e.substr(0,e.lastIndexOf("/")+1)}},{key:"downloadFile",value:function(e,t){var r=e;a(e,Blob)||a(e,File)||(r=new Blob([e]));var i=window.URL.createObjectURL(r),n=window.document.createElement("a");n.href=i,n.download=t;var o=document.createEvent("MouseEvents");o.initEvent("click",!0,!0),n.dispatchEvent(o)}}]),t}(),Ze=n((function(){return function(e,t){var r,i,n,a,o={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,i&&(n=2&a[0]?i.return:a[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,a[1])).done)return n;switch(i=0,n&&(a=[2&a[0],n.value]),a[0]){case 0:case 1:n=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,i=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((n=(n=o.trys).length>0&&n[n.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!n||a[1]>n[0]&&a[1]<n[3])){o.label=a[1];break}if(6===a[0]&&o.label<n[1]){o.label=n[1],n=a;break}if(n&&o.label<n[2]){o.label=n[2],o.ops.push(a);break}n[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],i=0}finally{r=n=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(e){return[2,WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]))]}))})),je={bSupHardOrSoft:!0,bSupHardDecAVC:!0,bSupHardDecHEVC:!0,cmd:null,errorCode:0,status:null},qe=function(){function t(r,i,n){var a=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"webgl",x=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:-1;if(e(this,t),console.log("%c>>>JSPlayerInterface wasmPathV3:%s, wasmPathV1:%s, chromeVersion:%d","color: red",r,i,_getFExplore()),this.szBasePathV3=r,this.szBasePathV1=i,this.fnCallBack=n,this.nUser=o,this.renderEngine=s,this.hasWebWorker=x,this.setHasThread=l,this.decodeEngine=1,this.streamOpenMode=0,this.printfFlag=!1,this.canvasID="",this.FECcanvasIDArray=[],this.aTotalBuffer=[],this.iFrameNum=0,this.bWriteData=!0,this.downloadInputDataFlag=!1,this.rtpDataNeedAdd4Size=!1,this.aInputDataBuffer=[],this.iInputMaxBufSize=2097152,this.audioDisplayBufSize=0,this.decodeFrameType=0,this.decInterval=-1,this.volume=0,this.displayBuf=0,this.anrParamLevel=0,this.anrParamFlag=0,this.resampleRate=0,this.resampleFlag=0,this.decodeERCLevel=0,this.skipErrorData=0,this.demuxModelType=0,this.demuxModeFlag=0,this.needResetBuffer=0,this.globalBaseTime={},this.globalBaseTime.year=0,this.inputBufSize=0,this.waterFontParam=null,this.waterImageParam=null,this.needSetFFCB=!1,this.FFCBFlag=0,this.firstFrameCB=null,this.needSetSecretKey=!1,this.keyData=null,this.runtimeModule=0,this.runtimeCBFun=null,this.needSetRunTimeInfoCB=!1,this.needPlaySound=!1,this.CanvasSubPortMap=new Map,this.oJSPlayerObj=null,this.supportWebCodecs=window._getFSupportWebCodecs(),this.supportSab=!!window.SharedArrayBuffer,this.offscreen=!!window.OffscreenCanvas,this.supportOffscreen=!1,this.offscreen){var c=new OffscreenCanvas(1,1),f=c.getContext("webgl");f&&(this.supportOffscreen=!0,f.getExtension("WEBGL_lose_context").loseContext()),c=null,f=null}this.securityContext=!0,"https:"===window.location.protocol||"localhost"===location.hostname?this.securityContext=!0:this.securityContext=!1;var h=this.JSPlayM4_GetSDKVersion(),u=this.JSPlayM4_GetBuildDate();console.log("%c wasmplayer.min.js version:%s,buildDate:%s","color: blue",h,u),this.supportSIMD=!1,this.callBackParameter=je,this.jsplayerVersion=3,this.supportWebCodecs&&this.securityContext?this.jsplayerVersion=3:this.supportSab&&this.supportOffscreen?this.jsplayerVersion=2:this.jsplayerVersion=1,this.jsplayerVersion<3&&(this.callBackParameter.bSupHardDecAVC=!1,this.callBackParameter.bSupHardDecHEVC=!1,this.callBackParameter.bSupHardOrSoft=!1),null===this.szBasePathV3&&null!=this.szBasePathV1?this.jsplayerVersion=1:null!=this.szBasePathV3&&null===this.szBasePathV1?(console.info("%c>>>> szBasePathV1 is null ","color: red"),this.jsplayerVersion=3):null===this.szBasePathV3&&null===this.szBasePathV1&&(console.info("%c>>>> szBasePathV3 and szBasePathV1 are null ","color: red"),this.fnCallBack(this.callBackParameter)),Ze().then(function(e){e?(this.supportSIMD=!0,console.log("%c>>>>your browser protocol is %s, hostname:%s, WebCodecs:%s,Sab:%s,Offscreen:%s,SIMD:%s,jsplayerVersion:%d","color: red",window.location.protocol,location.hostname,this.supportWebCodecs,this.supportSab,this.supportOffscreen,this.supportSIMD,this.jsplayerVersion)):(this.supportSIMD=!1,console.log("%c>>>>your browser protocol is %s, hostname:%s, WebCodecs:%s,Sab:%s,Offscreen:%s,SIMD:%s,jsplayerVersion:%d","color: red",window.location.protocol,location.hostname,this.supportWebCodecs,this.supportSab,this.supportOffscreen,this.supportSIMD,this.jsplayerVersion))}.bind(this)),this.wasmloaded=!1,this.jsplayerVersion>1?this.oJSPlayerObj=new ke(this,this.szBasePathV3,(function(e){var t=e.bSupHardOrSoft,r=e.bSupHardDecAVC,i=e.bSupHardDecHEVC,n=e.cmd,o=e.errorCode,s=e.status;a.callBackParameter.bSupHardDecAVC=r,a.callBackParameter.bSupHardDecHEVC=i,a.callBackParameter.bSupHardOrSoft=t,a.callBackParameter.cmd=n,a.callBackParameter.errorCode=o,a.callBackParameter.status=s,a.wasmloaded=!0,a.fnCallBack(a.callBackParameter)}),this.nUser,this.renderEngine,this.hasWebWorker,this.setHasThread,this.jsplayerVersion):this.oJSPlayerObj=new Je(this,this.szBasePathV1,(function(e){e.instance;var t=e.cmd,r=e.errorCode,i=e.status;a.callBackParameter.bSupHardDecAVC=!1,a.callBackParameter.bSupHardDecHEVC=!1,a.callBackParameter.bSupHardOrSoft=!1,a.callBackParameter.cmd=t,a.callBackParameter.errorCode=r,a.callBackParameter.status=i,a.wasmloaded=!0,a.fnCallBack(a.callBackParameter)}),0)}return o(t,[{key:"JSPlayM4_SetStreamEnd",value:function(){return 0}},{key:"JSPlayM4_GetPort",value:function(){return this.printfFlag&&console.log(">>>>>yff>>> JSPlayM4_GetPort 1"),null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetPort this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1&&this.oJSPlayerObj.JSPlayM4_GetPort(),1)}},{key:"JSPlayM4_SetStreamOpenMode",value:function(e){return this.printfFlag&&console.log(">>>>>yff20230817>>>>> JSPlayM4_SetStreamOpenMode 1 mode:"+e),this.streamOpenMode=e,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetStreamOpenMode this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetStreamOpenMode(e):this.oJSPlayerObj.PlayM4_SetStreamOpenMode(e),1)}},{key:"JSPlayM4_OpenStream",value:function(e,t,r){if(this.printfFlag&&console.log(">>>>>yff20230817>>>>> JSPlayM4_OpenStream 1 :"+e),40!==t&&console.info("%cJSPlayM4_OpenStream nSize is not 40","color: red"),4===e[8]&&0===e[9]&&(this.rtpDataNeedAdd4Size=!0),this.downloadInputDataFlag){var i=new Uint8Array(e.buffer);this.downloadRTPData(i),console.log("write 40 hik head")}var n=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_OpenStream this.oJSPlayerObj is null"),0):(n=this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_OpenStream(e,t,r):this.oJSPlayerObj.PlayM4_OpenStream(e,t,r),this.HIK40Head=e,this.HIKHeadSize=t,this.HIKPoolSize=r,16===n&&this._switchV3ToV1(this.streamOpenMode,e,t,r,this.needPlay),n)}},{key:"_switchV3ToV1",value:function(e,t,r,i,n){var a=this;console.log("%c5>switch V3 to V1","color: red"),this.jsplayerVersion=1,this.oJSPlayerObj.JSPlayM4_Stop(),this.oJSPlayerObj.JSPlayM4_CloseStream(),this.oJSPlayerObj.JSPlayM4_FreePort(),this.oJSPlayerObj=null;var o=new Je(this,this.szBasePathV1,(function(s){s.instance;var x=s.cmd,l=s.errorCode,c=s.status;"loaded"===x&&(a.oJSPlayerObj=o,a.callBackParameter.cmd=x,a.callBackParameter.errorCode=l,a.callBackParameter.status=c,a.JSPlayM4_SetStreamOpenMode(e),a.JSPlayM4_OpenStream(t,r,i),(n||a.needPlay)&&a.JSPlayM4_Play(a.canvasID),a._switchV3ToV1ResetParam())}),0)}},{key:"_switchV3ToV1ResetParam",value:function(){return this.needSetSecretKey&&this.JSPlayM4_SetSecretKey(this.keyData),this.needSetFFCB&&this.JSPlayM4_SetFirstFrameCallBack(this.FFCBFlag,this.firstFrameCB),this.needSetRunTimeInfoCB&&this.JSPlayM4_SetRunTimeInfoCallBackEx(this.runtimeModule,this.runtimeCBFun),this.needPlaySound&&this.JSPlayM4_PlaySound(),0!=this.skipErrorData&&this.oJSPlayerObj.PlayM4_SkipErrorData(this.skipErrorData),0!=this.demuxModeFlag&&this.oJSPlayerObj.PlayM4_SetDemuxModel(this.demuxModelType,this.demuxModeFlag),0!=this.globalBaseTime.year&&this.oJSPlayerObj.PlayM4_SetGlobalBaseTime(this.globalBaseTime.year,this.globalBaseTime.month,this.globalBaseTime.day,this.globalBaseTime.hour,this.globalBaseTime.min,this.globalBaseTime.sec,this.globalBaseTime.ms),-1!=this.decInterval&&this.oJSPlayerObj.PlayM4_SetIFrameDecInterval(this.decInterval),0!=this.decodeERCLevel&&this.oJSPlayerObj.PlayM4_SetDecodeERC(this.decodeERCLevel),0!=this.volume&&this.JSPlayM4_SetVolume(this.volume),0!=this.anrParamFlag&&this.oJSPlayerObj.PlayM4_SetANRParam(this.anrParamFlag,this.anrParamLevel),0!=this.resampleFlag&&this.oJSPlayerObj.PlayM4_SetResampleValue(this.resampleFlag,this.resampleRate),0!=this.displayBuf&&this.oJSPlayerObj.PlayM4_SetDisplayBuf(this.displayBuf),null!=this.waterFontParam&&this.oJSPlayerObj.PlayM4_SetWaterMarkFont(this.waterFontParam),null!=this.waterImageParam&&this.oJSPlayerObj.PlayM4_SetWaterMarkImage(this.waterImageParam),0!=this.audioDisplayBufSize&&this.oJSPlayerObj.PlayM4_SetAudioDisplayBuf(this.audioDisplayBufSize),0!=this.decodeFrameType&&this.JSPlayM4_SetDecodeFrameType(this.decodeFrameType),0!=this.needResetBuffer&&this.oJSPlayerObj.PlayM4_ReleaseInputBuffer(),0!=this.inputBufSize&&this.oJSPlayerObj.PlayM4_SetInputBufSize(this.inputBufSize),1}},{key:"JSPlayM4_SetDecodeEngine",value:function(e){if(this.printfFlag&&console.log(">>>>>yff20230817>>>>> JSPlayM4_SetDecodeEngine 1:"+e),0!=e&&1!=e)return console.log("0 is V3softDecode, 1 is V3hardDecoder,decodeEngine:"+e),0;this.decodeEngine=e;var t=1;if(this.jsplayerVersion>1){if(!this.supportSab)return console.info("%c3>JSPlayM4_SetDecodeEngine(0 is soft,1 is hard):%d,SharedArrayBuffer Error , does not support Soft Decdoe!!!!!","color: red",e),0;t=this.oJSPlayerObj.JSPlayM4_SetDecodeEngine(this.decodeEngine)}return t}},{key:"JSPlayM4_DownloadData",value:function(){return this.downloadInputDataFlag=!0,1}},{key:"JSPlayM4_SetAudioDisplayBuf",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAudioDisplayBuf this.oJSPlayerObj is null"),0):(this.audioDisplayBufSize=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetAudioDisplayBuf(e):this.oJSPlayerObj.PlayM4_SetAudioDisplayBuf(e))}},{key:"JSPlayM4_Play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.canvasID=e;var t=1;return this.printfFlag&&console.log(">>>>>yff20230817>>>>> JSPlayM4_Play 1 this.supportSab:"+this.supportSab),null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_Play this.oJSPlayerObj is null"),this.needPlay=!0,0):(this.jsplayerVersion>1?(t=this.oJSPlayerObj.JSPlayM4_Play(e),0!=this.aInputDataBuffer.length&&(this.oJSPlayerObj.JSPlayM4_InputData(new Uint8Array(this.aInputDataBuffer),this.aInputDataBuffer.length),this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length))):(t=this.oJSPlayerObj.PlayM4_Play(e),0!=this.aInputDataBuffer.length&&(this.oJSPlayerObj.PlayM4_InputData(new Uint8Array(this.aInputDataBuffer),this.aInputDataBuffer.length),this.aInputDataBuffer.splice(0,this.aInputDataBuffer.length))),t)}},{key:"JSPlayM4_InputData",value:function(e,t){var r;if(null===this.oJSPlayerObj||!this.wasmloaded){var i=this.aInputDataBuffer.length;if(i+t>this.iInputMaxBufSize)return console.log("WasmPlayer input over"),0;for(var n=0;n<t;n++)this.aInputDataBuffer[i+n]=e[n];return 0}if(r=this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_InputData(e,t):this.oJSPlayerObj.PlayM4_InputData(e,t),this.downloadInputDataFlag)if(this.rtpDataNeedAdd4Size){var a=null,o=t+4,s=new Uint32Array([t]),x=new Uint8Array(s.buffer);(a=new Uint8Array(o)).set(x,0),a.set(e,4),this.downloadRTPData(a),s=null,x=null,a=null}else this.downloadRTPData(e);return r}},{key:"JSPlayM4_Stop",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_Stop this.oJSPlayerObj is null"),0;if(this.bWriteData&&this.iFrameNum>0){console.log("download"+this.iFrameNum+"Psdata");var t=new Uint8Array(this.aTotalBuffer);this._downloadFile(t,"RTPRaw.data"),this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.bWriteData=!1,this.iFrameNum=0,t=null}return this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_Stop(e):this.oJSPlayerObj.PlayM4_Stop(e)}},{key:"JSPlayM4_CloseStream",value:function(){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>>  JSPlayM4_CloseStream this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_CloseStream():this.oJSPlayerObj.PlayM4_CloseStream()}},{key:"JSPlayM4_FreePort",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FreePort this.oJSPlayerObj is null"),0):(e=this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FreePort():this.oJSPlayerObj.PlayM4_FreePort(),this.oJSPlayerObj=null,e)}},{key:"JSPlayM4_SetDecodeFrameType",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDecodeFrameType this.oJSPlayerObj is null"),0):(this.decodeFrameType=e,this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetDecodeFrameType(e):7==e?t=this.oJSPlayerObj.PlayM4_SetLostFrameMode(1):(t=this.oJSPlayerObj.PlayM4_SetLostFrameMode(0),t=this.oJSPlayerObj.PlayM4_SetDecodeFrameType(e)),t)}},{key:"JSPlayM4_PlaySound",value:function(){return this.needPlaySound=!0,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_PlaySound this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_PlaySound():this.oJSPlayerObj.PlayM4_PlaySound(0)}},{key:"JSPlayM4_GetJPEG",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetJPEG this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetJPEG(e,t):this.oJSPlayerObj.PlayM4_GetJPEG(e)}},{key:"JSPlayM4_GetBMP",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetBMP this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetBMP(e,t):this.oJSPlayerObj.PlayM4_GetBMP(e)}},{key:"JSPlayM4_GetCropJPEG",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetCropJPEG this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?e=this.oJSPlayerObj.JSPlayM4_GetCropJPEG():console.log("%c1>JSPlayerV1.X does not support GetCropJPEG","color: red"),e)}},{key:"JSPlayM4_GetCropBMP",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetCropBMP this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?e=this.oJSPlayerObj.JSPlayM4_GetCropBMP():console.log("%c1>JSPlayerV1.X does not support GetCropBMP","color: red"),e)}},{key:"JSPlayM4_GetCanvasCapture",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetCanvasCapture this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetCanvasCapture(e):this.oJSPlayerObj.PlayM4_GetCanvasCapture(e)}},{key:"JSPlayM4_StopSound",value:function(){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_StopSound this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_StopSound():this.oJSPlayerObj.PlayM4_StopSound()}},{key:"JSPlayM4_GetSDKVersion",value:function(){return"08010001"}},{key:"JSPlayM4_GetBuildDate",value:function(){return"2023220"}},{key:"JSPlayM4_GetLastError",value:function(){return null===this.oJSPlayerObj?0:this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetLastError():this.oJSPlayerObj.PlayM4_GetLastError()}},{key:"JSPlayM4_Fast",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_Fast this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1&&(e=this.oJSPlayerObj.JSPlayM4_Fast()),e)}},{key:"JSPlayM4_Slow",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_Slow this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1&&(e=this.oJSPlayerObj.JSPlayM4_Slow()),e)}},{key:"JSPlayM4_SetIFrameDecInterval",value:function(e){return this.decInterval=e,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetIFrameDecInterval this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetIFrameDecInterval(e):this.oJSPlayerObj.PlayM4_SetIFrameDecInterval(e)}},{key:"JSPlayM4_Pause",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_Pause this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_Pause(e):this.oJSPlayerObj.PlayM4_Pause(e)}},{key:"JSPlayM4_OneByOne",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_OneByOne this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_OneByOne():this.oJSPlayerObj.PlayM4_OneByOne(e)}},{key:"JSPlayM4_OneByOneResume",value:function(){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_OneByOneResume this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_OneByOneResume():this.oJSPlayerObj.PlayM4_Pause(!1)}},{key:"JSPlayM4_SetVolume",value:function(e){var t=1;if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_SetVolume this.oJSPlayerObj is null"),0;if(this.volume=e,this.jsplayerVersion>1)t=this.oJSPlayerObj.JSPlayM4_SetVolume(e);else{var r=e/65535*100;t=this.oJSPlayerObj.PlayM4_SetVolume(r)}return t}},{key:"JSPlayM4_GetVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetVolume this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?(t=this.oJSPlayerObj.JSPlayM4_GetVolume(),null!=e&&e(t)):t=this.oJSPlayerObj.PlayM4_GetVolume((function(t){null!=e&&e(t/100*65535)})),t)}},{key:"JSPlayM4_SetDisplayRegion",value:function(e,t,r,i,n){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],s=1;if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_SetDisplayRegion this.oJSPlayerObj is null"),0;if(this.jsplayerVersion>1)s=this.oJSPlayerObj.JSPlayM4_SetDisplayRegion(e,t,r,i,n,a,o);else{var x={};x.left=t,x.right=r,x.top=i,x.bottom=n,s=this.oJSPlayerObj.PlayM4_SetDisplayRegion(x,!a,o)}return s}},{key:"JSPlayM4_SetPrintLogFlag",value:function(e){return this.printfFlag=e,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetPrintLogFlag this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetPrintLogFlag(e):this.oJSPlayerObj.PlayM4_OpenPlayerSDKPrintLog(e)}},{key:"JSPlayM4_RenderPrivateData",value:function(e,t){var r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_RenderPrivateData this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_RenderPrivateData(e,t):console.log("%c1>JSPlayerV1.X does not support RenderPrivateData","color: red"),r)}},{key:"JSPlayM4_RenderPrivateDataEx",value:function(e,t,r){var i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_RenderPrivateDataEx this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_RenderPrivateDataEx(e,t,r):console.log("%c1>JSPlayerV1.X does not support RenderPrivateDataEx","color: red"),i)}},{key:"JSPlayM4_SetCanvasSize",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetCanvasSize this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetCanvasSize(e,t,r):this.oJSPlayerObj.PlayM4_SetCanvasSize(e,t)}},{key:"JSPlayM4_SetDisplayBuf",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDisplayBuf this.oJSPlayerObj is null"),0):(this.displayBuf=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDisplayBuf(e):this.oJSPlayerObj.PlayM4_SetDisplayBuf(e))}},{key:"JSPlayM4_GetSourceBufferRemain",value:function(){return null===this.oJSPlayerObj?0:this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetSourceBufferRemain():this.oJSPlayerObj.PlayM4_GetInputBufSize()}},{key:"JSPlayM4_GetBufferValue",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetBufferValue this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetBufferValue(e):this.oJSPlayerObj.PlayM4_GetBufferValue(e)}},{key:"JSPlayM4_ReversePlay",value:function(){var e=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_ReversePlay this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?e=this.oJSPlayerObj.JSPlayM4_ReversePlay():console.log("%c1>JSPlayerV1.X does not support ReversePlay","color: red"),e)}},{key:"JSPlayM4_SetDecodeThreadNum",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDecodeThreadNum this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetDecodeThreadNum(e):console.log("%c1>JSPlayerV1.X does not support SetDecodeThreadNum, V1.X decocde only 1 thread","color: red"),t)}},{key:"JSPlayM4_GetCanvasSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetCanvasSize this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetCanvasSize(e):this.oJSPlayerObj.PlayM4_GetCanvasSize()}},{key:"JSPlayM4_DisplayLostFrames",value:function(e,t,r){var i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_DisplayLostFrames this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_DisplayLostFrames(e,t,r):console.log("%c1>JSPlayerV1.X does not support DisplayLostFrames","color: red"),i)}},{key:"JSPlayM4_SetANRParam",value:function(e,t){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetANRParam this.oJSPlayerObj is null"),0):(this.anrParamLevel=t,this.anrParamFlag=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetANRParam(e,t):this.oJSPlayerObj.PlayM4_SetANRParam(e,t))}},{key:"JSPlayM4_SetResampleValue",value:function(e,t){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetResampleValue this.oJSPlayerObj is null"),0):(this.resampleRate=t,this.resampleFlag=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetResampleValue(e,t):this.oJSPlayerObj.PlayM4_SetResampleValue(e,t))}},{key:"JSPlayM4_SetAntialias",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAntialias this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetAntialias(e):console.log("%c1>JSPlayerV1.X does not support JSPlayM4_SetAntialias 20230922","color: red"),t)}},{key:"JSPlayM4_SyncToAudio",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SyncToAudio this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SyncToAudio(e):console.log("%c1>JSPlayerV1.X does not support SyncToAudio","color: red"),t)}},{key:"JSPlayM4_SetAudioThreadModel",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAudioThreadModel this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetAudioThreadModel(e):console.log("%c1>JSPlayerV1.X does not support SetAudioThreadModel","color: red"),t)}},{key:"JSPlayM4_SetDecodeERC",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDecodeERC this.oJSPlayerObj is null"),0):(this.decodeERCLevel=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDecodeERC(e):this.oJSPlayerObj.PlayM4_SetDecodeERC(e))}},{key:"JSPlayM4_SkipErrorData",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SkipErrorData this.oJSPlayerObj is null"),0):(this.skipErrorData=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SkipErrorData(e):this.oJSPlayerObj.PlayM4_SkipErrorData(e))}},{key:"JSPlayM4_SetDemuxModel",value:function(e,t){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetDemuxModel this.oJSPlayerObj is null"),0):(this.demuxModelType=e,this.demuxModeFlag=t,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDemuxModel(e,t):this.oJSPlayerObj.PlayM4_SetDemuxModel(e,t))}},{key:"JSPlayM4_SetD3DPostProcess",value:function(e,t){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetD3DPostProcess this.oJSPlayerObj is null"),0):"number"!=typeof e||"number"!=typeof t?(console.log(">>>>>yff>>> JSPlayM4_SetD3DPostProcess nPostType or fValue is not number"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetD3DPostProcess(e,t):this.oJSPlayerObj.PlayM4_SetD3DPostProcess(e,t)}},{key:"JSPlayM4_SetFirstFrameCallBack",value:function(e,t){return this.needSetFFCB=!0,this.FFCBFlag=e,this.firstFrameCB=t,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetFirstFrameCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetFirstFrameCallBack(e,t):this.oJSPlayerObj.PlayM4_SetFirstFrameCallBack(e,t)}},{key:"JSPlayM4_SetDecCallBack",value:function(e,t){return null===this.oJSPlayerObj||"function"!=typeof t?(console.log(">>>>>yff>>> JSPlayM4_SetDecCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDecCallBack(e,t):this.oJSPlayerObj.PlayM4_SetDecCallBack(e,t)}},{key:"JSPlayM4_SetDisplayCallBack",value:function(e,t){return null===this.oJSPlayerObj||"function"!=typeof t?(console.log(">>>>>yff>>> JSPlayM4_SetDisplayCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDisplayCallBack(e,t):this.oJSPlayerObj.PlayM4_SetDisplayCallBack(t)}},{key:"JSPlayM4_SetFrameInfoCallBack",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetFrameInfoCallBack this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetFrameInfoCallBack(e):this.oJSPlayerObj.PlayM4_SetFrameInfoCallBack(e)}},{key:"JSPlayM4_SetDecCBStream",value:function(e){return null===this.oJSPlayerObj||e<1||e>3?(console.log(">>>>>yff>>> JSPlayM4_SetDecCBStream this.oJSPlayerObj is null stream:"+e),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetDecCBStream(e):this.oJSPlayerObj.PlayM4_SetDecCBStream(e)}},{key:"JSPlayM4_GetFrameInfo",value:function(){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetFrameInfo this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetFrameInfo():this.oJSPlayerObj.PlayM4_GetFrameInfo()}},{key:"JSPlayM4_GetAdditionData",value:function(){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetAdditionData this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetAdditionData():(console.log("%c1>JSPlayerV1.X does not support GetAdditionData","color: red"),0)}},{key:"JSPlayM4_SetAdditionDataCallBack",value:function(e,t,r){var i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAdditionDataCallBack this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_SetAdditionDataCallBack(e,t,r):(console.log("%c1>JSPlayerV1.X does not support SetAdditionDataCallBack","color: red"),i=0),i)}},{key:"JSPlayM4_GetPlayedTimeEx",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetPlayedTimeEx this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_GetPlayedTimeEx(e):this.oJSPlayerObj.PlayM4_GetPlayedTimeEx(e)}},{key:"JSPlayM4_GetFileTime",value:function(){var e=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetFileTime this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?e=this.oJSPlayerObj.JSPlayM4_GetFileTime():console.log("%c1>JSPlayerV1.X does not support GetPlayedTimeEx","color: red"),1e3*e)}},{key:"JSPlayM4_GetMpOffset",value:function(e){var t=-1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetMpOffset this.oJSPlayerObj is null"),-1):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_GetMpOffset(e):console.log("%c1>JSPlayerV1.X does not support GetMpOffset","color: red"),t)}},{key:"JSPlayM4_ResetBuffer",value:function(e){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_ResetBuffer this.oJSPlayerObj is null"),0):(this.needResetBuffer=!0,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_ResetBuffer(e):this.oJSPlayerObj.PlayM4_ReleaseInputBuffer())}},{key:"JSPlayM4_SetGlobalBaseTime",value:function(e,t,r,i,n,a,o){return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetGlobalBaseTime this.oJSPlayerObj is null"),0):(this.globalBaseTime={year:e,month:t,day:r,hour:i,min:n,sec:a,ms:o},this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetGlobalBaseTime(e,t,r,i,n,a,o):this.oJSPlayerObj.PlayM4_SetGlobalBaseTime(e,t,r,i,n,a,o))}},{key:"JSPlayM4_SetSecretKey",value:function(e){return this.needSetSecretKey=!0,this.keyData=e,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetSecretKey this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetSecretKey(e):this.oJSPlayerObj.PlayM4_SetSecretKey(1,e,128)}},{key:"JSPlayM4_SetRunTimeInfoCallBackEx",value:function(e,t){return this.runtimeModule=e,this.runtimeCBFun=t,this.needSetRunTimeInfoCB=!0,null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetRunTimeInfoCallBackEx this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetRunTimeInfoCallBackEx(e,t):this.oJSPlayerObj.PlayM4_SetRunTimeInfoCallBackEx(e,t)}},{key:"JSPlayM4_SetPlayOrBackSwitchMode",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetPlayOrBackSwitchMode this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetPlayOrBackSwitchMode(e):console.log("%c1>JSPlayerV1.X does not support SetPlayOrBackSwitchMode","color: red"),t)}},{key:"JSPlayM4_SetStretchPlay",value:function(e,t){var r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetStretchPlay this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_SetStretchPlay(e,t):console.log("%c1>JSPlayerV1.X does not support SetStretchPlay","color: red"),r)}},{key:"JSPlayM4_SetAutoSmoothPlay",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetAutoSmoothPlay this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetAutoSmoothPlay(e):console.log("%c1>JSPlayerV1.X does not support SetAutoSmoothPlay","color: red"),t)}},{key:"JSPlayM4_KeepPlaySpeed",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_KeepPlaySpeed this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_KeepPlaySpeed(e):console.log("%c1>JSPlayerV1.X does not support KeepPlaySpeed","color: red"),t)}},{key:"JSPlayM4_IgnoreHeaderAudioDefine",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_IgnoreHeaderAudioDefine this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_IgnoreHeaderAudioDefine(e):console.log("%c1>JSPlayerV1.X does not support IgnoreHeaderAudioDefine","color: red"),t)}},{key:"JSPlayM4_SetSycGroup",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetSycGroup this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_SetSycGroup(e):console.log("%c1>JSPlayerV1.X does not support SetSycGroup","color: red"),t)}},{key:"JSPlayM4_FEC_SetCanvasID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=1;return this.FECcanvasIDArray=e.split(","),null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetCanvasID this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_FEC_SetCanvasID(e):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),t)}},{key:"JSPlayM4_FEC_ResetCorrectType",value:function(e,t,r){var i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_ResetCorrectType this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_FEC_ResetCorrectType(e,t,r):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),i)}},{key:"JSPlayM4_FEC_GetPort",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_GetPort this.oJSPlayerObj is null"),-1):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FEC_GetPort(e,t,r):-1}},{key:"JSPlayM4_FEC_Enable",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_Enable this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_FEC_Enable(e):console.log("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),t)}},{key:"JSPlayM4_FEC_SetParam",value:function(e,t){var r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetParam this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_FEC_SetParam(e,t):console.log("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),r)}},{key:"JSPlayM4_FEC_GetParam",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_GetParam this.oJSPlayerObj is null"),0):this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_FEC_GetParam(e,t):(console.log("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),1)}},{key:"JSPlayM4_FEC_SetViewParam",value:function(e,t,r){var i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetViewParam this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_FEC_SetViewParam(e,t,r):console.log("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),i)}},{key:"JSPlayM4_FEC_GetViewParam",value:function(e,t,r){var i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_GetViewParam this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_FEC_GetViewParam(e,t,r):console.log("%c1>JSPlayerV1.X does not support  FEC 20230922","color: red"),i)}},{key:"JSPlayM4_FEC_SetWnd",value:function(e,t){var r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetWnd this.oJSPlayerObj is null"),0):(this.CanvasSubPortMap.set(e,t),this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_FEC_SetWnd(e,t):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),r)}},{key:"JSPlayM4_FEC_Disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_Disable this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?i=this.oJSPlayerObj.JSPlayM4_FEC_Disable(e,t,r):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),i)}},{key:"JSPlayM4_FEC_DelPort",value:function(e){var t=1;if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_FEC_DelPort this.oJSPlayerObj is null"),0;var r=this.CanvasSubPortMap.get(e);this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_FEC_DelPort(e):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red");var i=document.getElementById(r);if(i){var n=i.cloneNode(!0);i.parentNode.replaceChild(n,i)}return this.CanvasSubPortMap.delete(e),t}},{key:"JSPlayM4_FEC_SetDisplayRegion",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5?arguments[5]:void 0,o=arguments.length>6?arguments[6]:void 0,s=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetDisplayRegion this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?s=this.oJSPlayerObj.JSPlayM4_FEC_SetDisplayRegion(e,t,r,i,n,a,o):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),s)}},{key:"JSPlayM4_FEC_SetBackCilling",value:function(e,t){var r=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetBackCilling this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?r=this.oJSPlayerObj.JSPlayM4_FEC_SetBackCilling(e,t):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),r)}},{key:"JSPlayM4_FEC_GetPTZPort",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=-1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_GetPTZPort this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?n=this.oJSPlayerObj.JSPlayM4_FEC_GetPTZPort(e,t,r,i):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),n)}},{key:"JSPlayM4_FEC_SetPTZDisplayMode",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_FEC_SetPTZDisplayMode this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?t=this.oJSPlayerObj.JSPlayM4_FEC_SetPTZDisplayMode(e):console.log("%c1>JSPlayerV1.X does not support FEC 20230922","color: red"),t)}},{key:"JSPlayM4_SetVideoCropInfo",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetVideoCropInfo this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support SetVideoCropInfo,","color: red"):t=this.oJSPlayerObj.PlayM4_SetVideoCropInfo(e),t)}},{key:"JSPlayM4_IsVisible",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_IsVisible this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support IsVisible,","color: red"):t=this.oJSPlayerObj.PlayM4_IsVisible(e),t)}},{key:"JSPlayM4_SetInputBufSize",value:function(e){var t=1;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_SetInputBufSize this.oJSPlayerObj is null"),0):(this.inputBufSize=e,this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support SetInputBufSize,","color: red"):t=this.oJSPlayerObj.PlayM4_SetInputBufSize(e),t)}},{key:"JSPlayM4_GetYUVBufSize",value:function(){var e=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetYUVBufSize this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support GetYUVBufSize,","color: red"):e=this.oJSPlayerObj.PlayM4_GetYUVBufSize(),e)}},{key:"JSPlayM4_ClearCanvas",value:function(){var e=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_ClearCanvas this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support ClearCanvas,","color: red"):e=this.oJSPlayerObj.PlayM4_ClearCanvas(),e)}},{key:"JSPlayM4_ReleaseInputBuffer",value:function(){var e=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_ReleaseInputBuffer this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support ReleaseInputBuffer,","color: red"):e=this.oJSPlayerObj.PlayM4_ReleaseInputBuffer(),e)}},{key:"JSPlayM4_GetDecodeFrameType",value:function(){var e=0;return null===this.oJSPlayerObj?(console.log(">>>>>yff>>> JSPlayM4_GetDecodeFrameType this.oJSPlayerObj is null"),0):(this.jsplayerVersion>1?console.log("%c1>JSPlayerV3.X does not support GetDecodeFrameType,","color: red"):e=this.oJSPlayerObj.PlayM4_GetDecodeFrameType(),e)}},{key:"JSPlayM4_SetWaterMarkFont",value:function(e){if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkFont this.oJSPlayerObj is null"),0;if(null!=e){if(void 0===e.pFontString||null==e.pstStartPos||null==e.pstFontColor||null==e.pstFontSize||null==e.pstFontRotate||null==e.pFontFamily||null==e.pstStartPos.fX||null==e.pstStartPos.fY||null==e.pstFontColor.fR||null==e.pstFontColor.fG||null==e.pstFontColor.fB||null==e.pstFontColor.fA||null==e.pstFontSize.nFontWidth||null==e.pstFontSize.nFontHeight||null==e.pstFontRotate.fRotateAngle||null==e.pstFontRotate.fFillFullScreen||null==e.pSpace)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkFont pFontParam undefined"),0;if(e.pstStartPos.fX>1||e.pstStartPos.fX<0||e.pstStartPos.fY>1||e.pstStartPos.fY<0||e.pstFontColor.fR>1||e.pstFontColor.fR<0||e.pstFontColor.fG>1||e.pstFontColor.fG<0||e.pstFontColor.fB>1||e.pstFontColor.fB<0||e.pstFontColor.fA>1||e.pstFontColor.fA<0)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkFont pFontParam f* is 0~1"),0;if(1!=e.pstFontRotate.fFillFullScreen&&0!=e.pstFontRotate.fFillFullScreen&&1!=e.pstFontRotate.fFillFullScreen&&0!=e.pstFontRotate.fFillFullScreen)return console.log(">>>>>yff>>> pFontParam.pstFontRotate.fFillFullScreen is true or false"),0;if(e.pstFontRotate.fFillFullScreen&&(e.pstFontNumber.nRowNumber<3||e.pstFontNumber.nColNumber<3||null==e.pstFontNumber.nRowNumber||null==e.pstFontNumber.nColNumber||e.pstFontNumber.nRowNumber>13||e.pstFontNumber.nColNumber>13))return console.log(">>>>>yff>>> pFontParam.pstFontNumber row/col num should be greater than 2 and les than 13"),0;if("string"!=typeof e.pFontFamily)return console.log(">>>>>yff>>> pFontParam.pFontFamily is not string"),0;if(!Array.isArray(e.pFontString))return console.log(">>>>>yff>>> pFontParam.pFontString is not array"),0;(e.pstFontSize.nFontHeight<=0||e.pstFontSize.nFontWidth<=0)&&(e=null),null!=e.nFontAlign&&null!=e.nFontAlign||(e.nFontAlign=0),null!=e.nColorAdapt&&null!=e.nColorAdapt||(e.nColorAdapt=0)}return this.waterFontParam=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetWaterMarkFont(e):this.oJSPlayerObj.PlayM4_SetWaterMarkFont(e)}},{key:"JSPlayM4_SetWaterMarkImage",value:function(e){if(null===this.oJSPlayerObj)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkImage this.oJSPlayerObj is null"),0;if(!("ImageDecoder"in window))return console.log(">>>>>yff>>> window not support ImageDecoder"),16;if(null!=e){if(void 0===e.pImageData)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkImage pImageParam.pImageData undefined"),0;if(void 0===e.pImageType||"jpg"!=e.pImageType&&"jpeg"!=e.pImageType&&"png"!=e.pImageType&&"gif"!=e.pImageType&&"bmp"!=e.pImageType&&"webp"!=e.pImageType&&"avif"!=e.pImageType)return console.log(">>>>>yff>>> JSPlayM4_SetWaterMarkImage pImageParam.pImageType:"+e.pImageType+" error"),0;(void 0===e.pstRectPos||e.fLeft<0||e.fLeft>1||e.fRight<0||e.fRight>1||e.fTop<0||e.fTop>1||e.fBottom<0||e.fBottom>1)&&(e.pstRectPos={fLeft:0,fRight:.1,fTop:0,fBottom:.1}),(void 0===e.fAlpha||e.fAlpha<0||e.fAlpha>1)&&(e.fAlpha=1)}return this.waterImageParam=e,this.jsplayerVersion>1?this.oJSPlayerObj.JSPlayM4_SetWaterMarkImage(e):this.oJSPlayerObj.PlayM4_SetWaterMarkImage(e)}},{key:"_downloadFile",value:function(e,t){var r=e;a(e,Blob)||a(e,File)||(r=new Blob([e]));var i=window.URL.createObjectURL(r),n=window.document.createElement("a");n.href=i,n.download=t;var o=document.createEvent("MouseEvents");o.initEvent("click",!0,!0),n.dispatchEvent(o)}},{key:"downloadRTPData",value:function(e){if(this.bWriteData){var t=e,r=this.aTotalBuffer.length;console.log("totalLength:"+r);for(var i=0,n=t.length;i<n;i++)this.aTotalBuffer[r+i]=t[i];this.iFrameNum++,t=null,console.log("download200RTPdata iFrameNum:"+this.iFrameNum)}if(this.bWriteData&&this.iFrameNum>=100){console.log("download100RawData");var a=new Uint8Array(this.aTotalBuffer);this._downloadFile(a,"Raw100.data"),this.aTotalBuffer.splice(0,this.aTotalBuffer.length),this.bWriteData=!1,this.iFrameNum=0,a=null}}}]),t}();window._getFExplore=function(){var e,t={},r=navigator.userAgent.toLowerCase();if((e=r.match(/rv:([\d.]+)\) like gecko/))||(e=r.match(/msie ([\d\.]+)/))?t.ie=e[1]:(e=r.match(/edge\/([\d\.]+)/))?t.edge=e[1]:(e=r.match(/firefox\/([\d\.]+)/))?t.firefox=e[1]:(e=r.match(/(?:opera|opr).([\d\.]+)/))?t.opera=e[1]:(e=r.match(/chrome\/([\d\.]+)/))?t.chrome=e[1]:(e=r.match(/version\/([\d\.]+).*safari/))&&(t.safari=e[1]),t.chrome){var i=t.chrome,n=i.indexOf(".");return Number(i.substring(0,n))}return t.ie?console.info("%c1>your browser is IE ,it does not support play without plugin","color: red"):t.safari?console.info("%c1>your browser is safari","color: red"):t.firefox?console.info("%c1>your browser is Firefox","color: red"):console.info("%c1>your browser does not support play without plugin","color: red"),-1},window._getFSupportWebCodecs=function(){return"undefined"!=typeof MediaMetadata&&"undefined"!=typeof MediaRecorder&&"undefined"!=typeof VideoDecoder},window._getFSupportSIMD=function(){return new Promise((function(e,t){Ze().then((function(r){r?e():t()}))}))}}(),s}()}();var z_=W_.exports.JSPlayCtrl;function G_(e,t,r){return G_=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,r){var i=[null];i.push.apply(i,t);var n=new(Function.bind.apply(e,i));return r&&J_(n,r.prototype),n},G_.apply(null,arguments)}function J_(e,t){return J_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},J_(e,t)}var Z_="object"==("undefined"==typeof window?"undefined":df(window))&&window.window===window?window:"object"==("undefined"==typeof self?"undefined":df(self))&&self.self===self?self:"object"==("undefined"==typeof global?"undefined":df(global))&&global.global===global?global:void 0;function j_(e,t,r){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){Q_(i.response,t,r)},i.onerror=function(){},i.send()}function q_(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return t.status>=200&&t.status<=299}function $_(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(r){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var K_=Z_.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),Q_="object"!=("undefined"==typeof window?"undefined":df(window))||window!==Z_?function(){}:"download"in HTMLAnchorElement.prototype&&!K_?function(e,t,r){var i=Z_.URL||Z_.webkitURL,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");t=t||e.name||"download",n.download=t,n.rel="noopener","string"==typeof e?(n.href=e,n.origin!==location.origin?q_(n.href)?j_(e,t,r):$_(n,n.target="_blank"):$_(n)):(n.href=i.createObjectURL(e),setTimeout((function(){i.revokeObjectURL(n.href)}),4e4),setTimeout((function(){$_(n)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download","string"==typeof e)if(q_(e))j_(e,t,r);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout((function(){$_(i)}))}else navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=df(t)&&(t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}(e,r),t)}:function(e,t,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return j_(e,t,r);var n="application/octet-stream"===e.type,a=/constructor/i.test(Z_.HTMLElement)||Z_.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||n&&a||K_)&&"undefined"!=typeof FileReader){var s=new FileReader;s.onloadend=function(){var e=s.result;e=o?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},s.readAsDataURL(e)}else{var x=Z_.URL||Z_.webkitURL,l=x.createObjectURL(e);i?i.location=l:location.href=l,i=null,setTimeout((function(){x.revokeObjectURL(l)}),4e4)}};function ep(e,t){Q_(function(e){void 0===e&&(e="");for(var t=e.split(","),r=atob(t[1]),i=t[0].replace("data:","").replace(";base64",""),n=r.length,a=new Uint8Array(n);n--;)a[n]=r.charCodeAt(n);return new File([a],"file",{type:i})}(e),t)}var tp={exports:{}};!function(e){var t=Object.prototype.hasOwnProperty,r="~";function i(){}function n(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,i,a,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var s=new n(i,a||e,o),x=r?r+t:t;return e._events[x]?e._events[x].fn?e._events[x]=[e._events[x],s]:e._events[x].push(s):(e._events[x]=s,e._eventsCount++),e}function o(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),s.prototype.eventNames=function(){var e,i,n=[];if(0===this._eventsCount)return n;for(i in e=this._events)t.call(e,i)&&n.push(r?i.slice(1):i);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},s.prototype.listeners=function(e){var t=r?r+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var n=0,a=i.length,o=new Array(a);n<a;n++)o[n]=i[n].fn;return o},s.prototype.listenerCount=function(e){var t=r?r+e:e,i=this._events[t];return i?i.fn?1:i.length:0},s.prototype.emit=function(e,t,i,n,a,o){var s=r?r+e:e;if(!this._events[s])return!1;var x,l,c=this._events[s],f=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),f){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,i),!0;case 4:return c.fn.call(c.context,t,i,n),!0;case 5:return c.fn.call(c.context,t,i,n,a),!0;case 6:return c.fn.call(c.context,t,i,n,a,o),!0}for(l=1,x=new Array(f-1);l<f;l++)x[l-1]=arguments[l];c.fn.apply(c.context,x)}else{var h,u=c.length;for(l=0;l<u;l++)switch(c[l].once&&this.removeListener(e,c[l].fn,void 0,!0),f){case 1:c[l].fn.call(c[l].context);break;case 2:c[l].fn.call(c[l].context,t);break;case 3:c[l].fn.call(c[l].context,t,i);break;case 4:c[l].fn.call(c[l].context,t,i,n);break;default:if(!x)for(h=1,x=new Array(f-1);h<f;h++)x[h-1]=arguments[h];c[l].fn.apply(c[l].context,x)}}return!0},s.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,i,n){var a=r?r+e:e;if(!this._events[a])return this;if(!t)return o(this,a),this;var s=this._events[a];if(s.fn)s.fn!==t||n&&!s.once||i&&s.context!==i||o(this,a);else{for(var x=0,l=[],c=s.length;x<c;x++)(s[x].fn!==t||n&&!s[x].once||i&&s[x].context!==i)&&l.push(s[x]);l.length?this._events[a]=1===l.length?l[0]:l:o(this,a)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&o(this,t)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s}(tp);var rp=Df(tp.exports);Date.prototype.Format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var r in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),t)new RegExp("("+r+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?t[r]:("00"+t[r]).substr((""+t[r]).length)));return e};var ip=function(e,t){var r=new RegExp("(\\?|#|&)"+e+"=(.*?)(#|&|$)"),i=(t||window.location.href).match(r);return decodeURIComponent(i?i[2]:"")},np=function(e,t){var r=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),i=t.match(r);return null!=i?unescape(i[2]):null};function ap(){return ap=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ap.apply(this,arguments)}function op(e,t,r){var i=e.reduce((function(e,t,r){return 0===r?(delete t.coverPic,e.push(ap({},t)),e):(e[e.length-1].downloadPath===t.downloadPath?e[e.length-1].endTime=t.endTime:(delete t.coverPic,e.push(ap({},t))),e)}),[]);return i.length>0&&(i[0].startTime=t.valueOf(),i[i.length-1].endTime=r.valueOf()),i}function sp(e){var t=e.wasmplayer;t&&t.JSPlayM4_CloseStream(),e.playing=!1}function xp(e,t,r,i){var n,a,o,s,x,l=(s=(o=t).split("?")[0].replace("/live","").replace("/playback",""),(x=(o.includes("/live")?"/live?":o.includes("cloudplayback")?"/cloudplayback?":"/playback?")+o.split("?")[1]).includes("/playback")&&(x=x.replace("stream=2","stream=1")),{websocketConnectUrl:s,websocketStreamingParam:x});if(l.websocketConnectUrl){var c,f=null!=(c=null==(a=e._options)||null==(n=a.env)?void 0:n.wsUrl)?c:l.websocketConnectUrl;fp(e,f,{playURL:l.websocketStreamingParam}).then((function(){return r(0)}),(function(t){e.logger.error("play error: ",t),e.event.emit(fd,cd(t)),i(1)}))}}function lp(e){var t=e._options.url;return e.service.getRealPlayUrl({ezopen:e._options.url}).then((function(r){var i=r.realUrl,n=np("checkCode",i);return n&&(e._validateCode=n),i.includes("playback")?function(e,t,r){var i,n=Ox(np("begin",t)||np("begin",r)||Ox().format("YYYY-MM-DD 00:00:00")),a=Ox(np("end",t)||np("end",r)||Ox().format("YYYY-MM-DD 23:59:59")),o=np("end",t)||np("end",r),s=+ip("timeZone",r);s<24&&s>-24?s=Math.round(s):(s=0,e.logger.warn("timeZone时区参数错误，取值范围为-23~23"));var x=Ox(n).add(s,"hour"),l=o?Ox(a).add(s,"hour"):Ox(Ox(x).format("YYYYMMDD 23:59:59"));x>=l&&(l=Ox(Ox(x).format("YYYYMMDD 23:59:59")),e.logger.warn("End time greater than or equal to start time"));var c,f="YYYYMMDDTHHmmss";return t=(t=t.replace("&begin="+ip("begin",t),""))+"&begin="+x.format(f)+"Z",function(e,t){var r=Ox(e).startOf("day"),i=Ox(t).startOf("day");return!r.isSame(i)}(x,l)&&"cloud"===e.urlInfo.recType&&(l=Ox(Ox(x).format("YYYYMMDD 23:59:59")),e.logger.warn("The start and end times have crossed days")),t=(t=t.replace("&end="+ip("end",t),""))+"&end="+l.format(f)+"Z",ip("stream",t)||(t=t.replace("stream","&stream")),"cloud"===e.urlInfo.recType&&"7"===(null==(i=e.urlInfo.searchParams)?void 0:i.busType)?function(e,t){return new Promise((function(r,i){e.service.getRecordCloudVideoByTime(t).then((function(t){e.event.emit(dd.NETWORK.videoFragmentFiles,cd(t.data||[],"云录制录像信息查询","RecordCloud")),r(t)})).catch((function(t){e.event.emit(dd.NETWORK.error.error,cd(t)),e.event.emit(dd.NETWORK.error.videoFragmentFiles,cd(t)),i(t)}))}))}(e,{channelNo:e.urlInfo.channelNo,startTime:Ox(Ox(x).format("YYYY-MM-DD 00:00:00")).valueOf(),endTime:Ox(Ox(l).format("YYYY-MM-DD 23:59:59")).valueOf(),spaceId:null==(c=e.urlInfo.searchParams)?void 0:c.spaceId}).then((function(e){var r=l;e.data.length>0&&Ox(e.data[e.data.length-1].endTime)<Ox(l)&&(r=Ox(e.data[e.data.length-1].endTime));var i=JSON.stringify(op(e.data,x,r)).replace("\\","");return t+="&recSlice="+i.replace("\\","")+"&r="+Math.random()})):"cloud"===e.urlInfo.recType?I_(e,{recType:1,channelNo:e.urlInfo.channelNo,startTime:Ox(Ox(x).format("YYYY-MM-DD 00:00:00")).valueOf(),endTime:Ox(Ox(l).format("YYYY-MM-DD 23:59:59")).valueOf()}).then((function(e){var r=l;e.data.length>0&&Ox(e.data[e.data.length-1].endTime)<Ox(l)&&(r=Ox(e.data[e.data.length-1].endTime));var i=JSON.stringify(op(e.data,x,r)).replace("\\","");return t+="&recSlice="+i.replace("\\","")+"&r="+Math.random()})):(I_(e,{recType:2,channelNo:e.urlInfo.channelNo,startTime:Ox(Ox(x).format("YYYY-MM-DD 00:00:00")).valueOf(),endTime:Ox(Ox(l).format("YYYY-MM-DD 23:59:59")).valueOf()}),Promise.resolve(t))}(e,i,t):Promise.resolve(i)}))}var cp="";function fp(e,t,r,i){return e._playerWindow.reRenderCanvas(!0),e.playing=!1,e._wss_info={wssUrl:t,oParams:r},new Promise((function(t,r){cp="",e._oStreamClient.stopAll(),null===e._g_port&&(e._g_port=e.wasmplayer.JSPlayM4_GetPort(),e.logger.log("1.获取播放库端口号 g_port:"+e._g_port)),e.event.emit(hd,cd({type:ud.openStreamCallback,data:null})),hp(e).then(t,r)}))}function hp(e,t){var r=!0,i=!0;return new Promise((function(n,a){e._oStreamClient.openStream(e._wss_info.wssUrl,e._wss_info.oParams,(function(a){if(a.errorCode&&"1"!=a.errorCode&&(e.event.emit(hd,cd({type:ud.pluginErrorHandler,iWndIndex:0,code:a.errorCode,data:a})),e.event.emit(dd.SOCKET.autoClose)),null==a?void 0:a.bHead){var o;if(e.event.emit(hd,cd({type:ud.getStreamHeaderCallback})),"resume"!==t&&function(e,t){var r=e.wasmplayer,i=r.JSPlayM4_OpenStream(t,40,4194304);e.event.emit("PlayM4_openStream",cd(t)),r.JSPlayM4_SetFirstFrameCallBack(1,(function(){e.event.emit("firstFrameCallBack",cd(null))}));var n=0;e.event&&e.event.on("seek",(function(e){n=e.data.startTime.replace(/[TZ]/gi,"")})),r.JSPlayM4_SetRunTimeInfoCallBackEx(1,(function(t,r,i,a,o){if(e.event){var s,x=e.getOSDTime();n=n||(Number.isNaN(x)?0:1e3*x),e.event.emit(hd,cd({type:ud.setRunTimeInfoCallBack,data:{nRunTimeModule:t,nStrVersion:r,nFrameTimeStamp:i,nFrameNum:a,nErrorCode:o,errorTime:Ox(n||(null==(s=e.urlInfo.searchParams)?void 0:s.begin)||Ox().format("YYYYMMDD000000"))}})),n=0}})),e.logger.log("3.打开流 resO:"+i)}(e,null==a?void 0:a.buf),e._aHead=new Uint8Array(a.buf),"resume"===t&&((null==e||null==(o=e.urlInfo)?void 0:o.validateCode)?e.setSecretKey(e.urlInfo.validateCode):e._secretKey&&e.setSecretKey(e._secretKey)),"resume"!==t){var s;try{var x,l=function(e){return{year:parseInt(e.slice(0,4)),month:parseInt(e.slice(4,6)),day:parseInt(e.slice(6,8)),hour:parseInt(e.slice(9,11)),min:parseInt(e.slice(11,13)),second:parseInt(e.slice(13,15))+3}}(ip("begin",null==(x=e._wss_info.oParams)?void 0:x.playURL));if(!isNaN(l.year)){var c=e.wasmplayer.JSPlayM4_SetGlobalBaseTime(l.year,l.month,l.day,l.hour,l.min,l.second,0);e.logger.log("设置OSD时间res:",c)}}catch(t){e.logger.error("JSPlayM4_SetGlobalBaseTime:",t)}if(e.playing=!0,1!=+e.wasmplayer.JSPlayM4_SetFrameInfoCallBack(1)){var f=e.wasmplayer.JSPlayM4_GetLastError();e.logger.error("resFrameInfoError:",f)}e.wasmplayer.JSPlayM4_RenderPrivateData(4,1),r=!0,i=!0,e.event.emit("JSPlayM4_Play_Before",cd(void 0)),(null==e||null==(s=e.urlInfo)?void 0:s.validateCode)?e.setSecretKey(e.urlInfo.validateCode):e._secretKey&&e.setSecretKey(e._secretKey);var h=e.wasmplayer.JSPlayM4_Play(e._playerWindow.canvasId);e.event.emit("JSPlayM4_Play_After",cd(void 0)),e.logger.log("4.开始播放 resP:"+h,e._playerWindow.canvasId),n(h)}}else{if(i&&a.buf&&(i=!1,e.event.emit(hd,cd({type:ud.getVideoStreamCallback}))),r&&a.buf){var u=e.getFrameInfo();(null==u?void 0:u.width)&&(e.event.emit(hd,cd({type:ud.appearFirstFrameCallback})),e.event.emit(hd,cd({type:ud.averageStreamSuccessCallback})),r=!1)}var d=new Uint8Array(a.buf);a.statusString?e.event.emit(hd,cd({type:ud.pluginErrorHandler,iWndIndex:0,code:1001,data:a})):a.type&&"exception"===a.type&&e.event.emit(hd,cd({type:ud.pluginErrorHandler,iWndIndex:0,code:1002,data:a})),e.wasmplayer.JSPlayM4_InputData(d,d.length),d=null}"resume"!==t&&(e.playing=!0),e.event.emit("recordInputData",cd(a.buf))}),(function(t){cp===t&&e.event&&(e.event.emit(hd,cd({type:ud.pluginErrorHandler,iWndIndex:0,code:1003})),e.event.emit(dd.SOCKET.close)),e.playing=!1,a()})).then((function(r){cp=r,e._oStreamClient.startPlay().then((function(){if("resume"===t){var r=e.wasmplayer.JSPlayM4_Pause(0);r?(e.playing=!0,e._tempPauseDate=null,n(r)):(e.logger.error("startPlay pause error"),a())}else{var i=e.wasmplayer.JSPlayM4_SetStreamOpenMode(1);e.logger.log("2.设置流模式 resSSOM:"+i)}e.event.emit(dd.API.play)})).catch((function(t){e.playing=!1,e.logger.error("startPlay error:",t),a(t.oError)}))}),(function(t){e.playing=!1,e.logger.error("openStream error:",t),sp(e),a(t)}))}))}function up(e){return(e=+e)<10&&(e="0"+e),e+""}var dp={startPos:{fX:.1,fY:.1},fontColor:{fR:0,fG:0,fB:0,fA:1},fontSize:{nFontWidth:20,nFontHeight:20},fontRotate:{fRotateAngle:0,fFillFullScreen:!1},fontFamily:"Arial",fontNumber:{nRowNumber:5,nColNumber:5},space:1};function _p(){return _p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_p.apply(this,arguments)}var pp=function(){function e(e){var t,r;this.event=new rp,this.initializing=!0,this.loading=!1,this.playbackRate=1,this.playing=!1,this.volume=0,this.destroyed=!1,this.deviceCapacity={},this.deviceInfo={},this.error=null,this._aHead=null,this._g_port=null,this._secretKey="",this._tempPauseDate=null,this._tempPauseTime="",this.__videoInfo={},this._waterMarkParams=null,this._decoderStatus={},this._wss_info={wssUrl:"",oParams:{playURL:""}},this.version="0.1.0-beta.1",this._setOptions(e),this._playerWindow=new X_(this._options.id,this._options.width,this._options.height),this._playerWindow.render(),this.esCanvas=new rh(this._options.id+"canvas_draw0"),r=(t=this).$container,If(r).find("."+V_+"-container").children().each((function(){If(this).bind("mouseenter",(function(){If(r).find("."+V_+"-canvas-draw").css("pointer-events","all"),t.__b3DZoom?(t.esCanvas=null,If(r).find("."+V_+"-canvas-draw").unbind(),t.esCanvas=new rh(t._options.id+"canvas_draw0"),t.esCanvas.setShapeType("Rect"),t.esCanvas.setDrawStyle("#ff0000","",0),t.esCanvas.setDrawStatus(!0,(function(e){"function"==typeof t.__fCallback&&t.__fCallback(e)}))):If(r).find("."+V_+"-canvas-draw").css("pointer-events","none")})),If(this).bind("mouseleave",(function(){If(r).find("."+V_+"-canvas-draw").css("pointer-events","none")}))})),this._playerInit(),this._playerFullScreen=new N_(this,this._options.fullScreenEle)}var t=e.prototype;return t._playerInit=function(){var e=this;return function(e){return e.logger.log("player engine start init"),function(e){var t,r,i;e.initializing=!0,e.event.emit(dd.initializing);var n=(null!=(i=null==(t=e._options.staticPath)?void 0:t.replace(/\/$/,""))?i:"")+"/PlayCtrlWasm",a=n+"/playCtrl3/hasWorker/HasSIMD/Decoder.js",o=n+"/playCtrl1/HasSIMD/Decoder.js";window.SharedArrayBuffer||(a=n+"/playCtrl3/noWorker/Decoder.js");var s=function(){var e=new Cf;if(null==e?void 0:e.getResult){var t,r,i=(null==e?void 0:e.getResult())||{};if(i.browser&&"Chrome"===i.browser.name&&(!["120","118"].includes(null==(t=i.browser)?void 0:t.major)||"macOS"!==(null==(r=i.os)?void 0:r.name)))return!0}return!1}(),x=function(t,r,i,n){return void 0===t&&(t=0),void 0===r&&(r="webgl"),void 0===i&&(i=0),void 0===n&&(n=0),new Promise((function(x){var l=e._options.decoderType,c=[!vf()&&s&&["auto","v3"].includes(l)?a:null,o];e.wasmplayer=G_(z_,[].concat(c,[function(t){"loaded"===t.cmd&&(e.logger.log("init wasm cmd:",t.cmd),window.JSPlayerModuleLoaded=!0,e.initializing=!1,e.event.emit(dd.initializing,cd(t))),e._decoderStatus=t,x(t)},t,r,i,n])),window["wasmplayer-"+e._options.id]=e.wasmplayer}))};return null==(r=window)?void 0:r._getFSupportSIMD().then((function(){return x()}),(function(){return a=n+"/playCtrl3/hasWorker/NoSIMD/Decoder.js",o=n+"/playCtrl1/NoSIMD/Decoder.js",x()}))}(e).then((function(t){return e.logger.log("player engine init success"),t}))}(this).then((function(t){return e._wasmDecoderInfo=t,"loaded"===t.cmd&&e._options.autoPlay&&e.play(),t}))},t.play=function(e){var t=this;return this.loading=!0,this._destroyed(),e&&this._setOptions(null!=e?e:{}),new Promise((function(e,r){var i;(i=t,i._playerWindow.hide(),i.__videoInfo={},new Promise((function(e,t){i._options.accessToken&&rd(i._options.url)?i._oStreamClient._streamUUID?i.stop().then((function(){lp(i).then((function(r){xp(i,r,e,t)})).catch((function(e){i.logger.error("play error: ",e),i.event.emit(fd,cd(e)),t(e)}))})).catch((function(e){t(e)})):lp(i).then((function(r){xp(i,r,e,t)})).catch((function(e){i.logger.error("play error: ",e),i.event.emit(fd,cd(e)),t(e)})):t(1)}))).then((function(){t._options.audio&&setTimeout((function(){t.setVolume(.8)}),100),t.loading=!1,e(0)})).catch((function(){t.loading=!1,r(1)}))}))},t._wss_play=function(e,t,r){var i=this;return void 0===t&&(t={playURL:""}),this._destroyed(),new Promise((function(r,n){var a=setInterval((function(){window.JSPlayerModuleLoaded&&(clearInterval(a),fp(i,e,t).then((function(e){r(e)})).catch((function(e){n(e)})))}),50)}))},t.pause=function(e){return function(e,t,r){if(!e.playing)return e._tempPauseDate?Promise.resolve(ld(new Date(e._tempPauseDate),0)):Promise.reject(ld(void 0,-1,"当前不是播放状态，不需要暂停"));var i=e.getFrameInfo(),n=new Date(i.year+"/"+i.month+"/"+i.day+" "+i.hour+":"+i.minute+":"+i.second).getTime()/1e3,a=new Date(1e3*n);return e._tempPauseDate=a.valueOf(),e._tempPauseTime=""+i.year+up(i.month)+up(i.day)+up(i.hour)+up(i.minute)+up(i.second),new Promise((function(r,i){t?e.stop().then((function(){r(ld(a,0,"暂停成功"))})).catch((function(e){i(ld(a,-1,"暂停失败"))})):(e._oStreamClient.stopAll(),1==+e.wasmplayer.JSPlayM4_Pause(1)?(e.playing=!1,r(ld(a))):i(ld(a,-1,"暂停失败"))),e.event.emit("pause",cd(void 0))}))}(this,e)},t.resume=function(e){return this._destroyed(),function(e,t){var r=e._tempPauseTime,i=e._tempPauseDate,n=e._wss_info;if(e.playing)return Promise.resolve();var a=!1;return new Promise((function(o,s){var x,l,c;t&&(r?r=r.slice(0,14-t.length)+t:(a=!0,r=t)),(null==(x=n.oParams)?void 0:x.playURL.includes("playback"))&&(n.oParams.playURL=null==n||null==(l=n.oParams)?void 0:l.playURL.replace(/begin=[0-9]{8}T[0-9]{6}Z/gi,"begin="+r.slice(0,8)+"T"+r.slice(8,14)+"Z")),n.oParams.playURL.includes("cloudplayback")&&(n.oParams.playURL=null==n||null==(c=n.oParams)?void 0:c.playURL.replace(/"startTime":[0-9]{13}/gi,'"startTime":'+i)),e.event.emit(dd.API.resume,cd(t)),t&&!a?e._wss_play(null==n?void 0:n.wssUrl,null==n?void 0:n.oParams).then((function(t){e._waterMarkParams&&e.setWaterMark(e._waterMarkParams),o(t)})).catch((function(e){s(e)})):hp(e,"resume").then((function(t){e._waterMarkParams&&e.setWaterMark(e._waterMarkParams),o(t)})).catch((function(e){s(e)}))}))}(this,e)},t.destroy=function(){return(e=this)._oStreamClient&&(null==(t=e._oStreamClient)||t.destroy(),e._oStreamClient=null),sp(e),e.wasmplayer&&(e.wasmplayer.JSPlayM4_Stop(),e.wasmplayer.JSPlayM4_FreePort(),e.wasmplayer=null),e._g_port=null,e.pluginManager&&(e.pluginManager.destroy(),e.pluginManager=null),e._playerWindow&&(e._playerWindow.destroy(),e._playerWindow=null),setTimeout((function(){e.event&&(e.event.emit(dd.API.destroy),e.event=null)}),0),e.destroyed=!0,Promise.resolve();var e,t},t._destroyed=function(){return function(e){if(e.destroyed)throw new Error("player is destroyed!")}(this)},t.stop=function(){return t=(e=this).wasmplayer,e._playerWindow.hide(),new Promise((function(r,i){setTimeout((function(){e._oStreamClient&&e._oStreamClient.stopAll().then((function(){e.event.emit("stop",cd(void 0)),e.event.emit("JSPlayM4_Stop",cd(void 0));var i=t.JSPlayM4_Stop(!1);if(1===i)sp(e),r({resS:i});else{var n=t.JSPlayM4_GetLastError();if(35==+n)var a=setInterval((function(){i?clearInterval(a):1==+(i=t.JSPlayM4_Stop(!1))?(sp(e),r({resS:i})):(n=t.JSPlayM4_GetLastError(),e.logger.error("JSPlayM4_Stop error: ",n))}),50);else e.logger.error("stop - other error, still resolve: ",n),sp(e),r({resS:i,jsPluginErrorCode:n})}})).catch((function(r){sp(e);var n=t.JSPlayM4_GetLastError();e.logger.error("JSPlayM4_Stop error: ",n),i({jsPluginErrorCode:n})}))}),100)}));var e,t},t.snapshot=function(e,t,r,i){return void 0===t&&(t="jpeg"),function(e,t,r,i,n,a){var o;return void 0===r&&(r="jpeg"),void 0===a&&(a=!0),r="jpeg",t=(null!=(o=t)&&""!==o?t:(new Date).getTime())+"."+r,new Promise((function(i,o){var s=function(r){if(r){var o=function(e){for(var t=new Uint8Array(e),r="",i=0;i<t.length;i++)r+=String.fromCharCode(t[i]);return"data:image/jpeg;base64,"+window.btoa(r)}(r);n&&ep(o,t),a&&e.event.emit(dd.API.snapshot,cd({fileName:t,base64:o})),i(ld({fileName:t,base64:o}))}};1!=+e.wasmplayer.JSPlayM4_GetJPEG((function(e){s(e)}),!1)&&function(e,t,r,i,n){void 0===n&&(n=!0);var a=e.wasmplayer;return new Promise((function(o,s){1!==a.JSPlayM4_GetCanvasCapture((function(a,s,x){if(a&&s&&x){var l=new ImageData(s,x);l.data.set(a);var c="image/"+r,f=document.createElement("canvas"),h=f.getContext("2d");f.width=s,f.height=x,null==h||h.putImageData(l,0,0);var u=f.toDataURL(c,.7);i&&ep(u,t),n&&e.event.emit(dd.API.snapshot,cd({fileName:t,base64:u})),o(ld({fileName:t,base64:u}))}}))&&o(ld(null,-1,"截图失败"))}))}(e,t,r,!!n,a).then((function(e){0===(null==e?void 0:e.code)?i(e):o(e)}))}))}(this,e,t,0,i)},t.fullScreen=function(e,t){return this._playerFullScreen.fullScreen(e,t)},t.exitScreen=function(){return this._playerFullScreen.exitScreen()},t.resize=function(e,t){return function(e,t,r){t=+t,r=+r;var i=O_();if(isNaN(t)||isNaN(r)?(t=e._options.width,r=e._options.height):i||(e._options.width=t,e._options.height=r),t<16||r<16)return Promise.reject();if(e.$container.style.width=t+"px",e.$container.style.height=r+"px",e._playerWindow&&(e._playerWindow.resize(t,r),e.wasmplayer))try{0==+e.wasmplayer.JSPlayM4_SetCanvasSize(t,r)&&e.logger.error("canvas resize fail")}catch(t){e.logger.error("canvas resize fail: ",t)}return e.event&&e.event.emit("resize",cd({width:t,height:r})),e.logger&&e.logger.log("resize: width: "+t+"  height: "+r),Promise.resolve({width:t,height:r})}(this,e,t)},t.setVolume=function(e){return function(e,t){var r=0;return t<0||t>1?(e.logger.warn("audio volume ("+t+") is invalid!"),0):(0===t?1===(r=e.wasmplayer.JSPlayM4_StopSound())&&(e.volume=0):1===(r=e.wasmplayer.JSPlayM4_PlaySound())&&(e.volume=t),e.event.emit(dd.volumeChange,cd(t)),r)}(this,e)},t.use=function(e){this.pluginManager.use(e)},t.setFECCorrectType=function(e,t){return this.fECCorrect.setFECCorrectType(e,t)},t.setFEC2DParam=function(e,t){return this.fECCorrect.setFEC2DParam(e,t)},t.setFEC3DViewParam=function(e){return this.fECCorrect.setFEC3DViewParam(e)},t.get3DViewParam=function(e){return this.fECCorrect.get3DViewParam(e)},t.setPoster=function(e){},t.setPlaybackRate=function(e){!function(e,t){if(t=+t,Number.isNaN(t))throw new Error("rate is error, only support 0.5 | 1 | 2 | 4");if(![.5,1,2,4].includes(t))throw new Error("rate is error, only support  0.5 | 1 | 2 | 4");e._oStreamClient.setPlayRate(t);var r=e.playbackRate;if(r>t)for(var i=t;i<r;)i*=2,e.wasmplayer.JSPlayM4_Slow();else if(r<t)for(var n=r;n<t;)n*=2,e.wasmplayer.JSPlayM4_Fast();4==+t&&e.wasmplayer.JSPlayM4_SetDecodeThreadNum(4),e.event.emit(dd.API.rateChange,cd(t)),e.playbackRate=t}(this,e)},t.seek=function(e,t){return function(e,t,r){return e.wasmplayer.JSPlayM4_ResetBuffer(1),e.event.emit(dd.API.seek,cd({startTime:t,endTime:r})),e._oStreamClient.seek(t,r).then((function(t){e._waterMarkParams&&e.setWaterMark(e._waterMarkParams)})),Promise.resolve()}(this,e,t)},t._setOptions=function(e){!function(e,t){if(e.pluginManager||(e.pluginManager=new xd(e)),(null==t?void 0:t.staticPath)?/^http[s]?:\/\//.test(t.staticPath)||(t.staticPath=location.origin+t.staticPath):t.staticPath=location.origin,e._options=Zu({},id,e._options,t),!e._options.id)throw new Error("id is required");var r=O_();if("string"!=typeof e._options.id)throw new Error("id is required and only support string");e.$container=document.getElementById(e._options.id),e._options.fullScreenEle||(e._options.fullScreenEle=e.$container);var i=r?window.screen.width:e._options.width,n=r?window.screen.height:e._options.height;if(e.$container.style.cssText+="display:inline-block;width:"+i+"px;height:"+n+"px;background:#000000;background-size:100% 100%;vertical-align:top;position: relative;",e._oStreamClient||(e._oStreamClient=new C_(e)),e.logger||(e.logger=p(e._options.logger)),e.i18n||(e.i18n=new kx({en:ed,zh:td})),e.fECCorrect||(e.fECCorrect=new M_(e)),e._options.accessToken&&rd(e._options.url)){var a,o,s,x=null==(a=e.urlInfo)?void 0:a.deviceSerial;if(e.urlInfo=bf(e._options.url),!e.urlInfo.deviceSerial||!e._options.accessToken)throw new Error("deviceSerial is required!");e.service=new Qu({deviceSerial:e.urlInfo.deviceSerial,accessToken:e._options.accessToken,domain:null==(s=e._options)||null==(o=s.env)?void 0:o.domain,extraParams:e._options.extraParams}),x!==e.urlInfo.deviceSerial&&(function(e){e.service.getDeviceCapacity().then((function(t){200==+t.code?(e.deviceCapacity=t.data,e.event.emit(dd.NETWORK.deviceCapacity,cd(t.data))):e.logger.error("getDeviceCapacity error: ",t)})).catch((function(t){e.event.emit(dd.NETWORK.error.error,cd(t)),e.event.emit(dd.NETWORK.error.deviceCapacity,cd(t)),e.logger.error("getDeviceCapacity error: ",t)}))}(e),function(e){e.event.emit(dd.NETWORK.deviceInfo,cd({})),e.service.getDeviceInfo().then((function(t){200==+t.code?(e.deviceInfo=t.data,e.event.emit(dd.NETWORK.deviceInfo,cd(t.data))):e.logger.error("deviceInfo error: ",t)})).catch((function(t){e.event.emit(dd.NETWORK.error.error,cd(t)),e.event.emit(dd.NETWORK.error.deviceInfo,cd(t)),e.logger.error("deviceInfo error: ",t)}))}(e)),e.event&&x&&(e.logger.log("play url change "+e._options.url),e.event.emit(dd.urlChange,cd(e._options.url)))}}(this,e)},t.enable3DZoom=function(e){return function(e,t){if(!e.playing)return-1;var r=e.wasmplayer,i=r.JSPlayM4_GetFrameInfo();return new Promise((function(t,n){t({code:0,data:r.JSPlayM4_SetDisplayRegion(e._playerWindow.canvasId,0,i.width,0,i.height,!1,!0)})})),If("."+e._options.id+"draw-window").unbind(),e.__fCallback=t,e.esCanvas=new rh(e._options.id+"canvas_draw0"),e.esCanvas.setShapeType("Rect"),e.esCanvas.setDrawStyle("#ff0000","",0),e.esCanvas.setDrawStatus(!0,(function(e){"function"==typeof t&&t(e)})),e.__b3DZoom=!0,0}(this,e)},t.disable3DZoom=function(){return(e=this).playing?(e.esCanvas.setDrawStatus(!1),e.__fCallback=null,e.__b3DZoom=!1,0):-1;var e},t.getOSDTime=function(){var e=this.getFrameInfo();return new Date(e.year+"/"+e.month+"/"+e.day+" "+e.hour+":"+e.minute+":"+e.second).getTime()/1e3},t.getFrameInfo=function(){var e,t,r,i=this.wasmplayer.JSPlayM4_GetFrameInfo(),n=5===(null==i?void 0:i.codecType)?"H265":1===(null==i?void 0:i.codecType)||256===(null==i?void 0:i.codecType)?"H264":null==i?void 0:i.codecType;return i.codecType=n,i.codecType&&((null==(e=this.__videoInfo)?void 0:e.width)===(null==i?void 0:i.width)&&(null==(t=this.__videoInfo)?void 0:t.height)===(null==i?void 0:i.height)&&(null==(r=this.__videoInfo)?void 0:r.codecType)===(null==i?void 0:i.codecType)||(this.event.emit("videoInfo",cd(i)),this.__videoInfo=_p({},i),this.logger.log("[videoInfo] ",i))),i},t.setDisplayRegion=function(e,t,r,i,n,a){void 0===n&&(n=!0),void 0===a&&(a=!1);var o=function(e,t,r,i,n,a,o){void 0===a&&(a=!0),void 0===o&&(o=!1);var s=e.wasmplayer,x=e.getFrameInfo(),l=e._playerWindow.canvasId,c=document.getElementById(l);if(c){var f=function(e){return{width:(null==e?void 0:e.style.width)?+(null==e?void 0:e.style.width.replace("px","")):e.width||e.offsetWidth,height:(null==e?void 0:e.style.height)?+(null==e?void 0:e.style.height.replace("px","")):e.height||e.offsetHeight}}(c),h=f.width,u=f.height;return o&&(u=f.width,h=f.height),e.event.emit("setDisplayRegion",cd({left:t,right:r,top:i,bottom:n,flag:a,isFullscreen:o})),s.JSPlayM4_SetDisplayRegion(l,h*t/x.width,h*r/x.width,u*i/x.height,u*n/x.height,!a,!1)}}(this,e,t,r,i,n,a);return 1===o},t.setSecretKey=function(e){if(null!=e&&""!==e){this._secretKey=e;var t=this.wasmplayer.JSPlayM4_SetSecretKey(e);return 1==+t?this.logger.log("set secretKey success, ",e):this.logger.error("set secretKey fail, ",e),t}},t.getOptions=function(){return this._options},t.setLogger=function(e){this._setOptions(_p({},this._options,{logger:Object.assign({},this._options.logger,e)}))},t.getVersion=function(){var e=this.wasmplayer.JSPlayM4_GetSDKVersion();return{version:"0.1.0-beta.1",decoder:this._wasmDecoderInfo.bSupHardOrSoft?"V3":"V1",decoderVersion:e.toString(16)}},t.setWaterMark=function(e){return this._waterMarkParams=e,function(e,t){var r=e.wasmplayer;return t=Object.assign({},dp,t),new Promise((function(e,i){var n;1===(n=t&&t.fontString?r.JSPlayM4_SetWaterMarkFont({pFontString:t.fontString,pstStartPos:t.startPos,pstFontColor:t.fontColor,pstFontSize:t.fontSize,pstFontRotate:t.fontRotate,pstFontNumber:t.fontNumber,pFontFamily:t.fontFamily,pSpace:t.space}):r.JSPlayM4_SetWaterMarkFont(null))?e({code:0,msg:"水印设置成功"}):i({code:-1,msg:n})}))}(this,e)},t.setMirrorFlip=function(e){return function(e,t){var r;return e.service.setMirrorFlip({command:t,channelNo:null==(r=e.urlInfo)?void 0:r.channelNo})}(this,e)},e}();function mp(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}pp.EVENT_TYPE=dd,mp(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-message{align-items:center;bottom:0;display:none;flex-direction:column;font-size:14px;justify-content:center;left:0;position:absolute;right:0;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:20}.ezui-message-show{display:flex}.ezui-message-hide{display:none}");var gp={errorWrapClassName:of+"-message-container"},yp=function(){function e(e,t){var r;this._prefixCls=of+"-message";var i,n=document.getElementById(e);this._options=Object.assign(gp,null!=t?t:{}),this.$messageContainer=document.createElement("div"),sf(this.$messageContainer,this._prefixCls,null!=(i=null==(r=this._options)?void 0:r.errorWrapClassName)?i:gp.errorWrapClassName),n&&n.appendChild(this.$messageContainer)}var t=e.prototype;return t.show=function(e,t){var r=this;void 0===t&&(t=0),this.$messageContainer.innerHTML=e,this._show(),0!==t&&"number"==typeof t&&(this._timer=window.setTimeout((function(){r.hide(),r._timer=null}),t))},t.showError=function(e,t){void 0===t&&(t=0),e='<div style="color: red">'+e+"</div>",this.show(e,t)},t.hide=function(e){void 0===e&&(e=!1),e&&this.$messageContainer&&(this.$messageContainer.innerHTML=""),this._hide()},t.clear=function(){this.hide(!0)},t._show=function(){xf(this.$messageContainer,this._prefixCls+"-hide"),sf(this.$messageContainer,this._prefixCls+"-show"),this._timer&&(window.clearTimeout(this._timer),this._timer=null)},t._hide=function(){xf(this.$messageContainer,this._prefixCls+"-show"),sf(this.$messageContainer,this._prefixCls+"-hide"),this._timer&&(window.clearTimeout(this._timer),this._timer=null)},t.destroy=function(){var e;this._timer&&clearTimeout(this._timer),this.clear(),(null==(e=this.$messageContainer)?void 0:e.parentElement)&&this.$messageContainer.parentElement.removeChild(this.$messageContainer),this.$messageContainer=null},e}(),bp={stream:{1001:"vtm地址或端口非法",1002:"vtm生成文件描述符失败",1003:"vtm设置文件描述符非阻塞失败",1004:"vtm设置文件描述符阻塞失败",1005:"vtm解析服务器ip失败",1006:"vtm描述符select失败",1007:"vtm文件描述符不在可读中",1008:"vtm网络发生错误getsockopt",1009:"vtm描述符select超时",1101:"proxy地址或端口非法",1102:"proxy生成文件描述符失败",1103:"proxy设置文件描述符非阻塞失败",1104:"proxy设置文件描述符阻塞失败",1105:"proxy解析服务器ip失败",1106:"proxy描述符select失败",1107:"proxy文件描述符不在可读中",1108:"proxy网络发生错误getsockopt",1109:"proxy描述符select超时",1201:"vtdu地址或端口非法",1202:"vtdu生成文件描述符失败",1203:"vtdu设置文件描述符非阻塞失败",1204:"vtdu设置文件描述符阻塞失败",1205:"vtdu解析服务器ip失败",1206:"vtdu描述符select失败",1207:"vtdu文件描述符不在可读中",1208:"vtdu网络发生错误getsockopt",1209:"vtdu描述符select超时",5e3:"cas回复信令，发现内存已经释放（和设备之间异常断开）",5400:"私有化协议vtm检测私有化协议中码流类型小于0或者设备序列号为空等非法参数场景返回(app不重试取流)",5402:"回放找不到录像文件",5403:"操作码或信令密钥与设备不匹配",5404:"设备不在线",5405:"流媒体向设备发送或接受信令超时/cas响应超时",5406:"token失效",5407:"客户端的URL格式错误",5409:"预览开启隐私保护",5410:"设备达到最大连接数",5411:"token无权限",5412:"session不存在",5413:"验证token异常",5415:"设备通道错",5416:"设备资源受限",5451:"设备不支持的码流类型",5452:"设备链接流媒体服务器失败",5454:"流媒体中关于设备取流会话不存在",5455:"设备通道未关联",5456:"设备通道关联设备不在线",5457:"客户端不支持端到端加密",5458:"设备不支持当前并发ECDH密",5459:"VTDU 处理ECDH 加密失败",5460:"流媒体中关于设备取流会话不存在",5492:"设备不支持的命令",5500:"服务器处理失败",5501:"流媒体vtdu达到最大负载，请扩容",5503:"vtm返回分配vtdu失败",5504:"流媒体vtdu达到最大负载",5505:"vtm ecdh解密失败",5506:"vtm 返回IPC不支持取流",5530:"机房故障不可用",5544:"设备返回无视频源",5545:"视频分享时间已经结束",5546:"vtdu返回达到取流并发路数限制",5547:"vtdu返回开放平台用户并发限制",5556:"ticket校验失败",5557:"回放服务器等待流头超时",5558:"查找录像开始时间错误",5560:"群组分享取流二次验证失败",5561:"分享群组用户被锁住",5562:"群组分享用户权限变更",5563:"认证服务连接失败",5564:"认证超时",5566:"不在分享时间内预览",5567:"分享通道被锁定",5568:"未找到认证类型",5569:"认证返回的参数异常",5600:"分享设备不在分享时间内",5601:"群组分享用户没权限",5602:"群组分享权限变更",5610:"接收流头失败",5620:"心跳超时",5701:"cas信令返回格式错误",5702:"SPGW请求Cas、Status透传超时",5703:"SPGW请求http不通",6001:"客户端参数出错",6099:"客户端默认错误",6101:"不支持的命令",6102:"设备流头发送失败",6103:"cas/设备返回错误1",6104:"cas/设备返回错误-1",6105:"设备返回错误码3",6106:"设备返回错误码4",6107:"设备返回错误码5",6108:"cas信令回应重复",6109:"视频广场取消分享",6110:"设备信令默认错误",6501:"设备数据链路和实际链路不匹配",6502:"设备数据链路重复建立连接",6503:"设备数据链路端口不匹配",6504:"缓存设备数据链路失败(内存块不足)",6505:"设备发送确认头消息重复",6506:"设备数据先于确定头部到达",6508:"设备数据头部长度非法",6509:"索引找不到设备数据管理块",6510:"设备数据链路vtdu内存块协议状态不匹配",6511:"设备数据头部没有streamkey错误",6512:"设备数据头部非法",6513:"设备数据长度过小",6514:"设备老协议推流头部没有streamkey错误",6515:"设备老协议推流数据非法",6516:"设备老协议索引找不到内存管理块",6517:"设备老协议推流数据非法",6518:"设备数据包过大",6519:"设备推流链路网络不稳定",6520:"设备推流链路网络不稳定",6700:"异常数据",6701:"回放结束",7001:"与相应服务连接失败",7002:"与相应服务连接失败",7003:"与相应服务连接失败",7004:"与相应服务连接失败",7005:"VTDU连接失败，或VTDU侧断开连接",7006:"vtm断开连接",7007:"客户端发送缓冲区满（上行带宽太小）",9e3:"无效包，包过大",9001:"地址不合法",9002:"缺少端口",9048:"免费版并发数达到上限，请升级企业版使用多并发能力","0001":"通用错误返回","0002":"入参为空指针","0003":"入参值无效","0004":"信令消息解析非法","0005":"内存资源不足","0006":"协议格式不对或者消息体长度超过STREAM_MAX_MSGBODY_LEN","0007":"设备序列号长度不合法","0008":"取流url长度不合法","0009":"解析vtm返回vtdu地址不合法","0010":"解析vtm返回级联vtdu地址不合法","0011":"解析vtm返回会话标识长度不合法","0012":"vtdu返回流头长度不合法","0013":"vtdu会话长度非法","0014":"回调函数未注册","0015":"vtdu成功响应未携带会话标识","0016":"vtdu成功响应未携带流头","0017":"无数据流，尚未使用","0018":"信令消息体PB解析失败","0019":"信令消息体PB封装失败","0020":"申请系统内存资源失败","0021":"vtdu地址尚未获取到","0022":"客户端尚未支持","0023":"获取系统socket资源失败","0024":"上层填充的StreamSsnId不匹配","0025":"链接服务器失败","0026":"客户端请求未收到服务端应答","0027":"链路断开","0028":"没有取流链接","0029":"流成功停止","0030":"客户端防串流校验失败","0031":"应用层tcp粘包处理缓冲区满","0032":"无效状态迁移","0033":"无效客户端状态","0034":"向vtm取流流媒体信息请求超时","0035":"向代理取流请求超时","0036":"向代理保活取流请求超时","0037":"向vtdu取流请求超时","0038":"向vtdu保活取流请求超时"},server:{ptz:{start:{200:"",10001:"操作失败",10002:"账号异常，操作失败",10005:"账号异常，操作失败",20002:"设备不存在，请检查设备连接情况",20006:"操作失败，请检查设备网络情况",20007:"操作失败，请检查设备在线情况",20008:"操作过于频繁，稍后再试",20014:"操作失败",20032:"通道不存在请检查设备连接情况",49999:"操作失败，请重试",6e4:"操作失败，设备不支持该操作",60001:"操作失败，用户无权限",60002:"设备已旋转到上限位",60003:"设备已旋转到下限位",60004:"设备已旋转到左限位",60005:"设备已旋转到右限位",60006:"操作失败，请重试",60009:"设备正在操作中",60020:"操作失败"},stop:{200:"",10001:"操作失败",10002:"账号异常，操作失败",10005:"账号异常，操作失败",20002:"设备不存在，请检查设备连接情况",20006:"操作失败，请检查设备网络情况",20007:"操作失败，请检查设备在线情况",20008:"操作过于频繁，稍后再试",20014:"操作失败",20032:"通道不存在请检查设备连接情况",49999:"操作失败，请重试",6e4:"操作失败，设备不支持该操作",60001:"操作失败，用户无权限",60006:"操作失败，请重试",60009:"设备正在操作中",60020:"操作失败"}},talk:{200:"",10001:"播放失败",10002:"账号异常，操作失败",10031:"账号异常，操作失败",20002:"设备不存在请检查设备连接情况",60059:"播放失败"},time:{200:"",10001:"播放失败",10002:"账号异常，播放失败",10004:"账号异常，播放失败",10005:"账号异常，播放失败",10011:"播放失败",10013:"账号异常，播放失败",10030:"播放失败",20002:"设备不存在请检查设备连接情况",20014:"播放失败",20032:"设备不存在请检查设备连接情况",49999:"播放失败请重试",60024:"播放失败请重试"}},client:{default:{BTN_RETRY:"重试",BTN_RELOAD:"重新加载",LOADING:"加载中，请稍后",TIMEFORMAT_ERROR:"时间格式有误，请确认"},init:{USE_MULTITHREADING_WARING:"您当前浏览器可以开启谷歌实验室多线程特性，获取更好播放体验，避免浏览器卡顿及崩溃,详见",OPEN_INSTRUCTIONS:"开启说明",INIT_FINSHED:"初始化播放器完成",INIT_SUCCESS:"初始化播放器成功"},play:{GET_PLAYURL_FAILED:"获取播放地址失败",VIDEO_LOADING:"视频加载中",DISCONNECT:"连接断开，请重试",DEVICE_ENCRYPTED:"设备已加密",NO_RECORD:"未找到录像片段",PLAY_FAILED:"播放失败，请检查设备及客户端网络",PLAY_SUCCESS:"播放成功",STOP_SUCCESS:"停止成功",CHANGE_PLAYURL_SUCCESS:"切换播放地址成功",CHANGE_PLAYURL_FAILED:"切换播放地址失败",GET_OSD_TIME:"获取OSD时间",GET_OSD_TIME_FAILED:"获取OSD时间失败",SET_POSTER:"设置播放器封面",RESIZE:"调整播放器尺寸",SPEED:"倍速播放",GET_SPEED:"获取当前播放速率",MAX_SPEED_LIMIT:"播放速度最大为4倍速度",MIN_SPEED_LIMIT:"播放速度最小为1倍速度",SEEK_CANNOT_CROSS_DAYS:"seek时间不能跨日期",SEEK_TIMEFORMAT_ERROR:"seek时间格式错误",PAUSE:"暂停",PAUSE_FAILED:"暂停失败",RESUME:"恢复播放",RESUME_FAILED:"恢复播放失败"},call:{CALL_END:"通话已结束",USER_DO_NOT_OWN_DEVICE:"loadingSetTextWithBtn"},cloudRecord:{NO_CLOUD_RECORD:"该设备在当天没有云录制的录像"},videoLevel:{CHANGE_VIDEO_LEVEL:"切换清晰度",GET_VIDEO_LEVEL_LIST:"获取设备支持的清晰度列表",PLEASE_INPUT_RIGHT_VIDEO_LEVEL:"请输入正确的清度"},theme:{RESET_THEME:"重置主题",BTN_PLAY:"播放/结束播放",BTN_SOUND:"声音",BTN_RECORDVIDEO:"录屏",BTN_CAPTURE:"截图",BTN_TALK:"对讲",BTN_ZOOM:"电子放大",BTN_3D_ZOOM:"3D定位",BTN_PTZ:"云台控制",BTN_EXPEND:"全局全屏",BTN_WEBEXPEND:"网页全屏",BTN_HD:"画面清晰度",BTN_SPEED:"回放倍速",BTN_CLOUDREC:"云存储回放",BTN_CLOUDRECORD:"云录制",BTN_REC:"本地存储",DEVICE_NAME:"设备名称",DEVICE_ID:"设备序列号"},capture:{CAPTURE_SUCCESS:"截图成功",CAPTURE_FAILED:"截图失败"},record:{START_RECORD_SUCCESS:"开始录制成功",START_RECORD_FAILED:"开始录制失败",STOP_RECORD_SUCCESS:"停止录制成功",STOP_RECORD_FAILED:"停止录制失败"},sound:{OPEN_SOUND:"开启声音",CLOSE_SOUND:"关闭声音"},zoom:{ZOOM:"电子放大",START_ZOOM:"开启电子放大",CLOSE_ZOOM:"关闭电子放大","3D_ZOOM":"3D定位","3D_ZOOM_DISABLE":"未启用3D定位功能","3D_ZOOM_FAILED":"3D定位失败，请重试",START_3D_ZOOM:"开启3D定位",CLOSE_3D_ZOOM:"关闭3D定位",DEVICE_NOT_SUPPORT_3D_ZOOM:"当前设备不支持3D定位功能","3D_ZOOM_ACTIVED":"3D定位已处于开启状态","3D_ZOOM_NOT_ACTIVED":"未启用3D定位功能","3D_ZOOM_CLOSED":"3D定位已处于关闭状态",CHANGE_ZOOM_TYPE:"改变缩放模式"},fullscreen:{FULLSCREEN:"全局全屏",FULLSCREEN_EXIT:"退出全局全屏",GET_WEB_FULLSCREEN_STATUS:"获取浏览器网页全屏状态",WEB_FULLSCREEN:"开启网页全屏",WEB_FULLSCREEN_EXIT:"退出网页全屏"},destroy:{DESTROY:"销毁"},capacity:{GET_CAPACITY:"获取设备能力级",GET_CAPACITY_FAILED:"获取设备能力级失败"},ptz:{GET_PTZ_STATUS:"获取当前云台状态",GET_PTZ_STATUS_FAILED:"未加载Theme模块，无法获取云台状态",MOBILE_HIDE_PTZ:"移动端，非全屏状态不展示云台",OPTION_PTZ_FAILED:"未加载Theme模块，无法操作云台"},mirror:{MIRROR:"镜像翻转",MIRROR_TYPE_ERROR:"翻转参数类型错误"},FEC:{CHANGE_FEC_TYPE:"切换鱼眼矫正类型",DEVICE_NOT_SUPPORT:"设备不支持鱼眼模式",TYPE_NOT_SUPPORT:"鱼眼矫正类型暂时不支持",FEC_SUPPORT_VERSION:"当前只有V3软解支持鱼眼矫正",NO_CANVAS_ID:"鱼眼矫正类型需要分屏，但是没有传正确的分屏的canvas id",SET_FEC_PARAMS:"设置3D矫正视角参数",GET_FEC_PARAMS:"获取3D矫正视角参数",SET_FEC_PARAMS_FAILED:"该矫正类型不能设置3D矫正视角参数",GET_FEC_PARAMS_FAILED:"该矫正类型不能获取3D矫正视角参数",GET_FEC_PARAMS_SUPPORT_VERSION:"当前只有V3软解支持鱼眼矫正获取3D矫正视角参数"},watermark:{SET_WATERMARK:"设置水印"}}};mp(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-loading{align-items:center;background-color:rgba(0,0,0,.2);bottom:0;color:#fff;display:flex;flex-direction:column;justify-content:center;left:0;position:absolute;right:0;top:0;-webkit-user-select:none;-moz-user-select:none;user-select:none;z-index:50}.ezui-loading-icon{font-size:24px}.ezui-loading-icon .ezui-icon-loading{animation:antRotate 1s linear infinite}.ezui-loading-loading-text{color:var(--ezui-color,#fff);font-size:var(--ezui-font-size,14px);margin-top:3px}@keyframes antRotate{to{transform:rotate(1turn);transform-origin:50% 50%}}");var vp=function(){function e(e,t){if(this._prefixCls=of+"-loading",this._loading=!1,this._$container=document.getElementById(e),this._options=Object.assign({},null!=t?t:{}),this.$loadingContainer=document.createElement("div"),this._$container){var r,i;if("string"==typeof this._options.customLoadingHtml)return this.$loadingContainer.innerHTML=this._options.customLoadingHtml,this.$loadingContainer=this.$loadingContainer.childNodes[0],void sf(this.$loadingContainer,null!=(r=this._options.loadingClass)?r:"");sf(this.$loadingContainer,this._prefixCls,null!=(i=this._options.loadingClass)?i:""),this.$loadingContainer.innerHTML=this._renderHtml(),this._loading=!1}}var t,r=e.prototype;return r.show=function(e){var t;this.$loadingContainer.innerHTML=this._renderHtml(null!=(t=null!=e?e:this._options.loadingText)?t:""),this._$container&&(this._$container.appendChild(this.$loadingContainer),this._loading=!0)},r.hide=function(){this._$container&&this.$loadingContainer&&this._loading&&(this._$container.removeChild(this.$loadingContainer),this._loading=!1)},r.destroy=function(){this.hide(),this.$loadingContainer=null,this._loading=!1},r._renderHtml=function(e){var t,r=null!=(t=null!=e?e:this._options.loadingText)?t:"Loading ...";return'<div class="'+this._prefixCls+'-icon">'+function(e){var t="loading";return cf({name:t,svg:null!=e?e:'<svg\n        viewBox="0 0 1024 1024"\n        focusable="false"\n        data-icon="'.concat(t,'"\n        width="1em"\n        height="1em"\n        fill="currentColor"\n        aria-hidden="true"\n      >\n      <g>\n      <path d="m538.5344,266.4448a133.12,133.12 0 1 1 133.12,-133.12a133.4272,133.4272 0 0 1 -133.12,133.12zm-283.52,105.7536a121.6768,121.6768 0 1 1 121.6768,-121.6768a121.856,121.856 0 0 1 -121.6768,121.6768zm-120.2944,275.2256a107.3664,107.3664 0 1 1 107.3664,-107.264a107.52,107.52 0 0 1 -107.3664,107.264zm120.32,272.4608a90.9824,90.9824 0 1 1 90.9824,-90.9824a91.1616,91.1616 0 0 1 -90.9824,90.9824zm283.4944,104.1152a79.36,79.36 0 1 1 79.36,-79.36a79.36,79.36 0 0 1 -79.36,79.36zm287.6928,-134.144a64.1792,64.1792 0 1 1 64.1792,-64.1792a64.3584,64.3584 0 0 1 -64.1792,64.1792zm117.76,-296.704a52.6336,52.6336 0 1 1 52.6592,-52.6336a52.608,52.608 0 0 1 -52.6336,52.6336l-0.0256,0zm-158.72,-338.7136a40.96,40.96 0 1 1 12.0064,28.8512a40.5248,40.5248 0 0 1 -12.0064,-28.8512z"/>\n     </g>\n      </svg>')})}().outerHTML+"</div>\n            "+(null===this._options.loadingText?"":'<div class="class="'+this._prefixCls+'-loading-text"">'+r+"</div>")},(t=[{key:"loading",get:function(){return this._loading}}])&&function(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(e.prototype,t),e}(),Pp={poster:"https://resource.eziot.com/group1/M00/00/89/CtwQEmLl8r-AZU7wAAETKlvgerU237.png",loadingText:"加载中，请稍后",initText:"初始化播放器完成"};function Sp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Rp(){return Rp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Rp.apply(this,arguments)}var Cp=function(){function e(e){if(this.player=new pp(Rp({},e)),this._options=rf({},this.player.getOptions(),Pp,e),this.urlInfo=bf(this._options.url),this.i18n=this.player.i18n,this.event=this.player.event,this.service=this.player.service,this.i18n.switchTranslation("zh"),this.i18n.appendTranslations({zh:bp}),this.logger=p({level:"INFO",showTime:!0,name:"SIMPLE"}),this.message=new yp(e.id,{customErrorHtml:e.customErrorDom}),this.loading=new vp(e.id,Pf(this._options,["loadingText","customLoadingDom"])),this.loading.show(this._options.initText),"string"==typeof e.id&&(this.$container=document.getElementById(e.id)),!this.$container)throw new Error(e.id+" node does not exist");if("CANVAS"===this.$container.nodeName||"VIDEO"===this.$container.nodeName)throw new Error(e.id+" node is "+this.$container.nodeName);this._options.poster&&this.setPoster(this._options.poster),this._registerEvents_()}var t=e.prototype;return t.play=function(e){return(null==e?void 0:e.url)&&(this.urlInfo=bf(null==e?void 0:e.url)),e&&(this._options=Object.assign(this._options,e||{})),this.loading.show(),this.message.hide(),this.player.play(e)},t.pause=function(e){return this.player.pause(e)},t.resume=function(e){return this.player.resume(e)},t.stop=function(){return this.player.stop()},t.destroy=function(){return this.message.destroy(),this.loading.destroy(),this.player.destroy()},t.snapshot=function(e,t,r,i){return void 0===t&&(t="jpeg"),this.player.snapshot(e,t,r,i)},t.resize=function(e,t){return this.player.resize(e,t)},t.fullScreen=function(e,t){return this.player.fullScreen(null!=e?e:window.screen.width,null!=t?t:window.screen.height)},t.exitScreen=function(){return this.player.exitScreen()},t.setVolume=function(e){if(!(e<0||e>1))return this.player.setVolume(e);this.logger.error("The range of volume values is [0, 1], "+e+" value set error, ")},t.getFrameInfo=function(){return this.player.getFrameInfo()},t.setDisplayRegion=function(e,t,r,i,n,a){return void 0===n&&(n=!0),void 0===a&&(a=!1),this.player.setDisplayRegion(e,t,r,i,n,a)},t.getOSDTime=function(){return this.player.getOSDTime()},t.use=function(e){this.player.use(e)},t.setFECCorrectType=function(e,t){return this.player.setFECCorrectType(e,t)},t.setFEC2DParam=function(e,t){return this.player.setFEC2DParam(e,t)},t.setFEC3DViewParam=function(e){return this.player.setFEC3DViewParam(e)},t.get3DViewParam=function(e){return this.player.get3DViewParam(e)},t.setPoster=function(e){if(this.$container){var t=document.getElementById(this._options.id+"-player");this._options.poster=e,t.style.backgroundImage="url("+e+")",t.style.backgroundSize="cover",this.$container.style.backgroundSize="cover"}},t.setPlaybackRate=function(e){return this.player.setPlaybackRate(e)},t.seek=function(e,t){return this.message.hide(),this.player.seek(e,t)},t.getOptions=function(){return this._options},t.getVersion=function(){return"0.1.1-beta.1"},t.setWaterMarkFont=function(e){return this.player.setWaterMark(e)},t.setMirrorFlip=function(e){return this.player.setMirrorFlip(e)},t._registerEvents_=function(){var e=this,t=!1,r=!1;this.event&&this.loading&&(this.event.on("initializing",(function(t){t.data&&(e.loading.hide(),e._options.autoPlay&&e.loading.show())})),this.event.on("play",(function(){t=!1})),this.event.on("seek",(function(){t=!1})),this.event.on("network.videoFragmentFiles",(function(t){var r,i,n=t.data||[],a=Ox((null==(r=e.urlInfo.searchParams)?void 0:r.begin)||Ox().format("YYYY-MM-DD 00:00:00")),o=Ox((null==(i=e.urlInfo.searchParams)?void 0:i.end)||Ox(a).format("YYYY-MM-DD 23:59:59"));n.find((function(e){return Ox(e.endTime)>a&&Ox(e.startTime)<o}))||(e.message.showError("RecordCloud"===(null==t?void 0:t.source)?e.i18n.t("client.cloudRecord.NO_CLOUD_RECORD"):e.i18n.t("client.play.NO_RECORD")),e.loading.loading&&e.loading.hide())})),this.event.on("EVENT_CALLBACK",(function(i){"appearFirstFrameCallback"===i.data.type&&(e.loading.hide(),e.message.hide(),t=!1,r=!1,e.logger.log("[appearFirstFrameCallback]",i))}))),this.event.on("network.error",(function(t){var r,i,n,a;e.loading.loading&&e.loading.hide();var o=(null==t||null==(r=t.data)?void 0:r.msg)||(null==t||null==(i=t.data)?void 0:i.errorMsg),s=(null==t||null==(n=t.data)?void 0:n.code)||(null==t||null==(a=t.data)?void 0:a.errorCode),x=e.i18n.t("stream."+s);x==='[missing "'+e.i18n.getCurrentLocale()+".stream."+s+'" translation]'&&(x=""),(x||o)&&e.message.showError(x||o,3e3)})),this.event.on("EVENT_CALLBACK",(function(i){var n,a;if("setRunTimeInfoCallBack"===i.data.type)5!==(null==i||null==(a=i.data)||null==(n=a.data)?void 0:n.nErrorCode)||t||(e.loading.loading&&e.loading.hide(),e.message.showError("设备已加密"),e.logger.error("[setRunTimeInfoCallBack]",i),e.event.emit("deviceEncrypted",i.data),t=!0);else if("pluginErrorHandler"===i.data.type){var o,s=e.i18n.t("client.play.DISCONNECT");if(r)return;if(1003===i.data.code)e.player.playing&&e.message.showError(s);else if(1001===i.data.code);else if(5402===i.data.code);else if((null==i?void 0:i.data)&&1!==(null==i||null==(o=i.data)?void 0:o.code)){var x,l,c,f;e.loading.loading&&e.loading.hide();var h=(null==i?void 0:i.msg)||(null==i?void 0:i.errorMsg)||(null==i||null==(x=i.data)?void 0:x.msg)||(null==i||null==(l=i.data)?void 0:l.errorMsg),u=(null==i||null==(c=i.data)?void 0:c.code)||(null==i||null==(f=i.data)?void 0:f.errorCode),d=e.i18n.t("stream."+u);d==='[missing "'+e.i18n.getCurrentLocale()+".stream."+u+'" translation]'&&(d=""),e.message.showError(d||h||s),6701===i.data.code&&e.logger.log("回放结束")}else e.message.hide()}})),this.event.on("StreamClient.autoClose",(function(){r=!0,e.player.playing=!1}))},e.install=function(t,r){e.plugins.get(t),e.plugins.set(t,r)},e.installs=function(t){for(var r,i=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return Sp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sp(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(t);!(r=i()).done;){var n=r.value;e.install(n.name,n.plugin)}},e}();Cp.plugins=new Map,function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-header{background-color:var(--ezui-header-background-color,#000);box-sizing:border-box;color:var(--ezui-header-color,#fff);display:flex;flex-direction:row;height:var(--ezui-header-height,48px);justify-content:space-between;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezui-header-left{display:inline-flex;flex:1 1 auto;overflow:hidden;padding-right:20px}.ezui-header-right{font-size:22px;padding-right:12px}.ezui-header-right,.ezui-header-right .ezui-icon{box-sizing:border-box;display:inline-flex;flex-wrap:nowrap}.ezui-header-right .ezui-icon{align-items:center;cursor:pointer;justify-content:center;padding-left:9px;padding-right:9px}");var Ep="".concat(of,"-header"),Tp="".concat(Ep,"-left"),Fp="".concat(Ep,"-right");!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-footer{background-color:#000;bottom:0;box-sizing:border-box;color:var(--ezui-footer-color,#fff);display:flex;flex-direction:column;height:var(--ezui-footer-height,48px);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%}.ezui-footer-top{background-color:var(--ezui-footer-background-color,rgba(0,0,0,.5));bottom:var(--ezui-footer-height,48px);display:flex;flex-direction:row;justify-content:space-between;left:0;opacity:1;pointer-events:all;position:absolute;right:0;transition:opacity .3s ease;z-index:999}.ezui-footer-top-hidden{opacity:0;pointer-events:none}.ezui-footer-bottom .ezui-footer-item,.ezui-footer-left>.ezui-footer-item,.ezui-footer-left>span,.ezui-footer-right>.ezui-footer-item,.ezui-footer-right>span{align-items:center;cursor:pointer;display:inline-flex;font-size:var(--ezui-footer-icon-size,27px);justify-content:center;min-height:var(--ezui-footer-height,48px);width:var(--ezui-footer-height,48px)}.ezui-footer-left,.ezui-footer-right{box-sizing:border-box;display:flex;padding-left:12px;padding-right:12px}.ezui-footer-bottom{background-color:#000;color:#fff;display:flex;flex-direction:row;height:var(--ezui-footer-height,48px);justify-content:space-between}.ezui-footer-bottom .ezui-footer-bottom-item{align-items:center;cursor:pointer;display:inline-flex;font-size:20px;justify-content:center;min-height:var(--ezui-footer-height,48px);width:var(--ezui-footer-height,48px)}.ezui-footer-bottom-left{flex:1 1 auto}.ezui-footer-bottom-right{align-items:center;display:inline-flex;flex-direction:row;font-size:22px;justify-content:flex-end}.ezui-footer-bottom-right .ezui-icon{align-items:center;box-sizing:border-box;cursor:pointer;display:inline-flex;flex-wrap:nowrap;justify-content:center;padding-left:9px;padding-right:9px}.ezui-footer-mobile-extend{background-color:#fff;color:#000;display:flex;flex-direction:column}.ezui-footer-mobile-extend-type{display:flex;justify-content:space-between}.ezui-footer-mobile-extend-type .ezui-icon{color:#000}.ezui-theme-mobile .ezui-footer-top{bottom:0}");var Dp="".concat(of,"-footer"),Mp="".concat(Dp,"-top"),Ip="".concat(Dp,"-top-hidden"),wp="".concat(Dp,"-left"),Ap="".concat(Dp,"-right"),kp="".concat(Dp,"-bottom"),Lp="".concat(Dp,"-bottom-left"),Bp="".concat(Dp,"-bottom-right"),Op="".concat(Dp,"-mobile-extend"),Hp="".concat(Dp,"-mobile-extend-date"),Np="".concat(Dp,"-mobile-extend-type"),Vp="".concat(Dp,"-mobile-extend-timeline");
/*
  *
  * @ezuikit/theme-plugin-fullscreen v0.1.0
  * Copyright (c) 2024-3-23 Ezviz-OpenBiz
  * Released under MIT the License.
  *
  */
function Yp(){return!!(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen)}
/*
  *
  * @ezuikit/theme-plugin-webfullscreen v0.1.0
  * Copyright (c) 2024-3-23 Ezviz-OpenBiz
  * Released under MIT the License.
  *
  */
function Up(){return!!(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen)}!function(e,t){void 0===t&&(t={});t.insertAt}(),function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-device-info{box-sizing:border-box;display:inline-flex;flex-direction:row;flex-wrap:nowrap;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%}.ezui-device-info>span{display:inline-block;height:var(--ezui-header-height,48px);line-height:var(--ezui-header-height,48px);margin-left:1%;margin-right:1%;max-width:48%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}");var Xp="".concat(of,"-device-info"),Wp="".concat(Xp,"-id"),zp="".concat(Xp,"-name"),Gp="设备序列号";var Jp="设备序列号";!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}(':root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-zoom-tool{bottom:80px;display:none;left:12px;position:absolute;transform:scale(1);transform-origin:0 100%;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezui-zoom-tool-container{align-items:center;background:rgba(0,0,0,.6);border-radius:2px;display:inline-flex;flex-direction:column;height:160px;justify-content:space-between;width:36px}.ezui-zoom-tool-current{color:#fff;font-size:12px;margin:10px 0}.ezui-zoom-tool-btn-minus,.ezui-zoom-tool-btn-plus{color:#fff;cursor:pointer;font-size:20px;height:20px;margin-bottom:4px;width:20px}.ezui-zoom-tool-btn-minus{margin:4px 0 10px}.ezui-zoom-tool-progress{align-items:center;background:hsla(0,0%,100%,.75);border-radius:2px;display:flex;flex-direction:column;height:64px;justify-content:flex-end;position:relative;width:2px}.ezui-zoom-tool-progress-percent{background:#407aff;border-radius:2px;bottom:0;min-height:8px;position:relative;width:2px}.ezui-zoom-tool-progress-percent:before{background:#fff;border:1px solid #407aff;border-radius:100%;box-sizing:border-box;content:"";height:8px;left:-3px;position:absolute;top:0;width:8px}');var Zp={maxScale:8,left:0,bottom:0,scale:1,onClick:function(){}},jp="ezui-zoom-tool",qp=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;a(this,e),this._current=1,this.$container=t,this.options=Object.assign({},Zp,r),this.$zoomToolContainer=this.render(),this._theme=i,this.currentPosition={x:0,y:0,xPercent:.1,yPercent:.1,xCurrentVideo:0,yCurrentVideo:0,left:0,top:0,right:1920,bottom:1080},this._registerEvent()}return s(e,[{key:"_registerEvent",value:function(){var e=this;this._theme.event.on("EVENT_CALLBACK",(function(t){"appearFirstFrameCallback"===t.data.type&&e._resetZoom()}))}},{key:"current",get:function(){return this._current},set:function(e){if(!(e<=0||e>this.options.maxScale)){this._current=+e.toFixed();var t=this.$container.querySelector(".".concat(jp,"-current"));t&&(t.innerHTML="".concat(this._current.toFixed(),"X")),this._renderProgressPercent()}}},{key:"show",value:function(){this.$zoomToolContainer.style.display="inline-block"}},{key:"hide",value:function(){this.$zoomToolContainer.style.display="none",this._resetZoom()}},{key:"_renderProgressPercent",value:function(){var e=this.$container.querySelector(".".concat(jp,"-progress-percent"));if(e){var t=this._current/this.options.maxScale*100;t<0&&(t=0),t>100&&(t=100),e.style.height="".concat(t,"%")}}},{key:"render",value:function(){var e,t,r,i,n=this,a=document.createElement("div");return a.classList.add(jp),a.style.bottom=this.options.bottom+"px",a.style.left=this.options.left+"px",a.style.transform="scale("+this.options.scale+")",a.innerHTML='\n                <div class="'.concat(jp,'-container">\n                    <div class="').concat(jp,'-current">1.0X</div>\n                    <div class="').concat(jp,'-btn-plus"></div>\n                    <div class="').concat(jp,'-progress">\n                        <div class="').concat(jp,'-progress-percent"></div>\n                    </div>\n                    <div class="').concat(jp,'-btn-minus"></div>\n                </div>'),null===(e=a.querySelector(".".concat(jp,"-btn-plus")))||void 0===e||e.appendChild(function(e){var t="plus-circle";return cf({name:t,svg:null!=e?e:'<svg version="1.1" viewBox="0 0 20 20" focusable="false" data-icon="'.concat(t,'" width="1em" height="1em" fill="currentColor" aria-hidden="true">\n      <g>\n          <g>\n              <path d="m10,3.8c3.5,0 6.2,2.8 6.2,6.2s-2.8,6.2 -6.2,6.2s-6.2,-2.7 -6.2,-6.2s2.7,-6.2 6.2,-6.2zm0,1.2c-2.8,0 -5,2.2 -5,5s2.2,5 5,5s5,-2.2 5,-5s-2.2,-5 -5,-5z"/>\n          </g>\n          <g>\n              <path d="m12.5,10.6l-5,0c-0.3,0 -0.6,-0.3 -0.6,-0.6s0.3,-0.6 0.6,-0.6l5,0c0.3,0 0.6,0.3 0.6,0.6s-0.3,0.6 -0.6,0.6z"/>\n          </g>\n          <g>\n              <path d="m10,13.1c-0.3,0 -0.6,-0.3 -0.6,-0.6l0,-5c0,-0.3 0.3,-0.6 0.6,-0.6s0.6,0.3 0.6,0.6l0,5c0,0.3 -0.3,0.6 -0.6,0.6z"/>\n          </g>\n      </g>\n  </svg>')})}()),null===(t=a.querySelector(".".concat(jp,"-btn-plus")))||void 0===t||t.addEventListener("click",(function(e){n._current>=n.options.maxScale?n._current=n.options.maxScale:n.current=n._current+1,n.currentPosition.xPercent=.5,n.currentPosition.yPercent=.5,n.doScale(),"function"==typeof n.options.onClick&&n.options.onClick(n.current),e.stopPropagation(),e.preventDefault()})),null===(r=a.querySelector(".".concat(jp,"-btn-minus")))||void 0===r||r.appendChild(function(e){var t="minus-circle";return cf({name:t,svg:null!=e?e:'<svg\n        viewBox="0 0 20 20"\n        focusable="false"\n        data-icon="'.concat(t,'"\n        width="1em"\n        height="1em"\n        fill="currentColor"\n        aria-hidden="true"\n      >\n        <g>\n            <g>\n                <path d="m10,3.8c3.5,0 6.2,2.8 6.2,6.2s-2.8,6.2 -6.2,6.2s-6.2,-2.7 -6.2,-6.2s2.7,-6.2 6.2,-6.2zm0,1.2c-2.8,0 -5,2.2 -5,5s2.2,5 5,5s5,-2.2 5,-5s-2.2,-5 -5,-5z"/>\n            </g>\n            <g>\n                <path d="m12.5,10.6l-5,0c-0.3,0 -0.6,-0.3 -0.6,-0.6s0.3,-0.6 0.6,-0.6l5,0c0.3,0 0.6,0.3 0.6,0.6s-0.3,0.6 -0.6,0.6z"/>\n            </g>\n        </g>\n      </svg>')})}()),null===(i=a.querySelector(".".concat(jp,"-btn-minus")))||void 0===i||i.addEventListener("click",af((function(){n._current<=1?n._current=1:n.current=n._current-1,n.currentPosition.xPercent=.5,n.currentPosition.yPercent=.5,n.doScale(),"function"==typeof n.options.onClick&&n.options.onClick(n.current)}),200)),this.$container.appendChild(a),this._event(),a}},{key:"_event",value:function(){var e=this,t=setInterval((function(){var r=document.getElementById("".concat(e._theme.options.id,"-container-container-0"));clearInterval(t),e._theme.options.isMobile?r&&(r.addEventListener("touchstart",(function(t){return e.onTouchstart(t)})),r.addEventListener("touchend",(function(t){return e.onTouchend(t)}))):r&&(r.addEventListener("mousedown",(function(t){return e.onMouseDown(t)})),r.addEventListener("mouseup",(function(t){return e.onMouseUp(t)})))}),100)}},{key:"onMouseDown",value:function(e){1!==this.current&&(this._moveX=e.clientX,this._moveY=e.clientY)}},{key:"onMouseUp",value:function(e){var t=this.currentPosition;1!==this.current&&(t.left=t.left-(e.clientX-this._moveX),t.top=t.top-(e.clientY-this._moveY),this.doScale())}},{key:"onTouchstart",value:function(e){if(1!==this.current){if(!this.inited){var t=this._theme.getFrameInfo(0);this.videoWidth=t.width,this.videoHeight=t.height,this.currentPosition.left=0,this.currentPosition.top=0,this.isMobileFullScreen?(this.currentPosition.right=t.height,this.currentPosition.bottom=t.width):(this.currentPosition.right=t.width,this.currentPosition.bottom=t.height),this.inited=!0}var r=e.touches[0];if(r){var i={clientX:0,clientY:0};i.clientX=r.clientX,i.clientY=r.clientY,this._point1=i}}}},{key:"onTouchend",value:function(e){var t=this,r=this.currentPosition;if(1!==this.current){var i=e.changedTouches[0];this.isMobileFullScreen?(r.left=r.left-(i.clientY-t._point1.clientY),r.top=r.top+(i.clientX-t._point1.clientX)):(r.left=r.left-(i.clientX-t._point1.clientX),r.top=r.top-(i.clientY-t._point1.clientY)),t.doScale()}}},{key:"doScale",value:function(){var e=this.currentPosition,t=this.current;e.left=e.left+e.xPercent*(e.right-e.left)-this.videoWidth/t*.5,e.left<=0?e.left=0:e.left>this.videoWidth-this.videoWidth/t&&(e.left=this.videoWidth-this.videoWidth/t),e.right=e.left+this.videoWidth/t,e.top=e.top+e.yPercent*(e.bottom-e.top)-this.videoHeight/t*.5,e.top<=0?e.top=0:e.top>this.videoHeight-this.videoHeight/t&&(e.top=this.videoHeight-this.videoHeight/t),e.bottom=e.top+this.videoHeight/t,e.left=parseInt(e.left,10),e.right=parseInt(e.right,10),e.top=parseInt(e.top,10),e.bottom=parseInt(e.bottom,10);try{e.left<e.right&&e.top<e.bottom&&e.bottom<=this.videoHeight&&e.right<=this.videoWidth&&this._setDisplayRegion(e.left,e.right,e.top,e.bottom,1!==t)}catch(e){}}},{key:"_resetZoom",value:function(){this.current=1;var e=this._theme.getFrameInfo(0);this.videoWidth=e.width,this.videoHeight=e.height,this.currentPosition.left=0,this.currentPosition.top=0,this.currentPosition.right=e.width,this.currentPosition.bottom=e.height,this.videoHeight&&this.videoWidth&&this._setDisplayRegion(0,this.videoWidth,0,this.videoHeight,!1),this.enableZoom=!1}},{key:"_setDisplayRegion",value:function(e,t,r,i,n){this._theme&&this._theme.setDisplayRegion(e,t,r,i,n,this.isMobileFullScreen)}},{key:"isMobileFullScreen",get:function(){return!(!this._theme.options.isMobile||!this._theme.mobileFullScreen)}}]),e}();function $p(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}$p("");var Kp="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),Qp=new Uint8Array(16);function em(){if(!Kp)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Kp(Qp)}for(var tm=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,rm=[],im=0;im<256;++im)rm.push((im+256).toString(16).substr(1));function nm(e,t,r){var i=(e=e||{}).random||(e.rng||em)();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,t){r=r||0;for(var n=0;n<16;++n)t[r+n]=i[n];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(rm[e[t+0]]+rm[e[t+1]]+rm[e[t+2]]+rm[e[t+3]]+"-"+rm[e[t+4]]+rm[e[t+5]]+"-"+rm[e[t+6]]+rm[e[t+7]]+"-"+rm[e[t+8]]+rm[e[t+9]]+"-"+rm[e[t+10]]+rm[e[t+11]]+rm[e[t+12]]+rm[e[t+13]]+rm[e[t+14]]+rm[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&tm.test(e)}(r))throw TypeError("Stringified UUID is invalid");return r}(i)}function am(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var om=function(){function e(){this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}var t=e.prototype;return t.$=function(e){var t=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,r=/^(?:\s*(<[\w\W]+>)[^>]*|.([\w-]*))$/;if(t.test(e)){var i=t.exec(e);return document.getElementById(i[2])}if(r.test(e)){for(var n=r.exec(e),a=document.getElementsByTagName("*"),o=[],s=0,x=a.length;s<x;s++)a[s].className.match(new RegExp("(\\s|^)"+n[2]+"(\\s|$)"))&&o.push(a[s]);return o}},t.dateFormat=function(e,t){var r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var i in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+i+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?r[i]:("00"+r[i]).substr((""+r[i]).length)));return t},t.downloadFile=function(e,t){var r=e;am(e,Blob)||am(e,File)||(r=new Blob([e]));var i=window.URL.createObjectURL(r),n=window.document.createElement("a");n.href=i,n.download=t;var a=document.createEvent("MouseEvents");a.initEvent("click",!0,!0),n.dispatchEvent(a)},t.createxmlDoc=function(){for(var e,t=["MSXML2.DOMDocument","MSXML2.DOMDocument.5.0","MSXML2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","Microsoft.XmlDom"],r=0,i=t.length;r<i;r++)try{e=new ActiveXObject(t[r]);break}catch(t){e=document.implementation.createDocument("","",null);break}return e.async="false",e},t.parseXmlFromStr=function(e){if(null===e||""===e)return null;var t=this.createxmlDoc();return"Netscape"===navigator.appName||"Opera"===navigator.appName?t=(new DOMParser).parseFromString(e,"text/xml"):t.loadXML(e),t},t.encode=function(e){var t,r,i,n,a,o,s,x="",l=0;for(e=this._utf8_encode(e);l<e.length;)n=(t=e.charCodeAt(l++))>>2,a=(3&t)<<4|(r=e.charCodeAt(l++))>>4,o=(15&r)<<2|(i=e.charCodeAt(l++))>>6,s=63&i,isNaN(r)?o=s=64:isNaN(i)&&(s=64),x=x+this._keyStr.charAt(n)+this._keyStr.charAt(a)+this._keyStr.charAt(o)+this._keyStr.charAt(s);return x},t.decode=function(e){var t,r,i,n,a,o,s="",x=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");x<e.length;)t=this._keyStr.indexOf(e.charAt(x++))<<2|(n=this._keyStr.indexOf(e.charAt(x++)))>>4,r=(15&n)<<4|(a=this._keyStr.indexOf(e.charAt(x++)))>>2,i=(3&a)<<6|(o=this._keyStr.indexOf(e.charAt(x++))),s+=String.fromCharCode(t),64!==a&&(s+=String.fromCharCode(r)),64!==o&&(s+=String.fromCharCode(i));return this._utf8_decode(s)},t._utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t},t._utf8_decode=function(e){for(var t="",r=0,i=0,n=0;r<e.length;)if((i=e.charCodeAt(r))<128)t+=String.fromCharCode(i),r++;else if(i>191&&i<224)n=e.charCodeAt(r+1),t+=String.fromCharCode((31&i)<<6|63&n),r+=2;else{n=e.charCodeAt(r+1);var a=e.charCodeAt(r+2);t+=String.fromCharCode((15&i)<<12|(63&n)<<6|63&a),r+=3}return t},t.isFirefox=function(){var e=!1,t=navigator.userAgent.toLowerCase(),r="";return t.match(/firefox\/([\d.]+)/)&&(r=t.match(/firefox\/([\d.]+)/)[1],parseInt(r.split(".")[0],10)>-1&&(e=!0)),e},t.isSafari=function(){var e=!1,t=navigator.userAgent.toLowerCase(),r="";return t.match(/version\/([\d.]+).safari./)&&(r=t.match(/version\/([\d.]+).safari./)[1],parseInt(r.split(".")[0],10)>-1&&(e=!0)),e},t.isEdge=function(){return navigator.userAgent.toLowerCase().indexOf("edge")>-1},t.isIOS=function(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},e}(),sm=new om;window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.URL=window.URL||window.webkitURL;var xm,lm=function(){function e(e,t,r,i){this.szUUID=e,this.szFileName=t,this.iStreamType=r,this.szPath="",this.bStart=!1,this.aStreamList=[],this.options=i,this.fileContents=[]}var t=e.prototype;return t.init=function(){var e=this;return new Promise((function(t){e.fileContents=[]}))},t.getDateDir=function(){return sm.dateFormat(new Date,"yyyy-MM-dd")},t.writeFileHeader=function(e){var t=new Blob([e],{type:"application/octet-stream"});this.fileContents.push(t),this.bStart=!0},t.writeFileContent=function(e){var t=new Blob([e],{type:"application/octet-stream"});this.fileContents.push(t)},t.writeFile=function(e){var t=this;if(this.bStart)if(this.aStreamList.length>0){var r=this.aStreamList.shift();if(e.seek(e.length),e.length>=this.options.iFileSize)return void(this.options.cbEventHandler&&this.options.cbEventHandler(3001,this.szUUID));var i=new Blob([r]);e.write(i)}else setTimeout((function(){t.writeFile(e)}),1e3)},t.stopWriteFile=function(){var e=this;return this.bStart=!1,new Promise((function(t){var r=new Blob(e.fileContents,{type:"application/octet-stream"});e.fileContents=[],t(URL.createObjectURL(r))}))},e}(),cm=function(){function e(e,t,r,i,n,a,o,s){this.szBasePath=e,this.szUUID=t,this.szFileName=r,this.aHeadBuf=new Uint8Array(i),this.iPackType=n,this.iStreamType=a,this.oWorker=null,this.oFileSystem=null,this.options=o,this.bHead=!0,this.staticPath=s,this.fileContents=[]}var t=e.prototype;return t.init=function(){var e=this;return new Promise((function(t,r){e.initWorker().then((function(){t(e.szUUID)}),(function(e){r(e)}))}))},t.initFileSystem=function(){var e=this;return this.oFileSystem=new lm(this.szUUID,this.szFileName,this.iStreamType,this.options),new Promise((function(t,r){e.oFileSystem.init().then((function(){t()}),(function(e){r(e)}))}))},t.initWorker=function(){var e=this;return new Promise((function(t){var r,i=new Blob([(r=e.staticPath,void 0===r&&(r="https://open.ys7.com/assets/ezuikit_v3.6"),'(function() {\n    const RECORDRTP = 0;  //录制一份未经过转封装的码流原始数据，用于定位问题\n    self.Module = { memoryInitializerRequest: loadMemInitFile(), TOTAL_MEMORY: 128*1024*1024 };\n    importScripts = (function (globalEval) {\n        var xhr = new XMLHttpRequest;\n        return function importScripts() {\n          var\n            args = Array.prototype.slice.call(arguments)\n            , len = args.length\n            , i = 0\n            , meta\n            , data\n            , content\n            ;\n          for (; i < len; i++) {\n            if (args[i].substr(0, 5).toLowerCase() === "data:") {\n              data = args[i];\n              content = data.indexOf(",");\n              meta = data.substr(5, content).toLowerCase();\n              data = decodeURIComponent(data.substr(content + 1));\n              if (/;s*base64s*[;,]/.test(meta)) {\n                data = atob(data);\n              }\n              if (/;s*charset=[uU][tT][fF]-?8s*[;,]/.test(meta)) {\n                data = decodeURIComponent(escape(data));\n              }\n            } else {\n              xhr.open("GET", args[i], false);\n              xhr.send(null);\n              data = xhr.responseText;\n            }\n            globalEval(data);\n          }\n        };\n      }(eval));\n    importScripts(\''+r+'/js/transform/SystemTransform.js\');\n\n    Module.postRun.push(function() {\n        postMessage({type: "loaded"});\n    });\n\n    onmessage = function (e) {\n        var data = e.data;\n\n        if ("create" === data.type) {\n            var iHeadLen = data.len;\n            var pHead = Module._malloc(iHeadLen);\n\n            var aData = Module.HEAPU8.subarray(pHead, pHead + iHeadLen);\n            aData.set(new Uint8Array(data.buf));\n\n            var iTransType = data.packType;//目标格式 RTP->PS\n            if (RECORDRTP) {\n                postMessage({type: "created"});\n                postMessage({type: "outputData", buf: data.buf, dType: 1}, [data.buf]);\n            } else {\n                var iRet = Module._ST_Create(pHead, iHeadLen, iTransType);\n                if (iRet != 0) {\n                    console.log("_ST_Create failed!");\n                } else {\n                    Module._ST_Start();\n                    postMessage({type: "created"});\n                }\n            }\n\n        } else if ("inputData" === data.type) {\n            if (RECORDRTP) {\n                var aFileData = new Uint8Array(data.buf);  // 拷贝一份\n                var iBufferLen = aFileData.length;\n                var szBufferLen = iBufferLen.toString(16);\n                if (szBufferLen.length === 1) {\n                    szBufferLen = "000" + szBufferLen;\n                } else if (szBufferLen.length === 2) {\n                    szBufferLen = "00" + szBufferLen;\n                } else if (szBufferLen.length === 3) {\n                    szBufferLen = "0" + szBufferLen;\n                }\n                var aData = [0, 0, parseInt(szBufferLen.substring(0, 2), 16), parseInt(szBufferLen.substring(2, 4), 16)];\n                for(var iIndex = 0, iDataLength = aFileData.length; iIndex < iDataLength; iIndex++) {\n                    aData[iIndex + 4] = aFileData[iIndex]\n                }\n                var dataUint8 = new Uint8Array(aData);\n                postMessage({type: "outputData", buf: dataUint8.buffer, dType: 2}, [dataUint8.buffer]);\n            } else {\n                var iDataLen = data.len;\n                var pData = Module._malloc(iDataLen);\n\n                var aData = Module.HEAPU8.subarray(pData, pData + iDataLen);\n                aData.set(new Uint8Array(data.buf));\n\n                var iRet = Module._ST_InputData(0, pData, iDataLen);\n                if (iRet != 0) {\n                    //console.log("_ST_InputData failed!");// 一开始会有一些失败，但是不影响后面的文件存储\n                }\n\n                Module._free(pData);\n            }\n        } else if ("release" === data.type) {\n            Module._ST_Stop();\n            Module._ST_Release();\n\n            close();\n        }\n    };\n\n    function loadMemInitFile() {\n        var req = new XMLHttpRequest();\n        req.open(\'GET\', \''+r+"/js/transform/SystemTransform.js.mem');\n        req.responseType = 'arraybuffer';\n        req.send();\n\n        return req;\n    }\n})();")]),n=URL.createObjectURL(i);e.oWorker=new Worker(n),e.oWorker.onmessage=function(r){var i=r.data,n=e.iPackType;if(1===e.options.iPackage&&(n=12),"loaded"===i.type)e.oWorker.postMessage({type:"create",buf:e.aHeadBuf.buffer,len:40,packType:n},[e.aHeadBuf.buffer]);else if("created"===i.type)t();else if("outputData"===i.type){var a=new Uint8Array(i.buf);if(1===e.options.iPackage)if(e.bHead){var o=new Blob([a],{type:"video/mp4"});e.fileContents.push(o),e.bStart=!0,e.bHead=!1}else{var s=new Blob([a],{type:"video/mp4"});e.fileContents.push(s)}else if(1===i.dType){var x=new Blob([a],{type:"video/mp4"});e.fileContents.push(x),e.bStart=!0}else{var l=new Blob([a],{type:"application/octet-stream"});e.fileContents.push(l)}}}}))},t.inputData=function(e){if(this.oWorker){var t=new Uint8Array(e);this.oWorker.postMessage({type:"inputData",buf:t.buffer,len:t.length},[t.buffer])}},t.stopRecord=function(e){var t=this;return new Promise((function(r,i){t.oWorker?t.oWorker.postMessage({type:"release"}):i();var n=new Blob(t.fileContents,{type:"application/octet-stream"});t.fileContents=[];var a=URL.createObjectURL(n);if(t.bStart=!1,e){var o=document.createElement("a");o.href=a,o.download=t.szFileName,document.body.appendChild(o),o.click(),document.body.removeChild(o)}r(a)}))},e}(),fm=(xm=Symbol("STORAGELIST"),function(){function e(e,t,r){this.szBasePath=e,this[xm]={},this.options={iFileSize:1073741824},Object.assign(this.options,t),"string"==typeof t.staticPath&&(this.staticPath=t.staticPath)}var t=e.prototype;return t.startRecord=function(e,t,r,i,n){var a=this,o=nm(),s=Object.assign({},this.options,n),x=new cm(this.szBasePath,o,e,t,r,i,s,this.staticPath);return new Promise((function(e,t){x.init().then((function(t){a[xm][t]=x,e(t)}),(function(e){t(e)}))}))},t.inputData=function(e,t){var r=this[xm][e];r&&r.inputData(t)},t.stopRecord=function(e,t){var r=this;return new Promise((function(i,n){var a=r[xm][e];a?a.stopRecord(t).then((function(){delete r[xm][e],i()}),(function(){n()})):n()}))},e}()),hm=function(){function e(){this._oStorageManager=new fm("./transform",{staticPath:"https://open.ys7.com/assets/ezuikit_v4.0"},void 0)}var t=e.prototype;return t.startRecord=function(e,t){var r=this;return t=null!=t?t:(new Date).getTime()+"",new Promise((function(i,n){r._oStorageManager.startRecord(t+".mp4",e,2,0,{cbEventHandler:function(e){n(e)},iPackage:0}).then((function(e){r.szStorageUUID=e,i(e)}),(function(e){n(e)}))}))},t.inputData=function(e){this.szStorageUUID&&this._oStorageManager.inputData(this.szStorageUUID,e)},t.stopRecord=function(e){var t=this;return void 0===e&&(e=!0),new Promise((function(r,i){t._oStorageManager.stopRecord(t.szStorageUUID,e).then((function(e){r(t.szStorageUUID),t.szStorageUUID=""}),(function(e){i(e)}))}))},e}(),um=function(){function e(){this.name="ezuikit-player-plugin-record",this.recording=!1,this._record=new hm}var t=e.prototype;return t.exec=function(e){var t=this;this._player=e,setTimeout((function(){["stop","pause","destroy"].forEach((function(r){e.event.on(r,(function(){t.stopRecord()}))}))}),0)},t.startRecord=function(e,t){var r,i=this;return void 0===e&&(e=""+(new Date).getTime()),this._recordInputDataFn=function(e){var t;i._record.szStorageUUID&&(null==(t=i._record)||t.inputData(e.data))},null==(r=this._record)?void 0:r.startRecord(this._player._aHead,e).then((function(t){var r,n,a;i.recording=!0,null==(n=i._player)||null==(r=n.logger)||r.log("[PlayerRecordPlugin] start record video, filename: ",e),null==(a=i._player)||a.event.on("recordInputData",i._recordInputDataFn)}))},t.stopRecord=function(){var e,t,r,i;return this.recording?(this.recording=!1,null==(t=this._player)||null==(e=t.logger)||e.log("[PlayerRecordPlugin] stop record video"),null==(r=this._player)||r.event.off("recordInputData",this._recordInputDataFn),null==(i=this._record)?void 0:i.stopRecord()):Promise.resolve()},t.destroy=function(){var e=this;this.stopRecord().then((function(){var t,r;null==(r=e._player)||null==(t=r.logger)||t.log("[PlayerRecordPlugin] destroy"),e._record=null}))},e}();$p(':root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-record-timer{align-items:center;background:rgba(0,0,0,.314);border-radius:12px;color:#fff;display:none;height:24px;left:50%;line-height:24px;padding:0 8px;position:absolute;text-align:center;transform:translateX(-50%);z-index:10}.ezui-record-timer:before{background:red;border-radius:100%;content:"";display:inline-block;height:8px;margin:0 8px 0 0;width:8px}');var dm={multiple:8,left:0,bottom:102,scale:1,onChange:function(){}},_m="".concat(of,"-record-timer"),pm=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),this.timer=null,this.$container=t,this.options=Object.assign({},dm,r),this.$recordTimerContainer=this.render()}return s(e,[{key:"_formatSeconds",value:function(e){var t,r,i,n=parseInt(e+""),a=0,o=0;return n>59&&(a=parseInt(n/60+""),n=parseInt(n%60+""),a>59&&(o=parseInt(a/60+""),a=parseInt(a%60+""))),t=parseInt(n+"")>9?parseInt(n+"")+"":"0"+parseInt(n+""),r=parseInt(a+"")>9?parseInt(a+"")+"":"0"+parseInt(a+""),i=parseInt(o+"")>9?parseInt(o+"")+"":"0"+parseInt(o+""),o>0?i+":"+r+":"+t:a>0?r+":"+t:"00:"+t}},{key:"show",value:function(){var e=this,t=0;this.$recordTimerContainer.style.display="inline-flex",this.timer=window.setInterval((function(){++t,e._renderTimer(t)}),1e3)}},{key:"hide",value:function(){this.timer&&clearInterval(this.timer),this.$recordTimerContainer.style.display="none",this._renderTimer(0)}},{key:"_renderTimer",value:function(e){var t=this.$container.querySelector(".".concat(_m," span"));t&&(t.innerHTML=this._formatSeconds(e))}},{key:"render",value:function(){var e=document.createElement("div");return e.classList.add(_m),e.style.bottom=this.options.bottom+"px",e.innerHTML="<span>00:00</span>",this.$container.appendChild(e),e}}]),e}();function mm(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}mm(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-playbackRate{position:relative;width:auto!important}.ezui-playbackRate .ezui-btn{border-color:var(--ezui-footer-color,#fff);border-radius:13px;color:var(--ezui-footer-color,#fff);height:26px;line-height:26px;min-width:64px;padding:0 7px;transition:none}.ezui-playbackRate .ezui-active{border-color:var(--ezui-active-color,#1890ff)}.ezui-playbackRate .ezui-disable{border-color:gray}"),mm(':root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-playbackRate-panel{bottom:calc(var(--ezui-footer-height, 48px) + 16px);box-sizing:border-box;display:inline-flex;flex-direction:column;font-size:13px;left:50%;position:absolute;transform:translateX(-50%);-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezui-playbackRate-panel li,.ezui-playbackRate-panel ul{box-sizing:border-box;list-style:none;margin:0;padding:0}.ezui-playbackRate-panel ul.ezui-playbackRate-panel-list{background:#fff;border-radius:2px;box-shadow:0 3px 20px 0 rgba(0,0,0,.1);color:rgba(0,0,0,.85);display:inline-flex;flex-direction:column;padding:10px 0;position:relative;text-align:center;width:120px}.ezui-playbackRate-panel ul.ezui-playbackRate-panel-list:after{border:8px solid transparent;border-top-color:#fff;bottom:-16px;box-sizing:border-box;content:" ";height:16px;left:50%;position:absolute;transform:translateX(-50%);width:16px}.ezui-playbackRate-panel-item{cursor:pointer;font-size:13px;height:45px;line-height:45px;list-style:none;text-align:center}.ezui-playbackRate-panel-item:hover{background-color:rgba(24,144,255,.102)}.ezui-playbackRate-panel-btn-cancel{background:#fff;border-radius:10px;box-shadow:0 3px 20px 0 rgba(0,0,0,.1);display:none;height:45px;line-height:45px;margin-top:30px;text-align:center}.ezui-playbackRate-panel-item-selected{color:var(--primary-color,#648ffc)}.ezui-playbackRate-panel.ezui-playbackRate-panel-mobile{background:rgba(0,0,0,.4);bottom:0;box-sizing:border-box;height:100%;justify-content:flex-end;left:0;padding-bottom:calc(env(safe-area-inset-bottom) + 80px);position:fixed;right:0;top:0;transform:translateX(0);width:100%;z-index:9999}.ezui-playbackRate-panel.ezui-playbackRate-panel-mobile .ezui-playbackRate-panel-list{border-radius:10px;margin:0 5%;width:auto}.ezui-playbackRate-panel.ezui-playbackRate-panel-mobile .ezui-playbackRate-panel-list:after{display:none}.ezui-playbackRate-panel.ezui-playbackRate-panel-mobile .ezui-playbackRate-panel-btn-cancel{cursor:pointer;display:inline-block;height:45px;margin:30px 5% 0}.ezui-playbackRate-panel.ezui-playbackRate-panel-fullscreen-mobile{align-items:end;justify-content:center;padding-bottom:0}.ezui-playbackRate-panel.ezui-playbackRate-panel-fullscreen-mobile ul.ezui-playbackRate-panel-list{align-items:center!important;background-color:transparent!important;background:rgba(0,0,0,.75)!important;border-radius:0!important;color:#fff!important;flex-direction:column!important;height:100vw!important;justify-content:center!important;margin:0!important;padding-bottom:calc(env(safe-area-inset-bottom) + 20px);width:240px!important}.ezui-playbackRate-panel.ezui-playbackRate-panel-fullscreen-mobile ul.ezui-playbackRate-panel-list li{background-color:transparent!important;width:100%}.ezui-playbackRate-panel.ezui-playbackRate-panel-fullscreen-mobile .ezui-playbackRate-panel-btn-cancel{background:transparent;background:none;border-radius:0;box-shadow:none;font-size:0;margin:0;position:absolute;right:200px;top:0;width:40px}.ezui-playbackRate-panel.ezui-playbackRate-panel-fullscreen-mobile .ezui-playbackRate-panel-btn-cancel:before{background:#fff;border:none;content:"";display:block;height:1px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%) rotate(45deg);width:16px}.ezui-playbackRate-panel.ezui-playbackRate-panel-fullscreen-mobile .ezui-playbackRate-panel-btn-cancel:after{background:#fff;border:none;content:"";display:block;height:16px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%) rotate(45deg);width:1px}');var gm=[.5,1,2,4,8],ym="".concat(of,"-playbackRate-panel"),bm={open:!1,rates:[{rate:4,text:"4倍"},{rate:2,text:"2倍"},{rate:1,text:"1倍（正常播放）",isDefault:!0},{rate:.5,text:"0.5倍"}]},vm=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a(this,e),this.$container=t,this.options=Object.assign({},bm,r),0===this.options.rates.length&&(this.options.rates=bm.rates),this._current=this._getDefaultCurrent(),this.$panelContainer=this.render()}return s(e,[{key:"current",get:function(){return this._current}},{key:"_getDefaultCurrent",value:function(){var e;if(gm.includes(this.options.current))return this.options.current;var t=this.options.rates.find((function(e){return e.isDefault}));return t?t.rate:null===(e=this.options.rates[0])||void 0===e?void 0:e.rate}},{key:"show",value:function(){this.options.theme.mobileFullScreen?(this.$panelContainer.classList.contains("".concat(ym,"-fullscreen-mobile"))||this.$panelContainer.classList.add("".concat(ym,"-fullscreen-mobile")),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9999;new Promise((function(){var r=document.documentElement.clientWidth,i=document.documentElement.clientHeight,n=e,a="";a+="width:"+i+"px;",a+="height:"+r+"px;",a+="-webkit-transform: rotate(90.001deg); transform: rotate(90.001deg);",a+="-webkit-transform-origin: "+r/2+"px "+r/2+"px;",a+="transform-origin: "+r/2+"px "+r/2+"px;",a+="position: fixed;top: 0;left: 0;z-index:".concat(t),n.style.cssText=n.style.cssText+a}))}(this.$panelContainer)):(this.$panelContainer.classList.remove("".concat(ym,"-fullscreen-mobile")),this.$panelContainer.style.cssText=""),this.$panelContainer.style.display="inline-flex","function"==typeof this.options.onOpenChange&&this.options.onOpenChange(!0)}},{key:"hide",value:function(){this.$panelContainer.style.display="none","function"==typeof this.options.onOpenChange&&this.options.onOpenChange(!1)}},{key:"selectedCurrent",value:function(e){var t,r,i,n,a=this;this._current=e||this._current;var o="".concat(ym,"-item-selected");if(null===(r=null===(t=this.$panelContainer.querySelector(".".concat(o)))||void 0===t?void 0:t.classList)||void 0===r||r.remove(o),null===(i=this.$panelContainer.querySelector(".".concat(ym,'-item[data-rate="').concat(this._current,'"]')))||void 0===i||i.classList.add(o),"function"==typeof this.options.onChange){var s=this.options.rates.find((function(e){return e.rate===a._current}));s&&(null===(n=this.options)||void 0===n||n.onChange(s))}this.hide()}},{key:"render",value:function(){var e,t=this,r=document.createElement("div");if(r.classList.add(ym),r.style.display="none",r.innerHTML='\n        <ul class="'.concat(ym,'-list">\n            ').concat((null!==(e=this.options.rates)&&void 0!==e?e:[]).map((function(e){return'<li class="'.concat(ym,"-item ").concat(t._current===e.rate?"".concat(ym,"-item-selected"):"",'" data-rate="').concat(e.rate,'">').concat(e.text||e.rate,"</li>")})).join(""),"\n        </ul>"),this.options.isMobile){r.classList.add("".concat(ym,"-mobile")),this.options.theme.mobileFullScreen&&r.classList.add("".concat(ym,"-fullscreen-mobile"));var i=document.createElement("div");i.classList.add("".concat(ym,"-btn-cancel")),i.innerHTML="取消",r.appendChild(i),null==i||i.addEventListener("click",(function(){t.hide(),"function"==typeof t.options.onOk&&t.options.onOk()})),null==r||r.addEventListener("click",(function(){t.hide()})),document.body.appendChild(r)}else this.$container.appendChild(r);return r.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault()})),function(e,t,r){e.addEventListener("click",(function(i){for(var n=i.target||i.srcElement;n!==e;){if(n.classList.contains(t.replace(/^\./,""))){r(n);break}if(!n.parentNode)break;n=n.parentNode}}),!1)}(r,"".concat(ym,"-item"),(function(e){var r=e.getAttribute("data-rate");if(null!==r&&+r>0){var i=+r;gm.includes(i)&&t._current!==i&&(t._current=i,t.selectedCurrent()),t.hide()}})),r}}]),e}();
/*
  *
  * @ezuikit/utils-tools v1.0.1
  * Copyright (c) 2024-3-23 Ezviz-OpenBiz
  * Released under MIT the License.
  *
  */
var Pm=function(e){var t=e.split("?")[1],r={};if(t)for(var i=t.split("&"),n=0;n<i.length;n++){var a=i[n].split("=");r[a[0]]=decodeURIComponent(a[1])}return r};function Sm(e,t){var r=null!=t?t:{},i=r.type,n=r.recType,a=r.search,o=r.definition,s=r.channelNo,x=r.deviceSerial,l=r.validateCode,c=function(e){var t={};if(/^ezopen:\/\//.test(e)){if(e.includes("@")){var r=e.indexOf("@"),i=e.indexOf("//");t.validateCode=e.substring(i+2,r),e=e.replace(t.validateCode+"@","")}t.protocol=e.split("//")[0],t.search=e.split("?")[1]?"?"+e.split("?")[1]:"",t.hostname=e.split("/")[2],t.origin=t.protocol+"//"+t.hostname,t.pathname=e.split("?")[0].replace(t.origin,""),t.href=e;var n=t.pathname.split("/"),a=n[2].split(".");return t.deviceSerial=n[1],t.channelNo=a[0],t.type=a[a.length-1],"live"===t.type&&(t.definition=a.length>2?a[1]:"sd"),"rec"===t.type&&(t.recType=a.length>2?a[1]:""),t.searchParams=Pm(e),t}return{}}(e);if(a){var f=Object.assign({},c.searchParams,Pm("?"+a.replace("?","")));a=Object.entries(f).reduce((function(e,t){var r=t[0],i=t[1];return""===i?e:e+=r+"="+encodeURIComponent(i)+"&"}),"?").replace(/&$/,"")}else a=c.search;return i=i||c.type,n=null!=n?n:c.recType,o=null!=o?o:c.definition,s=s||c.channelNo,x=x||c.deviceSerial,l=null!=l?l:c.validateCode,c.protocol+"//"+(l?l+"@":"")+c.hostname+"/"+x+"/"+s+("rec"===i&&n?"."+n:"")+("live"===i&&"hd"===o?"."+o:"")+"."+i+a
/*
  *
  * @ezuikit/theme-plugin-rec-types v0.1.0
  * Copyright (c) 2024-3-23 Ezviz-OpenBiz
  * Released under MIT the License.
  *
  */}!function(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-rec-types{box-sizing:border-box;display:inline-flex;flex-direction:row;flex-wrap:nowrap;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezui-theme-mobile .ezui-rec-types{background:#f8f8f8;border-radius:8px;font-size:20px;line-height:24px;margin:0 20px}.ezui-theme-mobile .ezui-rec-types span{color:#ccc;display:inline-flex;height:24px;justify-content:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:35px}.ezui-theme-mobile .ezui-rec-types span.ezui-active{border-radius:8px;box-shadow:0 2px 5px 0 rgba(23,45,101,.2);color:#648ffc!important}");var Rm=["webFullscreen"],Cm=[{name:"deviceID",position:"hl"},{name:"deviceName",position:"hl"},{name:"recTypes",position:"hr"},{name:"play",position:"fl"},{name:"snapshot",oldName:"capturePicture",position:"fl"},{name:"volume",oldName:"sound",position:"fl"},{name:"record",oldName:"recordvideo",position:"fl"},{name:"zoom",position:"fl"},{name:"playbackRate",oldName:"speed",position:"fr"},{name:"webFullscreen",oldName:"webExpend",position:"fr"},{name:"fullscreen",oldName:"expend",position:"fr"},{name:"timeline",position:"bl"},{name:"datepicker",position:"br"}],Em={recTypes:["cloud","local"],controls:["play","snapshot","volume","record","zoom","playbackRate","webFullscreen","fullscreen","timeline","datepicker","deviceID","deviceName","recTypes"],headerRender:void 0,footerRender:void 0,ignoreDownloadSnapshot:!1,headerHeight:48,footerHeight:48,isMobile:!1,height:400,width:600};function Tm(){return Tm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Tm.apply(this,arguments)}function Fm(e,t){var r={header:[],footer:[],bottom:[]};return t.map((function(e){var t=null;return"string"==typeof e?t=Cm.find((function(t){return t.name===e})):(t=Cm.find((function(t){return t.name===e.name})))?Tm({},t,e):null})).filter((function(e){return!!e})).forEach((function(t){var i=e.get(t.name);i&&((null==t?void 0:t.position.startsWith("h"))?r.header.push({name:t.name,plugin:i,position:t.position}):(null==t?void 0:t.position.startsWith("f"))?r.footer.push({name:t.name,plugin:i,position:t.position}):(null==t?void 0:t.position.startsWith("b"))&&r.bottom.push({name:t.name,plugin:i,position:t.position}))})),r}var Dm={height:48,timeWidth:0,time:(new Date).getTime(),timeSection:[]},Mm=function(){function e(e,t){if(void 0===t&&(t={}),this.nowTime=(new Date).getTime(),this.timeSection=[],this.timeWidth=60,this.timeWidthTbls=[60,1800,3600,86400],this.timeUnits=["范围: 1分钟; 单位: 秒","范围: 30分钟; 单位: 分钟","范围: 1小时; 单位: 分钟","范围: 1天; 单位: 小时","范围: 3天; 单位: 小时"],this.timeUnit="",this.options=Object.assign({},Dm,t),this.$container="string"==typeof e?document.getElementById(e):e,!this.$container)throw new Error("[TimeLine]: container is required!");this.$canvas=document.createElement("canvas"),this.$canvas.className="time-line",this.$canvas.height=this.options.height,this.$canvas.width=500,this.$canvas.style.display="inline-block;",this.$canvas.innerHTML="该浏览器不支持canvas",this.$container.appendChild(this.$canvas)}var t=e.prototype;return t.init=function(e){var t=this,r=this.options,i=this;return new Promise((function(n,a){e.width&&t.$container.setAttribute("width",parseInt(e.width,10)+"px"),t.timeWidthTblIndex=r.timeWidth,t._drawPen=t.$canvas.getContext("2d"),i.nowTime=e.nowTime,i.timeSection=r.timeSection||[],i.update(),t.$canvas.addEventListener("mousemove",(function(e){i.options.readOnly||i.mousemove(e)})),t.$canvas.addEventListener("mouseover",(function(e){i.options.readOnly||i.mouseover(e)})),t.$canvas.addEventListener("mouseleave",(function(e){i.options.readOnly||i.mouseleave(e)})),t.$canvas.addEventListener("mousedown",(function(e){i.options.readOnly||i.mousedown(e)})),t.$canvas.addEventListener("mouseup",(function(t){if(!i.options.readOnly){var r=e.onChange;i.mouseUpFn(t,r)}})),n()}))},t._renderNode=function(){},t.subTime=function(e){return e<10?"0"+e:e},t.tranTime=function(e){var t=e;if(e){var r=new Date(e);t=r.getFullYear()+"/"+(r.getMonth()+1)+"/"+r.getDate()+" "+this.subTime(r.getHours())+":"+this.subTime(r.getMinutes())+":"+this.subTime(r.getSeconds())}return t+""},t.setWidth=function(e){e.width&&(this.$container.style.width=e.width,this.$canvas.width=e.width,this.update({time:this.nowTime||new Date}))},t.mousemove=function(e){if(this.isMouseDown&&this.isOver){var t=this.mousePosition-e.pageX;if(0===t)return;var r=0;switch(this.timeWidth){case 60:r=.1;break;case 1800:r=3;break;case 3600:r=90;break;case 86400:r=120}var i=new Date(this.oldTime).getTime()+t*r*1e3;this.update({time:i}),this.moved=!0}else{var n=parseInt(this.$container.offsetLeft+"",10);this.mousePosition=e.pageX-n,this.update()}},t.mousedown=function(e){this.isMouseDown=!0,this.mousePosition=e.pageX,this.oldTime=this.nowTime},t.mouseover=function(e){this.isOver=!0},t.mouseleave=function(e){this.isOver=!1,this.isMouseDown=!1,this.update()},t.changeScale=function(e){this.options.timeWidth=e,this.update({timeWidth:e})},t.mouseUpFn=function(e,t){if(this.isMouseDown&&(this.isMouseDown=!1,this.moved)){this.moved=!1;var r=new Date(this.nowTime).getFullYear()+"/"+(new Date(this.nowTime).getMonth()+1)+"/"+new Date(this.nowTime).getDate()+" "+this.subTime(new Date(this.nowTime).getHours())+":"+this.subTime(new Date(this.nowTime).getMinutes())+":"+this.subTime(new Date(this.nowTime).getSeconds());this.nowTime=new Date(r).getTime(),this.update({time:this.nowTime}),this.oldTime=this.nowTime,"function"==typeof t&&t(this.nowTime)}},t.readOnly=function(){this.options.readOnly=!0,this.$canvas.style.cursor="not-allowed"},t.unReadOnly=function(){this.options.readOnly=!1,this.$canvas.style.cursor="pointer"},t.setCurrent=function(e){this.run({time:e})},t.run=function(e){this.isMouseDown||this.update(e)},t.update=function(e){var t=this;e=e||{},t.nowTime=e.time||t.nowTime,t.timeSection=e.timeSection||t.timeSection,t.timeWidthTblIndex=e.timeWidth||t.timeWidthTblIndex,t.timeWidth=t.timeWidthTbls[e.timeWidth||t.timeWidthTblIndex],t.timeUnit=t.timeUnits[e.timeWidth||t.timeWidthTblIndex],0===e.timeWidth&&(t.timeWidthTblIndex=0,t.timeWidth=t.timeWidthTbls[0],t.timeUnit=t.timeUnits[0]),this._drawPen.fillStyle="#000000",t._drawPen.fillRect(0,0,t.$canvas.offsetWidth,t.$canvas.offsetHeight),t.drawScale(),t.drawRecord(),t.drawOtherMsg()},t.drawSolidLine=function(e,t,r,i,n,a){this._drawPen.save(),this._drawPen.strokeStyle=a,this._drawPen.lineWidth=n,this._drawPen.beginPath(),this._drawPen.moveTo(e,t),this._drawPen.lineTo(r,i),this._drawPen.stroke(),this._drawPen.restore()},t.drawString=function(e,t,r,i){this._drawPen.font="12px serif",this._drawPen.fillStyle="#ffffff",this._drawPen.textAlign=i||"left",this._drawPen.fillText(e,t,r+10)},t.drawScale=function(){var e=this,t="rgba(255,255,255)",r=e.nowTime?new Date(e.nowTime):new Date,i=r.getSeconds(),n=r.getMinutes(),a=r.getHours(),o=r.getDate(),s=0;switch(e.timeWidth){case 60:var x=parseInt(e.$canvas.offsetWidth/10+"");r.setSeconds(r.getSeconds()-parseInt(x/2+"",10)),o=r.getDate(),a=r.getHours(),n=r.getMinutes(),i=r.getSeconds();for(var l=0;l<x;l++){if(s=i+l,r.setSeconds(s),s%10==0){e.drawSolidLine(l*e.$canvas.offsetWidth/x,8,l*e.$canvas.offsetWidth/x,e.$canvas.offsetHeight/5+8,1,t);var c=this.subTime(r.getHours())+":"+this.subTime(r.getMinutes())+":"+this.subTime(r.getSeconds());e.drawString(c,l*e.$canvas.offsetWidth/x,e.$canvas.offsetHeight/5*2.5,"center","rgba(255,255,255,0.3)")}else e.drawSolidLine(l*e.$canvas.offsetWidth/x,8,l*e.$canvas.offsetWidth/x,e.$canvas.offsetHeight/5*.5+8,1,t);r.setDate(o),r.setHours(a),r.setMinutes(n)}break;case 1800:var f=new Date(e.nowTime),h=3600*f.getHours()+60*f.getMinutes()+f.getSeconds(),u=parseInt(h/60+""),d={position:parseInt(e.$canvas.offsetWidth/2+""),time:0,hideString:!0},_=Math.ceil(e.$canvas.offsetWidth/40)+u,p=[];p.push(d);for(var m=0;m<_;m++)p.push({position:d.position+20*m-parseInt(h/3+""),time:d.time+60*m}),p.unshift({position:d.position-20*m-parseInt(h/3+""),time:d.time-60*m});for(var g=0;g<p.length;g++)if(e.drawSolidLine(p[g].position,8,p[g].position,e.$canvas.offsetHeight/5*(p[g].time%100==0?1:.5)+8,1,t),p[g].time%100==0&&!p[g].hideString){var y=new Date(1e3*p[g].time),b=(y.getUTCHours()<10?"0"+y.getUTCHours():y.getUTCHours())+":"+(y.getUTCMinutes()<10?"0"+y.getUTCMinutes():y.getUTCMinutes());e.drawString(b,p[g].position,e.$canvas.offsetHeight/5*2,"center","rgba(255,255,255,0.3)")}break;case 3600:var v=new Date(e.nowTime),P=3600*v.getHours()+60*v.getMinutes()+v.getSeconds(),S=parseInt(P/1800+""),R={position:parseInt(e.$canvas.offsetWidth/2+""),time:0,hideString:!0},C=Math.ceil(e.$canvas.offsetWidth/40)+S,E=[];E.push(R);for(var T=0;T<C;T++)E.push({position:R.position+20*T-parseInt(P/90+""),time:R.time+1800*T}),E.unshift({position:R.position-20*T-parseInt(P/90+""),time:R.time-1800*T});for(var F=0;F<E.length;F++)if(e.drawSolidLine(E[F].position,8,E[F].position,e.$canvas.offsetHeight/5*(E[F].time%9e3==0?1:.5)+8,1,t),E[F].time%9e3==0&&!E[F].hideString){var D=new Date(1e3*E[F].time),M=(D.getUTCHours()<10?"0"+D.getUTCHours():D.getUTCHours())+":"+(D.getUTCMinutes()<10?"0"+D.getUTCMinutes():D.getUTCMinutes());e.drawString(M,E[F].position,e.$canvas.offsetHeight/5*2,"center","rgba(255,255,255,0.3)")}break;case 86400:var I=new Date(e.nowTime),w=3600*I.getHours()+60*I.getMinutes()+I.getSeconds(),A=parseInt(w/3600+""),k={position:parseFloat(e.$canvas.offsetWidth/2+""),time:0,hideString:!0},L=Math.ceil(e.$canvas.offsetWidth/60)+A,B=[];B.push(k);for(var O=0;O<L;O++)B.push({position:k.position+30*O-w/120,time:k.time+3600*O}),B.unshift({position:k.position-30*O-w/120,time:k.time-3600*O});for(var H=0;H<B.length;H++)if(e.drawSolidLine(B[H].position,8,B[H].position,e.$canvas.offsetHeight/5*(B[H].time%7200==0?1:.5)+8,1,t),B[H].time%7200==0&&!B[H].hideString){var N=new Date(1e3*B[H].time),V=(N.getUTCHours()<10?"0"+N.getUTCHours():N.getUTCHours())+":"+(N.getUTCMinutes()<10?"0"+N.getUTCMinutes():N.getUTCMinutes());e.drawString(V,B[H].position,e.$canvas.offsetHeight/5*2,"center","rgba(255,255,255,0.3)")}}},t.setRecord=function(e){this.timeSection=e,this.drawRecord()},t.drawRecord=function(){for(var e=this.timeSection||[],t=this,r=this._drawPen,i=0;i<e.length;i++){var n=o(e[i].startTime),a=o(e[i].endTime);r.fillStyle="#1890ff80",r.fillRect(n,0,a-n,48)}function o(e){var r=10;switch(t.timeWidth){case 60:r=10;break;case 1800:r=20/60;break;case 3600:r=20/30/60;break;case 86400:r=.5/60}var i=t.$canvas.offsetWidth/2+(e-t.nowTime)/1e3*r;return i>t.$canvas.offsetWidth&&(i=t.$canvas.offsetWidth),i<=0&&(i=0),i}},t.drawOtherMsg=function(){this.drawSolidLine(this.$canvas.offsetWidth/2,0,this.$canvas.offsetWidth/2,this.$canvas.offsetHeight,2,"#1890FF"),this._drawPen.shadowBlur=0,this.isOver&&!this.isMouseDown?(this.mouseTime=this.mousePosition/this.$canvas.offsetWidth*this.timeWidth*1e3+this.nowTime-this.timeWidth/2*1e3,this.mouseString=this.tranTime(this.mouseTime),this.hoverTime=this.mouseString,this.hoverLeft=this.mousePosition-60,this.timeTipShow=!0):this.timeTipShow=!1},e}();e(':root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-timeline-mobile-container{height:300px;margin-top:20px;position:relative;text-align:left;width:100%}.ezui-timeline-mobile-container .ezui-timeline-mobile-current{border-bottom:1px solid #648ffc;height:29px;left:0;margin-left:26%;position:absolute;top:40px;width:60%}.ezui-timeline-mobile-container .ezui-timeline-mobile-current-time-bg{color:#2c2c2c;font-size:12px;height:29px;left:-70px;line-height:29px;position:relative;top:15px;width:100px}.ezui-timeline-mobile-container .ezui-timeline-mobile-current-time-bg:before{background:#648ffc;border-radius:100%;content:"";display:inline-block;height:6px;position:absolute;right:30px;top:11px;width:6px}.ezui-timeline-mobile-item-container{box-sizing:border-box;display:inline-block;height:300px;overflow-x:hidden;overflow-y:scroll;position:relative;white-space:nowrap;width:30%}.ezui-timeline-mobile-item-container::-webkit-scrollbar{height:0;width:0}.ezui-timeline-mobile-time-item{border-right:6px solid #ddd;box-sizing:border-box;color:#969696;font-size:12px;height:60px;position:relative}.ezui-timeline-mobile-time-item .ezui-timeline-mobile-scale{border-bottom:1px solid #ccc;clear:both;float:right;height:9px;width:6px}.ezui-timeline-mobile-time-item .ezui-timeline-mobile-valid{background-color:#ddd;left:100%;position:absolute;width:6px}');var Im=function(){},wm={onCurrent:Im,onChange:Im,fragmentColor:"#A8B9ED",lineBgColor:"#ddd",scaleLineColor:"#ccc"},Am=of+"-timeline-mobile",km=[60,600,1800,3600,43200],Lm=function(){function e(e,t){if(this.dragging=!1,r=e,!(null!=(i=HTMLElement)&&"undefined"!=typeof Symbol&&i[Symbol.hasInstance]?i[Symbol.hasInstance](r):r instanceof i))throw new Error("[MobileTimeLine] container must be a HTMLElement!");var r,i;this.$container=e,this.options=Object.assign({},wm,t||{}),this.onChange=(null==t?void 0:t.onChange)||Im,this.state={start:"00:00:00",end:"24:00:00",current:"00:00:00",scale:30,timeArr:[],availTimeLine:[],scrollTop:0,index:0,date:"",noTimeLineTxt:"",disabled:!1},this._touchEvent(),this.matchTimeDot()}var t=e.prototype;return t._touchEvent=function(){var e,t,r,i,n,a=this;function o(e){a.state.disabled||(a.dragging=!0,"function"==typeof a.options.ontouchstart&&a.options.ontouchstart(e))}function s(e){a.state.disabled||(a.dragging=!0,"function"==typeof a.options.ontouchmove&&a.options.ontouchmove(e))}function x(e){if(!a.state.disabled){var t;a.dragging=!1;var r=new Promise((function(e,r){var i=-1;t=window.setInterval((function(){var r,n=(null==(r=a.$container)?void 0:r.parentNode).scrollTop;n!==i?i=n:(clearInterval(t),e(n))}),100)}));r.then((function(e){a.rectTopToTime(e),a.onChange(a.state.current)})),"function"==typeof a.options.ontouchend&&a.options.ontouchend(e)}}this.checkIsHarmonyOS()?(null==(e=this.$container.parentNode)||e.addEventListener("touchstart",o,!1),null==(t=this.$container.parentNode)||t.addEventListener("touchmove",s,!1),null==(r=this.$container.parentNode)||r.addEventListener("touchend",x,!1)):((null==(i=a.$container)?void 0:i.parentNode).ontouchstart=o,(null==(n=a.$container)?void 0:n.parentNode).ontouchmove=s,a.$container.parentNode.ontouchend=x)},t.setState=function(e){var t=this;Object.keys(e).forEach((function(r){var i;(t.state[r]=e[r],"scrollTop"===r)&&(null==(i=t.$container)?void 0:i.parentNode).scrollTo(0,e[r]);"current"===r&&"function"==typeof t.options.onCurrent&&t.options.onCurrent(e[r])}))},t.setDisabled=function(e){var t;this.setState({disabled:e}),(null==(t=this.$container)?void 0:t.parentNode)&&(this.$container.parentNode.style.overflowY=e?"hidden":"scroll")},t.timeToSecond=function(e){var t=e.split(":"),r=Number(t[0]),i=Number(t[1]),n=Number(t[2]);return 60*r*60+60*i+(n||0)},t.minuteToTime=function(e){var t=Math.floor(e/60),r=e%60;return(t>9?t:"0"+t)+":"+(r>9?r:"0"+r)},t.timeToMinute=function(e){var t=e.split(":");return 60*Number(t[0])+Number(t[1])},t.checkIsAppleDevice=function(){var e=navigator.userAgent,t=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),r=e.includes("iPad"),i=e.includes("iPhone")||e.includes("Mac");return!!(t||r||i)},t.checkIsHarmonyOS=function(){return!!navigator.userAgent.includes("ohos")},t.matchTimeDot=function(){var e=this.state;e.start;for(var t=e.end,r=e.scale,i=[],n=this.timeToMinute(t),a=n=Math.floor(n/r)*r;a>=0;){var o=0,s=0;a===n&&(o=70),0===a&&(s=230);var x=this.minuteToTime(a);i.push({id:a,current:x,label:"a"+a,marginTop:o,marginBottom:s,recArr:[]}),a-=r}this.setState({timeArr:i}),this.renderDateLine()},t.changeScale=function(e){var t=km[e]||30;this.setState({scale:t}),this.matchTimeDot()},t.setRecord=function(e,t){e.length>0?(void 0===t&&(t=e.length-1),this.setState({availTimeLine:e,start:e[t].startTime,end:e[t].endTime,current:e[t].startTime}),this.matchRecTimeDot(),this.primaryOffsetH()):(this.setState({availTimeLine:[]}),this.matchRecTimeDot())},t.matchRecTimeDot=function(){var e=this.state;e.start,e.end;var t=e.scale,r=e.availTimeLine,i=e.timeArr,n=r.length;if(0===n)for(var a=0;a<i.length;a++)i[a].recArr=[];else{for(var o=0;o<i.length;o++)i[o].recArr=[];for(var s=0;s<n;s++){var x,l,c=r[s],f=this.timeToSecond(c.startTime),h=this.timeToSecond(c.endTime),u=Math.floor(f/(60*t))*t;x=(f-60*u)/t;var d=Math.floor(h/(60*t))*t;l=(h-60*d)/t;for(var _=0;_<i.length;_++)if(i[_].id===u&&i[_].id===d){var p=l-x,m=60-l;i[_].recArr.push({height:p,top:m})}else i[_].id===u?i[_].recArr.push({height:60-x,top:0}):i[_].id===d?i[_].recArr.push({height:l,top:60-l}):i[_].id>u&&i[_].id<d&&i[_].recArr.push({height:60,top:0})}}this.setState({timeArr:i}),this.renderDateLine()},t.renderDateLine=function(){var e=this,t=this.state.timeArr;this.$container.innerHTML="",t.forEach((function(t){var r=document.createElement("div");r.setAttribute("class",Am+"-time-item"),r.style="margin-top: "+t.marginTop+"px; margin-bottom: "+t.marginBottom+"px; border-right-color: "+e.options.lineBgColor+";";var i='<div class="'+Am+'-scale" style="border-bottom-color: '+e.options.scaleLineColor+';"></div>\n                          <div class="'+Am+'-scale" style="border-bottom-color: '+e.options.scaleLineColor+';"></div>\n                          <div class="'+Am+'-scale" style="border-bottom-color: '+e.options.scaleLineColor+';"></div>\n                          <div class="'+Am+'-scale" style="border-bottom-color: '+e.options.scaleLineColor+';"></div>\n                          <div class="'+Am+'-scale" style="border-bottom-color: '+e.options.scaleLineColor+';"></div>\n                          <div class="'+Am+'-scale" style="width:10px; border-bottom-color: '+e.options.scaleLineColor+';"></div>';t.recArr.forEach((function(t){i+='<div class="'+Am+'-valid" style="height: '+t.height+"px;background-color:"+e.options.fragmentColor+"; top: "+t.top+'px"></div>'})),i+="<div id="+t.label+' style="position: relative; top: 51px; left: 40%"> '+t.current+"</div>",r.innerHTML=i,e.$container.appendChild(r)}))},t.primaryOffsetH=function(){var e=this.state,t=e.start,r=e.scale,i=e.timeArr[0].current,n=this.timeToSecond(i)-this.timeToSecond(t),a=Math.ceil(n/r)+60;this.setState({scrollTop:a})},t.currentOffsetH=function(){var e=this.state,t=e.current,r=e.scale,i=e.timeArr[0].current,n=this.timeToSecond(i)-this.timeToSecond(t),a=Math.ceil(n/r)+60;this.setState({scrollTop:a})},t.rectTopToTime=function(e){var t,r,i=this.state.scale,n=Math.floor(e/60),a=e-60*n;if(0===a)t=this.state.timeArr[n-1].current,r=0;else{var o=this.state.timeArr[n].current,s=this.timeToMinute(o),x=(60-a)*i,l=Math.floor(x/60)+s,c=60*Math.floor(x/60);r=Math.ceil(x-c),t=this.minuteToTime(l)}this.setState({current:t+":"+(r>9?r:"0"+r),scrollTop:e})},t.setCurrent=function(e){this.dragging||("number"==typeof e&&(e=Ox(e).format("HH:mm:ss")),this.setState({current:e}),this.currentOffsetH())},t.secondCountDown=function(){var e=this.state.current.split(":"),t=60*Number(e[0])*60+60*Number(e[1])+Number(e[2])+1,r=Math.floor(t/3600),i=Math.floor((t-3600*r)/60),n=t-3600*r-60*i;this.setState({current:(r>9?r:"0"+r)+":"+(i>9?i:"0"+i)+":"+(n>9?n:"0"+n)})},e}();function Bm(e){var t=new Date(e),r=t.getHours(),i=t.getMinutes(),n=t.getSeconds();return(r>9?r:"0"+r)+":"+(i>9?i:"0"+i)+":"+(n>9?n:"0"+n)}function Om(e,t,r){e.addEventListener("click",(function(i){for(var n=i.target||i.srcElement;;){if(n===e)break;if(n.classList.contains(t.replace(/^\./,""))){r(n);break}if(!n.parentNode)break;n=n.parentNode}}),!1)}e(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-calendar{height:var(--ezui-footer-height,48px);line-height:var(--ezui-footer-height,48px)}.ezui-footer-mobile-extend-date{margin:20px 0;position:relative}.ezui-mobile-extend-date-title{color:#2c2c2c;font-size:16px;font-weight:700;height:40px;line-height:40px;text-align:center}.ezui-mobile-extend-date-container{height:40px;position:absolute;right:10px;top:0;width:40px;z-index:10}.ezui-mobile-extend-date-container>div{height:40px;position:relative;width:40px}.ezui-mobile-extend-date-container label{display:inline-block;height:40px}.ezui-mobile-extend-date-container input[type=date]{border-width:0;display:inline-block;height:40px;opacity:0;position:absolute;right:0;top:0;width:40px}");var Hm="".concat(of,"-datepicker"),Nm="".concat(Hm,"-cell-selected"),Vm=["01","02","03","04","05","06","07","08","09","10","11","12"];function Ym(e,t){void 0===t&&(t={});var r=t.insertAt;if(e&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===r&&i.firstChild?i.insertBefore(n,i.firstChild):i.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}}function Um(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{showSuperIcon:!0};return t=Object.assign({},{showSuperIcon:!0},t),'<div class="'.concat(Hm,'-header">\n        ').concat(t.showSuperIcon?'<div class="'.concat(Hm,'-header-super-prev-btn"><span class="').concat(Hm,'-super-prev-icon"></span></div>'):"","\n        ").concat(t.showIcon?'<div class="'.concat(Hm,'-header-prev-btn"><span class="').concat(Hm,'-prev-icon"></span></div>'):"",'\n        <div class="').concat(Hm,'-header-view">\n            ').concat(e(),"\n        </div>\n        ").concat(t.showIcon?'<div class="'.concat(Hm,'-header-next-btn"><span class="').concat(Hm,'-next-icon"></span></div>'):"","\n        ").concat(t.showSuperIcon?'<div class="'.concat(Hm,'-header-super-next-btn"><span class="').concat(Hm,'-super-next-icon"></span></div>'):"","\n    </div>")}function Xm(e){return(e=+e)<=9&&(e="0".concat(e)),"".concat(e)}function Wm(e,t){return Array.apply(null,{length:Math.ceil(e.length/t)}).map((function(r,i){return e.slice(i*t,(i+1)*t)}))}function zm(e,t,r){e.addEventListener("click",(function(i){for(var n=i.target||i.srcElement,a=Array.from(e.querySelectorAll(t));n&&n!==e;){if(a.findIndex((function(e){return e===n}))>-1){r(n);break}n=n.parentNode}i.stopPropagation()}),!1)}Ym('.ezui-datepicker{cursor:unset;line-height:normal}.ezui-datepicker-layout{align-items:stretch;display:flex;flex-wrap:nowrap}.ezui-datepicker-panel{display:flex;flex-direction:row}.ezui-datepicker-date-panel{display:flex;flex-direction:column}.ezui-datepicker-month-panel,.ezui-datepicker-month-panel .ezui-datepicker-header,.ezui-datepicker-year-panel,.ezui-datepicker-year-panel .ezui-datepicker-header{width:230px}.ezui-datepicker-month-panel .ezui-datepicker-body,.ezui-datepicker-year-panel .ezui-datepicker-body{padding:1px 8px}.ezui-datepicker-month-panel table,.ezui-datepicker-year-panel table{width:100%}.ezui-datepicker-month-panel .ezui-datepicker-cell,.ezui-datepicker-year-panel .ezui-datepicker-cell{height:52px}.ezui-datepicker-month-panel .ezui-datepicker-cell-inner,.ezui-datepicker-year-panel .ezui-datepicker-cell-inner{padding:0 8px}.ezui-datepicker-body{color:var(--ezui-date-picker-color,rgba(0,0,0,.88));padding:0 10px}.ezui-datepicker-body table,.ezui-datepicker-body tbody,.ezui-datepicker-body td,.ezui-datepicker-body th,.ezui-datepicker-body thead,.ezui-datepicker-body tr{border:0;border-color:transparent;border-spacing:0;box-sizing:border-box;margin:0;padding:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezui-datepicker-body td,.ezui-datepicker-body th{height:30px;width:30px}.ezui-datepicker-content{min-width:210px}.ezui-datepicker-cell{box-sizing:border-box;color:rgba(0,0,0,.25);cursor:pointer;padding:0;position:relative;text-align:center}.ezui-datepicker-cell:hover .ezui-datepicker-cell-inner{background-color:rgba(0,0,0,.04)}.ezui-datepicker-cell:before{content:"";height:22px;inset-inline-end:0;inset-inline-start:0;position:absolute;top:50%;transform:translateY(-50%);transition:all .3s;z-index:1}.ezui-datepicker-cell-in-view{color:var(--ezui-date-picker-color,rgba(0,0,0,.88))}.ezui-datepicker-cell-in-view.ezui-datepicker-cell-selected .ezui-datepicker-cell-inner{background-color:var(--ezui-date-picker-primary-color,#1677ff)!important;color:#fff}.ezui-datepicker-cell-in-view.ezui-datepicker-cell-today .ezui-datepicker-cell-inner:before{border:1px solid var(--ezui-date-picker-primary-color,#1677ff);border-radius:var(--data-picker-border-radius,2px);bottom:0;content:"";inset-inline-end:0;inset-inline-start:0;position:absolute;top:0;z-index:1}.ezui-datepicker-cell-inner{border-radius:var(--data-picker-border-radius,2px);display:inline-block;height:22px;line-height:22px;min-width:22px;position:relative;transition:background .2s,border .2s;z-index:2}.ezui-datepicker-cell-disable{color:rgba(0,0,0,.25)!important;cursor:not-allowed!important}.ezui-datepicker-cell-disable .ezui-datepicker-cell-inner{cursor:not-allowed!important}.ezui-datepicker-cell-disable.ezui-datepicker-cell-today .ezui-datepicker-cell-inner:before{border-color:var(--ezui-date-picker-disable-border-color,rgba(0,0,0,.25))!important}.ezui-datepicker-cell-disable:hover:not(.ezui-datepicker-cell-selected) .ezui-datepicker-cell-inner{background-color:transparent!important}.ezui-datepicker-cell-disable.ezui-datepicker-cell-selected .ezui-datepicker-cell-inner{background-color:var(--ezui-date-picker-disable-border-color,rgba(0,0,0,.25))!important}.ezui-datepicker-cell-disable.ezui-datepicker-cell-selected .ezui-datepicker-cell-inner:before{border-color:transparent!important}.ezui-datepicker-today{color:var(--ezui-date-picker-primary-color,#1677ff);cursor:pointer}'),Ym('.ezui-datepicker-btn{background-image:none;background:transparent;border:1px solid transparent;border-radius:var(--ezui-data-picker-border-radius,2px);box-shadow:0 2px 0 rgba(5,145,255,.1);color:var(--ezui-date-picker-primary-color,#1677ff);cursor:pointer;display:inline-block;font-weight:400;height:20px;line-height:19px;outline:none;padding:0 4px;position:relative;text-align:center;touch-action:manipulation;transition:all .2s cubic-bezier(.645,.045,.355,1);-webkit-user-select:none;-moz-user-select:none;user-select:none;white-space:nowrap}.ezui-datepicker-btn-primary{background-color:var(--ezui-date-picker-primary-color,#1677ff);border:1px solid transparent;box-shadow:0 2px 0 rgba(5,145,255,.1);color:#fff}.ezui-datepicker-btn-disable{background-color:rgba(0,0,0,.04);border-color:#d9d9d9;color:rgba(0,0,0,.25);cursor:not-allowed}.ezui-datepicker-container{background:#fff;border-radius:var(--ezui-data-picker-border-radius,2px);box-shadow:0 3px 6px -4px rgba(0,0,0,.05);box-shadow:0 3px 16px 0 rgba(0,0,0,.03);box-shadow:0 9px 28px 8px rgba(0,0,0,.05);box-sizing:border-box;display:inline-flex;flex-direction:column;font-size:var(--ezui-date-picker-font-size,14px);margin:0;overflow:hidden;padding:0;vertical-align:top}.ezui-datepicker-container li,.ezui-datepicker-container ul{border:0;box-sizing:border-box;list-style:none;margin:0;padding:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezui-datepicker-header,.ezui-datepicker-time-header{border-bottom:1px solid var(--ezui-date-picker-border-color,rgba(5,5,5,.06));box-sizing:border-box;color:var(--ezui-date-picker-color,rgba(0,0,0,.88));display:inline-flex;flex-direction:row;height:var(--ezui-date-picker-header-height,34px);padding:0 8px;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezui-datepicker-header{color:var(--ezui-date-picker-color,rgba(0,0,0,.88));font-weight:600}.ezui-datepicker-header-next-btn,.ezui-datepicker-header-prev-btn,.ezui-datepicker-header-super-next-btn,.ezui-datepicker-header-super-prev-btn{background:0 0;border:0;box-sizing:border-box;color:rgba(0,0,0,.45);cursor:pointer;font-size:var(--ezui-date-picker-font-size,14px);line-height:var(--ezui-date-picker-header-height,34px);min-width:1.6em;padding:0;text-align:center;transition:color .2s}.ezui-datepicker-header-next-btn:hover,.ezui-datepicker-header-prev-btn:hover,.ezui-datepicker-header-super-next-btn:hover,.ezui-datepicker-header-super-prev-btn:hover{color:var(--ezui-date-picker-color,rgba(0,0,0,.88))}.ezui-datepicker-next-icon,.ezui-datepicker-prev-icon,.ezui-datepicker-super-next-icon,.ezui-datepicker-super-prev-icon{display:inline-block;height:7px;position:relative;transform:rotate(-45deg);width:7px}.ezui-datepicker-next-icon:before,.ezui-datepicker-prev-icon:before,.ezui-datepicker-super-next-icon:before,.ezui-datepicker-super-prev-icon:before{border:0 solid;border-block-end-width:0;border-block-start-width:1.5px;border-inline-end-width:0;border-inline-start-width:1.5px;content:"";display:inline-block;height:7px;inset-inline-start:0;position:absolute;top:0;width:7px}.ezui-datepicker-super-next-icon:after,.ezui-datepicker-super-prev-icon:after{border:0 solid;border-block-end-width:0;border-block-start-width:1.5px;border-inline-end-width:0;border-inline-start-width:1.5px;content:"";display:inline-block;height:7px;inset-inline-start:4px;position:absolute;top:4px;width:7px}.ezui-datepicker-next-icon,.ezui-datepicker-super-next-icon{transform:rotate(135deg)}.ezui-datepicker-header-view{display:inline-flex;flex:1 1 auto;flex-direction:row;justify-content:center;text-align:center}.ezui-datepicker-header-month-btn,.ezui-datepicker-header-view,.ezui-datepicker-header-year-btn{height:var(--ezui-date-picker-header-height,34px);line-height:var(--ezui-date-picker-header-height,34px)}.ezui-datepicker-header-month-btn,.ezui-datepicker-header-year-btn{border:0;box-sizing:border-box;color:var(--ezui-date-picker-color,rgba(0,0,0,.88));cursor:pointer;font-size:inherit;font-weight:600;padding:0;transition:color .2s}.ezui-datepicker-header-month-btn:hover,.ezui-datepicker-header-year-btn:hover{color:var(--ezui-date-picker-primary-color,#1677ff)}.ezui-datepicker-header-month-btn{margin-left:8px}');var Gm="".concat(Hm,"-year-container"),Jm=function(){function e(t){a(this,e),this.options=t,this._current=Ox(this.options.current||new Date),this._renderCurrent=this._current,this._onHeaderSuperPrevBtn(),this._onHeaderSuperNextBtn(),this._onCell()}return s(e,[{key:"setCurrent",value:function(e){this._current=Ox(e),this._renderCurrent=this._current}},{key:"_onCell",value:function(){var e=this;zm(this.options.container,".".concat(Gm," .").concat(Hm,"-cell"),(function(t){if(!t.classList.contains("".concat(Hm,"-cell-disable"))){var r=t.getAttribute("title");e.setCurrent(Ox(r)),"function"==typeof e.options.onChange&&e.options.onChange(e._current)}}))}},{key:"_onHeaderSuperPrevBtn",value:function(){var e=this;zm(this.options.container,".".concat(Gm," .").concat(Hm,"-header-super-prev-btn"),(function(){e._renderCurrent=e._renderCurrent.add(-10,"year"),e.render()}))}},{key:"_onHeaderSuperNextBtn",value:function(){var e=this;zm(this.options.container,".".concat(Gm," .").concat(Hm,"-header-super-next-btn"),(function(){e._renderCurrent=e._renderCurrent.add(10,"year"),e.render()}))}},{key:"render",value:function(e){this._renderCurrent=e||this._renderCurrent,this.options.container.innerHTML='<div class="'.concat(Hm,"-container ").concat(Gm,'">\n      <div class="').concat(Hm,'-layout">\n        <div class="').concat(Hm,'-panel">\n            ').concat(this._renderYear(this._renderCurrent.year()),"\n        </div>\n      </div>\n    </div>")}},{key:"_renderYear",value:function(e){var t=this,r=this._createYearsList(e);return'<div class="'.concat(Hm,'-year-panel">\n                ').concat(Um((function(){return"".concat(r[1],"年 - ").concat(r[r.length-2],"年")})),'\n                <div class="').concat(Hm,'-body">\n                    <table class="').concat(Hm,'-content">\n                    <tbody>\n                        ').concat(Wm(r,3).slice(0,4).map((function(r,i){return"<tr>\n                                        ".concat(r.map((function(r,n){var a=0===i&&0===n||3===i&&2===n?"".concat(Hm,"-cell ").concat(Hm,"-cell-year"):"".concat(Hm,"-cell ").concat(Hm,"-cell-year ").concat(Hm,"-cell-in-view");return+r==+t._current.format("YYYY")&&(a=a+" "+Nm),"function"==typeof t.options.disabledDate&&t.options.disabledDate(Ox("".concat(e)))&&(a=a+" "+"".concat(Hm,"-cell-disable")),'<td title="'.concat(r,'" class="').concat(a,'">\n                                                    ').concat(t.options.yearRender&&"function"==typeof t.options.yearRender?t.options.yearRender(r):'<span class="'.concat(Hm,'-cell-inner">').concat(+r,"</span>"),"\n                                                    </td>")})).join(""),"\n                                    </tr>")})).join(""),"\n                    </tbody>\n                    </table>\n                </div>\n            </div>")}},{key:"_createYearsList",value:function(e){for(var t=[],r=e%10+1;r>=0;r--)t.push(e-r);for(var i=1;t.length<12;i++)t.push(e+i);return t}}]),e}(),Zm={current:new Date},jm="".concat(Hm,"-month-container"),qm=function(){function e(t){a(this,e),this.options=Object.assign({},Zm,t||{}),this._current=Ox(this.options.current||new Date),this._onHeaderSuperPrevBtn(),this._onHeaderSuperNextBtn(),this._onCell()}return s(e,[{key:"setCurrent",value:function(e){this._current=Ox(e)}},{key:"_onCell",value:function(){var e=this;zm(this.options.container,".".concat(jm," .").concat(Hm,"-cell"),(function(t){var r=e.options.container;if(!t.classList.contains("".concat(Hm,"-cell-disable"))){var i=r.querySelector(".".concat(Nm));i&&i.classList.remove(Nm),t.classList.add(Nm);var n=t.getAttribute("title");e._current=Ox(n),"function"==typeof e.options.onChange&&e.options.onChange(e._current)}}))}},{key:"_onHeaderSuperPrevBtn",value:function(){var e=this;zm(this.options.container,".".concat(jm," .").concat(Hm,"-header-super-prev-btn"),(function(){e._current=e._current.add(-1,"year"),e.render(Ox(e._current))}))}},{key:"_onHeaderSuperNextBtn",value:function(){var e=this;zm(this.options.container,".".concat(jm," .").concat(Hm,"-header-super-next-btn"),(function(){e._current=e._current.add(1,"year"),e.render(e._current)}))}},{key:"render",value:function(e){this.setCurrent(e),this.options.container.innerHTML='<div class="'.concat(Hm,"-container ").concat(jm,'">\n      <div class="').concat(Hm,'-layout">\n        <div class="').concat(Hm,'-panel">\n            ').concat(this._renderMonth(this._current.year()),"\n        </div>\n      </div>\n    </div>")}},{key:"_renderMonth",value:function(e){var t=this;return'<div class="'.concat(Hm,'-year-panel">\n                ').concat(Um((function(){return'<span class="'.concat(Hm,'-header-year-btn" title="').concat(e,'">').concat(e,"年</span>")})),'\n                <div class="').concat(Hm,'-body">\n                    <table class="').concat(Hm,'-content">\n                    <tbody>\n                        ').concat(Wm(Vm,3).slice(0,4).map((function(r){return"<tr>\n                                        ".concat(r.map((function(r){var i="".concat(Hm,"-cell ").concat(Hm,"-cell-month ").concat(Hm,"-cell-in-view");return+r==+t._current.format("MM")&&(i=i+" "+Nm),"function"==typeof t.options.disabledDate&&t.options.disabledDate(Ox("".concat(e,"-").concat(r)))&&(i=i+" "+"".concat(Hm,"-cell-disable")),'<td title="'.concat(e,"-").concat(r,'" class="').concat(i,'">\n                                                    ').concat(t.options.monthRender&&"function"==typeof t.options.monthRender?t.options.monthRender(r):'<span class="'.concat(Hm,'-cell-inner">').concat(r,"</span>"),"\n                                                    </td>")})).join(""),"\n                                    </tr>")})).join(""),"\n                    </tbody>\n                    </table>\n                </div>\n            </div>")}}]),e}();function $m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Km(e,t-=1),n=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(new Date(e,t).getDay()-r+7)%7}(e,t,r),a=[],o=1;o<=n+i;o++){var s=o-n;s<1?a.push("".concat(0===t?e-1:e,"-").concat(Xm((t+12-1)%12+1),"-").concat(Xm(Km(e,t-1)+s))):s>i?a.push("".concat(11===t?e+1:e,"-").concat(Xm((t+1)%12+1),"-").concat(s-i)):a.push("".concat(e,"-").concat(Xm(t+1),"-").concat(Xm(s)))}for(var x=1;a.length<42;)a.push("".concat(11===t?e+1:e,"-").concat(Xm((t+1)%12+1),"-").concat(Xm(x++)));return a}(e.year(),e.month()+1,t)}function Km(e,t){return new Date(e,t+1,0).getDate()}function Qm(e){return'<div class="'.concat(Hm,'-footer">\n  <div>').concat(e.showToday?'<span class="'.concat(Hm,'-today">今天</span>'):"","</div>\n  ").concat(e.onOk?'<div><button class="'.concat(Hm,"-btn ").concat(Hm,"-btn-primary ").concat(Hm,'-btn-ok">确定</button></div>'):"","\n</div>")}Ym(".ezui-datepicker-btn{background-image:none;background:transparent;border:1px solid transparent;border-radius:var(--ezui-data-picker-border-radius,2px);box-shadow:0 2px 0 rgba(5,145,255,.1);color:var(--ezui-date-picker-primary-color,#1677ff);cursor:pointer;display:inline-block;font-weight:400;height:20px;line-height:19px;outline:none;padding:0 4px;position:relative;text-align:center;touch-action:manipulation;transition:all .2s cubic-bezier(.645,.045,.355,1);-webkit-user-select:none;-moz-user-select:none;user-select:none;white-space:nowrap}.ezui-datepicker-btn-primary{background-color:var(--ezui-date-picker-primary-color,#1677ff);border:1px solid transparent;box-shadow:0 2px 0 rgba(5,145,255,.1);color:#fff}.ezui-datepicker-btn-disable{background-color:rgba(0,0,0,.04);border-color:#d9d9d9;color:rgba(0,0,0,.25);cursor:not-allowed}.ezui-datepicker-container{background:#fff;border-radius:var(--ezui-data-picker-border-radius,2px);box-shadow:0 3px 6px -4px rgba(0,0,0,.05);box-shadow:0 3px 16px 0 rgba(0,0,0,.03);box-shadow:0 9px 28px 8px rgba(0,0,0,.05);box-sizing:border-box;display:inline-flex;flex-direction:column;font-size:var(--ezui-date-picker-font-size,14px);margin:0;overflow:hidden;padding:0;vertical-align:top}.ezui-datepicker-container li,.ezui-datepicker-container ul{border:0;box-sizing:border-box;list-style:none;margin:0;padding:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezui-datepicker-time-panel{border-inline-start:1px solid var(--ezui-date-picker-border-color,rgba(5,5,5,.06));display:flex;flex-direction:column}.ezui-datepicker-time-header{color:var(--ezui-date-picker-color,rgba(0,0,0,.88));display:flex;font-weight:600;height:var(--ezui-date-picker-header-height,34px);justify-content:center;line-height:var(--ezui-date-picker-header-height,34px);text-align:center;width:auto}.ezui-datepicker-time-body{display:inline-flex;flex-direction:row}.ezui-datepicker-time-body ul{border-inline-start:1px solid rgba(5,5,5,.06)!important;box-sizing:border-box;display:inline-flex;flex-direction:column;height:208px;margin:1px 0!important;overflow-x:hidden;overflow-y:hidden;padding-bottom:182px!important;position:relative;scrollbar-color:rgba(0,0,0,.45) transparent;scrollbar-width:thin;width:40px}.ezui-datepicker-time-body ul:first-child{border-inline-start:0 solid rgba(5,5,5,.06)!important}.ezui-datepicker-time-body ul:hover{overflow-y:auto}.ezui-datepicker-time-body ul::-webkit-scrollbar{background-color:transparent;color:transparent;width:var(--data-picker-scrollbar-width,8px)}.ezui-datepicker-time-body ul::-webkit-scrollbar-thumb{background-color:transparent;border-radius:4px}.ezui-datepicker-time-body ul:hover::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,.45);color:transparent}.ezui-datepicker-time-body ul:first-child{border-inline-color:transparent;border-inline-start-width:0}.ezui-datepicker-time-body ul li{margin:0 4px}.ezui-datepicker-time-body ul li.ezui-datepicker-time-cell-selected div{background:#e6f4ff}.ezui-datepicker-time-cell-inner{border-radius:4px;box-sizing:border-box;color:var(--ezui-date-picker-color);cursor:pointer;display:block;height:26px;line-height:26px;margin:0;padding-left:7px;text-align:left;transition:background .2s;width:31px}.ezui-datepicker-time-cell-inner:hover{background-color:rgba(0,0,0,.04)}"),Ym(".ezui-datepicker-btn{background-image:none;background:transparent;border:1px solid transparent;border-radius:var(--ezui-data-picker-border-radius,2px);box-shadow:0 2px 0 rgba(5,145,255,.1);color:var(--ezui-date-picker-primary-color,#1677ff);cursor:pointer;display:inline-block;font-weight:400;height:20px;line-height:19px;outline:none;padding:0 4px;position:relative;text-align:center;touch-action:manipulation;transition:all .2s cubic-bezier(.645,.045,.355,1);-webkit-user-select:none;-moz-user-select:none;user-select:none;white-space:nowrap}.ezui-datepicker-btn-primary{background-color:var(--ezui-date-picker-primary-color,#1677ff);border:1px solid transparent;box-shadow:0 2px 0 rgba(5,145,255,.1);color:#fff}.ezui-datepicker-btn-disable{background-color:rgba(0,0,0,.04);border-color:#d9d9d9;color:rgba(0,0,0,.25);cursor:not-allowed}.ezui-datepicker-container{background:#fff;border-radius:var(--ezui-data-picker-border-radius,2px);box-shadow:0 3px 6px -4px rgba(0,0,0,.05);box-shadow:0 3px 16px 0 rgba(0,0,0,.03);box-shadow:0 9px 28px 8px rgba(0,0,0,.05);box-sizing:border-box;display:inline-flex;flex-direction:column;font-size:var(--ezui-date-picker-font-size,14px);margin:0;overflow:hidden;padding:0;vertical-align:top}.ezui-datepicker-container li,.ezui-datepicker-container ul{border:0;list-style:none;margin:0;padding:0}.ezui-datepicker-container li,.ezui-datepicker-container ul,.ezui-datepicker-footer{box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezui-datepicker-footer{align-items:center;border-top:1px solid rgba(5,5,5,.06);color:rgba(0,0,0,.88);display:inline-flex;flex-direction:row;height:var(--ezui-date-picker-header-height,34px);justify-content:space-between;padding:4px 12px}");var eg="".concat(Hm,"-time-container"),tg="".concat(Hm,"-time-cell"),rg="".concat(tg,"-selected"),ig=function(){for(var e=[],t=0;t<24;t++)e.push(Xm(t));return e}(),ng=function(){for(var e=[],t=0;t<60;t++)e.push(Xm(t));return e}(),ag=function(){for(var e=[],t=0;t<60;t++)e.push(Xm(t));return e}(),og={onOk:function(){},showHeader:!1},sg=function(){function e(t){a(this,e),this.options=Object.assign({},og,t||{}),this._current=this.options.current?Ox(this.options.current):null,this._times=this._current?this._current.format("HH:mm:ss").split(":"):[],this._activeItem(),this._onCell(),this._onOk()}return s(e,[{key:"setCurrent",value:function(e){this._current=e?Ox(e):this._current,this._times=this._current?this._current.format("HH:mm:ss").split(":"):[],this._activeItem()}},{key:"_onCell",value:function(){var e=this;zm(this.options.container,".".concat(tg),(function(t){if(!t.classList.contains("".concat(Hm,"-cell-disable"))){var r=t.getAttribute("data-type"),i=t.getAttribute("data-title");e._times=["hour"===r?i:e._times[0]||"00","minute"===r?i:e._times[1]||"00","second"===r?i:e._times[2]||"00"],e._current=(e._current||Ox()).set("hour",+e._times[0]).set("minute",+e._times[1]).set("second",+e._times[2]),e._activeItem(),"function"==typeof e.options.onChange&&e.options.onChange(e._current)}}))}},{key:"_onOk",value:function(){var e=this;zm(this.options.container,".".concat(eg," .").concat(Hm,"-btn-ok"),(function(t){t.classList.contains("".concat(Hm,"-disable"))||"function"==typeof e.options.onOk&&e.options.onOk(e._current)}))}},{key:"_activeItem",value:function(){var e,t,r,i=this._times;if(i[0]){var n=this.options.container.querySelector(".".concat(Hm,'-time-hour[data-title="').concat(i[0],'"]'));n&&x(n)}if(i[1]){var a=this.options.container.querySelector(".".concat(Hm,'-time-minute[data-title="').concat(i[1],'"]'));a&&x(a)}if(i[2]){var o=this.options.container.querySelector(".".concat(Hm,'-time-second[data-title="').concat(i[2],'"]'));o&&x(o)}var s=this.options.container.querySelector(".".concat(Hm,"-time-header"));function x(e){var t,r=null===(t=e.parentElement)||void 0===t?void 0:t.querySelector(".".concat(rg));r&&r.classList.remove(rg),e.classList.add(rg),e.scrollIntoView({behavior:"smooth"})}s&&(s.innerHTML=this._current?"<span>".concat(null===(e=this._current)||void 0===e?void 0:e.format("HH"),":").concat(null===(t=this._current)||void 0===t?void 0:t.format("mm"),":").concat(null===(r=this._current)||void 0===r?void 0:r.format("ss"),"</span>"):"")}},{key:"renderLayoutString",value:function(e){var t=this;return this.setCurrent(e),setTimeout((function(){if(t._current){var e=t._current.format("HH:mm:ss").split(":"),r=t.options.container.querySelector(".".concat(Hm,"-time-hour[data-title='").concat(e[0],"']"));r&&r.scrollIntoView();var i=t.options.container.querySelector(".".concat(Hm,"-time-minute[data-title='").concat(e[1],"']"));i&&i.scrollIntoView();var n=t.options.container.querySelector(".".concat(Hm,"-time-second[data-title='").concat(e[2],"']"));n&&n.scrollIntoView()}}),0),this._renderTime()}},{key:"render",value:function(e){this.setCurrent(e),this.options.container.innerHTML='<div class="'.concat(Hm,"-container ").concat(eg,'">\n                                            <div class="').concat(Hm,'-layout">').concat(this.renderLayoutString(),"</div>\n                                            ").concat("function"==typeof this.options.onOk?Qm({onOk:this.options.onOk}):"","\n                                        </div>")}},{key:"_renderTime",value:function(){var e=this._times;return'<div class="'.concat(Hm,"-panel ").concat(Hm,'-time-panel">\n                ').concat(this.options.showHeader?'<div class="'.concat(Hm,'-time-header">\n                    ').concat(3===e.length?"<span>".concat(e[0],":").concat(e[1],":").concat(e[2],"</span>"):"","\n                    </div>"):"",'\n             <div class="').concat(Hm,'-time-body">\n               <ul class="').concat(Hm,'-time-column"> \n                 ').concat(ig.map((function(t){var r=t===e[0]?rg:"";return'<li class="'.concat(tg," ").concat(Hm,"-time-hour ").concat(r,'" data-title="').concat(t,"\" data-type='hour'><div class=\"").concat(tg,'-inner">').concat(t,"</div></li>")})).join(""),'\n               </ul>\n               <ul class="').concat(Hm,'-time-column">\n                 ').concat(ng.map((function(t){var r=t===e[1]?rg:"";return'<li class="'.concat(tg," ").concat(Hm,"-time-minute ").concat(r,'" data-title="').concat(t,"\" data-type='minute'><div class=\"").concat(tg,'-inner">').concat(t,"</div></li>")})).join(""),'\n               </ul>\n               <ul class="').concat(Hm,'-time-column">\n                 ').concat(ag.map((function(t){var r=t===e[2]?rg:"";return'<li class="'.concat(tg," ").concat(Hm,"-time-second ").concat(r,'" data-title="').concat(t,"\" data-type='second'><div class=\"").concat(tg,'-inner">').concat(t,"</div></li>")})).join(""),"\n               </ul>\n             </div>\n           </div>")}}]),e}(),xg="".concat(Hm,"-date-container"),lg=["日","一","二","三","四","五","六"],cg={startOfWeek:0,showTime:!0,showToday:!0,onOk:function(){}},fg=function(){function e(t){var r,i,n;a(this,e),this.options=Object.assign({},cg,t||{}),(null===(r=this.options)||void 0===r?void 0:r.startOfWeek)&&((null===(i=this.options)||void 0===i?void 0:i.startOfWeek)>6||(null===(n=this.options)||void 0===n?void 0:n.startOfWeek)<0)&&(this.options.startOfWeek=0),this._current=Ox(this.options.current||new Date),this._renderCurrent=this._current,this._selectedCurrent=this._current,this._onHeaderSuperPrevBtn(),this._onHeaderSuperNextBtn(),this._onHeaderPrevBtn(),this._onHeaderNextBtn(),this._onCell(),this._onToday(),this._onOk(),this._renderTime()}return s(e,[{key:"_renderTime",value:function(){var e=this;this.options.showTime&&(this._timeCls=new sg({container:this.options.container,current:this._selectedCurrent,showHeader:!0,onChange:function(t){e._selectedCurrent=Ox("".concat(e._selectedCurrent.format("YYYY-MM-DD")," ").concat(t.format("HH:mm:ss"))),e._renderCurrent=e._selectedCurrent}}))}},{key:"setCurrent",value:function(e){this._current=Ox(e),this._renderCurrent=this._current,this._selectedCurrent=this._current}},{key:"_onCell",value:function(){var e=this;zm(this.options.container,".".concat(xg," .").concat(Hm,"-cell"),(function(t){if(!t.classList.contains("".concat(Hm,"-cell-disable"))){var r=t.getAttribute("title");if(e._renderCurrent=Ox("".concat(r," ").concat(e._renderCurrent.format("HH:mm:ss"))),e._selectedCurrent=e._renderCurrent,t.parentNode){var i=e.options.container.querySelector(".".concat(Nm));i&&i.classList.remove(Nm),t.classList.add(Nm)}"function"==typeof e.options.onChange&&"function"!=typeof e.options.onOk&&(e.setCurrent(Ox("".concat(r," ").concat(e._selectedCurrent.format("HH:mm:ss")))),e.options.onChange(e._selectedCurrent)),e._reRenderDate()}}))}},{key:"_onHeaderSuperPrevBtn",value:function(){var e=this;zm(this.options.container,".".concat(xg," .").concat(Hm,"-header-super-prev-btn"),(function(){e._renderCurrent=e._renderCurrent.add(-1,"year"),e._reRenderDate()}))}},{key:"_onHeaderSuperNextBtn",value:function(){var e=this;zm(this.options.container,".".concat(xg," .").concat(Hm,"-header-super-next-btn"),(function(){e._renderCurrent=e._renderCurrent.add(1,"year"),e._reRenderDate()}))}},{key:"_onHeaderPrevBtn",value:function(){var e=this;zm(this.options.container,".".concat(xg," .").concat(Hm,"-header-prev-btn"),(function(){e._renderCurrent=e._renderCurrent.add(-1,"month"),e._reRenderDate()}))}},{key:"_onHeaderNextBtn",value:function(){var e=this;zm(this.options.container,".".concat(xg," .").concat(Hm,"-header-next-btn"),(function(){e._renderCurrent=e._renderCurrent.add(1,"month"),e._reRenderDate()}))}},{key:"_onToday",value:function(){var e=this;zm(this.options.container,".".concat(xg," .").concat(Hm,"-today"),(function(){var t=Ox(Ox().format("YYYY-MM-DD"));e.setCurrent(t),"function"==typeof e.options.onChange&&e.options.onChange(e._selectedCurrent)}))}},{key:"_onOk",value:function(){var e=this;zm(this.options.container,".".concat(xg," .").concat(Hm,"-btn-ok"),(function(t){t.classList.contains("".concat(Hm,"-disable"))||(e.setCurrent(e._selectedCurrent),"function"==typeof e.options.onOk&&e.options.onOk(e._selectedCurrent),"function"==typeof e.options.onChange&&e.options.onChange(e._selectedCurrent))}))}},{key:"render",value:function(e){this.setCurrent(e),this.options.container.innerHTML='<div class="'.concat(Hm,"-container ").concat(xg,'">\n        <div class="').concat(Hm,'-layout">\n          <div class="').concat(Hm,"-panel ").concat(Hm,'-date-panel">').concat(this._renderDate(e),"</div>\n          ").concat(this._timeCls?this._timeCls.renderLayoutString(e):"","\n        </div>\n        ").concat(Qm(this.options),"\n      </div>")}},{key:"_reRenderDate",value:function(){var e=this.options.container.querySelector(".".concat(Hm,"-date-panel"));e&&(e.innerHTML=this._renderDate(this._renderCurrent))}},{key:"_renderDate",value:function(e){var t=this,r=new Date,i=e.year(),n=e.month()+1,a=Wm($m(e,this.options.startOfWeek),7),o=[].concat(l(lg.slice(this.options.startOfWeek)),l(lg.slice(0,this.options.startOfWeek)));return"".concat(Um((function(){return'<span class="'.concat(Hm,'-header-year-btn">').concat(i,'年</span><span class="').concat(Hm,'-header-month-btn">').concat(n,"月</span>")}),{showIcon:!0}),'\n            <div class="').concat(Hm,'-body">\n              <table class="').concat(Hm,'-content">\n                <thead><tr>').concat(o.map((function(e){return"<th>".concat(e,"</th>")})).join(""),"</tr></thead>\n                <tbody>\n                  ").concat(a.slice(0,7).map((function(e){return"<tr>\n                                ".concat(e.map((function(e){var i=x(e.split("-"),3),a=i[0],o=i[1],s=i[2],l="function"==typeof t.options.disabledDate&&t.options.disabledDate(Ox(e));return'<td title="'.concat(e,'" class="').concat(["".concat(Hm,"-cell"),n===+o?"".concat(Hm,"-cell-in-view"):"",r.getFullYear()===+a&&r.getMonth()+1===+o&&r.getDate()===+s?"".concat(Hm,"-cell-today"):"",l?"".concat(Hm,"-cell-disable"):"",t._selectedCurrent.format("YYYY-MM-DD")===e?Nm:""].filter(Boolean).join(" "),'">').concat("function"==typeof t.options.dateRender?t.options.dateRender(Ox(e)):'<span class="'.concat(Hm,'-cell-inner">').concat(+s,"</span>"),"</td>")})).join(""),"\n                              </tr>")})).join(""),"\n                </tbody>\n              </table>\n            </div>")}}]),e}(),hg={getPopupContainer:function(){return document.body},position:"tr",open:!1,picker:"date",disableDate:function(){return!1}},ug=function(){function e(t){a(this,e),this.$datePicker=this._createCreateContainer(),this.options=Object.assign({},hg,null!=t?t:{}),this._current=Ox(t.current||new Date),this._renderCurrent=this._current,this._open=this.options.open,this._activePicker=this.options.picker,this.$container=this.options.getPopupContainer(),this.$container.appendChild(this.$datePicker),this._onHeaderYearMonthBtn(),this._onContainer(),this._createYearMonthDateTime(),this._open&&(this._switchPicker(this.options.picker),this.show()),this._onDocumentClick()}return s(e,[{key:"setCurrent",value:function(e){this.options.current=e,this._current=Ox(e),this._renderCurrent=this._current}},{key:"show",value:function(){this._switchPicker(this.options.picker),this.$datePicker.style.display="inline-block",this._position(),this._open=!0}},{key:"hide",value:function(){this.$datePicker.style.display="none",this._open=!1,this._renderCurrent=this._current}},{key:"_onHeaderYearMonthBtn",value:function(){var e=this;zm(this.$datePicker,".".concat(Hm,"-header-year-btn"),(function(){e._activePicker="year",e._switchPicker(e._activePicker)})),zm(this.$datePicker,".".concat(Hm,"-header-month-btn"),(function(){e._activePicker="month",e._switchPicker(e._activePicker)}))}},{key:"_onContainer",value:function(){var e=this;this.$container.addEventListener("click",(function(t){e._switchShowHide(),t.stopImmediatePropagation(),t.stopPropagation()}))}},{key:"_switchShowHide",value:function(){this._open?(this.hide(),this._open=!1):(this.show(),this._open=!0)}},{key:"_createCreateContainer",value:function(){var e=document.createElement("div");return e.classList.add(Hm),e.style.position="fixed",e.style.zIndex="1000",e.style.display="none",e}},{key:"_createYearMonthDateTime",value:function(){var e=this,t=this.$datePicker,r=this;this._calendarCls=new fg({container:t,current:this.options.current,showTime:this.options.showTime,showToday:this.options.showToday,disabledDate:this.options.disabledDate,dateRender:this.options.dateRender,onChange:function(t){e.setCurrent(t),"function"==typeof r.options.onChange&&r.options.onChange(r._current),r.hide()},onOk:function(t){e.setCurrent(t),"function"==typeof r.options.onOk&&r.options.onOk(r._current),r.hide()}}),this._monthCls=new qm({container:t,current:this.options.current,disabledDate:this.options.disabledDate,onChange:function(t){r._renderCurrent=e._renderCurrent.set("year",t.year()).set("month",t.month()),"month"===r.options.picker?(e.setCurrent(t),"function"==typeof r.options.onChange&&(r.options.onChange(r._current),r.options.current=r._current),r.hide()):(r._activePicker="date",r._switchPicker(r._activePicker))}}),this._yearCls=new Jm({container:t,current:this.options.current,disabledDate:this.options.disabledDate,onChange:function(t){r._renderCurrent=r._current.set("year",t.year()),"year"===r.options.picker?(e.setCurrent(t),"function"==typeof r.options.onChange&&(r.options.onChange(r._current),r.options.current=r._current),r.hide()):(r._activePicker="month",r._switchPicker(r._activePicker))}})}},{key:"_switchPicker",value:function(e){switch(e){case"year":this._yearCls.render(this._renderCurrent);break;case"month":this._monthCls.render(this._renderCurrent);break;default:this._calendarCls.render(this._renderCurrent)}this._position()}},{key:"_position",value:function(){var e=this.options.getPopupContainer();e.contains(this.$container)||e.appendChild(this.$container);var t=this.$container.getBoundingClientRect(),r=t.top,i=t.left,n=t.width,a=t.height,o=this.$datePicker.getBoundingClientRect(),s=o.width,x=o.height;if(0!==s&&0!==x){var l=r,c=i;switch(this.options.position){case"tl":l=r-x,c=i;break;case"top":l=r-x,c=i-(s/2-n/2);break;case"tr":l=r-x,c=i-s+n;break;case"bl":l=r+a,c=i;break;case"bottom":l=r+a,c=i-(s/2-n/2);break;case"br":l=r+a,c=i-s+n}this.$datePicker.style.top=l+"px",this.$datePicker.style.left=c+"px"}}},{key:"_onDocumentClick",value:function(){var e=this;document.addEventListener("click",(function(){e.hide()}))}}]),e}();function dg(){return dg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},dg.apply(this,arguments)}function _g(e,t){return e.service.getThemeDetailById(t).then((function(e){return function(e){var t,r,i=((null==(t=e.footer)?void 0:t.btnList)||[]).reduce((function(e,t){if(1!==t.isrender)return e;var r=Cm.find((function(e){return e.oldName===t.iconId||e.name===t.iconId}));return r&&e.push(dg({},r,{position:"left"===t.part?"fl":"fr"})),e}),[]),n=((null==(r=e.header)?void 0:r.btnList)||[]).reduce((function(e,t){if(1!==t.isrender)return e;var r=Cm.find((function(e){return e.oldName===t.iconId||e.name===t.iconId}));return r&&(delete r.oldName,e.push(dg({},r,{position:"left"===t.part?"hl":"hr"}))),e}),[]);n.push({name:"recTypes",position:"hr"});var a=[{name:"timeline",position:"bl"},{name:"datepicker",position:"br"}],o=e.header,s=e.footer;return{list:[].concat(n,i,a),poster:e.poster,autoFocus:e.autoFocus,headerStyle:o,footerStyle:s}}(e.data)}))}function pg(e){e.style.cssText="position: relative;";var t=e.querySelector("#"+function(e){var t=e.getAttribute("id");if(t)return t+"-container";throw new Error("Theme Container dom id is empty!")}(e));t&&e.removeChild(t);var r=e.querySelector("."+Ep);r&&e.removeChild(r);var i=e.querySelector("."+Dp);i&&e.removeChild(i);var n=e.querySelector("."+Op);n&&e.removeChild(n)}function mg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function gg(e,t){return gg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},gg(e,t)}function yg(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(r)return(r=r.call(e)).next.bind(r);if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return mg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(r):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mg(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0;return function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var bg,vg=function(e){function t(r){var i,n,a,o,s,x,l;return(i=e.call(this,t._mergeOptions(r))||this)._plugins={},i.mobileFullScreen=!1,r.isMobile&&(r.footerHeight=0),i.options=Object.assign({},Em,r),i.logger=p({level:null!=(l=null==(a=i.options)||null==(n=a.logger)?void 0:n.level)?l:"INFO",showTime:!1!==(null==(s=i.options)||null==(o=s.logger)?void 0:o.showTime),name:"REC"}),i.logger.log(i.options),"rec"!==i.urlInfo.type&&i.logger.error("Play url is "+i.options.url+", Non playback address!"),i.$container=document.getElementById(null==(x=i.options)?void 0:x.id),function(e,t){sf(e,of+"-rec-theme"),lf(e,{display:"flex",flexDirection:"column",position:"relative",justifyContent:"space-between",height:t.height+"px",width:t.width+"px"})}(i.$container,r),r.template?(i._renderHeaderFooter([],!0),_g(i,r.template).then((function(e){i._renderThemeData(e.list),i._renderThemeSkin(e)})).catch((function(e){i.logger.error(e),i._renderPlugins()}))):i._renderPlugins(),i}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gg(e,t)}(t,e);var r=t.prototype;return r.play=function(t){return t&&(this.options=Object.assign(this.options,t||{})),e.prototype.play.call(this,t)},r._renderThemeSkin=function(e){!function(e,t){var r,i=t.headerStyle,n=t.footerStyle;if(i){var a=e.$container.querySelector("."+Ep);a&&(lf(a,{background:i.backgroundColor,color:i.color}),e.$container.style.setProperty("--ezui-header-background-color",i.backgroundColor),e.$container.style.setProperty("--ezui-header-color",i.color),e.$container.style.setProperty("--ezui-header-active-color",i.backgroundColor))}if(n){var o=e.$container.querySelector("."+Mp);o&&(lf(o,{background:n.backgroundColor,color:n.color}),e.$container.style.setProperty("--ezui-footer-background-color",n.backgroundColor),e.$container.style.setProperty("--ezui-footer-color",n.color),e.$container.style.setProperty("--ezui-active-color",n.activeColor))}t.poster&&e.setPoster(t.poster),t.autoFocus>=0&&(null==(r=e.event)||r.emit("footer-autoFocus",t.autoFocus))}(this,e)},r._renderThemeData=function(e){var r=Fm(t.plugins,e);this._pluginsCall(),this._renderControls(r),this._registerEvents()},r._renderHeaderFooter=function(e,t){(t||e.header.length>0)&&function(e){var t=e,r=Ep,i=t.$container.querySelector(".".concat(r));if(i)return i;var n=document.createElement("div");return n.className=r,n.innerHTML='<div class="'.concat(Tp,'"></div><div class="').concat(Fp,'"></div>'),t.$container&&t.$container.prepend(n),n}.bind(this,this)(),(t||e.footer.length>0||e.bottom.length>0)&&function(e){var t=e,r=5e3,i=t.$container.querySelector(".".concat(Dp));if(i)return i;var n=null,a=document.createElement("div");function o(){n&&(clearTimeout(n),n=null),r>0&&(n=window.setTimeout((function(){r>0&&function(){var e=a.querySelector(".".concat(Mp));e&&r>0&&(e.className.includes(Ip)?xf(e,"".concat(Ip)):sf(e,"".concat(Ip)))}(),clearTimeout(n)}),r))}return a.className=Dp,function(){if(a&&(a.innerHTML='\n            <div class="'.concat(Mp,'">\n              <div class="').concat(wp,'"></div>\n              <div class="').concat(Ap,'"></div>\n            </div>\n            ').concat(t.options.isMobile?"":'<div class="'.concat(kp,'">\n              <div class="').concat(Lp,'"></div>\n              <div class="').concat(Bp,'"></div>\n            </div>')),t.$container&&(t.$container.appendChild(a),t.event.once("destroy",(function(){setTimeout((function(){n&&clearTimeout(n)}),10)}))),t.options.isMobile)){var e=document.createElement("div");e.className=Op,e.innerHTML='<div class="'.concat(Hp,'"></div>\n          <div class="').concat(Np,'"></div>\n          <div class="').concat(Vp,'"></div>'),t.$container&&t.$container.appendChild(e)}}(),o(),t.$container.addEventListener("click",(function(){var e=a.querySelector(".".concat(Mp));e&&(xf(e,"".concat(Ip)),o())}),!1),t.event.on("footer-autoFocus",(function(e){r=1e3*e;var t=a.querySelector(".".concat(Mp));t&&xf(t,"".concat(Ip))})),a}.bind(this,this)()},r._renderPlugins=function(){var e=Fm(t.plugins,this.options.controls);this._renderHeaderFooter(e),this._pluginsCall(),this._renderControls(e),this._registerEvents()},r._renderControls=function(e){e.header.length>0&&this._renderControl(e.header),e.footer.length>0&&this._renderControl(e.footer),e.bottom.length>0&&this._renderControl(e.bottom)},r._renderControl=function(e){for(var t,r=yg(e);!(t=r()).done;){var i=t.value,n=i.name;this.options.isMobile&&Rm.includes(n)||this._plugins[n]&&this._plugins[n](i)}},r._pluginsCall=function(){var e=this,r=this;t.plugins&&t.plugins.forEach((function(i,n){if(!e.options.isMobile||!Rm.includes(n)){var a=t.plugins.get(n);a&&"function"==typeof a&&(r._plugins[n]=a.bind(r,r))}}))},r._registerEvents=function(){var e=this;this.event.on("exitScreen",(function(){var t=e.$container.getElementsByClassName(Ep)[0];t&&xf(t,of+"-hidden");var r=e.$container.getElementsByClassName(Dp)[0];r&&xf(r,of+"-hidden");var i=e.$container.getElementsByClassName(Op)[0];i&&xf(i,of+"-hidden")}))},r.fullScreen=function(){var t=this;if(this.options.isMobile){i=this.$container,void 0===n&&(n=9999),new Promise((function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,r=i,a="";a+="width:"+t+"px;",a+="height:"+e+"px;",a+="-webkit-transform: rotate(90.001deg); transform: rotate(90.001deg);",a+="-webkit-transform-origin: "+e/2+"px "+e/2+"px;",a+="transform-origin: "+e/2+"px "+e/2+"px;",a+="position: fixed;top: 0;left: 0;z-index:"+n,r.style.cssText=r.style.cssText+a}));try{e.prototype.resize.call(this,document.documentElement.clientHeight,document.documentElement.clientWidth-32)}catch(e){}return this.mobileFullScreen=!0,Promise.resolve()}var r=this.$container.getElementsByClassName(Ep)[0];r&&sf(r,of+"-hidden");var i,n,a=this.$container.getElementsByClassName(Dp)[0];return a&&sf(a,of+"-hidden"),document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen?new Promise((function(r){e.prototype.resize.call(t,window.screen.width,window.screen.height).then((function(){return r()}))})):e.prototype.fullScreen.call(this,window.screen.width,window.screen.height)},r.webFullScreen=function(){return e.prototype.fullScreen.call(this,window.screen.width,window.screen.height-(this.options.footerHeight||0)-(this.options.headerHeight||0))},r.exitScreen=function(){if(this.options.isMobile&&this.mobileFullScreen){var t,r;this.mobileFullScreen=!1;try{var i,n;this.resize((null==(i=this.options)?void 0:i.width)||0,(null==(n=this.options)?void 0:n.height)||0)}catch(e){}return(a=this.$container,o=(null==(t=this.options)?void 0:t.width)||0,s=(null==(r=this.options)?void 0:r.height)||0,new Promise((function(){var e="";e+="width:"+o+"px;",e+="height:"+s+"px;",e+="-webkit-transform: none; transform: none;",e+="-webkit-transform-origin: 0 0;",e+="transform-origin: 0 0;",a.style.cssText=a.style.cssText+e}))).then((function(){})),Promise.resolve()}var a,o,s;return e.prototype.exitScreen.call(this)},r.resize=function(t,r){var i=this,n=0,a=0,o=this.$container.getElementsByClassName(Ep)[0];o&&(n=o.clientHeight);var s=this.$container.getElementsByClassName(Dp)[0];return s&&(a=s.clientHeight),e.prototype.resize.call(this,t,r-a-n).then((function(){return i.$container.style.width=t+"px",i.$container.style.height=r+"px",{width:t,height:r}}))},r.getOptions=function(){return this.options},r.destroy=function(){return pg(this.$container),e.prototype.destroy.call(this)},r.getVersion=function(){return t.version},t._mergeOptions=function(e){var t;if("string"!=typeof e.id)throw new Error("id is required!");var r=(null==(e=rf({},Em,e))?void 0:e.id)+"-container";this.$container=document.getElementById(null==e?void 0:e.id);var i=document.createElement("div");if(i.setAttribute("id",r),sf(this.$container,of+"-rec-theme",e.isMobile?of+"-theme-mobile":""),!this.$container)throw new Error("The id "+e.id+" dom node does not exist!");return null==(t=this.$container)||t.appendChild(i),rf({},e,{id:r,fullScreenEle:document.getElementById(null==e?void 0:e.id),height:(null==e?void 0:e.height)-(e.isMobile?32:(null==e?void 0:e.headerHeight)||0)-(e.isMobile?0:(null==e?void 0:e.footerHeight)||0)})},t}(Cp);return vg.installs([{name:"play",plugin:
/*
  *
  * @ezuikit/theme-plugin-play v0.1.0
  * Copyright (c) 2024-3-23 Ezviz-OpenBiz
  * Released under MIT the License.
  *
  */
function(e){return function(t){var r=t,i=!1!==r.options.autoPlay,n=document.createElement("div");sf(n,"".concat(Dp,"-item"),"".concat(of,"-disable"));var a=function(e){var t="play";return cf({name:t,svg:null!=e?e:'<svg\n        viewBox="1 1 19 19"\n        focusable="false"\n        data-icon="'.concat(t,'"\n        width="1em"\n        height="1em"\n        fill="currentColor"\n        aria-hidden="true"\n      >\n        <path d="M10.5,1.7c-4.9,0-8.8,4-8.8,8.8s4,8.8,8.8,8.8s8.8-4,8.8-8.8S15.4,1.7,10.5,1.7z M10.5,2.7c4.3,0,7.8,3.5,7.8,7.8s-3.5,7.8-7.8,7.8s-7.8-3.5-7.8-7.8S6.2,2.7,10.5,2.7z" />\n        <path d="M8.7,8C9,8,9.3,8.3,9.3,8.6v3.8C9.3,12.7,9,13,8.7,13C8.3,13,8,12.7,8,12.4V8.6C8,8.3,8.3,8,8.7,8z" />\n        <path d="M12.8,8c0.3,0,0.6,0.3,0.6,0.6v3.8c0,0.3-0.3,0.6-0.6,0.6c-0.3,0-0.6-0.3-0.6-0.6V8.6C12.2,8.3,12.5,8,12.8,8z" />\n      </svg>')})}(null==e?void 0:e.icon),o=function(e){var t="pause";return cf({name:t,svg:null!=e?e:'<svg\n      viewBox="1 1 19 19"\n      focusable="false"\n      data-icon="'.concat(t,'"\n      width="1em"\n      height="1em"\n      fill="currentColor"\n      aria-hidden="true"\n    >\n      <path d="M13,9.8L10.1,8C9.9,7.9,9.7,7.9,9.5,7.9c-0.6,0-1,0.4-1,1v3.7c0,0.2,0.1,0.4,0.2,0.5c0.3,0.5,0.9,0.6,1.4,0.3 l2.9-1.8c0.1-0.1,0.2-0.2,0.3-0.3C13.6,10.7,13.4,10.1,13,9.8z" />\n      <path d="M10.5,1.7c-4.9,0-8.8,4-8.8,8.8s4,8.8,8.8,8.8s8.8-4,8.8-8.8S15.4,1.7,10.5,1.7z M10.5,2.7c4.3,0,7.8,3.5,7.8,7.8s-3.5,7.8-7.8,7.8s-7.8-3.5-7.8-7.8S6.2,2.7,10.5,2.7z" />\n    </svg>')})}(null==e?void 0:e.icon);sf(a,"".concat(of,"-active"));var s=i?a:o;function x(){i?(n.innerHTML="",n.appendChild(a)):(n.innerHTML="",n.appendChild(o))}n.appendChild(o),n.addEventListener("click",af((function(){n.classList.contains("".concat(of,"-disable"))||(i?r.player.pause():"rec"===r.urlInfo.type&&r.player._tempPauseTime?r.player.resume():r.player.play(),i=!i,x())}),100));var l=r.$container.querySelector(".".concat(wp));return l&&l.appendChild(n),r.event.on("EVENT_CALLBACK",(function(e){"appearFirstFrameCallback"===e.data.type&&(i=!0,xf(n,"".concat(of,"-disable")),x())})),r.event.on("urlChange",(function(){i=!1,sf(n,"".concat(Dp,"-item"),"".concat(of,"-disable")),x()})),r.event.on("initializing",(function(e){e.data&&xf(n,"".concat(of,"-disable"))})),s}}()},{name:"snapshot",plugin:
/*
  *
  * @ezuikit/theme-plugin-snapshot v0.1.0
  * Copyright (c) 2024-3-23 Ezviz-OpenBiz
  * Released under MIT the License.
  *
  */
function(e){return function(t){var r=t,i=function(e){var t="camera";return cf({name:t,svg:null!=e?e:'<svg\n      viewBox="1 1 19 19"\n      focusable="false"\n      data-icon="'.concat(t,'"\n      width="1em"\n      height="1em"\n      fill="currentColor"\n      aria-hidden="true"\n    >\n      <path d="M10.8,7.7c-2,0-3.7,1.6-3.7,3.7S8.7,15,10.8,15c2,0,3.7-1.6,3.7-3.7S12.8,7.7,10.8,7.7z M10.8,8.7c1.5,0,2.7,1.2,2.7,2.7S12.2,14,10.8,14c-1.5,0-2.7-1.2-2.7-2.7S9.3,8.7,10.8,8.7z" />\n      <path d="M8.6,3.7l-0.1,0C8,3.7,7.7,4,7.5,4.3l-1,1.7l-1.3,0C4,6.1,3.1,7,3.1,8.2v7.1 c0,1.2,0.9,2.1,2.1,2.1h11.1c1.2,0,2.1-0.9,2.1-2.1V8.2l0-0.1c-0.1-1.1-1-1.9-2.1-1.9l-1.3,0l-1.1-1.8c-0.2-0.4-0.7-0.6-1.1-0.6H8.6 z M8.6,4.7h4.2c0.1,0,0.2,0.1,0.3,0.1l1.2,2c0.1,0.2,0.3,0.2,0.4,0.2h1.6c0.6,0,1.1,0.5,1.1,1.1v7.1c0,0.6-0.5,1.1-1.1,1.1H5.1 c-0.6,0-1.1-0.5-1.1-1.1V8.2c0-0.6,0.5-1.1,1.1-1.1h1.6c0.2,0,0.3-0.1,0.4-0.2l1.2-2C8.4,4.7,8.5,4.7,8.6,4.7z" />\n    </svg>')})}(null==e?void 0:e.icon),n=r.$container.querySelector(".".concat(wp));return sf(i,"".concat(of,"-disable")),i.addEventListener("click",af((function(){var n,a;i.classList.contains("".concat(of,"-disable"))||(t.options.ignoreDownloadSnapshot||(null==e?void 0:e.ignoreDownloadSnapshot)?r.player.snapshot(null!==(n=null==e?void 0:e.name)&&void 0!==n?n:(new Date).getTime()):r.player.snapshot(null!==(a=null==e?void 0:e.name)&&void 0!==a?a:(new Date).getTime(),"jpeg","",!0))}),200)),n&&n.appendChild(i),r.event.on("EVENT_CALLBACK",(function(e){"appearFirstFrameCallback"===e.data.type&&xf(i,"".concat(of,"-disable"))})),["urlChange","pause","stop"].forEach((function(e){r.event.on(e,(function(){sf(i,"".concat(of,"-disable"))}))})),i}}
/*
  *
  * @ezuikit/theme-plugin-deviceinfo v0.1.0
  * Copyright (c) 2024-3-23 Ezviz-OpenBiz
  * Released under MIT the License.
  *
  */()},{name:"volume",plugin:
/*
  *
  * @ezuikit/theme-plugin-volume v0.1.0
  * Copyright (c) 2024-3-23 Ezviz-OpenBiz
  * Released under MIT the License.
  *
  */
function(e){return function(t){var r=t,i=!(!1!==r.options.audio),n=function(e){var t="sound-mute";return cf({name:t,svg:null!=e?e:'<svg\n      viewBox="1 1 19 19"\n      focusable="false"\n      data-icon="'.concat(t,'"\n      width="1em"\n      height="1em"\n      fill="currentColor"\n      aria-hidden="true"\n    >\n      <path d="M8.5,4.2c0.8-0.7,2.1-0.2,2.2,0.9l0,0.1v10c0,1.1-1.2,1.7-2.1,1.1l-0.1-0.1l-3.3-2.8C5,13.2,5,12.9,5.1,12.7 c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.8c0.2,0.2,0.5,0.1,0.5-0.2l0-0.1v-10c0-0.3-0.3-0.4-0.5-0.3L9.2,5L5.9,7.8 C5.6,7.9,5.3,7.9,5.1,7.7C5,7.5,5,7.3,5.1,7.1L5.2,7L8.5,4.2z"></path>\n      <path d="M5.5,6.9C5.8,6.9,6,7.1,6,7.4c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2C3.4,7.9,3.3,8,3.2,8.2l0,0.1v4 c0,0.2,0.1,0.3,0.3,0.3l0.1,0h2C5.8,12.5,6,12.7,6,13c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.7,0-1.3-0.5-1.3-1.2l0-0.1v-4 c0-0.7,0.5-1.3,1.2-1.3l0.1,0H5.5z"></path>\n      <path d="M17.4,7.9c0.2-0.2,0.5-0.2,0.7,0c0.2,0.2,0.2,0.4,0.1,0.6l-0.1,0.1l-3.8,3.8c-0.2,0.2-0.5,0.2-0.7,0 c-0.2-0.2-0.2-0.4-0.1-0.6l0.1-0.1L17.4,7.9z"></path>\n      <path d="M13.7,7.9c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.8,3.8c0.2,0.2,0.2,0.5,0,0.7c-0.2,0.2-0.4,0.2-0.6,0.1l-0.1-0.1 l-3.7-3.8C13.5,8.4,13.5,8.1,13.7,7.9z"></path>\n    </svg>')})}(null==e?void 0:e.icon),a=function(e){var t="sound";return cf({name:t,svg:null!=e?e:'<svg\n      viewBox="1 1 19 19"\n      focusable="false"\n      data-icon="'.concat(t,'"\n      width="1em"\n      height="1em"\n      fill="currentColor"\n      aria-hidden="true"\n    >\n      <path d="M13.2,7.1c0.1-0.2,0.5-0.3,0.7-0.2c1.1,0.7,1.9,2.2,1.9,3.7c0,1.6-0.7,3-1.9,3.7c-0.2,0.1-0.5,0.1-0.7-0.2c-0.1-0.2-0.1-0.5,0.2-0.7c0.8-0.5,1.4-1.6,1.4-2.9c0-1.3-0.6-2.4-1.4-2.9C13.1,7.6,13,7.3,13.2,7.1z"\n      />\n      <path\n        d="M15.7,4.5c0.2-0.2,0.5-0.2,0.7-0.1C18,5.8,19,8.2,19,10.7c0,2.5-1,4.8-2.7,6.3\n          c-0.2,0.2-0.5,0.2-0.7-0.1c-0.2-0.2-0.2-0.5,0.1-0.7c1.4-1.2,2.3-3.3,2.3-5.5c0-2.2-0.9-4.3-2.3-5.5C15.5,5,15.5,4.7,15.7,4.5z"\n      />\n      <path\n        d="M8.5,4.7c0.8-0.7,2.1-0.2,2.2,0.9l0,0.1v10c0,1.1-1.2,1.7-2.1,1.1l-0.1-0.1l-3.3-2.8\n          C5,13.7,5,13.4,5.1,13.2c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.8c0.2,0.2,0.5,0.1,0.5-0.2l0-0.1v-10c0-0.3-0.3-0.4-0.5-0.3l-0.1,0\n          L5.9,8.3C5.6,8.4,5.3,8.4,5.1,8.2C5,8,5,7.7,5.1,7.6l0.1-0.1L8.5,4.7z"\n      />\n      <path\n        d="M5.5,7.4C5.8,7.4,6,7.6,6,7.9c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.2,0-0.3,0.1-0.3,0.3l0,0.1v4\n          c0,0.2,0.1,0.3,0.3,0.3l0.1,0h2C5.8,13,6,13.2,6,13.5c0,0.2-0.2,0.4-0.4,0.5l-0.1,0h-2c-0.7,0-1.3-0.5-1.3-1.2l0-0.1v-4\n          c0-0.7,0.5-1.3,1.2-1.3l0.1,0H5.5z"\n      />\n    </svg>')})}(null==e?void 0:e.icon);sf(a,"".concat(of,"-active"));var o=r.$container.querySelector(".".concat(wp)),s=document.createElement("div");function x(e){e?(s.innerHTML="",s.appendChild(n)):(s.innerHTML="",s.appendChild(a))}return sf(s,"".concat(Dp,"-item"),"".concat(of,"-disable")),s.appendChild(n),s.addEventListener("click",af((function(){s.classList.contains("".concat(of,"-disable"))||(i?r.player.setVolume(.8):r.player.setVolume(0),i=!i)}),100)),o&&o.appendChild(s),r.event.on("volumechange",(function(e){x(!(e.data>0))})),r.event.on("EVENT_CALLBACK",(function(e){"appearFirstFrameCallback"===e.data.type&&(xf(s,"".concat(of,"-disable")),x(i),i?r.player.setVolume(0):r.player.setVolume(.8))})),["urlChange","pause","stop","talk"].forEach((function(e){r.event.on(e,(function(){s.innerHTML="",s.appendChild(n),sf(s,"".concat(of,"-disable"))}))})),s}}()},{name:"record",plugin:function(e){return function(t){var r=t,i=!1,n=new um;r.player.use(n);var a=function(e){var t="record";return cf({name:t,svg:null!=e?e:' <svg\n      viewBox="1 1 19 19"\n      focusable="false"\n      data-icon="'.concat(t,'"\n      width="1em"\n      height="1em"\n      fill="currentColor"\n      aria-hidden="true"\n    >\n      <path d="M11.6,5.3H4.7c-1.4,0-2.5,1.1-2.5,2.5v5.9c0,1.4,1.1,2.5,2.5,2.5h6.9c1.4,0,2.5-1.1,2.5-2.5V7.7 C14.1,6.4,13,5.3,11.6,5.3z M4.7,6.3h6.9c0.8,0,1.5,0.7,1.5,1.5v5.9c0,0.8-0.7,1.5-1.5,1.5H4.7c-0.8,0-1.5-0.7-1.5-1.5V7.7 C3.3,6.9,3.9,6.3,4.7,6.3z"></path>\n      <path d="M16.6,6.7c0.9-0.8,2.3-0.1,2.4,1l0,0.1v5.7c0,1.2-1.3,1.9-2.3,1.2l-0.1-0.1L13.3,12 c-0.2-0.2-0.2-0.5-0.1-0.7c0.2-0.2,0.4-0.2,0.6-0.1l0.1,0.1l3.3,2.7c0.3,0.2,0.7,0.1,0.8-0.3l0-0.1V7.8c0-0.4-0.4-0.6-0.7-0.4 l-0.1,0l-3.3,2.7c-0.2,0.2-0.5,0.1-0.7-0.1c-0.2-0.2-0.1-0.5,0-0.6l0.1-0.1L16.6,6.7z"></path>\n    </svg>')})}(null==e?void 0:e.icon),o=r.$container.querySelector(".".concat(wp)),s=r.$container.querySelector(".".concat(Dp));sf(a,"".concat(of,"-disable"));var x=new pm(s,{bottom:r.options.isMobile?36:102});function l(){i&&(x.hide(),n.stopRecord(),a.classList.remove("".concat(of,"-active")),r.event.emit("stopRecord"),i=!1)}return a.addEventListener("click",(function(){a.classList.contains("".concat(of,"-disable"))||r.player.playing&&(i?l():(i||(x.show(),n.startRecord(),i=!0),a.classList.add("".concat(of,"-active")),r.event.emit("startRecord")))})),["urlChange","talk","destroy","stop","pause","seek"].forEach((function(e){r.event.on(e,(function(){l()}))})),["urlChange","stop","pause"].forEach((function(e){r.event.on(e,(function(){sf(a,"".concat(of,"-disable"))}))})),r.event.on("EVENT_CALLBACK",(function(e){"appearFirstFrameCallback"===e.data.type&&xf(a,"".concat(of,"-disable"))})),o&&o.appendChild(a),a}}()},{name:"zoom",plugin:function(e){return function(t){var r=t,i=!1,n=function(e){var t="zoom";return cf({name:t,svg:null!=e?e:'<svg\n      viewBox="1 1 19 19"\n      focusable="false"\n      data-icon="'.concat(t,'"\n      width="1em"\n      height="1em"\n      fill="currentColor"\n      aria-hidden="true"\n    >\n      <path\n        d="M8.8,2.6c3.5,0,6.2,2.8,6.2,6.2s-2.8,6.2-6.2,6.2s-6.2-2.8-6.2-6.2S5.3,2.6,8.8,2.6z M8.8,3.9\n          c-2.8,0-5,2.2-5,5s2.2,5,5,5s5-2.2,5-5S11.5,3.9,8.8,3.9z M12.7,12.7l3.9,3.9"\n      ></path>\n      <path d="M11.2,9.5h-5c-0.3,0-0.6-0.3-0.6-0.6s0.3-0.6,0.6-0.6h5c0.3,0,0.6,0.3,0.6,0.6S11.6,9.5,11.2,9.5z"></path>\n      <path d="M8.7,12c-0.3,0-0.6-0.3-0.6-0.6v-5c0-0.3,0.3-0.6,0.6-0.6s0.6,0.3,0.6,0.6v5C9.3,11.8,9.1,12,8.7,12z"></path>\n      <path\n        d="M16.9,17.6c-0.1,0-0.3-0.1-0.4-0.2l-3.9-3.9c-0.2-0.2-0.2-0.6,0-0.8s0.6-0.2,0.8,0l3.9,3.9\n          c0.2,0.2,0.2,0.6,0,0.8C17.2,17.5,17,17.6,16.9,17.6z"\n      ></path>\n    </svg>')})}(null==e?void 0:e.icon),a=r.$container.querySelector(".".concat(wp)),o=r.$container.querySelector(".".concat(Mp));if(sf(n,"".concat(of,"-disable")),o){var s=new qp(o,{bottom:t.options.isMobile?40:80,left:12,maxScale:8,scale:r.options.isMobile?.8:1,onClick:function(e){8===e&&t.message.show('<span style="padding: 4px 16px;background: #00000080;color: #FFFFFF;font-size: 14px">已经放大到最大倍数'.concat(8..toFixed(1),"X</span>"),2e3),1===e&&t.message.show('<span style="padding: 4px 16px;background: #00000080;color: #FFFFFF;font-size: 14px">已经缩小到最小倍数1.0X</span>',2e3)}},t);n.addEventListener("click",(function(){n.classList.contains("".concat(of,"-disable"))||(i?(s.hide(),xf(n,"".concat(of,"-active"))):(s.show(),sf(n,"".concat(of,"-active"))),i=!i)})),r.event.on("EVENT_CALLBACK",(function(e){"appearFirstFrameCallback"===e.data.type&&xf(n,"".concat(of,"-disable"))})),r.event.on("urlChange",(function(){s.hide(),i=!1,xf(n,"".concat(of,"-active"))}))}return a&&a.appendChild(n),n}}()},{name:"playbackRate",plugin:function(e){return function(t){var r=t,i=!1,n=document.createElement("div");sf(n,"".concat(Dp,"-item"),"".concat(of,"-playbackRate")),n.innerHTML='<button class="'.concat(of,"-btn ").concat(of,'-btn-default">倍速</button>');var a=r.$container.querySelector(".".concat(Ap));if(a){a.appendChild(n);var o=n.getElementsByClassName("".concat(of,"-btn"))[0];sf(o,"".concat(of,"-disable"));var s=new vm(n,{theme:r,rates:(null==e?void 0:e.list)||[],isMobile:r.options.isMobile,open:!1,onOpenChange:function(e){o&&!e&&xf(o,"".concat(of,"-active")),i=!!e},onChange:function(e){o&&(o.innerHTML=1===(null==e?void 0:e.rate)?"倍速":(null==e?void 0:e.text)||""),r.setPlaybackRate(null==e?void 0:e.rate),xf(o,"".concat(of,"-active")),i=!1}});o.addEventListener("click",(function(e){o.classList.contains("".concat(of,"-disable"))||(i?(s.hide(),i=!1,xf(o,"".concat(of,"-active"))):(s.show(),i=!0,sf(o,"".concat(of,"-active"))),e.stopPropagation(),e.preventDefault())})),r.event.on("EVENT_CALLBACK",(function(e){"appearFirstFrameCallback"===e.data.type&&(xf(o,"".concat(of,"-disable")),s.current>1&&r.setPlaybackRate(s.current||1))})),["urlChange","pause","stop"].forEach((function(e){r.event.on(e,(function(){sf(o,"".concat(of,"-disable"))}))})),r.event.on("urlChange",(function(){s.selectedCurrent(1)})),r.event.on("seek",(function(){s.selectedCurrent(s.current||1)}))}return n}}()},{name:"webFullscreen",plugin:function(e){return function(t){var r=t,i=Up(),n=document.createElement("div");sf(n,"".concat(Dp,"-item"),"".concat(of,"-webFullScreen"));var a=function(e){var t="web-fullscreen";return cf({name:t,svg:null!=e?e:'<svg\n      focusable="false"\n      data-icon="'.concat(t,'"\n      width="1em"\n      height="1em"\n      fill="currentColor"\n      aria-hidden="true"\n      viewBox="1 1 19 19"\n    >\n      <path d="M3.1,7.6c-0.3,0-0.5-0.2-0.5-0.5V5.3c0-1.2,1-2.3,2.2-2.3h1.8c0.3,0,0.5,0.2,0.5,0.5S6.8,4.1,6.6,4.1H4.8 c-0.7,0-1.2,0.6-1.2,1.3v1.8C3.6,7.4,3.3,7.6,3.1,7.6z"></path>\n      <path d="M15.3,18.1h-1.8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h1.8c0.7,0,1.2-0.6,1.2-1.2v-1.8 c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v1.8C17.6,17.1,16.6,18.1,15.3,18.1z"></path>\n      <circle cx="10.2" cy="10.4" r="1.1"></circle>\n    </svg>')})}(null==e?void 0:e.icon),o=function(e){var t="fullscreen-exit";return cf({name:t,svg:null!=e?e:'<svg\n      focusable="false"\n      data-icon="'.concat(t,'"\n      width="1em"\n      height="1em"\n      fill="currentColor"\n      aria-hidden="true"\n      viewBox="1 1 19 19"\n    >\n      <path d="M5.4,8.1H3.5C3.2,8.1,3,7.9,3,7.6s0.2-0.5,0.5-0.5h1.9c0.8,0,1.4-0.6,1.4-1.4V3.8c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v1.9C7.7,7,6.7,8.1,5.4,8.1z"></path>\n      <path d="M13.1,17.7c-0.3,0-0.5-0.2-0.5-0.5v-1.9c0-1.3,1.1-2.4,2.4-2.4h1.9c0.3,0,0.5,0.2,0.5,0.5s-0.2,0.5-0.5,0.5H15c-0.8,0-1.4,0.6-1.4,1.4v1.9C13.6,17.4,13.4,17.7,13.1,17.7z"></path>\n      <circle cx="10.2" cy="10.4" r="1.1"></circle>\n    </svg>')})}(null==e?void 0:e.exitIcon);function s(){var e=(i=Up())?o:a;n.innerHTML="",n.appendChild(e)}sf(o,"".concat(of,"-active")),s();var x=r.$container.querySelector(".".concat(Ap));return x&&x.appendChild(n),n.addEventListener("click",(function(){i?t.exitScreen().then((function(){s()})):t.webFullScreen().then((function(){s()}))})),t.event.on("exitScreen",(function(){s()})),n}}()},{name:"fullscreen",plugin:function(e){return function(t){var r=t,i=Yp(),n=document.createElement("div");sf(n,"".concat(Dp,"-item"),"".concat(of,"-fullScreen"));var a=function(e){var t="fullscreen";return cf({name:t,svg:null!=e?e:'<svg\n      focusable="false"\n      data-icon="'.concat(t,'"\n      width="1em"\n      height="1em"\n      fill="currentColor"\n      aria-hidden="true"\n      viewBox="1 1 19 19"\n    >\n      <path d="M3.4,7.6c-0.3,0-0.5-0.2-0.5-0.5V5.3c0-1.2,1-2.3,2.2-2.3h1.8c0.3,0,0.5,0.2,0.5,0.5S7.2,4.1,6.9,4.1H5.2 c-0.7,0-1.2,0.6-1.2,1.3v1.8C3.9,7.4,3.7,7.6,3.4,7.6z"></path>\n      <path d="M6.9,18.1H5.2c-1.2,0-2.2-1-2.2-2.2v-1.8c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v1.8c0,0.7,0.6,1.2,1.2,1.2 h1.8c0.3,0,0.5,0.2,0.5,0.5S7.2,18.1,6.9,18.1z"></path>\n      <path d="M15.7,18.1h-1.8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h1.8c0.7,0,1.2-0.6,1.2-1.2v-1.8 c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v1.8C17.9,17.1,16.9,18.1,15.7,18.1z"></path>\n      <path d="M17.4,7.6c-0.3,0-0.5-0.2-0.5-0.5V5.3c0-0.7-0.6-1.3-1.2-1.3h-1.8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h1.8 c1.2,0,2.2,1,2.2,2.3v1.8C17.9,7.4,17.7,7.6,17.4,7.6z"></path>\n    </svg>')})}(null==e?void 0:e.icon),o=function(e){var t="fullscreen-exit";return cf({name:t,svg:null!=e?e:'<svg\n      focusable="false"\n      data-icon="'.concat(t,'"\n      width="1em"\n      height="1em"\n      fill="currentColor"\n      aria-hidden="true"\n      viewBox="1 1 19 19"\n    >\n      <path\n        d="M5.7,8.1H3.9c-0.3,0-0.6-0.2-0.6-0.6S3.6,7,3.9,7h1.9c0.7,0,1.3-0.6,1.3-1.3V3.8c0-0.3,0.2-0.6,0.6-0.6\n        s0.6,0.2,0.6,0.6v1.9C8.2,7,7.1,8.1,5.7,8.1z"\n      ></path>\n      <path\n        d="M7.6,17.7c-0.3,0-0.6-0.2-0.6-0.6v-1.9c0-0.7-0.6-1.3-1.3-1.3H3.9c-0.3,0-0.6-0.2-0.6-0.6s0.2-0.6,0.6-0.6h1.9\n        c1.3,0,2.4,1.1,2.4,2.4v1.9C8.2,17.5,7.9,17.7,7.6,17.7z"\n      ></path>\n      <path\n        d="M13.4,17.7c-0.3,0-0.6-0.2-0.6-0.6v-1.9c0-1.3,1.1-2.4,2.4-2.4h1.9c0.3,0,0.6,0.2,0.6,0.6S17.5,14,17.2,14\n        h-1.9c-0.7,0-1.3,0.6-1.3,1.3v1.9C14,17.5,13.8,17.7,13.4,17.7z"\n      ></path>\n      <path\n        d="M17.2,8.1h-1.9c-1.3,0-2.4-1.1-2.4-2.4V3.8c0-0.3,0.2-0.6,0.6-0.6S14,3.5,14,3.8v1.9C14,6.4,14.6,7,15.3,7h1.9\n        c0.3,0,0.6,0.2,0.6,0.6S17.5,8.1,17.2,8.1z"\n      ></path>\n    </svg>')})}(null==e?void 0:e.exitIcon);function s(){var e=(i=Yp()||r.mobileFullScreen)?o:a;n.innerHTML="",n.appendChild(e)}o.classList.add("".concat(of,"-active")),s();var x=r.$container.querySelector(".".concat(Ap));return x&&x.appendChild(n),n.addEventListener("click",(function(){i?t.exitScreen().then((function(){s()})):t.fullScreen().then((function(){s()}))})),t.event.on("exitScreen",(function(){s()})),n}}()},{name:"timeline",plugin:function(e){var t=e,r=of+"-timeline",i=document.createElement("div");i.classList.add(r+"-container"),i.style.display="flex";var n,a=null,o=[],s=0,x=0,l={},c=!1;if(t.options.isMobile){r+="-mobile",i.innerHTML='\n        <div class="'+r+'-container">\n          <div class="'+r+'-current">\n            <div class="'+r+'-current-time-bg" id="time-line-current">00:00:00</div>\n          </div>\n          <div class="'+r+'-item-container">\n            <div class="'+r+'-item"></div>\n          </div>\n        </div>\n      ';var f=t.$container.querySelector("."+Vp);f&&(f.appendChild(i),n=new Lm(i.querySelector("."+r+"-item"),{onCurrent:function(e){var t=i.querySelector("."+r+"-current-time-bg");t&&(t.innerHTML=e)},onChange:function(e){var r,i=null==(r=t.urlInfo.searchParams)?void 0:r.begin;if((null==o?void 0:o.length)||i){var n;t.logger.log("[MobileTimeLine]: onChange ",e);var a=Ox((null==(n=o[0])?void 0:n.startTime)||i||Ox()).format("YYYY-MM-DD");p(Ox(a+" "+e))}}}))}else{var h=document.createElement("div");lf(h,{display:"inline-flex",flexDirection:"column",justifyContent:"center",verticalAlign:"top",padding:"0 20px"}),h.innerHTML='\n            <span style="vertical-Align: middle;line-height: 14px;height: 18px; width: 18px;cursor:pointer;" class="ezui-timeline-scale-add">\n            <svg fill="#2C2C2C" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n              <g>\n                <polygon points="0.1,0.5 15,0.5 15,15.4 0.1,15.4 \t"></polygon>\n              </g>\n              <g>\n                <path fill="#FFFFFF" d="M7.6,12.4c-0.3,0-0.5-0.2-0.5-0.5v-8c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v8C8.1,12.2,7.9,12.4,7.6,12.4z"></path>\n              </g>\n              <g>\n                <path fill="#FFFFFF"  d="M11.6,8.4h-8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h8c0.3,0,0.5,0.2,0.5,0.5S11.8,8.4,11.6,8.4z"></path>\n              </g>\n            </svg>\n            </span>\n            <span style="vertical-Align: middle;line-height: 14px;height: 18px; width: 18px;cursor:pointer;" class="ezui-timeline-scale-sub">\n            <svg fill="#2C2C2C" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n              <g>\n                <polygon points="1,0.8 15.2,0.8 15.2,15 1,15"></polygon>\n              </g>\n              <g>\n                <path fill="#FFFFFF" d="M12.1,8.4h-8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h8c0.3,0,0.5,0.2,0.5,0.5S12.4,8.4,12.1,8.4z"></path>\n              </g>\n            </svg>\n            </span>\n      ',n=new Mm(i),i.append(h);var u=0;Om(h,".ezui-timeline-scale-add",(function(e){++u>=3&&(u=3),n.changeScale(u)})),Om(h,".ezui-timeline-scale-sub",(function(e){--u<=0&&(u=0),n.changeScale(u)}));var d=t.$container.querySelector("."+Lp);d&&(n.init({width:_(),newTime:null,onChange:function(e){t.logger.log("[TimeLine]: onChange ",e),p(e)}}).then((function(){n.setCurrent(new Date((new Date).setHours(0,0,0,0))),t.logger.log("[TimeLine] init finished")})).catch((function(){})),d.appendChild(i),n.setWidth({width:_()}))}function _(){return parseInt(getComputedStyle(t.$container.querySelector("."+Dp)).width,10)-58-40}function p(e){var r,i,l,f,h="YYYYMMDDTHHmmss",u=Ox(e),d=Ox((null==(r=t.urlInfo.searchParams)?void 0:r.begin)||Ox()),_=o.length||(null==(i=t.urlInfo.searchParams)?void 0:i.end)?Ox((null==(l=t.urlInfo.searchParams)?void 0:l.end)||(null==(f=o[o.length-1])?void 0:f.endTime)):Ox(d.format("YYYY-MM-DD 23:59:59"));return s=u.valueOf(),x=s>1e3*(t.getOSDTime()||0)?1:2,t.event.emit("timeLineChange",s),u>=_?(s=0,x=0,clearInterval(a),t.stop(),c=!0,n.setCurrent(_.valueOf()),void t.message.showError("查找录像开始时间错误")):c?(t.play({url:Sm(t.options.url,{search:"begin="+u.format("YYYYMMDDHHmmss")})}),void(c=!1)):(o[0]&&u<=Ox(o[0].startTime)&&(n.setCurrent(Ox(o[0].startTime).valueOf()),u=Ox(o[0].startTime)),void(m()?(t.loading.show(),t.seek(u.format(h)+"Z",_.format(h)+"Z").catch((function(){t.loading.hide()}))):(t.loading.show(),t.pause(u.format("YYYYMMDDHHmmss")).then((function(){t.resume(u.format("YYYYMMDDHHmmss")).catch((function(){t.loading.hide()}))})).catch((function(){t.loading.hide()})))))}function m(){return"cloud"===t.urlInfo.recType||t.options.useSeek&&"1"===(null==l?void 0:l.support_seek_playback)}return t.event.on("network.videoFragmentFiles",(function(e){var r=e.data,i=r.length,a=[];if(t.options.isMobile){for(var s=i-1;s>=0;s--)a.push({startTime:Bm(r[s].startTime),endTime:Bm(r[s].endTime)});n.setRecord(a),o=e.data}else n.setRecord(e.data),o=e.data})),t.event.on("network.deviceCapacity",(function(e){l=e})),t.event.on("EVENT_CALLBACK",(function(e){if("appearFirstFrameCallback"===e.data.type){a&&(clearInterval(a),a=null);var r=0;a=window.setInterval((function(){if(n)if((r=1e3*(t.getOSDTime()||0))&&"number"==typeof r){if(t.options.isMobile?n.setCurrent(Bm(s>0?s:r)):n.setCurrent(s>0?s:r),1===x)r>=s&&(t.loading.hide(),s=0,x=0),t.logger.log("drag <- _seekTime: ",s);else if(2===x&&m()){var e=setTimeout((function(){t.loading.hide(),s=0,x=0,clearTimeout(e)}),3e3);t.logger.log("drag -> _seekTime: ",s)}else 2!==x||m()||(s=0,x=0);var i=o.length?Ox(o[o.length-1].endTime):Ox();m()&&r>=i.valueOf()&&t.event.emit("EVENT_CALLBACK",{data:{type:"pluginErrorHandler",code:6701}})}else t.logger.warn("getOSDTime ",r)}),1e3)}else if("setRunTimeInfoCallBack"===e.data.type){var i,l;5!==(null==e||null==(l=e.data)||null==(i=l.data)?void 0:i.nErrorCode)||c||(s=0,x=0,c=!0)}})),t.event.on("StreamClient.autoClose",(function(){s=0,x=0,c=!0})),["playError","pause","stop","destroy"].forEach((function(e){t.event.on(e,(function(){a&&(window.clearInterval(a),a=null)}))})),t.event.on("urlChange",(function(){n.setRecord([]),"function"==typeof n.update&&n.update({}),o=[]})),t.options.isMobile||t.event.on("resize",(function(e){setTimeout((function(){var t,r;(null==(t=e.data)?void 0:t.width)>0&&n.setWidth({width:(null==(r=e.data)?void 0:r.width)-58-40})}),10)})),i}},{name:"datepicker",plugin:function(e){var t=e,r=function(e){var t="calendar";return cf({name:t,svg:null!=e?e:'<svg\n        viewBox="1 1 20 20"\n        focusable="false"\n        data-icon="'.concat(t,'"\n        width="1em"\n        height="1em"\n        fill="currentColor"\n        aria-hidden="true"\n        >\n          <g>\n            <g>\n            <path d="m13.35,5.9c-0.3,0 -0.5,-0.2 -0.5,-0.5l0,-3.3c0,-0.3 0.2,-0.5 0.5,-0.5s0.5,0.2 0.5,0.5l0,3.3c0,0.3 -0.3,0.5 -0.5,0.5z"/>\n            </g>\n            <g>\n            <path d="m6.65,5.9c-0.3,0 -0.5,-0.2 -0.5,-0.5l0,-3.3c0,-0.3 0.2,-0.5 0.5,-0.5s0.5,0.2 0.5,0.5l0,3.3c0,0.3 -0.2,0.5 -0.5,0.5z"/>\n            </g>\n            <g>\n            <path d="m17.45,8.4l-15,0c-0.3,0 -0.5,-0.2 -0.5,-0.5s0.2,-0.5 0.5,-0.5l15,0c0.3,0 0.5,0.2 0.5,0.5s-0.2,0.5 -0.5,0.5z"/>\n            </g>\n            <g >\n            <path d="m15.85,18.4l-11.7,0c-1.2,0 -2.2,-1 -2.2,-2.2l0,-10.8c0,-1.2 1,-2.2 2.2,-2.2l11.7,0c1.2,0 2.2,1 2.2,2.2l0,10.8c-0.1,1.3 -1,2.2 -2.2,2.2zm-11.7,-14.1c-0.6,0 -1.2,0.5 -1.2,1.2l0,10.8c0,0.6 0.5,1.2 1.2,1.2l11.7,0c0.6,0 1.2,-0.5 1.2,-1.2l0,-10.9c0,-0.6 -0.5,-1.2 -1.2,-1.2l-11.7,0l0,0.1z"/>\n            </g>\n            <g >\n            <path d="m9.95,12c-0.4,0 -0.7,-0.3 -0.7,-0.7c0,-0.2 0.1,-0.4 0.2,-0.5s0.3,-0.2 0.5,-0.2l0,0l0,0c0.4,0 0.7,0.3 0.7,0.7s-0.3,0.7 -0.7,0.7z"/>\n            </g>\n            <g >\n            <path d="m14.15,12c-0.4,0 -0.7,-0.3 -0.7,-0.7c0,-0.2 0.1,-0.4 0.2,-0.5c0.1,-0.1 0.3,-0.2 0.5,-0.2c0.4,0 0.7,0.3 0.7,0.7s-0.3,0.7 -0.7,0.7zm0,-1c-0.2,0 -0.3,0.1 -0.3,0.3c0,0.2 0.3,0.4 0.5,0.2c0.1,-0.1 0.1,-0.1 0.1,-0.2c0,-0.2 -0.1,-0.3 -0.3,-0.3z"/>\n            </g>\n            <g >\n            <path d="m5.85,15.3c-0.4,0 -0.7,-0.3 -0.7,-0.7c0,-0.2 0.1,-0.4 0.2,-0.5c0.1,-0.1 0.3,-0.2 0.5,-0.2l0,0l0,0c0.4,0 0.7,0.3 0.7,0.7c0,0.4 -0.3,0.7 -0.7,0.7z"/>\n            </g>\n            <g >\n            <path d="m9.95,15.3c-0.4,0 -0.7,-0.3 -0.7,-0.7c0,-0.2 0.1,-0.4 0.2,-0.5c0.1,-0.1 0.3,-0.2 0.5,-0.2l0,0l0,0c0.4,0 0.7,0.3 0.7,0.7c0.1,0.4 -0.3,0.7 -0.7,0.7z"/>\n            </g>\n        </g>\n        </svg>')})}(null==bg?void 0:bg.icon);sf(r,of+"-calendar"),lf(r,{color:"#FFF"});var i=Ox(t.urlInfo.searchParams.begin+"");if(i.isValid()||(i=Ox(Ox().format("YYYY-MM-DD 00:00:00"))),t.options.isMobile){var n=t.$container.querySelector("."+Hp);if(n){n.innerHTML='<div class="ezui-mobile-extend-date-title">今日录像</div>\n          <div class="ezui-mobile-extend-date-container">\n            <div>\n                <label for="date">\n                  <img src=\'https://resource.eziot.com/group2/M00/00/6A/CtwQF2F6VieAQrU9AAABP-_Nsqo949.png\' />\n                </label>\n                <input type="date" name="date" value="'+i.format("YYYY-MM-DD")+'"  />\n              </div>\n          </div>';var a=n.querySelector('input[type="date"]');a&&(null==a||a.addEventListener("change",(function(e){var t=e.target.value||Ox().format("YYYY-MM-DD");x(t),a.value=t})))}}else{var o=new ug({getPopupContainer:function(){return r},current:i,showTime:!0,showToday:!0,onChange:function(e){x(e)}}),s=t.$container.querySelector("."+Bp);s&&s.appendChild(r),r.addEventListener("click",(function(){r.classList.contains(of+"-disable")})),t.event.on("resize",(function(){o.hide()})),t.event.on("urlChange",(function(){o.hide()}))}function x(e){t.logger.log("date change: ",e),t.options.url=Sm(t.options.url,{search:"begin="+Ox(e).format("YYYYMMDDHHmmss")+"&end="}),t.event.emit("datePickerChange",{data:Ox(e)}),t.play({url:t.options.url})}return t.event.on("EVENT_CALLBACK",(function(e){"appearFirstFrameCallback"===e.data.type&&xf(r,of+"-disable")})),r}},{name:"deviceID",plugin:function(e){var t=e,r=t.$container.querySelector(".".concat(Xp))||document.createElement("div");sf(r,Xp);var i=document.createElement("span");sf(i,Wp),i.innerHTML=Gp,i.title=Gp,t.event.on("network.deviceInfo",(function(e){var t,r=(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.deviceSerial)||Gp;i.innerHTML=r,i.title=r})),r.appendChild(i);var n=t.$container.querySelector(".".concat(Tp));return n&&n.appendChild(r),r}},{name:"deviceName",plugin:function(e){var t=e,r=t.$container.querySelector(".".concat(Xp))||document.createElement("div");sf(r,Xp);var i=document.createElement("span");sf(i,zp),i.innerHTML=Jp,i.title=Jp,t.event.on("network.deviceInfo",(function(e){var t,r=(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.deviceName)||Jp;i.innerHTML=r,i.title=r})),r.appendChild(i);var n=t.$container.querySelector(".".concat(Tp));return n&&n.appendChild(r),r}},{name:"recTypes",plugin:function(e){return function(t){var r,i,n,a=t,o=(null===(r=a.options)||void 0===r?void 0:r.recTypes)||[];if(0!==o.length){var s=document.createElement("div");sf(s,"".concat(of,"-rec-types"));var x={cloud_record:ff(null==e?void 0:e.cloudRecordIcon),cloud:hf((null!==(i=null==e?void 0:e.cloudIcon)&&void 0!==i?i:a.options.isMobile)?'<svg viewBox="0 0 20 20" focusable="false" data-icon="sdk" width="1em" height="1em" fill="currentColor" aria-hidden="true">\n        <path d="m9.8,3.25c-2.3,0.1 -4.3,1.4 -5.3,3.3l-0.1,0.3c-2.4,0.5 -4.1,2.5 -4.1,4.9c0,2.8 2.4,5 5.2,5l9.9,0c2.4,0 4.3,-1.9 4.3,-4.2l0,-0.2c-0.1,-2 -1.6,-3.5 -3.5,-3.9l-0.1,0l0,-0.2c-0.4,-2.8 -3,-5 -6.1,-5l-0.2,0z"/>\n      </svg>':void 0),local:uf((null!==(n=null==e?void 0:e.localIcon)&&void 0!==n?n:a.options.isMobile)?'<svg viewBox="0 0 20 20" focusable="false" data-icon="sdk" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="m11.8,2.04655c0.6,0 1.2,0.2 1.7,0.7l0,0l2.3,2.3c0.4,0.4 0.7,1 0.7,1.6l0,0l0,9c0,1.3 -1.1,2.3 -2.4,2.3l0,0l-8.2,0c-1.3,0.1 -2.4,-0.9 -2.4,-2.2l0,0l0,-11.4c0,-1.3 1.1,-2.3 2.4,-2.3l0,0l5.9,0zm-4.6,3.2c-0.4,0 -0.8,0.4 -0.8,0.8l0,0l0,2.5l0,0.1c0,0.4 0.4,0.6 0.7,0.6c0.4,0 0.8,-0.3 0.8,-0.8l0,0l0,-2.4l0,-0.1c0,-0.4 -0.4,-0.7 -0.7,-0.7zm2.5,0c-0.4,0 -0.8,0.3 -0.8,0.8l0,0l0,2.5l0,0.1c0,0.4 0.4,0.6 0.7,0.6c0.4,0 0.8,-0.3 0.8,-0.8l0,0l0,-2.4l0,-0.1c0,-0.4 -0.4,-0.7 -0.7,-0.7zm2.5,0c-0.4,0 -0.8,0.3 -0.8,0.8l0,0l0,2.5l0,0.1c0,0.4 0.4,0.6 0.7,0.6c0.4,0 0.8,-0.3 0.8,-0.8l0,0l0,-2.4l0,-0.1c0,-0.4 -0.4,-0.7 -0.7,-0.7z" /></svg>':void 0)};if(o.forEach((function(e){var t=x[e];t.addEventListener("click",(function(r){o.forEach((function(e){xf(x[e],"".concat(of,"-active"))})),sf(t,"".concat(of,"-active"));var i="";switch(e){case"cloud":i=Sm(a.options.url,{type:"rec",recType:"cloud",search:"busType="});break;case"cloud_record":i=Sm(a.options.url,{type:"rec",recType:"cloud",search:"busType=7"});break;case"local":i=Sm(a.options.url,{type:"rec",recType:"",search:"busType="})}a.event.emit("recTypesChange",{data:e}),i&&(a.options.url=i,a.play({url:i})),r.stopPropagation()}),!1),s.appendChild(t)})),a.options.isMobile){var l=a.$container.querySelector(".".concat(Np));l&&(l.innerHTML="<div style='padding: 0 15px; font-size: 12px; line-height: 24px;'>共<span>0</span>个录像</div>",l.appendChild(s),a.event.on("network.videoFragmentFiles",(function(e){var t,r=(null===(t=e.data)||void 0===t?void 0:t.length)||0;l.querySelector("span")&&(l.querySelector("span").innerHTML=r)})))}else{var c=a.$container.querySelector(".".concat(Fp));c&&!a.options.isMobile&&c.appendChild(s)}return a.urlInfo&&("cloud"===a.urlInfo.recType&&7==+a.urlInfo.searchParams.busType?sf(x.cloud_record,"".concat(of,"-active")):"cloud"===a.urlInfo.recType?sf(x.cloud,"".concat(of,"-active")):"rec"===a.urlInfo.type&&sf(x.local,"".concat(of,"-active"))),s}}}()}]),vg}));
