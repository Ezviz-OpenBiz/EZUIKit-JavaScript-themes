/*
*
* @ezuikit/theme-rec v0.1.0
* Copyright (c) 2024-3-26 Ezviz-OpenBiz
* Released under MIT the License.
*
*/
import e from"@ezuikit/theme-simple";import t from"@ezuikit/utils-logger";import{PREFIX_CLASS_NAME as n,removeClass as o,addClass as i,style as r}from"@ezuikit/utils-dom";import{throttle as a,merge as c}from"lodash-es";import{fullscreenIcon as s,fullscreenExitIcon as l,webFullscreenIcon as d,webFullscreenExitIcon as u,cameraIcon as p,zoomIcon as h,plusCircleIcon as f,minusCircleIcon as v,recordIcon as m,soundMuteIcon as b,soundIcon as g,cloudRecordIcon as y,cloudIcon as k,sdkIcon as x,playIcon as w,pauseIcon as z,calendarIcon as C}from"@ezuikit/icons";import _ from"dayjs";function S(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}S(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}body,html{margin:0;padding:0}.ezui-rec-theme{--ezui-font-size:14px;--ezui-color:#fff;--ezui-background-color:#000;--ezui-active-color:#1890ff;--ezui-disable-color:gray;--ezui-button-color:var(--ezui-color,#fff);--ezui-button-border-color:var(--ezui-color,#fff);--ezui-footer-height:48px;--ezui-footer-icon-size:27px;--ezui-footer-color:var(--ezui-color,#fff);--ezui-footer-background-color:rgba(0,0,0,.5);--ezui-footer-active-color:var(--ezui-active-color,#1890ff);--ezui-header-height:var(--ezui-footer-height,48px);--ezui-header-icon-size:27px;--ezui-header-color:var(--ezui-footer-color);--ezui-header-background-color:#000;--ezui-header-active-color:var(--ezui-footer-active-color,#1890ff);--ezui-date-picker-header-height:34px;--ezui-date-picker-color:#595959;--ezui-date-picker-primary-color:#1890ff;--ezui-date-picker-font-size:14px;--ezui-date-picker-border-color:rgba(5,5,5,.06);--ezui-date-picker-disable-border-color:rgba(0,0,0,.2);--ezui-data-picker-scrollbar-width:8px;--ezui-data-picker-border-radius:2px}.ezui-theme-mobile{--ezui-footer-height:32px;--ezui-footer-icon-size:20px;--ezui-font-size:14px;--ezui-header-height:var(--ezui-footer-height)}.ezui-hidden{display:none!important}.ezui-active{color:var(--ezui-active-color,#1890ff)!important}.ezui-disable{color:gray!important;cursor:not-allowed!important}.ezui-btn{background-image:none;border:1px solid #fff;border-radius:4px;cursor:pointer;display:inline-block;font-weight:400;height:24px;line-height:24px;outline:none;padding:0 7px;position:relative;text-align:center;touch-action:manipulation;transition:all 2s cubic-bezier(.645,.045,.355,1);-webkit-user-select:none;-moz-user-select:none;user-select:none;white-space:nowrap}.ezui-btn,.ezui-btn-default{background:transparent;color:#fff}.ezui-btn-default{border-color:#fff;box-shadow:none}.ezui-btn-primary{background:#1890ff;border-color:#1890ff;box-shadow:none;color:#fff}"),function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-header{background-color:var(--ezui-header-background-color,#000);box-sizing:border-box;color:var(--ezui-header-color,#fff);display:flex;flex-direction:row;height:var(--ezui-header-height,48px);justify-content:space-between;position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezui-header-left{display:inline-flex;flex:1 1 auto;overflow:hidden;padding-right:20px}.ezui-header-right{font-size:22px;padding-right:12px}.ezui-header-right,.ezui-header-right .ezui-icon{box-sizing:border-box;display:inline-flex;flex-wrap:nowrap}.ezui-header-right .ezui-icon{align-items:center;cursor:pointer;justify-content:center;padding-left:9px;padding-right:9px}");var T="".concat(n,"-header"),M="".concat(T,"-left"),L="".concat(T,"-right");!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-footer{background-color:#000;bottom:0;box-sizing:border-box;color:var(--ezui-footer-color,#fff);display:flex;flex-direction:column;height:var(--ezui-footer-height,48px);position:relative;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%}.ezui-footer-top{background-color:var(--ezui-footer-background-color,rgba(0,0,0,.5));bottom:var(--ezui-footer-height,48px);display:flex;flex-direction:row;justify-content:space-between;left:0;opacity:1;pointer-events:all;position:absolute;right:0;transition:opacity .3s ease;z-index:999}.ezui-footer-top-hidden{opacity:0;pointer-events:none}.ezui-footer-bottom .ezui-footer-item,.ezui-footer-left>.ezui-footer-item,.ezui-footer-left>span,.ezui-footer-right>.ezui-footer-item,.ezui-footer-right>span{align-items:center;cursor:pointer;display:inline-flex;font-size:var(--ezui-footer-icon-size,27px);justify-content:center;min-height:var(--ezui-footer-height,48px);width:var(--ezui-footer-height,48px)}.ezui-footer-left,.ezui-footer-right{box-sizing:border-box;display:flex;padding-left:12px;padding-right:12px}.ezui-footer-bottom{background-color:#000;color:#fff;display:flex;flex-direction:row;height:var(--ezui-footer-height,48px);justify-content:space-between}.ezui-footer-bottom .ezui-footer-bottom-item{align-items:center;cursor:pointer;display:inline-flex;font-size:20px;justify-content:center;min-height:var(--ezui-footer-height,48px);width:var(--ezui-footer-height,48px)}.ezui-footer-bottom-left{flex:1 1 auto}.ezui-footer-bottom-right{align-items:center;display:inline-flex;flex-direction:row;font-size:22px;justify-content:flex-end}.ezui-footer-bottom-right .ezui-icon{align-items:center;box-sizing:border-box;cursor:pointer;display:inline-flex;flex-wrap:nowrap;justify-content:center;padding-left:9px;padding-right:9px}.ezui-footer-mobile-extend{background-color:#fff;color:#000;display:flex;flex-direction:column}.ezui-footer-mobile-extend-type{display:flex;justify-content:space-between}.ezui-footer-mobile-extend-type .ezui-icon{color:#000}.ezui-theme-mobile .ezui-footer-top{bottom:0}");var D="".concat(n,"-footer"),E="".concat(D,"-top"),P="".concat(D,"-top-hidden"),H="".concat(D,"-left"),$="".concat(D,"-right"),I="".concat(D,"-bottom"),R="".concat(D,"-bottom-left"),F="".concat(D,"-bottom-right"),O="".concat(D,"-mobile-extend"),A="".concat(D,"-mobile-extend-date"),B="".concat(D,"-mobile-extend-type"),N="".concat(D,"-mobile-extend-timeline");
/*
*
* @ezuikit/theme-plugin-fullscreen v0.1.0
* Copyright (c) 2024-3-23 Ezviz-OpenBiz
* Released under MIT the License.
*
*/
function U(){return!!(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen)}
/*
*
* @ezuikit/theme-plugin-webfullscreen v0.1.0
* Copyright (c) 2024-3-23 Ezviz-OpenBiz
* Released under MIT the License.
*
*/
function W(){return!!(document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen)}!function(e,t){void 0===t&&(t={});t.insertAt}(),function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-device-info{box-sizing:border-box;display:inline-flex;flex-direction:row;flex-wrap:nowrap;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:100%}.ezui-device-info>span{display:inline-block;height:var(--ezui-header-height,48px);line-height:var(--ezui-header-height,48px);margin-left:1%;margin-right:1%;max-width:48%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}");var Y="".concat(n,"-device-info"),j="".concat(Y,"-id"),q="".concat(Y,"-name"),X="设备序列号";var V="设备序列号";function K(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,K(o.key),o)}}function Q(e,t,n){return t&&G(e.prototype,t),n&&G(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,i,r,a,c=[],s=!0,l=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(o=r.call(n)).done)&&(c.push(o.value),c.length!==t);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(e,t)||te(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ee(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||te(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){if(e){if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ne(e,t):void 0}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(':root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-zoom-tool{bottom:80px;display:none;left:12px;position:absolute;transform:scale(1);transform-origin:0 100%;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezui-zoom-tool-container{align-items:center;background:rgba(0,0,0,.6);border-radius:2px;display:inline-flex;flex-direction:column;height:160px;justify-content:space-between;width:36px}.ezui-zoom-tool-current{color:#fff;font-size:12px;margin:10px 0}.ezui-zoom-tool-btn-minus,.ezui-zoom-tool-btn-plus{color:#fff;cursor:pointer;font-size:20px;height:20px;margin-bottom:4px;width:20px}.ezui-zoom-tool-btn-minus{margin:4px 0 10px}.ezui-zoom-tool-progress{align-items:center;background:hsla(0,0%,100%,.75);border-radius:2px;display:flex;flex-direction:column;height:64px;justify-content:flex-end;position:relative;width:2px}.ezui-zoom-tool-progress-percent{background:#407aff;border-radius:2px;bottom:0;min-height:8px;position:relative;width:2px}.ezui-zoom-tool-progress-percent:before{background:#fff;border:1px solid #407aff;border-radius:100%;box-sizing:border-box;content:"";height:8px;left:-3px;position:absolute;top:0;width:8px}');var oe={maxScale:8,left:0,bottom:0,scale:1,onClick:function(){}},ie="ezui-zoom-tool",re=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;Z(this,e),this._current=1,this.$container=t,this.options=Object.assign({},oe,n),this.$zoomToolContainer=this.render(),this._theme=o,this.currentPosition={x:0,y:0,xPercent:.1,yPercent:.1,xCurrentVideo:0,yCurrentVideo:0,left:0,top:0,right:1920,bottom:1080},this._registerEvent()}return Q(e,[{key:"_registerEvent",value:function(){var e=this;this._theme.event.on("EVENT_CALLBACK",(function(t){"appearFirstFrameCallback"===t.data.type&&e._resetZoom()}))}},{key:"current",get:function(){return this._current},set:function(e){if(!(e<=0||e>this.options.maxScale)){this._current=+e.toFixed();var t=this.$container.querySelector(".".concat(ie,"-current"));t&&(t.innerHTML="".concat(this._current.toFixed(),"X")),this._renderProgressPercent()}}},{key:"show",value:function(){this.$zoomToolContainer.style.display="inline-block"}},{key:"hide",value:function(){this.$zoomToolContainer.style.display="none",this._resetZoom()}},{key:"_renderProgressPercent",value:function(){var e=this.$container.querySelector(".".concat(ie,"-progress-percent"));if(e){var t=this._current/this.options.maxScale*100;t<0&&(t=0),t>100&&(t=100),e.style.height="".concat(t,"%")}}},{key:"render",value:function(){var e,t,n,o,i=this,r=document.createElement("div");return r.classList.add(ie),r.style.bottom=this.options.bottom+"px",r.style.left=this.options.left+"px",r.style.transform="scale("+this.options.scale+")",r.innerHTML='\n                <div class="'.concat(ie,'-container">\n                    <div class="').concat(ie,'-current">1.0X</div>\n                    <div class="').concat(ie,'-btn-plus"></div>\n                    <div class="').concat(ie,'-progress">\n                        <div class="').concat(ie,'-progress-percent"></div>\n                    </div>\n                    <div class="').concat(ie,'-btn-minus"></div>\n                </div>'),null===(e=r.querySelector(".".concat(ie,"-btn-plus")))||void 0===e||e.appendChild(f()),null===(t=r.querySelector(".".concat(ie,"-btn-plus")))||void 0===t||t.addEventListener("click",(function(e){i._current>=i.options.maxScale?i._current=i.options.maxScale:i.current=i._current+1,i.currentPosition.xPercent=.5,i.currentPosition.yPercent=.5,i.doScale(),"function"==typeof i.options.onClick&&i.options.onClick(i.current),e.stopPropagation(),e.preventDefault()})),null===(n=r.querySelector(".".concat(ie,"-btn-minus")))||void 0===n||n.appendChild(v()),null===(o=r.querySelector(".".concat(ie,"-btn-minus")))||void 0===o||o.addEventListener("click",a((function(){i._current<=1?i._current=1:i.current=i._current-1,i.currentPosition.xPercent=.5,i.currentPosition.yPercent=.5,i.doScale(),"function"==typeof i.options.onClick&&i.options.onClick(i.current)}),200)),this.$container.appendChild(r),this._event(),r}},{key:"_event",value:function(){var e=this,t=setInterval((function(){var n=document.getElementById("".concat(e._theme.options.id,"-container-container-0"));clearInterval(t),e._theme.options.isMobile?n&&(n.addEventListener("touchstart",(function(t){return e.onTouchstart(t)})),n.addEventListener("touchend",(function(t){return e.onTouchend(t)}))):n&&(n.addEventListener("mousedown",(function(t){return e.onMouseDown(t)})),n.addEventListener("mouseup",(function(t){return e.onMouseUp(t)})))}),100)}},{key:"onMouseDown",value:function(e){1!==this.current&&(this._moveX=e.clientX,this._moveY=e.clientY)}},{key:"onMouseUp",value:function(e){var t=this.currentPosition;1!==this.current&&(t.left=t.left-(e.clientX-this._moveX),t.top=t.top-(e.clientY-this._moveY),this.doScale())}},{key:"onTouchstart",value:function(e){if(1!==this.current){if(!this.inited){var t=this._theme.getFrameInfo(0);this.videoWidth=t.width,this.videoHeight=t.height,this.currentPosition.left=0,this.currentPosition.top=0,this.isMobileFullScreen?(this.currentPosition.right=t.height,this.currentPosition.bottom=t.width):(this.currentPosition.right=t.width,this.currentPosition.bottom=t.height),this.inited=!0}var n=e.touches[0];if(n){var o={clientX:0,clientY:0};o.clientX=n.clientX,o.clientY=n.clientY,this._point1=o}}}},{key:"onTouchend",value:function(e){var t=this,n=this.currentPosition;if(1!==this.current){var o=e.changedTouches[0];this.isMobileFullScreen?(n.left=n.left-(o.clientY-t._point1.clientY),n.top=n.top+(o.clientX-t._point1.clientX)):(n.left=n.left-(o.clientX-t._point1.clientX),n.top=n.top-(o.clientY-t._point1.clientY)),t.doScale()}}},{key:"doScale",value:function(){var e=this.currentPosition,t=this.current;e.left=e.left+e.xPercent*(e.right-e.left)-this.videoWidth/t*.5,e.left<=0?e.left=0:e.left>this.videoWidth-this.videoWidth/t&&(e.left=this.videoWidth-this.videoWidth/t),e.right=e.left+this.videoWidth/t,e.top=e.top+e.yPercent*(e.bottom-e.top)-this.videoHeight/t*.5,e.top<=0?e.top=0:e.top>this.videoHeight-this.videoHeight/t&&(e.top=this.videoHeight-this.videoHeight/t),e.bottom=e.top+this.videoHeight/t,e.left=parseInt(e.left,10),e.right=parseInt(e.right,10),e.top=parseInt(e.top,10),e.bottom=parseInt(e.bottom,10);try{e.left<e.right&&e.top<e.bottom&&e.bottom<=this.videoHeight&&e.right<=this.videoWidth&&this._setDisplayRegion(e.left,e.right,e.top,e.bottom,1!==t)}catch(e){}}},{key:"_resetZoom",value:function(){this.current=1;var e=this._theme.getFrameInfo(0);this.videoWidth=e.width,this.videoHeight=e.height,this.currentPosition.left=0,this.currentPosition.top=0,this.currentPosition.right=e.width,this.currentPosition.bottom=e.height,this.videoHeight&&this.videoWidth&&this._setDisplayRegion(0,this.videoWidth,0,this.videoHeight,!1),this.enableZoom=!1}},{key:"_setDisplayRegion",value:function(e,t,n,o,i){this._theme&&this._theme.setDisplayRegion(e,t,n,o,i,this.isMobileFullScreen)}},{key:"isMobileFullScreen",get:function(){return!(!this._theme.options.isMobile||!this._theme.mobileFullScreen)}}]),e}();function ae(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}ae("");var ce="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),se=new Uint8Array(16);function le(){if(!ce)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ce(se)}for(var de=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,ue=[],pe=0;pe<256;++pe)ue.push((pe+256).toString(16).substr(1));function he(e,t,n){var o=(e=e||{}).random||(e.rng||le)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=o[i];return t}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(ue[e[t+0]]+ue[e[t+1]]+ue[e[t+2]]+ue[e[t+3]]+"-"+ue[e[t+4]]+ue[e[t+5]]+"-"+ue[e[t+6]]+ue[e[t+7]]+"-"+ue[e[t+8]]+ue[e[t+9]]+"-"+ue[e[t+10]]+ue[e[t+11]]+ue[e[t+12]]+ue[e[t+13]]+ue[e[t+14]]+ue[e[t+15]]).toLowerCase();if(!function(e){return"string"==typeof e&&de.test(e)}(n))throw TypeError("Stringified UUID is invalid");return n}(o)}function fe(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}var ve=function(){function e(){this._keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}var t=e.prototype;return t.$=function(e){var t=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,n=/^(?:\s*(<[\w\W]+>)[^>]*|.([\w-]*))$/;if(t.test(e)){var o=t.exec(e);return document.getElementById(o[2])}if(n.test(e)){for(var i=n.exec(e),r=document.getElementsByTagName("*"),a=[],c=0,s=r.length;c<s;c++)r[c].className.match(new RegExp("(\\s|^)"+i[2]+"(\\s|$)"))&&a.push(r[c]);return a}},t.dateFormat=function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),n)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1===RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return t},t.downloadFile=function(e,t){var n=e;fe(e,Blob)||fe(e,File)||(n=new Blob([e]));var o=window.URL.createObjectURL(n),i=window.document.createElement("a");i.href=o,i.download=t;var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0),i.dispatchEvent(r)},t.createxmlDoc=function(){for(var e,t=["MSXML2.DOMDocument","MSXML2.DOMDocument.5.0","MSXML2.DOMDocument.4.0","MSXML2.DOMDocument.3.0","Microsoft.XmlDom"],n=0,o=t.length;n<o;n++)try{e=new ActiveXObject(t[n]);break}catch(t){e=document.implementation.createDocument("","",null);break}return e.async="false",e},t.parseXmlFromStr=function(e){if(null===e||""===e)return null;var t=this.createxmlDoc();return"Netscape"===navigator.appName||"Opera"===navigator.appName?t=(new DOMParser).parseFromString(e,"text/xml"):t.loadXML(e),t},t.encode=function(e){var t,n,o,i,r,a,c,s="",l=0;for(e=this._utf8_encode(e);l<e.length;)i=(t=e.charCodeAt(l++))>>2,r=(3&t)<<4|(n=e.charCodeAt(l++))>>4,a=(15&n)<<2|(o=e.charCodeAt(l++))>>6,c=63&o,isNaN(n)?a=c=64:isNaN(o)&&(c=64),s=s+this._keyStr.charAt(i)+this._keyStr.charAt(r)+this._keyStr.charAt(a)+this._keyStr.charAt(c);return s},t.decode=function(e){var t,n,o,i,r,a,c="",s=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");s<e.length;)t=this._keyStr.indexOf(e.charAt(s++))<<2|(i=this._keyStr.indexOf(e.charAt(s++)))>>4,n=(15&i)<<4|(r=this._keyStr.indexOf(e.charAt(s++)))>>2,o=(3&r)<<6|(a=this._keyStr.indexOf(e.charAt(s++))),c+=String.fromCharCode(t),64!==r&&(c+=String.fromCharCode(n)),64!==a&&(c+=String.fromCharCode(o));return this._utf8_decode(c)},t._utf8_encode=function(e){e=e.replace(/\r\n/g,"\n");for(var t="",n=0;n<e.length;n++){var o=e.charCodeAt(n);o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128))}return t},t._utf8_decode=function(e){for(var t="",n=0,o=0,i=0;n<e.length;)if((o=e.charCodeAt(n))<128)t+=String.fromCharCode(o),n++;else if(o>191&&o<224)i=e.charCodeAt(n+1),t+=String.fromCharCode((31&o)<<6|63&i),n+=2;else{i=e.charCodeAt(n+1);var r=e.charCodeAt(n+2);t+=String.fromCharCode((15&o)<<12|(63&i)<<6|63&r),n+=3}return t},t.isFirefox=function(){var e=!1,t=navigator.userAgent.toLowerCase(),n="";return t.match(/firefox\/([\d.]+)/)&&(n=t.match(/firefox\/([\d.]+)/)[1],parseInt(n.split(".")[0],10)>-1&&(e=!0)),e},t.isSafari=function(){var e=!1,t=navigator.userAgent.toLowerCase(),n="";return t.match(/version\/([\d.]+).safari./)&&(n=t.match(/version\/([\d.]+).safari./)[1],parseInt(n.split(".")[0],10)>-1&&(e=!0)),e},t.isEdge=function(){return navigator.userAgent.toLowerCase().indexOf("edge")>-1},t.isIOS=function(){return!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},e}(),me=new ve;window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,window.URL=window.URL||window.webkitURL;var be,ge=function(){function e(e,t,n,o){this.szUUID=e,this.szFileName=t,this.iStreamType=n,this.szPath="",this.bStart=!1,this.aStreamList=[],this.options=o,this.fileContents=[]}var t=e.prototype;return t.init=function(){var e=this;return new Promise((function(t){e.fileContents=[]}))},t.getDateDir=function(){return me.dateFormat(new Date,"yyyy-MM-dd")},t.writeFileHeader=function(e){var t=new Blob([e],{type:"application/octet-stream"});this.fileContents.push(t),this.bStart=!0},t.writeFileContent=function(e){var t=new Blob([e],{type:"application/octet-stream"});this.fileContents.push(t)},t.writeFile=function(e){var t=this;if(this.bStart)if(this.aStreamList.length>0){var n=this.aStreamList.shift();if(e.seek(e.length),e.length>=this.options.iFileSize)return void(this.options.cbEventHandler&&this.options.cbEventHandler(3001,this.szUUID));var o=new Blob([n]);e.write(o)}else setTimeout((function(){t.writeFile(e)}),1e3)},t.stopWriteFile=function(){var e=this;return this.bStart=!1,new Promise((function(t){var n=new Blob(e.fileContents,{type:"application/octet-stream"});e.fileContents=[],t(URL.createObjectURL(n))}))},e}(),ye=function(){function e(e,t,n,o,i,r,a,c){this.szBasePath=e,this.szUUID=t,this.szFileName=n,this.aHeadBuf=new Uint8Array(o),this.iPackType=i,this.iStreamType=r,this.oWorker=null,this.oFileSystem=null,this.options=a,this.bHead=!0,this.staticPath=c,this.fileContents=[]}var t=e.prototype;return t.init=function(){var e=this;return new Promise((function(t,n){e.initWorker().then((function(){t(e.szUUID)}),(function(e){n(e)}))}))},t.initFileSystem=function(){var e=this;return this.oFileSystem=new ge(this.szUUID,this.szFileName,this.iStreamType,this.options),new Promise((function(t,n){e.oFileSystem.init().then((function(){t()}),(function(e){n(e)}))}))},t.initWorker=function(){var e=this;return new Promise((function(t){var n,o=new Blob([(n=e.staticPath,void 0===n&&(n="https://open.ys7.com/assets/ezuikit_v3.6"),'(function() {\n    const RECORDRTP = 0;  //录制一份未经过转封装的码流原始数据，用于定位问题\n    self.Module = { memoryInitializerRequest: loadMemInitFile(), TOTAL_MEMORY: 128*1024*1024 };\n    importScripts = (function (globalEval) {\n        var xhr = new XMLHttpRequest;\n        return function importScripts() {\n          var\n            args = Array.prototype.slice.call(arguments)\n            , len = args.length\n            , i = 0\n            , meta\n            , data\n            , content\n            ;\n          for (; i < len; i++) {\n            if (args[i].substr(0, 5).toLowerCase() === "data:") {\n              data = args[i];\n              content = data.indexOf(",");\n              meta = data.substr(5, content).toLowerCase();\n              data = decodeURIComponent(data.substr(content + 1));\n              if (/;s*base64s*[;,]/.test(meta)) {\n                data = atob(data);\n              }\n              if (/;s*charset=[uU][tT][fF]-?8s*[;,]/.test(meta)) {\n                data = decodeURIComponent(escape(data));\n              }\n            } else {\n              xhr.open("GET", args[i], false);\n              xhr.send(null);\n              data = xhr.responseText;\n            }\n            globalEval(data);\n          }\n        };\n      }(eval));\n    importScripts(\''+n+'/js/transform/SystemTransform.js\');\n\n    Module.postRun.push(function() {\n        postMessage({type: "loaded"});\n    });\n\n    onmessage = function (e) {\n        var data = e.data;\n\n        if ("create" === data.type) {\n            var iHeadLen = data.len;\n            var pHead = Module._malloc(iHeadLen);\n\n            var aData = Module.HEAPU8.subarray(pHead, pHead + iHeadLen);\n            aData.set(new Uint8Array(data.buf));\n\n            var iTransType = data.packType;//目标格式 RTP->PS\n            if (RECORDRTP) {\n                postMessage({type: "created"});\n                postMessage({type: "outputData", buf: data.buf, dType: 1}, [data.buf]);\n            } else {\n                var iRet = Module._ST_Create(pHead, iHeadLen, iTransType);\n                if (iRet != 0) {\n                    console.log("_ST_Create failed!");\n                } else {\n                    Module._ST_Start();\n                    postMessage({type: "created"});\n                }\n            }\n\n        } else if ("inputData" === data.type) {\n            if (RECORDRTP) {\n                var aFileData = new Uint8Array(data.buf);  // 拷贝一份\n                var iBufferLen = aFileData.length;\n                var szBufferLen = iBufferLen.toString(16);\n                if (szBufferLen.length === 1) {\n                    szBufferLen = "000" + szBufferLen;\n                } else if (szBufferLen.length === 2) {\n                    szBufferLen = "00" + szBufferLen;\n                } else if (szBufferLen.length === 3) {\n                    szBufferLen = "0" + szBufferLen;\n                }\n                var aData = [0, 0, parseInt(szBufferLen.substring(0, 2), 16), parseInt(szBufferLen.substring(2, 4), 16)];\n                for(var iIndex = 0, iDataLength = aFileData.length; iIndex < iDataLength; iIndex++) {\n                    aData[iIndex + 4] = aFileData[iIndex]\n                }\n                var dataUint8 = new Uint8Array(aData);\n                postMessage({type: "outputData", buf: dataUint8.buffer, dType: 2}, [dataUint8.buffer]);\n            } else {\n                var iDataLen = data.len;\n                var pData = Module._malloc(iDataLen);\n\n                var aData = Module.HEAPU8.subarray(pData, pData + iDataLen);\n                aData.set(new Uint8Array(data.buf));\n\n                var iRet = Module._ST_InputData(0, pData, iDataLen);\n                if (iRet != 0) {\n                    //console.log("_ST_InputData failed!");// 一开始会有一些失败，但是不影响后面的文件存储\n                }\n\n                Module._free(pData);\n            }\n        } else if ("release" === data.type) {\n            Module._ST_Stop();\n            Module._ST_Release();\n\n            close();\n        }\n    };\n\n    function loadMemInitFile() {\n        var req = new XMLHttpRequest();\n        req.open(\'GET\', \''+n+"/js/transform/SystemTransform.js.mem');\n        req.responseType = 'arraybuffer';\n        req.send();\n\n        return req;\n    }\n})();")]),i=URL.createObjectURL(o);e.oWorker=new Worker(i),e.oWorker.onmessage=function(n){var o=n.data,i=e.iPackType;if(1===e.options.iPackage&&(i=12),"loaded"===o.type)e.oWorker.postMessage({type:"create",buf:e.aHeadBuf.buffer,len:40,packType:i},[e.aHeadBuf.buffer]);else if("created"===o.type)t();else if("outputData"===o.type){var r=new Uint8Array(o.buf);if(1===e.options.iPackage)if(e.bHead){var a=new Blob([r],{type:"video/mp4"});e.fileContents.push(a),e.bStart=!0,e.bHead=!1}else{var c=new Blob([r],{type:"video/mp4"});e.fileContents.push(c)}else if(1===o.dType){var s=new Blob([r],{type:"video/mp4"});e.fileContents.push(s),e.bStart=!0}else{var l=new Blob([r],{type:"application/octet-stream"});e.fileContents.push(l)}}}}))},t.inputData=function(e){if(this.oWorker){var t=new Uint8Array(e);this.oWorker.postMessage({type:"inputData",buf:t.buffer,len:t.length},[t.buffer])}},t.stopRecord=function(e){var t=this;return new Promise((function(n,o){t.oWorker?t.oWorker.postMessage({type:"release"}):o();var i=new Blob(t.fileContents,{type:"application/octet-stream"});t.fileContents=[];var r=URL.createObjectURL(i);if(t.bStart=!1,e){var a=document.createElement("a");a.href=r,a.download=t.szFileName,document.body.appendChild(a),a.click(),document.body.removeChild(a)}n(r)}))},e}(),ke=(be=Symbol("STORAGELIST"),function(){function e(e,t,n){this.szBasePath=e,this[be]={},this.options={iFileSize:1073741824},Object.assign(this.options,t),"string"==typeof t.staticPath&&(this.staticPath=t.staticPath)}var t=e.prototype;return t.startRecord=function(e,t,n,o,i){var r=this,a=he(),c=Object.assign({},this.options,i),s=new ye(this.szBasePath,a,e,t,n,o,c,this.staticPath);return new Promise((function(e,t){s.init().then((function(t){r[be][t]=s,e(t)}),(function(e){t(e)}))}))},t.inputData=function(e,t){var n=this[be][e];n&&n.inputData(t)},t.stopRecord=function(e,t){var n=this;return new Promise((function(o,i){var r=n[be][e];r?r.stopRecord(t).then((function(){delete n[be][e],o()}),(function(){i()})):i()}))},e}()),xe=function(){function e(){this._oStorageManager=new ke("./transform",{staticPath:"https://open.ys7.com/assets/ezuikit_v4.0"},void 0)}var t=e.prototype;return t.startRecord=function(e,t){var n=this;return t=null!=t?t:(new Date).getTime()+"",new Promise((function(o,i){n._oStorageManager.startRecord(t+".mp4",e,2,0,{cbEventHandler:function(e){i(e)},iPackage:0}).then((function(e){n.szStorageUUID=e,o(e)}),(function(e){i(e)}))}))},t.inputData=function(e){this.szStorageUUID&&this._oStorageManager.inputData(this.szStorageUUID,e)},t.stopRecord=function(e){var t=this;return void 0===e&&(e=!0),new Promise((function(n,o){t._oStorageManager.stopRecord(t.szStorageUUID,e).then((function(e){n(t.szStorageUUID),t.szStorageUUID=""}),(function(e){o(e)}))}))},e}(),we=function(){function e(){this.name="ezuikit-player-plugin-record",this.recording=!1,this._record=new xe}var t=e.prototype;return t.exec=function(e){var t=this;this._player=e,setTimeout((function(){["stop","pause","destroy"].forEach((function(n){e.event.on(n,(function(){t.stopRecord()}))}))}),0)},t.startRecord=function(e,t){var n,o=this;return void 0===e&&(e=""+(new Date).getTime()),this._recordInputDataFn=function(e){var t;o._record.szStorageUUID&&(null==(t=o._record)||t.inputData(e.data))},null==(n=this._record)?void 0:n.startRecord(this._player._aHead,e).then((function(t){var n,i,r;o.recording=!0,null==(i=o._player)||null==(n=i.logger)||n.log("[PlayerRecordPlugin] start record video, filename: ",e),null==(r=o._player)||r.event.on("recordInputData",o._recordInputDataFn)}))},t.stopRecord=function(){var e,t,n,o;return this.recording?(this.recording=!1,null==(t=this._player)||null==(e=t.logger)||e.log("[PlayerRecordPlugin] stop record video"),null==(n=this._player)||n.event.off("recordInputData",this._recordInputDataFn),null==(o=this._record)?void 0:o.stopRecord()):Promise.resolve()},t.destroy=function(){var e=this;this.stopRecord().then((function(){var t,n;null==(n=e._player)||null==(t=n.logger)||t.log("[PlayerRecordPlugin] destroy"),e._record=null}))},e}();ae(':root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-record-timer{align-items:center;background:rgba(0,0,0,.314);border-radius:12px;color:#fff;display:none;height:24px;left:50%;line-height:24px;padding:0 8px;position:absolute;text-align:center;transform:translateX(-50%);z-index:10}.ezui-record-timer:before{background:red;border-radius:100%;content:"";display:inline-block;height:8px;margin:0 8px 0 0;width:8px}');var ze={multiple:8,left:0,bottom:102,scale:1,onChange:function(){}},Ce="".concat(n,"-record-timer"),_e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Z(this,e),this.timer=null,this.$container=t,this.options=Object.assign({},ze,n),this.$recordTimerContainer=this.render()}return Q(e,[{key:"_formatSeconds",value:function(e){var t,n,o,i=parseInt(e+""),r=0,a=0;return i>59&&(r=parseInt(i/60+""),i=parseInt(i%60+""),r>59&&(a=parseInt(r/60+""),r=parseInt(r%60+""))),t=parseInt(i+"")>9?parseInt(i+"")+"":"0"+parseInt(i+""),n=parseInt(r+"")>9?parseInt(r+"")+"":"0"+parseInt(r+""),o=parseInt(a+"")>9?parseInt(a+"")+"":"0"+parseInt(a+""),a>0?o+":"+n+":"+t:r>0?n+":"+t:"00:"+t}},{key:"show",value:function(){var e=this,t=0;this.$recordTimerContainer.style.display="inline-flex",this.timer=window.setInterval((function(){++t,e._renderTimer(t)}),1e3)}},{key:"hide",value:function(){this.timer&&clearInterval(this.timer),this.$recordTimerContainer.style.display="none",this._renderTimer(0)}},{key:"_renderTimer",value:function(e){var t=this.$container.querySelector(".".concat(Ce," span"));t&&(t.innerHTML=this._formatSeconds(e))}},{key:"render",value:function(){var e=document.createElement("div");return e.classList.add(Ce),e.style.bottom=this.options.bottom+"px",e.innerHTML="<span>00:00</span>",this.$container.appendChild(e),e}}]),e}();function Se(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}Se(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-playbackRate{position:relative;width:auto!important}.ezui-playbackRate .ezui-btn{border-color:var(--ezui-footer-color,#fff);border-radius:13px;color:var(--ezui-footer-color,#fff);height:26px;line-height:26px;min-width:64px;padding:0 7px;transition:none}.ezui-playbackRate .ezui-active{border-color:var(--ezui-active-color,#1890ff)}.ezui-playbackRate .ezui-disable{border-color:gray}"),Se(':root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-playbackRate-panel{bottom:calc(var(--ezui-footer-height, 48px) + 16px);box-sizing:border-box;display:inline-flex;flex-direction:column;font-size:13px;left:50%;position:absolute;transform:translateX(-50%);-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezui-playbackRate-panel li,.ezui-playbackRate-panel ul{box-sizing:border-box;list-style:none;margin:0;padding:0}.ezui-playbackRate-panel ul.ezui-playbackRate-panel-list{background:#fff;border-radius:2px;box-shadow:0 3px 20px 0 rgba(0,0,0,.1);color:rgba(0,0,0,.85);display:inline-flex;flex-direction:column;padding:10px 0;position:relative;text-align:center;width:120px}.ezui-playbackRate-panel ul.ezui-playbackRate-panel-list:after{border:8px solid transparent;border-top-color:#fff;bottom:-16px;box-sizing:border-box;content:" ";height:16px;left:50%;position:absolute;transform:translateX(-50%);width:16px}.ezui-playbackRate-panel-item{cursor:pointer;font-size:13px;height:45px;line-height:45px;list-style:none;text-align:center}.ezui-playbackRate-panel-item:hover{background-color:rgba(24,144,255,.102)}.ezui-playbackRate-panel-btn-cancel{background:#fff;border-radius:10px;box-shadow:0 3px 20px 0 rgba(0,0,0,.1);display:none;height:45px;line-height:45px;margin-top:30px;text-align:center}.ezui-playbackRate-panel-item-selected{color:var(--primary-color,#648ffc)}.ezui-playbackRate-panel.ezui-playbackRate-panel-mobile{background:rgba(0,0,0,.4);bottom:0;box-sizing:border-box;height:100%;justify-content:flex-end;left:0;padding-bottom:calc(env(safe-area-inset-bottom) + 80px);position:fixed;right:0;top:0;transform:translateX(0);width:100%;z-index:9999}.ezui-playbackRate-panel.ezui-playbackRate-panel-mobile .ezui-playbackRate-panel-list{border-radius:10px;margin:0 5%;width:auto}.ezui-playbackRate-panel.ezui-playbackRate-panel-mobile .ezui-playbackRate-panel-list:after{display:none}.ezui-playbackRate-panel.ezui-playbackRate-panel-mobile .ezui-playbackRate-panel-btn-cancel{cursor:pointer;display:inline-block;height:45px;margin:30px 5% 0}.ezui-playbackRate-panel.ezui-playbackRate-panel-fullscreen-mobile{align-items:end;justify-content:center;padding-bottom:0}.ezui-playbackRate-panel.ezui-playbackRate-panel-fullscreen-mobile ul.ezui-playbackRate-panel-list{align-items:center!important;background-color:transparent!important;background:rgba(0,0,0,.75)!important;border-radius:0!important;color:#fff!important;flex-direction:column!important;height:100vw!important;justify-content:center!important;margin:0!important;padding-bottom:calc(env(safe-area-inset-bottom) + 20px);width:240px!important}.ezui-playbackRate-panel.ezui-playbackRate-panel-fullscreen-mobile ul.ezui-playbackRate-panel-list li{background-color:transparent!important;width:100%}.ezui-playbackRate-panel.ezui-playbackRate-panel-fullscreen-mobile .ezui-playbackRate-panel-btn-cancel{background:transparent;background:none;border-radius:0;box-shadow:none;font-size:0;margin:0;position:absolute;right:200px;top:0;width:40px}.ezui-playbackRate-panel.ezui-playbackRate-panel-fullscreen-mobile .ezui-playbackRate-panel-btn-cancel:before{background:#fff;border:none;content:"";display:block;height:1px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%) rotate(45deg);width:16px}.ezui-playbackRate-panel.ezui-playbackRate-panel-fullscreen-mobile .ezui-playbackRate-panel-btn-cancel:after{background:#fff;border:none;content:"";display:block;height:16px;left:50%;position:absolute;top:50%;transform:translate(-50%,-50%) rotate(45deg);width:1px}');var Te=[.5,1,2,4,8],Me="".concat(n,"-playbackRate-panel"),Le={open:!1,rates:[{rate:4,text:"4倍"},{rate:2,text:"2倍"},{rate:1,text:"1倍（正常播放）",isDefault:!0},{rate:.5,text:"0.5倍"}]},De=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Z(this,e),this.$container=t,this.options=Object.assign({},Le,n),0===this.options.rates.length&&(this.options.rates=Le.rates),this._current=this._getDefaultCurrent(),this.$panelContainer=this.render()}return Q(e,[{key:"current",get:function(){return this._current}},{key:"_getDefaultCurrent",value:function(){var e;if(Te.includes(this.options.current))return this.options.current;var t=this.options.rates.find((function(e){return e.isDefault}));return t?t.rate:null===(e=this.options.rates[0])||void 0===e?void 0:e.rate}},{key:"show",value:function(){this.options.theme.mobileFullScreen?(this.$panelContainer.classList.contains("".concat(Me,"-fullscreen-mobile"))||this.$panelContainer.classList.add("".concat(Me,"-fullscreen-mobile")),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:9999;new Promise((function(){var n=document.documentElement.clientWidth,o=document.documentElement.clientHeight,i=e,r="";r+="width:"+o+"px;",r+="height:"+n+"px;",r+="-webkit-transform: rotate(90.001deg); transform: rotate(90.001deg);",r+="-webkit-transform-origin: "+n/2+"px "+n/2+"px;",r+="transform-origin: "+n/2+"px "+n/2+"px;",r+="position: fixed;top: 0;left: 0;z-index:".concat(t),i.style.cssText=i.style.cssText+r}))}(this.$panelContainer)):(this.$panelContainer.classList.remove("".concat(Me,"-fullscreen-mobile")),this.$panelContainer.style.cssText=""),this.$panelContainer.style.display="inline-flex","function"==typeof this.options.onOpenChange&&this.options.onOpenChange(!0)}},{key:"hide",value:function(){this.$panelContainer.style.display="none","function"==typeof this.options.onOpenChange&&this.options.onOpenChange(!1)}},{key:"selectedCurrent",value:function(e){var t,n,o,i,r=this;this._current=e||this._current;var a="".concat(Me,"-item-selected");if(null===(n=null===(t=this.$panelContainer.querySelector(".".concat(a)))||void 0===t?void 0:t.classList)||void 0===n||n.remove(a),null===(o=this.$panelContainer.querySelector(".".concat(Me,'-item[data-rate="').concat(this._current,'"]')))||void 0===o||o.classList.add(a),"function"==typeof this.options.onChange){var c=this.options.rates.find((function(e){return e.rate===r._current}));c&&(null===(i=this.options)||void 0===i||i.onChange(c))}this.hide()}},{key:"render",value:function(){var e,t=this,n=document.createElement("div");if(n.classList.add(Me),n.style.display="none",n.innerHTML='\n        <ul class="'.concat(Me,'-list">\n            ').concat((null!==(e=this.options.rates)&&void 0!==e?e:[]).map((function(e){return'<li class="'.concat(Me,"-item ").concat(t._current===e.rate?"".concat(Me,"-item-selected"):"",'" data-rate="').concat(e.rate,'">').concat(e.text||e.rate,"</li>")})).join(""),"\n        </ul>"),this.options.isMobile){n.classList.add("".concat(Me,"-mobile")),this.options.theme.mobileFullScreen&&n.classList.add("".concat(Me,"-fullscreen-mobile"));var o=document.createElement("div");o.classList.add("".concat(Me,"-btn-cancel")),o.innerHTML="取消",n.appendChild(o),null==o||o.addEventListener("click",(function(){t.hide(),"function"==typeof t.options.onOk&&t.options.onOk()})),null==n||n.addEventListener("click",(function(){t.hide()})),document.body.appendChild(n)}else this.$container.appendChild(n);return n.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault()})),function(e,t,n){e.addEventListener("click",(function(o){for(var i=o.target||o.srcElement;i!==e;){if(i.classList.contains(t.replace(/^\./,""))){n(i);break}if(!i.parentNode)break;i=i.parentNode}}),!1)}(n,"".concat(Me,"-item"),(function(e){var n=e.getAttribute("data-rate");if(null!==n&&+n>0){var o=+n;Te.includes(o)&&t._current!==o&&(t._current=o,t.selectedCurrent()),t.hide()}})),n}}]),e}();
/*
*
* @ezuikit/utils-tools v1.0.1
* Copyright (c) 2024-3-23 Ezviz-OpenBiz
* Released under MIT the License.
*
*/
var Ee=function(e){var t=e.split("?")[1],n={};if(t)for(var o=t.split("&"),i=0;i<o.length;i++){var r=o[i].split("=");n[r[0]]=decodeURIComponent(r[1])}return n};function Pe(e,t){var n=null!=t?t:{},o=n.type,i=n.recType,r=n.search,a=n.definition,c=n.channelNo,s=n.deviceSerial,l=n.validateCode,d=function(e){var t={};if(/^ezopen:\/\//.test(e)){if(e.includes("@")){var n=e.indexOf("@"),o=e.indexOf("//");t.validateCode=e.substring(o+2,n),e=e.replace(t.validateCode+"@","")}t.protocol=e.split("//")[0],t.search=e.split("?")[1]?"?"+e.split("?")[1]:"",t.hostname=e.split("/")[2],t.origin=t.protocol+"//"+t.hostname,t.pathname=e.split("?")[0].replace(t.origin,""),t.href=e;var i=t.pathname.split("/"),r=i[2].split(".");return t.deviceSerial=i[1],t.channelNo=r[0],t.type=r[r.length-1],"live"===t.type&&(t.definition=r.length>2?r[1]:"sd"),"rec"===t.type&&(t.recType=r.length>2?r[1]:""),t.searchParams=Ee(e),t}return{}}(e);if(r){var u=Object.assign({},d.searchParams,Ee("?"+r.replace("?","")));r=Object.entries(u).reduce((function(e,t){var n=t[0],o=t[1];return""===o?e:e+=n+"="+encodeURIComponent(o)+"&"}),"?").replace(/&$/,"")}else r=d.search;return o=o||d.type,i=null!=i?i:d.recType,a=null!=a?a:d.definition,c=c||d.channelNo,s=s||d.deviceSerial,l=null!=l?l:d.validateCode,d.protocol+"//"+(l?l+"@":"")+d.hostname+"/"+s+"/"+c+("rec"===o&&i?"."+i:"")+("live"===o&&"hd"===a?"."+a:"")+"."+o+r
/*
*
* @ezuikit/theme-plugin-rec-types v0.1.0
* Copyright (c) 2024-3-23 Ezviz-OpenBiz
* Released under MIT the License.
*
*/}!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-rec-types{box-sizing:border-box;display:inline-flex;flex-direction:row;flex-wrap:nowrap;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezui-theme-mobile .ezui-rec-types{background:#f8f8f8;border-radius:8px;font-size:20px;line-height:24px;margin:0 20px}.ezui-theme-mobile .ezui-rec-types span{color:#ccc;display:inline-flex;height:24px;justify-content:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:35px}.ezui-theme-mobile .ezui-rec-types span.ezui-active{border-radius:8px;box-shadow:0 2px 5px 0 rgba(23,45,101,.2);color:#648ffc!important}");var He=["webFullscreen"],$e=[{name:"deviceID",position:"hl"},{name:"deviceName",position:"hl"},{name:"recTypes",position:"hr"},{name:"play",position:"fl"},{name:"snapshot",oldName:"capturePicture",position:"fl"},{name:"volume",oldName:"sound",position:"fl"},{name:"record",oldName:"recordvideo",position:"fl"},{name:"zoom",position:"fl"},{name:"playbackRate",oldName:"speed",position:"fr"},{name:"webFullscreen",oldName:"webExpend",position:"fr"},{name:"fullscreen",oldName:"expend",position:"fr"},{name:"timeline",position:"bl"},{name:"datepicker",position:"br"}],Ie={recTypes:["cloud","local"],controls:["play","snapshot","volume","record","zoom","playbackRate","webFullscreen","fullscreen","timeline","datepicker","deviceID","deviceName","recTypes"],headerRender:void 0,footerRender:void 0,ignoreDownloadSnapshot:!1,headerHeight:48,footerHeight:48,isMobile:!1,height:400,width:600};function Re(){return Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Re.apply(this,arguments)}function Fe(e,t){var n={header:[],footer:[],bottom:[]};return t.map((function(e){var t=null;return"string"==typeof e?t=$e.find((function(t){return t.name===e})):(t=$e.find((function(t){return t.name===e.name})))?Re({},t,e):null})).filter((function(e){return!!e})).forEach((function(t){var o=e.get(t.name);o&&((null==t?void 0:t.position.startsWith("h"))?n.header.push({name:t.name,plugin:o,position:t.position}):(null==t?void 0:t.position.startsWith("f"))?n.footer.push({name:t.name,plugin:o,position:t.position}):(null==t?void 0:t.position.startsWith("b"))&&n.bottom.push({name:t.name,plugin:o,position:t.position}))})),n}var Oe={height:48,timeWidth:0,time:(new Date).getTime(),timeSection:[]},Ae=function(){function e(e,t){if(void 0===t&&(t={}),this.nowTime=(new Date).getTime(),this.timeSection=[],this.timeWidth=60,this.timeWidthTbls=[60,1800,3600,86400],this.timeUnits=["范围: 1分钟; 单位: 秒","范围: 30分钟; 单位: 分钟","范围: 1小时; 单位: 分钟","范围: 1天; 单位: 小时","范围: 3天; 单位: 小时"],this.timeUnit="",this.options=Object.assign({},Oe,t),this.$container="string"==typeof e?document.getElementById(e):e,!this.$container)throw new Error("[TimeLine]: container is required!");this.$canvas=document.createElement("canvas"),this.$canvas.className="time-line",this.$canvas.height=this.options.height,this.$canvas.width=500,this.$canvas.style.display="inline-block;",this.$canvas.innerHTML="该浏览器不支持canvas",this.$container.appendChild(this.$canvas)}var t=e.prototype;return t.init=function(e){var t=this,n=this.options,o=this;return new Promise((function(i,r){e.width&&t.$container.setAttribute("width",parseInt(e.width,10)+"px"),t.timeWidthTblIndex=n.timeWidth,t._drawPen=t.$canvas.getContext("2d"),o.nowTime=e.nowTime,o.timeSection=n.timeSection||[],o.update(),t.$canvas.addEventListener("mousemove",(function(e){o.options.readOnly||o.mousemove(e)})),t.$canvas.addEventListener("mouseover",(function(e){o.options.readOnly||o.mouseover(e)})),t.$canvas.addEventListener("mouseleave",(function(e){o.options.readOnly||o.mouseleave(e)})),t.$canvas.addEventListener("mousedown",(function(e){o.options.readOnly||o.mousedown(e)})),t.$canvas.addEventListener("mouseup",(function(t){if(!o.options.readOnly){var n=e.onChange;o.mouseUpFn(t,n)}})),i()}))},t._renderNode=function(){},t.subTime=function(e){return e<10?"0"+e:e},t.tranTime=function(e){var t=e;if(e){var n=new Date(e);t=n.getFullYear()+"/"+(n.getMonth()+1)+"/"+n.getDate()+" "+this.subTime(n.getHours())+":"+this.subTime(n.getMinutes())+":"+this.subTime(n.getSeconds())}return t+""},t.setWidth=function(e){e.width&&(this.$container.style.width=e.width,this.$canvas.width=e.width,this.update({time:this.nowTime||new Date}))},t.mousemove=function(e){if(this.isMouseDown&&this.isOver){var t=this.mousePosition-e.pageX;if(0===t)return;var n=0;switch(this.timeWidth){case 60:n=.1;break;case 1800:n=3;break;case 3600:n=90;break;case 86400:n=120}var o=new Date(this.oldTime).getTime()+t*n*1e3;this.update({time:o}),this.moved=!0}else{var i=parseInt(this.$container.offsetLeft+"",10);this.mousePosition=e.pageX-i,this.update()}},t.mousedown=function(e){this.isMouseDown=!0,this.mousePosition=e.pageX,this.oldTime=this.nowTime},t.mouseover=function(e){this.isOver=!0},t.mouseleave=function(e){this.isOver=!1,this.isMouseDown=!1,this.update()},t.changeScale=function(e){this.options.timeWidth=e,this.update({timeWidth:e})},t.mouseUpFn=function(e,t){if(this.isMouseDown&&(this.isMouseDown=!1,this.moved)){this.moved=!1;var n=new Date(this.nowTime).getFullYear()+"/"+(new Date(this.nowTime).getMonth()+1)+"/"+new Date(this.nowTime).getDate()+" "+this.subTime(new Date(this.nowTime).getHours())+":"+this.subTime(new Date(this.nowTime).getMinutes())+":"+this.subTime(new Date(this.nowTime).getSeconds());this.nowTime=new Date(n).getTime(),this.update({time:this.nowTime}),this.oldTime=this.nowTime,"function"==typeof t&&t(this.nowTime)}},t.readOnly=function(){this.options.readOnly=!0,this.$canvas.style.cursor="not-allowed"},t.unReadOnly=function(){this.options.readOnly=!1,this.$canvas.style.cursor="pointer"},t.setCurrent=function(e){this.run({time:e})},t.run=function(e){this.isMouseDown||this.update(e)},t.update=function(e){var t=this;e=e||{},t.nowTime=e.time||t.nowTime,t.timeSection=e.timeSection||t.timeSection,t.timeWidthTblIndex=e.timeWidth||t.timeWidthTblIndex,t.timeWidth=t.timeWidthTbls[e.timeWidth||t.timeWidthTblIndex],t.timeUnit=t.timeUnits[e.timeWidth||t.timeWidthTblIndex],0===e.timeWidth&&(t.timeWidthTblIndex=0,t.timeWidth=t.timeWidthTbls[0],t.timeUnit=t.timeUnits[0]),this._drawPen.fillStyle="#000000",t._drawPen.fillRect(0,0,t.$canvas.offsetWidth,t.$canvas.offsetHeight),t.drawScale(),t.drawRecord(),t.drawOtherMsg()},t.drawSolidLine=function(e,t,n,o,i,r){this._drawPen.save(),this._drawPen.strokeStyle=r,this._drawPen.lineWidth=i,this._drawPen.beginPath(),this._drawPen.moveTo(e,t),this._drawPen.lineTo(n,o),this._drawPen.stroke(),this._drawPen.restore()},t.drawString=function(e,t,n,o){this._drawPen.font="12px serif",this._drawPen.fillStyle="#ffffff",this._drawPen.textAlign=o||"left",this._drawPen.fillText(e,t,n+10)},t.drawScale=function(){var e=this,t="rgba(255,255,255)",n=e.nowTime?new Date(e.nowTime):new Date,o=n.getSeconds(),i=n.getMinutes(),r=n.getHours(),a=n.getDate(),c=0;switch(e.timeWidth){case 60:var s=parseInt(e.$canvas.offsetWidth/10+"");n.setSeconds(n.getSeconds()-parseInt(s/2+"",10)),a=n.getDate(),r=n.getHours(),i=n.getMinutes(),o=n.getSeconds();for(var l=0;l<s;l++){if(c=o+l,n.setSeconds(c),c%10==0){e.drawSolidLine(l*e.$canvas.offsetWidth/s,8,l*e.$canvas.offsetWidth/s,e.$canvas.offsetHeight/5+8,1,t);var d=this.subTime(n.getHours())+":"+this.subTime(n.getMinutes())+":"+this.subTime(n.getSeconds());e.drawString(d,l*e.$canvas.offsetWidth/s,e.$canvas.offsetHeight/5*2.5,"center","rgba(255,255,255,0.3)")}else e.drawSolidLine(l*e.$canvas.offsetWidth/s,8,l*e.$canvas.offsetWidth/s,e.$canvas.offsetHeight/5*.5+8,1,t);n.setDate(a),n.setHours(r),n.setMinutes(i)}break;case 1800:var u=new Date(e.nowTime),p=3600*u.getHours()+60*u.getMinutes()+u.getSeconds(),h=parseInt(p/60+""),f={position:parseInt(e.$canvas.offsetWidth/2+""),time:0,hideString:!0},v=Math.ceil(e.$canvas.offsetWidth/40)+h,m=[];m.push(f);for(var b=0;b<v;b++)m.push({position:f.position+20*b-parseInt(p/3+""),time:f.time+60*b}),m.unshift({position:f.position-20*b-parseInt(p/3+""),time:f.time-60*b});for(var g=0;g<m.length;g++)if(e.drawSolidLine(m[g].position,8,m[g].position,e.$canvas.offsetHeight/5*(m[g].time%100==0?1:.5)+8,1,t),m[g].time%100==0&&!m[g].hideString){var y=new Date(1e3*m[g].time),k=(y.getUTCHours()<10?"0"+y.getUTCHours():y.getUTCHours())+":"+(y.getUTCMinutes()<10?"0"+y.getUTCMinutes():y.getUTCMinutes());e.drawString(k,m[g].position,e.$canvas.offsetHeight/5*2,"center","rgba(255,255,255,0.3)")}break;case 3600:var x=new Date(e.nowTime),w=3600*x.getHours()+60*x.getMinutes()+x.getSeconds(),z=parseInt(w/1800+""),C={position:parseInt(e.$canvas.offsetWidth/2+""),time:0,hideString:!0},_=Math.ceil(e.$canvas.offsetWidth/40)+z,S=[];S.push(C);for(var T=0;T<_;T++)S.push({position:C.position+20*T-parseInt(w/90+""),time:C.time+1800*T}),S.unshift({position:C.position-20*T-parseInt(w/90+""),time:C.time-1800*T});for(var M=0;M<S.length;M++)if(e.drawSolidLine(S[M].position,8,S[M].position,e.$canvas.offsetHeight/5*(S[M].time%9e3==0?1:.5)+8,1,t),S[M].time%9e3==0&&!S[M].hideString){var L=new Date(1e3*S[M].time),D=(L.getUTCHours()<10?"0"+L.getUTCHours():L.getUTCHours())+":"+(L.getUTCMinutes()<10?"0"+L.getUTCMinutes():L.getUTCMinutes());e.drawString(D,S[M].position,e.$canvas.offsetHeight/5*2,"center","rgba(255,255,255,0.3)")}break;case 86400:var E=new Date(e.nowTime),P=3600*E.getHours()+60*E.getMinutes()+E.getSeconds(),H=parseInt(P/3600+""),$={position:parseFloat(e.$canvas.offsetWidth/2+""),time:0,hideString:!0},I=Math.ceil(e.$canvas.offsetWidth/60)+H,R=[];R.push($);for(var F=0;F<I;F++)R.push({position:$.position+30*F-P/120,time:$.time+3600*F}),R.unshift({position:$.position-30*F-P/120,time:$.time-3600*F});for(var O=0;O<R.length;O++)if(e.drawSolidLine(R[O].position,8,R[O].position,e.$canvas.offsetHeight/5*(R[O].time%7200==0?1:.5)+8,1,t),R[O].time%7200==0&&!R[O].hideString){var A=new Date(1e3*R[O].time),B=(A.getUTCHours()<10?"0"+A.getUTCHours():A.getUTCHours())+":"+(A.getUTCMinutes()<10?"0"+A.getUTCMinutes():A.getUTCMinutes());e.drawString(B,R[O].position,e.$canvas.offsetHeight/5*2,"center","rgba(255,255,255,0.3)")}}},t.setRecord=function(e){this.timeSection=e,this.drawRecord()},t.drawRecord=function(){for(var e=this.timeSection||[],t=this,n=this._drawPen,o=0;o<e.length;o++){var i=a(e[o].startTime),r=a(e[o].endTime);n.fillStyle="#1890ff80",n.fillRect(i,0,r-i,48)}function a(e){var n=10;switch(t.timeWidth){case 60:n=10;break;case 1800:n=20/60;break;case 3600:n=20/30/60;break;case 86400:n=.5/60}var o=t.$canvas.offsetWidth/2+(e-t.nowTime)/1e3*n;return o>t.$canvas.offsetWidth&&(o=t.$canvas.offsetWidth),o<=0&&(o=0),o}},t.drawOtherMsg=function(){this.drawSolidLine(this.$canvas.offsetWidth/2,0,this.$canvas.offsetWidth/2,this.$canvas.offsetHeight,2,"#1890FF"),this._drawPen.shadowBlur=0,this.isOver&&!this.isMouseDown?(this.mouseTime=this.mousePosition/this.$canvas.offsetWidth*this.timeWidth*1e3+this.nowTime-this.timeWidth/2*1e3,this.mouseString=this.tranTime(this.mouseTime),this.hoverTime=this.mouseString,this.hoverLeft=this.mousePosition-60,this.timeTipShow=!0):this.timeTipShow=!1},e}();S(':root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-timeline-mobile-container{height:300px;margin-top:20px;position:relative;text-align:left;width:100%}.ezui-timeline-mobile-container .ezui-timeline-mobile-current{border-bottom:1px solid #648ffc;height:29px;left:0;margin-left:26%;position:absolute;top:40px;width:60%}.ezui-timeline-mobile-container .ezui-timeline-mobile-current-time-bg{color:#2c2c2c;font-size:12px;height:29px;left:-70px;line-height:29px;position:relative;top:15px;width:100px}.ezui-timeline-mobile-container .ezui-timeline-mobile-current-time-bg:before{background:#648ffc;border-radius:100%;content:"";display:inline-block;height:6px;position:absolute;right:30px;top:11px;width:6px}.ezui-timeline-mobile-item-container{box-sizing:border-box;display:inline-block;height:300px;overflow-x:hidden;overflow-y:scroll;position:relative;white-space:nowrap;width:30%}.ezui-timeline-mobile-item-container::-webkit-scrollbar{height:0;width:0}.ezui-timeline-mobile-time-item{border-right:6px solid #ddd;box-sizing:border-box;color:#969696;font-size:12px;height:60px;position:relative}.ezui-timeline-mobile-time-item .ezui-timeline-mobile-scale{border-bottom:1px solid #ccc;clear:both;float:right;height:9px;width:6px}.ezui-timeline-mobile-time-item .ezui-timeline-mobile-valid{background-color:#ddd;left:100%;position:absolute;width:6px}');var Be=function(){},Ne={onCurrent:Be,onChange:Be,fragmentColor:"#A8B9ED",lineBgColor:"#ddd",scaleLineColor:"#ccc"},Ue=n+"-timeline-mobile",We=[60,600,1800,3600,43200],Ye=function(){function e(e,t){if(this.dragging=!1,n=e,!(null!=(o=HTMLElement)&&"undefined"!=typeof Symbol&&o[Symbol.hasInstance]?o[Symbol.hasInstance](n):n instanceof o))throw new Error("[MobileTimeLine] container must be a HTMLElement!");var n,o;this.$container=e,this.options=Object.assign({},Ne,t||{}),this.onChange=(null==t?void 0:t.onChange)||Be,this.state={start:"00:00:00",end:"24:00:00",current:"00:00:00",scale:30,timeArr:[],availTimeLine:[],scrollTop:0,index:0,date:"",noTimeLineTxt:"",disabled:!1},this._touchEvent(),this.matchTimeDot()}var t=e.prototype;return t._touchEvent=function(){var e,t,n,o,i,r=this;function a(e){r.state.disabled||(r.dragging=!0,"function"==typeof r.options.ontouchstart&&r.options.ontouchstart(e))}function c(e){r.state.disabled||(r.dragging=!0,"function"==typeof r.options.ontouchmove&&r.options.ontouchmove(e))}function s(e){if(!r.state.disabled){var t;r.dragging=!1;var n=new Promise((function(e,n){var o=-1;t=window.setInterval((function(){var n,i=(null==(n=r.$container)?void 0:n.parentNode).scrollTop;i!==o?o=i:(clearInterval(t),e(i))}),100)}));n.then((function(e){r.rectTopToTime(e),r.onChange(r.state.current)})),"function"==typeof r.options.ontouchend&&r.options.ontouchend(e)}}this.checkIsHarmonyOS()?(null==(e=this.$container.parentNode)||e.addEventListener("touchstart",a,!1),null==(t=this.$container.parentNode)||t.addEventListener("touchmove",c,!1),null==(n=this.$container.parentNode)||n.addEventListener("touchend",s,!1)):((null==(o=r.$container)?void 0:o.parentNode).ontouchstart=a,(null==(i=r.$container)?void 0:i.parentNode).ontouchmove=c,r.$container.parentNode.ontouchend=s)},t.setState=function(e){var t=this;Object.keys(e).forEach((function(n){var o;(t.state[n]=e[n],"scrollTop"===n)&&(null==(o=t.$container)?void 0:o.parentNode).scrollTo(0,e[n]);"current"===n&&"function"==typeof t.options.onCurrent&&t.options.onCurrent(e[n])}))},t.setDisabled=function(e){var t;this.setState({disabled:e}),(null==(t=this.$container)?void 0:t.parentNode)&&(this.$container.parentNode.style.overflowY=e?"hidden":"scroll")},t.timeToSecond=function(e){var t=e.split(":"),n=Number(t[0]),o=Number(t[1]),i=Number(t[2]);return 60*n*60+60*o+(i||0)},t.minuteToTime=function(e){var t=Math.floor(e/60),n=e%60;return(t>9?t:"0"+t)+":"+(n>9?n:"0"+n)},t.timeToMinute=function(e){var t=e.split(":");return 60*Number(t[0])+Number(t[1])},t.checkIsAppleDevice=function(){var e=navigator.userAgent,t=!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),n=e.includes("iPad"),o=e.includes("iPhone")||e.includes("Mac");return!!(t||n||o)},t.checkIsHarmonyOS=function(){return!!navigator.userAgent.includes("ohos")},t.matchTimeDot=function(){var e=this.state;e.start;for(var t=e.end,n=e.scale,o=[],i=this.timeToMinute(t),r=i=Math.floor(i/n)*n;r>=0;){var a=0,c=0;r===i&&(a=70),0===r&&(c=230);var s=this.minuteToTime(r);o.push({id:r,current:s,label:"a"+r,marginTop:a,marginBottom:c,recArr:[]}),r-=n}this.setState({timeArr:o}),this.renderDateLine()},t.changeScale=function(e){var t=We[e]||30;this.setState({scale:t}),this.matchTimeDot()},t.setRecord=function(e,t){e.length>0?(void 0===t&&(t=e.length-1),this.setState({availTimeLine:e,start:e[t].startTime,end:e[t].endTime,current:e[t].startTime}),this.matchRecTimeDot(),this.primaryOffsetH()):(this.setState({availTimeLine:[]}),this.matchRecTimeDot())},t.matchRecTimeDot=function(){var e=this.state;e.start,e.end;var t=e.scale,n=e.availTimeLine,o=e.timeArr,i=n.length;if(0===i)for(var r=0;r<o.length;r++)o[r].recArr=[];else{for(var a=0;a<o.length;a++)o[a].recArr=[];for(var c=0;c<i;c++){var s,l,d=n[c],u=this.timeToSecond(d.startTime),p=this.timeToSecond(d.endTime),h=Math.floor(u/(60*t))*t;s=(u-60*h)/t;var f=Math.floor(p/(60*t))*t;l=(p-60*f)/t;for(var v=0;v<o.length;v++)if(o[v].id===h&&o[v].id===f){var m=l-s,b=60-l;o[v].recArr.push({height:m,top:b})}else o[v].id===h?o[v].recArr.push({height:60-s,top:0}):o[v].id===f?o[v].recArr.push({height:l,top:60-l}):o[v].id>h&&o[v].id<f&&o[v].recArr.push({height:60,top:0})}}this.setState({timeArr:o}),this.renderDateLine()},t.renderDateLine=function(){var e=this,t=this.state.timeArr;this.$container.innerHTML="",t.forEach((function(t){var n=document.createElement("div");n.setAttribute("class",Ue+"-time-item"),n.style="margin-top: "+t.marginTop+"px; margin-bottom: "+t.marginBottom+"px; border-right-color: "+e.options.lineBgColor+";";var o='<div class="'+Ue+'-scale" style="border-bottom-color: '+e.options.scaleLineColor+';"></div>\n                          <div class="'+Ue+'-scale" style="border-bottom-color: '+e.options.scaleLineColor+';"></div>\n                          <div class="'+Ue+'-scale" style="border-bottom-color: '+e.options.scaleLineColor+';"></div>\n                          <div class="'+Ue+'-scale" style="border-bottom-color: '+e.options.scaleLineColor+';"></div>\n                          <div class="'+Ue+'-scale" style="border-bottom-color: '+e.options.scaleLineColor+';"></div>\n                          <div class="'+Ue+'-scale" style="width:10px; border-bottom-color: '+e.options.scaleLineColor+';"></div>';t.recArr.forEach((function(t){o+='<div class="'+Ue+'-valid" style="height: '+t.height+"px;background-color:"+e.options.fragmentColor+"; top: "+t.top+'px"></div>'})),o+="<div id="+t.label+' style="position: relative; top: 51px; left: 40%"> '+t.current+"</div>",n.innerHTML=o,e.$container.appendChild(n)}))},t.primaryOffsetH=function(){var e=this.state,t=e.start,n=e.scale,o=e.timeArr[0].current,i=this.timeToSecond(o)-this.timeToSecond(t),r=Math.ceil(i/n)+60;this.setState({scrollTop:r})},t.currentOffsetH=function(){var e=this.state,t=e.current,n=e.scale,o=e.timeArr[0].current,i=this.timeToSecond(o)-this.timeToSecond(t),r=Math.ceil(i/n)+60;this.setState({scrollTop:r})},t.rectTopToTime=function(e){var t,n,o=this.state.scale,i=Math.floor(e/60),r=e-60*i;if(0===r)t=this.state.timeArr[i-1].current,n=0;else{var a=this.state.timeArr[i].current,c=this.timeToMinute(a),s=(60-r)*o,l=Math.floor(s/60)+c,d=60*Math.floor(s/60);n=Math.ceil(s-d),t=this.minuteToTime(l)}this.setState({current:t+":"+(n>9?n:"0"+n),scrollTop:e})},t.setCurrent=function(e){this.dragging||("number"==typeof e&&(e=_(e).format("HH:mm:ss")),this.setState({current:e}),this.currentOffsetH())},t.secondCountDown=function(){var e=this.state.current.split(":"),t=60*Number(e[0])*60+60*Number(e[1])+Number(e[2])+1,n=Math.floor(t/3600),o=Math.floor((t-3600*n)/60),i=t-3600*n-60*o;this.setState({current:(n>9?n:"0"+n)+":"+(o>9?o:"0"+o)+":"+(i>9?i:"0"+i)})},e}();function je(e){var t=new Date(e),n=t.getHours(),o=t.getMinutes(),i=t.getSeconds();return(n>9?n:"0"+n)+":"+(o>9?o:"0"+o)+":"+(i>9?i:"0"+i)}function qe(e,t,n){e.addEventListener("click",(function(o){for(var i=o.target||o.srcElement;;){if(i===e)break;if(i.classList.contains(t.replace(/^\./,""))){n(i);break}if(!i.parentNode)break;i=i.parentNode}}),!1)}S(":root{--font-size:14px;--color:#fff;--background-color:#000;--active-color:#1890ff;--botton-color:var(--color);--botton-border-color:var(--color);--footer-height:48px;--footer-icon-size:27px;--footer-color:--color;--footer-background-color:var(--background-color,#000);--footer-active-color:var(--active-color,#1890ff);--header-height:var(--footer-height,48px);--header-icon-size:27px;--header-color:var(--footer-color);--header-background-color:var(-footer-bg-color,#000);--header-active-color:var(--footer-active-color,#1890ff);--date-picker-header-height:34px;--date-picker-color:#595959;--date-picker-primary-color:#1890ff;--date-picker-font-size:14px;--date-picker-border-color:rgba(5,5,5,.06);--date-picker-disable-border-color:rgba(0,0,0,.2);--data-picker-scrollbar-width:8px;--data-picker-border-radius:2px}.ezui-calendar{height:var(--ezui-footer-height,48px);line-height:var(--ezui-footer-height,48px)}.ezui-footer-mobile-extend-date{margin:20px 0;position:relative}.ezui-mobile-extend-date-title{color:#2c2c2c;font-size:16px;font-weight:700;height:40px;line-height:40px;text-align:center}.ezui-mobile-extend-date-container{height:40px;position:absolute;right:10px;top:0;width:40px;z-index:10}.ezui-mobile-extend-date-container>div{height:40px;position:relative;width:40px}.ezui-mobile-extend-date-container label{display:inline-block;height:40px}.ezui-mobile-extend-date-container input[type=date]{border-width:0;display:inline-block;height:40px;opacity:0;position:absolute;right:0;top:0;width:40px}");var Xe="".concat(n,"-datepicker"),Ve="".concat(Xe,"-cell-selected"),Ke=["01","02","03","04","05","06","07","08","09","10","11","12"];function Ze(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}function Ge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{showSuperIcon:!0};return t=Object.assign({},{showSuperIcon:!0},t),'<div class="'.concat(Xe,'-header">\n        ').concat(t.showSuperIcon?'<div class="'.concat(Xe,'-header-super-prev-btn"><span class="').concat(Xe,'-super-prev-icon"></span></div>'):"","\n        ").concat(t.showIcon?'<div class="'.concat(Xe,'-header-prev-btn"><span class="').concat(Xe,'-prev-icon"></span></div>'):"",'\n        <div class="').concat(Xe,'-header-view">\n            ').concat(e(),"\n        </div>\n        ").concat(t.showIcon?'<div class="'.concat(Xe,'-header-next-btn"><span class="').concat(Xe,'-next-icon"></span></div>'):"","\n        ").concat(t.showSuperIcon?'<div class="'.concat(Xe,'-header-super-next-btn"><span class="').concat(Xe,'-super-next-icon"></span></div>'):"","\n    </div>")}function Qe(e){return(e=+e)<=9&&(e="0".concat(e)),"".concat(e)}function Je(e,t){return Array.apply(null,{length:Math.ceil(e.length/t)}).map((function(n,o){return e.slice(o*t,(o+1)*t)}))}function et(e,t,n){e.addEventListener("click",(function(o){for(var i=o.target||o.srcElement,r=Array.from(e.querySelectorAll(t));i&&i!==e;){if(r.findIndex((function(e){return e===i}))>-1){n(i);break}i=i.parentNode}o.stopPropagation()}),!1)}Ze('.ezui-datepicker{cursor:unset;line-height:normal}.ezui-datepicker-layout{align-items:stretch;display:flex;flex-wrap:nowrap}.ezui-datepicker-panel{display:flex;flex-direction:row}.ezui-datepicker-date-panel{display:flex;flex-direction:column}.ezui-datepicker-month-panel,.ezui-datepicker-month-panel .ezui-datepicker-header,.ezui-datepicker-year-panel,.ezui-datepicker-year-panel .ezui-datepicker-header{width:230px}.ezui-datepicker-month-panel .ezui-datepicker-body,.ezui-datepicker-year-panel .ezui-datepicker-body{padding:1px 8px}.ezui-datepicker-month-panel table,.ezui-datepicker-year-panel table{width:100%}.ezui-datepicker-month-panel .ezui-datepicker-cell,.ezui-datepicker-year-panel .ezui-datepicker-cell{height:52px}.ezui-datepicker-month-panel .ezui-datepicker-cell-inner,.ezui-datepicker-year-panel .ezui-datepicker-cell-inner{padding:0 8px}.ezui-datepicker-body{color:var(--ezui-date-picker-color,rgba(0,0,0,.88));padding:0 10px}.ezui-datepicker-body table,.ezui-datepicker-body tbody,.ezui-datepicker-body td,.ezui-datepicker-body th,.ezui-datepicker-body thead,.ezui-datepicker-body tr{border:0;border-color:transparent;border-spacing:0;box-sizing:border-box;margin:0;padding:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezui-datepicker-body td,.ezui-datepicker-body th{height:30px;width:30px}.ezui-datepicker-content{min-width:210px}.ezui-datepicker-cell{box-sizing:border-box;color:rgba(0,0,0,.25);cursor:pointer;padding:0;position:relative;text-align:center}.ezui-datepicker-cell:hover .ezui-datepicker-cell-inner{background-color:rgba(0,0,0,.04)}.ezui-datepicker-cell:before{content:"";height:22px;inset-inline-end:0;inset-inline-start:0;position:absolute;top:50%;transform:translateY(-50%);transition:all .3s;z-index:1}.ezui-datepicker-cell-in-view{color:var(--ezui-date-picker-color,rgba(0,0,0,.88))}.ezui-datepicker-cell-in-view.ezui-datepicker-cell-selected .ezui-datepicker-cell-inner{background-color:var(--ezui-date-picker-primary-color,#1677ff)!important;color:#fff}.ezui-datepicker-cell-in-view.ezui-datepicker-cell-today .ezui-datepicker-cell-inner:before{border:1px solid var(--ezui-date-picker-primary-color,#1677ff);border-radius:var(--data-picker-border-radius,2px);bottom:0;content:"";inset-inline-end:0;inset-inline-start:0;position:absolute;top:0;z-index:1}.ezui-datepicker-cell-inner{border-radius:var(--data-picker-border-radius,2px);display:inline-block;height:22px;line-height:22px;min-width:22px;position:relative;transition:background .2s,border .2s;z-index:2}.ezui-datepicker-cell-disable{color:rgba(0,0,0,.25)!important;cursor:not-allowed!important}.ezui-datepicker-cell-disable .ezui-datepicker-cell-inner{cursor:not-allowed!important}.ezui-datepicker-cell-disable.ezui-datepicker-cell-today .ezui-datepicker-cell-inner:before{border-color:var(--ezui-date-picker-disable-border-color,rgba(0,0,0,.25))!important}.ezui-datepicker-cell-disable:hover:not(.ezui-datepicker-cell-selected) .ezui-datepicker-cell-inner{background-color:transparent!important}.ezui-datepicker-cell-disable.ezui-datepicker-cell-selected .ezui-datepicker-cell-inner{background-color:var(--ezui-date-picker-disable-border-color,rgba(0,0,0,.25))!important}.ezui-datepicker-cell-disable.ezui-datepicker-cell-selected .ezui-datepicker-cell-inner:before{border-color:transparent!important}.ezui-datepicker-today{color:var(--ezui-date-picker-primary-color,#1677ff);cursor:pointer}'),Ze('.ezui-datepicker-btn{background-image:none;background:transparent;border:1px solid transparent;border-radius:var(--ezui-data-picker-border-radius,2px);box-shadow:0 2px 0 rgba(5,145,255,.1);color:var(--ezui-date-picker-primary-color,#1677ff);cursor:pointer;display:inline-block;font-weight:400;height:20px;line-height:19px;outline:none;padding:0 4px;position:relative;text-align:center;touch-action:manipulation;transition:all .2s cubic-bezier(.645,.045,.355,1);-webkit-user-select:none;-moz-user-select:none;user-select:none;white-space:nowrap}.ezui-datepicker-btn-primary{background-color:var(--ezui-date-picker-primary-color,#1677ff);border:1px solid transparent;box-shadow:0 2px 0 rgba(5,145,255,.1);color:#fff}.ezui-datepicker-btn-disable{background-color:rgba(0,0,0,.04);border-color:#d9d9d9;color:rgba(0,0,0,.25);cursor:not-allowed}.ezui-datepicker-container{background:#fff;border-radius:var(--ezui-data-picker-border-radius,2px);box-shadow:0 3px 6px -4px rgba(0,0,0,.05);box-shadow:0 3px 16px 0 rgba(0,0,0,.03);box-shadow:0 9px 28px 8px rgba(0,0,0,.05);box-sizing:border-box;display:inline-flex;flex-direction:column;font-size:var(--ezui-date-picker-font-size,14px);margin:0;overflow:hidden;padding:0;vertical-align:top}.ezui-datepicker-container li,.ezui-datepicker-container ul{border:0;box-sizing:border-box;list-style:none;margin:0;padding:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezui-datepicker-header,.ezui-datepicker-time-header{border-bottom:1px solid var(--ezui-date-picker-border-color,rgba(5,5,5,.06));box-sizing:border-box;color:var(--ezui-date-picker-color,rgba(0,0,0,.88));display:inline-flex;flex-direction:row;height:var(--ezui-date-picker-header-height,34px);padding:0 8px;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezui-datepicker-header{color:var(--ezui-date-picker-color,rgba(0,0,0,.88));font-weight:600}.ezui-datepicker-header-next-btn,.ezui-datepicker-header-prev-btn,.ezui-datepicker-header-super-next-btn,.ezui-datepicker-header-super-prev-btn{background:0 0;border:0;box-sizing:border-box;color:rgba(0,0,0,.45);cursor:pointer;font-size:var(--ezui-date-picker-font-size,14px);line-height:var(--ezui-date-picker-header-height,34px);min-width:1.6em;padding:0;text-align:center;transition:color .2s}.ezui-datepicker-header-next-btn:hover,.ezui-datepicker-header-prev-btn:hover,.ezui-datepicker-header-super-next-btn:hover,.ezui-datepicker-header-super-prev-btn:hover{color:var(--ezui-date-picker-color,rgba(0,0,0,.88))}.ezui-datepicker-next-icon,.ezui-datepicker-prev-icon,.ezui-datepicker-super-next-icon,.ezui-datepicker-super-prev-icon{display:inline-block;height:7px;position:relative;transform:rotate(-45deg);width:7px}.ezui-datepicker-next-icon:before,.ezui-datepicker-prev-icon:before,.ezui-datepicker-super-next-icon:before,.ezui-datepicker-super-prev-icon:before{border:0 solid;border-block-end-width:0;border-block-start-width:1.5px;border-inline-end-width:0;border-inline-start-width:1.5px;content:"";display:inline-block;height:7px;inset-inline-start:0;position:absolute;top:0;width:7px}.ezui-datepicker-super-next-icon:after,.ezui-datepicker-super-prev-icon:after{border:0 solid;border-block-end-width:0;border-block-start-width:1.5px;border-inline-end-width:0;border-inline-start-width:1.5px;content:"";display:inline-block;height:7px;inset-inline-start:4px;position:absolute;top:4px;width:7px}.ezui-datepicker-next-icon,.ezui-datepicker-super-next-icon{transform:rotate(135deg)}.ezui-datepicker-header-view{display:inline-flex;flex:1 1 auto;flex-direction:row;justify-content:center;text-align:center}.ezui-datepicker-header-month-btn,.ezui-datepicker-header-view,.ezui-datepicker-header-year-btn{height:var(--ezui-date-picker-header-height,34px);line-height:var(--ezui-date-picker-header-height,34px)}.ezui-datepicker-header-month-btn,.ezui-datepicker-header-year-btn{border:0;box-sizing:border-box;color:var(--ezui-date-picker-color,rgba(0,0,0,.88));cursor:pointer;font-size:inherit;font-weight:600;padding:0;transition:color .2s}.ezui-datepicker-header-month-btn:hover,.ezui-datepicker-header-year-btn:hover{color:var(--ezui-date-picker-primary-color,#1677ff)}.ezui-datepicker-header-month-btn{margin-left:8px}');var tt="".concat(Xe,"-year-container"),nt=function(){function e(t){Z(this,e),this.options=t,this._current=_(this.options.current||new Date),this._renderCurrent=this._current,this._onHeaderSuperPrevBtn(),this._onHeaderSuperNextBtn(),this._onCell()}return Q(e,[{key:"setCurrent",value:function(e){this._current=_(e),this._renderCurrent=this._current}},{key:"_onCell",value:function(){var e=this;et(this.options.container,".".concat(tt," .").concat(Xe,"-cell"),(function(t){if(!t.classList.contains("".concat(Xe,"-cell-disable"))){var n=t.getAttribute("title");e.setCurrent(_(n)),"function"==typeof e.options.onChange&&e.options.onChange(e._current)}}))}},{key:"_onHeaderSuperPrevBtn",value:function(){var e=this;et(this.options.container,".".concat(tt," .").concat(Xe,"-header-super-prev-btn"),(function(){e._renderCurrent=e._renderCurrent.add(-10,"year"),e.render()}))}},{key:"_onHeaderSuperNextBtn",value:function(){var e=this;et(this.options.container,".".concat(tt," .").concat(Xe,"-header-super-next-btn"),(function(){e._renderCurrent=e._renderCurrent.add(10,"year"),e.render()}))}},{key:"render",value:function(e){this._renderCurrent=e||this._renderCurrent,this.options.container.innerHTML='<div class="'.concat(Xe,"-container ").concat(tt,'">\n      <div class="').concat(Xe,'-layout">\n        <div class="').concat(Xe,'-panel">\n            ').concat(this._renderYear(this._renderCurrent.year()),"\n        </div>\n      </div>\n    </div>")}},{key:"_renderYear",value:function(e){var t=this,n=this._createYearsList(e);return'<div class="'.concat(Xe,'-year-panel">\n                ').concat(Ge((function(){return"".concat(n[1],"年 - ").concat(n[n.length-2],"年")})),'\n                <div class="').concat(Xe,'-body">\n                    <table class="').concat(Xe,'-content">\n                    <tbody>\n                        ').concat(Je(n,3).slice(0,4).map((function(n,o){return"<tr>\n                                        ".concat(n.map((function(n,i){var r=0===o&&0===i||3===o&&2===i?"".concat(Xe,"-cell ").concat(Xe,"-cell-year"):"".concat(Xe,"-cell ").concat(Xe,"-cell-year ").concat(Xe,"-cell-in-view");return+n==+t._current.format("YYYY")&&(r=r+" "+Ve),"function"==typeof t.options.disabledDate&&t.options.disabledDate(_("".concat(e)))&&(r=r+" "+"".concat(Xe,"-cell-disable")),'<td title="'.concat(n,'" class="').concat(r,'">\n                                                    ').concat(t.options.yearRender&&"function"==typeof t.options.yearRender?t.options.yearRender(n):'<span class="'.concat(Xe,'-cell-inner">').concat(+n,"</span>"),"\n                                                    </td>")})).join(""),"\n                                    </tr>")})).join(""),"\n                    </tbody>\n                    </table>\n                </div>\n            </div>")}},{key:"_createYearsList",value:function(e){for(var t=[],n=e%10+1;n>=0;n--)t.push(e-n);for(var o=1;t.length<12;o++)t.push(e+o);return t}}]),e}(),ot={current:new Date},it="".concat(Xe,"-month-container"),rt=function(){function e(t){Z(this,e),this.options=Object.assign({},ot,t||{}),this._current=_(this.options.current||new Date),this._onHeaderSuperPrevBtn(),this._onHeaderSuperNextBtn(),this._onCell()}return Q(e,[{key:"setCurrent",value:function(e){this._current=_(e)}},{key:"_onCell",value:function(){var e=this;et(this.options.container,".".concat(it," .").concat(Xe,"-cell"),(function(t){var n=e.options.container;if(!t.classList.contains("".concat(Xe,"-cell-disable"))){var o=n.querySelector(".".concat(Ve));o&&o.classList.remove(Ve),t.classList.add(Ve);var i=t.getAttribute("title");e._current=_(i),"function"==typeof e.options.onChange&&e.options.onChange(e._current)}}))}},{key:"_onHeaderSuperPrevBtn",value:function(){var e=this;et(this.options.container,".".concat(it," .").concat(Xe,"-header-super-prev-btn"),(function(){e._current=e._current.add(-1,"year"),e.render(_(e._current))}))}},{key:"_onHeaderSuperNextBtn",value:function(){var e=this;et(this.options.container,".".concat(it," .").concat(Xe,"-header-super-next-btn"),(function(){e._current=e._current.add(1,"year"),e.render(e._current)}))}},{key:"render",value:function(e){this.setCurrent(e),this.options.container.innerHTML='<div class="'.concat(Xe,"-container ").concat(it,'">\n      <div class="').concat(Xe,'-layout">\n        <div class="').concat(Xe,'-panel">\n            ').concat(this._renderMonth(this._current.year()),"\n        </div>\n      </div>\n    </div>")}},{key:"_renderMonth",value:function(e){var t=this;return'<div class="'.concat(Xe,'-year-panel">\n                ').concat(Ge((function(){return'<span class="'.concat(Xe,'-header-year-btn" title="').concat(e,'">').concat(e,"年</span>")})),'\n                <div class="').concat(Xe,'-body">\n                    <table class="').concat(Xe,'-content">\n                    <tbody>\n                        ').concat(Je(Ke,3).slice(0,4).map((function(n){return"<tr>\n                                        ".concat(n.map((function(n){var o="".concat(Xe,"-cell ").concat(Xe,"-cell-month ").concat(Xe,"-cell-in-view");return+n==+t._current.format("MM")&&(o=o+" "+Ve),"function"==typeof t.options.disabledDate&&t.options.disabledDate(_("".concat(e,"-").concat(n)))&&(o=o+" "+"".concat(Xe,"-cell-disable")),'<td title="'.concat(e,"-").concat(n,'" class="').concat(o,'">\n                                                    ').concat(t.options.monthRender&&"function"==typeof t.options.monthRender?t.options.monthRender(n):'<span class="'.concat(Xe,'-cell-inner">').concat(n,"</span>"),"\n                                                    </td>")})).join(""),"\n                                    </tr>")})).join(""),"\n                    </tbody>\n                    </table>\n                </div>\n            </div>")}}]),e}();function at(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=ct(e,t-=1),i=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return(new Date(e,t).getDay()-n+7)%7}(e,t,n),r=[],a=1;a<=i+o;a++){var c=a-i;c<1?r.push("".concat(0===t?e-1:e,"-").concat(Qe((t+12-1)%12+1),"-").concat(Qe(ct(e,t-1)+c))):c>o?r.push("".concat(11===t?e+1:e,"-").concat(Qe((t+1)%12+1),"-").concat(c-o)):r.push("".concat(e,"-").concat(Qe(t+1),"-").concat(Qe(c)))}for(var s=1;r.length<42;)r.push("".concat(11===t?e+1:e,"-").concat(Qe((t+1)%12+1),"-").concat(Qe(s++)));return r}(e.year(),e.month()+1,t)}function ct(e,t){return new Date(e,t+1,0).getDate()}function st(e){return'<div class="'.concat(Xe,'-footer">\n  <div>').concat(e.showToday?'<span class="'.concat(Xe,'-today">今天</span>'):"","</div>\n  ").concat(e.onOk?'<div><button class="'.concat(Xe,"-btn ").concat(Xe,"-btn-primary ").concat(Xe,'-btn-ok">确定</button></div>'):"","\n</div>")}Ze(".ezui-datepicker-btn{background-image:none;background:transparent;border:1px solid transparent;border-radius:var(--ezui-data-picker-border-radius,2px);box-shadow:0 2px 0 rgba(5,145,255,.1);color:var(--ezui-date-picker-primary-color,#1677ff);cursor:pointer;display:inline-block;font-weight:400;height:20px;line-height:19px;outline:none;padding:0 4px;position:relative;text-align:center;touch-action:manipulation;transition:all .2s cubic-bezier(.645,.045,.355,1);-webkit-user-select:none;-moz-user-select:none;user-select:none;white-space:nowrap}.ezui-datepicker-btn-primary{background-color:var(--ezui-date-picker-primary-color,#1677ff);border:1px solid transparent;box-shadow:0 2px 0 rgba(5,145,255,.1);color:#fff}.ezui-datepicker-btn-disable{background-color:rgba(0,0,0,.04);border-color:#d9d9d9;color:rgba(0,0,0,.25);cursor:not-allowed}.ezui-datepicker-container{background:#fff;border-radius:var(--ezui-data-picker-border-radius,2px);box-shadow:0 3px 6px -4px rgba(0,0,0,.05);box-shadow:0 3px 16px 0 rgba(0,0,0,.03);box-shadow:0 9px 28px 8px rgba(0,0,0,.05);box-sizing:border-box;display:inline-flex;flex-direction:column;font-size:var(--ezui-date-picker-font-size,14px);margin:0;overflow:hidden;padding:0;vertical-align:top}.ezui-datepicker-container li,.ezui-datepicker-container ul{border:0;box-sizing:border-box;list-style:none;margin:0;padding:0;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezui-datepicker-time-panel{border-inline-start:1px solid var(--ezui-date-picker-border-color,rgba(5,5,5,.06));display:flex;flex-direction:column}.ezui-datepicker-time-header{color:var(--ezui-date-picker-color,rgba(0,0,0,.88));display:flex;font-weight:600;height:var(--ezui-date-picker-header-height,34px);justify-content:center;line-height:var(--ezui-date-picker-header-height,34px);text-align:center;width:auto}.ezui-datepicker-time-body{display:inline-flex;flex-direction:row}.ezui-datepicker-time-body ul{border-inline-start:1px solid rgba(5,5,5,.06)!important;box-sizing:border-box;display:inline-flex;flex-direction:column;height:208px;margin:1px 0!important;overflow-x:hidden;overflow-y:hidden;padding-bottom:182px!important;position:relative;scrollbar-color:rgba(0,0,0,.45) transparent;scrollbar-width:thin;width:40px}.ezui-datepicker-time-body ul:first-child{border-inline-start:0 solid rgba(5,5,5,.06)!important}.ezui-datepicker-time-body ul:hover{overflow-y:auto}.ezui-datepicker-time-body ul::-webkit-scrollbar{background-color:transparent;color:transparent;width:var(--data-picker-scrollbar-width,8px)}.ezui-datepicker-time-body ul::-webkit-scrollbar-thumb{background-color:transparent;border-radius:4px}.ezui-datepicker-time-body ul:hover::-webkit-scrollbar-thumb{background-color:rgba(0,0,0,.45);color:transparent}.ezui-datepicker-time-body ul:first-child{border-inline-color:transparent;border-inline-start-width:0}.ezui-datepicker-time-body ul li{margin:0 4px}.ezui-datepicker-time-body ul li.ezui-datepicker-time-cell-selected div{background:#e6f4ff}.ezui-datepicker-time-cell-inner{border-radius:4px;box-sizing:border-box;color:var(--ezui-date-picker-color);cursor:pointer;display:block;height:26px;line-height:26px;margin:0;padding-left:7px;text-align:left;transition:background .2s;width:31px}.ezui-datepicker-time-cell-inner:hover{background-color:rgba(0,0,0,.04)}"),Ze(".ezui-datepicker-btn{background-image:none;background:transparent;border:1px solid transparent;border-radius:var(--ezui-data-picker-border-radius,2px);box-shadow:0 2px 0 rgba(5,145,255,.1);color:var(--ezui-date-picker-primary-color,#1677ff);cursor:pointer;display:inline-block;font-weight:400;height:20px;line-height:19px;outline:none;padding:0 4px;position:relative;text-align:center;touch-action:manipulation;transition:all .2s cubic-bezier(.645,.045,.355,1);-webkit-user-select:none;-moz-user-select:none;user-select:none;white-space:nowrap}.ezui-datepicker-btn-primary{background-color:var(--ezui-date-picker-primary-color,#1677ff);border:1px solid transparent;box-shadow:0 2px 0 rgba(5,145,255,.1);color:#fff}.ezui-datepicker-btn-disable{background-color:rgba(0,0,0,.04);border-color:#d9d9d9;color:rgba(0,0,0,.25);cursor:not-allowed}.ezui-datepicker-container{background:#fff;border-radius:var(--ezui-data-picker-border-radius,2px);box-shadow:0 3px 6px -4px rgba(0,0,0,.05);box-shadow:0 3px 16px 0 rgba(0,0,0,.03);box-shadow:0 9px 28px 8px rgba(0,0,0,.05);box-sizing:border-box;display:inline-flex;flex-direction:column;font-size:var(--ezui-date-picker-font-size,14px);margin:0;overflow:hidden;padding:0;vertical-align:top}.ezui-datepicker-container li,.ezui-datepicker-container ul{border:0;list-style:none;margin:0;padding:0}.ezui-datepicker-container li,.ezui-datepicker-container ul,.ezui-datepicker-footer{box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;user-select:none}.ezui-datepicker-footer{align-items:center;border-top:1px solid rgba(5,5,5,.06);color:rgba(0,0,0,.88);display:inline-flex;flex-direction:row;height:var(--ezui-date-picker-header-height,34px);justify-content:space-between;padding:4px 12px}");var lt="".concat(Xe,"-time-container"),dt="".concat(Xe,"-time-cell"),ut="".concat(dt,"-selected"),pt=function(){for(var e=[],t=0;t<24;t++)e.push(Qe(t));return e}(),ht=function(){for(var e=[],t=0;t<60;t++)e.push(Qe(t));return e}(),ft=function(){for(var e=[],t=0;t<60;t++)e.push(Qe(t));return e}(),vt={onOk:function(){},showHeader:!1},mt=function(){function e(t){Z(this,e),this.options=Object.assign({},vt,t||{}),this._current=this.options.current?_(this.options.current):null,this._times=this._current?this._current.format("HH:mm:ss").split(":"):[],this._activeItem(),this._onCell(),this._onOk()}return Q(e,[{key:"setCurrent",value:function(e){this._current=e?_(e):this._current,this._times=this._current?this._current.format("HH:mm:ss").split(":"):[],this._activeItem()}},{key:"_onCell",value:function(){var e=this;et(this.options.container,".".concat(dt),(function(t){if(!t.classList.contains("".concat(Xe,"-cell-disable"))){var n=t.getAttribute("data-type"),o=t.getAttribute("data-title");e._times=["hour"===n?o:e._times[0]||"00","minute"===n?o:e._times[1]||"00","second"===n?o:e._times[2]||"00"],e._current=(e._current||_()).set("hour",+e._times[0]).set("minute",+e._times[1]).set("second",+e._times[2]),e._activeItem(),"function"==typeof e.options.onChange&&e.options.onChange(e._current)}}))}},{key:"_onOk",value:function(){var e=this;et(this.options.container,".".concat(lt," .").concat(Xe,"-btn-ok"),(function(t){t.classList.contains("".concat(Xe,"-disable"))||"function"==typeof e.options.onOk&&e.options.onOk(e._current)}))}},{key:"_activeItem",value:function(){var e,t,n,o=this._times;if(o[0]){var i=this.options.container.querySelector(".".concat(Xe,'-time-hour[data-title="').concat(o[0],'"]'));i&&s(i)}if(o[1]){var r=this.options.container.querySelector(".".concat(Xe,'-time-minute[data-title="').concat(o[1],'"]'));r&&s(r)}if(o[2]){var a=this.options.container.querySelector(".".concat(Xe,'-time-second[data-title="').concat(o[2],'"]'));a&&s(a)}var c=this.options.container.querySelector(".".concat(Xe,"-time-header"));function s(e){var t,n=null===(t=e.parentElement)||void 0===t?void 0:t.querySelector(".".concat(ut));n&&n.classList.remove(ut),e.classList.add(ut),e.scrollIntoView({behavior:"smooth"})}c&&(c.innerHTML=this._current?"<span>".concat(null===(e=this._current)||void 0===e?void 0:e.format("HH"),":").concat(null===(t=this._current)||void 0===t?void 0:t.format("mm"),":").concat(null===(n=this._current)||void 0===n?void 0:n.format("ss"),"</span>"):"")}},{key:"renderLayoutString",value:function(e){var t=this;return this.setCurrent(e),setTimeout((function(){if(t._current){var e=t._current.format("HH:mm:ss").split(":"),n=t.options.container.querySelector(".".concat(Xe,"-time-hour[data-title='").concat(e[0],"']"));n&&n.scrollIntoView();var o=t.options.container.querySelector(".".concat(Xe,"-time-minute[data-title='").concat(e[1],"']"));o&&o.scrollIntoView();var i=t.options.container.querySelector(".".concat(Xe,"-time-second[data-title='").concat(e[2],"']"));i&&i.scrollIntoView()}}),0),this._renderTime()}},{key:"render",value:function(e){this.setCurrent(e),this.options.container.innerHTML='<div class="'.concat(Xe,"-container ").concat(lt,'">\n                                            <div class="').concat(Xe,'-layout">').concat(this.renderLayoutString(),"</div>\n                                            ").concat("function"==typeof this.options.onOk?st({onOk:this.options.onOk}):"","\n                                        </div>")}},{key:"_renderTime",value:function(){var e=this._times;return'<div class="'.concat(Xe,"-panel ").concat(Xe,'-time-panel">\n                ').concat(this.options.showHeader?'<div class="'.concat(Xe,'-time-header">\n                    ').concat(3===e.length?"<span>".concat(e[0],":").concat(e[1],":").concat(e[2],"</span>"):"","\n                    </div>"):"",'\n             <div class="').concat(Xe,'-time-body">\n               <ul class="').concat(Xe,'-time-column"> \n                 ').concat(pt.map((function(t){var n=t===e[0]?ut:"";return'<li class="'.concat(dt," ").concat(Xe,"-time-hour ").concat(n,'" data-title="').concat(t,"\" data-type='hour'><div class=\"").concat(dt,'-inner">').concat(t,"</div></li>")})).join(""),'\n               </ul>\n               <ul class="').concat(Xe,'-time-column">\n                 ').concat(ht.map((function(t){var n=t===e[1]?ut:"";return'<li class="'.concat(dt," ").concat(Xe,"-time-minute ").concat(n,'" data-title="').concat(t,"\" data-type='minute'><div class=\"").concat(dt,'-inner">').concat(t,"</div></li>")})).join(""),'\n               </ul>\n               <ul class="').concat(Xe,'-time-column">\n                 ').concat(ft.map((function(t){var n=t===e[2]?ut:"";return'<li class="'.concat(dt," ").concat(Xe,"-time-second ").concat(n,'" data-title="').concat(t,"\" data-type='second'><div class=\"").concat(dt,'-inner">').concat(t,"</div></li>")})).join(""),"\n               </ul>\n             </div>\n           </div>")}}]),e}(),bt="".concat(Xe,"-date-container"),gt=["日","一","二","三","四","五","六"],yt={startOfWeek:0,showTime:!0,showToday:!0,onOk:function(){}},kt=function(){function e(t){var n,o,i;Z(this,e),this.options=Object.assign({},yt,t||{}),(null===(n=this.options)||void 0===n?void 0:n.startOfWeek)&&((null===(o=this.options)||void 0===o?void 0:o.startOfWeek)>6||(null===(i=this.options)||void 0===i?void 0:i.startOfWeek)<0)&&(this.options.startOfWeek=0),this._current=_(this.options.current||new Date),this._renderCurrent=this._current,this._selectedCurrent=this._current,this._onHeaderSuperPrevBtn(),this._onHeaderSuperNextBtn(),this._onHeaderPrevBtn(),this._onHeaderNextBtn(),this._onCell(),this._onToday(),this._onOk(),this._renderTime()}return Q(e,[{key:"_renderTime",value:function(){var e=this;this.options.showTime&&(this._timeCls=new mt({container:this.options.container,current:this._selectedCurrent,showHeader:!0,onChange:function(t){e._selectedCurrent=_("".concat(e._selectedCurrent.format("YYYY-MM-DD")," ").concat(t.format("HH:mm:ss"))),e._renderCurrent=e._selectedCurrent}}))}},{key:"setCurrent",value:function(e){this._current=_(e),this._renderCurrent=this._current,this._selectedCurrent=this._current}},{key:"_onCell",value:function(){var e=this;et(this.options.container,".".concat(bt," .").concat(Xe,"-cell"),(function(t){if(!t.classList.contains("".concat(Xe,"-cell-disable"))){var n=t.getAttribute("title");if(e._renderCurrent=_("".concat(n," ").concat(e._renderCurrent.format("HH:mm:ss"))),e._selectedCurrent=e._renderCurrent,t.parentNode){var o=e.options.container.querySelector(".".concat(Ve));o&&o.classList.remove(Ve),t.classList.add(Ve)}"function"==typeof e.options.onChange&&"function"!=typeof e.options.onOk&&(e.setCurrent(_("".concat(n," ").concat(e._selectedCurrent.format("HH:mm:ss")))),e.options.onChange(e._selectedCurrent)),e._reRenderDate()}}))}},{key:"_onHeaderSuperPrevBtn",value:function(){var e=this;et(this.options.container,".".concat(bt," .").concat(Xe,"-header-super-prev-btn"),(function(){e._renderCurrent=e._renderCurrent.add(-1,"year"),e._reRenderDate()}))}},{key:"_onHeaderSuperNextBtn",value:function(){var e=this;et(this.options.container,".".concat(bt," .").concat(Xe,"-header-super-next-btn"),(function(){e._renderCurrent=e._renderCurrent.add(1,"year"),e._reRenderDate()}))}},{key:"_onHeaderPrevBtn",value:function(){var e=this;et(this.options.container,".".concat(bt," .").concat(Xe,"-header-prev-btn"),(function(){e._renderCurrent=e._renderCurrent.add(-1,"month"),e._reRenderDate()}))}},{key:"_onHeaderNextBtn",value:function(){var e=this;et(this.options.container,".".concat(bt," .").concat(Xe,"-header-next-btn"),(function(){e._renderCurrent=e._renderCurrent.add(1,"month"),e._reRenderDate()}))}},{key:"_onToday",value:function(){var e=this;et(this.options.container,".".concat(bt," .").concat(Xe,"-today"),(function(){var t=_(_().format("YYYY-MM-DD"));e.setCurrent(t),"function"==typeof e.options.onChange&&e.options.onChange(e._selectedCurrent)}))}},{key:"_onOk",value:function(){var e=this;et(this.options.container,".".concat(bt," .").concat(Xe,"-btn-ok"),(function(t){t.classList.contains("".concat(Xe,"-disable"))||(e.setCurrent(e._selectedCurrent),"function"==typeof e.options.onOk&&e.options.onOk(e._selectedCurrent),"function"==typeof e.options.onChange&&e.options.onChange(e._selectedCurrent))}))}},{key:"render",value:function(e){this.setCurrent(e),this.options.container.innerHTML='<div class="'.concat(Xe,"-container ").concat(bt,'">\n        <div class="').concat(Xe,'-layout">\n          <div class="').concat(Xe,"-panel ").concat(Xe,'-date-panel">').concat(this._renderDate(e),"</div>\n          ").concat(this._timeCls?this._timeCls.renderLayoutString(e):"","\n        </div>\n        ").concat(st(this.options),"\n      </div>")}},{key:"_reRenderDate",value:function(){var e=this.options.container.querySelector(".".concat(Xe,"-date-panel"));e&&(e.innerHTML=this._renderDate(this._renderCurrent))}},{key:"_renderDate",value:function(e){var t=this,n=new Date,o=e.year(),i=e.month()+1,r=Je(at(e,this.options.startOfWeek),7),a=[].concat(ee(gt.slice(this.options.startOfWeek)),ee(gt.slice(0,this.options.startOfWeek)));return"".concat(Ge((function(){return'<span class="'.concat(Xe,'-header-year-btn">').concat(o,'年</span><span class="').concat(Xe,'-header-month-btn">').concat(i,"月</span>")}),{showIcon:!0}),'\n            <div class="').concat(Xe,'-body">\n              <table class="').concat(Xe,'-content">\n                <thead><tr>').concat(a.map((function(e){return"<th>".concat(e,"</th>")})).join(""),"</tr></thead>\n                <tbody>\n                  ").concat(r.slice(0,7).map((function(e){return"<tr>\n                                ".concat(e.map((function(e){var o=J(e.split("-"),3),r=o[0],a=o[1],c=o[2],s="function"==typeof t.options.disabledDate&&t.options.disabledDate(_(e));return'<td title="'.concat(e,'" class="').concat(["".concat(Xe,"-cell"),i===+a?"".concat(Xe,"-cell-in-view"):"",n.getFullYear()===+r&&n.getMonth()+1===+a&&n.getDate()===+c?"".concat(Xe,"-cell-today"):"",s?"".concat(Xe,"-cell-disable"):"",t._selectedCurrent.format("YYYY-MM-DD")===e?Ve:""].filter(Boolean).join(" "),'">').concat("function"==typeof t.options.dateRender?t.options.dateRender(_(e)):'<span class="'.concat(Xe,'-cell-inner">').concat(+c,"</span>"),"</td>")})).join(""),"\n                              </tr>")})).join(""),"\n                </tbody>\n              </table>\n            </div>")}}]),e}(),xt={getPopupContainer:function(){return document.body},position:"tr",open:!1,picker:"date",disableDate:function(){return!1}},wt=function(){function e(t){Z(this,e),this.$datePicker=this._createCreateContainer(),this.options=Object.assign({},xt,null!=t?t:{}),this._current=_(t.current||new Date),this._renderCurrent=this._current,this._open=this.options.open,this._activePicker=this.options.picker,this.$container=this.options.getPopupContainer(),this.$container.appendChild(this.$datePicker),this._onHeaderYearMonthBtn(),this._onContainer(),this._createYearMonthDateTime(),this._open&&(this._switchPicker(this.options.picker),this.show()),this._onDocumentClick()}return Q(e,[{key:"setCurrent",value:function(e){this.options.current=e,this._current=_(e),this._renderCurrent=this._current}},{key:"show",value:function(){this._switchPicker(this.options.picker),this.$datePicker.style.display="inline-block",this._position(),this._open=!0}},{key:"hide",value:function(){this.$datePicker.style.display="none",this._open=!1,this._renderCurrent=this._current}},{key:"_onHeaderYearMonthBtn",value:function(){var e=this;et(this.$datePicker,".".concat(Xe,"-header-year-btn"),(function(){e._activePicker="year",e._switchPicker(e._activePicker)})),et(this.$datePicker,".".concat(Xe,"-header-month-btn"),(function(){e._activePicker="month",e._switchPicker(e._activePicker)}))}},{key:"_onContainer",value:function(){var e=this;this.$container.addEventListener("click",(function(t){e._switchShowHide(),t.stopImmediatePropagation(),t.stopPropagation()}))}},{key:"_switchShowHide",value:function(){this._open?(this.hide(),this._open=!1):(this.show(),this._open=!0)}},{key:"_createCreateContainer",value:function(){var e=document.createElement("div");return e.classList.add(Xe),e.style.position="fixed",e.style.zIndex="1000",e.style.display="none",e}},{key:"_createYearMonthDateTime",value:function(){var e=this,t=this.$datePicker,n=this;this._calendarCls=new kt({container:t,current:this.options.current,showTime:this.options.showTime,showToday:this.options.showToday,disabledDate:this.options.disabledDate,dateRender:this.options.dateRender,onChange:function(t){e.setCurrent(t),"function"==typeof n.options.onChange&&n.options.onChange(n._current),n.hide()},onOk:function(t){e.setCurrent(t),"function"==typeof n.options.onOk&&n.options.onOk(n._current),n.hide()}}),this._monthCls=new rt({container:t,current:this.options.current,disabledDate:this.options.disabledDate,onChange:function(t){n._renderCurrent=e._renderCurrent.set("year",t.year()).set("month",t.month()),"month"===n.options.picker?(e.setCurrent(t),"function"==typeof n.options.onChange&&(n.options.onChange(n._current),n.options.current=n._current),n.hide()):(n._activePicker="date",n._switchPicker(n._activePicker))}}),this._yearCls=new nt({container:t,current:this.options.current,disabledDate:this.options.disabledDate,onChange:function(t){n._renderCurrent=n._current.set("year",t.year()),"year"===n.options.picker?(e.setCurrent(t),"function"==typeof n.options.onChange&&(n.options.onChange(n._current),n.options.current=n._current),n.hide()):(n._activePicker="month",n._switchPicker(n._activePicker))}})}},{key:"_switchPicker",value:function(e){switch(e){case"year":this._yearCls.render(this._renderCurrent);break;case"month":this._monthCls.render(this._renderCurrent);break;default:this._calendarCls.render(this._renderCurrent)}this._position()}},{key:"_position",value:function(){var e=this.options.getPopupContainer();e.contains(this.$container)||e.appendChild(this.$container);var t=this.$container.getBoundingClientRect(),n=t.top,o=t.left,i=t.width,r=t.height,a=this.$datePicker.getBoundingClientRect(),c=a.width,s=a.height;if(0!==c&&0!==s){var l=n,d=o;switch(this.options.position){case"tl":l=n-s,d=o;break;case"top":l=n-s,d=o-(c/2-i/2);break;case"tr":l=n-s,d=o-c+i;break;case"bl":l=n+r,d=o;break;case"bottom":l=n+r,d=o-(c/2-i/2);break;case"br":l=n+r,d=o-c+i}this.$datePicker.style.top=l+"px",this.$datePicker.style.left=d+"px"}}},{key:"_onDocumentClick",value:function(){var e=this;document.addEventListener("click",(function(){e.hide()}))}}]),e}();function zt(){return zt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},zt.apply(this,arguments)}function Ct(e,t){return e.service.getThemeDetailById(t).then((function(e){return function(e){var t,n,o=((null==(t=e.footer)?void 0:t.btnList)||[]).reduce((function(e,t){if(1!==t.isrender)return e;var n=$e.find((function(e){return e.oldName===t.iconId||e.name===t.iconId}));return n&&e.push(zt({},n,{position:"left"===t.part?"fl":"fr"})),e}),[]),i=((null==(n=e.header)?void 0:n.btnList)||[]).reduce((function(e,t){if(1!==t.isrender)return e;var n=$e.find((function(e){return e.oldName===t.iconId||e.name===t.iconId}));return n&&(delete n.oldName,e.push(zt({},n,{position:"left"===t.part?"hl":"hr"}))),e}),[]);i.push({name:"recTypes",position:"hr"});var r=[{name:"timeline",position:"bl"},{name:"datepicker",position:"br"}],a=e.header,c=e.footer;return{list:[].concat(i,o,r),poster:e.poster,autoFocus:e.autoFocus,headerStyle:a,footerStyle:c}}(e.data)}))}function _t(e){e.style.cssText="position: relative;";var t=e.querySelector("#"+function(e){var t=e.getAttribute("id");if(t)return t+"-container";throw new Error("Theme Container dom id is empty!")}(e));t&&e.removeChild(t);var n=e.querySelector("."+T);n&&e.removeChild(n);var o=e.querySelector("."+D);o&&e.removeChild(o);var i=e.querySelector("."+O);i&&e.removeChild(i)}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function Tt(e,t){return Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Tt(e,t)}function Mt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return St(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0;return function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Lt,Dt=function(e){function a(o){var c,s,l,d,u,p,h;return(c=e.call(this,a._mergeOptions(o))||this)._plugins={},c.mobileFullScreen=!1,o.isMobile&&(o.footerHeight=0),c.options=Object.assign({},Ie,o),c.logger=t({level:null!=(h=null==(l=c.options)||null==(s=l.logger)?void 0:s.level)?h:"INFO",showTime:!1!==(null==(u=c.options)||null==(d=u.logger)?void 0:d.showTime),name:"REC"}),c.logger.log(c.options),"rec"!==c.urlInfo.type&&c.logger.error("Play url is "+c.options.url+", Non playback address!"),c.$container=document.getElementById(null==(p=c.options)?void 0:p.id),function(e,t){i(e,n+"-rec-theme"),r(e,{display:"flex",flexDirection:"column",position:"relative",justifyContent:"space-between",height:t.height+"px",width:t.width+"px"})}(c.$container,o),o.template?(c._renderHeaderFooter([],!0),Ct(c,o.template).then((function(e){c._renderThemeData(e.list),c._renderThemeSkin(e)})).catch((function(e){c.logger.error(e),c._renderPlugins()}))):c._renderPlugins(),c}!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(a,e);var s=a.prototype;return s.play=function(t){return t&&(this.options=Object.assign(this.options,t||{})),e.prototype.play.call(this,t)},s._renderThemeSkin=function(e){!function(e,t){var n,o=t.headerStyle,i=t.footerStyle;if(o){var a=e.$container.querySelector("."+T);a&&(r(a,{background:o.backgroundColor,color:o.color}),e.$container.style.setProperty("--ezui-header-background-color",o.backgroundColor),e.$container.style.setProperty("--ezui-header-color",o.color),e.$container.style.setProperty("--ezui-header-active-color",o.backgroundColor))}if(i){var c=e.$container.querySelector("."+E);c&&(r(c,{background:i.backgroundColor,color:i.color}),e.$container.style.setProperty("--ezui-footer-background-color",i.backgroundColor),e.$container.style.setProperty("--ezui-footer-color",i.color),e.$container.style.setProperty("--ezui-active-color",i.activeColor))}t.poster&&e.setPoster(t.poster),t.autoFocus>=0&&(null==(n=e.event)||n.emit("footer-autoFocus",t.autoFocus))}(this,e)},s._renderThemeData=function(e){var t=Fe(a.plugins,e);this._pluginsCall(),this._renderControls(t),this._registerEvents()},s._renderHeaderFooter=function(e,t){(t||e.header.length>0)&&function(e){var t=e,n=T,o=t.$container.querySelector(".".concat(n));if(o)return o;var i=document.createElement("div");return i.className=n,i.innerHTML='<div class="'.concat(M,'"></div><div class="').concat(L,'"></div>'),t.$container&&t.$container.prepend(i),i}.bind(this,this)(),(t||e.footer.length>0||e.bottom.length>0)&&function(e){var t=e,n=5e3,r=t.$container.querySelector(".".concat(D));if(r)return r;var a=null,c=document.createElement("div");function s(){a&&(clearTimeout(a),a=null),n>0&&(a=window.setTimeout((function(){n>0&&function(){var e=c.querySelector(".".concat(E));e&&n>0&&(e.className.includes(P)?o(e,"".concat(P)):i(e,"".concat(P)))}(),clearTimeout(a)}),n))}return c.className=D,function(){if(c&&(c.innerHTML='\n            <div class="'.concat(E,'">\n              <div class="').concat(H,'"></div>\n              <div class="').concat($,'"></div>\n            </div>\n            ').concat(t.options.isMobile?"":'<div class="'.concat(I,'">\n              <div class="').concat(R,'"></div>\n              <div class="').concat(F,'"></div>\n            </div>')),t.$container&&(t.$container.appendChild(c),t.event.once("destroy",(function(){setTimeout((function(){a&&clearTimeout(a)}),10)}))),t.options.isMobile)){var e=document.createElement("div");e.className=O,e.innerHTML='<div class="'.concat(A,'"></div>\n          <div class="').concat(B,'"></div>\n          <div class="').concat(N,'"></div>'),t.$container&&t.$container.appendChild(e)}}(),s(),t.$container.addEventListener("click",(function(){var e=c.querySelector(".".concat(E));e&&(o(e,"".concat(P)),s())}),!1),t.event.on("footer-autoFocus",(function(e){n=1e3*e;var t=c.querySelector(".".concat(E));t&&o(t,"".concat(P))})),c}.bind(this,this)()},s._renderPlugins=function(){var e=Fe(a.plugins,this.options.controls);this._renderHeaderFooter(e),this._pluginsCall(),this._renderControls(e),this._registerEvents()},s._renderControls=function(e){e.header.length>0&&this._renderControl(e.header),e.footer.length>0&&this._renderControl(e.footer),e.bottom.length>0&&this._renderControl(e.bottom)},s._renderControl=function(e){for(var t,n=Mt(e);!(t=n()).done;){var o=t.value,i=o.name;this.options.isMobile&&He.includes(i)||this._plugins[i]&&this._plugins[i](o)}},s._pluginsCall=function(){var e=this,t=this;a.plugins&&a.plugins.forEach((function(n,o){if(!e.options.isMobile||!He.includes(o)){var i=a.plugins.get(o);i&&"function"==typeof i&&(t._plugins[o]=i.bind(t,t))}}))},s._registerEvents=function(){var e=this;this.event.on("exitScreen",(function(){var t=e.$container.getElementsByClassName(T)[0];t&&o(t,n+"-hidden");var i=e.$container.getElementsByClassName(D)[0];i&&o(i,n+"-hidden");var r=e.$container.getElementsByClassName(O)[0];r&&o(r,n+"-hidden")}))},s.fullScreen=function(){var t=this;if(this.options.isMobile){r=this.$container,void 0===a&&(a=9999),new Promise((function(){var e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,n=r,o="";o+="width:"+t+"px;",o+="height:"+e+"px;",o+="-webkit-transform: rotate(90.001deg); transform: rotate(90.001deg);",o+="-webkit-transform-origin: "+e/2+"px "+e/2+"px;",o+="transform-origin: "+e/2+"px "+e/2+"px;",o+="position: fixed;top: 0;left: 0;z-index:"+a,n.style.cssText=n.style.cssText+o}));try{e.prototype.resize.call(this,document.documentElement.clientHeight,document.documentElement.clientWidth-32)}catch(e){}return this.mobileFullScreen=!0,Promise.resolve()}var o=this.$container.getElementsByClassName(T)[0];o&&i(o,n+"-hidden");var r,a,c=this.$container.getElementsByClassName(D)[0];return c&&i(c,n+"-hidden"),document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.webkitFullScreen||document.msFullScreen?new Promise((function(n){e.prototype.resize.call(t,window.screen.width,window.screen.height).then((function(){return n()}))})):e.prototype.fullScreen.call(this,window.screen.width,window.screen.height)},s.webFullScreen=function(){return e.prototype.fullScreen.call(this,window.screen.width,window.screen.height-(this.options.footerHeight||0)-(this.options.headerHeight||0))},s.exitScreen=function(){if(this.options.isMobile&&this.mobileFullScreen){var t,n;this.mobileFullScreen=!1;try{var o,i;this.resize((null==(o=this.options)?void 0:o.width)||0,(null==(i=this.options)?void 0:i.height)||0)}catch(e){}return(r=this.$container,a=(null==(t=this.options)?void 0:t.width)||0,c=(null==(n=this.options)?void 0:n.height)||0,new Promise((function(){var e="";e+="width:"+a+"px;",e+="height:"+c+"px;",e+="-webkit-transform: none; transform: none;",e+="-webkit-transform-origin: 0 0;",e+="transform-origin: 0 0;",r.style.cssText=r.style.cssText+e}))).then((function(){})),Promise.resolve()}var r,a,c;return e.prototype.exitScreen.call(this)},s.resize=function(t,n){var o=this,i=0,r=0,a=this.$container.getElementsByClassName(T)[0];a&&(i=a.clientHeight);var c=this.$container.getElementsByClassName(D)[0];return c&&(r=c.clientHeight),e.prototype.resize.call(this,t,n-r-i).then((function(){return o.$container.style.width=t+"px",o.$container.style.height=n+"px",{width:t,height:n}}))},s.getOptions=function(){return this.options},s.destroy=function(){return _t(this.$container),e.prototype.destroy.call(this)},s.getVersion=function(){return a.version},a._mergeOptions=function(e){var t;if("string"!=typeof e.id)throw new Error("id is required!");var o=(null==(e=c({},Ie,e))?void 0:e.id)+"-container";this.$container=document.getElementById(null==e?void 0:e.id);var r=document.createElement("div");if(r.setAttribute("id",o),i(this.$container,n+"-rec-theme",e.isMobile?n+"-theme-mobile":""),!this.$container)throw new Error("The id "+e.id+" dom node does not exist!");return null==(t=this.$container)||t.appendChild(r),c({},e,{id:o,fullScreenEle:document.getElementById(null==e?void 0:e.id),height:(null==e?void 0:e.height)-(e.isMobile?32:(null==e?void 0:e.headerHeight)||0)-(e.isMobile?0:(null==e?void 0:e.footerHeight)||0)})},a}(e);Dt.installs([{name:"play",plugin:
/*
*
* @ezuikit/theme-plugin-play v0.1.0
* Copyright (c) 2024-3-23 Ezviz-OpenBiz
* Released under MIT the License.
*
*/
function(e){return function(t){var r=t,c=!1!==r.options.autoPlay,s=document.createElement("div");i(s,"".concat(D,"-item"),"".concat(n,"-disable"));var l=w(null==e?void 0:e.icon),d=z(null==e?void 0:e.icon);i(l,"".concat(n,"-active"));var u=c?l:d;function p(){c?(s.innerHTML="",s.appendChild(l)):(s.innerHTML="",s.appendChild(d))}s.appendChild(d),s.addEventListener("click",a((function(){s.classList.contains("".concat(n,"-disable"))||(c?r.player.pause():"rec"===r.urlInfo.type&&r.player._tempPauseTime?r.player.resume():r.player.play(),c=!c,p())}),100));var h=r.$container.querySelector(".".concat(H));return h&&h.appendChild(s),r.event.on("EVENT_CALLBACK",(function(e){"appearFirstFrameCallback"===e.data.type&&(c=!0,o(s,"".concat(n,"-disable")),p())})),r.event.on("urlChange",(function(){c=!1,i(s,"".concat(D,"-item"),"".concat(n,"-disable")),p()})),r.event.on("initializing",(function(e){e.data&&o(s,"".concat(n,"-disable"))})),u}}()},{name:"snapshot",plugin:
/*
*
* @ezuikit/theme-plugin-snapshot v0.1.0
* Copyright (c) 2024-3-23 Ezviz-OpenBiz
* Released under MIT the License.
*
*/
function(e){return function(t){var r=t,c=p(null==e?void 0:e.icon),s=r.$container.querySelector(".".concat(H));return i(c,"".concat(n,"-disable")),c.addEventListener("click",a((function(){var o,i;c.classList.contains("".concat(n,"-disable"))||(t.options.ignoreDownloadSnapshot||(null==e?void 0:e.ignoreDownloadSnapshot)?r.player.snapshot(null!==(o=null==e?void 0:e.name)&&void 0!==o?o:(new Date).getTime()):r.player.snapshot(null!==(i=null==e?void 0:e.name)&&void 0!==i?i:(new Date).getTime(),"jpeg","",!0))}),200)),s&&s.appendChild(c),r.event.on("EVENT_CALLBACK",(function(e){"appearFirstFrameCallback"===e.data.type&&o(c,"".concat(n,"-disable"))})),["urlChange","pause","stop"].forEach((function(e){r.event.on(e,(function(){i(c,"".concat(n,"-disable"))}))})),c}}
/*
*
* @ezuikit/theme-plugin-deviceinfo v0.1.0
* Copyright (c) 2024-3-23 Ezviz-OpenBiz
* Released under MIT the License.
*
*/()},{name:"volume",plugin:
/*
*
* @ezuikit/theme-plugin-volume v0.1.0
* Copyright (c) 2024-3-23 Ezviz-OpenBiz
* Released under MIT the License.
*
*/
function(e){return function(t){var r=t,c=!(!1!==r.options.audio),s=b(null==e?void 0:e.icon),l=g(null==e?void 0:e.icon);i(l,"".concat(n,"-active"));var d=r.$container.querySelector(".".concat(H)),u=document.createElement("div");function p(e){e?(u.innerHTML="",u.appendChild(s)):(u.innerHTML="",u.appendChild(l))}return i(u,"".concat(D,"-item"),"".concat(n,"-disable")),u.appendChild(s),u.addEventListener("click",a((function(){u.classList.contains("".concat(n,"-disable"))||(c?r.player.setVolume(.8):r.player.setVolume(0),c=!c)}),100)),d&&d.appendChild(u),r.event.on("volumechange",(function(e){p(!(e.data>0))})),r.event.on("EVENT_CALLBACK",(function(e){"appearFirstFrameCallback"===e.data.type&&(o(u,"".concat(n,"-disable")),p(c),c?r.player.setVolume(0):r.player.setVolume(.8))})),["urlChange","pause","stop","talk"].forEach((function(e){r.event.on(e,(function(){u.innerHTML="",u.appendChild(s),i(u,"".concat(n,"-disable"))}))})),u}}()},{name:"record",plugin:function(e){return function(t){var r=t,a=!1,c=new we;r.player.use(c);var s=m(null==e?void 0:e.icon),l=r.$container.querySelector(".".concat(H)),d=r.$container.querySelector(".".concat(D));i(s,"".concat(n,"-disable"));var u=new _e(d,{bottom:r.options.isMobile?36:102});function p(){a&&(u.hide(),c.stopRecord(),s.classList.remove("".concat(n,"-active")),r.event.emit("stopRecord"),a=!1)}return s.addEventListener("click",(function(){s.classList.contains("".concat(n,"-disable"))||r.player.playing&&(a?p():(a||(u.show(),c.startRecord(),a=!0),s.classList.add("".concat(n,"-active")),r.event.emit("startRecord")))})),["urlChange","talk","destroy","stop","pause","seek"].forEach((function(e){r.event.on(e,(function(){p()}))})),["urlChange","stop","pause"].forEach((function(e){r.event.on(e,(function(){i(s,"".concat(n,"-disable"))}))})),r.event.on("EVENT_CALLBACK",(function(e){"appearFirstFrameCallback"===e.data.type&&o(s,"".concat(n,"-disable"))})),l&&l.appendChild(s),s}}()},{name:"zoom",plugin:function(e){return function(t){var r=t,a=!1,c=h(null==e?void 0:e.icon),s=r.$container.querySelector(".".concat(H)),l=r.$container.querySelector(".".concat(E));if(i(c,"".concat(n,"-disable")),l){var d=new re(l,{bottom:t.options.isMobile?40:80,left:12,maxScale:8,scale:r.options.isMobile?.8:1,onClick:function(e){8===e&&t.message.show('<span style="padding: 4px 16px;background: #00000080;color: #FFFFFF;font-size: 14px">已经放大到最大倍数'.concat(8..toFixed(1),"X</span>"),2e3),1===e&&t.message.show('<span style="padding: 4px 16px;background: #00000080;color: #FFFFFF;font-size: 14px">已经缩小到最小倍数1.0X</span>',2e3)}},t);c.addEventListener("click",(function(){c.classList.contains("".concat(n,"-disable"))||(a?(d.hide(),o(c,"".concat(n,"-active"))):(d.show(),i(c,"".concat(n,"-active"))),a=!a)})),r.event.on("EVENT_CALLBACK",(function(e){"appearFirstFrameCallback"===e.data.type&&o(c,"".concat(n,"-disable"))})),r.event.on("urlChange",(function(){d.hide(),a=!1,o(c,"".concat(n,"-active"))}))}return s&&s.appendChild(c),c}}()},{name:"playbackRate",plugin:function(e){return function(t){var r=t,a=!1,c=document.createElement("div");i(c,"".concat(D,"-item"),"".concat(n,"-playbackRate")),c.innerHTML='<button class="'.concat(n,"-btn ").concat(n,'-btn-default">倍速</button>');var s=r.$container.querySelector(".".concat($));if(s){s.appendChild(c);var l=c.getElementsByClassName("".concat(n,"-btn"))[0];i(l,"".concat(n,"-disable"));var d=new De(c,{theme:r,rates:(null==e?void 0:e.list)||[],isMobile:r.options.isMobile,open:!1,onOpenChange:function(e){l&&!e&&o(l,"".concat(n,"-active")),a=!!e},onChange:function(e){l&&(l.innerHTML=1===(null==e?void 0:e.rate)?"倍速":(null==e?void 0:e.text)||""),r.setPlaybackRate(null==e?void 0:e.rate),o(l,"".concat(n,"-active")),a=!1}});l.addEventListener("click",(function(e){l.classList.contains("".concat(n,"-disable"))||(a?(d.hide(),a=!1,o(l,"".concat(n,"-active"))):(d.show(),a=!0,i(l,"".concat(n,"-active"))),e.stopPropagation(),e.preventDefault())})),r.event.on("EVENT_CALLBACK",(function(e){"appearFirstFrameCallback"===e.data.type&&(o(l,"".concat(n,"-disable")),d.current>1&&r.setPlaybackRate(d.current||1))})),["urlChange","pause","stop"].forEach((function(e){r.event.on(e,(function(){i(l,"".concat(n,"-disable"))}))})),r.event.on("urlChange",(function(){d.selectedCurrent(1)})),r.event.on("seek",(function(){d.selectedCurrent(d.current||1)}))}return c}}()},{name:"webFullscreen",plugin:function(e){return function(t){var o=t,r=W(),a=document.createElement("div");i(a,"".concat(D,"-item"),"".concat(n,"-webFullScreen"));var c=d(null==e?void 0:e.icon),s=u(null==e?void 0:e.exitIcon);function l(){var e=(r=W())?s:c;a.innerHTML="",a.appendChild(e)}i(s,"".concat(n,"-active")),l();var p=o.$container.querySelector(".".concat($));return p&&p.appendChild(a),a.addEventListener("click",(function(){r?t.exitScreen().then((function(){l()})):t.webFullScreen().then((function(){l()}))})),t.event.on("exitScreen",(function(){l()})),a}}()},{name:"fullscreen",plugin:function(e){return function(t){var o=t,r=U(),a=document.createElement("div");i(a,"".concat(D,"-item"),"".concat(n,"-fullScreen"));var c=s(null==e?void 0:e.icon),d=l(null==e?void 0:e.exitIcon);function u(){var e=(r=U()||o.mobileFullScreen)?d:c;a.innerHTML="",a.appendChild(e)}d.classList.add("".concat(n,"-active")),u();var p=o.$container.querySelector(".".concat($));return p&&p.appendChild(a),a.addEventListener("click",(function(){r?t.exitScreen().then((function(){u()})):t.fullScreen().then((function(){u()}))})),t.event.on("exitScreen",(function(){u()})),a}}()},{name:"timeline",plugin:function(e){var t=e,o=n+"-timeline",i=document.createElement("div");i.classList.add(o+"-container"),i.style.display="flex";var a,c=null,s=[],l=0,d=0,u={},p=!1;if(t.options.isMobile){o+="-mobile",i.innerHTML='\n        <div class="'+o+'-container">\n          <div class="'+o+'-current">\n            <div class="'+o+'-current-time-bg" id="time-line-current">00:00:00</div>\n          </div>\n          <div class="'+o+'-item-container">\n            <div class="'+o+'-item"></div>\n          </div>\n        </div>\n      ';var h=t.$container.querySelector("."+N);h&&(h.appendChild(i),a=new Ye(i.querySelector("."+o+"-item"),{onCurrent:function(e){var t=i.querySelector("."+o+"-current-time-bg");t&&(t.innerHTML=e)},onChange:function(e){var n,o=null==(n=t.urlInfo.searchParams)?void 0:n.begin;if((null==s?void 0:s.length)||o){var i;t.logger.log("[MobileTimeLine]: onChange ",e);var r=_((null==(i=s[0])?void 0:i.startTime)||o||_()).format("YYYY-MM-DD");g(_(r+" "+e))}}}))}else{var f=document.createElement("div");r(f,{display:"inline-flex",flexDirection:"column",justifyContent:"center",verticalAlign:"top",padding:"0 20px"}),f.innerHTML='\n            <span style="vertical-Align: middle;line-height: 14px;height: 18px; width: 18px;cursor:pointer;" class="'+n+'-timeline-scale-add">\n            <svg fill="#2C2C2C" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n              <g>\n                <polygon points="0.1,0.5 15,0.5 15,15.4 0.1,15.4 \t"></polygon>\n              </g>\n              <g>\n                <path fill="#FFFFFF" d="M7.6,12.4c-0.3,0-0.5-0.2-0.5-0.5v-8c0-0.3,0.2-0.5,0.5-0.5s0.5,0.2,0.5,0.5v8C8.1,12.2,7.9,12.4,7.6,12.4z"></path>\n              </g>\n              <g>\n                <path fill="#FFFFFF"  d="M11.6,8.4h-8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h8c0.3,0,0.5,0.2,0.5,0.5S11.8,8.4,11.6,8.4z"></path>\n              </g>\n            </svg>\n            </span>\n            <span style="vertical-Align: middle;line-height: 14px;height: 18px; width: 18px;cursor:pointer;" class="'+n+'-timeline-scale-sub">\n            <svg fill="#2C2C2C" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">\n              <g>\n                <polygon points="1,0.8 15.2,0.8 15.2,15 1,15"></polygon>\n              </g>\n              <g>\n                <path fill="#FFFFFF" d="M12.1,8.4h-8c-0.3,0-0.5-0.2-0.5-0.5s0.2-0.5,0.5-0.5h8c0.3,0,0.5,0.2,0.5,0.5S12.4,8.4,12.1,8.4z"></path>\n              </g>\n            </svg>\n            </span>\n      ',a=new Ae(i),i.append(f);var v=0;qe(f,"."+n+"-timeline-scale-add",(function(e){++v>=3&&(v=3),a.changeScale(v)})),qe(f,"."+n+"-timeline-scale-sub",(function(e){--v<=0&&(v=0),a.changeScale(v)}));var m=t.$container.querySelector("."+R);m&&(a.init({width:b(),newTime:null,onChange:function(e){t.logger.log("[TimeLine]: onChange ",e),g(e)}}).then((function(){a.setCurrent(new Date((new Date).setHours(0,0,0,0))),t.logger.log("[TimeLine] init finished")})).catch((function(){})),m.appendChild(i),a.setWidth({width:b()}))}function b(){return parseInt(getComputedStyle(t.$container.querySelector("."+D)).width,10)-58-40}function g(e){var n,o,i,r,u="YYYYMMDDTHHmmss",h=_(e),f=_((null==(n=t.urlInfo.searchParams)?void 0:n.begin)||_()),v=s.length||(null==(o=t.urlInfo.searchParams)?void 0:o.end)?_((null==(i=t.urlInfo.searchParams)?void 0:i.end)||(null==(r=s[s.length-1])?void 0:r.endTime)):_(f.format("YYYY-MM-DD 23:59:59"));return l=h.valueOf(),d=l>1e3*(t.getOSDTime()||0)?1:2,t.event.emit("timeLineChange",l),h>=v?(l=0,d=0,clearInterval(c),t.stop(),p=!0,a.setCurrent(v.valueOf()),void t.message.showError("查找录像开始时间错误")):p?(t.play({url:Pe(t.options.url,{search:"begin="+h.format("YYYYMMDDHHmmss")})}),void(p=!1)):(s[0]&&h<=_(s[0].startTime)&&(a.setCurrent(_(s[0].startTime).valueOf()),h=_(s[0].startTime)),void(y()?(t.loading.show(),t.seek(h.format(u)+"Z",v.format(u)+"Z").catch((function(){t.loading.hide()}))):(t.loading.show(),t.pause(h.format("YYYYMMDDHHmmss")).then((function(){t.resume(h.format("YYYYMMDDHHmmss")).catch((function(){t.loading.hide()}))})).catch((function(){t.loading.hide()})))))}function y(){return"cloud"===t.urlInfo.recType||t.options.useSeek&&"1"===(null==u?void 0:u.support_seek_playback)}return t.event.on("network.videoFragmentFiles",(function(e){var n=e.data,o=n.length,i=[];if(t.options.isMobile){for(var r=o-1;r>=0;r--)i.push({startTime:je(n[r].startTime),endTime:je(n[r].endTime)});a.setRecord(i),s=e.data}else a.setRecord(e.data),s=e.data})),t.event.on("network.deviceCapacity",(function(e){u=e})),t.event.on("EVENT_CALLBACK",(function(e){if("appearFirstFrameCallback"===e.data.type){c&&(clearInterval(c),c=null);var n=0;c=window.setInterval((function(){if(a)if((n=1e3*(t.getOSDTime()||0))&&"number"==typeof n){if(t.options.isMobile?a.setCurrent(je(l>0?l:n)):a.setCurrent(l>0?l:n),1===d)n>=l&&(t.loading.hide(),l=0,d=0),t.logger.log("drag <- _seekTime: ",l);else if(2===d&&y()){var e=setTimeout((function(){t.loading.hide(),l=0,d=0,clearTimeout(e)}),3e3);t.logger.log("drag -> _seekTime: ",l)}else 2!==d||y()||(l=0,d=0);var o=s.length?_(s[s.length-1].endTime):_();y()&&n>=o.valueOf()&&t.event.emit("EVENT_CALLBACK",{data:{type:"pluginErrorHandler",code:6701}})}else t.logger.warn("getOSDTime ",n)}),1e3)}else if("setRunTimeInfoCallBack"===e.data.type){var o,i;5!==(null==e||null==(i=e.data)||null==(o=i.data)?void 0:o.nErrorCode)||p||(l=0,d=0,p=!0)}})),t.event.on("StreamClient.autoClose",(function(){l=0,d=0,p=!0})),["playError","pause","stop","destroy"].forEach((function(e){t.event.on(e,(function(){c&&(window.clearInterval(c),c=null)}))})),t.event.on("urlChange",(function(){a.setRecord([]),"function"==typeof a.update&&a.update({}),s=[]})),t.options.isMobile||t.event.on("resize",(function(e){setTimeout((function(){var t,n;(null==(t=e.data)?void 0:t.width)>0&&a.setWidth({width:(null==(n=e.data)?void 0:n.width)-58-40})}),10)})),i}},{name:"datepicker",plugin:function(e){var t=e,a=C(null==Lt?void 0:Lt.icon);i(a,n+"-calendar"),r(a,{color:"#FFF"});var c=_(t.urlInfo.searchParams.begin+"");if(c.isValid()||(c=_(_().format("YYYY-MM-DD 00:00:00"))),t.options.isMobile){var s=t.$container.querySelector("."+A);if(s){s.innerHTML='<div class="'+n+'-mobile-extend-date-title">今日录像</div>\n          <div class="'+n+'-mobile-extend-date-container">\n            <div>\n                <label for="date">\n                  <img src=\'https://resource.eziot.com/group2/M00/00/6A/CtwQF2F6VieAQrU9AAABP-_Nsqo949.png\' />\n                </label>\n                <input type="date" name="date" value="'+c.format("YYYY-MM-DD")+'"  />\n              </div>\n          </div>';var l=s.querySelector('input[type="date"]');l&&(null==l||l.addEventListener("change",(function(e){var t=e.target.value||_().format("YYYY-MM-DD");p(t),l.value=t})))}}else{var d=new wt({getPopupContainer:function(){return a},current:c,showTime:!0,showToday:!0,onChange:function(e){p(e)}}),u=t.$container.querySelector("."+F);u&&u.appendChild(a),a.addEventListener("click",(function(){a.classList.contains(n+"-disable")})),t.event.on("resize",(function(){d.hide()})),t.event.on("urlChange",(function(){d.hide()}))}function p(e){t.logger.log("date change: ",e),t.options.url=Pe(t.options.url,{search:"begin="+_(e).format("YYYYMMDDHHmmss")+"&end="}),t.event.emit("datePickerChange",{data:_(e)}),t.play({url:t.options.url})}return t.event.on("EVENT_CALLBACK",(function(e){"appearFirstFrameCallback"===e.data.type&&o(a,n+"-disable")})),a}},{name:"deviceID",plugin:function(e){var t=e,n=t.$container.querySelector(".".concat(Y))||document.createElement("div");i(n,Y);var o=document.createElement("span");i(o,j),o.innerHTML=X,o.title=X,t.event.on("network.deviceInfo",(function(e){var t,n=(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.deviceSerial)||X;o.innerHTML=n,o.title=n})),n.appendChild(o);var r=t.$container.querySelector(".".concat(M));return r&&r.appendChild(n),n}},{name:"deviceName",plugin:function(e){var t=e,n=t.$container.querySelector(".".concat(Y))||document.createElement("div");i(n,Y);var o=document.createElement("span");i(o,q),o.innerHTML=V,o.title=V,t.event.on("network.deviceInfo",(function(e){var t,n=(null===(t=null==e?void 0:e.data)||void 0===t?void 0:t.deviceName)||V;o.innerHTML=n,o.title=n})),n.appendChild(o);var r=t.$container.querySelector(".".concat(M));return r&&r.appendChild(n),n}},{name:"recTypes",plugin:function(e){return function(t){var r,a,c,s=t,l=(null===(r=s.options)||void 0===r?void 0:r.recTypes)||[];if(0!==l.length){var d=document.createElement("div");i(d,"".concat(n,"-rec-types"));var u={cloud_record:y(null==e?void 0:e.cloudRecordIcon),cloud:k((null!==(a=null==e?void 0:e.cloudIcon)&&void 0!==a?a:s.options.isMobile)?'<svg viewBox="0 0 20 20" focusable="false" data-icon="sdk" width="1em" height="1em" fill="currentColor" aria-hidden="true">\n        <path d="m9.8,3.25c-2.3,0.1 -4.3,1.4 -5.3,3.3l-0.1,0.3c-2.4,0.5 -4.1,2.5 -4.1,4.9c0,2.8 2.4,5 5.2,5l9.9,0c2.4,0 4.3,-1.9 4.3,-4.2l0,-0.2c-0.1,-2 -1.6,-3.5 -3.5,-3.9l-0.1,0l0,-0.2c-0.4,-2.8 -3,-5 -6.1,-5l-0.2,0z"/>\n      </svg>':void 0),local:x((null!==(c=null==e?void 0:e.localIcon)&&void 0!==c?c:s.options.isMobile)?'<svg viewBox="0 0 20 20" focusable="false" data-icon="sdk" width="1em" height="1em" fill="currentColor" aria-hidden="true"><path d="m11.8,2.04655c0.6,0 1.2,0.2 1.7,0.7l0,0l2.3,2.3c0.4,0.4 0.7,1 0.7,1.6l0,0l0,9c0,1.3 -1.1,2.3 -2.4,2.3l0,0l-8.2,0c-1.3,0.1 -2.4,-0.9 -2.4,-2.2l0,0l0,-11.4c0,-1.3 1.1,-2.3 2.4,-2.3l0,0l5.9,0zm-4.6,3.2c-0.4,0 -0.8,0.4 -0.8,0.8l0,0l0,2.5l0,0.1c0,0.4 0.4,0.6 0.7,0.6c0.4,0 0.8,-0.3 0.8,-0.8l0,0l0,-2.4l0,-0.1c0,-0.4 -0.4,-0.7 -0.7,-0.7zm2.5,0c-0.4,0 -0.8,0.3 -0.8,0.8l0,0l0,2.5l0,0.1c0,0.4 0.4,0.6 0.7,0.6c0.4,0 0.8,-0.3 0.8,-0.8l0,0l0,-2.4l0,-0.1c0,-0.4 -0.4,-0.7 -0.7,-0.7zm2.5,0c-0.4,0 -0.8,0.3 -0.8,0.8l0,0l0,2.5l0,0.1c0,0.4 0.4,0.6 0.7,0.6c0.4,0 0.8,-0.3 0.8,-0.8l0,0l0,-2.4l0,-0.1c0,-0.4 -0.4,-0.7 -0.7,-0.7z" /></svg>':void 0)};if(l.forEach((function(e){var t=u[e];t.addEventListener("click",(function(r){l.forEach((function(e){o(u[e],"".concat(n,"-active"))})),i(t,"".concat(n,"-active"));var a="";switch(e){case"cloud":a=Pe(s.options.url,{type:"rec",recType:"cloud",search:"busType="});break;case"cloud_record":a=Pe(s.options.url,{type:"rec",recType:"cloud",search:"busType=7"});break;case"local":a=Pe(s.options.url,{type:"rec",recType:"",search:"busType="})}s.event.emit("recTypesChange",{data:e}),a&&(s.options.url=a,s.play({url:a})),r.stopPropagation()}),!1),d.appendChild(t)})),s.options.isMobile){var p=s.$container.querySelector(".".concat(B));p&&(p.innerHTML="<div style='padding: 0 15px; font-size: 12px; line-height: 24px;'>共<span>0</span>个录像</div>",p.appendChild(d),s.event.on("network.videoFragmentFiles",(function(e){var t,n=(null===(t=e.data)||void 0===t?void 0:t.length)||0;p.querySelector("span")&&(p.querySelector("span").innerHTML=n)})))}else{var h=s.$container.querySelector(".".concat(L));h&&!s.options.isMobile&&h.appendChild(d)}return s.urlInfo&&("cloud"===s.urlInfo.recType&&7==+s.urlInfo.searchParams.busType?i(u.cloud_record,"".concat(n,"-active")):"cloud"===s.urlInfo.recType?i(u.cloud,"".concat(n,"-active")):"rec"===s.urlInfo.type&&i(u.local,"".concat(n,"-active"))),d}}}()}]);export{Dt as default};
